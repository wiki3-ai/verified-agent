<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ld - ACL2 Book</title>
  <meta property="name" content="ld">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">ld</h1>
    <div class="path"><a href="ld.lisp" class="source-link">ld</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-a.html#def-defrec" data-sym="DEFREC">defrec</a> ld-prompt-memo
  ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> ld-level . <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>) mode
    not-gc-off . alist)
  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-default-print-prompt" data-defines="DEFAULT-PRINT-PROMPT" data-references="GC-OFF,MAKE,F-PUT-GLOBAL,PPROGN,MAKE-LIST-AC,DEFUN-MODE-PROMPT-STRING,CONS,LIST,ALIST,T,FMT1,GUARD-CHECKING-ON,W,DEFAULT-DEFUN-MODE,RAW-MODE-P,NOT,LD-SKIP-PROOFSP,EQ,LD-LEVEL,CURRENT-PACKAGE,LD-PROMPT-MEMO,ACCESS,EQUAL,AND,COND,QUOTE,F-GET-GLOBAL,PROMPT-MEMO,LET,STATE,CHANNEL,DEFUN" data-used-by="PRINT-PROMPT" data-part-name="DEFAULT-PRINT-PROMPT" data-part-args="STATE,CHANNEL" data-part-body="GC-OFF,MAKE,F-PUT-GLOBAL,PPROGN,MAKE-LIST-AC,DEFUN-MODE-PROMPT-STRING,CONS,LIST,ALIST,T,CHANNEL,FMT1,GUARD-CHECKING-ON,W,DEFAULT-DEFUN-MODE,RAW-MODE-P,NOT,LD-SKIP-PROOFSP,EQ,LD-LEVEL,CURRENT-PACKAGE,LD-PROMPT-MEMO,ACCESS,EQUAL,AND,COND,STATE,QUOTE,F-GET-GLOBAL,PROMPT-MEMO,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFAULT-PRINT-PROMPT">default-print-prompt</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-default-print-prompt" data-sym="DEFAULT-PRINT-PROMPT" title="(defun default-print-prompt (channel state)
  (let ((prompt-memo (f-get-global &#39;prompt-memo state)))
    (cond
     ((and prompt-memo
           (equal (access ld-prompt-memo prompt-memo :current-package)
...">default-print-prompt</a>
  (channel state)
  (let ((prompt-memo (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'prompt-memo state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> prompt-memo
         (equal (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-prompt-memo prompt-memo <span class="keyword">:current-package</span>)
           (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state))
         (equal (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-prompt-memo prompt-memo <span class="keyword">:ld-level</span>)
           (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state))
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-prompt-memo prompt-memo <span class="keyword">:ld-skip-proofsp</span>)
           (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state))
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-prompt-memo prompt-memo <span class="keyword">:mode</span>)
           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state))
             (<a class="sym-link system" href="axioms.html#def-default-defun-mode" data-sym="DEFAULT-DEFUN-MODE">default-defun-mode</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-prompt-memo prompt-memo <span class="keyword">:not-gc-off</span>)
           (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on state))) (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> <span class="string">"~@0~sr ~@1~*2"</span>
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-prompt-memo prompt-memo <span class="keyword">:alist</span>)
          <span class="number">0</span>
          channel
          state
          nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((alist (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state))
               (cons #\1 (<a class="sym-link system" href="rewrite.html#def-defun-mode-prompt-string" data-sym="DEFUN-MODE-PROMPT-STRING">defun-mode-prompt-string</a> state))
               (cons #\2
                 (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span>
                   <span class="string">"&gt;"</span>
                   <span class="string">"&gt;"</span>
                   <span class="string">"&gt;"</span>
                   (<a class="sym-link system" href="axioms.html#def-make-list-ac" data-sym="MAKE-LIST-AC">make-list-ac</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state) nil nil)))
               (cons #\r <span class="string">""</span>))))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'prompt-memo
              (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> ld-prompt-memo
                <span class="keyword">:current-package</span> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
                <span class="keyword">:ld-level</span> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state)
                <span class="keyword">:ld-skip-proofsp</span> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
                <span class="keyword">:mode</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state))
                  (<a class="sym-link system" href="axioms.html#def-default-defun-mode" data-sym="DEFAULT-DEFUN-MODE">default-defun-mode</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
                <span class="keyword">:not-gc-off</span> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (gc-off state))
                <span class="keyword">:alist</span> alist)
              state)
            (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> <span class="string">"~@0~sr ~@1~*2"</span> alist <span class="number">0</span> channel state nil)))))))</pre>
  </div>

<div class="form-block function" id="def-print-prompt" data-defines="PRINT-PROMPT" data-references="FMT1,CDR,INTEGERP,CAR,EQUAL,AND,NOT,OR,LIST,TRANS-EVAL-DEFAULT-WARNING,TRANS-ANS,ERP,MV-LET,DEFAULT-PRINT-PROMPT,MV,PROMPT-FUNCTION,QUOTE,F-GET-GLOBAL,T,EQ,NULL,COND,PROMPT-FN,LET,COL,WITH-OUTPUT-FORCED,STATE,OUTPUT-CHANNEL,PROMPT,DEFUN" data-used-by="LD-PRINT-PROMPT" data-part-name="PRINT-PROMPT" data-part-args="STATE,OUTPUT-CHANNEL,PROMPT" data-part-body="FMT1,CDR,INTEGERP,CAR,EQUAL,AND,NOT,OR,PRINT-PROMPT,LIST,TRANS-EVAL-DEFAULT-WARNING,TRANS-ANS,ERP,MV-LET,DEFAULT-PRINT-PROMPT,MV,PROMPT-FUNCTION,QUOTE,F-GET-GLOBAL,T,EQ,PROMPT,NULL,COND,PROMPT-FN,LET,STATE,COL,OUTPUT-CHANNEL,WITH-OUTPUT-FORCED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-PROMPT">print-prompt</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-prompt" data-sym="PRINT-PROMPT" title="(defun print-prompt (prompt output-channel state)
  (with-output-forced output-channel (col state)
                      (let ((prompt-fn
                             (cond ((null prompt) nil)
                                   ((eq prompt t)
...">print-prompt</a>
  (prompt output-channel state)
  (with-output-forced output-channel
    (col state)
    (let ((prompt-fn (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> prompt) nil)
           ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> prompt <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'prompt-function state))
           (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> prompt))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> prompt-fn) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="number">0</span> state))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> prompt-fn '<a class="sym-link local-def" href="#def-default-print-prompt" data-sym="DEFAULT-PRINT-PROMPT" title="(defun default-print-prompt (channel state)
  (let ((prompt-memo (f-get-global &#39;prompt-memo state)))
    (cond
     ((and prompt-memo
           (equal (access ld-prompt-memo prompt-memo :current-package)
...">default-print-prompt</a>) (<a class="sym-link local-def" href="#def-default-print-prompt" data-sym="DEFAULT-PRINT-PROMPT" title="(defun default-print-prompt (channel state)
  (let ((prompt-memo (f-get-global &#39;prompt-memo state)))
    (cond
     ((and prompt-memo
           (equal (access ld-prompt-memo prompt-memo :current-package)
...">default-print-prompt</a> output-channel state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp trans-ans state)
            (trans-eval-default-warning (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> prompt-fn (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote output-channel) 'state)
              '<a class="sym-link local-def" href="#def-print-prompt" data-sym="PRINT-PROMPT" title="(defun print-prompt (prompt output-channel state)
  (with-output-forced output-channel (col state)
                      (let ((prompt-fn
                             (cond ((null prompt) nil)
                                   ((eq prompt t)
...">print-prompt</a>
              state
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (car trans-ans) '(nil state))
                     (integerp (car (cdr trans-ans)))))) (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> <span class="string">"~%~%Bad Prompt~%See :DOC ld-prompt&gt;"</span>
                  nil
                  <span class="number">0</span>
                  output-channel
                  state
                  nil))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car (cdr trans-ans)) state)))))))))</pre>
  </div>

<div class="form-block function" id="def-initialize-timers" data-defines="INITIALIZE-TIMERS" data-references="OTHER-TIME,PROOF-TREE-TIME,PRINT-TIME,PROVE-TIME,QUOTE,SET-TIMER,PPROGN,STATE,DEFUN" data-used-by="LD-READ-EVAL-PRINT" data-part-name="INITIALIZE-TIMERS" data-part-args="STATE" data-part-body="OTHER-TIME,PROOF-TREE-TIME,PRINT-TIME,STATE,PROVE-TIME,QUOTE,SET-TIMER,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INITIALIZE-TIMERS">initialize-timers</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-initialize-timers" data-sym="INITIALIZE-TIMERS" title="(defun initialize-timers (state)
  (pprogn (set-timer &#39;prove-time &#39;(0) state) (set-timer &#39;print-time &#39;(0) state)
          (set-timer &#39;proof-tree-time &#39;(0) state)
          (set-timer &#39;other-time &#39;(0) state)))">initialize-timers</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-set-timer" data-sym="SET-TIMER">set-timer</a> 'prove-time '(<span class="number">0</span>) state)
    (<a class="sym-link system" href="axioms.html#def-set-timer" data-sym="SET-TIMER">set-timer</a> 'print-time '(<span class="number">0</span>) state)
    (<a class="sym-link system" href="axioms.html#def-set-timer" data-sym="SET-TIMER">set-timer</a> 'proof-tree-time '(<span class="number">0</span>) state)
    (<a class="sym-link system" href="axioms.html#def-set-timer" data-sym="SET-TIMER">set-timer</a> 'other-time '(<span class="number">0</span>) state)))</pre>
  </div>

<div class="form-block function" id="def-world-extended-p" data-defines="WORLD-EXTENDED-P" data-references="TOP-LEVEL-CLTL-COMMAND-STACK,EVENT-INDEX,GLOBAL-VALUE,EVENT-LANDMARK,CDR,&,EMPTY-EVENT-KEY,TABLE-ALIST,ACL2-SYSTEM-TABLE,CASE-MATCH,CAR,TRIP2,LET,T,EQ,WORLD-EXTENDED-P1,QUOTE,HARD,ER,ENDP,COND,WRLD,OLD-WRLD,DEFUN" data-used-by="MAYBE-ADD-COMMAND-LANDMARK" data-part-name="WORLD-EXTENDED-P" data-part-args="WRLD,OLD-WRLD" data-part-body="TOP-LEVEL-CLTL-COMMAND-STACK,EVENT-INDEX,GLOBAL-VALUE,EVENT-LANDMARK,CDR,WORLD-EXTENDED-P,&,EMPTY-EVENT-KEY,TABLE-ALIST,ACL2-SYSTEM-TABLE,CASE-MATCH,CAR,TRIP2,LET,T,OLD-WRLD,EQ,WORLD-EXTENDED-P1,QUOTE,HARD,ER,WRLD,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WORLD-EXTENDED-P">world-extended-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-world-extended-p" data-sym="WORLD-EXTENDED-P" title="(defun world-extended-p (old-wrld wrld)
  (cond
   ((endp wrld)
    (er hard &#39;world-extended-p1
        &quot;Implementation error: Unexpected empty world!&quot;))
...">world-extended-p</a>
  (old-wrld wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> wrld) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        'world-extended-p1
        <span class="string">"Implementation error: Unexpected empty world!"</span>))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> old-wrld wrld) <span class="keyword">:trivial</span>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((trip2 (car wrld)))
        (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> trip2
          (('acl2-system-table '<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> ('empty-event-key . &amp;)) (<a class="sym-link local-def" href="#def-world-extended-p" data-sym="WORLD-EXTENDED-P" title="(defun world-extended-p (old-wrld wrld)
  (cond
   ((endp wrld)
    (er hard &#39;world-extended-p1
        &quot;Implementation error: Unexpected empty world!&quot;))
...">world-extended-p</a> old-wrld (cdr wrld)))
          (('event-landmark 'global-value . &amp;) (<a class="sym-link local-def" href="#def-world-extended-p" data-sym="WORLD-EXTENDED-P" title="(defun world-extended-p (old-wrld wrld)
  (cond
   ((endp wrld)
    (er hard &#39;world-extended-p1
        &quot;Implementation error: Unexpected empty world!&quot;))
...">world-extended-p</a> old-wrld (cdr wrld)))
          (('event-index 'global-value . &amp;) (<a class="sym-link local-def" href="#def-world-extended-p" data-sym="WORLD-EXTENDED-P" title="(defun world-extended-p (old-wrld wrld)
  (cond
   ((endp wrld)
    (er hard &#39;world-extended-p1
        &quot;Implementation error: Unexpected empty world!&quot;))
...">world-extended-p</a> old-wrld (cdr wrld)))
          (('top-level-cltl-command-stack 'global-value . &amp;) (<a class="sym-link local-def" href="#def-world-extended-p" data-sym="WORLD-EXTENDED-P" title="(defun world-extended-p (old-wrld wrld)
  (cond
   ((endp wrld)
    (er hard &#39;world-extended-p1
        &quot;Implementation error: Unexpected empty world!&quot;))
...">world-extended-p</a> old-wrld (cdr wrld)))
          (&amp; <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))))</pre>
  </div>

<div class="form-block function" id="def-maybe-add-command-landmark" data-defines="MAYBE-ADD-COMMAND-LANDMARK" data-references="SET-W!,VALUE,LAST-MAKE-EVENT-EXPANSION,CONNECTED-BOOK-DIRECTORY,F-GET-GLOBAL,ADD-COMMAND-LANDMARK,EXTENSION,SET-W,WARNING$,RAW-MODE-P,PPROGN,PRIMITIVE-EVENT-MACROS,TOP-LEVEL,OTHERWISE,CADR,TIME$,CASE,CONSP,GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION,ER-PROGN,T,COND,WORLD-EXTENDED-P,GLOBAL-VALUE,CADAR,COMMAND-LANDMARK,CAAR,EQ,NOT,CAR,QUOTE,MEMBER-EQ,AND,EXT,W,WRLD,LET*,STATE,TRANS-ANS,FORM,OLD-DEFAULT-DEFUN-MODE,OLD-WRLD,DEFUN" data-used-by="LD-READ-EVAL-PRINT-SIMPLE,LD-READ-EVAL-PRINT" data-part-name="MAYBE-ADD-COMMAND-LANDMARK" data-part-args="STATE,TRANS-ANS,FORM,OLD-DEFAULT-DEFUN-MODE,OLD-WRLD" data-part-body="SET-W!,VALUE,LAST-MAKE-EVENT-EXPANSION,CONNECTED-BOOK-DIRECTORY,F-GET-GLOBAL,OLD-DEFAULT-DEFUN-MODE,ADD-COMMAND-LANDMARK,EXTENSION,SET-W,WARNING$,RAW-MODE-P,PPROGN,PRIMITIVE-EVENT-MACROS,TOP-LEVEL,OTHERWISE,CADR,TIME$,CASE,FORM,CONSP,GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION,ER-PROGN,T,COND,OLD-WRLD,WORLD-EXTENDED-P,GLOBAL-VALUE,CADAR,COMMAND-LANDMARK,CAAR,EQ,NOT,TRANS-ANS,CAR,QUOTE,MEMBER-EQ,AND,EXT,STATE,W,WRLD,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-ADD-COMMAND-LANDMARK">maybe-add-command-landmark</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-add-command-landmark" data-sym="MAYBE-ADD-COMMAND-LANDMARK" title="(defun maybe-add-command-landmark
       (old-wrld old-default-defun-mode form trans-ans state)
  (let* ((wrld (w state))
         (ext
          (and (member-eq &#39;state (car trans-ans))
...">maybe-add-command-landmark</a>
  (old-wrld old-default-defun-mode form trans-ans state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (ext (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state (car trans-ans))
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld) 'command-landmark)
              (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> wrld) 'global-value)))
          (<a class="sym-link local-def" href="#def-world-extended-p" data-sym="WORLD-EXTENDED-P" title="(defun world-extended-p (old-wrld wrld)
  (cond
   ((endp wrld)
    (er hard &#39;world-extended-p1
        &quot;Implementation error: Unexpected empty world!&quot;))
...">world-extended-p</a> old-wrld wrld))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ext <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (get-and-chk-last-make-event-expansion (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp form) (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (car form) (<a class="sym-link system" href="axioms.html#def-time_24" data-sym="TIME$">time$</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)) (otherwise form)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> form))
            wrld
            'top-level
            state
            (primitive-event-macros))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> 'top-level
                  <span class="string">"Raw"</span>
                  <span class="string">"The ACL2 world is being modified while in raw ~
                               mode.  See :DOC set-raw-mode.  Further ~
                               computation in this ACL2 session may have some ~
                               surprising results."</span>))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
            (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension
              (<a class="sym-link system" href="history-management.html#def-add-command-landmark" data-sym="ADD-COMMAND-LANDMARK">add-command-landmark</a> old-default-defun-mode
                form
                (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)
                (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'last-make-event-expansion state)
                wrld)
              state)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ext <span class="keyword">:trivial</span>) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w_21" data-sym="SET-W!">set-w!</a> old-wrld state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))</pre>
  </div>

<div class="form-block function" id="def-replace-last-cdr" data-defines="REPLACE-LAST-CDR" data-references="T,CAR,CONS,CDR,ATOM,COND,VAL,X,DEFUN" data-used-by="CHK-ACCEPTABLE-LD-FN1-PAIR" data-part-name="REPLACE-LAST-CDR" data-part-args="VAL,X" data-part-body="REPLACE-LAST-CDR,T,CAR,CONS,CDR,VAL,X,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REPLACE-LAST-CDR">replace-last-cdr</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-replace-last-cdr" data-sym="REPLACE-LAST-CDR" title="(defun replace-last-cdr (x val)
  (cond ((atom x) val) ((atom (cdr x)) (cons (car x) val))
        (t (cons (car x) (replace-last-cdr (cdr x) val)))))">replace-last-cdr</a>
  (x val)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) val)
    ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (cdr x)) (cons (car x) val))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car x) (<a class="sym-link local-def" href="#def-replace-last-cdr" data-sym="REPLACE-LAST-CDR" title="(defun replace-last-cdr (x val)
  (cond ((atom x) val) ((atom (cdr x)) (cons (car x) val))
        (t (cons (car x) (replace-last-cdr (cdr x) val)))))">replace-last-cdr</a> (cdr x) val)))))</pre>
  </div>

<div class="form-block function" id="def-ld-standard-oi-missing" data-defines="LD-STANDARD-OI-MISSING" data-references="SOFT,ER,WARNING$,PPROGN,STANDARD-OI,QUOTE,*LD-SPECIAL-ERROR*,MSG,LET,VALUE,T,EQ,COND,STATE,CTX,LD-MISSING-INPUT-OK,FILE-NAME,VAL,DEFUN" data-used-by="CHK-ACCEPTABLE-LD-FN1-PAIR" data-part-name="LD-STANDARD-OI-MISSING" data-part-args="STATE,CTX,LD-MISSING-INPUT-OK,FILE-NAME,VAL" data-part-body="SOFT,ER,CTX,WARNING$,PPROGN,FILE-NAME,VAL,STANDARD-OI,QUOTE,*LD-SPECIAL-ERROR*,MSG,LET,VALUE,T,LD-MISSING-INPUT-OK,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-STANDARD-OI-MISSING">ld-standard-oi-missing</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-standard-oi-missing" data-sym="LD-STANDARD-OI-MISSING" title="(defun ld-standard-oi-missing (val file-name ld-missing-input-ok ctx state)
  (cond ((eq ld-missing-input-ok t) (value nil))
        (t
         (let ((msg
                (msg &quot;~@0  It is likely that the file you requested, ~
...">ld-standard-oi-missing</a>
  (val file-name <a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0  It is likely that the file you requested, ~
                            ~x1, does not exist."</span>
             (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <a class="sym-link system" href="basis-b.html#def-_2Ald-special-error_2A" data-sym="*LD-SPECIAL-ERROR*">*ld-special-error*</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> val)
             file-name)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx <span class="string">"ld-missing-input"</span> <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)))))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-ld-fn1-pair" data-defines="CHK-ACCEPTABLE-LD-FN1-PAIR" data-references="OTHERWISE,CHK-LD-USER-STOBJS-MODIFIED-WARNING,LD-USER-STOBJS-MODIFIED-WARNING,CHK-LD-VERBOSE,LD-VERBOSE,CHK-LD-QUERY-CONTROL-ALIST,LD-QUERY-CONTROL-ALIST,CHK-LD-ERROR-ACTION,LD-ERROR-ACTION,CHK-LD-ERROR-TRIPLES,LD-ERROR-TRIPLES,CHK-EVISC-TUPLE,LD-EVISC-TUPLE,CHK-LD-POST-EVAL-PRINT,LD-POST-EVAL-PRINT,CHK-LD-PRE-EVAL-PRINT,LD-PRE-EVAL-PRINT,CHK-LD-PRE-EVAL-FILTER,LD-PRE-EVAL-FILTER,CHK-LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,CHK-LD-MISSING-INPUT-OK,CHK-LD-PROMPT,LD-PROMPT,CHK-LD-REDEFINITION-ACTION,LD-REDEFINITION-ACTION,CHK-LD-SKIP-PROOFSP,LD-SKIP-PROOFSP,USELESS-RUNES,CHK-CURRENT-PACKAGE,ER-PROGN,CURRENT-PACKAGE,OPEN-OUTPUT-CHANNEL,EQUAL,OPEN-OUTPUT-CHANNEL-P,*LD-SPECIAL-ERROR*,SOFT,ER,REPLACE-LAST-CDR,LAST,LAST-CONS,LET,CONSP,LD-STANDARD-OI-MISSING,T,CONS,OPEN-INPUT-CHANNEL,CH,MV-LET,TRUE-LISTP,VALUE,OPEN-INPUT-CHANNEL-P,SYMBOLP,COND,CASE,CONNECTED-BOOK-DIRECTORY,F-GET-GLOBAL,EXTEND-PATHNAME,STRINGP,PROOFS-CO,STANDARD-CO,STANDARD-OI,QUOTE,MEMBER-EQ,AND,FILE-NAME,CDR,VAL,CAR,VAR,LET*,CO-CHANNEL,CO-STRING,STATE,CTX,LD-MISSING-INPUT-OK,PAIR,DEFUN" data-used-by="CHK-ACCEPTABLE-LD-FN1" data-part-name="CHK-ACCEPTABLE-LD-FN1-PAIR" data-part-args="CO-CHANNEL,CO-STRING,STATE,CTX,LD-MISSING-INPUT-OK,PAIR" data-part-body="OTHERWISE,CHK-LD-USER-STOBJS-MODIFIED-WARNING,LD-USER-STOBJS-MODIFIED-WARNING,CHK-LD-VERBOSE,LD-VERBOSE,CHK-LD-QUERY-CONTROL-ALIST,LD-QUERY-CONTROL-ALIST,CHK-LD-ERROR-ACTION,LD-ERROR-ACTION,CHK-LD-ERROR-TRIPLES,LD-ERROR-TRIPLES,CHK-EVISC-TUPLE,LD-EVISC-TUPLE,CHK-LD-POST-EVAL-PRINT,LD-POST-EVAL-PRINT,CHK-LD-PRE-EVAL-PRINT,LD-PRE-EVAL-PRINT,CHK-LD-PRE-EVAL-FILTER,LD-PRE-EVAL-FILTER,CHK-LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,CHK-LD-MISSING-INPUT-OK,CHK-LD-PROMPT,LD-PROMPT,CHK-LD-REDEFINITION-ACTION,LD-REDEFINITION-ACTION,CHK-LD-SKIP-PROOFSP,LD-SKIP-PROOFSP,USELESS-RUNES,CHK-CURRENT-PACKAGE,ER-PROGN,CURRENT-PACKAGE,OPEN-OUTPUT-CHANNEL,CO-CHANNEL,CO-STRING,EQUAL,OPEN-OUTPUT-CHANNEL-P,*LD-SPECIAL-ERROR*,SOFT,ER,REPLACE-LAST-CDR,LAST,LAST-CONS,LET,CONSP,CTX,LD-MISSING-INPUT-OK,LD-STANDARD-OI-MISSING,T,CONS,OPEN-INPUT-CHANNEL,CH,MV-LET,TRUE-LISTP,VALUE,OPEN-INPUT-CHANNEL-P,SYMBOLP,COND,CASE,STATE,CONNECTED-BOOK-DIRECTORY,F-GET-GLOBAL,EXTEND-PATHNAME,STRINGP,PROOFS-CO,STANDARD-CO,STANDARD-OI,QUOTE,MEMBER-EQ,AND,FILE-NAME,CDR,VAL,PAIR,CAR,VAR,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-LD-FN1-PAIR">chk-acceptable-ld-fn1-pair</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-ld-fn1-pair" data-sym="CHK-ACCEPTABLE-LD-FN1-PAIR" title="(defun chk-acceptable-ld-fn1-pair
       (pair ld-missing-input-ok ctx state co-string co-channel)
  (let* ((var (car pair))
         (val (cdr pair))
         (file-name
...">chk-acceptable-ld-fn1-pair</a>
  (pair <a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> ctx state co-string co-channel)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((var (car pair)) (val (cdr pair))
      (file-name (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> var '(<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> <a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> <a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a>))
          (stringp val)
          (extend-pathname (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)
            val
            state))))
    (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> var
      (<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp val) (<a class="sym-link system" href="axioms.html#def-open-input-channel-p" data-sym="OPEN-INPUT-CHANNEL-P">open-input-channel-p</a> val <span class="keyword">:object</span> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair))
          ((<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair))
          ((stringp val) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch state)
              (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> file-name <span class="keyword">:object</span> state)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ch (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> ch)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ld-standard-oi-missing" data-sym="LD-STANDARD-OI-MISSING" title="(defun ld-standard-oi-missing (val file-name ld-missing-input-ok ctx state)
  (cond ((eq ld-missing-input-ok t) (value nil))
        (t
         (let ((msg
                (msg &quot;~@0  It is likely that the file you requested, ~
...">ld-standard-oi-missing</a> val
                    file-name
                    <a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a>
                    ctx
                    state)))))
          ((consp val) (let ((last-cons (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> val)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp (cdr last-cons))
                   (<a class="sym-link system" href="axioms.html#def-open-input-channel-p" data-sym="OPEN-INPUT-CHANNEL-P">open-input-channel-p</a> (cdr last-cons) <span class="keyword">:object</span> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair))
                ((stringp (cdr last-cons)) (let ((file-name (extend-pathname (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)
                         (cdr last-cons)
                         state)))
                    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch state)
                      (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> file-name <span class="keyword">:object</span> state)
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ch (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> (<a class="sym-link local-def" href="#def-replace-last-cdr" data-sym="REPLACE-LAST-CDR" title="(defun replace-last-cdr (x val)
  (cond ((atom x) val) ((atom (cdr x)) (cons (car x) val))
        (t (cons (car x) (replace-last-cdr (cdr x) val)))))">replace-last-cdr</a> val ch))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ld-standard-oi-missing" data-sym="LD-STANDARD-OI-MISSING" title="(defun ld-standard-oi-missing (val file-name ld-missing-input-ok ctx state)
  (cond ((eq ld-missing-input-ok t) (value nil))
        (t
         (let ((msg
                (msg &quot;~@0  It is likely that the file you requested, ~
...">ld-standard-oi-missing</a> val
                            file-name
                            <a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a>
                            ctx
                            state))))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <a class="sym-link system" href="basis-b.html#def-_2Ald-special-error_2A" data-sym="*LD-SPECIAL-ERROR*">*ld-special-error*</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> val)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <a class="sym-link system" href="basis-b.html#def-_2Ald-special-error_2A" data-sym="*LD-SPECIAL-ERROR*">*ld-special-error*</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> val))))
      (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp val)
             (<a class="sym-link system" href="axioms.html#def-open-output-channel-p" data-sym="OPEN-OUTPUT-CHANNEL-P">open-output-channel-p</a> val <span class="keyword">:character</span> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair))
          ((equal val co-string) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> co-channel)))
          ((stringp val) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch state)
              (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> file-name <span class="keyword">:character</span> state)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ch (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> ch)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <a class="sym-link system" href="basis-b.html#def-_2Ald-special-error_2A" data-sym="*LD-SPECIAL-ERROR*">*ld-special-error*</a> '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> val)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <a class="sym-link system" href="basis-b.html#def-_2Ald-special-error_2A" data-sym="*LD-SPECIAL-ERROR*">*ld-special-error*</a> '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> val))))
      (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp val)
             (<a class="sym-link system" href="axioms.html#def-open-output-channel-p" data-sym="OPEN-OUTPUT-CHANNEL-P">open-output-channel-p</a> val <span class="keyword">:character</span> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair))
          ((stringp val) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal file-name co-string) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> co-channel)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch state)
                  (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> file-name <span class="keyword">:character</span> state)
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ch (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> ch)))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <a class="sym-link system" href="basis-b.html#def-_2Ald-special-error_2A" data-sym="*LD-SPECIAL-ERROR*">*ld-special-error*</a> '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> val)))))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <a class="sym-link system" href="basis-b.html#def-_2Ald-special-error_2A" data-sym="*LD-SPECIAL-ERROR*">*ld-special-error*</a> '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> val))))
      (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-current-package" data-sym="CHK-CURRENT-PACKAGE">chk-current-package</a> val ctx state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair))
      (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-skip-proofsp" data-sym="CHK-LD-SKIP-PROOFSP">chk-ld-skip-proofsp</a> val ctx state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-redefinition-action" data-sym="CHK-LD-REDEFINITION-ACTION">chk-ld-redefinition-action</a> val ctx state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-prompt" data-sym="CHK-LD-PROMPT">chk-ld-prompt</a> val ctx state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-missing-input-ok" data-sym="CHK-LD-MISSING-INPUT-OK">chk-ld-missing-input-ok</a> val ctx state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-always-skip-top-level-locals" data-sym="CHK-LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">chk-ld-always-skip-top-level-locals</a> val ctx state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-pre-eval-filter" data-sym="CHK-LD-PRE-EVAL-FILTER">chk-ld-pre-eval-filter</a> val ctx state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-pre-eval-print" data-sym="CHK-LD-PRE-EVAL-PRINT">chk-ld-pre-eval-print</a> val ctx state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-post-eval-print" data-sym="CHK-LD-POST-EVAL-PRINT">chk-ld-post-eval-print</a> val ctx state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-evisc-tuple val ctx state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-error-triples" data-sym="CHK-LD-ERROR-TRIPLES">chk-ld-error-triples</a> val ctx state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-error-action" data-sym="CHK-LD-ERROR-ACTION">chk-ld-error-action</a> val ctx state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-query-control-alist" data-sym="CHK-LD-QUERY-CONTROL-ALIST">chk-ld-query-control-alist</a> val ctx state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-verbose" data-sym="CHK-LD-VERBOSE">chk-ld-verbose</a> val ctx state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (ld-user-stobjs-modified-warning (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-chk-ld-user-stobjs-modified-warning" data-sym="CHK-LD-USER-STOBJS-MODIFIED-WARNING">chk-ld-user-stobjs-modified-warning</a> val ctx state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pair)))
      (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The variable ~x0 is not an authorized LD special and ~
                hence cannot be bound by LD."</span>
          var)))))</pre>
  </div>

<div class="form-block function" id="def-close-channels" data-defines="CLOSE-CHANNELS" data-references="CDR,IGNORE,DECLARE,HARD,ER,TEMP,LET,CLOSE-OUTPUT-CHANNEL,OPEN-OUTPUT-CHANNEL-P,CO,CLOSE-INPUT-CHANNEL,CAAR,OPEN-INPUT-CHANNEL-P,OI,QUOTE,CDAR,EQ,PPROGN,T,NULL,COND,STATE,CHANNEL-CLOSING-ALIST,DEFUN" data-used-by="LD-FN1,CHK-ACCEPTABLE-LD-FN1" data-part-name="CLOSE-CHANNELS" data-part-args="STATE,CHANNEL-CLOSING-ALIST" data-part-body="CDR,IGNORE,DECLARE,CLOSE-CHANNELS,HARD,ER,TEMP,LET,CLOSE-OUTPUT-CHANNEL,OPEN-OUTPUT-CHANNEL-P,CO,CLOSE-INPUT-CHANNEL,CAAR,OPEN-INPUT-CHANNEL-P,OI,QUOTE,CDAR,EQ,PPROGN,T,STATE,CHANNEL-CLOSING-ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CLOSE-CHANNELS">close-channels</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-close-channels" data-sym="CLOSE-CHANNELS" title="(defun close-channels (channel-closing-alist state)
  (cond ((null channel-closing-alist) state)
        (t
         (pprogn
          (cond
...">close-channels</a>
  (channel-closing-alist state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> channel-closing-alist) state)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> channel-closing-alist) 'oi) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-open-input-channel-p" data-sym="OPEN-INPUT-CHANNEL-P">open-input-channel-p</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> channel-closing-alist)
                 <span class="keyword">:object</span> state) (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> channel-closing-alist) state))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> channel-closing-alist) 'co) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-open-output-channel-p" data-sym="OPEN-OUTPUT-CHANNEL-P">open-output-channel-p</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> channel-closing-alist)
                 <span class="keyword">:character</span> state) (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> channel-closing-alist) state))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((temp (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                   '<a class="sym-link local-def" href="#def-close-channels" data-sym="CLOSE-CHANNELS" title="(defun close-channels (channel-closing-alist state)
  (cond ((null channel-closing-alist) state)
        (t
         (pprogn
          (cond
...">close-channels</a>
                   <span class="string">"The channel ~x0 was tagged with an unimplemented ~
                            channel type, ~x1."</span>
                   (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> channel-closing-alist)
                   (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> channel-closing-alist))))
              (declare (ignore temp))
              state)))
        (<a class="sym-link local-def" href="#def-close-channels" data-sym="CLOSE-CHANNELS" title="(defun close-channels (channel-closing-alist state)
  (cond ((null channel-closing-alist) state)
        (t
         (pprogn
          (cond
...">close-channels</a> (cdr channel-closing-alist) state)))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-ld-fn1" data-defines="CHK-ACCEPTABLE-LD-FN1" data-references="CO,LAST,OI,CONNECTED-BOOK-DIRECTORY,F-GET-GLOBAL,EXTEND-PATHNAME,STRINGP,PROOFS-CO,STANDARD-CO,OR,AND,STANDARD-OI,CAAR,EQ,ASSERT$,MV,CLOSE-CHANNELS,PPROGN,CAR,CHK-ACCEPTABLE-LD-FN1-PAIR,PAIR,ERP,MV-LET,CONS,PUT-ASSOC-EQ,LET,LD,T,INITIAL-USELESS-RUNES,CONSP,USELESS-RUNES-R/W-P,CDR,USELESS-RUNES-R/W,LET*,USELESS-RUNES,QUOTE,ASSOC-EQ,VALUE,U-R-PAIR,ER-LET*,NULL,COND,STANDARD-OI0,CHANNEL-CLOSING-ALIST,NEW-ALIST,CO-CHANNEL,CO-STRING,STATE,CTX,LD-MISSING-INPUT-OK,ALIST,DEFUN" data-used-by="CHK-ACCEPTABLE-LD-FN" data-part-name="CHK-ACCEPTABLE-LD-FN1" data-part-args="STANDARD-OI0,CHANNEL-CLOSING-ALIST,NEW-ALIST,CO-CHANNEL,CO-STRING,STATE,CTX,LD-MISSING-INPUT-OK,ALIST" data-part-body="CO,LAST,OI,CONNECTED-BOOK-DIRECTORY,F-GET-GLOBAL,EXTEND-PATHNAME,STRINGP,PROOFS-CO,STANDARD-CO,OR,AND,CHK-ACCEPTABLE-LD-FN1,STANDARD-OI,CAAR,EQ,ASSERT$,MV,CLOSE-CHANNELS,PPROGN,CO-CHANNEL,CO-STRING,CTX,LD-MISSING-INPUT-OK,CAR,CHK-ACCEPTABLE-LD-FN1-PAIR,PAIR,ERP,MV-LET,CHANNEL-CLOSING-ALIST,CONS,PUT-ASSOC-EQ,LET,STATE,LD,T,STANDARD-OI0,INITIAL-USELESS-RUNES,CONSP,USELESS-RUNES-R/W-P,CDR,USELESS-RUNES-R/W,LET*,NEW-ALIST,USELESS-RUNES,QUOTE,ASSOC-EQ,VALUE,U-R-PAIR,ER-LET*,ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-LD-FN1">chk-acceptable-ld-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-ld-fn1" data-sym="CHK-ACCEPTABLE-LD-FN1" title="(defun chk-acceptable-ld-fn1
       (alist ld-missing-input-ok ctx state co-string co-channel new-alist
        channel-closing-alist standard-oi0)
  (cond
   ((null alist)
...">chk-acceptable-ld-fn1</a>
  (alist <a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a>
    ctx
    state
    co-string
    co-channel
    new-alist
    channel-closing-alist
    standard-oi0)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> alist) (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((u-r-pair (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> new-alist))) (<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((useless-runes-r/w (cdr u-r-pair)) (useless-runes-r/w-p (consp u-r-pair)))
              (initial-useless-runes standard-oi0
                useless-runes-r/w
                useless-runes-r/w-p
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                '<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a>
                state))))
        (let ((new-alist (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> new-alist)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons new-alist channel-closing-alist)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp pair state)
        (<a class="sym-link local-def" href="#def-chk-acceptable-ld-fn1-pair" data-sym="CHK-ACCEPTABLE-LD-FN1-PAIR" title="(defun chk-acceptable-ld-fn1-pair
       (pair ld-missing-input-ok ctx state co-string co-channel)
  (let* ((var (car pair))
         (val (cdr pair))
         (file-name
...">chk-acceptable-ld-fn1-pair</a> (car alist)
          <a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a>
          ctx
          state
          co-string
          co-channel)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-close-channels" data-sym="CLOSE-CHANNELS" title="(defun close-channels (channel-closing-alist state)
  (cond ((null channel-closing-alist) state)
        (t
         (pprogn
          (cond
...">close-channels</a> channel-closing-alist state)
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)))
          ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pair) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>)
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-close-channels" data-sym="CLOSE-CHANNELS" title="(defun close-channels (channel-closing-alist state)
  (cond ((null channel-closing-alist) state)
        (t
         (pprogn
          (cond
...">close-channels</a> channel-closing-alist state)
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-acceptable-ld-fn1" data-sym="CHK-ACCEPTABLE-LD-FN1" title="(defun chk-acceptable-ld-fn1
       (alist ld-missing-input-ok ctx state co-string co-channel new-alist
        channel-closing-alist standard-oi0)
  (cond
   ((null alist)
...">chk-acceptable-ld-fn1</a> (cdr alist)
              <a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a>
              ctx
              state
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> co-string)
                   (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a>))
                   (stringp (cdr (car alist)))) (extend-pathname (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)
                    (cdr (car alist))
                    state))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> co-string))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> co-channel)
                   (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a>))
                   (stringp (cdr (car alist)))) (cdr pair))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> co-channel))
              (cons pair new-alist)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((stringp (cdr (car alist))) (cons (cons (cdr pair) 'oi) channel-closing-alist))
                    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr (car alist)))
                       (stringp (cdr (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> (cdr (car alist)))))) (cons (cons (cdr (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> (cdr pair))) 'oi)
                        channel-closing-alist))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> channel-closing-alist)))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a>))
                   (stringp (cdr (car alist)))) (cons (cons (cdr pair) 'co) channel-closing-alist))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> channel-closing-alist))
              standard-oi0)))))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-ld-fn" data-defines="CHK-ACCEPTABLE-LD-FN" data-references="LD-MISSING-INPUT-OK,CDR,CHK-ACCEPTABLE-LD-FN1,STRIP-CARS,DUPLICATES,DUPLICATE-KEYSP-EQ,NOT,STANDARD-OI,ASSOC-EQ,SYMBOL-ALISTP,VALUE,T,SOFT,ER,W,CURRENT-ACL2-WORLD,F-BOUNDP-GLOBAL,NULL,OR,COND,ER-PROGN,LD,QUOTE,CTX,LET,STATE,STANDARD-OI0,ALIST,DEFUN" data-used-by="LD-FN1" data-part-name="CHK-ACCEPTABLE-LD-FN" data-part-args="STATE,STANDARD-OI0,ALIST" data-part-body="STANDARD-OI0,LD-MISSING-INPUT-OK,CDR,CHK-ACCEPTABLE-LD-FN1,STRIP-CARS,DUPLICATES,DUPLICATE-KEYSP-EQ,NOT,STANDARD-OI,ASSOC-EQ,ALIST,SYMBOL-ALISTP,VALUE,T,SOFT,ER,W,STATE,CURRENT-ACL2-WORLD,F-BOUNDP-GLOBAL,NULL,OR,COND,ER-PROGN,LD,QUOTE,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-LD-FN">chk-acceptable-ld-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-ld-fn" data-sym="CHK-ACCEPTABLE-LD-FN" title="(defun chk-acceptable-ld-fn (alist standard-oi0 state)
  (let ((ctx &#39;ld))
    (er-progn
     (cond
      ((or (null (f-boundp-global &#39;current-acl2-world state)) (null (w state)))
...">chk-acceptable-ld-fn</a>
  (alist standard-oi0 state)
  (let ((ctx '<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a>))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-f-boundp-global" data-sym="F-BOUNDP-GLOBAL">f-boundp-global</a> 'current-acl2-world state))
           (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The theorem prover&#39;s database has not yet been initialized.  To ~
            initialize ACL2 to its full theory, which currently takes about 3 ~
            minutes on a Sparc 2 (Dec. 1992), invoke (initialize-acl2) from ~
            Common Lisp."</span>))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> alist) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The argument to ld-fn must be a symbol-alistp and ~x0 is ~
                   not."</span>
            alist)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> alist) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The alist argument to ld-fn must specify a value ~
                   for &#39;standard-oi and ~x0 does not."</span>
            alist)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (duplicate-keysp-eq alist)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The alist argument to ld-fn must contain no duplications ~
                   among the LD specials to be bound.  Your alist contains ~
                   duplicate values for ~&amp;0."</span>
            (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> alist)))))
      (<a class="sym-link local-def" href="#def-chk-acceptable-ld-fn1" data-sym="CHK-ACCEPTABLE-LD-FN1" title="(defun chk-acceptable-ld-fn1
       (alist ld-missing-input-ok ctx state co-string co-channel new-alist
        channel-closing-alist standard-oi0)
  (cond
   ((null alist)
...">chk-acceptable-ld-fn1</a> alist
        (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> alist))
        ctx
        state
        nil
        nil
        nil
        nil
        standard-oi0))))</pre>
  </div>

<div class="form-block function" id="def-f-put-ld-specials" data-defines="F-PUT-LD-SPECIALS" data-references="IGNORE,DECLARE,HARD,ER,X,LET,OTHERWISE,LD-USER-STOBJS-MODIFIED-WARNING,LD-VERBOSE,LD-QUERY-CONTROL-ALIST,LD-ERROR-ACTION,LD-ERROR-TRIPLES,LD-EVISC-TUPLE,LD-POST-EVAL-PRINT,LD-PRE-EVAL-PRINT,F-GET-GLOBAL,F-BOUNDP-GLOBAL,AND,IF,LD-PRE-EVAL-FILTER,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-MISSING-INPUT-OK,LD-PROMPT,LD-REDEFINITION-ACTION,LD-SKIP-PROOFSP,CURRENT-PACKAGE,PROOFS-CO,STANDARD-CO,STANDARD-OI,CASE,CDR,F-PUT-GLOBAL,CDAR,PPROGN,USELESS-RUNES,QUOTE,CAAR,EQ,T,UPDATE-USELESS-RUNES,NULL,COND,STATE,UURP,ALIST,DEFUN" data-used-by="RESET-LD-SPECIALS-FN,LD-FN1,LD-FN-BODY" data-part-name="F-PUT-LD-SPECIALS" data-part-args="STATE,UURP,ALIST" data-part-body="IGNORE,DECLARE,HARD,ER,X,LET,OTHERWISE,LD-USER-STOBJS-MODIFIED-WARNING,LD-VERBOSE,LD-QUERY-CONTROL-ALIST,LD-ERROR-ACTION,LD-ERROR-TRIPLES,LD-EVISC-TUPLE,LD-POST-EVAL-PRINT,LD-PRE-EVAL-PRINT,F-GET-GLOBAL,F-BOUNDP-GLOBAL,AND,IF,LD-PRE-EVAL-FILTER,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-MISSING-INPUT-OK,LD-PROMPT,LD-REDEFINITION-ACTION,LD-SKIP-PROOFSP,CURRENT-PACKAGE,PROOFS-CO,STANDARD-CO,STANDARD-OI,CASE,CDR,F-PUT-LD-SPECIALS,F-PUT-GLOBAL,CDAR,PPROGN,USELESS-RUNES,QUOTE,CAAR,EQ,T,STATE,UPDATE-USELESS-RUNES,UURP,ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="F-PUT-LD-SPECIALS">f-put-ld-specials</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-f-put-ld-specials" data-sym="F-PUT-LD-SPECIALS" title="(defun f-put-ld-specials (alist uurp state)
  (cond ((null alist) (cond (uurp (update-useless-runes nil state)) (t state)))
        ((eq (caar alist) &#39;useless-runes)
         (pprogn
          (cond (uurp (update-useless-runes (cdar alist) state))
...">f-put-ld-specials</a>
  (alist uurp state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> alist) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (uurp (update-useless-runes nil state)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (uurp (update-useless-runes (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state)))
        (<a class="sym-link local-def" href="#def-f-put-ld-specials" data-sym="F-PUT-LD-SPECIALS" title="(defun f-put-ld-specials (alist uurp state)
  (cond ((null alist) (cond (uurp (update-useless-runes nil state)) (t state)))
        ((eq (caar alist) &#39;useless-runes)
         (pprogn
          (cond (uurp (update-useless-runes (cdar alist) state))
...">f-put-ld-specials</a> (cdr alist) nil state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)
          (<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a>
              (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)
              state))
          (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-f-boundp-global" data-sym="F-BOUNDP-GLOBAL">f-boundp-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> state)
                (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> state) <span class="keyword">:illegal-state</span>))
              state
              (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state)))
          (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) state))
          (ld-user-stobjs-modified-warning (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) <span class="keyword">:same</span>)
              state
              (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'ld-user-stobjs-modified-warning
                (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)
                state)))
          (otherwise (let ((x (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                   '<a class="sym-link local-def" href="#def-f-put-ld-specials" data-sym="F-PUT-LD-SPECIALS" title="(defun f-put-ld-specials (alist uurp state)
  (cond ((null alist) (cond (uurp (update-useless-runes nil state)) (t state)))
        ((eq (caar alist) &#39;useless-runes)
         (pprogn
          (cond (uurp (update-useless-runes (cdar alist) state))
...">f-put-ld-specials</a>
                   <span class="string">"Someone is using ~x0 as an unauthorized LD-special."</span>
                   (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))))
              (declare (ignore x))
              state)))
        (<a class="sym-link local-def" href="#def-f-put-ld-specials" data-sym="F-PUT-LD-SPECIALS" title="(defun f-put-ld-specials (alist uurp state)
  (cond ((null alist) (cond (uurp (update-useless-runes nil state)) (t state)))
        ((eq (caar alist) &#39;useless-runes)
         (pprogn
          (cond (uurp (update-useless-runes (cdar alist) state))
...">f-put-ld-specials</a> (cdr alist) uurp state)))))</pre>
  </div>

<div class="form-block function" id="def-f-get-ld-specials" data-defines="F-GET-LD-SPECIALS" data-references="LD-USER-STOBJS-MODIFIED-WARNING,LD-VERBOSE,LD-QUERY-CONTROL-ALIST,LD-ERROR-ACTION,LD-ERROR-TRIPLES,LD-EVISC-TUPLE,LD-POST-EVAL-PRINT,LD-PRE-EVAL-PRINT,LD-PRE-EVAL-FILTER,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-MISSING-INPUT-OK,LD-PROMPT,LD-REDEFINITION-ACTION,LD-SKIP-PROOFSP,USELESS-RUNES,CURRENT-PACKAGE,PROOFS-CO,STANDARD-CO,F-GET-GLOBAL,STANDARD-OI,QUOTE,CONS,LIST,STATE,DEFUN" data-used-by="LD-FN1" data-part-name="F-GET-LD-SPECIALS" data-part-args="STATE" data-part-body="LD-USER-STOBJS-MODIFIED-WARNING,LD-VERBOSE,LD-QUERY-CONTROL-ALIST,LD-ERROR-ACTION,LD-ERROR-TRIPLES,LD-EVISC-TUPLE,LD-POST-EVAL-PRINT,LD-PRE-EVAL-PRINT,LD-PRE-EVAL-FILTER,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-MISSING-INPUT-OK,LD-PROMPT,LD-REDEFINITION-ACTION,LD-SKIP-PROOFSP,USELESS-RUNES,CURRENT-PACKAGE,PROOFS-CO,STANDARD-CO,STATE,F-GET-GLOBAL,STANDARD-OI,QUOTE,CONS,LIST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="F-GET-LD-SPECIALS">f-get-ld-specials</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-f-get-ld-specials" data-sym="F-GET-LD-SPECIALS" title="(defun f-get-ld-specials (state)
  (list (cons &#39;standard-oi (f-get-global &#39;standard-oi state))
        (cons &#39;standard-co (f-get-global &#39;standard-co state))
        (cons &#39;proofs-co (f-get-global &#39;proofs-co state))
        (cons &#39;current-package (f-get-global &#39;current-package state))
...">f-get-ld-specials</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> state))
    (cons '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state))
    (cons '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state))
    (cons '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> state))
    (cons '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> state))
    (cons '<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a>
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> state))
    (cons '<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> state))
    (cons 'ld-user-stobjs-modified-warning
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-user-stobjs-modified-warning state))))</pre>
  </div>

<div class="form-block function" id="def-ld-read-keyword-command1" data-defines="LD-READ-KEYWORD-COMMAND1" data-references="LIST,CONS,1-,RST,ER-LET*,LD-READ-KEYWORD-COMMAND,QUOTE,SOFT,ER,READ-STANDARD-OI,OBJ,EOFP,MV-LET,T,VALUE,=,COND,STATE,N,DEFUN" data-used-by="LD-READ-KEYWORD-COMMAND" data-part-name="LD-READ-KEYWORD-COMMAND1" data-part-args="STATE,N" data-part-body="LIST,CONS,1-,LD-READ-KEYWORD-COMMAND1,RST,ER-LET*,LD-READ-KEYWORD-COMMAND,QUOTE,SOFT,ER,READ-STANDARD-OI,STATE,OBJ,EOFP,MV-LET,T,VALUE,N,=,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-READ-KEYWORD-COMMAND1">ld-read-keyword-command1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-read-keyword-command1" data-sym="LD-READ-KEYWORD-COMMAND1" title="(defun ld-read-keyword-command1 (n state)
  (cond ((= n 0) (value nil))
        (t
         (mv-let (eofp obj state) (read-standard-oi state)
                 (cond
...">ld-read-keyword-command1</a>
  (n state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> n <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp obj state)
        (<a class="sym-link system" href="basis-b.html#def-read-standard-oi" data-sym="READ-STANDARD-OI">read-standard-oi</a> state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              '<a class="sym-link local-def" href="#def-ld-read-keyword-command" data-sym="LD-READ-KEYWORD-COMMAND" title="(defun ld-read-keyword-command (key state)
  (let ((temp (assoc-eq key (ld-keyword-aliases state))))
    (cond
     (temp
      (mv-let (erp args state) (ld-read-keyword-command1 (cadr temp) state)
...">ld-read-keyword-command</a>
              <span class="string">"Unfinished keyword command at eof on (standard-oi ~
                          state)."</span>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((rst (<a class="sym-link local-def" href="#def-ld-read-keyword-command1" data-sym="LD-READ-KEYWORD-COMMAND1" title="(defun ld-read-keyword-command1 (n state)
  (cond ((= n 0) (value nil))
        (t
         (mv-let (eofp obj state) (read-standard-oi state)
                 (cond
...">ld-read-keyword-command1</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) state)))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote obj) rst)))))))))</pre>
  </div>

<div class="form-block function" id="def-exit-ld" data-defines="EXIT-LD" data-references="VALUE,STATE,DEFUN" data-used-by="LD-FILTER-COMMAND,LD-READ-KEYWORD-COMMAND" data-part-name="EXIT-LD" data-part-args="STATE" data-part-body="VALUE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXIT-LD">exit-ld</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-exit-ld" data-sym="EXIT-LD" title="(defun exit-ld (state) (value :q))">exit-ld</a> (state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:q</span>))</pre>
  </div>

<div class="form-block function" id="def-ld-read-keyword-command" data-defines="LD-READ-KEYWORD-COMMAND" data-references="IGNORE,DECLARE,LD,SOFT,ER,VAL,QUASIQUOTE,MACRO-MINIMAL-ARITY,MACRO-BODY,GETPROPC,FORMALS,LENGTH,FUNCTION-SYMBOLP,LEN,W,WRLD,SYMBOL-NAME,INTERN,SYM,LET*,EXIT-LD,QUOTE,EQ,CADDR,STRIP-CADRS,CONS,T,MV,CADR,LD-READ-KEYWORD-COMMAND1,ARGS,ERP,MV-LET,COND,LD-KEYWORD-ALIASES,ASSOC-EQ,TEMP,LET,STATE,KEY,DEFUN" data-used-by="LD-READ-COMMAND,LD-READ-KEYWORD-COMMAND1" data-part-name="LD-READ-KEYWORD-COMMAND" data-part-args="STATE,KEY" data-part-body="IGNORE,DECLARE,LD,SOFT,ER,VAL,QUASIQUOTE,MACRO-MINIMAL-ARITY,MACRO-BODY,GETPROPC,FORMALS,LENGTH,FUNCTION-SYMBOLP,LEN,W,WRLD,SYMBOL-NAME,INTERN,SYM,LET*,EXIT-LD,QUOTE,EQ,CADDR,STRIP-CADRS,CONS,T,MV,CADR,LD-READ-KEYWORD-COMMAND1,ARGS,ERP,MV-LET,COND,STATE,LD-KEYWORD-ALIASES,KEY,ASSOC-EQ,TEMP,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-READ-KEYWORD-COMMAND">ld-read-keyword-command</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-read-keyword-command" data-sym="LD-READ-KEYWORD-COMMAND" title="(defun ld-read-keyword-command (key state)
  (let ((temp (assoc-eq key (ld-keyword-aliases state))))
    (cond
     (temp
      (mv-let (erp args state) (ld-read-keyword-command1 (cadr temp) state)
...">ld-read-keyword-command</a>
  (key state)
  (let ((temp (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key (<a class="sym-link system" href="basis-b.html#def-ld-keyword-aliases" data-sym="LD-KEYWORD-ALIASES">ld-keyword-aliases</a> state))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (temp (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> state)
          (<a class="sym-link local-def" href="#def-ld-read-keyword-command1" data-sym="LD-READ-KEYWORD-COMMAND1" title="(defun ld-read-keyword-command1 (n state)
  (cond ((= n 0) (value nil))
        (t
         (mv-let (eofp obj state) (read-standard-oi state)
                 (cond
...">ld-read-keyword-command1</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> temp) state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil nil state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
                (cons key (<a class="sym-link system" href="axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
                (cons (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> temp) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                state)))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key <span class="keyword">:q</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil '(<span class="keyword">:q</span>) '(<a class="sym-link local-def" href="#def-exit-ld" data-sym="EXIT-LD" title="(defun exit-ld (state) (value :q))">exit-ld</a> state) state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((sym (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> (symbol-name key) <span class="string">"ACL2"</span>)) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
            (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> sym wrld) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> sym wrld)))
                ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> sym 'macro-body nil wrld) (<a class="sym-link system" href="history-management.html#def-macro-minimal-arity" data-sym="MACRO-MINIMAL-ARITY">macro-minimal-arity</a> sym
                    `(<span class="keyword">:error</span> <span class="string">"See LD-READ-KEYWORD-COMMAND."</span>)
                    wrld))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> state)
                (<a class="sym-link local-def" href="#def-ld-read-keyword-command1" data-sym="LD-READ-KEYWORD-COMMAND1" title="(defun ld-read-keyword-command1 (n state)
  (cond ((= n 0) (value nil))
        (t
         (mv-let (eofp obj state) (read-standard-oi state)
                 (cond
...">ld-read-keyword-command1</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> state)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil nil state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (cons key (<a class="sym-link system" href="axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (cons sym <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) state)))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
                (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft '<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a> <span class="string">"Unrecognized keyword command ~x0."</span> key)
                (declare (ignore erp val))
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil nil state)))))))))</pre>
  </div>

<div class="form-block function" id="def-ld-fix-command" data-defines="LD-FIX-COMMAND" data-references="FORM,DEFUN" data-used-by="LD-READ-COMMAND" data-part-name="LD-FIX-COMMAND" data-part-args="FORM" data-part-body="FORM" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-FIX-COMMAND">ld-fix-command</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-fix-command" data-sym="LD-FIX-COMMAND" title="(defun ld-fix-command (form) form)">ld-fix-command</a> (form) form)</pre>
  </div>

<div class="form-block function" id="def-ld-read-command" data-defines="LD-READ-COMMAND" data-references="LD-FIX-COMMAND,IN-PACKAGE,QUASIQUOTE,W,KNOWN-PACKAGE-ALIST,GLOBAL-VAL,FIND-NON-HIDDEN-PACKAGE-ENTRY,STRING-UPCASE,UPVAL,STRINGP,LD-READ-KEYWORD-COMMAND,FORM,KEYP,ERP,KEYWORDP,MV,T,ROLLOVER-IPRINT-AR,IPRINT-SOFT-BOUND,>,IPRINT-LAST-INDEX,LAST-INDEX,LET,COND,READ-STANDARD-OI,VAL,EOFP,MV-LET,SEMI-INITIALIZE-BRR-WORMHOLE,LD-LEVEL,QUOTE,F-GET-GLOBAL,INT=,AND,PROG2$,BRR-EVISC-TUPLE-ORACLE-UPDATE,PPROGN,STATE,DEFUN" data-used-by="LD-READ-EVAL-PRINT-SIMPLE,LD-READ-EVAL-PRINT" data-part-name="LD-READ-COMMAND" data-part-args="STATE" data-part-body="LD-FIX-COMMAND,IN-PACKAGE,QUASIQUOTE,W,KNOWN-PACKAGE-ALIST,GLOBAL-VAL,FIND-NON-HIDDEN-PACKAGE-ENTRY,STRING-UPCASE,UPVAL,STRINGP,LD-READ-KEYWORD-COMMAND,FORM,KEYP,ERP,KEYWORDP,MV,T,ROLLOVER-IPRINT-AR,IPRINT-SOFT-BOUND,>,IPRINT-LAST-INDEX,LAST-INDEX,LET,COND,READ-STANDARD-OI,VAL,EOFP,MV-LET,SEMI-INITIALIZE-BRR-WORMHOLE,LD-LEVEL,QUOTE,F-GET-GLOBAL,INT=,AND,PROG2$,STATE,BRR-EVISC-TUPLE-ORACLE-UPDATE,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-READ-COMMAND">ld-read-command</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-read-command" data-sym="LD-READ-COMMAND" title="(defun ld-read-command (state)
  (pprogn (brr-evisc-tuple-oracle-update state)
          (prog2$
           (and (int= (f-get-global &#39;ld-level state) 1)
                (semi-initialize-brr-wormhole state))
...">ld-read-command</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-brr-evisc-tuple-oracle-update" data-sym="BRR-EVISC-TUPLE-ORACLE-UPDATE">brr-evisc-tuple-oracle-update</a> state)
    (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state) <span class="number">1</span>)
        (<a class="sym-link system" href="rewrite.html#def-semi-initialize-brr-wormhole" data-sym="SEMI-INITIALIZE-BRR-WORMHOLE">semi-initialize-brr-wormhole</a> state))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp val state)
        (<a class="sym-link system" href="basis-b.html#def-read-standard-oi" data-sym="READ-STANDARD-OI">read-standard-oi</a> state)
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state) <span class="number">1</span>) (let ((last-index (<a class="sym-link system" href="basis-a.html#def-iprint-last-index" data-sym="IPRINT-LAST-INDEX">iprint-last-index</a> state)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> last-index (<a class="sym-link system" href="basis-a.html#def-iprint-soft-bound" data-sym="IPRINT-SOFT-BOUND">iprint-soft-bound</a> state)) (<a class="sym-link system" href="basis-a.html#def-rollover-iprint-ar" data-sym="ROLLOVER-IPRINT-AR">rollover-iprint-ar</a> nil last-index state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil nil nil state))
            ((<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> val) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp keyp form state)
                (<a class="sym-link local-def" href="#def-ld-read-keyword-command" data-sym="LD-READ-KEYWORD-COMMAND" title="(defun ld-read-keyword-command (key state)
  (let ((temp (assoc-eq key (ld-keyword-aliases state))))
    (cond
     (temp
      (mv-let (erp args state) (ld-read-keyword-command1 (cadr temp) state)
...">ld-read-keyword-command</a> val state)
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil erp keyp form state)))
            ((stringp val) (let ((upval (<a class="sym-link system" href="axioms.html#def-string-upcase" data-sym="STRING-UPCASE">string-upcase</a> val)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-find-non-hidden-package-entry" data-sym="FIND-NON-HIDDEN-PACKAGE-ENTRY">find-non-hidden-package-entry</a> upval
                     (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil nil `(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> ,UPVAL) state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil nil val state)))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil nil (<a class="sym-link local-def" href="#def-ld-fix-command" data-sym="LD-FIX-COMMAND" title="(defun ld-fix-command (form) form)">ld-fix-command</a> val) state))))))))</pre>
  </div>

<div class="form-block function" id="def-ld-print-command" data-defines="LD-PRINT-COMMAND" data-references="IGNORE,DECLARE,LD-EVISC-TUPLE,STANDARD-CO,CONS,LIST,FMT1,MV,T,LD-PRE-EVAL-PRINT,EQ,NOT,COND,MV-LET,WITH-BASE-10,STATE,COL,FORM,KEYP,DEFUN" data-used-by="LD-READ-EVAL-PRINT" data-part-name="LD-PRINT-COMMAND" data-part-args="STATE,COL,FORM,KEYP" data-part-body="IGNORE,DECLARE,FORM,LD-EVISC-TUPLE,STANDARD-CO,CONS,LIST,FMT1,KEYP,MV,T,LD-PRE-EVAL-PRINT,EQ,NOT,COND,STATE,COL,MV-LET,WITH-BASE-10" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-PRINT-COMMAND">ld-print-command</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-print-command" data-sym="LD-PRINT-COMMAND" title="(defun ld-print-command (keyp form col state)
  (with-base-10
   (mv-let (col state)
           (cond ((not (eq (ld-pre-eval-print state) t)) (mv col state))
                 (keyp
...">ld-print-command</a>
  (keyp form col state)
  (<a class="sym-link system" href="history-management.html#def-with-base-10" data-sym="WITH-BASE-10">with-base-10</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (col state)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> col state))
        (keyp (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> <span class="string">"~*0~|"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span> <span class="string">"~x*"</span> <span class="string">"~x* "</span> <span class="string">"~x* "</span> keyp)))
            col
            (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
            state
            (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> state)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> <span class="string">"~q0~|"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 form))
            col
            (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
            state
            (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> state))))
      (declare (ignore col))
      state)))</pre>
  </div>

<div class="form-block macro" id="def-continue-from-illegal-state" data-defines="CONTINUE-FROM-ILLEGAL-STATE" data-references="VALUE,STATE,SET-LD-PRE-EVAL-FILTER,ER-PROGN,QUOTE,DEFMACRO" data-used-by="LD-FILTER-COMMAND" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONTINUE-FROM-ILLEGAL-STATE">continue-from-illegal-state</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-continue-from-illegal-state" data-sym="CONTINUE-FROM-ILLEGAL-STATE" title="(defmacro continue-from-illegal-state ()
  &#39;(er-progn (set-ld-pre-eval-filter :all state) (value :continuing)))">continue-from-illegal-state</a>
  nil
  '(<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-set-ld-pre-eval-filter" data-sym="SET-LD-PRE-EVAL-FILTER">set-ld-pre-eval-filter</a> <span class="keyword">:all</span> state)
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:continuing</span>)))</pre>
  </div>

<div class="form-block function" id="def-ld-filter-command" data-defines="LD-FILTER-COMMAND" data-references="SOFT,ER,ER-PROGN,CONTINUE-FROM-ILLEGAL-STATE,EXIT-LD,EQUAL,LD-EVISC-TUPLE,LD-PRE-EVAL-PRINT,IF,CONS,LIST,QUOTE,ACL2-QUERY,T,VALUE,EQ,COND,LD-PRE-EVAL-FILTER,FILTER,LET,STATE,FORM,DEFUN" data-used-by="LD-READ-EVAL-PRINT" data-part-name="LD-FILTER-COMMAND" data-part-args="STATE,FORM" data-part-body="LD-FILTER-COMMAND,SOFT,ER,ER-PROGN,CONTINUE-FROM-ILLEGAL-STATE,EXIT-LD,EQUAL,LD-EVISC-TUPLE,FORM,LD-PRE-EVAL-PRINT,IF,CONS,LIST,QUOTE,ACL2-QUERY,T,VALUE,EQ,COND,STATE,LD-PRE-EVAL-FILTER,FILTER,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-FILTER-COMMAND">ld-filter-command</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-filter-command" data-sym="LD-FILTER-COMMAND" title="(defun ld-filter-command (form state)
  (let ((filter (ld-pre-eval-filter state)))
    (cond ((eq filter :all) (value t))
          ((eq filter :query)
           (acl2-query :filter
...">ld-filter-command</a>
  (form state)
  (let ((filter (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> filter <span class="keyword">:all</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> filter <span class="keyword">:query</span>) (<a class="sym-link system" href="rewrite.html#def-acl2-query" data-sym="ACL2-QUERY">acl2-query</a> <span class="keyword">:filter</span> '(<span class="string">"~#0~[~Y12?~/Eval?~]"</span> <span class="keyword">:y</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            <span class="keyword">:n</span> nil
            <span class="keyword">:r</span> <span class="keyword">:return</span> <span class="keyword">:q</span> <span class="keyword">:error</span> <span class="keyword">:?</span> (<span class="string">"We are in the LD read-eval-print loop, ~
                              processing the forms in standard-oi.  The ~
                              form printed above is one of those forms.  Do ~
                              you want to evaluate it (Y) or not (N)?   You ~
                              may also answer R, meaning ``return ~
                              immediately from LD (without reading or ~
                              evaluating any more forms)&#39;&#39; or Q meaning ~
                              ``return immediately from LD, signaling an ~
                              error.&#39;&#39;"</span> <span class="keyword">:y</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
              <span class="keyword">:n</span> nil
              <span class="keyword">:r</span> <span class="keyword">:return</span> <span class="keyword">:q</span> <span class="keyword">:error</span>))
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
              (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                <span class="number">1</span>
                <span class="number">0</span>))
            (cons #\1 form)
            (cons #\2 (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> state)))
          state))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> filter <span class="keyword">:illegal-state</span>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal form '(<a class="sym-link local-def" href="#def-exit-ld" data-sym="EXIT-LD" title="(defun exit-ld (state) (value :q))">exit-ld</a> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          ((equal form '(<a class="sym-link local-def" href="#def-continue-from-illegal-state" data-sym="CONTINUE-FROM-ILLEGAL-STATE" title="(defmacro continue-from-illegal-state ()
  &#39;(er-progn (set-ld-pre-eval-filter :all state) (value :continuing)))">continue-from-illegal-state</a>)) (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-continue-from-illegal-state" data-sym="CONTINUE-FROM-ILLEGAL-STATE" title="(defmacro continue-from-illegal-state ()
  &#39;(er-progn (set-ld-pre-eval-filter :all state) (value :continuing)))">continue-from-illegal-state</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              '<a class="sym-link local-def" href="#def-ld-filter-command" data-sym="LD-FILTER-COMMAND" title="(defun ld-filter-command (form state)
  (let ((filter (ld-pre-eval-filter state)))
    (cond ((eq filter :all) (value t))
          ((eq filter :query)
           (acl2-query :filter
...">ld-filter-command</a>
              <span class="string">"You are still in an illegal state!  See :DOC ~
                         illegal-state.  You can submit the ~
                         form~|:CONTINUE-FROM-ILLEGAL-STATE~|to continue -- ~
                         AT YOUR OWN RISK."</span>))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))</pre>
  </div>

<div class="form-block function" id="def-evisceration-stobj-mark" data-defines="EVISCERATION-STOBJ-MARK" data-references="STOBJ-PRINT-NAME,T,TO-DF,DF-STRING,STRING,CONCATENATE,*EVISCERATION-MARK*,CONS,RATIONALP,AND,*EVISCERATION-STATE-MARK*,STATE,QUOTE,EQ,COND,VAL,NAME,DEFUN" data-used-by="EVISCERATION-STOBJ-MARKS,EVISCERATION-STOBJ-MARKS1" data-part-name="EVISCERATION-STOBJ-MARK" data-part-args="VAL,NAME" data-part-body="STOBJ-PRINT-NAME,T,TO-DF,DF-STRING,STRING,CONCATENATE,*EVISCERATION-MARK*,CONS,VAL,RATIONALP,AND,*EVISCERATION-STATE-MARK*,STATE,QUOTE,NAME,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVISCERATION-STOBJ-MARK">evisceration-stobj-mark</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-evisceration-stobj-mark" data-sym="EVISCERATION-STOBJ-MARK" title="(defun evisceration-stobj-mark (name val)
  (cond ((eq name &#39;state) *evisceration-state-mark*)
        ((eq name :df)
         (and (rationalp val)
              (cons *evisceration-mark*
...">evisceration-stobj-mark</a>
  (name val)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'state) <a class="sym-link system" href="basis-a.html#def-_2Aevisceration-state-mark_2A" data-sym="*EVISCERATION-STATE-MARK*">*evisceration-state-mark*</a>)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name <span class="keyword">:df</span>) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp val)
        (cons <a class="sym-link system" href="basis-a.html#def-_2Aevisceration-mark_2A" data-sym="*EVISCERATION-MARK*">*evisceration-mark*</a>
          (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> <span class="string">"#d"</span> (<a class="sym-link system" href="basis-b.html#def-df-string" data-sym="DF-STRING">df-string</a> (to-df val))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons <a class="sym-link system" href="basis-a.html#def-_2Aevisceration-mark_2A" data-sym="*EVISCERATION-MARK*">*evisceration-mark*</a> (<a class="sym-link system" href="basis-b.html#def-stobj-print-name" data-sym="STOBJ-PRINT-NAME">stobj-print-name</a> name)))))</pre>
  </div>

<div class="form-block function" id="def-evisceration-stobj-marks1" data-defines="EVISCERATION-STOBJ-MARKS1" data-references="T,CDR,EVISCERATION-STOBJ-MARK,CONS,CAR,ENDP,COND,LST,STOBJS-FLAGS,DEFUN" data-used-by="EVISCERATION-STOBJ-MARKS" data-part-name="EVISCERATION-STOBJ-MARKS1" data-part-args="LST,STOBJS-FLAGS" data-part-body="T,CDR,EVISCERATION-STOBJ-MARKS1,LST,EVISCERATION-STOBJ-MARK,CONS,CAR,STOBJS-FLAGS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVISCERATION-STOBJ-MARKS1">evisceration-stobj-marks1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-evisceration-stobj-marks1" data-sym="EVISCERATION-STOBJ-MARKS1" title="(defun evisceration-stobj-marks1 (stobjs-flags lst)
  (cond ((endp stobjs-flags) nil)
        ((car stobjs-flags)
         (cons (evisceration-stobj-mark (car stobjs-flags) (car lst))
               (evisceration-stobj-marks1 (cdr stobjs-flags) (cdr lst))))
...">evisceration-stobj-marks1</a>
  (stobjs-flags lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> stobjs-flags) nil)
    ((car stobjs-flags) (cons (<a class="sym-link local-def" href="#def-evisceration-stobj-mark" data-sym="EVISCERATION-STOBJ-MARK" title="(defun evisceration-stobj-mark (name val)
  (cond ((eq name &#39;state) *evisceration-state-mark*)
        ((eq name :df)
         (and (rationalp val)
              (cons *evisceration-mark*
...">evisceration-stobj-mark</a> (car stobjs-flags) (car lst))
        (<a class="sym-link local-def" href="#def-evisceration-stobj-marks1" data-sym="EVISCERATION-STOBJ-MARKS1" title="(defun evisceration-stobj-marks1 (stobjs-flags lst)
  (cond ((endp stobjs-flags) nil)
        ((car stobjs-flags)
         (cons (evisceration-stobj-mark (car stobjs-flags) (car lst))
               (evisceration-stobj-marks1 (cdr stobjs-flags) (cdr lst))))
...">evisceration-stobj-marks1</a> (cdr stobjs-flags) (cdr lst))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons nil
        (<a class="sym-link local-def" href="#def-evisceration-stobj-marks1" data-sym="EVISCERATION-STOBJ-MARKS1" title="(defun evisceration-stobj-marks1 (stobjs-flags lst)
  (cond ((endp stobjs-flags) nil)
        ((car stobjs-flags)
         (cons (evisceration-stobj-mark (car stobjs-flags) (car lst))
               (evisceration-stobj-marks1 (cdr stobjs-flags) (cdr lst))))
...">evisceration-stobj-marks1</a> (cdr stobjs-flags) (cdr lst))))))</pre>
  </div>

<div class="form-block function" id="def-evisceration-stobj-marks" data-defines="EVISCERATION-STOBJ-MARKS" data-references="EVISCERATION-STOBJ-MARKS1,T,CAR,SYMBOLP,ASSERT$,CDR,NULL,EVISCERATION-STOBJ-MARK,LIST,RATIONALP,AND,QUOTE,*EVISCERATION-ERROR-TRIPLE-MARKS*,*ERROR-TRIPLE-SIG*,EQUAL,COND,LST,STOBJS-FLAGS,DEFUN" data-used-by="LD-PRINT-RESULTS" data-part-name="EVISCERATION-STOBJ-MARKS" data-part-args="LST,STOBJS-FLAGS" data-part-body="EVISCERATION-STOBJ-MARKS1,T,CAR,SYMBOLP,ASSERT$,CDR,NULL,EVISCERATION-STOBJ-MARK,LIST,LST,RATIONALP,AND,QUOTE,*EVISCERATION-ERROR-TRIPLE-MARKS*,*ERROR-TRIPLE-SIG*,STOBJS-FLAGS,EQUAL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVISCERATION-STOBJ-MARKS">evisceration-stobj-marks</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-evisceration-stobj-marks" data-sym="EVISCERATION-STOBJ-MARKS" title="(defun evisceration-stobj-marks (stobjs-flags lst)
  (cond
   ((equal stobjs-flags *error-triple-sig*) *evisceration-error-triple-marks*)
   ((equal stobjs-flags &#39;(nil)) &#39;(nil))
   ((equal stobjs-flags &#39;(:df))
...">evisceration-stobj-marks</a>
  (stobjs-flags lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal stobjs-flags <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>) <a class="sym-link system" href="basis-a.html#def-_2Aevisceration-error-triple-marks_2A" data-sym="*EVISCERATION-ERROR-TRIPLE-MARKS*">*evisceration-error-triple-marks*</a>)
    ((equal stobjs-flags '(nil)) '(nil))
    ((equal stobjs-flags '(<span class="keyword">:df</span>)) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp lst)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link local-def" href="#def-evisceration-stobj-mark" data-sym="EVISCERATION-STOBJ-MARK" title="(defun evisceration-stobj-mark (name val)
  (cond ((eq name &#39;state) *evisceration-state-mark*)
        ((eq name :df)
         (and (rationalp val)
              (cons *evisceration-mark*
...">evisceration-stobj-mark</a> <span class="keyword">:df</span> lst))))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr stobjs-flags)) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (symbolp lst)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link local-def" href="#def-evisceration-stobj-mark" data-sym="EVISCERATION-STOBJ-MARK" title="(defun evisceration-stobj-mark (name val)
  (cond ((eq name &#39;state) *evisceration-state-mark*)
        ((eq name :df)
         (and (rationalp val)
              (cons *evisceration-mark*
...">evisceration-stobj-mark</a> (car stobjs-flags) lst))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-evisceration-stobj-marks1" data-sym="EVISCERATION-STOBJ-MARKS1" title="(defun evisceration-stobj-marks1 (stobjs-flags lst)
  (cond ((endp stobjs-flags) nil)
        ((car stobjs-flags)
         (cons (evisceration-stobj-mark (car stobjs-flags) (car lst))
               (evisceration-stobj-marks1 (cdr stobjs-flags) (cdr lst))))
...">evisceration-stobj-marks1</a> stobjs-flags lst))))</pre>
  </div>

<div class="form-block function" id="def-ld-print-results" data-defines="LD-PRINT-RESULTS" data-references="NEWLINE,LENGTH,PPR,PRINC$,TRIPLE-PRINT-PREFIX,F-GET-GLOBAL,STRINGP,IF,PPROGN,*ERROR-TRIPLE-DF-SIG*,*ERROR-TRIPLE-SIG*,EQUAL,OR,LD-ERROR-TRIPLES,EQ,AND,W,EVISC-TABLE,QUOTE,TABLE-ALIST,EVISCERATION-STOBJ-MARKS,EVISCERATE-STOBJS-TOP,EVISCERATED-VALX,MV-LET,CADDDR,HIDING-CARS,CADDR,PRINT-LENGTH,CADR,PRINT-LEVEL,WORLD-EVISCERATION-ALIST,EVISC-ALIST,LD-EVISC-TUPLE,EVISC-TUPLE,CDR,VALX,CAR,STOBJS-OUT,LET*,T,NULL,COND,STANDARD-CO,OUTPUT-CHANNEL,LD-POST-EVAL-PRINT,FLG,LET,STATE,TRANS-ANS,DEFUN" data-used-by="LD-READ-EVAL-PRINT" data-part-name="LD-PRINT-RESULTS" data-part-args="STATE,TRANS-ANS" data-part-body="NEWLINE,LENGTH,PPR,PRINC$,TRIPLE-PRINT-PREFIX,F-GET-GLOBAL,STRINGP,IF,PPROGN,*ERROR-TRIPLE-DF-SIG*,*ERROR-TRIPLE-SIG*,EQUAL,OR,LD-ERROR-TRIPLES,EQ,AND,W,EVISC-TABLE,QUOTE,TABLE-ALIST,EVISCERATION-STOBJ-MARKS,EVISCERATE-STOBJS-TOP,EVISCERATED-VALX,MV-LET,CADDDR,HIDING-CARS,CADDR,PRINT-LENGTH,CADR,PRINT-LEVEL,WORLD-EVISCERATION-ALIST,EVISC-ALIST,LD-EVISC-TUPLE,EVISC-TUPLE,CDR,VALX,TRANS-ANS,CAR,STOBJS-OUT,LET*,T,NULL,COND,STANDARD-CO,OUTPUT-CHANNEL,STATE,LD-POST-EVAL-PRINT,FLG,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-PRINT-RESULTS">ld-print-results</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-print-results" data-sym="LD-PRINT-RESULTS" title="(defun ld-print-results (trans-ans state)
  (let ((flg (ld-post-eval-print state)) (output-channel (standard-co state)))
    (cond ((null flg) state)
          (t
           (let* ((stobjs-out (car trans-ans))
...">ld-print-results</a>
  (trans-ans state)
  (let ((flg (<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> state)) (output-channel (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> flg) state)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (car trans-ans)) (valx (cdr trans-ans))
            (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> state))
            (evisc-alist (<a class="sym-link system" href="basis-a.html#def-world-evisceration-alist" data-sym="WORLD-EVISCERATION-ALIST">world-evisceration-alist</a> state (car <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)))
            (print-level (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>))
            (print-length (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>))
            (hiding-cars (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eviscerated-valx state)
            (<a class="sym-link system" href="basis-b.html#def-eviscerate-stobjs-top" data-sym="EVISCERATE-STOBJS-TOP">eviscerate-stobjs-top</a> (<a class="sym-link local-def" href="#def-evisceration-stobj-marks" data-sym="EVISCERATION-STOBJ-MARKS" title="(defun evisceration-stobj-marks (stobjs-flags lst)
  (cond
   ((equal stobjs-flags *error-triple-sig*) *evisceration-error-triple-marks*)
   ((equal stobjs-flags &#39;(nil)) &#39;(nil))
   ((equal stobjs-flags &#39;(:df))
...">evisceration-stobj-marks</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> valx)
              valx
              print-level
              print-length
              evisc-alist
              (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'evisc-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
              hiding-cars
              state)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg <span class="keyword">:command-conventions</span>)
                 (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> state)
                 (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
                   (equal <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-df-sig_2A" data-sym="*ERROR-TRIPLE-DF-SIG*">*error-triple-df-sig*</a>))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> valx) <span class="keyword">:invisible</span>) state)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (stringp (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'triple-print-prefix state))
                        (<a class="sym-link system" href="axioms.html#def-princ_24" data-sym="PRINC$">princ$</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'triple-print-prefix state)
                          output-channel
                          state)
                        state)
                      (<a class="sym-link system" href="basis-a.html#def-ppr" data-sym="PPR">ppr</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> eviscerated-valx)
                        (if (stringp (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'triple-print-prefix state))
                          (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'triple-print-prefix state))
                          <span class="number">0</span>)
                        output-channel
                        state
                        <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                      (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> output-channel state)))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-ppr" data-sym="PPR">ppr</a> eviscerated-valx <span class="number">0</span> output-channel state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                  (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> output-channel state))))))))))</pre>
  </div>

<div class="form-block function" id="def-ld-print-prompt" data-defines="LD-PRINT-PROMPT" data-references="T,MV,IGNORE,DECLARE,IRREL-COL,*STANDARD-CO*,NOT,*STANDARD-OI*,STANDARD-OI,EQ,AND,COND,STANDARD-CO,LD-PROMPT,PRINT-PROMPT,COL,MV-LET,STATE,DEFUN" data-used-by="LD-READ-EVAL-PRINT" data-part-name="LD-PRINT-PROMPT" data-part-args="STATE" data-part-body="T,MV,IGNORE,DECLARE,IRREL-COL,*STANDARD-CO*,NOT,*STANDARD-OI*,STANDARD-OI,EQ,AND,COND,STANDARD-CO,LD-PROMPT,PRINT-PROMPT,STATE,COL,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-PRINT-PROMPT">ld-print-prompt</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-print-prompt" data-sym="LD-PRINT-PROMPT" title="(defun ld-print-prompt (state)
  (mv-let (col state)
          (print-prompt (ld-prompt state) (standard-co state) state)
          (cond
           ((and (eq (standard-oi state) *standard-oi*)
...">ld-print-prompt</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (col state)
    (<a class="sym-link local-def" href="#def-print-prompt" data-sym="PRINT-PROMPT" title="(defun print-prompt (prompt output-channel state)
  (with-output-forced output-channel (col state)
                      (let ((prompt-fn
                             (cond ((null prompt) nil)
                                   ((eq prompt t)
...">print-prompt</a> (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> state) (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state) state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> state) <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state) <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>))) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (irrel-col state)
          (<a class="sym-link local-def" href="#def-print-prompt" data-sym="PRINT-PROMPT" title="(defun print-prompt (prompt output-channel state)
  (with-output-forced output-channel (col state)
                      (let ((prompt-fn
                             (cond ((null prompt) nil)
                                   ((eq prompt t)
...">print-prompt</a> (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> state) <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a> state)
          (declare (ignore irrel-col))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> col state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> col state)))))</pre>
  </div>

<div class="form-block function" id="def-ld-return-error" data-defines="LD-RETURN-ERROR" data-references="T,CADR,GOOD-BYE-FN,CAR,CONSP,AND,LD-LEVEL,QUOTE,F-GET-GLOBAL,LIST,MV,EQ,COND,LD-ERROR-ACTION,ACTION,LET,STATE,DEFUN" data-used-by="LD-READ-EVAL-PRINT-SIMPLE,LD-READ-EVAL-PRINT" data-part-name="LD-RETURN-ERROR" data-part-args="STATE" data-part-body="T,CADR,GOOD-BYE-FN,CAR,CONSP,AND,LD-LEVEL,QUOTE,F-GET-GLOBAL,LIST,MV,EQ,COND,STATE,LD-ERROR-ACTION,ACTION,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-RETURN-ERROR">ld-return-error</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-return-error" data-sym="LD-RETURN-ERROR" title="(defun ld-return-error (state)
  (let ((action (ld-error-action state)))
    (cond
     ((eq action :return!)
      (mv :return (list :stop-ld (f-get-global &#39;ld-level state)) state))
...">ld-return-error</a>
  (state)
  (let ((action (<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> action <span class="keyword">:return!</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:stop-ld</span> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state))
          state))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp action) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car action) <span class="keyword">:exit</span>)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> action (<a class="sym-link system" href="basis-a.html#def-good-bye-fn" data-sym="GOOD-BYE-FN">good-bye-fn</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> action)) state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> action <span class="keyword">:error</span> state)))))</pre>
  </div>

<div class="form-block function" id="def-initialize-accumulated-warnings" data-defines="INITIALIZE-ACCUMULATED-WARNINGS" data-references="DEFUN" data-used-by="LD-READ-EVAL-PRINT" data-part-name="INITIALIZE-ACCUMULATED-WARNINGS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INITIALIZE-ACCUMULATED-WARNINGS">initialize-accumulated-warnings</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-initialize-accumulated-warnings" data-sym="INITIALIZE-ACCUMULATED-WARNINGS" title="(defun initialize-accumulated-warnings () nil)">initialize-accumulated-warnings</a> nil nil)</pre>
  </div>

<div class="form-block constant" id="def-_2Aempty-ld-history-entry_2A" data-defines="*EMPTY-LD-HISTORY-ENTRY*" data-references="LD-HISTORY-ENTRY,MAKE,DEFCONST" data-used-by="EXTEND-LD-HISTORY,ADJUST-LD-HISTORY" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*EMPTY-LD-HISTORY-ENTRY*">*empty-ld-history-entry*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aempty-ld-history-entry_2A" data-sym="*EMPTY-LD-HISTORY-ENTRY*" title="(defconst *empty-ld-history-entry* (make ld-history-entry))">*empty-ld-history-entry*</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> ld-history-entry))</pre>
  </div>

<div class="form-block function" id="def-ld-history" data-defines="LD-HISTORY" data-references="QUOTE,F-GET-GLOBAL,XARGS,DECLARE,STATE,DEFUN" data-used-by="EXTEND-LD-HISTORY,ADJUST-LD-HISTORY" data-part-name="LD-HISTORY" data-part-args="STATE" data-part-declare="STATE,XARGS,DECLARE" data-part-body="STATE,LD-HISTORY,QUOTE,F-GET-GLOBAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-HISTORY">ld-history</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>
  (state)
  (declare (xargs <span class="keyword">:stobjs</span> state))
  (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a> state))</pre>
  </div>

<div class="form-block function" id="def-ld-history-entry-input" data-defines="LD-HISTORY-ENTRY-INPUT" data-references="LD-HISTORY-ENTRY,ACCESS,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE,X,DEFUN" data-part-name="LD-HISTORY-ENTRY-INPUT" data-part-args="X" data-part-declare="X,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE" data-part-body="X,LD-HISTORY-ENTRY,ACCESS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-HISTORY-ENTRY-INPUT">ld-history-entry-input</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-history-entry-input" data-sym="LD-HISTORY-ENTRY-INPUT" title="(defun ld-history-entry-input (x)
  (declare (xargs :guard (weak-ld-history-entry-p x)))
  (access ld-history-entry x :input))">ld-history-entry-input</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (weak-ld-history-entry-p x)))
  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-history-entry x <span class="keyword">:input</span>))</pre>
  </div>

<div class="form-block function" id="def-ld-history-entry-error-flg" data-defines="LD-HISTORY-ENTRY-ERROR-FLG" data-references="LD-HISTORY-ENTRY,ACCESS,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE,X,DEFUN" data-part-name="LD-HISTORY-ENTRY-ERROR-FLG" data-part-args="X" data-part-declare="X,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE" data-part-body="X,LD-HISTORY-ENTRY,ACCESS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-HISTORY-ENTRY-ERROR-FLG">ld-history-entry-error-flg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-history-entry-error-flg" data-sym="LD-HISTORY-ENTRY-ERROR-FLG" title="(defun ld-history-entry-error-flg (x)
  (declare (xargs :guard (weak-ld-history-entry-p x)))
  (access ld-history-entry x :error-flg))">ld-history-entry-error-flg</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (weak-ld-history-entry-p x)))
  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-history-entry x <span class="keyword">:error-flg</span>))</pre>
  </div>

<div class="form-block function" id="def-ld-history-entry-stobjs-out_2Fvalue" data-defines="LD-HISTORY-ENTRY-STOBJS-OUT/VALUE" data-references="LD-HISTORY-ENTRY,ACCESS,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE,X,DEFUN" data-part-name="LD-HISTORY-ENTRY-STOBJS-OUT/VALUE" data-part-args="X" data-part-declare="X,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE" data-part-body="X,LD-HISTORY-ENTRY,ACCESS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-HISTORY-ENTRY-STOBJS-OUT/VALUE">ld-history-entry-stobjs-out/value</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-history-entry-stobjs-out_2Fvalue" data-sym="LD-HISTORY-ENTRY-STOBJS-OUT/VALUE" title="(defun ld-history-entry-stobjs-out/value (x)
  (declare (xargs :guard (weak-ld-history-entry-p x)))
  (access ld-history-entry x :stobjs-out/value))">ld-history-entry-stobjs-out/value</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (weak-ld-history-entry-p x)))
  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-history-entry x <span class="keyword">:stobjs-out/value</span>))</pre>
  </div>

<div class="form-block function" id="def-ld-history-entry-stobjs-out" data-defines="LD-HISTORY-ENTRY-STOBJS-OUT" data-references="CAR,CONSP,Y,LET,LD-HISTORY-ENTRY,ACCESS,NOT,AND,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE,X,DEFUN" data-part-name="LD-HISTORY-ENTRY-STOBJS-OUT" data-part-args="X" data-part-declare="X,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE" data-part-body="CAR,CONSP,Y,LET,X,LD-HISTORY-ENTRY,ACCESS,NOT,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-HISTORY-ENTRY-STOBJS-OUT">ld-history-entry-stobjs-out</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-history-entry-stobjs-out" data-sym="LD-HISTORY-ENTRY-STOBJS-OUT" title="(defun ld-history-entry-stobjs-out (x)
  (declare (xargs :guard (weak-ld-history-entry-p x)))
  (and (not (access ld-history-entry x :error-flg))
       (let ((y (access ld-history-entry x :stobjs-out/value)))
         (and (consp y) (car y)))))">ld-history-entry-stobjs-out</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (weak-ld-history-entry-p x)))
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-history-entry x <span class="keyword">:error-flg</span>))
    (let ((y (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-history-entry x <span class="keyword">:stobjs-out/value</span>)))
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp y) (car y)))))</pre>
  </div>

<div class="form-block function" id="def-ld-history-entry-value" data-defines="LD-HISTORY-ENTRY-VALUE" data-references="CDR,CONSP,Y,LET,LD-HISTORY-ENTRY,ACCESS,NOT,AND,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE,X,DEFUN" data-part-name="LD-HISTORY-ENTRY-VALUE" data-part-args="X" data-part-declare="X,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE" data-part-body="CDR,CONSP,Y,LET,X,LD-HISTORY-ENTRY,ACCESS,NOT,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-HISTORY-ENTRY-VALUE">ld-history-entry-value</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-history-entry-value" data-sym="LD-HISTORY-ENTRY-VALUE" title="(defun ld-history-entry-value (x)
  (declare (xargs :guard (weak-ld-history-entry-p x)))
  (and (not (access ld-history-entry x :error-flg))
       (let ((y (access ld-history-entry x :stobjs-out/value)))
         (and (consp y) (cdr y)))))">ld-history-entry-value</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (weak-ld-history-entry-p x)))
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-history-entry x <span class="keyword">:error-flg</span>))
    (let ((y (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-history-entry x <span class="keyword">:stobjs-out/value</span>)))
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp y) (cdr y)))))</pre>
  </div>

<div class="form-block function" id="def-ld-history-entry-user-data" data-defines="LD-HISTORY-ENTRY-USER-DATA" data-references="LD-HISTORY-ENTRY,ACCESS,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE,X,DEFUN" data-part-name="LD-HISTORY-ENTRY-USER-DATA" data-part-args="X" data-part-declare="X,WEAK-LD-HISTORY-ENTRY-P,XARGS,DECLARE" data-part-body="X,LD-HISTORY-ENTRY,ACCESS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-HISTORY-ENTRY-USER-DATA">ld-history-entry-user-data</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-history-entry-user-data" data-sym="LD-HISTORY-ENTRY-USER-DATA" title="(defun ld-history-entry-user-data (x)
  (declare (xargs :guard (weak-ld-history-entry-p x)))
  (access ld-history-entry x :user-data))">ld-history-entry-user-data</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (weak-ld-history-entry-p x)))
  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> ld-history-entry x <span class="keyword">:user-data</span>))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> set-ld-history-entry-user-data (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>)</pre>
  </div>

<div class="form-block function" id="def-set-ld-history-entry-user-data-default" data-defines="SET-LD-HISTORY-ENTRY-USER-DATA-DEFAULT" data-references="XARGS,IGNORE,DECLARE,STATE,STOBJS-OUT/VALUE,ERROR-FLG,INPUT,DEFUN" data-part-name="SET-LD-HISTORY-ENTRY-USER-DATA-DEFAULT" data-part-args="STATE,STOBJS-OUT/VALUE,ERROR-FLG,INPUT" data-part-declare="XARGS,STATE,STOBJS-OUT/VALUE,ERROR-FLG,INPUT,IGNORE,DECLARE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-LD-HISTORY-ENTRY-USER-DATA-DEFAULT">set-ld-history-entry-user-data-default</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-ld-history-entry-user-data-default" data-sym="SET-LD-HISTORY-ENTRY-USER-DATA-DEFAULT" title="(defun set-ld-history-entry-user-data-default
       (input error-flg stobjs-out/value state)
  (declare (ignore input error-flg stobjs-out/value state)
           (xargs :stobjs state))
  nil)">set-ld-history-entry-user-data-default</a>
  (input error-flg stobjs-out/value state)
  (declare (ignore input error-flg stobjs-out/value state)
    (xargs <span class="keyword">:stobjs</span> state))
  nil)</pre>
  </div>

<div class="form-block function" id="def-adjust-ld-history" data-defines="ADJUST-LD-HISTORY" data-references="ILLEGAL,EQ,QUASIQUOTE,F-PUT-GLOBAL,PPROGN,FIX-TRUE-LIST,TAKE,*EMPTY-LD-HISTORY-ENTRY*,CAR,INT=,NEW-LD-HISTORY,-,IF,NEW-LEN,<,ABS,LET,T,VALUE,CONS,LIST,HARD-ERROR,PROG2$,NULL,COND,CDR,END,LEN,LET*,LD-HISTORY,QUOTE,F-GET-GLOBAL,CONSP,BOOLEANP,ZEROP,NOT,INTEGERP,OR,AND,XARGS,DECLARE,STATE,X,DEFUN" data-part-name="ADJUST-LD-HISTORY" data-part-args="STATE,X" data-part-declare="STATE,LD-HISTORY,QUOTE,F-GET-GLOBAL,CONSP,BOOLEANP,ZEROP,NOT,X,INTEGERP,OR,AND,XARGS,DECLARE" data-part-body="ILLEGAL,EQ,QUASIQUOTE,F-PUT-GLOBAL,PPROGN,FIX-TRUE-LIST,TAKE,*EMPTY-LD-HISTORY-ENTRY*,CAR,INT=,NEW-LD-HISTORY,-,IF,NEW-LEN,<,ABS,LET,T,VALUE,CONS,LIST,ADJUST-LD-HISTORY,HARD-ERROR,PROG2$,NULL,ZEROP,NOT,X,INTEGERP,AND,COND,CDR,END,LEN,STATE,QUOTE,F-GET-GLOBAL,LD-HISTORY,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADJUST-LD-HISTORY">adjust-ld-history</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-adjust-ld-history" data-sym="ADJUST-LD-HISTORY" title="(defun adjust-ld-history (x state)
  (declare
   (xargs :guard
    (and (or (and (integerp x) (not (zerop x))) (booleanp x))
         (consp (f-get-global (quote ld-history) state)))))
...">adjust-ld-history</a>
  (x state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp x) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (zerop x))) (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> x))
        (consp (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a> state)))))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a> state)) (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>))
      (end (cdr <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp x) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (zerop x))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> end) (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-hard-error" data-sym="HARD-ERROR">hard-error</a> '<a class="sym-link local-def" href="#def-adjust-ld-history" data-sym="ADJUST-LD-HISTORY" title="(defun adjust-ld-history (x state)
  (declare
   (xargs :guard
    (and (or (and (integerp x) (not (zerop x))) (booleanp x))
         (consp (f-get-global (quote ld-history) state)))))
...">adjust-ld-history</a>
                <span class="string">"It is illegal to call ~x0 on an integer argument ~
                           here, because the ld-history is in single-entry ~
                           mode.  See :DOC ld-history."</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 '<a class="sym-link local-def" href="#def-adjust-ld-history" data-sym="ADJUST-LD-HISTORY" title="(defun adjust-ld-history (x state)
  (declare
   (xargs :guard
    (and (or (and (integerp x) (not (zerop x))) (booleanp x))
         (consp (f-get-global (quote ld-history) state)))))
...">adjust-ld-history</a>)))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:error</span>)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((abs (abs x)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((&lt; abs <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-len (if (&lt; <span class="number">0</span> x)
                         x
                         (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> abs))) (new-ld-history (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> new-len <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>) <a class="sym-link local-def" href="#def-_2Aempty-ld-history-entry_2A" data-sym="*EMPTY-LD-HISTORY-ENTRY*" title="(defconst *empty-ld-history-entry* (make ld-history-entry))">*empty-ld-history-entry*</a>))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> new-len (<a class="sym-link system" href="axioms.html#def-fix-true-list" data-sym="FIX-TRUE-LIST">fix-true-list</a> <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>))))))
                    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a> new-ld-history state)
                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<span class="keyword">:ld-history-truncated</span> <span class="keyword">:old-length</span> ,LEN
                          <span class="keyword">:new-length</span> ,NEW-LEN)))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<span class="keyword">:no-change</span> <span class="keyword">:length</span> ,LEN))))))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) end) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<span class="keyword">:no-change</span> <span class="keyword">:length</span> ,LEN)))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x nil) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> end)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<span class="keyword">:no-change</span> <span class="keyword">:length</span> ,LEN)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>) <a class="sym-link local-def" href="#def-_2Aempty-ld-history-entry_2A" data-sym="*EMPTY-LD-HISTORY-ENTRY*" title="(defconst *empty-ld-history-entry* (make ld-history-entry))">*empty-ld-history-entry*</a>)
            state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(<span class="keyword">:saving-ld-history</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x nil) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>)) state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(<span class="keyword">:saving-ld-history</span> nil))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-illegal" data-sym="ILLEGAL">illegal</a> '<a class="sym-link local-def" href="#def-adjust-ld-history" data-sym="ADJUST-LD-HISTORY" title="(defun adjust-ld-history (x state)
  (declare
   (xargs :guard
    (and (or (and (integerp x) (not (zerop x))) (booleanp x))
         (consp (f-get-global (quote ld-history) state)))))
...">adjust-ld-history</a>
            <span class="string">"Illegal value for ~x0: ~x1.  Note: Normally ~
                      guard-checking would avoid this error.  See :DOC ~
                      ld-history."</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 '<a class="sym-link local-def" href="#def-adjust-ld-history" data-sym="ADJUST-LD-HISTORY" title="(defun adjust-ld-history (x state)
  (declare
   (xargs :guard
    (and (or (and (integerp x) (not (zerop x))) (booleanp x))
         (consp (f-get-global (quote ld-history) state)))))
...">adjust-ld-history</a>) (cons #\1 x)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:error</span>))))))</pre>
  </div>

<div class="form-block function" id="def-extend-ld-history" data-defines="EXTEND-LD-HISTORY" data-references="CONS,T,CAR,*EMPTY-LD-HISTORY-ENTRY*,CADR,EQUAL,AND,LIST,CDR,EQ,COND,F-PUT-GLOBAL,SET-LD-HISTORY-ENTRY-USER-DATA,LD-HISTORY-ENTRY,MAKE,NEW-ENTRY,LET*,LD-HISTORY,QUOTE,F-GET-GLOBAL,CONSP,XARGS,DECLARE,STATE,TRANS-ANS,ERROR-FLG,INPUT,DEFUN" data-used-by="LD-READ-EVAL-PRINT" data-part-name="EXTEND-LD-HISTORY" data-part-args="STATE,TRANS-ANS,ERROR-FLG,INPUT" data-part-declare="LD-HISTORY,QUOTE,F-GET-GLOBAL,CONSP,STATE,XARGS,DECLARE" data-part-body="CONS,T,CAR,*EMPTY-LD-HISTORY-ENTRY*,CADR,EQUAL,CONSP,AND,LIST,CDR,EQ,COND,F-PUT-GLOBAL,SET-LD-HISTORY-ENTRY-USER-DATA,TRANS-ANS,ERROR-FLG,INPUT,LD-HISTORY-ENTRY,MAKE,NEW-ENTRY,STATE,QUOTE,F-GET-GLOBAL,LD-HISTORY,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXTEND-LD-HISTORY">extend-ld-history</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-extend-ld-history" data-sym="EXTEND-LD-HISTORY" title="(defun extend-ld-history (input error-flg trans-ans state)
  (declare
   (xargs :stobjs state :guard
    (consp (f-get-global (quote ld-history) state))))
  (let* ((ld-history (f-get-global &#39;ld-history state))
...">extend-ld-history</a>
  (input error-flg trans-ans state)
  (declare (xargs <span class="keyword">:stobjs</span> state
      <span class="keyword">:guard</span> (consp (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a> state))))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a> state)) (new-entry (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> ld-history-entry
          <span class="keyword">:input</span> input
          <span class="keyword">:error-flg</span> error-flg
          <span class="keyword">:stobjs-out/value</span> trans-ans
          <span class="keyword">:user-data</span> (set-ld-history-entry-user-data input
            error-flg
            trans-ans
            state))))
    (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>) nil) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> new-entry))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>))
           (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>) <a class="sym-link local-def" href="#def-_2Aempty-ld-history-entry_2A" data-sym="*EMPTY-LD-HISTORY-ENTRY*" title="(defconst *empty-ld-history-entry* (make ld-history-entry))">*empty-ld-history-entry*</a>)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> new-entry (car <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons new-entry <a class="sym-link local-def" href="#def-ld-history" data-sym="LD-HISTORY" title="(defun ld-history (state)
  (declare (xargs :stobjs state))
  (f-get-global &#39;ld-history state))">ld-history</a>)))
      state)))</pre>
  </div>

<div class="form-block function" id="def-ld-read-eval-print" data-defines="LD-READ-EVAL-PRINT" data-references="SET-LD-PRE-EVAL-FILTER,NEW-NAMEP,LD-PRE-EVAL-FILTER,FILTER,LIST*,GOOD-BYE-FN,VAL,LD-ERROR-ACTION,ACTION,LD-PRINT-RESULTS,CADR,MAYBE-ADD-COMMAND-LANDMARK,ER-PROGN,CDR,*ERROR-TRIPLE-DF-SIG*,OR,LD-ERROR-TRIPLES,EXTEND-LD-HISTORY,LIST,LOCAL,CONSP,*ERROR-TRIPLE-SIG*,CAR,FORM0,TOP-LEVEL,TRANS-EVAL-DEFAULT-WARNING,ACL2-RAW-EVAL,RAW-MODE-P,REVERT-WORLD-ON-ERROR,TRANS-ANS,ERROR-FLG,IN-LOCAL-FLG,DEFAULT-DEFUN-MODE,OLD-DEFAULT-DEFUN-MODE,W,OLD-WRLD,LET*,LAST-MAKE-EVENT-EXPANSION,INITIALIZE-TIMERS,INITIALIZE-ACCUMULATED-WARNINGS,ASSERT$,EQ,NULL,LD-FILTER-COMMAND,ANS,LD-PRINT-COMMAND,LD-RETURN-ERROR,GOOD-BYE,*STANDARD-OI*,STANDARD-OI,EQUAL,PROG2$,NEWLINE,STANDARD-CO,PRINC$,LD-PROMPT,LD-READ-COMMAND,VERIFY,PRINT-RE-ENTERING-PROOF-BUILDER,LET,FORM,KEYP,ERP,EOFP,LD-PRINT-PROMPT,MV,ILLEGAL-STATE-P,NOT,IN-VERIFY-FLG,EQL,AND,IF,COL,MV-LET,CHK-ABSSTOBJ-INVARIANTS,RAW-GUARD-WARNINGP,F-PUT-GLOBAL,T,PRINT-DEFERRED-TTAG-NOTES-SUMMARY,LD-LEVEL,QUOTE,F-GET-GLOBAL,<=,COND,PPROGN,STATE,DEFUN" data-used-by="LD-LOOP" data-part-name="LD-READ-EVAL-PRINT" data-part-args="STATE" data-part-body="SET-LD-PRE-EVAL-FILTER,NEW-NAMEP,LD-PRE-EVAL-FILTER,FILTER,LIST*,GOOD-BYE-FN,VAL,LD-ERROR-ACTION,ACTION,LD-PRINT-RESULTS,CADR,MAYBE-ADD-COMMAND-LANDMARK,ER-PROGN,CDR,*ERROR-TRIPLE-DF-SIG*,OR,LD-ERROR-TRIPLES,EXTEND-LD-HISTORY,LIST,LOCAL,CONSP,*ERROR-TRIPLE-SIG*,CAR,FORM0,TOP-LEVEL,TRANS-EVAL-DEFAULT-WARNING,ACL2-RAW-EVAL,RAW-MODE-P,REVERT-WORLD-ON-ERROR,TRANS-ANS,ERROR-FLG,IN-LOCAL-FLG,DEFAULT-DEFUN-MODE,OLD-DEFAULT-DEFUN-MODE,W,OLD-WRLD,LET*,LAST-MAKE-EVENT-EXPANSION,INITIALIZE-TIMERS,INITIALIZE-ACCUMULATED-WARNINGS,ASSERT$,EQ,NULL,LD-FILTER-COMMAND,ANS,LD-PRINT-COMMAND,LD-RETURN-ERROR,GOOD-BYE,*STANDARD-OI*,STANDARD-OI,EQUAL,PROG2$,NEWLINE,STANDARD-CO,PRINC$,LD-PROMPT,LD-READ-COMMAND,VERIFY,PRINT-RE-ENTERING-PROOF-BUILDER,LET,FORM,KEYP,ERP,EOFP,LD-PRINT-PROMPT,MV,ILLEGAL-STATE-P,NOT,IN-VERIFY-FLG,EQL,AND,IF,COL,MV-LET,CHK-ABSSTOBJ-INVARIANTS,RAW-GUARD-WARNINGP,F-PUT-GLOBAL,T,PRINT-DEFERRED-TTAG-NOTES-SUMMARY,STATE,LD-LEVEL,QUOTE,F-GET-GLOBAL,<=,COND,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-READ-EVAL-PRINT">ld-read-eval-print</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-read-eval-print" data-sym="LD-READ-EVAL-PRINT" title="(defun ld-read-eval-print (state)
  (pprogn
   (cond
    ((&lt;= (f-get-global &#39;ld-level state) 1)
     (print-deferred-ttag-notes-summary state))
...">ld-read-eval-print</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state) <span class="number">1</span>) (<a class="sym-link system" href="history-management.html#def-print-deferred-ttag-notes-summary" data-sym="PRINT-DEFERRED-TTAG-NOTES-SUMMARY">print-deferred-ttag-notes-summary</a> state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
    (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'raw-guard-warningp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)
    (chk-absstobj-invariants state)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (col state)
      (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-verify-flg state) <span class="number">1</span>)
          (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state) <span class="number">1</span>)
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-illegal-state-p" data-sym="ILLEGAL-STATE-P">illegal-state-p</a> state)))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="number">0</span> state)
        (<a class="sym-link local-def" href="#def-ld-print-prompt" data-sym="LD-PRINT-PROMPT" title="(defun ld-print-prompt (state)
  (mv-let (col state)
          (print-prompt (ld-prompt state) (standard-co state) state)
          (cond
           ((and (eq (standard-oi state) *standard-oi*)
...">ld-print-prompt</a> state))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp erp keyp form state)
        (let ((in-verify-flg (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-verify-flg state)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (in-verify-flg (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'in-verify-flg nil state)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state) <span class="number">1</span>)
                     (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> in-verify-flg <span class="number">1</span>)
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-illegal-state-p" data-sym="ILLEGAL-STATE-P">illegal-state-p</a> state))) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-re-entering-proof-builder nil state)
                      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil nil '(verify) state)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ld-read-command" data-sym="LD-READ-COMMAND" title="(defun ld-read-command (state)
  (pprogn (brr-evisc-tuple-oracle-update state)
          (prog2$
           (and (int= (f-get-global &#39;ld-level state) 1)
                (semi-initialize-brr-wormhole state))
...">ld-read-command</a> state)))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ld-read-command" data-sym="LD-READ-COMMAND" title="(defun ld-read-command (state)
  (pprogn (brr-evisc-tuple-oracle-update state)
          (prog2$
           (and (int= (f-get-global &#39;ld-level state) 1)
                (semi-initialize-brr-wormhole state))
...">ld-read-command</a> state))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> state) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-princ_24" data-sym="PRINC$">princ$</a> <span class="string">"Bye."</span> (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state) state)
                  (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state) state)
                  (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> state) <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>) (<a class="sym-link system" href="basis-a.html#def-good-bye" data-sym="GOOD-BYE">good-bye</a>))
                    state)
                  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> <span class="keyword">:eof</span> state)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> <span class="keyword">:eof</span> state))))
          (erp (<a class="sym-link local-def" href="#def-ld-return-error" data-sym="LD-RETURN-ERROR" title="(defun ld-return-error (state)
  (let ((action (ld-error-action state)))
    (cond
     ((eq action :return!)
      (mv :return (list :stop-ld (f-get-global &#39;ld-level state)) state))
...">ld-return-error</a> state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-ld-print-command" data-sym="LD-PRINT-COMMAND" title="(defun ld-print-command (keyp form col state)
  (with-base-10
   (mv-let (col state)
           (cond ((not (eq (ld-pre-eval-print state) t)) (mv col state))
                 (keyp
...">ld-print-command</a> keyp form col state)
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp ans state)
                (<a class="sym-link local-def" href="#def-ld-filter-command" data-sym="LD-FILTER-COMMAND" title="(defun ld-filter-command (form state)
  (let ((filter (ld-pre-eval-filter state)))
    (cond ((eq filter :all) (value t))
          ((eq filter :query)
           (acl2-query :filter
...">ld-filter-command</a> form state)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link local-def" href="#def-ld-return-error" data-sym="LD-RETURN-ERROR" title="(defun ld-return-error (state)
  (let ((action (ld-error-action state)))
    (cond
     ((eq action :return!)
      (mv :return (list :stop-ld (f-get-global &#39;ld-level state)) state))
...">ld-return-error</a> state))
                  ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ans) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:continue</span> nil state))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ans <span class="keyword">:error</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:error</span> nil state))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ans <span class="keyword">:return</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> <span class="keyword">:filter</span> state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ans <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state) <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link local-def" href="#def-initialize-accumulated-warnings" data-sym="INITIALIZE-ACCUMULATED-WARNINGS" title="(defun initialize-accumulated-warnings () nil)">initialize-accumulated-warnings</a>)
                              (<a class="sym-link local-def" href="#def-initialize-timers" data-sym="INITIALIZE-TIMERS" title="(defun initialize-timers (state)
  (pprogn (set-timer &#39;prove-time &#39;(0) state) (set-timer &#39;print-time &#39;(0) state)
          (set-timer &#39;proof-tree-time &#39;(0) state)
          (set-timer &#39;other-time &#39;(0) state)))">initialize-timers</a> state)))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                        (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion nil state)
                        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (old-default-defun-mode (<a class="sym-link system" href="axioms.html#def-default-defun-mode" data-sym="DEFAULT-DEFUN-MODE">default-defun-mode</a> old-wrld))
                            (in-local-flg (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state)))
                          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (error-flg trans-ans state)
                            (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (error-flg trans-ans state)
                                (if (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state)
                                  (acl2-raw-eval form state)
                                  (trans-eval-default-warning form 'top-level state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                                (let ((form0 (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> in-local-flg
                                         (equal (car trans-ans) <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
                                         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp form) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>))))
                                       (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> form)
                                       form)))
                                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-extend-ld-history" data-sym="EXTEND-LD-HISTORY" title="(defun extend-ld-history (input error-flg trans-ans state)
  (declare
   (xargs :stobjs state :guard
    (consp (f-get-global (quote ld-history) state))))
  (let* ((ld-history (f-get-global &#39;ld-history state))
...">extend-ld-history</a> form0 error-flg trans-ans state)
                                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (error-flg (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
                                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> state)
                                         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal (car trans-ans) <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
                                           (equal (car trans-ans) <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-df-sig_2A" data-sym="*ERROR-TRIPLE-DF-SIG*">*error-triple-df-sig*</a>))
                                         (car (cdr trans-ans))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-maybe-add-command-landmark" data-sym="MAYBE-ADD-COMMAND-LANDMARK" title="(defun maybe-add-command-landmark
       (old-wrld old-default-defun-mode form trans-ans state)
  (let* ((wrld (w state))
         (ext
          (and (member-eq &#39;state (car trans-ans))
...">maybe-add-command-landmark</a> old-wrld
                                            old-default-defun-mode
                                            form0
                                            trans-ans
                                            state)
                                          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil trans-ans state))))))))
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (error-flg (<a class="sym-link local-def" href="#def-ld-return-error" data-sym="LD-RETURN-ERROR" title="(defun ld-return-error (state)
  (let ((action (ld-error-action state)))
    (cond
     ((eq action :return!)
      (mv :return (list :stop-ld (f-get-global &#39;ld-level state)) state))
...">ld-return-error</a> state))
                              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (car trans-ans) <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
                                 (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (cdr trans-ans)) <span class="keyword">:q</span>)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> <span class="keyword">:exit</span> state))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-ld-print-results" data-sym="LD-PRINT-RESULTS" title="(defun ld-print-results (trans-ans state)
  (let ((flg (ld-post-eval-print state)) (output-channel (standard-co state)))
    (cond ((null flg) state)
          (t
           (let* ((stobjs-out (car trans-ans))
...">ld-print-results</a> trans-ans state)
                                  (let ((action (<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> state)))
                                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> state)
                                         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> action <span class="keyword">:continue</span>))
                                         (equal (car trans-ans) <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
                                         (let ((val (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (cdr trans-ans))))
                                           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp val) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car val) <span class="keyword">:stop-ld</span>)))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp action) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car action) <span class="keyword">:exit</span>)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> action (<a class="sym-link system" href="basis-a.html#def-good-bye-fn" data-sym="GOOD-BYE-FN">good-bye-fn</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> action)) state))
                                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:stop-ld</span> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state)
                                                (cdr (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (cdr trans-ans))))
                                              state))))
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((filter (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> state)))
                                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> filter <span class="keyword">:all</span>))
                                               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> filter <span class="keyword">:query</span>))
                                               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> filter <span class="keyword">:illegal-state</span>))
                                               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-new-namep" data-sym="NEW-NAMEP">new-namep</a> filter (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="basis-b.html#def-set-ld-pre-eval-filter" data-sym="SET-LD-PRE-EVAL-FILTER">set-ld-pre-eval-filter</a> <span class="keyword">:all</span> state)
                                                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> <span class="keyword">:filter</span> state)))
                                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:continue</span> nil state))))))))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-ld-loop" data-defines="LD-LOOP" data-references="MV,T,VALUE,EQ,COND,LD-READ-EVAL-PRINT,VAL,SIGNAL,MV-LET,STATE,DEFUN" data-used-by="LD-FN-BODY" data-part-name="LD-LOOP" data-part-args="STATE" data-part-body="MV,T,VALUE,LD-LOOP,EQ,COND,LD-READ-EVAL-PRINT,STATE,VAL,SIGNAL,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-LOOP">ld-loop</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-loop" data-sym="LD-LOOP" title="(defun ld-loop (state)
  (mv-let (signal val state) (ld-read-eval-print state)
          (cond ((eq signal :continue) (ld-loop state))
                ((eq signal :return) (value val)) (t (mv t nil state)))))">ld-loop</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (signal val state)
    (<a class="sym-link local-def" href="#def-ld-read-eval-print" data-sym="LD-READ-EVAL-PRINT" title="(defun ld-read-eval-print (state)
  (pprogn
   (cond
    ((&lt;= (f-get-global &#39;ld-level state) 1)
     (print-deferred-ttag-notes-summary state))
...">ld-read-eval-print</a> state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> signal <span class="keyword">:continue</span>) (<a class="sym-link local-def" href="#def-ld-loop" data-sym="LD-LOOP" title="(defun ld-loop (state)
  (mv-let (signal val state) (ld-read-eval-print state)
          (cond ((eq signal :continue) (ld-loop state))
                ((eq signal :return) (value val)) (t (mv t nil state)))))">ld-loop</a> state))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> signal <span class="keyword">:return</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)))))</pre>
  </div>

<div class="form-block function" id="def-get-directory-of-file" data-defines="GET-DIRECTORY-OF-FILE" data-references="QUOTE,HARD,ER,LENGTH,-,1-,SUBSEQ,IF,*DIRECTORY-SEPARATOR*,POSITION,POSN,REVERSE,P-REV,LET*,P,DEFUN" data-used-by="UPDATE-CBD" data-part-name="GET-DIRECTORY-OF-FILE" data-part-args="P" data-part-body="GET-DIRECTORY-OF-FILE,QUOTE,HARD,ER,LENGTH,-,1-,SUBSEQ,IF,*DIRECTORY-SEPARATOR*,POSITION,POSN,P,REVERSE,P-REV,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-DIRECTORY-OF-FILE">get-directory-of-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-directory-of-file" data-sym="GET-DIRECTORY-OF-FILE" title="(defun get-directory-of-file (p)
  (let* ((p-rev (reverse p)) (posn (position *directory-separator* p-rev)))
    (if posn
        (subseq p 0 (1- (- (length p) posn)))
        (er hard &#39;get-directory-of-file">get-directory-of-file</a>
  (p)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((p-rev (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> p)) (posn (<a class="sym-link system" href="axioms.html#def-position" data-sym="POSITION">position</a> <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator_2A" data-sym="*DIRECTORY-SEPARATOR*">*directory-separator*</a> p-rev)))
    (if posn
      (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> p <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> p) posn)))
      (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-get-directory-of-file" data-sym="GET-DIRECTORY-OF-FILE" title="(defun get-directory-of-file (p)
  (let* ((p-rev (reverse p)) (posn (position *directory-separator* p-rev)))
    (if posn
        (subseq p 0 (1- (- (length p) posn)))
        (er hard &#39;get-directory-of-file">get-directory-of-file</a>
        <span class="string">"Implementation error!  Unable to get directory for file ~x0."</span>
        p))))</pre>
  </div>

<div class="form-block function" id="def-update-cbd" data-defines="UPDATE-CBD" data-references="T,OUR-MERGE-PATHNAMES,ABSOLUTE-PATHNAME-STRING-P,IF,SET-CBD-STATE,*DIRECTORY-SEPARATOR-STRING*,GET-DIRECTORY-OF-FILE,STRING,CONCATENATE,EXPAND-TILDE-TO-USER-HOME-DIR,FILENAME-DIR,W,OS,LET*,*DIRECTORY-SEPARATOR*,POSITION,STRINGP,AND,COND,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,OLD-CBD,LET,STATE,STANDARD-OI0,DEFUN" data-used-by="LD-FN-BODY" data-part-name="UPDATE-CBD" data-part-args="STATE,STANDARD-OI0" data-part-body="T,OUR-MERGE-PATHNAMES,ABSOLUTE-PATHNAME-STRING-P,IF,SET-CBD-STATE,UPDATE-CBD,*DIRECTORY-SEPARATOR-STRING*,GET-DIRECTORY-OF-FILE,STRING,CONCATENATE,EXPAND-TILDE-TO-USER-HOME-DIR,FILENAME-DIR,W,OS,LET*,*DIRECTORY-SEPARATOR*,POSITION,STANDARD-OI0,STRINGP,AND,COND,STATE,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,OLD-CBD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-CBD">update-cbd</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-cbd" data-sym="UPDATE-CBD" title="(defun update-cbd (standard-oi0 state)
  (let ((old-cbd (f-get-global &#39;connected-book-directory state)))
    (cond
     ((and old-cbd (stringp standard-oi0)
           (position *directory-separator* standard-oi0))
...">update-cbd</a>
  (standard-oi0 state)
  (let ((old-cbd (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> old-cbd
         (stringp standard-oi0)
         (<a class="sym-link system" href="axioms.html#def-position" data-sym="POSITION">position</a> <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator_2A" data-sym="*DIRECTORY-SEPARATOR*">*directory-separator*</a> standard-oi0)) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (filename-dir (<a class="sym-link system" href="basis-a.html#def-expand-tilde-to-user-home-dir" data-sym="EXPAND-TILDE-TO-USER-HOME-DIR">expand-tilde-to-user-home-dir</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
                  (<a class="sym-link local-def" href="#def-get-directory-of-file" data-sym="GET-DIRECTORY-OF-FILE" title="(defun get-directory-of-file (p)
  (let* ((p-rev (reverse p)) (posn (position *directory-separator* p-rev)))
    (if posn
        (subseq p 0 (1- (- (length p) posn)))
        (er hard &#39;get-directory-of-file">get-directory-of-file</a> standard-oi0)
                  <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator-string_2A" data-sym="*DIRECTORY-SEPARATOR-STRING*">*directory-separator-string*</a>)
                <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a>
                '<a class="sym-link local-def" href="#def-update-cbd" data-sym="UPDATE-CBD" title="(defun update-cbd (standard-oi0 state)
  (let ((old-cbd (f-get-global &#39;connected-book-directory state)))
    (cond
     ((and old-cbd (stringp standard-oi0)
           (position *directory-separator* standard-oi0))
...">update-cbd</a>
                state)))
          (set-cbd-state (if (<a class="sym-link system" href="axioms.html#def-absolute-pathname-string-p" data-sym="ABSOLUTE-PATHNAME-STRING-P">absolute-pathname-string-p</a> filename-dir nil <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a>)
              filename-dir
              (<a class="sym-link system" href="basis-a.html#def-our-merge-pathnames" data-sym="OUR-MERGE-PATHNAMES">our-merge-pathnames</a> old-cbd filename-dir))
            state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))</pre>
  </div>

<div class="form-block function" id="def-ld-fn-body" data-defines="LD-FN-BODY" data-references="MV,LD-LOOP,VAL,ERP,MV-LET,W,PROJECT-DIR-ALIST,CONNECTED-BOOK-DIRECTORY,LD-LEVEL,ACL2-VERSION,QUOTE,F-GET-GLOBAL,WITH-BASE-10,LD-EVISC-TUPLE,STANDARD-CO,KWOTE,CONSP,CONS,LIST,*STANDARD-OI*,IF,FMS,T,EQ,LD-VERBOSE,COND,UPDATE-CBD,F-PUT-LD-SPECIALS,PPROGN,STATE,NEW-LD-SPECIALS-ALIST,STANDARD-OI0,DEFUN" data-used-by="LD-FN1" data-part-name="LD-FN-BODY" data-part-args="STATE,NEW-LD-SPECIALS-ALIST,STANDARD-OI0" data-part-body="MV,LD-LOOP,VAL,ERP,MV-LET,W,PROJECT-DIR-ALIST,CONNECTED-BOOK-DIRECTORY,LD-LEVEL,ACL2-VERSION,QUOTE,F-GET-GLOBAL,WITH-BASE-10,LD-EVISC-TUPLE,STANDARD-CO,KWOTE,CONSP,CONS,LIST,*STANDARD-OI*,IF,FMS,T,EQ,LD-VERBOSE,COND,STANDARD-OI0,UPDATE-CBD,STATE,NEW-LD-SPECIALS-ALIST,F-PUT-LD-SPECIALS,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-FN-BODY">ld-fn-body</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-fn-body" data-sym="LD-FN-BODY" title="(defun ld-fn-body (standard-oi0 new-ld-specials-alist state)
  (pprogn (f-put-ld-specials new-ld-specials-alist nil state)
          (update-cbd standard-oi0 state)
          (cond
           ((ld-verbose state)
...">ld-fn-body</a>
  (standard-oi0 new-ld-specials-alist state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-f-put-ld-specials" data-sym="F-PUT-LD-SPECIALS" title="(defun f-put-ld-specials (alist uurp state)
  (cond ((null alist) (cond (uurp (update-useless-runes nil state)) (t state)))
        ((eq (caar alist) &#39;useless-runes)
         (pprogn
          (cond (uurp (update-useless-runes (cdar alist) state))
...">f-put-ld-specials</a> new-ld-specials-alist nil state)
    (<a class="sym-link local-def" href="#def-update-cbd" data-sym="UPDATE-CBD" title="(defun update-cbd (standard-oi0 state)
  (let ((old-cbd (f-get-global &#39;connected-book-directory state)))
    (cond
     ((and old-cbd (stringp standard-oi0)
           (position *directory-separator* standard-oi0))
...">update-cbd</a> standard-oi0 state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> state) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> standard-oi0 <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>)
                <span class="string">"ACL2 loading *standard-oi*.~%"</span>
                <span class="string">"ACL2 loading ~x0.~%"</span>)
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp standard-oi0) (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> standard-oi0))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> standard-oi0))))
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state
              (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> state)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-with-base-10" data-sym="WITH-BASE-10">with-base-10</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~@0"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> state))
                  (cons #\v (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'acl2-version state))
                  (cons #\l (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state))
                  (cons #\c (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state))
                  (cons #\b (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
                (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                state
                (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> state))))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
      (<a class="sym-link local-def" href="#def-ld-loop" data-sym="LD-LOOP" title="(defun ld-loop (state)
  (mv-let (signal val state) (ld-read-eval-print state)
          (cond ((eq signal :continue) (ld-loop state))
                ((eq signal :return) (value val)) (t (mv t nil state)))))">ld-loop</a> state)
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> standard-oi0 <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>)
                <span class="string">"Finished loading *standard-oi*.~%"</span>
                <span class="string">"Finished loading ~x0.~%"</span>)
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp standard-oi0) (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> standard-oi0))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> standard-oi0))))
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state
              (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> state)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state)))))</pre>
  </div>

<div class="form-block function" id="def-ld-fn1" data-defines="LD-FN1" data-references="CLOSE-CHANNELS,F-PUT-LD-SPECIALS,SET-CBD-STATE,LD-FN-BODY,F-PUT-GLOBAL,PPROGN,ACL2-UNWIND-PROTECT,IF,CDR,CHANNEL-CLOSING-ALIST,CAR,NEW-LD-SPECIALS-ALIST,F-GET-LD-SPECIALS,OLD-LD-SPECIALS-ALIST,LET,T,VALUE,NULL,COND,CHK-ACCEPTABLE-LD-FN,PAIR,ER-LET*,CONNECTED-BOOK-DIRECTORY,OLD-CBD,1+,NEW-LD-LEVEL,LD-LEVEL,QUOTE,F-GET-GLOBAL,OLD-LD-LEVEL,LET*,BIND-FLG,STATE,ALIST,STANDARD-OI0,DEFUN" data-used-by="LD-FN0" data-part-name="LD-FN1" data-part-args="BIND-FLG,STATE,ALIST,STANDARD-OI0" data-part-body="CLOSE-CHANNELS,F-PUT-LD-SPECIALS,SET-CBD-STATE,LD-FN-BODY,F-PUT-GLOBAL,PPROGN,ACL2-UNWIND-PROTECT,BIND-FLG,IF,CDR,CHANNEL-CLOSING-ALIST,CAR,NEW-LD-SPECIALS-ALIST,F-GET-LD-SPECIALS,OLD-LD-SPECIALS-ALIST,LET,T,VALUE,NULL,COND,STANDARD-OI0,ALIST,CHK-ACCEPTABLE-LD-FN,PAIR,ER-LET*,CONNECTED-BOOK-DIRECTORY,OLD-CBD,1+,NEW-LD-LEVEL,STATE,LD-LEVEL,QUOTE,F-GET-GLOBAL,OLD-LD-LEVEL,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-FN1">ld-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-fn1" data-sym="LD-FN1" title="(defun ld-fn1 (standard-oi0 alist state bind-flg)
  (let* ((old-ld-level (f-get-global &#39;ld-level state))
         (new-ld-level (1+ old-ld-level))
         (old-cbd (f-get-global &#39;connected-book-directory state)))
    (er-let* ((pair (chk-acceptable-ld-fn alist standard-oi0 state)))
...">ld-fn1</a>
  (standard-oi0 alist state bind-flg)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-ld-level (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state)) (new-ld-level (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> old-ld-level))
      (old-cbd (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pair (<a class="sym-link local-def" href="#def-chk-acceptable-ld-fn" data-sym="CHK-ACCEPTABLE-LD-FN" title="(defun chk-acceptable-ld-fn (alist standard-oi0 state)
  (let ((ctx &#39;ld))
    (er-progn
     (cond
      ((or (null (f-boundp-global &#39;current-acl2-world state)) (null (w state)))
...">chk-acceptable-ld-fn</a> alist standard-oi0 state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pair) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:missing-input</span>))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((old-ld-specials-alist (<a class="sym-link local-def" href="#def-f-get-ld-specials" data-sym="F-GET-LD-SPECIALS" title="(defun f-get-ld-specials (state)
  (list (cons &#39;standard-oi (f-get-global &#39;standard-oi state))
        (cons &#39;standard-co (f-get-global &#39;standard-co state))
        (cons &#39;proofs-co (f-get-global &#39;proofs-co state))
        (cons &#39;current-package (f-get-global &#39;current-package state))
...">f-get-ld-specials</a> state)) (new-ld-specials-alist (car pair))
              (channel-closing-alist (cdr pair)))
            (if bind-flg
              (<a class="sym-link system" href="axioms.html#def-acl2-unwind-protect" data-sym="ACL2-UNWIND-PROTECT">acl2-unwind-protect</a> <span class="string">"ld-fn"</span>
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'ld-level new-ld-level state)
                  (<a class="sym-link local-def" href="#def-ld-fn-body" data-sym="LD-FN-BODY" title="(defun ld-fn-body (standard-oi0 new-ld-specials-alist state)
  (pprogn (f-put-ld-specials new-ld-specials-alist nil state)
          (update-cbd standard-oi0 state)
          (cond
           ((ld-verbose state)
...">ld-fn-body</a> standard-oi0 new-ld-specials-alist state))
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'ld-level old-ld-level state)
                  (set-cbd-state old-cbd state)
                  (<a class="sym-link local-def" href="#def-f-put-ld-specials" data-sym="F-PUT-LD-SPECIALS" title="(defun f-put-ld-specials (alist uurp state)
  (cond ((null alist) (cond (uurp (update-useless-runes nil state)) (t state)))
        ((eq (caar alist) &#39;useless-runes)
         (pprogn
          (cond (uurp (update-useless-runes (cdar alist) state))
...">f-put-ld-specials</a> old-ld-specials-alist <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)
                  (<a class="sym-link local-def" href="#def-close-channels" data-sym="CLOSE-CHANNELS" title="(defun close-channels (channel-closing-alist state)
  (cond ((null channel-closing-alist) state)
        (t
         (pprogn
          (cond
...">close-channels</a> channel-closing-alist state))
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'ld-level old-ld-level state)
                  (set-cbd-state old-cbd state)
                  (<a class="sym-link local-def" href="#def-f-put-ld-specials" data-sym="F-PUT-LD-SPECIALS" title="(defun f-put-ld-specials (alist uurp state)
  (cond ((null alist) (cond (uurp (update-useless-runes nil state)) (t state)))
        ((eq (caar alist) &#39;useless-runes)
         (pprogn
          (cond (uurp (update-useless-runes (cdar alist) state))
...">f-put-ld-specials</a> old-ld-specials-alist <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)
                  (<a class="sym-link local-def" href="#def-close-channels" data-sym="CLOSE-CHANNELS" title="(defun close-channels (channel-closing-alist state)
  (cond ((null channel-closing-alist) state)
        (t
         (pprogn
          (cond
...">close-channels</a> channel-closing-alist state)))
              (<a class="sym-link system" href="axioms.html#def-acl2-unwind-protect" data-sym="ACL2-UNWIND-PROTECT">acl2-unwind-protect</a> <span class="string">"ld-fn"</span>
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'ld-level new-ld-level state)
                  (<a class="sym-link local-def" href="#def-ld-fn-body" data-sym="LD-FN-BODY" title="(defun ld-fn-body (standard-oi0 new-ld-specials-alist state)
  (pprogn (f-put-ld-specials new-ld-specials-alist nil state)
          (update-cbd standard-oi0 state)
          (cond
           ((ld-verbose state)
...">ld-fn-body</a> standard-oi0 new-ld-specials-alist state))
                (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'ld-level old-ld-level state)
                (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'ld-level old-ld-level state)))))))))</pre>
  </div>

<div class="form-block function" id="def-ld-fn-alist" data-defines="LD-FN-ALIST" data-references="ASSOC-EQ,NOT,REMOVE1-ASSOC-EQ,OUR-MERGE-PATHNAMES,INCLUDE-BOOK-DIR-WITH-CHK,RESOLVE-DIR,T,HARD,ER,ABSOLUTE-PATHNAME-STRING-P,EXPAND-TILDE-TO-USER-HOME-DIR,STANDARD-OI-EXPANDED,LET,STRINGP,AND,COND,USELESS-RUNES,PUT-ASSOC-EQ,NULL,IF,W,OS,LD,CTX,DIR,QUOTE,ASSOC,CDR,STANDARD-OI,LET*,STATE,BIND-FLG,ALIST,DEFUN" data-used-by="LD-FN0" data-part-name="LD-FN-ALIST" data-part-args="STATE,BIND-FLG,ALIST" data-part-body="ASSOC-EQ,NOT,REMOVE1-ASSOC-EQ,OUR-MERGE-PATHNAMES,INCLUDE-BOOK-DIR-WITH-CHK,RESOLVE-DIR,T,HARD,ER,ABSOLUTE-PATHNAME-STRING-P,EXPAND-TILDE-TO-USER-HOME-DIR,STANDARD-OI-EXPANDED,LET,STRINGP,AND,COND,USELESS-RUNES,PUT-ASSOC-EQ,BIND-FLG,NULL,IF,STATE,W,OS,LD,CTX,DIR,ALIST,QUOTE,ASSOC,CDR,STANDARD-OI,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-FN-ALIST">ld-fn-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-fn-alist" data-sym="LD-FN-ALIST" title="(defun ld-fn-alist (alist bind-flg state)
  (let* ((standard-oi (cdr (assoc &#39;standard-oi alist)))
         (dir (cdr (assoc &#39;dir alist)))
         (ctx &#39;ld)
         (os (os (w state)))
...">ld-fn-alist</a>
  (alist bind-flg state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> alist))) (dir (cdr (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> 'dir alist)))
      (ctx '<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a>)
      (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
      (alist (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> bind-flg)
          (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> nil alist)
          alist)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp <a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>) dir) (let ((standard-oi-expanded (<a class="sym-link system" href="basis-a.html#def-expand-tilde-to-user-home-dir" data-sym="EXPAND-TILDE-TO-USER-HOME-DIR">expand-tilde-to-user-home-dir</a> <a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> ctx state)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-absolute-pathname-string-p" data-sym="ABSOLUTE-PATHNAME-STRING-P">absolute-pathname-string-p</a> standard-oi-expanded nil <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                ctx
                <span class="string">"It is illegal to supply a :DIR argument to LD here ~
                         because the supplied filename,~|~%  ~s0,~|~%is an ~
                         absolute pathname (see :DOC pathname), and hence ~
                         there is no reasonable way to merge it with a :DIR ~
                         value."</span>
                <a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((resolve-dir (include-book-dir-with-chk hard '<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a> dir)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (resolve-dir (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>
                      (<a class="sym-link system" href="basis-a.html#def-our-merge-pathnames" data-sym="OUR-MERGE-PATHNAMES">our-merge-pathnames</a> resolve-dir standard-oi-expanded)
                      (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> 'dir alist)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> alist)))))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (stringp <a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>)) dir) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          ctx
          <span class="string">"It is illegal to supply a :DIR argument to LD here because ~
                the first argument of the LD call, ~x0, is not a string.  ~
                Such an argument would be ignored anyhow, so you probably ~
                should consider simply removing that :DIR argument.  See :DOC ~
                ld."</span>
          <a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>))
      ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> 'dir alist) (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> 'dir alist))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> alist))))</pre>
  </div>

<div class="form-block function" id="def-ld-fn0" data-defines="LD-FN0" data-references="LD-FN1,STANDARD-OI,QUOTE,ASSOC-EQ,CDR,STANDARD-OI0,LD-FN-ALIST,LET*,BIND-FLG,STATE,ALIST,DEFUN" data-used-by="LD-FN" data-part-name="LD-FN0" data-part-args="BIND-FLG,STATE,ALIST" data-part-body="LD-FN1,STANDARD-OI,QUOTE,ASSOC-EQ,CDR,STANDARD-OI0,STATE,BIND-FLG,LD-FN-ALIST,ALIST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-FN0">ld-fn0</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-fn0" data-sym="LD-FN0" title="(defun ld-fn0 (alist state bind-flg)
  (let* ((alist (ld-fn-alist alist bind-flg state))
         (standard-oi0 (cdr (assoc-eq &#39;standard-oi alist))))
    (ld-fn1 standard-oi0 alist state bind-flg)))">ld-fn0</a>
  (alist state bind-flg)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((alist (<a class="sym-link local-def" href="#def-ld-fn-alist" data-sym="LD-FN-ALIST" title="(defun ld-fn-alist (alist bind-flg state)
  (let* ((standard-oi (cdr (assoc &#39;standard-oi alist)))
         (dir (cdr (assoc &#39;dir alist)))
         (ctx &#39;ld)
         (os (os (w state)))
...">ld-fn-alist</a> alist bind-flg state)) (standard-oi0 (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> alist))))
    (<a class="sym-link local-def" href="#def-ld-fn1" data-sym="LD-FN1" title="(defun ld-fn1 (standard-oi0 alist state bind-flg)
  (let* ((old-ld-level (f-get-global &#39;ld-level state))
         (new-ld-level (1+ old-ld-level))
         (old-cbd (f-get-global &#39;connected-book-directory state)))
    (er-let* ((pair (chk-acceptable-ld-fn alist standard-oi0 state)))
...">ld-fn1</a> standard-oi0 alist state bind-flg)))</pre>
  </div>

<div class="form-block function" id="def-ld-fn" data-defines="LD-FN" data-references="LD-FN0,T,LD,SOFT,ER,LD-OKP,F-GET-GLOBAL,NOT,COND,CAR,EQ,CONSP,AND,ACTION,ACONS,LD-ERROR-ACTION,QUOTE,ASSOC-EQ,IF,LET,BIND-FLG,STATE,ALIST,DEFUN" data-used-by="LD" data-part-name="LD-FN" data-part-args="BIND-FLG,STATE,ALIST" data-part-body="BIND-FLG,LD-FN0,T,LD,SOFT,ER,LD-OKP,F-GET-GLOBAL,NOT,COND,CAR,EQ,CONSP,AND,STATE,ACTION,ACONS,LD-ERROR-ACTION,QUOTE,ASSOC-EQ,IF,ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-FN">ld-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-fn" data-sym="LD-FN" title="(defun ld-fn (alist state bind-flg)
  (let ((alist
         (if (assoc-eq &#39;ld-error-action alist)
             alist
             (acons &#39;ld-error-action
...">ld-fn</a>
  (alist state bind-flg)
  (let ((alist (if (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> alist)
         alist
         (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> '<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a>
           (let ((action (<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> state)))
             (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp action) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car action) <span class="keyword">:exit</span>))
               action
               <span class="keyword">:return!</span>))
           alist))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-okp state)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          '<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a>
          <span class="string">"It is illegal to call LD in this context.  See :DOC ~
           calling-ld-in-bad-contexts."</span>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ld-fn0" data-sym="LD-FN0" title="(defun ld-fn0 (alist state bind-flg)
  (let* ((alist (ld-fn-alist alist bind-flg state))
         (standard-oi0 (cdr (assoc-eq &#39;standard-oi alist))))
    (ld-fn1 standard-oi0 alist state bind-flg)))">ld-fn0</a> alist state bind-flg)))))</pre>
  </div>

<div class="form-block macro" id="def-ld" data-defines="LD" data-references="T,STATE,LIST,LD-FN,QUASIQUOTE,LD-USER-STOBJS-MODIFIED-WARNING,LD-VERBOSEP,LD-VERBOSE,LD-QUERY-CONTROL-ALISTP,LD-QUERY-CONTROL-ALIST,LD-ERROR-ACTIONP,LD-ERROR-ACTION,LD-ERROR-TRIPLESP,LD-ERROR-TRIPLES,LD-EVISC-TUPLEP,LD-EVISC-TUPLE,LD-POST-EVAL-PRINTP,LD-POST-EVAL-PRINT,LD-PRE-EVAL-PRINTP,LD-PRE-EVAL-PRINT,LD-PRE-EVAL-FILTERP,LD-PRE-EVAL-FILTER,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALSP,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-MISSING-INPUT-OKP,LD-MISSING-INPUT-OK,LD-PROMPTP,LD-PROMPT,LD-REDEFINITION-ACTIONP,LD-REDEFINITION-ACTION,LD-SKIP-PROOFSPP,LD-SKIP-PROOFSP,USELESS-RUNES-P,USELESS-RUNES,CURRENT-PACKAGEP,CURRENT-PACKAGE,PROOFS-COP,PROOFS-CO,STANDARD-COP,SAME,QUOTE,STANDARD-CO,DIR,&KEY,STANDARD-OI,DEFMACRO" data-used-by="WITHOUT-EVISC-FN,MINI-PROVEALL,PUFF-INCLUDE-BOOK,REBUILD-FN,UBT-UBU-FN1,MAYBE-RESET-DEFAULTS-TABLE1,QUICK-TEST,LD-FN,LD-FN-ALIST,LD-READ-KEYWORD-COMMAND,CHK-ACCEPTABLE-LD-FN,CHK-ACCEPTABLE-LD-FN1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD">ld</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a>
  (<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> &amp;key
    dir
    (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> 'same standard-cop)
    (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> 'same proofs-cop)
    (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> 'same current-packagep)
    (<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> 'nil useless-runes-p)
    (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> 'same ld-skip-proofspp)
    (<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> 'same ld-redefinition-actionp)
    (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> 'same ld-promptp)
    (<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> 'same ld-missing-input-okp)
    (<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a> 'same
      ld-always-skip-top-level-localsp)
    (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> 'same ld-pre-eval-filterp)
    (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> 'same ld-pre-eval-printp)
    (<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> 'same ld-post-eval-printp)
    (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> 'same ld-evisc-tuplep)
    (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> 'same ld-error-triplesp)
    (<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> 'same ld-error-actionp)
    (<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> 'same <a class="sym-link system" href="basis-b.html#def-ld-query-control-alistp" data-sym="LD-QUERY-CONTROL-ALISTP">ld-query-control-alistp</a>)
    (<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> 'same ld-verbosep)
    (ld-user-stobjs-modified-warning '<span class="keyword">:same</span>))
  `(<a class="sym-link local-def" href="#def-ld-fn" data-sym="LD-FN" title="(defun ld-fn (alist state bind-flg)
  (let ((alist
         (if (assoc-eq &#39;ld-error-action alist)
             alist
             (acons &#39;ld-error-action
...">ld-fn</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ,@(APPEND (LIST `(CONS &#39;STANDARD-OI ,STANDARD-OI))
          (IF DIR
              (LIST `(CONS &#39;DIR ,DIR))
              NIL)
          (IF STANDARD-COP
              (LIST `(CONS &#39;STANDARD-CO ,STANDARD-CO))
              NIL)
          (IF PROOFS-COP
              (LIST `(CONS &#39;PROOFS-CO ,PROOFS-CO))
              NIL)
          (IF CURRENT-PACKAGEP
              (LIST `(CONS &#39;CURRENT-PACKAGE ,CURRENT-PACKAGE))
              NIL)
          (IF USELESS-RUNES-P
              (LIST `(CONS &#39;USELESS-RUNES ,USELESS-RUNES))
              NIL)
          (IF LD-SKIP-PROOFSPP
              (LIST `(CONS &#39;LD-SKIP-PROOFSP ,LD-SKIP-PROOFSP))
              NIL)
          (IF LD-REDEFINITION-ACTIONP
              (LIST `(CONS &#39;LD-REDEFINITION-ACTION ,LD-REDEFINITION-ACTION))
              NIL)
          (IF LD-PROMPTP
              (LIST `(CONS &#39;LD-PROMPT ,LD-PROMPT))
              NIL)
          (IF LD-MISSING-INPUT-OKP
              (LIST `(CONS &#39;LD-MISSING-INPUT-OK ,LD-MISSING-INPUT-OK))
              NIL)
          (IF LD-ALWAYS-SKIP-TOP-LEVEL-LOCALSP
              (LIST
               `(CONS &#39;LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS
                      ,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS))
              NIL)
          (IF LD-PRE-EVAL-FILTERP
              (LIST `(CONS &#39;LD-PRE-EVAL-FILTER ,LD-PRE-EVAL-FILTER))
              NIL)
          (IF LD-PRE-EVAL-PRINTP
              (LIST `(CONS &#39;LD-PRE-EVAL-PRINT ,LD-PRE-EVAL-PRINT))
              NIL)
          (IF LD-POST-EVAL-PRINTP
              (LIST `(CONS &#39;LD-POST-EVAL-PRINT ,LD-POST-EVAL-PRINT))
              NIL)
          (IF LD-EVISC-TUPLEP
              (LIST `(CONS &#39;LD-EVISC-TUPLE ,LD-EVISC-TUPLE))
              NIL)
          (IF LD-ERROR-TRIPLESP
              (LIST `(CONS &#39;LD-ERROR-TRIPLES ,LD-ERROR-TRIPLES))
              NIL)
          (IF LD-ERROR-ACTIONP
              (LIST `(CONS &#39;LD-ERROR-ACTION ,LD-ERROR-ACTION))
              NIL)
          (IF LD-QUERY-CONTROL-ALISTP
              (LIST `(CONS &#39;LD-QUERY-CONTROL-ALIST ,LD-QUERY-CONTROL-ALIST))
              NIL)
          (IF LD-VERBOSEP
              (LIST `(CONS &#39;LD-VERBOSE ,LD-VERBOSE))
              NIL)
          (IF (EQ LD-USER-STOBJS-MODIFIED-WARNING :SAME)
              NIL
              (LIST
               `(CONS &#39;LD-USER-STOBJS-MODIFIED-WARNING
                      ,LD-USER-STOBJS-MODIFIED-WARNING)))))
    state
    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block macro" id="def-quick-test" data-defines="QUICK-TEST" data-references="T,REV-REV,TRUE-LISTP-REV,VERIFY-GUARDS,VERIFY-TERMINATION,LIST,REV,EQUAL,IMPLIES,TRUE-LISTP-APP,DEFTHM,CDR,CAR,CONS,EQ,IF,TRUE-LISTP,XARGS,DECLARE,Y,X,APP,DEFUN,LD,QUOTE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="QUICK-TEST">quick-test</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-quick-test" data-sym="QUICK-TEST" title="(defmacro quick-test ()
  &#39;(ld
    &#39;((defun app (x y)
        (declare (xargs :guard (true-listp x)))
        (if (eq x nil)
...">quick-test</a>
  nil
  '(<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a> '((<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> app
       (x y)
       (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)))
       (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x nil)
         y
         (cons (car x) (app (cdr x) y)))) (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-app
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)
          (equal (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (app x y)) (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> y))))
      <span class="keyword">:program</span> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> rev
        (x)
        (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)))
        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x nil)
          nil
          (app (rev (cdr x)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car x)))))
      <span class="keyword">:logic</span> (<a class="sym-link system" href="axioms.html#def-verify-termination" data-sym="VERIFY-TERMINATION">verify-termination</a> rev)
      (<a class="sym-link system" href="axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> rev)
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-rev
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x) (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (rev x)))
        <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> rev-rev
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x) (equal (rev (rev x)) x))))
    <span class="keyword">:ld-pre-eval-print</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:ld-error-action</span> <span class="keyword">:return</span> <span class="keyword">:ld-user-stobjs-modified-warning</span> <span class="keyword">:same</span>))</pre>
  </div>

<div class="form-block function" id="def-wormhole-prompt" data-defines="WORMHOLE-PROMPT" data-references="LD-LEVEL,-,MAKE-LIST-AC,DEFUN-MODE-PROMPT-STRING,CURRENT-PACKAGE,QUOTE,F-GET-GLOBAL,CONS,LIST,FMT1,UNSIGNED-BYTE,THE2S,STATE,CHANNEL,DEFUN" data-part-name="WORMHOLE-PROMPT" data-part-args="STATE,CHANNEL" data-part-body="CHANNEL,LD-LEVEL,-,MAKE-LIST-AC,DEFUN-MODE-PROMPT-STRING,STATE,CURRENT-PACKAGE,QUOTE,F-GET-GLOBAL,CONS,LIST,FMT1,UNSIGNED-BYTE,THE2S" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WORMHOLE-PROMPT">wormhole-prompt</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-wormhole-prompt" data-sym="WORMHOLE-PROMPT" title="(defun wormhole-prompt (channel state)
  (the2s (unsigned-byte 60)
         (fmt1 &quot;Wormhole ~s0~sr ~@1~*2&quot;
               (list (cons #\0 (f-get-global &#39;current-package state))
                     (cons #\1 (defun-mode-prompt-string state)) (cons #\r &quot;&quot;)
...">wormhole-prompt</a>
  (channel state)
  (<a class="sym-link system" href="axioms.html#def-the2s" data-sym="THE2S">the2s</a> (unsigned-byte <span class="number">60</span>)
    (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> <span class="string">"Wormhole ~s0~sr ~@1~*2"</span>
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state))
        (cons #\1 (<a class="sym-link system" href="rewrite.html#def-defun-mode-prompt-string" data-sym="DEFUN-MODE-PROMPT-STRING">defun-mode-prompt-string</a> state))
        (cons #\r <span class="string">""</span>)
        (cons #\2
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span>
            <span class="string">"&gt;"</span>
            <span class="string">"&gt;"</span>
            <span class="string">"&gt;"</span>
            (<a class="sym-link system" href="axioms.html#def-make-list-ac" data-sym="MAKE-LIST-AC">make-list-ac</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state) <span class="number">1</span>) nil nil))))
      <span class="number">0</span>
      channel
      state
      nil)))</pre>
  </div>

<div class="form-block function" id="def-reset-ld-specials-fn" data-defines="RESET-LD-SPECIALS-FN" data-references="CDDDR,T,*INITIAL-LD-SPECIAL-BINDINGS*,COND,F-PUT-LD-SPECIALS,STATE,RESET-CHANNELS-FLG,DEFUN" data-used-by="RESET-LD-SPECIALS" data-part-name="RESET-LD-SPECIALS-FN" data-part-args="STATE,RESET-CHANNELS-FLG" data-part-body="STATE,CDDDR,T,*INITIAL-LD-SPECIAL-BINDINGS*,RESET-CHANNELS-FLG,COND,F-PUT-LD-SPECIALS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RESET-LD-SPECIALS-FN">reset-ld-specials-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-reset-ld-specials-fn" data-sym="RESET-LD-SPECIALS-FN" title="(defun reset-ld-specials-fn (reset-channels-flg state)
  (f-put-ld-specials
   (cond (reset-channels-flg *initial-ld-special-bindings*)
         (t (cdddr *initial-ld-special-bindings*)))
   nil state))">reset-ld-specials-fn</a>
  (reset-channels-flg state)
  (<a class="sym-link local-def" href="#def-f-put-ld-specials" data-sym="F-PUT-LD-SPECIALS" title="(defun f-put-ld-specials (alist uurp state)
  (cond ((null alist) (cond (uurp (update-useless-runes nil state)) (t state)))
        ((eq (caar alist) &#39;useless-runes)
         (pprogn
          (cond (uurp (update-useless-runes (cdar alist) state))
...">f-put-ld-specials</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (reset-channels-flg <a class="sym-link system" href="axioms.html#def-_2Ainitial-ld-special-bindings_2A" data-sym="*INITIAL-LD-SPECIAL-BINDINGS*">*initial-ld-special-bindings*</a>)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> <a class="sym-link system" href="axioms.html#def-_2Ainitial-ld-special-bindings_2A" data-sym="*INITIAL-LD-SPECIAL-BINDINGS*">*initial-ld-special-bindings*</a>)))
    nil
    state))</pre>
  </div>

<div class="form-block macro" id="def-reset-ld-specials" data-defines="RESET-LD-SPECIALS" data-references="STATE,RESET-LD-SPECIALS-FN,QUASIQUOTE,RESET-CHANNELS-FLG,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="RESET-LD-SPECIALS">reset-ld-specials</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-reset-ld-specials" data-sym="RESET-LD-SPECIALS" title="(defmacro reset-ld-specials (reset-channels-flg)
  `(reset-ld-specials-fn ,reset-channels-flg state))">reset-ld-specials</a>
  (reset-channels-flg)
  `(<a class="sym-link local-def" href="#def-reset-ld-specials-fn" data-sym="RESET-LD-SPECIALS-FN" title="(defun reset-ld-specials-fn (reset-channels-flg state)
  (f-put-ld-specials
   (cond (reset-channels-flg *initial-ld-special-bindings*)
         (t (cdddr *initial-ld-special-bindings*)))
   nil state))">reset-ld-specials-fn</a> ,RESET-CHANNELS-FLG state))</pre>
  </div>

<div class="form-block function" id="def-maybe-reset-defaults-table1" data-defines="MAYBE-RESET-DEFAULTS-TABLE1" data-references="ABBREV-EVISC-TUPLE,LD,SYMBOL-NAME,STRING-DOWNCASE,CONS,LIST,T,ACL2-QUERY,ANS,ER-LET*,VALUE,EQUAL,IF,QUOTE,ACL2-DEFAULTS-TABLE,TABLE,QUASIQUOTE,CMD,POST-VAL,ASSOC-EQ,CDR,PRE-VAL,LET*,STATE,POST-DEFAULTS-TBL,PRE-DEFAULTS-TBL,KEY,DEFUN" data-used-by="MAYBE-RESET-DEFAULTS-TABLE2" data-part-name="MAYBE-RESET-DEFAULTS-TABLE1" data-part-args="STATE,POST-DEFAULTS-TBL,PRE-DEFAULTS-TBL,KEY" data-part-body="ABBREV-EVISC-TUPLE,LD,STATE,SYMBOL-NAME,STRING-DOWNCASE,CONS,LIST,T,ACL2-QUERY,ANS,ER-LET*,VALUE,EQUAL,IF,QUOTE,ACL2-DEFAULTS-TABLE,TABLE,QUASIQUOTE,CMD,POST-DEFAULTS-TBL,POST-VAL,PRE-DEFAULTS-TBL,KEY,ASSOC-EQ,CDR,PRE-VAL,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-RESET-DEFAULTS-TABLE1">maybe-reset-defaults-table1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-reset-defaults-table1" data-sym="MAYBE-RESET-DEFAULTS-TABLE1" title="(defun maybe-reset-defaults-table1
       (key pre-defaults-tbl post-defaults-tbl state)
  (let* ((pre-val (cdr (assoc-eq key pre-defaults-tbl)))
         (post-val (cdr (assoc-eq key post-defaults-tbl)))
         (cmd `(table acl2-defaults-table ,key &#39;,pre-val)))
...">maybe-reset-defaults-table1</a>
  (key pre-defaults-tbl post-defaults-tbl state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pre-val (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key pre-defaults-tbl))) (post-val (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key post-defaults-tbl)))
      (cmd `(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table ,KEY ',PRE-VAL)))
    (if (equal pre-val post-val)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)
      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ans (<a class="sym-link system" href="rewrite.html#def-acl2-query" data-sym="ACL2-QUERY">acl2-query</a> <span class="keyword">:ubt-defaults</span> '(<span class="string">"The default ~s0 was ~x1 before undoing, but will be ~x2 after ~
             undoing unless the command ~x3 is executed.  Do you wish to ~
             re-execute this command after the :ubt?"</span> <span class="keyword">:y</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
               <span class="keyword">:n</span> nil
               <span class="keyword">:?</span> (<span class="string">"If you answer in the affirmative, then the command ~X34 will ~
                 be executed on your behalf.  This will make the default ~s0 ~
                 equal to ~x1, which is what it was just before your :ubt ~
                 command was executed.  Otherwise, the default ~s0 will be ~
                 what it is in the world after the undoing, namely ~x2.  See ~
                 also :DOC acl2-defaults-table."</span> <span class="keyword">:y</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                 <span class="keyword">:n</span> nil))
             (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-string-downcase" data-sym="STRING-DOWNCASE">string-downcase</a> (symbol-name key)))
               (cons #\1 pre-val)
               (cons #\2 post-val)
               (cons #\3 cmd)
               (cons #\4 nil))
             state)))
        (if ans
          (<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> cmd)
            <span class="keyword">:ld-pre-eval-filter</span> <span class="keyword">:all</span> <span class="keyword">:ld-pre-eval-print</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            <span class="keyword">:ld-post-eval-print</span> <span class="keyword">:command-conventions</span> <span class="keyword">:ld-evisc-tuple</span> (<a class="sym-link system" href="basis-a.html#def-abbrev-evisc-tuple" data-sym="ABBREV-EVISC-TUPLE">abbrev-evisc-tuple</a> state)
            <span class="keyword">:ld-error-triples</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            <span class="keyword">:ld-error-action</span> <span class="keyword">:return</span>)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))</pre>
  </div>

<div class="form-block function" id="def-maybe-reset-defaults-table2" data-defines="MAYBE-RESET-DEFAULTS-TABLE2" data-references="VALUE,CDR,CAR,MAYBE-RESET-DEFAULTS-TABLE1,ER-PROGN,IF,STATE,POST-DEFAULTS-TBL,PRE-DEFAULTS-TBL,KEYS,DEFUN" data-used-by="MAYBE-RESET-DEFAULTS-TABLE" data-part-name="MAYBE-RESET-DEFAULTS-TABLE2" data-part-args="STATE,POST-DEFAULTS-TBL,PRE-DEFAULTS-TBL,KEYS" data-part-body="VALUE,CDR,MAYBE-RESET-DEFAULTS-TABLE2,STATE,POST-DEFAULTS-TBL,PRE-DEFAULTS-TBL,CAR,MAYBE-RESET-DEFAULTS-TABLE1,ER-PROGN,KEYS,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-RESET-DEFAULTS-TABLE2">maybe-reset-defaults-table2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-reset-defaults-table2" data-sym="MAYBE-RESET-DEFAULTS-TABLE2" title="(defun maybe-reset-defaults-table2
       (keys pre-defaults-tbl post-defaults-tbl state)
  (if keys
      (er-progn
       (maybe-reset-defaults-table1 (car keys) pre-defaults-tbl
...">maybe-reset-defaults-table2</a>
  (keys pre-defaults-tbl post-defaults-tbl state)
  (if keys
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-maybe-reset-defaults-table1" data-sym="MAYBE-RESET-DEFAULTS-TABLE1" title="(defun maybe-reset-defaults-table1
       (key pre-defaults-tbl post-defaults-tbl state)
  (let* ((pre-val (cdr (assoc-eq key pre-defaults-tbl)))
         (post-val (cdr (assoc-eq key post-defaults-tbl)))
         (cmd `(table acl2-defaults-table ,key &#39;,pre-val)))
...">maybe-reset-defaults-table1</a> (car keys)
        pre-defaults-tbl
        post-defaults-tbl
        state)
      (<a class="sym-link local-def" href="#def-maybe-reset-defaults-table2" data-sym="MAYBE-RESET-DEFAULTS-TABLE2" title="(defun maybe-reset-defaults-table2
       (keys pre-defaults-tbl post-defaults-tbl state)
  (if keys
      (er-progn
       (maybe-reset-defaults-table1 (car keys) pre-defaults-tbl
...">maybe-reset-defaults-table2</a> (cdr keys)
        pre-defaults-tbl
        post-defaults-tbl
        state))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-maybe-reset-defaults-table" data-defines="MAYBE-RESET-DEFAULTS-TABLE" data-references="STRIP-CARS,UNION-EQUAL,MAYBE-RESET-DEFAULTS-TABLE2,STATE,POST-DEFAULTS-TBL,PRE-DEFAULTS-TBL,DEFUN" data-used-by="UBT-UBU-FN1" data-part-name="MAYBE-RESET-DEFAULTS-TABLE" data-part-args="STATE,POST-DEFAULTS-TBL,PRE-DEFAULTS-TBL" data-part-body="STATE,POST-DEFAULTS-TBL,PRE-DEFAULTS-TBL,STRIP-CARS,UNION-EQUAL,MAYBE-RESET-DEFAULTS-TABLE2" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-RESET-DEFAULTS-TABLE">maybe-reset-defaults-table</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-reset-defaults-table" data-sym="MAYBE-RESET-DEFAULTS-TABLE" title="(defun maybe-reset-defaults-table (pre-defaults-tbl post-defaults-tbl state)
  (maybe-reset-defaults-table2
   (union-equal (strip-cars pre-defaults-tbl) (strip-cars post-defaults-tbl))
   pre-defaults-tbl post-defaults-tbl state))">maybe-reset-defaults-table</a>
  (pre-defaults-tbl post-defaults-tbl state)
  (<a class="sym-link local-def" href="#def-maybe-reset-defaults-table2" data-sym="MAYBE-RESET-DEFAULTS-TABLE2" title="(defun maybe-reset-defaults-table2
       (keys pre-defaults-tbl post-defaults-tbl state)
  (if keys
      (er-progn
       (maybe-reset-defaults-table1 (car keys) pre-defaults-tbl
...">maybe-reset-defaults-table2</a> (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> pre-defaults-tbl)
      (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> post-defaults-tbl))
    pre-defaults-tbl
    post-defaults-tbl
    state))</pre>
  </div>

<div class="form-block function" id="def-delete-something" data-defines="DELETE-SOMETHING" data-references="CONS,T,CAR,CDR,NULL,COND,LST,DEFUN" data-used-by="STORE-IN-KILL-RING" data-part-name="DELETE-SOMETHING" data-part-args="LST" data-part-body="DELETE-SOMETHING,CONS,T,CAR,LST,CDR,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DELETE-SOMETHING">delete-something</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-delete-something" data-sym="DELETE-SOMETHING" title="(defun delete-something (lst)
  (cond ((null (cdr lst)) nil) ((null (car lst)) (cdr lst))
        (t (cons (car lst) (delete-something (cdr lst))))))">delete-something</a>
  (lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr lst)) nil)
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (car lst)) (cdr lst))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car lst) (<a class="sym-link local-def" href="#def-delete-something" data-sym="DELETE-SOMETHING" title="(defun delete-something (lst)
  (cond ((null (cdr lst)) nil) ((null (car lst)) (cdr lst))
        (t (cons (car lst) (delete-something (cdr lst))))))">delete-something</a> (cdr lst))))))</pre>
  </div>

<div class="form-block function" id="def-store-in-kill-ring" data-defines="STORE-IN-KILL-RING" data-references="DELETE-SOMETHING,CONS,T,NULL,OR,COND,RING,X0,DEFUN" data-used-by="UBT-UBU-FN1" data-part-name="STORE-IN-KILL-RING" data-part-args="RING,X0" data-part-body="DELETE-SOMETHING,CONS,T,RING,X0,NULL,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="STORE-IN-KILL-RING">store-in-kill-ring</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-store-in-kill-ring" data-sym="STORE-IN-KILL-RING" title="(defun store-in-kill-ring (x0 ring)
  (cond ((or (null x0) (null ring)) ring)
        (t (cons x0 (delete-something ring)))))">store-in-kill-ring</a>
  (x0 ring)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x0) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ring)) ring)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons x0 (<a class="sym-link local-def" href="#def-delete-something" data-sym="DELETE-SOMETHING" title="(defun delete-something (lst)
  (cond ((null (cdr lst)) nil) ((null (car lst)) (cdr lst))
        (t (cons (car lst) (delete-something (cdr lst))))))">delete-something</a> ring)))))</pre>
  </div>

<div class="form-block function" id="def-rotate-kill-ring1" data-defines="ROTATE-KILL-RING1" data-references="LIST,CDR,T,APPEND,CAR,NULL,COND,XN,RING,DEFUN" data-used-by="ROTATE-KILL-RING" data-part-name="ROTATE-KILL-RING1" data-part-args="XN,RING" data-part-body="LIST,CDR,ROTATE-KILL-RING1,T,APPEND,CAR,XN,RING,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ROTATE-KILL-RING1">rotate-kill-ring1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-rotate-kill-ring1" data-sym="ROTATE-KILL-RING1" title="(defun rotate-kill-ring1 (ring xn)
  (cond ((null ring) xn) ((car ring) (append ring xn))
        (t (rotate-kill-ring1 (cdr ring) (append xn (list nil))))))">rotate-kill-ring1</a>
  (ring xn)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ring) xn)
    ((car ring) (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> ring xn))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-rotate-kill-ring1" data-sym="ROTATE-KILL-RING1" title="(defun rotate-kill-ring1 (ring xn)
  (cond ((null ring) xn) ((car ring) (append ring xn))
        (t (rotate-kill-ring1 (cdr ring) (append xn (list nil))))))">rotate-kill-ring1</a> (cdr ring) (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> xn (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil))))))</pre>
  </div>

<div class="form-block function" id="def-rotate-kill-ring" data-defines="ROTATE-KILL-RING" data-references="LIST,CDR,ROTATE-KILL-RING1,T,MV,CAR,NULL,COND,XN,RING,DEFUN" data-used-by="OOPS-FN" data-part-name="ROTATE-KILL-RING" data-part-args="XN,RING" data-part-body="XN,LIST,CDR,ROTATE-KILL-RING1,T,MV,RING,CAR,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ROTATE-KILL-RING">rotate-kill-ring</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-rotate-kill-ring" data-sym="ROTATE-KILL-RING" title="(defun rotate-kill-ring (ring xn)
  (cond ((null (car ring)) (mv nil ring))
        (t (mv (car ring) (rotate-kill-ring1 (cdr ring) (list xn))))))">rotate-kill-ring</a>
  (ring xn)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (car ring)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil ring))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car ring) (<a class="sym-link local-def" href="#def-rotate-kill-ring1" data-sym="ROTATE-KILL-RING1" title="(defun rotate-kill-ring1 (ring xn)
  (cond ((null ring) xn) ((car ring) (append ring xn))
        (t (rotate-kill-ring1 (cdr ring) (append xn (list nil))))))">rotate-kill-ring1</a> (cdr ring) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> xn))))))</pre>
  </div>

<div class="form-block function" id="def-ubt-ubu-fn1" data-defines="UBT-UBU-FN1" data-references="PCS-FN,W,MAYBE-RESET-DEFAULTS-TABLE,FMT1,LD-QUERY-CONTROL-ALIST,CONS,ABBREV-EVISC-TUPLE,T,LD,VALUE,IGNORE,DECLARE,STANDARD-CO,FMT,COL,MV-LET,ER-PROGN,CDR,DEFAULT-DEFUN-MODE,CAR,EQ,IF,RETRACTION,SET-W,F-GET-GLOBAL,STORE-IN-KILL-RING,UNDONE-WORLDS-KILL-RING,F-PUT-GLOBAL,PPROGN,UBT-UBU-QUERY,REDO-CMDS,ER-LET*,ACL2-DEFAULTS-TABLE,QUOTE,TABLE-ALIST,PRE-DEFAULTS-TABLE,LET,STATE,PRED-WRLD,WRLD,KWD,DEFUN" data-used-by="UBT-PREHISTORY-FN,UBT?-UBU?-FN" data-part-name="UBT-UBU-FN1" data-part-args="STATE,PRED-WRLD,WRLD,KWD" data-part-body="PCS-FN,W,MAYBE-RESET-DEFAULTS-TABLE,FMT1,LD-QUERY-CONTROL-ALIST,CONS,ABBREV-EVISC-TUPLE,T,LD,VALUE,IGNORE,DECLARE,STANDARD-CO,FMT,COL,MV-LET,ER-PROGN,CDR,DEFAULT-DEFUN-MODE,CAR,EQ,IF,RETRACTION,SET-W,F-GET-GLOBAL,STORE-IN-KILL-RING,UNDONE-WORLDS-KILL-RING,F-PUT-GLOBAL,PPROGN,STATE,PRED-WRLD,KWD,UBT-UBU-QUERY,REDO-CMDS,ER-LET*,WRLD,ACL2-DEFAULTS-TABLE,QUOTE,TABLE-ALIST,PRE-DEFAULTS-TABLE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UBT-UBU-FN1">ubt-ubu-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ubt-ubu-fn1" data-sym="UBT-UBU-FN1" title="(defun ubt-ubu-fn1 (kwd wrld pred-wrld state)
  (let ((pre-defaults-table (table-alist &#39;acl2-defaults-table wrld)))
    (er-let*
     ((redo-cmds (ubt-ubu-query kwd wrld pred-wrld nil nil wrld state nil)))
     (pprogn
...">ubt-ubu-fn1</a>
  (kwd wrld pred-wrld state)
  (let ((pre-defaults-table (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((redo-cmds (<a class="sym-link system" href="history-management.html#def-ubt-ubu-query" data-sym="UBT-UBU-QUERY">ubt-ubu-query</a> kwd wrld pred-wrld nil nil wrld state nil)))
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'undone-worlds-kill-ring
          (<a class="sym-link local-def" href="#def-store-in-kill-ring" data-sym="STORE-IN-KILL-RING" title="(defun store-in-kill-ring (x0 ring)
  (cond ((or (null x0) (null ring)) ring)
        (t (cons x0 (delete-something ring)))))">store-in-kill-ring</a> wrld
            (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'undone-worlds-kill-ring state))
          state)
        (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'retraction pred-wrld state)
        (let ((redo-cmds (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car redo-cmds) (<a class="sym-link system" href="axioms.html#def-default-defun-mode" data-sym="DEFAULT-DEFUN-MODE">default-defun-mode</a> pred-wrld))
               (cdr redo-cmds)
               redo-cmds)))
          (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if redo-cmds
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (col state)
                (<a class="sym-link system" href="basis-a.html#def-fmt" data-sym="FMT">fmt</a> <span class="string">"Undoing complete.  Redoing started...~%"</span>
                  nil
                  (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                  state
                  nil)
                (declare (ignore col))
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (if redo-cmds
              (<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a> redo-cmds
                <span class="keyword">:ld-redefinition-action</span> '(<span class="keyword">:doit!</span> . <span class="keyword">:overwrite</span>)
                <span class="keyword">:ld-pre-eval-filter</span> <span class="keyword">:all</span> <span class="keyword">:ld-pre-eval-print</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                <span class="keyword">:ld-post-eval-print</span> <span class="keyword">:command-conventions</span> <span class="keyword">:ld-evisc-tuple</span> (<a class="sym-link system" href="basis-a.html#def-abbrev-evisc-tuple" data-sym="ABBREV-EVISC-TUPLE">abbrev-evisc-tuple</a> state)
                <span class="keyword">:ld-error-triples</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                <span class="keyword">:ld-error-action</span> <span class="keyword">:return</span> <span class="keyword">:ld-query-control-alist</span> (cons '(<span class="keyword">:redef</span> <span class="keyword">:y</span>) (<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> state)))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (if redo-cmds
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (col state)
                (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> <span class="string">"Redoing complete.~%~%"</span>
                  nil
                  <span class="number">0</span>
                  (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                  state
                  nil)
                (declare (ignore col))
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (<a class="sym-link local-def" href="#def-maybe-reset-defaults-table" data-sym="MAYBE-RESET-DEFAULTS-TABLE" title="(defun maybe-reset-defaults-table (pre-defaults-tbl post-defaults-tbl state)
  (maybe-reset-defaults-table2
   (union-equal (strip-cars pre-defaults-tbl) (strip-cars post-defaults-tbl))
   pre-defaults-tbl post-defaults-tbl state))">maybe-reset-defaults-table</a> pre-defaults-table
              (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
              state)
            (<a class="sym-link system" href="history-management.html#def-pcs-fn" data-sym="PCS-FN">pcs-fn</a> <span class="keyword">:x</span> <span class="keyword">:x</span> nil state)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))))))</pre>
  </div>

<div class="form-block function" id="def-ubt_3F-ubu_3F-fn" data-defines="UBT?-UBU?-FN" data-references="UBT-UBU-FN1,SCAN-TO-COMMAND,PRED-WRLD,EQUAL,MSG,CDR,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,CAR,CONSP,AND,T,SOFT,ER,ORIGINAL,LET,<,<=,EQ,IF,COND,CDDAR,ACCESS-COMMAND-TUPLE-NUMBER,VALUE,COMMAND-TUPLE-NUMBER,ER-DECODE-CD,CMD-WRLD,ER-LET*,CURRENT,ACCESS,PERMANENT-P,COMMAND-NUMBER-BASELINE-INFO,QUOTE,GLOBAL-VAL,INFO,W,WRLD,LET*,STATE,CD,KWD,DEFUN" data-used-by="UBT!-UBU!-FN,UBT-UBU-FN" data-part-name="UBT?-UBU?-FN" data-part-args="STATE,CD,KWD" data-part-body="UBT-UBU-FN1,SCAN-TO-COMMAND,PRED-WRLD,EQUAL,MSG,CDR,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,CAR,CONSP,AND,T,SOFT,ER,ORIGINAL,LET,<,<=,EQ,IF,COND,CDDAR,ACCESS-COMMAND-TUPLE-NUMBER,VALUE,COMMAND-TUPLE-NUMBER,KWD,CD,ER-DECODE-CD,CMD-WRLD,ER-LET*,CURRENT,ACCESS,PERMANENT-P,COMMAND-NUMBER-BASELINE-INFO,QUOTE,GLOBAL-VAL,INFO,STATE,W,WRLD,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UBT?-UBU?-FN">ubt?-ubu?-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ubt_3F-ubu_3F-fn" data-sym="UBT?-UBU?-FN" title="(defun ubt?-ubu?-fn (kwd cd state)
  (let* ((wrld (w state))
         (info (global-val &#39;command-number-baseline-info wrld))
         (permanent-p (access command-number-baseline-info info :permanent-p))
         (current (access command-number-baseline-info info :current)))
...">ubt?-ubu?-fn</a>
  (kwd cd state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (info (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'command-number-baseline-info wrld))
      (permanent-p (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info info <span class="keyword">:permanent-p</span>))
      (current (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info info <span class="keyword">:current</span>)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cmd-wrld (<a class="sym-link system" href="history-management.html#def-er-decode-cd" data-sym="ER-DECODE-CD">er-decode-cd</a> cd wrld kwd state)) (command-tuple-number (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (access-command-tuple-number (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> cmd-wrld)))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> kwd <span class="keyword">:ubt</span>)
           (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> command-tuple-number current)
           (&lt; command-tuple-number current)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((let ((original (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info info <span class="keyword">:original</span>)))
               (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> kwd <span class="keyword">:ubt</span>)
                 (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> command-tuple-number original)
                 (&lt; command-tuple-number original))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft kwd <span class="string">"Can&#39;t undo into system initialization."</span>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                kwd
                <span class="string">"Can&#39;t undo into prehistory.  See :DOC ~
                      reset-prehistory."</span>))))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp permanent-p)
           (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> kwd <span class="keyword">:ubt</span>)
             (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> command-tuple-number (car permanent-p))
             (&lt; command-tuple-number (car permanent-p)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            kwd
            <span class="string">"Can&#39;t undo a :disable-ubt event (at command ~x0).~@1  See ~
                  :DOC disable-ubt."</span>
            (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (car permanent-p) wrld)
            (if (cdr permanent-p)
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  ~@0"</span> (cdr permanent-p))
              <span class="string">""</span>)))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> kwd <span class="keyword">:ubu</span>) (equal wrld cmd-wrld)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft kwd <span class="string">"Can&#39;t undo back to where we already are!"</span>))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((pred-wrld (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> kwd <span class="keyword">:ubt</span>)
                 (<a class="sym-link system" href="history-management.html#def-scan-to-command" data-sym="SCAN-TO-COMMAND">scan-to-command</a> (cdr cmd-wrld))
                 cmd-wrld)))
            (<a class="sym-link local-def" href="#def-ubt-ubu-fn1" data-sym="UBT-UBU-FN1" title="(defun ubt-ubu-fn1 (kwd wrld pred-wrld state)
  (let ((pre-defaults-table (table-alist &#39;acl2-defaults-table wrld)))
    (er-let*
     ((redo-cmds (ubt-ubu-query kwd wrld pred-wrld nil nil wrld state nil)))
     (pprogn
...">ubt-ubu-fn1</a> kwd wrld pred-wrld state)))))))</pre>
  </div>

<div class="form-block function" id="def-ubt-ubu-fn" data-defines="UBT-UBU-FN" data-references="VALUE,IGNORE,DECLARE,UBT?-UBU?-FN,VAL,ERP,MV-LET,@,QUOTE,QUASIQUOTE,LIST*,LD-QUERY-CONTROL-ALIST,STATE-GLOBAL-LET*,STATE,CD,KWD,DEFUN" data-part-name="UBT-UBU-FN" data-part-args="STATE,CD,KWD" data-part-body="VALUE,IGNORE,DECLARE,CD,KWD,UBT?-UBU?-FN,STATE,VAL,ERP,MV-LET,@,QUOTE,QUASIQUOTE,LIST*,LD-QUERY-CONTROL-ALIST,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UBT-UBU-FN">ubt-ubu-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ubt-ubu-fn" data-sym="UBT-UBU-FN" title="(defun ubt-ubu-fn (kwd cd state)
  (state-global-let*
   ((ld-query-control-alist
     (list* `(,kwd :n!) &#39;(:ubt-defaults :n) (@ ld-query-control-alist))))
   (mv-let (erp val state) (ubt?-ubu?-fn kwd cd state)">ubt-ubu-fn</a>
  (kwd cd state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> `(,KWD <span class="keyword">:n!</span>)
         '(<span class="keyword">:ubt-defaults</span> <span class="keyword">:n</span>)
         (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> <a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a>))))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
      (<a class="sym-link local-def" href="#def-ubt_3F-ubu_3F-fn" data-sym="UBT?-UBU?-FN" title="(defun ubt?-ubu?-fn (kwd cd state)
  (let* ((wrld (w state))
         (info (global-val &#39;command-number-baseline-info wrld))
         (permanent-p (access command-number-baseline-info info :permanent-p))
         (current (access command-number-baseline-info info :current)))
...">ubt?-ubu?-fn</a> kwd cd state)
      (declare (ignore erp val))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))))</pre>
  </div>

<div class="form-block function" id="def-ubt_21-ubu_21-fn" data-defines="UBT!-UBU!-FN" data-references="VALUE,IGNORE,DECLARE,UBT?-UBU?-FN,VAL,ERP,MV-LET,ERROR,WARNING,OBSERVATION,UNION-EQUAL,INHIBIT-OUTPUT-LST,@,QUOTE,QUASIQUOTE,LIST*,LD-QUERY-CONTROL-ALIST,STATE-GLOBAL-LET*,STATE,CD,KWD,DEFUN" data-part-name="UBT!-UBU!-FN" data-part-args="STATE,CD,KWD" data-part-body="VALUE,IGNORE,DECLARE,CD,KWD,UBT?-UBU?-FN,STATE,VAL,ERP,MV-LET,ERROR,WARNING,OBSERVATION,UNION-EQUAL,INHIBIT-OUTPUT-LST,@,QUOTE,QUASIQUOTE,LIST*,LD-QUERY-CONTROL-ALIST,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UBT!-UBU!-FN">ubt!-ubu!-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ubt_21-ubu_21-fn" data-sym="UBT!-UBU!-FN" title="(defun ubt!-ubu!-fn (kwd cd state)
  (state-global-let*
   ((ld-query-control-alist
     (list* `(,kwd :n!) &#39;(:ubt-defaults :n) (@ ld-query-control-alist)))
    (inhibit-output-lst
...">ubt!-ubu!-fn</a>
  (kwd cd state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> `(,KWD <span class="keyword">:n!</span>)
         '(<span class="keyword">:ubt-defaults</span> <span class="keyword">:n</span>)
         (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> <a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a>))) (inhibit-output-lst (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> '(<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> warning error)
          (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
      (<a class="sym-link local-def" href="#def-ubt_3F-ubu_3F-fn" data-sym="UBT?-UBU?-FN" title="(defun ubt?-ubu?-fn (kwd cd state)
  (let* ((wrld (w state))
         (info (global-val &#39;command-number-baseline-info wrld))
         (permanent-p (access command-number-baseline-info info :permanent-p))
         (current (access command-number-baseline-info info :current)))
...">ubt?-ubu?-fn</a> kwd cd state)
      (declare (ignore erp val))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))))</pre>
  </div>

<div class="form-block macro" id="def-ubt-prehistory" data-defines="UBT-PREHISTORY" data-references="STATE,UBT-PREHISTORY-FN,QUOTE,LIST,DEFMACRO" data-used-by="UBT-PREHISTORY-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="UBT-PREHISTORY">ubt-prehistory</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-ubt-prehistory" data-sym="UBT-PREHISTORY" title="(defmacro ubt-prehistory () (list &#39;ubt-prehistory-fn &#39;state))">ubt-prehistory</a>
  nil
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-ubt-prehistory-fn" data-sym="UBT-PREHISTORY-FN" title="(defun ubt-prehistory-fn (state)
  (let* ((ctx &#39;ubt-prehistory)
         (wrld (w state))
         (command-number-baseline-info
          (global-val &#39;command-number-baseline-info wrld))
...">ubt-prehistory-fn</a> 'state))</pre>
  </div>

<div class="form-block function" id="def-ubt-prehistory-fn" data-defines="UBT-PREHISTORY-FN" data-references="VALUE,RESET-KILL-RING,ER-PROGN,COMMAND,LOOKUP-WORLD-INDEX,SCAN-TO-COMMAND,UBT-UBU-FN1,VAL,ER-LET*,MSG,CDR,CONSP,AND,IF,T,EQ,SOFT,ER,EQL,COND,PERMANENT-P,ACCESS,COMMAND-NUMBER-BASELINE,GLOBAL-VAL,COMMAND-NUMBER-BASELINE-INFO,W,WRLD,UBT-PREHISTORY,QUOTE,CTX,LET*,STATE,DEFUN" data-used-by="UBT-PREHISTORY" data-part-name="UBT-PREHISTORY-FN" data-part-args="STATE" data-part-body="VALUE,RESET-KILL-RING,ER-PROGN,COMMAND,LOOKUP-WORLD-INDEX,SCAN-TO-COMMAND,UBT-UBU-FN1,VAL,ER-LET*,MSG,CDR,CONSP,AND,IF,T,EQ,SOFT,ER,EQL,COND,PERMANENT-P,ACCESS,COMMAND-NUMBER-BASELINE,GLOBAL-VAL,COMMAND-NUMBER-BASELINE-INFO,STATE,W,WRLD,UBT-PREHISTORY,QUOTE,CTX,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UBT-PREHISTORY-FN">ubt-prehistory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ubt-prehistory-fn" data-sym="UBT-PREHISTORY-FN" title="(defun ubt-prehistory-fn (state)
  (let* ((ctx &#39;ubt-prehistory)
         (wrld (w state))
         (command-number-baseline-info
          (global-val &#39;command-number-baseline-info wrld))
...">ubt-prehistory-fn</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ctx '<a class="sym-link local-def" href="#def-ubt-prehistory" data-sym="UBT-PREHISTORY" title="(defmacro ubt-prehistory () (list &#39;ubt-prehistory-fn &#39;state))">ubt-prehistory</a>) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (command-number-baseline-info (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'command-number-baseline-info wrld))
      (command-number-baseline (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info
          command-number-baseline-info
          <span class="keyword">:current</span>))
      (permanent-p (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info
          command-number-baseline-info
          <span class="keyword">:permanent-p</span>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> command-number-baseline
         (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info
           command-number-baseline-info
           <span class="keyword">:original</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"There is no reset-prehistory event to undo."</span>))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> permanent-p <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"It is illegal to undo a (reset-prehistory t) event.  See :DOC ~
                reset-prehistory."</span>))
      (permanent-p (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"It is illegal to undo a reset-prehistory event with a non-nil ~
                pflg argument.  See :DOC reset-prehistory.~@0"</span>
          (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp permanent-p) (cdr permanent-p))
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  ~@0"</span> (cdr permanent-p))
            <span class="string">""</span>)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val (<a class="sym-link local-def" href="#def-ubt-ubu-fn1" data-sym="UBT-UBU-FN1" title="(defun ubt-ubu-fn1 (kwd wrld pred-wrld state)
  (let ((pre-defaults-table (table-alist &#39;acl2-defaults-table wrld)))
    (er-let*
     ((redo-cmds (ubt-ubu-query kwd wrld pred-wrld nil nil wrld state nil)))
     (pprogn
...">ubt-ubu-fn1</a> <span class="keyword">:ubt-prehistory</span> wrld
               (<a class="sym-link system" href="history-management.html#def-scan-to-command" data-sym="SCAN-TO-COMMAND">scan-to-command</a> (cdr (lookup-world-index 'command command-number-baseline wrld)))
               state)))
          (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (reset-kill-ring <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val)))))))</pre>
  </div>

<div class="form-block function" id="def-oops-warning" data-defines="OOPS-WARNING" data-references="QUOTE,OBSERVATION,STATE,DEFUN" data-used-by="OOPS-FN" data-part-name="OOPS-WARNING" data-part-args="STATE" data-part-body="OOPS-WARNING,QUOTE,OBSERVATION" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OOPS-WARNING">oops-warning</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-oops-warning" data-sym="OOPS-WARNING" title="(defun oops-warning (state)
  (observation &#39;oops-warning &quot;Installing the requested world.&quot;))">oops-warning</a>
  (state)
  (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> '<a class="sym-link local-def" href="#def-oops-warning" data-sym="OOPS-WARNING" title="(defun oops-warning (state)
  (observation &#39;oops-warning &quot;Installing the requested world.&quot;))">oops-warning</a>
    <span class="string">"Installing the requested world."</span>))</pre>
  </div>

<div class="form-block function" id="def-oops-fn" data-defines="OOPS-FN" data-references="F-PUT-GLOBAL,VALUE,PCS-FN,SET-W!,OOPS-WARNING,PPROGN,REVERT-WORLD-ON-ERROR,ER-PROGN,T,SOFT,ER,NULL,COND,W,UNDONE-WORLDS-KILL-RING,QUOTE,F-GET-GLOBAL,ROTATE-KILL-RING,NEW-KILL-RING,NEW-WRLD,MV-LET,STATE,DEFUN" data-used-by="OOPS" data-part-name="OOPS-FN" data-part-args="STATE" data-part-body="F-PUT-GLOBAL,VALUE,PCS-FN,SET-W!,OOPS-WARNING,PPROGN,REVERT-WORLD-ON-ERROR,ER-PROGN,T,SOFT,ER,NULL,COND,W,STATE,UNDONE-WORLDS-KILL-RING,QUOTE,F-GET-GLOBAL,ROTATE-KILL-RING,NEW-KILL-RING,NEW-WRLD,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OOPS-FN">oops-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-oops-fn" data-sym="OOPS-FN" title="(defun oops-fn (state)
  (mv-let (new-wrld new-kill-ring)
          (rotate-kill-ring (f-get-global &#39;undone-worlds-kill-ring state)
                            (w state))
          (cond
...">oops-fn</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (new-wrld new-kill-ring)
    (<a class="sym-link local-def" href="#def-rotate-kill-ring" data-sym="ROTATE-KILL-RING" title="(defun rotate-kill-ring (ring xn)
  (cond ((null (car ring)) (mv nil ring))
        (t (mv (car ring) (rotate-kill-ring1 (cdr ring) (list xn))))))">rotate-kill-ring</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'undone-worlds-kill-ring state)
      (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> new-wrld) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'undone-worlds-kill-ring state)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              <span class="keyword">:oops</span> <span class="string">"Oops has been disabled in this ACL2 session.  ~
                             See :DOC reset-kill-ring"</span>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              <span class="keyword">:oops</span> <span class="string">"ACL2 cannot execute :oops at this time, ~
                             presumably because you have never executed :ubt ~
                             or :u during this ACL2 session (at least not ~
                             since the last invocation of reset-kill-ring)."</span>))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-oops-warning" data-sym="OOPS-WARNING" title="(defun oops-warning (state)
  (observation &#39;oops-warning &quot;Installing the requested world.&quot;))">oops-warning</a> state)
              (<a class="sym-link system" href="history-management.html#def-set-w_21" data-sym="SET-W!">set-w!</a> new-wrld state)
              (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="history-management.html#def-pcs-fn" data-sym="PCS-FN">pcs-fn</a> <span class="keyword">:x</span> <span class="keyword">:x</span> nil state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'undone-worlds-kill-ring new-kill-ring state)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))))))</pre>
  </div>

<div class="form-block macro" id="def-oops" data-defines="OOPS" data-references="STATE,OOPS-FN,QUOTE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="OOPS">oops</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-oops" data-sym="OOPS" title="(defmacro oops () &#39;(oops-fn state))">oops</a> nil '(<a class="sym-link local-def" href="#def-oops-fn" data-sym="OOPS-FN" title="(defun oops-fn (state)
  (mv-let (new-wrld new-kill-ring)
          (rotate-kill-ring (f-get-global &#39;undone-worlds-kill-ring state)
                            (w state))
          (cond
...">oops-fn</a> state))</pre>
  </div>

<div class="form-block macro" id="def-i-am-here" data-defines="I-AM-HERE" data-references="T,MV,IGNORE,DECLARE,STANDARD-CO,FMT1,STATE,COL,MV-LET,QUOTE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="I-AM-HERE">i-am-here</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-i-am-here" data-sym="I-AM-HERE" title="(defmacro i-am-here ()
  &#39;(mv-let (col state)
           (fmt1 &quot;~ I-AM-HERE~|&quot; nil 0 (standard-co state) state nil)
           (declare (ignore col)) (mv t nil state)))">i-am-here</a>
  nil
  '(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (col state)
    (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> <span class="string">"~ I-AM-HERE~|"</span> nil <span class="number">0</span> (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state) state nil)
    (declare (ignore col))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)))</pre>
  </div>

<div class="form-block function" id="def-rebuild-fn-read-filter" data-defines="REBUILD-FN-READ-FILTER" data-references="VALUE,T,READ-OBJECT,EQ,COND,CONS,LIST,QUOTE,ACL2-QUERY,ANS,ER-LET*,*STANDARD-CO*,STANDARD-CO,*STANDARD-OI*,STANDARD-OI,STATE-GLOBAL-LET*,STATE,FILE,DEFUN" data-used-by="REBUILD-FN" data-part-name="REBUILD-FN-READ-FILTER" data-part-args="STATE,FILE" data-part-body="VALUE,T,READ-OBJECT,EQ,COND,STATE,FILE,CONS,LIST,QUOTE,ACL2-QUERY,ANS,ER-LET*,*STANDARD-CO*,STANDARD-CO,*STANDARD-OI*,STANDARD-OI,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REBUILD-FN-READ-FILTER">rebuild-fn-read-filter</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-rebuild-fn-read-filter" data-sym="REBUILD-FN-READ-FILTER" title="(defun rebuild-fn-read-filter (file state)
  (state-global-let* ((standard-oi *standard-oi*) (standard-co *standard-co*))
                     (er-let*
                      ((ans
                        (acl2-query :rebuild
...">rebuild-fn-read-filter</a>
  (file state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>) (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ans (<a class="sym-link system" href="rewrite.html#def-acl2-query" data-sym="ACL2-QUERY">acl2-query</a> <span class="keyword">:rebuild</span> '(<span class="string">"How much of ~x0 do you want to process?"</span> <span class="keyword">:t</span> <span class="keyword">:all</span> <span class="keyword">:all</span> <span class="keyword">:all</span> <span class="keyword">:query</span> <span class="keyword">:query</span> <span class="keyword">:until</span> <span class="keyword">:until</span> <span class="keyword">:?</span> (<span class="string">"If you answer T or ALL, then the entire file will be ~
               loaded.  If you answer QUERY, then you will be asked ~
               about each command in the file.  If you answer UNTIL, ~
               then you should also type some name after the UNTIL ~
               and we will then proceed to process all of the events ~
               in file until that name has been introduced.  Rebuild ~
               automatically stops if any command causes an error.  ~
               When it stops, it leaves the logical world in the ~
               state it was in immediately before the erroneous ~
               command.  Thus, another way to use rebuild is to get ~
               into the habit of planting (i-am-here) -- or any other ~
               form that causes an error when executed -- and then ~
               using the filter T or ALL when you rebuild."</span> <span class="keyword">:t</span> <span class="keyword">:all</span> <span class="keyword">:all</span> <span class="keyword">:all</span> <span class="keyword">:query</span> <span class="keyword">:query</span> <span class="keyword">:until</span> <span class="keyword">:until</span>))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 file))
           state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ans <span class="keyword">:until</span>) (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a> state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> ans))))))</pre>
  </div>

<div class="form-block function" id="def-rebuild-fn" data-defines="REBUILD-FN" data-references="IGNORE,DECLARE,QUOTE,ABBREV-EVISC-TUPLE,*STANDARD-CO*,LD,VAL,ERP,MV-LET,REBUILD-FN-READ-FILTER,T,EQ,VALUE,IF,ER-LET*,STATE,DIR,FILTERP,FILTER,FILE,DEFUN" data-used-by="REBUILD" data-part-name="REBUILD-FN" data-part-args="STATE,DIR,FILTERP,FILTER,FILE" data-part-body="IGNORE,DECLARE,QUOTE,ABBREV-EVISC-TUPLE,*STANDARD-CO*,DIR,LD,VAL,ERP,MV-LET,STATE,FILE,REBUILD-FN-READ-FILTER,T,EQ,VALUE,FILTERP,IF,FILTER,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REBUILD-FN">rebuild-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-rebuild-fn" data-sym="REBUILD-FN" title="(defun rebuild-fn (file filter filterp dir state)
  (er-let*
   ((filter
     (if filterp
         (value
...">rebuild-fn</a>
  (file filter filterp dir state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((filter (if filterp
         (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> filter <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
             <span class="keyword">:all</span> filter))
         (<a class="sym-link local-def" href="#def-rebuild-fn-read-filter" data-sym="REBUILD-FN-READ-FILTER" title="(defun rebuild-fn-read-filter (file state)
  (state-global-let* ((standard-oi *standard-oi*) (standard-co *standard-co*))
                     (er-let*
                      ((ans
                        (acl2-query :rebuild
...">rebuild-fn-read-filter</a> file state))))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
      (<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a> file
        <span class="keyword">:dir</span> dir
        <span class="keyword">:standard-co</span> <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
        <span class="keyword">:proofs-co</span> <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
        <span class="keyword">:ld-skip-proofsp</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
        <span class="keyword">:ld-prompt</span> nil
        <span class="keyword">:ld-missing-input-ok</span> nil
        <span class="keyword">:ld-always-skip-top-level-locals</span> nil
        <span class="keyword">:ld-pre-eval-filter</span> filter
        <span class="keyword">:ld-pre-eval-print</span> nil
        <span class="keyword">:ld-post-eval-print</span> <span class="keyword">:command-conventions</span> <span class="keyword">:ld-evisc-tuple</span> (<a class="sym-link system" href="basis-a.html#def-abbrev-evisc-tuple" data-sym="ABBREV-EVISC-TUPLE">abbrev-evisc-tuple</a> state)
        <span class="keyword">:ld-error-triples</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
        <span class="keyword">:ld-error-action</span> <span class="keyword">:return!</span> <span class="keyword">:ld-query-control-alist</span> '((<span class="keyword">:filter</span>) . <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        <span class="keyword">:ld-verbose</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      (declare (ignore erp val))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block macro" id="def-rebuild" data-defines="REBUILD" data-references="STATE,REBUILD-FN,QUASIQUOTE,DIR,&KEY,FILTERP,QUOTE,FILTER,&OPTIONAL,FILE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="REBUILD">rebuild</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-rebuild" data-sym="REBUILD" title="(defmacro rebuild (file &amp;optional (filter &#39;nil filterp) &amp;key dir)
  `(rebuild-fn ,file ,filter ,filterp ,dir state))">rebuild</a>
  (file &amp;optional (filter 'nil filterp) &amp;key dir)
  `(<a class="sym-link local-def" href="#def-rebuild-fn" data-sym="REBUILD-FN" title="(defun rebuild-fn (file filter filterp dir state)
  (er-let*
   ((filter
     (if filterp
         (value
...">rebuild-fn</a> ,FILE ,FILTER ,FILTERP ,DIR state))</pre>
  </div>

<div class="form-block constant" id="def-_2Abasic-sweep-error-str_2A" data-defines="*BASIC-SWEEP-ERROR-STR*" data-references="DEFCONST" data-used-by="SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL,SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*BASIC-SWEEP-ERROR-STR*">*basic-sweep-error-str*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Abasic-sweep-error-str_2A" data-sym="*BASIC-SWEEP-ERROR-STR*" title="(defconst *basic-sweep-error-str*
          &quot;The state back to which we have been asked to roll would contain an ~
   object that is inconsistent with the requested resetting of the ~
   ACL2 known-package-alist.  Logical consistency would be imperiled ~
   if the rollback were undertaken.  Please get rid of pointers to ~">*basic-sweep-error-str*</a>
  <span class="string">"The state back to which we have been asked to roll would contain an ~
   object that is inconsistent with the requested resetting of the ~
   ACL2 known-package-alist.  Logical consistency would be imperiled ~
   if the rollback were undertaken.  Please get rid of pointers to ~
   such objects before attempting such a rollback.~|~%"</span>)</pre>
  </div>

<div class="form-block function" id="def-sweep-symbol-binding-for-bad-symbol" data-defines="SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL" data-references="CDR,CAR,ER-PROGN,W,EQUAL,ATOM,VALUE,T,*BASIC-SWEEP-ERROR-STR*,SOFT,ER,SYMBOL-PACKAGE-NAME,MEMBER-EQUAL,SYMBOLP,COND,STATE,DECEASED-PACKAGES,OBJ,SYM,DEFUN" data-used-by="SWEEP-GLOBAL-LST" data-part-name="SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL" data-part-args="STATE,DECEASED-PACKAGES,OBJ,SYM" data-part-body="CDR,CAR,SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL,ER-PROGN,STATE,W,EQUAL,ATOM,VALUE,T,SYM,*BASIC-SWEEP-ERROR-STR*,SOFT,ER,DECEASED-PACKAGES,SYMBOL-PACKAGE-NAME,MEMBER-EQUAL,OBJ,SYMBOLP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL">sweep-symbol-binding-for-bad-symbol</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sweep-symbol-binding-for-bad-symbol" data-sym="SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL" title="(defun sweep-symbol-binding-for-bad-symbol (sym obj deceased-packages state)
  (cond
   ((symbolp obj)
    (cond
     ((member-equal (symbol-package-name obj) deceased-packages)
...">sweep-symbol-binding-for-bad-symbol</a>
  (sym obj deceased-packages state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp obj) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (symbol-package-name obj) deceased-packages) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            <span class="string">"undo consistency check"</span>
            <span class="string">"~@0In particular, the value of the global ~
                     variable ~x1 contains the symbol ~x2 in package ~
                     ~x3, which we have been asked to remove.   ~
                     Please reset ~x1, as with (assign ~x1 nil)."</span>
            <a class="sym-link local-def" href="#def-_2Abasic-sweep-error-str_2A" data-sym="*BASIC-SWEEP-ERROR-STR*" title="(defconst *basic-sweep-error-str*
          &quot;The state back to which we have been asked to roll would contain an ~
   object that is inconsistent with the requested resetting of the ~
   ACL2 known-package-alist.  Logical consistency would be imperiled ~
   if the rollback were undertaken.  Please get rid of pointers to ~">*basic-sweep-error-str*</a>
            sym
            obj
            (symbol-package-name obj)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
    ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> obj) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((equal obj (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-sweep-symbol-binding-for-bad-symbol" data-sym="SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL" title="(defun sweep-symbol-binding-for-bad-symbol (sym obj deceased-packages state)
  (cond
   ((symbolp obj)
    (cond
     ((member-equal (symbol-package-name obj) deceased-packages)
...">sweep-symbol-binding-for-bad-symbol</a> sym
          (car obj)
          deceased-packages
          state)
        (<a class="sym-link local-def" href="#def-sweep-symbol-binding-for-bad-symbol" data-sym="SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL" title="(defun sweep-symbol-binding-for-bad-symbol (sym obj deceased-packages state)
  (cond
   ((symbolp obj)
    (cond
     ((member-equal (symbol-package-name obj) deceased-packages)
...">sweep-symbol-binding-for-bad-symbol</a> sym
          (cdr obj)
          deceased-packages
          state)))))</pre>
  </div>

<div class="form-block function" id="def-sweep-global-lst" data-defines="SWEEP-GLOBAL-LST" data-references="CDR,GET-GLOBAL,CAR,SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL,ER-PROGN,T,VALUE,NULL,COND,STATE,DECEASED-PACKAGES,L,DEFUN" data-used-by="SWEEP-GLOBAL-STATE-FOR-LISP-OBJECTS" data-part-name="SWEEP-GLOBAL-LST" data-part-args="STATE,DECEASED-PACKAGES,L" data-part-body="CDR,SWEEP-GLOBAL-LST,DECEASED-PACKAGES,STATE,GET-GLOBAL,CAR,SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL,ER-PROGN,T,VALUE,L,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SWEEP-GLOBAL-LST">sweep-global-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sweep-global-lst" data-sym="SWEEP-GLOBAL-LST" title="(defun sweep-global-lst (l deceased-packages state)
  (cond ((null l) (value nil))
        (t
         (er-progn
          (sweep-symbol-binding-for-bad-symbol (car l)
...">sweep-global-lst</a>
  (l deceased-packages state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> l) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-sweep-symbol-binding-for-bad-symbol" data-sym="SWEEP-SYMBOL-BINDING-FOR-BAD-SYMBOL" title="(defun sweep-symbol-binding-for-bad-symbol (sym obj deceased-packages state)
  (cond
   ((symbolp obj)
    (cond
     ((member-equal (symbol-package-name obj) deceased-packages)
...">sweep-symbol-binding-for-bad-symbol</a> (car l)
          (<a class="sym-link system" href="axioms.html#def-get-global" data-sym="GET-GLOBAL">get-global</a> (car l) state)
          deceased-packages
          state)
        (<a class="sym-link local-def" href="#def-sweep-global-lst" data-sym="SWEEP-GLOBAL-LST" title="(defun sweep-global-lst (l deceased-packages state)
  (cond ((null l) (value nil))
        (t
         (er-progn
          (sweep-symbol-binding-for-bad-symbol (car l)
...">sweep-global-lst</a> (cdr l) deceased-packages state)))))</pre>
  </div>

<div class="form-block function" id="def-sweep-stack-entry-for-bad-symbol" data-defines="SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL" data-references="CDR,CAR,ER-PROGN,W,EQUAL,ATOM,VALUE,T,*BASIC-SWEEP-ERROR-STR*,SOFT,ER,SYMBOL-PACKAGE-NAME,MEMBER-EQUAL,SYMBOLP,COND,STATE,DECEASED-PACKAGES,OBJ,I,NAME,DEFUN" data-used-by="SWEEP-ACL2-ORACLE" data-part-name="SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL" data-part-args="STATE,DECEASED-PACKAGES,OBJ,I,NAME" data-part-body="CDR,CAR,SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL,ER-PROGN,STATE,W,EQUAL,ATOM,VALUE,T,I,NAME,*BASIC-SWEEP-ERROR-STR*,SOFT,ER,DECEASED-PACKAGES,SYMBOL-PACKAGE-NAME,MEMBER-EQUAL,OBJ,SYMBOLP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL">sweep-stack-entry-for-bad-symbol</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sweep-stack-entry-for-bad-symbol" data-sym="SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL" title="(defun sweep-stack-entry-for-bad-symbol (name i obj deceased-packages state)
  (cond
   ((symbolp obj)
    (cond
     ((member-equal (symbol-package-name obj) deceased-packages)
...">sweep-stack-entry-for-bad-symbol</a>
  (name i obj deceased-packages state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp obj) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (symbol-package-name obj) deceased-packages) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            <span class="string">"undo consistency check"</span>
            <span class="string">"~@0In particular, the entry in the ~@1 at ~
                     location ~x2 contains the symbol ~x3 in package ~
                     ~x4, which we have been asked to undo.  Please ~
                     change the ~@1 entry at location ~x2 or ~
                     shrink the ~@1."</span>
            <a class="sym-link local-def" href="#def-_2Abasic-sweep-error-str_2A" data-sym="*BASIC-SWEEP-ERROR-STR*" title="(defconst *basic-sweep-error-str*
          &quot;The state back to which we have been asked to roll would contain an ~
   object that is inconsistent with the requested resetting of the ~
   ACL2 known-package-alist.  Logical consistency would be imperiled ~
   if the rollback were undertaken.  Please get rid of pointers to ~">*basic-sweep-error-str*</a>
            name
            i
            obj
            (symbol-package-name obj)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
    ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> obj) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((equal obj (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-sweep-stack-entry-for-bad-symbol" data-sym="SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL" title="(defun sweep-stack-entry-for-bad-symbol (name i obj deceased-packages state)
  (cond
   ((symbolp obj)
    (cond
     ((member-equal (symbol-package-name obj) deceased-packages)
...">sweep-stack-entry-for-bad-symbol</a> name
          i
          (car obj)
          deceased-packages
          state)
        (<a class="sym-link local-def" href="#def-sweep-stack-entry-for-bad-symbol" data-sym="SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL" title="(defun sweep-stack-entry-for-bad-symbol (name i obj deceased-packages state)
  (cond
   ((symbolp obj)
    (cond
     ((member-equal (symbol-package-name obj) deceased-packages)
...">sweep-stack-entry-for-bad-symbol</a> name
          i
          (cdr obj)
          deceased-packages
          state)))))</pre>
  </div>

<div class="form-block function" id="def-sweep-acl2-oracle" data-defines="SWEEP-ACL2-ORACLE" data-references="+,SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL,ER-PROGN,T,VALUE,COND,READ-ACL2-ORACLE,CAR-ORACLE,NULLP,MV-LET,STATE,DECEASED-PACKAGES,I,DEFUN" data-used-by="SWEEP-GLOBAL-STATE-FOR-LISP-OBJECTS" data-part-name="SWEEP-ACL2-ORACLE" data-part-args="STATE,DECEASED-PACKAGES,I" data-part-body="+,SWEEP-ACL2-ORACLE,DECEASED-PACKAGES,I,SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL,ER-PROGN,T,VALUE,COND,READ-ACL2-ORACLE,STATE,CAR-ORACLE,NULLP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SWEEP-ACL2-ORACLE">sweep-acl2-oracle</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sweep-acl2-oracle" data-sym="SWEEP-ACL2-ORACLE" title="(defun sweep-acl2-oracle (i deceased-packages state)
  (mv-let (nullp car-oracle state) (read-acl2-oracle state)
          (cond (nullp (value nil))
                (t
                 (er-progn
...">sweep-acl2-oracle</a>
  (i deceased-packages state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (nullp car-oracle state)
    (<a class="sym-link system" href="axioms.html#def-read-acl2-oracle" data-sym="READ-ACL2-ORACLE">read-acl2-oracle</a> state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (nullp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-sweep-stack-entry-for-bad-symbol" data-sym="SWEEP-STACK-ENTRY-FOR-BAD-SYMBOL" title="(defun sweep-stack-entry-for-bad-symbol (name i obj deceased-packages state)
  (cond
   ((symbolp obj)
    (cond
     ((member-equal (symbol-package-name obj) deceased-packages)
...">sweep-stack-entry-for-bad-symbol</a> <span class="string">"acl2-oracle"</span>
            i
            car-oracle
            deceased-packages
            state)
          (<a class="sym-link local-def" href="#def-sweep-acl2-oracle" data-sym="SWEEP-ACL2-ORACLE" title="(defun sweep-acl2-oracle (i deceased-packages state)
  (mv-let (nullp car-oracle state) (read-acl2-oracle state)
          (cond (nullp (value nil))
                (t
                 (er-progn
...">sweep-acl2-oracle</a> (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> i) deceased-packages state))))))</pre>
  </div>

<div class="form-block function" id="def-sweep-global-state-for-lisp-objects" data-defines="SWEEP-GLOBAL-STATE-FOR-LISP-OBJECTS" data-references="SWEEP-ACL2-ORACLE,GLOBAL-TABLE-CARS,SWEEP-GLOBAL-LST,ER-PROGN,STATE,DECEASED-PACKAGES,DEFUN" data-part-name="SWEEP-GLOBAL-STATE-FOR-LISP-OBJECTS" data-part-args="STATE,DECEASED-PACKAGES" data-part-body="SWEEP-ACL2-ORACLE,DECEASED-PACKAGES,STATE,GLOBAL-TABLE-CARS,SWEEP-GLOBAL-LST,ER-PROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SWEEP-GLOBAL-STATE-FOR-LISP-OBJECTS">sweep-global-state-for-lisp-objects</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sweep-global-state-for-lisp-objects" data-sym="SWEEP-GLOBAL-STATE-FOR-LISP-OBJECTS" title="(defun sweep-global-state-for-lisp-objects (deceased-packages state)
  (er-progn
   (sweep-global-lst (global-table-cars state) deceased-packages state)
   (sweep-acl2-oracle 0 deceased-packages state)))">sweep-global-state-for-lisp-objects</a>
  (deceased-packages state)
  (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-sweep-global-lst" data-sym="SWEEP-GLOBAL-LST" title="(defun sweep-global-lst (l deceased-packages state)
  (cond ((null l) (value nil))
        (t
         (er-progn
          (sweep-symbol-binding-for-bad-symbol (car l)
...">sweep-global-lst</a> (<a class="sym-link system" href="axioms.html#def-global-table-cars" data-sym="GLOBAL-TABLE-CARS">global-table-cars</a> state)
      deceased-packages
      state)
    (<a class="sym-link local-def" href="#def-sweep-acl2-oracle" data-sym="SWEEP-ACL2-ORACLE" title="(defun sweep-acl2-oracle (i deceased-packages state)
  (mv-let (nullp car-oracle state) (read-acl2-oracle state)
          (cond (nullp (value nil))
                (t
                 (er-progn
...">sweep-acl2-oracle</a> <span class="number">0</span> deceased-packages state)))</pre>
  </div>

<div class="form-block macro" id="def-wet" data-defines="WET" data-references="VALUE-TRIPLE,VALUE,MV,WET!,PROGN,STATE,VAL,ERP,MV-LET,MAKE-EVENT,EVENT,SUMMARY,WITH-OUTPUT,QUASIQUOTE,CONS,T,INCLUDE-BOOK,QUOTE,LIST,CADR,STRINGP,NULL,COND,BOOK-FORM,REMOVE-KEYWORD,IF,MEMBER-EQ,BOOK-TAIL,LET*,KWD-ARGS,&REST,FORM,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WET">wet</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-wet" data-sym="WET" title="(defmacro wet (form &amp;rest kwd-args)
  (let* ((book-tail (member-eq :book kwd-args))
         (kwd-args
          (if book-tail
              (remove-keyword :book kwd-args)
...">wet</a>
  (form &amp;rest kwd-args)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((book-tail (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:book</span> kwd-args)) (kwd-args (if book-tail
          (remove-keyword <span class="keyword">:book</span> kwd-args)
          kwd-args))
      (book-form (if book-tail
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> book-tail) nil)
            ((stringp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> book-tail)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> book-tail)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> book-tail))))
          '(<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="misc/wet.html" title="Open misc/wet">"misc/wet"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))))
    `(<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> (summary event)
      (<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> ,@(AND BOOK-FORM (LIST BOOK-FORM))
            (wet! ,FORM ,@KWD-ARGS))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"WET failed!"</span> nil state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> ',VAL)))))))))</pre>
  </div>

<div class="form-block macro" id="def-disassemble_24" data-defines="DISASSEMBLE$" data-references="LIST,DISASSEMBLE$-FN,VALUE-TRIPLE,INCLUDE-BOOK,PROGN,PROOF-TREE,SUMMARY,HISTORY,EVENT,WITH-OUTPUT,WITH-UBT!,QUASIQUOTE,&ALLOW-OTHER-KEYS,QUOTE,RECOMPILE,&KEY,ARGS,&REST,FN,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DISASSEMBLE$">disassemble$</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-disassemble_24" data-sym="DISASSEMBLE$" title="(defmacro disassemble$
          (fn &amp;rest args &amp;key (recompile &#39;:default) &amp;allow-other-keys)
  `(with-ubt!
    (with-output :off (event history summary proof-tree)
                 (progn
...">disassemble$</a>
  (fn &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> &amp;key (recompile '<span class="keyword">:default</span>) &amp;allow-other-keys)
  `(with-ubt! (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> (event history summary proof-tree)
      (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="misc/disassemble.html" title="Open misc/disassemble">"misc/disassemble"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span> <span class="keyword">:ttags</span> '(<span class="keyword">:disassemble$</span>))
        (<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> (disassemble$-fn ,FN ,RECOMPILE (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ,@ARGS)))))))</pre>
  </div>

<div class="form-block macro" id="def-near-misses" data-defines="NEAR-MISSES" data-references="VALUE-TRIPLE,VALUE,STATE,PLAUSIBLE-MISSPELLINGS,NEAR-MISSES-VAL-CRAZY-NAME-USED-ONLY-HERE,QUOTE,F-PUT-GLOBAL,PPROGN,INCLUDE-BOOK,ER-PROGN,MAKE-EVENT,ERROR,WITH-OUTPUT,QUASIQUOTE,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEAR-MISSES">near-misses</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-near-misses" data-sym="NEAR-MISSES" title="(defmacro near-misses (name)
  `(with-output :off :all :on error
                (make-event
                 (er-progn (include-book &quot;system/event-names&quot; :dir :system)
                           (include-book &quot;xdoc/spellcheck&quot; :dir :system)
...">near-misses</a>
  (name)
  `(<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> <span class="keyword">:all</span> <span class="keyword">:on</span> error
    (<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="system/event-names.html" title="Open system/event-names">"system/event-names"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)
        (<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="xdoc/spellcheck.html" title="Open xdoc/spellcheck">"xdoc/spellcheck"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)
        (<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'near-misses-val-crazy-name-used-only-here
              (plausible-misspellings ',NAME)
              state)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> nil))))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> ',(@ NEAR-MISSES-VAL-CRAZY-NAME-USED-ONLY-HERE)))))))</pre>
  </div>

<div class="form-block function" id="def-compile-function" data-defines="COMPILE-FUNCTION" data-references="PROG2$,RETRACE-P,TRACE-SPECS,STATE-GLOBAL-LET*,SOFT,FORMALS,GETPROPC,HARD,ER,VALUE,T,COMPILER-ENABLED,F-GET-GLOBAL,EQ,NOT,COND,CADR,IF,FN,W,WRLD,LET,STATE-P,CDDR,NULL,CDR,QUOTE,CAR,MEMBER-EQ,CONSP,SYMBOLP,OR,AND,XARGS,DECLARE,STATE,FN0,CTX,DEFUN" data-used-by="COMP-FN" data-part-name="COMPILE-FUNCTION" data-part-args="STATE,FN0,CTX" data-part-declare="STATE,STATE-P,CDDR,NULL,CDR,QUOTE,CAR,MEMBER-EQ,CONSP,FN0,SYMBOLP,OR,AND,XARGS,DECLARE" data-part-body="PROG2$,RETRACE-P,TRACE-SPECS,STATE-GLOBAL-LET*,SOFT,FORMALS,GETPROPC,CTX,HARD,ER,VALUE,T,COMPILER-ENABLED,QUOTE,F-GET-GLOBAL,EQ,NOT,COND,CADR,FN0,CONSP,IF,FN,STATE,W,WRLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPILE-FUNCTION">compile-function</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-compile-function" data-sym="COMPILE-FUNCTION" title="(defun compile-function (ctx fn0 state)
  (declare
   (xargs :guard
    (and
     (or (symbolp fn0)
...">compile-function</a>
  (ctx fn0 state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (symbolp fn0)
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp fn0)
            (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car fn0) '(<span class="keyword">:raw</span> <span class="keyword">:exec</span>))
            (consp (cdr fn0))
            (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> fn0))))
        (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state))))
  (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (fn (if (consp fn0)
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> fn0)
          fn0)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            ctx
            <span class="string">"Implementation error: Compile-function called when ~x0."</span>
            '(<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"~x0 is not a defined function in the current ACL2 world."</span>
          fn))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((trace-specs (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-specs state)) (retrace-p <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> nil (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> fn)))))))</pre>
  </div>

<div class="form-block function" id="def-keep-tmp-files" data-defines="KEEP-TMP-FILES" data-references="QUOTE,F-GET-GLOBAL,STATE,DEFUN" data-part-name="KEEP-TMP-FILES" data-part-args="STATE" data-part-body="STATE,KEEP-TMP-FILES,QUOTE,F-GET-GLOBAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="KEEP-TMP-FILES">keep-tmp-files</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-keep-tmp-files" data-sym="KEEP-TMP-FILES" title="(defun keep-tmp-files (state) (f-get-global &#39;keep-tmp-files state))">keep-tmp-files</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link local-def" href="#def-keep-tmp-files" data-sym="KEEP-TMP-FILES" title="(defun keep-tmp-files (state) (f-get-global &#39;keep-tmp-files state))">keep-tmp-files</a> state))</pre>
  </div>

<div class="form-block function" id="def-comp-fn" data-defines="COMP-FN" data-references="COMPILE-FUNCTION,LIST,CDDR,NULL,CDR,CAR,MEMBER-EQ,CONSP,LET,T,COMPILER-ENABLED,EQ,SOFT,ER,VALUE,COMP,WARNING$,PPROGN,LD-LEVEL,QUOTE,F-GET-GLOBAL,EQL,COND,IGNORE,EQUAL,NOT,STRINGP,SYMBOLP,TRUE-LISTP,OR,STATE-P,AND,XARGS,DECLARE,STATE,TMP-SUFFIX,GCL-FLG,FNS,DEFUN" data-used-by="COMP-GCL,COMP" data-part-name="COMP-FN" data-part-args="STATE,TMP-SUFFIX,GCL-FLG,FNS" data-part-declare="IGNORE,EQUAL,NOT,TMP-SUFFIX,STRINGP,SYMBOLP,FNS,TRUE-LISTP,OR,STATE,STATE-P,AND,XARGS,DECLARE" data-part-body="COMPILE-FUNCTION,LIST,CDDR,NULL,CDR,CAR,MEMBER-EQ,CONSP,SYMBOLP,AND,OR,FNS,LET,T,COMPILER-ENABLED,EQ,NOT,SOFT,ER,GCL-FLG,VALUE,COMP,WARNING$,PPROGN,STATE,LD-LEVEL,QUOTE,F-GET-GLOBAL,EQL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMP-FN">comp-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-comp-fn" data-sym="COMP-FN" title="(defun comp-fn (fns gcl-flg tmp-suffix state)
  (declare
   (xargs :guard
    (and (state-p state) (or (and (true-listp fns) fns) (symbolp fns))
         (stringp tmp-suffix) (not (equal tmp-suffix &quot;&quot;))))
...">comp-fn</a>
  (fns gcl-flg tmp-suffix state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state)
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> fns) fns) (symbolp fns))
        (stringp tmp-suffix)
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal tmp-suffix <span class="string">""</span>))))
    (ignore tmp-suffix))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> '<a class="sym-link local-def" href="#def-comp" data-sym="COMP" title="(defmacro comp (fns) `(comp-fn ,fns nil &quot;1&quot; state))">comp</a>
          <span class="string">"Comp"</span>
          <span class="string">"Comp is ignored outside the ACL2 loop."</span>)
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
    (gcl-flg (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        '<a class="sym-link local-def" href="#def-comp" data-sym="COMP" title="(defmacro comp (fns) `(comp-fn ,fns nil &quot;1&quot; state))">comp</a>
        <span class="string">"Comp-gcl may only be used in GCL implementations."</span>))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((fns (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp fns)
                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:raw</span>))
                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:exec</span>))
                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns nil)))
                (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp fns)
                  (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car fns) '(<span class="keyword">:raw</span> <span class="keyword">:exec</span>))
                  (consp (cdr fns))
                  (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> fns)))) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fns))
             (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> fns))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp fns) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr fns)) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> gcl-flg)) (<a class="sym-link local-def" href="#def-compile-function" data-sym="COMPILE-FUNCTION" title="(defun compile-function (ctx fn0 state)
  (declare
   (xargs :guard
    (and
     (or (symbolp fn0)
...">compile-function</a> '<a class="sym-link local-def" href="#def-comp" data-sym="COMP" title="(defmacro comp (fns) `(comp-fn ,fns nil &quot;1&quot; state))">comp</a> (car fns) state))
          ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> fns) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              '<a class="sym-link local-def" href="#def-comp" data-sym="COMP" title="(defmacro comp (fns) `(comp-fn ,fns nil &quot;1&quot; state))">comp</a>
              <span class="string">"We do not allow the notion of compiling the empty list of ~
             functions.  Perhaps you meant to do something else."</span>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))))</pre>
  </div>

<div class="form-block macro" id="def-comp" data-defines="COMP" data-references="STATE,COMP-FN,QUASIQUOTE,FNS,DEFMACRO" data-used-by="COMP-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMP">comp</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-comp" data-sym="COMP" title="(defmacro comp (fns) `(comp-fn ,fns nil &quot;1&quot; state))">comp</a> (fns) `(<a class="sym-link local-def" href="#def-comp-fn" data-sym="COMP-FN" title="(defun comp-fn (fns gcl-flg tmp-suffix state)
  (declare
   (xargs :guard
    (and (state-p state) (or (and (true-listp fns) fns) (symbolp fns))
         (stringp tmp-suffix) (not (equal tmp-suffix &quot;&quot;))))
...">comp-fn</a> ,FNS nil <span class="string">"1"</span> state))</pre>
  </div>

<div class="form-block macro" id="def-comp-gcl" data-defines="COMP-GCL" data-references="STATE,T,COMP-FN,QUASIQUOTE,FNS,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMP-GCL">comp-gcl</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-comp-gcl" data-sym="COMP-GCL" title="(defmacro comp-gcl (fns) `(comp-fn ,fns t &quot;1&quot; state))">comp-gcl</a> (fns) `(<a class="sym-link local-def" href="#def-comp-fn" data-sym="COMP-FN" title="(defun comp-fn (fns gcl-flg tmp-suffix state)
  (declare
   (xargs :guard
    (and (state-p state) (or (and (true-listp fns) fns) (symbolp fns))
         (stringp tmp-suffix) (not (equal tmp-suffix &quot;&quot;))))
...">comp-fn</a> ,FNS <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"1"</span> state))</pre>
  </div>

<div class="form-block function" id="def-scan-past-deeper-event-landmarks" data-defines="SCAN-PAST-DEEPER-EVENT-LANDMARKS" data-references="T,CDR,CDDR,ACCESS-EVENT-TUPLE-DEPTH,>,EVENT-LANDMARK,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,QUOTE,CAR,EQ,AND,NULL,OR,COND,WRLD,DEPTH,DEFUN" data-used-by="PUFF-COMMAND-BLOCK1" data-part-name="SCAN-PAST-DEEPER-EVENT-LANDMARKS" data-part-args="WRLD,DEPTH" data-part-body="T,CDR,SCAN-PAST-DEEPER-EVENT-LANDMARKS,DEPTH,CDDR,ACCESS-EVENT-TUPLE-DEPTH,>,EVENT-LANDMARK,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,QUOTE,CAR,EQ,AND,WRLD,NULL,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SCAN-PAST-DEEPER-EVENT-LANDMARKS">scan-past-deeper-event-landmarks</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-scan-past-deeper-event-landmarks" data-sym="SCAN-PAST-DEEPER-EVENT-LANDMARKS" title="(defun scan-past-deeper-event-landmarks (depth wrld)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">scan-past-deeper-event-landmarks</a>
  (depth wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld)
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car wrld)) 'command-landmark)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld)) 'global-value))) wrld)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car wrld)) 'event-landmark)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld)) 'global-value)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (access-event-tuple-depth (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld))) depth) (<a class="sym-link local-def" href="#def-scan-past-deeper-event-landmarks" data-sym="SCAN-PAST-DEEPER-EVENT-LANDMARKS" title="(defun scan-past-deeper-event-landmarks (depth wrld)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">scan-past-deeper-event-landmarks</a> depth (cdr wrld)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-scan-past-deeper-event-landmarks" data-sym="SCAN-PAST-DEEPER-EVENT-LANDMARKS" title="(defun scan-past-deeper-event-landmarks (depth wrld)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">scan-past-deeper-event-landmarks</a> depth (cdr wrld)))))</pre>
  </div>

<div class="form-block function" id="def-puffable-encapsulate-p" data-defines="PUFFABLE-ENCAPSULATE-P" data-references="UNKNOWN-CONSTRAINTS-P,IGNORE,DECLARE,CAR,CONSTRAINT-INFO,ORIGINS,X,NAME,MV-LET,OR,CONSP,NOT,SIGNATURE-FNS,FNS,CADR,SIGNATURES,ACCESS-EVENT-TUPLE-FORM,ENCAP,LET*,ENCAPSULATE,QUOTE,ACCESS-EVENT-TUPLE-TYPE,EQ,AND,NTEP,INSTALLED-WRLD,CDDR-CAR-WRLD,DEFUN" data-used-by="PUFFABLE-COMMAND-BLOCKP" data-part-name="PUFFABLE-ENCAPSULATE-P" data-part-args="NTEP,INSTALLED-WRLD,CDDR-CAR-WRLD" data-part-body="UNKNOWN-CONSTRAINTS-P,IGNORE,DECLARE,INSTALLED-WRLD,CAR,CONSTRAINT-INFO,ORIGINS,X,NAME,MV-LET,NTEP,OR,CONSP,NOT,SIGNATURE-FNS,FNS,CADR,SIGNATURES,ACCESS-EVENT-TUPLE-FORM,ENCAP,LET*,ENCAPSULATE,QUOTE,CDDR-CAR-WRLD,ACCESS-EVENT-TUPLE-TYPE,EQ,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFFABLE-ENCAPSULATE-P">puffable-encapsulate-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puffable-encapsulate-p" data-sym="PUFFABLE-ENCAPSULATE-P" title="(defun puffable-encapsulate-p (cddr-car-wrld installed-wrld ntep)
  (and (eq (access-event-tuple-type cddr-car-wrld) &#39;encapsulate)
       (let* ((encap (access-event-tuple-form cddr-car-wrld))
              (signatures (cadr encap))
              (fns (signature-fns signatures)))
...">puffable-encapsulate-p</a>
  (cddr-car-wrld installed-wrld ntep)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (access-event-tuple-type cddr-car-wrld) '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>)
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((encap (access-event-tuple-form cddr-car-wrld)) (signatures (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> encap))
        (fns (signature-fns signatures)))
      (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp fns)
          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ntep)
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (name x origins)
              (<a class="sym-link system" href="history-management.html#def-constraint-info" data-sym="CONSTRAINT-INFO">constraint-info</a> (car fns) installed-wrld)
              (declare (ignore name origins))
              (<a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> x))))))))</pre>
  </div>

<div class="form-block function" id="def-puffable-command-blockp" data-defines="PUFFABLE-COMMAND-BLOCKP" data-references="CDR,EQUAL,NOT,T,PUFFABLE-ENCAPSULATE-P,ENCAPSULATE,CDDR,ACCESS-EVENT-TUPLE-FORM,ASSERT$,INCLUDE-BOOK,CERTIFY-BOOK,ATOM,EVENT-LANDMARK,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,QUOTE,CAR,EQ,AND,NULL,OR,COND,INSTALLED-WRLD,NTEP,CMD-FORM,WRLD,DEFUN" data-used-by="PUFFED-COMMAND-SEQUENCE,PUFFABLE-COMMAND-NUMBERP" data-part-name="PUFFABLE-COMMAND-BLOCKP" data-part-args="INSTALLED-WRLD,NTEP,CMD-FORM,WRLD" data-part-body="CDR,PUFFABLE-COMMAND-BLOCKP,EQUAL,NOT,T,NTEP,INSTALLED-WRLD,PUFFABLE-ENCAPSULATE-P,ENCAPSULATE,CDDR,ACCESS-EVENT-TUPLE-FORM,ASSERT$,INCLUDE-BOOK,CERTIFY-BOOK,CMD-FORM,ATOM,EVENT-LANDMARK,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,QUOTE,CAR,EQ,AND,WRLD,NULL,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFFABLE-COMMAND-BLOCKP">puffable-command-blockp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puffable-command-blockp" data-sym="PUFFABLE-COMMAND-BLOCKP" title="(defun puffable-command-blockp (wrld cmd-form ntep installed-wrld)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puffable-command-blockp</a>
  (wrld cmd-form ntep installed-wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld)
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car wrld)) 'command-landmark)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld)) 'global-value))) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car wrld)) 'event-landmark)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld)) 'global-value)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> cmd-form) nil)
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car cmd-form) 'certify-book) 'certify-book)
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car cmd-form) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (access-event-tuple-form (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld))))
              '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
            '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car cmd-form) '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-puffable-encapsulate-p" data-sym="PUFFABLE-ENCAPSULATE-P" title="(defun puffable-encapsulate-p (cddr-car-wrld installed-wrld ntep)
  (and (eq (access-event-tuple-type cddr-car-wrld) &#39;encapsulate)
       (let* ((encap (access-event-tuple-form cddr-car-wrld))
              (signatures (cadr encap))
              (fns (signature-fns signatures)))
...">puffable-encapsulate-p</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld))
              installed-wrld
              ntep)
            '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal cmd-form (access-event-tuple-form (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld))))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-puffable-command-blockp" data-sym="PUFFABLE-COMMAND-BLOCKP" title="(defun puffable-command-blockp (wrld cmd-form ntep installed-wrld)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puffable-command-blockp</a> (cdr wrld)
        cmd-form
        ntep
        installed-wrld))))</pre>
  </div>

<div class="form-block function" id="def-puffable-command-numberp" data-defines="PUFFABLE-COMMAND-NUMBERP" data-references="CAR,CDDR,ACCESS-COMMAND-TUPLE-FORM,CDR,PUFFABLE-COMMAND-BLOCKP,COMMAND,QUOTE,LOOKUP-WORLD-INDEX,WRLD,LET,NULL,AND,W,RELATIVE-TO-ABSOLUTE-COMMAND-NUMBER,NORMALIZE-ABSOLUTE-COMMAND-NUMBER,N,FLG,MV-LET,STATE,I,DEFUN" data-used-by="PUFF*-FN11" data-part-name="PUFFABLE-COMMAND-NUMBERP" data-part-args="STATE,I" data-part-body="CAR,CDDR,ACCESS-COMMAND-TUPLE-FORM,CDR,PUFFABLE-COMMAND-BLOCKP,COMMAND,QUOTE,LOOKUP-WORLD-INDEX,WRLD,LET,NULL,AND,STATE,W,I,RELATIVE-TO-ABSOLUTE-COMMAND-NUMBER,NORMALIZE-ABSOLUTE-COMMAND-NUMBER,N,FLG,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFFABLE-COMMAND-NUMBERP">puffable-command-numberp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puffable-command-numberp" data-sym="PUFFABLE-COMMAND-NUMBERP" title="(defun puffable-command-numberp (i state)
  (mv-let (flg n)
          (normalize-absolute-command-number
           (relative-to-absolute-command-number i (w state)) (w state))
          (and (null flg)
...">puffable-command-numberp</a>
  (i state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg n)
    (<a class="sym-link system" href="history-management.html#def-normalize-absolute-command-number" data-sym="NORMALIZE-ABSOLUTE-COMMAND-NUMBER">normalize-absolute-command-number</a> (<a class="sym-link system" href="history-management.html#def-relative-to-absolute-command-number" data-sym="RELATIVE-TO-ABSOLUTE-COMMAND-NUMBER">relative-to-absolute-command-number</a> i (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> flg)
      (let ((wrld (lookup-world-index 'command n (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
        (<a class="sym-link local-def" href="#def-puffable-command-blockp" data-sym="PUFFABLE-COMMAND-BLOCKP" title="(defun puffable-command-blockp (wrld cmd-form ntep installed-wrld)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puffable-command-blockp</a> (cdr wrld)
          (access-command-tuple-form (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld)))
          nil
          (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))))</pre>
  </div>

<div class="form-block function" id="def-puff-include-book" data-defines="PUFF-INCLUDE-BOOK" data-references="MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,SET-CBD,LD,QUASIQUOTE,CDR,SUBST-BY-POSITION,IN-PACKAGE,CAAR,EQ,CONSP,ASSERT$,CONS,APPEND,FIXED-CMDS,LET,SOFT,ER,EQUAL,NOT,BOOK-HASH,IF,EV-LST-BOOK-HASH,CMDS,CERT-DATA,ACCESS,AND,EXPANSION-ALIST,INCLUDE-BOOK-ALIST,GLOBAL-VAL,CDDDDR,OLD-BOOK-HASH,PUFF,CHK-CERTIFICATE-FILE,CERT-OBJ,READ-OBJECT-FILE,EV-LST,ER-LET*,CHK-INPUT-OBJECT-FILE,ER-PROGN,T,VALUE,PUFF-INCLUDED-BOOKS,QUOTE,TABLE-ALIST,ASSOC-EQUAL,COND,FILENAME-TO-BOOK-NAME,FULL-BOOK-NAME,W,INSTALLED-WRLD,CAR,CDDR,ACCESS-EVENT-TUPLE-NAMEX,FULL-BOOK-STRING,LET*,STATE,CTX,FINAL-CMDS,INCLUDE-BOOK-ALIST-ENTRY,WRLD,DEFUN" data-used-by="PUFF-COMMAND-BLOCK,PUFF-COMMAND-BLOCK1" data-part-name="PUFF-INCLUDE-BOOK" data-part-args="STATE,CTX,FINAL-CMDS,INCLUDE-BOOK-ALIST-ENTRY,WRLD" data-part-body="MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,SET-CBD,LD,QUASIQUOTE,CDR,SUBST-BY-POSITION,IN-PACKAGE,CAAR,EQ,CONSP,ASSERT$,CONS,APPEND,FIXED-CMDS,LET,SOFT,ER,EQUAL,NOT,BOOK-HASH,IF,EV-LST-BOOK-HASH,CMDS,CERT-DATA,ACCESS,AND,EXPANSION-ALIST,INCLUDE-BOOK-ALIST,GLOBAL-VAL,CDDDDR,OLD-BOOK-HASH,PUFF,CHK-CERTIFICATE-FILE,CERT-OBJ,READ-OBJECT-FILE,EV-LST,ER-LET*,CTX,CHK-INPUT-OBJECT-FILE,ER-PROGN,T,FINAL-CMDS,VALUE,PUFF-INCLUDED-BOOKS,QUOTE,TABLE-ALIST,ASSOC-EQUAL,COND,FILENAME-TO-BOOK-NAME,FULL-BOOK-NAME,STATE,W,INSTALLED-WRLD,WRLD,CAR,CDDR,ACCESS-EVENT-TUPLE-NAMEX,FULL-BOOK-STRING,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF-INCLUDE-BOOK">puff-include-book</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puff-include-book" data-sym="PUFF-INCLUDE-BOOK" title="(defun puff-include-book (wrld include-book-alist-entry final-cmds ctx state)
  (let* ((full-book-string (access-event-tuple-namex (cddr (car wrld))))
         (installed-wrld (w state))
         (full-book-name
          (filename-to-book-name full-book-string installed-wrld)))
...">puff-include-book</a>
  (wrld include-book-alist-entry final-cmds ctx state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((full-book-string (access-event-tuple-namex (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld)))) (installed-wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (full-book-name (<a class="sym-link system" href="basis-a.html#def-filename-to-book-name" data-sym="FILENAME-TO-BOOK-NAME">filename-to-book-name</a> full-book-string installed-wrld)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> full-book-name
         (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'puff-included-books installed-wrld)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> final-cmds))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-input-object-file full-book-string ctx state)
          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ev-lst (read-object-file full-book-string ctx state)) (cert-obj (chk-certificate-file full-book-string
                  nil
                  nil
                  '<a class="sym-link local-def" href="#def-puff" data-sym="PUFF" title="(defmacro puff (cd) `(puff-fn ,cd state))">puff</a>
                  ctx
                  state
                  '((<span class="keyword">:uncertified-okp</span> . <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<span class="keyword">:defaxioms-okp</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                    (<span class="keyword">:skip-proofs-okp</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                  nil)))
            (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-book-hash (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> full-book-name
                     (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))) (expansion-alist (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> old-book-hash
                    cert-obj
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:expansion-alist</span>)))
                (cert-data (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> old-book-hash
                    cert-obj
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:cert-data</span>)))
                (cmds (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cert-obj (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:cmds</span>))))
              (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ev-lst-book-hash (if old-book-hash
                     (book-hash old-book-hash
                       full-book-string
                       cmds
                       expansion-alist
                       cert-data
                       ev-lst
                       state)
                     (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> old-book-hash
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal ev-lst-book-hash old-book-hash))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"When the certified book ~x0 was included, its book-hash ~
                    was ~x1.  The book-hash for ~x0 is now ~x2.  The book has ~
                    thus presumably been modified since it was last included ~
                    and we cannot now recover the events that created the ~
                    current logical world."</span>
                      full-book-string
                      old-book-hash
                      ev-lst-book-hash))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((fixed-cmds (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> cmds
                           (cons (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car ev-lst)) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> ev-lst) '<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a>))
                               (car ev-lst))
                             (subst-by-position expansion-alist (cdr ev-lst) <span class="number">1</span>)))))
                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `((<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a> '((set-cbd ,(DIRECTORY-OF-ABSOLUTE-PATHNAME FULL-BOOK-STRING)) ,@FIXED-CMDS
                             ,@(AND INCLUDE-BOOK-ALIST-ENTRY
       `((TABLE PUFF-INCLUDED-BOOKS &#39;,FULL-BOOK-NAME
                &#39;,INCLUDE-BOOK-ALIST-ENTRY))))
                           <span class="keyword">:ld-error-action</span> <span class="keyword">:error</span>) (maybe-install-acl2-defaults-table ',(TABLE-ALIST &#39;ACL2-DEFAULTS-TABLE WRLD)
                            state)
                          ,@FINAL-CMDS)))))))))))))</pre>
  </div>

<div class="form-block function" id="def-puff-command-block1" data-defines="PUFF-COMMAND-BLOCK1" data-references="CDR,ACCESS-EVENT-TUPLE-DEPTH,SCAN-PAST-DEEPER-EVENT-LANDMARKS,MEMBER-EQ,T,MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,QUASIQUOTE,CONS,ACCESS-EVENT-TUPLE-FORM,APPEND,ASSERT$,ENCAPSULATE,PUFF-INCLUDE-BOOK,W,ACCESS-EVENT-TUPLE-NAMEX,FILENAME-TO-BOOK-NAME,EQUAL,INCLUDE-BOOK,CERTIFY-BOOK,INCLUDE-BOOK-ALIST,GLOBAL-VAL,INCLUDE-BOOK-ALIST-ENTRY,ACCESS-EVENT-TUPLE-TYPE,EVENT-TYPE,CDDR,EVENT-TUPLE,LET*,EVENT-LANDMARK,VALUE,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,QUOTE,CAR,EQ,AND,NULL,OR,COND,STATE,CTX,ANS,IMMEDIATE,WRLD,DEFUN" data-used-by="PUFF-COMMAND-BLOCK" data-part-name="PUFF-COMMAND-BLOCK1" data-part-args="STATE,CTX,ANS,IMMEDIATE,WRLD" data-part-body="CDR,ACCESS-EVENT-TUPLE-DEPTH,SCAN-PAST-DEEPER-EVENT-LANDMARKS,MEMBER-EQ,PUFF-COMMAND-BLOCK1,T,MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,QUASIQUOTE,CONS,ACCESS-EVENT-TUPLE-FORM,APPEND,ASSERT$,ENCAPSULATE,CTX,PUFF-INCLUDE-BOOK,STATE,W,ACCESS-EVENT-TUPLE-NAMEX,FILENAME-TO-BOOK-NAME,EQUAL,INCLUDE-BOOK,CERTIFY-BOOK,IMMEDIATE,INCLUDE-BOOK-ALIST,GLOBAL-VAL,INCLUDE-BOOK-ALIST-ENTRY,ACCESS-EVENT-TUPLE-TYPE,EVENT-TYPE,CDDR,EVENT-TUPLE,LET*,EVENT-LANDMARK,ANS,VALUE,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,QUOTE,CAR,EQ,AND,WRLD,NULL,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF-COMMAND-BLOCK1">puff-command-block1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puff-command-block1" data-sym="PUFF-COMMAND-BLOCK1" title="(defun puff-command-block1 (wrld immediate ans ctx state)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puff-command-block1</a>
  (wrld immediate ans ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld)
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car wrld)) 'command-landmark)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld)) 'global-value))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> ans))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car wrld)) 'event-landmark)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld)) 'global-value)) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((event-tuple (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld))) (event-type (access-event-tuple-type event-tuple))
          (include-book-alist-entry (car (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist wrld))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> immediate 'certify-book)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> event-type '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
             (equal (car include-book-alist-entry)
               (<a class="sym-link system" href="basis-a.html#def-filename-to-book-name" data-sym="FILENAME-TO-BOOK-NAME">filename-to-book-name</a> (access-event-tuple-namex event-tuple)
                 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (<a class="sym-link local-def" href="#def-puff-include-book" data-sym="PUFF-INCLUDE-BOOK" title="(defun puff-include-book (wrld include-book-alist-entry final-cmds ctx state)
  (let* ((full-book-string (access-event-tuple-namex (cddr (car wrld))))
         (installed-wrld (w state))
         (full-book-name
          (filename-to-book-name full-book-string installed-wrld)))
...">puff-include-book</a> wrld
              include-book-alist-entry
              ans
              ctx
              state))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> immediate '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> event-type '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (access-event-tuple-form (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld))))
                  (cons `(maybe-install-acl2-defaults-table ',(TABLE-ALIST &#39;ACL2-DEFAULTS-TABLE WRLD)
                      state)
                    ans)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-puff-command-block1" data-sym="PUFF-COMMAND-BLOCK1" title="(defun puff-command-block1 (wrld immediate ans ctx state)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puff-command-block1</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> event-type '(<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> <a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)) (<a class="sym-link local-def" href="#def-scan-past-deeper-event-landmarks" data-sym="SCAN-PAST-DEEPER-EVENT-LANDMARKS" title="(defun scan-past-deeper-event-landmarks (depth wrld)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">scan-past-deeper-event-landmarks</a> (access-event-tuple-depth event-tuple)
                    (cdr wrld)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cdr wrld)))
              nil
              (cons (access-event-tuple-form event-tuple) ans)
              ctx
              state)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-puff-command-block1" data-sym="PUFF-COMMAND-BLOCK1" title="(defun puff-command-block1 (wrld immediate ans ctx state)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puff-command-block1</a> (cdr wrld) immediate ans ctx state))))</pre>
  </div>

<div class="form-block function" id="def-puff-command-block" data-defines="PUFF-COMMAND-BLOCK" data-references="OTHERWISE,CERTIFY-BOOK,INCLUDE-BOOK-ALIST,GLOBAL-VAL,CAR,PUFF-INCLUDE-BOOK,INCLUDE-BOOK,QUOTE,PUFF-COMMAND-BLOCK1,ENCAPSULATE,CASE,STATE,CTX,FINAL-CMDS,WRLD,CMD-TYPE,DEFUN" data-used-by="PUFFED-COMMAND-SEQUENCE" data-part-name="PUFF-COMMAND-BLOCK" data-part-args="STATE,CTX,FINAL-CMDS,WRLD,CMD-TYPE" data-part-body="OTHERWISE,CERTIFY-BOOK,INCLUDE-BOOK-ALIST,GLOBAL-VAL,CAR,PUFF-INCLUDE-BOOK,INCLUDE-BOOK,STATE,CTX,FINAL-CMDS,QUOTE,WRLD,PUFF-COMMAND-BLOCK1,ENCAPSULATE,CMD-TYPE,CASE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF-COMMAND-BLOCK">puff-command-block</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puff-command-block" data-sym="PUFF-COMMAND-BLOCK" title="(defun puff-command-block (cmd-type wrld final-cmds ctx state)
  (case cmd-type
    (encapsulate (puff-command-block1 wrld &#39;encapsulate final-cmds ctx state))
    (include-book
     (puff-include-book wrld (car (global-val &#39;include-book-alist wrld))
...">puff-command-block</a>
  (cmd-type wrld final-cmds ctx state)
  (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> cmd-type
    (<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> (<a class="sym-link local-def" href="#def-puff-command-block1" data-sym="PUFF-COMMAND-BLOCK1" title="(defun puff-command-block1 (wrld immediate ans ctx state)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puff-command-block1</a> wrld '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> final-cmds ctx state))
    (<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> (<a class="sym-link local-def" href="#def-puff-include-book" data-sym="PUFF-INCLUDE-BOOK" title="(defun puff-include-book (wrld include-book-alist-entry final-cmds ctx state)
  (let* ((full-book-string (access-event-tuple-namex (cddr (car wrld))))
         (installed-wrld (w state))
         (full-book-name
          (filename-to-book-name full-book-string installed-wrld)))
...">puff-include-book</a> wrld
        (car (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist wrld))
        final-cmds
        ctx
        state))
    (certify-book (<a class="sym-link local-def" href="#def-puff-command-block1" data-sym="PUFF-COMMAND-BLOCK1" title="(defun puff-command-block1 (wrld immediate ans ctx state)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puff-command-block1</a> wrld
        'certify-book
        final-cmds
        ctx
        state))
    (otherwise (<a class="sym-link local-def" href="#def-puff-command-block1" data-sym="PUFF-COMMAND-BLOCK1" title="(defun puff-command-block1 (wrld immediate ans ctx state)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puff-command-block1</a> wrld nil final-cmds ctx state))))</pre>
  </div>

<div class="form-block function" id="def-commands-back-to-1" data-defines="COMMANDS-BACK-TO-1" data-references="T,ACCESS-COMMAND-TUPLE-FORM,CDR,CDDR,ACCESS-COMMAND-TUPLE-CBD,NEXT-CBD,LET*,SET-CBD,QUASIQUOTE,CONS,IF,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,QUOTE,CAR,EQ,AND,ASSERT$,EQUAL,COND,ANS,CBD0,CBD,WRLD2,WRLD1,DEFUN" data-used-by="COMMANDS-BACK-TO" data-part-name="COMMANDS-BACK-TO-1" data-part-args="ANS,CBD0,CBD,WRLD2,WRLD1" data-part-body="T,ACCESS-COMMAND-TUPLE-FORM,CDR,COMMANDS-BACK-TO-1,CDDR,ACCESS-COMMAND-TUPLE-CBD,NEXT-CBD,LET*,SET-CBD,QUASIQUOTE,CONS,ANS,CBD0,CBD,IF,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,QUOTE,CAR,EQ,AND,ASSERT$,WRLD2,WRLD1,EQUAL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMMANDS-BACK-TO-1">commands-back-to-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-commands-back-to-1" data-sym="COMMANDS-BACK-TO-1" title="(defun commands-back-to-1 (wrld1 wrld2 cbd cbd0 ans)
  (cond
   ((equal wrld1 wrld2)
    (assert$
     (and (eq (car (car wrld1)) &#39;command-landmark)
...">commands-back-to-1</a>
  (wrld1 wrld2 cbd cbd0 ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal wrld1 wrld2) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car wrld1)) 'command-landmark)
          (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld1)) 'global-value))
        (if (equal cbd cbd0)
          ans
          (cons `(set-cbd ,CBD) ans))))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car wrld1)) 'command-landmark)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld1)) 'global-value)) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((next-cbd (access-command-tuple-cbd (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld1)))) (ans (if (equal cbd next-cbd)
              ans
              (cons `(set-cbd ,CBD) ans))))
        (<a class="sym-link local-def" href="#def-commands-back-to-1" data-sym="COMMANDS-BACK-TO-1" title="(defun commands-back-to-1 (wrld1 wrld2 cbd cbd0 ans)
  (cond
   ((equal wrld1 wrld2)
    (assert$
     (and (eq (car (car wrld1)) &#39;command-landmark)
...">commands-back-to-1</a> (cdr wrld1)
          wrld2
          next-cbd
          cbd0
          (cons (access-command-tuple-form (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld1))) ans))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-commands-back-to-1" data-sym="COMMANDS-BACK-TO-1" title="(defun commands-back-to-1 (wrld1 wrld2 cbd cbd0 ans)
  (cond
   ((equal wrld1 wrld2)
    (assert$
     (and (eq (car (car wrld1)) &#39;command-landmark)
...">commands-back-to-1</a> (cdr wrld1) wrld2 cbd cbd0 ans))))</pre>
  </div>

<div class="form-block function" id="def-commands-back-to" data-defines="COMMANDS-BACK-TO" data-references="SET-CBD,QUASIQUOTE,LIST,T,CAR,CDDR,ACCESS-COMMAND-TUPLE-CBD,EQUAL,COND,COMMANDS-BACK-TO-1,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,CBD,LET,STATE,WRLD2,WRLD1,DEFUN" data-used-by="PUFFED-COMMAND-SEQUENCE" data-part-name="COMMANDS-BACK-TO" data-part-args="STATE,WRLD2,WRLD1" data-part-body="SET-CBD,QUASIQUOTE,LIST,T,CAR,CDDR,ACCESS-COMMAND-TUPLE-CBD,EQUAL,COND,WRLD2,WRLD1,COMMANDS-BACK-TO-1,STATE,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,CBD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMMANDS-BACK-TO">commands-back-to</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-commands-back-to" data-sym="COMMANDS-BACK-TO" title="(defun commands-back-to (wrld1 wrld2 state)
  (let ((cbd (f-get-global &#39;connected-book-directory state)))
    (commands-back-to-1 wrld1 wrld2 cbd cbd
                        (cond
                         ((equal cbd
...">commands-back-to</a>
  (wrld1 wrld2 state)
  (let ((cbd (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)))
    (<a class="sym-link local-def" href="#def-commands-back-to-1" data-sym="COMMANDS-BACK-TO-1" title="(defun commands-back-to-1 (wrld1 wrld2 cbd cbd0 ans)
  (cond
   ((equal wrld1 wrld2)
    (assert$
     (and (eq (car (car wrld1)) &#39;command-landmark)
...">commands-back-to-1</a> wrld1
      wrld2
      cbd
      cbd
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal cbd (access-command-tuple-cbd (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld1)))) nil)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> `(set-cbd ,CBD)))))))</pre>
  </div>

<div class="form-block function" id="def-puffed-command-sequence" data-defines="PUFFED-COMMAND-SEQUENCE" data-references="QUOTE,SOFT,ER,T,SCAN-TO-EVENT,PUFF-COMMAND-BLOCK,COND,COMMANDS-BACK-TO,FINAL-CMDS,W,EQ,CAR,CDDR,ACCESS-COMMAND-TUPLE-FORM,CDR,PUFFABLE-COMMAND-BLOCKP,CMD-TYPE,LET,ER-DECODE-CD,CMD-WRLD,ER-LET*,STATE,WRLD,CTX,CD,DEFUN" data-used-by="PUFF-FN1" data-part-name="PUFFED-COMMAND-SEQUENCE" data-part-args="STATE,WRLD,CTX,CD" data-part-body="QUOTE,SOFT,ER,T,SCAN-TO-EVENT,PUFF-COMMAND-BLOCK,COND,COMMANDS-BACK-TO,FINAL-CMDS,W,EQ,CAR,CDDR,ACCESS-COMMAND-TUPLE-FORM,CDR,PUFFABLE-COMMAND-BLOCKP,CMD-TYPE,LET,STATE,CTX,WRLD,CD,ER-DECODE-CD,CMD-WRLD,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFFED-COMMAND-SEQUENCE">puffed-command-sequence</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puffed-command-sequence" data-sym="PUFFED-COMMAND-SEQUENCE" title="(defun puffed-command-sequence (cd ctx wrld state)
  (er-let* ((cmd-wrld (er-decode-cd cd wrld ctx state)))
           (let ((cmd-type
                  (puffable-command-blockp (cdr cmd-wrld)
                                           (access-command-tuple-form
...">puffed-command-sequence</a>
  (cd ctx wrld state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cmd-wrld (<a class="sym-link system" href="history-management.html#def-er-decode-cd" data-sym="ER-DECODE-CD">er-decode-cd</a> cd wrld ctx state)))
    (let ((cmd-type (<a class="sym-link local-def" href="#def-puffable-command-blockp" data-sym="PUFFABLE-COMMAND-BLOCKP" title="(defun puffable-command-blockp (wrld cmd-form ntep installed-wrld)
  (cond
   ((or (null wrld)
        (and (eq (car (car wrld)) &#39;command-landmark)
             (eq (cadr (car wrld)) &#39;global-value)))
...">puffable-command-blockp</a> (cdr cmd-wrld)
           (access-command-tuple-form (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car cmd-wrld)))
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ctx <span class="keyword">:puff</span>)
           (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (final-cmds (<a class="sym-link local-def" href="#def-commands-back-to" data-sym="COMMANDS-BACK-TO" title="(defun commands-back-to (wrld1 wrld2 state)
  (let ((cbd (f-get-global &#39;connected-book-directory state)))
    (commands-back-to-1 wrld1 wrld2 cbd cbd
                        (cond
                         ((equal cbd
...">commands-back-to</a> wrld cmd-wrld state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (cmd-type (<a class="sym-link local-def" href="#def-puff-command-block" data-sym="PUFF-COMMAND-BLOCK" title="(defun puff-command-block (cmd-type wrld final-cmds ctx state)
  (case cmd-type
    (encapsulate (puff-command-block1 wrld &#39;encapsulate final-cmds ctx state))
    (include-book
     (puff-include-book wrld (car (global-val &#39;include-book-alist wrld))
...">puff-command-block</a> cmd-type
            (scan-to-event (cdr cmd-wrld))
            final-cmds
            ctx
            state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The command at ~x0, namely ~X12, cannot be puffed.  See :DOC ~
               puff."</span>
            cd
            (access-command-tuple-form (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car cmd-wrld)))
            '(nil <span class="number">2</span> <span class="number">3</span> nil)))))))</pre>
  </div>

<div class="form-block function" id="def-ld-read-eval-print-simple" data-defines="LD-READ-EVAL-PRINT-SIMPLE" data-references="LD-LEVEL,F-GET-GLOBAL,LIST*,CONSP,VAL,LET,CADR,EQ,MAYBE-ADD-COMMAND-LANDMARK,ER-PROGN,CDR,*ERROR-TRIPLE-DF-SIG*,*ERROR-TRIPLE-SIG*,CAR,EQUAL,OR,LD-ERROR-TRIPLES,AND,TOP-LEVEL,TRANS-EVAL-DEFAULT-WARNING,ACL2-RAW-EVAL,RAW-MODE-P,IF,TRANS-ANS,ERROR-FLG,DEFAULT-DEFUN-MODE,OLD-DEFAULT-DEFUN-MODE,W,OLD-WRLD,LET*,LAST-MAKE-EVENT-EXPANSION,QUOTE,F-PUT-GLOBAL,PPROGN,T,LD-RETURN-ERROR,MV,COND,IGNORE,DECLARE,LD-READ-COMMAND,FORM,KEYP,ERP,EOFP,MV-LET,STATE,DEFUN" data-used-by="LD-LOOP-SIMPLE" data-part-name="LD-READ-EVAL-PRINT-SIMPLE" data-part-args="STATE" data-part-body="LD-LEVEL,F-GET-GLOBAL,LIST*,CONSP,VAL,LET,CADR,EQ,MAYBE-ADD-COMMAND-LANDMARK,ER-PROGN,CDR,*ERROR-TRIPLE-DF-SIG*,*ERROR-TRIPLE-SIG*,CAR,EQUAL,OR,LD-ERROR-TRIPLES,AND,TOP-LEVEL,TRANS-EVAL-DEFAULT-WARNING,ACL2-RAW-EVAL,RAW-MODE-P,IF,TRANS-ANS,ERROR-FLG,DEFAULT-DEFUN-MODE,OLD-DEFAULT-DEFUN-MODE,W,OLD-WRLD,LET*,LAST-MAKE-EVENT-EXPANSION,QUOTE,F-PUT-GLOBAL,PPROGN,T,LD-RETURN-ERROR,MV,COND,IGNORE,DECLARE,LD-READ-COMMAND,STATE,FORM,KEYP,ERP,EOFP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-READ-EVAL-PRINT-SIMPLE">ld-read-eval-print-simple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-read-eval-print-simple" data-sym="LD-READ-EVAL-PRINT-SIMPLE" title="(defun ld-read-eval-print-simple (state)
  (mv-let (eofp erp keyp form state) (ld-read-command state)
          (declare (ignore keyp))
          (cond (eofp (mv :return :eof state)) (erp (ld-return-error state))
                (t
...">ld-read-eval-print-simple</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp erp keyp form state)
    (<a class="sym-link local-def" href="#def-ld-read-command" data-sym="LD-READ-COMMAND" title="(defun ld-read-command (state)
  (pprogn (brr-evisc-tuple-oracle-update state)
          (prog2$
           (and (int= (f-get-global &#39;ld-level state) 1)
                (semi-initialize-brr-wormhole state))
...">ld-read-command</a> state)
    (declare (ignore keyp))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> <span class="keyword">:eof</span> state))
      (erp (<a class="sym-link local-def" href="#def-ld-return-error" data-sym="LD-RETURN-ERROR" title="(defun ld-return-error (state)
  (let ((action (ld-error-action state)))
    (cond
     ((eq action :return!)
      (mv :return (list :stop-ld (f-get-global &#39;ld-level state)) state))
...">ld-return-error</a> state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion nil state)
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (old-default-defun-mode (<a class="sym-link system" href="axioms.html#def-default-defun-mode" data-sym="DEFAULT-DEFUN-MODE">default-defun-mode</a> old-wrld)))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (error-flg trans-ans state)
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (error-flg trans-ans state)
                (if (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state)
                  (acl2-raw-eval form state)
                  (trans-eval-default-warning form 'top-level state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (error-flg (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> state)
                     (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal (car trans-ans) <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
                       (equal (car trans-ans) <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-df-sig_2A" data-sym="*ERROR-TRIPLE-DF-SIG*">*error-triple-df-sig*</a>))
                     (car (cdr trans-ans))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-maybe-add-command-landmark" data-sym="MAYBE-ADD-COMMAND-LANDMARK" title="(defun maybe-add-command-landmark
       (old-wrld old-default-defun-mode form trans-ans state)
  (let* ((wrld (w state))
         (ext
          (and (member-eq &#39;state (car trans-ans))
...">maybe-add-command-landmark</a> old-wrld
                        old-default-defun-mode
                        form
                        trans-ans
                        state)
                      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil trans-ans state)))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (error-flg (<a class="sym-link local-def" href="#def-ld-return-error" data-sym="LD-RETURN-ERROR" title="(defun ld-return-error (state)
  (let ((action (ld-error-action state)))
    (cond
     ((eq action :return!)
      (mv :return (list :stop-ld (f-get-global &#39;ld-level state)) state))
...">ld-return-error</a> state))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (car trans-ans) <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
                   (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (cdr trans-ans)) <span class="keyword">:q</span>)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> <span class="keyword">:exit</span> state))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> state)
                   (equal (car trans-ans) <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
                   (let ((val (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (cdr trans-ans))))
                     (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp val) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car val) <span class="keyword">:stop-ld</span>)))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:return</span> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:stop-ld</span> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state)
                      (cdr (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (cdr trans-ans))))
                    state))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:continue</span> nil state))))))))))</pre>
  </div>

<div class="form-block function" id="def-ld-loop-simple" data-defines="LD-LOOP-SIMPLE" data-references="MV,T,VALUE,EQ,COND,LD-READ-EVAL-PRINT-SIMPLE,VAL,SIGNAL,MV-LET,STATE,DEFUN" data-used-by="LD-SIMPLE" data-part-name="LD-LOOP-SIMPLE" data-part-args="STATE" data-part-body="MV,T,VALUE,LD-LOOP-SIMPLE,EQ,COND,LD-READ-EVAL-PRINT-SIMPLE,STATE,VAL,SIGNAL,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-LOOP-SIMPLE">ld-loop-simple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-loop-simple" data-sym="LD-LOOP-SIMPLE" title="(defun ld-loop-simple (state)
  (mv-let (signal val state) (ld-read-eval-print-simple state)
          (cond ((eq signal :continue) (ld-loop-simple state))
                ((eq signal :return) (value val)) (t (mv t nil state)))))">ld-loop-simple</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (signal val state)
    (<a class="sym-link local-def" href="#def-ld-read-eval-print-simple" data-sym="LD-READ-EVAL-PRINT-SIMPLE" title="(defun ld-read-eval-print-simple (state)
  (mv-let (eofp erp keyp form state) (ld-read-command state)
          (declare (ignore keyp))
          (cond (eofp (mv :return :eof state)) (erp (ld-return-error state))
                (t
...">ld-read-eval-print-simple</a> state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> signal <span class="keyword">:continue</span>) (<a class="sym-link local-def" href="#def-ld-loop-simple" data-sym="LD-LOOP-SIMPLE" title="(defun ld-loop-simple (state)
  (mv-let (signal val state) (ld-read-eval-print-simple state)
          (cond ((eq signal :continue) (ld-loop-simple state))
                ((eq signal :return) (value val)) (t (mv t nil state)))))">ld-loop-simple</a> state))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> signal <span class="keyword">:return</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)))))</pre>
  </div>

<div class="form-block function" id="def-ld-simple" data-defines="LD-SIMPLE" data-references="LD-LOOP-SIMPLE,CONS,LD-QUERY-CONTROL-ALIST,LD-ERROR-ACTION,T,LD-ERROR-TRIPLES,LD-POST-EVAL-PRINT,LD-PRE-EVAL-PRINT,LD-PRE-EVAL-FILTER,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-MISSING-INPUT-OK,LD-PROMPT,LD-VERBOSE,INCLUDE-BOOK-WITH-LOCALS,QUOTE,LD-SKIP-PROOFSP,STANDARD-OI,STATE-GLOBAL-LET*,STATE,FORMS,DEFUN" data-used-by="PUFF-FN1" data-part-name="LD-SIMPLE" data-part-args="STATE,FORMS" data-part-body="LD-LOOP-SIMPLE,STATE,CONS,LD-QUERY-CONTROL-ALIST,LD-ERROR-ACTION,T,LD-ERROR-TRIPLES,LD-POST-EVAL-PRINT,LD-PRE-EVAL-PRINT,LD-PRE-EVAL-FILTER,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-MISSING-INPUT-OK,LD-PROMPT,LD-VERBOSE,INCLUDE-BOOK-WITH-LOCALS,QUOTE,LD-SKIP-PROOFSP,FORMS,STANDARD-OI,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-SIMPLE">ld-simple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-simple" data-sym="LD-SIMPLE" title="(defun ld-simple (forms state)
  (state-global-let*
   ((standard-oi forms) (ld-skip-proofsp &#39;include-book-with-locals)
    (ld-verbose nil) (ld-prompt nil) (ld-missing-input-ok nil)
    (ld-always-skip-top-level-locals nil) (ld-pre-eval-filter :all)
...">ld-simple</a>
  (forms state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> forms) (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> 'include-book-with-locals)
      (<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> nil)
      (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> nil)
      (<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a> nil)
      (<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a> nil)
      (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> <span class="keyword">:all</span>)
      (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> <span class="keyword">:never</span>)
      (<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> nil)
      (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      (<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> <span class="keyword">:error</span>)
      (<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> (cons '(<span class="keyword">:redef</span> <span class="keyword">:y</span>) (<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> state))))
    (<a class="sym-link local-def" href="#def-ld-loop-simple" data-sym="LD-LOOP-SIMPLE" title="(defun ld-loop-simple (state)
  (mv-let (signal val state) (ld-read-eval-print-simple state)
          (cond ((eq signal :continue) (ld-loop-simple state))
                ((eq signal :return) (value val)) (t (mv t nil state)))))">ld-loop-simple</a> state)))</pre>
  </div>

<div class="form-block function" id="def-puff-fn1" data-defines="PUFF-FN1" data-references="CONS,LD-SIMPLE,GUARD-CHECKING-ON,ER-PROGN,RETRACTION,SET-W,PPROGN,-,K,MAX-ABSOLUTE-COMMAND-NUMBER,I,SCAN-TO-COMMAND,PRED-WRLD,PUFFED-COMMAND-SEQUENCE,CMDS,MSG,CDR,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,SOFT,ER,<=,COND,CDDAR,ACCESS-COMMAND-TUPLE-NUMBER,VALUE,COMMAND-TUPLE-NUMBER,ER-DECODE-CD,CMD-WRLD,ER-LET*,CAR,MAX,CONSP,IF,BARRIER,CURRENT,ACCESS,PERMANENT-P,COMMAND-NUMBER-BASELINE-INFO,QUOTE,GLOBAL-VAL,INFO,W,WRLD,LET*,T,MODIFYING-INCLUDE-BOOK-DIR-ALIST,CURRENT-PACKAGE,STATE-GLOBAL-LET*,REVERT-WORLD-ON-ERROR,STATE,CTX,CD,DEFUN" data-used-by="PUFF*-FN11,PUFF-FN" data-part-name="PUFF-FN1" data-part-args="STATE,CTX,CD" data-part-body="CONS,LD-SIMPLE,GUARD-CHECKING-ON,ER-PROGN,RETRACTION,SET-W,PPROGN,-,K,MAX-ABSOLUTE-COMMAND-NUMBER,I,SCAN-TO-COMMAND,PRED-WRLD,PUFFED-COMMAND-SEQUENCE,CMDS,MSG,CDR,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,SOFT,ER,<=,COND,CDDAR,ACCESS-COMMAND-TUPLE-NUMBER,VALUE,COMMAND-TUPLE-NUMBER,CTX,CD,ER-DECODE-CD,CMD-WRLD,ER-LET*,CAR,MAX,CONSP,IF,BARRIER,CURRENT,ACCESS,PERMANENT-P,COMMAND-NUMBER-BASELINE-INFO,QUOTE,GLOBAL-VAL,INFO,W,WRLD,LET*,T,MODIFYING-INCLUDE-BOOK-DIR-ALIST,STATE,CURRENT-PACKAGE,STATE-GLOBAL-LET*,REVERT-WORLD-ON-ERROR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF-FN1">puff-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puff-fn1" data-sym="PUFF-FN1" title="(defun puff-fn1 (cd ctx state)
  (revert-world-on-error
   (state-global-let*
    ((current-package (current-package state))
     (modifying-include-book-dir-alist t))
...">puff-fn1</a>
  (cd ctx state)
  (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)) (modifying-include-book-dir-alist <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (info (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'command-number-baseline-info wrld))
          (permanent-p (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info info <span class="keyword">:permanent-p</span>))
          (current (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info info <span class="keyword">:current</span>))
          (barrier (if (consp permanent-p)
              (max (car permanent-p) current)
              current)))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cmd-wrld (<a class="sym-link system" href="history-management.html#def-er-decode-cd" data-sym="ER-DECODE-CD">er-decode-cd</a> cd wrld ctx state)) (command-tuple-number (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (access-command-tuple-number (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> cmd-wrld)))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> command-tuple-number barrier) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> command-tuple-number
                   (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info info <span class="keyword">:original</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"Can&#39;t puff a command within the system initialization."</span>))
                ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> command-tuple-number current) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"Can&#39;t puff a command within prehistory.  See :DOC ~
                      reset-prehistory."</span>))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"Can&#39;t puff a command executed at or before the ~
                      reset-prehistory event (at command ~x0) that disabled ~
                      undoing.~@1  See :DOC disable-ubt."</span>
                    (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (car permanent-p) wrld)
                    (if (cdr permanent-p)
                      (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  ~@0"</span> (cdr permanent-p))
                      <span class="string">""</span>)))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cmds (<a class="sym-link local-def" href="#def-puffed-command-sequence" data-sym="PUFFED-COMMAND-SEQUENCE" title="(defun puffed-command-sequence (cd ctx wrld state)
  (er-let* ((cmd-wrld (er-decode-cd cd wrld ctx state)))
           (let ((cmd-type
                  (puffable-command-blockp (cdr cmd-wrld)
                                           (access-command-tuple-form
...">puffed-command-sequence</a> cd ctx wrld state)))
                (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pred-wrld (<a class="sym-link system" href="history-management.html#def-scan-to-command" data-sym="SCAN-TO-COMMAND">scan-to-command</a> (cdr cmd-wrld))) (i (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (max-absolute-command-number cmd-wrld)
                        (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
                    (k (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (max-absolute-command-number (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                          (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                        i)))
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'retraction pred-wrld state)
                    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((guard-checking-on <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                        (<a class="sym-link local-def" href="#def-ld-simple" data-sym="LD-SIMPLE" title="(defun ld-simple (forms state)
  (state-global-let*
   ((standard-oi forms) (ld-skip-proofsp &#39;include-book-with-locals)
    (ld-verbose nil) (ld-prompt nil) (ld-missing-input-ok nil)
    (ld-always-skip-top-level-locals nil) (ld-pre-eval-filter :all)
...">ld-simple</a> cmds state))
                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons i
                          (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (max-absolute-command-number (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                              (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                            k))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-puff-report" data-defines="PUFF-REPORT" data-references="PCS-FN,T,VALUE,STANDARD-CO,CONS,LIST,FMS,HISTORY,IO?,PPROGN,1+,EQL,COND,STATE,CD,NEW-CD2,NEW-CD1,CALLER,DEFUN" data-used-by="PUFF*,PUFF*-FN,PUFF-FN" data-part-name="PUFF-REPORT" data-part-args="STATE,CD,NEW-CD2,NEW-CD1,CALLER" data-part-body="PCS-FN,T,VALUE,STANDARD-CO,CONS,LIST,FMS,CD,CALLER,STATE,HISTORY,IO?,PPROGN,NEW-CD2,1+,NEW-CD1,EQL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF-REPORT">puff-report</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puff-report" data-sym="PUFF-REPORT" title="(defun puff-report (caller new-cd1 new-cd2 cd state)
  (cond
   ((eql new-cd1 (1+ new-cd2))
    (pprogn
     (io? history nil state (caller cd)
...">puff-report</a>
  (caller new-cd1 new-cd2 cd state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> new-cd1 (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> new-cd2)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> history
          nil
          state
          (caller cd)
          (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Note: ~x0 is complete, but no events were ~
                            executed under the given command descriptor, ~
                            ~x1.~|"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 caller) (cons #\1 cd))
            (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
            state
            nil))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-pcs-fn" data-sym="PCS-FN">pcs-fn</a> new-cd1 new-cd2 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))</pre>
  </div>

<div class="form-block function" id="def-puff-fn" data-defines="PUFF-FN" data-references="CDR,CAR,PUFF-REPORT,PUFF-FN1,PAIR,ER-LET*,STATE,CD,DEFUN" data-used-by="PUFF" data-part-name="PUFF-FN" data-part-args="STATE,CD" data-part-body="CDR,CAR,PUFF-REPORT,STATE,CD,PUFF-FN1,PAIR,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF-FN">puff-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puff-fn" data-sym="PUFF-FN" title="(defun puff-fn (cd state)
  (er-let* ((pair (puff-fn1 cd :puff state)))
           (puff-report :puff (car pair) (cdr pair) cd state)))">puff-fn</a>
  (cd state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pair (<a class="sym-link local-def" href="#def-puff-fn1" data-sym="PUFF-FN1" title="(defun puff-fn1 (cd ctx state)
  (revert-world-on-error
   (state-global-let*
    ((current-package (current-package state))
     (modifying-include-book-dir-alist t))
...">puff-fn1</a> cd <span class="keyword">:puff</span> state)))
    (<a class="sym-link local-def" href="#def-puff-report" data-sym="PUFF-REPORT" title="(defun puff-report (caller new-cd1 new-cd2 cd state)
  (cond
   ((eql new-cd1 (1+ new-cd2))
    (pprogn
     (io? history nil state (caller cd)
...">puff-report</a> <span class="keyword">:puff</span> (car pair) (cdr pair) cd state)))</pre>
  </div>

<div class="form-block function" id="def-puff_2A-fn11" data-defines="PUFF*-FN11" data-references="1+,W,MAX-ABSOLUTE-COMMAND-NUMBER,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,-,T,MV,IGNORE,DECLARE,PUFF-FN1,VAL,ERP,MV-LET,PUFFABLE-COMMAND-NUMBERP,CONS,VALUE,>,COND,STATE,J,I,K,PTR,DEFUN" data-used-by="PUFF*-FN1" data-part-name="PUFF*-FN11" data-part-args="STATE,J,I,K,PTR" data-part-body="1+,W,MAX-ABSOLUTE-COMMAND-NUMBER,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,-,K,PUFF*-FN11,T,MV,IGNORE,DECLARE,PUFF-FN1,VAL,ERP,MV-LET,STATE,PUFFABLE-COMMAND-NUMBERP,PTR,CONS,VALUE,J,I,>,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF*-FN11">puff*-fn11</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puff_2A-fn11" data-sym="PUFF*-FN11" title="(defun puff*-fn11 (ptr k i j state)
  (cond ((&gt; i j) (value (cons ptr j)))
        ((puffable-command-numberp i state)
         (mv-let (erp val state) (puff-fn1 i :puff* state)
                 (declare (ignore val))
...">puff*-fn11</a>
  (ptr k i j state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> i j) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons ptr j)))
    ((<a class="sym-link local-def" href="#def-puffable-command-numberp" data-sym="PUFFABLE-COMMAND-NUMBERP" title="(defun puffable-command-numberp (i state)
  (mv-let (flg n)
          (normalize-absolute-command-number
           (relative-to-absolute-command-number i (w state)) (w state))
          (and (null flg)
...">puffable-command-numberp</a> i state) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
        (<a class="sym-link local-def" href="#def-puff-fn1" data-sym="PUFF-FN1" title="(defun puff-fn1 (cd ctx state)
  (revert-world-on-error
   (state-global-let*
    ((current-package (current-package state))
     (modifying-include-book-dir-alist t))
...">puff-fn1</a> i <span class="keyword">:puff*</span> state)
        (declare (ignore val))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp (cons i (cons ptr j)) state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-puff_2A-fn11" data-sym="PUFF*-FN11" title="(defun puff*-fn11 (ptr k i j state)
  (cond ((&gt; i j) (value (cons ptr j)))
        ((puffable-command-numberp i state)
         (mv-let (erp val state) (puff-fn1 i :puff* state)
                 (declare (ignore val))
...">puff*-fn11</a> ptr
              k
              ptr
              (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (max-absolute-command-number (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                  (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                k)
              state)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-puff_2A-fn11" data-sym="PUFF*-FN11" title="(defun puff*-fn11 (ptr k i j state)
  (cond ((&gt; i j) (value (cons ptr j)))
        ((puffable-command-numberp i state)
         (mv-let (erp val state) (puff-fn1 i :puff* state)
                 (declare (ignore val))
...">puff*-fn11</a> ptr k (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> i) j state))))</pre>
  </div>

<div class="form-block function" id="def-puff_2A-fn1" data-defines="PUFF*-FN1" data-references="W,MAX-ABSOLUTE-COMMAND-NUMBER,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,-,PUFF*-FN11,STATE,K,PTR,DEFUN" data-used-by="PUFF*-FN" data-part-name="PUFF*-FN1" data-part-args="STATE,K,PTR" data-part-body="STATE,W,MAX-ABSOLUTE-COMMAND-NUMBER,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,-,K,PTR,PUFF*-FN11" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF*-FN1">puff*-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puff_2A-fn1" data-sym="PUFF*-FN1" title="(defun puff*-fn1 (ptr k state)
  (puff*-fn11 ptr k ptr
              (-
               (absolute-to-relative-command-number
                (max-absolute-command-number (w state)) (w state))
...">puff*-fn1</a>
  (ptr k state)
  (<a class="sym-link local-def" href="#def-puff_2A-fn11" data-sym="PUFF*-FN11" title="(defun puff*-fn11 (ptr k i j state)
  (cond ((&gt; i j) (value (cons ptr j)))
        ((puffable-command-numberp i state)
         (mv-let (erp val state) (puff-fn1 i :puff* state)
                 (declare (ignore val))
...">puff*-fn11</a> ptr
    k
    ptr
    (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (max-absolute-command-number (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
        (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      k)
    state))</pre>
  </div>

<div class="form-block function" id="def-puff_2A-fn" data-defines="PUFF*-FN" data-references="PUFF-REPORT,PUFF*-FN1,PAIR,-,K,PTR,MAX-ABSOLUTE-COMMAND-NUMBER,MX,MSG,CDR,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,T,SOFT,ER,<=,COND,CDDAR,ACCESS-COMMAND-TUPLE-NUMBER,VALUE,COMMAND-TUPLE-NUMBER,ER-DECODE-CD,CMD-WRLD,ER-LET*,CAR,MAX,CONSP,IF,BARRIER,CURRENT,ACCESS,PERMANENT-P,COMMAND-NUMBER-BASELINE-INFO,QUOTE,GLOBAL-VAL,INFO,W,WRLD,LET*,STATE,CD,DEFUN" data-used-by="PUFF*" data-part-name="PUFF*-FN" data-part-args="STATE,CD" data-part-body="PUFF-REPORT,PUFF*-FN1,PAIR,-,K,PTR,MAX-ABSOLUTE-COMMAND-NUMBER,MX,MSG,CDR,ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER,T,SOFT,ER,<=,COND,CDDAR,ACCESS-COMMAND-TUPLE-NUMBER,VALUE,COMMAND-TUPLE-NUMBER,CD,ER-DECODE-CD,CMD-WRLD,ER-LET*,CAR,MAX,CONSP,IF,BARRIER,CURRENT,ACCESS,PERMANENT-P,COMMAND-NUMBER-BASELINE-INFO,QUOTE,GLOBAL-VAL,INFO,STATE,W,WRLD,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF*-FN">puff*-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-puff_2A-fn" data-sym="PUFF*-FN" title="(defun puff*-fn (cd state)
  (let* ((wrld (w state))
         (info (global-val &#39;command-number-baseline-info wrld))
         (permanent-p (access command-number-baseline-info info :permanent-p))
         (current (access command-number-baseline-info info :current))
...">puff*-fn</a>
  (cd state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (info (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'command-number-baseline-info wrld))
      (permanent-p (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info info <span class="keyword">:permanent-p</span>))
      (current (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info info <span class="keyword">:current</span>))
      (barrier (if (consp permanent-p)
          (max (car permanent-p) current)
          current)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cmd-wrld (<a class="sym-link system" href="history-management.html#def-er-decode-cd" data-sym="ER-DECODE-CD">er-decode-cd</a> cd wrld <span class="keyword">:puff*</span> state)) (command-tuple-number (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (access-command-tuple-number (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> cmd-wrld)))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> command-tuple-number barrier) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> command-tuple-number
               (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info info <span class="keyword">:original</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                <span class="keyword">:puff*</span> <span class="string">"Can&#39;t puff* a command within the system initialization."</span>))
            ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> command-tuple-number current) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                <span class="keyword">:puff*</span> <span class="string">"Can&#39;t puff* a command within prehistory.  See :DOC ~
                    reset-prehistory."</span>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                <span class="keyword">:puff*</span> <span class="string">"Can&#39;t puff* a command executed at or before :disable-ubt ~
                    (at command ~x0).~@1  See :DOC disable-ubt."</span>
                (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (car permanent-p) wrld)
                (if (cdr permanent-p)
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  ~@0"</span> (cdr permanent-p))
                  <span class="string">""</span>)))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((mx (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (max-absolute-command-number wrld)
                 wrld)) (ptr (<a class="sym-link system" href="history-management.html#def-absolute-to-relative-command-number" data-sym="ABSOLUTE-TO-RELATIVE-COMMAND-NUMBER">absolute-to-relative-command-number</a> (max-absolute-command-number cmd-wrld)
                  wrld))
              (k (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> mx ptr)))
            (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pair (<a class="sym-link local-def" href="#def-puff_2A-fn1" data-sym="PUFF*-FN1" title="(defun puff*-fn1 (ptr k state)
  (puff*-fn11 ptr k ptr
              (-
               (absolute-to-relative-command-number
                (max-absolute-command-number (w state)) (w state))
...">puff*-fn1</a> ptr k state)))
              (<a class="sym-link local-def" href="#def-puff-report" data-sym="PUFF-REPORT" title="(defun puff-report (caller new-cd1 new-cd2 cd state)
  (cond
   ((eql new-cd1 (1+ new-cd2))
    (pprogn
     (io? history nil state (caller cd)
...">puff-report</a> <span class="keyword">:puff*</span> (car pair) (cdr pair) cd state))))))))</pre>
  </div>

<div class="form-block macro" id="def-puff" data-defines="PUFF" data-references="STATE,PUFF-FN,QUASIQUOTE,CD,DEFMACRO" data-used-by="PUFF-INCLUDE-BOOK" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF">puff</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-puff" data-sym="PUFF" title="(defmacro puff (cd) `(puff-fn ,cd state))">puff</a> (cd) `(<a class="sym-link local-def" href="#def-puff-fn" data-sym="PUFF-FN" title="(defun puff-fn (cd state)
  (er-let* ((pair (puff-fn1 cd :puff state)))
           (puff-report :puff (car pair) (cdr pair) cd state)))">puff-fn</a> ,CD state))</pre>
  </div>

<div class="form-block macro" id="def-puff_2A" data-defines="PUFF*" data-references="MV,T,LIST,VALUE,PUFF-REPORT,ER-PROGN,QUOTE,WARNING$,PPROGN,CDDR,CADR,CAR,NATP,CDR,CONSP,AND,COND,PUFF*-FN,STATE,VAL,ERP,MV-LET,LET,QUASIQUOTE,BOOLEANP,XARGS,DECLARE,NO-ERROR,&OPTIONAL,CD,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUFF*">puff*</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-puff_2A" data-sym="PUFF*" title="(defmacro puff* (cd &amp;optional no-error)
  (declare (xargs :guard (booleanp no-error)))
  `(let ((cd ,cd) (no-error ,no-error))
     (mv-let (erp val state) (puff*-fn cd state)
             (cond
...">puff*</a>
  (cd &amp;optional no-error)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> no-error)))
  `(let ((cd ,CD) (no-error ,NO-ERROR))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
      (<a class="sym-link local-def" href="#def-puff_2A-fn" data-sym="PUFF*-FN" title="(defun puff*-fn (cd state)
  (let* ((wrld (w state))
         (info (global-val &#39;command-number-baseline-info wrld))
         (permanent-p (access command-number-baseline-info info :permanent-p))
         (current (access command-number-baseline-info info :current))
...">puff*-fn</a> cd state)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> no-error
           erp
           (consp val)
           (consp (cdr val))
           (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> (car val))
           (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val))
           (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> val))) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> '<a class="sym-link local-def" href="#def-puff_2A" data-sym="PUFF*" title="(defmacro puff* (cd &amp;optional no-error)
  (declare (xargs :guard (booleanp no-error)))
  `(let ((cd ,cd) (no-error ,no-error))
     (mv-let (erp val state) (puff*-fn cd state)
             (cond
...">puff*</a>
              <span class="string">"Puff*"</span>
              <span class="string">"Puff* did not complete: Failed at ~x0."</span>
              (car val))
            (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-puff-report" data-sym="PUFF-REPORT" title="(defun puff-report (caller new-cd1 new-cd2 cd state)
  (cond
   ((eql new-cd1 (1+ new-cd2))
    (pprogn
     (io? history nil state (caller cd)
...">puff-report</a> <span class="keyword">:puff*</span> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> val) cd state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:incomplete</span> <span class="keyword">:at-command</span> (car val))))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state))))))</pre>
  </div>

<div class="form-block macro" id="def-mini-proveall" data-defines="MINI-PROVEALL" data-references="VALUE-TRIPLE,ORDERED-SYMBOL-ALISTP-REMOVE1-ASSOC-EQ,REMOVE1-ASSOC-EQ,ASSOC-EQ,KEY,L,ORDERED-SYMBOL-ALISTP,ORDERED-SYMBOL-ALISTP-REMOVE1-ASSOC-EQ-TEST,FARGN,FFN-SYMB,EQ,CADR,FQUOTEP,SYMBOLP,PSEUDO-TERMP,PROPER-CONS-NEST-P,FORCE-TEST,ENDS-IN-A-ZERO-APP0,ENDS-IN-A-ZERO,FORCE,APP0-RIGHT-ID,REV0,DEFAULT,APP0,XARGS,ENDS-IN-A-0,REV-REV-AGAIN,==-REFLEXIVE,==-SYMMETRIC,==,REV-IS-ID,APP-COMMUTES,APP-CONS,INSERT-SORT-IS-ID,INSERT-IS-CONS,ENABLE,ATOM-PERM,IFF,DEFCONG,DISABLE,IN-THEORY,DEFEQUIV,PERM-TRANSITIVE,PERM-DEL,COMM-DEL,MEM-DEL2,PERM-MEM,MEM-DEL,PERM-SYMMETRIC,PERM-CONS,PERM-REFLEXIVE,LST2,LST1,PERM,MEM,DEL,INSERT-SORT,T,LIST,ATOM,COND,LST,INSERT,NOT,LT-NON-SYMMETRIC,IGNORE,DECLARE,LOCAL,=>,*,LT,ENCAPSULATE,REV-REV,REV-APP,REV-APP-PROOF-BUILDER,TRUE-LISTP-REV,REV,C,B,A,ASSOC-OF-APP,DEFTHM,CDR,CAR,CONS,CONSP,IF,APP,DEFUN,Z,APPEND,REVAPPEND,EQUAL,Y,X,TRUE-LISTP,AND,IMPLIES,THM,LD,QUOTE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MINI-PROVEALL">mini-proveall</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-mini-proveall" data-sym="MINI-PROVEALL" title="(defmacro mini-proveall ()
  &#39;(ld
    &#39;(:logic
      (thm
       (implies (and (true-listp x) (true-listp y))
...">mini-proveall</a>
  nil
  '(<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a> '(<span class="keyword">:logic</span> (<a class="sym-link system" href="defthm.html#def-thm" data-sym="THM">thm</a> (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x) (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> y))
          (equal (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> x y) z)
            (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> y (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> x z)))))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> app
        (x y)
        (if (consp x)
          (cons (car x) (app (cdr x) y))
          y))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> assoc-of-app
        (equal (app (app a b) c) (app a (app b c))))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> rev
        (x)
        (if (consp x)
          (app (rev (cdr x)) (cons (car x) nil))
          nil))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-rev
        (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (rev x))
        <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:generalize</span>))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> rev-app-proof-builder
        (equal (rev (app a b)) (app (rev b) (rev a)))
        <span class="keyword">:rule-classes</span> nil
        <span class="keyword">:instructions</span> (<span class="keyword">:induct</span> <span class="keyword">:bash</span> <span class="keyword">:induct</span> <span class="keyword">:bash</span> <span class="keyword">:split</span> (<span class="keyword">:dv</span> <span class="number">1</span>)
          <span class="keyword">:x</span> <span class="keyword">:nx</span> (<span class="keyword">:dv</span> <span class="number">1</span>)
          <span class="keyword">:x</span> <span class="keyword">:top</span> <span class="keyword">:s</span> <span class="keyword">:bash</span> (<span class="keyword">:dive</span> <span class="number">1</span> <span class="number">1</span>)
          <span class="keyword">:=</span> (<span class="keyword">:drop</span> <span class="number">2</span>)
          <span class="keyword">:top</span> <span class="keyword">:bash</span>))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> rev-app
        (equal (rev (app a b)) (app (rev b) (rev a))))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> rev-rev
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x) (equal (rev (rev x)) x)))
      (<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> (((lt <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>))
        (<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> lt (x y) (declare (ignore x y)) nil))
        (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lt-non-symmetric (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (lt x y) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (lt y x)))))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> insert
        (x lst)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> lst) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> x))
          ((lt x (car lst)) (cons x lst))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car lst) (insert x (cdr lst))))))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> insert-sort
        (lst)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> lst) nil)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (insert (car lst) (insert-sort (cdr lst))))))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> del
        (x lst)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> lst) nil)
          ((equal x (car lst)) (cdr lst))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car lst) (del x (cdr lst))))))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> mem
        (x lst)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> lst) nil)
          ((equal x (car lst)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (mem x (cdr lst)))))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> perm
        (lst1 lst2)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> lst1) (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> lst2))
          ((mem (car lst1) lst2) (perm (cdr lst1) (del (car lst1) lst2)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> perm-reflexive (perm x x))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> perm-cons
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (mem a x)
          (equal (perm x (cons a y)) (perm (del a x) y)))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:induct</span> (perm x y))))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> perm-symmetric (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (perm x y) (perm y x)))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> mem-del
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (mem a (del b x)) (mem a x))
        <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:match-free</span> <span class="keyword">:once</span>)))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> perm-mem
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (perm x y) (mem a x)) (mem a y))
        <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:match-free</span> <span class="keyword">:once</span>)))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> mem-del2
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (mem a x) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal a b)))
          (mem a (del b x))))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> comm-del
        (equal (del a (del b x)) (del b (del a x))))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> perm-del
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (perm x y) (perm (del a x) (del a y))))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> perm-transitive
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (perm x y) (perm y z)) (perm x z))
        <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:match-free</span> <span class="keyword">:once</span>)))
      (<a class="sym-link system" href="defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> perm)
      (<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable perm perm-reflexive perm-symmetric perm-transitive))
      (<a class="sym-link system" href="defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> perm perm (cons x y) <span class="number">2</span>)
      (<a class="sym-link system" href="defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> perm <a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a> (mem x y) <span class="number">2</span>)
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> atom-perm
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (consp x)) (perm x nil))
        <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable perm))))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> insert-is-cons (perm (insert a x) (cons a x)))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> insert-sort-is-id (perm (insert-sort x) x))
      (<a class="sym-link system" href="defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> perm perm (app x y) <span class="number">2</span>)
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> app-cons
        (perm (app a (cons b c)) (cons b (app a c))))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> app-commutes (perm (app a b) (app b a)))
      (<a class="sym-link system" href="defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> perm
        perm
        (app x y)
        <span class="number">1</span>
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:induct</span> (app y x))))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> rev-is-id (perm (rev x) x))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> ==
        (x y)
        (if (consp x)
          (if (consp y)
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (car x) (car y)) (== (cdr x) (cdr y)))
            nil)
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (consp y))))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ==-symmetric (== x x))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ==-reflexive (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (== x y) (== y x)))
      (<a class="sym-link system" href="defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> ==)
      (<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable ==-symmetric ==-reflexive))
      (<a class="sym-link system" href="defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> == == (cons x y) <span class="number">2</span>)
      (<a class="sym-link system" href="defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> == <a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a> (consp x) <span class="number">1</span>)
      (<a class="sym-link system" href="defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> == == (app x y) <span class="number">2</span>)
      (<a class="sym-link system" href="defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> == == (app x y) <span class="number">1</span>)
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> rev-rev-again (== (rev (rev x)) x))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> ends-in-a-0
        (x)
        (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (if (consp x)
          (ends-in-a-0 (cdr x))
          (equal x <span class="number">0</span>)))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> app0
        (x y)
        (declare (xargs <span class="keyword">:guard</span> (ends-in-a-0 x)))
        (if (ends-in-a-0 x)
          (if (equal x <span class="number">0</span>)
            y
            (cons (car x) (app0 (cdr x) y)))
          '<a class="sym-link system" href="axioms.html#def-default" data-sym="DEFAULT">default</a>))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> rev0
        (x)
        (declare (xargs <span class="keyword">:guard</span> (ends-in-a-0 x)))
        (if (ends-in-a-0 x)
          (if (equal x <span class="number">0</span>)
            <span class="number">0</span>
            (app0 (rev0 (cdr x)) (cons (car x) <span class="number">0</span>)))
          '<a class="sym-link system" href="axioms.html#def-default" data-sym="DEFAULT">default</a>))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> app0-right-id
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a> (ends-in-a-0 x)) (equal (app0 x <span class="number">0</span>) x)))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> ends-in-a-zero (x) (ends-in-a-0 x))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ends-in-a-zero-app0
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a> (ends-in-a-zero x))
          (ends-in-a-0 (app0 x (cons y <span class="number">0</span>)))))
      (<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable ends-in-a-zero))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> force-test
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (ends-in-a-0 x) (equal (app0 (rev0 x) <span class="number">0</span>) (rev0 x)))
          (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (ends-in-a-0 y) (equal (app0 (rev0 y) <span class="number">0</span>) (rev0 y)))
          (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (ends-in-a-0 z) (equal (app0 (rev0 z) <span class="number">0</span>) (rev0 z))))
        <span class="keyword">:hints</span> ((<span class="string">"[2]Goal"</span> <span class="keyword">:in-theory</span> (enable ends-in-a-zero))))
      (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> proper-cons-nest-p
        (x)
        (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> x)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp x) nil)
          ((<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> x) (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x)))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> x) 'cons) (proper-cons-nest-p (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">2</span>)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
      (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ordered-symbol-alistp-remove1-assoc-eq-test
        (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-ordered-symbol-alistp" data-sym="ORDERED-SYMBOL-ALISTP">ordered-symbol-alistp</a> l)
            (symbolp key)
            (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key l))
          (<a class="sym-link system" href="axioms.html#def-ordered-symbol-alistp" data-sym="ORDERED-SYMBOL-ALISTP">ordered-symbol-alistp</a> (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> key l)))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable ordered-symbol-alistp-remove1-assoc-eq))))
      (<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> <span class="string">"Mini-proveall completed successfully."</span>))
    <span class="keyword">:ld-skip-proofsp</span> nil
    <span class="keyword">:ld-redefinition-action</span> nil
    <span class="keyword">:ld-pre-eval-print</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:ld-error-action</span> <span class="keyword">:return!</span>))</pre>
  </div>

<div class="form-block macro" id="def-set-guard-checking" data-defines="SET-GUARD-CHECKING" data-references="NOT,ASSERT$,T,F-PUT-GLOBAL,NULL,VALUE,STANDARD-CO,CONS,LIST,FMS,PPROGN,SOFT,ER,RAW-MODE-P,COND,STATE,GUARD-CHECKING-ON,F-GET-GLOBAL,CURRENT-FLG,QUASIQUOTE,*GUARD-CHECKING-VALUES*,MEMBER-EQ,CADR,CDR,QUOTE,CAR,EQ,CONSP,AND,IF,LET,XARGS,DECLARE,FLG,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-GUARD-CHECKING">set-guard-checking</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-guard-checking" data-sym="SET-GUARD-CHECKING" title="(defmacro set-guard-checking (flg)
  (declare
   (xargs :guard
    (let ((flg
           (if (and (consp flg) (eq (car flg) (quote quote)) (consp (cdr flg)))
...">set-guard-checking</a>
  (flg)
  (declare (xargs <span class="keyword">:guard</span> (let ((flg (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp flg) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car flg) 'quote) (consp (cdr flg)))
             (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> flg)
             flg)))
        (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> flg <a class="sym-link system" href="axioms.html#def-_2Aguard-checking-values_2A" data-sym="*GUARD-CHECKING-VALUES*">*guard-checking-values*</a>))))
  `(let ((current-flg (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on state)) (flg ,(IF (AND (CONSP FLG) (EQ (CAR FLG) &#39;QUOTE) (CONSP (CDR FLG)))
     (CADR FLG)
     FLG)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state) flg) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          '<a class="sym-link local-def" href="#def-set-guard-checking" data-sym="SET-GUARD-CHECKING" title="(defmacro set-guard-checking (flg)
  (declare
   (xargs :guard
    (let ((flg
           (if (and (consp flg) (eq (car flg) (quote quote)) (consp (cdr flg)))
...">set-guard-checking</a>
          <span class="string">"It is illegal (and anyhow, would be useless) to attempt to modify ~
            guard checking while in raw mode, since guards are not checked in ~
            raw mode."</span>))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg current-flg) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Guard-checking-on already has value ~x0.~%~%"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 flg))
            (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
            state
            nil)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))
      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> flg) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'guard-checking-on nil state)
          (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Masking guard violations but still checking guards ~
                     except for self-recursive calls.  To avoid guard ~
                     checking entirely, :SET-GUARD-CHECKING :NONE.  See :DOC ~
                     set-guard-checking.~%~%"</span>
            nil
            (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
            state
            nil)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg <span class="keyword">:none</span>) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'guard-checking-on <span class="keyword">:none</span> state)
          (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Turning off guard checking entirely.  To allow execution ~
                     in raw Lisp for functions with guards other than T, ~
                     while continuing to mask guard violations, ~
                     :SET-GUARD-CHECKING NIL.  See :DOC ~
                     set-guard-checking.~%~%"</span>
            nil
            (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
            state
            nil)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'guard-checking-on flg state)
          (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> flg (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg current-flg)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> current-flg '(nil <span class="keyword">:none</span>)) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Turning guard checking on, value ~x0.~%~%"</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 flg))
                  (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                  state
                  nil))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Leaving guard checking on, but changing value ~
                                to ~x0.~%~%"</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 flg))
                  (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                  state
                  nil))))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))))))</pre>
  </div>

<div class="form-block macro" id="def-get-guard-checking" data-defines="GET-GUARD-CHECKING" data-references="STATE,GUARD-CHECKING-ON,QUOTE,F-GET-GLOBAL,QUASIQUOTE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-GUARD-CHECKING">get-guard-checking</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-get-guard-checking" data-sym="GET-GUARD-CHECKING" title="(defmacro get-guard-checking () `(f-get-global &#39;guard-checking-on state))">get-guard-checking</a>
  nil
  `(<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on state))</pre>
  </div>

<div class="form-block function" id="def-dmr-stop-fn" data-defines="DMR-STOP-FN" data-references="DMR-STOP,OBSERVATION,T,CAR,SET-DEBUGGER-ENABLE-FN,CONSP,IF,F-PUT-GLOBAL,PPROGN,COND,QUOTE,F-GET-GLOBAL,DMRP,LET,STATE-P,XARGS,DECLARE,STATE,DEFUN" data-used-by="DMR-STOP" data-part-name="DMR-STOP-FN" data-part-args="STATE" data-part-declare="STATE,STATE-P,XARGS,DECLARE" data-part-body="DMR-STOP,OBSERVATION,T,CAR,SET-DEBUGGER-ENABLE-FN,CONSP,IF,F-PUT-GLOBAL,PPROGN,COND,STATE,QUOTE,F-GET-GLOBAL,DMRP,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-STOP-FN">dmr-stop-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-stop-fn" data-sym="DMR-STOP-FN" title="(defun dmr-stop-fn (state)
  (declare (xargs :guard (state-p state)))
  (let ((dmrp (f-get-global &#39;dmrp state)))
    (cond
     (dmrp
...">dmr-stop-fn</a>
  (state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state)))
  (let ((dmrp (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'dmrp state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (dmrp (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'dmrp nil state)
          (if (consp dmrp)
            (<a class="sym-link system" href="axioms.html#def-set-debugger-enable-fn" data-sym="SET-DEBUGGER-ENABLE-FN">set-debugger-enable-fn</a> (car dmrp) state)
            state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> '<a class="sym-link local-def" href="#def-dmr-stop" data-sym="DMR-STOP" title="(defmacro dmr-stop () &#39;(dmr-stop-fn state))">dmr-stop</a>
          <span class="string">"Skipping dmr-stop (dmr is already stopped)."</span>)))))</pre>
  </div>

<div class="form-block macro" id="def-dmr-stop" data-defines="DMR-STOP" data-references="STATE,DMR-STOP-FN,QUOTE,DEFMACRO" data-used-by="DMR-STOP-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-STOP">dmr-stop</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-dmr-stop" data-sym="DMR-STOP" title="(defmacro dmr-stop () &#39;(dmr-stop-fn state))">dmr-stop</a> nil '(<a class="sym-link local-def" href="#def-dmr-stop-fn" data-sym="DMR-STOP-FN" title="(defun dmr-stop-fn (state)
  (declare (xargs :guard (state-p state)))
  (let ((dmrp (f-get-global &#39;dmrp state)))
    (cond
     (dmrp
...">dmr-stop-fn</a> state))</pre>
  </div>

<div class="form-block function" id="def-dmr-start-fn" data-defines="DMR-START-FN" data-references="LIST,F-PUT-GLOBAL,SET-DEBUGGER-ENABLE-FN,IF,PPROGN,CASE,NEW-DEBUGGER-ENABLE,DEBUGGER-ENABLE,OLD-DEBUGGER-ENABLE,LET*,T,DMR-START,OBSERVATION,DMRP,QUOTE,F-GET-GLOBAL,COND,STATE-P,XARGS,DECLARE,STATE,DEFUN" data-used-by="DMR-START" data-part-name="DMR-START-FN" data-part-args="STATE" data-part-declare="STATE,STATE-P,XARGS,DECLARE" data-part-body="LIST,F-PUT-GLOBAL,SET-DEBUGGER-ENABLE-FN,IF,PPROGN,CASE,NEW-DEBUGGER-ENABLE,DEBUGGER-ENABLE,OLD-DEBUGGER-ENABLE,LET*,T,DMR-START,OBSERVATION,STATE,DMRP,QUOTE,F-GET-GLOBAL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-START-FN">dmr-start-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-start-fn" data-sym="DMR-START-FN" title="(defun dmr-start-fn (state)
  (declare (xargs :guard (state-p state)))
  (cond
   ((f-get-global &#39;dmrp state)
    (observation &#39;dmr-start &quot;Skipping dmr-start (dmr is already started).&quot;))
...">dmr-start-fn</a>
  (state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'dmrp state) (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> '<a class="sym-link local-def" href="#def-dmr-start" data-sym="DMR-START" title="(defmacro dmr-start () &#39;(dmr-start-fn state))">dmr-start</a>
        <span class="string">"Skipping dmr-start (dmr is already started)."</span>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-debugger-enable (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-debugger-enable" data-sym="DEBUGGER-ENABLE">debugger-enable</a> state)) (new-debugger-enable (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> old-debugger-enable ((nil) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<span class="keyword">:bt</span> <span class="keyword">:break-bt</span>))))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if new-debugger-enable
            (<a class="sym-link system" href="axioms.html#def-set-debugger-enable-fn" data-sym="SET-DEBUGGER-ENABLE-FN">set-debugger-enable-fn</a> new-debugger-enable state)
            state)
          (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'dmrp
            (if new-debugger-enable
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> old-debugger-enable)
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            state))))))</pre>
  </div>

<div class="form-block macro" id="def-dmr-start" data-defines="DMR-START" data-references="STATE,DMR-START-FN,QUOTE,DEFMACRO" data-used-by="DMR-START-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-START">dmr-start</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-dmr-start" data-sym="DMR-START" title="(defmacro dmr-start () &#39;(dmr-start-fn state))">dmr-start</a> nil '(<a class="sym-link local-def" href="#def-dmr-start-fn" data-sym="DMR-START-FN" title="(defun dmr-start-fn (state)
  (declare (xargs :guard (state-p state)))
  (cond
   ((f-get-global &#39;dmrp state)
    (observation &#39;dmr-start &quot;Skipping dmr-start (dmr is already started).&quot;))
...">dmr-start-fn</a> state))</pre>
  </div>

<div class="form-block constant" id="def-_2Ameta-level-function-problem-1_2A" data-defines="*META-LEVEL-FUNCTION-PROBLEM-1*" data-references="DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1*">*meta-level-function-problem-1*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ameta-level-function-problem-1_2A" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1*" title="(defconst *meta-level-function-problem-1*
          &quot;~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the expression ~x1, which is not a term for which every function symbol is ~
   in :logic mode.  The meta-level function computation was ignored.~%~%&quot;)">*meta-level-function-problem-1*</a>
  <span class="string">"~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the expression ~x1, which is not a term for which every function symbol is ~
   in :logic mode.  The meta-level function computation was ignored.~%~%"</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Ameta-level-function-problem-1a_2A" data-defines="*META-LEVEL-FUNCTION-PROBLEM-1A*" data-references="DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1A*">*meta-level-function-problem-1a*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ameta-level-function-problem-1a_2A" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1A*" title="(defconst *meta-level-function-problem-1a*
          &quot;~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to an ~
   alist argument with ~@1.  The meta-level function computation was ignored.~%~%&quot;)">*meta-level-function-problem-1a*</a>
  <span class="string">"~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to an ~
   alist argument with ~@1.  The meta-level function computation was ignored.~%~%"</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Ameta-level-function-problem-1b_2A" data-defines="*META-LEVEL-FUNCTION-PROBLEM-1B*" data-references="DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1B*">*meta-level-function-problem-1b*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ameta-level-function-problem-1b_2A" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1B*" title="(defconst *meta-level-function-problem-1b*
          &quot;~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the non-rune ~x1 for the rune argument.  The meta-level function ~
   computation was ignored.~%~%&quot;)">*meta-level-function-problem-1b*</a>
  <span class="string">"~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the non-rune ~x1 for the rune argument.  The meta-level function ~
   computation was ignored.~%~%"</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Ameta-level-function-problem-1c_2A" data-defines="*META-LEVEL-FUNCTION-PROBLEM-1C*" data-references="DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1C*">*meta-level-function-problem-1c*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ameta-level-function-problem-1c_2A" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1C*" title="(defconst *meta-level-function-problem-1c*
          &quot;~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the expression ~x1 for the target argument.  This expression must be a ~
   term that is the application of a function symbol and consists entirely of ~
   logic-mode functions; but it is not.  The meta-level function computation ~">*meta-level-function-problem-1c*</a>
  <span class="string">"~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the expression ~x1 for the target argument.  This expression must be a ~
   term that is the application of a function symbol and consists entirely of ~
   logic-mode functions; but it is not.  The meta-level function computation ~
   was ignored.~%~%"</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Ameta-level-function-problem-1d_2A" data-defines="*META-LEVEL-FUNCTION-PROBLEM-1D*" data-references="DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1D*">*meta-level-function-problem-1d*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ameta-level-function-problem-1d_2A" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1D*" title="(defconst *meta-level-function-problem-1d*
          &quot;~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the rune ~x1 and the target ~x2.  This is illegal, because there is no ~
   rewrite, definition, meta, or linear lemma named ~x1 whose top-level ~
   function symbol is ~x3.  The meta-level function computation was ~">*meta-level-function-problem-1d*</a>
  <span class="string">"~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the rune ~x1 and the target ~x2.  This is illegal, because there is no ~
   rewrite, definition, meta, or linear lemma named ~x1 whose top-level ~
   function symbol is ~x3.  The meta-level function computation was ~
   ignored.~%~%"</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Ameta-level-function-problem-1e_2A" data-defines="*META-LEVEL-FUNCTION-PROBLEM-1E*" data-references="DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1E*">*meta-level-function-problem-1e*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ameta-level-function-problem-1e_2A" data-sym="*META-LEVEL-FUNCTION-PROBLEM-1E*" title="(defconst *meta-level-function-problem-1e*
          &quot;~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the ~x1 for the bkptr argument, which is not a valid one-based index into ~
   the hypothesis list of the lemma named by rune ~x2.  The meta-level ~
   function computation was ignored.~%~%&quot;)">*meta-level-function-problem-1e*</a>
  <span class="string">"~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to ~
   the ~x1 for the bkptr argument, which is not a valid one-based index into ~
   the hypothesis list of the lemma named by rune ~x2.  The meta-level ~
   function computation was ignored.~%~%"</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Ameta-level-function-problem-2_2A" data-defines="*META-LEVEL-FUNCTION-PROBLEM-2*" data-references="DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*META-LEVEL-FUNCTION-PROBLEM-2*">*meta-level-function-problem-2*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ameta-level-function-problem-2_2A" data-sym="*META-LEVEL-FUNCTION-PROBLEM-2*" title="(defconst *meta-level-function-problem-2*
          &quot;~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to a ~
   context different from the one passed to the meta-level function ~
   itself.  We cannot authenticate manufactured contexts.  The ~
   manufactured context was ~X12.  The meta-level function computation ~">*meta-level-function-problem-2*</a>
  <span class="string">"~%~%Meta-level function Problem:  Some meta-level function applied ~x0 to a ~
   context different from the one passed to the meta-level function ~
   itself.  We cannot authenticate manufactured contexts.  The ~
   manufactured context was ~X12.  The meta-level function computation ~
   was ignored.~%~%"</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Ameta-level-function-problem-3_2A" data-defines="*META-LEVEL-FUNCTION-PROBLEM-3*" data-references="DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*META-LEVEL-FUNCTION-PROBLEM-3*">*meta-level-function-problem-3*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ameta-level-function-problem-3_2A" data-sym="*META-LEVEL-FUNCTION-PROBLEM-3*" title="(defconst *meta-level-function-problem-3*
          &quot;~%~%Meta-level function Problem:  This error can quite possibly be ~
   avoided; see :DOC trust-mfc.  You or some meta-level function applied ~x0 ~
   but not from within the theorem prover&#39;s meta-level function handler.  ~
   This suggests you are trying to test a meta-level function and have ~
...">*meta-level-function-problem-3*</a>
  <span class="string">"~%~%Meta-level function Problem:  This error can quite possibly be ~
   avoided; see :DOC trust-mfc.  You or some meta-level function applied ~x0 ~
   but not from within the theorem prover&#39;s meta-level function handler.  ~
   This suggests you are trying to test a meta-level function and have ~
   evidently manufactured an allegedly suitable context.  Perhaps so.  But ~
   that is so difficult to check that we don&#39;t bother.  Instead we cause this ~
   error and urge you to test your meta-level function by having the ~
   meta-level function handler invoke it as part of a test proof-attempt. To ~
   do this, assume the metatheorem that you intend eventually to prove.  You ~
   may do this by executing the appropriate DEFTHM event embedded in a ~
   SKIP-PROOFS form.  Then use THM to submit conjectures for proof and ~
   observe the behavior of your metafunction.  Remember to undo the assumed ~
   metatheorem before you attempt genuine proofs! If this suggestion isn&#39;t ~
   applicable to your situation, contact the authors.~%~%"</span>)</pre>
  </div>

<div class="form-block other" id="form-126" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> mfc-ap-fn (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>)</pre>
  </div>

<div class="form-block other" id="form-127" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> mfc-relieve-hyp-fn (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>)</pre>
  </div>

<div class="form-block other" id="form-128" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> mfc-relieve-hyp-ttree
  (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>)
  =&gt;
  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>))</pre>
  </div>

<div class="form-block other" id="form-129" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> mfc-rw+-fn (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>)</pre>
  </div>

<div class="form-block other" id="form-130" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> mfc-rw+-ttree (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>))</pre>
  </div>

<div class="form-block other" id="form-131" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> mfc-rw-fn (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>)</pre>
  </div>

<div class="form-block other" id="form-132" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> mfc-rw-ttree (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>))</pre>
  </div>

<div class="form-block other" id="form-133" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> mfc-ts-fn (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>)</pre>
  </div>

<div class="form-block other" id="form-134" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> mfc-ts-ttree (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>))</pre>
  </div>

<div class="form-block macro" id="def-trust-mfc" data-defines="TRUST-MFC" data-references="QUOTE,HARD,ER,PROG2$,QUASIQUOTE,FORM,WHOLE,&WHOLE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRUST-MFC">trust-mfc</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-trust-mfc" data-sym="TRUST-MFC" title="(defmacro trust-mfc (&amp;whole whole form)
  `(prog2$
    (er hard &#39;trust-mfc &quot;It is illegal to run ~x0 except in raw Lisp, ~
                                 typically by way of a :program-mode function ~
                                 body. ~ See :DOC trust-mfc.  Evaluation of ~
...">trust-mfc</a>
  (&amp;whole whole form)
  `(<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
      '<a class="sym-link local-def" href="#def-trust-mfc" data-sym="TRUST-MFC" title="(defmacro trust-mfc (&amp;whole whole form)
  `(prog2$
    (er hard &#39;trust-mfc &quot;It is illegal to run ~x0 except in raw Lisp, ~
                                 typically by way of a :program-mode function ~
                                 body. ~ See :DOC trust-mfc.  Evaluation of ~
...">trust-mfc</a>
      <span class="string">"It is illegal to run ~x0 except in raw Lisp, ~
                                 typically by way of a :program-mode function ~
                                 body. ~ See :DOC trust-mfc.  Evaluation of ~
                                 the form ~x1 has led to this error."</span>
      '<a class="sym-link local-def" href="#def-trust-mfc" data-sym="TRUST-MFC" title="(defmacro trust-mfc (&amp;whole whole form)
  `(prog2$
    (er hard &#39;trust-mfc &quot;It is illegal to run ~x0 except in raw Lisp, ~
                                 typically by way of a :program-mode function ~
                                 body. ~ See :DOC trust-mfc.  Evaluation of ~
...">trust-mfc</a>
      ',WHOLE)
    ,FORM))</pre>
  </div>

<div class="form-block macro" id="def-mfc-ts" data-defines="MFC-TS" data-references="MFC-TS-FN,MFC-TS-TTREE,QUASIQUOTE,IF,BOOLEANP,T,MEMBER-EQ,AND,XARGS,DECLARE,TTREEP,QUOTE,FORCEP,&KEY,ST,MFC,TERM,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MFC-TS">mfc-ts</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-mfc-ts" data-sym="MFC-TS" title="(defmacro mfc-ts (term mfc st &amp;key (forcep &#39;:same) ttreep)
  (declare
   (xargs :guard
    (and (member-eq forcep (quote (t nil :same))) (booleanp ttreep))))
  (if ttreep
...">mfc-ts</a>
  (term mfc st &amp;key (forcep '<span class="keyword">:same</span>) ttreep)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> forcep '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:same</span>)) (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> ttreep))))
  (if ttreep
    `(mfc-ts-ttree ,TERM ,MFC ,ST ,FORCEP)
    `(mfc-ts-fn ,TERM ,MFC ,ST ,FORCEP)))</pre>
  </div>

<div class="form-block macro" id="def-mfc-rw" data-defines="MFC-RW" data-references="MFC-RW-FN,MFC-RW-TTREE,QUASIQUOTE,IF,BOOLEANP,T,MEMBER-EQ,AND,XARGS,DECLARE,TTREEP,QUOTE,FORCEP,&KEY,ST,MFC,EQUIV-INFO,OBJ,TERM,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MFC-RW">mfc-rw</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-mfc-rw" data-sym="MFC-RW" title="(defmacro mfc-rw (term obj equiv-info mfc st &amp;key (forcep &#39;:same) ttreep)
  (declare
   (xargs :guard
    (and (member-eq forcep (quote (t nil :same))) (booleanp ttreep))))
  (if ttreep
...">mfc-rw</a>
  (term obj equiv-info mfc st &amp;key (forcep '<span class="keyword">:same</span>) ttreep)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> forcep '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:same</span>)) (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> ttreep))))
  (if ttreep
    `(mfc-rw-ttree ,TERM ,OBJ ,EQUIV-INFO ,MFC ,ST ,FORCEP)
    `(mfc-rw-fn ,TERM ,OBJ ,EQUIV-INFO ,MFC ,ST ,FORCEP)))</pre>
  </div>

<div class="form-block macro" id="def-mfc-rw_2B" data-defines="MFC-RW+" data-references="MFC-RW+-FN,MFC-RW+-TTREE,QUASIQUOTE,IF,BOOLEANP,T,MEMBER-EQ,AND,XARGS,DECLARE,TTREEP,QUOTE,FORCEP,&KEY,ST,MFC,EQUIV-INFO,OBJ,ALIST,TERM,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MFC-RW+">mfc-rw+</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-mfc-rw_2B" data-sym="MFC-RW+" title="(defmacro mfc-rw+
          (term alist obj equiv-info mfc st &amp;key (forcep &#39;:same) ttreep)
  (declare
   (xargs :guard
    (and (member-eq forcep (quote (t nil :same))) (booleanp ttreep))))
...">mfc-rw+</a>
  (term alist
    obj
    equiv-info
    mfc
    st
    &amp;key
    (forcep '<span class="keyword">:same</span>)
    ttreep)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> forcep '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:same</span>)) (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> ttreep))))
  (if ttreep
    `(mfc-rw+-ttree ,TERM
      ,ALIST
      ,OBJ
      ,EQUIV-INFO
      ,MFC
      ,ST
      ,FORCEP)
    `(mfc-rw+-fn ,TERM ,ALIST ,OBJ ,EQUIV-INFO ,MFC ,ST ,FORCEP)))</pre>
  </div>

<div class="form-block macro" id="def-mfc-relieve-hyp" data-defines="MFC-RELIEVE-HYP" data-references="MFC-RELIEVE-HYP-FN,MFC-RELIEVE-HYP-TTREE,QUASIQUOTE,IF,BOOLEANP,T,MEMBER-EQ,AND,XARGS,DECLARE,TTREEP,QUOTE,FORCEP,&KEY,ST,MFC,BKPTR,TARGET,RUNE,ALIST,HYP,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MFC-RELIEVE-HYP">mfc-relieve-hyp</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-mfc-relieve-hyp" data-sym="MFC-RELIEVE-HYP" title="(defmacro mfc-relieve-hyp
          (hyp alist rune target bkptr mfc st &amp;key (forcep &#39;:same) ttreep)
  (declare
   (xargs :guard
    (and (member-eq forcep (quote (t nil :same))) (booleanp ttreep))))
...">mfc-relieve-hyp</a>
  (hyp alist
    rune
    target
    bkptr
    mfc
    st
    &amp;key
    (forcep '<span class="keyword">:same</span>)
    ttreep)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> forcep '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:same</span>)) (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> ttreep))))
  (if ttreep
    `(mfc-relieve-hyp-ttree ,HYP
      ,ALIST
      ,RUNE
      ,TARGET
      ,BKPTR
      ,MFC
      ,ST
      ,FORCEP)
    `(mfc-relieve-hyp-fn ,HYP
      ,ALIST
      ,RUNE
      ,TARGET
      ,BKPTR
      ,MFC
      ,ST
      ,FORCEP)))</pre>
  </div>

<div class="form-block macro" id="def-mfc-ap" data-defines="MFC-AP" data-references="MFC-AP-FN,QUASIQUOTE,T,MEMBER-EQ,XARGS,DECLARE,QUOTE,FORCEP,&KEY,ST,MFC,TERM,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MFC-AP">mfc-ap</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-mfc-ap" data-sym="MFC-AP" title="(defmacro mfc-ap (term mfc st &amp;key (forcep &#39;:same))
  (declare (xargs :guard (member-eq forcep (quote (t nil :same)))))
  `(mfc-ap-fn ,term ,mfc ,st ,forcep))">mfc-ap</a>
  (term mfc st &amp;key (forcep '<span class="keyword">:same</span>))
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> forcep '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:same</span>))))
  `(mfc-ap-fn ,TERM ,MFC ,ST ,FORCEP))</pre>
  </div>

<div class="form-block function" id="def-congruence-rule-listp" data-defines="CONGRUENCE-RULE-LISTP" data-references="CDR,FNUME,EQL,*FAKE-RUNE-FOR-ANONYMOUS-ENABLED-RULE*,EQUAL,RUNEP,OR,EQUIVALENCE-RELATIONP,RUNE,EQUIV,NUME,CASE-MATCH,CAR,RULE,LET,AND,NULL,ATOM,IF,WRLD,X,DEFUN" data-part-name="CONGRUENCE-RULE-LISTP" data-part-args="WRLD,X" data-part-body="CDR,CONGRUENCE-RULE-LISTP,FNUME,EQL,*FAKE-RUNE-FOR-ANONYMOUS-ENABLED-RULE*,EQUAL,RUNEP,OR,WRLD,EQUIVALENCE-RELATIONP,RUNE,EQUIV,NUME,CASE-MATCH,CAR,RULE,LET,AND,NULL,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONGRUENCE-RULE-LISTP">congruence-rule-listp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-congruence-rule-listp" data-sym="CONGRUENCE-RULE-LISTP" title="(defun congruence-rule-listp (x wrld)
  (if (atom x)
      (null x)
      (and
       (let ((rule (car x)))
...">congruence-rule-listp</a>
  (x wrld)
  (if (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x)
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (let ((rule (car x)))
        (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> rule
          ((nume equiv . rune) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-b.html#def-equivalence-relationp" data-sym="EQUIVALENCE-RELATIONP">equivalence-relationp</a> equiv wrld)
              (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (runep rune wrld)
                (equal rune *fake-rune-for-anonymous-enabled-rule*))
              (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (fnume rune wrld) nume)))))
      (<a class="sym-link local-def" href="#def-congruence-rule-listp" data-sym="CONGRUENCE-RULE-LISTP" title="(defun congruence-rule-listp (x wrld)
  (if (atom x)
      (null x)
      (and
       (let ((rule (car x)))
...">congruence-rule-listp</a> (cdr x) wrld))))</pre>
  </div>

<div class="form-block function" id="def-term-alistp-failure-msg" data-defines="TERM-ALISTP-FAILURE-MSG" data-references="CDR,T,CDAR,VARIABLEP,CAAR,TERMP,NOT,CAR,MSG,AND,ATOM,COND,WRLD,ALIST,DEFUN" data-part-name="TERM-ALISTP-FAILURE-MSG" data-part-args="WRLD,ALIST" data-part-body="CDR,TERM-ALISTP-FAILURE-MSG,T,CDAR,VARIABLEP,WRLD,CAAR,TERMP,NOT,CAR,MSG,AND,ALIST,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TERM-ALISTP-FAILURE-MSG">term-alistp-failure-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-term-alistp-failure-msg" data-sym="TERM-ALISTP-FAILURE-MSG" title="(defun term-alistp-failure-msg (alist wrld)
  (cond ((atom alist) (and alist (msg &quot;a non-nil final cdr&quot;)))
        ((atom (car alist)) (msg &quot;a non-consp element, ~x0&quot; (car alist)))
        ((not (and (termp (caar alist) wrld) (variablep (caar alist))))
         (msg &quot;an element, ~p0, whose car is not a variable&quot; (caar alist)))
...">term-alistp-failure-msg</a>
  (alist wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> alist) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> alist (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"a non-nil final cdr"</span>)))
    ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (car alist)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"a non-consp element, ~x0"</span> (car alist)))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (termp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) wrld) (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"an element, ~p0, whose car is not a variable"</span>
        (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (termp (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) wrld)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"an element, ~p0, whose cdr is not a term"</span>
        (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-term-alistp-failure-msg" data-sym="TERM-ALISTP-FAILURE-MSG" title="(defun term-alistp-failure-msg (alist wrld)
  (cond ((atom alist) (and alist (msg &quot;a non-nil final cdr&quot;)))
        ((atom (car alist)) (msg &quot;a non-consp element, ~x0&quot; (car alist)))
        ((not (and (termp (caar alist) wrld) (variablep (caar alist))))
         (msg &quot;an element, ~p0, whose car is not a variable&quot; (caar alist)))
...">term-alistp-failure-msg</a> (cdr alist) wrld))))</pre>
  </div>

<div class="form-block function" id="def-find-runed-linear-lemma" data-defines="FIND-RUNED-LINEAR-LEMMA" data-references="CDR,T,CAR,LINEAR-LEMMA,ACCESS,EQUAL,NULL,COND,LST,RUNE,DEFUN" data-part-name="FIND-RUNED-LINEAR-LEMMA" data-part-args="LST,RUNE" data-part-body="CDR,FIND-RUNED-LINEAR-LEMMA,T,CAR,LINEAR-LEMMA,ACCESS,RUNE,EQUAL,LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-RUNED-LINEAR-LEMMA">find-runed-linear-lemma</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-runed-linear-lemma" data-sym="FIND-RUNED-LINEAR-LEMMA" title="(defun find-runed-linear-lemma (rune lst)
  (cond ((null lst) nil)
        ((equal rune (access linear-lemma (car lst) :rune)) (car lst))
        (t (find-runed-linear-lemma rune (cdr lst)))))">find-runed-linear-lemma</a>
  (rune lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst) nil)
    ((equal rune (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma (car lst) <span class="keyword">:rune</span>)) (car lst))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-find-runed-linear-lemma" data-sym="FIND-RUNED-LINEAR-LEMMA" title="(defun find-runed-linear-lemma (rune lst)
  (cond ((null lst) nil)
        ((equal rune (access linear-lemma (car lst) :rune)) (car lst))
        (t (find-runed-linear-lemma rune (cdr lst)))))">find-runed-linear-lemma</a> rune (cdr lst)))))</pre>
  </div>

<div class="form-block function" id="def-mfc-force-flg" data-defines="MFC-FORCE-FLG" data-references="T,METAFUNCTION-CONTEXT,ACCESS,OK-TO-FORCE,EQ,COND,MFC,FORCEP,DEFUN" data-part-name="MFC-FORCE-FLG" data-part-args="MFC,FORCEP" data-part-body="T,MFC,METAFUNCTION-CONTEXT,ACCESS,OK-TO-FORCE,FORCEP,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MFC-FORCE-FLG">mfc-force-flg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-mfc-force-flg" data-sym="MFC-FORCE-FLG" title="(defun mfc-force-flg (forcep mfc)
  (cond
   ((eq forcep :same) (ok-to-force (access metafunction-context mfc :rcnst)))
   (t forcep)))">mfc-force-flg</a>
  (forcep mfc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> forcep <span class="keyword">:same</span>) (<a class="sym-link system" href="rewrite.html#def-ok-to-force" data-sym="OK-TO-FORCE">ok-to-force</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> metafunction-context mfc <span class="keyword">:rcnst</span>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> forcep)))</pre>
  </div>

<div class="form-block function" id="def-update-rncst-for-forcep" data-defines="UPDATE-RNCST-FOR-FORCEP" data-references="WEAK,QUOTE,IF,REWRITE-CONSTANT,CHANGE,T,OK-TO-FORCE,IFF,EQ,OR,COND,RCNST,FORCEP,DEFUN" data-part-name="UPDATE-RNCST-FOR-FORCEP" data-part-args="RCNST,FORCEP" data-part-body="WEAK,QUOTE,IF,REWRITE-CONSTANT,CHANGE,T,RCNST,OK-TO-FORCE,IFF,FORCEP,EQ,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-RNCST-FOR-FORCEP">update-rncst-for-forcep</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-rncst-for-forcep" data-sym="UPDATE-RNCST-FOR-FORCEP" title="(defun update-rncst-for-forcep (forcep rcnst)
  (cond ((or (eq forcep :same) (iff forcep (ok-to-force rcnst))) rcnst)
        (t
         (change rewrite-constant rcnst :force-info
                 (if forcep
...">update-rncst-for-forcep</a>
  (forcep rcnst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> forcep <span class="keyword">:same</span>) (<a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a> forcep (<a class="sym-link system" href="rewrite.html#def-ok-to-force" data-sym="OK-TO-FORCE">ok-to-force</a> rcnst))) rcnst)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> rewrite-constant
        rcnst
        <span class="keyword">:force-info</span> (if forcep
          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
          'weak)))))</pre>
  </div>

<div class="form-block function" id="def-print-saved-output-lst" data-defines="PRINT-SAVED-OUTPUT-LST" data-references="IF,CDR,TRANS-EVAL,ER-PROGN,EQ,OR,MEMBER-EQUAL,CAR,IO-RECORD,ACCESS,IO-MARKER,LET,T,VALUE,ENDP,COND,STATE,CTX,STOP-MARKERS,IO-MARKERS,IO-RECORD-LST,DEFUN" data-used-by="PRINT-SAVED-OUTPUT" data-part-name="PRINT-SAVED-OUTPUT-LST" data-part-args="STATE,CTX,STOP-MARKERS,IO-MARKERS,IO-RECORD-LST" data-part-body="IF,CDR,PRINT-SAVED-OUTPUT-LST,STATE,CTX,TRANS-EVAL,ER-PROGN,IO-MARKERS,EQ,OR,STOP-MARKERS,MEMBER-EQUAL,CAR,IO-RECORD,ACCESS,IO-MARKER,LET,T,VALUE,IO-RECORD-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-SAVED-OUTPUT-LST">print-saved-output-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-saved-output-lst" data-sym="PRINT-SAVED-OUTPUT-LST" title="(defun print-saved-output-lst (io-record-lst io-markers stop-markers ctx state)
  (cond ((endp io-record-lst) (value :invisible))
        (t
         (let ((io-marker (access io-record (car io-record-lst) :io-marker)))
           (cond ((member-equal io-marker stop-markers) (value :invisible))
...">print-saved-output-lst</a>
  (io-record-lst io-markers stop-markers ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> io-record-lst) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((io-marker (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> io-record (car io-record-lst) <span class="keyword">:io-marker</span>)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> io-marker stop-markers) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))
          ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> io-markers <span class="keyword">:all</span>)
             (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> io-marker io-markers)) (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (trans-eval (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> io-record (car io-record-lst) <span class="keyword">:form</span>)
                ctx
                state
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              (<a class="sym-link local-def" href="#def-print-saved-output-lst" data-sym="PRINT-SAVED-OUTPUT-LST" title="(defun print-saved-output-lst (io-record-lst io-markers stop-markers ctx state)
  (cond ((endp io-record-lst) (value :invisible))
        (t
         (let ((io-marker (access io-record (car io-record-lst) :io-marker)))
           (cond ((member-equal io-marker stop-markers) (value :invisible))
...">print-saved-output-lst</a> (cdr io-record-lst)
                (if stop-markers
                  <span class="keyword">:all</span> io-markers)
                stop-markers
                ctx
                state)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-print-saved-output-lst" data-sym="PRINT-SAVED-OUTPUT-LST" title="(defun print-saved-output-lst (io-record-lst io-markers stop-markers ctx state)
  (cond ((endp io-record-lst) (value :invisible))
        (t
         (let ((io-marker (access io-record (car io-record-lst) :io-marker)))
           (cond ((member-equal io-marker stop-markers) (value :invisible))
...">print-saved-output-lst</a> (cdr io-record-lst)
              io-markers
              stop-markers
              ctx
              state)))))))</pre>
  </div>

<div class="form-block function" id="def-print-saved-output" data-defines="PRINT-SAVED-OUTPUT" data-references="PRINT-SAVED-OUTPUT-LST,POP-CURRENT-ACL2-WORLD,ACL2-WORLD-ALIST,SAVED-OUTPUT-P,REVERT-WORLD,SAVE-EVENT-STATE-GLOBALS,INITIALIZE-SUMMARY-ACCUMULATORS,GAG-STATE-SAVED,STATE-GLOBAL-LET*,CONS,LIST,FMS,PROVE,MEMBER-EQ,INH,PPROGN,VALUE,T,TRANS-EVAL,IF,ER-PROGN,CAR,IO-RECORD,ACCESS,EQ,CDR,AND,NULL,OR,COND,CTX,STANDARD-CO,CHANNEL,SAVED-OUTPUT-REVERSED,QUOTE,F-GET-GLOBAL,REVERSE,SAVED-OUTPUT,LET,STATE,STOP-MARKERS,IO-MARKERS,GAG-MODE,INHIBIT-OUTPUT-LST,DEFUN" data-used-by="PSO!,PSOG,PSO" data-part-name="PRINT-SAVED-OUTPUT" data-part-args="STATE,STOP-MARKERS,IO-MARKERS,GAG-MODE,INHIBIT-OUTPUT-LST" data-part-body="STOP-MARKERS,IO-MARKERS,PRINT-SAVED-OUTPUT-LST,POP-CURRENT-ACL2-WORLD,ACL2-WORLD-ALIST,SAVED-OUTPUT-P,REVERT-WORLD,SAVE-EVENT-STATE-GLOBALS,INITIALIZE-SUMMARY-ACCUMULATORS,GAG-STATE-SAVED,GAG-MODE,STATE-GLOBAL-LET*,CONS,LIST,FMS,INHIBIT-OUTPUT-LST,PROVE,MEMBER-EQ,INH,PPROGN,VALUE,T,TRANS-EVAL,IF,ER-PROGN,CAR,IO-RECORD,ACCESS,EQ,CDR,AND,NULL,OR,COND,PRINT-SAVED-OUTPUT,CTX,STANDARD-CO,CHANNEL,STATE,SAVED-OUTPUT-REVERSED,QUOTE,F-GET-GLOBAL,REVERSE,SAVED-OUTPUT,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-SAVED-OUTPUT">print-saved-output</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-saved-output" data-sym="PRINT-SAVED-OUTPUT" title="(defun print-saved-output
       (inhibit-output-lst gag-mode io-markers stop-markers state)
  (let ((saved-output (reverse (f-get-global &#39;saved-output-reversed state)))
        (channel (standard-co state))
        (ctx &#39;print-saved-output))
...">print-saved-output</a>
  (inhibit-output-lst <a class="sym-link system" href="basis-a.html#def-gag-mode" data-sym="GAG-MODE">gag-mode</a> io-markers stop-markers state)
  (let ((saved-output (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'saved-output-reversed state))) (channel (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state))
      (ctx '<a class="sym-link local-def" href="#def-print-saved-output" data-sym="PRINT-SAVED-OUTPUT" title="(defun print-saved-output
       (inhibit-output-lst gag-mode io-markers stop-markers state)
  (let ((saved-output (reverse (f-get-global &#39;saved-output-reversed state)))
        (channel (standard-co state))
        (ctx &#39;print-saved-output))
...">print-saved-output</a>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> saved-output)
         (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr saved-output))
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> io-record (car saved-output) <span class="keyword">:io-marker</span>) <span class="keyword">:ctx</span>))) (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if saved-output
            (trans-eval (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> io-record (car saved-output) <span class="keyword">:form</span>)
              ctx
              state
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (let ((inh (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> '<a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state))))
              (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"There is no saved output to print.  See :DOC ~
                                pso.~#0~[~/  Note that PROVE output is ~
                                inhibited, and output is not saved when that ~
                                is the case; see :DOC set-inhibit-output-lst ~
                                for how to turn on PROVE output.~]~|"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                    (if inh
                      <span class="number">1</span>
                      <span class="number">0</span>)))
                channel
                state
                nil))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((saved-output-reversed nil) (inhibit-output-lst inhibit-output-lst)
            (<a class="sym-link system" href="basis-a.html#def-gag-mode" data-sym="GAG-MODE">gag-mode</a> <a class="sym-link system" href="basis-a.html#def-gag-mode" data-sym="GAG-MODE">gag-mode</a>)
            (gag-state-saved (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'gag-state-saved state)))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-initialize-summary-accumulators" data-sym="INITIALIZE-SUMMARY-ACCUMULATORS">initialize-summary-accumulators</a> state)
            (<a class="sym-link system" href="history-management.html#def-save-event-state-globals" data-sym="SAVE-EVENT-STATE-GLOBALS">save-event-state-globals</a> (<a class="sym-link system" href="prove.html#def-revert-world" data-sym="REVERT-WORLD">revert-world</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((saved-output-p nil) (acl2-world-alist (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'acl2-world-alist state)))
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="prove.html#def-pop-current-acl2-world" data-sym="POP-CURRENT-ACL2-WORLD">pop-current-acl2-world</a> 'saved-output-reversed state)
                    (<a class="sym-link local-def" href="#def-print-saved-output-lst" data-sym="PRINT-SAVED-OUTPUT-LST" title="(defun print-saved-output-lst (io-record-lst io-markers stop-markers ctx state)
  (cond ((endp io-record-lst) (value :invisible))
        (t
         (let ((io-marker (access io-record (car io-record-lst) :io-marker)))
           (cond ((member-equal io-marker stop-markers) (value :invisible))
...">print-saved-output-lst</a> saved-output
                      io-markers
                      stop-markers
                      ctx
                      state)))))))))))</pre>
  </div>

<div class="form-block function" id="def-convert-io-markers-lst" data-defines="CONVERT-IO-MARKERS-LST" data-references="PARSE-CLAUSE-ID,CAR,STRINGP,IF,CONS,CDR,T,ENDP,COND,ACC,IO-MARKERS,DEFUN" data-used-by="CONVERT-IO-MARKERS" data-part-name="CONVERT-IO-MARKERS-LST" data-part-args="ACC,IO-MARKERS" data-part-body="PARSE-CLAUSE-ID,CAR,STRINGP,IF,CONS,CDR,CONVERT-IO-MARKERS-LST,T,ACC,IO-MARKERS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONVERT-IO-MARKERS-LST">convert-io-markers-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-convert-io-markers-lst" data-sym="CONVERT-IO-MARKERS-LST" title="(defun convert-io-markers-lst (io-markers acc)
  (cond ((endp io-markers) acc)
        (t
         (convert-io-markers-lst (cdr io-markers)
                                 (cons
...">convert-io-markers-lst</a>
  (io-markers acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> io-markers) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-convert-io-markers-lst" data-sym="CONVERT-IO-MARKERS-LST" title="(defun convert-io-markers-lst (io-markers acc)
  (cond ((endp io-markers) acc)
        (t
         (convert-io-markers-lst (cdr io-markers)
                                 (cons
...">convert-io-markers-lst</a> (cdr io-markers)
        (cons (if (stringp (car io-markers))
            (parse-clause-id (car io-markers))
            (car io-markers))
          acc)))))</pre>
  </div>

<div class="form-block function" id="def-convert-io-markers" data-defines="CONVERT-IO-MARKERS" data-references="T,LIST,CONVERT-IO-MARKERS-LST,ATOM,AND,QUOTE,MEMBER-EQ,COND,IO-MARKERS,DEFUN" data-used-by="PSO!,PSOG,PSO" data-part-name="CONVERT-IO-MARKERS" data-part-args="IO-MARKERS" data-part-body="T,LIST,CONVERT-IO-MARKERS-LST,ATOM,AND,QUOTE,IO-MARKERS,MEMBER-EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONVERT-IO-MARKERS">convert-io-markers</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-convert-io-markers" data-sym="CONVERT-IO-MARKERS" title="(defun convert-io-markers (io-markers)
  (cond ((member-eq io-markers &#39;(nil :all)) io-markers)
        ((and io-markers (atom io-markers))
         (convert-io-markers-lst (list io-markers) nil))
        (t (convert-io-markers-lst io-markers nil))))">convert-io-markers</a>
  (io-markers)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> io-markers '(nil <span class="keyword">:all</span>)) io-markers)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> io-markers (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> io-markers)) (<a class="sym-link local-def" href="#def-convert-io-markers-lst" data-sym="CONVERT-IO-MARKERS-LST" title="(defun convert-io-markers-lst (io-markers acc)
  (cond ((endp io-markers) acc)
        (t
         (convert-io-markers-lst (cdr io-markers)
                                 (cons
...">convert-io-markers-lst</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> io-markers) nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-convert-io-markers-lst" data-sym="CONVERT-IO-MARKERS-LST" title="(defun convert-io-markers-lst (io-markers acc)
  (cond ((endp io-markers) acc)
        (t
         (convert-io-markers-lst (cdr io-markers)
                                 (cons
...">convert-io-markers-lst</a> io-markers nil))))</pre>
  </div>

<div class="form-block macro" id="def-pso" data-defines="PSO" data-references="STATE,CONVERT-IO-MARKERS,PROOF-TREE,PRINT-SAVED-OUTPUT,QUASIQUOTE,STOP-MARKERS,QUOTE,IO-MARKERS,&OPTIONAL,DEFMACRO" data-used-by="PSOF" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PSO">pso</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-pso" data-sym="PSO" title="(defmacro pso (&amp;optional (io-markers &#39;:all) stop-markers)
  `(print-saved-output &#39;(proof-tree) nil (convert-io-markers ,io-markers)
                       (convert-io-markers ,stop-markers) state))">pso</a>
  (&amp;optional (io-markers '<span class="keyword">:all</span>) stop-markers)
  `(<a class="sym-link local-def" href="#def-print-saved-output" data-sym="PRINT-SAVED-OUTPUT" title="(defun print-saved-output
       (inhibit-output-lst gag-mode io-markers stop-markers state)
  (let ((saved-output (reverse (f-get-global &#39;saved-output-reversed state)))
        (channel (standard-co state))
        (ctx &#39;print-saved-output))
...">print-saved-output</a> '(proof-tree)
    nil
    (<a class="sym-link local-def" href="#def-convert-io-markers" data-sym="CONVERT-IO-MARKERS" title="(defun convert-io-markers (io-markers)
  (cond ((member-eq io-markers &#39;(nil :all)) io-markers)
        ((and io-markers (atom io-markers))
         (convert-io-markers-lst (list io-markers) nil))
        (t (convert-io-markers-lst io-markers nil))))">convert-io-markers</a> ,IO-MARKERS)
    (<a class="sym-link local-def" href="#def-convert-io-markers" data-sym="CONVERT-IO-MARKERS" title="(defun convert-io-markers (io-markers)
  (cond ((member-eq io-markers &#39;(nil :all)) io-markers)
        ((and io-markers (atom io-markers))
         (convert-io-markers-lst (list io-markers) nil))
        (t (convert-io-markers-lst io-markers nil))))">convert-io-markers</a> ,STOP-MARKERS)
    state))</pre>
  </div>

<div class="form-block macro" id="def-psog" data-defines="PSOG" data-references="STATE,CONVERT-IO-MARKERS,T,PROOF-TREE,PRINT-SAVED-OUTPUT,QUASIQUOTE,STOP-MARKERS,QUOTE,IO-MARKERS,&OPTIONAL,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PSOG">psog</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-psog" data-sym="PSOG" title="(defmacro psog (&amp;optional (io-markers &#39;:all) stop-markers)
  `(print-saved-output &#39;(proof-tree) t (convert-io-markers ,io-markers)
                       (convert-io-markers ,stop-markers) state))">psog</a>
  (&amp;optional (io-markers '<span class="keyword">:all</span>) stop-markers)
  `(<a class="sym-link local-def" href="#def-print-saved-output" data-sym="PRINT-SAVED-OUTPUT" title="(defun print-saved-output
       (inhibit-output-lst gag-mode io-markers stop-markers state)
  (let ((saved-output (reverse (f-get-global &#39;saved-output-reversed state)))
        (channel (standard-co state))
        (ctx &#39;print-saved-output))
...">print-saved-output</a> '(proof-tree)
    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
    (<a class="sym-link local-def" href="#def-convert-io-markers" data-sym="CONVERT-IO-MARKERS" title="(defun convert-io-markers (io-markers)
  (cond ((member-eq io-markers &#39;(nil :all)) io-markers)
        ((and io-markers (atom io-markers))
         (convert-io-markers-lst (list io-markers) nil))
        (t (convert-io-markers-lst io-markers nil))))">convert-io-markers</a> ,IO-MARKERS)
    (<a class="sym-link local-def" href="#def-convert-io-markers" data-sym="CONVERT-IO-MARKERS" title="(defun convert-io-markers (io-markers)
  (cond ((member-eq io-markers &#39;(nil :all)) io-markers)
        ((and io-markers (atom io-markers))
         (convert-io-markers-lst (list io-markers) nil))
        (t (convert-io-markers-lst io-markers nil))))">convert-io-markers</a> ,STOP-MARKERS)
    state))</pre>
  </div>

<div class="form-block macro" id="def-pso_21" data-defines="PSO!" data-references="STATE,CONVERT-IO-MARKERS,PRINT-SAVED-OUTPUT,QUASIQUOTE,STOP-MARKERS,QUOTE,IO-MARKERS,&OPTIONAL,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PSO!">pso!</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-pso_21" data-sym="PSO!" title="(defmacro pso! (&amp;optional (io-markers &#39;:all) stop-markers)
  `(print-saved-output nil nil (convert-io-markers ,io-markers)
                       (convert-io-markers ,stop-markers) state))">pso!</a>
  (&amp;optional (io-markers '<span class="keyword">:all</span>) stop-markers)
  `(<a class="sym-link local-def" href="#def-print-saved-output" data-sym="PRINT-SAVED-OUTPUT" title="(defun print-saved-output
       (inhibit-output-lst gag-mode io-markers stop-markers state)
  (let ((saved-output (reverse (f-get-global &#39;saved-output-reversed state)))
        (channel (standard-co state))
        (ctx &#39;print-saved-output))
...">print-saved-output</a> nil
    nil
    (<a class="sym-link local-def" href="#def-convert-io-markers" data-sym="CONVERT-IO-MARKERS" title="(defun convert-io-markers (io-markers)
  (cond ((member-eq io-markers &#39;(nil :all)) io-markers)
        ((and io-markers (atom io-markers))
         (convert-io-markers-lst (list io-markers) nil))
        (t (convert-io-markers-lst io-markers nil))))">convert-io-markers</a> ,IO-MARKERS)
    (<a class="sym-link local-def" href="#def-convert-io-markers" data-sym="CONVERT-IO-MARKERS" title="(defun convert-io-markers (io-markers)
  (cond ((member-eq io-markers &#39;(nil :all)) io-markers)
        ((and io-markers (atom io-markers))
         (convert-io-markers-lst (list io-markers) nil))
        (t (convert-io-markers-lst io-markers nil))))">convert-io-markers</a> ,STOP-MARKERS)
    state))</pre>
  </div>

<div class="form-block function" id="def-set-raw-proof-format-fn" data-defines="SET-RAW-PROOF-FORMAT-FN" data-references="RAW-PROOF-FORMAT,F-PUT-GLOBAL,T,QUOTE,MEMBER-EQ,XARGS,DECLARE,STATE,VAL,DEFUN" data-used-by="SET-RAW-PROOF-FORMAT" data-part-name="SET-RAW-PROOF-FORMAT-FN" data-part-args="STATE,VAL" data-part-declare="T,QUOTE,VAL,MEMBER-EQ,XARGS,DECLARE" data-part-body="STATE,VAL,RAW-PROOF-FORMAT,QUOTE,F-PUT-GLOBAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-RAW-PROOF-FORMAT-FN">set-raw-proof-format-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-raw-proof-format-fn" data-sym="SET-RAW-PROOF-FORMAT-FN" title="(defun set-raw-proof-format-fn (val state)
  (declare (xargs :guard (member-eq val (quote (t nil :clause)))))
  (f-put-global &#39;raw-proof-format val state))">set-raw-proof-format-fn</a>
  (val state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> val '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:clause</span>))))
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'raw-proof-format val state))</pre>
  </div>

<div class="form-block macro" id="def-set-raw-proof-format" data-defines="SET-RAW-PROOF-FORMAT" data-references="STATE,SET-RAW-PROOF-FORMAT-FN,QUASIQUOTE,VAL,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-RAW-PROOF-FORMAT">set-raw-proof-format</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-raw-proof-format" data-sym="SET-RAW-PROOF-FORMAT" title="(defmacro set-raw-proof-format (val) `(set-raw-proof-format-fn ,val state))">set-raw-proof-format</a>
  (val)
  `(<a class="sym-link local-def" href="#def-set-raw-proof-format-fn" data-sym="SET-RAW-PROOF-FORMAT-FN" title="(defun set-raw-proof-format-fn (val state)
  (declare (xargs :guard (member-eq val (quote (t nil :clause)))))
  (f-put-global &#39;raw-proof-format val state))">set-raw-proof-format-fn</a> ,VAL state))</pre>
  </div>

<div class="form-block macro" id="def-set-raw-warning-format" data-defines="SET-RAW-WARNING-FORMAT" data-references="STATE,RAW-WARNING-FORMAT,F-PUT-GLOBAL,QUASIQUOTE,LIST,ATOM,IF,LET,T,QUOTE,MEMBER-EQUAL,XARGS,DECLARE,FLG,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-RAW-WARNING-FORMAT">set-raw-warning-format</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-raw-warning-format" data-sym="SET-RAW-WARNING-FORMAT" title="(defmacro set-raw-warning-format (flg)
  (declare
   (xargs :guard (member-equal flg (quote (t (quote t) nil (quote nil))))))
  (let ((flg
         (if (atom flg)
...">set-raw-warning-format</a>
  (flg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> flg '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil 'nil))))
  (let ((flg (if (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> flg)
         (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote flg)
         flg)))
    `(<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'raw-warning-format ,FLG state)))</pre>
  </div>

<div class="form-block macro" id="def-with-standard-co-and-proofs-co-to-file" data-defines="WITH-STANDARD-CO-AND-PROOFS-CO-TO-FILE" data-references="VALUE,SILENT-ERROR,CLOSE-OUTPUT-CHANNEL,CHECK-VARS-NOT-FREE,SET-PROOFS-CO-STATE,PROOFS-CO,SET-STANDARD-CO-STATE,STANDARD-CO,STATE-GLOBAL-LET*,VAL,ERP,NEWLINE,PRINC$,PPROGN,T,QUOTE,SOFT,ER,NULL,COND,OPEN-OUTPUT-CHANNEL,STATE,WOF-CHAN,MV-LET,QUASIQUOTE,FORM,FILENAME,DEFMACRO" data-used-by="WOF" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-STANDARD-CO-AND-PROOFS-CO-TO-FILE">with-standard-co-and-proofs-co-to-file</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-standard-co-and-proofs-co-to-file" data-sym="WITH-STANDARD-CO-AND-PROOFS-CO-TO-FILE" title="(defmacro with-standard-co-and-proofs-co-to-file (filename form)
  `(mv-let (wof-chan state) (open-output-channel ,filename :character state)
           (cond
            ((null wof-chan)
             (er soft &#39;with-standard-co-and-proofs-co-to-file
...">with-standard-co-and-proofs-co-to-file</a>
  (filename form)
  `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (wof-chan state)
    (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> ,FILENAME <span class="keyword">:character</span> state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wof-chan) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          '<a class="sym-link local-def" href="#def-with-standard-co-and-proofs-co-to-file" data-sym="WITH-STANDARD-CO-AND-PROOFS-CO-TO-FILE" title="(defmacro with-standard-co-and-proofs-co-to-file (filename form)
  `(mv-let (wof-chan state) (open-output-channel ,filename :character state)
           (cond
            ((null wof-chan)
             (er soft &#39;with-standard-co-and-proofs-co-to-file
...">with-standard-co-and-proofs-co-to-file</a>
          <span class="string">"Unable to open file ~x0 for output."</span>
          ,FILENAME))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-princ_24" data-sym="PRINC$">princ$</a> <span class="string">"-*- Mode: auto-revert -*-"</span> wof-chan state)
          (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> wof-chan state)
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
            (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> wof-chan set-standard-co-state) (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> wof-chan set-proofs-co-state))
              (<a class="sym-link system" href="axioms.html#def-check-vars-not-free" data-sym="CHECK-VARS-NOT-FREE">check-vars-not-free</a> (wof-chan) ,FORM))
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> wof-chan state)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (silent-error state)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))))))))))</pre>
  </div>

<div class="form-block macro" id="def-wof" data-defines="WOF" data-references="WITH-STANDARD-CO-AND-PROOFS-CO-TO-FILE,QUASIQUOTE,FORM,FILENAME,DEFMACRO" data-used-by="PSOF" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WOF">wof</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-wof" data-sym="WOF" title="(defmacro wof (filename form)
  `(with-standard-co-and-proofs-co-to-file ,filename ,form))">wof</a>
  (filename form)
  `(<a class="sym-link local-def" href="#def-with-standard-co-and-proofs-co-to-file" data-sym="WITH-STANDARD-CO-AND-PROOFS-CO-TO-FILE" title="(defmacro with-standard-co-and-proofs-co-to-file (filename form)
  `(mv-let (wof-chan state) (open-output-channel ,filename :character state)
           (cond
            ((null wof-chan)
             (er soft &#39;with-standard-co-and-proofs-co-to-file
...">with-standard-co-and-proofs-co-to-file</a> ,FILENAME ,FORM))</pre>
  </div>

<div class="form-block macro" id="def-psof" data-defines="PSOF" data-references="PSO,WOF,T,COND,QUASIQUOTE,CADR,CAR,EQ,CDDR,NULL,CDR,CONSP,AND,STRINGP,OR,XARGS,DECLARE,STOP-MARKERS,QUOTE,IO-MARKERS,&OPTIONAL,FILENAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PSOF">psof</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-psof" data-sym="PSOF" title="(defmacro psof (filename &amp;optional (io-markers &#39;:all) (stop-markers &#39;nil))
  (declare
   (xargs :guard
    (or (stringp filename)
        (and (consp filename) (consp (cdr filename)) (null (cddr filename))
...">psof</a>
  (filename &amp;optional (io-markers '<span class="keyword">:all</span>) (stop-markers 'nil))
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (stringp filename)
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp filename)
          (consp (cdr filename))
          (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> filename))
          (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car filename) 'quote)
          (stringp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> filename))))))
  `(<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-wof" data-sym="WOF" title="(defmacro wof (filename form)
  `(with-standard-co-and-proofs-co-to-file ,filename ,form))">wof</a> ,(IF (CONSP FILENAME)
     (CADR FILENAME)
     FILENAME)
        (<a class="sym-link local-def" href="#def-pso" data-sym="PSO" title="(defmacro pso (&amp;optional (io-markers &#39;:all) stop-markers)
  `(print-saved-output &#39;(proof-tree) nil (convert-io-markers ,io-markers)
                       (convert-io-markers ,stop-markers) state))">pso</a> ,IO-MARKERS ,STOP-MARKERS)))))</pre>
  </div>

<div class="form-block function" id="def-set-ld-evisc-tuple" data-defines="SET-LD-EVISC-TUPLE" data-references="SET-EVISC-TUPLE,STATE,VAL,DEFUN" data-part-name="SET-LD-EVISC-TUPLE" data-part-args="STATE,VAL" data-part-body="VAL,SET-EVISC-TUPLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-LD-EVISC-TUPLE">set-ld-evisc-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-ld-evisc-tuple" data-sym="SET-LD-EVISC-TUPLE" title="(defun set-ld-evisc-tuple (val state)
  (set-evisc-tuple val :sites :ld :iprint :same))">set-ld-evisc-tuple</a>
  (val state)
  (set-evisc-tuple val <span class="keyword">:sites</span> <span class="keyword">:ld</span> <span class="keyword">:iprint</span> <span class="keyword">:same</span>))</pre>
  </div>

<div class="form-block other" id="form-160" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defun-for-state" data-sym="DEFUN-FOR-STATE">defun-for-state</a> <a class="sym-link local-def" href="#def-set-ld-evisc-tuple" data-sym="SET-LD-EVISC-TUPLE" title="(defun set-ld-evisc-tuple (val state)
  (set-evisc-tuple val :sites :ld :iprint :same))">set-ld-evisc-tuple</a> (val state))</pre>
  </div>

<div class="form-block function" id="def-set-abbrev-evisc-tuple" data-defines="SET-ABBREV-EVISC-TUPLE" data-references="SET-EVISC-TUPLE,STATE,VAL,DEFUN" data-part-name="SET-ABBREV-EVISC-TUPLE" data-part-args="STATE,VAL" data-part-body="VAL,SET-EVISC-TUPLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-ABBREV-EVISC-TUPLE">set-abbrev-evisc-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-abbrev-evisc-tuple" data-sym="SET-ABBREV-EVISC-TUPLE" title="(defun set-abbrev-evisc-tuple (val state)
  (set-evisc-tuple val :sites :abbrev :iprint :same))">set-abbrev-evisc-tuple</a>
  (val state)
  (set-evisc-tuple val <span class="keyword">:sites</span> <span class="keyword">:abbrev</span> <span class="keyword">:iprint</span> <span class="keyword">:same</span>))</pre>
  </div>

<div class="form-block other" id="form-162" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defun-for-state" data-sym="DEFUN-FOR-STATE">defun-for-state</a> <a class="sym-link local-def" href="#def-set-abbrev-evisc-tuple" data-sym="SET-ABBREV-EVISC-TUPLE" title="(defun set-abbrev-evisc-tuple (val state)
  (set-evisc-tuple val :sites :abbrev :iprint :same))">set-abbrev-evisc-tuple</a> (val state))</pre>
  </div>

<div class="form-block function" id="def-set-gag-mode-evisc-tuple" data-defines="SET-GAG-MODE-EVISC-TUPLE" data-references="SET-EVISC-TUPLE,STATE,VAL,DEFUN" data-part-name="SET-GAG-MODE-EVISC-TUPLE" data-part-args="STATE,VAL" data-part-body="VAL,SET-EVISC-TUPLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-GAG-MODE-EVISC-TUPLE">set-gag-mode-evisc-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-gag-mode-evisc-tuple" data-sym="SET-GAG-MODE-EVISC-TUPLE" title="(defun set-gag-mode-evisc-tuple (val state)
  (set-evisc-tuple val :sites :gag-mode :iprint :same))">set-gag-mode-evisc-tuple</a>
  (val state)
  (set-evisc-tuple val <span class="keyword">:sites</span> <span class="keyword">:gag-mode</span> <span class="keyword">:iprint</span> <span class="keyword">:same</span>))</pre>
  </div>

<div class="form-block other" id="form-164" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defun-for-state" data-sym="DEFUN-FOR-STATE">defun-for-state</a> <a class="sym-link local-def" href="#def-set-gag-mode-evisc-tuple" data-sym="SET-GAG-MODE-EVISC-TUPLE" title="(defun set-gag-mode-evisc-tuple (val state)
  (set-evisc-tuple val :sites :gag-mode :iprint :same))">set-gag-mode-evisc-tuple</a> (val state))</pre>
  </div>

<div class="form-block function" id="def-set-term-evisc-tuple" data-defines="SET-TERM-EVISC-TUPLE" data-references="SET-EVISC-TUPLE,STATE,VAL,DEFUN" data-part-name="SET-TERM-EVISC-TUPLE" data-part-args="STATE,VAL" data-part-body="VAL,SET-EVISC-TUPLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-TERM-EVISC-TUPLE">set-term-evisc-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-term-evisc-tuple" data-sym="SET-TERM-EVISC-TUPLE" title="(defun set-term-evisc-tuple (val state)
  (set-evisc-tuple val :sites :term :iprint :same))">set-term-evisc-tuple</a>
  (val state)
  (set-evisc-tuple val <span class="keyword">:sites</span> <span class="keyword">:term</span> <span class="keyword">:iprint</span> <span class="keyword">:same</span>))</pre>
  </div>

<div class="form-block other" id="form-166" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defun-for-state" data-sym="DEFUN-FOR-STATE">defun-for-state</a> <a class="sym-link local-def" href="#def-set-term-evisc-tuple" data-sym="SET-TERM-EVISC-TUPLE" title="(defun set-term-evisc-tuple (val state)
  (set-evisc-tuple val :sites :term :iprint :same))">set-term-evisc-tuple</a> (val state))</pre>
  </div>

<div class="form-block function" id="def-set-brr-evisc-tuple" data-defines="SET-BRR-EVISC-TUPLE" data-references="SET-EVISC-TUPLE,STATE,VAL,DEFUN" data-part-name="SET-BRR-EVISC-TUPLE" data-part-args="STATE,VAL" data-part-body="VAL,SET-EVISC-TUPLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-BRR-EVISC-TUPLE">set-brr-evisc-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-brr-evisc-tuple" data-sym="SET-BRR-EVISC-TUPLE" title="(defun set-brr-evisc-tuple (val state)
  (set-evisc-tuple val :sites :brr :iprint :same))">set-brr-evisc-tuple</a>
  (val state)
  (set-evisc-tuple val <span class="keyword">:sites</span> <span class="keyword">:brr</span> <span class="keyword">:iprint</span> <span class="keyword">:same</span>))</pre>
  </div>

<div class="form-block function" id="def-without-evisc-fn" data-defines="WITHOUT-EVISC-FN" data-references="VALUE,LIST,LD,ER-PROGN,SET-TERM-EVISC-TUPLE-STATE,TERM-EVISC-TUPLE,SET-GAG-MODE-EVISC-TUPLE-STATE,GAG-MODE-EVISC-TUPLE,SET-ABBREV-EVISC-TUPLE-STATE,ABBREV-EVISC-TUPLE,STATE-GLOBAL-LET*,STATE,FORM,DEFUN" data-used-by="WITHOUT-EVISC" data-part-name="WITHOUT-EVISC-FN" data-part-args="STATE,FORM" data-part-body="VALUE,FORM,LIST,LD,ER-PROGN,SET-TERM-EVISC-TUPLE-STATE,TERM-EVISC-TUPLE,SET-GAG-MODE-EVISC-TUPLE-STATE,GAG-MODE-EVISC-TUPLE,SET-ABBREV-EVISC-TUPLE-STATE,ABBREV-EVISC-TUPLE,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITHOUT-EVISC-FN">without-evisc-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-without-evisc-fn" data-sym="WITHOUT-EVISC-FN" title="(defun without-evisc-fn (form state)
  (state-global-let*
   ((abbrev-evisc-tuple nil set-abbrev-evisc-tuple-state)
    (gag-mode-evisc-tuple nil set-gag-mode-evisc-tuple-state)
    (term-evisc-tuple nil set-term-evisc-tuple-state))
...">without-evisc-fn</a>
  (form state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="basis-a.html#def-abbrev-evisc-tuple" data-sym="ABBREV-EVISC-TUPLE">abbrev-evisc-tuple</a> nil set-abbrev-evisc-tuple-state) (<a class="sym-link system" href="basis-a.html#def-gag-mode-evisc-tuple" data-sym="GAG-MODE-EVISC-TUPLE">gag-mode-evisc-tuple</a> nil set-gag-mode-evisc-tuple-state)
      (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil set-term-evisc-tuple-state))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-ld" data-sym="LD" title="(defmacro ld
          (standard-oi
           &amp;key dir (standard-co &#39;same standard-cop)
           (proofs-co &#39;same proofs-cop)
           (current-package &#39;same current-packagep)
...">ld</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> form)
        <span class="keyword">:ld-verbose</span> nil
        <span class="keyword">:ld-prompt</span> nil
        <span class="keyword">:ld-evisc-tuple</span> nil
        <span class="keyword">:ld-user-stobjs-modified-warning</span> nil
        <span class="keyword">:ld-error-action</span> <span class="keyword">:error</span>)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))))</pre>
  </div>

<div class="form-block macro" id="def-without-evisc" data-defines="WITHOUT-EVISC" data-references="STATE,QUOTE,WITHOUT-EVISC-FN,QUASIQUOTE,FORM,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITHOUT-EVISC">without-evisc</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-without-evisc" data-sym="WITHOUT-EVISC" title="(defmacro without-evisc (form) `(without-evisc-fn &#39;,form state))">without-evisc</a>
  (form)
  `(<a class="sym-link local-def" href="#def-without-evisc-fn" data-sym="WITHOUT-EVISC-FN" title="(defun without-evisc-fn (form state)
  (state-global-let*
   ((abbrev-evisc-tuple nil set-abbrev-evisc-tuple-state)
    (gag-mode-evisc-tuple nil set-gag-mode-evisc-tuple-state)
    (term-evisc-tuple nil set-term-evisc-tuple-state))
...">without-evisc-fn</a> ',FORM state))</pre>
  </div>

<div class="form-block function" id="def-keyword-value-string-listp" data-defines="KEYWORD-VALUE-STRING-LISTP" data-references="CDDR,CADR,STRINGP,CDR,CONSP,CAR,KEYWORDP,AND,NULL,ATOM,COND,T,XARGS,DECLARE,L,DEFUN" data-part-name="KEYWORD-VALUE-STRING-LISTP" data-part-args="L" data-part-declare="T,XARGS,DECLARE" data-part-body="CDDR,KEYWORD-VALUE-STRING-LISTP,CADR,STRINGP,CDR,CONSP,CAR,KEYWORDP,AND,T,NULL,L,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="KEYWORD-VALUE-STRING-LISTP">keyword-value-string-listp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-keyword-value-string-listp" data-sym="KEYWORD-VALUE-STRING-LISTP" title="(defun keyword-value-string-listp (l)
  (declare (xargs :guard t))
  (cond ((atom l) (null l))
        (t
         (and (keywordp (car l)) (consp (cdr l)) (stringp (cadr l))">keyword-value-string-listp</a>
  (l)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> l) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> l))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car l))
        (consp (cdr l))
        (stringp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> l))
        (<a class="sym-link local-def" href="#def-keyword-value-string-listp" data-sym="KEYWORD-VALUE-STRING-LISTP" title="(defun keyword-value-string-listp (l)
  (declare (xargs :guard t))
  (cond ((atom l) (null l))
        (t
         (and (keywordp (car l)) (consp (cdr l)) (stringp (cadr l))">keyword-value-string-listp</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> l))))))</pre>
  </div>

<div class="form-block function" id="def-project-dir-string-p" data-defines="PROJECT-DIR-STRING-P" data-references="<,Q2,Q,K,P,LET*,NULL,1+,*NEWLINE-STRING*,SEARCH,P0,CHAR,EQL,T,=,>=,NOT,OR,MBE,COND,SCAN-PAST-WHITESPACE,LET,LENGTH,<=,NATP,STRINGP,AND,-,NFIX,XARGS,UNSIGNED-BYTE,TYPE,DECLARE,BOUND,POS,S,DEFUN" data-used-by="PROJECT-DIR-FILE-P" data-part-name="PROJECT-DIR-STRING-P" data-part-args="BOUND,POS,S" data-part-declare="LENGTH,<=,NATP,S,STRINGP,AND,POS,-,NFIX,XARGS,BOUND,UNSIGNED-BYTE,TYPE,DECLARE" data-part-body="<,AND,Q2,Q,K,P,LET*,PROJECT-DIR-STRING-P,NULL,1+,*NEWLINE-STRING*,SEARCH,P0,CHAR,EQL,T,=,>=,NATP,NOT,OR,MBE,COND,BOUND,S,SCAN-PAST-WHITESPACE,POS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROJECT-DIR-STRING-P">project-dir-string-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-project-dir-string-p" data-sym="PROJECT-DIR-STRING-P" title="(defun project-dir-string-p (s pos bound)
  (declare (type (unsigned-byte 60) bound)
           (xargs :measure (nfix (- bound pos)) :guard
            (and (stringp s) (natp pos) (natp bound) (&lt;= pos bound)
                 (&lt;= bound (length s)))))
...">project-dir-string-p</a>
  (s pos bound)
  (declare (type (unsigned-byte <span class="number">60</span>) bound)
    (xargs <span class="keyword">:measure</span> (<a class="sym-link system" href="axioms.html#def-nfix" data-sym="NFIX">nfix</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> bound pos))
      <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp s)
        (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> pos)
        (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> bound)
        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> pos bound)
        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> bound (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> s)))))
  (let ((pos (<a class="sym-link system" href="basis-a.html#def-scan-past-whitespace" data-sym="SCAN-PAST-WHITESPACE">scan-past-whitespace</a> s pos bound)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> pos)) (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> pos bound))
         <span class="keyword">:exec</span> (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> pos bound)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> s pos) #\;) (let ((p0 (<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> <a class="sym-link system" href="basis-a.html#def-_2Anewline-string_2A" data-sym="*NEWLINE-STRING*">*newline-string*</a> s <span class="keyword">:start2</span> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> pos) <span class="keyword">:end2</span> bound)))
          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> p0) (<a class="sym-link local-def" href="#def-project-dir-string-p" data-sym="PROJECT-DIR-STRING-P" title="(defun project-dir-string-p (s pos bound)
  (declare (type (unsigned-byte 60) bound)
           (xargs :measure (nfix (- bound pos)) :guard
            (and (stringp s) (natp pos) (natp bound) (&lt;= pos bound)
                 (&lt;= bound (length s)))))
...">project-dir-string-p</a> s p0 bound))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((p0 (<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> <a class="sym-link system" href="basis-a.html#def-_2Anewline-string_2A" data-sym="*NEWLINE-STRING*">*newline-string*</a> s <span class="keyword">:start2</span> pos <span class="keyword">:end2</span> bound)) (p (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> p0 bound))
            (k (<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> <span class="string">":"</span> s <span class="keyword">:start2</span> pos <span class="keyword">:end2</span> p))
            (q (<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> <span class="string">"&quot;"</span> s <span class="keyword">:start2</span> pos <span class="keyword">:end2</span> p))
            (q2 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> q (<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> <span class="string">"&quot;"</span> s <span class="keyword">:start2</span> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> q) <span class="keyword">:end2</span> p))))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> k
            q2
            (&lt; k q)
            (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> p (<a class="sym-link system" href="basis-a.html#def-scan-past-whitespace" data-sym="SCAN-PAST-WHITESPACE">scan-past-whitespace</a> s (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> q2) p))
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> <span class="string">":"</span> s <span class="keyword">:start2</span> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> q2) <span class="keyword">:end2</span> p))
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> <span class="string">"&quot;"</span> s <span class="keyword">:start2</span> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> q2) <span class="keyword">:end2</span> p))
            (<a class="sym-link local-def" href="#def-project-dir-string-p" data-sym="PROJECT-DIR-STRING-P" title="(defun project-dir-string-p (s pos bound)
  (declare (type (unsigned-byte 60) bound)
           (xargs :measure (nfix (- bound pos)) :guard
            (and (stringp s) (natp pos) (natp bound) (&lt;= pos bound)
                 (&lt;= bound (length s)))))
...">project-dir-string-p</a> s p bound)))))))</pre>
  </div>

<div class="form-block function" id="def-project-dir-file-p" data-defines="PROJECT-DIR-FILE-P" data-references="PROJECT-DIR-STRING-P,*FIXNAT-BITS*,UNSIGNED-BYTE-P,AND,LENGTH,LEN,READ-FILE-INTO-STRING,S,LET*,STRINGP,XARGS,DECLARE,STATE,FILENAME,DEFUN" data-part-name="PROJECT-DIR-FILE-P" data-part-args="STATE,FILENAME" data-part-declare="FILENAME,STRINGP,STATE,XARGS,DECLARE" data-part-body="PROJECT-DIR-STRING-P,*FIXNAT-BITS*,UNSIGNED-BYTE-P,STRINGP,AND,LENGTH,LEN,FILENAME,READ-FILE-INTO-STRING,S,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROJECT-DIR-FILE-P">project-dir-file-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-project-dir-file-p" data-sym="PROJECT-DIR-FILE-P" title="(defun project-dir-file-p (filename state)
  (declare (xargs :stobjs state :guard (stringp filename)))
  (let* ((s (read-file-into-string filename)) (len (length s)))
    (and (stringp s) (unsigned-byte-p *fixnat-bits* len)
         (project-dir-string-p s 0 len))))">project-dir-file-p</a>
  (filename state)
  (declare (xargs <span class="keyword">:stobjs</span> state <span class="keyword">:guard</span> (stringp filename)))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((s (<a class="sym-link system" href="axioms.html#def-read-file-into-string" data-sym="READ-FILE-INTO-STRING">read-file-into-string</a> filename)) (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> s)))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp s)
      (<a class="sym-link system" href="axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> <a class="sym-link system" href="axioms.html#def-_2Afixnat-bits_2A" data-sym="*FIXNAT-BITS*">*fixnat-bits*</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
      (<a class="sym-link local-def" href="#def-project-dir-string-p" data-sym="PROJECT-DIR-STRING-P" title="(defun project-dir-string-p (s pos bound)
  (declare (type (unsigned-byte 60) bound)
           (xargs :measure (nfix (- bound pos)) :guard
            (and (stringp s) (natp pos) (natp bound) (&lt;= pos bound)
                 (&lt;= bound (length s)))))
...">project-dir-string-p</a> s <span class="number">0</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>))))</pre>
  </div>

<div class="form-block function" id="def-merge-length_3E_3D-cdr" data-defines="MERGE-LENGTH>=-CDR" data-references="T,CDR,CAR,CONS,CDAR,>=,ENDP,COND,LENGTH,+,ALISTP,AND,XARGS,DECLARE,L2,L1,DEFUN" data-used-by="MERGE-SORT-LENGTH>=-CDR" data-part-name="MERGE-LENGTH>=-CDR" data-part-args="L2,L1" data-part-declare="LENGTH,+,L2,L1,ALISTP,AND,XARGS,DECLARE" data-part-body="T,CDR,MERGE-LENGTH>=-CDR,CAR,CONS,CDAR,LENGTH,>=,L2,L1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MERGE-LENGTH>=-CDR">merge-length&gt;=-cdr</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-merge-length_3E_3D-cdr" data-sym="MERGE-LENGTH&gt;=-CDR" title="(defun merge-length&gt;=-cdr (l1 l2)
  (declare
   (xargs :guard (and (alistp l1) (alistp l2)) :measure
    (+ (length l1) (length l2))))
  (cond ((endp l1) l2) ((endp l2) l1)
...">merge-length&gt;=-cdr</a>
  (l1 l2)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> l1) (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> l2))
      <span class="keyword">:measure</span> (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> l1) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> l2))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> l1) l2)
    ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> l2) l1)
    ((<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> l1)) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> l2))) (cons (car l1) (<a class="sym-link local-def" href="#def-merge-length_3E_3D-cdr" data-sym="MERGE-LENGTH&gt;=-CDR" title="(defun merge-length&gt;=-cdr (l1 l2)
  (declare
   (xargs :guard (and (alistp l1) (alistp l2)) :measure
    (+ (length l1) (length l2))))
  (cond ((endp l1) l2) ((endp l2) l1)
...">merge-length&gt;=-cdr</a> (cdr l1) l2)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car l2) (<a class="sym-link local-def" href="#def-merge-length_3E_3D-cdr" data-sym="MERGE-LENGTH&gt;=-CDR" title="(defun merge-length&gt;=-cdr (l1 l2)
  (declare
   (xargs :guard (and (alistp l1) (alistp l2)) :measure
    (+ (length l1) (length l2))))
  (cond ((endp l1) l2) ((endp l2) l1)
...">merge-length&gt;=-cdr</a> l1 (cdr l2))))))</pre>
  </div>

<div class="form-block function" id="def-merge-sort-length_3E_3D-cdr" data-defines="MERGE-SORT-LENGTH>=-CDR" data-references="ODDS,EVENS,MERGE-LENGTH>=-CDR,T,CDR,ENDP,COND,LENGTH,ALISTP,XARGS,DECLARE,L,DEFUN" data-part-name="MERGE-SORT-LENGTH>=-CDR" data-part-args="L" data-part-declare="LENGTH,L,ALISTP,XARGS,DECLARE" data-part-body="ODDS,EVENS,MERGE-SORT-LENGTH>=-CDR,MERGE-LENGTH>=-CDR,T,L,CDR,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MERGE-SORT-LENGTH>=-CDR">merge-sort-length&gt;=-cdr</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-merge-sort-length_3E_3D-cdr" data-sym="MERGE-SORT-LENGTH&gt;=-CDR" title="(defun merge-sort-length&gt;=-cdr (l)
  (declare (xargs :guard (alistp l) :measure (length l) :verify-guards nil))
  (cond ((endp (cdr l)) l)
        (t
         (merge-length&gt;=-cdr (merge-sort-length&gt;=-cdr (evens l))">merge-sort-length&gt;=-cdr</a>
  (l)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> l)
      <span class="keyword">:measure</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> l)
      <span class="keyword">:verify-guards</span> nil))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr l)) l)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-merge-length_3E_3D-cdr" data-sym="MERGE-LENGTH&gt;=-CDR" title="(defun merge-length&gt;=-cdr (l1 l2)
  (declare
   (xargs :guard (and (alistp l1) (alistp l2)) :measure
    (+ (length l1) (length l2))))
  (cond ((endp l1) l2) ((endp l2) l1)
...">merge-length&gt;=-cdr</a> (<a class="sym-link local-def" href="#def-merge-sort-length_3E_3D-cdr" data-sym="MERGE-SORT-LENGTH&gt;=-CDR" title="(defun merge-sort-length&gt;=-cdr (l)
  (declare (xargs :guard (alistp l) :measure (length l) :verify-guards nil))
  (cond ((endp (cdr l)) l)
        (t
         (merge-length&gt;=-cdr (merge-sort-length&gt;=-cdr (evens l))">merge-sort-length&gt;=-cdr</a> (<a class="sym-link system" href="axioms.html#def-evens" data-sym="EVENS">evens</a> l))
        (<a class="sym-link local-def" href="#def-merge-sort-length_3E_3D-cdr" data-sym="MERGE-SORT-LENGTH&gt;=-CDR" title="(defun merge-sort-length&gt;=-cdr (l)
  (declare (xargs :guard (alistp l) :measure (length l) :verify-guards nil))
  (cond ((endp (cdr l)) l)
        (t
         (merge-length&gt;=-cdr (merge-sort-length&gt;=-cdr (evens l))">merge-sort-length&gt;=-cdr</a> (<a class="sym-link system" href="axioms.html#def-odds" data-sym="ODDS">odds</a> l))))))</pre>
  </div>

<div class="form-block function" id="def-conflicting-symbol-alists" data-defines="CONFLICTING-SYMBOL-ALISTS" data-references="CAR,LIST*,CDAR,CDR,EQUAL,NOT,CAAR,ASSOC-EQ,PAIR,LET,T,ENDP,COND,SYMBOL-ALISTP,AND,XARGS,DECLARE,A2,A1,DEFUN" data-part-name="CONFLICTING-SYMBOL-ALISTS" data-part-args="A2,A1" data-part-declare="A2,A1,SYMBOL-ALISTP,AND,XARGS,DECLARE" data-part-body="CONFLICTING-SYMBOL-ALISTS,CAR,LIST*,CDAR,CDR,EQUAL,NOT,AND,A2,CAAR,ASSOC-EQ,PAIR,LET,T,A1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONFLICTING-SYMBOL-ALISTS">conflicting-symbol-alists</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-conflicting-symbol-alists" data-sym="CONFLICTING-SYMBOL-ALISTS" title="(defun conflicting-symbol-alists (a1 a2)
  (declare (xargs :guard (and (symbol-alistp a1) (symbol-alistp a2))))
  (cond ((endp a1) nil)
        (t
         (let ((pair (assoc-eq (caar a1) a2)))
...">conflicting-symbol-alists</a>
  (a1 a2)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> a1) (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> a2))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> a1) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> a1) a2)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> pair (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (cdr pair) (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> a1)))) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car pair) (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> a1) (cdr pair)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-conflicting-symbol-alists" data-sym="CONFLICTING-SYMBOL-ALISTS" title="(defun conflicting-symbol-alists (a1 a2)
  (declare (xargs :guard (and (symbol-alistp a1) (symbol-alistp a2))))
  (cond ((endp a1) nil)
        (t
         (let ((pair (assoc-eq (caar a1) a2)))
...">conflicting-symbol-alists</a> (cdr a1) a2)))))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>