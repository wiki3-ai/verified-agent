<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>apply-raw - ACL2 Book</title>
  <meta property="name" content="apply-raw">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">apply-raw</h1>
    <div class="path"><a href="apply-raw.lisp" class="source-link">apply-raw</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block function" id="def-query-badge-userfn-structure" data-defines="QUERY-BADGE-USERFN-STRUCTURE" data-references="IF,LOGICP,*AOKP*,NULL,OR,AND,NEEDS-WARRANT,LET,GET-BADGE-AND-WARRANTP,WARRANTP,BADGE,MV-LET,T,FUNCTION-SYMBOLP,MSG,MV,SYMBOLP,NOT,COND,WRLD,FN,DEFUN" data-part-name="QUERY-BADGE-USERFN-STRUCTURE" data-part-args="WRLD,FN" data-part-body="IF,LOGICP,*AOKP*,NULL,OR,AND,NEEDS-WARRANT,LET,GET-BADGE-AND-WARRANTP,WARRANTP,BADGE,MV-LET,T,WRLD,FUNCTION-SYMBOLP,MSG,MV,FN,SYMBOLP,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="QUERY-BADGE-USERFN-STRUCTURE">query-badge-userfn-structure</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-query-badge-userfn-structure" data-sym="QUERY-BADGE-USERFN-STRUCTURE" title="(defun query-badge-userfn-structure (fn wrld)
  (cond ((not (symbolp fn)) (mv (msg &quot;~x0 is not a symbol&quot; fn) nil nil))
        ((not (function-symbolp fn wrld))
         (mv (msg &quot;~x0 is not a known function symbol&quot; fn) nil nil))
        (t
...">query-badge-userfn-structure</a>
  (fn wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp fn)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0 is not a symbol"</span> fn) nil nil))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> fn wrld)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0 is not a known function symbol"</span> fn) nil nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (badge warrantp)
        (get-badge-and-warrantp fn wrld)
        (let ((needs-warrant (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> warrantp) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *aokp*) (<a class="sym-link system" href="axioms.html#def-logicp" data-sym="LOGICP">logicp</a> fn wrld)))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> badge) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0 has not been ~s1"</span>
                  fn
                  (if needs-warrant
                    <span class="string">"warranted"</span>
                    <span class="string">"badged"</span>))
                nil
                nil))
            (needs-warrant (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0 has not been warranted, and its badge is insufficient ~
                    because it is in :logic mode"</span>
                  fn)
                badge
                warrantp))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil badge warrantp))))))))</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (push 'doppelganger-badge-userfn *defun-overrides*)
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> doppelganger-badge-userfn
    (fn)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *aokp*) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *warrant-reqs*)) (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> 'ev-fncall-null-body-er
            nil
            'doppelganger-badge-userfn
            (replace-live-stobjs-in-list (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn)))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (bad-fn-msg badge warrantp)
          (<a class="sym-link local-def" href="#def-query-badge-userfn-structure" data-sym="QUERY-BADGE-USERFN-STRUCTURE" title="(defun query-badge-userfn-structure (fn wrld)
  (cond ((not (symbolp fn)) (mv (msg &quot;~x0 is not a symbol&quot; fn) nil nil))
        ((not (function-symbolp fn wrld))
         (mv (msg &quot;~x0 is not a known function symbol&quot; fn) nil nil))
        (t
...">query-badge-userfn-structure</a> fn (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> bad-fn-msg) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> warrantp)
                (<a class="sym-link local-def" href="#def-maybe-extend-warrant-reqs" data-sym="MAYBE-EXTEND-WARRANT-REQS" title="(defun maybe-extend-warrant-reqs (fn args caller)
  (let ((warrant-reqs *warrant-reqs*))
    (cond ((null warrant-reqs) nil)
          ((eq t warrant-reqs) (setq *warrant-reqs* (list fn)))
          ((eq :nil! warrant-reqs) (setq *warrant-reqs* fn)
...">maybe-extend-warrant-reqs</a> fn nil 'badge-userfn))
              badge)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> 'ev-fncall-null-body-er
                  nil
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The value of ~x0 is not specified on ~x1 because ~
                          ~@2.~@3"</span>
                    'badge-userfn
                    fn
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-fn-msg bad-fn-msg)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0 has not been warranted"</span> fn)))
                    (if *inside-do$*
                      (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  This error has occurred in the scope of ~
                                   a call of ~x0, which generally comes from ~
                                   an expression of the form (loop$ with ~
                                   ...).  See :DOC loop$ and :DOC apply$."</span>
                        'do$)
                      <span class="string">""</span>))
                  (replace-live-stobjs-in-list (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn))))))))))
  (defun-*1* doppelganger-badge-userfn
    (fn)
    (doppelganger-badge-userfn fn)))</pre>
  </div>

<div class="form-block function" id="def-concrete-check-apply_24-hyp-tamep-hyp" data-defines="CONCRETE-CHECK-APPLY$-HYP-TAMEP-HYP" data-references="CDR,AND,CAR,EQ,ENDP,COND,EXECUTABLE-TAMEP-FUNCTIONP,EXECUTABLE-TAMEP,VALUES,T,FUNCTION,FTYPE,DECLARE,WRLD,ARGS,ILKS,DEFUN" data-part-name="CONCRETE-CHECK-APPLY$-HYP-TAMEP-HYP" data-part-args="WRLD,ARGS,ILKS" data-part-declare="EXECUTABLE-TAMEP-FUNCTIONP,EXECUTABLE-TAMEP,VALUES,T,FUNCTION,FTYPE,DECLARE" data-part-body="EXECUTABLE-TAMEP,CDR,CONCRETE-CHECK-APPLY$-HYP-TAMEP-HYP,WRLD,ARGS,EXECUTABLE-TAMEP-FUNCTIONP,AND,CAR,EQ,T,ILKS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONCRETE-CHECK-APPLY$-HYP-TAMEP-HYP">concrete-check-apply$-hyp-tamep-hyp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-concrete-check-apply_24-hyp-tamep-hyp" data-sym="CONCRETE-CHECK-APPLY$-HYP-TAMEP-HYP" title="(defun concrete-check-apply$-hyp-tamep-hyp (ilks args wrld)
  (declare
   (ftype (function (t t) (values t)) executable-tamep
    executable-tamep-functionp))
  (cond ((endp ilks) t)
...">concrete-check-apply$-hyp-tamep-hyp</a>
  (ilks <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> wrld)
  (declare (ftype (function (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (values <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      executable-tamep
      executable-tamep-functionp))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> ilks) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ilks) <span class="keyword">:fn</span>) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (executable-tamep-functionp (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) wrld)
        (<a class="sym-link local-def" href="#def-concrete-check-apply_24-hyp-tamep-hyp" data-sym="CONCRETE-CHECK-APPLY$-HYP-TAMEP-HYP" title="(defun concrete-check-apply$-hyp-tamep-hyp (ilks args wrld)
  (declare
   (ftype (function (t t) (values t)) executable-tamep
    executable-tamep-functionp))
  (cond ((endp ilks) t)
...">concrete-check-apply$-hyp-tamep-hyp</a> (cdr ilks)
          (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
          wrld)))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ilks) <span class="keyword">:expr</span>) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (executable-tamep (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) wrld)
        (<a class="sym-link local-def" href="#def-concrete-check-apply_24-hyp-tamep-hyp" data-sym="CONCRETE-CHECK-APPLY$-HYP-TAMEP-HYP" title="(defun concrete-check-apply$-hyp-tamep-hyp (ilks args wrld)
  (declare
   (ftype (function (t t) (values t)) executable-tamep
    executable-tamep-functionp))
  (cond ((endp ilks) t)
...">concrete-check-apply$-hyp-tamep-hyp</a> (cdr ilks)
          (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
          wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-concrete-check-apply_24-hyp-tamep-hyp" data-sym="CONCRETE-CHECK-APPLY$-HYP-TAMEP-HYP" title="(defun concrete-check-apply$-hyp-tamep-hyp (ilks args wrld)
  (declare
   (ftype (function (t t) (values t)) executable-tamep
    executable-tamep-functionp))
  (cond ((endp ilks) t)
...">concrete-check-apply$-hyp-tamep-hyp</a> (cdr ilks)
        (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-maybe-extend-warrant-reqs" data-defines="MAYBE-EXTEND-WARRANT-REQS" data-references="PUSH,FUNCTION,MEMBER,HARD!,ER,SYMBOLP,REPLACE-LIVE-STOBJS-IN-LIST,MSG,EV-FNCALL-NULL-BODY-ER,QUOTE,LIST*,THROW-RAW-EV-FNCALL,LIST,SETQ,T,EQ,NULL,COND,*WARRANT-REQS*,WARRANT-REQS,LET,CALLER,ARGS,FN,DEFUN" data-part-name="MAYBE-EXTEND-WARRANT-REQS" data-part-args="CALLER,ARGS,FN" data-part-body="PUSH,FUNCTION,MEMBER,MAYBE-EXTEND-WARRANT-REQS,HARD!,ER,SYMBOLP,ARGS,REPLACE-LIVE-STOBJS-IN-LIST,CALLER,MSG,EV-FNCALL-NULL-BODY-ER,QUOTE,LIST*,THROW-RAW-EV-FNCALL,FN,LIST,SETQ,T,EQ,NULL,COND,*WARRANT-REQS*,WARRANT-REQS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-EXTEND-WARRANT-REQS">maybe-extend-warrant-reqs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-extend-warrant-reqs" data-sym="MAYBE-EXTEND-WARRANT-REQS" title="(defun maybe-extend-warrant-reqs (fn args caller)
  (let ((warrant-reqs *warrant-reqs*))
    (cond ((null warrant-reqs) nil)
          ((eq t warrant-reqs) (setq *warrant-reqs* (list fn)))
          ((eq :nil! warrant-reqs) (setq *warrant-reqs* fn)
...">maybe-extend-warrant-reqs</a>
  (fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> caller)
  (let ((warrant-reqs *warrant-reqs*))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> warrant-reqs) nil)
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> warrant-reqs) (setq *warrant-reqs* (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <span class="keyword">:nil!</span> warrant-reqs) (setq *warrant-reqs* fn)
        (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> 'ev-fncall-null-body-er
            nil
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The value of ~x0 is not specified on ~x1 because the ~
                         use of warrants is not permitted in this context."</span>
              caller
              fn)
            (replace-live-stobjs-in-list (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))))
      ((symbolp warrant-reqs) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard!
          '<a class="sym-link local-def" href="#def-maybe-extend-warrant-reqs" data-sym="MAYBE-EXTEND-WARRANT-REQS" title="(defun maybe-extend-warrant-reqs (fn args caller)
  (let ((warrant-reqs *warrant-reqs*))
    (cond ((null warrant-reqs) nil)
          ((eq t warrant-reqs) (setq *warrant-reqs* (list fn)))
          ((eq :nil! warrant-reqs) (setq *warrant-reqs* fn)
...">maybe-extend-warrant-reqs</a>
          <span class="string">"Implementation error: *warrant-reqs* has an input value of ~
                ~x0."</span>
          warrant-reqs))
      ((<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> fn warrant-reqs <span class="keyword">:test</span> (function <a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>)) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (push fn *warrant-reqs*)))))</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (push 'doppelganger-apply$-userfn *defun-overrides*)
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> raw-apply-for-badged-fn
    (fn <a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> fn (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)) <span class="keyword">:program</span>)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'safe-mode *the-live-state*))) (state-free-global-let* ((safe-mode <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (apply (*1*-symbol fn)
            (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> <a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
              <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
              (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> <a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (apply (*1*-symbol fn)
          (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> <a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
            <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
            (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> <a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> doppelganger-apply$-userfn
    (fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *aokp*) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *warrant-reqs*)) (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> 'ev-fncall-null-body-er
            nil
            'doppelganger-apply$-userfn
            (replace-live-stobjs-in-list (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (bad-fn-msg badge warrantp)
          (<a class="sym-link local-def" href="#def-query-badge-userfn-structure" data-sym="QUERY-BADGE-USERFN-STRUCTURE" title="(defun query-badge-userfn-structure (fn wrld)
  (cond ((not (symbolp fn)) (mv (msg &quot;~x0 is not a symbol&quot; fn) nil nil))
        ((not (function-symbolp fn wrld))
         (mv (msg &quot;~x0 is not a known function symbol&quot; fn) nil nil))
        (t
...">query-badge-userfn-structure</a> fn (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-fn-msg (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> 'ev-fncall-null-body-er
                  nil
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The value of ~x0 is not specified on ~x1 because ~@2."</span>
                    'apply$-userfn
                    fn
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-fn-msg bad-fn-msg)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0 has not been warranted"</span> fn))))
                  (replace-live-stobjs-in-list (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))))
            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge badge <span class="keyword">:ilks</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> warrantp)
                (<a class="sym-link local-def" href="#def-maybe-extend-warrant-reqs" data-sym="MAYBE-EXTEND-WARRANT-REQS" title="(defun maybe-extend-warrant-reqs (fn args caller)
  (let ((warrant-reqs *warrant-reqs*))
    (cond ((null warrant-reqs) nil)
          ((eq t warrant-reqs) (setq *warrant-reqs* (list fn)))
          ((eq :nil! warrant-reqs) (setq *warrant-reqs* fn)
...">maybe-extend-warrant-reqs</a> fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> 'apply$-userfn))
              (if (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge badge <span class="keyword">:out-arity</span>) <span class="number">1</span>)
                (raw-apply-for-badged-fn fn
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge badge <span class="keyword">:arity</span>)
                  <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                (multiple-value-list (raw-apply-for-badged-fn fn
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge badge <span class="keyword">:arity</span>)
                    <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
            ((<a class="sym-link local-def" href="#def-concrete-check-apply_24-hyp-tamep-hyp" data-sym="CONCRETE-CHECK-APPLY$-HYP-TAMEP-HYP" title="(defun concrete-check-apply$-hyp-tamep-hyp (ilks args wrld)
  (declare
   (ftype (function (t t) (values t)) executable-tamep
    executable-tamep-functionp))
  (cond ((endp ilks) t)
...">concrete-check-apply$-hyp-tamep-hyp</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge badge <span class="keyword">:ilks</span>)
               <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
               (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> warrantp)
                (<a class="sym-link local-def" href="#def-maybe-extend-warrant-reqs" data-sym="MAYBE-EXTEND-WARRANT-REQS" title="(defun maybe-extend-warrant-reqs (fn args caller)
  (let ((warrant-reqs *warrant-reqs*))
    (cond ((null warrant-reqs) nil)
          ((eq t warrant-reqs) (setq *warrant-reqs* (list fn)))
          ((eq :nil! warrant-reqs) (setq *warrant-reqs* fn)
...">maybe-extend-warrant-reqs</a> fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> 'apply$-userfn))
              (if (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge badge <span class="keyword">:out-arity</span>) <span class="number">1</span>)
                (raw-apply-for-badged-fn fn
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge badge <span class="keyword">:arity</span>)
                  <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                (multiple-value-list (raw-apply-for-badged-fn fn
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge badge <span class="keyword">:arity</span>)
                    <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> 'ev-fncall-null-body-er
                  nil
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The value of ~x0 is not specified when the first ~
                        argument, fn, is ~x1, and the second argument, args, ~
                        is ~x2.  Fn has badge ~x3 and args is not known to ~
                        satisfy the tameness requirement of that badge."</span>
                    'apply$-userfn
                    fn
                    <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                    badge)
                  (replace-live-stobjs-in-list (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))))))))
  (defun-*1* doppelganger-apply$-userfn
    (fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
    (doppelganger-apply$-userfn fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-a.html#def-defrec" data-sym="DEFREC">defrec</a> cl-cache (alist size . <a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block macro" id="def-access-cl-cache" data-defines="ACCESS-CL-CACHE" data-references="QUOTE,HARD,ER,OTHERWISE,CDDR,CADR,CAR,QUASIQUOTE,CASE,FIELD,C,DEFMACRO" data-used-by="FETCH-CL-CACHE-LINE,CL-CACHE-ADD-ENTRY" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESS-CL-CACHE">access-cl-cache</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-access-cl-cache" data-sym="ACCESS-CL-CACHE" title="(defmacro access-cl-cache (c field)
  (case field
    (:alist `(car ,c))
    (:size `(cadr ,c))
    (:last `(cddr ,c))">access-cl-cache</a>
  (c field)
  (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> field
    (<span class="keyword">:alist</span> `(car ,C))
    (<span class="keyword">:size</span> `(<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ,C))
    (<span class="keyword">:last</span> `(<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> ,C))
    (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard '<a class="sym-link local-def" href="#def-access-cl-cache" data-sym="ACCESS-CL-CACHE" title="(defmacro access-cl-cache (c field)
  (case field
    (:alist `(car ,c))
    (:size `(cadr ,c))
    (:last `(cddr ,c))">access-cl-cache</a> <span class="string">"Illegal field name, ~x0."</span> field))))</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-a.html#def-defrec" data-sym="DEFREC">defrec</a> cl-cache-line
  (((lambda-object . status) absolute-event-number . extracts) (problem . hits)
    guard-code . lambda-code)
  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block macro" id="def-access-cl-cache-line" data-defines="ACCESS-CL-CACHE-LINE" data-references="QUOTE,HARD,ER,OTHERWISE,CDDDR,CADDR,CDADR,CAADR,CDDAR,CADAR,CDAAR,CAAAR,QUASIQUOTE,CASE,FIELD,LINE,DEFMACRO" data-used-by="FETCH-CL-CACHE-LINE,VALID-CL-CACHE-LINE,MAYBE-RE-VALIDATE-CL-CACHE-LINE,INVALIDATE-SOME-CL-CACHE-LINES" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESS-CL-CACHE-LINE">access-cl-cache-line</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a>
  (line field)
  (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> field
    (<span class="keyword">:lambda-object</span> `(<a class="sym-link system" href="axioms.html#def-caaar" data-sym="CAAAR">caaar</a> ,LINE))
    (<span class="keyword">:status</span> `(<a class="sym-link system" href="axioms.html#def-cdaar" data-sym="CDAAR">cdaar</a> ,LINE))
    (<span class="keyword">:absolute-event-number</span> `(<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> ,LINE))
    (<span class="keyword">:extracts</span> `(<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> ,LINE))
    (<span class="keyword">:problem</span> `(<a class="sym-link system" href="axioms.html#def-caadr" data-sym="CAADR">caadr</a> ,LINE))
    (<span class="keyword">:hits</span> `(<a class="sym-link system" href="axioms.html#def-cdadr" data-sym="CDADR">cdadr</a> ,LINE))
    (<span class="keyword">:guard-code</span> `(<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> ,LINE))
    (<span class="keyword">:lambda-code</span> `(<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> ,LINE))
    (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a>
        <span class="string">"Illegal field name, ~x0."</span>
        field))))</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defparameter *cl-cache-size-default* <span class="number">1000</span>)</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *cl-cache* *cl-cache-size-default*)</pre>
  </div>

<div class="form-block function" id="def-cl-cache-init" data-defines="CL-CACHE-INIT" data-references="T,*CL-CACHE*,SETQ,SET-CL-CACHE,QUOTE,HARD!,ER,<=,INTEGERP,AND,OR,PROGN$,*,INTEGER,TYPE,DECLARE,SIZE,DEFUN" data-part-name="CL-CACHE-INIT" data-part-args="SIZE" data-part-declare="SIZE,*,INTEGER,TYPE,DECLARE" data-part-body="T,*CL-CACHE*,SETQ,SET-CL-CACHE,QUOTE,HARD!,ER,<=,SIZE,INTEGERP,AND,OR,PROGN$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CL-CACHE-INIT">cl-cache-init</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cl-cache-init" data-sym="CL-CACHE-INIT" title="(defun cl-cache-init (size)
  (declare (type (integer 3 *) size))
  (progn$
   (or (and (integerp size) (&lt;= 3 size))
       (er hard! &#39;set-cl-cache
...">cl-cache-init</a>
  (size)
  (declare (type (integer <span class="number">3</span> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) size))
  (<a class="sym-link system" href="axioms.html#def-progn_24" data-sym="PROGN$">progn$</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">3</span> size))
      (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard!
        'set-cl-cache
        <span class="string">"Illegal argument (should be nil or integer not less than 3), ~
                ~x0, for cl-cache-init."</span>
        size))
    (setq *cl-cache* size)
    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block function" id="def-make-circular-list" data-defines="MAKE-CIRCULAR-LIST" data-references="MV,CDR,SETF,LAST,MAKE-LIST,LST,LET*,N,DEFUN" data-used-by="MAKE-CL-CACHE" data-part-name="MAKE-CIRCULAR-LIST" data-part-args="N" data-part-body="MV,CDR,SETF,LAST,N,MAKE-LIST,LST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-CIRCULAR-LIST">make-circular-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-circular-list" data-sym="MAKE-CIRCULAR-LIST" title="(defun make-circular-list (n)
  (let* ((lst (make-list n)) (last (last lst)))
    (setf (cdr last) lst)
    (mv lst last)))">make-circular-list</a>
  (n)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((lst (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> n)) (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> lst)))
    (setf (cdr <a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a>) lst)
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> lst <a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a>)))</pre>
  </div>

<div class="form-block function" id="def-make-cl-cache" data-defines="MAKE-CL-CACHE" data-references="CL-CACHE,MAKE,MAKE-CIRCULAR-LIST,LAST,ALIST,MV-LET,SIZE,DEFUN" data-used-by="FETCH-CL-CACHE-LINE" data-part-name="MAKE-CL-CACHE" data-part-args="SIZE" data-part-body="CL-CACHE,MAKE,SIZE,MAKE-CIRCULAR-LIST,LAST,ALIST,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-CL-CACHE">make-cl-cache</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-cl-cache" data-sym="MAKE-CL-CACHE" title="(defun make-cl-cache (size)
  (mv-let (alist last) (make-circular-list size)
          (make cl-cache :alist alist :size size :last last)))">make-cl-cache</a>
  (size)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (alist <a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a>)
    (<a class="sym-link local-def" href="#def-make-circular-list" data-sym="MAKE-CIRCULAR-LIST" title="(defun make-circular-list (n)
  (let* ((lst (make-list n)) (last (last lst)))
    (setf (cdr last) lst)
    (mv lst last)))">make-circular-list</a> size)
    (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cl-cache <span class="keyword">:alist</span> alist <span class="keyword">:size</span> size <span class="keyword">:last</span> <a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a>)))</pre>
  </div>

<div class="form-block function" id="def-cl-cache-size" data-defines="CL-CACHE-SIZE" data-references="NATP,ASSERT,T,ACCESS,CONSP,COND,CL-CACHE,DEFUN" data-used-by="FETCH-CL-CACHE-LINE" data-part-name="CL-CACHE-SIZE" data-part-args="CL-CACHE" data-part-body="NATP,ASSERT,T,ACCESS,CL-CACHE,CONSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CL-CACHE-SIZE">cl-cache-size</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cl-cache-size" data-sym="CL-CACHE-SIZE" title="(defun cl-cache-size (cl-cache)
  (cond ((consp cl-cache) (access cl-cache cl-cache :size))
        (t (assert (natp cl-cache)) cl-cache)))">cl-cache-size</a>
  (cl-cache)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp cl-cache) (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:size</span>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (assert (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> cl-cache)) cl-cache)))</pre>
  </div>

<div class="form-block function" id="def-prettyify-splo-extracts-tuples" data-defines="PRETTYIFY-SPLO-EXTRACTS-TUPLES" data-references="CDR,SPLO-EXTRACTS-TUPLE,QUASIQUOTE,CONS,T,ENDP,COND,EXTRACTS,DEFUN" data-used-by="PRETTYIFY-CL-CACHE-LINE,PRINT-CL-CACHE-LINE" data-part-name="PRETTYIFY-SPLO-EXTRACTS-TUPLES" data-part-args="EXTRACTS" data-part-body="CDR,PRETTYIFY-SPLO-EXTRACTS-TUPLES,SPLO-EXTRACTS-TUPLE,QUASIQUOTE,CONS,T,EXTRACTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRETTYIFY-SPLO-EXTRACTS-TUPLES">prettyify-splo-extracts-tuples</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prettyify-splo-extracts-tuples" data-sym="PRETTYIFY-SPLO-EXTRACTS-TUPLES" title="(defun prettyify-splo-extracts-tuples (extracts)
  (cond ((endp extracts) nil)
        (t
         (cons
          `(splo-extracts-tuple :gflg
...">prettyify-splo-extracts-tuples</a>
  (extracts)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> extracts) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons `(splo-extracts-tuple <span class="keyword">:gflg</span> ,(ACCESS SPLO-EXTRACTS-TUPLE (CAR EXTRACTS) :GFLG)
          <span class="keyword">:satisfies-exprs</span> ,(ACCESS SPLO-EXTRACTS-TUPLE (CAR EXTRACTS) :SATISFIES-EXPRS)
          <span class="keyword">:guard</span> ,(ACCESS SPLO-EXTRACTS-TUPLE (CAR EXTRACTS) :GUARD)
          <span class="keyword">:body</span> ,(ACCESS SPLO-EXTRACTS-TUPLE (CAR EXTRACTS) :BODY))
        (<a class="sym-link local-def" href="#def-prettyify-splo-extracts-tuples" data-sym="PRETTYIFY-SPLO-EXTRACTS-TUPLES" title="(defun prettyify-splo-extracts-tuples (extracts)
  (cond ((endp extracts) nil)
        (t
         (cons
          `(splo-extracts-tuple :gflg
...">prettyify-splo-extracts-tuples</a> (cdr extracts))))))</pre>
  </div>

<div class="form-block function" id="def-print-cl-cache-line" data-defines="PRINT-CL-CACHE-LINE" data-references="IF,PRETTYIFY-SPLO-EXTRACTS-TUPLES,CONS,CW,LAMBDA-CODE,GUARD-CODE,HITS,PROBLEM,EXTRACTS,ABSOLUTE-EVENT-NUMBER,STATUS,CL-CACHE-LINE,ACCESS,LAMBDA-OBJECT,LET,LINE,I,DEFUN" data-used-by="PRINT-CL-CACHE-FN" data-part-name="PRINT-CL-CACHE-LINE" data-part-args="LINE,I" data-part-body="IF,PRETTYIFY-SPLO-EXTRACTS-TUPLES,I,CONS,CW,LAMBDA-CODE,GUARD-CODE,HITS,PROBLEM,EXTRACTS,ABSOLUTE-EVENT-NUMBER,STATUS,LINE,CL-CACHE-LINE,ACCESS,LAMBDA-OBJECT,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-CL-CACHE-LINE">print-cl-cache-line</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-cl-cache-line" data-sym="PRINT-CL-CACHE-LINE" title="(defun print-cl-cache-line (i line)
  (let ((lambda-object (access cl-cache-line line :lambda-object))
        (status (access cl-cache-line line :status))
        (absolute-event-number
         (access cl-cache-line line :absolute-event-number))
...">print-cl-cache-line</a>
  (i line)
  (let ((lambda-object (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:lambda-object</span>)) (status (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:status</span>))
      (absolute-event-number (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:absolute-event-number</span>))
      (extracts (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:extracts</span>))
      (problem (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:problem</span>))
      (hits (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:hits</span>))
      (guard-code (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:guard-code</span>))
      (lambda-code (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:lambda-code</span>)))
    (<a class="sym-link system" href="axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"(~c0. :lambda-object ~y1
          ~t2:status         ~x3
          ~t2:abs-event-no   ~x4
          ~t2:extracts       ~y5
          ~t2:problem        ~y6
          ~t2:hits           ~x7~%~
          ~t2:guard-code     ~s8~%~
          ~t2:lambda-code    ~s9)~%"</span>
      (cons i <span class="number">4</span>)
      lambda-object
      <span class="number">7</span>
      status
      absolute-event-number
      (<a class="sym-link local-def" href="#def-prettyify-splo-extracts-tuples" data-sym="PRETTYIFY-SPLO-EXTRACTS-TUPLES" title="(defun prettyify-splo-extracts-tuples (extracts)
  (cond ((endp extracts) nil)
        (t
         (cons
          `(splo-extracts-tuple :gflg
...">prettyify-splo-extracts-tuples</a> extracts)
      problem
      hits
      (if guard-code
        <span class="string">"&lt;code&gt;"</span>
        <span class="string">"NIL"</span>)
      (if lambda-code
        <span class="string">"&lt;code&gt;"</span>
        <span class="string">"NIL"</span>))))</pre>
  </div>

<div class="form-block function" id="def-print-cl-cache-fn" data-defines="PRINT-CL-CACHE-FN" data-references="PRINT-CL-CACHE-LINE,DO,WHEN,UNTIL,IN,LINE,AS,TO,FROM,FOR,LOOP,-,NULL,<=,MAX,T,ACCESS,<,NATP,AND,MIN,LET*,CW,CONSP,COND,*CL-CACHE*,CL-CACHE,LET,J,I,DEFUN" data-part-name="PRINT-CL-CACHE-FN" data-part-args="J,I" data-part-body="PRINT-CL-CACHE-LINE,DO,WHEN,UNTIL,IN,LINE,AS,TO,FROM,FOR,LOOP,-,NULL,<=,J,MAX,T,ACCESS,<,I,NATP,AND,MIN,LET*,CW,CONSP,COND,*CL-CACHE*,CL-CACHE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-CL-CACHE-FN">print-cl-cache-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-cl-cache-fn" data-sym="PRINT-CL-CACHE-FN" title="(defun print-cl-cache-fn (i j)
  (let ((cl-cache *cl-cache*))
    (cond
     ((consp cl-cache)
      (cw &quot;See the defun of print-cl-cache for a comment containing ~
...">print-cl-cache-fn</a>
  (i j)
  (let ((cl-cache *cl-cache*))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp cl-cache) (<a class="sym-link system" href="axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"See the defun of print-cl-cache for a comment containing ~
                reminders about the cache!~%~%"</span>)
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((min (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> i) (&lt; i (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:size</span>))) i)
               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="number">0</span>))) (max (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> j)
                   (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> min j)
                   (&lt; j (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:size</span>))) j)
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> i (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> j)) i)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:size</span>) <span class="number">1</span>)))))
          (loop for
            i
            from
            <span class="number">0</span>
            to
            (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:size</span>) <span class="number">1</span>)
            as
            line
            in
            (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:alist</span>)
            until
            (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> line)
            when
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> min i) (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> i max))
            do
            (<a class="sym-link local-def" href="#def-print-cl-cache-line" data-sym="PRINT-CL-CACHE-LINE" title="(defun print-cl-cache-line (i line)
  (let ((lambda-object (access cl-cache-line line :lambda-object))
        (status (access cl-cache-line line :status))
        (absolute-event-number
         (access cl-cache-line line :absolute-event-number))
...">print-cl-cache-line</a> i line)))
        nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"Cl-cache is uninitialized with size ~x0.~%"</span> *cl-cache*)
        nil))))</pre>
  </div>

<div class="form-block function" id="def-cl-cache-add-entry" data-defines="CL-CACHE-ADD-ENTRY" data-references="ACCESS-CL-CACHE,LAST,NEW-ALIST,CAR,CDR,SETF,ACCESS,ALIST,LET,PREVIOUS-TAIL,TAIL,LINE,CL-CACHE,DEFUN" data-used-by="FETCH-CL-CACHE-LINE" data-part-name="CL-CACHE-ADD-ENTRY" data-part-args="PREVIOUS-TAIL,TAIL,LINE,CL-CACHE" data-part-body="ACCESS-CL-CACHE,LAST,NEW-ALIST,LINE,CAR,TAIL,PREVIOUS-TAIL,CDR,SETF,CL-CACHE,ACCESS,ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CL-CACHE-ADD-ENTRY">cl-cache-add-entry</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cl-cache-add-entry" data-sym="CL-CACHE-ADD-ENTRY" title="(defun cl-cache-add-entry (cl-cache line tail previous-tail)
  (let ((alist (access cl-cache cl-cache :alist)))
    (setf (cdr previous-tail) (cdr tail))
    (setf (car tail) line)
    (setf (cdr tail) alist)
...">cl-cache-add-entry</a>
  (cl-cache line tail previous-tail)
  (let ((alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:alist</span>)))
    (setf (cdr previous-tail) (cdr tail))
    (setf (car tail) line)
    (setf (cdr tail) alist)
    (let ((new-alist tail) (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:last</span>)))
      (setf (<a class="sym-link local-def" href="#def-access-cl-cache" data-sym="ACCESS-CL-CACHE" title="(defmacro access-cl-cache (c field)
  (case field
    (:alist `(car ,c))
    (:size `(cadr ,c))
    (:last `(cddr ,c))">access-cl-cache</a> cl-cache <span class="keyword">:alist</span>) tail)
      (setf (cdr <a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a>) new-alist))
    line))</pre>
  </div>

<div class="form-block function" id="def-invalidate-some-cl-cache-lines" data-defines="INVALIDATE-SOME-CL-CACHE-LINES" data-references="<,T,ACCESS-CL-CACHE-LINE,SETF,DO,CL-CACHE-LINE,WHEN,NULL,UNTIL,IN,LINE,FOR,LOOP,EXTENSION,COND,SETQ,MAX-ABSOLUTE-EVENT-NUMBER,RETRACTION,QUOTE,EQ,IF,EVNO,ACCESS,LINES,CL-CACHE,LET,*CL-CACHE*,CONSP,AND,WRLD,FLG,DEFUN" data-part-name="INVALIDATE-SOME-CL-CACHE-LINES" data-part-args="WRLD,FLG" data-part-body="<,T,ACCESS-CL-CACHE-LINE,SETF,DO,CL-CACHE-LINE,WHEN,NULL,UNTIL,IN,LINE,FOR,LOOP,EXTENSION,COND,SETQ,WRLD,MAX-ABSOLUTE-EVENT-NUMBER,RETRACTION,QUOTE,FLG,EQ,IF,EVNO,ACCESS,LINES,CL-CACHE,LET,*CL-CACHE*,CONSP,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INVALIDATE-SOME-CL-CACHE-LINES">invalidate-some-cl-cache-lines</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-invalidate-some-cl-cache-lines" data-sym="INVALIDATE-SOME-CL-CACHE-LINES" title="(defun invalidate-some-cl-cache-lines (flg wrld)
  (and (consp *cl-cache*)
       (let ((cl-cache *cl-cache*)
             (lines (access cl-cache *cl-cache* :alist))
             (evno
...">invalidate-some-cl-cache-lines</a>
  (flg wrld)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp *cl-cache*)
    (let ((cl-cache *cl-cache*) (lines (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache *cl-cache* <span class="keyword">:alist</span>))
        (evno (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'retraction)
            (max-absolute-event-number wrld)
            nil)))
      (setq *cl-cache* (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache *cl-cache* <span class="keyword">:size</span>))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'extension) (loop for
            line
            in
            lines
            until
            (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> line)
            when
            (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:status</span>) <span class="keyword">:bad</span>)
            do
            (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:status</span>) <span class="keyword">:unknown</span>)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (loop for
            line
            in
            lines
            until
            (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> line)
            when
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:status</span>) <span class="keyword">:good</span>)
              (&lt; evno (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:absolute-event-number</span>)))
            do
            (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:absolute-event-number</span>)
              nil)
            (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:status</span>) <span class="keyword">:unknown</span>))))
      (setq *cl-cache* cl-cache)
      nil)))</pre>
  </div>

<div class="form-block function" id="def-collect-from-extracts" data-defines="COLLECT-FROM-EXTRACTS" data-references="QUOTE,HARD,ER,OTHERWISE,ADD-TO-SET-EQUAL,CAR,SPLO-EXTRACTS-TUPLE,ACCESS,UNION-EQUAL-REMOVING-DUPLICATES,CASE,CDR,T,ENDP,COND,ACC,EXTRACTS,KEY,DEFUN" data-used-by="MAKE-NEW-CL-CACHE-LINE,MAYBE-RE-VALIDATE-CL-CACHE-LINE" data-part-name="COLLECT-FROM-EXTRACTS" data-part-args="ACC,EXTRACTS,KEY" data-part-body="QUOTE,HARD,ER,OTHERWISE,ADD-TO-SET-EQUAL,CAR,SPLO-EXTRACTS-TUPLE,ACCESS,UNION-EQUAL-REMOVING-DUPLICATES,CASE,CDR,KEY,COLLECT-FROM-EXTRACTS,T,ACC,EXTRACTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-FROM-EXTRACTS">collect-from-extracts</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-from-extracts" data-sym="COLLECT-FROM-EXTRACTS" title="(defun collect-from-extracts (key extracts acc)
  (cond ((endp extracts) acc)
        (t
         (collect-from-extracts key (cdr extracts)
                                (case key
...">collect-from-extracts</a>
  (key extracts acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> extracts) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-collect-from-extracts" data-sym="COLLECT-FROM-EXTRACTS" title="(defun collect-from-extracts (key extracts acc)
  (cond ((endp extracts) acc)
        (t
         (collect-from-extracts key (cdr extracts)
                                (case key
...">collect-from-extracts</a> key
        (cdr extracts)
        (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> key
          (<span class="keyword">:satisfies-exprs</span> (union-equal-removing-duplicates (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> splo-extracts-tuple (car extracts) <span class="keyword">:satisfies-exprs</span>)
              acc))
          (<span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-add-to-set-equal" data-sym="ADD-TO-SET-EQUAL">add-to-set-equal</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> splo-extracts-tuple (car extracts) <span class="keyword">:guard</span>)
              acc))
          (<span class="keyword">:body</span> (<a class="sym-link system" href="axioms.html#def-add-to-set-equal" data-sym="ADD-TO-SET-EQUAL">add-to-set-equal</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> splo-extracts-tuple (car extracts) <span class="keyword">:body</span>)
              acc))
          (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
              '<a class="sym-link local-def" href="#def-collect-from-extracts" data-sym="COLLECT-FROM-EXTRACTS" title="(defun collect-from-extracts (key extracts acc)
  (cond ((endp extracts) acc)
        (t
         (collect-from-extracts key (cdr extracts)
                                (case key
...">collect-from-extracts</a>
              <span class="string">"We cannot collect values of key ~x0."</span>
              key)))))))</pre>
  </div>

<div class="form-block function" id="def-maybe-re-validate-cl-cache-line" data-defines="MAYBE-RE-VALIDATE-CL-CACHE-LINE" data-references="NOT-WELL-FORMED,BODY-USES-UNWARRANTED-FNS,BODY-USES-NON-COMPLIANT-FNS,GUARD-USES-NON-COMPLIANT-FNS,UNPROVED-GUARD-CLAUSES,CONS,MAX-ABSOLUTE-EVENT-NUMBER,COMPILE,MAKE-COMPILEABLE-GUARD-AND-BODY-LAMBDAS,BODY-LAMBDA,GUARD-LAMBDA,TAU-CLAUSEP-LST,CALIST,CL-SET1,GUARD-CLAUSES-FOR-FN,MV,COMMON-LISP-COMPLIANT-LAMBDAS,GLOBAL-VAL,MEMBER-EQUAL,IF,TTREE,CL-SET,NULL,IGNORE,DECLARE,WARRANTS-FOR-TAMEP-LAMBDAP,UNWARRANTEDS,WARRANTS,MV-LET,BAD-FNS,OR,NON-COMPLIANT-FNS2,COLLECT-FROM-EXTRACTS,T,ALL-FNNAMES1-EXEC,COLLECT-NON-COMMON-LISP-COMPLIANTS,NON-COMPLIANT-FNS1,WELL-FORMED-LAMBDA-OBJECTP1,COND,RE-VALIDATION-INTERRUPTED,QUOTE,SETF,ACCESS-CL-CACHE-LINE,EQ,ASSERT,CL-CACHE-LINE,ACCESS,EXTRACTS,ENS,LET*,STATE,W,LINE,DEFUN" data-used-by="MAKE-NEW-CL-CACHE-LINE,VALID-CL-CACHE-LINE" data-part-name="MAYBE-RE-VALIDATE-CL-CACHE-LINE" data-part-args="STATE,W,LINE" data-part-body="NOT-WELL-FORMED,BODY-USES-UNWARRANTED-FNS,BODY-USES-NON-COMPLIANT-FNS,GUARD-USES-NON-COMPLIANT-FNS,UNPROVED-GUARD-CLAUSES,CONS,MAX-ABSOLUTE-EVENT-NUMBER,COMPILE,MAKE-COMPILEABLE-GUARD-AND-BODY-LAMBDAS,BODY-LAMBDA,GUARD-LAMBDA,TAU-CLAUSEP-LST,CALIST,CL-SET1,GUARD-CLAUSES-FOR-FN,MV,COMMON-LISP-COMPLIANT-LAMBDAS,GLOBAL-VAL,MEMBER-EQUAL,IF,TTREE,CL-SET,NULL,IGNORE,DECLARE,WARRANTS-FOR-TAMEP-LAMBDAP,UNWARRANTEDS,WARRANTS,MV-LET,BAD-FNS,OR,NON-COMPLIANT-FNS2,COLLECT-FROM-EXTRACTS,T,ALL-FNNAMES1-EXEC,COLLECT-NON-COMMON-LISP-COMPLIANTS,NON-COMPLIANT-FNS1,W,WELL-FORMED-LAMBDA-OBJECTP1,COND,RE-VALIDATION-INTERRUPTED,QUOTE,SETF,ACCESS-CL-CACHE-LINE,EQ,ASSERT,LINE,CL-CACHE-LINE,ACCESS,EXTRACTS,STATE,ENS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-RE-VALIDATE-CL-CACHE-LINE">maybe-re-validate-cl-cache-line</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-re-validate-cl-cache-line" data-sym="MAYBE-RE-VALIDATE-CL-CACHE-LINE" title="(defun maybe-re-validate-cl-cache-line (line w state)
  (let* ((ens (ens state)) (extracts (access cl-cache-line line :extracts)))
    (assert (eq (access-cl-cache-line line :status) :unknown))
    (setf (access-cl-cache-line line :problem) &#39;re-validation-interrupted)
    (cond
...">maybe-re-validate-cl-cache-line</a>
  (line <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ens (ens state)) (extracts (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:extracts</span>)))
    (assert (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:status</span>) <span class="keyword">:unknown</span>))
    (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:problem</span>)
      're-validation-interrupted)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((well-formed-lambda-objectp1 extracts <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((non-compliant-fns1 (<a class="sym-link system" href="defuns.html#def-collect-non-common-lisp-compliants" data-sym="COLLECT-NON-COMMON-LISP-COMPLIANTS">collect-non-common-lisp-compliants</a> (<a class="sym-link system" href="defuns.html#def-all-fnnames1-exec" data-sym="ALL-FNNAMES1-EXEC">all-fnnames1-exec</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                 (<a class="sym-link local-def" href="#def-collect-from-extracts" data-sym="COLLECT-FROM-EXTRACTS" title="(defun collect-from-extracts (key extracts acc)
  (cond ((endp extracts) acc)
        (t
         (collect-from-extracts key (cdr extracts)
                                (case key
...">collect-from-extracts</a> <span class="keyword">:guard</span> extracts nil)
                 nil)
               <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)) (non-compliant-fns2 (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> non-compliant-fns1
                (<a class="sym-link system" href="defuns.html#def-collect-non-common-lisp-compliants" data-sym="COLLECT-NON-COMMON-LISP-COMPLIANTS">collect-non-common-lisp-compliants</a> (<a class="sym-link system" href="defuns.html#def-all-fnnames1-exec" data-sym="ALL-FNNAMES1-EXEC">all-fnnames1-exec</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                    (<a class="sym-link local-def" href="#def-collect-from-extracts" data-sym="COLLECT-FROM-EXTRACTS" title="(defun collect-from-extracts (key extracts acc)
  (cond ((endp extracts) acc)
        (t
         (collect-from-extracts key (cdr extracts)
                                (case key
...">collect-from-extracts</a> <span class="keyword">:body</span> extracts nil)
                    nil)
                  <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
            (bad-fns (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> non-compliant-fns2
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (warrants unwarranteds)
                  (warrants-for-tamep-lambdap (<a class="sym-link local-def" href="#def-collect-from-extracts" data-sym="COLLECT-FROM-EXTRACTS" title="(defun collect-from-extracts (key extracts acc)
  (cond ((endp extracts) acc)
        (t
         (collect-from-extracts key (cdr extracts)
                                (case key
...">collect-from-extracts</a> <span class="keyword">:body</span> extracts nil)
                    <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                    nil
                    nil)
                  (declare (ignore warrants))
                  unwarranteds))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> bad-fns) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (cl-set ttree)
                (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:lambda-object</span>)
                    (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'common-lisp-compliant-lambdas <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil)
                  (<a class="sym-link system" href="history-management.html#def-guard-clauses-for-fn" data-sym="GUARD-CLAUSES-FOR-FN">guard-clauses-for-fn</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:lambda-object</span>)
                    nil
                    ens
                    <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                    nil
                    nil
                    nil))
                (declare (ignore ttree))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (cl-set1 ttree calist)
                  (tau-clausep-lst cl-set ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> nil nil state nil)
                  (declare (ignore ttree calist))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> cl-set1) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (guard-lambda body-lambda)
                        (<a class="sym-link system" href="defuns.html#def-make-compileable-guard-and-body-lambdas" data-sym="MAKE-COMPILEABLE-GUARD-AND-BODY-LAMBDAS">make-compileable-guard-and-body-lambdas</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:lambda-object</span>)
                          state)
                        (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:guard-code</span>)
                          (compile nil guard-lambda))
                        (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:lambda-code</span>)
                          (compile nil body-lambda))
                        (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:problem</span>) nil)
                        (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:absolute-event-number</span>)
                          (max-absolute-event-number <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                        (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:status</span>) <span class="keyword">:good</span>)
                        line))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:problem</span>)
                        (cons 'unproved-guard-clauses cl-set1))
                      (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:status</span>) <span class="keyword">:bad</span>)
                      line)))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:problem</span>)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (non-compliant-fns1 (cons 'guard-uses-non-compliant-fns non-compliant-fns1))
                  (non-compliant-fns2 (cons 'body-uses-non-compliant-fns non-compliant-fns2))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons 'body-uses-unwarranted-fns bad-fns))))
              (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:status</span>) <span class="keyword">:bad</span>)
              line))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:problem</span>) 'not-well-formed)
        (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:status</span>) <span class="keyword">:bad</span>)
        line))))</pre>
  </div>

<div class="form-block function" id="def-valid-cl-cache-line" data-defines="VALID-CL-CACHE-LINE" data-references="T,MAYBE-RE-VALIDATE-CL-CACHE-LINE,EQ,COND,1+,ACCESS-CL-CACHE-LINE,SETF,CL-CACHE-LINE,ACCESS,STATUS,LET,STATE,W,LINE,DEFUN" data-used-by="FETCH-CL-CACHE-LINE" data-part-name="VALID-CL-CACHE-LINE" data-part-args="STATE,W,LINE" data-part-body="T,STATE,W,MAYBE-RE-VALIDATE-CL-CACHE-LINE,EQ,COND,1+,ACCESS-CL-CACHE-LINE,SETF,LINE,CL-CACHE-LINE,ACCESS,STATUS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="VALID-CL-CACHE-LINE">valid-cl-cache-line</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-valid-cl-cache-line" data-sym="VALID-CL-CACHE-LINE" title="(defun valid-cl-cache-line (line w state)
  (let ((status (access cl-cache-line line :status)))
    (setf (access-cl-cache-line line :hits)
            (1+ (access cl-cache-line line :hits)))
    (cond ((eq status :unknown) (maybe-re-validate-cl-cache-line line w state))">valid-cl-cache-line</a>
  (line <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
  (let ((status (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:status</span>)))
    (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> line <span class="keyword">:hits</span>)
      (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:hits</span>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status <span class="keyword">:unknown</span>) (<a class="sym-link local-def" href="#def-maybe-re-validate-cl-cache-line" data-sym="MAYBE-RE-VALIDATE-CL-CACHE-LINE" title="(defun maybe-re-validate-cl-cache-line (line w state)
  (let* ((ens (ens state)) (extracts (access cl-cache-line line :extracts)))
    (assert (eq (access-cl-cache-line line :status) :unknown))
    (setf (access-cl-cache-line line :problem) &#39;re-validation-interrupted)
    (cond
...">maybe-re-validate-cl-cache-line</a> line <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> line))))</pre>
  </div>

<div class="form-block function" id="def-potential-function-namep" data-defines="POTENTIAL-FUNCTION-NAMEP" data-references="NULL,IGNORE,DECLARE,FUNCTION,CHK-ALL-BUT-NEW-NAME-CMP,MSG,ERP,MV-LET,PREDEFINED,QUOTE,GETPROPC,NOT,SYMBOLP,AND,W,X,DEFUN" data-used-by="POTENTIAL-TERMP" data-part-name="POTENTIAL-FUNCTION-NAMEP" data-part-args="W,X" data-part-body="NULL,IGNORE,DECLARE,FUNCTION,POTENTIAL-FUNCTION-NAMEP,CHK-ALL-BUT-NEW-NAME-CMP,MSG,ERP,MV-LET,W,PREDEFINED,QUOTE,GETPROPC,NOT,X,SYMBOLP,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POTENTIAL-FUNCTION-NAMEP">potential-function-namep</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-potential-function-namep" data-sym="POTENTIAL-FUNCTION-NAMEP" title="(defun potential-function-namep (x w)
  (and (symbolp x) (not (getpropc x &#39;predefined nil w))
       (mv-let (erp msg)
               (chk-all-but-new-name-cmp x &#39;potential-function-namep &#39;function
                                         w)">potential-function-namep</a>
  (x <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp x)
    (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> x 'predefined nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)
      (chk-all-but-new-name-cmp x
        '<a class="sym-link local-def" href="#def-potential-function-namep" data-sym="POTENTIAL-FUNCTION-NAMEP" title="(defun potential-function-namep (x w)
  (and (symbolp x) (not (getpropc x &#39;predefined nil w))
       (mv-let (erp msg)
               (chk-all-but-new-name-cmp x &#39;potential-function-namep &#39;function
                                         w)">potential-function-namep</a>
        'function
        <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
      (declare (ignore <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
      (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> erp))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-potential-termp" data-defines="POTENTIAL-TERMP" data-references="ALL-VARS,SET-DIFFERENCE-EQ,NOT,CADDR,ARITY-ALIST1,CADR,ARGLISTP,LAMBDA,TRUE-LISTP,T,CONS,N,ASSOC-EQ,TEMP,LET*,POTENTIAL-FUNCTION-NAMEP,LENGTH,EQL,ARITY,PREDEFINED,GETPROPC,POTENTIAL-TERM-LISTP,LET,SYMBOLP,CDDR,NULL,CDR,CONSP,AND,QUOTE,CAR,EQ,LEGAL-VARIABLEP,IF,ATOM,COND,PLIST-WORLDP-WITH-FORMALS,XARGS,DECLARE,W,ARITY-ALIST,X,DEFUN,MUTUAL-RECURSION" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="POTENTIAL-TERMP">potential-termp</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-potential-termp" data-sym="POTENTIAL-TERMP" title="(mutual-recursion
 (defun potential-termp (x arity-alist w)
   (declare (xargs :guard (plist-worldp-with-formals w)))
   (cond
    ((atom x)
...">potential-termp</a>
    (x arity-alist <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="basis-b.html#def-plist-worldp-with-formals" data-sym="PLIST-WORLDP-WITH-FORMALS">plist-worldp-with-formals</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (if (<a class="sym-link system" href="basis-a.html#def-legal-variablep" data-sym="LEGAL-VARIABLEP">legal-variablep</a> x)
          arity-alist
          <span class="keyword">:illegal</span>))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'quote) (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr x)) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> x)))
          arity-alist
          <span class="keyword">:illegal</span>))
      ((symbolp (car x)) (let ((arity-alist (potential-term-listp (cdr x) arity-alist <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> arity-alist <span class="keyword">:illegal</span>) <span class="keyword">:illegal</span>)
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car x) 'predefined nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) (<a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> (car x) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)) (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (cdr x)) (<a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> (car x) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                arity-alist
                <span class="keyword">:illegal</span>))
            ((<a class="sym-link local-def" href="#def-potential-function-namep" data-sym="POTENTIAL-FUNCTION-NAMEP" title="(defun potential-function-namep (x w)
  (and (symbolp x) (not (getpropc x &#39;predefined nil w))
       (mv-let (erp msg)
               (chk-all-but-new-name-cmp x &#39;potential-function-namep &#39;function
                                         w)">potential-function-namep</a> (car x) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((temp (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car x) arity-alist)) (n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (cdr x)))
                  (<a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> (if temp
                      (cdr temp)
                      n))
                  (arity-alist (if temp
                      arity-alist
                      (cons (cons (car x) n) arity-alist))))
                (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> n <a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a>)
                  arity-alist
                  <span class="keyword">:illegal</span>)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:illegal</span>))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car x))
         (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (car x))
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car x)) 'lambda)
         (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> <span class="number">3</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (car x)))
         (<a class="sym-link system" href="basis-a.html#def-arglistp" data-sym="ARGLISTP">arglistp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car x)))) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((arity-alist1 (<a class="sym-link local-def" href="#def-potential-termp" data-sym="POTENTIAL-TERMP" title="(mutual-recursion
 (defun potential-termp (x arity-alist w)
   (declare (xargs :guard (plist-worldp-with-formals w)))
   (cond
    ((atom x)
...">potential-termp</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car x)) arity-alist <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)) (arity-alist (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> arity-alist1 <span class="keyword">:illegal</span>)
                <span class="keyword">:illegal</span> (potential-term-listp (cdr x) arity-alist1 <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))))
          (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> arity-alist <span class="keyword">:illegal</span>))
              (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car x)))
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car x))))
              (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car x))) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (cdr x))))
            arity-alist
            <span class="keyword">:illegal</span>)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:illegal</span>)))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> potential-term-listp
    (x arity-alist <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="basis-b.html#def-plist-worldp-with-formals" data-sym="PLIST-WORLDP-WITH-FORMALS">plist-worldp-with-formals</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x nil)
          arity-alist
          <span class="keyword">:illegal</span>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((arity-alist (<a class="sym-link local-def" href="#def-potential-termp" data-sym="POTENTIAL-TERMP" title="(mutual-recursion
 (defun potential-termp (x arity-alist w)
   (declare (xargs :guard (plist-worldp-with-formals w)))
   (cond
    ((atom x)
...">potential-termp</a> (car x) arity-alist <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> arity-alist <span class="keyword">:illegal</span>) <span class="keyword">:illegal</span>)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (potential-term-listp (cdr x) arity-alist <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))))))))</pre>
  </div>

<div class="form-block function" id="def-make-new-cl-cache-line" data-defines="MAKE-NEW-CL-CACHE-LINE" data-references="NOT-WELL-FORMED,COLLECT-FROM-EXTRACTS,POTENTIAL-TERM-LISTP,MAYBE-RE-VALIDATE-CL-CACHE-LINE,WELL-FORMED-LAMBDA-OBJECTP1,COMPILE,MAX-ABSOLUTE-EVENT-NUMBER,+,MAKE-COMPILEABLE-GUARD-AND-BODY-LAMBDAS,BODY-LAMBDA,GUARD-LAMBDA,MV-LET,QUOTE,HARD,ER,OR,NULL,SYNTACTICALLY-PLAUSIBLE-LAMBDA-OBJECTP,EXTRACTS,LET,T,CL-CACHE-LINE,MAKE,EQ,COND,STATE,W,STATUS,FN,DEFUN" data-used-by="ADD-GOOD-LAMBDA-OBJECTS-TO-CL-CACHE,FETCH-CL-CACHE-LINE" data-part-name="MAKE-NEW-CL-CACHE-LINE" data-part-args="STATE,W,STATUS,FN" data-part-body="NOT-WELL-FORMED,COLLECT-FROM-EXTRACTS,POTENTIAL-TERM-LISTP,MAYBE-RE-VALIDATE-CL-CACHE-LINE,WELL-FORMED-LAMBDA-OBJECTP1,COMPILE,W,MAX-ABSOLUTE-EVENT-NUMBER,+,STATE,MAKE-COMPILEABLE-GUARD-AND-BODY-LAMBDAS,BODY-LAMBDA,GUARD-LAMBDA,MV-LET,MAKE-NEW-CL-CACHE-LINE,QUOTE,HARD,ER,OR,NULL,SYNTACTICALLY-PLAUSIBLE-LAMBDA-OBJECTP,EXTRACTS,LET,T,FN,CL-CACHE-LINE,MAKE,STATUS,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-NEW-CL-CACHE-LINE">make-new-cl-cache-line</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-new-cl-cache-line" data-sym="MAKE-NEW-CL-CACHE-LINE" title="(defun make-new-cl-cache-line (fn status w state)
  (cond
   ((eq status :ugly)
    (make cl-cache-line :lambda-object fn :status :ugly :absolute-event-number
          nil :extracts nil :problem nil :hits 1 :guard-code nil :lambda-code
...">make-new-cl-cache-line</a>
  (fn status <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status <span class="keyword">:ugly</span>) (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cl-cache-line
        <span class="keyword">:lambda-object</span> fn
        <span class="keyword">:status</span> <span class="keyword">:ugly</span> <span class="keyword">:absolute-event-number</span> nil
        <span class="keyword">:extracts</span> nil
        <span class="keyword">:problem</span> nil
        <span class="keyword">:hits</span> <span class="number">1</span>
        <span class="keyword">:guard-code</span> nil
        <span class="keyword">:lambda-code</span> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((extracts (syntactically-plausible-lambda-objectp nil fn)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> extracts) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status <span class="keyword">:good</span>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status <span class="keyword">:bad</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                  '<a class="sym-link local-def" href="#def-make-new-cl-cache-line" data-sym="MAKE-NEW-CL-CACHE-LINE" title="(defun make-new-cl-cache-line (fn status w state)
  (cond
   ((eq status :ugly)
    (make cl-cache-line :lambda-object fn :status :ugly :absolute-event-number
          nil :extracts nil :problem nil :hits 1 :guard-code nil :lambda-code
...">make-new-cl-cache-line</a>
                  <span class="string">"The caller of make-new-cl-cache-line said the status of ~
                    ~x0 is ~x1 but we have determined that it is actually ~
                    :UGLY.  Please contact the ACL2 developers."</span>
                  fn
                  status))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cl-cache-line
                  <span class="keyword">:lambda-object</span> fn
                  <span class="keyword">:status</span> <span class="keyword">:ugly</span> <span class="keyword">:absolute-event-number</span> nil
                  <span class="keyword">:extracts</span> nil
                  <span class="keyword">:problem</span> nil
                  <span class="keyword">:hits</span> <span class="number">1</span>
                  <span class="keyword">:guard-code</span> nil
                  <span class="keyword">:lambda-code</span> nil))))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status <span class="keyword">:good</span>) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (guard-lambda body-lambda)
              (<a class="sym-link system" href="defuns.html#def-make-compileable-guard-and-body-lambdas" data-sym="MAKE-COMPILEABLE-GUARD-AND-BODY-LAMBDAS">make-compileable-guard-and-body-lambdas</a> fn state)
              (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cl-cache-line
                <span class="keyword">:lambda-object</span> fn
                <span class="keyword">:status</span> status
                <span class="keyword">:absolute-event-number</span> (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (max-absolute-event-number <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                <span class="keyword">:extracts</span> extracts
                <span class="keyword">:problem</span> nil
                <span class="keyword">:hits</span> <span class="number">1</span>
                <span class="keyword">:guard-code</span> (compile nil guard-lambda)
                <span class="keyword">:lambda-code</span> (compile nil body-lambda))))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status <span class="keyword">:bad</span>) (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cl-cache-line
              <span class="keyword">:lambda-object</span> fn
              <span class="keyword">:status</span> <span class="keyword">:bad</span> <span class="keyword">:absolute-event-number</span> nil
              <span class="keyword">:extracts</span> extracts
              <span class="keyword">:problem</span> nil
              <span class="keyword">:hits</span> <span class="number">1</span>
              <span class="keyword">:guard-code</span> nil
              <span class="keyword">:lambda-code</span> nil))
          ((well-formed-lambda-objectp1 extracts <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) (<a class="sym-link local-def" href="#def-maybe-re-validate-cl-cache-line" data-sym="MAYBE-RE-VALIDATE-CL-CACHE-LINE" title="(defun maybe-re-validate-cl-cache-line (line w state)
  (let* ((ens (ens state)) (extracts (access cl-cache-line line :extracts)))
    (assert (eq (access-cl-cache-line line :status) :unknown))
    (setf (access-cl-cache-line line :problem) &#39;re-validation-interrupted)
    (cond
...">maybe-re-validate-cl-cache-line</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cl-cache-line
                <span class="keyword">:lambda-object</span> fn
                <span class="keyword">:status</span> <span class="keyword">:unknown</span> <span class="keyword">:absolute-event-number</span> nil
                <span class="keyword">:extracts</span> extracts
                <span class="keyword">:problem</span> nil
                <span class="keyword">:hits</span> <span class="number">1</span>
                <span class="keyword">:guard-code</span> nil
                <span class="keyword">:lambda-code</span> nil)
              <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
              state))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (potential-term-listp (<a class="sym-link local-def" href="#def-collect-from-extracts" data-sym="COLLECT-FROM-EXTRACTS" title="(defun collect-from-extracts (key extracts acc)
  (cond ((endp extracts) acc)
        (t
         (collect-from-extracts key (cdr extracts)
                                (case key
...">collect-from-extracts</a> <span class="keyword">:satisfies-exprs</span> extracts
                 (<a class="sym-link local-def" href="#def-collect-from-extracts" data-sym="COLLECT-FROM-EXTRACTS" title="(defun collect-from-extracts (key extracts acc)
  (cond ((endp extracts) acc)
        (t
         (collect-from-extracts key (cdr extracts)
                                (case key
...">collect-from-extracts</a> <span class="keyword">:guard</span> extracts
                   (<a class="sym-link local-def" href="#def-collect-from-extracts" data-sym="COLLECT-FROM-EXTRACTS" title="(defun collect-from-extracts (key extracts acc)
  (cond ((endp extracts) acc)
        (t
         (collect-from-extracts key (cdr extracts)
                                (case key
...">collect-from-extracts</a> <span class="keyword">:body</span> extracts nil)))
               nil
               <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
             <span class="keyword">:illegal</span>) (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cl-cache-line
              <span class="keyword">:lambda-object</span> fn
              <span class="keyword">:status</span> <span class="keyword">:ugly</span> <span class="keyword">:absolute-event-number</span> nil
              <span class="keyword">:extracts</span> nil
              <span class="keyword">:problem</span> nil
              <span class="keyword">:hits</span> <span class="number">1</span>
              <span class="keyword">:guard-code</span> nil
              <span class="keyword">:lambda-code</span> nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cl-cache-line
              <span class="keyword">:lambda-object</span> fn
              <span class="keyword">:status</span> <span class="keyword">:bad</span> <span class="keyword">:absolute-event-number</span> nil
              <span class="keyword">:extracts</span> extracts
              <span class="keyword">:problem</span> 'not-well-formed
              <span class="keyword">:hits</span> <span class="number">1</span>
              <span class="keyword">:guard-code</span> nil
              <span class="keyword">:lambda-code</span> nil)))))))</pre>
  </div>

<div class="form-block function" id="def-fetch-cl-cache-line" data-defines="FETCH-CL-CACHE-LINE" data-references="CL-ALIST,MAKE-CL-CACHE,CL-CACHE-SIZE,SIZE,ACCESS-CL-CACHE,NOT,FOUND,EQ,ASSERT,FINALLY,CL-CACHE-ADD-ENTRY,RETURN,MAKE-NEW-CL-CACHE-LINE,LINE,LET,DO,NULL,OR,WHEN,PREVIOUS-TAIL,CDR,ON,TAIL,AS,-,TO,FROM,I,FOR,LOOP,T,VALID-CL-CACHE-LINE,ACCESS-CL-CACHE-LINE,SETF,IF,CL-CACHE-LINE,HONS-EQUAL-LITE,SETQ,PROGN,PROG1,CAR,COND,ACCESS,AND,VALID-CL-ALIST,CONSP,VALID-P,W,*THE-LIVE-STATE*,STATE,*CL-CACHE*,CL-CACHE,LET*,VLINE,FN,DEFUN" data-used-by="APPLY$-LAMBDA,PING-CL-CACHE-LINE,ADD-GOOD-LAMBDA-OBJECTS-TO-CL-CACHE" data-part-name="FETCH-CL-CACHE-LINE" data-part-args="VLINE,FN" data-part-body="CL-ALIST,MAKE-CL-CACHE,CL-CACHE-SIZE,SIZE,ACCESS-CL-CACHE,NOT,FOUND,EQ,ASSERT,FINALLY,CL-CACHE-ADD-ENTRY,RETURN,MAKE-NEW-CL-CACHE-LINE,LINE,LET,DO,NULL,OR,WHEN,PREVIOUS-TAIL,CDR,ON,TAIL,AS,-,TO,FROM,I,FOR,LOOP,T,VALID-CL-CACHE-LINE,ACCESS-CL-CACHE-LINE,SETF,VLINE,IF,FN,CL-CACHE-LINE,HONS-EQUAL-LITE,SETQ,PROGN,PROG1,CAR,COND,ACCESS,AND,VALID-CL-ALIST,CONSP,VALID-P,W,*THE-LIVE-STATE*,STATE,*CL-CACHE*,CL-CACHE,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FETCH-CL-CACHE-LINE">fetch-cl-cache-line</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fetch-cl-cache-line" data-sym="FETCH-CL-CACHE-LINE" title="(defun fetch-cl-cache-line (fn vline)
  (let* ((cl-cache *cl-cache*)
         (state *the-live-state*)
         (w (w state))
         (valid-p (consp cl-cache))
...">fetch-cl-cache-line</a>
  (fn vline)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cl-cache *cl-cache*) (state *the-live-state*)
      (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (valid-p (consp cl-cache))
      (valid-cl-alist (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> valid-p (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:alist</span>))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((car valid-cl-alist) (prog1 (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (setq *cl-cache* (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:size</span>))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((hons-equal-lite (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line (car valid-cl-alist) <span class="keyword">:lambda-object</span>)
                 fn) (if vline
                  (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> vline <span class="keyword">:hits</span>)
                      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line (car valid-cl-alist) <span class="keyword">:hits</span>))
                    (setf (car valid-cl-alist) vline))
                  (<a class="sym-link local-def" href="#def-valid-cl-cache-line" data-sym="VALID-CL-CACHE-LINE" title="(defun valid-cl-cache-line (line w state)
  (let ((status (access cl-cache-line line :status)))
    (setf (access-cl-cache-line line :hits)
            (1+ (access cl-cache-line line :hits)))
    (cond ((eq status :unknown) (maybe-re-validate-cl-cache-line line w state))">valid-cl-cache-line</a> (car valid-cl-alist) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (loop for
                  i
                  from
                  <span class="number">1</span>
                  to
                  (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:size</span>) <span class="number">2</span>)
                  as
                  tail
                  on
                  (cdr valid-cl-alist)
                  as
                  previous-tail
                  on
                  valid-cl-alist
                  when
                  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (car tail))
                    (hons-equal-lite (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line (car tail) <span class="keyword">:lambda-object</span>)
                      fn))
                  do
                  (let ((line (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (car tail))
                         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> vline (<a class="sym-link local-def" href="#def-make-new-cl-cache-line" data-sym="MAKE-NEW-CL-CACHE-LINE" title="(defun make-new-cl-cache-line (fn status w state)
  (cond
   ((eq status :ugly)
    (make cl-cache-line :lambda-object fn :status :ugly :absolute-event-number
          nil :extracts nil :problem nil :hits 1 :guard-code nil :lambda-code
...">make-new-cl-cache-line</a> fn <span class="keyword">:unknown</span> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                         (if vline
                           (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> vline <span class="keyword">:hits</span>)
                               (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line (car tail) <span class="keyword">:hits</span>))
                             vline)
                           (<a class="sym-link local-def" href="#def-valid-cl-cache-line" data-sym="VALID-CL-CACHE-LINE" title="(defun valid-cl-cache-line (line w state)
  (let ((status (access cl-cache-line line :status)))
    (setf (access-cl-cache-line line :hits)
            (1+ (access cl-cache-line line :hits)))
    (cond ((eq status :unknown) (maybe-re-validate-cl-cache-line line w state))">valid-cl-cache-line</a> (car tail) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
                    (return (<a class="sym-link local-def" href="#def-cl-cache-add-entry" data-sym="CL-CACHE-ADD-ENTRY" title="(defun cl-cache-add-entry (cl-cache line tail previous-tail)
  (let ((alist (access cl-cache cl-cache :alist)))
    (setf (cdr previous-tail) (cdr tail))
    (setf (car tail) line)
    (setf (cdr tail) alist)
...">cl-cache-add-entry</a> cl-cache line tail previous-tail)))
                  finally
                  (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (setq tail
                      (cdr tail)
                      previous-tail
                      (cdr previous-tail))
                    (assert (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> tail (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:last</span>)))
                    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((found (hons-equal-lite (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line (car tail) <span class="keyword">:lambda-object</span>)
                           fn)) (line (if vline
                            (if found
                              (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (setf (<a class="sym-link local-def" href="#def-access-cl-cache-line" data-sym="ACCESS-CL-CACHE-LINE" title="(defmacro access-cl-cache-line (line field)
  (case field
    (:lambda-object `(caaar ,line))
    (:status `(cdaar ,line))
    (:absolute-event-number `(cadar ,line))
...">access-cl-cache-line</a> vline <span class="keyword">:hits</span>)
                                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line (car tail) <span class="keyword">:hits</span>))
                                vline)
                              vline)
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (found (<a class="sym-link local-def" href="#def-valid-cl-cache-line" data-sym="VALID-CL-CACHE-LINE" title="(defun valid-cl-cache-line (line w state)
  (let ((status (access cl-cache-line line :status)))
    (setf (access-cl-cache-line line :hits)
            (1+ (access cl-cache-line line :hits)))
    (cond ((eq status :unknown) (maybe-re-validate-cl-cache-line line w state))">valid-cl-cache-line</a> (car tail) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-make-new-cl-cache-line" data-sym="MAKE-NEW-CL-CACHE-LINE" title="(defun make-new-cl-cache-line (fn status w state)
  (cond
   ((eq status :ugly)
    (make cl-cache-line :lambda-object fn :status :ugly :absolute-event-number
          nil :extracts nil :problem nil :hits 1 :guard-code nil :lambda-code
...">make-new-cl-cache-line</a> fn <span class="keyword">:unknown</span> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))))
                      (when (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> vline (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> found)) (setf (car tail) line))
                      (setf (<a class="sym-link local-def" href="#def-access-cl-cache" data-sym="ACCESS-CL-CACHE" title="(defmacro access-cl-cache (c field)
  (case field
    (:alist `(car ,c))
    (:size `(cadr ,c))
    (:last `(cddr ,c))">access-cl-cache</a> cl-cache <span class="keyword">:alist</span>) tail)
                      (setf (<a class="sym-link local-def" href="#def-access-cl-cache" data-sym="ACCESS-CL-CACHE" title="(defmacro access-cl-cache (c field)
  (case field
    (:alist `(car ,c))
    (:size `(cadr ,c))
    (:last `(cddr ,c))">access-cl-cache</a> cl-cache <span class="keyword">:last</span>) previous-tail)
                      (return line)))))))
          (setq *cl-cache* cl-cache)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((size (<a class="sym-link local-def" href="#def-cl-cache-size" data-sym="CL-CACHE-SIZE" title="(defun cl-cache-size (cl-cache)
  (cond ((consp cl-cache) (access cl-cache cl-cache :size))
        (t (assert (natp cl-cache)) cl-cache)))">cl-cache-size</a> cl-cache)))
          (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> valid-p)
            (setq *cl-cache* size)
            (setq cl-cache
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp cl-cache) (loop for
                    i
                    from
                    <span class="number">1</span>
                    to
                    size
                    as
                    tail
                    on
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:alist</span>)
                    do
                    (setf (car tail) nil)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-make-cl-cache" data-sym="MAKE-CL-CACHE" title="(defun make-cl-cache (size)
  (mv-let (alist last) (make-circular-list size)
          (make cl-cache :alist alist :size size :last last)))">make-cl-cache</a> size)))))
          (prog1 (let ((cl-alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache cl-cache <span class="keyword">:alist</span>)) (line (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> vline (<a class="sym-link local-def" href="#def-make-new-cl-cache-line" data-sym="MAKE-NEW-CL-CACHE-LINE" title="(defun make-new-cl-cache-line (fn status w state)
  (cond
   ((eq status :ugly)
    (make cl-cache-line :lambda-object fn :status :ugly :absolute-event-number
          nil :extracts nil :problem nil :hits 1 :guard-code nil :lambda-code
...">make-new-cl-cache-line</a> fn <span class="keyword">:unknown</span> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
              (setf (car cl-alist) line))
            (setq *cl-cache* cl-cache)))))))</pre>
  </div>

<div class="form-block function" id="def-add-good-lambda-objects-to-cl-cache" data-defines="ADD-GOOD-LAMBDA-OBJECTS-TO-CL-CACHE" data-references="MAKE-NEW-CL-CACHE-LINE,FETCH-CL-CACHE-LINE,DO,IN,OBJ,FOR,LOOP,BOOT-STRAP-FLG,QUOTE,GLOBAL-VAL,NOT,IF,STATE,WRLD,LAMBDA-OBJECTS,DEFUN" data-part-name="ADD-GOOD-LAMBDA-OBJECTS-TO-CL-CACHE" data-part-args="STATE,WRLD,LAMBDA-OBJECTS" data-part-body="STATE,MAKE-NEW-CL-CACHE-LINE,FETCH-CL-CACHE-LINE,DO,LAMBDA-OBJECTS,IN,OBJ,FOR,LOOP,WRLD,BOOT-STRAP-FLG,QUOTE,GLOBAL-VAL,NOT,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADD-GOOD-LAMBDA-OBJECTS-TO-CL-CACHE">add-good-lambda-objects-to-cl-cache</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-add-good-lambda-objects-to-cl-cache" data-sym="ADD-GOOD-LAMBDA-OBJECTS-TO-CL-CACHE" title="(defun add-good-lambda-objects-to-cl-cache (lambda-objects wrld state)
  (if (not (global-val &#39;boot-strap-flg wrld))
      (loop for obj in lambda-objects
            do (fetch-cl-cache-line obj
                                    (make-new-cl-cache-line obj :good wrld
...">add-good-lambda-objects-to-cl-cache</a>
  (lambda-objects wrld state)
  (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'boot-strap-flg wrld))
    (loop for
      obj
      in
      lambda-objects
      do
      (<a class="sym-link local-def" href="#def-fetch-cl-cache-line" data-sym="FETCH-CL-CACHE-LINE" title="(defun fetch-cl-cache-line (fn vline)
  (let* ((cl-cache *cl-cache*)
         (state *the-live-state*)
         (w (w state))
         (valid-p (consp cl-cache))
...">fetch-cl-cache-line</a> obj
        (<a class="sym-link local-def" href="#def-make-new-cl-cache-line" data-sym="MAKE-NEW-CL-CACHE-LINE" title="(defun make-new-cl-cache-line (fn status w state)
  (cond
   ((eq status :ugly)
    (make cl-cache-line :lambda-object fn :status :ugly :absolute-event-number
          nil :extracts nil :problem nil :hits 1 :guard-code nil :lambda-code
...">make-new-cl-cache-line</a> obj <span class="keyword">:good</span> wrld state)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-ping-cl-cache-line" data-defines="PING-CL-CACHE-LINE" data-references="*CL-CACHE*,CL-CACHE,NTH,FETCH-CL-CACHE-LINE,CL-CACHE-LINE,ACCESS,I,DEFUN" data-part-name="PING-CL-CACHE-LINE" data-part-args="I" data-part-body="*CL-CACHE*,CL-CACHE,I,NTH,FETCH-CL-CACHE-LINE,CL-CACHE-LINE,ACCESS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PING-CL-CACHE-LINE">ping-cl-cache-line</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ping-cl-cache-line" data-sym="PING-CL-CACHE-LINE" title="(defun ping-cl-cache-line (i)
  (access cl-cache-line
          (fetch-cl-cache-line
           (access cl-cache-line (nth i (access cl-cache *cl-cache* :alist))
                   :lambda-object)
...">ping-cl-cache-line</a>
  (i)
  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line
    (<a class="sym-link local-def" href="#def-fetch-cl-cache-line" data-sym="FETCH-CL-CACHE-LINE" title="(defun fetch-cl-cache-line (fn vline)
  (let* ((cl-cache *cl-cache*)
         (state *the-live-state*)
         (w (w state))
         (valid-p (consp cl-cache))
...">fetch-cl-cache-line</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line
        (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> i (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache *cl-cache* <span class="keyword">:alist</span>))
        <span class="keyword">:lambda-object</span>)
      nil)
    <span class="keyword">:status</span>))</pre>
  </div>

<div class="form-block function" id="def-prettyify-cl-cache-line" data-defines="PRETTYIFY-CL-CACHE-LINE" data-references="<LAMBDA-CODE>,<GUARD-CODE>,QUOTE,AND,PRETTYIFY-SPLO-EXTRACTS-TUPLES,CL-CACHE-LINE,ACCESS,LIST,LINE,DEFUN" data-part-name="PRETTYIFY-CL-CACHE-LINE" data-part-args="LINE" data-part-body="<LAMBDA-CODE>,<GUARD-CODE>,QUOTE,AND,PRETTYIFY-SPLO-EXTRACTS-TUPLES,LINE,CL-CACHE-LINE,ACCESS,LIST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRETTYIFY-CL-CACHE-LINE">prettyify-cl-cache-line</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prettyify-cl-cache-line" data-sym="PRETTYIFY-CL-CACHE-LINE" title="(defun prettyify-cl-cache-line (line)
  (list (access cl-cache-line line :lambda-object)
        (access cl-cache-line line :status)
        (prettyify-splo-extracts-tuples (access cl-cache-line line :extracts))
        (access cl-cache-line line :problem)
...">prettyify-cl-cache-line</a>
  (line)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:lambda-object</span>)
    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:status</span>)
    (<a class="sym-link local-def" href="#def-prettyify-splo-extracts-tuples" data-sym="PRETTYIFY-SPLO-EXTRACTS-TUPLES" title="(defun prettyify-splo-extracts-tuples (extracts)
  (cond ((endp extracts) nil)
        (t
         (cons
          `(splo-extracts-tuple :gflg
...">prettyify-splo-extracts-tuples</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:extracts</span>))
    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:problem</span>)
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:guard-code</span>) '&lt;guard-code&gt;)
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:lambda-code</span>)
      '&lt;lambda-code&gt;)))</pre>
  </div>

<div class="form-block function" id="def-apply_24-lambda" data-defines="APPLY$-LAMBDA" data-references="CONS,APPLY$-LAMBDA-LOGICAL,NULL,PAIRLIS$,EV-W,VAL,ERP,MV-LET,TERMP,WRLD,GUARD,LET,LAMBDA-FORMALS,LENGTH,MAKE-LIST,SPLO-EXTRACTS-TUPLE,UNTRANSLATE,EV-FNCALL-GUARD-ER,LIST,THROW-RAW-EV-FNCALL,RETURN-FROM,APPLY,CL-CACHE-LINE,ACCESS,GUARD-CHECKING-ON,F-GET-GLOBAL,NOT,COND,FETCH-CL-CACHE-LINE,*AOKP*,LINE,APPLY$,QUASIQUOTE,HARD,ER,LAMBDA$-ALIST,QUOTE,GLOBAL-VAL,ASSOC-EQUAL,OR,CDR,*LAMBDA$-MARKER*,CAR,EQ,CONSP,AND,IF,W,*THE-LIVE-STATE*,STATE,LET*,EV$,VALUES,T,FUNCTION,FTYPE,DECLARE,ARGS,FN,DEFUN" data-part-name="APPLY$-LAMBDA" data-part-args="ARGS,FN" data-part-declare="EV$,VALUES,T,FUNCTION,FTYPE,DECLARE" data-part-body="CONS,APPLY$-LAMBDA-LOGICAL,NULL,PAIRLIS$,EV-W,VAL,ERP,MV-LET,TERMP,WRLD,GUARD,LET,LAMBDA-FORMALS,LENGTH,MAKE-LIST,T,SPLO-EXTRACTS-TUPLE,UNTRANSLATE,EV-FNCALL-GUARD-ER,LIST,THROW-RAW-EV-FNCALL,RETURN-FROM,APPLY,CL-CACHE-LINE,ACCESS,GUARD-CHECKING-ON,F-GET-GLOBAL,NOT,COND,FETCH-CL-CACHE-LINE,*AOKP*,LINE,ARGS,APPLY$,QUASIQUOTE,APPLY$-LAMBDA,HARD,ER,LAMBDA$-ALIST,QUOTE,GLOBAL-VAL,ASSOC-EQUAL,OR,CDR,*LAMBDA$-MARKER*,CAR,EQ,CONSP,AND,IF,FN,W,*THE-LIVE-STATE*,STATE,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="APPLY$-LAMBDA">apply$-lambda</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-apply_24-lambda" data-sym="APPLY$-LAMBDA" title="(defun apply$-lambda (fn args)
  (declare (ftype (function (t t) (values t)) ev$))
  (let* ((state *the-live-state*)
         (w (w state))
         (fn
...">apply$-lambda</a>
  (fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ftype (function (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (values <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) ev$))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((state *the-live-state*) (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (fn (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp fn) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car fn) *lambda$-marker*))
          (cdr (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (cdr fn) (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'lambda$-alist <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                '<a class="sym-link local-def" href="#def-apply_24-lambda" data-sym="APPLY$-LAMBDA" title="(defun apply$-lambda (fn args)
  (declare (ftype (function (t t) (values t)) ev$))
  (let* ((state *the-live-state*)
         (w (w state))
         (fn
...">apply$-lambda</a>
                <span class="string">"Apply$-lambda has encountered an untranslated ~
                               lambda$ expression, ~x0, not resolved by ~
                               lambda-alist$.  We suspect this has occurred ~
                               during the pre-loading of a certified book.  ~
                               Lambda$ should not used in functions or terms ~
                               that might be evaluated during pre-loading of ~
                               books.  We check that there are no lambda$ ~
                               expressions ancestrally used in DEFCONST, ~
                               DEFPKG, and DEFMACRO events.  But we have ~
                               apparently not checked it for some other ~
                               context and so we have allowed a book to be ~
                               certified despite the use of a lambda$ in some ~
                               sensitive context.  Please advise the ACL2 ~
                               developers so we can catch this violation ~
                               earlier.  Meanwhile, you can work around this ~
                               by replacing the offending lambda$ expression ~
                               by its quoted translation and then recertify ~
                               the offending book.  One way to find the fully ~
                               translated form of this lambda$ expression is ~
                               to evaluate~%:trans ~x1~%and grab the quoted ~
                               lambda object in the result.  We can&#39;t do this ~
                               for you because we do not have access to the ~
                               logical world in which the lambda$ is supposed ~
                               to be translated.  Sorry!"</span>
                (cdr fn)
                `(apply$ ,(CDR FN) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
          fn))
      (line (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> *aokp* (<a class="sym-link local-def" href="#def-fetch-cl-cache-line" data-sym="FETCH-CL-CACHE-LINE" title="(defun fetch-cl-cache-line (fn vline)
  (let* ((cl-cache *cl-cache*)
         (state *the-live-state*)
         (w (w state))
         (valid-p (consp cl-cache))
...">fetch-cl-cache-line</a> fn nil))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> line
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on *the-live-state*)
             <span class="keyword">:none</span>))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:status</span>) <span class="keyword">:good</span>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((apply (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:guard-code</span>) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (return-from <a class="sym-link local-def" href="#def-apply_24-lambda" data-sym="APPLY$-LAMBDA" title="(defun apply$-lambda (fn args)
  (declare (ftype (function (t t) (values t)) ev$))
  (let* ((state *the-live-state*)
         (w (w state))
         (fn
...">apply$-lambda</a>
                  (apply (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:lambda-code</span>) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
              ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on *the-live-state*) (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'ev-fncall-guard-er
                    fn
                    <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                    (untranslate (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> splo-extracts-tuple
                        (car (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:extracts</span>))
                        <span class="keyword">:guard</span>)
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
                    (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> fn)))
                    nil)))))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:status</span>) <span class="keyword">:bad</span>) (let ((<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> splo-extracts-tuple
                   (car (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cl-cache-line line <span class="keyword">:extracts</span>))
                   <span class="keyword">:guard</span>)) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((termp <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> wrld) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val)
                    (ev-w <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                      (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> fn) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                      wrld
                      nil
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      nil
                      nil
                      nil)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> erp) val) (return-from <a class="sym-link local-def" href="#def-apply_24-lambda" data-sym="APPLY$-LAMBDA" title="(defun apply$-lambda (fn args)
  (declare (ftype (function (t t) (values t)) ev$))
  (let* ((state *the-live-state*)
         (w (w state))
         (fn
...">apply$-lambda</a> (apply$-lambda-logical fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
                      ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on *the-live-state*) (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'ev-fncall-guard-er
                            fn
                            <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                            (untranslate <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)
                            (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> fn)))
                            nil))))))
                ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on *the-live-state*) (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'ev-fncall-guard-er
                      fn
                      <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                      (cons <span class="keyword">:not-a-term</span> <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>)
                      (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> fn)))
                      nil)))))))))
    (apply$-lambda-logical fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>