<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>acl2-init - ACL2 Book</title>
  <meta property="name" content="acl2-init">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">acl2-init</h1>
    <div class="path"><a href="acl2-init.lisp" class="source-link">acl2-init</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(declaim (optimize (store-xref-data <span class="number">0</span>)))</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(load <span class="string">"acl2.lisp"</span>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((smallp (getenv$-raw <span class="string">"ACL2_SMALL_FIXNUMS"</span>)) (smallp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> smallp (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal smallp <span class="string">""</span>)))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> most-positive-fixnum (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (expt <span class="number">2</span> <span class="number">60</span>)))
       (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> most-negative-fixnum (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (expt <span class="number">2</span> <span class="number">60</span>)))
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> smallp)) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> most-positive-fixnum (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (expt <span class="number">2</span> <span class="number">29</span>)))
       (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> most-negative-fixnum (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (expt <span class="number">2</span> <span class="number">29</span>)))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (smallp (pushnew <span class="keyword">:acl2-small-fixnums</span> *features*))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (error <span class="string">"ACL2 generally assumes that all integers that are
at least -2^60 but less than 2^60 are Lisp fixnums,
but that is not the case for this Lisp implementation.
You can defeat this check by setting environment variable
ACL2_SMALL_FIXNUMS to a non-empty value when building the
ACL2 executable.  However, such ACL2 builds are not as
fully tested as the usual builds and thus may be less
reliable, and they are not guaranteed to work compatibly
with ordinary ACL2 builds on the same set of books."</span>))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (error <span class="string">"This Lisp implementation is not a suitable host for ACL2:
the values of most-negative-fixnum and most-positive-fixnum are
~s and ~s (respectively),
but ACL2 assumes that these have absolute values that are
respectively at least (1- (expt 2 29)) and (expt 2 29), which are
~s and ~s, respectively."</span>
        most-positive-fixnum
        most-negative-fixnum
        (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (expt <span class="number">2</span> <span class="number">29</span>))
        (expt <span class="number">2</span> <span class="number">29</span>)))))</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(proclaim-optimize)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="keyword">:sb-c</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(when (equal (lisp-implementation-version) <span class="string">"1.0.49"</span>)
  (without-package-locks (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> undefine-fun-name
      (name)
      (when name
        (macrolet ((frob (type &amp;optional val)
             `(unless (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (info <span class="keyword">:function</span> ,TYPE name) ,SB-C::VAL)
               (setf (info <span class="keyword">:function</span> ,TYPE name) ,SB-C::VAL))))
          (frob <span class="keyword">:info</span>)
          (frob <span class="keyword">:type</span> (specifier-type 'function))
          (frob <span class="keyword">:where-from</span> <span class="keyword">:assumed</span>)
          (frob <span class="keyword">:inlinep</span>)
          (frob <span class="keyword">:kind</span>)
          (frob <span class="keyword">:macro-function</span>)
          (frob <span class="keyword">:inline-expansion-designator</span>)
          (frob <span class="keyword">:source-transform</span>)
          (frob <span class="keyword">:structure-accessor</span>)
          (frob <span class="keyword">:assumed-type</span>)))
      (values))))</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defconstant *current-acl2-world-key*
  '*current-acl2-world-key*)</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (boundp '*print-pprint-dispatch*))
  (exit-with-build-error <span class="string">"ERROR: We do not support building ACL2 in~%~
     a host ANSI Common Lisp when variable ~s is~%~
     unbound.  Please obtain a more recent version of your Lisp~%~
     implementation."</span>
    '*print-pprint-dispatch*))</pre>
  </div>

<div class="form-block function" id="def-system-call" data-defines="SYSTEM-CALL" data-references="INTEGERP,IF,T,RUN-PROGRAM,PROCESS-EXIT-CODE,ANS,LET,ARGUMENTS,STRING,DEFUN" data-used-by="CHMOD-EXECUTABLE,MAKE-TAGS" data-part-name="SYSTEM-CALL" data-part-args="ARGUMENTS,STRING" data-part-body="INTEGERP,IF,T,ARGUMENTS,STRING,RUN-PROGRAM,PROCESS-EXIT-CODE,ANS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYSTEM-CALL">system-call</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-system-call" data-sym="SYSTEM-CALL" title="(defun system-call (string arguments)
  (let ((ans
         (sb-ext:process-exit-code
          (sb-ext:run-program string arguments :output t :search t))))
    (if (integerp ans)
...">system-call</a>
  (<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> arguments)
  (let ((ans (process-exit-code (run-program <a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> arguments <span class="keyword">:output</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:search</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
    (if (integerp ans)
      ans
      <span class="number">1</span>)))</pre>
  </div>

<div class="form-block function" id="def-read-file-by-lines" data-defines="READ-FILE-BY-LINES" data-references="DELETE-FILE,WHEN,STRING,CONCATENATE,IF,SETQ,T,RETURN,EQ,COND,READ-LINE,TEMP,LINE,MULTIPLE-VALUE-BIND,LOOP,S,WITH-OPEN-FILE,MISSING-NEWLINE-P,QUOTE,EOF,ACC,LET,DELETE-AFTER-READING,&OPTIONAL,FILE,DEFUN" data-part-name="READ-FILE-BY-LINES" data-part-args="DELETE-AFTER-READING,&OPTIONAL,FILE" data-part-body="DELETE-FILE,DELETE-AFTER-READING,WHEN,STRING,CONCATENATE,IF,SETQ,T,RETURN,EQ,COND,READ-LINE,TEMP,LINE,MULTIPLE-VALUE-BIND,LOOP,FILE,S,WITH-OPEN-FILE,MISSING-NEWLINE-P,QUOTE,EOF,ACC,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-FILE-BY-LINES">read-file-by-lines</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-file-by-lines" data-sym="READ-FILE-BY-LINES" title="(defun read-file-by-lines (file &amp;optional delete-after-reading)
  (let ((acc nil) (eof &#39;(nil)) missing-newline-p)
    (with-open-file (s file :direction :input)
      (loop
       (multiple-value-bind (line temp)
...">read-file-by-lines</a>
  (file &amp;optional delete-after-reading)
  (let ((acc nil) (eof '(nil)) missing-newline-p)
    (with-open-file (s file <span class="keyword">:direction</span> <span class="keyword">:input</span>)
      (loop (multiple-value-bind (line temp)
          (read-line s nil eof)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> line eof) (return acc))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setq missing-newline-p temp)
              (setq acc
                (if acc
                  (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> acc (<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> #\
) line)
                  line)))))))
    (when delete-after-reading (delete-file file))
    (if missing-newline-p
      acc
      (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> acc (<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> #\
)))))</pre>
  </div>

<div class="form-block function" id="def-getpid_24" data-defines="GETPID$" data-references="FUNCALL,FBOUNDP,AND,UNIX-GETPID,QUOTE,FN,LET,DEFUN" data-part-name="GETPID$" data-part-body="FUNCALL,FBOUNDP,AND,UNIX-GETPID,QUOTE,FN,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GETPID$">getpid$</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-getpid_24" data-sym="GETPID$" title="(defun getpid$ ()
  (let ((fn &#39;sb-unix:unix-getpid))
    (and fn (fboundp fn) (funcall fn))))">getpid$</a>
  nil
  (let ((fn 'unix-getpid))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> fn (fboundp fn) (funcall fn))))</pre>
  </div>

<div class="form-block function" id="def-system-call_2B" data-defines="SYSTEM-CALL+" data-references="STRINGP,INTEGERP,VALUES,T,RUN-PROGRAM,PROCESS-EXIT-CODE,PROGN,IF,TEMP,LET,SETQ,S,WITH-OUTPUT-TO-STRING,OUR-IGNORE-ERRORS,OUTPUT-STRING,EXIT-CODE,LET*,ARGUMENTS,STRING,DEFUN" data-used-by="GIT-COMMIT-HASH" data-part-name="SYSTEM-CALL+" data-part-args="ARGUMENTS,STRING" data-part-body="STRINGP,INTEGERP,VALUES,T,ARGUMENTS,STRING,RUN-PROGRAM,PROCESS-EXIT-CODE,PROGN,IF,TEMP,LET,SETQ,S,WITH-OUTPUT-TO-STRING,OUR-IGNORE-ERRORS,OUTPUT-STRING,EXIT-CODE,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYSTEM-CALL+">system-call+</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-system-call_2B" data-sym="SYSTEM-CALL+" title="(defun system-call+ (string arguments)
  (let* (exit-code
         (output-string
          (our-ignore-errors
           (with-output-to-string (s)
...">system-call+</a>
  (<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> arguments)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> (exit-code (output-string (our-ignore-errors (with-output-to-string (s)
            (setq exit-code
              (let (temp)
                (if (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (setq temp
                      (process-exit-code (run-program <a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> arguments <span class="keyword">:output</span> s <span class="keyword">:search</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
                    <span class="number">1</span>)
                  temp
                  <span class="number">1</span>)))))))
    (values (if (integerp exit-code)
        exit-code
        <span class="number">1</span>)
      (if (stringp output-string)
        output-string
        <span class="string">""</span>))))</pre>
  </div>

<div class="form-block function" id="def-our-probe-file" data-defines="OUR-PROBE-FILE" data-references="PROBE-FILE,FILENAME,DEFUN" data-used-by="COPY-DISTRIBUTION" data-part-name="OUR-PROBE-FILE" data-part-args="FILENAME" data-part-body="FILENAME,PROBE-FILE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OUR-PROBE-FILE">our-probe-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-our-probe-file" data-sym="OUR-PROBE-FILE" title="(defun our-probe-file (filename) (probe-file filename))">our-probe-file</a> (filename) (probe-file filename))</pre>
  </div>

<div class="form-block function" id="def-copy-distribution" data-defines="COPY-DISTRIBUTION" data-references="MEMBER,OUTSTR,ALL-DIRS,IF,ABSOLUTE-FILENAME,CONS,ABSOLUTE-DIR,NEW-DIR,LET*,FIND,OR,RETURN,NULL,READ-LINE,LOOP,DIR,FILENAME,STRING,QUOTE,CONCATENATE,STR,WITH-OPEN-FILE,MISSING-FILES,LET,OUR-PROBE-FILE,T,FORMAT,OUR-TRUENAME,SUBSEQ,SETQ,LENGTH,1-,CHAR,EQL,ERROR,EQUAL,STRINGP,AND,NOT,COND,USE-EXISTING-TARGET,ALL-FILES,&OPTIONAL,TARGET-DIRECTORY,SOURCE-DIRECTORY,OUTPUT-FILE,DEFUN" data-part-name="COPY-DISTRIBUTION" data-part-args="USE-EXISTING-TARGET,ALL-FILES,&OPTIONAL,TARGET-DIRECTORY,SOURCE-DIRECTORY,OUTPUT-FILE" data-part-body="ERROR,EQUAL,SOURCE-DIRECTORY,STRINGP,AND,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COPY-DISTRIBUTION">copy-distribution</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-copy-distribution" data-sym="COPY-DISTRIBUTION" title="(defun copy-distribution
       (output-file source-directory target-directory
        &amp;optional (all-files &quot;all-files.txt&quot;) (use-existing-target nil))
  (cond
   ((not (and (stringp source-directory) (not (equal source-directory &quot;&quot;))))
...">copy-distribution</a>
  (output-file source-directory
    target-directory
    &amp;optional
    (all-files <span class="string">"all-files.txt"</span>)
    (use-existing-target nil))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp source-directory)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal source-directory <span class="string">""</span>)))) (error <span class="string">"The source directory specified for COPY-DISTRIBUTION~%~
                 must be a non-empty string, but~%~s~%is not."</span>
        source-directory)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp target-directory)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal target-directory <span class="string">""</span>)))) (error <span class="string">"The target directory specified for COPY-DISTRIBUTION~%must ~
                 be a non-empty string, but~%~s~%is not.  (If you invoked ~
                 &quot;make copy-distribution&quot;, perhaps you forgot to set DIR.)"</span>
        target-directory)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> source-directory (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> source-directory)))
       #\/) (setq source-directory
        (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> source-directory <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> source-directory))))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (our-truename (format nil <span class="string">"~a/"</span> source-directory) <span class="keyword">:safe</span>)
         (our-truename <span class="string">""</span>
           <span class="string">"Note: Calling OUR-TRUENAME from COPY-DISTRIBUTION."</span>))) (error <span class="string">"We expected to be in the directory~%~s~%~
                 but instead are apparently in the directory~%~s .~%~
                 Either issue, in Unix, the command~%~
                 cd ~a~%~
                 or else edit the file (presumably, makefile) from~%~
                 which the function COPY-DISTRIBUTION was called,~%~
                 in order to give it the correct second argument."</span>
        source-directory
        (our-truename <span class="string">""</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        source-directory)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> use-existing-target)
       (<a class="sym-link local-def" href="#def-our-probe-file" data-sym="OUR-PROBE-FILE" title="(defun our-probe-file (filename) (probe-file filename))">our-probe-file</a> target-directory)) (error <span class="string">"Aborting copying of the distribution.  The target ~%~
                 distribution directory~%~s~%~
                 already exists!  You may wish to execute the following~%~
                 Unix command to remove it and all its contents:~%~
                 rm -r ~a"</span>
        target-directory
        target-directory)))
  (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
    <span class="string">"Checking that distribution files are all present.~%"</span>)
  (let (missing-files)
    (with-open-file (str (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> source-directory <span class="string">"/"</span> all-files)
        <span class="keyword">:direction</span> <span class="keyword">:input</span>)
      (let (filename (dir nil))
        (loop (setq filename (read-line str nil))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> filename) (return))
            ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal filename <span class="string">""</span>) (equal (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> filename <span class="number">0</span>) #\#)))
            ((find #\	 filename) (error <span class="string">"Found a line with a Tab in it:  ~s"</span> filename))
            ((find #\  filename) (error <span class="string">"Found a line with a Space in it:  ~s"</span> filename))
            ((find #\* filename) (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"Skipping wildcard file name, ~s.~%"</span> filename))
            ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> filename (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> filename))) #\:) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-dir (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> filename <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> filename)))) (absolute-dir (format nil <span class="string">"~a/~a"</span> source-directory new-dir)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-our-probe-file" data-sym="OUR-PROBE-FILE" title="(defun our-probe-file (filename) (probe-file filename))">our-probe-file</a> absolute-dir) (setq dir new-dir))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setq missing-files (cons absolute-dir missing-files))
                    (error <span class="string">"Failed to find directory ~a ."</span> absolute-dir)))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((absolute-filename (if dir
                     (format nil <span class="string">"~a/~a/~a"</span> source-directory dir filename)
                     (format nil <span class="string">"~a/~a"</span> source-directory filename))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-our-probe-file" data-sym="OUR-PROBE-FILE" title="(defun our-probe-file (filename) (probe-file filename))">our-probe-file</a> absolute-filename)) (setq missing-files (cons absolute-filename missing-files))
                    (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"Failed to find file ~a.~%"</span> absolute-filename)))))))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (missing-files (error <span class="string">"~%Missing the following files (and/or directories):~%~s"</span>
          missing-files))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"Distribution files are all present.~%"</span>))))
  (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
    <span class="string">"Preparing to copy distribution files from~%~a/~%to~%~a/ .~%"</span>
    source-directory
    target-directory)
  (let (all-dirs)
    (with-open-file (str (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> source-directory <span class="string">"/"</span> all-files)
        <span class="keyword">:direction</span> <span class="keyword">:input</span>)
      (let (filename)
        (loop (setq filename (read-line str nil))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> filename) (return))
            ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal filename <span class="string">""</span>) (equal (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> filename <span class="number">0</span>) #\#)))
            ((find #\	 filename) (error <span class="string">"Found a line with a Tab in it:  ~s"</span> filename))
            ((find #\  filename) (error <span class="string">"Found a line with a Space in it:  ~s"</span> filename))
            ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> filename (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> filename))) #\:) (setq all-dirs
                (cons (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> filename <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> filename))) all-dirs)))))))
    (with-open-file (str (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> source-directory <span class="string">"/"</span> all-files)
        <span class="keyword">:direction</span> <span class="keyword">:input</span>)
      (with-open-file (outstr output-file <span class="keyword">:direction</span> <span class="keyword">:output</span>)
        (let (filename (dir nil))
          (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> use-existing-target)
            (format outstr <span class="string">"mkdir ~a~%~%"</span> target-directory))
          (loop (setq filename (read-line str nil))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> filename) (return))
              ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal filename <span class="string">""</span>) (equal (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> filename <span class="number">0</span>) #\#)))
              ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> filename (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> filename))) #\:) (setq dir (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> filename <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> filename))))
                (format outstr <span class="string">"~%mkdir ~a/~a~%"</span> target-directory dir))
              ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> dir) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> filename all-dirs <span class="keyword">:test</span> 'equal)) (format outstr
                      <span class="string">"cp -p ~a/~a ~a~%"</span>
                      source-directory
                      filename
                      target-directory))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (format nil <span class="string">"~a/~a"</span> dir filename)
                       all-dirs
                       <span class="keyword">:test</span> 'equal)) (format outstr
                      <span class="string">"cp -p ~a/~a/~a ~a/~a~%"</span>
                      source-directory
                      dir
                      filename
                      target-directory
                      dir)))))))))
    (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
      <span class="string">"Finished creating a command file for copying distribution files."</span>)))</pre>
  </div>

<div class="form-block function" id="def-make-tags" data-defines="MAKE-TAGS" data-references="LIST,REVERSE,CONS,SETQ,EQUAL,*ACL2-FILES*,X,DOLIST,RESULT,LET,APPEND,LST,FMT-STR,LET*,RETURN-FROM,T,FORMAT,QUOTE,SYSTEM-CALL,IGNORE-ERRORS,EQL,NOT,WHEN,DEFUN" data-part-name="MAKE-TAGS" data-part-body="MAKE-TAGS,RETURN-FROM,T,FORMAT,QUOTE,SYSTEM-CALL,IGNORE-ERRORS,EQL,NOT,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-TAGS">make-tags</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-tags" data-sym="MAKE-TAGS" title="(defun make-tags ()
  (when (not (eql (ignore-errors (system-call &quot;which&quot; &#39;(&quot;etags&quot;))) 0))
    (format t &quot;SKIPPING etags: No such program is in the path.&quot;)
    (return-from make-tags 1))
  (system-call &quot;etags&quot;
...">make-tags</a>
  nil
  (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (ignore-errors (<a class="sym-link local-def" href="#def-system-call" data-sym="SYSTEM-CALL" title="(defun system-call (string arguments)
  (let ((ans
         (sb-ext:process-exit-code
          (sb-ext:run-program string arguments :output t :search t))))
    (if (integerp ans)
...">system-call</a> <span class="string">"which"</span> '(<span class="string">"etags"</span>))) <span class="number">0</span>))
    (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"SKIPPING etags: No such program is in the path."</span>)
    (return-from <a class="sym-link local-def" href="#def-make-tags" data-sym="MAKE-TAGS" title="(defun make-tags ()
  (when (not (eql (ignore-errors (system-call &quot;which&quot; &#39;(&quot;etags&quot;))) 0))
    (format t &quot;SKIPPING etags: No such program is in the path.&quot;)
    (return-from make-tags 1))
  (system-call &quot;etags&quot;
...">make-tags</a> <span class="number">1</span>))
  (<a class="sym-link local-def" href="#def-system-call" data-sym="SYSTEM-CALL" title="(defun system-call (string arguments)
  (let ((ans
         (sb-ext:process-exit-code
          (sb-ext:run-program string arguments :output t :search t))))
    (if (integerp ans)
...">system-call</a> <span class="string">"etags"</span>
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fmt-str <span class="string">"~a.lisp"</span>) (lst (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> '(<span class="string">"acl2.lisp"</span> <span class="string">"acl2-check.lisp"</span>
              <span class="string">"acl2-fns.lisp"</span>
              <span class="string">"init.lisp"</span>
              <span class="string">"acl2-init.lisp"</span>
              <span class="string">"akcl-acl2-trace.lisp"</span>
              <span class="string">"allegro-acl2-trace.lisp"</span>
              <span class="string">"openmcl-acl2-trace.lisp"</span>)
            (let ((result nil))
              (dolist (x *acl2-files*)
                (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal x <span class="string">"doc.lisp"</span>))
                  (setq result (cons (format nil fmt-str x) result))))
              (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> result)))))
      (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> lst
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">"multi-threading-raw.lisp"</span>
          <span class="string">"futures-raw.lisp"</span>
          <span class="string">"parallel-raw.lisp"</span>)))))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *saved-build-date-lst* nil)</pre>
  </div>

<div class="form-block function" id="def-git-commit-hash" data-defines="GIT-COMMIT-HASH" data-references="EXIT-WITH-BUILD-ERROR,T,STRING,LIST,REMOVE,COERCE,STRINGP,EQL,AND,COND,QUOTE,SYSTEM-CALL+,IGNORE-ERRORS,HASH,EXIT-CODE,MULTIPLE-VALUE-BIND,QUIET,&OPTIONAL,DEFUN" data-used-by="ACL2-SNAPSHOT-INFO" data-part-name="GIT-COMMIT-HASH" data-part-args="QUIET,&OPTIONAL" data-part-body="EXIT-WITH-BUILD-ERROR,T,QUIET,STRING,LIST,REMOVE,COERCE,STRINGP,EQL,AND,COND,QUOTE,SYSTEM-CALL+,IGNORE-ERRORS,HASH,EXIT-CODE,MULTIPLE-VALUE-BIND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GIT-COMMIT-HASH">git-commit-hash</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-git-commit-hash" data-sym="GIT-COMMIT-HASH" title="(defun git-commit-hash (&amp;optional quiet)
  (multiple-value-bind (exit-code hash)
      (ignore-errors (system-call+ &quot;git&quot; &#39;(&quot;rev-parse&quot; &quot;HEAD&quot;)))
    (cond
     ((and (eql exit-code 0) (stringp hash))
...">git-commit-hash</a>
  (&amp;optional quiet)
  (multiple-value-bind (exit-code hash)
    (ignore-errors (<a class="sym-link local-def" href="#def-system-call_2B" data-sym="SYSTEM-CALL+" title="(defun system-call+ (string arguments)
  (let* (exit-code
         (output-string
          (our-ignore-errors
           (with-output-to-string (s)
...">system-call+</a> <span class="string">"git"</span> '(<span class="string">"rev-parse"</span> <span class="string">"HEAD"</span>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> exit-code <span class="number">0</span>) (stringp hash)) (coerce (<a class="sym-link system" href="axioms.html#def-remove" data-sym="REMOVE">remove</a> #\
 (coerce hash '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)) '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>))
      (quiet nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (exit-with-build-error <span class="string">"Unable to determine git commit hash."</span>)))))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *acl2-release-p* nil)</pre>
  </div>

<div class="form-block function" id="def-acl2-snapshot-info" data-defines="ACL2-SNAPSHOT-INFO" data-references="EXIT-WITH-BUILD-ERROR,GIT-COMMIT-HASH,H,LET,T,*ACL2-RELEASE-P*,EQUAL,NOT,FORMAT,STRING-EQUAL,AND,COND,ERR-STRING,GETENV$-RAW,S,VAR,LET*,DEFUN" data-part-name="ACL2-SNAPSHOT-INFO" data-part-body="EXIT-WITH-BUILD-ERROR,GIT-COMMIT-HASH,H,LET,T,*ACL2-RELEASE-P*,EQUAL,NOT,FORMAT,STRING-EQUAL,AND,COND,ERR-STRING,GETENV$-RAW,S,VAR,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2-SNAPSHOT-INFO">acl2-snapshot-info</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-acl2-snapshot-info" data-sym="ACL2-SNAPSHOT-INFO" title="(defun acl2-snapshot-info ()
  (let* ((var &quot;ACL2_SNAPSHOT_INFO&quot;)
         (s (getenv$-raw var))
         (err-string
          &quot;Unable to determine git commit hash for use in the startup~%~
...">acl2-snapshot-info</a>
  nil
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((var <span class="string">"ACL2_SNAPSHOT_INFO"</span>) (s (getenv$-raw var))
      (err-string <span class="string">"Unable to determine git commit hash for use in the startup~%~
           banner.  Consider setting environment variable ACL2_SNAPSHOT_INFO~%~
           to a message to use in its place, or set it to NONE if you simply~%~
           want to avoid this error."</span>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> s (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> s <span class="string">"NONE"</span>)) (format nil <span class="string">"~% +~72t+"</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> s (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal s <span class="string">""</span>))) (format nil
          <span class="string">"~% +   (Note from the environment when this executable was ~
                    saved:~72t+~% +    ~a)~72t+"</span>
          s))
      (*acl2-release-p* <span class="string">""</span>)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((h (<a class="sym-link local-def" href="#def-git-commit-hash" data-sym="GIT-COMMIT-HASH" title="(defun git-commit-hash (&amp;optional quiet)
  (multiple-value-bind (exit-code hash)
      (ignore-errors (system-call+ &quot;git&quot; &#39;(&quot;rev-parse&quot; &quot;HEAD&quot;)))
    (cond
     ((and (eql exit-code 0) (stringp hash))
...">git-commit-hash</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (h (format nil <span class="string">"~% +   (Git commit hash: ~a)~72t+"</span> h))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (exit-with-build-error err-string var))))))))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *saved-string*
  (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
    <span class="string">"~% ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"</span>
    <span class="string">"~% + ~a~72t+"</span>
    <span class="string">"~% +   built ~a.~72t+"</span>
    (<a class="sym-link local-def" href="#def-acl2-snapshot-info" data-sym="ACL2-SNAPSHOT-INFO" title="(defun acl2-snapshot-info ()
  (let* ((var &quot;ACL2_SNAPSHOT_INFO&quot;)
         (s (getenv$-raw var))
         (err-string
          &quot;Unable to determine git commit hash for use in the startup~%~
...">acl2-snapshot-info</a>)
    <span class="string">"~% + Copyright (C) 2026, Regents of the University of Texas.~72t+"</span>
    <span class="string">"~% + ACL2 comes with ABSOLUTELY NO WARRANTY.  This is free software and~72t+"</span>
    <span class="string">"~% + you are welcome to redistribute it under certain conditions.  For~72t+"</span>
    <span class="string">"~% + details, see the LICENSE file distributed with ACL2.~72t+"</span>
    <span class="string">"~% ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++~%"</span>))</pre>
  </div>

<div class="form-block function" id="def-maybe-load-acl2-init" data-defines="MAYBE-LOAD-ACL2-INIT" data-references="LOAD,T,FORMAT,WHEN,MERGE-PATHNAMES,PROBE-FILE,AND,FL,OUR-USER-HOMEDIR-PATHNAME,HOME,LET*,DEFUN" data-used-by="ACL2-DEFAULT-RESTART" data-part-name="MAYBE-LOAD-ACL2-INIT" data-part-body="LOAD,T,FORMAT,WHEN,MERGE-PATHNAMES,PROBE-FILE,AND,FL,OUR-USER-HOMEDIR-PATHNAME,HOME,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-LOAD-ACL2-INIT">maybe-load-acl2-init</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-load-acl2-init" data-sym="MAYBE-LOAD-ACL2-INIT" title="(defun maybe-load-acl2-init ()
  (let* ((home (our-user-homedir-pathname))
         (fl (and home (probe-file (merge-pathnames home &quot;acl2-init.lsp&quot;)))))
    (when fl
      (format t &quot;; Loading file ~s...~%&quot; fl)
...">maybe-load-acl2-init</a>
  nil
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((home (our-user-homedir-pathname)) (fl (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> home
          (probe-file (merge-pathnames home <span class="string">"acl2-init.lsp"</span>)))))
    (when fl
      (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"; Loading file ~s...~%"</span> fl)
      (load fl)
      (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"; Finished loading file ~s.~%"</span> fl))))</pre>
  </div>

<div class="form-block function" id="def-chmod-executable" data-defines="CHMOD-EXECUTABLE" data-references="LIST,SYSTEM-CALL,SYSOUT-NAME,DEFUN" data-used-by="SAVE-ACL2-IN-SBCL-AUX" data-part-name="CHMOD-EXECUTABLE" data-part-args="SYSOUT-NAME" data-part-body="SYSOUT-NAME,LIST,SYSTEM-CALL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHMOD-EXECUTABLE">chmod-executable</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chmod-executable" data-sym="CHMOD-EXECUTABLE" title="(defun chmod-executable (sysout-name)
  (system-call &quot;chmod&quot; (list &quot;+x&quot; sysout-name)))">chmod-executable</a>
  (sysout-name)
  (<a class="sym-link local-def" href="#def-system-call" data-sym="SYSTEM-CALL" title="(defun system-call (string arguments)
  (let ((ans
         (sb-ext:process-exit-code
          (sb-ext:run-program string arguments :output t :search t))))
    (if (integerp ans)
...">system-call</a> <span class="string">"chmod"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">"+x"</span> sysout-name)))</pre>
  </div>

<div class="form-block function" id="def-saved-build-dates" data-defines="SAVED-BUILD-DATES" data-references="SETQ,CDR,S,DOLIST,*COPY-OF-ACL2-VERSION*,LENGTH,+,MAKE-STRING,EQ,IF,STRING,QUOTE,CONCATENATE,SEP,CAR,RESULT,*SAVED-BUILD-DATE-LST*,REVERSE,DATE-LST,LET*,SEPARATOR,DEFUN" data-used-by="ACL2-DEFAULT-RESTART,WRITE-EXEC-FILE" data-part-name="SAVED-BUILD-DATES" data-part-args="SEPARATOR" data-part-body="SETQ,CDR,S,DOLIST,*COPY-OF-ACL2-VERSION*,LENGTH,+,MAKE-STRING,SEPARATOR,EQ,IF,STRING,QUOTE,CONCATENATE,SEP,CAR,RESULT,*SAVED-BUILD-DATE-LST*,REVERSE,DATE-LST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAVED-BUILD-DATES">saved-build-dates</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-saved-build-dates" data-sym="SAVED-BUILD-DATES" title="(defun saved-build-dates (separator)
  (let* ((date-lst (reverse *saved-build-date-lst*))
         (result (car date-lst))
         (sep
          (concatenate &#39;string (string #\Newline)
...">saved-build-dates</a>
  (separator)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((date-lst (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> *saved-build-date-lst*)) (result (car date-lst))
      (sep (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
          (<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> #\
)
          (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> separator <span class="keyword">:terminal</span>)
            (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
              (make-string (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">3</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> *copy-of-acl2-version*))
                <span class="keyword">:initial-element</span> #\ )
              <span class="string">"then "</span>)
            separator))))
    (dolist (s (cdr date-lst))
      (setq result (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> result sep s)))
    result))</pre>
  </div>

<div class="form-block macro" id="def-our-with-standard-io-syntax" data-defines="OUR-WITH-STANDARD-IO-SYNTAX" data-references="*PRINT-READABLY*,LET,WITH-STANDARD-IO-SYNTAX,QUASIQUOTE,ARGS,&REST,DEFMACRO" data-used-by="WRITE-EXEC-FILE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="OUR-WITH-STANDARD-IO-SYNTAX">our-with-standard-io-syntax</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-our-with-standard-io-syntax" data-sym="OUR-WITH-STANDARD-IO-SYNTAX" title="(defmacro our-with-standard-io-syntax (&amp;rest args)
  `(with-standard-io-syntax
    (let ((*print-readably* nil))
      ,@args)))">our-with-standard-io-syntax</a>
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  `(with-standard-io-syntax (let ((*print-readably* nil))
      ,@ARGS)))</pre>
  </div>

<div class="form-block function" id="def-user-args-string" data-defines="USER-ARGS-STRING" data-references="STRING,CONCATENATE,T,EQ,NULL,COND,QUOTE,SEPARATOR,&OPTIONAL,INERT-ARGS,DEFUN" data-used-by="SAVE-ACL2-IN-SBCL-AUX" data-part-name="USER-ARGS-STRING" data-part-args="QUOTE,SEPARATOR,&OPTIONAL,INERT-ARGS" data-part-body="SEPARATOR,STRING,QUOTE,CONCATENATE,T,EQ,INERT-ARGS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="USER-ARGS-STRING">user-args-string</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-user-args-string" data-sym="USER-ARGS-STRING" title="(defun user-args-string (inert-args &amp;optional (separator &#39;&quot;--&quot;))
  (cond ((null inert-args) &quot;\&quot;$@\&quot;&quot;)
        ((eq inert-args t) (concatenate &#39;string separator &quot; \&quot;$@\&quot;&quot;))
        (t (concatenate &#39;string separator &quot; &quot; inert-args &quot; \&quot;$@\&quot;&quot;))))">user-args-string</a>
  (inert-args &amp;optional (separator '<span class="string">"--"</span>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> inert-args) <span class="string">"&quot;$@&quot;"</span>)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> inert-args <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> separator <span class="string">" &quot;$@&quot;"</span>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> separator <span class="string">" "</span> inert-args <span class="string">" &quot;$@&quot;"</span>))))</pre>
  </div>

<div class="form-block macro" id="def-write-exec-file" data-defines="WRITE-EXEC-FILE" data-references="QUOTE,CONCATENATE,SAVED-BUILD-DATES,FORMAT,OUR-WITH-STANDARD-IO-SYNTAX,QUASIQUOTE,ARGS,&REST,STRING,PREFIX,STREAM,DEFMACRO" data-used-by="SAVE-ACL2-IN-SBCL-AUX" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRITE-EXEC-FILE">write-exec-file</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-write-exec-file" data-sym="WRITE-EXEC-FILE" title="(defmacro write-exec-file (stream prefix string &amp;rest args)
  `(our-with-standard-io-syntax (format ,stream &quot;#!/bin/sh~%~%&quot;)
                                (format ,stream &quot;# Saved ~a~%~%&quot;
                                        (saved-build-dates &quot;#  then &quot;))
                                ,@(and prefix
...">write-exec-file</a>
  (stream prefix <a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  `(<a class="sym-link local-def" href="#def-our-with-standard-io-syntax" data-sym="OUR-WITH-STANDARD-IO-SYNTAX" title="(defmacro our-with-standard-io-syntax (&amp;rest args)
  `(with-standard-io-syntax
    (let ((*print-readably* nil))
      ,@args)))">our-with-standard-io-syntax</a> (format ,STREAM <span class="string">"#!/bin/sh~%~%"</span>)
    (format ,STREAM
      <span class="string">"# Saved ~a~%~%"</span>
      (<a class="sym-link local-def" href="#def-saved-build-dates" data-sym="SAVED-BUILD-DATES" title="(defun saved-build-dates (separator)
  (let* ((date-lst (reverse *saved-build-date-lst*))
         (result (car date-lst))
         (sep
          (concatenate &#39;string (string #\Newline)
...">saved-build-dates</a> <span class="string">"#  then "</span>))
    ,@(AND PREFIX `((FORMAT ,STREAM ,(CAR PREFIX) ,@(CDR PREFIX))))
    (format ,STREAM
      (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> <span class="string">"exec "</span> ,STRING)
      ,@ARGS)))</pre>
  </div>

<div class="form-block function" id="def-proclaim-files" data-defines="PROCLAIM-FILES" data-references="CLOSE,PROCLAIM-FILE,EQUAL,*ACL2-FILES*,FL,DOLIST,ERROR,SAFE-OPEN,SETQ,OR,STR,LET,T,FORMAT,DELETE-FILE,PROBE-FILE,WHEN,RETURN-FROM,EQ,NOT,*DO-PROCLAIMS*,AND,UNLESS,OUTFILENAME,DEFUN" data-used-by="GENERATE-ACL2-PROCLAIMS" data-part-name="PROCLAIM-FILES" data-part-args="OUTFILENAME" data-part-body="PROCLAIM-FILES,RETURN-FROM,EQ,NOT,*DO-PROCLAIMS*,AND,UNLESS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROCLAIM-FILES">proclaim-files</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-proclaim-files" data-sym="PROCLAIM-FILES" title="(defun proclaim-files (outfilename)
  (unless (and *do-proclaims* (not (eq *do-proclaims* :gcl)))
    (return-from proclaim-files nil))
  (when (probe-file outfilename) (delete-file outfilename))
  (format t &quot;Writing proclaim forms for ACL2 source files to file ~s.~%&quot;
...">proclaim-files</a>
  (outfilename)
  (unless (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> *do-proclaims* (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> *do-proclaims* <span class="keyword">:gcl</span>)))
    (return-from <a class="sym-link local-def" href="#def-proclaim-files" data-sym="PROCLAIM-FILES" title="(defun proclaim-files (outfilename)
  (unless (and *do-proclaims* (not (eq *do-proclaims* :gcl)))
    (return-from proclaim-files nil))
  (when (probe-file outfilename) (delete-file outfilename))
  (format t &quot;Writing proclaim forms for ACL2 source files to file ~s.~%&quot;
...">proclaim-files</a> nil))
  (when (probe-file outfilename) (delete-file outfilename))
  (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
    <span class="string">"Writing proclaim forms for ACL2 source files to file ~s.~%"</span>
    outfilename)
  (let (str)
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (setq str (safe-open outfilename <span class="keyword">:direction</span> <span class="keyword">:output</span>))
      (error <span class="string">"Unable to open file ~s for output."</span> outfilename))
    (dolist (fl *acl2-files*)
      (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal fl <span class="string">"doc.lisp"</span>))
        (proclaim-file (format nil <span class="string">"~a.lisp"</span> fl) str)))
    (close str)))</pre>
  </div>

<div class="form-block function" id="def-insert-string" data-defines="INSERT-STRING" data-references="STRING,QUOTE,CONCATENATE,T,NULL,COND,S,DEFUN" data-used-by="SAVE-ACL2-IN-SBCL-AUX" data-part-name="INSERT-STRING" data-part-args="S" data-part-body="STRING,QUOTE,CONCATENATE,T,S,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSERT-STRING">insert-string</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-insert-string" data-sym="INSERT-STRING" title="(defun insert-string (s) (cond ((null s) &quot;&quot;) (t (concatenate &#39;string &quot; &quot; s))))">insert-string</a>
  (s)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> s) <span class="string">""</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> <span class="string">" "</span> s))))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defconstant *thisscriptdir-def*
  <span class="string">"absdir=`perl -e &#39;use Cwd &quot;abs_path&quot;;print abs_path(shift)&#39; $0`
THISSCRIPTDIR=&quot;$( cd &quot;$( dirname &quot;$absdir&quot; )&quot; &amp;&amp; pwd -P )&quot;
"</span>)</pre>
  </div>

<div class="form-block function" id="def-use-thisscriptdir-p" data-defines="USE-THISSCRIPTDIR-P" data-references="*DIRECTORY-SEPARATOR*,QUOTE,SYMBOL-VALUE,POSITION,NOT,EQUAL,AND,CORE-NAME,SYSOUT-NAME,DEFUN" data-used-by="SAVE-ACL2-IN-SBCL-AUX" data-part-name="USE-THISSCRIPTDIR-P" data-part-args="CORE-NAME,SYSOUT-NAME" data-part-body="*DIRECTORY-SEPARATOR*,QUOTE,SYMBOL-VALUE,POSITION,NOT,CORE-NAME,SYSOUT-NAME,EQUAL,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="USE-THISSCRIPTDIR-P">use-thisscriptdir-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-use-thisscriptdir-p" data-sym="USE-THISSCRIPTDIR-P" title="(defun use-thisscriptdir-p (sysout-name core-name)
  (and (equal sysout-name core-name)
       (not (position (symbol-value &#39;*directory-separator*) core-name))))">use-thisscriptdir-p</a>
  (sysout-name core-name)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal sysout-name core-name)
    (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-position" data-sym="POSITION">position</a> (symbol-value '<a class="sym-link system" href="axioms.html#def-_2Adirectory-separator_2A" data-sym="*DIRECTORY-SEPARATOR*">*directory-separator*</a>) core-name))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *acl2-default-restart-complete* nil)</pre>
  </div>

<div class="form-block function" id="def-fix-default-pathname-defaults" data-defines="FIX-DEFAULT-PATHNAME-DEFAULTS" data-references="DEFUN" data-used-by="ACL2-DEFAULT-RESTART" data-part-name="FIX-DEFAULT-PATHNAME-DEFAULTS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-DEFAULT-PATHNAME-DEFAULTS">fix-default-pathname-defaults</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-default-pathname-defaults" data-sym="FIX-DEFAULT-PATHNAME-DEFAULTS" title="(defun fix-default-pathname-defaults () nil)">fix-default-pathname-defaults</a> nil nil)</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *print-startup-banner* <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *lp-ever-entered-p* nil)</pre>
  </div>

<div class="form-block function" id="def-acl2-version_2B" data-defines="ACL2-VERSION+" data-references="T,*ACL2-RELEASE-P*,COND,*COPY-OF-ACL2-VERSION*,FORMAT,DEFUN" data-used-by="ACL2-DEFAULT-RESTART" data-part-name="ACL2-VERSION+" data-part-body="T,*ACL2-RELEASE-P*,COND,*COPY-OF-ACL2-VERSION*,FORMAT" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2-VERSION+">acl2-version+</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-acl2-version_2B" data-sym="ACL2-VERSION+" title="(defun acl2-version+ ()
  (format nil &quot;~a~a&quot; *copy-of-acl2-version*
          (cond (*acl2-release-p* &quot;&quot;)
                (t
                 (format nil &quot;+ (a development snapshot based on ~a)&quot;">acl2-version+</a>
  nil
  (format nil
    <span class="string">"~a~a"</span>
    *copy-of-acl2-version*
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (*acl2-release-p* <span class="string">""</span>)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (format nil
          <span class="string">"+ (a development snapshot based on ~a)"</span>
          *copy-of-acl2-version*)))))</pre>
  </div>

<div class="form-block function" id="def-acl2-default-restart" data-defines="ACL2-DEFAULT-RESTART" data-references="IN-PACKAGE,QUASIQUOTE,EVAL,MAYBE-LOAD-ACL2-INIT,SAVED-BUILD-DATES,ACL2-VERSION+,*SAVED-STRING*,T,FORMAT,*PRINT-STARTUP-BANNER*,ACL2H-INIT,QFUNCALL,NOT,WHEN,FIX-DEFAULT-PATHNAME-DEFAULTS,ACL2-SET-CHARACTER-ENCODING,SETQ,PROCLAIM-OPTIMIZE,*LP-EVER-ENTERED-P*,PRODUCED-BY-SAVE-EXEC-P,LET,RETURN-FROM,*ACL2-DEFAULT-RESTART-COMPLETE*,IF,CALLED-BY-LP,&OPTIONAL,DEFUN" data-used-by="SBCL-RESTART" data-part-name="ACL2-DEFAULT-RESTART" data-part-args="CALLED-BY-LP,&OPTIONAL" data-part-body="ACL2-DEFAULT-RESTART,RETURN-FROM,*ACL2-DEFAULT-RESTART-COMPLETE*,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2-DEFAULT-RESTART">acl2-default-restart</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-acl2-default-restart" data-sym="ACL2-DEFAULT-RESTART" title="(defun acl2-default-restart (&amp;optional called-by-lp)
  (if *acl2-default-restart-complete*
      (return-from acl2-default-restart nil))
  (let ((produced-by-save-exec-p *lp-ever-entered-p*))
    (proclaim-optimize)
...">acl2-default-restart</a>
  (&amp;optional called-by-lp)
  (if *acl2-default-restart-complete*
    (return-from <a class="sym-link local-def" href="#def-acl2-default-restart" data-sym="ACL2-DEFAULT-RESTART" title="(defun acl2-default-restart (&amp;optional called-by-lp)
  (if *acl2-default-restart-complete*
      (return-from acl2-default-restart nil))
  (let ((produced-by-save-exec-p *lp-ever-entered-p*))
    (proclaim-optimize)
...">acl2-default-restart</a> nil))
  (let ((produced-by-save-exec-p *lp-ever-entered-p*))
    (proclaim-optimize)
    (setq *lp-ever-entered-p* nil)
    (acl2-set-character-encoding)
    (<a class="sym-link local-def" href="#def-fix-default-pathname-defaults" data-sym="FIX-DEFAULT-PATHNAME-DEFAULTS" title="(defun fix-default-pathname-defaults () nil)">fix-default-pathname-defaults</a>)
    (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> produced-by-save-exec-p) (qfuncall acl2h-init))
    (when *print-startup-banner*
      (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
        *saved-string*
        (<a class="sym-link local-def" href="#def-acl2-version_2B" data-sym="ACL2-VERSION+" title="(defun acl2-version+ ()
  (format nil &quot;~a~a&quot; *copy-of-acl2-version*
          (cond (*acl2-release-p* &quot;&quot;)
                (t
                 (format nil &quot;+ (a development snapshot based on ~a)&quot;">acl2-version+</a>)
        (<a class="sym-link local-def" href="#def-saved-build-dates" data-sym="SAVED-BUILD-DATES" title="(defun saved-build-dates (separator)
  (let* ((date-lst (reverse *saved-build-date-lst*))
         (result (car date-lst))
         (sep
          (concatenate &#39;string (string #\Newline)
...">saved-build-dates</a> <span class="keyword">:terminal</span>)))
    (<a class="sym-link local-def" href="#def-maybe-load-acl2-init" data-sym="MAYBE-LOAD-ACL2-INIT" title="(defun maybe-load-acl2-init ()
  (let* ((home (our-user-homedir-pathname))
         (fl (and home (probe-file (merge-pathnames home &quot;acl2-init.lsp&quot;)))))
    (when fl
      (format t &quot;; Loading file ~s...~%&quot; fl)
...">maybe-load-acl2-init</a>)
    (eval `(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> ,*STARTUP-PACKAGE-NAME*))
    (setq *acl2-default-restart-complete* <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> called-by-lp))
    nil))</pre>
  </div>

<div class="form-block function" id="def-sbcl-restart" data-defines="SBCL-RESTART" data-references="LP,QUOTE,EVAL,ACL2-DEFAULT-RESTART,DEFUN" data-part-name="SBCL-RESTART" data-part-body="ACL2-DEFAULT-RESTART" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SBCL-RESTART">sbcl-restart</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sbcl-restart" data-sym="SBCL-RESTART" title="(defun sbcl-restart () (acl2-default-restart) (eval &#39;(lp)))">sbcl-restart</a> nil (<a class="sym-link local-def" href="#def-acl2-default-restart" data-sym="ACL2-DEFAULT-RESTART" title="(defun acl2-default-restart (&amp;optional called-by-lp)
  (if *acl2-default-restart-complete*
      (return-from acl2-default-restart nil))
  (let ((produced-by-save-exec-p *lp-ever-entered-p*))
    (proclaim-optimize)
...">acl2-default-restart</a>) (eval '(lp)))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *sbcl-dynamic-space-size* <span class="number">32000</span>)</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *sbcl-home-dir*
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((sbcl-home-env (getenv$-raw <span class="string">"SBCL_HOME"</span>)) (sbcl-home-env (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> sbcl-home-env (probe-file sbcl-home-env)))
      (core-dir (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (boundp '*core-pathname*)
          (pathname-directory *core-pathname*)))
      (in-place (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> core-dir (equal (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> core-dir)) <span class="string">"output"</span>)))
      (installed (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> core-dir (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> in-place)))
      (sbcl-home-installed (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> installed (make-pathname <span class="keyword">:directory</span> core-dir)))
      (sbcl-home-in-place-old (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> in-place
          (make-pathname <span class="keyword">:directory</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> core-dir <span class="number">1</span>) '(<span class="string">"contrib"</span>)))))
      (sbcl-home-in-place-new (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> in-place
          (make-pathname <span class="keyword">:directory</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> core-dir <span class="number">1</span>) '(<span class="string">"obj"</span> <span class="string">"sbcl-home"</span>)))))
      (sbcl-home-detected (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> sbcl-home-installed (probe-file sbcl-home-installed))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> sbcl-home-in-place-new
            (probe-file sbcl-home-in-place-new))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> sbcl-home-in-place-old
            (probe-file sbcl-home-in-place-old)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> sbcl-home-env
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> in-place
             core-dir
             (equal sbcl-home-env
               (probe-file (make-pathname <span class="keyword">:directory</span> core-dir)))))) (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> sbcl-home-detected
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal sbcl-home-env sbcl-home-detected)))
          (warn <span class="string">"SBCL_HOME is currently set to &quot;~a&quot;, but our heuristics ~
               indicate that it should be set to &quot;~a&quot;.  The ACL2 image we ~
               save may not work correctly.~%"</span>
            sbcl-home-env
            sbcl-home-detected))
        (namestring sbcl-home-env))
      (sbcl-home-detected (namestring sbcl-home-detected))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (exit-with-build-error <span class="string">"Could not determine a suitable value for the environment variable ~
          SBCL_HOME.~%If it is set, please try unsetting it or correcting ~
          it.~%If it is not set, please try setting it to an appropriate ~
          value."</span>)))))</pre>
  </div>

<div class="form-block function" id="def-save-acl2-in-sbcl-aux" data-defines="SAVE-ACL2-IN-SBCL-AUX" data-references="SAVE-LISP-AND-DIE,GC,CHMOD-EXECUTABLE,USER-ARGS-STRING,INSERT-STRING,*SBCL-DYNAMIC-SPACE-SIZE*,*SBCL-HOME-DIR*,FORMAT,*THISSCRIPTDIR-DEF*,WRITE-EXEC-FILE,*POSIX-ARGV*,CAR,T,*RUNTIME-PATHNAME*,OUR-TRUENAME,OR,PROG,LET,STR,WITH-OPEN-FILE,STRING,QUOTE,CONCATENATE,SETQ,WHEN,DELETE-FILE,PROBE-FILE,IF,SYSOUT-CORE,UNIX-FULL-PATHNAME,EVENTUAL-SYSOUT-CORE,USE-THISSCRIPTDIR-P,LET*,INHIBIT-WARNINGS,OPTIMIZE,DECLARE,INERT-ARGS,TOPLEVEL-ARGS,HOST-LISP-ARGS,CORE-NAME,SYSOUT-NAME,DEFUN" data-used-by="SAVE-EXEC-RAW,SAVE-ACL2-IN-SBCL" data-part-name="SAVE-ACL2-IN-SBCL-AUX" data-part-args="INERT-ARGS,TOPLEVEL-ARGS,HOST-LISP-ARGS,CORE-NAME,SYSOUT-NAME" data-part-declare="INHIBIT-WARNINGS,OPTIMIZE,DECLARE" data-part-body="SAVE-LISP-AND-DIE,GC,CHMOD-EXECUTABLE,INERT-ARGS,USER-ARGS-STRING,TOPLEVEL-ARGS,HOST-LISP-ARGS,INSERT-STRING,*SBCL-DYNAMIC-SPACE-SIZE*,*SBCL-HOME-DIR*,FORMAT,*THISSCRIPTDIR-DEF*,WRITE-EXEC-FILE,*POSIX-ARGV*,CAR,T,*RUNTIME-PATHNAME*,OUR-TRUENAME,OR,PROG,LET,STR,WITH-OPEN-FILE,STRING,QUOTE,CONCATENATE,SETQ,WHEN,DELETE-FILE,PROBE-FILE,IF,SYSOUT-CORE,UNIX-FULL-PATHNAME,EVENTUAL-SYSOUT-CORE,CORE-NAME,SYSOUT-NAME,USE-THISSCRIPTDIR-P,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAVE-ACL2-IN-SBCL-AUX">save-acl2-in-sbcl-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-save-acl2-in-sbcl-aux" data-sym="SAVE-ACL2-IN-SBCL-AUX" title="(defun save-acl2-in-sbcl-aux
       (sysout-name core-name host-lisp-args toplevel-args inert-args)
  (declare (optimize (sb-ext:inhibit-warnings 3)))
  (let* ((use-thisscriptdir-p (use-thisscriptdir-p sysout-name core-name))
         (eventual-sysout-core (unix-full-pathname core-name &quot;core&quot;))
...">save-acl2-in-sbcl-aux</a>
  (sysout-name core-name
    host-lisp-args
    toplevel-args
    inert-args)
  (declare (optimize (inhibit-warnings <span class="number">3</span>)))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link local-def" href="#def-use-thisscriptdir-p" data-sym="USE-THISSCRIPTDIR-P" title="(defun use-thisscriptdir-p (sysout-name core-name)
  (and (equal sysout-name core-name)
       (not (position (symbol-value &#39;*directory-separator*) core-name))))">use-thisscriptdir-p</a> (<a class="sym-link local-def" href="#def-use-thisscriptdir-p" data-sym="USE-THISSCRIPTDIR-P" title="(defun use-thisscriptdir-p (sysout-name core-name)
  (and (equal sysout-name core-name)
       (not (position (symbol-value &#39;*directory-separator*) core-name))))">use-thisscriptdir-p</a> sysout-name core-name)) (eventual-sysout-core (unix-full-pathname core-name <span class="string">"core"</span>))
      (sysout-core (unix-full-pathname sysout-name <span class="string">"core"</span>)))
    (if (probe-file sysout-name)
      (delete-file sysout-name))
    (if (probe-file eventual-sysout-core)
      (delete-file eventual-sysout-core))
    (when <a class="sym-link local-def" href="#def-use-thisscriptdir-p" data-sym="USE-THISSCRIPTDIR-P" title="(defun use-thisscriptdir-p (sysout-name core-name)
  (and (equal sysout-name core-name)
       (not (position (symbol-value &#39;*directory-separator*) core-name))))">use-thisscriptdir-p</a>
      (setq eventual-sysout-core
        (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> <span class="string">"$THISSCRIPTDIR/"</span> core-name <span class="string">".core"</span>)))
    (with-open-file (str sysout-name <span class="keyword">:direction</span> <span class="keyword">:output</span>)
      (let ((prog (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (our-truename *runtime-pathname* <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
             (car *posix-argv*))))
        (<a class="sym-link local-def" href="#def-write-exec-file" data-sym="WRITE-EXEC-FILE" title="(defmacro write-exec-file (stream prefix string &amp;rest args)
  `(our-with-standard-io-syntax (format ,stream &quot;#!/bin/sh~%~%&quot;)
                                (format ,stream &quot;# Saved ~a~%~%&quot;
                                        (saved-build-dates &quot;#  then &quot;))
                                ,@(and prefix
...">write-exec-file</a> str
          (<span class="string">"~a~a~%"</span> (if <a class="sym-link local-def" href="#def-use-thisscriptdir-p" data-sym="USE-THISSCRIPTDIR-P" title="(defun use-thisscriptdir-p (sysout-name core-name)
  (and (equal sysout-name core-name)
       (not (position (symbol-value &#39;*directory-separator*) core-name))))">use-thisscriptdir-p</a>
              *thisscriptdir-def*
              <span class="string">""</span>)
            (format nil <span class="string">"export SBCL_HOME=&#39;~a&#39;"</span> *sbcl-home-dir*))
          <span class="string">"~s --tls-limit 16384 --dynamic-space-size ~s --control-stack-size ~
          64 --disable-ldb --core ~s~a ${SBCL_USER_ARGS} ~
          --end-runtime-options --no-userinit --eval &#39;(acl2::sbcl-restart)&#39;~a ~a~%"</span>
          prog
          *sbcl-dynamic-space-size*
          eventual-sysout-core
          (<a class="sym-link local-def" href="#def-insert-string" data-sym="INSERT-STRING" title="(defun insert-string (s) (cond ((null s) &quot;&quot;) (t (concatenate &#39;string &quot; &quot; s))))">insert-string</a> host-lisp-args)
          (<a class="sym-link local-def" href="#def-insert-string" data-sym="INSERT-STRING" title="(defun insert-string (s) (cond ((null s) &quot;&quot;) (t (concatenate &#39;string &quot; &quot; s))))">insert-string</a> toplevel-args)
          (<a class="sym-link local-def" href="#def-user-args-string" data-sym="USER-ARGS-STRING" title="(defun user-args-string (inert-args &amp;optional (separator &#39;&quot;--&quot;))
  (cond ((null inert-args) &quot;\&quot;$@\&quot;&quot;)
        ((eq inert-args t) (concatenate &#39;string separator &quot; \&quot;$@\&quot;&quot;))
        (t (concatenate &#39;string separator &quot; &quot; inert-args &quot; \&quot;$@\&quot;&quot;))))">user-args-string</a> inert-args <span class="string">"--end-toplevel-options"</span>))))
    (<a class="sym-link local-def" href="#def-chmod-executable" data-sym="CHMOD-EXECUTABLE" title="(defun chmod-executable (sysout-name)
  (system-call &quot;chmod&quot; (list &quot;+x&quot; sysout-name)))">chmod-executable</a> sysout-name)
    (gc)
    (save-lisp-and-die sysout-core <span class="keyword">:purify</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block function" id="def-save-acl2-in-sbcl" data-defines="SAVE-ACL2-IN-SBCL" data-references="SAVE-ACL2-IN-SBCL-AUX,FORMAT,STR,WITH-OPEN-FILE,DELETE-FILE,PROBE-FILE,IF,WITH-WARNINGS-SUPPRESSED,IGNORE,DECLARE,CORE-NAME,MODE,&OPTIONAL,SYSOUT-NAME,DEFUN" data-used-by="SAVE-ACL2" data-part-name="SAVE-ACL2-IN-SBCL" data-part-args="CORE-NAME,MODE,&OPTIONAL,SYSOUT-NAME" data-part-declare="MODE,IGNORE,DECLARE" data-part-body="CORE-NAME,SYSOUT-NAME,SAVE-ACL2-IN-SBCL-AUX,FORMAT,STR,WITH-OPEN-FILE,DELETE-FILE,PROBE-FILE,IF,WITH-WARNINGS-SUPPRESSED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAVE-ACL2-IN-SBCL">save-acl2-in-sbcl</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-save-acl2-in-sbcl" data-sym="SAVE-ACL2-IN-SBCL" title="(defun save-acl2-in-sbcl (sysout-name &amp;optional mode core-name)
  (declare (ignore mode))
  (with-warnings-suppressed
   (if (probe-file &quot;worklispext&quot;)
       (delete-file &quot;worklispext&quot;))
...">save-acl2-in-sbcl</a>
  (sysout-name &amp;optional mode core-name)
  (declare (ignore mode))
  (with-warnings-suppressed (if (probe-file <span class="string">"worklispext"</span>)
      (delete-file <span class="string">"worklispext"</span>))
    (with-open-file (str <span class="string">"worklispext"</span> <span class="keyword">:direction</span> <span class="keyword">:output</span>)
      (format str <span class="string">"core"</span>))
    (<a class="sym-link local-def" href="#def-save-acl2-in-sbcl-aux" data-sym="SAVE-ACL2-IN-SBCL-AUX" title="(defun save-acl2-in-sbcl-aux
       (sysout-name core-name host-lisp-args toplevel-args inert-args)
  (declare (optimize (sb-ext:inhibit-warnings 3)))
  (let* ((use-thisscriptdir-p (use-thisscriptdir-p sysout-name core-name))
         (eventual-sysout-core (unix-full-pathname core-name &quot;core&quot;))
...">save-acl2-in-sbcl-aux</a> sysout-name core-name nil nil nil)))</pre>
  </div>

<div class="form-block function" id="def-save-exec-raw" data-defines="SAVE-EXEC-RAW" data-references="SAVE-ACL2-IN-SBCL-AUX,*ACL2-DEFAULT-RESTART-COMPLETE*,SETQ,WITH-WARNINGS-SUPPRESSED,INERT-ARGS,TOPLEVEL-ARGS,HOST-LISP-ARGS,SYSOUT-NAME,DEFUN" data-part-name="SAVE-EXEC-RAW" data-part-args="INERT-ARGS,TOPLEVEL-ARGS,HOST-LISP-ARGS,SYSOUT-NAME" data-part-body="INERT-ARGS,TOPLEVEL-ARGS,HOST-LISP-ARGS,SYSOUT-NAME,SAVE-ACL2-IN-SBCL-AUX,*ACL2-DEFAULT-RESTART-COMPLETE*,SETQ,WITH-WARNINGS-SUPPRESSED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAVE-EXEC-RAW">save-exec-raw</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-save-exec-raw" data-sym="SAVE-EXEC-RAW" title="(defun save-exec-raw (sysout-name host-lisp-args toplevel-args inert-args)
  (with-warnings-suppressed (setq *acl2-default-restart-complete* nil)
                            (save-acl2-in-sbcl-aux sysout-name sysout-name
                                                   host-lisp-args toplevel-args
                                                   inert-args)))">save-exec-raw</a>
  (sysout-name host-lisp-args toplevel-args inert-args)
  (with-warnings-suppressed (setq *acl2-default-restart-complete* nil)
    (<a class="sym-link local-def" href="#def-save-acl2-in-sbcl-aux" data-sym="SAVE-ACL2-IN-SBCL-AUX" title="(defun save-acl2-in-sbcl-aux
       (sysout-name core-name host-lisp-args toplevel-args inert-args)
  (declare (optimize (sb-ext:inhibit-warnings 3)))
  (let* ((use-thisscriptdir-p (use-thisscriptdir-p sysout-name core-name))
         (eventual-sysout-core (unix-full-pathname core-name &quot;core&quot;))
...">save-acl2-in-sbcl-aux</a> sysout-name
      sysout-name
      host-lisp-args
      toplevel-args
      inert-args)))</pre>
  </div>

<div class="form-block function" id="def-rc-filename" data-defines="RC-FILENAME" data-references="STRING,QUOTE,CONCATENATE,DIR,DEFUN" data-used-by="WRITE-ACL2RC" data-part-name="RC-FILENAME" data-part-args="DIR" data-part-body="DIR,STRING,QUOTE,CONCATENATE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RC-FILENAME">rc-filename</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-rc-filename" data-sym="RC-FILENAME" title="(defun rc-filename (dir) (concatenate &#39;string dir &quot;.acl2rc&quot;))">rc-filename</a>
  (dir)
  (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> dir <span class="string">".acl2rc"</span>))</pre>
  </div>

<div class="form-block function" id="def-write-acl2rc" data-defines="WRITE-ACL2RC" data-references="FORMAT,STR,WITH-OPEN-FILE,PROBE-FILE,NOT,IF,STRING,QUOTE,CONCATENATE,RC-FILENAME,LET,DIR,DEFUN" data-part-name="WRITE-ACL2RC" data-part-args="DIR" data-part-body="FORMAT,STR,WITH-OPEN-FILE,PROBE-FILE,NOT,IF,DIR,STRING,QUOTE,CONCATENATE,RC-FILENAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRITE-ACL2RC">write-acl2rc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-write-acl2rc" data-sym="WRITE-ACL2RC" title="(defun write-acl2rc (dir)
  (let ((rc-filename (concatenate &#39;string dir &quot;.acl2rc&quot;)))
    (if (not (probe-file rc-filename))
        (with-open-file (str (rc-filename dir) :direction :output)
          (format str &quot;; enter ACL2 read-eval-print loop~%~
...">write-acl2rc</a>
  (dir)
  (let ((<a class="sym-link local-def" href="#def-rc-filename" data-sym="RC-FILENAME" title="(defun rc-filename (dir) (concatenate &#39;string dir &quot;.acl2rc&quot;))">rc-filename</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> dir <span class="string">".acl2rc"</span>)))
    (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (probe-file <a class="sym-link local-def" href="#def-rc-filename" data-sym="RC-FILENAME" title="(defun rc-filename (dir) (concatenate &#39;string dir &quot;.acl2rc&quot;))">rc-filename</a>))
      (with-open-file (str (<a class="sym-link local-def" href="#def-rc-filename" data-sym="RC-FILENAME" title="(defun rc-filename (dir) (concatenate &#39;string dir &quot;.acl2rc&quot;))">rc-filename</a> dir) <span class="keyword">:direction</span> <span class="keyword">:output</span>)
        (format str
          <span class="string">"; enter ACL2 read-eval-print loop~%~
                  (ACL2::ACL2-DEFAULT-RESTART)~%~
                  #+ALLEGRO (EXCL::PRINT-STARTUP-INFO T)~%~
                  #+ALLEGRO (SETQ EXCL::*PRINT-STARTUP-MESSAGE* NIL)~%~
                  (ACL2::LP)~%"</span>)))))</pre>
  </div>

<div class="form-block function" id="def-save-acl2" data-defines="SAVE-ACL2" data-references="T,FORMAT,SAVE-ACL2-IN-SBCL,EXIT-WITH-BUILD-ERROR,READ,EQ,STR,WITH-OPEN-FILE,*ACL2-STATUS-FILE*,PROBE-FILE,NOT,OR,COND,PRINC,EVAL,*DO-PROCLAIMS*,LOAD-ACL2,IGNORE,DECLARE,DO-NOT-SAVE-GCL,OTHER-INFO,MODE,&OPTIONAL,DEFUN" data-part-name="SAVE-ACL2" data-part-args="DO-NOT-SAVE-GCL,OTHER-INFO,MODE,&OPTIONAL" data-part-declare="DO-NOT-SAVE-GCL,IGNORE,DECLARE" data-part-body="*DO-PROCLAIMS*,LOAD-ACL2" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAVE-ACL2">save-acl2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-save-acl2" data-sym="SAVE-ACL2" title="(defun save-acl2 (&amp;optional mode other-info do-not-save-gcl)
  (declare (ignore do-not-save-gcl))
  (load-acl2 :load-acl2-proclaims *do-proclaims*)
  (eval mode)
  (princ &quot;
...">save-acl2</a>
  (&amp;optional mode other-info do-not-save-gcl)
  (declare (ignore do-not-save-gcl))
  (load-acl2 <span class="keyword">:load-acl2-proclaims</span> *do-proclaims*)
  (eval mode)
  (princ <span class="string">"
******************************************************************************
          Initialization complete, beginning the check and save.
******************************************************************************
"</span>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (probe-file *acl2-status-file*))
       (with-open-file (str *acl2-status-file* <span class="keyword">:direction</span> <span class="keyword">:input</span>)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (read str nil) <span class="keyword">:initialized</span>)))) (exit-with-build-error <span class="string">"Initialization has failed.  Try INITIALIZE-ACL2 again."</span>)))
  (<a class="sym-link local-def" href="#def-save-acl2-in-sbcl" data-sym="SAVE-ACL2-IN-SBCL" title="(defun save-acl2-in-sbcl (sysout-name &amp;optional mode core-name)
  (declare (ignore mode))
  (with-warnings-suppressed
   (if (probe-file &quot;worklispext&quot;)
       (delete-file &quot;worklispext&quot;))
...">save-acl2-in-sbcl</a> <span class="string">"nsaved_acl2"</span> mode other-info)
  (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"Saving of ACL2 is complete.~%"</span>))</pre>
  </div>

<div class="form-block function" id="def-generate-acl2-proclaims" data-defines="GENERATE-ACL2-PROCLAIMS" data-references="STR,WITH-OPEN-FILE,PROCLAIM-FILES,GENERATING,INCLUDE-BOOK,QUOTE,INITIALIZE-ACL2,QFUNCALL,LOAD-ACL2,FORMAT,EXIT-WITH-BUILD-ERROR,T,RENAME-FILE,*DO-PROCLAIMS*,EQ,COND,DELETE-FILE,PROBE-FILE,WHEN,FILENAME,LET,DEFUN" data-part-name="GENERATE-ACL2-PROCLAIMS" data-part-body="STR,WITH-OPEN-FILE,PROCLAIM-FILES,GENERATING,INCLUDE-BOOK,QUOTE,INITIALIZE-ACL2,QFUNCALL,LOAD-ACL2,FORMAT,EXIT-WITH-BUILD-ERROR,T,RENAME-FILE,*DO-PROCLAIMS*,EQ,COND,DELETE-FILE,PROBE-FILE,WHEN,FILENAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GENERATE-ACL2-PROCLAIMS">generate-acl2-proclaims</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-generate-acl2-proclaims" data-sym="GENERATE-ACL2-PROCLAIMS" title="(defun generate-acl2-proclaims ()
  (let ((filename &quot;acl2-proclaims.lisp&quot;))
    (when (probe-file filename) (delete-file filename))
    (cond
     ((eq *do-proclaims* :gcl)
...">generate-acl2-proclaims</a>
  nil
  (let ((filename <span class="string">"acl2-proclaims.lisp"</span>))
    (when (probe-file filename) (delete-file filename))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> *do-proclaims* <span class="keyword">:gcl</span>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((probe-file <span class="string">"sys-proclaim.lisp"</span>) (rename-file <span class="string">"sys-proclaim.lisp"</span> filename))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (exit-with-build-error <span class="string">"File sys-proclaim.lisp does not exist!"</span>))))
      (*do-proclaims* (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
          <span class="string">"Beginning load-acl2 and initialize-acl2 on behalf of ~
                 generate-acl2-proclaims.~%"</span>)
        (load-acl2 <span class="keyword">:fast</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (qfuncall initialize-acl2 '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> nil nil 'generating)
        (<a class="sym-link local-def" href="#def-proclaim-files" data-sym="PROCLAIM-FILES" title="(defun proclaim-files (outfilename)
  (unless (and *do-proclaims* (not (eq *do-proclaims* :gcl)))
    (return-from proclaim-files nil))
  (when (probe-file outfilename) (delete-file outfilename))
  (format t &quot;Writing proclaim forms for ACL2 source files to file ~s.~%&quot;
...">proclaim-files</a> filename))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (when (probe-file filename) (delete-file filename))
        (with-open-file (str filename <span class="keyword">:direction</span> <span class="keyword">:output</span>)
          (format str <span class="string">"(in-package &quot;ACL2&quot;)~%~%"</span>)
          (format str
            <span class="string">"; No proclaims are generated here for this host Lisp.~%"</span>)))))
  nil)</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>