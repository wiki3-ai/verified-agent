<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>other-events - ACL2 Book</title>
  <meta property="name" content="other-events">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">other-events</h1>
    <div class="path"><a href="other-events.lisp" class="source-link">other-events</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block function" id="def-chk-legal-defconst-name" data-defines="CHK-LEGAL-DEFCONST-NAME" data-references="TILDE-@-ILLEGAL-VARIABLE-OR-CONSTANT-NAME-PHRASE,T,DEFCONST,QUOTE,CONS,SOFT,ER,LEGAL-VARIABLE-OR-CONSTANT-NAMEP,VALUE,LEGAL-CONSTANTP,COND,STATE,NAME,DEFUN" data-used-by="DEFCONST-FN" data-part-name="CHK-LEGAL-DEFCONST-NAME" data-part-args="STATE,NAME" data-part-body="TILDE-@-ILLEGAL-VARIABLE-OR-CONSTANT-NAME-PHRASE,T,DEFCONST,QUOTE,CONS,SOFT,ER,LEGAL-VARIABLE-OR-CONSTANT-NAMEP,VALUE,NAME,LEGAL-CONSTANTP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-LEGAL-DEFCONST-NAME">chk-legal-defconst-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-legal-defconst-name" data-sym="CHK-LEGAL-DEFCONST-NAME" title="(defun chk-legal-defconst-name (name state)
  (cond ((legal-constantp name) (value nil))
        ((legal-variable-or-constant-namep name)
         (er soft (cons &#39;defconst name)
             &quot;The symbol ~x0 may not be declared as a constant because ~
...">chk-legal-defconst-name</a>
  (name state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="basis-b.html#def-legal-constantp" data-sym="LEGAL-CONSTANTP">legal-constantp</a> name) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="basis-a.html#def-legal-variable-or-constant-namep" data-sym="LEGAL-VARIABLE-OR-CONSTANT-NAMEP">legal-variable-or-constant-namep</a> name) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        (cons '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> name)
        <span class="string">"The symbol ~x0 may not be declared as a constant because ~
              it does not begin and end with the character *."</span>
        name))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        (cons '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> name)
        <span class="string">"Constant symbols must ~*0.  Thus, ~x1 may not be ~
                declared as a constant.  See :DOC name and :DOC ~
                defconst."</span>
        (<a class="sym-link system" href="basis-b.html#def-tilde-_40-illegal-variable-or-constant-name-phrase" data-sym="TILDE-@-ILLEGAL-VARIABLE-OR-CONSTANT-NAME-PHRASE">tilde-@-illegal-variable-or-constant-name-phrase</a> name)
        name))))</pre>
  </div>

<div class="form-block function" id="def-defconst-fn1" data-defines="DEFCONST-FN1" data-references="VALUE,KWOTE,CONST,QUOTE,PUTPROP,LET,STATE,W,VAL,NAME,DEFUN" data-used-by="DEFCONST-FN" data-part-name="DEFCONST-FN1" data-part-args="STATE,W,VAL,NAME" data-part-body="VALUE,VAL,KWOTE,CONST,QUOTE,NAME,PUTPROP,W,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFCONST-FN1">defconst-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defconst-fn1" data-sym="DEFCONST-FN1" title="(defun defconst-fn1 (name val w state)
  (let ((w (putprop name &#39;const (kwote val) w)))
    (value w)))">defconst-fn1</a>
  (name val <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
  (let ((<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name 'const (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> val) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-a.html#def-defrec" data-sym="DEFREC">defrec</a> hcomp-book-ht-entry
  ((status . fn-ht) (const-ht . macro-ht)
    cert-obj . cert-filename)
  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block macro" id="def-with-debug" data-defines="WITH-DEBUG" data-references="T,FORMAT,*DEBUG-ON*,WHEN,PROGN,QUASIQUOTE,ARGS,&REST,STRING,FORM,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-DEBUG">with-debug</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-debug" data-sym="WITH-DEBUG" title="(defmacro with-debug (form string &amp;rest args)
  `(progn
    (when *debug-on* (format t &quot;; DEBUG: &quot;) (format t ,string ,@args))
    ,form))">with-debug</a>
  (form <a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (when *debug-on*
      (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"; DEBUG: "</span>)
      (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ,STRING ,@ARGS))
    ,FORM))</pre>
  </div>

<div class="form-block function" id="def-defconst-val" data-defines="DEFCONST-VAL" data-references="CDR,VALUE,SIMPLE-TRANSLATE-AND-EVAL,T,SAFE-MODE,STATE-GLOBAL-LET*,PAIR,ER-LET*,IGNORE,DECLARE,STATE,WRLD,CTX,FORM,NAME,DEFUN" data-used-by="DEFCONST-FN" data-part-name="DEFCONST-VAL" data-part-args="STATE,WRLD,CTX,FORM,NAME" data-part-declare="NAME,IGNORE,DECLARE" data-part-body="CDR,VALUE,STATE,WRLD,CTX,FORM,SIMPLE-TRANSLATE-AND-EVAL,T,SAFE-MODE,STATE-GLOBAL-LET*,PAIR,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFCONST-VAL">defconst-val</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defconst-val" data-sym="DEFCONST-VAL" title="(defun defconst-val (name form ctx wrld state)
  (declare (ignore name))
  (er-let*
   ((pair
     (state-global-let* ((safe-mode t))
...">defconst-val</a>
  (name form ctx wrld state)
  (declare (ignore name))
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pair (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((safe-mode <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
         (simple-translate-and-eval form
           nil
           nil
           <span class="string">"The second argument of defconst"</span>
           ctx
           wrld
           state
           nil))))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cdr pair))))</pre>
  </div>

<div class="form-block function" id="def-large-consp" data-defines="LARGE-CONSP" data-references="FN-COUNT-EVG-MAX-VAL,CONS-COUNT-BOUNDED,UNSIGNED-BYTE,THE,EQL,X,DEFUN" data-used-by="DEFCONST-FN" data-part-name="LARGE-CONSP" data-part-args="X" data-part-body="FN-COUNT-EVG-MAX-VAL,X,CONS-COUNT-BOUNDED,UNSIGNED-BYTE,THE,EQL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LARGE-CONSP">large-consp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-large-consp" data-sym="LARGE-CONSP" title="(defun large-consp (x)
  (eql (the (unsigned-byte 60) (cons-count-bounded x))
       (the (unsigned-byte 60) (fn-count-evg-max-val))))">large-consp</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">60</span>) (cons-count-bounded x))
    (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">60</span>) (fn-count-evg-max-val))))</pre>
  </div>

<div class="form-block function" id="def-defconst-fn" data-defines="DEFCONST-FN" data-references="INSTALL-EVENT,DEFCONST-FN1,WRLD3,CHK-JUST-NEW-NAME,WRLD2,ENFORCE-REDUNDANCY,CADR,CONSP,DEFCONST-VAL,VAL,ER-LET*,T,STOP-REDUNDANT-EVENT,GET-EVENT,EQUAL,LARGE-CONSP,LD-REDEFINITION-ACTION,NOT,AND,COND,GETPROPC,CONST-PROP,CHK-LEGAL-DEFCONST-NAME,CONST,CTX,CHK-ALL-BUT-NEW-NAME,ER-PROGN,LIST,OR,W,WRLD1,LET,DEFCONST,QUOTE,CONS,WITH-CTX-SUMMARIZED,EVENT-FORM,STATE,FORM,NAME,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="DEFCONST-FN" data-part-args="EVENT-FORM,STATE,FORM,NAME" data-part-body="INSTALL-EVENT,DEFCONST-FN1,WRLD3,CHK-JUST-NEW-NAME,WRLD2,ENFORCE-REDUNDANCY,CADR,CONSP,DEFCONST-VAL,VAL,ER-LET*,T,STOP-REDUNDANT-EVENT,GET-EVENT,EQUAL,LARGE-CONSP,LD-REDEFINITION-ACTION,NOT,AND,COND,GETPROPC,CONST-PROP,CHK-LEGAL-DEFCONST-NAME,CONST,CTX,CHK-ALL-BUT-NEW-NAME,ER-PROGN,FORM,LIST,OR,EVENT-FORM,STATE,W,WRLD1,LET,NAME,DEFCONST,QUOTE,CONS,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFCONST-FN">defconst-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defconst-fn" data-sym="DEFCONST-FN" title="(defun defconst-fn (name form state event-form)
  (with-ctx-summarized (cons &#39;defconst name)
                       (let ((wrld1 (w state))
                             (event-form
                              (or event-form (list &#39;defconst name form))))
...">defconst-fn</a>
  (name form state event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (cons '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> name)
    (let ((wrld1 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> name form))))
      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name name ctx 'const wrld1 state)
        (<a class="sym-link local-def" href="#def-chk-legal-defconst-name" data-sym="CHK-LEGAL-DEFCONST-NAME" title="(defun chk-legal-defconst-name (name state)
  (cond ((legal-constantp name) (value nil))
        ((legal-variable-or-constant-namep name)
         (er soft (cons &#39;defconst name)
             &quot;The symbol ~x0 may not be declared as a constant because ~
...">chk-legal-defconst-name</a> name state)
        (let ((const-prop (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'const nil wrld1)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> const-prop
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> state))
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-large-consp" data-sym="LARGE-CONSP" title="(defun large-consp (x)
  (eql (the (unsigned-byte 60) (cons-count-bounded x))
       (the (unsigned-byte 60) (fn-count-evg-max-val))))">large-consp</a> event-form))
               (equal event-form (get-event name wrld1))) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state <span class="keyword">:name</span> name))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val (<a class="sym-link local-def" href="#def-defconst-val" data-sym="DEFCONST-VAL" title="(defun defconst-val (name form ctx wrld state)
  (declare (ignore name))
  (er-let*
   ((pair
     (state-global-let* ((safe-mode t))
...">defconst-val</a> name form ctx wrld1 state)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp const-prop) (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> const-prop) val)) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state <span class="keyword">:name</span> name))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-enforce-redundancy" data-sym="ENFORCE-REDUNDANCY">enforce-redundancy</a> event-form
                      ctx
                      wrld1
                      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld2 (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> name nil 'const nil ctx wrld1 state)) (wrld3 (<a class="sym-link local-def" href="#def-defconst-fn1" data-sym="DEFCONST-FN1" title="(defun defconst-fn1 (name val w state)
  (let ((w (putprop name &#39;const (kwote val) w)))
    (value w)))">defconst-fn1</a> name val wrld2 state)))
                        (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> name
                          event-form
                          '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a>
                          name
                          nil
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> name form val)
                          nil
                          nil
                          wrld3
                          state)))))))))))))</pre>
  </div>

<div class="form-block function" id="def-defmacro-fn1" data-defines="DEFMACRO-FN1" data-references="VALUE,*T*,PUTPROP-UNLESS,MACRO-BODY,MACRO-ARGS,QUOTE,PUTPROP,LET,STATE,W,BODY,GUARD,ARGS,NAME,DEFUN" data-used-by="DEFMACRO-FN" data-part-name="DEFMACRO-FN1" data-part-args="STATE,W,BODY,GUARD,ARGS,NAME" data-part-body="VALUE,*T*,GUARD,PUTPROP-UNLESS,BODY,MACRO-BODY,ARGS,MACRO-ARGS,QUOTE,NAME,PUTPROP,W,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFMACRO-FN1">defmacro-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defmacro-fn1" data-sym="DEFMACRO-FN1" title="(defun defmacro-fn1 (name args guard body w state)
  (let ((w
         (putprop name &#39;macro-args args
                  (putprop name &#39;macro-body body
                           (putprop-unless name &#39;guard guard *t* w)))))">defmacro-fn1</a>
  (name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
  (let ((<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
         'macro-args
         <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
         (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
           'macro-body
           <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>
           (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> name '<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))</pre>
  </div>

<div class="form-block function" id="def-redundant-defmacrop" data-defines="REDUNDANT-DEFMACROP" data-references="MACRO-ARGS,MACRO-BODY,EQUAL,ABSOLUTE-EVENT-NUMBER,QUOTE,GETPROPC,AND,W,BODY,GUARD,ARGS,NAME,DEFUN" data-used-by="DEFMACRO-FN" data-part-name="REDUNDANT-DEFMACROP" data-part-args="W,BODY,GUARD,ARGS,NAME" data-part-body="GUARD,ARGS,MACRO-ARGS,BODY,MACRO-BODY,EQUAL,W,ABSOLUTE-EVENT-NUMBER,QUOTE,NAME,GETPROPC,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDUNDANT-DEFMACROP">redundant-defmacrop</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-redundant-defmacrop" data-sym="REDUNDANT-DEFMACROP" title="(defun redundant-defmacrop (name args guard body w)
  (and (getpropc name &#39;absolute-event-number nil w)
       (equal (getpropc name &#39;macro-body nil w) body)
       (equal (macro-args name w) args) (equal (guard name nil w) guard)))">redundant-defmacrop</a>
  (name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'absolute-event-number nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
    (equal (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'macro-body nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
    (equal (macro-args name <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
    (equal (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> name nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>)))</pre>
  </div>

<div class="form-block function" id="def-defmacro-fn" data-defines="DEFMACRO-FN" data-references="INSTALL-EVENT,DEFMACRO-FN1,WRLD3,*NO-MEASURE*,*NIL*,MACRO-VARS,CHK-FREE-AND-IGNORED-VARS,CHK-XARGS-KEYWORDS1,IGNORABLE-VARS,IGNORABLES,IGNORE-VARS,VALUE,IGNORED,MACRO,CHK-JUST-NEW-NAME,WRLD2,ENFORCE-REDUNDANCY,STOP-REDUNDANT-EVENT,REDUNDANT-PREDEFINED-ERROR-MSG,MACROS-WITH-RAW-CODE,REDUNDANT-WITH-RAW-CODE-OKP,BOOT-STRAP-FLG,IN-LOCAL-FLG,F-GET-GLOBAL,NOT,AND,REDUNDANT-DEFMACROP,CHK-MACRO-ANCESTORS,ER-PROGN,MEMBER-EQ,SOFT,ER,NULL,COND,T,DEFAULT-STATE-VARS,TRANSLATE-CMP,TBODY,CTX1,MV-LET,TRANSLATE,TGUARD,CDDDDR,GUARD,CADDDR,BODY,CADDR,EDCLS,CADR,ARGS,NAME,CTX,CHK-ACCEPTABLE-DEFMACRO,VAL,ER-LET*,OR,W,WRLD,LET,CAR,DEFMACRO,QUOTE,CONS,WITH-CTX-SUMMARIZED,EVENT-FORM,STATE,MDEF,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="DEFMACRO-FN" data-part-args="EVENT-FORM,STATE,MDEF" data-part-body="INSTALL-EVENT,DEFMACRO-FN1,WRLD3,*NO-MEASURE*,*NIL*,MACRO-VARS,CHK-FREE-AND-IGNORED-VARS,CHK-XARGS-KEYWORDS1,IGNORABLE-VARS,IGNORABLES,IGNORE-VARS,VALUE,IGNORED,MACRO,CHK-JUST-NEW-NAME,WRLD2,ENFORCE-REDUNDANCY,STOP-REDUNDANT-EVENT,REDUNDANT-PREDEFINED-ERROR-MSG,MACROS-WITH-RAW-CODE,REDUNDANT-WITH-RAW-CODE-OKP,BOOT-STRAP-FLG,IN-LOCAL-FLG,F-GET-GLOBAL,NOT,AND,REDUNDANT-DEFMACROP,CHK-MACRO-ANCESTORS,ER-PROGN,MEMBER-EQ,SOFT,ER,NULL,COND,T,DEFAULT-STATE-VARS,TRANSLATE-CMP,TBODY,CTX1,MV-LET,TRANSLATE,TGUARD,CDDDDR,GUARD,CADDDR,BODY,CADDR,EDCLS,CADR,ARGS,NAME,CTX,CHK-ACCEPTABLE-DEFMACRO,VAL,ER-LET*,OR,EVENT-FORM,STATE,W,WRLD,LET,MDEF,CAR,DEFMACRO,QUOTE,CONS,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFMACRO-FN">defmacro-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defmacro-fn" data-sym="DEFMACRO-FN" title="(defun defmacro-fn (mdef state event-form)
  (with-ctx-summarized (cons &#39;defmacro (car mdef))
                       (let ((wrld (w state))
                             (event-form (or event-form (cons &#39;defmacro mdef))))
                         (er-let*
...">defmacro-fn</a>
  (mdef state event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (cons '<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> (car mdef))
    (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (cons '<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> mdef))))
      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val (chk-acceptable-defmacro mdef nil ctx wrld state)))
        (let ((name (car val)) (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val))
            (edcls (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> val))
            (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> val))
            (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> val)))
          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tguard (translate <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> '(nil) nil nil ctx wrld state)))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ctx1 tbody)
              (translate-cmp <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>
                '(nil)
                nil
                nil
                ctx
                wrld
                (<a class="sym-link system" href="basis-a.html#def-default-state-vars" data-sym="DEFAULT-STATE-VARS">default-state-vars</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ctx1 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> tbody) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                        ctx
                        <span class="string">"An error occurred in attempting to translate ~
                                the body of the macro.  It is very unusual ~
                                however to see this message; feel free to ~
                                contact the ACL2 implementors if you are ~
                                willing to help them debug how this message ~
                                occurred."</span>))
                    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                        ctx
                        <span class="string">"~@0~|~%You might find it useful to understand ~
                                that although you used STATE as a formal ~
                                parameter, it does not refer to the ACL2 ~
                                state.  It is just a parameter bound to some ~
                                piece of syntax during macroexpansion.  See ~
                                :DOC defmacro."</span>
                        tbody))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@0"</span> tbody))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-macro-ancestors name tguard tbody ctx wrld state)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-redundant-defmacrop" data-sym="REDUNDANT-DEFMACROP" title="(defun redundant-defmacrop (name args guard body w)
  (and (getpropc name &#39;absolute-event-number nil w)
       (equal (getpropc name &#39;macro-body nil w) body)
       (equal (macro-args name w) args) (equal (guard name nil w) guard)))">redundant-defmacrop</a> name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> tguard tbody wrld) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state))
                             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state))
                             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'redundant-with-raw-code-okp state))
                             (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> name (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'macros-with-raw-code state))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                              ctx
                              <span class="string">"~@0"</span>
                              (<a class="sym-link system" href="defuns.html#def-redundant-predefined-error-msg" data-sym="REDUNDANT-PREDEFINED-ERROR-MSG">redundant-predefined-error-msg</a> name wrld)))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state <span class="keyword">:name</span> name))))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-enforce-redundancy" data-sym="ENFORCE-REDUNDANCY">enforce-redundancy</a> event-form
                          ctx
                          wrld
                          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld2 (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> name nil 'macro nil ctx wrld state)) (ignored (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (ignore-vars edcls)))
                              (ignorables (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (ignorable-vars edcls))))
                            (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="history-management.html#def-chk-xargs-keywords1" data-sym="CHK-XARGS-KEYWORDS1">chk-xargs-keywords1</a> edcls '(<span class="keyword">:guard</span>) ctx state)
                              (<a class="sym-link system" href="history-management.html#def-chk-free-and-ignored-vars" data-sym="CHK-FREE-AND-IGNORED-VARS">chk-free-and-ignored-vars</a> name
                                (macro-vars <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                                tguard
                                <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a>
                                <a class="sym-link system" href="history-management.html#def-_2Ano-measure_2A" data-sym="*NO-MEASURE*">*no-measure*</a>
                                ignored
                                ignorables
                                tbody
                                ctx
                                state)
                              (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld3 (<a class="sym-link local-def" href="#def-defmacro-fn1" data-sym="DEFMACRO-FN1" title="(defun defmacro-fn1 (name args guard body w state)
  (let ((w
         (putprop name &#39;macro-args args
                  (putprop name &#39;macro-body body
                           (putprop-unless name &#39;guard guard *t* w)))))">defmacro-fn1</a> name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> tguard tbody wrld2 state)))
                                (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> name
                                  event-form
                                  '<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a>
                                  name
                                  nil
                                  (cons '<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> mdef)
                                  nil
                                  nil
                                  wrld3
                                  state)))))))))))))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Ainitial-event-defmacros_2A" data-defines="*INITIAL-EVENT-DEFMACROS*" data-references="DEFATTACH-FN,DEFATTACH,WHEN-LOGIC,IN-LOCAL-FLG,STATE-GLOBAL-LET*,MV,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,F-GET-GLOBAL,INITIALIZE-ACL2,LD-SKIP-PROOFSP,MEMBER-EQ,OR,IF,X,LOCAL,INCLUDE-BOOK-FN,DIR,TTAGS,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,LOAD-COMPILED-FILE,USER-BOOK-NAME,INCLUDE-BOOK,ENCAPSULATE-FN,CMD-LST,SIGNATURES,ENCAPSULATE,PROGN-FN,R,PROGN,TABLE-FN,TABLE,SET-BODY-FN,NAME-OR-RUNE,FN,SET-BODY,PUSH-UNTOUCHABLE-FN,FN-P,PUSH-UNTOUCHABLE,REGENERATE-TAU-DATABASE-FN,REGENERATE-TAU-DATABASE,IN-ARITHMETIC-THEORY-FN,IN-ARITHMETIC-THEORY,IN-THEORY-FN,IN-THEORY,CTX,REDUNDANT-OKP,DEFTHEORY-FN,EXPR,DEFTHEORY,DEFLABEL-FN,DEFLABEL,DEFAXIOM-FN,DEFAXIOM,DEFTHM-FN,INSTRUCTIONS,RULE-CLASSES,TERM,DEFTHM,DEFSTOBJ-FN,ARGS,DEFSTOBJ,DEFCONST-FN,DEFMACRO-FN,MDEF,VERIFY-GUARDS-FN,OTF-FLG,GUARD-SIMPLIFY-P,T,GUARD-SIMPLIFY,GUARD-DEBUG-P,GUARD-DEBUG,HINTS-P,HINTS,&KEY,VERIFY-GUARDS,VERIFY-TERMINATION-BOOT-STRAP-FN,LST,VERIFY-TERMINATION-BOOT-STRAP,DEFUNS-FN,DEF-LST,DEFUNS,DEFUN-FN,DEFUN,DEFCHOOSE-FN,DEF,&REST,DEFCHOOSE,HIDDEN-P,DEFPKG-FN,BOOK-PATH,DOC,&OPTIONAL,FORM,NAME,EVENT-FORM,&WHOLE,DEFPKG,STATE,IN-PACKAGE-FN,LIST,STR,IN-PACKAGE,DEFMACRO,QUOTE,DEFCONST" data-used-by="PRIMORDIAL-WORLD" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*INITIAL-EVENT-DEFMACROS*">*initial-event-defmacros*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ainitial-event-defmacros_2A" data-sym="*INITIAL-EVENT-DEFMACROS*" title="(defconst *initial-event-defmacros*
          &#39;((defmacro in-package (str)
              (list &#39;in-package-fn (list &#39;quote str) &#39;state))
            (defmacro defpkg
                      (&amp;whole event-form name form &amp;optional doc book-path)
...">*initial-event-defmacros*</a>
  '((<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a>
     (str)
     (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="defuns.html#def-in-package-fn" data-sym="IN-PACKAGE-FN">in-package-fn</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote str) 'state)) (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>
      (&amp;whole event-form name form &amp;optional <a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> book-path)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-defpkg-fn" data-sym="DEFPKG-FN" title="(defun defpkg-fn (name form state doc book-path hidden-p event-form)
  (with-ctx-summarized (cons &#39;defpkg name)
                       (let ((w (w state))
                             (event-form
                              (or event-form
...">defpkg-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote form)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote <a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a>)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote book-path)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote hidden-p)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a>
      (&amp;whole event-form &amp;rest def)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-defchoose-fn" data-sym="DEFCHOOSE-FN" title="(defun defchoose-fn (def state event-form)
  (declare (xargs :guard (true-listp def)))
  (when-logic &quot;DEFCHOOSE&quot;
              (with-ctx-summarized (cons &#39;defchoose (car def))
                                   (let* ((wrld (w state))
...">defchoose-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote def)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>
      (&amp;whole event-form &amp;rest def)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="defuns.html#def-defun-fn" data-sym="DEFUN-FN">defun-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote def)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a>
      (&amp;whole event-form &amp;rest def-lst)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="defuns.html#def-defuns-fn" data-sym="DEFUNS-FN">defuns-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote def-lst)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-verify-termination-boot-strap" data-sym="VERIFY-TERMINATION-BOOT-STRAP">verify-termination-boot-strap</a>
      (&amp;whole event-form &amp;rest lst)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="defuns.html#def-verify-termination-boot-strap-fn" data-sym="VERIFY-TERMINATION-BOOT-STRAP-FN">verify-termination-boot-strap-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote lst)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a>
      (&amp;whole event-form
        name
        &amp;key
        (hints 'nil hints-p)
        (guard-debug 'nil guard-debug-p)
        (guard-simplify '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="defuns.html#def-guard-simplify-p" data-sym="GUARD-SIMPLIFY-P">guard-simplify-p</a>)
        otf-flg)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="defuns.html#def-verify-guards-fn" data-sym="VERIFY-GUARDS-FN">verify-guards-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote hints)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote hints-p)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote otf-flg)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote guard-debug)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote guard-debug-p)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote guard-simplify)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote <a class="sym-link system" href="defuns.html#def-guard-simplify-p" data-sym="GUARD-SIMPLIFY-P">guard-simplify-p</a>)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a>
      (&amp;whole event-form &amp;rest mdef)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-defmacro-fn" data-sym="DEFMACRO-FN" title="(defun defmacro-fn (mdef state event-form)
  (with-ctx-summarized (cons &#39;defmacro (car mdef))
                       (let ((wrld (w state))
                             (event-form (or event-form (cons &#39;defmacro mdef))))
                         (er-let*
...">defmacro-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote mdef)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a>
      (&amp;whole event-form name form &amp;optional <a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a>)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-defconst-fn" data-sym="DEFCONST-FN" title="(defun defconst-fn (name form state event-form)
  (with-ctx-summarized (cons &#39;defconst name)
                       (let ((wrld1 (w state))
                             (event-form
                              (or event-form (list &#39;defconst name form))))
...">defconst-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote form)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>
      (&amp;whole event-form name &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-defstobj-fn" data-sym="DEFSTOBJ-FN" title="(defun defstobj-fn (name args state event-form)
  (with-ctx-summarized (msg &quot;( DEFSTOBJ ~x0 ...)&quot; name)
                       (let ((event-form
                              (or event-form (list* &#39;defstobj name args)))
                             (wrld0 (w state)))
...">defstobj-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a>
      (&amp;whole event-form
        name
        term
        &amp;key
        (rule-classes '(<span class="keyword">:rewrite</span>))
        instructions
        hints
        otf-flg)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="defthm.html#def-defthm-fn" data-sym="DEFTHM-FN">defthm-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote term)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote rule-classes)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote instructions)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote hints)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote otf-flg)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defaxiom" data-sym="DEFAXIOM">defaxiom</a>
      (&amp;whole event-form
        name
        term
        &amp;key
        (rule-classes '(<span class="keyword">:rewrite</span>)))
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="defthm.html#def-defaxiom-fn" data-sym="DEFAXIOM-FN">defaxiom-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote term)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote rule-classes)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a>
      (&amp;whole event-form name)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="history-management.html#def-deflabel-fn" data-sym="DEFLABEL-FN">deflabel-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a>
      (&amp;whole event-form name expr)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-deftheory-fn" data-sym="DEFTHEORY-FN" title="(defun deftheory-fn (name expr state redundant-okp ctx event-form)
  (when-logic &quot;DEFTHEORY&quot;
              (with-ctx-summarized (cond (ctx) (t (cons &#39;deftheory name)))
                                   (let ((wrld (w state))
                                         (event-form
...">deftheory-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote expr)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote redundant-okp)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote ctx)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a>
      (&amp;whole event-form expr)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-in-theory-fn" data-sym="IN-THEORY-FN" title="(defun in-theory-fn (expr state event-form)
  (when-logic &quot;IN-THEORY&quot;
              (with-ctx-summarized
               (cond ((atom expr) (msg &quot;( IN-THEORY ~x0)&quot; expr))
                     ((symbolp (car expr))
...">in-theory-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote expr)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-in-arithmetic-theory" data-sym="IN-ARITHMETIC-THEORY">in-arithmetic-theory</a>
      (&amp;whole event-form expr)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-in-arithmetic-theory-fn" data-sym="IN-ARITHMETIC-THEORY-FN" title="(defun in-arithmetic-theory-fn (expr state event-form)
  (when-logic &quot;IN-ARITHMETIC-THEORY&quot;
              (with-ctx-summarized
               (cond ((atom expr) (msg &quot;( IN-ARITHMETIC-THEORY ~x0)&quot; expr))
                     ((symbolp (car expr))
...">in-arithmetic-theory-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote expr)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-regenerate-tau-database" data-sym="REGENERATE-TAU-DATABASE">regenerate-tau-database</a>
      (&amp;whole event-form)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-regenerate-tau-database-fn" data-sym="REGENERATE-TAU-DATABASE-FN" title="(defun regenerate-tau-database-fn (state event-form)
  (when-logic &quot;REGENERATE-TAU-DATABASE&quot;
              (with-ctx-summarized &quot;( REGENERATE-TAU-DATABASE)&quot;
                                   (let* ((wrld (w state))
                                          (event-form
...">regenerate-tau-database-fn</a>
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-push-untouchable" data-sym="PUSH-UNTOUCHABLE">push-untouchable</a>
      (&amp;whole event-form name fn-p)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-push-untouchable-fn" data-sym="PUSH-UNTOUCHABLE-FN" title="(defun push-untouchable-fn (name fn-p state event-form)
  (with-ctx-summarized
   (cond ((symbolp name) (msg &quot;( PUSH-UNTOUCHABLE ~x0 ~x1)&quot; name fn-p))
         (t &quot;( PUSH-UNTOUCHABLE ...)&quot;))
   (let ((wrld (w state))
...">push-untouchable-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote fn-p)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-set-body" data-sym="SET-BODY">set-body</a>
      (&amp;whole event-form fn name-or-rune)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-set-body-fn" data-sym="SET-BODY-FN" title="(defun set-body-fn (fn name-or-rune state event-form)
  (with-ctx-summarized
   (cond ((symbolp fn) (msg &quot;( SET-BODY ~x0)&quot; fn)) (t &quot;( SET-BODY ...)&quot;))
   (let* ((wrld (w state))
          (rune
...">set-body-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote fn)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name-or-rune)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a>
      (&amp;whole event-form name &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>
      (&amp;rest r)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-progn-fn" data-sym="PROGN-FN" title="(defun progn-fn (ev-lst state) (progn-fn1 ev-lst nil nil state))">progn-fn</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote r) 'state))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>
      (&amp;whole event-form signatures &amp;rest cmd-lst)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-encapsulate-fn" data-sym="ENCAPSULATE-FN" title="(defun encapsulate-fn (signatures ev-lst state event-form)
  (let ((ctx (encapsulate-ctx signatures ev-lst)))
    (with-ctx-summarized ctx
                         (let* ((wrld1 (w state))
                                (saved-proved-functional-instances-alist
...">encapsulate-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote signatures)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote cmd-lst)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
      (&amp;whole event-form
        user-book-name
        &amp;key
        (load-compiled-file '<span class="keyword">:default</span>)
        (uncertified-okp '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (defaxioms-okp '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (skip-proofs-okp '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (ttags 'nil)
        dir)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-include-book-fn" data-sym="INCLUDE-BOOK-FN" title="(defun include-book-fn
       (user-book-name state load-compiled-file expansion-alist/cert-data
        uncertified-okp defaxioms-okp skip-proofs-okp ttags dir event-form)
  (with-ctx-summarized (cons &#39;include-book user-book-name)
                       (state-global-let*
...">include-book-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote user-book-name)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote load-compiled-file)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote nil)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote uncertified-okp)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote defaxioms-okp)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote skip-proofs-okp)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote ttags)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote dir)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>
      (x)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'if
        '(<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
            '(<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> initialize-acl2))
          (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a> state))
        '(<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a>
          '((in-local-flg <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-when-logic" data-sym="WHEN-LOGIC">when-logic</a> <span class="string">"LOCAL"</span> x))))
    (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a>
      (&amp;whole event-form &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-defattach-fn" data-sym="DEFATTACH-FN" title="(defun defattach-fn (args state event-form)
  (with-ctx-summarized
   (case-match args (((x y)) (msg &quot;( DEFATTACH (~x0 ~x1))&quot; x y))
               (((x y . &amp;)) (msg &quot;( DEFATTACH (~x0 ~x1 ...))&quot; x y))
               (((x y) . &amp;) (msg &quot;( DEFATTACH (~x0 ~x1) ...)&quot; x y))
...">defattach-fn</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
        'state
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))))</pre>
  </div>

<div class="form-block function" id="def-boot-translate" data-defines="BOOT-TRANSLATE" data-references="HARD,ER,SKIP-WHEN-LOGIC,STATE,DEFAULT-DEFUN-MODE-FROM-STATE,WHEN-LOGIC,CDDR,CONS,CDR,NULL,MV,OR,LD-SKIP-PROOFSP,EQUAL,CADDDR,CADDR,CADR,LIST,IF,QUOTE,CAR,SYMBOLP,KWOTE,KEYWORDP,*T*,T,*NIL*,EQ,ATOM,COND,X,DEFUN" data-used-by="PRIMORDIAL-EVENT-MACRO-AND-FN" data-part-name="BOOT-TRANSLATE" data-part-args="X" data-part-body="HARD,ER,SKIP-WHEN-LOGIC,STATE,DEFAULT-DEFUN-MODE-FROM-STATE,WHEN-LOGIC,CDDR,CONS,CDR,NULL,MV,OR,LD-SKIP-PROOFSP,EQUAL,CADDDR,CADDR,CADR,BOOT-TRANSLATE,LIST,IF,QUOTE,CAR,SYMBOLP,KWOTE,KEYWORDP,*T*,T,*NIL*,EQ,X,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BOOT-TRANSLATE">boot-translate</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x nil) <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a>)
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>)
        ((<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> x) (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> x))
        ((symbolp x) x)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> x))))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'quote) x)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'if) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'if
        (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x))
        (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> x))
        (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> x))))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'equal) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'equal
        (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x))
        (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> x))))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x))))
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a>)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr x)) <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a>)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'cons
            (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x))
            (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (cons '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> x)))))))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="axioms.html#def-when-logic" data-sym="WHEN-LOGIC">when-logic</a>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'if
        '(<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-state" data-sym="DEFAULT-DEFUN-MODE-FROM-STATE">default-defun-mode-from-state</a> state) '<span class="keyword">:program</span>)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="basis-b.html#def-skip-when-logic" data-sym="SKIP-WHEN-LOGIC">skip-when-logic</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x)) 'state)
        (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> x))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a>
        <span class="string">"Boot-translate was called on ~x0, which is ~
                unrecognized.  If you want to use such a form in one ~
                of the *initial-event-defmacros* then you must modify ~
                boot-translate so that it can translate the form."</span>
        x))))</pre>
  </div>

<div class="form-block function" id="def-primordial-event-macro-and-fn1" data-defines="PRIMORDIAL-EVENT-MACRO-AND-FN1" data-references="HARD,ER,T,CADDR,CADR,LIST,EQ,CONSP,AND,CDR,CONS,STATE,QUOTE,CAR,EQUAL,NULL,COND,ACTUALS,DEFUN" data-used-by="PRIMORDIAL-EVENT-MACRO-AND-FN" data-part-name="PRIMORDIAL-EVENT-MACRO-AND-FN1" data-part-args="ACTUALS" data-part-body="HARD,ER,T,CADDR,CADR,LIST,EQ,CONSP,AND,CDR,PRIMORDIAL-EVENT-MACRO-AND-FN1,CONS,STATE,QUOTE,CAR,EQUAL,ACTUALS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN1">primordial-event-macro-and-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-primordial-event-macro-and-fn1" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN1" title="(defun primordial-event-macro-and-fn1 (actuals)
  (cond ((null actuals) nil)
        ((equal (car actuals) &#39;&#39;state)
         (cons &#39;state (primordial-event-macro-and-fn1 (cdr actuals))))
        ((and (consp (car actuals)) (eq (car (car actuals)) &#39;list)
...">primordial-event-macro-and-fn1</a>
  (actuals)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> actuals) nil)
    ((equal (car actuals) ''state) (cons 'state (<a class="sym-link local-def" href="#def-primordial-event-macro-and-fn1" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN1" title="(defun primordial-event-macro-and-fn1 (actuals)
  (cond ((null actuals) nil)
        ((equal (car actuals) &#39;&#39;state)
         (cons &#39;state (primordial-event-macro-and-fn1 (cdr actuals))))
        ((and (consp (car actuals)) (eq (car (car actuals)) &#39;list)
...">primordial-event-macro-and-fn1</a> (cdr actuals))))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car actuals))
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car actuals)) '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)
       (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car actuals)) ''quote)) (cons (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car actuals))
        (<a class="sym-link local-def" href="#def-primordial-event-macro-and-fn1" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN1" title="(defun primordial-event-macro-and-fn1 (actuals)
  (cond ((null actuals) nil)
        ((equal (car actuals) &#39;&#39;state)
         (cons &#39;state (primordial-event-macro-and-fn1 (cdr actuals))))
        ((and (consp (car actuals)) (eq (car (car actuals)) &#39;list)
...">primordial-event-macro-and-fn1</a> (cdr actuals))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-primordial-event-macro-and-fn1" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN1" title="(defun primordial-event-macro-and-fn1 (actuals)
  (cond ((null actuals) nil)
        ((equal (car actuals) &#39;&#39;state)
         (cons &#39;state (primordial-event-macro-and-fn1 (cdr actuals))))
        ((and (consp (car actuals)) (eq (car (car actuals)) &#39;list)
...">primordial-event-macro-and-fn1</a>
        <span class="string">"We encountered an unrecognized form of actual, ~x0, ~
                in trying to extract the formals from the actuals in ~
                some member of *initial-event-defmacros*.  If you ~
                want to use such a form in one of the initial event ~
                defmacros, you must modify ~
                primordial-event-macro-and-fn1 so that it can recover ~
                the corresponding formal name from the actual form."</span>
        (car actuals)))))</pre>
  </div>

<div class="form-block function" id="def-primordial-event-macro-and-fn" data-defines="PRIMORDIAL-EVENT-MACRO-AND-FN" data-references="HARD,ER,&,KWOTE,LIST*,T,COMPUTE-STOBJ-FLAGS,PRIMORDIAL-EVENT-MACRO-AND-FN1,LET*,ACTUALS,NAME-FN,NAME,*ERROR-TRIPLE-SIG*,SKIP-WHEN-LOGIC,STR,DEFAULT-DEFUN-MODE-FROM-STATE,*FAKE-RUNE-FOR-ANONYMOUS-ENABLED-RULE*,EQUAL,DEF-BODY,MAKE,LIST,DEF-BODIES,STOBJS-OUT,STOBJS-IN,STATE,FORMALS,SYMBOL-CLASS,LD-SKIP-PROOFSP,BOOT-TRANSLATE,PUTPROP,MACRO-BODY,MACRO-ARGS,LOCAL,DEFMACRO,QUOTE,CASE-MATCH,WRLD,FORM,DEFUN" data-used-by="PRIMORDIAL-EVENT-MACROS-AND-FNS" data-part-name="PRIMORDIAL-EVENT-MACRO-AND-FN" data-part-args="WRLD,FORM" data-part-body="PRIMORDIAL-EVENT-MACRO-AND-FN,HARD,ER,&,KWOTE,LIST*,T,COMPUTE-STOBJ-FLAGS,PRIMORDIAL-EVENT-MACRO-AND-FN1,LET*,ACTUALS,NAME-FN,NAME,WRLD,*ERROR-TRIPLE-SIG*,SKIP-WHEN-LOGIC,STR,DEFAULT-DEFUN-MODE-FROM-STATE,*FAKE-RUNE-FOR-ANONYMOUS-ENABLED-RULE*,EQUAL,DEF-BODY,MAKE,LIST,DEF-BODIES,STOBJS-OUT,STOBJS-IN,STATE,FORMALS,SYMBOL-CLASS,LD-SKIP-PROOFSP,BOOT-TRANSLATE,PUTPROP,MACRO-BODY,MACRO-ARGS,LOCAL,DEFMACRO,QUOTE,FORM,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN">primordial-event-macro-and-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-primordial-event-macro-and-fn" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN" title="(defun primordial-event-macro-and-fn (form wrld)
  (case-match form
              ((&#39;defmacro &#39;local macro-args macro-body)
               (putprop &#39;local &#39;macro-args macro-args
                        (putprop &#39;local &#39;macro-body (boot-translate macro-body)
...">primordial-event-macro-and-fn</a>
  (form wrld)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> form
    (('<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> macro-args macro-body) (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>
        'macro-args
        macro-args
        (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>
          'macro-body
          (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> macro-body)
          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
            '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
            <span class="keyword">:common-lisp-compliant</span> (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
              '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
              '(state)
              (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
                '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                '(state)
                (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
                  '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                  '(nil)
                  (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
                    'def-bodies
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a>
                        <span class="keyword">:formals</span> '(state)
                        <span class="keyword">:hyp</span> nil
                        <span class="keyword">:concl</span> '(<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
                        <span class="keyword">:equiv</span> 'equal
                        <span class="keyword">:rune</span> *fake-rune-for-anonymous-enabled-rule*
                        <span class="keyword">:nume</span> <span class="number">0</span>
                        <span class="keyword">:recursivep</span> nil
                        <span class="keyword">:controller-alist</span> nil))
                    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-state" data-sym="DEFAULT-DEFUN-MODE-FROM-STATE">default-defun-mode-from-state</a>
                      '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
                      <span class="keyword">:common-lisp-compliant</span> (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-state" data-sym="DEFAULT-DEFUN-MODE-FROM-STATE">default-defun-mode-from-state</a>
                        '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                        '(state)
                        (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-state" data-sym="DEFAULT-DEFUN-MODE-FROM-STATE">default-defun-mode-from-state</a>
                          '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                          '(state)
                          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-state" data-sym="DEFAULT-DEFUN-MODE-FROM-STATE">default-defun-mode-from-state</a>
                            '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                            '(nil)
                            (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-state" data-sym="DEFAULT-DEFUN-MODE-FROM-STATE">default-defun-mode-from-state</a>
                              'def-bodies
                              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a>
                                  <span class="keyword">:formals</span> '(str state)
                                  <span class="keyword">:hyp</span> nil
                                  <span class="keyword">:concl</span> '(<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-state" data-sym="DEFAULT-DEFUN-MODE-FROM-STATE">default-defun-mode-from-state</a> state)
                                  <span class="keyword">:equiv</span> 'equal
                                  <span class="keyword">:rune</span> *fake-rune-for-anonymous-enabled-rule*
                                  <span class="keyword">:nume</span> <span class="number">0</span>
                                  <span class="keyword">:recursivep</span> nil
                                  <span class="keyword">:controller-alist</span> nil))
                              (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="basis-b.html#def-skip-when-logic" data-sym="SKIP-WHEN-LOGIC">skip-when-logic</a>
                                '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
                                <span class="keyword">:common-lisp-compliant</span> (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="basis-b.html#def-skip-when-logic" data-sym="SKIP-WHEN-LOGIC">skip-when-logic</a>
                                  '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                                  '(str state)
                                  (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="basis-b.html#def-skip-when-logic" data-sym="SKIP-WHEN-LOGIC">skip-when-logic</a>
                                    '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                                    '(nil state)
                                    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="basis-b.html#def-skip-when-logic" data-sym="SKIP-WHEN-LOGIC">skip-when-logic</a>
                                      '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                                      <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>
                                      (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> '<a class="sym-link system" href="basis-b.html#def-skip-when-logic" data-sym="SKIP-WHEN-LOGIC">skip-when-logic</a>
                                        'def-bodies
                                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a>
                                            <span class="keyword">:formals</span> '(str state)
                                            <span class="keyword">:hyp</span> nil
                                            <span class="keyword">:concl</span> '(<a class="sym-link system" href="basis-b.html#def-skip-when-logic" data-sym="SKIP-WHEN-LOGIC">skip-when-logic</a> str state)
                                            <span class="keyword">:equiv</span> 'equal
                                            <span class="keyword">:rune</span> *fake-rune-for-anonymous-enabled-rule*
                                            <span class="keyword">:nume</span> <span class="number">0</span>
                                            <span class="keyword">:recursivep</span> nil
                                            <span class="keyword">:controller-alist</span> nil))
                                        wrld))))))))))))))))))
    (('<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> name
       macro-args
       ('<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ('quote name-fn) . actuals)) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link local-def" href="#def-primordial-event-macro-and-fn1" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN1" title="(defun primordial-event-macro-and-fn1 (actuals)
  (cond ((null actuals) nil)
        ((equal (car actuals) &#39;&#39;state)
         (cons &#39;state (primordial-event-macro-and-fn1 (cdr actuals))))
        ((and (consp (car actuals)) (eq (car (car actuals)) &#39;list)
...">primordial-event-macro-and-fn1</a> actuals)) (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (compute-stobj-flags <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil wrld))
          (macro-body (<a class="sym-link local-def" href="#def-boot-translate" data-sym="BOOT-TRANSLATE" title="(defun boot-translate (x)
  (cond
   ((atom x)
    (cond ((eq x nil) *nil*) ((eq x t) *t*) ((keywordp x) (kwote x))
          ((symbolp x) x) (t (kwote x))))
...">boot-translate</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> name-fn) actuals))))
        (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
          'macro-args
          macro-args
          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
            'macro-body
            macro-body
            (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name-fn
              '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
              <span class="keyword">:program</span> (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name-fn
                '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name-fn
                  '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                  <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                  (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name-fn '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a> wrld))))))))
    (&amp; (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-primordial-event-macro-and-fn" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN" title="(defun primordial-event-macro-and-fn (form wrld)
  (case-match form
              ((&#39;defmacro &#39;local macro-args macro-body)
               (putprop &#39;local &#39;macro-args macro-args
                        (putprop &#39;local &#39;macro-body (boot-translate macro-body)
...">primordial-event-macro-and-fn</a>
        <span class="string">"The supplied form ~x0 was not of the required shape.  ~
                      Every element of *initial-event-defmacros* must be of ~
                      the form expected by this function.  Either change the ~
                      event defmacro or modify this function."</span>
        form))))</pre>
  </div>

<div class="form-block function" id="def-primordial-event-macros-and-fns" data-defines="PRIMORDIAL-EVENT-MACROS-AND-FNS" data-references="CAR,PRIMORDIAL-EVENT-MACRO-AND-FN,CDR,T,NULL,COND,WRLD,LST,DEFUN" data-used-by="PRIMORDIAL-WORLD" data-part-name="PRIMORDIAL-EVENT-MACROS-AND-FNS" data-part-args="WRLD,LST" data-part-body="CAR,PRIMORDIAL-EVENT-MACRO-AND-FN,CDR,PRIMORDIAL-EVENT-MACROS-AND-FNS,T,WRLD,LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRIMORDIAL-EVENT-MACROS-AND-FNS">primordial-event-macros-and-fns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-primordial-event-macros-and-fns" data-sym="PRIMORDIAL-EVENT-MACROS-AND-FNS" title="(defun primordial-event-macros-and-fns (lst wrld)
  (cond ((null lst) wrld)
        (t
         (primordial-event-macros-and-fns (cdr lst)
                                          (primordial-event-macro-and-fn">primordial-event-macros-and-fns</a>
  (lst wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-primordial-event-macros-and-fns" data-sym="PRIMORDIAL-EVENT-MACROS-AND-FNS" title="(defun primordial-event-macros-and-fns (lst wrld)
  (cond ((null lst) wrld)
        (t
         (primordial-event-macros-and-fns (cdr lst)
                                          (primordial-event-macro-and-fn">primordial-event-macros-and-fns</a> (cdr lst)
        (<a class="sym-link local-def" href="#def-primordial-event-macro-and-fn" data-sym="PRIMORDIAL-EVENT-MACRO-AND-FN" title="(defun primordial-event-macro-and-fn (form wrld)
  (case-match form
              ((&#39;defmacro &#39;local macro-args macro-body)
               (putprop &#39;local &#39;macro-args macro-args
                        (putprop &#39;local &#39;macro-body (boot-translate macro-body)
...">primordial-event-macro-and-fn</a> (car lst) wrld)))))</pre>
  </div>

<div class="form-block constant" id="def-_2Ainitial-type-prescriptions_2A" data-defines="*INITIAL-TYPE-PRESCRIPTIONS*" data-references="Y,O<,BOOLEANP,*TS-BOOLEAN*,X,*FAKE-RUNE-FOR-ANONYMOUS-ENABLED-RULE*,TYPE-PRESCRIPTION,MAKE,O-P,QUOTE,LIST,DEFCONST" data-used-by="PRIMORDIAL-WORLD" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*INITIAL-TYPE-PRESCRIPTIONS*">*initial-type-prescriptions*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ainitial-type-prescriptions_2A" data-sym="*INITIAL-TYPE-PRESCRIPTIONS*" title="(defconst *initial-type-prescriptions*
          (list
           (list &#39;o-p
                 (make type-prescription :rune
                       *fake-rune-for-anonymous-enabled-rule* :nume nil :term
...">*initial-type-prescriptions*</a>
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-o-p" data-sym="O-P">o-p</a>
      (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> type-prescription
        <span class="keyword">:rune</span> *fake-rune-for-anonymous-enabled-rule*
        <span class="keyword">:nume</span> nil
        <span class="keyword">:term</span> '(<a class="sym-link system" href="axioms.html#def-o-p" data-sym="O-P">o-p</a> x)
        <span class="keyword">:hyps</span> nil
        <span class="keyword">:backchain-limit-lst</span> nil
        <span class="keyword">:basic-ts</span> *ts-boolean*
        <span class="keyword">:vars</span> nil
        <span class="keyword">:corollary</span> '(<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (<a class="sym-link system" href="axioms.html#def-o-p" data-sym="O-P">o-p</a> x))))
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-o_3C" data-sym="O&lt;">o&lt;</a>
      (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> type-prescription
        <span class="keyword">:rune</span> *fake-rune-for-anonymous-enabled-rule*
        <span class="keyword">:nume</span> nil
        <span class="keyword">:term</span> '(<a class="sym-link system" href="axioms.html#def-o_3C" data-sym="O&lt;">o&lt;</a> x y)
        <span class="keyword">:hyps</span> nil
        <span class="keyword">:backchain-limit-lst</span> nil
        <span class="keyword">:basic-ts</span> *ts-boolean*
        <span class="keyword">:vars</span> nil
        <span class="keyword">:corollary</span> '(<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (<a class="sym-link system" href="axioms.html#def-o_3C" data-sym="O&lt;">o&lt;</a> x y))))))</pre>
  </div>

<div class="form-block function" id="def-collect-world-globals" data-defines="COLLECT-WORLD-GLOBALS" data-references="T,CAAR,ADD-TO-SET-EQ,CDR,GLOBAL-VALUE,QUOTE,CADAR,EQ,NULL,COND,ANS,WRLD,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS" data-part-name="COLLECT-WORLD-GLOBALS" data-part-args="ANS,WRLD" data-part-body="T,CAAR,ADD-TO-SET-EQ,CDR,COLLECT-WORLD-GLOBALS,GLOBAL-VALUE,QUOTE,CADAR,EQ,ANS,WRLD,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-WORLD-GLOBALS">collect-world-globals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-world-globals" data-sym="COLLECT-WORLD-GLOBALS" title="(defun collect-world-globals (wrld ans)
  (cond ((null wrld) ans)
        ((eq (cadar wrld) &#39;global-value)
         (collect-world-globals (cdr wrld) (add-to-set-eq (caar wrld) ans)))
        (t (collect-world-globals (cdr wrld) ans))))">collect-world-globals</a>
  (wrld ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld) ans)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> wrld) 'global-value) (<a class="sym-link local-def" href="#def-collect-world-globals" data-sym="COLLECT-WORLD-GLOBALS" title="(defun collect-world-globals (wrld ans)
  (cond ((null wrld) ans)
        ((eq (cadar wrld) &#39;global-value)
         (collect-world-globals (cdr wrld) (add-to-set-eq (caar wrld) ans)))
        (t (collect-world-globals (cdr wrld) ans))))">collect-world-globals</a> (cdr wrld)
        (<a class="sym-link system" href="axioms.html#def-add-to-set-eq" data-sym="ADD-TO-SET-EQ">add-to-set-eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld) ans)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-collect-world-globals" data-sym="COLLECT-WORLD-GLOBALS" title="(defun collect-world-globals (wrld ans)
  (cond ((null wrld) ans)
        ((eq (cadar wrld) &#39;global-value)
         (collect-world-globals (cdr wrld) (add-to-set-eq (caar wrld) ans)))
        (t (collect-world-globals (cdr wrld) ans))))">collect-world-globals</a> (cdr wrld) ans))))</pre>
  </div>

<div class="form-block function" id="def-primordial-world-globals" data-defines="PRIMORDIAL-WORLD-GLOBALS" data-references="COLLECT-WORLD-GLOBALS,WORLD-GLOBALS,GLOBAL-SET,COMMAND-NUMBER-BASELINE-INFO,EXT-GEN-BARRIERS,EXT-GENS,PROJECTS/APPLY/BASE-INCLUDEDP,REWRITE-QUOTED-CONSTANT-RULES,COMMON-LISP-COMPLIANT-LAMBDAS,LOOP$-ALIST,LAMBDA$-ALIST,PROOF-SUPPORTERS-ALIST,ATTACHMENTS-AT-GROUND-ZERO,ATTACHMENT-RECORDS,ATTACH-NIL-LST,DEFINED-HEREDITARILY-CONSTRAINED-FNS,UNTOUCHABLE-VARS,UNTOUCHABLE-FNS,NEVER-UNTOUCHABLE-FNS,TTAGS-SEEN,COMPLEX-RATIONALP,COMPLEX,LET*,ACL2-DEFAULTS-TABLE,LP,EXIT-BOOT-STRAP-MODE,ENTER-BOOT-STRAP-MODE,FINDING-DOCUMENTATION,APROPOS,DECLARE,STATE,SKIP-WHEN-LOGIC,DEFAULT-DEFUN-MODE-FROM-STATE,DEFATTACH-FN,DEFATTACH,APPLY,DEFCHOOSE-FN,VERIFY-TERMINATION-BOOT-STRAP-FN,VERIFY-GUARDS-FN,TABLE-FN,SET-BODY-FN,RESET-PREHISTORY-FN,REMOVE-UNTOUCHABLE-FN,PUSH-UNTOUCHABLE-FN,REGENERATE-TAU-DATABASE-FN,IN-ARITHMETIC-THEORY-FN,IN-THEORY-FN,DEFTHEORY-FN,DEFLABEL-FN,INCLUDE-BOOK-FN,ENCAPSULATE-FN,PROGN-FN,DEFAXIOM-FN,DEFTHM-FN,DEFSTOBJ-FN,DEFCONST-FN,DEFMACRO-FN,MUTUAL-RECURSION-FN,DEFUNS-FN,DEFUN-FN,DEFPKG-FN,IN-PACKAGE-FN,LD-SKIP-PROOFSP,DEFCHOOSE,LOCAL,VERIFY-TERMINATION-BOOT-STRAP,VERIFY-GUARDS,RESET-PREHISTORY,TABLE,SET-BODY,REMOVE-UNTOUCHABLE,PUSH-UNTOUCHABLE,REGENERATE-TAU-DATABASE,IN-ARITHMETIC-THEORY,IN-THEORY,DEFTHEORY,DEFLABEL,INCLUDE-BOOK,ENCAPSULATE,PROGN,DEFAXIOM,DEFTHM,DEFSTOBJ,DEFCONST,DEFMACRO,MUTUAL-RECURSION,DEFUNS,DEFPKG,IN-PACKAGE,NOT,IMPLIES,IFF,IF,CHK-NEW-NAME-LST,TRANSLATE-CERT-DATA,FREE-VAR-RUNES-ONCE,FREE-VAR-RUNES-ALL,CERT-REPLAY,REDEF-SEEN,SKIP-PROOFS-SEEN,BOOT-STRAP-PASS-2,T,BOOT-STRAP-FLG,CLAUSE-PROCESSOR-RULES,TAU-LOST-RUNES,TAU-MV-NTH-SYNONYMS,TAU-CONJUNCTIVE-RULES,TAU-NEXT-INDEX,TAU-RUNES,GENERALIZE-RULES,CURRENT-THEORY-INDEX,CURRENT-THEORY-AUGMENTED,CURRENT-THEORY-LENGTH,CURRENT-THEORY,STANDARD-THEORIES,NONCONSTRUCTIVE-AXIOM-NAMES,PROVED-FUNCTIONAL-INSTANCES-ALIST,CERTIFICATION-TUPLE,INCLUDE-BOOK-PATH,PCERT-BOOKS,INCLUDE-BOOK-ALIST-ALL,INCLUDE-BOOK-ALIST,TOP-LEVEL-CLTL-COMMAND-STACK,CLTL-COMMAND,EMBEDDED-EVENT-LST,EVENT-NUMBER-BASELINE,COMMAND-INDEX,EVENT-INDEX,QUASIQUOTE,GLOBALS,INITIAL-GLOBAL-ENABLED-STRUCTURE,GLOBAL-ARITHMETIC-ENABLED-STRUCTURE,*INITIAL-TYPE-SET-INVERTER-RULES*,TYPE-SET-INVERTER-RULES,LENGTH,FLOOR,HALF-LENGTH-BUILT-IN-CLAUSES,*INITIAL-BUILT-IN-CLAUSES*,CLASSIFY-AND-STORE-BUILT-IN-CLAUSE-RULES,BUILT-IN-CLAUSES,LEXP,L<,*FAKE-RUNE-FOR-ANONYMOUS-ENABLED-RULE*,O-P,O<,CONS,WELL-FOUNDED-RELATION-ALIST,*INITIAL-KNOWN-PACKAGE-ALIST*,KNOWN-PACKAGE-ALIST,MAKE-COMMAND-TUPLE,COMMAND-LANDMARK,MAKE-EVENT-TUPLE,EVENT-LANDMARK,QUOTE,LIST,LIST*,GLOBAL-SET-LST,WRLD,LET,PROJECT-DIR-ALIST,OPERATING-SYSTEM,DEFUN" data-used-by="PRIMORDIAL-WORLD" data-part-name="PRIMORDIAL-WORLD-GLOBALS" data-part-args="PROJECT-DIR-ALIST,OPERATING-SYSTEM" data-part-body="COLLECT-WORLD-GLOBALS,WORLD-GLOBALS,GLOBAL-SET,COMMAND-NUMBER-BASELINE-INFO,OPERATING-SYSTEM,EXT-GEN-BARRIERS,EXT-GENS,PROJECTS/APPLY/BASE-INCLUDEDP,PROJECT-DIR-ALIST,REWRITE-QUOTED-CONSTANT-RULES,COMMON-LISP-COMPLIANT-LAMBDAS,LOOP$-ALIST,LAMBDA$-ALIST,PROOF-SUPPORTERS-ALIST,ATTACHMENTS-AT-GROUND-ZERO,ATTACHMENT-RECORDS,ATTACH-NIL-LST,DEFINED-HEREDITARILY-CONSTRAINED-FNS,UNTOUCHABLE-VARS,UNTOUCHABLE-FNS,NEVER-UNTOUCHABLE-FNS,TTAGS-SEEN,COMPLEX-RATIONALP,COMPLEX,LET*,ACL2-DEFAULTS-TABLE,LP,EXIT-BOOT-STRAP-MODE,ENTER-BOOT-STRAP-MODE,FINDING-DOCUMENTATION,APROPOS,DECLARE,STATE,SKIP-WHEN-LOGIC,DEFAULT-DEFUN-MODE-FROM-STATE,DEFATTACH-FN,DEFATTACH,APPLY,DEFCHOOSE-FN,VERIFY-TERMINATION-BOOT-STRAP-FN,VERIFY-GUARDS-FN,TABLE-FN,SET-BODY-FN,RESET-PREHISTORY-FN,REMOVE-UNTOUCHABLE-FN,PUSH-UNTOUCHABLE-FN,REGENERATE-TAU-DATABASE-FN,IN-ARITHMETIC-THEORY-FN,IN-THEORY-FN,DEFTHEORY-FN,DEFLABEL-FN,INCLUDE-BOOK-FN,ENCAPSULATE-FN,PROGN-FN,DEFAXIOM-FN,DEFTHM-FN,DEFSTOBJ-FN,DEFCONST-FN,DEFMACRO-FN,MUTUAL-RECURSION-FN,DEFUNS-FN,DEFUN-FN,DEFPKG-FN,IN-PACKAGE-FN,LD-SKIP-PROOFSP,DEFCHOOSE,LOCAL,VERIFY-TERMINATION-BOOT-STRAP,VERIFY-GUARDS,RESET-PREHISTORY,TABLE,SET-BODY,REMOVE-UNTOUCHABLE,PUSH-UNTOUCHABLE,REGENERATE-TAU-DATABASE,IN-ARITHMETIC-THEORY,IN-THEORY,DEFTHEORY,DEFLABEL,INCLUDE-BOOK,ENCAPSULATE,PROGN,DEFAXIOM,DEFTHM,DEFSTOBJ,DEFCONST,DEFMACRO,MUTUAL-RECURSION,DEFUNS,DEFUN,DEFPKG,IN-PACKAGE,NOT,IMPLIES,IFF,IF,CHK-NEW-NAME-LST,TRANSLATE-CERT-DATA,FREE-VAR-RUNES-ONCE,FREE-VAR-RUNES-ALL,CERT-REPLAY,REDEF-SEEN,SKIP-PROOFS-SEEN,BOOT-STRAP-PASS-2,T,BOOT-STRAP-FLG,CLAUSE-PROCESSOR-RULES,TAU-LOST-RUNES,TAU-MV-NTH-SYNONYMS,TAU-CONJUNCTIVE-RULES,TAU-NEXT-INDEX,TAU-RUNES,GENERALIZE-RULES,CURRENT-THEORY-INDEX,CURRENT-THEORY-AUGMENTED,CURRENT-THEORY-LENGTH,CURRENT-THEORY,STANDARD-THEORIES,NONCONSTRUCTIVE-AXIOM-NAMES,PROVED-FUNCTIONAL-INSTANCES-ALIST,CERTIFICATION-TUPLE,INCLUDE-BOOK-PATH,PCERT-BOOKS,INCLUDE-BOOK-ALIST-ALL,INCLUDE-BOOK-ALIST,TOP-LEVEL-CLTL-COMMAND-STACK,CLTL-COMMAND,EMBEDDED-EVENT-LST,EVENT-NUMBER-BASELINE,COMMAND-INDEX,EVENT-INDEX,QUASIQUOTE,GLOBALS,INITIAL-GLOBAL-ENABLED-STRUCTURE,GLOBAL-ARITHMETIC-ENABLED-STRUCTURE,*INITIAL-TYPE-SET-INVERTER-RULES*,TYPE-SET-INVERTER-RULES,LENGTH,FLOOR,HALF-LENGTH-BUILT-IN-CLAUSES,*INITIAL-BUILT-IN-CLAUSES*,CLASSIFY-AND-STORE-BUILT-IN-CLAUSE-RULES,BUILT-IN-CLAUSES,LEXP,L<,*FAKE-RUNE-FOR-ANONYMOUS-ENABLED-RULE*,O-P,O<,CONS,WELL-FOUNDED-RELATION-ALIST,*INITIAL-KNOWN-PACKAGE-ALIST*,KNOWN-PACKAGE-ALIST,MAKE-COMMAND-TUPLE,COMMAND-LANDMARK,MAKE-EVENT-TUPLE,EVENT-LANDMARK,QUOTE,LIST,LIST*,GLOBAL-SET-LST,WRLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRIMORDIAL-WORLD-GLOBALS">primordial-world-globals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-primordial-world-globals" data-sym="PRIMORDIAL-WORLD-GLOBALS" title="(defun primordial-world-globals (operating-system project-dir-alist)
  (let ((wrld
         (global-set-lst
          (list*
           (list &#39;event-landmark (make-event-tuple -1 0 nil nil 0 nil nil nil))
...">primordial-world-globals</a>
  (operating-system <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>)
  (let ((wrld (<a class="sym-link system" href="basis-b.html#def-global-set-lst" data-sym="GLOBAL-SET-LST">global-set-lst</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'event-landmark
             (make-event-tuple <span class="number">-1</span> <span class="number">0</span> nil nil <span class="number">0</span> nil nil nil))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'command-landmark
             (make-command-tuple <span class="number">-1</span> <span class="keyword">:logic</span> nil nil nil))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> <a class="sym-link system" href="axioms.html#def-_2Ainitial-known-package-alist_2A" data-sym="*INITIAL-KNOWN-PACKAGE-ALIST*">*initial-known-package-alist*</a>)
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'well-founded-relation-alist
             (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons '<a class="sym-link system" href="axioms.html#def-o_3C" data-sym="O&lt;">o&lt;</a>
                 (cons '<a class="sym-link system" href="axioms.html#def-o-p" data-sym="O-P">o-p</a> *fake-rune-for-anonymous-enabled-rule*))
               (cons 'l&lt;
                 (cons 'lexp *fake-rune-for-anonymous-enabled-rule*))))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'built-in-clauses
             (<a class="sym-link system" href="defthm.html#def-classify-and-store-built-in-clause-rules" data-sym="CLASSIFY-AND-STORE-BUILT-IN-CLAUSE-RULES">classify-and-store-built-in-clause-rules</a> *initial-built-in-clauses*
               nil
               nil))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'half-length-built-in-clauses
             (floor (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> *initial-built-in-clauses*) <span class="number">2</span>))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'type-set-inverter-rules
             *initial-type-set-inverter-rules*)
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'global-arithmetic-enabled-structure
             (initial-global-enabled-structure <span class="string">"ARITHMETIC-ENABLED-ARRAY-"</span>))
           (let ((globals `((event-index nil) (command-index nil)
                  (event-number-baseline <span class="number">0</span>)
                  (embedded-event-lst nil)
                  (cltl-command nil)
                  (top-level-cltl-command-stack nil)
                  (include-book-alist nil)
                  (include-book-alist-all nil)
                  (pcert-books nil)
                  (include-book-path nil)
                  (certification-tuple nil)
                  (proved-functional-instances-alist nil)
                  (nonconstructive-axiom-names nil)
                  (<a class="sym-link local-def" href="#def-standard-theories" data-sym="STANDARD-THEORIES" title="(defun standard-theories (wrld)
  (list (universal-theory-fn1 wrld nil nil)
        (function-theory-fn1 :definition wrld nil nil)
        (function-theory-fn1 :executable-counterpart wrld nil nil)
        (function-theory-fn1 :both wrld nil nil)))">standard-theories</a> (nil nil nil nil))
                  (<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> nil)
                  (current-theory-length <span class="number">0</span>)
                  (current-theory-augmented nil)
                  (current-theory-index <span class="number">-1</span>)
                  (generalize-rules nil)
                  (tau-runes nil)
                  (tau-next-index <span class="number">0</span>)
                  (tau-conjunctive-rules nil)
                  (tau-mv-nth-synonyms nil)
                  (tau-lost-runes nil)
                  (clause-processor-rules nil)
                  (boot-strap-flg <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                  (boot-strap-pass-2 nil)
                  (skip-proofs-seen nil)
                  (redef-seen nil)
                  (cert-replay nil)
                  (free-var-runes-all nil)
                  (free-var-runes-once nil)
                  (translate-cert-data nil)
                  (chk-new-name-lst (if <a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a>
                      <a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a>
                      <a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a>
                      <a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a>
                      <a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>
                      <a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>
                      <a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a>
                      <a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a>
                      <a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a>
                      <a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a>
                      <a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>
                      <a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a>
                      <a class="sym-link system" href="axioms.html#def-defaxiom" data-sym="DEFAXIOM">defaxiom</a>
                      <a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>
                      <a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>
                      <a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
                      <a class="sym-link system" href="axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a>
                      <a class="sym-link system" href="axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a>
                      <a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a>
                      <a class="sym-link system" href="axioms.html#def-in-arithmetic-theory" data-sym="IN-ARITHMETIC-THEORY">in-arithmetic-theory</a>
                      <a class="sym-link system" href="axioms.html#def-regenerate-tau-database" data-sym="REGENERATE-TAU-DATABASE">regenerate-tau-database</a>
                      <a class="sym-link system" href="axioms.html#def-push-untouchable" data-sym="PUSH-UNTOUCHABLE">push-untouchable</a>
                      <a class="sym-link system" href="axioms.html#def-remove-untouchable" data-sym="REMOVE-UNTOUCHABLE">remove-untouchable</a>
                      <a class="sym-link system" href="axioms.html#def-set-body" data-sym="SET-BODY">set-body</a>
                      <a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a>
                      <a class="sym-link local-def" href="#def-reset-prehistory" data-sym="RESET-PREHISTORY" title="(defmacro reset-prehistory (&amp;whole event-form &amp;optional pflg)
  (declare (xargs :guard (member-eq pflg (quote (t nil)))))
  (list &#39;reset-prehistory-fn (list &#39;quote pflg) &#39;state
        (list &#39;quote event-form)))">reset-prehistory</a>
                      <a class="sym-link system" href="axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a>
                      <a class="sym-link system" href="axioms.html#def-verify-termination-boot-strap" data-sym="VERIFY-TERMINATION-BOOT-STRAP">verify-termination-boot-strap</a>
                      <a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>
                      <a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a>
                      <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
                      <a class="sym-link system" href="defuns.html#def-in-package-fn" data-sym="IN-PACKAGE-FN">in-package-fn</a>
                      <a class="sym-link local-def" href="#def-defpkg-fn" data-sym="DEFPKG-FN" title="(defun defpkg-fn (name form state doc book-path hidden-p event-form)
  (with-ctx-summarized (cons &#39;defpkg name)
                       (let ((w (w state))
                             (event-form
                              (or event-form
...">defpkg-fn</a>
                      <a class="sym-link system" href="defuns.html#def-defun-fn" data-sym="DEFUN-FN">defun-fn</a>
                      <a class="sym-link system" href="defuns.html#def-defuns-fn" data-sym="DEFUNS-FN">defuns-fn</a>
                      mutual-recursion-fn
                      <a class="sym-link local-def" href="#def-defmacro-fn" data-sym="DEFMACRO-FN" title="(defun defmacro-fn (mdef state event-form)
  (with-ctx-summarized (cons &#39;defmacro (car mdef))
                       (let ((wrld (w state))
                             (event-form (or event-form (cons &#39;defmacro mdef))))
                         (er-let*
...">defmacro-fn</a>
                      <a class="sym-link local-def" href="#def-defconst-fn" data-sym="DEFCONST-FN" title="(defun defconst-fn (name form state event-form)
  (with-ctx-summarized (cons &#39;defconst name)
                       (let ((wrld1 (w state))
                             (event-form
                              (or event-form (list &#39;defconst name form))))
...">defconst-fn</a>
                      <a class="sym-link local-def" href="#def-defstobj-fn" data-sym="DEFSTOBJ-FN" title="(defun defstobj-fn (name args state event-form)
  (with-ctx-summarized (msg &quot;( DEFSTOBJ ~x0 ...)&quot; name)
                       (let ((event-form
                              (or event-form (list* &#39;defstobj name args)))
                             (wrld0 (w state)))
...">defstobj-fn</a>
                      <a class="sym-link system" href="defthm.html#def-defthm-fn" data-sym="DEFTHM-FN">defthm-fn</a>
                      <a class="sym-link system" href="defthm.html#def-defaxiom-fn" data-sym="DEFAXIOM-FN">defaxiom-fn</a>
                      <a class="sym-link local-def" href="#def-progn-fn" data-sym="PROGN-FN" title="(defun progn-fn (ev-lst state) (progn-fn1 ev-lst nil nil state))">progn-fn</a>
                      <a class="sym-link local-def" href="#def-encapsulate-fn" data-sym="ENCAPSULATE-FN" title="(defun encapsulate-fn (signatures ev-lst state event-form)
  (let ((ctx (encapsulate-ctx signatures ev-lst)))
    (with-ctx-summarized ctx
                         (let* ((wrld1 (w state))
                                (saved-proved-functional-instances-alist
...">encapsulate-fn</a>
                      <a class="sym-link local-def" href="#def-include-book-fn" data-sym="INCLUDE-BOOK-FN" title="(defun include-book-fn
       (user-book-name state load-compiled-file expansion-alist/cert-data
        uncertified-okp defaxioms-okp skip-proofs-okp ttags dir event-form)
  (with-ctx-summarized (cons &#39;include-book user-book-name)
                       (state-global-let*
...">include-book-fn</a>
                      <a class="sym-link system" href="history-management.html#def-deflabel-fn" data-sym="DEFLABEL-FN">deflabel-fn</a>
                      <a class="sym-link local-def" href="#def-deftheory-fn" data-sym="DEFTHEORY-FN" title="(defun deftheory-fn (name expr state redundant-okp ctx event-form)
  (when-logic &quot;DEFTHEORY&quot;
              (with-ctx-summarized (cond (ctx) (t (cons &#39;deftheory name)))
                                   (let ((wrld (w state))
                                         (event-form
...">deftheory-fn</a>
                      <a class="sym-link local-def" href="#def-in-theory-fn" data-sym="IN-THEORY-FN" title="(defun in-theory-fn (expr state event-form)
  (when-logic &quot;IN-THEORY&quot;
              (with-ctx-summarized
               (cond ((atom expr) (msg &quot;( IN-THEORY ~x0)&quot; expr))
                     ((symbolp (car expr))
...">in-theory-fn</a>
                      <a class="sym-link local-def" href="#def-in-arithmetic-theory-fn" data-sym="IN-ARITHMETIC-THEORY-FN" title="(defun in-arithmetic-theory-fn (expr state event-form)
  (when-logic &quot;IN-ARITHMETIC-THEORY&quot;
              (with-ctx-summarized
               (cond ((atom expr) (msg &quot;( IN-ARITHMETIC-THEORY ~x0)&quot; expr))
                     ((symbolp (car expr))
...">in-arithmetic-theory-fn</a>
                      <a class="sym-link local-def" href="#def-regenerate-tau-database-fn" data-sym="REGENERATE-TAU-DATABASE-FN" title="(defun regenerate-tau-database-fn (state event-form)
  (when-logic &quot;REGENERATE-TAU-DATABASE&quot;
              (with-ctx-summarized &quot;( REGENERATE-TAU-DATABASE)&quot;
                                   (let* ((wrld (w state))
                                          (event-form
...">regenerate-tau-database-fn</a>
                      <a class="sym-link local-def" href="#def-push-untouchable-fn" data-sym="PUSH-UNTOUCHABLE-FN" title="(defun push-untouchable-fn (name fn-p state event-form)
  (with-ctx-summarized
   (cond ((symbolp name) (msg &quot;( PUSH-UNTOUCHABLE ~x0 ~x1)&quot; name fn-p))
         (t &quot;( PUSH-UNTOUCHABLE ...)&quot;))
   (let ((wrld (w state))
...">push-untouchable-fn</a>
                      <a class="sym-link local-def" href="#def-remove-untouchable-fn" data-sym="REMOVE-UNTOUCHABLE-FN" title="(defun remove-untouchable-fn (name fn-p state event-form)
  (with-ctx-summarized
   (cond ((symbolp name) (msg &quot;( REMOVE-UNTOUCHABLE ~x0 ~x1)&quot; name fn-p))
         (t &quot;( REMOVE-UNTOUCHABLE ...)&quot;))
   (let ((wrld (w state))
...">remove-untouchable-fn</a>
                      <a class="sym-link local-def" href="#def-reset-prehistory-fn" data-sym="RESET-PREHISTORY-FN" title="(defun reset-prehistory-fn (pflg state event-form)
  (with-ctx-summarized
   (if (and (consp event-form) (eq (car event-form) &#39;disable-ubt))
       (if (cdr event-form)
           (msg &quot;( DISABLE-UBT ...)&quot;)
...">reset-prehistory-fn</a>
                      <a class="sym-link local-def" href="#def-set-body-fn" data-sym="SET-BODY-FN" title="(defun set-body-fn (fn name-or-rune state event-form)
  (with-ctx-summarized
   (cond ((symbolp fn) (msg &quot;( SET-BODY ~x0)&quot; fn)) (t &quot;( SET-BODY ...)&quot;))
   (let* ((wrld (w state))
          (rune
...">set-body-fn</a>
                      <a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a>
                      <a class="sym-link system" href="defuns.html#def-verify-guards-fn" data-sym="VERIFY-GUARDS-FN">verify-guards-fn</a>
                      <a class="sym-link system" href="defuns.html#def-verify-termination-boot-strap-fn" data-sym="VERIFY-TERMINATION-BOOT-STRAP-FN">verify-termination-boot-strap-fn</a>
                      <a class="sym-link local-def" href="#def-defchoose-fn" data-sym="DEFCHOOSE-FN" title="(defun defchoose-fn (def state event-form)
  (declare (xargs :guard (true-listp def)))
  (when-logic &quot;DEFCHOOSE&quot;
              (with-ctx-summarized (cons &#39;defchoose (car def))
                                   (let* ((wrld (w state))
...">defchoose-fn</a>
                      apply
                      <a class="sym-link system" href="axioms.html#def-o-p" data-sym="O-P">o-p</a>
                      <a class="sym-link system" href="axioms.html#def-o_3C" data-sym="O&lt;">o&lt;</a>
                      <a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a>
                      <a class="sym-link local-def" href="#def-defattach-fn" data-sym="DEFATTACH-FN" title="(defun defattach-fn (args state event-form)
  (with-ctx-summarized
   (case-match args (((x y)) (msg &quot;( DEFATTACH (~x0 ~x1))&quot; x y))
               (((x y . &amp;)) (msg &quot;( DEFATTACH (~x0 ~x1 ...))&quot; x y))
               (((x y) . &amp;) (msg &quot;( DEFATTACH (~x0 ~x1) ...)&quot; x y))
...">defattach-fn</a>
                      <a class="sym-link system" href="axioms.html#def-default-defun-mode-from-state" data-sym="DEFAULT-DEFUN-MODE-FROM-STATE">default-defun-mode-from-state</a>
                      <a class="sym-link system" href="basis-b.html#def-skip-when-logic" data-sym="SKIP-WHEN-LOGIC">skip-when-logic</a>
                      state
                      declare
                      apropos
                      finding-documentation
                      enter-boot-strap-mode
                      exit-boot-strap-mode
                      lp
                      acl2-defaults-table
                      let
                      <a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a>
                      complex
                      complex-rationalp
                      ,@(STRIP-CARS *INITIAL-RECOGNIZER-ALIST*)))
                  (<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> nil)
                  (never-untouchable-fns nil)
                  (untouchable-fns nil)
                  (untouchable-vars nil)
                  (defined-hereditarily-constrained-fns nil)
                  (attach-nil-lst nil)
                  (<a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a> nil)
                  (attachments-at-ground-zero nil)
                  (proof-supporters-alist nil)
                  (lambda$-alist nil)
                  (loop$-alist nil)
                  (common-lisp-compliant-lambdas nil)
                  (rewrite-quoted-constant-rules nil)
                  (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> ,PROJECT-DIR-ALIST)
                  (projects/apply/base-includedp nil)
                  (ext-gens nil)
                  (ext-gen-barriers nil))))
             (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> `(operating-system ,OPERATING-SYSTEM)
               `(command-number-baseline-info ,(MAKE COMMAND-NUMBER-BASELINE-INFO :CURRENT 0 :PERMANENT-P T :ORIGINAL 0))
               globals)))
         nil)))
    (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'world-globals
      (<a class="sym-link local-def" href="#def-collect-world-globals" data-sym="COLLECT-WORLD-GLOBALS" title="(defun collect-world-globals (wrld ans)
  (cond ((null wrld) ans)
        ((eq (cadar wrld) &#39;global-value)
         (collect-world-globals (cdr wrld) (add-to-set-eq (caar wrld) ans)))
        (t (collect-world-globals (cdr wrld) ans))))">collect-world-globals</a> wrld '(world-globals))
      wrld)))</pre>
  </div>

<div class="form-block function" id="def-arglists-to-nils" data-defines="ARGLISTS-TO-NILS" data-references="CDR,CAR,LENGTH,MAKE-LIST,CONS,T,ENDP,COND,TRUE-LIST-LISTP,XARGS,DECLARE,ARGLISTS,DEFUN" data-used-by="PRIMORDIAL-WORLD" data-part-name="ARGLISTS-TO-NILS" data-part-args="ARGLISTS" data-part-declare="ARGLISTS,TRUE-LIST-LISTP,XARGS,DECLARE" data-part-body="CDR,ARGLISTS-TO-NILS,CAR,LENGTH,MAKE-LIST,CONS,T,ARGLISTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ARGLISTS-TO-NILS">arglists-to-nils</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-arglists-to-nils" data-sym="ARGLISTS-TO-NILS" title="(defun arglists-to-nils (arglists)
  (declare (xargs :guard (true-list-listp arglists)))
  (cond ((endp arglists) nil)
        (t
         (cons (make-list (length (car arglists)))">arglists-to-nils</a>
  (arglists)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-list-listp" data-sym="TRUE-LIST-LISTP">true-list-listp</a> arglists)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> arglists) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (car arglists)))
        (<a class="sym-link local-def" href="#def-arglists-to-nils" data-sym="ARGLISTS-TO-NILS" title="(defun arglists-to-nils (arglists)
  (declare (xargs :guard (true-list-listp arglists)))
  (cond ((endp arglists) nil)
        (t
         (cons (make-list (length (car arglists)))">arglists-to-nils</a> (cdr arglists))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Aunattachable-primitives_2A" data-defines="*UNATTACHABLE-PRIMITIVES*" data-references="APPLY$-USERFN,BADGE-USERFN,ZP-BIG-N,DECREMENT-BIG-N,BIG-N,QUOTE,DEFCONST" data-used-by="PROCESS-DEFATTACH-ARGS1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*UNATTACHABLE-PRIMITIVES*">*unattachable-primitives*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aunattachable-primitives_2A" data-sym="*UNATTACHABLE-PRIMITIVES*" title="(defconst *unattachable-primitives*
          &#39;(big-n decrement-big-n zp-big-n badge-userfn apply$-userfn))">*unattachable-primitives*</a>
  '(big-n decrement-big-n zp-big-n badge-userfn apply$-userfn))</pre>
  </div>

<div class="form-block function" id="def-putprop-recognizer-alist" data-defines="PUTPROP-RECOGNIZER-ALIST" data-references="GETPROPC,CONS,RECOGNIZER-ALIST,QUOTE,PUTPROP,RECOGNIZER-TUPLE,ACCESS,FN,CAR,RECOG-TUPLE,LET*,CDR,T,ENDP,COND,WRLD,ALIST,DEFUN" data-used-by="PRIMORDIAL-WORLD" data-part-name="PUTPROP-RECOGNIZER-ALIST" data-part-args="WRLD,ALIST" data-part-body="GETPROPC,CONS,RECOGNIZER-ALIST,QUOTE,PUTPROP,RECOGNIZER-TUPLE,ACCESS,FN,CAR,RECOG-TUPLE,LET*,CDR,PUTPROP-RECOGNIZER-ALIST,T,WRLD,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUTPROP-RECOGNIZER-ALIST">putprop-recognizer-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-putprop-recognizer-alist" data-sym="PUTPROP-RECOGNIZER-ALIST" title="(defun putprop-recognizer-alist (alist wrld)
  (cond ((endp alist) wrld)
        (t
         (putprop-recognizer-alist (cdr alist)
                                   (let* ((recog-tuple (car alist))
...">putprop-recognizer-alist</a>
  (alist wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-putprop-recognizer-alist" data-sym="PUTPROP-RECOGNIZER-ALIST" title="(defun putprop-recognizer-alist (alist wrld)
  (cond ((endp alist) wrld)
        (t
         (putprop-recognizer-alist (cdr alist)
                                   (let* ((recog-tuple (car alist))
...">putprop-recognizer-alist</a> (cdr alist)
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((recog-tuple (car alist)) (fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> recognizer-tuple recog-tuple <span class="keyword">:fn</span>)))
          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn
            'recognizer-alist
            (cons recog-tuple (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'recognizer-alist nil wrld))
            wrld))))))</pre>
  </div>

<div class="form-block function" id="def-primordial-world" data-defines="PRIMORDIAL-WORLD" data-references="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-RECOGNIZER-ALIST*,PUTPROP-RECOGNIZER-ALIST,*THE-LIVE-STATE*,STOBJ,STATE,*INITIAL-EVENT-DEFMACROS*,PRIMORDIAL-EVENT-MACROS-AND-FNS,STOBJS-OUT,ARGLISTS-TO-NILS,STOBJS-IN,PEQUIVS,CONGRUENCES,STRIP-CDRS,TYPE-PRESCRIPTIONS,*INITIAL-TYPE-PRESCRIPTIONS*,FORMALS,PUTPROP-X-LST2,*T*,GUARD,PUTPROP-X-LST2-UNLESS,SYMBOL-CLASS,CONSTRAINEDP,CLASSICALP,PUTPROP-DEFUN-RUNIC-MAPPING-PAIRS,T,PREDEFINED,ABSOLUTE-EVENT-NUMBER,PUTPROP-X-LST1,COARSENINGS,EQUAL,PUTPROP,*PRIMITIVE-MONADIC-BOOLEANS*,INITIALIZE-TAU-PREDS,*INITIAL-KNOWN-PACKAGE-ALIST*,STRIP-NON-HIDDEN-PACKAGE-NAMES,APPEND,ADD-EVENT-LANDMARK,ENTER-BOOT-STRAP-MODE,QUOTE,LIST,ADD-COMMAND-LANDMARK,NS-NAMES,STRIP-CADDRS,GUARDS,STRIP-CADRS,ARGLISTS,*PRIMITIVE-FORMALS-AND-GUARDS*,STRIP-CARS,NAMES,LET,PROJECT-DIR-ALIST,OPERATING-SYSTEM,DEFUN" data-part-name="PRIMORDIAL-WORLD" data-part-args="PROJECT-DIR-ALIST,OPERATING-SYSTEM" data-part-body="PROJECT-DIR-ALIST,PRIMORDIAL-WORLD-GLOBALS,*INITIAL-RECOGNIZER-ALIST*,PUTPROP-RECOGNIZER-ALIST,*THE-LIVE-STATE*,STOBJ,STATE,*INITIAL-EVENT-DEFMACROS*,PRIMORDIAL-EVENT-MACROS-AND-FNS,STOBJS-OUT,ARGLISTS-TO-NILS,STOBJS-IN,PEQUIVS,CONGRUENCES,STRIP-CDRS,TYPE-PRESCRIPTIONS,*INITIAL-TYPE-PRESCRIPTIONS*,FORMALS,PUTPROP-X-LST2,*T*,GUARD,PUTPROP-X-LST2-UNLESS,SYMBOL-CLASS,CONSTRAINEDP,CLASSICALP,PUTPROP-DEFUN-RUNIC-MAPPING-PAIRS,T,PREDEFINED,ABSOLUTE-EVENT-NUMBER,PUTPROP-X-LST1,COARSENINGS,EQUAL,PUTPROP,*PRIMITIVE-MONADIC-BOOLEANS*,INITIALIZE-TAU-PREDS,*INITIAL-KNOWN-PACKAGE-ALIST*,STRIP-NON-HIDDEN-PACKAGE-NAMES,APPEND,ADD-EVENT-LANDMARK,OPERATING-SYSTEM,ENTER-BOOT-STRAP-MODE,QUOTE,LIST,ADD-COMMAND-LANDMARK,NS-NAMES,STRIP-CADDRS,GUARDS,STRIP-CADRS,ARGLISTS,*PRIMITIVE-FORMALS-AND-GUARDS*,STRIP-CARS,NAMES,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRIMORDIAL-WORLD">primordial-world</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-primordial-world" data-sym="PRIMORDIAL-WORLD" title="(defun primordial-world (operating-system project-dir-alist)
  (let ((names (strip-cars *primitive-formals-and-guards*))
        (arglists (strip-cadrs *primitive-formals-and-guards*))
        (guards (strip-caddrs *primitive-formals-and-guards*))
        (ns-names nil))
...">primordial-world</a>
  (operating-system <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>)
  (let ((names (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-formals-and-guards_2A" data-sym="*PRIMITIVE-FORMALS-AND-GUARDS*">*primitive-formals-and-guards*</a>)) (arglists (<a class="sym-link system" href="axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-formals-and-guards_2A" data-sym="*PRIMITIVE-FORMALS-AND-GUARDS*">*primitive-formals-and-guards*</a>))
      (guards (strip-caddrs <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-formals-and-guards_2A" data-sym="*PRIMITIVE-FORMALS-AND-GUARDS*">*primitive-formals-and-guards*</a>))
      (ns-names nil))
    (<a class="sym-link system" href="history-management.html#def-add-command-landmark" data-sym="ADD-COMMAND-LANDMARK">add-command-landmark</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'enter-boot-strap-mode operating-system)
      nil
      nil
      (<a class="sym-link system" href="history-management.html#def-add-event-landmark" data-sym="ADD-EVENT-LANDMARK">add-event-landmark</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'enter-boot-strap-mode operating-system)
        'enter-boot-strap-mode
        (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-formals-and-guards_2A" data-sym="*PRIMITIVE-FORMALS-AND-GUARDS*">*primitive-formals-and-guards*</a>)
          (<a class="sym-link system" href="defuns.html#def-strip-non-hidden-package-names" data-sym="STRIP-NON-HIDDEN-PACKAGE-NAMES">strip-non-hidden-package-names</a> <a class="sym-link system" href="axioms.html#def-_2Ainitial-known-package-alist_2A" data-sym="*INITIAL-KNOWN-PACKAGE-ALIST*">*initial-known-package-alist*</a>))
        (initialize-tau-preds <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-monadic-booleans_2A" data-sym="*PRIMITIVE-MONADIC-BOOLEANS*">*primitive-monadic-booleans*</a>
          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> 'equal
            'coarsenings
            '(equal)
            (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> names
              'absolute-event-number
              <span class="number">0</span>
              (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> names
                'predefined
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                (<a class="sym-link system" href="defuns.html#def-putprop-defun-runic-mapping-pairs" data-sym="PUTPROP-DEFUN-RUNIC-MAPPING-PAIRS">putprop-defun-runic-mapping-pairs</a> names
                  nil
                  (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> ns-names
                    'classicalp
                    nil
                    (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> ns-names
                      'constrainedp
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> names
                        '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
                        <span class="keyword">:common-lisp-compliant</span> (<a class="sym-link system" href="history-management.html#def-putprop-x-lst2-unless" data-sym="PUTPROP-X-LST2-UNLESS">putprop-x-lst2-unless</a> names
                          '<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                          guards
                          <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>
                          (<a class="sym-link system" href="history-management.html#def-putprop-x-lst2" data-sym="PUTPROP-X-LST2">putprop-x-lst2</a> names
                            '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                            arglists
                            (<a class="sym-link system" href="history-management.html#def-putprop-x-lst2" data-sym="PUTPROP-X-LST2">putprop-x-lst2</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> <a class="sym-link local-def" href="#def-_2Ainitial-type-prescriptions_2A" data-sym="*INITIAL-TYPE-PRESCRIPTIONS*" title="(defconst *initial-type-prescriptions*
          (list
           (list &#39;o-p
                 (make type-prescription :rune
                       *fake-rune-for-anonymous-enabled-rule* :nume nil :term
...">*initial-type-prescriptions*</a>)
                              'type-prescriptions
                              (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> <a class="sym-link local-def" href="#def-_2Ainitial-type-prescriptions_2A" data-sym="*INITIAL-TYPE-PRESCRIPTIONS*" title="(defconst *initial-type-prescriptions*
          (list
           (list &#39;o-p
                 (make type-prescription :rune
                       *fake-rune-for-anonymous-enabled-rule* :nume nil :term
...">*initial-type-prescriptions*</a>)
                              (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> names
                                'coarsenings
                                nil
                                (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> names
                                  'congruences
                                  nil
                                  (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> names
                                    'pequivs
                                    nil
                                    (<a class="sym-link system" href="history-management.html#def-putprop-x-lst2" data-sym="PUTPROP-X-LST2">putprop-x-lst2</a> names
                                      '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                                      (<a class="sym-link local-def" href="#def-arglists-to-nils" data-sym="ARGLISTS-TO-NILS" title="(defun arglists-to-nils (arglists)
  (declare (xargs :guard (true-list-listp arglists)))
  (cond ((endp arglists) nil)
        (t
         (cons (make-list (length (car arglists)))">arglists-to-nils</a> arglists)
                                      (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> names
                                        '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                                        '(nil)
                                        (<a class="sym-link local-def" href="#def-primordial-event-macros-and-fns" data-sym="PRIMORDIAL-EVENT-MACROS-AND-FNS" title="(defun primordial-event-macros-and-fns (lst wrld)
  (cond ((null lst) wrld)
        (t
         (primordial-event-macros-and-fns (cdr lst)
                                          (primordial-event-macro-and-fn">primordial-event-macros-and-fns</a> <a class="sym-link local-def" href="#def-_2Ainitial-event-defmacros_2A" data-sym="*INITIAL-EVENT-DEFMACROS*" title="(defconst *initial-event-defmacros*
          &#39;((defmacro in-package (str)
              (list &#39;in-package-fn (list &#39;quote str) &#39;state))
            (defmacro defpkg
                      (&amp;whole event-form name form &amp;optional doc book-path)
...">*initial-event-defmacros*</a>
                                          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> 'state
                                            'stobj
                                            '(*the-live-state*)
                                            (<a class="sym-link local-def" href="#def-putprop-recognizer-alist" data-sym="PUTPROP-RECOGNIZER-ALIST" title="(defun putprop-recognizer-alist (alist wrld)
  (cond ((endp alist) wrld)
        (t
         (putprop-recognizer-alist (cdr alist)
                                   (let* ((recog-tuple (car alist))
...">putprop-recognizer-alist</a> *initial-recognizer-alist*
                                              (<a class="sym-link local-def" href="#def-primordial-world-globals" data-sym="PRIMORDIAL-WORLD-GLOBALS" title="(defun primordial-world-globals (operating-system project-dir-alist)
  (let ((wrld
         (global-set-lst
          (list*
           (list &#39;event-landmark (make-event-tuple -1 0 nil nil 0 nil nil nil))
...">primordial-world-globals</a> operating-system
                                                <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>))))))))))))))))))))
        <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
        nil
        nil))))</pre>
  </div>

<div class="form-block function" id="def-same-name-twice" data-defines="SAME-NAME-TWICE" data-references="T,LIST,CADR,CAR,SYMBOL-NAME,EQUAL,CDR,NULL,COND,L,DEFUN" data-used-by="CONFLICTING-IMPORTS" data-part-name="SAME-NAME-TWICE" data-part-args="L" data-part-body="SAME-NAME-TWICE,T,LIST,CADR,CAR,SYMBOL-NAME,EQUAL,CDR,L,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAME-NAME-TWICE">same-name-twice</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-same-name-twice" data-sym="SAME-NAME-TWICE" title="(defun same-name-twice (l)
  (cond ((null l) nil) ((null (cdr l)) nil)
        ((equal (symbol-name (car l)) (symbol-name (cadr l)))
         (list (car l) (cadr l)))
        (t (same-name-twice (cdr l)))))">same-name-twice</a>
  (l)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> l) nil)
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr l)) nil)
    ((equal (symbol-name (car l)) (symbol-name (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> l))) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car l) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> l)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-same-name-twice" data-sym="SAME-NAME-TWICE" title="(defun same-name-twice (l)
  (cond ((null l) nil) ((null (cdr l)) nil)
        ((equal (symbol-name (car l)) (symbol-name (cadr l)))
         (list (car l) (cadr l)))
        (t (same-name-twice (cdr l)))))">same-name-twice</a> (cdr l)))))</pre>
  </div>

<div class="form-block function" id="def-conflicting-imports" data-defines="CONFLICTING-IMPORTS" data-references="SAME-NAME-TWICE,L,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFPKG" data-part-name="CONFLICTING-IMPORTS" data-part-args="L" data-part-body="L,SAME-NAME-TWICE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONFLICTING-IMPORTS">conflicting-imports</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-conflicting-imports" data-sym="CONFLICTING-IMPORTS" title="(defun conflicting-imports (l) (same-name-twice l))">conflicting-imports</a> (l) (<a class="sym-link local-def" href="#def-same-name-twice" data-sym="SAME-NAME-TWICE" title="(defun same-name-twice (l)
  (cond ((null l) nil) ((null (cdr l)) nil)
        ((equal (symbol-name (car l)) (symbol-name (cadr l)))
         (list (car l) (cadr l)))
        (t (same-name-twice (cdr l)))))">same-name-twice</a> l))</pre>
  </div>

<div class="form-block function" id="def-chk-new-stringp-name" data-defines="CHK-NEW-STRINGP-NAME" data-references="VALUE,INCLUDE-BOOK,INCLUDE-BOOK-ALIST,ASSOC-EQUAL,PACKAGE-ENTRY-HIDDEN-P,KNOWN-PACKAGE-ALIST,GLOBAL-VAL,FIND-PACKAGE-ENTRY,AND,ENTRY,LET,T,SOFT,ER,BOOK-NAME-P,STRINGP,DEFPKG,QUOTE,EQ,IF,NOT,COND,STATE,W,CTX,NAME,EV-TYPE,DEFUN" data-used-by="INCLUDE-BOOK-FN1,CHK-ACCEPTABLE-DEFPKG" data-part-name="CHK-NEW-STRINGP-NAME" data-part-args="STATE,W,CTX,NAME,EV-TYPE" data-part-body="VALUE,INCLUDE-BOOK,INCLUDE-BOOK-ALIST,ASSOC-EQUAL,PACKAGE-ENTRY-HIDDEN-P,W,KNOWN-PACKAGE-ALIST,GLOBAL-VAL,FIND-PACKAGE-ENTRY,AND,ENTRY,LET,T,CTX,SOFT,ER,BOOK-NAME-P,NAME,STRINGP,DEFPKG,QUOTE,EV-TYPE,EQ,IF,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-NEW-STRINGP-NAME">chk-new-stringp-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-new-stringp-name" data-sym="CHK-NEW-STRINGP-NAME" title="(defun chk-new-stringp-name (ev-type name ctx w state)
  (cond
   ((not
     (if (eq ev-type &#39;defpkg)
         (stringp name)
...">chk-new-stringp-name</a>
  (ev-type name ctx <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ev-type '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>)
         (stringp name)
         (<a class="sym-link system" href="basis-a.html#def-book-name-p" data-sym="BOOK-NAME-P">book-name-p</a> name))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The first argument to ~s0 must be a ~s1.  You provided the object ~
         ~x2.  See :DOC ~s0."</span>
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ev-type '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>) <span class="string">"defpkg"</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"include-book"</span>))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ev-type '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>) <span class="string">"string"</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"book-name"</span>))
        name))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((entry (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp name)
             (<a class="sym-link system" href="axioms.html#def-find-package-entry" data-sym="FIND-PACKAGE-ENTRY">find-package-entry</a> name
               (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> entry
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ev-type '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>) (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> entry)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The name ~x0 is in use as a package name.  We do not permit ~
               package names~s1 to participate in redefinition.  If you must ~
               redefine this name, use :ubt to undo the existing definition."</span>
              name
              (if (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> entry)
                <span class="string">" (even those that are hidden; see :DOC hidden-death-package"</span>
                <span class="string">""</span>)))
          ((<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> name (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ev-type '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> name))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"The name ~x0 is in use as a book-name.  You are trying to ~
                 redefine it as a package.  We do not permit package names to ~
                 participate in redefinition.  If you must redefine this ~
                 name, use :ubt to undo the existing definition."</span>
                  name))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))))</pre>
  </div>

<div class="form-block function" id="def-chk-package-reincarnation-import-restrictions" data-defines="CHK-PACKAGE-REINCARNATION-IMPORT-RESTRICTIONS" data-references="T,IGNORE,DECLARE,PROPOSED-IMPORTS,NAME,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFPKG" data-part-name="CHK-PACKAGE-REINCARNATION-IMPORT-RESTRICTIONS" data-part-args="PROPOSED-IMPORTS,NAME" data-part-declare="PROPOSED-IMPORTS,NAME,IGNORE,DECLARE" data-part-body="T" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-PACKAGE-REINCARNATION-IMPORT-RESTRICTIONS">chk-package-reincarnation-import-restrictions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-package-reincarnation-import-restrictions" data-sym="CHK-PACKAGE-REINCARNATION-IMPORT-RESTRICTIONS" title="(defun chk-package-reincarnation-import-restrictions (name proposed-imports)
  (declare (ignore name proposed-imports))
  t)">chk-package-reincarnation-import-restrictions</a>
  (name proposed-imports)
  (declare (ignore name proposed-imports))
  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-convert-book-string-to-cert" data-defines="CONVERT-BOOK-STRING-TO-CERT" data-references="HARD,ER,OTHERWISE,T,CASE,REMOVE-LISP-SUFFIX,STRING,QUOTE,CONCATENATE,CERT-OP,X,DEFUN" data-used-by="CERTIFY-BOOK-STEP-2,CERTIFY-BOOK-EXPANSION-ALIST0,CERTIFY-BOOK-FINISH-COMPLETE,INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS,CERTIFY-BOOK-FINISH-CONVERT,PRINT-CERTIFY-BOOK-STEP-4,MAKE-CERTIFICATE-FILES,MAKE-CERTIFICATE-FILE,CERTIFICATE-FILE-AND-INPUT-CHANNEL1" data-part-name="CONVERT-BOOK-STRING-TO-CERT" data-part-args="CERT-OP,X" data-part-body="CONVERT-BOOK-STRING-TO-CERT,HARD,ER,OTHERWISE,T,CERT-OP,CASE,X,REMOVE-LISP-SUFFIX,STRING,QUOTE,CONCATENATE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONVERT-BOOK-STRING-TO-CERT">convert-book-string-to-cert</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a>
  (x <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>)
  (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
    (<a class="sym-link system" href="history-management.html#def-remove-lisp-suffix" data-sym="REMOVE-LISP-SUFFIX">remove-lisp-suffix</a> x nil)
    (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
      ((<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <span class="string">"cert"</span>)
      ((<span class="keyword">:create-pcert</span> <span class="keyword">:create+convert-pcert</span>) <span class="string">"pcert0"</span>)
      (<span class="keyword">:convert-pcert</span> <span class="string">"pcert1"</span>)
      (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a>
          <span class="string">"Bad value of cert-op for convert-book-string-to-cert:  ~
                       ~x0"</span>
          <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>)))))</pre>
  </div>

<div class="form-block function" id="def-tilde-_40-defpkg-error-phrase" data-defines="TILDE-@-DEFPKG-ERROR-PHRASE" data-references="APPEND,MSG,INCLUDE-BOOK-PATH,GLOBAL-VAL,INCLUDE-BOOK-PATH-STRINGS,LET,REVERSE,ZERO-ONE-OR-MORE,SYMBOL-NAME,CAR,SYMBOL-PACKAGE-NAME,OR,PACKAGE-ENTRY-HIDDEN-P,IF,CONS,LIST,DEFPKG-BOOK-PATH-STRINGS,BOOK-NAME-LST-TO-FILENAME-LST,BOOK-PATH-STRINGS,QUOTE,CTX,PROJECT-DIR-ALIST,LET*,W,DEFPKG-BOOK-PATH,BOOK-PATH,OLD-NOT-NEW,NEW-NOT-OLD,PACKAGE-ENTRY,NAME,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFPKG" data-part-name="TILDE-@-DEFPKG-ERROR-PHRASE" data-part-args="W,DEFPKG-BOOK-PATH,BOOK-PATH,OLD-NOT-NEW,NEW-NOT-OLD,PACKAGE-ENTRY,NAME" data-part-body="APPEND,MSG,INCLUDE-BOOK-PATH,GLOBAL-VAL,INCLUDE-BOOK-PATH-STRINGS,LET,REVERSE,ZERO-ONE-OR-MORE,SYMBOL-NAME,CAR,SYMBOL-PACKAGE-NAME,OLD-NOT-NEW,NEW-NOT-OLD,OR,PACKAGE-ENTRY,PACKAGE-ENTRY-HIDDEN-P,IF,NAME,CONS,LIST,DEFPKG-BOOK-PATH,DEFPKG-BOOK-PATH-STRINGS,BOOK-PATH,BOOK-NAME-LST-TO-FILENAME-LST,BOOK-PATH-STRINGS,TILDE-@-DEFPKG-ERROR-PHRASE,QUOTE,CTX,W,PROJECT-DIR-ALIST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-@-DEFPKG-ERROR-PHRASE">tilde-@-defpkg-error-phrase</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_40-defpkg-error-phrase" data-sym="TILDE-@-DEFPKG-ERROR-PHRASE" title="(defun tilde-@-defpkg-error-phrase
       (name package-entry new-not-old old-not-new book-path defpkg-book-path
        w)
  (let* ((project-dir-alist (project-dir-alist w))
         (ctx &#39;tilde-@-defpkg-error-phrase)
...">tilde-@-defpkg-error-phrase</a>
  (name package-entry
    new-not-old
    old-not-new
    book-path
    defpkg-book-path
    <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)) (ctx '<a class="sym-link local-def" href="#def-tilde-_40-defpkg-error-phrase" data-sym="TILDE-@-DEFPKG-ERROR-PHRASE" title="(defun tilde-@-defpkg-error-phrase
       (name package-entry new-not-old old-not-new book-path defpkg-book-path
        w)
  (let* ((project-dir-alist (project-dir-alist w))
         (ctx &#39;tilde-@-defpkg-error-phrase)
...">tilde-@-defpkg-error-phrase</a>)
      (book-path-strings (<a class="sym-link system" href="basis-a.html#def-book-name-lst-to-filename-lst" data-sym="BOOK-NAME-LST-TO-FILENAME-LST">book-name-lst-to-filename-lst</a> book-path
          <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
          ctx))
      (defpkg-book-path-strings (<a class="sym-link system" href="basis-a.html#def-book-name-lst-to-filename-lst" data-sym="BOOK-NAME-LST-TO-FILENAME-LST">book-name-lst-to-filename-lst</a> defpkg-book-path
          <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
          ctx)))
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">"The proposed defpkg conflicts with an existing defpkg for ~
      name ~x0~@1.  ~#a~[For example, symbol ~s2::~s3 is in the list of ~
      imported symbols for the ~s4 definition but not for the other.~/The two ~
      have the same lists of imported symbols, but not in the same order.~]  ~
      The existing defpkg is ~#5~[at the top level.~/in the certificate file ~
      for the book ~x7, which is included at the top level.~/in the ~
      certificate file for the book ~x7, which is included via the following ~
      path, from top-most book down to the above file.~|  ~F8~]~@9~@b"</span>
      (cons #\0 name)
      (cons #\1
        (if (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> package-entry)
          <span class="string">" that no longer exists in the current ACL2 logical world ~
                  (see :DOC hidden-death-package)"</span>
          <span class="string">""</span>))
      (cons #\a
        (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> new-not-old old-not-new)
          <span class="number">0</span>
          <span class="number">1</span>))
      (cons #\2
        (symbol-package-name (if new-not-old
            (car new-not-old)
            (car old-not-new))))
      (cons #\3
        (symbol-name (if new-not-old
            (car new-not-old)
            (car old-not-new))))
      (cons #\4
        (if new-not-old
          <span class="string">"proposed"</span>
          <span class="string">"existing"</span>))
      (cons #\5 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> book-path-strings))
      (cons #\7 (car book-path-strings))
      (cons #\8 (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> book-path-strings))
      (cons #\9
        (if defpkg-book-path-strings
          <span class="string">"~|This existing defpkg event appears to have been created ~
                  because of a defpkg that was hidden by a local include-book; ~
                  see :DOC hidden-death-package."</span>
          <span class="string">""</span>))
      (cons #\b
        (let ((include-book-path-strings (<a class="sym-link system" href="basis-a.html#def-book-name-lst-to-filename-lst" data-sym="BOOK-NAME-LST-TO-FILENAME-LST">book-name-lst-to-filename-lst</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-path <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
               <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
               ctx)))
          (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> include-book-path-strings defpkg-book-path-strings)
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~|The proposed defpkg event may be found by ~
                           following the sequence of include-books below, ~
                           from top-most book down to the book whose ~
                           portcullis contains the proposed defpkg event.~|  ~
                           ~F0"</span>
              (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> defpkg-book-path-strings include-book-path-strings)))
            <span class="string">""</span>))))))</pre>
  </div>

<div class="form-block constant" id="def-_2A1_2A-pkg-prefix_2A" data-defines="*1*-PKG-PREFIX*" data-references="RESULT,LET,DEFCONST" data-used-by="CHK-ACCEPTABLE-DEFPKG" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*1*-PKG-PREFIX*">*1*-pkg-prefix*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2A1_2A-pkg-prefix_2A" data-sym="*1*-PKG-PREFIX*" title="(defconst *1*-pkg-prefix*
          (let ((result &quot;ACL2_*1*_&quot;))
            result))">*1*-pkg-prefix*</a>
  (let ((result <span class="string">"ACL2_*1*_"</span>))
    result))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-defpkg" data-defines="CHK-ACCEPTABLE-DEFPKG" data-references="LIST*,THEOREM,CHK-JUST-NEW-NAME,CHK-ALL-BUT-NEW-NAME,DEFPKG,CHK-NEW-STRINGP-NAME,CHK-PACKAGE-REINCARNATION-IMPORT-RESTRICTIONS,PROG2$,PACKAGE-ENTRY-BOOK-PATH,SET-DIFFERENCE-EQ,TILDE-@-DEFPKG-ERROR-PHRASE,PACKAGE-ENTRY-IMPORTS,*PKG-WITNESS-NAME*,MEMBER-SYMBOL-NAME,CONS,PACKN,BASE-SYMBOL,CONFLICTING-IMPORTS,CONFLICT,SORT-SYMBOL-LISTP,LET*,SYMBOL-LISTP,CDR,IMPORTS,CAR,TFORM,SIMPLE-TRANSLATE-AND-EVAL,PAIR,ER-LET*,SAFE-MODE,STATE-GLOBAL-LET*,SUBSEQ,STRING-EQUAL,<=,*1*-PKG-PREFIX*,LENGTH,LEN,STRING-UPCASE,STRINGP,INCLUDE-BOOK,LD-SKIP-PROOFSP,EQ,ER-PROGN,T,REDUNDANT,VALUE,PACKAGE-ENTRY-DEFPKG-EVENT-FORM,CADDR,EQUAL,PACKAGE-ENTRY-HIDDEN-P,OR,MSG,PROJECT-DIR-ALIST,SYSFILE-KEY,PROJECT-DIR-LOOKUP,SYSFILE-P,IF,X,OS,GET-INVALID-BOOK-NAME,SOFT,ER,TRUE-LISTP,COND,KNOWN-PACKAGE-ALIST,GLOBAL-VAL,FIND-PACKAGE-ENTRY,BOOT-STRAP-FLG,QUOTE,F-GET-GLOBAL,NOT,AND,PACKAGE-ENTRY,LET,STATE,W,CTX,HIDDEN-P,DEFPKG-BOOK-PATH,FORM,NAME,DEFUN" data-used-by="DEFPKG-FN" data-part-name="CHK-ACCEPTABLE-DEFPKG" data-part-args="STATE,W,CTX,HIDDEN-P,DEFPKG-BOOK-PATH,FORM,NAME" data-part-body="LIST*,THEOREM,CHK-JUST-NEW-NAME,CHK-ALL-BUT-NEW-NAME,DEFPKG,CHK-NEW-STRINGP-NAME,CHK-PACKAGE-REINCARNATION-IMPORT-RESTRICTIONS,PROG2$,PACKAGE-ENTRY-BOOK-PATH,SET-DIFFERENCE-EQ,TILDE-@-DEFPKG-ERROR-PHRASE,PACKAGE-ENTRY-IMPORTS,*PKG-WITNESS-NAME*,MEMBER-SYMBOL-NAME,CONS,PACKN,BASE-SYMBOL,CONFLICTING-IMPORTS,CONFLICT,SORT-SYMBOL-LISTP,LET*,SYMBOL-LISTP,CDR,IMPORTS,CAR,TFORM,SIMPLE-TRANSLATE-AND-EVAL,PAIR,ER-LET*,SAFE-MODE,STATE-GLOBAL-LET*,SUBSEQ,STRING-EQUAL,<=,*1*-PKG-PREFIX*,LENGTH,LEN,STRING-UPCASE,STRINGP,INCLUDE-BOOK,LD-SKIP-PROOFSP,EQ,ER-PROGN,T,REDUNDANT,VALUE,FORM,PACKAGE-ENTRY-DEFPKG-EVENT-FORM,CADDR,EQUAL,PACKAGE-ENTRY-HIDDEN-P,HIDDEN-P,OR,MSG,PROJECT-DIR-ALIST,SYSFILE-KEY,PROJECT-DIR-LOOKUP,SYSFILE-P,IF,X,OS,GET-INVALID-BOOK-NAME,CTX,SOFT,ER,DEFPKG-BOOK-PATH,TRUE-LISTP,COND,W,KNOWN-PACKAGE-ALIST,GLOBAL-VAL,NAME,FIND-PACKAGE-ENTRY,STATE,BOOT-STRAP-FLG,QUOTE,F-GET-GLOBAL,NOT,AND,PACKAGE-ENTRY,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-DEFPKG">chk-acceptable-defpkg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-defpkg" data-sym="CHK-ACCEPTABLE-DEFPKG" title="(defun chk-acceptable-defpkg (name form defpkg-book-path hidden-p ctx w state)
  (let ((package-entry
         (and (not (f-get-global &#39;boot-strap-flg state))
              (find-package-entry name (global-val &#39;known-package-alist w)))))
    (cond
...">chk-acceptable-defpkg</a>
  (name form defpkg-book-path hidden-p ctx <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
  (let ((package-entry (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state))
         (<a class="sym-link system" href="axioms.html#def-find-package-entry" data-sym="FIND-PACKAGE-ENTRY">find-package-entry</a> name
           (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> defpkg-book-path)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The book-path argument to defpkg, if supplied, must be a ~
           true-listp.  It is not recommended to supply this argument, since ~
           the system makes use of it for producing useful error messages.  ~
           The defpkg of ~x0 is thus illegal."</span>
          name))
      ((<a class="sym-link system" href="basis-a.html#def-get-invalid-book-name" data-sym="GET-INVALID-BOOK-NAME">get-invalid-book-name</a> defpkg-book-path (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"A defpkg form for ~x0 specifies an invalid book-path entry, ~x1.~@2"</span>
          name
          (<a class="sym-link system" href="basis-a.html#def-get-invalid-book-name" data-sym="GET-INVALID-BOOK-NAME">get-invalid-book-name</a> defpkg-book-path (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
          (let ((x (<a class="sym-link system" href="basis-a.html#def-get-invalid-book-name" data-sym="GET-INVALID-BOOK-NAME">get-invalid-book-name</a> defpkg-book-path (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
            (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-a.html#def-sysfile-p" data-sym="SYSFILE-P">sysfile-p</a> x)
                (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-project-dir-lookup" data-sym="PROJECT-DIR-LOOKUP">project-dir-lookup</a> (<a class="sym-link system" href="basis-a.html#def-sysfile-key" data-sym="SYSFILE-KEY">sysfile-key</a> x)
                    (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
                    nil)))
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Note that the keyword ~x0 is not currently bound in ~
                     the project-dir-alist.  Probably it was bound in the ~
                     project-dir-alist in a previous session, when this ~
                     defpkg form was written to a book&#39;s certificate.  See ~
                     :DOC project-dir-alist."</span>
                (<a class="sym-link system" href="basis-a.html#def-sysfile-key" data-sym="SYSFILE-KEY">sysfile-key</a> x))
              <span class="string">""</span>))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> package-entry
         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> hidden-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> package-entry)))
         (equal (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="axioms.html#def-package-entry-defpkg-event-form" data-sym="PACKAGE-ENTRY-DEFPKG-EVENT-FORM">package-entry-defpkg-event-form</a> package-entry))
           form)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'redundant))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> package-entry
               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (stringp name)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"Package names must be string constants and ~x0 is not.  See ~
              :DOC defpkg."</span>
                name))
            ((equal name <span class="string">""</span>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The empty string is not a legal package name for defpkg."</span>
                name))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="axioms.html#def-string-upcase" data-sym="STRING-UPCASE">string-upcase</a> name) name)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"~x0 is not a legal package name for defpkg, which disallows ~
              lower case characters in the name."</span>
                name))
            ((equal name <span class="string">"LISP"</span>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"~x0 is disallowed as a a package name for defpkg, because this ~
              package name is used under the hood in some Common Lisp ~
              implementations."</span>
                name))
            ((let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link local-def" href="#def-_2A1_2A-pkg-prefix_2A" data-sym="*1*-PKG-PREFIX*" title="(defconst *1*-pkg-prefix*
          (let ((result &quot;ACL2_*1*_&quot;))
            result))">*1*-pkg-prefix*</a>)))
               (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> name))
                 (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> name <span class="number">0</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>) <a class="sym-link local-def" href="#def-_2A1_2A-pkg-prefix_2A" data-sym="*1*-PKG-PREFIX*" title="(defconst *1*-pkg-prefix*
          (let ((result &quot;ACL2_*1*_&quot;))
            result))">*1*-pkg-prefix*</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"It is illegal for a package name to start (even ignoring case) ~
              with the string &quot;~@0&quot;.  ACL2 makes internal use of package ~
              names starting with that string."</span>
                <a class="sym-link local-def" href="#def-_2A1_2A-pkg-prefix_2A" data-sym="*1*-PKG-PREFIX*" title="(defconst *1*-pkg-prefix*
          (let ((result &quot;ACL2_*1*_&quot;))
            result))">*1*-pkg-prefix*</a>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
          (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((safe-mode (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state))))
            (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pair (simple-translate-and-eval form
                   nil
                   nil
                   <span class="string">"The second argument to defpkg"</span>
                   ctx
                   <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                   state
                   nil)))
              (let ((tform (car pair)) (imports (cdr pair)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> imports)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"The second argument of defpkg must eval to a list of ~
                  symbols.  See :DOC defpkg."</span>))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((imports (sort-symbol-listp imports)) (conflict (<a class="sym-link local-def" href="#def-conflicting-imports" data-sym="CONFLICTING-IMPORTS" title="(defun conflicting-imports (l) (same-name-twice l))">conflicting-imports</a> imports))
                        (base-symbol (<a class="sym-link system" href="basis-a.html#def-packn" data-sym="PACKN">packn</a> (cons name '(<span class="string">"-PACKAGE"</span>)))))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-symbol-name" data-sym="MEMBER-SYMBOL-NAME">member-symbol-name</a> <a class="sym-link system" href="axioms.html#def-_2Apkg-witness-name_2A" data-sym="*PKG-WITNESS-NAME*">*pkg-witness-name*</a> imports) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                            ctx
                            <span class="string">"It is illegal to import symbol ~x0 because its name ~
                        has been reserved for a symbol in the package being ~
                        defined."</span>
                            (car (<a class="sym-link system" href="axioms.html#def-member-symbol-name" data-sym="MEMBER-SYMBOL-NAME">member-symbol-name</a> <a class="sym-link system" href="axioms.html#def-_2Apkg-witness-name_2A" data-sym="*PKG-WITNESS-NAME*">*pkg-witness-name*</a> imports))))
                        (conflict (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                            ctx
                            <span class="string">"The value of the second (imports) argument of defpkg ~
                        may not contain two symbols with the same symbol ~
                        name, e.g. ~&amp;0.  See :DOC defpkg."</span>
                            conflict))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> package-entry
                               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal imports (<a class="sym-link system" href="axioms.html#def-package-entry-imports" data-sym="PACKAGE-ENTRY-IMPORTS">package-entry-imports</a> package-entry)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"~@0"</span>
                                (<a class="sym-link local-def" href="#def-tilde-_40-defpkg-error-phrase" data-sym="TILDE-@-DEFPKG-ERROR-PHRASE" title="(defun tilde-@-defpkg-error-phrase
       (name package-entry new-not-old old-not-new book-path defpkg-book-path
        w)
  (let* ((project-dir-alist (project-dir-alist w))
         (ctx &#39;tilde-@-defpkg-error-phrase)
...">tilde-@-defpkg-error-phrase</a> name
                                  package-entry
                                  (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> imports
                                    (<a class="sym-link system" href="axioms.html#def-package-entry-imports" data-sym="PACKAGE-ENTRY-IMPORTS">package-entry-imports</a> package-entry))
                                  (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="axioms.html#def-package-entry-imports" data-sym="PACKAGE-ENTRY-IMPORTS">package-entry-imports</a> package-entry)
                                    imports)
                                  (<a class="sym-link system" href="axioms.html#def-package-entry-book-path" data-sym="PACKAGE-ENTRY-BOOK-PATH">package-entry-book-path</a> package-entry)
                                  defpkg-book-path
                                  <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
                            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> package-entry
                               (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> hidden-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> package-entry)))) (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link local-def" href="#def-chk-package-reincarnation-import-restrictions" data-sym="CHK-PACKAGE-REINCARNATION-IMPORT-RESTRICTIONS" title="(defun chk-package-reincarnation-import-restrictions (name proposed-imports)
  (declare (ignore name proposed-imports))
  t)">chk-package-reincarnation-import-restrictions</a> name imports)
                                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'redundant)))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-new-stringp-name" data-sym="CHK-NEW-STRINGP-NAME" title="(defun chk-new-stringp-name (ev-type name ctx w state)
  (cond
   ((not
     (if (eq ev-type &#39;defpkg)
         (stringp name)
...">chk-new-stringp-name</a> '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> name ctx <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
                                (chk-all-but-new-name base-symbol ctx nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
                                (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> base-symbol nil 'theorem nil ctx <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
                                (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link local-def" href="#def-chk-package-reincarnation-import-restrictions" data-sym="CHK-PACKAGE-REINCARNATION-IMPORT-RESTRICTIONS" title="(defun chk-package-reincarnation-import-restrictions (name proposed-imports)
  (declare (ignore name proposed-imports))
  t)">chk-package-reincarnation-import-restrictions</a> name imports)
                                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> tform imports package-entry)))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-defpkg-fn" data-defines="DEFPKG-FN" data-references="INSTALL-EVENT,ENS,PACKN,ADD-RULES,PKG-IMPORTS,EQUAL,QUASIQUOTE,AX,W2,REMOVE-PACKAGE-ENTRY,CDDR,CAR,INCLUDE-BOOK-PATH,GLOBAL-VAL,APPEND,MAKE-PACKAGE-ENTRY,KNOWN-PACKAGE-ALIST,GLOBAL-SET,W1,CADR,IMPORTS,LET*,T,STOP-REDUNDANT-EVENT,REDUNDANT,EQ,COND,CTX,CHK-ACCEPTABLE-DEFPKG,TFORM-IMPORTS-ENTRY,ER-LET*,LIST,IF,LIST*,OR,W,LET,DEFPKG,QUOTE,CONS,WITH-CTX-SUMMARIZED,EVENT-FORM,HIDDEN-P,BOOK-PATH,DOC,STATE,FORM,NAME,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="DEFPKG-FN" data-part-args="EVENT-FORM,HIDDEN-P,BOOK-PATH,DOC,STATE,FORM,NAME" data-part-body="INSTALL-EVENT,ENS,PACKN,ADD-RULES,PKG-IMPORTS,EQUAL,QUASIQUOTE,AX,W2,REMOVE-PACKAGE-ENTRY,CDDR,CAR,INCLUDE-BOOK-PATH,GLOBAL-VAL,APPEND,MAKE-PACKAGE-ENTRY,KNOWN-PACKAGE-ALIST,GLOBAL-SET,W1,CADR,IMPORTS,LET*,T,STOP-REDUNDANT-EVENT,REDUNDANT,EQ,COND,CTX,HIDDEN-P,CHK-ACCEPTABLE-DEFPKG,TFORM-IMPORTS-ENTRY,ER-LET*,LIST,BOOK-PATH,DOC,IF,FORM,LIST*,OR,EVENT-FORM,STATE,W,LET,NAME,DEFPKG,QUOTE,CONS,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFPKG-FN">defpkg-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defpkg-fn" data-sym="DEFPKG-FN" title="(defun defpkg-fn (name form state doc book-path hidden-p event-form)
  (with-ctx-summarized (cons &#39;defpkg name)
                       (let ((w (w state))
                             (event-form
                              (or event-form
...">defpkg-fn</a>
  (name form state <a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> book-path hidden-p event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (cons '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> name)
    (let ((<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form
            (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>
              name
              form
              (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> book-path)
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a>)
                nil)
              (if book-path
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> book-path)
                nil)))))
      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tform-imports-entry (<a class="sym-link local-def" href="#def-chk-acceptable-defpkg" data-sym="CHK-ACCEPTABLE-DEFPKG" title="(defun chk-acceptable-defpkg (name form defpkg-book-path hidden-p ctx w state)
  (let ((package-entry
         (and (not (f-get-global &#39;boot-strap-flg state))
              (find-package-entry name (global-val &#39;known-package-alist w)))))
    (cond
...">chk-acceptable-defpkg</a> name
             form
             book-path
             hidden-p
             ctx
             <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
             state)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> tform-imports-entry 'redundant) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((imports (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tform-imports-entry)) (w1 (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a>
                    (cons (<a class="sym-link system" href="axioms.html#def-make-package-entry" data-sym="MAKE-PACKAGE-ENTRY">make-package-entry</a> <span class="keyword">:name</span> name
                        <span class="keyword">:imports</span> imports
                        <span class="keyword">:hidden-p</span> hidden-p
                        <span class="keyword">:book-path</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> book-path (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-path <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                        <span class="keyword">:defpkg-event-form</span> event-form
                        <span class="keyword">:tterm</span> (car tform-imports-entry))
                      (if (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> tform-imports-entry)
                        (<a class="sym-link system" href="axioms.html#def-remove-package-entry" data-sym="REMOVE-PACKAGE-ENTRY">remove-package-entry</a> name (<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> state))
                        (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
                    <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                (w2 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (hidden-p w1)
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((ax `(equal (pkg-imports ',NAME) ',IMPORTS)))
                        (<a class="sym-link system" href="defthm.html#def-add-rules" data-sym="ADD-RULES">add-rules</a> (<a class="sym-link system" href="basis-a.html#def-packn" data-sym="PACKN">packn</a> (cons name '(<span class="string">"-PACKAGE"</span>)))
                          `((<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> ,AX))
                          ax
                          ax
                          (ens state)
                          w1
                          state))))))
              (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> name
                event-form
                '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>
                name
                nil
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> name form)
                <span class="keyword">:protect</span> ctx
                w2
                state))))))))</pre>
  </div>

<div class="form-block function" id="def-theory-fn-callp" data-defines="THEORY-FN-CALLP" data-references="T,UNIVERSAL-THEORY,UNION-THEORIES,THEORY,SET-DIFFERENCE-THEORIES,INTERSECTION-THEORIES,FUNCTION-THEORY,EXECUTABLE-COUNTERPART-THEORY,ENABLE,E/D,DISABLE,CURRENT-THEORY,QUOTE,CAR,MEMBER-EQ,CONSP,AND,X,DEFUN" data-used-by="SET-DIFFERENCE-THEORIES,UNION-THEORIES,INTERSECTION-THEORIES" data-part-name="THEORY-FN-CALLP" data-part-args="X" data-part-body="T,UNIVERSAL-THEORY,UNION-THEORIES,THEORY,SET-DIFFERENCE-THEORIES,INTERSECTION-THEORIES,FUNCTION-THEORY,EXECUTABLE-COUNTERPART-THEORY,ENABLE,E/D,DISABLE,CURRENT-THEORY,QUOTE,CAR,MEMBER-EQ,X,CONSP,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="THEORY-FN-CALLP">theory-fn-callp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp x)
    (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x)
      '(<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> <a class="sym-link local-def" href="#def-disable" data-sym="DISABLE" title="(defmacro disable (&amp;rest rst)
  (list &#39;set-difference-theories &#39;(current-theory :here) (kwote rst)))">disable</a>
        <a class="sym-link system" href="axioms.html#def-e_2Fd" data-sym="E/D">e/d</a>
        <a class="sym-link local-def" href="#def-enable" data-sym="ENABLE" title="(defmacro enable (&amp;rest rst)
  (list &#39;union-theories &#39;(current-theory :here) (kwote rst)))">enable</a>
        <a class="sym-link local-def" href="#def-executable-counterpart-theory" data-sym="EXECUTABLE-COUNTERPART-THEORY" title="(defmacro executable-counterpart-theory (logical-name)
  (list &#39;executable-counterpart-theory-fn logical-name &#39;world))">executable-counterpart-theory</a>
        <a class="sym-link local-def" href="#def-function-theory" data-sym="FUNCTION-THEORY" title="(defmacro function-theory (logical-name)
  (list &#39;function-theory-fn logical-name &#39;world))">function-theory</a>
        <a class="sym-link local-def" href="#def-intersection-theories" data-sym="INTERSECTION-THEORIES" title="(defmacro intersection-theories (lst1 lst2)
  (list &#39;intersection-theories-fn lst1 lst2 (theory-fn-callp lst1)
        (theory-fn-callp lst2) &#39;world))">intersection-theories</a>
        <a class="sym-link local-def" href="#def-set-difference-theories" data-sym="SET-DIFFERENCE-THEORIES" title="(defmacro set-difference-theories (lst1 lst2)
  (cond
   ((equal lst1 &#39;(current-theory :here))
    (list &#39;set-difference-current-theory-fn lst2 (theory-fn-callp lst2)
          &#39;world))
...">set-difference-theories</a>
        <a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a>
        <a class="sym-link local-def" href="#def-union-theories" data-sym="UNION-THEORIES" title="(defmacro union-theories (lst1 lst2)
  (cond
   ((equal lst1 &#39;(current-theory :here))
    (list &#39;union-current-theory-fn lst2 (theory-fn-callp lst2) &#39;world))
   ((equal lst2 &#39;(current-theory :here))
...">union-theories</a>
        <a class="sym-link local-def" href="#def-universal-theory" data-sym="UNIVERSAL-THEORY" title="(defmacro universal-theory (logical-name)
  (list &#39;universal-theory-fn logical-name &#39;world))">universal-theory</a>))
    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block function" id="def-intersection-augmented-theories-fn1" data-defines="INTERSECTION-AUGMENTED-THEORIES-FN1" data-references="T,>,CONS,CDR,CAR,=,REVAPPEND,NULL,COND,ANS,LST2,LST1,DEFUN" data-used-by="INTERSECTION-THEORIES-FN" data-part-name="INTERSECTION-AUGMENTED-THEORIES-FN1" data-part-args="ANS,LST2,LST1" data-part-body="T,>,CONS,CDR,INTERSECTION-AUGMENTED-THEORIES-FN1,CAR,=,LST2,ANS,REVAPPEND,LST1,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTERSECTION-AUGMENTED-THEORIES-FN1">intersection-augmented-theories-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-intersection-augmented-theories-fn1" data-sym="INTERSECTION-AUGMENTED-THEORIES-FN1" title="(defun intersection-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans nil))
        ((= (car (car lst1)) (car (car lst2)))
         (intersection-augmented-theories-fn1 (cdr lst1) (cdr lst2)
                                              (cons (cdr (car lst1)) ans)))
...">intersection-augmented-theories-fn1</a>
  (lst1 lst2 ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst1) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans nil))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst2) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans nil))
    ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-intersection-augmented-theories-fn1" data-sym="INTERSECTION-AUGMENTED-THEORIES-FN1" title="(defun intersection-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans nil))
        ((= (car (car lst1)) (car (car lst2)))
         (intersection-augmented-theories-fn1 (cdr lst1) (cdr lst2)
                                              (cons (cdr (car lst1)) ans)))
...">intersection-augmented-theories-fn1</a> (cdr lst1)
        (cdr lst2)
        (cons (cdr (car lst1)) ans)))
    ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-intersection-augmented-theories-fn1" data-sym="INTERSECTION-AUGMENTED-THEORIES-FN1" title="(defun intersection-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans nil))
        ((= (car (car lst1)) (car (car lst2)))
         (intersection-augmented-theories-fn1 (cdr lst1) (cdr lst2)
                                              (cons (cdr (car lst1)) ans)))
...">intersection-augmented-theories-fn1</a> (cdr lst1) lst2 ans))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-intersection-augmented-theories-fn1" data-sym="INTERSECTION-AUGMENTED-THEORIES-FN1" title="(defun intersection-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans nil))
        ((= (car (car lst1)) (car (car lst2)))
         (intersection-augmented-theories-fn1 (cdr lst1) (cdr lst2)
                                              (cons (cdr (car lst1)) ans)))
...">intersection-augmented-theories-fn1</a> lst1 (cdr lst2) ans))))</pre>
  </div>

<div class="form-block function" id="def-check-theory-msg1" data-defines="CHECK-THEORY-MSG1" data-references="DEFCHOOSE-AXIOM,THEOREM,BODY,OR,DEREF-MACRO-NAME,MACRO-ARGS,QUOTE,GETPROPC,EQ,AND,MV-LET,NAME,CONS,SYMBOLP,NOT,CDR,CAR,RULE-NAME-DESIGNATORP,SYM,LET,T,REVERSE,MV,ENDP,COND,THEOREMS,MACROS,BAD,WRLD,MACRO-ALIASES,LST,DEFUN" data-used-by="CHECK-THEORY-MSG" data-part-name="CHECK-THEORY-MSG1" data-part-args="THEOREMS,MACROS,BAD,WRLD,MACRO-ALIASES,LST" data-part-body="DEFCHOOSE-AXIOM,THEOREM,BODY,OR,DEREF-MACRO-NAME,MACRO-ARGS,QUOTE,GETPROPC,EQ,AND,MV-LET,NAME,CONS,SYMBOLP,NOT,CDR,CHECK-THEORY-MSG1,WRLD,MACRO-ALIASES,CAR,RULE-NAME-DESIGNATORP,SYM,LET,T,THEOREMS,MACROS,BAD,REVERSE,MV,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-THEORY-MSG1">check-theory-msg1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-theory-msg1" data-sym="CHECK-THEORY-MSG1" title="(defun check-theory-msg1 (lst macro-aliases wrld bad macros theorems)
  (cond ((endp lst) (mv (reverse bad) (reverse macros) (reverse theorems)))
        (t
         (let ((sym (rule-name-designatorp (car lst) macro-aliases wrld)))
           (cond
...">check-theory-msg1</a>
  (lst <a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> wrld bad macros theorems)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> bad) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> macros) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> theorems)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((sym (rule-name-designatorp (car lst) <a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> wrld)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (sym (<a class="sym-link local-def" href="#def-check-theory-msg1" data-sym="CHECK-THEORY-MSG1" title="(defun check-theory-msg1 (lst macro-aliases wrld bad macros theorems)
  (cond ((endp lst) (mv (reverse bad) (reverse macros) (reverse theorems)))
        (t
         (let ((sym (rule-name-designatorp (car lst) macro-aliases wrld)))
           (cond
...">check-theory-msg1</a> (cdr lst)
              <a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a>
              wrld
              bad
              macros
              theorems))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp (car lst))) (<a class="sym-link local-def" href="#def-check-theory-msg1" data-sym="CHECK-THEORY-MSG1" title="(defun check-theory-msg1 (lst macro-aliases wrld bad macros theorems)
  (cond ((endp lst) (mv (reverse bad) (reverse macros) (reverse theorems)))
        (t
         (let ((sym (rule-name-designatorp (car lst) macro-aliases wrld)))
           (cond
...">check-theory-msg1</a> (cdr lst)
              <a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a>
              wrld
              (cons (car lst) bad)
              macros
              theorems))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((name (car lst)))
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (macros theorems)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'macro-args <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-deref-macro-name" data-sym="DEREF-MACRO-NAME">deref-macro-name</a> name <a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a>) name)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons name macros) theorems))
                  ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> name nil wrld)
                     (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'theorem nil wrld)
                     (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'defchoose-axiom nil wrld)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> macros (cons name theorems)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> macros theorems)))
                (<a class="sym-link local-def" href="#def-check-theory-msg1" data-sym="CHECK-THEORY-MSG1" title="(defun check-theory-msg1 (lst macro-aliases wrld bad macros theorems)
  (cond ((endp lst) (mv (reverse bad) (reverse macros) (reverse theorems)))
        (t
         (let ((sym (rule-name-designatorp (car lst) macro-aliases wrld)))
           (cond
...">check-theory-msg1</a> (cdr lst)
                  <a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a>
                  wrld
                  (cons name bad)
                  macros
                  theorems)))))))))</pre>
  </div>

<div class="form-block function" id="def-check-theory-msg" data-defines="CHECK-THEORY-MSG" data-references="EVISC-TUPLE,AND,T,OR,MSG,MACRO-ALIASES,CHECK-THEORY-MSG1,THEOREMS,MACROS,BAD,MV-LET,TRUE-LISTP,COND,WRLD,LST,DEFUN" data-used-by="CHECK-THEORY-ACTION" data-part-name="CHECK-THEORY-MSG" data-part-args="WRLD,LST" data-part-body="EVISC-TUPLE,AND,T,OR,MSG,WRLD,MACRO-ALIASES,CHECK-THEORY-MSG1,THEOREMS,MACROS,BAD,MV-LET,LST,TRUE-LISTP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-THEORY-MSG">check-theory-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-theory-msg" data-sym="CHECK-THEORY-MSG" title="(defun check-theory-msg (lst wrld)
  (cond
   ((true-listp lst)
    (mv-let (bad macros theorems)
            (check-theory-msg1 lst (macro-aliases wrld) wrld nil nil nil)
...">check-theory-msg</a>
  (lst wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lst) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (bad macros theorems)
        (<a class="sym-link local-def" href="#def-check-theory-msg1" data-sym="CHECK-THEORY-MSG1" title="(defun check-theory-msg1 (lst macro-aliases wrld bad macros theorems)
  (cond ((endp lst) (mv (reverse bad) (reverse macros) (reverse theorems)))
        (t
         (let ((sym (rule-name-designatorp (car lst) macro-aliases wrld)))
           (cond
...">check-theory-msg1</a> lst
          (<a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> wrld)
          wrld
          nil
          nil
          nil)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"A theory function has been called on a list that contains ~
                   ~&amp;0, which ~#0~[does~/do~] not designate a rule or a ~
                   non-empty list of rules.  ~@1See :DOC theories."</span>
              bad
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> macros theorems) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Note that ~@0~@1~@2.  "</span>
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (macros (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~&amp;0 ~#0~[is a macro~/are macros~]; see ~
                                      :DOC add-macro-alias to associate a ~
                                      macro with a function"</span>
                          macros))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> macros theorems) <span class="string">".  Also note that "</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (theorems (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~&amp;0 ~#0~[names a theorem~/name ~
                                           theorems~] but not any rules"</span>
                          theorems))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"A theory function has been called on the following argument that does ~
        not represent a theory because it is not a true-list:~|~Y01.~|"</span>
        lst
        (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="number">5</span> <span class="number">7</span> nil nil)))))</pre>
  </div>

<div class="form-block function" id="def-check-theory-action" data-defines="CHECK-THEORY-ACTION" data-references="T,HARD,ER,PROG2$,COND,CHECK-THEORY-MSG,MSG,LET,CTX,WRLD,LST,DEFUN" data-used-by="CHECK-THEORY" data-part-name="CHECK-THEORY-ACTION" data-part-args="CTX,WRLD,LST" data-part-body="T,CTX,HARD,ER,PROG2$,COND,WRLD,LST,CHECK-THEORY-MSG,MSG,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-THEORY-ACTION">check-theory-action</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-theory-action" data-sym="CHECK-THEORY-ACTION" title="(defun check-theory-action (lst wrld ctx)
  (let ((msg (check-theory-msg lst wrld)))
    (cond (msg (prog2$ (er hard ctx &quot;~@0&quot; msg) t)) (t nil))))">check-theory-action</a>
  (lst wrld ctx)
  (let ((<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link local-def" href="#def-check-theory-msg" data-sym="CHECK-THEORY-MSG" title="(defun check-theory-msg (lst wrld)
  (cond
   ((true-listp lst)
    (mv-let (bad macros theorems)
            (check-theory-msg1 lst (macro-aliases wrld) wrld nil nil nil)
...">check-theory-msg</a> lst wrld)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard ctx <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))</pre>
  </div>

<div class="form-block macro" id="def-check-theory" data-defines="CHECK-THEORY" data-references="CHECK-THEORY-ACTION,IF,QUASIQUOTE,FORM,CTX,WRLD,LST,DEFMACRO" data-used-by="SET-DIFFERENCE-THEORIES-FN,UNION-THEORIES-FN,MAYBE-CHECK-THEORY" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-THEORY">check-theory</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-check-theory" data-sym="CHECK-THEORY" title="(defmacro check-theory (lst wrld ctx form)
  `(if (check-theory-action ,lst ,wrld ,ctx)
       nil
       ,form))">check-theory</a>
  (lst wrld ctx form)
  `(if (<a class="sym-link local-def" href="#def-check-theory-action" data-sym="CHECK-THEORY-ACTION" title="(defun check-theory-action (lst wrld ctx)
  (let ((msg (check-theory-msg lst wrld)))
    (cond (msg (prog2$ (er hard ctx &quot;~@0&quot; msg) t)) (t nil))))">check-theory-action</a> ,LST ,WRLD ,CTX)
    nil
    ,FORM))</pre>
  </div>

<div class="form-block macro" id="def-maybe-check-theory" data-defines="MAYBE-CHECK-THEORY" data-references="CHECK-THEORY,IF,QUASIQUOTE,FORM,CTX,WRLD,LST,SKIP-CHECK,DEFMACRO" data-used-by="SET-DIFFERENCE-CURRENT-THEORY-FN,UNION-CURRENT-THEORY-FN,SET-DIFFERENCE-THEORIES-FN,UNION-THEORIES-FN,INTERSECTION-THEORIES-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-CHECK-THEORY">maybe-check-theory</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-maybe-check-theory" data-sym="MAYBE-CHECK-THEORY" title="(defmacro maybe-check-theory (skip-check lst wrld ctx form)
  `(if ,skip-check
       ,form
       (check-theory ,lst ,wrld ,ctx ,form)))">maybe-check-theory</a>
  (skip-check lst wrld ctx form)
  `(if ,SKIP-CHECK
    ,FORM
    (<a class="sym-link local-def" href="#def-check-theory" data-sym="CHECK-THEORY" title="(defmacro check-theory (lst wrld ctx form)
  `(if (check-theory-action ,lst ,wrld ,ctx)
       nil
       ,form))">check-theory</a> ,LST ,WRLD ,CTX ,FORM)))</pre>
  </div>

<div class="form-block function" id="def-intersection-theories-fn" data-defines="INTERSECTION-THEORIES-FN" data-references="AUGMENT-THEORY,INTERSECTION-AUGMENTED-THEORIES-FN1,QUOTE,MAYBE-CHECK-THEORY,WRLD,LST2-KNOWN-TO-BE-RUNIC,LST1-KNOWN-TO-BE-RUNIC,LST2,LST1,DEFUN" data-used-by="INTERSECTION-THEORIES" data-part-name="INTERSECTION-THEORIES-FN" data-part-args="WRLD,LST2-KNOWN-TO-BE-RUNIC,LST1-KNOWN-TO-BE-RUNIC,LST2,LST1" data-part-body="AUGMENT-THEORY,INTERSECTION-AUGMENTED-THEORIES-FN1,LST2,LST2-KNOWN-TO-BE-RUNIC,INTERSECTION-THEORIES-FN,QUOTE,WRLD,LST1,LST1-KNOWN-TO-BE-RUNIC,MAYBE-CHECK-THEORY" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTERSECTION-THEORIES-FN">intersection-theories-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-intersection-theories-fn" data-sym="INTERSECTION-THEORIES-FN" title="(defun intersection-theories-fn
       (lst1 lst2 lst1-known-to-be-runic lst2-known-to-be-runic wrld)
  (maybe-check-theory lst1-known-to-be-runic lst1 wrld
                      &#39;intersection-theories-fn
                      (maybe-check-theory lst2-known-to-be-runic lst2 wrld
...">intersection-theories-fn</a>
  (lst1 lst2
    lst1-known-to-be-runic
    lst2-known-to-be-runic
    wrld)
  (<a class="sym-link local-def" href="#def-maybe-check-theory" data-sym="MAYBE-CHECK-THEORY" title="(defmacro maybe-check-theory (skip-check lst wrld ctx form)
  `(if ,skip-check
       ,form
       (check-theory ,lst ,wrld ,ctx ,form)))">maybe-check-theory</a> lst1-known-to-be-runic
    lst1
    wrld
    '<a class="sym-link local-def" href="#def-intersection-theories-fn" data-sym="INTERSECTION-THEORIES-FN" title="(defun intersection-theories-fn
       (lst1 lst2 lst1-known-to-be-runic lst2-known-to-be-runic wrld)
  (maybe-check-theory lst1-known-to-be-runic lst1 wrld
                      &#39;intersection-theories-fn
                      (maybe-check-theory lst2-known-to-be-runic lst2 wrld
...">intersection-theories-fn</a>
    (<a class="sym-link local-def" href="#def-maybe-check-theory" data-sym="MAYBE-CHECK-THEORY" title="(defmacro maybe-check-theory (skip-check lst wrld ctx form)
  `(if ,skip-check
       ,form
       (check-theory ,lst ,wrld ,ctx ,form)))">maybe-check-theory</a> lst2-known-to-be-runic
      lst2
      wrld
      '<a class="sym-link local-def" href="#def-intersection-theories-fn" data-sym="INTERSECTION-THEORIES-FN" title="(defun intersection-theories-fn
       (lst1 lst2 lst1-known-to-be-runic lst2-known-to-be-runic wrld)
  (maybe-check-theory lst1-known-to-be-runic lst1 wrld
                      &#39;intersection-theories-fn
                      (maybe-check-theory lst2-known-to-be-runic lst2 wrld
...">intersection-theories-fn</a>
      (<a class="sym-link local-def" href="#def-intersection-augmented-theories-fn1" data-sym="INTERSECTION-AUGMENTED-THEORIES-FN1" title="(defun intersection-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans nil))
        ((= (car (car lst1)) (car (car lst2)))
         (intersection-augmented-theories-fn1 (cdr lst1) (cdr lst2)
                                              (cons (cdr (car lst1)) ans)))
...">intersection-augmented-theories-fn1</a> (augment-theory lst1 wrld)
        (augment-theory lst2 wrld)
        nil))))</pre>
  </div>

<div class="form-block macro" id="def-intersection-theories" data-defines="INTERSECTION-THEORIES" data-references="WORLD,THEORY-FN-CALLP,INTERSECTION-THEORIES-FN,QUOTE,LIST,LST2,LST1,DEFMACRO" data-used-by="THEORY-FN-CALLP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTERSECTION-THEORIES">intersection-theories</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-intersection-theories" data-sym="INTERSECTION-THEORIES" title="(defmacro intersection-theories (lst1 lst2)
  (list &#39;intersection-theories-fn lst1 lst2 (theory-fn-callp lst1)
        (theory-fn-callp lst2) &#39;world))">intersection-theories</a>
  (lst1 lst2)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-intersection-theories-fn" data-sym="INTERSECTION-THEORIES-FN" title="(defun intersection-theories-fn
       (lst1 lst2 lst1-known-to-be-runic lst2-known-to-be-runic wrld)
  (maybe-check-theory lst1-known-to-be-runic lst1 wrld
                      &#39;intersection-theories-fn
                      (maybe-check-theory lst2-known-to-be-runic lst2 wrld
...">intersection-theories-fn</a>
    lst1
    lst2
    (<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst1)
    (<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst2)
    'world))</pre>
  </div>

<div class="form-block function" id="def-union-augmented-theories-fn1" data-defines="UNION-AUGMENTED-THEORIES-FN1" data-references="T,>,CONS,CDR,CAR,INT=,STRIP-CDRS,REVAPPEND,NULL,COND,ANS,LST2,LST1,DEFUN" data-used-by="UNION-THEORIES-FN" data-part-name="UNION-AUGMENTED-THEORIES-FN1" data-part-args="ANS,LST2,LST1" data-part-body="T,>,CONS,CDR,UNION-AUGMENTED-THEORIES-FN1,CAR,INT=,LST2,STRIP-CDRS,ANS,REVAPPEND,LST1,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNION-AUGMENTED-THEORIES-FN1">union-augmented-theories-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-union-augmented-theories-fn1" data-sym="UNION-AUGMENTED-THEORIES-FN1" title="(defun union-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1 (cdr lst1) (cdr lst2)
...">union-augmented-theories-fn1</a>
  (lst1 lst2 ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst1) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> lst2)))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst2) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> lst1)))
    ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-union-augmented-theories-fn1" data-sym="UNION-AUGMENTED-THEORIES-FN1" title="(defun union-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1 (cdr lst1) (cdr lst2)
...">union-augmented-theories-fn1</a> (cdr lst1)
        (cdr lst2)
        (cons (cdr (car lst1)) ans)))
    ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-union-augmented-theories-fn1" data-sym="UNION-AUGMENTED-THEORIES-FN1" title="(defun union-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1 (cdr lst1) (cdr lst2)
...">union-augmented-theories-fn1</a> (cdr lst1)
        lst2
        (cons (cdr (car lst1)) ans)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-union-augmented-theories-fn1" data-sym="UNION-AUGMENTED-THEORIES-FN1" title="(defun union-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1 (cdr lst1) (cdr lst2)
...">union-augmented-theories-fn1</a> lst1
        (cdr lst2)
        (cons (cdr (car lst2)) ans)))))</pre>
  </div>

<div class="form-block function" id="def-union-theories-fn1" data-defines="UNION-THEORIES-FN1" data-references="CDAR,>,CONS,CDR,INT=,ASSERT$,CAR,RUNEP,OR,LET,T,STRIP-CDRS,REVAPPEND,NULL,COND,ANS,WRLD,NUME,LST2,LST1,DEFUN" data-used-by="UNION-THEORIES-FN" data-part-name="UNION-THEORIES-FN1" data-part-args="ANS,WRLD,NUME,LST2,LST1" data-part-body="CDAR,>,CONS,CDR,UNION-THEORIES-FN1,INT=,ASSERT$,WRLD,CAR,RUNEP,OR,NUME,LET,T,LST2,STRIP-CDRS,ANS,REVAPPEND,LST1,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNION-THEORIES-FN1">union-theories-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-union-theories-fn1" data-sym="UNION-THEORIES-FN1" title="(defun union-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
...">union-theories-fn1</a>
  (lst1 lst2 nume wrld ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst1) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> lst2)))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst2) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans lst1))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((nume (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> nume (runep (car lst1) wrld))))
        (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> nume
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> nume (car (car lst2))) (<a class="sym-link local-def" href="#def-union-theories-fn1" data-sym="UNION-THEORIES-FN1" title="(defun union-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
...">union-theories-fn1</a> (cdr lst1)
                (cdr lst2)
                nil
                wrld
                (cons (car lst1) ans)))
            ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> nume (car (car lst2))) (<a class="sym-link local-def" href="#def-union-theories-fn1" data-sym="UNION-THEORIES-FN1" title="(defun union-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
...">union-theories-fn1</a> (cdr lst1)
                lst2
                nil
                wrld
                (cons (car lst1) ans)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-union-theories-fn1" data-sym="UNION-THEORIES-FN1" title="(defun union-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
...">union-theories-fn1</a> lst1
                (cdr lst2)
                nume
                wrld
                (cons (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> lst2) ans)))))))))</pre>
  </div>

<div class="form-block function" id="def-union-theories-fn" data-defines="UNION-THEORIES-FN" data-references="CONVERT-THEORY-TO-UNORDERED-MAPPING-PAIRS,DUPLICITOUS-SORT-CAR,UNION-AUGMENTED-THEORIES-FN1,T,CHECK-THEORY,AUGMENT-THEORY,UNION-THEORIES-FN1,BOTH,QUOTE,EQ,MAYBE-CHECK-THEORY,RUNIC-THEORYP,OR,COND,WRLD,LST1-KNOWN-TO-BE-RUNIC,LST2,LST1,DEFUN" data-used-by="UNION-THEORIES" data-part-name="UNION-THEORIES-FN" data-part-args="WRLD,LST1-KNOWN-TO-BE-RUNIC,LST2,LST1" data-part-body="CONVERT-THEORY-TO-UNORDERED-MAPPING-PAIRS,DUPLICITOUS-SORT-CAR,UNION-AUGMENTED-THEORIES-FN1,T,CHECK-THEORY,AUGMENT-THEORY,UNION-THEORIES-FN1,UNION-THEORIES-FN,LST2,BOTH,QUOTE,EQ,MAYBE-CHECK-THEORY,WRLD,LST1,RUNIC-THEORYP,LST1-KNOWN-TO-BE-RUNIC,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNION-THEORIES-FN">union-theories-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-union-theories-fn" data-sym="UNION-THEORIES-FN" title="(defun union-theories-fn (lst1 lst2 lst1-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory (eq lst1-known-to-be-runic &#39;both) lst2 wrld
                        &#39;union-theories-fn
...">union-theories-fn</a>
  (lst1 lst2 lst1-known-to-be-runic wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> lst1-known-to-be-runic (runic-theoryp lst1 wrld)) (<a class="sym-link local-def" href="#def-maybe-check-theory" data-sym="MAYBE-CHECK-THEORY" title="(defmacro maybe-check-theory (skip-check lst wrld ctx form)
  `(if ,skip-check
       ,form
       (check-theory ,lst ,wrld ,ctx ,form)))">maybe-check-theory</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> lst1-known-to-be-runic 'both)
        lst2
        wrld
        '<a class="sym-link local-def" href="#def-union-theories-fn" data-sym="UNION-THEORIES-FN" title="(defun union-theories-fn (lst1 lst2 lst1-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory (eq lst1-known-to-be-runic &#39;both) lst2 wrld
                        &#39;union-theories-fn
...">union-theories-fn</a>
        (<a class="sym-link local-def" href="#def-union-theories-fn1" data-sym="UNION-THEORIES-FN1" title="(defun union-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
...">union-theories-fn1</a> lst1
          (augment-theory lst2 wrld)
          nil
          wrld
          nil)))
    ((runic-theoryp lst2 wrld) (<a class="sym-link local-def" href="#def-check-theory" data-sym="CHECK-THEORY" title="(defmacro check-theory (lst wrld ctx form)
  `(if (check-theory-action ,lst ,wrld ,ctx)
       nil
       ,form))">check-theory</a> lst1
        wrld
        '<a class="sym-link local-def" href="#def-union-theories-fn" data-sym="UNION-THEORIES-FN" title="(defun union-theories-fn (lst1 lst2 lst1-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory (eq lst1-known-to-be-runic &#39;both) lst2 wrld
                        &#39;union-theories-fn
...">union-theories-fn</a>
        (<a class="sym-link local-def" href="#def-union-theories-fn1" data-sym="UNION-THEORIES-FN1" title="(defun union-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
...">union-theories-fn1</a> lst2
          (augment-theory lst1 wrld)
          nil
          wrld
          nil)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-check-theory" data-sym="CHECK-THEORY" title="(defmacro check-theory (lst wrld ctx form)
  `(if (check-theory-action ,lst ,wrld ,ctx)
       nil
       ,form))">check-theory</a> lst1
        wrld
        '<a class="sym-link local-def" href="#def-union-theories-fn" data-sym="UNION-THEORIES-FN" title="(defun union-theories-fn (lst1 lst2 lst1-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory (eq lst1-known-to-be-runic &#39;both) lst2 wrld
                        &#39;union-theories-fn
...">union-theories-fn</a>
        (<a class="sym-link local-def" href="#def-check-theory" data-sym="CHECK-THEORY" title="(defmacro check-theory (lst wrld ctx form)
  `(if (check-theory-action ,lst ,wrld ,ctx)
       nil
       ,form))">check-theory</a> lst2
          wrld
          '<a class="sym-link local-def" href="#def-union-theories-fn" data-sym="UNION-THEORIES-FN" title="(defun union-theories-fn (lst1 lst2 lst1-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory (eq lst1-known-to-be-runic &#39;both) lst2 wrld
                        &#39;union-theories-fn
...">union-theories-fn</a>
          (<a class="sym-link local-def" href="#def-union-augmented-theories-fn1" data-sym="UNION-AUGMENTED-THEORIES-FN1" title="(defun union-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1 (cdr lst1) (cdr lst2)
...">union-augmented-theories-fn1</a> (duplicitous-sort-car nil
              (convert-theory-to-unordered-mapping-pairs lst1 wrld))
            (augment-theory lst2 wrld)
            nil))))))</pre>
  </div>

<div class="form-block function" id="def-union-augmented-theories-fn1_2B" data-defines="UNION-AUGMENTED-THEORIES-FN1+" data-references="T,>,CONS,CDR,CAR,INT=,STRIP-CDRS,REVAPPEND,NULL,COND,ANS,LST2,C1,LST1,DEFUN" data-used-by="UNION-CURRENT-THEORY-FN" data-part-name="UNION-AUGMENTED-THEORIES-FN1+" data-part-args="ANS,LST2,C1,LST1" data-part-body="T,>,CONS,CDR,UNION-AUGMENTED-THEORIES-FN1+,CAR,INT=,C1,LST2,STRIP-CDRS,ANS,REVAPPEND,LST1,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNION-AUGMENTED-THEORIES-FN1+">union-augmented-theories-fn1+</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-union-augmented-theories-fn1_2B" data-sym="UNION-AUGMENTED-THEORIES-FN1+" title="(defun union-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans c1))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
...">union-augmented-theories-fn1+</a>
  (lst1 c1 lst2 ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst1) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> lst2)))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst2) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans c1))
    ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-union-augmented-theories-fn1_2B" data-sym="UNION-AUGMENTED-THEORIES-FN1+" title="(defun union-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans c1))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
...">union-augmented-theories-fn1+</a> (cdr lst1)
        (cdr c1)
        (cdr lst2)
        (cons (car c1) ans)))
    ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-union-augmented-theories-fn1_2B" data-sym="UNION-AUGMENTED-THEORIES-FN1+" title="(defun union-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans c1))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
...">union-augmented-theories-fn1+</a> (cdr lst1)
        (cdr c1)
        lst2
        (cons (car c1) ans)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-union-augmented-theories-fn1_2B" data-sym="UNION-AUGMENTED-THEORIES-FN1+" title="(defun union-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans c1))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
...">union-augmented-theories-fn1+</a> lst1
        c1
        (cdr lst2)
        (cons (cdr (car lst2)) ans)))))</pre>
  </div>

<div class="form-block function" id="def-set-difference-augmented-theories-fn1" data-defines="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1" data-references="T,CONS,>,CDR,CAR,=,STRIP-CDRS,REVAPPEND,NULL,COND,ANS,LST2,LST1,DEFUN" data-used-by="SET-DIFFERENCE-THEORIES-FN" data-part-name="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1" data-part-args="ANS,LST2,LST1" data-part-body="T,CONS,>,CDR,SET-DIFFERENCE-AUGMENTED-THEORIES-FN1,CAR,=,STRIP-CDRS,LST2,ANS,REVAPPEND,LST1,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1">set-difference-augmented-theories-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1" title="(defun set-difference-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1 (cdr lst1) (cdr lst2) ans))
...">set-difference-augmented-theories-fn1</a>
  (lst1 lst2 ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst1) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans nil))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst2) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> lst1)))
    ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1" title="(defun set-difference-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1 (cdr lst1) (cdr lst2) ans))
...">set-difference-augmented-theories-fn1</a> (cdr lst1)
        (cdr lst2)
        ans))
    ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1" title="(defun set-difference-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1 (cdr lst1) (cdr lst2) ans))
...">set-difference-augmented-theories-fn1</a> (cdr lst1)
        lst2
        (cons (cdr (car lst1)) ans)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1" title="(defun set-difference-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1 (cdr lst1) (cdr lst2) ans))
...">set-difference-augmented-theories-fn1</a> lst1 (cdr lst2) ans))))</pre>
  </div>

<div class="form-block function" id="def-set-difference-augmented-theories-fn1_2B" data-defines="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+" data-references="T,CONS,>,CDR,CAR,=,REVAPPEND,NULL,COND,ANS,LST2,C1,LST1,DEFUN" data-used-by="SET-DIFFERENCE-CURRENT-THEORY-FN" data-part-name="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+" data-part-args="ANS,LST2,C1,LST1" data-part-body="T,CONS,>,CDR,SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+,CAR,=,C1,LST2,ANS,REVAPPEND,LST1,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+">set-difference-augmented-theories-fn1+</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1_2B" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+" title="(defun set-difference-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans c1))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
                                                 ans))
...">set-difference-augmented-theories-fn1+</a>
  (lst1 c1 lst2 ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst1) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans nil))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst2) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans c1))
    ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1_2B" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+" title="(defun set-difference-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans c1))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
                                                 ans))
...">set-difference-augmented-theories-fn1+</a> (cdr lst1)
        (cdr c1)
        (cdr lst2)
        ans))
    ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (car (car lst1)) (car (car lst2))) (<a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1_2B" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+" title="(defun set-difference-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans c1))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
                                                 ans))
...">set-difference-augmented-theories-fn1+</a> (cdr lst1)
        (cdr c1)
        lst2
        (cons (car c1) ans)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1_2B" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+" title="(defun set-difference-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans c1))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
                                                 ans))
...">set-difference-augmented-theories-fn1+</a> lst1
        c1
        (cdr lst2)
        ans))))</pre>
  </div>

<div class="form-block function" id="def-set-difference-theories-fn1" data-defines="SET-DIFFERENCE-THEORIES-FN1" data-references="CONS,>,CDR,INT=,ASSERT$,CAR,RUNEP,OR,LET,T,REVAPPEND,REVERSE,NULL,COND,ANS,WRLD,NUME,LST2,LST1,DEFUN" data-used-by="SET-DIFFERENCE-THEORIES-FN" data-part-name="SET-DIFFERENCE-THEORIES-FN1" data-part-args="ANS,WRLD,NUME,LST2,LST1" data-part-body="CONS,>,CDR,SET-DIFFERENCE-THEORIES-FN1,INT=,ASSERT$,WRLD,CAR,RUNEP,OR,NUME,LET,T,REVAPPEND,LST2,ANS,REVERSE,LST1,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-DIFFERENCE-THEORIES-FN1">set-difference-theories-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-difference-theories-fn1" data-sym="SET-DIFFERENCE-THEORIES-FN1" title="(defun set-difference-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
           (assert$ nume
...">set-difference-theories-fn1</a>
  (lst1 lst2 nume wrld ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst1) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> ans))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst2) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans lst1))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((nume (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> nume (runep (car lst1) wrld))))
        (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> nume
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> nume (car (car lst2))) (<a class="sym-link local-def" href="#def-set-difference-theories-fn1" data-sym="SET-DIFFERENCE-THEORIES-FN1" title="(defun set-difference-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
           (assert$ nume
...">set-difference-theories-fn1</a> (cdr lst1)
                (cdr lst2)
                nil
                wrld
                ans))
            ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> nume (car (car lst2))) (<a class="sym-link local-def" href="#def-set-difference-theories-fn1" data-sym="SET-DIFFERENCE-THEORIES-FN1" title="(defun set-difference-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
           (assert$ nume
...">set-difference-theories-fn1</a> (cdr lst1)
                lst2
                nil
                wrld
                (cons (car lst1) ans)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-set-difference-theories-fn1" data-sym="SET-DIFFERENCE-THEORIES-FN1" title="(defun set-difference-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
           (assert$ nume
...">set-difference-theories-fn1</a> lst1 (cdr lst2) nume wrld ans))))))))</pre>
  </div>

<div class="form-block function" id="def-set-difference-theories-fn" data-defines="SET-DIFFERENCE-THEORIES-FN" data-references="CONVERT-THEORY-TO-UNORDERED-MAPPING-PAIRS,DUPLICITOUS-SORT-CAR,SET-DIFFERENCE-AUGMENTED-THEORIES-FN1,CHECK-THEORY,T,AUGMENT-THEORY,SET-DIFFERENCE-THEORIES-FN1,QUOTE,MAYBE-CHECK-THEORY,RUNIC-THEORYP,OR,COND,WRLD,LST2-KNOWN-TO-BE-RUNIC,LST1-KNOWN-TO-BE-RUNIC,LST2,LST1,DEFUN" data-used-by="SET-DIFFERENCE-THEORIES" data-part-name="SET-DIFFERENCE-THEORIES-FN" data-part-args="WRLD,LST2-KNOWN-TO-BE-RUNIC,LST1-KNOWN-TO-BE-RUNIC,LST2,LST1" data-part-body="CONVERT-THEORY-TO-UNORDERED-MAPPING-PAIRS,DUPLICITOUS-SORT-CAR,SET-DIFFERENCE-AUGMENTED-THEORIES-FN1,CHECK-THEORY,T,AUGMENT-THEORY,SET-DIFFERENCE-THEORIES-FN1,SET-DIFFERENCE-THEORIES-FN,QUOTE,LST2,LST2-KNOWN-TO-BE-RUNIC,MAYBE-CHECK-THEORY,WRLD,LST1,RUNIC-THEORYP,LST1-KNOWN-TO-BE-RUNIC,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-DIFFERENCE-THEORIES-FN">set-difference-theories-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-difference-theories-fn" data-sym="SET-DIFFERENCE-THEORIES-FN" title="(defun set-difference-theories-fn
       (lst1 lst2 lst1-known-to-be-runic lst2-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory lst2-known-to-be-runic lst2 wrld
...">set-difference-theories-fn</a>
  (lst1 lst2
    lst1-known-to-be-runic
    lst2-known-to-be-runic
    wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> lst1-known-to-be-runic (runic-theoryp lst1 wrld)) (<a class="sym-link local-def" href="#def-maybe-check-theory" data-sym="MAYBE-CHECK-THEORY" title="(defmacro maybe-check-theory (skip-check lst wrld ctx form)
  `(if ,skip-check
       ,form
       (check-theory ,lst ,wrld ,ctx ,form)))">maybe-check-theory</a> lst2-known-to-be-runic
        lst2
        wrld
        '<a class="sym-link local-def" href="#def-set-difference-theories-fn" data-sym="SET-DIFFERENCE-THEORIES-FN" title="(defun set-difference-theories-fn
       (lst1 lst2 lst1-known-to-be-runic lst2-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory lst2-known-to-be-runic lst2 wrld
...">set-difference-theories-fn</a>
        (<a class="sym-link local-def" href="#def-set-difference-theories-fn1" data-sym="SET-DIFFERENCE-THEORIES-FN1" title="(defun set-difference-theories-fn1 (lst1 lst2 nume wrld ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        (t
         (let ((nume (or nume (runep (car lst1) wrld))))
           (assert$ nume
...">set-difference-theories-fn1</a> lst1
          (augment-theory lst2 wrld)
          nil
          wrld
          nil)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-check-theory" data-sym="CHECK-THEORY" title="(defmacro check-theory (lst wrld ctx form)
  `(if (check-theory-action ,lst ,wrld ,ctx)
       nil
       ,form))">check-theory</a> lst1
        wrld
        '<a class="sym-link local-def" href="#def-set-difference-theories-fn" data-sym="SET-DIFFERENCE-THEORIES-FN" title="(defun set-difference-theories-fn
       (lst1 lst2 lst1-known-to-be-runic lst2-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory lst2-known-to-be-runic lst2 wrld
...">set-difference-theories-fn</a>
        (<a class="sym-link local-def" href="#def-maybe-check-theory" data-sym="MAYBE-CHECK-THEORY" title="(defmacro maybe-check-theory (skip-check lst wrld ctx form)
  `(if ,skip-check
       ,form
       (check-theory ,lst ,wrld ,ctx ,form)))">maybe-check-theory</a> lst2-known-to-be-runic
          lst2
          wrld
          '<a class="sym-link local-def" href="#def-set-difference-theories-fn" data-sym="SET-DIFFERENCE-THEORIES-FN" title="(defun set-difference-theories-fn
       (lst1 lst2 lst1-known-to-be-runic lst2-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory lst2-known-to-be-runic lst2 wrld
...">set-difference-theories-fn</a>
          (<a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1" title="(defun set-difference-augmented-theories-fn1 (lst1 lst2 ans)
  (cond ((null lst1) (revappend ans nil))
        ((null lst2) (revappend ans (strip-cdrs lst1)))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1 (cdr lst1) (cdr lst2) ans))
...">set-difference-augmented-theories-fn1</a> (duplicitous-sort-car nil
              (convert-theory-to-unordered-mapping-pairs lst1 wrld))
            (augment-theory lst2 wrld)
            nil))))))</pre>
  </div>

<div class="form-block function" id="def-no-augmented-rune-based-on" data-defines="NO-AUGMENTED-RUNE-BASED-ON" data-references="CDR,CDAR,BASE-SYMBOL,MEMBER-EQ,T,NULL,COND,SYMBOLS,PAIRS,DEFUN" data-used-by="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS" data-part-name="NO-AUGMENTED-RUNE-BASED-ON" data-part-args="SYMBOLS,PAIRS" data-part-body="CDR,NO-AUGMENTED-RUNE-BASED-ON,SYMBOLS,CDAR,BASE-SYMBOL,MEMBER-EQ,T,PAIRS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NO-AUGMENTED-RUNE-BASED-ON">no-augmented-rune-based-on</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-no-augmented-rune-based-on" data-sym="NO-AUGMENTED-RUNE-BASED-ON" title="(defun no-augmented-rune-based-on (pairs symbols)
  (cond ((null pairs) t) ((member-eq (base-symbol (cdar pairs)) symbols) nil)
        (t (no-augmented-rune-based-on (cdr pairs) symbols))))">no-augmented-rune-based-on</a>
  (pairs symbols)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pairs) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (base-symbol (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> pairs)) symbols) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-no-augmented-rune-based-on" data-sym="NO-AUGMENTED-RUNE-BASED-ON" title="(defun no-augmented-rune-based-on (pairs symbols)
  (cond ((null pairs) t) ((member-eq (base-symbol (cdar pairs)) symbols) nil)
        (t (no-augmented-rune-based-on (cdr pairs) symbols))))">no-augmented-rune-based-on</a> (cdr pairs) symbols))))</pre>
  </div>

<div class="form-block function" id="def-revappend-delete-augmented-runes-based-on-symbols1" data-defines="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1" data-references="CONS,T,CAR,CDR,BASE-SYMBOL,MEMBER-EQ,NULL,COND,ANS,SYMBOLS,PAIRS,DEFUN" data-used-by="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS" data-part-name="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1" data-part-args="ANS,SYMBOLS,PAIRS" data-part-body="CONS,T,REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1,SYMBOLS,CAR,CDR,BASE-SYMBOL,MEMBER-EQ,ANS,PAIRS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1">revappend-delete-augmented-runes-based-on-symbols1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-revappend-delete-augmented-runes-based-on-symbols1" data-sym="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1" title="(defun revappend-delete-augmented-runes-based-on-symbols1 (pairs symbols ans)
  (cond ((null pairs) ans)
        ((member-eq (base-symbol (cdr (car pairs))) symbols)
         (revappend-delete-augmented-runes-based-on-symbols1 (cdr pairs)
                                                             symbols ans))
...">revappend-delete-augmented-runes-based-on-symbols1</a>
  (pairs symbols ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pairs) ans)
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (base-symbol (cdr (car pairs))) symbols) (<a class="sym-link local-def" href="#def-revappend-delete-augmented-runes-based-on-symbols1" data-sym="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1" title="(defun revappend-delete-augmented-runes-based-on-symbols1 (pairs symbols ans)
  (cond ((null pairs) ans)
        ((member-eq (base-symbol (cdr (car pairs))) symbols)
         (revappend-delete-augmented-runes-based-on-symbols1 (cdr pairs)
                                                             symbols ans))
...">revappend-delete-augmented-runes-based-on-symbols1</a> (cdr pairs)
        symbols
        ans))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-revappend-delete-augmented-runes-based-on-symbols1" data-sym="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1" title="(defun revappend-delete-augmented-runes-based-on-symbols1 (pairs symbols ans)
  (cond ((null pairs) ans)
        ((member-eq (base-symbol (cdr (car pairs))) symbols)
         (revappend-delete-augmented-runes-based-on-symbols1 (cdr pairs)
                                                             symbols ans))
...">revappend-delete-augmented-runes-based-on-symbols1</a> (cdr pairs)
        symbols
        (cons (car pairs) ans)))))</pre>
  </div>

<div class="form-block function" id="def-revappend-delete-augmented-runes-based-on-symbols" data-defines="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS" data-references="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1,REVERSE,T,REVAPPEND,NO-AUGMENTED-RUNE-BASED-ON,NULL,OR,COND,ANS,SYMBOLS,PAIRS,DEFUN" data-used-by="CURRENT-THEORY1-AUGMENTED" data-part-name="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS" data-part-args="ANS,SYMBOLS,PAIRS" data-part-body="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1,REVERSE,T,ANS,REVAPPEND,PAIRS,NO-AUGMENTED-RUNE-BASED-ON,SYMBOLS,NULL,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS">revappend-delete-augmented-runes-based-on-symbols</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-revappend-delete-augmented-runes-based-on-symbols" data-sym="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS" title="(defun revappend-delete-augmented-runes-based-on-symbols (pairs symbols ans)
  (cond
   ((or (null symbols) (no-augmented-rune-based-on pairs symbols))
    (revappend ans pairs))
   (t
...">revappend-delete-augmented-runes-based-on-symbols</a>
  (pairs symbols ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> symbols)
       (<a class="sym-link local-def" href="#def-no-augmented-rune-based-on" data-sym="NO-AUGMENTED-RUNE-BASED-ON" title="(defun no-augmented-rune-based-on (pairs symbols)
  (cond ((null pairs) t) ((member-eq (base-symbol (cdar pairs)) symbols) nil)
        (t (no-augmented-rune-based-on (cdr pairs) symbols))))">no-augmented-rune-based-on</a> pairs symbols)) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans pairs))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (<a class="sym-link local-def" href="#def-revappend-delete-augmented-runes-based-on-symbols1" data-sym="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS1" title="(defun revappend-delete-augmented-runes-based-on-symbols1 (pairs symbols ans)
  (cond ((null pairs) ans)
        ((member-eq (base-symbol (cdr (car pairs))) symbols)
         (revappend-delete-augmented-runes-based-on-symbols1 (cdr pairs)
                                                             symbols ans))
...">revappend-delete-augmented-runes-based-on-symbols1</a> pairs
          symbols
          ans)))))</pre>
  </div>

<div class="form-block function" id="def-current-theory-fn1" data-defines="CURRENT-THEORY-FN1" data-references="CURRENT-THEORY1,ASSERT$-RUNIC-THEORYP,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,QUOTE,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,LET*,WRLD,WRLD1,DEFUN" data-used-by="CURRENT-THEORY-FN" data-part-name="CURRENT-THEORY-FN1" data-part-args="WRLD,WRLD1" data-part-body="CURRENT-THEORY1,ASSERT$-RUNIC-THEORYP,WRLD1,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,QUOTE,PUTPROP-X-LST1,WRLD2,WRLD,COLLECT-REDEFINED,REDEFINED,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CURRENT-THEORY-FN1">current-theory-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-current-theory-fn1" data-sym="CURRENT-THEORY-FN1" title="(defun current-theory-fn1 (wrld1 wrld)
  (let* ((redefined (collect-redefined wrld nil))
         (wrld2
          (putprop-x-lst1 redefined &#39;runic-mapping-pairs
                          *acl2-property-unbound* wrld1)))">current-theory-fn1</a>
  (wrld1 wrld)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((redefined (<a class="sym-link system" href="history-management.html#def-collect-redefined" data-sym="COLLECT-REDEFINED">collect-redefined</a> wrld nil)) (wrld2 (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> redefined
          'runic-mapping-pairs
          <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>
          wrld1)))
    (assert$-runic-theoryp (<a class="sym-link system" href="history-management.html#def-current-theory1" data-sym="CURRENT-THEORY1">current-theory1</a> wrld2 nil nil) wrld)))</pre>
  </div>

<div class="form-block function" id="def-current-theory-fn" data-defines="CURRENT-THEORY-FN" data-references="CURRENT-THEORY-FN1,CURRENT-THEORY,QUOTE,HARD,ER,OR,PROG2$,DECODE-LOGICAL-NAME,WRLD1,LET,WRLD,LOGICAL-NAME,DEFUN" data-used-by="IN-THEORY-FN,CURRENT-THEORY" data-part-name="CURRENT-THEORY-FN" data-part-args="WRLD,LOGICAL-NAME" data-part-body="CURRENT-THEORY-FN1,CURRENT-THEORY,QUOTE,HARD,ER,OR,PROG2$,WRLD,LOGICAL-NAME,DECODE-LOGICAL-NAME,WRLD1,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CURRENT-THEORY-FN">current-theory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-current-theory-fn" data-sym="CURRENT-THEORY-FN" title="(defun current-theory-fn (logical-name wrld)
  (let ((wrld1 (decode-logical-name logical-name wrld)))
    (prog2$
     (or wrld1
         (er hard &#39;current-theory
...">current-theory-fn</a>
  (logical-name wrld)
  (let ((wrld1 (<a class="sym-link system" href="rewrite.html#def-decode-logical-name" data-sym="DECODE-LOGICAL-NAME">decode-logical-name</a> logical-name wrld)))
    (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> wrld1
        (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a>
          <span class="string">"The name ~x0 was not found in the current ACL2 logical ~
              world; hence no current-theory can be computed for that name."</span>
          logical-name))
      (<a class="sym-link local-def" href="#def-current-theory-fn1" data-sym="CURRENT-THEORY-FN1" title="(defun current-theory-fn1 (wrld1 wrld)
  (let* ((redefined (collect-redefined wrld nil))
         (wrld2
          (putprop-x-lst1 redefined &#39;runic-mapping-pairs
                          *acl2-property-unbound* wrld1)))">current-theory-fn1</a> wrld1 wrld))))</pre>
  </div>

<div class="form-block function" id="def-current-theory1-augmented" data-defines="CURRENT-THEORY1-AUGMENTED" data-references="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS,GLOBAL-VALUE,CURRENT-THEORY-AUGMENTED,AND,APPEND,T,MEMBER-EQ,ADD-TO-SET-EQ,CDR,*ACL2-PROPERTY-UNBOUND*,CDDR,RUNIC-MAPPING-PAIRS,QUOTE,CAR,CADR,EQ,REVERSE,NULL,COND,REDEFINED,ANS,LST,DEFUN" data-used-by="SET-DIFFERENCE-CURRENT-THEORY-FN,UNION-CURRENT-THEORY-FN" data-part-name="CURRENT-THEORY1-AUGMENTED" data-part-args="REDEFINED,ANS,LST" data-part-body="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS,GLOBAL-VALUE,CURRENT-THEORY-AUGMENTED,AND,APPEND,T,MEMBER-EQ,REDEFINED,ADD-TO-SET-EQ,CDR,CURRENT-THEORY1-AUGMENTED,*ACL2-PROPERTY-UNBOUND*,CDDR,RUNIC-MAPPING-PAIRS,QUOTE,CAR,CADR,EQ,ANS,REVERSE,LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CURRENT-THEORY1-AUGMENTED">current-theory1-augmented</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-current-theory1-augmented" data-sym="CURRENT-THEORY1-AUGMENTED" title="(defun current-theory1-augmented (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">current-theory1-augmented</a>
  (lst ans redefined)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> ans))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car lst)) 'runic-mapping-pairs) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst)) <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>) (<a class="sym-link local-def" href="#def-current-theory1-augmented" data-sym="CURRENT-THEORY1-AUGMENTED" title="(defun current-theory1-augmented (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">current-theory1-augmented</a> (cdr lst)
            ans
            (<a class="sym-link system" href="axioms.html#def-add-to-set-eq" data-sym="ADD-TO-SET-EQ">add-to-set-eq</a> (car (car lst)) redefined)))
        ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car (car lst)) redefined) (<a class="sym-link local-def" href="#def-current-theory1-augmented" data-sym="CURRENT-THEORY1-AUGMENTED" title="(defun current-theory1-augmented (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">current-theory1-augmented</a> (cdr lst) ans redefined))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-current-theory1-augmented" data-sym="CURRENT-THEORY1-AUGMENTED" title="(defun current-theory1-augmented (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">current-theory1-augmented</a> (cdr lst)
            (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst)) ans)
            redefined))))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car lst)) 'current-theory-augmented)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car lst)) 'global-value)) (<a class="sym-link local-def" href="#def-revappend-delete-augmented-runes-based-on-symbols" data-sym="REVAPPEND-DELETE-AUGMENTED-RUNES-BASED-ON-SYMBOLS" title="(defun revappend-delete-augmented-runes-based-on-symbols (pairs symbols ans)
  (cond
   ((or (null symbols) (no-augmented-rune-based-on pairs symbols))
    (revappend ans pairs))
   (t
...">revappend-delete-augmented-runes-based-on-symbols</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst))
        redefined
        ans))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-current-theory1-augmented" data-sym="CURRENT-THEORY1-AUGMENTED" title="(defun current-theory1-augmented (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">current-theory1-augmented</a> (cdr lst) ans redefined))))</pre>
  </div>

<div class="form-block function" id="def-union-current-theory-fn" data-defines="UNION-CURRENT-THEORY-FN" data-references="AUGMENT-THEORY,CURRENT-THEORY1,CURRENT-THEORY1-AUGMENTED,UNION-AUGMENTED-THEORIES-FN1+,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,SCAN-TO-EVENT,WRLD1,LET*,QUOTE,MAYBE-CHECK-THEORY,WRLD,LST2-KNOWN-TO-BE-RUNIC,LST2,DEFUN" data-used-by="UNION-THEORIES" data-part-name="UNION-CURRENT-THEORY-FN" data-part-args="WRLD,LST2-KNOWN-TO-BE-RUNIC,LST2" data-part-body="AUGMENT-THEORY,CURRENT-THEORY1,CURRENT-THEORY1-AUGMENTED,UNION-AUGMENTED-THEORIES-FN1+,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,SCAN-TO-EVENT,WRLD1,LET*,UNION-CURRENT-THEORY-FN,QUOTE,WRLD,LST2,LST2-KNOWN-TO-BE-RUNIC,MAYBE-CHECK-THEORY" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNION-CURRENT-THEORY-FN">union-current-theory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-union-current-theory-fn" data-sym="UNION-CURRENT-THEORY-FN" title="(defun union-current-theory-fn (lst2 lst2-known-to-be-runic wrld)
  (maybe-check-theory lst2-known-to-be-runic lst2 wrld &#39;union-current-theory-fn
                      (let* ((wrld1 (scan-to-event wrld))
                             (redefined (collect-redefined wrld nil))
                             (wrld2
...">union-current-theory-fn</a>
  (lst2 lst2-known-to-be-runic wrld)
  (<a class="sym-link local-def" href="#def-maybe-check-theory" data-sym="MAYBE-CHECK-THEORY" title="(defmacro maybe-check-theory (skip-check lst wrld ctx form)
  `(if ,skip-check
       ,form
       (check-theory ,lst ,wrld ,ctx ,form)))">maybe-check-theory</a> lst2-known-to-be-runic
    lst2
    wrld
    '<a class="sym-link local-def" href="#def-union-current-theory-fn" data-sym="UNION-CURRENT-THEORY-FN" title="(defun union-current-theory-fn (lst2 lst2-known-to-be-runic wrld)
  (maybe-check-theory lst2-known-to-be-runic lst2 wrld &#39;union-current-theory-fn
                      (let* ((wrld1 (scan-to-event wrld))
                             (redefined (collect-redefined wrld nil))
                             (wrld2
...">union-current-theory-fn</a>
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (scan-to-event wrld)) (redefined (<a class="sym-link system" href="history-management.html#def-collect-redefined" data-sym="COLLECT-REDEFINED">collect-redefined</a> wrld nil))
        (wrld2 (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> redefined
            'runic-mapping-pairs
            <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>
            wrld1)))
      (<a class="sym-link local-def" href="#def-union-augmented-theories-fn1_2B" data-sym="UNION-AUGMENTED-THEORIES-FN1+" title="(defun union-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans (strip-cdrs lst2)))
        ((null lst2) (revappend ans c1))
        ((int= (car (car lst1)) (car (car lst2)))
         (union-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
...">union-augmented-theories-fn1+</a> (<a class="sym-link local-def" href="#def-current-theory1-augmented" data-sym="CURRENT-THEORY1-AUGMENTED" title="(defun current-theory1-augmented (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">current-theory1-augmented</a> wrld2 nil nil)
        (<a class="sym-link system" href="history-management.html#def-current-theory1" data-sym="CURRENT-THEORY1">current-theory1</a> wrld2 nil nil)
        (augment-theory lst2 wrld)
        nil))))</pre>
  </div>

<div class="form-block macro" id="def-union-theories" data-defines="UNION-THEORIES" data-references="T,BOTH,IF,UNION-THEORIES-FN,WORLD,THEORY-FN-CALLP,UNION-CURRENT-THEORY-FN,LIST,CURRENT-THEORY,QUOTE,EQUAL,COND,LST2,LST1,DEFMACRO" data-used-by="ENABLE,THEORY-FN-CALLP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNION-THEORIES">union-theories</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-union-theories" data-sym="UNION-THEORIES" title="(defmacro union-theories (lst1 lst2)
  (cond
   ((equal lst1 &#39;(current-theory :here))
    (list &#39;union-current-theory-fn lst2 (theory-fn-callp lst2) &#39;world))
   ((equal lst2 &#39;(current-theory :here))
...">union-theories</a>
  (lst1 lst2)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal lst1 '(<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> <span class="keyword">:here</span>)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-union-current-theory-fn" data-sym="UNION-CURRENT-THEORY-FN" title="(defun union-current-theory-fn (lst2 lst2-known-to-be-runic wrld)
  (maybe-check-theory lst2-known-to-be-runic lst2 wrld &#39;union-current-theory-fn
                      (let* ((wrld1 (scan-to-event wrld))
                             (redefined (collect-redefined wrld nil))
                             (wrld2
...">union-current-theory-fn</a>
        lst2
        (<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst2)
        'world))
    ((equal lst2 '(<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> <span class="keyword">:here</span>)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-union-current-theory-fn" data-sym="UNION-CURRENT-THEORY-FN" title="(defun union-current-theory-fn (lst2 lst2-known-to-be-runic wrld)
  (maybe-check-theory lst2-known-to-be-runic lst2 wrld &#39;union-current-theory-fn
                      (let* ((wrld1 (scan-to-event wrld))
                             (redefined (collect-redefined wrld nil))
                             (wrld2
...">union-current-theory-fn</a>
        lst1
        (<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst1)
        'world))
    ((<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst1) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-union-theories-fn" data-sym="UNION-THEORIES-FN" title="(defun union-theories-fn (lst1 lst2 lst1-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory (eq lst1-known-to-be-runic &#39;both) lst2 wrld
                        &#39;union-theories-fn
...">union-theories-fn</a>
        lst1
        lst2
        (if (<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst2)
          ''both
          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        'world))
    ((<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst2) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-union-theories-fn" data-sym="UNION-THEORIES-FN" title="(defun union-theories-fn (lst1 lst2 lst1-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory (eq lst1-known-to-be-runic &#39;both) lst2 wrld
                        &#39;union-theories-fn
...">union-theories-fn</a> lst2 lst1 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> 'world))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-union-theories-fn" data-sym="UNION-THEORIES-FN" title="(defun union-theories-fn (lst1 lst2 lst1-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory (eq lst1-known-to-be-runic &#39;both) lst2 wrld
                        &#39;union-theories-fn
...">union-theories-fn</a> lst1 lst2 nil 'world))))</pre>
  </div>

<div class="form-block function" id="def-set-difference-current-theory-fn" data-defines="SET-DIFFERENCE-CURRENT-THEORY-FN" data-references="AUGMENT-THEORY,CURRENT-THEORY1,CURRENT-THEORY1-AUGMENTED,SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,SCAN-TO-EVENT,WRLD1,LET*,QUOTE,MAYBE-CHECK-THEORY,WRLD,LST2-KNOWN-TO-BE-RUNIC,LST2,DEFUN" data-used-by="SET-DIFFERENCE-THEORIES" data-part-name="SET-DIFFERENCE-CURRENT-THEORY-FN" data-part-args="WRLD,LST2-KNOWN-TO-BE-RUNIC,LST2" data-part-body="AUGMENT-THEORY,CURRENT-THEORY1,CURRENT-THEORY1-AUGMENTED,SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,SCAN-TO-EVENT,WRLD1,LET*,SET-DIFFERENCE-CURRENT-THEORY-FN,QUOTE,WRLD,LST2,LST2-KNOWN-TO-BE-RUNIC,MAYBE-CHECK-THEORY" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-DIFFERENCE-CURRENT-THEORY-FN">set-difference-current-theory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-difference-current-theory-fn" data-sym="SET-DIFFERENCE-CURRENT-THEORY-FN" title="(defun set-difference-current-theory-fn (lst2 lst2-known-to-be-runic wrld)
  (maybe-check-theory lst2-known-to-be-runic lst2 wrld
                      &#39;set-difference-current-theory-fn
                      (let* ((wrld1 (scan-to-event wrld))
                             (redefined (collect-redefined wrld nil))
...">set-difference-current-theory-fn</a>
  (lst2 lst2-known-to-be-runic wrld)
  (<a class="sym-link local-def" href="#def-maybe-check-theory" data-sym="MAYBE-CHECK-THEORY" title="(defmacro maybe-check-theory (skip-check lst wrld ctx form)
  `(if ,skip-check
       ,form
       (check-theory ,lst ,wrld ,ctx ,form)))">maybe-check-theory</a> lst2-known-to-be-runic
    lst2
    wrld
    '<a class="sym-link local-def" href="#def-set-difference-current-theory-fn" data-sym="SET-DIFFERENCE-CURRENT-THEORY-FN" title="(defun set-difference-current-theory-fn (lst2 lst2-known-to-be-runic wrld)
  (maybe-check-theory lst2-known-to-be-runic lst2 wrld
                      &#39;set-difference-current-theory-fn
                      (let* ((wrld1 (scan-to-event wrld))
                             (redefined (collect-redefined wrld nil))
...">set-difference-current-theory-fn</a>
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (scan-to-event wrld)) (redefined (<a class="sym-link system" href="history-management.html#def-collect-redefined" data-sym="COLLECT-REDEFINED">collect-redefined</a> wrld nil))
        (wrld2 (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> redefined
            'runic-mapping-pairs
            <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>
            wrld1)))
      (<a class="sym-link local-def" href="#def-set-difference-augmented-theories-fn1_2B" data-sym="SET-DIFFERENCE-AUGMENTED-THEORIES-FN1+" title="(defun set-difference-augmented-theories-fn1+ (lst1 c1 lst2 ans)
  (cond ((null lst1) (revappend ans nil)) ((null lst2) (revappend ans c1))
        ((= (car (car lst1)) (car (car lst2)))
         (set-difference-augmented-theories-fn1+ (cdr lst1) (cdr c1) (cdr lst2)
                                                 ans))
...">set-difference-augmented-theories-fn1+</a> (<a class="sym-link local-def" href="#def-current-theory1-augmented" data-sym="CURRENT-THEORY1-AUGMENTED" title="(defun current-theory1-augmented (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">current-theory1-augmented</a> wrld2 nil nil)
        (<a class="sym-link system" href="history-management.html#def-current-theory1" data-sym="CURRENT-THEORY1">current-theory1</a> wrld2 nil nil)
        (augment-theory lst2 wrld)
        nil))))</pre>
  </div>

<div class="form-block macro" id="def-set-difference-theories" data-defines="SET-DIFFERENCE-THEORIES" data-references="SET-DIFFERENCE-THEORIES-FN,T,WORLD,THEORY-FN-CALLP,SET-DIFFERENCE-CURRENT-THEORY-FN,LIST,CURRENT-THEORY,QUOTE,EQUAL,COND,LST2,LST1,DEFMACRO" data-used-by="DISABLE,THEORY-FN-CALLP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-DIFFERENCE-THEORIES">set-difference-theories</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-difference-theories" data-sym="SET-DIFFERENCE-THEORIES" title="(defmacro set-difference-theories (lst1 lst2)
  (cond
   ((equal lst1 &#39;(current-theory :here))
    (list &#39;set-difference-current-theory-fn lst2 (theory-fn-callp lst2)
          &#39;world))
...">set-difference-theories</a>
  (lst1 lst2)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal lst1 '(<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> <span class="keyword">:here</span>)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-set-difference-current-theory-fn" data-sym="SET-DIFFERENCE-CURRENT-THEORY-FN" title="(defun set-difference-current-theory-fn (lst2 lst2-known-to-be-runic wrld)
  (maybe-check-theory lst2-known-to-be-runic lst2 wrld
                      &#39;set-difference-current-theory-fn
                      (let* ((wrld1 (scan-to-event wrld))
                             (redefined (collect-redefined wrld nil))
...">set-difference-current-theory-fn</a>
        lst2
        (<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst2)
        'world))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-set-difference-theories-fn" data-sym="SET-DIFFERENCE-THEORIES-FN" title="(defun set-difference-theories-fn
       (lst1 lst2 lst1-known-to-be-runic lst2-known-to-be-runic wrld)
  (cond
   ((or lst1-known-to-be-runic (runic-theoryp lst1 wrld))
    (maybe-check-theory lst2-known-to-be-runic lst2 wrld
...">set-difference-theories-fn</a>
        lst1
        lst2
        (<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst1)
        (<a class="sym-link local-def" href="#def-theory-fn-callp" data-sym="THEORY-FN-CALLP" title="(defun theory-fn-callp (x)
  (and (consp x)
       (member-eq (car x)
                  &#39;(current-theory disable e/d enable
                                   executable-counterpart-theory
...">theory-fn-callp</a> lst2)
        'world))))</pre>
  </div>

<div class="form-block function" id="def-universal-theory-fn1" data-defines="UNIVERSAL-THEORY-FN1" data-references="REVAPPEND-DELETE-RUNES-BASED-ON-SYMBOLS,GLOBAL-VALUE,STANDARD-THEORIES,AND,APPEND-STRIP-CDRS,T,MEMBER-EQ,ADD-TO-SET-EQ,CDR,*ACL2-PROPERTY-UNBOUND*,CDDR,RUNIC-MAPPING-PAIRS,QUOTE,CAR,CADR,EQ,REVERSE,NULL,COND,REDEFINED,ANS,LST,DEFUN" data-used-by="STANDARD-THEORIES,UNIVERSAL-THEORY-FN" data-part-name="UNIVERSAL-THEORY-FN1" data-part-args="REDEFINED,ANS,LST" data-part-body="REVAPPEND-DELETE-RUNES-BASED-ON-SYMBOLS,GLOBAL-VALUE,STANDARD-THEORIES,AND,APPEND-STRIP-CDRS,T,MEMBER-EQ,REDEFINED,ADD-TO-SET-EQ,CDR,UNIVERSAL-THEORY-FN1,*ACL2-PROPERTY-UNBOUND*,CDDR,RUNIC-MAPPING-PAIRS,QUOTE,CAR,CADR,EQ,ANS,REVERSE,LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNIVERSAL-THEORY-FN1">universal-theory-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-universal-theory-fn1" data-sym="UNIVERSAL-THEORY-FN1" title="(defun universal-theory-fn1 (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">universal-theory-fn1</a>
  (lst ans redefined)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> ans))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car lst)) 'runic-mapping-pairs) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst)) <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>) (<a class="sym-link local-def" href="#def-universal-theory-fn1" data-sym="UNIVERSAL-THEORY-FN1" title="(defun universal-theory-fn1 (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">universal-theory-fn1</a> (cdr lst)
            ans
            (<a class="sym-link system" href="axioms.html#def-add-to-set-eq" data-sym="ADD-TO-SET-EQ">add-to-set-eq</a> (car (car lst)) redefined)))
        ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car (car lst)) redefined) (<a class="sym-link local-def" href="#def-universal-theory-fn1" data-sym="UNIVERSAL-THEORY-FN1" title="(defun universal-theory-fn1 (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">universal-theory-fn1</a> (cdr lst) ans redefined))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-universal-theory-fn1" data-sym="UNIVERSAL-THEORY-FN1" title="(defun universal-theory-fn1 (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">universal-theory-fn1</a> (cdr lst)
            (<a class="sym-link system" href="basis-a.html#def-append-strip-cdrs" data-sym="APPEND-STRIP-CDRS">append-strip-cdrs</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst)) ans)
            redefined))))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car lst)) '<a class="sym-link local-def" href="#def-standard-theories" data-sym="STANDARD-THEORIES" title="(defun standard-theories (wrld)
  (list (universal-theory-fn1 wrld nil nil)
        (function-theory-fn1 :definition wrld nil nil)
        (function-theory-fn1 :executable-counterpart wrld nil nil)
        (function-theory-fn1 :both wrld nil nil)))">standard-theories</a>)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car lst)) 'global-value)) (<a class="sym-link system" href="history-management.html#def-revappend-delete-runes-based-on-symbols" data-sym="REVAPPEND-DELETE-RUNES-BASED-ON-SYMBOLS">revappend-delete-runes-based-on-symbols</a> (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst)))
        redefined
        ans))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-universal-theory-fn1" data-sym="UNIVERSAL-THEORY-FN1" title="(defun universal-theory-fn1 (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">universal-theory-fn1</a> (cdr lst) ans redefined))))</pre>
  </div>

<div class="form-block function" id="def-universal-theory-fn" data-defines="UNIVERSAL-THEORY-FN" data-references="UNIVERSAL-THEORY-FN1,ASSERT$-RUNIC-THEORYP,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,QUOTE,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,DECODE-LOGICAL-NAME,WRLD1,LET*,LOGICAL-NAMEP,XARGS,DECLARE,WRLD,LOGICAL-NAME,DEFUN" data-used-by="UNIVERSAL-THEORY" data-part-name="UNIVERSAL-THEORY-FN" data-part-args="WRLD,LOGICAL-NAME" data-part-declare="WRLD,LOGICAL-NAME,LOGICAL-NAMEP,XARGS,DECLARE" data-part-body="UNIVERSAL-THEORY-FN1,ASSERT$-RUNIC-THEORYP,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,QUOTE,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,WRLD,LOGICAL-NAME,DECODE-LOGICAL-NAME,WRLD1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNIVERSAL-THEORY-FN">universal-theory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-universal-theory-fn" data-sym="UNIVERSAL-THEORY-FN" title="(defun universal-theory-fn (logical-name wrld)
  (declare (xargs :guard (logical-namep logical-name wrld)))
  (let* ((wrld1 (decode-logical-name logical-name wrld))
         (redefined (collect-redefined wrld nil))
         (wrld2
...">universal-theory-fn</a>
  (logical-name wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="history-management.html#def-logical-namep" data-sym="LOGICAL-NAMEP">logical-namep</a> logical-name wrld)))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link system" href="rewrite.html#def-decode-logical-name" data-sym="DECODE-LOGICAL-NAME">decode-logical-name</a> logical-name wrld)) (redefined (<a class="sym-link system" href="history-management.html#def-collect-redefined" data-sym="COLLECT-REDEFINED">collect-redefined</a> wrld nil))
      (wrld2 (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> redefined
          'runic-mapping-pairs
          <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>
          wrld1)))
    (assert$-runic-theoryp (<a class="sym-link local-def" href="#def-universal-theory-fn1" data-sym="UNIVERSAL-THEORY-FN1" title="(defun universal-theory-fn1 (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">universal-theory-fn1</a> wrld2 nil nil)
      wrld)))</pre>
  </div>

<div class="form-block macro" id="def-universal-theory" data-defines="UNIVERSAL-THEORY" data-references="WORLD,UNIVERSAL-THEORY-FN,QUOTE,LIST,LOGICAL-NAME,DEFMACRO" data-used-by="THEORY-FN-CALLP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNIVERSAL-THEORY">universal-theory</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-universal-theory" data-sym="UNIVERSAL-THEORY" title="(defmacro universal-theory (logical-name)
  (list &#39;universal-theory-fn logical-name &#39;world))">universal-theory</a>
  (logical-name)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-universal-theory-fn" data-sym="UNIVERSAL-THEORY-FN" title="(defun universal-theory-fn (logical-name wrld)
  (declare (xargs :guard (logical-namep logical-name wrld)))
  (let* ((wrld1 (decode-logical-name logical-name wrld))
         (redefined (collect-redefined wrld nil))
         (wrld2
...">universal-theory-fn</a> logical-name 'world))</pre>
  </div>

<div class="form-block function" id="def-function-theory-fn1" data-defines="FUNCTION-THEORY-FN1" data-references="CADDDR,CADDR,REVAPPEND-DELETE-RUNES-BASED-ON-SYMBOLS,GLOBAL-VALUE,STANDARD-THEORIES,AND,OTHERWISE,IF,CASE,RUNE-EXEC,LET,T,CONS,MEMBER-EQ,ADD-TO-SET-EQ,CDR,*ACL2-PROPERTY-UNBOUND*,CDDR,RUNIC-MAPPING-PAIRS,QUOTE,CAR,CADR,EQ,REVERSE,NULL,COND,REDEFINED,ANS,LST,TOKEN,DEFUN" data-used-by="STANDARD-THEORIES,EXECUTABLE-COUNTERPART-THEORY-FN,FUNCTION-THEORY-FN" data-part-name="FUNCTION-THEORY-FN1" data-part-args="REDEFINED,ANS,LST,TOKEN" data-part-body="CADDDR,CADDR,REVAPPEND-DELETE-RUNES-BASED-ON-SYMBOLS,GLOBAL-VALUE,STANDARD-THEORIES,AND,OTHERWISE,IF,CASE,RUNE-EXEC,LET,T,CONS,MEMBER-EQ,REDEFINED,ADD-TO-SET-EQ,CDR,TOKEN,FUNCTION-THEORY-FN1,*ACL2-PROPERTY-UNBOUND*,CDDR,RUNIC-MAPPING-PAIRS,QUOTE,CAR,CADR,EQ,ANS,REVERSE,LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FUNCTION-THEORY-FN1">function-theory-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a>
  (token lst ans redefined)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> ans))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car lst)) 'runic-mapping-pairs) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst)) <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>) (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> token
            (cdr lst)
            ans
            (<a class="sym-link system" href="axioms.html#def-add-to-set-eq" data-sym="ADD-TO-SET-EQ">add-to-set-eq</a> (car (car lst)) redefined)))
        ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car (car lst)) redefined) (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> token (cdr lst) ans redefined))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (cdr (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst))))) <span class="keyword">:definition</span>) (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> token
            (cdr lst)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> token <span class="keyword">:definition</span>) (cons (cdr (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst)))) ans))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((rune-exec (cdr (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst))))))
                  (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> token
                    (<span class="keyword">:executable-counterpart</span> (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> rune-exec)
                        ans
                        (cons rune-exec ans)))
                    (otherwise (cons (cdr (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst))))
                        (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> rune-exec)
                          ans
                          (cons rune-exec ans))))))))
            redefined))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> token (cdr lst) ans redefined))))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car lst)) '<a class="sym-link local-def" href="#def-standard-theories" data-sym="STANDARD-THEORIES" title="(defun standard-theories (wrld)
  (list (universal-theory-fn1 wrld nil nil)
        (function-theory-fn1 :definition wrld nil nil)
        (function-theory-fn1 :executable-counterpart wrld nil nil)
        (function-theory-fn1 :both wrld nil nil)))">standard-theories</a>)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car lst)) 'global-value)) (<a class="sym-link system" href="history-management.html#def-revappend-delete-runes-based-on-symbols" data-sym="REVAPPEND-DELETE-RUNES-BASED-ON-SYMBOLS">revappend-delete-runes-based-on-symbols</a> (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> token
          (<span class="keyword">:definition</span> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst))))
          (<span class="keyword">:executable-counterpart</span> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst))))
          (otherwise (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car lst)))))
        redefined
        ans))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> token (cdr lst) ans redefined))))</pre>
  </div>

<div class="form-block function" id="def-function-theory-fn" data-defines="FUNCTION-THEORY-FN" data-references="FUNCTION-THEORY-FN1,ASSERT$-RUNIC-THEORYP,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,QUOTE,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,DECODE-LOGICAL-NAME,WRLD1,LET*,LOGICAL-NAMEP,XARGS,DECLARE,WRLD,LOGICAL-NAME,DEFUN" data-used-by="FUNCTION-THEORY" data-part-name="FUNCTION-THEORY-FN" data-part-args="WRLD,LOGICAL-NAME" data-part-declare="WRLD,LOGICAL-NAME,LOGICAL-NAMEP,XARGS,DECLARE" data-part-body="FUNCTION-THEORY-FN1,ASSERT$-RUNIC-THEORYP,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,QUOTE,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,WRLD,LOGICAL-NAME,DECODE-LOGICAL-NAME,WRLD1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FUNCTION-THEORY-FN">function-theory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-function-theory-fn" data-sym="FUNCTION-THEORY-FN" title="(defun function-theory-fn (logical-name wrld)
  (declare (xargs :guard (logical-namep logical-name wrld)))
  (let* ((wrld1 (decode-logical-name logical-name wrld))
         (redefined (collect-redefined wrld nil))
         (wrld2
...">function-theory-fn</a>
  (logical-name wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="history-management.html#def-logical-namep" data-sym="LOGICAL-NAMEP">logical-namep</a> logical-name wrld)))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link system" href="rewrite.html#def-decode-logical-name" data-sym="DECODE-LOGICAL-NAME">decode-logical-name</a> logical-name wrld)) (redefined (<a class="sym-link system" href="history-management.html#def-collect-redefined" data-sym="COLLECT-REDEFINED">collect-redefined</a> wrld nil))
      (wrld2 (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> redefined
          'runic-mapping-pairs
          <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>
          wrld1)))
    (assert$-runic-theoryp (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> <span class="keyword">:definition</span> wrld2 nil nil)
      wrld)))</pre>
  </div>

<div class="form-block macro" id="def-function-theory" data-defines="FUNCTION-THEORY" data-references="WORLD,FUNCTION-THEORY-FN,QUOTE,LIST,LOGICAL-NAME,DEFMACRO" data-used-by="THEORY-FN-CALLP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FUNCTION-THEORY">function-theory</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-function-theory" data-sym="FUNCTION-THEORY" title="(defmacro function-theory (logical-name)
  (list &#39;function-theory-fn logical-name &#39;world))">function-theory</a>
  (logical-name)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-function-theory-fn" data-sym="FUNCTION-THEORY-FN" title="(defun function-theory-fn (logical-name wrld)
  (declare (xargs :guard (logical-namep logical-name wrld)))
  (let* ((wrld1 (decode-logical-name logical-name wrld))
         (redefined (collect-redefined wrld nil))
         (wrld2
...">function-theory-fn</a> logical-name 'world))</pre>
  </div>

<div class="form-block function" id="def-executable-counterpart-theory-fn" data-defines="EXECUTABLE-COUNTERPART-THEORY-FN" data-references="FUNCTION-THEORY-FN1,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,QUOTE,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,DECODE-LOGICAL-NAME,WRLD1,LET*,LOGICAL-NAMEP,XARGS,DECLARE,WRLD,LOGICAL-NAME,DEFUN" data-used-by="EXECUTABLE-COUNTERPART-THEORY" data-part-name="EXECUTABLE-COUNTERPART-THEORY-FN" data-part-args="WRLD,LOGICAL-NAME" data-part-declare="WRLD,LOGICAL-NAME,LOGICAL-NAMEP,XARGS,DECLARE" data-part-body="FUNCTION-THEORY-FN1,*ACL2-PROPERTY-UNBOUND*,RUNIC-MAPPING-PAIRS,QUOTE,PUTPROP-X-LST1,WRLD2,COLLECT-REDEFINED,REDEFINED,WRLD,LOGICAL-NAME,DECODE-LOGICAL-NAME,WRLD1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXECUTABLE-COUNTERPART-THEORY-FN">executable-counterpart-theory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-executable-counterpart-theory-fn" data-sym="EXECUTABLE-COUNTERPART-THEORY-FN" title="(defun executable-counterpart-theory-fn (logical-name wrld)
  (declare (xargs :guard (logical-namep logical-name wrld)))
  (let* ((wrld1 (decode-logical-name logical-name wrld))
         (redefined (collect-redefined wrld nil))
         (wrld2
...">executable-counterpart-theory-fn</a>
  (logical-name wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="history-management.html#def-logical-namep" data-sym="LOGICAL-NAMEP">logical-namep</a> logical-name wrld)))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link system" href="rewrite.html#def-decode-logical-name" data-sym="DECODE-LOGICAL-NAME">decode-logical-name</a> logical-name wrld)) (redefined (<a class="sym-link system" href="history-management.html#def-collect-redefined" data-sym="COLLECT-REDEFINED">collect-redefined</a> wrld nil))
      (wrld2 (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> redefined
          'runic-mapping-pairs
          <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>
          wrld1)))
    (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> <span class="keyword">:executable-counterpart</span> wrld2 nil nil)))</pre>
  </div>

<div class="form-block macro" id="def-executable-counterpart-theory" data-defines="EXECUTABLE-COUNTERPART-THEORY" data-references="WORLD,EXECUTABLE-COUNTERPART-THEORY-FN,QUOTE,LIST,LOGICAL-NAME,DEFMACRO" data-used-by="THEORY-FN-CALLP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXECUTABLE-COUNTERPART-THEORY">executable-counterpart-theory</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-executable-counterpart-theory" data-sym="EXECUTABLE-COUNTERPART-THEORY" title="(defmacro executable-counterpart-theory (logical-name)
  (list &#39;executable-counterpart-theory-fn logical-name &#39;world))">executable-counterpart-theory</a>
  (logical-name)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-executable-counterpart-theory-fn" data-sym="EXECUTABLE-COUNTERPART-THEORY-FN" title="(defun executable-counterpart-theory-fn (logical-name wrld)
  (declare (xargs :guard (logical-namep logical-name wrld)))
  (let* ((wrld1 (decode-logical-name logical-name wrld))
         (redefined (collect-redefined wrld nil))
         (wrld2
...">executable-counterpart-theory-fn</a> logical-name 'world))</pre>
  </div>

<div class="form-block function" id="def-standard-theories" data-defines="STANDARD-THEORIES" data-references="FUNCTION-THEORY-FN1,UNIVERSAL-THEORY-FN1,LIST,WRLD,DEFUN" data-used-by="END-PREHISTORIC-WORLD,FUNCTION-THEORY-FN1,UNIVERSAL-THEORY-FN1,PRIMORDIAL-WORLD-GLOBALS" data-part-name="STANDARD-THEORIES" data-part-args="WRLD" data-part-body="FUNCTION-THEORY-FN1,WRLD,UNIVERSAL-THEORY-FN1,LIST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="STANDARD-THEORIES">standard-theories</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-standard-theories" data-sym="STANDARD-THEORIES" title="(defun standard-theories (wrld)
  (list (universal-theory-fn1 wrld nil nil)
        (function-theory-fn1 :definition wrld nil nil)
        (function-theory-fn1 :executable-counterpart wrld nil nil)
        (function-theory-fn1 :both wrld nil nil)))">standard-theories</a>
  (wrld)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link local-def" href="#def-universal-theory-fn1" data-sym="UNIVERSAL-THEORY-FN1" title="(defun universal-theory-fn1 (lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">universal-theory-fn1</a> wrld nil nil)
    (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> <span class="keyword">:definition</span> wrld nil nil)
    (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> <span class="keyword">:executable-counterpart</span> wrld nil nil)
    (<a class="sym-link local-def" href="#def-function-theory-fn1" data-sym="FUNCTION-THEORY-FN1" title="(defun function-theory-fn1 (token lst ans redefined)
  (cond ((null lst) (reverse ans))
        ((eq (cadr (car lst)) &#39;runic-mapping-pairs)
         (cond
          ((eq (cddr (car lst)) *acl2-property-unbound*)
...">function-theory-fn1</a> <span class="keyword">:both</span> wrld nil nil)))</pre>
  </div>

<div class="form-block macro" id="def-current-theory" data-defines="CURRENT-THEORY" data-references="WORLD,CURRENT-THEORY-FN,QUOTE,LIST,LOGICAL-NAME,DEFMACRO" data-used-by="THEORY-INVARIANT-FN,ENABLE,DISABLE,DEFTHEORY-FN,SET-DIFFERENCE-THEORIES,UNION-THEORIES,CURRENT-THEORY-FN,THEORY-FN-CALLP,PRIMORDIAL-WORLD-GLOBALS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CURRENT-THEORY">current-theory</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a>
  (logical-name)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-current-theory-fn" data-sym="CURRENT-THEORY-FN" title="(defun current-theory-fn (logical-name wrld)
  (let ((wrld1 (decode-logical-name logical-name wrld)))
    (prog2$
     (or wrld1
         (er hard &#39;current-theory
...">current-theory-fn</a> logical-name 'world))</pre>
  </div>

<div class="form-block function" id="def-end-prehistoric-world" data-defines="END-PREHISTORIC-WORLD" data-references="ADD-EVENT-LANDMARK,EXIT-BOOT-STRAP-MODE,ADD-COMMAND-LANDMARK,LENGTH,UPDATE-CURRENT-THEORY,WRLD2,CURRENT-THEORY1,THY,*INITIAL-RETURN-LAST-TABLE*,RETURN-LAST-TABLE,*INITIAL-ACL2-DEFAULTS-TABLE*,TABLE-ALIST,ACL2-DEFAULTS-TABLE,PUTPROP,ALL-ATTACHMENTS,ATTACHMENTS-AT-GROUND-ZERO,PROOF-SUPPORTERS-ALIST,CERT-REPLAY,REDEF-SEEN,SKIP-PROOFS-SEEN,NEXT-ABSOLUTE-EVENT-NUMBER,EVENT-NUMBER-BASELINE,T,MAKE,NEXT-ABSOLUTE-COMMAND-NUMBER,COMMAND-NUMBER-BASELINE,LET,COMMAND-NUMBER-BASELINE-INFO,BOOT-STRAP-PASS-2,BOOT-STRAP-FLG,STANDARD-THEORIES,*INITIAL-UNTOUCHABLE-VARS*,UNTOUCHABLE-VARS,GLOBAL-VAL,*INITIAL-UNTOUCHABLE-FNS*,APPEND,UNTOUCHABLE-FNS,QUOTE,LIST,GLOBAL-SET-LST,WRLD1,LET*,WRLD,DEFUN" data-part-name="END-PREHISTORIC-WORLD" data-part-args="WRLD" data-part-body="ADD-EVENT-LANDMARK,EXIT-BOOT-STRAP-MODE,ADD-COMMAND-LANDMARK,LENGTH,UPDATE-CURRENT-THEORY,WRLD2,CURRENT-THEORY1,THY,*INITIAL-RETURN-LAST-TABLE*,RETURN-LAST-TABLE,*INITIAL-ACL2-DEFAULTS-TABLE*,TABLE-ALIST,ACL2-DEFAULTS-TABLE,PUTPROP,ALL-ATTACHMENTS,ATTACHMENTS-AT-GROUND-ZERO,PROOF-SUPPORTERS-ALIST,CERT-REPLAY,REDEF-SEEN,SKIP-PROOFS-SEEN,NEXT-ABSOLUTE-EVENT-NUMBER,EVENT-NUMBER-BASELINE,T,MAKE,NEXT-ABSOLUTE-COMMAND-NUMBER,COMMAND-NUMBER-BASELINE,LET,COMMAND-NUMBER-BASELINE-INFO,BOOT-STRAP-PASS-2,BOOT-STRAP-FLG,STANDARD-THEORIES,*INITIAL-UNTOUCHABLE-VARS*,UNTOUCHABLE-VARS,WRLD,GLOBAL-VAL,*INITIAL-UNTOUCHABLE-FNS*,APPEND,UNTOUCHABLE-FNS,QUOTE,LIST,GLOBAL-SET-LST,WRLD1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="END-PREHISTORIC-WORLD">end-prehistoric-world</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-end-prehistoric-world" data-sym="END-PREHISTORIC-WORLD" title="(defun end-prehistoric-world (wrld)
  (let* ((wrld1
          (global-set-lst
           (list
            (list &#39;untouchable-fns
...">end-prehistoric-world</a>
  (wrld)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link system" href="basis-b.html#def-global-set-lst" data-sym="GLOBAL-SET-LST">global-set-lst</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'untouchable-fns
             (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link system" href="axioms.html#def-_2Ainitial-untouchable-fns_2A" data-sym="*INITIAL-UNTOUCHABLE-FNS*">*initial-untouchable-fns*</a>
               (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'untouchable-fns wrld)))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'untouchable-vars
             (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link system" href="axioms.html#def-_2Ainitial-untouchable-vars_2A" data-sym="*INITIAL-UNTOUCHABLE-VARS*">*initial-untouchable-vars*</a>
               (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'untouchable-vars wrld)))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-standard-theories" data-sym="STANDARD-THEORIES" title="(defun standard-theories (wrld)
  (list (universal-theory-fn1 wrld nil nil)
        (function-theory-fn1 :definition wrld nil nil)
        (function-theory-fn1 :executable-counterpart wrld nil nil)
        (function-theory-fn1 :both wrld nil nil)))">standard-theories</a> (<a class="sym-link local-def" href="#def-standard-theories" data-sym="STANDARD-THEORIES" title="(defun standard-theories (wrld)
  (list (universal-theory-fn1 wrld nil nil)
        (function-theory-fn1 :definition wrld nil nil)
        (function-theory-fn1 :executable-counterpart wrld nil nil)
        (function-theory-fn1 :both wrld nil nil)))">standard-theories</a> wrld))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'boot-strap-flg nil)
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'boot-strap-pass-2 nil)
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'command-number-baseline-info
             (let ((command-number-baseline (next-absolute-command-number wrld)))
               (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> command-number-baseline-info
                 <span class="keyword">:current</span> command-number-baseline
                 <span class="keyword">:permanent-p</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                 <span class="keyword">:original</span> command-number-baseline)))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'event-number-baseline
             (next-absolute-event-number wrld))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'skip-proofs-seen nil)
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'redef-seen nil)
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'cert-replay nil)
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'proof-supporters-alist nil)
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'attachments-at-ground-zero (all-attachments wrld)))
         (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> 'acl2-defaults-table
           '<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a>
           <a class="sym-link system" href="axioms.html#def-_2Ainitial-acl2-defaults-table_2A" data-sym="*INITIAL-ACL2-DEFAULTS-TABLE*">*initial-acl2-defaults-table*</a>
           (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> 'return-last-table
             '<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a>
             *initial-return-last-table*
             wrld)))) (thy (<a class="sym-link system" href="history-management.html#def-current-theory1" data-sym="CURRENT-THEORY1">current-theory1</a> wrld nil nil))
      (wrld2 (<a class="sym-link system" href="history-management.html#def-update-current-theory" data-sym="UPDATE-CURRENT-THEORY">update-current-theory</a> thy (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> thy) wrld1)))
    (<a class="sym-link system" href="history-management.html#def-add-command-landmark" data-sym="ADD-COMMAND-LANDMARK">add-command-landmark</a> <span class="keyword">:logic</span> '(exit-boot-strap-mode)
      nil
      nil
      (<a class="sym-link system" href="history-management.html#def-add-event-landmark" data-sym="ADD-EVENT-LANDMARK">add-event-landmark</a> '(exit-boot-strap-mode)
        'exit-boot-strap-mode
        <span class="number">0</span>
        wrld2
        <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
        nil
        nil))))</pre>
  </div>

<div class="form-block function" id="def-theory-namep" data-defines="THEORY-NAMEP" data-references="T,THEORY,QUOTE,GETPROPC,EQ,NOT,SYMBOLP,AND,WRLD,NAME,DEFUN" data-used-by="THEORY-FN" data-part-name="THEORY-NAMEP" data-part-args="WRLD,NAME" data-part-body="WRLD,T,THEORY,QUOTE,GETPROPC,EQ,NOT,NAME,SYMBOLP,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="THEORY-NAMEP">theory-namep</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-theory-namep" data-sym="THEORY-NAMEP" title="(defun theory-namep (name wrld)
  (and (symbolp name) (not (eq (getpropc name &#39;theory t wrld) t))))">theory-namep</a>
  (name wrld)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
    (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name '<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block function" id="def-theory-fn" data-defines="THEORY-FN" data-references="HARD?!,ER,THEORY,QUOTE,GETPROPC,THEORY-NAMEP,COND,T,XARGS,DECLARE,WRLD,NAME,DEFUN" data-used-by="THEORY" data-part-name="THEORY-FN" data-part-args="WRLD,NAME" data-part-declare="T,XARGS,DECLARE" data-part-body="HARD?!,ER,T,THEORY,QUOTE,GETPROPC,WRLD,NAME,THEORY-NAMEP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="THEORY-FN">theory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-theory-fn" data-sym="THEORY-FN" title="(defun theory-fn (name wrld)
  (declare (xargs :guard t))
  (cond ((theory-namep name wrld) (getpropc name &#39;theory nil wrld))
        (t
         (er hard?! &#39;theory
...">theory-fn</a>
  (name wrld)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-theory-namep" data-sym="THEORY-NAMEP" title="(defun theory-namep (name wrld)
  (and (symbolp name) (not (eq (getpropc name &#39;theory t wrld) t))))">theory-namep</a> name wrld) (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name '<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> nil wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard?!
        '<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a>
        <span class="string">"The alleged theory name, ~x0, is not the name of a previously ~
                executed deftheory event.  See :DOC theory."</span>
        name))))</pre>
  </div>

<div class="form-block macro" id="def-theory" data-defines="THEORY" data-references="WORLD,THEORY-FN,QUOTE,LIST,NAME,DEFMACRO" data-used-by="DEFUN-SK-FN,BOOKDATA-ALIST1,NAME-INTRODUCED,IN-ARITHMETIC-THEORY-FN,DEFTHEORY-FN,REDUNDANT-DEFTHEORY-P,THEORY-FN,THEORY-NAMEP,THEORY-FN-CALLP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="THEORY">theory</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> (name) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-theory-fn" data-sym="THEORY-FN" title="(defun theory-fn (name wrld)
  (declare (xargs :guard t))
  (cond ((theory-namep name wrld) (getpropc name &#39;theory nil wrld))
        (t
         (er hard?! &#39;theory
...">theory-fn</a> name 'world))</pre>
  </div>

<div class="form-block function" id="def-redundant-deftheory-p" data-defines="REDUNDANT-DEFTHEORY-P" data-references="T,THEORY,QUOTE,GETPROPC,EQUAL,WRLD,RUNIC-THEORY,NAME,DEFUN" data-used-by="DEFTHEORY-FN" data-part-name="REDUNDANT-DEFTHEORY-P" data-part-args="WRLD,RUNIC-THEORY,NAME" data-part-body="RUNIC-THEORY,WRLD,T,THEORY,QUOTE,NAME,GETPROPC,EQUAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDUNDANT-DEFTHEORY-P">redundant-deftheory-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-redundant-deftheory-p" data-sym="REDUNDANT-DEFTHEORY-P" title="(defun redundant-deftheory-p (name runic-theory wrld)
  (equal (getpropc name &#39;theory t wrld) runic-theory))">redundant-deftheory-p</a>
  (name runic-theory wrld)
  (equal (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name '<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) runic-theory))</pre>
  </div>

<div class="form-block function" id="def-deftheory-fn" data-defines="DEFTHEORY-FN" data-references="INSTALL-EVENT,PUTPROP,WRLD2,IGNORE,DECLARE,CURRENT-THEORY-LENGTH,CURRENT-THEORY,GLOBAL-VAL,EXTEND-CURRENT-THEORY,THEORY-AUGMENTED-IGNORE,MV-LET,LENGTH,LENGTH0,THEORY,CHK-JUST-NEW-NAME,WRLD1,STOP-REDUNDANT-EVENT,REDUNDANT-DEFTHEORY-P,AND,TRANSLATE-IN-THEORY-HINT,THEORY0,ER-LET*,CHK-ALL-BUT-NEW-NAME,ER-PROGN,LIST,OR,W,WRLD,LET,DEFTHEORY,QUOTE,CONS,T,COND,WITH-CTX-SUMMARIZED,WHEN-LOGIC,EVENT-FORM,CTX,REDUNDANT-OKP,STATE,EXPR,NAME,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="DEFTHEORY-FN" data-part-args="EVENT-FORM,CTX,REDUNDANT-OKP,STATE,EXPR,NAME" data-part-body="INSTALL-EVENT,PUTPROP,WRLD2,IGNORE,DECLARE,CURRENT-THEORY-LENGTH,CURRENT-THEORY,GLOBAL-VAL,EXTEND-CURRENT-THEORY,THEORY-AUGMENTED-IGNORE,MV-LET,LENGTH,LENGTH0,THEORY,CHK-JUST-NEW-NAME,WRLD1,STOP-REDUNDANT-EVENT,REDUNDANT-DEFTHEORY-P,REDUNDANT-OKP,AND,TRANSLATE-IN-THEORY-HINT,THEORY0,ER-LET*,CHK-ALL-BUT-NEW-NAME,ER-PROGN,EXPR,LIST,OR,EVENT-FORM,STATE,W,WRLD,LET,NAME,DEFTHEORY,QUOTE,CONS,T,CTX,COND,WITH-CTX-SUMMARIZED,WHEN-LOGIC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTHEORY-FN">deftheory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-deftheory-fn" data-sym="DEFTHEORY-FN" title="(defun deftheory-fn (name expr state redundant-okp ctx event-form)
  (when-logic &quot;DEFTHEORY&quot;
              (with-ctx-summarized (cond (ctx) (t (cons &#39;deftheory name)))
                                   (let ((wrld (w state))
                                         (event-form
...">deftheory-fn</a>
  (name expr state redundant-okp ctx event-form)
  (<a class="sym-link system" href="axioms.html#def-when-logic" data-sym="WHEN-LOGIC">when-logic</a> <span class="string">"DEFTHEORY"</span>
    (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ctx) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons '<a class="sym-link system" href="axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> name)))
      (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> name expr))))
        (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name name ctx nil wrld state)
          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((theory0 (<a class="sym-link system" href="history-management.html#def-translate-in-theory-hint" data-sym="TRANSLATE-IN-THEORY-HINT">translate-in-theory-hint</a> expr nil ctx wrld state)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> redundant-okp
                 (<a class="sym-link local-def" href="#def-redundant-deftheory-p" data-sym="REDUNDANT-DEFTHEORY-P" title="(defun redundant-deftheory-p (name runic-theory wrld)
  (equal (getpropc name &#39;theory t wrld) runic-theory))">redundant-deftheory-p</a> name theory0 wrld)) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld1 (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> name nil '<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> nil ctx wrld state)))
                  (let ((length0 (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> theory0)))
                    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> theory-augmented-ignore)
                      (<a class="sym-link system" href="history-management.html#def-extend-current-theory" data-sym="EXTEND-CURRENT-THEORY">extend-current-theory</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> wrld)
                        (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'current-theory-length wrld)
                        theory0
                        length0
                        <span class="keyword">:none</span> wrld)
                      (declare (ignore theory-augmented-ignore))
                      (let ((wrld2 (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name '<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> <a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> wrld1)))
                        (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> length0
                          event-form
                          '<a class="sym-link system" href="axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a>
                          name
                          nil
                          nil
                          nil
                          nil
                          wrld2
                          state)))))))))))))</pre>
  </div>

<div class="form-block function" id="def-get-in-theory-redundant-okp" data-defines="GET-IN-THEORY-REDUNDANT-OKP" data-references="T,CDR,COND,ASSOC-EQ,PAIR,LET,W,ACL2-DEFAULTS-TABLE,QUOTE,TABLE-ALIST,ALISTP,XARGS,DECLARE,STATE,DEFUN" data-used-by="IN-THEORY-FN" data-part-name="GET-IN-THEORY-REDUNDANT-OKP" data-part-args="STATE" data-part-declare="W,ACL2-DEFAULTS-TABLE,QUOTE,TABLE-ALIST,ALISTP,STATE,XARGS,DECLARE" data-part-body="T,CDR,COND,STATE,W,ACL2-DEFAULTS-TABLE,QUOTE,TABLE-ALIST,ASSOC-EQ,PAIR,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-IN-THEORY-REDUNDANT-OKP">get-in-theory-redundant-okp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-in-theory-redundant-okp" data-sym="GET-IN-THEORY-REDUNDANT-OKP" title="(defun get-in-theory-redundant-okp (state)
  (declare
   (xargs :stobjs state :guard
    (alistp (table-alist (quote acl2-defaults-table) (w state)))))
  (let ((pair
...">get-in-theory-redundant-okp</a>
  (state)
  (declare (xargs <span class="keyword">:stobjs</span> state
      <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
  (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:in-theory-redundant-okp</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pair (cdr pair)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))</pre>
  </div>

<div class="form-block macro" id="def-set-in-theory-redundant-okp" data-defines="SET-IN-THEORY-REDUNDANT-OKP" data-references="ACL2-DEFAULTS-TABLE,TABLE,PROGN,SUMMARY,EVENT,WITH-OUTPUT,QUASIQUOTE,BOOLEANP,XARGS,DECLARE,VAL,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-IN-THEORY-REDUNDANT-OKP">set-in-theory-redundant-okp</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-in-theory-redundant-okp" data-sym="SET-IN-THEORY-REDUNDANT-OKP" title="(defmacro set-in-theory-redundant-okp (val)
  (declare (xargs :guard (booleanp val)))
  `(with-output :off (event summary)
                (progn
                 (table acl2-defaults-table :in-theory-redundant-okp ,val)">set-in-theory-redundant-okp</a>
  (val)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> val)))
  `(<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> (event summary)
    (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:in-theory-redundant-okp</span> ,VAL)
      (<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:in-theory-redundant-okp</span>))))</pre>
  </div>

<div class="form-block function" id="def-in-theory-fn" data-defines="IN-THEORY-FN" data-references="VALUE,MAYBE-WARN-ABOUT-THEORY,IMMEDIATE-FORCE-MODEP,DISABLE,FORCE,ENABLE,MEMBER-EQUAL,PPROGN,INSTALL-EVENT,SCRIPT-MODE,F-GET-GLOBAL,IF,VAL,UPDATE-CURRENT-THEORY,WRLD1,LENGTH,THEORY0-LENGTH,*IMMEDIATE-FORCE-MODEP-XNUME*,IMM-XNUME-EN1,*FORCE-XNUME*,ENABLED-NUMEP,FORCE-XNUME-EN1,ENS,ENS1,LET*,STOP-REDUNDANT-EVENT,CURRENT-THEORY-FN,EQUAL,GET-IN-THEORY-REDUNDANT-OKP,AND,CTX,TRANSLATE-IN-THEORY-HINT,THEORY0,ER-LET*,IN-THEORY,QUOTE,LIST,OR,W,WRLD,LET,T,CAR,SYMBOLP,MSG,ATOM,COND,WITH-CTX-SUMMARIZED,WHEN-LOGIC,EVENT-FORM,STATE,EXPR,DEFUN" data-used-by="THEORY-INVARIANT-FN,PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="IN-THEORY-FN" data-part-args="EVENT-FORM,STATE,EXPR" data-part-body="VALUE,MAYBE-WARN-ABOUT-THEORY,IMMEDIATE-FORCE-MODEP,DISABLE,FORCE,ENABLE,MEMBER-EQUAL,PPROGN,INSTALL-EVENT,SCRIPT-MODE,F-GET-GLOBAL,IF,VAL,UPDATE-CURRENT-THEORY,WRLD1,LENGTH,THEORY0-LENGTH,*IMMEDIATE-FORCE-MODEP-XNUME*,IMM-XNUME-EN1,*FORCE-XNUME*,ENABLED-NUMEP,FORCE-XNUME-EN1,ENS,ENS1,LET*,STOP-REDUNDANT-EVENT,CURRENT-THEORY-FN,EQUAL,GET-IN-THEORY-REDUNDANT-OKP,AND,CTX,TRANSLATE-IN-THEORY-HINT,THEORY0,ER-LET*,IN-THEORY,QUOTE,LIST,OR,EVENT-FORM,STATE,W,WRLD,LET,T,CAR,SYMBOLP,MSG,EXPR,ATOM,COND,WITH-CTX-SUMMARIZED,WHEN-LOGIC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IN-THEORY-FN">in-theory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-in-theory-fn" data-sym="IN-THEORY-FN" title="(defun in-theory-fn (expr state event-form)
  (when-logic &quot;IN-THEORY&quot;
              (with-ctx-summarized
               (cond ((atom expr) (msg &quot;( IN-THEORY ~x0)&quot; expr))
                     ((symbolp (car expr))
...">in-theory-fn</a>
  (expr state event-form)
  (<a class="sym-link system" href="axioms.html#def-when-logic" data-sym="WHEN-LOGIC">when-logic</a> <span class="string">"IN-THEORY"</span>
    (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> expr) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( IN-THEORY ~x0)"</span> expr))
        ((symbolp (car expr)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( IN-THEORY (~x0 ...))"</span> (car expr)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"( IN-THEORY (...))"</span>))
      (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> expr))))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((theory0 (<a class="sym-link system" href="history-management.html#def-translate-in-theory-hint" data-sym="TRANSLATE-IN-THEORY-HINT">translate-in-theory-hint</a> expr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ctx wrld state)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-get-in-theory-redundant-okp" data-sym="GET-IN-THEORY-REDUNDANT-OKP" title="(defun get-in-theory-redundant-okp (state)
  (declare
   (xargs :stobjs state :guard
    (alistp (table-alist (quote acl2-defaults-table) (w state)))))
  (let ((pair
...">get-in-theory-redundant-okp</a> state)
               (equal theory0 (<a class="sym-link local-def" href="#def-current-theory-fn" data-sym="CURRENT-THEORY-FN" title="(defun current-theory-fn (logical-name wrld)
  (let ((wrld1 (decode-logical-name logical-name wrld)))
    (prog2$
     (or wrld1
         (er hard &#39;current-theory
...">current-theory-fn</a> <span class="keyword">:here</span> wrld))) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ens1 (ens state)) (force-xnume-en1 (enabled-numep <a class="sym-link system" href="axioms.html#def-_2Aforce-xnume_2A" data-sym="*FORCE-XNUME*">*force-xnume*</a> ens1))
                  (imm-xnume-en1 (enabled-numep <a class="sym-link system" href="axioms.html#def-_2Aimmediate-force-modep-xnume_2A" data-sym="*IMMEDIATE-FORCE-MODEP-XNUME*">*immediate-force-modep-xnume*</a> ens1))
                  (theory0-length (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> theory0))
                  (wrld1 (<a class="sym-link system" href="history-management.html#def-update-current-theory" data-sym="UPDATE-CURRENT-THEORY">update-current-theory</a> theory0 theory0-length wrld))
                  (val (if (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'script-mode state)
                      <span class="keyword">:current-theory-updated</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:number-of-enabled-runes</span> theory0-length))))
                (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> val
                       event-form
                       '<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a>
                       <span class="number">0</span>
                       nil
                       nil
                       <span class="keyword">:protect</span> nil
                       wrld1
                       state)))
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> expr
                        '((<a class="sym-link local-def" href="#def-enable" data-sym="ENABLE" title="(defmacro enable (&amp;rest rst)
  (list &#39;union-theories &#39;(current-theory :here) (kwote rst)))">enable</a> (<span class="keyword">:executable-counterpart</span> <a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a>)) (<a class="sym-link local-def" href="#def-disable" data-sym="DISABLE" title="(defmacro disable (&amp;rest rst)
  (list &#39;set-difference-theories &#39;(current-theory :here) (kwote rst)))">disable</a> (<span class="keyword">:executable-counterpart</span> <a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a>))
                          (<a class="sym-link local-def" href="#def-enable" data-sym="ENABLE" title="(defmacro enable (&amp;rest rst)
  (list &#39;union-theories &#39;(current-theory :here) (kwote rst)))">enable</a> (<span class="keyword">:executable-counterpart</span> <a class="sym-link system" href="axioms.html#def-immediate-force-modep" data-sym="IMMEDIATE-FORCE-MODEP">immediate-force-modep</a>))
                          (<a class="sym-link local-def" href="#def-disable" data-sym="DISABLE" title="(defmacro disable (&amp;rest rst)
  (list &#39;set-difference-theories &#39;(current-theory :here) (kwote rst)))">disable</a> (<span class="keyword">:executable-counterpart</span> <a class="sym-link system" href="axioms.html#def-immediate-force-modep" data-sym="IMMEDIATE-FORCE-MODEP">immediate-force-modep</a>))))
                      state
                      (maybe-warn-about-theory ens1
                        force-xnume-en1
                        imm-xnume-en1
                        (ens state)
                        ctx
                        wrld
                        state))
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val)))))))))))</pre>
  </div>

<div class="form-block function" id="def-in-arithmetic-theory-fn" data-defines="IN-ARITHMETIC-THEORY-FN" data-references="LENGTH,INSTALL-EVENT,GLOBAL-SET,WRLD1,GLOBAL-ARITHMETIC-ENABLED-STRUCTURE,GLOBAL-VAL,LOAD-THEORY-INTO-ENABLED-STRUCTURE,ENS,TRANSLATE-IN-THEORY-HINT,THEORY,ER-LET*,CTX,SOFT,ER,QUOTEP,NOT,IN-ARITHMETIC-THEORY,QUOTE,LIST,OR,W,WRLD,LET,T,CAR,SYMBOLP,MSG,ATOM,COND,WITH-CTX-SUMMARIZED,WHEN-LOGIC,EVENT-FORM,STATE,EXPR,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="IN-ARITHMETIC-THEORY-FN" data-part-args="EVENT-FORM,STATE,EXPR" data-part-body="LENGTH,INSTALL-EVENT,GLOBAL-SET,WRLD1,GLOBAL-ARITHMETIC-ENABLED-STRUCTURE,GLOBAL-VAL,LOAD-THEORY-INTO-ENABLED-STRUCTURE,ENS,TRANSLATE-IN-THEORY-HINT,THEORY,ER-LET*,CTX,SOFT,ER,QUOTEP,NOT,IN-ARITHMETIC-THEORY,QUOTE,LIST,OR,EVENT-FORM,STATE,W,WRLD,LET,T,CAR,SYMBOLP,MSG,EXPR,ATOM,COND,WITH-CTX-SUMMARIZED,WHEN-LOGIC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IN-ARITHMETIC-THEORY-FN">in-arithmetic-theory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-in-arithmetic-theory-fn" data-sym="IN-ARITHMETIC-THEORY-FN" title="(defun in-arithmetic-theory-fn (expr state event-form)
  (when-logic &quot;IN-ARITHMETIC-THEORY&quot;
              (with-ctx-summarized
               (cond ((atom expr) (msg &quot;( IN-ARITHMETIC-THEORY ~x0)&quot; expr))
                     ((symbolp (car expr))
...">in-arithmetic-theory-fn</a>
  (expr state event-form)
  (<a class="sym-link system" href="axioms.html#def-when-logic" data-sym="WHEN-LOGIC">when-logic</a> <span class="string">"IN-ARITHMETIC-THEORY"</span>
    (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> expr) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( IN-ARITHMETIC-THEORY ~x0)"</span> expr))
        ((symbolp (car expr)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( IN-ARITHMETIC-THEORY (~x0 ...))"</span> (car expr)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"( IN-ARITHMETIC-THEORY (...))"</span>))
      (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-in-arithmetic-theory" data-sym="IN-ARITHMETIC-THEORY">in-arithmetic-theory</a> expr))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> expr)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Arithmetic theory expressions must be quoted constants.  ~
             See :DOC in-arithmetic-theory."</span>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> (<a class="sym-link system" href="history-management.html#def-translate-in-theory-hint" data-sym="TRANSLATE-IN-THEORY-HINT">translate-in-theory-hint</a> expr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ctx wrld state)) (ens (load-theory-into-enabled-structure expr
                    <a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a>
                    nil
                    (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'global-arithmetic-enabled-structure wrld)
                    nil
                    nil
                    wrld
                    ctx
                    state)))
              (let ((wrld1 (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'global-arithmetic-enabled-structure ens wrld)))
                (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a>)
                  event-form
                  '<a class="sym-link system" href="axioms.html#def-in-arithmetic-theory" data-sym="IN-ARITHMETIC-THEORY">in-arithmetic-theory</a>
                  <span class="number">0</span>
                  nil
                  nil
                  nil
                  nil
                  wrld1
                  state)))))))))</pre>
  </div>

<div class="form-block macro" id="def-disable" data-defines="DISABLE" data-references="KWOTE,CURRENT-THEORY,SET-DIFFERENCE-THEORIES,QUOTE,LIST,RST,&REST,DEFMACRO" data-used-by="DEFWARRANT-EVENTS,DEFABSSTOBJ-FN1,DEFSTOBJ-FN,IN-THEORY-FN,THEORY-FN-CALLP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DISABLE">disable</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-disable" data-sym="DISABLE" title="(defmacro disable (&amp;rest rst)
  (list &#39;set-difference-theories &#39;(current-theory :here) (kwote rst)))">disable</a>
  (&amp;rest rst)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-set-difference-theories" data-sym="SET-DIFFERENCE-THEORIES" title="(defmacro set-difference-theories (lst1 lst2)
  (cond
   ((equal lst1 &#39;(current-theory :here))
    (list &#39;set-difference-current-theory-fn lst2 (theory-fn-callp lst2)
          &#39;world))
...">set-difference-theories</a>
    '(<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> <span class="keyword">:here</span>)
    (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> rst)))</pre>
  </div>

<div class="form-block macro" id="def-enable" data-defines="ENABLE" data-references="KWOTE,CURRENT-THEORY,UNION-THEORIES,QUOTE,LIST,RST,&REST,DEFMACRO" data-used-by="INCLUDE-BOOK-DIR,IN-THEORY-FN,THEORY-FN-CALLP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENABLE">enable</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-enable" data-sym="ENABLE" title="(defmacro enable (&amp;rest rst)
  (list &#39;union-theories &#39;(current-theory :here) (kwote rst)))">enable</a>
  (&amp;rest rst)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-union-theories" data-sym="UNION-THEORIES" title="(defmacro union-theories (lst1 lst2)
  (cond
   ((equal lst1 &#39;(current-theory :here))
    (list &#39;union-current-theory-fn lst2 (theory-fn-callp lst2) &#39;world))
   ((equal lst2 &#39;(current-theory :here))
...">union-theories</a> '(<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> <span class="keyword">:here</span>) (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> rst)))</pre>
  </div>

<div class="form-block function" id="def-theory-invariant-table-guard" data-defines="THEORY-INVARIANT-TABLE-GUARD" data-references="STATE,ENS,QUOTE,ALL-VARS,SUBSETP-EQ,TERMP,TTERM,NULL,BOOK-NAME-P,OR,BOOK,LET,THEORY-INVARIANT-RECORD,ACCESS,BOOLEANP,WEAK-THEORY-INVARIANT-RECORD-P,AND,PLIST-WORLDP-WITH-FORMALS,XARGS,DECLARE,WORLD,VAL,DEFUN" data-part-name="THEORY-INVARIANT-TABLE-GUARD" data-part-args="WORLD,VAL" data-part-declare="WORLD,PLIST-WORLDP-WITH-FORMALS,XARGS,DECLARE" data-part-body="STATE,ENS,QUOTE,ALL-VARS,SUBSETP-EQ,WORLD,TERMP,TTERM,NULL,BOOK-NAME-P,OR,BOOK,LET,THEORY-INVARIANT-RECORD,ACCESS,BOOLEANP,VAL,WEAK-THEORY-INVARIANT-RECORD-P,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="THEORY-INVARIANT-TABLE-GUARD">theory-invariant-table-guard</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-theory-invariant-table-guard" data-sym="THEORY-INVARIANT-TABLE-GUARD" title="(defun theory-invariant-table-guard (val world)
  (declare (xargs :guard (plist-worldp-with-formals world)))
  (and (weak-theory-invariant-record-p val)
       (booleanp (access theory-invariant-record val :error))
       (let ((book (access theory-invariant-record val :book)))
...">theory-invariant-table-guard</a>
  (val world)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="basis-b.html#def-plist-worldp-with-formals" data-sym="PLIST-WORLDP-WITH-FORMALS">plist-worldp-with-formals</a> world)))
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (weak-theory-invariant-record-p val)
    (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> theory-invariant-record val <span class="keyword">:error</span>))
    (let ((book (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> theory-invariant-record val <span class="keyword">:book</span>)))
      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="basis-a.html#def-book-name-p" data-sym="BOOK-NAME-P">book-name-p</a> book) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> book)))
    (let ((tterm (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> theory-invariant-record val <span class="keyword">:tterm</span>)))
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (termp tterm world)
        (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> tterm) '(ens state))))))</pre>
  </div>

<div class="form-block other" id="form-82" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-set-table-guard" data-sym="SET-TABLE-GUARD">set-table-guard</a> theory-invariant-table
  (<a class="sym-link local-def" href="#def-theory-invariant-table-guard" data-sym="THEORY-INVARIANT-TABLE-GUARD" title="(defun theory-invariant-table-guard (val world)
  (declare (xargs :guard (plist-worldp-with-formals world)))
  (and (weak-theory-invariant-record-p val)
       (booleanp (access theory-invariant-record val :error))
       (let ((book (access theory-invariant-record val :book)))
...">theory-invariant-table-guard</a> val world)
  <span class="keyword">:topic</span> <a class="sym-link local-def" href="#def-theory-invariant" data-sym="THEORY-INVARIANT" title="(defmacro theory-invariant (&amp;whole event-form term &amp;key key (error &#39;t))
  (list &#39;theory-invariant-fn (list &#39;quote term) &#39;state (list &#39;quote key)
        (list &#39;quote error) (list &#39;quote event-form)))">theory-invariant</a>)</pre>
  </div>

<div class="form-block function" id="def-theory-invariant-fn" data-defines="THEORY-INVARIANT-FN" data-references="ER-SOFT,IGNORE,DECLARE,IN-THEORY,CURRENT-THEORY,IN-THEORY-FN,REVERT-WORLD,ERP,MV-LET,IN-LOCAL-FLG,F-GET-GLOBAL,WARNING$,ASSOC-EQUAL,PPROGN,T,VALUE,EQ,COND,ENS,ACTIVE-BOOK-NAME,THEORY-INVARIANT-RECORD,MAKE,TABLE-FN1,SUMMARY,WITH-OUTPUT!,VAL,LENGTH,1+,OR,THEORY-INVARIANT-TABLE,TABLE-ALIST,INV-TABLE,LET*,W,TRANSLATE,TTERM,ER-LET*,THEORY-INVARIANT,QUOTE,WITH-CTX-SUMMARIZED,WHEN-LOGIC,EVENT-FORM,ERROR,KEY,STATE,TERM,DEFUN" data-used-by="THEORY-INVARIANT" data-part-name="THEORY-INVARIANT-FN" data-part-args="EVENT-FORM,ERROR,KEY,STATE,TERM" data-part-body="ER-SOFT,IGNORE,DECLARE,IN-THEORY,CURRENT-THEORY,IN-THEORY-FN,REVERT-WORLD,ERP,MV-LET,IN-LOCAL-FLG,F-GET-GLOBAL,WARNING$,ASSOC-EQUAL,PPROGN,T,VALUE,EQ,COND,EVENT-FORM,ENS,ACTIVE-BOOK-NAME,ERROR,THEORY-INVARIANT-RECORD,MAKE,TABLE-FN1,SUMMARY,WITH-OUTPUT!,VAL,LENGTH,1+,OR,KEY,THEORY-INVARIANT-TABLE,TABLE-ALIST,INV-TABLE,LET*,W,STATE,TERM,TRANSLATE,TTERM,ER-LET*,THEORY-INVARIANT,QUOTE,WITH-CTX-SUMMARIZED,WHEN-LOGIC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="THEORY-INVARIANT-FN">theory-invariant-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-theory-invariant-fn" data-sym="THEORY-INVARIANT-FN" title="(defun theory-invariant-fn (term state key error event-form)
  (when-logic &quot;THEORY-INVARIANT&quot;
              (with-ctx-summarized &#39;theory-invariant
                                   (er-let*
                                    ((tterm
...">theory-invariant-fn</a>
  (term state key error event-form)
  (<a class="sym-link system" href="axioms.html#def-when-logic" data-sym="WHEN-LOGIC">when-logic</a> <span class="string">"THEORY-INVARIANT"</span>
    (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> '<a class="sym-link local-def" href="#def-theory-invariant" data-sym="THEORY-INVARIANT" title="(defmacro theory-invariant (&amp;whole event-form term &amp;key key (error &#39;t))
  (list &#39;theory-invariant-fn (list &#39;quote term) &#39;state (list &#39;quote key)
        (list &#39;quote error) (list &#39;quote event-form)))">theory-invariant</a>
      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tterm (translate term
             '(nil)
             nil
             '(state)
             '<a class="sym-link local-def" href="#def-theory-invariant" data-sym="THEORY-INVARIANT" title="(defmacro theory-invariant (&amp;whole event-form term &amp;key key (error &#39;t))
  (list &#39;theory-invariant-fn (list &#39;quote term) &#39;state (list &#39;quote key)
        (list &#39;quote error) (list &#39;quote event-form)))">theory-invariant</a>
             (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
             state)))
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((inv-table (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'theory-invariant-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (key (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> key (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> inv-table)))))
          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val (<a class="sym-link system" href="axioms.html#def-with-output_21" data-sym="WITH-OUTPUT!">with-output!</a> <span class="keyword">:off</span> summary
                 (<a class="sym-link system" href="history-management.html#def-table-fn1" data-sym="TABLE-FN1">table-fn1</a> 'theory-invariant-table
                   key
                   (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> theory-invariant-record
                     <span class="keyword">:tterm</span> tterm
                     <span class="keyword">:error</span> error
                     <span class="keyword">:untrans-term</span> term
                     <span class="keyword">:book</span> (<a class="sym-link system" href="history-management.html#def-active-book-name" data-sym="ACTIVE-BOOK-NAME">active-book-name</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state) state))
                   <span class="keyword">:put</span> nil
                   '<a class="sym-link local-def" href="#def-theory-invariant" data-sym="THEORY-INVARIANT" title="(defmacro theory-invariant (&amp;whole event-form term &amp;key key (error &#39;t))
  (list &#39;theory-invariant-fn (list &#39;quote term) &#39;state (list &#39;quote key)
        (list &#39;quote error) (list &#39;quote event-form)))">theory-invariant</a>
                   (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
                   (ens state)
                   state
                   event-form))))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val <span class="keyword">:redundant</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> key inv-table) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> '<a class="sym-link local-def" href="#def-theory-invariant" data-sym="THEORY-INVARIANT" title="(defmacro theory-invariant (&amp;whole event-form term &amp;key key (error &#39;t))
  (list &#39;theory-invariant-fn (list &#39;quote term) &#39;state (list &#39;quote key)
        (list &#39;quote error) (list &#39;quote event-form)))">theory-invariant</a>
                        <span class="string">"Theory"</span>
                        <span class="string">"An existing theory invariant, named ~x0, is ~
                               being overwritten by a new theory invariant ~
                               with that name.~@1"</span>
                        key
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state) <span class="string">"  Moreover, this override is being done ~
                                      LOCALly; see :DOC theory-invariant (in ~
                                      particular, the Local Redefinition ~
                                      Caveat there), especially if an error ~
                                      occurs."</span>)
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
                    (<a class="sym-link system" href="prove.html#def-revert-world" data-sym="REVERT-WORLD">revert-world</a> (<a class="sym-link system" href="axioms.html#def-with-output_21" data-sym="WITH-OUTPUT!">with-output!</a> <span class="keyword">:off</span> summary
                        (<a class="sym-link local-def" href="#def-in-theory-fn" data-sym="IN-THEORY-FN" title="(defun in-theory-fn (expr state event-form)
  (when-logic &quot;IN-THEORY&quot;
              (with-ctx-summarized
               (cond ((atom expr) (msg &quot;( IN-THEORY ~x0)&quot; expr))
                     ((symbolp (car expr))
...">in-theory-fn</a> '(<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> <span class="keyword">:here</span>)
                          state
                          '(<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link local-def" href="#def-current-theory" data-sym="CURRENT-THEORY" title="(defmacro current-theory (logical-name)
  (list &#39;current-theory-fn logical-name &#39;world))">current-theory</a> <span class="keyword">:here</span>)))))
                    (declare (ignore val))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="basis-a.html#def-er-soft" data-sym="ER-SOFT">er-soft</a> '<a class="sym-link local-def" href="#def-theory-invariant" data-sym="THEORY-INVARIANT" title="(defmacro theory-invariant (&amp;whole event-form term &amp;key key (error &#39;t))
  (list &#39;theory-invariant-fn (list &#39;quote term) &#39;state (list &#39;quote key)
        (list &#39;quote error) (list &#39;quote event-form)))">theory-invariant</a>
                          <span class="string">"Theory"</span>
                          <span class="string">"The specified theory invariant fails for the ~
                           current ACL2 world, and hence is rejected.  This ~
                           failure can probably be overcome by supplying an ~
                           appropriate in-theory event first."</span>))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> key)))))))))))))</pre>
  </div>

<div class="form-block macro" id="def-theory-invariant" data-defines="THEORY-INVARIANT" data-references="STATE,THEORY-INVARIANT-FN,LIST,T,QUOTE,ERROR,KEY,&KEY,TERM,EVENT-FORM,&WHOLE,DEFMACRO" data-used-by="THEORY-INVARIANT-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="THEORY-INVARIANT">theory-invariant</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-theory-invariant" data-sym="THEORY-INVARIANT" title="(defmacro theory-invariant (&amp;whole event-form term &amp;key key (error &#39;t))
  (list &#39;theory-invariant-fn (list &#39;quote term) &#39;state (list &#39;quote key)
        (list &#39;quote error) (list &#39;quote event-form)))">theory-invariant</a>
  (&amp;whole event-form term &amp;key key (error '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-theory-invariant-fn" data-sym="THEORY-INVARIANT-FN" title="(defun theory-invariant-fn (term state key error event-form)
  (when-logic &quot;THEORY-INVARIANT&quot;
              (with-ctx-summarized &#39;theory-invariant
                                   (er-let*
                                    ((tterm
...">theory-invariant-fn</a>
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote term)
    'state
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote key)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote error)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))</pre>
  </div>

<div class="form-block macro" id="def-incompatible" data-defines="INCOMPATIBLE" data-references="OR,HARD,ER,T,NOT,QUASIQUOTE,CADR,SYMBOLP,CDR,CONSP,AND,COND,ACTIVE-RUNEP,ACTIVE-OR-NON-RUNEP,QUOTE,IF,ACTIVE-FN,LET,STRICTP,&OPTIONAL,RUNE2,RUNE1,DEFMACRO" data-used-by="INCOMPATIBLE!" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCOMPATIBLE">incompatible</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-incompatible" data-sym="INCOMPATIBLE" title="(defmacro incompatible (rune1 rune2 &amp;optional strictp)
  (let ((active-fn
         (if strictp
             &#39;active-or-non-runep
             &#39;active-runep)))
...">incompatible</a>
  (rune1 rune2 &amp;optional strictp)
  (let ((active-fn (if strictp
         'active-or-non-runep
         'active-runep)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp rune1)
         (consp (cdr rune1))
         (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> rune1))
         (consp rune2)
         (consp (cdr rune2))
         (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> rune2))) `(<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (,ACTIVE-FN ',RUNE1) (,ACTIVE-FN ',RUNE2))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-incompatible" data-sym="INCOMPATIBLE" title="(defmacro incompatible (rune1 rune2 &amp;optional strictp)
  (let ((active-fn
         (if strictp
             &#39;active-or-non-runep
             &#39;active-runep)))
...">incompatible</a>
          <span class="string">"Each argument to ~x0 should have the shape of a rune, ~
                  (:KEYWORD BASE-SYMBOL), unlike ~x1."</span>
          '<a class="sym-link local-def" href="#def-incompatible" data-sym="INCOMPATIBLE" title="(defmacro incompatible (rune1 rune2 &amp;optional strictp)
  (let ((active-fn
         (if strictp
             &#39;active-or-non-runep
             &#39;active-runep)))
...">incompatible</a>
          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp rune1)
              (consp (cdr rune1))
              (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> rune1))
              rune2)
            rune1))))))</pre>
  </div>

<div class="form-block macro" id="def-incompatible_21" data-defines="INCOMPATIBLE!" data-references="T,INCOMPATIBLE,QUASIQUOTE,RUNE2,RUNE1,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCOMPATIBLE!">incompatible!</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-incompatible_21" data-sym="INCOMPATIBLE!" title="(defmacro incompatible! (rune1 rune2) `(incompatible ,rune1 ,rune2 t))">incompatible!</a>
  (rune1 rune2)
  `(<a class="sym-link local-def" href="#def-incompatible" data-sym="INCOMPATIBLE" title="(defmacro incompatible (rune1 rune2 &amp;optional strictp)
  (let ((active-fn
         (if strictp
             &#39;active-or-non-runep
             &#39;active-runep)))
...">incompatible</a> ,RUNE1 ,RUNE2 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block constant" id="def-_2Ageneric-bad-signature-string_2A" data-defines="*GENERIC-BAD-SIGNATURE-STRING*" data-references="DEFCONST" data-used-by="CHK-SIGNATURE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*GENERIC-BAD-SIGNATURE-STRING*">*generic-bad-signature-string*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ageneric-bad-signature-string_2A" data-sym="*GENERIC-BAD-SIGNATURE-STRING*" title="(defconst *generic-bad-signature-string*
          &quot;The object ~x0 is not a legal signature.  A basic signature is of one of ~
   the following two forms:  ((fn sym1 ... symn) =&gt; val) or (fn (var1 ... ~
   varn) val).  In either case, keywords may also be specified.  See :DOC ~
   signature.&quot;)">*generic-bad-signature-string*</a>
  <span class="string">"The object ~x0 is not a legal signature.  A basic signature is of one of ~
   the following two forms:  ((fn sym1 ... symn) =&gt; val) or (fn (var1 ... ~
   varn) val).  In either case, keywords may also be specified.  See :DOC ~
   signature."</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Asignature-keywords_2A" data-defines="*SIGNATURE-KEYWORDS*" data-references="QUOTE,DEFCONST" data-used-by="CHK-SIGNATURE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*SIGNATURE-KEYWORDS*">*signature-keywords*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Asignature-keywords_2A" data-sym="*SIGNATURE-KEYWORDS*" title="(defconst *signature-keywords*
          &#39;(:guard :stobjs :dfs :formals :global-stobjs :transparent))">*signature-keywords*</a>
  '(<span class="keyword">:guard</span> <span class="keyword">:stobjs</span> <span class="keyword">:dfs</span> <span class="keyword">:formals</span> <span class="keyword">:global-stobjs</span> <span class="keyword">:transparent</span>))</pre>
  </div>

<div class="form-block function" id="def-duplicate-key-in-keyword-value-listp" data-defines="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP" data-references="T,CDDR,CAR,ASSOC-KEYWORD,ENDP,COND,KEYWORD-VALUE-LISTP,XARGS,DECLARE,L,DEFUN" data-used-by="TRANSLATE-ABSSTOBJ-FIELD,CHK-SIGNATURE" data-part-name="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP" data-part-args="L" data-part-declare="L,KEYWORD-VALUE-LISTP,XARGS,DECLARE" data-part-body="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP,T,CDDR,CAR,ASSOC-KEYWORD,L,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP">duplicate-key-in-keyword-value-listp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-duplicate-key-in-keyword-value-listp" data-sym="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP" title="(defun duplicate-key-in-keyword-value-listp (l)
  (declare (xargs :guard (keyword-value-listp l)))
  (cond ((endp l) nil) ((assoc-keyword (car l) (cddr l)) (car l))
        (t (duplicate-key-in-keyword-value-listp (cddr l)))))">duplicate-key-in-keyword-value-listp</a>
  (l)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> l)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> l) nil)
    ((<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> (car l) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> l)) (car l))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-duplicate-key-in-keyword-value-listp" data-sym="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP" title="(defun duplicate-key-in-keyword-value-listp (l)
  (declare (xargs :guard (keyword-value-listp l)))
  (cond ((endp l) nil) ((assoc-keyword (car l) (cddr l)) (car l))
        (t (duplicate-key-in-keyword-value-listp (cddr l)))))">duplicate-key-in-keyword-value-listp</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> l)))))</pre>
  </div>

<div class="form-block function" id="def-formals-pretty-flags-mismatch-msg" data-defines="FORMALS-PRETTY-FLAGS-MISMATCH-MSG" data-references="CDR,-,POSN,LET,EQ,CAR,SYMBOL-NAME,EQUAL,NOT,CONS,LENGTH,MSG,T,AND,ENDP,ATOM,OR,COND,SYMBOL-LISTP,XARGS,DECLARE,PRETTY-FLAGS-TOP,FORMALS-TOP,FN,PRETTY-FLAGS,FORMALS,DEFUN" data-used-by="CHK-SIGNATURE" data-part-name="FORMALS-PRETTY-FLAGS-MISMATCH-MSG" data-part-args="PRETTY-FLAGS-TOP,FORMALS-TOP,FN,PRETTY-FLAGS,FORMALS" data-part-declare="PRETTY-FLAGS,SYMBOL-LISTP,XARGS,DECLARE" data-part-body="CDR,FORMALS-PRETTY-FLAGS-MISMATCH-MSG,-,POSN,LET,EQ,CAR,SYMBOL-NAME,EQUAL,NOT,FN,CONS,PRETTY-FLAGS-TOP,LENGTH,FORMALS-TOP,MSG,T,AND,PRETTY-FLAGS,ENDP,FORMALS,ATOM,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FORMALS-PRETTY-FLAGS-MISMATCH-MSG">formals-pretty-flags-mismatch-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-formals-pretty-flags-mismatch-msg" data-sym="FORMALS-PRETTY-FLAGS-MISMATCH-MSG" title="(defun formals-pretty-flags-mismatch-msg
       (formals pretty-flags fn formals-top pretty-flags-top)
  (declare (xargs :guard (symbol-listp pretty-flags)))
  (cond
   ((or (atom formals) (endp pretty-flags))
...">formals-pretty-flags-mismatch-msg</a>
  (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> pretty-flags fn formals-top pretty-flags-top)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> pretty-flags)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> pretty-flags)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> pretty-flags)) nil)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"the specified list of :FORMALS, ~x0, is of length ~x1, ~
                      which does not match the arity of ~x2 specified by ~x3"</span>
            formals-top
            (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> formals-top)
            (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> pretty-flags-top)
            (cons fn pretty-flags-top)))))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (symbol-name (car pretty-flags)) <span class="string">"*"</span>))
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pretty-flags) (car <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)))) (let ((posn (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> formals-top) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>))))
        (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"the specified list of :FORMALS, ~x0, has stobj ~x1 at ~
                 (zero-based) position ~x2, but the argument specified by ~x3 ~
                 at that position is a different stobj, ~x4"</span>
          formals-top
          (car <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)
          posn
          (cons fn pretty-flags-top)
          (car pretty-flags))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-formals-pretty-flags-mismatch-msg" data-sym="FORMALS-PRETTY-FLAGS-MISMATCH-MSG" title="(defun formals-pretty-flags-mismatch-msg
       (formals pretty-flags fn formals-top pretty-flags-top)
  (declare (xargs :guard (symbol-listp pretty-flags)))
  (cond
   ((or (atom formals) (endp pretty-flags))
...">formals-pretty-flags-mismatch-msg</a> (cdr <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)
        (cdr pretty-flags)
        fn
        formals-top
        pretty-flags-top))))</pre>
  </div>

<div class="form-block function" id="def-chk-global-stobjs-value" data-defines="CHK-GLOBAL-STOBJS-VALUE" data-references="APPEND,WITH-GLOBAL-STOBJ,SET-DIFFERENCE-EQ,SUBSETP-EQ,IGNORE,DECLARE,COLLECT-GLOBAL-STOBJS,FNS-SEEN,WRITES,READS,MV-LET,TRANSLATE,TGUARD,ER-LET*,MSG,CHK-ALL-STOBJ-NAMES,ER-PROGN,T,TRUE-LISTP,EQ,MEMBER-EQ,QUOTE,EQUAL,INTERSECTION-EQ,DUPLICATES,OR,*SEE-DOC-WITH-GLOBAL-STOBJ*,SOFT,ER,CDR,CAR,SYMBOL-LISTP,CONSP,AND,NOT,VALUE,NULL,COND,STATE,WRLD,CTX,VAL,FORMALS,FN,GUARD,X,DEFUN" data-used-by="CHK-SIGNATURE" data-part-name="CHK-GLOBAL-STOBJS-VALUE" data-part-args="STATE,WRLD,CTX,VAL,FORMALS,FN,GUARD,X" data-part-body="APPEND,WITH-GLOBAL-STOBJ,SET-DIFFERENCE-EQ,SUBSETP-EQ,IGNORE,DECLARE,COLLECT-GLOBAL-STOBJS,FNS-SEEN,WRITES,READS,MV-LET,TRANSLATE,GUARD,TGUARD,ER-LET*,WRLD,MSG,CHK-ALL-STOBJ-NAMES,ER-PROGN,T,TRUE-LISTP,VAL,EQ,FORMALS,STATE,MEMBER-EQ,QUOTE,EQUAL,INTERSECTION-EQ,DUPLICATES,OR,*SEE-DOC-WITH-GLOBAL-STOBJ*,FN,CTX,SOFT,ER,CDR,CAR,SYMBOL-LISTP,CONSP,AND,NOT,VALUE,X,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-GLOBAL-STOBJS-VALUE">chk-global-stobjs-value</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-global-stobjs-value" data-sym="CHK-GLOBAL-STOBJS-VALUE" title="(defun chk-global-stobjs-value (x guard fn formals val ctx wrld state)
  (cond ((null x) (value nil))
        ((not (and (consp x) (symbol-listp (car x)) (symbol-listp (cdr x))))
         (er soft ctx
             &quot;Illegal signature for ~x0: the value of keyword :GLOBAL-STOBJS ~
...">chk-global-stobjs-value</a>
  (x <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> val ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp x)
         (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (car x))
         (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (cdr x)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Illegal signature for ~x0: the value of keyword :GLOBAL-STOBJS ~
              must be a cons pair of the form (x . y) where x and y are lists ~
              of symbols (in fact, stobj names).  The :GLOBAL-STOBJS value ~
              ~x1 is thus illegal.~@2"</span>
        fn
        x
        *see-doc-with-global-stobj*))
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> (car x))
       (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> (cdr x))
       (<a class="sym-link system" href="axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (car x) (cdr x))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Illegal signature for ~x0: the value of keyword :GLOBAL-STOBJS ~
              contains the name~#1~[~/s~] ~&amp;1 more than once, but duplicates ~
              are not allowed.~@2"</span>
        fn
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> (car x))
          (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> (cdr x))
          (<a class="sym-link system" href="axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (car x) (cdr x)))
        *see-doc-with-global-stobj*))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal x '(nil)))
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"In the signature for ~x0, it is illegal to specify any stobjs ~
              with the :GLOBAL-STOBJS keyword because ~x1 is not among the ~
              formals for ~x0.~@2"</span>
        fn
        'state
        *see-doc-with-global-stobj*))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (cdr x)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val 'state))
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state val)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"In the signature for ~x0, it is illegal to specify any stobjs ~
              in the CDR of the value of the :GLOBAL-STOBJS keyword (that is, ~
              stobjs that are viewed as updated by WITH-GLOBAL-STOBJ forms) ~
              because ~x1 is not returned by ~x0.~@2"</span>
        fn
        'state
        *see-doc-with-global-stobj*))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="defuns.html#def-chk-all-stobj-names" data-sym="CHK-ALL-STOBJ-NAMES">chk-all-stobj-names</a> (car x)
          <span class="keyword">:global-stobjs</span> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">":global-stobjs (~x0 . _)"</span> (car x))
          ctx
          wrld
          state)
        (<a class="sym-link system" href="defuns.html#def-chk-all-stobj-names" data-sym="CHK-ALL-STOBJ-NAMES">chk-all-stobj-names</a> (cdr x)
          <span class="keyword">:global-stobjs</span> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">":global-stobjs (_ . ~x0)"</span> (cdr x))
          ctx
          wrld
          state)
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tguard (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> (translate <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil ctx wrld state))
               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> tguard) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (reads writes fns-seen)
                (collect-global-stobjs tguard wrld nil nil nil)
                (declare (ignore fns-seen))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> writes (cdr x))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"The stobj~#0~[~x0 is~/s ~&amp;0 are each~] bound ~
                                by an updating call of ~x1 in the :GUARD of ~
                                the signature for ~x2 but not among the ~
                                written stobjs in the :GLOBAL-STOBJS of that ~
                                signature.~@3"</span>
                      (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> writes (cdr x))
                      'with-global-stobj
                      fn
                      *see-doc-with-global-stobj*))
                  ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> reads (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (car x) (cdr x)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"The stobj~#0~[~x0 is~/s ~&amp;0 are each~] bound ~
                                by a call of ~x1 in the :GUARD of the ~
                                signature for ~x2 but not among the stobjs in ~
                                the :GLOBAL-STOBJS of that signature.~@3"</span>
                      (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> reads (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (car x) (cdr x)))
                      'with-global-stobj
                      fn
                      *see-doc-with-global-stobj*))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-signature" data-defines="CHK-SIGNATURE" data-references="FUNCTION,LIST*,CHK-JUST-NEW-NAME,WRLD1,ER-LET*,DUPLICATES,NO-DUPLICATESP,COLLECT-NON-NIL-DF,SUBSETP,STOBJS-OUT,COMPUTE-STOBJ-FLAGS,STOBJS-IN,SYMS,CHK-GLOBAL-STOBJS-VALUE,VALUE,LENGTH,>,CHK-ALL-STOBJ-NAMES,CHK-ARGLIST,CONSTRAINED-FUNCTION,CHK-ALL-BUT-NEW-NAME,ER-PROGN,*SIGNATURE-KEYWORDS*,EVENS,SOFT,ER,&,STOBJS0,DFS-TAIL,STOBJS-TAIL,TRUE-LISTP,FORMALS-PRETTY-FLAGS-MISMATCH-MSG,COLLECT-BY-POSITION,REMOVE-KEYWORD,GEN-FORMALS-FROM-PRETTY-FLAGS,FORMALS-TAIL,LET*,CADR,BOOLEANP,ASSOC-KEYWORD,DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP,REASON-FOR-NON-KEYWORD-VALUE-LISTP,KEYWORD-VALUE-LISTP,CONS,SET-DIFFERENCE-EQ,LIST,IF,SUBSETP-EQ,T,MEMBER-EQ,CDR,QUOTE,CAR,EQ,CONSP,OR,COLLECT-NON-*-DF,NO-DUPLICATESP-EQ,SYMBOL-LISTP,*GENERIC-BAD-SIGNATURE-STRING*,MV,SYMBOL-NAME,EQUAL,SYMBOLP,AND,NOT,COND,ARROW,PRETTY-FLAGS1,CASE-MATCH,KWD-VALUE-LIST,DFS,STOBJS,VAL,FORMALS,FN,MSG,MV-LET,BAD-KWD-VALUE-LIST-STRING,LET,STATE,WRLD,CTX,X,DEFUN" data-used-by="CHK-SIGNATURES-REC" data-part-name="CHK-SIGNATURE" data-part-args="STATE,WRLD,CTX,X" data-part-body="FUNCTION,LIST*,CHK-JUST-NEW-NAME,WRLD1,ER-LET*,DUPLICATES,NO-DUPLICATESP,COLLECT-NON-NIL-DF,SUBSETP,STOBJS-OUT,COMPUTE-STOBJ-FLAGS,STOBJS-IN,SYMS,CHK-GLOBAL-STOBJS-VALUE,VALUE,LENGTH,>,CHK-ALL-STOBJ-NAMES,CHK-ARGLIST,WRLD,CONSTRAINED-FUNCTION,CHK-ALL-BUT-NEW-NAME,ER-PROGN,*SIGNATURE-KEYWORDS*,EVENS,CTX,SOFT,ER,&,STOBJS0,STATE,DFS-TAIL,STOBJS-TAIL,TRUE-LISTP,FORMALS-PRETTY-FLAGS-MISMATCH-MSG,COLLECT-BY-POSITION,REMOVE-KEYWORD,GEN-FORMALS-FROM-PRETTY-FLAGS,FORMALS-TAIL,LET*,CADR,BOOLEANP,ASSOC-KEYWORD,DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP,REASON-FOR-NON-KEYWORD-VALUE-LISTP,KEYWORD-VALUE-LISTP,CONS,SET-DIFFERENCE-EQ,LIST,IF,SUBSETP-EQ,T,MEMBER-EQ,CDR,QUOTE,CAR,EQ,CONSP,OR,COLLECT-NON-*-DF,NO-DUPLICATESP-EQ,SYMBOL-LISTP,*GENERIC-BAD-SIGNATURE-STRING*,MV,SYMBOL-NAME,EQUAL,SYMBOLP,AND,NOT,COND,ARROW,PRETTY-FLAGS1,X,CASE-MATCH,KWD-VALUE-LIST,DFS,STOBJS,VAL,FORMALS,FN,MSG,MV-LET,BAD-KWD-VALUE-LIST-STRING,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-SIGNATURE">chk-signature</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-signature" data-sym="CHK-SIGNATURE" title="(defun chk-signature (x ctx wrld state)
  (let ((bad-kwd-value-list-string
         &quot;The object ~x0 is not a legal signature.  It appears to specify ~x1 ~
          as the keyword alist, which however is not syntactically a ~
          keyword-value-listp because ~@2.&quot;))
...">chk-signature</a>
  (x ctx wrld state)
  (let ((bad-kwd-value-list-string <span class="string">"The object ~x0 is not a legal signature.  It appears to specify ~x1 ~
          as the keyword alist, which however is not syntactically a ~
          keyword-value-listp because ~@2."</span>))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> val stobjs dfs kwd-value-list)
      (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> x
        (((fn . pretty-flags1) arrow val . kwd-value-list) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp arrow) (equal (symbol-name arrow) <span class="string">"=&gt;"</span>))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <a class="sym-link local-def" href="#def-_2Ageneric-bad-signature-string_2A" data-sym="*GENERIC-BAD-SIGNATURE-STRING*" title="(defconst *generic-bad-signature-string*
          &quot;The object ~x0 is not a legal signature.  A basic signature is of one of ~
   the following two forms:  ((fn sym1 ... symn) =&gt; val) or (fn (var1 ... ~
   varn) val).  In either case, keywords may also be specified.  See :DOC ~
   signature.&quot;)">*generic-bad-signature-string*</a> x)
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> pretty-flags1)
                 (<a class="sym-link system" href="axioms.html#def-no-duplicatesp-eq" data-sym="NO-DUPLICATESP-EQ">no-duplicatesp-eq</a> (<a class="sym-link system" href="basis-b.html#def-collect-non-_2A-df" data-sym="COLLECT-NON-*-DF">collect-non-*-df</a> pretty-flags1)))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature because ~x1 is not ~
                applied to a true-list of distinct symbols but to ~x2 instead."</span>
                  x
                  fn
                  pretty-flags1)
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (symbolp val)
                 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp val)
                   (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car val) '<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a>)
                   (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (cdr val))
                   (<a class="sym-link system" href="axioms.html#def-no-duplicatesp-eq" data-sym="NO-DUPLICATESP-EQ">no-duplicatesp-eq</a> (<a class="sym-link system" href="basis-b.html#def-collect-non-_2A-df" data-sym="COLLECT-NON-*-DF">collect-non-*-df</a> (cdr val)))))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature because the result, ~
                ... =&gt; ~x1, is not a symbol or an MV form containing distinct ~
                symbols."</span>
                  x
                  val)
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> pretty-flags1)
               (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> nil pretty-flags1)
               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val nil)
               (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp val)
                 (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cdr val)) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> nil (cdr val))))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature because it mentions T ~
                or NIL in places that must each be filled by an asterisk (*), ~
                :DF, or a single-threaded object name."</span>
                  x)
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> (<a class="sym-link system" href="basis-b.html#def-collect-non-_2A-df" data-sym="COLLECT-NON-*-DF">collect-non-*-df</a> (if (consp val)
                     (cdr val)
                     (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> val)))
                 pretty-flags1)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature because the result, ~
                ~x1, refers to one or more single-threaded objects, ~&amp;2, not ~
                displayed among the inputs in ~x3."</span>
                  x
                  val
                  (<a class="sym-link system" href="basis-b.html#def-collect-non-_2A-df" data-sym="COLLECT-NON-*-DF">collect-non-*-df</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (if (consp val)
                        (cdr val)
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> val))
                      pretty-flags1))
                  (cons fn pretty-flags1))
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> kwd-value-list)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> bad-kwd-value-list-string
                  x
                  kwd-value-list
                  (<a class="sym-link system" href="defthm.html#def-reason-for-non-keyword-value-listp" data-sym="REASON-FOR-NON-KEYWORD-VALUE-LISTP">reason-for-non-keyword-value-listp</a> kwd-value-list))
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link local-def" href="#def-duplicate-key-in-keyword-value-listp" data-sym="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP" title="(defun duplicate-key-in-keyword-value-listp (l)
  (declare (xargs :guard (keyword-value-listp l)))
  (cond ((endp l) nil) ((assoc-keyword (car l) (cddr l)) (car l))
        (t (duplicate-key-in-keyword-value-listp (cddr l)))))">duplicate-key-in-keyword-value-listp</a> kwd-value-list) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature because the ~
                    keyword ~x1 appears more than once."</span>
                  x
                  (<a class="sym-link local-def" href="#def-duplicate-key-in-keyword-value-listp" data-sym="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP" title="(defun duplicate-key-in-keyword-value-listp (l)
  (declare (xargs :guard (keyword-value-listp l)))
  (cond ((endp l) nil) ((assoc-keyword (car l) (cddr l)) (car l))
        (t (duplicate-key-in-keyword-value-listp (cddr l)))))">duplicate-key-in-keyword-value-listp</a> kwd-value-list))
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:stobjs</span> kwd-value-list)
               (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:dfs</span> kwd-value-list)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature.  The ~
                    ~#1~[:STOBJS~/:DFS~] keyword is only legal for the older ~
                    style of signature (but may not be necessary for the ~
                    newer style that you are using); see :DOC signature."</span>
                  x
                  (if (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:stobjs</span> kwd-value-list)
                    <span class="number">0</span>
                    <span class="number">1</span>))
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:guard</span> kwd-value-list)
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:formals</span> kwd-value-list))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature.  The :GUARD ~
                    keyword is only legal for the newer style of signature ~
                    when the :FORMALS keyword is also supplied; see :DOC ~
                    signature."</span>
                  x)
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:transparent</span> kwd-value-list))))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature.  The value of ~
                    the ~x1 keyword must be Boolean; see :DOC signature."</span>
                  x
                  <span class="keyword">:transparent</span>)
                nil
                nil
                nil
                nil
                nil
                nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((formals-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:formals</span> kwd-value-list)) (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (if formals-tail
                      (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> formals-tail)
                      (<a class="sym-link system" href="basis-b.html#def-gen-formals-from-pretty-flags" data-sym="GEN-FORMALS-FROM-PRETTY-FLAGS">gen-formals-from-pretty-flags</a> pretty-flags1)))
                  (kwd-value-list (if formals-tail
                      (remove-keyword <span class="keyword">:formals</span> kwd-value-list)
                      kwd-value-list))
                  (stobjs (<a class="sym-link system" href="basis-b.html#def-collect-non-_2A-df" data-sym="COLLECT-NON-*-DF">collect-non-*-df</a> pretty-flags1))
                  (dfs (<a class="sym-link system" href="basis-b.html#def-collect-by-position" data-sym="COLLECT-BY-POSITION">collect-by-position</a> '(<span class="keyword">:df</span>) pretty-flags1 <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>))
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> formals-tail
                      (<a class="sym-link local-def" href="#def-formals-pretty-flags-mismatch-msg" data-sym="FORMALS-PRETTY-FLAGS-MISMATCH-MSG" title="(defun formals-pretty-flags-mismatch-msg
       (formals pretty-flags fn formals-top pretty-flags-top)
  (declare (xargs :guard (symbol-listp pretty-flags)))
  (cond
   ((or (atom formals) (endp pretty-flags))
...">formals-pretty-flags-mismatch-msg</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                        pretty-flags1
                        fn
                        <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                        pretty-flags1))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature ~
                                 because ~@1.  See :DOC signature."</span>
                        x
                        <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)
                      nil
                      nil
                      nil
                      nil
                      nil
                      nil))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> val stobjs dfs kwd-value-list)))))))
        ((fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> val . kwd-value-list) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature because its second ~
                element, representing the formals, is not a true-list."</span>
                  x)
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> kwd-value-list)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> bad-kwd-value-list-string
                  x
                  kwd-value-list
                  (<a class="sym-link system" href="defthm.html#def-reason-for-non-keyword-value-listp" data-sym="REASON-FOR-NON-KEYWORD-VALUE-LISTP">reason-for-non-keyword-value-listp</a> kwd-value-list))
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link local-def" href="#def-duplicate-key-in-keyword-value-listp" data-sym="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP" title="(defun duplicate-key-in-keyword-value-listp (l)
  (declare (xargs :guard (keyword-value-listp l)))
  (cond ((endp l) nil) ((assoc-keyword (car l) (cddr l)) (car l))
        (t (duplicate-key-in-keyword-value-listp (cddr l)))))">duplicate-key-in-keyword-value-listp</a> kwd-value-list) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature because the keyword ~
                    ~x1 appears more than once."</span>
                  x
                  (<a class="sym-link local-def" href="#def-duplicate-key-in-keyword-value-listp" data-sym="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP" title="(defun duplicate-key-in-keyword-value-listp (l)
  (declare (xargs :guard (keyword-value-listp l)))
  (cond ((endp l) nil) ((assoc-keyword (car l) (cddr l)) (car l))
        (t (duplicate-key-in-keyword-value-listp (cddr l)))))">duplicate-key-in-keyword-value-listp</a> kwd-value-list))
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:formals</span> kwd-value-list) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature.  The :FORMALS ~
                    keyword is only legal for the newer style of signature; ~
                    see :DOC signature."</span>
                  x)
                nil
                nil
                nil
                nil
                nil
                nil))
            ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:transparent</span> kwd-value-list))))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature.  The value of ~
                    the ~x1 keyword must be Boolean; see :DOC signature."</span>
                  x
                  <span class="keyword">:transparent</span>)
                nil
                nil
                nil
                nil
                nil
                nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((stobjs-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:stobjs</span> kwd-value-list)) (dfs-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:dfs</span> kwd-value-list))
                  (dfs (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> dfs-tail))
                  (kwd-value-list (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> stobjs-tail dfs-tail)
                      (remove-keyword <span class="keyword">:stobjs</span> (remove-keyword <span class="keyword">:dfs</span> kwd-value-list))
                      kwd-value-list)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> stobjs-tail) (let ((stobjs (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)
                           '(state)
                           nil)))
                      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> val stobjs dfs kwd-value-list)))
                  ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> stobjs-tail))
                     (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> stobjs-tail))) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((stobjs0 (if (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> stobjs-tail))
                           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> stobjs-tail))
                           (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> stobjs-tail))) (stobjs (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)
                              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state stobjs0)))
                            (cons 'state stobjs0)
                            stobjs0)))
                      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> val stobjs dfs kwd-value-list)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The object ~x0 is not a legal signature because ~
                           the proffered stobj names are ill-formed.  The ~
                           stobj names are expected to be either a single ~
                           symbol or a true list of symbols."</span>
                        x)
                      nil
                      nil
                      nil
                      nil
                      nil
                      nil)))))))
        (&amp; (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <a class="sym-link local-def" href="#def-_2Ageneric-bad-signature-string_2A" data-sym="*GENERIC-BAD-SIGNATURE-STRING*" title="(defconst *generic-bad-signature-string*
          &quot;The object ~x0 is not a legal signature.  A basic signature is of one of ~
   the following two forms:  ((fn sym1 ... symn) =&gt; val) or (fn (var1 ... ~
   varn) val).  In either case, keywords may also be specified.  See :DOC ~
   signature.&quot;)">*generic-bad-signature-string*</a> x)
            nil
            nil
            nil
            nil
            nil
            nil)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> (<a class="sym-link system" href="axioms.html#def-evens" data-sym="EVENS">evens</a> kwd-value-list) <a class="sym-link local-def" href="#def-_2Asignature-keywords_2A" data-sym="*SIGNATURE-KEYWORDS*" title="(defconst *signature-keywords*
          &#39;(:guard :stobjs :dfs :formals :global-stobjs :transparent))">*signature-keywords*</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The only legal signature keywords are ~&amp;0.  The proposed ~
            signature ~x1 is thus illegal."</span>
            <a class="sym-link local-def" href="#def-_2Asignature-keywords_2A" data-sym="*SIGNATURE-KEYWORDS*" title="(defconst *signature-keywords*
          &#39;(:guard :stobjs :dfs :formals :global-stobjs :transparent))">*signature-keywords*</a>
            x))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name fn
              ctx
              'constrained-function
              wrld
              state)
            (chk-arglist <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state stobjs))
              ctx
              wrld
              state)
            (<a class="sym-link system" href="defuns.html#def-chk-all-stobj-names" data-sym="CHK-ALL-STOBJ-NAMES">chk-all-stobj-names</a> stobjs
              <span class="keyword">:stobjs?</span> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0"</span> x)
              ctx
              wrld
              state)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (symbolp val)
                   (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp val)
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car val) '<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a>)
                     (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (cdr val))
                     (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> val) <span class="number">2</span>)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"The purported signature ~x0 is not a legal signature ~
                    because ~x1 is not a legal output description.  Such a ~
                    description should either be a symbol or of the form (mv ~
                    sym1 ... symn), where n&gt;=2."</span>
                  x
                  val))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
            (<a class="sym-link local-def" href="#def-chk-global-stobjs-value" data-sym="CHK-GLOBAL-STOBJS-VALUE" title="(defun chk-global-stobjs-value (x guard fn formals val ctx wrld state)
  (cond ((null x) (value nil))
        ((not (and (consp x) (symbol-listp (car x)) (symbol-listp (cdr x))))
         (er soft ctx
             &quot;Illegal signature for ~x0: the value of keyword :GLOBAL-STOBJS ~
...">chk-global-stobjs-value</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:global-stobjs</span> kwd-value-list))
              (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:guard</span> kwd-value-list))
              fn
              <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
              val
              ctx
              wrld
              state)
            (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((syms (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp val) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> val)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cdr val)))) (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (compute-stobj-flags <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> stobjs dfs wrld))
                (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (compute-stobj-flags syms stobjs '(<span class="keyword">:df</span>) wrld)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (<a class="sym-link system" href="basis-b.html#def-collect-non-nil-df" data-sym="COLLECT-NON-NIL-DF">collect-non-nil-df</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"It is impossible to return single-threaded objects (such as ~
                 ~&amp;0) that are not among the formals!  Thus, the input ~
                 signature ~x1 and the output signature ~x2 are incompatible."</span>
                    (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="basis-b.html#def-collect-non-nil-df" data-sym="COLLECT-NON-NIL-DF">collect-non-nil-df</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
                      <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)
                    <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                    val))
                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (<a class="sym-link system" href="basis-b.html#def-collect-non-nil-df" data-sym="COLLECT-NON-NIL-DF">collect-non-nil-df</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"It is illegal to return the same single-threaded object in ~
                 more than one position of the output signature.  Thus, ~x0 ~
                 is illegal because ~&amp;1 ~#1~[is~/are~] duplicated."</span>
                    val
                    (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> (<a class="sym-link system" href="basis-b.html#def-collect-non-nil-df" data-sym="COLLECT-NON-NIL-DF">collect-non-nil-df</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld1 (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> fn
                         nil
                         (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> 'function <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
                         nil
                         ctx
                         wrld
                         state)))
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
                        kwd-value-list
                        wrld1))))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-signatures-rec" data-defines="CHK-SIGNATURES-REC" data-references="CONS,ASSOC-EQ,WRLD1,KWD-VALUE-LIST-LST,INSIG-LST,KWD-VALUE-LIST,INSIG,LET,CDDR,TRIP2,CAR,CHK-SIGNATURE,TRIP1,ER-LET*,LIST,SYMBOL-NAME,EQUAL,CADR,SYMBOLP,CDR,CONSP,AND,SOFT,ER,T,LIST*,VALUE,NULL,ATOM,COND,STATE,WRLD,CTX,SIGNATURES,DEFUN" data-used-by="CHK-SIGNATURES" data-part-name="CHK-SIGNATURES-REC" data-part-args="STATE,WRLD,CTX,SIGNATURES" data-part-body="CONS,ASSOC-EQ,WRLD1,KWD-VALUE-LIST-LST,INSIG-LST,KWD-VALUE-LIST,INSIG,LET,CDDR,CHK-SIGNATURES-REC,TRIP2,STATE,CAR,CHK-SIGNATURE,TRIP1,ER-LET*,LIST,SYMBOL-NAME,EQUAL,CADR,SYMBOLP,CDR,CONSP,AND,CTX,SOFT,ER,T,WRLD,LIST*,VALUE,NULL,SIGNATURES,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-SIGNATURES-REC">chk-signatures-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-signatures-rec" data-sym="CHK-SIGNATURES-REC" title="(defun chk-signatures-rec (signatures ctx wrld state)
  (cond
   ((atom signatures)
    (cond ((null signatures) (value (list* nil nil wrld)))
          (t
...">chk-signatures-rec</a>
  (signatures ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> signatures) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> signatures) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> nil nil wrld)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The list of the signatures of the functions ~
                       constrained by an encapsulation is supposed to ~
                       be a true list, but yours ends in ~x0.  See ~
                       :DOC encapsulate."</span>
            signatures))))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr signatures))
       (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> signatures))
       (equal (symbol-name (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> signatures)) <span class="string">"=&gt;"</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The signatures argument of ENCAPSULATE is supposed to ~
              be a list of signatures.  But you have provided ~x0, ~
              which might be a single signature.  Try writing ~x1."</span>
        signatures
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> signatures)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((trip1 (<a class="sym-link local-def" href="#def-chk-signature" data-sym="CHK-SIGNATURE" title="(defun chk-signature (x ctx wrld state)
  (let ((bad-kwd-value-list-string
         &quot;The object ~x0 is not a legal signature.  It appears to specify ~x1 ~
          as the keyword alist, which however is not syntactically a ~
          keyword-value-listp because ~@2.&quot;))
...">chk-signature</a> (car signatures) ctx wrld state)) (trip2 (<a class="sym-link local-def" href="#def-chk-signatures-rec" data-sym="CHK-SIGNATURES-REC" title="(defun chk-signatures-rec (signatures ctx wrld state)
  (cond
   ((atom signatures)
    (cond ((null signatures) (value (list* nil nil wrld)))
          (t
...">chk-signatures-rec</a> (cdr signatures) ctx (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip1) state)))
        (let ((insig (car trip1)) (kwd-value-list (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip1))
            (insig-lst (car trip2))
            (kwd-value-list-lst (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip2))
            (wrld1 (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip2)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car insig) insig-lst) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The name ~x0 is mentioned twice in the ~
                                  signatures of this encapsulation.  See :DOC ~
                                  encapsulate."</span>
                (car insig)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (cons insig insig-lst)
                  (cons kwd-value-list kwd-value-list-lst)
                  wrld1)))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-transparent" data-defines="CHK-TRANSPARENT" data-references="CAAR,IF,SOFT,ER,T,CDR,CAR,ASSOC-KEYWORD,CADR,EQ,VALUE,ENDP,COND,STATE,CTX,KWD-VALUE-LIST-LST,INSIG-LST,VAL,NAME,DEFUN" data-used-by="CHK-SIGNATURES" data-part-name="CHK-TRANSPARENT" data-part-args="STATE,CTX,KWD-VALUE-LIST-LST,INSIG-LST,VAL,NAME" data-part-body="CAAR,IF,SOFT,ER,T,STATE,CTX,INSIG-LST,CDR,NAME,CHK-TRANSPARENT,CAR,ASSOC-KEYWORD,CADR,VAL,EQ,VALUE,KWD-VALUE-LIST-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-TRANSPARENT">chk-transparent</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-transparent" data-sym="CHK-TRANSPARENT" title="(defun chk-transparent (name val insig-lst kwd-value-list-lst ctx state)
  (cond ((endp kwd-value-list-lst) (value nil))
        ((eq val (cadr (assoc-keyword :transparent (car kwd-value-list-lst))))
         (chk-transparent name val (cdr insig-lst) (cdr kwd-value-list-lst) ctx
                          state))
...">chk-transparent</a>
  (name val insig-lst kwd-value-list-lst ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> kwd-value-list-lst) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val
       (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:transparent</span> (car kwd-value-list-lst)))) (<a class="sym-link local-def" href="#def-chk-transparent" data-sym="CHK-TRANSPARENT" title="(defun chk-transparent (name val insig-lst kwd-value-list-lst ctx state)
  (cond ((endp kwd-value-list-lst) (value nil))
        ((eq val (cadr (assoc-keyword :transparent (car kwd-value-list-lst))))
         (chk-transparent name val (cdr insig-lst) (cdr kwd-value-list-lst) ctx
                          state))
...">chk-transparent</a> name
        val
        (cdr insig-lst)
        (cdr kwd-value-list-lst)
        ctx
        state))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The signature for ~x0 specifies :transparent t, but the ~
                signature for ~x1 does not.  This is illegal because if any ~
                signature in an encapsulate event specifies :transparent t, ~
                then all must do so.  See :DOC encapsulate."</span>
        (if val
          name
          (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> insig-lst))
        (if val
          (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> insig-lst)
          name)))))</pre>
  </div>

<div class="form-block function" id="def-chk-signatures" data-defines="CHK-SIGNATURES" data-references="ASSOC-KEYWORD,CAAR,CHK-TRANSPARENT,T,CDR,NULL,OR,COND,ER-PROGN,CADR,KWD-VALUE-LIST-LST,CAR,VALUE,INSIG-LST,CHK-SIGNATURES-REC,TRIP,ER-LET*,STATE,WRLD,CTX,SIGNATURES,DEFUN" data-used-by="ENCAPSULATE-FN,CHK-ACCEPTABLE-ENCAPSULATE1" data-part-name="CHK-SIGNATURES" data-part-args="STATE,WRLD,CTX,SIGNATURES" data-part-body="ASSOC-KEYWORD,CAAR,CHK-TRANSPARENT,T,CDR,NULL,OR,COND,ER-PROGN,CADR,KWD-VALUE-LIST-LST,CAR,VALUE,INSIG-LST,STATE,WRLD,CTX,SIGNATURES,CHK-SIGNATURES-REC,TRIP,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-SIGNATURES">chk-signatures</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-signatures" data-sym="CHK-SIGNATURES" title="(defun chk-signatures (signatures ctx wrld state)
  (er-let*
   ((trip (chk-signatures-rec signatures ctx wrld state))
    (insig-lst (value (car trip))) (kwd-value-list-lst (value (cadr trip))))
   (er-progn
...">chk-signatures</a>
  (signatures ctx wrld state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((trip (<a class="sym-link local-def" href="#def-chk-signatures-rec" data-sym="CHK-SIGNATURES-REC" title="(defun chk-signatures-rec (signatures ctx wrld state)
  (cond
   ((atom signatures)
    (cond ((null signatures) (value (list* nil nil wrld)))
          (t
...">chk-signatures-rec</a> signatures ctx wrld state)) (insig-lst (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (car trip)))
      (kwd-value-list-lst (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip))))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> kwd-value-list-lst)
           (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr kwd-value-list-lst))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-transparent" data-sym="CHK-TRANSPARENT" title="(defun chk-transparent (name val insig-lst kwd-value-list-lst ctx state)
  (cond ((endp kwd-value-list-lst) (value nil))
        ((eq val (cadr (assoc-keyword :transparent (car kwd-value-list-lst))))
         (chk-transparent name val (cdr insig-lst) (cdr kwd-value-list-lst) ctx
                          state))
...">chk-transparent</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> insig-lst)
            (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:transparent</span> (car kwd-value-list-lst)))
            (cdr insig-lst)
            (cdr kwd-value-list-lst)
            ctx
            state)))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> trip))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-encapsulate1" data-defines="CHK-ACCEPTABLE-ENCAPSULATE1" data-references="CHK-SIGNATURES,VALUE,T,SOFT,ER,CAR,CONSP,TRUE-LISTP,AND,NOT,COND,ER-PROGN,STATE,WRLD,CTX,FORM-LST,SIGNATURES,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="CHK-ACCEPTABLE-ENCAPSULATE1" data-part-args="STATE,WRLD,CTX,FORM-LST,SIGNATURES" data-part-body="STATE,WRLD,SIGNATURES,CHK-SIGNATURES,VALUE,T,CTX,SOFT,ER,CAR,CONSP,FORM-LST,TRUE-LISTP,AND,NOT,COND,ER-PROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-ENCAPSULATE1">chk-acceptable-encapsulate1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-encapsulate1" data-sym="CHK-ACCEPTABLE-ENCAPSULATE1" title="(defun chk-acceptable-encapsulate1 (signatures form-lst ctx wrld state)
  (er-progn
   (cond
    ((not (and (true-listp form-lst) (consp form-lst) (consp (car form-lst))))
     (er soft ctx &quot;The arguments to encapsulate, after the first, are ~
...">chk-acceptable-encapsulate1</a>
  (signatures form-lst ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> form-lst)
           (consp form-lst)
           (consp (car form-lst)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The arguments to encapsulate, after the first, are ~
               each supposed to be embedded event forms.  There must ~
               be at least one form.  See :DOC encapsulate and :DOC ~
               embedded-event-form."</span>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
    (<a class="sym-link local-def" href="#def-chk-signatures" data-sym="CHK-SIGNATURES" title="(defun chk-signatures (signatures ctx wrld state)
  (er-let*
   ((trip (chk-signatures-rec signatures ctx wrld state))
    (insig-lst (value (car trip))) (kwd-value-list-lst (value (cadr trip))))
   (er-progn
...">chk-signatures</a> signatures ctx wrld state)))</pre>
  </div>

<div class="form-block function" id="def-name-introduced" data-defines="NAME-INTRODUCED" data-references="T,GLOBAL-VALUE,CERTIFICATION-TUPLE,AND,STOBJ,THEORY,LABEL,MACRO-BODY,CONST,THEOREM,MEMBER-EQ,CAR,FORMALS,QUOTE,CADR,*ACL2-PROPERTY-UNBOUND*,CDDR,EQ,COND,FUNCTIONP,TRIP,DEFUN" data-used-by="BOOKDATA-ALIST1,EXPORTED-FUNCTION-NAMES" data-part-name="NAME-INTRODUCED" data-part-args="FUNCTIONP,TRIP" data-part-body="T,GLOBAL-VALUE,CERTIFICATION-TUPLE,AND,STOBJ,THEORY,LABEL,MACRO-BODY,CONST,THEOREM,MEMBER-EQ,FUNCTIONP,CAR,FORMALS,QUOTE,CADR,*ACL2-PROPERTY-UNBOUND*,TRIP,CDDR,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NAME-INTRODUCED">name-introduced</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-name-introduced" data-sym="NAME-INTRODUCED" title="(defun name-introduced (trip functionp)
  (cond ((eq (cddr trip) *acl2-property-unbound*) nil)
        ((eq (cadr trip) &#39;formals) (car trip)) (functionp nil)
        ((member-eq (cadr trip) &#39;(theorem const macro-body label theory stobj))
         (car trip))
...">name-introduced</a>
  (trip functionp)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip) <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) (car trip))
    (functionp nil)
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip)
       '(theorem const macro-body label <a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> stobj)) (car trip))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'certification-tuple)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
       (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-chk-embedded-event-form-orig-form-msg" data-defines="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" data-references="T,TERM-EVISC-TUPLE,MSG,COND,STATE,ORIG-FORM,DEFUN" data-used-by="CHK-EMBEDDED-EVENT-FORM" data-part-name="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" data-part-args="STATE,ORIG-FORM" data-part-body="STATE,T,TERM-EVISC-TUPLE,MSG,ORIG-FORM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG">chk-embedded-event-form-orig-form-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a>
  (orig-form state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (orig-form (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Note: the above form was encountered during processing of ~X01."</span>
        orig-form
        (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>)))</pre>
  </div>

<div class="form-block constant" id="def-_2Aacl2-defaults-table-macros_2A" data-defines="*ACL2-DEFAULTS-TABLE-MACROS*" data-references="SET-WELL-FOUNDED-RELATION,SET-VERIFY-GUARDS-EAGERNESS,SET-TAU-AUTO-MODE,SET-SUBGOAL-LOOP-LIMITS,SET-STATE-OK,SET-RULER-EXTENDERS,SET-REWRITE-STACK-LIMIT,SET-PROVER-STEP-LIMIT,SET-NON-LINEARP,SET-MEASURE-FUNCTION,SET-MATCH-FREE-DEFAULT,SET-LET*-ABSTRACTIONP,SET-IRRELEVANT-FORMALS-OK,SET-IGNORE-OK,SET-ENFORCE-REDUNDANCY,SET-DEFAULT-BACKCHAIN-LIMIT,SET-COMPILE-FNS,SET-CASE-SPLIT-LIMITATIONS,SET-BOGUS-MUTUAL-RECURSION-OK,SET-BOGUS-DEFUN-HINTS-OK,SET-BACKCHAIN-LIMIT,PROGRAM,LOGIC,DELETE-INCLUDE-BOOK-DIR,DEFTTAG,ADD-MATCH-FREE-OVERRIDE,ADD-INCLUDE-BOOK-DIR,QUOTE,DEFCONST" data-used-by="CHK-EMBEDDED-EVENT-FORM" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*ACL2-DEFAULTS-TABLE-MACROS*">*acl2-defaults-table-macros*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aacl2-defaults-table-macros_2A" data-sym="*ACL2-DEFAULTS-TABLE-MACROS*" title="(defconst *acl2-defaults-table-macros*
          &#39;(add-include-book-dir add-match-free-override defttag
                                 delete-include-book-dir logic program
                                 set-backchain-limit set-bogus-defun-hints-ok
                                 set-bogus-mutual-recursion-ok
...">*acl2-defaults-table-macros*</a>
  '(<a class="sym-link system" href="axioms.html#def-add-include-book-dir" data-sym="ADD-INCLUDE-BOOK-DIR">add-include-book-dir</a> <a class="sym-link system" href="axioms.html#def-add-match-free-override" data-sym="ADD-MATCH-FREE-OVERRIDE">add-match-free-override</a>
    <a class="sym-link system" href="axioms.html#def-defttag" data-sym="DEFTTAG">defttag</a>
    <a class="sym-link system" href="axioms.html#def-delete-include-book-dir" data-sym="DELETE-INCLUDE-BOOK-DIR">delete-include-book-dir</a>
    <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
    <a class="sym-link system" href="axioms.html#def-program" data-sym="PROGRAM">program</a>
    <a class="sym-link system" href="axioms.html#def-set-backchain-limit" data-sym="SET-BACKCHAIN-LIMIT">set-backchain-limit</a>
    <a class="sym-link system" href="axioms.html#def-set-bogus-defun-hints-ok" data-sym="SET-BOGUS-DEFUN-HINTS-OK">set-bogus-defun-hints-ok</a>
    <a class="sym-link system" href="axioms.html#def-set-bogus-mutual-recursion-ok" data-sym="SET-BOGUS-MUTUAL-RECURSION-OK">set-bogus-mutual-recursion-ok</a>
    <a class="sym-link system" href="axioms.html#def-set-case-split-limitations" data-sym="SET-CASE-SPLIT-LIMITATIONS">set-case-split-limitations</a>
    <a class="sym-link system" href="axioms.html#def-set-compile-fns" data-sym="SET-COMPILE-FNS">set-compile-fns</a>
    <a class="sym-link system" href="axioms.html#def-set-default-backchain-limit" data-sym="SET-DEFAULT-BACKCHAIN-LIMIT">set-default-backchain-limit</a>
    <a class="sym-link system" href="axioms.html#def-set-enforce-redundancy" data-sym="SET-ENFORCE-REDUNDANCY">set-enforce-redundancy</a>
    <a class="sym-link system" href="axioms.html#def-set-ignore-ok" data-sym="SET-IGNORE-OK">set-ignore-ok</a>
    <a class="sym-link system" href="axioms.html#def-set-irrelevant-formals-ok" data-sym="SET-IRRELEVANT-FORMALS-OK">set-irrelevant-formals-ok</a>
    <a class="sym-link system" href="axioms.html#def-set-let_2A-abstractionp" data-sym="SET-LET*-ABSTRACTIONP">set-let*-abstractionp</a>
    <a class="sym-link system" href="axioms.html#def-set-match-free-default" data-sym="SET-MATCH-FREE-DEFAULT">set-match-free-default</a>
    <a class="sym-link system" href="axioms.html#def-set-measure-function" data-sym="SET-MEASURE-FUNCTION">set-measure-function</a>
    <a class="sym-link system" href="axioms.html#def-set-non-linearp" data-sym="SET-NON-LINEARP">set-non-linearp</a>
    <a class="sym-link system" href="axioms.html#def-set-prover-step-limit" data-sym="SET-PROVER-STEP-LIMIT">set-prover-step-limit</a>
    <a class="sym-link system" href="axioms.html#def-set-rewrite-stack-limit" data-sym="SET-REWRITE-STACK-LIMIT">set-rewrite-stack-limit</a>
    set-ruler-extenders
    <a class="sym-link system" href="axioms.html#def-set-state-ok" data-sym="SET-STATE-OK">set-state-ok</a>
    <a class="sym-link system" href="axioms.html#def-set-subgoal-loop-limits" data-sym="SET-SUBGOAL-LOOP-LIMITS">set-subgoal-loop-limits</a>
    <a class="sym-link system" href="axioms.html#def-set-tau-auto-mode" data-sym="SET-TAU-AUTO-MODE">set-tau-auto-mode</a>
    <a class="sym-link system" href="axioms.html#def-set-verify-guards-eagerness" data-sym="SET-VERIFY-GUARDS-EAGERNESS">set-verify-guards-eagerness</a>
    <a class="sym-link system" href="axioms.html#def-set-well-founded-relation" data-sym="SET-WELL-FOUNDED-RELATION">set-well-founded-relation</a>))</pre>
  </div>

<div class="form-block function" id="def-chk-embedded-event-form" data-defines="CHK-EMBEDDED-EVENT-FORM" data-references="MACROEXPAND1,EXPANSION,WITH-GLOBAL-STOBJ,WITH-LOCAL-STOBJ,TRANSLATE-AND-TEST,MV-LET,MV,MACRO-BODY,GETPROPC,CADDR,ER-PROGN,CDDDR,RECORD-EXPANSION,LD-REDEFINITION-ACTION,MAKE-EVENT,BUTLAST,APPEND,LAST,STRINGP,&,*GUARD-CHECKING-VALUES*,X,CASE-MATCH,VAL,LET,WITH-PROVER-TIME-LIMIT,WITH-PROVER-STEP-LIMIT,WITH-OUTPUT,WITH-GUARD-CHECKING-EVENT,WITH-CURRENT-PACKAGE,WITH-CBD,WARNING$,EMBEDDED-EVENT-LST,GLOBAL-VAL,PPROGN,SKIP-PROOFS,LOCAL-ENCAPSULATE,MSG,DELETE-INCLUDE-BOOK-DIR!,ADD-INCLUDE-BOOK-DIR!,DEFAXIOM,*ACL2-DEFAULTS-TABLE-MACROS*,MEMBER-EQ,ACL2-DEFAULTS-TABLE,TABLE,LIST,CADR,NEW-FORM,ER-LET*,T,VALUE,INCLUDE-BOOK,LD-SKIP-PROOFSP,CDDR,NULL,CONSP,LOCAL,QUOTE,EQ,AND,CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG,SOFT,ER,CDR,TRUE-LISTP,CAR,SYMBOLP,NOT,ATOM,OR,COND,ENCAP-STR,LOCAL-STR,ER-STR,LET*,MAKE-EVENT-CHK,IN-ENCAPSULATEP,IN-LOCAL-FLG,NAMES,STATE,CTX,WRLD,ORIG-FORM,FORM,DEFUN" data-used-by="MAKE-EVENT-FN2,GET-PORTCULLIS-CMDS,EVAL-EVENT-LST,GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION" data-part-name="CHK-EMBEDDED-EVENT-FORM" data-part-args="MAKE-EVENT-CHK,IN-ENCAPSULATEP,IN-LOCAL-FLG,NAMES,STATE,CTX,WRLD,ORIG-FORM,FORM" data-part-body="MACROEXPAND1,EXPANSION,WITH-GLOBAL-STOBJ,WITH-LOCAL-STOBJ,TRANSLATE-AND-TEST,MV-LET,MV,MACRO-BODY,GETPROPC,CADDR,ER-PROGN,CDDDR,RECORD-EXPANSION,LD-REDEFINITION-ACTION,MAKE-EVENT,BUTLAST,APPEND,LAST,STRINGP,&,*GUARD-CHECKING-VALUES*,X,CASE-MATCH,VAL,LET,WITH-PROVER-TIME-LIMIT,WITH-PROVER-STEP-LIMIT,WITH-OUTPUT,WITH-GUARD-CHECKING-EVENT,WITH-CURRENT-PACKAGE,WITH-CBD,WARNING$,EMBEDDED-EVENT-LST,GLOBAL-VAL,PPROGN,SKIP-PROOFS,LOCAL-ENCAPSULATE,MSG,DELETE-INCLUDE-BOOK-DIR!,ADD-INCLUDE-BOOK-DIR!,DEFAXIOM,*ACL2-DEFAULTS-TABLE-MACROS*,MEMBER-EQ,ACL2-DEFAULTS-TABLE,TABLE,IN-LOCAL-FLG,LIST,MAKE-EVENT-CHK,IN-ENCAPSULATEP,NAMES,WRLD,CADR,CHK-EMBEDDED-EVENT-FORM,NEW-FORM,ER-LET*,T,VALUE,INCLUDE-BOOK,LD-SKIP-PROOFSP,CDDR,NULL,CONSP,LOCAL,QUOTE,EQ,AND,STATE,ORIG-FORM,CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG,CTX,SOFT,ER,CDR,TRUE-LISTP,CAR,SYMBOLP,NOT,FORM,ATOM,OR,COND,ENCAP-STR,LOCAL-STR,ER-STR,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-EMBEDDED-EVENT-FORM">chk-embedded-event-form</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a>
  (form orig-form
    wrld
    ctx
    state
    names
    in-local-flg
    <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
    make-event-chk)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((er-str <span class="string">"The form ~x0 is not an embedded event form~@1.  See :DOC ~
           embedded-event-form.~@2~@3"</span>) (local-str <span class="string">"The form ~x0 is not an embedded event form in the ~
                     context of LOCAL~@1.  See :DOC embedded-event-form.~@2~@3"</span>)
      (encap-str <span class="string">"The form ~x0 is not an embedded event form in the ~
                     context of ENCAPSULATE~@1.  See :DOC ~
                     embedded-event-form.~@2~@3"</span>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> form)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp (car form)))
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (cdr form)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          er-str
          form
          <span class="string">""</span>
          (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
          <span class="string">""</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>)
         (consp (cdr form))
         (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((new-form (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)
                   orig-form
                   wrld
                   ctx
                   state
                   names
                   <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                   <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
                   make-event-chk)))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> new-form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car form) new-form)))))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> in-local-flg <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
         (consp form)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a>)
         (consp (cdr form))
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) 'acl2-defaults-table)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          local-str
          form
          <span class="string">" because it sets the acl2-defaults-table in a local context.  ~
                A local context is not useful when setting this table, since ~
                the acl2-defaults-table is restored upon completion of ~
                encapsulate, include-book, and certify-book forms; that is, ~
                no changes to the acl2-defaults-table are exported"</span>
          (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
          <span class="string">""</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> in-local-flg <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
         (consp form)
         (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form) <a class="sym-link local-def" href="#def-_2Aacl2-defaults-table-macros_2A" data-sym="*ACL2-DEFAULTS-TABLE-MACROS*" title="(defconst *acl2-defaults-table-macros*
          &#39;(add-include-book-dir add-match-free-override defttag
                                 delete-include-book-dir logic program
                                 set-backchain-limit set-bogus-defun-hints-ok
                                 set-bogus-mutual-recursion-ok
...">*acl2-defaults-table-macros*</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          local-str
          form
          <span class="string">" because it implicitly sets the acl2-defaults-table in a ~
                local context; see :DOC acl2-defaults-table, in particular ~
                the explanation about this error message"</span>
          (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
          <span class="string">""</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> in-local-flg (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-defaxiom" data-sym="DEFAXIOM">defaxiom</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          local-str
          form
          <span class="string">" because it adds an axiom whose traces will disappear"</span>
          (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
          <span class="string">""</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-defaxiom" data-sym="DEFAXIOM">defaxiom</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          encap-str
          form
          <span class="string">" because we do not permit defaxiom events in the scope of an ~
                encapsulate"</span>
          (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
          <span class="string">""</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> in-local-flg
         (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form)
           '(<a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a> <a class="sym-link system" href="axioms.html#def-delete-include-book-dir_21" data-sym="DELETE-INCLUDE-BOOK-DIR!">delete-include-book-dir!</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          local-str
          form
          (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" (see :DOC ~x0)"</span> (car form))
          (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
          <span class="string">""</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
         <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> in-local-flg nil)
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> in-local-flg 'local-encapsulate))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          encap-str
          form
          <span class="string">" because we do not permit non-local include-book forms in the ~
                scope of an encapsulate.  Consider moving your include-book ~
                form outside the encapsulates, or else making it local"</span>
          (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
          <span class="string">""</span>))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form) names) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> form))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-skip-proofs" data-sym="SKIP-PROOFS">skip-proofs</a>)
         (consp (cdr form))
         (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form))) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'embedded-event-lst wrld) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                <span class="string">"Skip-proofs"</span>
                <span class="string">"ACL2 has encountered a SKIP-PROOFS form, ~x0, ~
                              in the context of a book or an encapsulate ~
                              event.  Therefore, no logical claims may be ~
                              soundly made in this context.  See :DOC ~
                              SKIP-PROOFS."</span>
                form))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((new-form (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)
                 orig-form
                 wrld
                 ctx
                 state
                 names
                 in-local-flg
                 <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
                 make-event-chk)))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> new-form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car form) new-form))))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form)
           '(<a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a> <a class="sym-link local-def" href="#def-with-current-package" data-sym="WITH-CURRENT-PACKAGE" title="(defmacro with-current-package (pkg form)
  (let ((form form))
    `(state-global-let* ((current-package ,pkg set-current-package-state))
                        ,form)))">with-current-package</a>
             <a class="sym-link system" href="axioms.html#def-with-guard-checking-event" data-sym="WITH-GUARD-CHECKING-EVENT">with-guard-checking-event</a>
             <a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a>
             <a class="sym-link system" href="history-management.html#def-with-prover-step-limit" data-sym="WITH-PROVER-STEP-LIMIT">with-prover-step-limit</a>
             <a class="sym-link system" href="axioms.html#def-with-prover-time-limit" data-sym="WITH-PROVER-TIME-LIMIT">with-prover-time-limit</a>))
         (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> form)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-with-guard-checking-event" data-sym="WITH-GUARD-CHECKING-EVENT">with-guard-checking-event</a>)
             (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (cdr form))
               (let ((val (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)))
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> val
                     (('quote x) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> x <a class="sym-link system" href="axioms.html#def-_2Aguard-checking-values_2A" data-sym="*GUARD-CHECKING-VALUES*">*guard-checking-values*</a>))
                     (&amp; (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> val <a class="sym-link system" href="axioms.html#def-_2Aguard-checking-values_2A" data-sym="*GUARD-CHECKING-VALUES*">*guard-checking-values*</a>))))))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              er-str
              form
              <span class="string">""</span>
              (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~|The macro ~x0 requires the second argument to be a ~
                       constant from the list ~x1, or of the form (QUOTE X) ~
                       for such a constant, X."</span>
                '<a class="sym-link system" href="axioms.html#def-with-guard-checking-event" data-sym="WITH-GUARD-CHECKING-EVENT">with-guard-checking-event</a>
                <a class="sym-link system" href="axioms.html#def-_2Aguard-checking-values_2A" data-sym="*GUARD-CHECKING-VALUES*">*guard-checking-values*</a>)))
          ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form) '(<a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a> <a class="sym-link local-def" href="#def-with-current-package" data-sym="WITH-CURRENT-PACKAGE" title="(defmacro with-current-package (pkg form)
  (let ((form form))
    `(state-global-let* ((current-package ,pkg set-current-package-state))
                        ,form)))">with-current-package</a>))
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (stringp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              er-str
              form
              <span class="string">""</span>
              (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~|The macro ~x0 requires the second argument to be a ~
                       string when used in an event context."</span>
                (car form))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((new-form (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> form))
                   orig-form
                   wrld
                   ctx
                   state
                   names
                   in-local-flg
                   <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
                   make-event-chk)))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> new-form (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> form <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> new-form))))))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> make-event-chk
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> form)
                 (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (consp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:check-expansion</span> form)))
                   (consp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:expansion?</span> form))))))
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> state))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Either the :check-expansion or :expansion? argument of ~
                       make-event is normally a consp in the present context. ~
                       ~ This is not surprising in some cases, for example, ~
                       when including an uncertified book or calling ~x0 ~
                       explicitly.  But other cases could be evidence of an ~
                       ACL2 bug; consider contacting the ACL2 implementors.  ~
                       Current form:~|~%~X12"</span>
              '<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a>
              form
              nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> form))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (cdr form) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> form)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The macro ~x0 takes two arguments, so ~x1 is illegal."</span>
              '<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a>
              form))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)
                nil
                wrld
                ctx
                state
                names
                in-local-flg
                <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
                nil)
              (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> form)
                (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> orig-form form)
                wrld
                ctx
                state
                names
                in-local-flg
                <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))
      ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car form) 'macro-body nil wrld) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form)
             '(<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a>
               <a class="sym-link system" href="axioms.html#def-translate-and-test" data-sym="TRANSLATE-AND-TEST">translate-and-test</a>
               with-local-stobj
               with-global-stobj)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              er-str
              form
              <span class="string">""</span>
              (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~|Calls of the macro ~x0 do not generate an event, ~
                       because this macro has special meaning that is not ~
                       handled by ACL2&#39;s event-generation mechanism."</span>
                (car form))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((expansion (macroexpand1 form ctx state)))
              (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> expansion
                (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> orig-form form)
                wrld
                ctx
                state
                names
                in-local-flg
                <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
                make-event-chk)))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          er-str
          form
          <span class="string">""</span>
          (<a class="sym-link local-def" href="#def-chk-embedded-event-form-orig-form-msg" data-sym="CHK-EMBEDDED-EVENT-FORM-ORIG-FORM-MSG" title="(defun chk-embedded-event-form-orig-form-msg (orig-form state)
  (cond
   (orig-form
    (msg &quot;  Note: the above form was encountered during processing of ~X01.&quot;
         orig-form (term-evisc-tuple t state)))">chk-embedded-event-form-orig-form-msg</a> orig-form state)
          <span class="string">""</span>)))))</pre>
  </div>

<div class="form-block constant" id="def-_2Adestructure-expansion-wrappers_2A" data-defines="*DESTRUCTURE-EXPANSION-WRAPPERS*" data-references="WITH-PROVER-TIME-LIMIT,WITH-PROVER-STEP-LIMIT,WITH-OUTPUT,WITH-GUARD-CHECKING-EVENT,WITH-CURRENT-PACKAGE,WITH-CBD,SKIP-PROOFS,LOCAL,QUOTE,DEFCONST" data-used-by="TRANS*-FN,TRANS*-FN-ITER,TRANS*-FN1,DESTRUCTURE-EXPANSION" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*DESTRUCTURE-EXPANSION-WRAPPERS*">*destructure-expansion-wrappers*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Adestructure-expansion-wrappers_2A" data-sym="*DESTRUCTURE-EXPANSION-WRAPPERS*" title="(defconst *destructure-expansion-wrappers*
          &#39;(local skip-proofs with-cbd with-current-package
                  with-guard-checking-event with-output with-prover-step-limit
                  with-prover-time-limit))">*destructure-expansion-wrappers*</a>
  '(<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> <a class="sym-link system" href="axioms.html#def-skip-proofs" data-sym="SKIP-PROOFS">skip-proofs</a>
    <a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a>
    <a class="sym-link local-def" href="#def-with-current-package" data-sym="WITH-CURRENT-PACKAGE" title="(defmacro with-current-package (pkg form)
  (let ((form form))
    `(state-global-let* ((current-package ,pkg set-current-package-state))
                        ,form)))">with-current-package</a>
    <a class="sym-link system" href="axioms.html#def-with-guard-checking-event" data-sym="WITH-GUARD-CHECKING-EVENT">with-guard-checking-event</a>
    <a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a>
    <a class="sym-link system" href="history-management.html#def-with-prover-step-limit" data-sym="WITH-PROVER-STEP-LIMIT">with-prover-step-limit</a>
    <a class="sym-link system" href="axioms.html#def-with-prover-time-limit" data-sym="WITH-PROVER-TIME-LIMIT">with-prover-time-limit</a>))</pre>
  </div>

<div class="form-block function" id="def-destructure-expansion" data-defines="DESTRUCTURE-EXPANSION" data-references="T,BUTLAST,CONS,MV,LAST,BASE-FORM,WRAPPERS,MV-LET,*DESTRUCTURE-EXPANSION-WRAPPERS*,CAR,MEMBER-EQ,COND,TRUE-LISTP,XARGS,DECLARE,FORM,DEFUN" data-used-by="MAKE-EVENT-FN,ULTIMATE-EXPANSION,GET-PORTCULLIS-CMDS,EVAL-EVENT-LST" data-part-name="DESTRUCTURE-EXPANSION" data-part-args="FORM" data-part-declare="FORM,TRUE-LISTP,XARGS,DECLARE" data-part-body="T,BUTLAST,CONS,MV,LAST,DESTRUCTURE-EXPANSION,BASE-FORM,WRAPPERS,MV-LET,*DESTRUCTURE-EXPANSION-WRAPPERS*,FORM,CAR,MEMBER-EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DESTRUCTURE-EXPANSION">destructure-expansion</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-destructure-expansion" data-sym="DESTRUCTURE-EXPANSION" title="(defun destructure-expansion (form)
  (declare (xargs :guard (true-listp form)))
  (cond
   ((member-eq (car form) *destructure-expansion-wrappers*)
    (mv-let (wrappers base-form) (destructure-expansion (car (last form)))
...">destructure-expansion</a>
  (form)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> form)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form) <a class="sym-link local-def" href="#def-_2Adestructure-expansion-wrappers_2A" data-sym="*DESTRUCTURE-EXPANSION-WRAPPERS*" title="(defconst *destructure-expansion-wrappers*
          &#39;(local skip-proofs with-cbd with-current-package
                  with-guard-checking-event with-output with-prover-step-limit
                  with-prover-time-limit))">*destructure-expansion-wrappers*</a>) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (wrappers base-form)
        (<a class="sym-link local-def" href="#def-destructure-expansion" data-sym="DESTRUCTURE-EXPANSION" title="(defun destructure-expansion (form)
  (declare (xargs :guard (true-listp form)))
  (cond
   ((member-eq (car form) *destructure-expansion-wrappers*)
    (mv-let (wrappers base-form) (destructure-expansion (car (last form)))
...">destructure-expansion</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> form)))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> form <span class="number">1</span>) wrappers) base-form)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))))</pre>
  </div>

<div class="form-block function" id="def-rebuild-expansion" data-defines="REBUILD-EXPANSION" data-references="CDR,LIST,CAR,APPEND,T,ENDP,COND,FORM,WRAPPERS,DEFUN" data-used-by="MAKE-EVENT-FN,ULTIMATE-EXPANSION,GET-PORTCULLIS-CMDS,EVAL-EVENT-LST" data-part-name="REBUILD-EXPANSION" data-part-args="FORM,WRAPPERS" data-part-body="CDR,REBUILD-EXPANSION,LIST,CAR,APPEND,T,FORM,WRAPPERS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REBUILD-EXPANSION">rebuild-expansion</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-rebuild-expansion" data-sym="REBUILD-EXPANSION" title="(defun rebuild-expansion (wrappers form)
  (cond ((endp wrappers) form)
        (t
         (append (car wrappers)
                 (list (rebuild-expansion (cdr wrappers) form))))))">rebuild-expansion</a>
  (wrappers form)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> wrappers) form)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (car wrappers)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link local-def" href="#def-rebuild-expansion" data-sym="REBUILD-EXPANSION" title="(defun rebuild-expansion (wrappers form)
  (cond ((endp wrappers) form)
        (t
         (append (car wrappers)
                 (list (rebuild-expansion (cdr wrappers) form))))))">rebuild-expansion</a> (cdr wrappers) form))))))</pre>
  </div>

<div class="form-block function" id="def-set-raw-mode-on" data-defines="SET-RAW-MODE-ON" data-references="VALUE,ACL2-RAW-MODE-P,QUOTE,F-PUT-GLOBAL,T,RAW-MODE-P,COND,PPROGN,STATE,DEFUN" data-used-by="SET-RAW-MODE,SET-RAW-MODE-ON!" data-part-name="SET-RAW-MODE-ON" data-part-args="STATE" data-part-body="VALUE,ACL2-RAW-MODE-P,QUOTE,F-PUT-GLOBAL,T,STATE,RAW-MODE-P,COND,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-RAW-MODE-ON">set-raw-mode-on</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-raw-mode-on" data-sym="SET-RAW-MODE-ON" title="(defun set-raw-mode-on (state)
  (pprogn
   (cond ((raw-mode-p state) state)
         (t (f-put-global &#39;acl2-raw-mode-p t state)))
   (value :invisible)))">set-raw-mode-on</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state) state)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'acl2-raw-mode-p <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))</pre>
  </div>

<div class="form-block function" id="def-set-raw-mode-off" data-defines="SET-RAW-MODE-OFF" data-references="VALUE,T,ACL2-RAW-MODE-P,QUOTE,F-PUT-GLOBAL,RAW-MODE-P,COND,PPROGN,STATE,DEFUN" data-used-by="SET-RAW-MODE" data-part-name="SET-RAW-MODE-OFF" data-part-args="STATE" data-part-body="VALUE,T,ACL2-RAW-MODE-P,QUOTE,F-PUT-GLOBAL,STATE,RAW-MODE-P,COND,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-RAW-MODE-OFF">set-raw-mode-off</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-raw-mode-off" data-sym="SET-RAW-MODE-OFF" title="(defun set-raw-mode-off (state)
  (pprogn
   (cond ((raw-mode-p state) (f-put-global &#39;acl2-raw-mode-p nil state))
         (t state))
   (value :invisible)))">set-raw-mode-off</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state) (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'acl2-raw-mode-p nil state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))</pre>
  </div>

<div class="form-block macro" id="def-set-raw-mode-on_21" data-defines="SET-RAW-MODE-ON!" data-references="VALUE,STATE,SET-RAW-MODE-ON,DEFTTAG,LD,ER-PROGN,QUOTE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-RAW-MODE-ON!">set-raw-mode-on!</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-raw-mode-on_21" data-sym="SET-RAW-MODE-ON!" title="(defmacro set-raw-mode-on! ()
  &#39;(er-progn
    (ld &#39;((defttag :raw-mode-hack) (set-raw-mode-on state)) :ld-prompt nil
        :ld-verbose nil :ld-post-eval-print nil
        :ld-user-stobjs-modified-warning :same)">set-raw-mode-on!</a>
  nil
  '(<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (ld '((<a class="sym-link system" href="axioms.html#def-defttag" data-sym="DEFTTAG">defttag</a> <span class="keyword">:raw-mode-hack</span>) (<a class="sym-link local-def" href="#def-set-raw-mode-on" data-sym="SET-RAW-MODE-ON" title="(defun set-raw-mode-on (state)
  (pprogn
   (cond ((raw-mode-p state) state)
         (t (f-put-global &#39;acl2-raw-mode-p t state)))
   (value :invisible)))">set-raw-mode-on</a> state))
      <span class="keyword">:ld-prompt</span> nil
      <span class="keyword">:ld-verbose</span> nil
      <span class="keyword">:ld-post-eval-print</span> nil
      <span class="keyword">:ld-user-stobjs-modified-warning</span> <span class="keyword">:same</span>)
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))</pre>
  </div>

<div class="form-block macro" id="def-set-raw-mode" data-defines="SET-RAW-MODE" data-references="SET-RAW-MODE-ON,STATE,SET-RAW-MODE-OFF,EQUAL,NULL,OR,IF,T,QUOTE,MEMBER-EQUAL,XARGS,DECLARE,FLG,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-RAW-MODE">set-raw-mode</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-raw-mode" data-sym="SET-RAW-MODE" title="(defmacro set-raw-mode (flg)
  (declare
   (xargs :guard (member-equal flg (quote (t (quote t) nil (quote nil))))))
  (if (or (null flg) (equal flg &#39;&#39;nil))
      &#39;(set-raw-mode-off state)">set-raw-mode</a>
  (flg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> flg '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil 'nil))))
  (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> flg) (equal flg ''nil))
    '(<a class="sym-link local-def" href="#def-set-raw-mode-off" data-sym="SET-RAW-MODE-OFF" title="(defun set-raw-mode-off (state)
  (pprogn
   (cond ((raw-mode-p state) (f-put-global &#39;acl2-raw-mode-p nil state))
         (t state))
   (value :invisible)))">set-raw-mode-off</a> state)
    '(<a class="sym-link local-def" href="#def-set-raw-mode-on" data-sym="SET-RAW-MODE-ON" title="(defun set-raw-mode-on (state)
  (pprogn
   (cond ((raw-mode-p state) state)
         (t (f-put-global &#39;acl2-raw-mode-p t state)))
   (value :invisible)))">set-raw-mode-on</a> state)))</pre>
  </div>

<div class="form-block function" id="def-alist-to-bindings" data-defines="ALIST-TO-BINDINGS" data-references="CDR,CDAR,KWOTE,CAAR,LIST,CONS,T,ENDP,COND,ALIST,DEFUN" data-part-name="ALIST-TO-BINDINGS" data-part-args="ALIST" data-part-body="CDR,ALIST-TO-BINDINGS,CDAR,KWOTE,CAAR,LIST,CONS,T,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ALIST-TO-BINDINGS">alist-to-bindings</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-alist-to-bindings" data-sym="ALIST-TO-BINDINGS" title="(defun alist-to-bindings (alist)
  (cond ((endp alist) nil)
        (t
         (cons (list (caar alist) (kwote (cdar alist)))
               (alist-to-bindings (cdr alist))))))">alist-to-bindings</a>
  (alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)))
        (<a class="sym-link local-def" href="#def-alist-to-bindings" data-sym="ALIST-TO-BINDINGS" title="(defun alist-to-bindings (alist)
  (cond ((endp alist) nil)
        (t
         (cons (list (caar alist) (kwote (cdar alist)))
               (alist-to-bindings (cdr alist))))))">alist-to-bindings</a> (cdr alist))))))</pre>
  </div>

<div class="form-block function" id="def-acl2-raw-eval" data-defines="ACL2-RAW-EVAL" data-references="T,TOP-LEVEL,QUOTE,TRANS-EVAL-NO-WARNING,STATE,FORM,DEFUN" data-used-by="EVAL-EVENT-LST" data-part-name="ACL2-RAW-EVAL" data-part-args="STATE,FORM" data-part-body="T,STATE,TOP-LEVEL,QUOTE,FORM,TRANS-EVAL-NO-WARNING" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2-RAW-EVAL">acl2-raw-eval</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-acl2-raw-eval" data-sym="ACL2-RAW-EVAL" title="(defun acl2-raw-eval (form state)
  (trans-eval-no-warning form &#39;top-level state t))">acl2-raw-eval</a>
  (form state)
  (trans-eval-no-warning form '<a class="sym-link local-def" href="#def-top-level" data-sym="TOP-LEVEL" title="(defmacro top-level (form &amp;rest declares)
  `(mv-let (erp val state)
           (ld
            &#39;((pprogn (f-put-global &#39;top-level-errorp nil state)
                      (value :invisible))
...">top-level</a> state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block function" id="def-get-and-chk-last-make-event-expansion" data-defines="GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION" data-references="VALUE,T,SOFT,ER,IGNORE,DECLARE,CHK-EMBEDDED-EVENT-FORM,*VALID-OUTPUT-NAMES*,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,VAL,ERP,MV-LET,COND,LAST-MAKE-EVENT-EXPANSION,QUOTE,F-GET-GLOBAL,EXPANSION,LET,NAMES,STATE,CTX,WRLD,FORM,DEFUN" data-used-by="EVAL-EVENT-LST" data-part-name="GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION" data-part-args="NAMES,STATE,CTX,WRLD,FORM" data-part-body="VALUE,T,SOFT,ER,IGNORE,DECLARE,NAMES,CTX,WRLD,FORM,CHK-EMBEDDED-EVENT-FORM,*VALID-OUTPUT-NAMES*,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,VAL,ERP,MV-LET,COND,STATE,LAST-MAKE-EVENT-EXPANSION,QUOTE,F-GET-GLOBAL,EXPANSION,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION">get-and-chk-last-make-event-expansion</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-and-chk-last-make-event-expansion" data-sym="GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION" title="(defun get-and-chk-last-make-event-expansion (form wrld ctx state names)
  (let ((expansion (f-get-global &#39;last-make-event-expansion state)))
    (cond
     (expansion
      (mv-let (erp val state)
...">get-and-chk-last-make-event-expansion</a>
  (form wrld ctx state names)
  (let ((expansion (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'last-make-event-expansion state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (expansion (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst <a class="sym-link system" href="axioms.html#def-_2Avalid-output-names_2A" data-sym="*VALID-OUTPUT-NAMES*">*valid-output-names*</a>))
            (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> form
              nil
              wrld
              ctx
              state
              names
              nil
              nil
              nil))
          (declare (ignore val))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"Make-event is only legal in event contexts, where it ~
                       can be tracked properly; see :DOC make-event.  The ~
                       form ~p0 has thus generated an illegal call of ~
                       make-event.  This form&#39;s evaluation will have no ~
                       effect on the ACL2 logical world."</span>
                form))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> expansion)))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))</pre>
  </div>

<div class="form-block constant" id="def-_2Alocal-value-triple-elided_2A" data-defines="*LOCAL-VALUE-TRIPLE-ELIDED*" data-references="VALUE-TRIPLE,LOCAL,QUOTE,DEFCONST" data-used-by="MAKE-EVENT-FN2,EQUAL-MOD-ELIDE-LOCALS1,ELIDE-LOCALS-REC" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*LOCAL-VALUE-TRIPLE-ELIDED*">*local-value-triple-elided*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Alocal-value-triple-elided_2A" data-sym="*LOCAL-VALUE-TRIPLE-ELIDED*" title="(defconst *local-value-triple-elided* &#39;(local (value-triple :elided)))">*local-value-triple-elided*</a>
  '(<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> <span class="keyword">:elided</span>)))</pre>
  </div>

<div class="form-block macro" id="def-elide-locals" data-defines="ELIDE-LOCALS" data-references="IGNORE,DECLARE,ELIDE-LOCALS-REC,X,CHANGED-P,MV-LET,QUASIQUOTE,FORM,DEFMACRO" data-used-by="EXPANSION-ALIST-CONFLICT,ELIDE-LOCALS-FROM-EXPANSION-ALIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ELIDE-LOCALS">elide-locals</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-elide-locals" data-sym="ELIDE-LOCALS" title="(defmacro elide-locals (form)
  `(mv-let (changed-p x) (elide-locals-rec ,form) (declare (ignore changed-p))
           x))">elide-locals</a>
  (form)
  `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changed-p x)
    (<a class="sym-link local-def" href="#def-elide-locals-rec" data-sym="ELIDE-LOCALS-REC" title="(mutual-recursion
 (defun elide-locals-rec (form)
   (cond ((atom form) (mv nil form))
         ((equal form *local-value-triple-elided*) (mv nil form))
         ((eq (car form) &#39;local) (mv t *local-value-triple-elided*))
...">elide-locals-rec</a> ,FORM)
    (declare (ignore changed-p))
    x))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-elide-locals-rec" data-defines="ELIDE-LOCALS-REC" data-references="REST,CHANGEDP2,FIRST,CHANGEDP1,ENDP,CONS,CDR,PROGN!,PROGN,OR,LIST,BUTLAST,APPEND,NOT,CONSP,AND,LAST,TIME$,RECORD-EXPANSION,WITH-PROVER-STEP-LIMIT,WITH-PROVER-TIME-LIMIT,WITH-OUTPUT,WITH-GUARD-CHECKING-EVENT,WITH-CURRENT-PACKAGE,WITH-CBD,SKIP-PROOFS,MEMBER-EQ,CADR,LIST*,CDDR,ELIDE-LOCALS-LST,X,CHANGED-P,MV-LET,ENCAPSULATE,T,LOCAL,QUOTE,CAR,EQ,*LOCAL-VALUE-TRIPLE-ELIDED*,EQUAL,MV,ATOM,COND,FORM,DEFUN,MUTUAL-RECURSION" data-used-by="ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST,ELIDE-LOCALS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ELIDE-LOCALS-REC">elide-locals-rec</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-elide-locals-rec" data-sym="ELIDE-LOCALS-REC" title="(mutual-recursion
 (defun elide-locals-rec (form)
   (cond ((atom form) (mv nil form))
         ((equal form *local-value-triple-elided*) (mv nil form))
         ((eq (car form) &#39;local) (mv t *local-value-triple-elided*))
...">elide-locals-rec</a>
    (form)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> form) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))
      ((equal form <a class="sym-link local-def" href="#def-_2Alocal-value-triple-elided_2A" data-sym="*LOCAL-VALUE-TRIPLE-ELIDED*" title="(defconst *local-value-triple-elided* &#39;(local (value-triple :elided)))">*local-value-triple-elided*</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link local-def" href="#def-_2Alocal-value-triple-elided_2A" data-sym="*LOCAL-VALUE-TRIPLE-ELIDED*" title="(defconst *local-value-triple-elided* &#39;(local (value-triple :elided)))">*local-value-triple-elided*</a>))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changed-p x)
          (elide-locals-lst (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changed-p (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car form) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) x)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form)))))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form)
         '(<a class="sym-link system" href="axioms.html#def-skip-proofs" data-sym="SKIP-PROOFS">skip-proofs</a> <a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a>
           <a class="sym-link local-def" href="#def-with-current-package" data-sym="WITH-CURRENT-PACKAGE" title="(defmacro with-current-package (pkg form)
  (let ((form form))
    `(state-global-let* ((current-package ,pkg set-current-package-state))
                        ,form)))">with-current-package</a>
           <a class="sym-link system" href="axioms.html#def-with-guard-checking-event" data-sym="WITH-GUARD-CHECKING-EVENT">with-guard-checking-event</a>
           <a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a>
           <a class="sym-link system" href="axioms.html#def-with-prover-time-limit" data-sym="WITH-PROVER-TIME-LIMIT">with-prover-time-limit</a>
           <a class="sym-link system" href="history-management.html#def-with-prover-step-limit" data-sym="WITH-PROVER-STEP-LIMIT">with-prover-step-limit</a>
           <a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a>
           <a class="sym-link system" href="axioms.html#def-time_24" data-sym="TIME$">time$</a>)) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changed-p x)
          (<a class="sym-link local-def" href="#def-elide-locals-rec" data-sym="ELIDE-LOCALS-REC" title="(mutual-recursion
 (defun elide-locals-rec (form)
   (cond ((atom form) (mv nil form))
         ((equal form *local-value-triple-elided*) (mv nil form))
         ((eq (car form) &#39;local) (mv t *local-value-triple-elided*))
...">elide-locals-rec</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> form)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp x)
               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>)
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a>))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> x))
            (changed-p (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> form <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> x))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form)))))
      ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>)
         (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="basis-b.html#def-progn_21" data-sym="PROGN!">progn!</a>)
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr form))
               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) <span class="keyword">:state-global-bindings</span>))))) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changed-p x)
          (elide-locals-lst (cdr form))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changed-p (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car form) x)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form)))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="basis-b.html#def-progn_21" data-sym="PROGN!">progn!</a>) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changed-p x)
          (elide-locals-lst (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changed-p (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car form) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) x)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form)))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> elide-locals-lst
    (x)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> x) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp1 <a class="sym-link system" href="axioms.html#def-first" data-sym="FIRST">first</a>)
          (<a class="sym-link local-def" href="#def-elide-locals-rec" data-sym="ELIDE-LOCALS-REC" title="(mutual-recursion
 (defun elide-locals-rec (form)
   (cond ((atom form) (mv nil form))
         ((equal form *local-value-triple-elided*) (mv nil form))
         ((eq (car form) &#39;local) (mv t *local-value-triple-elided*))
...">elide-locals-rec</a> (car x))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp2 <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)
            (elide-locals-lst (cdr x))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> changedp1 changedp2) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons <a class="sym-link system" href="axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil x)))))))))</pre>
  </div>

<div class="form-block function" id="def-make-record-expansion_3F" data-defines="MAKE-RECORD-EXPANSION?" data-references="LIST,&,A,RECORD-EXPANSION,QUOTE,CASE-MATCH,T,NOT,COND,R-E-P,EXPANSION,EVENT,DEFUN" data-used-by="EVAL-EVENT-LST" data-part-name="MAKE-RECORD-EXPANSION?" data-part-args="R-E-P,EXPANSION,EVENT" data-part-body="LIST,&,A,RECORD-EXPANSION,QUOTE,EVENT,CASE-MATCH,T,EXPANSION,R-E-P,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-RECORD-EXPANSION?">make-record-expansion?</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-record-expansion_3F" data-sym="MAKE-RECORD-EXPANSION?" title="(defun make-record-expansion? (event expansion r-e-p)
  (cond ((not r-e-p) expansion)
        (t
         (case-match event
                     ((&#39;record-expansion a &amp;)
...">make-record-expansion?</a>
  (event expansion r-e-p)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> r-e-p) expansion)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> event
        (('<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a> a &amp;) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a> a expansion))
        (&amp; (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a> event expansion))))))</pre>
  </div>

<div class="form-block other" id="form-115" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-system-table
  nil
  nil
  <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key 'empty-event-key))</pre>
  </div>

<div class="form-block macro" id="def-table-put" data-defines="TABLE-PUT" data-references="TABLE,STATE,QUOTE,TABLE-FN,QUASIQUOTE,VAL,KEY,NAME,DEFMACRO" data-used-by="MAYBE-ADD-EVENT-LANDMARK" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TABLE-PUT">table-put</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-table-put" data-sym="TABLE-PUT" title="(defmacro table-put (name key val)
  `(table-fn &#39;,name &#39;(,key ,val) state &#39;(table ,name ,key ,val)))">table-put</a>
  (name key val)
  `(<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> ',NAME
    '(,KEY ,VAL)
    state
    '(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> ,NAME ,KEY ,VAL)))</pre>
  </div>

<div class="form-block function" id="def-maybe-add-event-landmark" data-defines="MAYBE-ADD-EVENT-LANDMARK" data-references="VALUE,T,WORLD,TABLE-ALIST,ASSOC-EQ,CDR,EMPTY-EVENT-KEY,ACL2-SYSTEM-TABLE,TABLE-PUT,F-GET-GLOBAL,SUMMARY,ADD-TO-SET-EQ,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,GLOBAL-VALUE,CADAR,EVENT-LANDMARK,QUOTE,CAAR,EQ,AND,NOT,W,WRLD,LET,COND,STATE,DEFUN" data-used-by="MAKE-EVENT-FN,ENCAPSULATE-FN,EVAL-EVENT-LST" data-part-name="MAYBE-ADD-EVENT-LANDMARK" data-part-args="STATE" data-part-body="VALUE,T,WORLD,TABLE-ALIST,ASSOC-EQ,CDR,EMPTY-EVENT-KEY,ACL2-SYSTEM-TABLE,TABLE-PUT,F-GET-GLOBAL,SUMMARY,ADD-TO-SET-EQ,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,GLOBAL-VALUE,CADAR,EVENT-LANDMARK,QUOTE,CAAR,EQ,AND,NOT,STATE,W,WRLD,LET,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-ADD-EVENT-LANDMARK">maybe-add-event-landmark</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-add-event-landmark" data-sym="MAYBE-ADD-EVENT-LANDMARK" title="(defun maybe-add-event-landmark (state)
  (cond
   ((let ((wrld (w state)))
      (not
       (and (eq (caar wrld) &#39;event-landmark) (eq (cadar wrld) &#39;global-value))))
...">maybe-add-event-landmark</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld) 'event-landmark)
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> wrld) 'global-value)))) (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (<a class="sym-link system" href="axioms.html#def-add-to-set-eq" data-sym="ADD-TO-SET-EQ">add-to-set-eq</a> 'summary
             (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state))))
        (<a class="sym-link local-def" href="#def-table-put" data-sym="TABLE-PUT" title="(defmacro table-put (name key val)
  `(table-fn &#39;,name &#39;(,key ,val) state &#39;(table ,name ,key ,val)))">table-put</a> acl2-system-table
          'empty-event-key
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> 'empty-event-key
                (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-system-table world)))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-eval-event-lst" data-defines="EVAL-EVENT-LST" data-references="KNOWN-PACKAGE-ALIST,EQUAL,INTEGERP,ENCAPSULATE-PASS-2,ENCAPSULATE-PASS-1,REBUILD-EXPANSION,DESTRUCTURE-EXPANSION,BASE-FORM,WRAPPERS,MAKE-RECORD-EXPANSION?,ACONS,MAYBE-ADD-EVENT-LANDMARK,GLOBAL-SET,EXTENSION,SET-W,CERT-REPLAY,GLOBAL-VAL,CERTIFY-BOOK,IGNORED-VAL,MAKE-EVENT-PROBLEM,GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION,EXPANSION0,IGNORE,DECLARE,LD-EVISC-TUPLE,FMT1,COL,INHIBITED-SUMMARY-TYPES,VALUE,SUMMARY,FMT-ABBREV,ERROR,PROOFS-CO,CHAN,RECORD-EXPANSION,CONSP,AND,OR,CADR,VAL-PRIME,ERP-PRIME,REPLACE-STOBJS,RESULT,STOBJS-OUT,TUPLE,LET*,TRANS-EVAL-NO-WARNING,ACL2-RAW-EVAL,RAW-MODE-P,TRANS-ANS,CDR,NON-EVENT,ENCAPSULATE,MEMBER-EQ,CHK-EMBEDDED-EVENT-FORM,FORM,ERP,MV-LET,TERM-EVISC-TUPLE,CAR,LD-PRE-EVAL-PRINT,LD-LEVEL,1+,MAKE-LIST-AC,DEFUN-MODE-PROMPT-STRING,CURRENT-PACKAGE,F-GET-GLOBAL,LIST,FMS,EVENT,IO?,W,OLD-WRLD,LET,T,REVERSE,MV,LAST-MAKE-EVENT-EXPANSION,F-PUT-GLOBAL,PPROGN,NULL,COND,PRIMITIVE-EVENT-MACROS,DEFPKG,CONS,EVAL-SOME-PORTCULLIS-CMDS,QUOTE,EQ,IF,EVENT-MACROS,FLET,STATE,CHANNEL,CTX,CALLER,KPA,OTHER-CONTROL,LAST-VAL,IN-LOCAL-FLG,ENVIRONMENT,QUIETP,EV-LST,EXPANSION-ALIST,INDEX,DEFUN" data-used-by="EVAL-SOME-PORTCULLIS-CMDS,PROGN-FN1,PROCESS-EMBEDDED-EVENTS" data-part-name="EVAL-EVENT-LST" data-part-args="STATE,CHANNEL,CTX,CALLER,KPA,OTHER-CONTROL,LAST-VAL,IN-LOCAL-FLG,ENVIRONMENT,QUIETP,EV-LST,EXPANSION-ALIST,INDEX" data-part-body="KNOWN-PACKAGE-ALIST,EQUAL,INTEGERP,ENCAPSULATE-PASS-2,ENCAPSULATE-PASS-1,REBUILD-EXPANSION,DESTRUCTURE-EXPANSION,BASE-FORM,WRAPPERS,MAKE-RECORD-EXPANSION?,ACONS,MAYBE-ADD-EVENT-LANDMARK,GLOBAL-SET,EXTENSION,SET-W,CERT-REPLAY,GLOBAL-VAL,CERTIFY-BOOK,IGNORED-VAL,MAKE-EVENT-PROBLEM,GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION,EXPANSION0,IGNORE,DECLARE,LD-EVISC-TUPLE,FMT1,COL,INHIBITED-SUMMARY-TYPES,VALUE,SUMMARY,FMT-ABBREV,ERROR,PROOFS-CO,CHAN,RECORD-EXPANSION,CONSP,AND,OR,CADR,VAL-PRIME,ERP-PRIME,REPLACE-STOBJS,RESULT,STOBJS-OUT,TUPLE,LET*,TRANS-EVAL-NO-WARNING,ACL2-RAW-EVAL,RAW-MODE-P,TRANS-ANS,CDR,EVAL-EVENT-LST,INDEX,NON-EVENT,ENVIRONMENT,ENCAPSULATE,MEMBER-EQ,IN-LOCAL-FLG,CTX,CHK-EMBEDDED-EVENT-FORM,OTHER-CONTROL,FORM,ERP,MV-LET,TERM-EVISC-TUPLE,CAR,LD-PRE-EVAL-PRINT,LD-LEVEL,1+,MAKE-LIST-AC,DEFUN-MODE-PROMPT-STRING,CURRENT-PACKAGE,F-GET-GLOBAL,LIST,FMS,CHANNEL,EVENT,IO?,QUIETP,W,OLD-WRLD,LET,T,KPA,EXPANSION-ALIST,REVERSE,LAST-VAL,MV,STATE,LAST-MAKE-EVENT-EXPANSION,F-PUT-GLOBAL,PPROGN,EV-LST,NULL,COND,PRIMITIVE-EVENT-MACROS,DEFPKG,CONS,EVAL-SOME-PORTCULLIS-CMDS,QUOTE,EQ,IF,CALLER,EVENT-MACROS,FLET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVAL-EVENT-LST">eval-event-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-eval-event-lst" data-sym="EVAL-EVENT-LST" title="(defun eval-event-lst
       (index expansion-alist ev-lst quietp environment in-local-flg last-val
        other-control kpa caller ctx channel state)
  (flet ((event-macros (caller)
           (if (eq caller &#39;eval-some-portcullis-cmds)
...">eval-event-lst</a>
  (index expansion-alist
    ev-lst
    quietp
    environment
    in-local-flg
    last-val
    other-control
    kpa
    caller
    ctx
    channel
    state)
  (flet ((event-macros (caller)
       (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-eval-some-portcullis-cmds" data-sym="EVAL-SOME-PORTCULLIS-CMDS" title="(defun eval-some-portcullis-cmds (port-index portcullis-cmds ctx state)
  (state-global-let*
   ((ld-skip-proofsp &#39;include-book) (skip-proofs-by-system t))
   (mv-let (erp val expansion-alist ignore-kpa state)
           (eval-event-lst 0 nil (nthcdr port-index portcullis-cmds) t nil nil
...">eval-some-portcullis-cmds</a>)
         (cons '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> (primitive-event-macros))
         (primitive-event-macros))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ev-lst) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion nil state)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil last-val (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> expansion-alist) kpa state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((old-wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (quietp state)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
                  nil
                  state
                  (channel ev-lst)
                  (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~%~@0~sr ~@1~*2~#3~[~Q45~/~]~|"</span>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state))
                      (cons #\1 (<a class="sym-link system" href="rewrite.html#def-defun-mode-prompt-string" data-sym="DEFUN-MODE-PROMPT-STRING">defun-mode-prompt-string</a> state))
                      (cons #\2
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span>
                          <span class="string">"&gt;"</span>
                          <span class="string">"&gt;"</span>
                          <span class="string">"&gt;"</span>
                          (<a class="sym-link system" href="axioms.html#def-make-list-ac" data-sym="MAKE-LIST-AC">make-list-ac</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state)) nil nil)))
                      (cons #\3
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> state) <span class="keyword">:never</span>)
                          <span class="number">1</span>
                          <span class="number">0</span>))
                      (cons #\4 (car ev-lst))
                      (cons #\5 (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state))
                      (cons #\r <span class="string">""</span>))
                    channel
                    state
                    nil))))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp form state)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> other-control <span class="keyword">:non-event-ok</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (car ev-lst) state))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> (car ev-lst)
                    nil
                    (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
                    ctx
                    state
                    (event-macros caller)
                    in-local-flg
                    (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> environment)
                    other-control)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion nil state)
                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'non-event index nil nil state)))
                ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> form) (<a class="sym-link local-def" href="#def-eval-event-lst" data-sym="EVAL-EVENT-LST" title="(defun eval-event-lst
       (index expansion-alist ev-lst quietp environment in-local-flg last-val
        other-control kpa caller ctx channel state)
  (flet ((event-macros (caller)
           (if (eq caller &#39;eval-some-portcullis-cmds)
...">eval-event-lst</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> index)
                    expansion-alist
                    (cdr ev-lst)
                    quietp
                    environment
                    in-local-flg
                    nil
                    other-control
                    kpa
                    caller
                    ctx
                    channel
                    state))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp trans-ans state)
                    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion nil state)
                      (if (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state)
                        (<a class="sym-link local-def" href="#def-acl2-raw-eval" data-sym="ACL2-RAW-EVAL" title="(defun acl2-raw-eval (form state)
  (trans-eval-no-warning form &#39;top-level state t))">acl2-raw-eval</a> form state)
                        (trans-eval-no-warning form ctx state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
                    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tuple (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> other-control <span class="keyword">:non-event-ok</span>) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (car trans-ans)) (result (replace-stobjs <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (cdr trans-ans))))
                               (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))
                                 (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil result)
                                 result)))
                           (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cdr trans-ans)))) (erp-prime (car tuple))
                        (val-prime (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple)))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp erp-prime) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car ev-lst))
                                 (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car ev-lst)) '<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a>)) (let ((chan (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)))
                                  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> error
                                    nil
                                    state
                                    (chan ev-lst)
                                    (<a class="sym-link system" href="basis-a.html#def-fmt-abbrev" data-sym="FMT-ABBREV">fmt-abbrev</a> <span class="string">"~%Note: The error reported above ~
                                           occurred when processing the ~
                                           make-event expansion of the form ~
                                           ~x0."</span>
                                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car ev-lst))))
                                      <span class="number">0</span>
                                      chan
                                      state
                                      <span class="string">"~|~%"</span>))))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                            (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion nil state)
                            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (if erp
                                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> erp-prime))
                              index
                              nil
                              kpa
                              state)))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (quietp state)
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> summary
                                  nil
                                  state
                                  (val-prime channel)
                                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> '<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a>
                                       (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibited-summary-types state)) state)
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (col state)
                                        (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> <span class="string">"~y0"</span>
                                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 val-prime))
                                          <span class="number">0</span>
                                          channel
                                          state
                                          (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> state))
                                        (declare (ignore col))
                                        state))))))
                            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp expansion0 state)
                              (<a class="sym-link local-def" href="#def-get-and-chk-last-make-event-expansion" data-sym="GET-AND-CHK-LAST-MAKE-EVENT-EXPANSION" title="(defun get-and-chk-last-make-event-expansion (form wrld ctx state names)
  (let ((expansion (f-get-global &#39;last-make-event-expansion state)))
    (cond
     (expansion
      (mv-let (erp val state)
...">get-and-chk-last-make-event-expansion</a> (car ev-lst)
                                (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
                                ctx
                                state
                                (event-macros caller))
                              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion nil state)
                                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'make-event-problem index nil nil state)))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp ignored-val state)
                                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>)
                                         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'cert-replay (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension
                                            (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'cert-replay (cons index old-wrld) (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                                            state)
                                          (<a class="sym-link local-def" href="#def-maybe-add-event-landmark" data-sym="MAYBE-ADD-EVENT-LANDMARK" title="(defun maybe-add-event-landmark (state)
  (cond
   ((let ((wrld (w state)))
      (not
       (and (eq (caar wrld) &#39;event-landmark) (eq (cadar wrld) &#39;global-value))))
...">maybe-add-event-landmark</a> state)))
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
                                    (declare (ignore ignored-val))
                                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'make-event-problem index nil nil state))
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-eval-event-lst" data-sym="EVAL-EVENT-LST" title="(defun eval-event-lst
       (index expansion-alist ev-lst quietp environment in-local-flg last-val
        other-control kpa caller ctx channel state)
  (flet ((event-macros (caller)
           (if (eq caller &#39;eval-some-portcullis-cmds)
...">eval-event-lst</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> index)
                                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (expansion0 (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> index
                                                (<a class="sym-link local-def" href="#def-make-record-expansion_3F" data-sym="MAKE-RECORD-EXPANSION?" title="(defun make-record-expansion? (event expansion r-e-p)
  (cond ((not r-e-p) expansion)
        (t
         (case-match event
                     ((&#39;record-expansion a &amp;)
...">make-record-expansion?</a> (car ev-lst)
                                                  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (wrappers base-form)
                                                    (<a class="sym-link local-def" href="#def-destructure-expansion" data-sym="DESTRUCTURE-EXPANSION" title="(defun destructure-expansion (form)
  (declare (xargs :guard (true-listp form)))
  (cond
   ((member-eq (car form) *destructure-expansion-wrappers*)
    (mv-let (wrappers base-form) (destructure-expansion (car (last form)))
...">destructure-expansion</a> form)
                                                    (declare (ignore base-form))
                                                    (<a class="sym-link local-def" href="#def-rebuild-expansion" data-sym="REBUILD-EXPANSION" title="(defun rebuild-expansion (wrappers form)
  (cond ((endp wrappers) form)
        (t
         (append (car wrappers)
                 (list (rebuild-expansion (cdr wrappers) form))))))">rebuild-expansion</a> wrappers expansion0))
                                                  (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> caller '(encapsulate-pass-1 <a class="sym-link local-def" href="#def-encapsulate-pass-2" data-sym="ENCAPSULATE-PASS-2" title="(defun encapsulate-pass-2
       (insigs kwd-value-list-lst ev-lst saved-acl2-defaults-table only-pass-p
        ctx state)
  (let* ((wrld1 (w state))
         (saved-unknown-constraints-table
...">encapsulate-pass-2</a>)))
                                                expansion-alist))
                                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> expansion-alist))
                                          (cdr ev-lst)
                                          quietp
                                          environment
                                          in-local-flg
                                          val-prime
                                          other-control
                                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> kpa)
                                               (integerp kpa)
                                               (equal kpa (<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> state))) kpa)
                                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> index))
                                          caller
                                          ctx
                                          channel
                                          state)))))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-equal-insig" data-defines="EQUAL-INSIG" data-references="CADDDR,CADDR,CAR,EQUAL,AND,INSIG2,INSIG1,DEFUN" data-used-by="TILDE-*-BAD-INSIGS-PHRASE1,BAD-SIGNATURE-ALIST" data-part-name="EQUAL-INSIG" data-part-args="INSIG2,INSIG1" data-part-body="CADDDR,CADDR,INSIG2,INSIG1,CAR,EQUAL,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EQUAL-INSIG">equal-insig</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-equal-insig" data-sym="EQUAL-INSIG" title="(defun equal-insig (insig1 insig2)
  (and (equal (car insig1) (car insig2)) (equal (caddr insig1) (caddr insig2))
       (equal (cadddr insig1) (cadddr insig2))))">equal-insig</a>
  (insig1 insig2)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (car insig1) (car insig2))
    (equal (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> insig1) (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> insig2))
    (equal (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> insig1) (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> insig2))))</pre>
  </div>

<div class="form-block function" id="def-bad-signature-alist" data-defines="BAD-SIGNATURE-ALIST" data-references="CONS,EQUAL-INSIG,AND,STOBJS-OUT,STOBJS-IN,FORMALS,LIST,ACTUAL-INSIG,FN,CAR,DECLARED-INSIG,LET*,T,CDR,CAAR,MEMBER-EQ,NULL,COND,IGNORABLE,DECLARE,WRLD,UDF-FNS,KWD-VALUE-LIST-LST,INSIGS,DEFUN" data-used-by="CHK-ACCEPTABLE-ENCAPSULATE2" data-part-name="BAD-SIGNATURE-ALIST" data-part-args="WRLD,UDF-FNS,KWD-VALUE-LIST-LST,INSIGS" data-part-declare="KWD-VALUE-LIST-LST,IGNORABLE,DECLARE" data-part-body="CONS,EQUAL-INSIG,AND,STOBJS-OUT,STOBJS-IN,FORMALS,LIST,ACTUAL-INSIG,FN,CAR,DECLARED-INSIG,LET*,T,WRLD,KWD-VALUE-LIST-LST,CDR,BAD-SIGNATURE-ALIST,UDF-FNS,CAAR,MEMBER-EQ,INSIGS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BAD-SIGNATURE-ALIST">bad-signature-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-bad-signature-alist" data-sym="BAD-SIGNATURE-ALIST" title="(defun bad-signature-alist (insigs kwd-value-list-lst udf-fns wrld)
  (declare (ignorable kwd-value-list-lst))
  (cond ((null insigs) nil)
        ((member-eq (caar insigs) udf-fns)
         (bad-signature-alist (cdr insigs) (cdr kwd-value-list-lst) udf-fns
...">bad-signature-alist</a>
  (insigs kwd-value-list-lst udf-fns wrld)
  (declare (ignorable kwd-value-list-lst))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> insigs) nil)
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> insigs) udf-fns) (<a class="sym-link local-def" href="#def-bad-signature-alist" data-sym="BAD-SIGNATURE-ALIST" title="(defun bad-signature-alist (insigs kwd-value-list-lst udf-fns wrld)
  (declare (ignorable kwd-value-list-lst))
  (cond ((null insigs) nil)
        ((member-eq (caar insigs) udf-fns)
         (bad-signature-alist (cdr insigs) (cdr kwd-value-list-lst) udf-fns
...">bad-signature-alist</a> (cdr insigs)
        (cdr kwd-value-list-lst)
        udf-fns
        wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((declared-insig (car insigs)) (fn (car declared-insig))
          (actual-insig (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn
              (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> fn wrld)
              (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> fn wrld)
              (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> fn wrld))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-equal-insig" data-sym="EQUAL-INSIG" title="(defun equal-insig (insig1 insig2)
  (and (equal (car insig1) (car insig2)) (equal (caddr insig1) (caddr insig2))
       (equal (cadddr insig1) (cadddr insig2))))">equal-insig</a> declared-insig actual-insig)) (<a class="sym-link local-def" href="#def-bad-signature-alist" data-sym="BAD-SIGNATURE-ALIST" title="(defun bad-signature-alist (insigs kwd-value-list-lst udf-fns wrld)
  (declare (ignorable kwd-value-list-lst))
  (cond ((null insigs) nil)
        ((member-eq (caar insigs) udf-fns)
         (bad-signature-alist (cdr insigs) (cdr kwd-value-list-lst) udf-fns
...">bad-signature-alist</a> (cdr insigs)
              (cdr kwd-value-list-lst)
              udf-fns
              wrld))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn declared-insig actual-insig)
              (<a class="sym-link local-def" href="#def-bad-signature-alist" data-sym="BAD-SIGNATURE-ALIST" title="(defun bad-signature-alist (insigs kwd-value-list-lst udf-fns wrld)
  (declare (ignorable kwd-value-list-lst))
  (cond ((null insigs) nil)
        ((member-eq (caar insigs) udf-fns)
         (bad-signature-alist (cdr insigs) (cdr kwd-value-list-lst) udf-fns
...">bad-signature-alist</a> (cdr insigs)
                (cdr kwd-value-list-lst)
                udf-fns
                wrld))))))))</pre>
  </div>

<div class="form-block macro" id="def-if-ns" data-defines="IF-NS" data-references="HARD,ER,QUASIQUOTE,IF,QUOTE,LIST,IGNORE,DECLARE,CTX,FBR,TBR,TEST,DEFMACRO" data-used-by="TILDE-*-BAD-INSIGS-PHRASE1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="IF-NS">if-ns</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-if-ns" data-sym="IF-NS" title="(defmacro if-ns (test tbr fbr ctx)
  (declare (ignore tbr))
  (list &#39;if test
        `(er hard ,ctx
             &quot;Unexpected intrusion of non-standard analysis into standard ~
...">if-ns</a>
  (test tbr fbr ctx)
  (declare (ignore tbr))
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'if
    test
    `(<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
      ,CTX
      <span class="string">"Unexpected intrusion of non-standard analysis into standard ~
              ACL2!  Please contact the implementors."</span>)
    fbr))</pre>
  </div>

<div class="form-block function" id="def-tilde-_2A-bad-insigs-phrase1" data-defines="TILDE-*-BAD-INSIGS-PHRASE1" data-references="CDR,QUOTE,UNPARSE-SIGNATURE,MSG,EQUAL-INSIG,IF-NS,CONS,CADDAR,ACT-INSIG,CADAR,DCL-INSIG,CAAR,FN,LET*,T,NULL,COND,ALIST,DEFUN" data-used-by="TILDE-*-BAD-INSIGS-PHRASE" data-part-name="TILDE-*-BAD-INSIGS-PHRASE1" data-part-args="ALIST" data-part-body="CDR,TILDE-*-BAD-INSIGS-PHRASE1,QUOTE,UNPARSE-SIGNATURE,MSG,EQUAL-INSIG,IF-NS,CONS,CADDAR,ACT-INSIG,CADAR,DCL-INSIG,CAAR,FN,LET*,T,ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-*-BAD-INSIGS-PHRASE1">tilde-*-bad-insigs-phrase1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_2A-bad-insigs-phrase1" data-sym="TILDE-*-BAD-INSIGS-PHRASE1" title="(defun tilde-*-bad-insigs-phrase1 (alist)
  (cond ((null alist) nil)
        (t
         (let* ((fn (caar alist))
                (dcl-insig (cadar alist))
...">tilde-*-bad-insigs-phrase1</a>
  (alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> alist) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (dcl-insig (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> alist))
          (act-insig (<a class="sym-link system" href="axioms.html#def-caddar" data-sym="CADDAR">caddar</a> alist)))
        (cons (<a class="sym-link local-def" href="#def-if-ns" data-sym="IF-NS" title="(defmacro if-ns (test tbr fbr ctx)
  (declare (ignore tbr))
  (list &#39;if test
        `(er hard ,ctx
             &quot;Unexpected intrusion of non-standard analysis into standard ~
...">if-ns</a> (<a class="sym-link local-def" href="#def-equal-insig" data-sym="EQUAL-INSIG" title="(defun equal-insig (insig1 insig2)
  (and (equal (car insig1) (car insig2)) (equal (caddr insig1) (caddr insig2))
       (equal (cadddr insig1) (cadddr insig2))))">equal-insig</a> dcl-insig act-insig)
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The signature you declared for ~x0 and the local ~
                       witness for that function do not agree on whether the ~
                       function is classical.  If you are seeing this error ~
                       in the context of an attempt to admit a call of ~
                       DEFUN-SK without a :CLASSICALP keyword supplied, then ~
                       a solution is likely to be the addition of :CLASSICALP ~
                       ~x1 to the DEFUN-SK form."</span>
              fn
              nil)
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The signature you declared for ~x0 is ~x1, but ~
                       the signature of your local witness for it is ~
                       ~x2."</span>
              fn
              (<a class="sym-link system" href="defuns.html#def-unparse-signature" data-sym="UNPARSE-SIGNATURE">unparse-signature</a> dcl-insig)
              (<a class="sym-link system" href="defuns.html#def-unparse-signature" data-sym="UNPARSE-SIGNATURE">unparse-signature</a> act-insig))
            '<a class="sym-link local-def" href="#def-tilde-_2A-bad-insigs-phrase1" data-sym="TILDE-*-BAD-INSIGS-PHRASE1" title="(defun tilde-*-bad-insigs-phrase1 (alist)
  (cond ((null alist) nil)
        (t
         (let* ((fn (caar alist))
                (dcl-insig (cadar alist))
...">tilde-*-bad-insigs-phrase1</a>)
          (<a class="sym-link local-def" href="#def-tilde-_2A-bad-insigs-phrase1" data-sym="TILDE-*-BAD-INSIGS-PHRASE1" title="(defun tilde-*-bad-insigs-phrase1 (alist)
  (cond ((null alist) nil)
        (t
         (let* ((fn (caar alist))
                (dcl-insig (cadar alist))
...">tilde-*-bad-insigs-phrase1</a> (cdr alist)))))))</pre>
  </div>

<div class="form-block function" id="def-tilde-_2A-bad-insigs-phrase" data-defines="TILDE-*-BAD-INSIGS-PHRASE" data-references="TILDE-*-BAD-INSIGS-PHRASE1,LIST,ALIST,DEFUN" data-used-by="CHK-ACCEPTABLE-ENCAPSULATE2" data-part-name="TILDE-*-BAD-INSIGS-PHRASE" data-part-args="ALIST" data-part-body="ALIST,TILDE-*-BAD-INSIGS-PHRASE1,LIST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-*-BAD-INSIGS-PHRASE">tilde-*-bad-insigs-phrase</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_2A-bad-insigs-phrase" data-sym="TILDE-*-BAD-INSIGS-PHRASE" title="(defun tilde-*-bad-insigs-phrase (alist)
  (list &quot;&quot; &quot;~@*&quot; &quot;~@*&quot; &quot;~@*&quot; (tilde-*-bad-insigs-phrase1 alist)))">tilde-*-bad-insigs-phrase</a>
  (alist)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span>
    <span class="string">"~@*"</span>
    <span class="string">"~@*"</span>
    <span class="string">"~@*"</span>
    (<a class="sym-link local-def" href="#def-tilde-_2A-bad-insigs-phrase1" data-sym="TILDE-*-BAD-INSIGS-PHRASE1" title="(defun tilde-*-bad-insigs-phrase1 (alist)
  (cond ((null alist) nil)
        (t
         (let* ((fn (caar alist))
                (dcl-insig (cadar alist))
...">tilde-*-bad-insigs-phrase1</a> alist)))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-encapsulate2" data-defines="CHK-ACCEPTABLE-ENCAPSULATE2" data-references="OR,MV,TILDE-*-BAD-INSIGS-PHRASE,STRIP-CARS,BAD-SIGNATURE-ALIST,BAD-SIG-ALIST,ERP2,IGNORE,DECLARE,VALUE,T,MERGE-SORT-SYMBOL<,SOFT,ER,COND,VAL,ERP1,MV-LET,COLLECT-NON-LOGIC-MODE,UDF-FNS,LET,STATE,CTX,WRLD,KWD-VALUE-LIST-LST,INSIGS,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="CHK-ACCEPTABLE-ENCAPSULATE2" data-part-args="STATE,CTX,WRLD,KWD-VALUE-LIST-LST,INSIGS" data-part-body="OR,MV,TILDE-*-BAD-INSIGS-PHRASE,STRIP-CARS,KWD-VALUE-LIST-LST,BAD-SIGNATURE-ALIST,BAD-SIG-ALIST,ERP2,IGNORE,DECLARE,VALUE,T,MERGE-SORT-SYMBOL<,CTX,SOFT,ER,COND,STATE,VAL,ERP1,MV-LET,WRLD,INSIGS,COLLECT-NON-LOGIC-MODE,UDF-FNS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-ENCAPSULATE2">chk-acceptable-encapsulate2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-encapsulate2" data-sym="CHK-ACCEPTABLE-ENCAPSULATE2" title="(defun chk-acceptable-encapsulate2 (insigs kwd-value-list-lst wrld ctx state)
  (let ((udf-fns (collect-non-logic-mode insigs wrld)))
    (mv-let (erp1 val state)
            (cond
             (udf-fns
...">chk-acceptable-encapsulate2</a>
  (insigs kwd-value-list-lst wrld ctx state)
  (let ((udf-fns (<a class="sym-link system" href="history-management.html#def-collect-non-logic-mode" data-sym="COLLECT-NON-LOGIC-MODE">collect-non-logic-mode</a> insigs wrld)))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp1 val state)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (udf-fns (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"You provided signatures for ~&amp;0, but ~#0~[that function ~
            was~/those functions were~] not defined in :logic mode by the ~
            encapsulated event list.  See :DOC encapsulate."</span>
            (<a class="sym-link system" href="history-management.html#def-merge-sort-symbol_3C" data-sym="MERGE-SORT-SYMBOL&lt;">merge-sort-symbol&lt;</a> udf-fns)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
      (declare (ignore val))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp2 val state)
        (let ((bad-sig-alist (<a class="sym-link local-def" href="#def-bad-signature-alist" data-sym="BAD-SIGNATURE-ALIST" title="(defun bad-signature-alist (insigs kwd-value-list-lst udf-fns wrld)
  (declare (ignorable kwd-value-list-lst))
  (cond ((null insigs) nil)
        ((member-eq (caar insigs) udf-fns)
         (bad-signature-alist (cdr insigs) (cdr kwd-value-list-lst) udf-fns
...">bad-signature-alist</a> insigs kwd-value-list-lst udf-fns wrld)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-sig-alist (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The signature~#0~[~/s~] provided for the function~#0~[~/s~] ~
               ~&amp;0 ~#0~[is~/are~] incorrect.  See :DOC encapsulate.  ~*1"</span>
                (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> bad-sig-alist)
                (<a class="sym-link local-def" href="#def-tilde-_2A-bad-insigs-phrase" data-sym="TILDE-*-BAD-INSIGS-PHRASE" title="(defun tilde-*-bad-insigs-phrase (alist)
  (list &quot;&quot; &quot;~@*&quot; &quot;~@*&quot; &quot;~@*&quot; (tilde-*-bad-insigs-phrase1 alist)))">tilde-*-bad-insigs-phrase</a> bad-sig-alist)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
        (declare (ignore val))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp1 erp2) nil state)))))</pre>
  </div>

<div class="form-block function" id="def-conjoin-into-alist" data-defines="CONJOIN-INTO-ALIST" data-references="CAR,T,CDR,CDAR,CONJOIN2,CAAR,EQ,CONS,LIST,NULL,COND,ALIST,THM,FN,DEFUN" data-part-name="CONJOIN-INTO-ALIST" data-part-args="ALIST,THM,FN" data-part-body="CONJOIN-INTO-ALIST,CAR,T,CDR,CDAR,CONJOIN2,CAAR,EQ,THM,FN,CONS,LIST,ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONJOIN-INTO-ALIST">conjoin-into-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-conjoin-into-alist" data-sym="CONJOIN-INTO-ALIST" title="(defun conjoin-into-alist (fn thm alist)
  (cond ((null alist) (list (cons fn thm)))
        ((eq fn (caar alist))
         (cons (cons fn (conjoin2 thm (cdar alist))) (cdr alist)))
        (t (cons (car alist) (conjoin-into-alist fn thm (cdr alist))))))">conjoin-into-alist</a>
  (fn <a class="sym-link system" href="defthm.html#def-thm" data-sym="THM">thm</a> alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> alist) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons fn <a class="sym-link system" href="defthm.html#def-thm" data-sym="THM">thm</a>)))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (cons (cons fn (<a class="sym-link system" href="axioms.html#def-conjoin2" data-sym="CONJOIN2">conjoin2</a> <a class="sym-link system" href="defthm.html#def-thm" data-sym="THM">thm</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist))) (cdr alist)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car alist) (<a class="sym-link local-def" href="#def-conjoin-into-alist" data-sym="CONJOIN-INTO-ALIST" title="(defun conjoin-into-alist (fn thm alist)
  (cond ((null alist) (list (cons fn thm)))
        ((eq fn (caar alist))
         (cons (cons fn (conjoin2 thm (cdar alist))) (cdr alist)))
        (t (cons (car alist) (conjoin-into-alist fn thm (cdr alist))))))">conjoin-into-alist</a> fn <a class="sym-link system" href="defthm.html#def-thm" data-sym="THM">thm</a> (cdr alist))))))</pre>
  </div>

<div class="form-block function" id="def-classes-theorems" data-defines="CLASSES-THEOREMS" data-references="CONS,IF,CAR,CDR,ASSOC-KEYWORD,CADR,TERM,LET,T,NULL,COND,CLASSES,DEFUN" data-used-by="CONSTRAINT-LST-ETC-INTRODUCED" data-part-name="CLASSES-THEOREMS" data-part-args="CLASSES" data-part-body="CLASSES-THEOREMS,CONS,IF,CAR,CDR,ASSOC-KEYWORD,CADR,TERM,LET,T,CLASSES,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CLASSES-THEOREMS">classes-theorems</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-classes-theorems" data-sym="CLASSES-THEOREMS" title="(defun classes-theorems (classes)
  (cond ((null classes) nil)
        (t
         (let ((term (cadr (assoc-keyword :corollary (cdr (car classes))))))
           (if term
...">classes-theorems</a>
  (classes)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> classes) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((term (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:corollary</span> (cdr (car classes))))))
        (if term
          (cons term (<a class="sym-link local-def" href="#def-classes-theorems" data-sym="CLASSES-THEOREMS" title="(defun classes-theorems (classes)
  (cond ((null classes) nil)
        (t
         (let ((term (cadr (assoc-keyword :corollary (cdr (car classes))))))
           (if term
...">classes-theorems</a> (cdr classes)))
          (<a class="sym-link local-def" href="#def-classes-theorems" data-sym="CLASSES-THEOREMS" title="(defun classes-theorems (classes)
  (cond ((null classes) nil)
        (t
         (let ((term (cadr (assoc-keyword :corollary (cdr (car classes))))))
           (if term
...">classes-theorems</a> (cdr classes)))))))</pre>
  </div>

<div class="form-block function" id="def-constraint-lst-etc-introduced2" data-defines="CONSTRAINT-LST-ETC-INTRODUCED2" data-references="T,LENGTH,MAKE-LIST,CONS,CONSTRAINT-LST-ETC-UNION,FLATTEN-ANDS-IN-LIT,CONJUNCTS,LET,CDR,CAR,FFNNAMESP,ENDP,COND,ANS-CONSTRAINT-LST-ETC,FNS,ORIGINS,THMS,DEFUN" data-used-by="CONSTRAINT-LST-ETC-INTRODUCED1" data-part-name="CONSTRAINT-LST-ETC-INTRODUCED2" data-part-args="ANS-CONSTRAINT-LST-ETC,FNS,ORIGINS,THMS" data-part-body="T,LENGTH,MAKE-LIST,CONS,CONSTRAINT-LST-ETC-UNION,FLATTEN-ANDS-IN-LIT,CONJUNCTS,LET,ORIGINS,CDR,CONSTRAINT-LST-ETC-INTRODUCED2,CAR,FNS,FFNNAMESP,ANS-CONSTRAINT-LST-ETC,THMS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONSTRAINT-LST-ETC-INTRODUCED2">constraint-lst-etc-introduced2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-constraint-lst-etc-introduced2" data-sym="CONSTRAINT-LST-ETC-INTRODUCED2" title="(defun constraint-lst-etc-introduced2 (thms origins fns ans-constraint-lst-etc)
  (cond ((endp thms) ans-constraint-lst-etc)
        ((ffnnamesp fns (car thms))
         (constraint-lst-etc-introduced2 (cdr thms) (cdr origins) fns
                                         (let ((conjuncts
...">constraint-lst-etc-introduced2</a>
  (thms origins fns ans-constraint-lst-etc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> thms) ans-constraint-lst-etc)
    ((<a class="sym-link system" href="rewrite.html#def-ffnnamesp" data-sym="FFNNAMESP">ffnnamesp</a> fns (car thms)) (<a class="sym-link local-def" href="#def-constraint-lst-etc-introduced2" data-sym="CONSTRAINT-LST-ETC-INTRODUCED2" title="(defun constraint-lst-etc-introduced2 (thms origins fns ans-constraint-lst-etc)
  (cond ((endp thms) ans-constraint-lst-etc)
        ((ffnnamesp fns (car thms))
         (constraint-lst-etc-introduced2 (cdr thms) (cdr origins) fns
                                         (let ((conjuncts
...">constraint-lst-etc-introduced2</a> (cdr thms)
        (cdr origins)
        fns
        (let ((conjuncts (flatten-ands-in-lit (car thms))))
          (<a class="sym-link system" href="defthm.html#def-constraint-lst-etc-union" data-sym="CONSTRAINT-LST-ETC-UNION">constraint-lst-etc-union</a> (cons conjuncts
              (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> conjuncts)
                <span class="keyword">:initial-element</span> (car origins)))
            ans-constraint-lst-etc))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-constraint-lst-etc-introduced2" data-sym="CONSTRAINT-LST-ETC-INTRODUCED2" title="(defun constraint-lst-etc-introduced2 (thms origins fns ans-constraint-lst-etc)
  (cond ((endp thms) ans-constraint-lst-etc)
        ((ffnnamesp fns (car thms))
         (constraint-lst-etc-introduced2 (cdr thms) (cdr origins) fns
                                         (let ((conjuncts
...">constraint-lst-etc-introduced2</a> (cdr thms)
        (cdr origins)
        fns
        ans-constraint-lst-etc))))</pre>
  </div>

<div class="form-block function" id="def-constraint-lst-etc-introduced1" data-defines="CONSTRAINT-LST-ETC-INTRODUCED1" data-references="CDR,CAR,CONSTRAINT-LST-ETC-INTRODUCED2,ANS-CONSTRAINT-LST-ETC,FNS,CONSTRAINT-LST-ETC,DEFUN" data-used-by="CONSTRAINT-LST-ETC-INTRODUCED" data-part-name="CONSTRAINT-LST-ETC-INTRODUCED1" data-part-args="ANS-CONSTRAINT-LST-ETC,FNS,CONSTRAINT-LST-ETC" data-part-body="ANS-CONSTRAINT-LST-ETC,FNS,CDR,CONSTRAINT-LST-ETC,CAR,CONSTRAINT-LST-ETC-INTRODUCED2" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONSTRAINT-LST-ETC-INTRODUCED1">constraint-lst-etc-introduced1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-constraint-lst-etc-introduced1" data-sym="CONSTRAINT-LST-ETC-INTRODUCED1" title="(defun constraint-lst-etc-introduced1
       (constraint-lst-etc fns ans-constraint-lst-etc)
  (constraint-lst-etc-introduced2 (car constraint-lst-etc)
                                  (cdr constraint-lst-etc) fns
                                  ans-constraint-lst-etc))">constraint-lst-etc-introduced1</a>
  (<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a> fns ans-constraint-lst-etc)
  (<a class="sym-link local-def" href="#def-constraint-lst-etc-introduced2" data-sym="CONSTRAINT-LST-ETC-INTRODUCED2" title="(defun constraint-lst-etc-introduced2 (thms origins fns ans-constraint-lst-etc)
  (cond ((endp thms) ans-constraint-lst-etc)
        ((ffnnamesp fns (car thms))
         (constraint-lst-etc-introduced2 (cdr thms) (cdr origins) fns
                                         (let ((conjuncts
...">constraint-lst-etc-introduced2</a> (car <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>)
    (cdr <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>)
    fns
    ans-constraint-lst-etc))</pre>
  </div>

<div class="form-block function" id="def-new-trips-rec" data-defines="NEW-TRIPS-REC" data-references="T,CDAR,CONS,HONS-ACONS,*ACL2-PROPERTY-UNBOUND*,CAR,CDDR,EQ,CDR,CADAR,ASSOC-EQ,AND,CAAR,HONS-GET,KEY-ALIST,LET,REVERSE,FAST-ALIST-FREE,PROG2$,EQUAL,COND,ACC,SEEN,PROTO-WRLD3,WRLD3,DEFUN" data-used-by="NEW-TRIPS" data-part-name="NEW-TRIPS-REC" data-part-args="ACC,SEEN,PROTO-WRLD3,WRLD3" data-part-body="T,CDAR,CONS,HONS-ACONS,*ACL2-PROPERTY-UNBOUND*,CAR,CDDR,EQ,NEW-TRIPS-REC,CDR,CADAR,ASSOC-EQ,AND,CAAR,HONS-GET,KEY-ALIST,LET,ACC,REVERSE,SEEN,FAST-ALIST-FREE,PROG2$,PROTO-WRLD3,WRLD3,EQUAL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEW-TRIPS-REC">new-trips-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-new-trips-rec" data-sym="NEW-TRIPS-REC" title="(defun new-trips-rec (wrld3 proto-wrld3 seen acc)
  (cond
   ((equal wrld3 proto-wrld3) (prog2$ (fast-alist-free seen) (reverse acc)))
   ((let ((key-alist (hons-get (caar wrld3) seen)))
      (and key-alist (assoc-eq (cadar wrld3) (cdr key-alist))))
...">new-trips-rec</a>
  (wrld3 proto-wrld3 seen acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal wrld3 proto-wrld3) (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (fast-alist-free seen) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc)))
    ((let ((key-alist (hons-get (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld3) seen)))
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> key-alist (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> wrld3) (cdr key-alist)))) (<a class="sym-link local-def" href="#def-new-trips-rec" data-sym="NEW-TRIPS-REC" title="(defun new-trips-rec (wrld3 proto-wrld3 seen acc)
  (cond
   ((equal wrld3 proto-wrld3) (prog2$ (fast-alist-free seen) (reverse acc)))
   ((let ((key-alist (hons-get (caar wrld3) seen)))
      (and key-alist (assoc-eq (cadar wrld3) (cdr key-alist))))
...">new-trips-rec</a> (cdr wrld3) proto-wrld3 seen acc))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld3)) <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>) (<a class="sym-link local-def" href="#def-new-trips-rec" data-sym="NEW-TRIPS-REC" title="(defun new-trips-rec (wrld3 proto-wrld3 seen acc)
  (cond
   ((equal wrld3 proto-wrld3) (prog2$ (fast-alist-free seen) (reverse acc)))
   ((let ((key-alist (hons-get (caar wrld3) seen)))
      (and key-alist (assoc-eq (cadar wrld3) (cdr key-alist))))
...">new-trips-rec</a> (cdr wrld3)
        proto-wrld3
        (hons-acons (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld3)
          (cons (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> wrld3) (cdr (hons-get (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld3) seen)))
          seen)
        acc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-new-trips-rec" data-sym="NEW-TRIPS-REC" title="(defun new-trips-rec (wrld3 proto-wrld3 seen acc)
  (cond
   ((equal wrld3 proto-wrld3) (prog2$ (fast-alist-free seen) (reverse acc)))
   ((let ((key-alist (hons-get (caar wrld3) seen)))
      (and key-alist (assoc-eq (cadar wrld3) (cdr key-alist))))
...">new-trips-rec</a> (cdr wrld3)
        proto-wrld3
        (hons-acons (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld3)
          (cons (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> wrld3) (cdr (hons-get (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld3) seen)))
          seen)
        (cons (car wrld3) acc)))))</pre>
  </div>

<div class="form-block function" id="def-new-trips" data-defines="NEW-TRIPS" data-references="NEW-TRIPS-REC,PROTO-WRLD3,WRLD3,DEFUN" data-used-by="BOOKDATA-ALIST,ENCAPSULATE-PASS-2,ENCAPSULATE-CONSTRAINT,EXPORTED-FUNCTION-NAMES,CONSTRAINED-FUNCTIONS,CONSTRAINT-LST-ETC-INTRODUCED" data-part-name="NEW-TRIPS" data-part-args="PROTO-WRLD3,WRLD3" data-part-body="PROTO-WRLD3,WRLD3,NEW-TRIPS-REC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEW-TRIPS">new-trips</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>
  (wrld3 proto-wrld3)
  (<a class="sym-link local-def" href="#def-new-trips-rec" data-sym="NEW-TRIPS-REC" title="(defun new-trips-rec (wrld3 proto-wrld3 seen acc)
  (cond
   ((equal wrld3 proto-wrld3) (prog2$ (fast-alist-free seen) (reverse acc)))
   ((let ((key-alist (hons-get (caar wrld3) seen)))
      (and key-alist (assoc-eq (cadar wrld3) (cdr key-alist))))
...">new-trips-rec</a> wrld3 proto-wrld3 nil nil))</pre>
  </div>

<div class="form-block function" id="def-constraint-lst-etc-introduced" data-defines="CONSTRAINT-LST-ETC-INTRODUCED" data-references="OTHERWISE,COROLLARY,CLASSES-THEOREMS,THMS,CLASSES,MAKE-ORIGIN,LENGTH,MAKE-LIST,CONS,CONSTRAINT-LST-ETC-UNION,FLATTEN-ANDS-IN-LIT,CONJUNCTS,FFNNAMESP,THEOREM,CONSTRAINT-LST-ETC-INTRODUCED1,SYMBOLP,QUOTE,HARD,ER,UNKNOWN-CONSTRAINTS-P,CDDR,CONSTRAINT-LST-ETC,CADR,CASE,CAR,TRIP,LET,CDR,T,ENDP,COND,ANS-CONSTRAINT-LST-ETC,FNS,NEW-TRIPS,DEFUN" data-used-by="ENCAPSULATE-CONSTRAINT" data-part-name="CONSTRAINT-LST-ETC-INTRODUCED" data-part-args="ANS-CONSTRAINT-LST-ETC,FNS,NEW-TRIPS" data-part-body="OTHERWISE,COROLLARY,CLASSES-THEOREMS,THMS,CLASSES,MAKE-ORIGIN,LENGTH,MAKE-LIST,CONS,CONSTRAINT-LST-ETC-UNION,FLATTEN-ANDS-IN-LIT,CONJUNCTS,FFNNAMESP,THEOREM,CONSTRAINT-LST-ETC-INTRODUCED1,SYMBOLP,QUOTE,HARD,ER,UNKNOWN-CONSTRAINTS-P,CDDR,CONSTRAINT-LST-ETC,CADR,CASE,CAR,TRIP,LET,FNS,CDR,CONSTRAINT-LST-ETC-INTRODUCED,T,ANS-CONSTRAINT-LST-ETC,NEW-TRIPS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONSTRAINT-LST-ETC-INTRODUCED">constraint-lst-etc-introduced</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-constraint-lst-etc-introduced" data-sym="CONSTRAINT-LST-ETC-INTRODUCED" title="(defun constraint-lst-etc-introduced (new-trips fns ans-constraint-lst-etc)
  (cond ((endp new-trips) ans-constraint-lst-etc)
        (t
         (constraint-lst-etc-introduced (cdr new-trips) fns
                                        (let ((trip (car new-trips)))
...">constraint-lst-etc-introduced</a>
  (<a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a> fns ans-constraint-lst-etc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>) ans-constraint-lst-etc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-constraint-lst-etc-introduced" data-sym="CONSTRAINT-LST-ETC-INTRODUCED" title="(defun constraint-lst-etc-introduced (new-trips fns ans-constraint-lst-etc)
  (cond ((endp new-trips) ans-constraint-lst-etc)
        (t
         (constraint-lst-etc-introduced (cdr new-trips) fns
                                        (let ((trip (car new-trips)))
...">constraint-lst-etc-introduced</a> (cdr <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>)
        fns
        (let ((trip (car <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>)))
          (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip)
            (<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a> (let ((<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> (car <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                      '<a class="sym-link local-def" href="#def-constraint-lst-etc-introduced" data-sym="CONSTRAINT-LST-ETC-INTRODUCED" title="(defun constraint-lst-etc-introduced (new-trips fns ans-constraint-lst-etc)
  (cond ((endp new-trips) ans-constraint-lst-etc)
        (t
         (constraint-lst-etc-introduced (cdr new-trips) fns
                                        (let ((trip (car new-trips)))
...">constraint-lst-etc-introduced</a>
                      <span class="string">"Implementation error in constraint-lst-etc-introduced: ~
                          Please contact the ACL2 developers."</span>))
                  ((symbolp (car <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>)) ans-constraint-lst-etc)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-constraint-lst-etc-introduced1" data-sym="CONSTRAINT-LST-ETC-INTRODUCED1" title="(defun constraint-lst-etc-introduced1
       (constraint-lst-etc fns ans-constraint-lst-etc)
  (constraint-lst-etc-introduced2 (car constraint-lst-etc)
                                  (cdr constraint-lst-etc) fns
                                  ans-constraint-lst-etc))">constraint-lst-etc-introduced1</a> <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>
                      fns
                      ans-constraint-lst-etc)))))
            (theorem (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="rewrite.html#def-ffnnamesp" data-sym="FFNNAMESP">ffnnamesp</a> fns (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) (let ((conjuncts (flatten-ands-in-lit (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))))
                    (<a class="sym-link system" href="defthm.html#def-constraint-lst-etc-union" data-sym="CONSTRAINT-LST-ETC-UNION">constraint-lst-etc-union</a> (cons conjuncts
                        (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> conjuncts)
                          <span class="keyword">:initial-element</span> (<a class="sym-link system" href="history-management.html#def-make-origin" data-sym="MAKE-ORIGIN">make-origin</a> 'theorem (car trip))))
                      ans-constraint-lst-etc)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ans-constraint-lst-etc)))
            (classes (<a class="sym-link local-def" href="#def-constraint-lst-etc-introduced1" data-sym="CONSTRAINT-LST-ETC-INTRODUCED1" title="(defun constraint-lst-etc-introduced1
       (constraint-lst-etc fns ans-constraint-lst-etc)
  (constraint-lst-etc-introduced2 (car constraint-lst-etc)
                                  (cdr constraint-lst-etc) fns
                                  ans-constraint-lst-etc))">constraint-lst-etc-introduced1</a> (let ((thms (<a class="sym-link local-def" href="#def-classes-theorems" data-sym="CLASSES-THEOREMS" title="(defun classes-theorems (classes)
  (cond ((null classes) nil)
        (t
         (let ((term (cadr (assoc-keyword :corollary (cdr (car classes))))))
           (if term
...">classes-theorems</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))))
                  (cons thms
                    (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> thms)
                      <span class="keyword">:initial-element</span> (<a class="sym-link system" href="history-management.html#def-make-origin" data-sym="MAKE-ORIGIN">make-origin</a> '<a class="sym-link system" href="history-management.html#def-corollary" data-sym="COROLLARY">corollary</a> (car trip)))))
                fns
                ans-constraint-lst-etc))
            (otherwise ans-constraint-lst-etc)))))))</pre>
  </div>

<div class="form-block function" id="def-putprop-constraints" data-defines="PUTPROP-CONSTRAINTS" data-references="T,*UNKNOWN-CONSTRAINTS*,CONSTRAINEDP,COND,PUTPROP,CONS,QUOTE,PUTPROP-X-LST1,WRLD3,UNKNOWN-CONSTRAINTS-P,CONSTRAINT-LST-ETC,CONSTRAINED-FNS,FN,DEFUN" data-used-by="ENCAPSULATE-PASS-2" data-part-name="PUTPROP-CONSTRAINTS" data-part-args="WRLD3,UNKNOWN-CONSTRAINTS-P,CONSTRAINT-LST-ETC,CONSTRAINED-FNS,FN" data-part-body="T,WRLD3,*UNKNOWN-CONSTRAINTS*,CONSTRAINEDP,UNKNOWN-CONSTRAINTS-P,COND,PUTPROP,FN,CONS,CONSTRAINT-LST-ETC,QUOTE,CONSTRAINED-FNS,PUTPROP-X-LST1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUTPROP-CONSTRAINTS">putprop-constraints</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-putprop-constraints" data-sym="PUTPROP-CONSTRAINTS" title="(defun putprop-constraints
       (fn constrained-fns constraint-lst-etc unknown-constraints-p wrld3)
  (putprop-x-lst1 constrained-fns &#39;constraint-lst-etc (cons fn nil)
                  (putprop fn &#39;constraint-lst-etc constraint-lst-etc
                           (cond
...">putprop-constraints</a>
  (fn constrained-fns
    <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>
    <a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a>
    wrld3)
  (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> constrained-fns
    '<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>
    (cons fn nil)
    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn
      '<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>
      <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> constrained-fns
            'constrainedp
            <a class="sym-link system" href="axioms.html#def-_2Aunknown-constraints_2A" data-sym="*UNKNOWN-CONSTRAINTS*">*unknown-constraints*</a>
            (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn 'constrainedp <a class="sym-link system" href="axioms.html#def-_2Aunknown-constraints_2A" data-sym="*UNKNOWN-CONSTRAINTS*">*unknown-constraints*</a> wrld3)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld3)))))</pre>
  </div>

<div class="form-block function" id="def-maybe-install-acl2-defaults-table" data-defines="MAYBE-INSTALL-ACL2-DEFAULTS-TABLE" data-references="TABLE,QUASIQUOTE,TABLE-FN,MODIFYING-INCLUDE-BOOK-DIR-ALIST,@,SUMMARY,CONS,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,T,VALUE,W,QUOTE,TABLE-ALIST,EQUAL,COND,STATE,ACL2-DEFAULTS-TABLE,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+,CHK-RAISE-PORTCULLIS1,PROCESS-EMBEDDED-EVENTS" data-part-name="MAYBE-INSTALL-ACL2-DEFAULTS-TABLE" data-part-args="STATE,ACL2-DEFAULTS-TABLE" data-part-body="TABLE,QUASIQUOTE,TABLE-FN,MODIFYING-INCLUDE-BOOK-DIR-ALIST,@,SUMMARY,CONS,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,T,VALUE,STATE,W,QUOTE,TABLE-ALIST,ACL2-DEFAULTS-TABLE,EQUAL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-INSTALL-ACL2-DEFAULTS-TABLE">maybe-install-acl2-defaults-table</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-install-acl2-defaults-table" data-sym="MAYBE-INSTALL-ACL2-DEFAULTS-TABLE" title="(defun maybe-install-acl2-defaults-table (acl2-defaults-table state)
  (cond
   ((equal acl2-defaults-table (table-alist &#39;acl2-defaults-table (w state)))
    (value nil))
   (t
...">maybe-install-acl2-defaults-table</a>
  (acl2-defaults-table state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal acl2-defaults-table
       (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (cons 'summary (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))) (modifying-include-book-dir-alist <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'acl2-defaults-table
          `(nil ',ACL2-DEFAULTS-TABLE <span class="keyword">:clear</span>)
          state
          `(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table nil ',ACL2-DEFAULTS-TABLE <span class="keyword">:clear</span>))))))</pre>
  </div>

<div class="form-block function" id="def-update-for-redo-flat" data-defines="UPDATE-FOR-REDO-FLAT" data-references="NTH,REDO-FLAT-FAIL,NULL,IF,F-GET-GLOBAL,TAKE,APPEND?,REDO-FLAT-SUCC,QUOTE,F-PUT-GLOBAL,PPROGN,LENGTH,<,NATP,AND,ASSERT$,STATE,EV-LST,N,DEFUN" data-used-by="PROGN-FN1,PROCESS-EMBEDDED-EVENTS" data-part-name="UPDATE-FOR-REDO-FLAT" data-part-args="STATE,EV-LST,N" data-part-body="NTH,REDO-FLAT-FAIL,NULL,IF,STATE,F-GET-GLOBAL,TAKE,APPEND?,REDO-FLAT-SUCC,QUOTE,F-PUT-GLOBAL,PPROGN,EV-LST,LENGTH,<,N,NATP,AND,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-FOR-REDO-FLAT">update-for-redo-flat</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-for-redo-flat" data-sym="UPDATE-FOR-REDO-FLAT" title="(defun update-for-redo-flat (n ev-lst state)
  (assert$ (and (natp n) (&lt; n (length ev-lst)))
           (pprogn
            (f-put-global &#39;redo-flat-succ
                          (append? (take n ev-lst)
...">update-for-redo-flat</a>
  (n ev-lst state)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> n) (&lt; n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> ev-lst)))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'redo-flat-succ
        (<a class="sym-link system" href="axioms.html#def-append_3F" data-sym="APPEND?">append?</a> (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> n ev-lst)
          (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'redo-flat-succ state))
        state)
      (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'redo-flat-fail state))
        (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'redo-flat-fail (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> n ev-lst) state)
        state))))</pre>
  </div>

<div class="form-block macro" id="def-redo-flat" data-defines="REDO-FLAT" data-references="VALUE,STANDARD-CO,FMS,PPROGN,STATE,REDO-FLAT-FAIL,F-GET-GLOBAL,NULL,IF,QUASIQUOTE,SHOW,PBT,FAIL,SUCC,R,LABEL,T,QUOTE,SUCC-LD-SKIP-PROOFSP,&KEY,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDO-FLAT">redo-flat</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-redo-flat" data-sym="REDO-FLAT" title="(defmacro redo-flat
          (
           &amp;key (succ-ld-skip-proofsp &#39;t) (label &#39;r) (succ &#39;t) (fail &#39;t)
           (pbt &#39;t) (show &#39;nil))
  `(if (null (f-get-global &#39;redo-flat-fail state))
...">redo-flat</a>
  (&amp;key (succ-ld-skip-proofsp '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (label 'r)
    (succ '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (fail '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="history-management.html#def-pbt" data-sym="PBT">pbt</a> '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (show 'nil))
  `(if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'redo-flat-fail state))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"There is no failure saved from an encapsulate, progn, or ~
                     certify-book.~|"</span>
        nil
        (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
        state
        nil)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))
    ,(IF SHOW
     `(PPROGN
       (FMS &quot;List of events preceding the failure:~|~%~x0~|&quot;
            (LIST (CONS #\0 (F-GET-GLOBAL &#39;REDO-FLAT-SUCC STATE)))
            (STANDARD-CO STATE) STATE (LD-EVISC-TUPLE STATE))
       (FMS &quot;Failed event:~|~%~x0~|&quot;
            (LIST (CONS #\0 (F-GET-GLOBAL &#39;REDO-FLAT-FAIL STATE)))
            (STANDARD-CO STATE) STATE (LD-EVISC-TUPLE STATE))
       (VALUE :INVISIBLE))
     `(LET ((REDO-FLAT-SUCC (F-GET-GLOBAL &#39;REDO-FLAT-SUCC STATE))
            (REDO-FLAT-FAIL (F-GET-GLOBAL &#39;REDO-FLAT-FAIL STATE)))
        (STATE-GLOBAL-LET*
         ((REDO-FLAT-SUCC REDO-FLAT-SUCC) (REDO-FLAT-FAIL REDO-FLAT-FAIL))
         (LD
          (LIST ,@(AND SUCC LABEL `(&#39;(DEFLABEL ,LABEL)))
                ,@(AND SUCC
                       (LIST
                        (LIST &#39;LIST &#39;&#39;LD
                              (LIST &#39;CONS &#39;&#39;LIST
                                    (LIST &#39;KWOTE-LST &#39;REDO-FLAT-SUCC))
                              :LD-SKIP-PROOFSP SUCC-LD-SKIP-PROOFSP)))
                ,@(AND FAIL
                       (LIST
                        (LIST &#39;LIST &#39;&#39;LD
                              (LIST &#39;LIST &#39;&#39;LIST
                                    (LIST &#39;LIST &#39;&#39;QUOTE &#39;REDO-FLAT-FAIL))
                              :LD-ERROR-ACTION :CONTINUE :LD-PRE-EVAL-PRINT
                              T)))
                ,@(AND PBT SUCC LABEL
                       `(&#39;(PPROGN (NEWLINE (PROOFS-CO STATE) STATE)
                                  (PBT &#39;,LABEL)))))
          :LD-USER-STOBJS-MODIFIED-WARNING :SAME))))))</pre>
  </div>

<div class="form-block function" id="def-cert-op" data-defines="CERT-OP" data-references="T,ACCESS,OR,AND,QUOTE,F-GET-GLOBAL,CERTIFY-BOOK-INFO,LET,STATE,DEFUN" data-used-by="MAKE-EVENT-FN,CERTIFY-BOOK-FN,CERTIFY-BOOK-STEP-3+,CERTIFY-BOOK-STEP-2,CERTIFY-BOOK-EXPANSION-ALIST0,PRINT-CERTIFY-BOOK-STEP-1,CERTIFY-BOOK-COMPILE-FLG,PRINT-CERTIFY-BOOK-STEP-4,INCLUDE-BOOK-FN1,INCLUDE-BOOK-PCERT-P,MAKE-CERTIFICATE-FILES,MAKE-CERTIFICATE-FILE,MAKE-CERTIFICATE-FILE1,CHK-ACCEPTABLE-CERTIFY-BOOK,CHECK-CERTIFICATE-FILE-EXISTS,CHK-ACCEPTABLE-CERTIFY-BOOK1,CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE,PCERT-OP-P,CERTIFICATE-FILE-AND-INPUT-CHANNEL1,INCLUDE-BOOK-ER1,EVAL-EVENT-LST-ENVIRONMENT,CONVERT-BOOK-STRING-TO-CERT" data-part-name="CERT-OP" data-part-args="STATE" data-part-body="T,ACCESS,OR,AND,STATE,QUOTE,F-GET-GLOBAL,CERTIFY-BOOK-INFO,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-OP">cert-op</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
  (state)
  (let ((certify-book-info (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'certify-book-info state)))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> certify-book-info
      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> certify-book-info certify-book-info <span class="keyword">:cert-op</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block function" id="def-eval-event-lst-environment" data-defines="EVAL-EVENT-LST-ENVIRONMENT" data-references="PCERT,OTHERWISE,CERTIFY-BOOK,CONS,T,CERT-OP,CASE,ENCAPSULATE,QUOTE,IF,X,LET*,STATE,IN-ENCAPSULATEP,DEFUN" data-used-by="PROGN-FN1,PROCESS-EMBEDDED-EVENTS" data-part-name="EVAL-EVENT-LST-ENVIRONMENT" data-part-args="STATE,IN-ENCAPSULATEP" data-part-body="PCERT,OTHERWISE,CERTIFY-BOOK,CONS,T,STATE,CERT-OP,CASE,ENCAPSULATE,QUOTE,IN-ENCAPSULATEP,IF,X,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVAL-EVENT-LST-ENVIRONMENT">eval-event-lst-environment</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-eval-event-lst-environment" data-sym="EVAL-EVENT-LST-ENVIRONMENT" title="(defun eval-event-lst-environment (in-encapsulatep state)
  (let* ((x
          (if in-encapsulatep
              &#39;(encapsulate)
              nil)))
...">eval-event-lst-environment</a>
  (<a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((x (if <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
         '(<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>)
         nil)))
    (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state)
      ((nil <span class="keyword">:write-acl2x</span> <span class="keyword">:write-acl2xu</span>) x)
      ((<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:create+convert-pcert</span>) (cons '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a> x))
      (otherwise (cons 'pcert x)))))</pre>
  </div>

<div class="form-block function" id="def-process-embedded-events" data-defines="PROCESS-EMBEDDED-EVENTS" data-references="CDR,CAR,ENCAPSULATE,WARNING$,HARD,LIST*,MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,IF,MV,-,UPDATE-FOR-REDO-FLAT,PROOFS-CO,IN-ENCAPSULATEP,EVAL-EVENT-LST-ENVIRONMENT,EVAL-EVENT-LST,REDO-FLAT-FAIL,REDO-FLAT-SUCC,F-PUT-GLOBAL,CERTIFY-BOOK,ENCAPSULATE-PASS-1,OR,PPROGN,FINAL-KPA,EXPANSION-ALIST,VAL,DEFABSSTOBJ,DEFSTOBJ,MEMBER-EQ,TABLE,TABLE-FN,@,SUMMARY,INHIBIT-OUTPUT-LST,INCLUDE-BOOK,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,LD-SKIP-PROOFSP,AND,USER-SKIP-PROOFSP,LET,SKIP-PROOFS-BY-SYSTEM,CURRENT-PACKAGE,STATE-GLOBAL-LET*,VAL/EXPANSION-ALIST/FINAL-KPA,ERP,MV-LET,VALUE,STRIP-NON-HIDDEN-PACKAGE-NAMES,&,TILDE-*-&V-STRINGS,IN-PACKAGE,SOFT,ER,FIND-NON-HIDDEN-PACKAGE-ENTRY,NOT,ER-PROGN,EXTENSION,SET-W,T,CDDR,CADR,INTRO-UDF-LST,ENCAPSULATE-PASS-2,EQ,COND,GLOBAL-SET,PROTO-WRLD3,F-GET-GLOBAL,IN-LOCAL-FLG,CONS,NEW-EMBEDDED-EVENT-LST,EMBEDDED-EVENT-LST,QUOTE,GLOBAL-VAL,OLD-EMBEDDED-EVENT-LST,KNOWN-PACKAGE-ALIST,KPA,W,WRLD1,LET*,STATE,CTX,CERT-DATA,MAKE-EVENT-CHK,INDEX,EV-LST,EE-ENTRY,PKG,SKIP-PROOFSP,ACL2-DEFAULTS-TABLE,CALLER,DEFUN" data-used-by="DEFABSSTOBJ-FN1,DEFSTOBJ-FN,CERTIFY-BOOK-STEP-2,INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS,ENCAPSULATE-FN,ENCAPSULATE-PASS-2" data-part-name="PROCESS-EMBEDDED-EVENTS" data-part-args="STATE,CTX,CERT-DATA,MAKE-EVENT-CHK,INDEX,EV-LST,EE-ENTRY,PKG,SKIP-PROOFSP,ACL2-DEFAULTS-TABLE,CALLER" data-part-body="CDR,CAR,ENCAPSULATE,WARNING$,HARD,LIST*,MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,IF,MV,-,UPDATE-FOR-REDO-FLAT,PROOFS-CO,CTX,MAKE-EVENT-CHK,IN-ENCAPSULATEP,EVAL-EVENT-LST-ENVIRONMENT,EV-LST,INDEX,EVAL-EVENT-LST,REDO-FLAT-FAIL,REDO-FLAT-SUCC,F-PUT-GLOBAL,CERTIFY-BOOK,ENCAPSULATE-PASS-1,OR,PPROGN,FINAL-KPA,EXPANSION-ALIST,VAL,DEFABSSTOBJ,DEFSTOBJ,MEMBER-EQ,TABLE,TABLE-FN,@,SUMMARY,INHIBIT-OUTPUT-LST,INCLUDE-BOOK,ACL2-DEFAULTS-TABLE,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,SKIP-PROOFSP,LD-SKIP-PROOFSP,AND,USER-SKIP-PROOFSP,LET,SKIP-PROOFS-BY-SYSTEM,CERT-DATA,CURRENT-PACKAGE,STATE-GLOBAL-LET*,VAL/EXPANSION-ALIST/FINAL-KPA,ERP,MV-LET,VALUE,STRIP-NON-HIDDEN-PACKAGE-NAMES,&,TILDE-*-&V-STRINGS,IN-PACKAGE,SOFT,ER,PKG,FIND-NON-HIDDEN-PACKAGE-ENTRY,NOT,ER-PROGN,EXTENSION,SET-W,T,CDDR,CADR,INTRO-UDF-LST,ENCAPSULATE-PASS-2,CALLER,EQ,COND,GLOBAL-SET,PROTO-WRLD3,F-GET-GLOBAL,IN-LOCAL-FLG,EE-ENTRY,CONS,NEW-EMBEDDED-EVENT-LST,EMBEDDED-EVENT-LST,QUOTE,GLOBAL-VAL,OLD-EMBEDDED-EVENT-LST,KNOWN-PACKAGE-ALIST,KPA,STATE,W,WRLD1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROCESS-EMBEDDED-EVENTS">process-embedded-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-process-embedded-events" data-sym="PROCESS-EMBEDDED-EVENTS" title="(defun process-embedded-events
       (caller acl2-defaults-table skip-proofsp pkg ee-entry ev-lst index
        make-event-chk cert-data ctx state)
  (let* ((wrld1 (w state))
         (kpa (known-package-alist state))
...">process-embedded-events</a>
  (caller acl2-defaults-table
    skip-proofsp
    pkg
    ee-entry
    ev-lst
    index
    make-event-chk
    cert-data
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (kpa (<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> state))
      (old-embedded-event-lst (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'embedded-event-lst wrld1))
      (new-embedded-event-lst (cons ee-entry old-embedded-event-lst))
      (in-local-flg (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state))
      (proto-wrld3 (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'embedded-event-lst
          new-embedded-event-lst
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-encapsulate-pass-2" data-sym="ENCAPSULATE-PASS-2" title="(defun encapsulate-pass-2
       (insigs kwd-value-list-lst ev-lst saved-acl2-defaults-table only-pass-p
        ctx state)
  (let* ((wrld1 (w state))
         (saved-unknown-constraints-table
...">encapsulate-pass-2</a>) (<a class="sym-link system" href="defuns.html#def-intro-udf-lst" data-sym="INTRO-UDF-LST">intro-udf-lst</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ee-entry)
                (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> ee-entry)
                in-local-flg
                wrld1
                state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld1))))
      (state (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension proto-wrld3 state)))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-find-non-hidden-package-entry" data-sym="FIND-NON-HIDDEN-PACKAGE-ENTRY">find-non-hidden-package-entry</a> pkg kpa)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            '<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a>
            <span class="string">"The argument to IN-PACKAGE must be a known package name, but ~
                 ~x0 is not.  The known packages are~*1"</span>
            pkg
            (<a class="sym-link system" href="basis-a.html#def-tilde-_2A-_26v-strings" data-sym="TILDE-*-&amp;V-STRINGS">tilde-*-&amp;v-strings</a> '&amp;
              (<a class="sym-link system" href="defuns.html#def-strip-non-hidden-package-names" data-sym="STRIP-NON-HIDDEN-PACKAGE-NAMES">strip-non-hidden-package-names</a> kpa)
              #\.)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val/expansion-alist/final-kpa state)
        (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> pkg) (cert-data cert-data)
            (skip-proofs-by-system (let ((user-skip-proofsp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'skip-proofs-by-system state)))))
                (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> user-skip-proofsp) skip-proofsp)))
            (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> skip-proofsp)
            (<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a> nil))
          (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> acl2-defaults-table <span class="keyword">:do-not-install!</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
              ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (cons 'summary (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))))
                  (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'acl2-defaults-table
                    '(<span class="keyword">:defun-mode</span> <span class="keyword">:logic</span>)
                    state
                    '(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:defun-mode</span> <span class="keyword">:logic</span>))))
              ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> caller '(<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> <a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a>)) (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (cons 'summary (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))))
                  (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'acl2-defaults-table
                      '(<span class="keyword">:defun-mode</span> <span class="keyword">:logic</span>)
                      state
                      '(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:defun-mode</span> <span class="keyword">:logic</span>))
                    (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'acl2-defaults-table
                      '(<span class="keyword">:ignore-ok</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                      state
                      '(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:ignore-ok</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                    (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'acl2-defaults-table
                      '(<span class="keyword">:irrelevant-formals-ok</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                      state
                      '(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:irrelevant-formals-ok</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val expansion-alist final-kpa state)
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'encapsulate-pass-1)
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'redo-flat-succ nil state)
                      (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'redo-flat-fail nil state)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                (<a class="sym-link local-def" href="#def-eval-event-lst" data-sym="EVAL-EVENT-LST" title="(defun eval-event-lst
       (index expansion-alist ev-lst quietp environment in-local-flg last-val
        other-control kpa caller ctx channel state)
  (flet ((event-macros (caller)
           (if (eq caller &#39;eval-some-portcullis-cmds)
...">eval-event-lst</a> index
                  nil
                  ev-lst
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
                    (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>)))
                  (<a class="sym-link local-def" href="#def-eval-event-lst-environment" data-sym="EVAL-EVENT-LST-ENVIRONMENT" title="(defun eval-event-lst-environment (in-encapsulatep state)
  (let* ((x
          (if in-encapsulatep
              &#39;(encapsulate)
              nil)))
...">eval-event-lst-environment</a> (<a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> new-embedded-event-lst nil)
                    state)
                  in-local-flg
                  nil
                  make-event-chk
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>) kpa) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))
                  caller
                  ctx
                  (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                  state))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'encapsulate-pass-1)
                         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>)) (<a class="sym-link local-def" href="#def-update-for-redo-flat" data-sym="UPDATE-FOR-REDO-FLAT" title="(defun update-for-redo-flat (n ev-lst state)
  (assert$ (and (natp n) (&lt; n (length ev-lst)))
           (pprogn
            (f-put-global &#39;redo-flat-succ
                          (append? (take n ev-lst)
...">update-for-redo-flat</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> val index) ev-lst state))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> acl2-defaults-table
                        '(<span class="keyword">:do-not-install</span> <span class="keyword">:do-not-install!</span>))
                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)
                      (<a class="sym-link local-def" href="#def-maybe-install-acl2-defaults-table" data-sym="MAYBE-INSTALL-ACL2-DEFAULTS-TABLE" title="(defun maybe-install-acl2-defaults-table (acl2-defaults-table state)
  (cond
   ((equal acl2-defaults-table (table-alist &#39;acl2-defaults-table (w state)))
    (value nil))
   (t
...">maybe-install-acl2-defaults-table</a> acl2-defaults-table
                        state))
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> val expansion-alist final-kpa))))))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> caller '(<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> <a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                    ctx
                    <span class="string">"An error has occurred while ~x0 was defining the ~
                       supporting functions.  This is supposed to be ~
                       impossible!  Please report this error to the ACL2 ~
                       implementors."</span>
                    caller)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                    nil
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> skip-proofsp nil) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> skip-proofsp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) <span class="string">"The attempted ~x0 has failed while trying to ~
                         establish the admissibility of one of the (local or ~
                         non-local) forms in ~#1~[the body of the ~
                         ENCAPSULATE~/the book to be certified~]."</span>)
                      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-encapsulate-pass-2" data-sym="ENCAPSULATE-PASS-2" title="(defun encapsulate-pass-2
       (insigs kwd-value-list-lst ev-lst saved-acl2-defaults-table only-pass-p
        ctx state)
  (let* ((wrld1 (w state))
         (saved-unknown-constraints-table
...">encapsulate-pass-2</a>) <span class="string">"The error reported above is the manifestation of a ~
                         local incompatibility.  See :DOC ~
                         local-incompatibility.  The attempted ~x0 has failed."</span>)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"The error reported above indicates that this book ~
                           is incompatible with the current logical world.  ~
                           The attempted ~x0 has failed."</span>))
                    (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'encapsulate-pass-1)
                        (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-encapsulate-pass-2" data-sym="ENCAPSULATE-PASS-2" title="(defun encapsulate-pass-2
       (insigs kwd-value-list-lst ev-lst saved-acl2-defaults-table only-pass-p
        ctx state)
  (let* ((wrld1 (w state))
         (saved-unknown-constraints-table
...">encapsulate-pass-2</a>))
                      '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>
                      caller)
                    (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'encapsulate-pass-1)
                      <span class="number">0</span>
                      <span class="number">1</span>))
                  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((state (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension
                   (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'embedded-event-lst
                     old-embedded-event-lst
                     (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                   state)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-encapsulate-pass-2" data-sym="ENCAPSULATE-PASS-2" title="(defun encapsulate-pass-2
       (insigs kwd-value-list-lst ev-lst saved-acl2-defaults-table only-pass-p
        ctx state)
  (let* ((wrld1 (w state))
         (saved-unknown-constraints-table
...">encapsulate-pass-2</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car val/expansion-alist/final-kpa)
                      (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val/expansion-alist/final-kpa)
                      proto-wrld3)))
                ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cdr val/expansion-alist/final-kpa)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val/expansion-alist/final-kpa)))))))))))</pre>
  </div>

<div class="form-block function" id="def-constrained-functions" data-defines="CONSTRAINED-FUNCTIONS" data-references="CDR,CONS,INTERSECTP-EQ,CAR,LIST,INSTANTIABLE-ANCESTORS,ANCESTORS,LET,T,ENDP,COND,NEW-TRIPS,SIG-FNS,EXPORTED-FNS,DEFUN" data-used-by="ENCAPSULATE-CONSTRAINT" data-part-name="CONSTRAINED-FUNCTIONS" data-part-args="NEW-TRIPS,SIG-FNS,EXPORTED-FNS" data-part-body="CDR,CONSTRAINED-FUNCTIONS,CONS,INTERSECTP-EQ,NEW-TRIPS,CAR,LIST,INSTANTIABLE-ANCESTORS,ANCESTORS,LET,T,SIG-FNS,EXPORTED-FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONSTRAINED-FUNCTIONS">constrained-functions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-constrained-functions" data-sym="CONSTRAINED-FUNCTIONS" title="(defun constrained-functions (exported-fns sig-fns new-trips)
  (cond ((endp exported-fns) sig-fns)
        (t
         (let ((ancestors
                (instantiable-ancestors (list (car exported-fns)) new-trips
...">constrained-functions</a>
  (exported-fns sig-fns <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> exported-fns) sig-fns)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((ancestors (<a class="sym-link system" href="history-management.html#def-instantiable-ancestors" data-sym="INSTANTIABLE-ANCESTORS">instantiable-ancestors</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car exported-fns))
             <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>
             nil)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-intersectp-eq" data-sym="INTERSECTP-EQ">intersectp-eq</a> sig-fns ancestors) (cons (car exported-fns)
              (<a class="sym-link local-def" href="#def-constrained-functions" data-sym="CONSTRAINED-FUNCTIONS" title="(defun constrained-functions (exported-fns sig-fns new-trips)
  (cond ((endp exported-fns) sig-fns)
        (t
         (let ((ancestors
                (instantiable-ancestors (list (car exported-fns)) new-trips
...">constrained-functions</a> (cdr exported-fns) sig-fns <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-constrained-functions" data-sym="CONSTRAINED-FUNCTIONS" title="(defun constrained-functions (exported-fns sig-fns new-trips)
  (cond ((endp exported-fns) sig-fns)
        (t
         (let ((ancestors
                (instantiable-ancestors (list (car exported-fns)) new-trips
...">constrained-functions</a> (cdr exported-fns) sig-fns <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>)))))))</pre>
  </div>

<div class="form-block function" id="def-collect-logicals" data-defines="COLLECT-LOGICALS" data-references="T,CDR,CONS,CAR,LOGICP,NULL,COND,WRLD,NAMES,DEFUN" data-used-by="ENCAPSULATE-CONSTRAINT" data-part-name="COLLECT-LOGICALS" data-part-args="WRLD,NAMES" data-part-body="T,CDR,COLLECT-LOGICALS,CONS,WRLD,CAR,LOGICP,NAMES,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-LOGICALS">collect-logicals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-logicals" data-sym="COLLECT-LOGICALS" title="(defun collect-logicals (names wrld)
  (cond ((null names) nil)
        ((logicp (car names) wrld)
         (cons (car names) (collect-logicals (cdr names) wrld)))
        (t (collect-logicals (cdr names) wrld))))">collect-logicals</a>
  (names wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> names) nil)
    ((<a class="sym-link system" href="axioms.html#def-logicp" data-sym="LOGICP">logicp</a> (car names) wrld) (cons (car names) (<a class="sym-link local-def" href="#def-collect-logicals" data-sym="COLLECT-LOGICALS" title="(defun collect-logicals (names wrld)
  (cond ((null names) nil)
        ((logicp (car names) wrld)
         (cons (car names) (collect-logicals (cdr names) wrld)))
        (t (collect-logicals (cdr names) wrld))))">collect-logicals</a> (cdr names) wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-collect-logicals" data-sym="COLLECT-LOGICALS" title="(defun collect-logicals (names wrld)
  (cond ((null names) nil)
        ((logicp (car names) wrld)
         (cons (car names) (collect-logicals (cdr names) wrld)))
        (t (collect-logicals (cdr names) wrld))))">collect-logicals</a> (cdr names) wrld))))</pre>
  </div>

<div class="form-block function" id="def-exported-function-names" data-defines="EXPORTED-FUNCTION-NAMES" data-references="CDR,CONS,CAR,NAME-INTRODUCED,NEW-NAME,LET,T,ENDP,COND,NEW-TRIPS,DEFUN" data-used-by="ENCAPSULATE-PASS-2" data-part-name="EXPORTED-FUNCTION-NAMES" data-part-args="NEW-TRIPS" data-part-body="CDR,EXPORTED-FUNCTION-NAMES,CONS,CAR,NAME-INTRODUCED,NEW-NAME,LET,T,NEW-TRIPS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPORTED-FUNCTION-NAMES">exported-function-names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-exported-function-names" data-sym="EXPORTED-FUNCTION-NAMES" title="(defun exported-function-names (new-trips)
  (cond ((endp new-trips) nil)
        (t
         (let ((new-name (name-introduced (car new-trips) t)))
           (cond
...">exported-function-names</a>
  (<a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((new-name (<a class="sym-link local-def" href="#def-name-introduced" data-sym="NAME-INTRODUCED" title="(defun name-introduced (trip functionp)
  (cond ((eq (cddr trip) *acl2-property-unbound*) nil)
        ((eq (cadr trip) &#39;formals) (car trip)) (functionp nil)
        ((member-eq (cadr trip) &#39;(theorem const macro-body label theory stobj))
         (car trip))
...">name-introduced</a> (car <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (new-name (cons new-name (<a class="sym-link local-def" href="#def-exported-function-names" data-sym="EXPORTED-FUNCTION-NAMES" title="(defun exported-function-names (new-trips)
  (cond ((endp new-trips) nil)
        (t
         (let ((new-name (name-introduced (car new-trips) t)))
           (cond
...">exported-function-names</a> (cdr <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-exported-function-names" data-sym="EXPORTED-FUNCTION-NAMES" title="(defun exported-function-names (new-trips)
  (cond ((endp new-trips) nil)
        (t
         (let ((new-name (name-introduced (car new-trips) t)))
           (cond
...">exported-function-names</a> (cdr <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>))))))))</pre>
  </div>

<div class="form-block function" id="def-get-subversives" data-defines="GET-SUBVERSIVES" data-references="CDR,CONS,ACCESS,AND,JUSTIFICATION,QUOTE,CAR,GETPROPC,J,LET,T,ENDP,COND,WRLD,FNS,DEFUN" data-used-by="ENCAPSULATE-CONSTRAINT" data-part-name="GET-SUBVERSIVES" data-part-args="WRLD,FNS" data-part-body="CDR,GET-SUBVERSIVES,CONS,ACCESS,AND,WRLD,JUSTIFICATION,QUOTE,CAR,GETPROPC,J,LET,T,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-SUBVERSIVES">get-subversives</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-subversives" data-sym="GET-SUBVERSIVES" title="(defun get-subversives (fns wrld)
  (cond ((endp fns) nil)
        (t
         (let ((j (getpropc (car fns) &#39;justification nil wrld)))
           (cond
...">get-subversives</a>
  (fns wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((j (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car fns) 'justification nil wrld)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> j (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> justification j <span class="keyword">:subversive-p</span>)) (cons (car fns) (<a class="sym-link local-def" href="#def-get-subversives" data-sym="GET-SUBVERSIVES" title="(defun get-subversives (fns wrld)
  (cond ((endp fns) nil)
        (t
         (let ((j (getpropc (car fns) &#39;justification nil wrld)))
           (cond
...">get-subversives</a> (cdr fns) wrld)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-get-subversives" data-sym="GET-SUBVERSIVES" title="(defun get-subversives (fns wrld)
  (cond ((endp fns) nil)
        (t
         (let ((j (getpropc (car fns) &#39;justification nil wrld)))
           (cond
...">get-subversives</a> (cdr fns) wrld)))))))</pre>
  </div>

<div class="form-block function" id="def-ancestral-ffn-symbs-lst" data-defines="ANCESTRAL-FFN-SYMBS-LST" data-references="INSTANTIABLE-ANCESTORS,INSTANTIABLE-FFN-SYMBS-LST,FNS,LET,ANS,TRIPS,LST,DEFUN" data-used-by="ENCAPSULATE-CONSTRAINT" data-part-name="ANCESTRAL-FFN-SYMBS-LST" data-part-args="ANS,TRIPS,LST" data-part-body="INSTANTIABLE-ANCESTORS,ANS,TRIPS,LST,INSTANTIABLE-FFN-SYMBS-LST,FNS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ANCESTRAL-FFN-SYMBS-LST">ancestral-ffn-symbs-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ancestral-ffn-symbs-lst" data-sym="ANCESTRAL-FFN-SYMBS-LST" title="(defun ancestral-ffn-symbs-lst (lst trips ans)
  (let ((fns (instantiable-ffn-symbs-lst lst trips ans nil)))
    (instantiable-ancestors fns trips ans)))">ancestral-ffn-symbs-lst</a>
  (lst trips ans)
  (let ((fns (instantiable-ffn-symbs-lst lst trips ans nil)))
    (<a class="sym-link system" href="history-management.html#def-instantiable-ancestors" data-sym="INSTANTIABLE-ANCESTORS">instantiable-ancestors</a> fns trips ans)))</pre>
  </div>

<div class="form-block function" id="def-remove-guard-holders-weak-constraint-lst-etc" data-defines="REMOVE-GUARD-HOLDERS-WEAK-CONSTRAINT-LST-ETC" data-references="CDR,IGNORE,REMOVE-GUARD-HOLDERS1-LST,RESULT,CHANGEDP,MV-LET,CONS,CAR,PSEUDO-TERM-LISTP,CONSP,AND,XARGS,DECLARE,LAMP,CONSTRAINT-LST-ETC,DEFUN" data-used-by="ENCAPSULATE-CONSTRAINT" data-part-name="REMOVE-GUARD-HOLDERS-WEAK-CONSTRAINT-LST-ETC" data-part-args="LAMP,CONSTRAINT-LST-ETC" data-part-declare="CAR,PSEUDO-TERM-LISTP,CONSTRAINT-LST-ETC,CONSP,AND,XARGS,DECLARE" data-part-body="CDR,IGNORE,DECLARE,LAMP,CONSTRAINT-LST-ETC,CAR,REMOVE-GUARD-HOLDERS1-LST,RESULT,CHANGEDP,MV-LET,CONS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-GUARD-HOLDERS-WEAK-CONSTRAINT-LST-ETC">remove-guard-holders-weak-constraint-lst-etc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-guard-holders-weak-constraint-lst-etc" data-sym="REMOVE-GUARD-HOLDERS-WEAK-CONSTRAINT-LST-ETC" title="(defun remove-guard-holders-weak-constraint-lst-etc (constraint-lst-etc lamp)
  (declare
   (xargs :guard
    (and (consp constraint-lst-etc)
         (pseudo-term-listp (car constraint-lst-etc)))))
...">remove-guard-holders-weak-constraint-lst-etc</a>
  (<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a> lamp)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>)
        (pseudo-term-listp (car <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>)))))
  (cons (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp result)
      (remove-guard-holders1-lst (car <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>) lamp)
      (declare (ignore changedp))
      result)
    (cdr <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>)))</pre>
  </div>

<div class="form-block function" id="def-encapsulate-constraint" data-defines="ENCAPSULATE-CONSTRAINT" data-references="MV,REMOVE-GUARD-HOLDERS-LAMP,REMOVE-GUARD-HOLDERS-WEAK-CONSTRAINT-LST-ETC,CONSTRAINT-LST-ETC,SET-DIFFERENCE-EQ,INFECTIOUS-FNS,APPEND,CAR,ANCESTRAL-FFN-SYMBS-LST,INTERSECTION-EQ,CONSTRAINED-FNS,CONS,CONSTRAINTS-LIST,CONSTRAINT-LST-ETC-INTRODUCED,FORMULA-CONSTRAINT-LST-ETC1,GET-SUBVERSIVES,SUBVERSIVE-FNS,COLLECT-LOGICALS,CONSTRAINED-FUNCTIONS,FNS,LET*,ASSERT$,WRLD,NEW-TRIPS,EXPORTED-NAMES,SIG-FNS,DEFUN" data-used-by="ENCAPSULATE-PASS-2" data-part-name="ENCAPSULATE-CONSTRAINT" data-part-args="WRLD,NEW-TRIPS,EXPORTED-NAMES,SIG-FNS" data-part-body="MV,REMOVE-GUARD-HOLDERS-LAMP,REMOVE-GUARD-HOLDERS-WEAK-CONSTRAINT-LST-ETC,CONSTRAINT-LST-ETC,SET-DIFFERENCE-EQ,INFECTIOUS-FNS,APPEND,CAR,ANCESTRAL-FFN-SYMBS-LST,INTERSECTION-EQ,CONSTRAINED-FNS,CONS,CONSTRAINTS-LIST,CONSTRAINT-LST-ETC-INTRODUCED,FORMULA-CONSTRAINT-LST-ETC1,GET-SUBVERSIVES,SUBVERSIVE-FNS,NEW-TRIPS,WRLD,EXPORTED-NAMES,COLLECT-LOGICALS,CONSTRAINED-FUNCTIONS,FNS,LET*,SIG-FNS,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENCAPSULATE-CONSTRAINT">encapsulate-constraint</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-encapsulate-constraint" data-sym="ENCAPSULATE-CONSTRAINT" title="(defun encapsulate-constraint (sig-fns exported-names new-trips wrld)
  (assert$ sig-fns
           (let* ((fns
                   (constrained-functions
                    (collect-logicals exported-names wrld) sig-fns new-trips))
...">encapsulate-constraint</a>
  (sig-fns exported-names <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a> wrld)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> sig-fns
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fns (<a class="sym-link local-def" href="#def-constrained-functions" data-sym="CONSTRAINED-FUNCTIONS" title="(defun constrained-functions (exported-fns sig-fns new-trips)
  (cond ((endp exported-fns) sig-fns)
        (t
         (let ((ancestors
                (instantiable-ancestors (list (car exported-fns)) new-trips
...">constrained-functions</a> (<a class="sym-link local-def" href="#def-collect-logicals" data-sym="COLLECT-LOGICALS" title="(defun collect-logicals (names wrld)
  (cond ((null names) nil)
        ((logicp (car names) wrld)
         (cons (car names) (collect-logicals (cdr names) wrld)))
        (t (collect-logicals (cdr names) wrld))))">collect-logicals</a> exported-names wrld)
           sig-fns
           <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>)) (subversive-fns (<a class="sym-link local-def" href="#def-get-subversives" data-sym="GET-SUBVERSIVES" title="(defun get-subversives (fns wrld)
  (cond ((endp fns) nil)
        (t
         (let ((j (getpropc (car fns) &#39;justification nil wrld)))
           (cond
...">get-subversives</a> exported-names wrld))
        (formula-constraint-lst-etc1 (<a class="sym-link local-def" href="#def-constraint-lst-etc-introduced" data-sym="CONSTRAINT-LST-ETC-INTRODUCED" title="(defun constraint-lst-etc-introduced (new-trips fns ans-constraint-lst-etc)
  (cond ((endp new-trips) ans-constraint-lst-etc)
        (t
         (constraint-lst-etc-introduced (cdr new-trips) fns
                                        (let ((trip (car new-trips)))
...">constraint-lst-etc-introduced</a> <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>
            fns
            (<a class="sym-link system" href="defthm.html#def-constraints-list" data-sym="CONSTRAINTS-LIST">constraints-list</a> subversive-fns wrld (cons nil nil) nil)))
        (constrained-fns (<a class="sym-link system" href="axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> fns
            (<a class="sym-link local-def" href="#def-ancestral-ffn-symbs-lst" data-sym="ANCESTRAL-FFN-SYMBS-LST" title="(defun ancestral-ffn-symbs-lst (lst trips ans)
  (let ((fns (instantiable-ffn-symbs-lst lst trips ans nil)))
    (instantiable-ancestors fns trips ans)))">ancestral-ffn-symbs-lst</a> (car formula-constraint-lst-etc1)
              <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>
              (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> subversive-fns sig-fns))))
        (infectious-fns (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> constrained-fns subversive-fns)
            sig-fns))
        (<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a> (<a class="sym-link local-def" href="#def-remove-guard-holders-weak-constraint-lst-etc" data-sym="REMOVE-GUARD-HOLDERS-WEAK-CONSTRAINT-LST-ETC" title="(defun remove-guard-holders-weak-constraint-lst-etc (constraint-lst-etc lamp)
  (declare
   (xargs :guard
    (and (consp constraint-lst-etc)
         (pseudo-term-listp (car constraint-lst-etc)))))
...">remove-guard-holders-weak-constraint-lst-etc</a> (<a class="sym-link system" href="defthm.html#def-constraints-list" data-sym="CONSTRAINTS-LIST">constraints-list</a> infectious-fns
              wrld
              formula-constraint-lst-etc1
              nil)
            (remove-guard-holders-lamp))))
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>
        constrained-fns
        subversive-fns
        infectious-fns
        fns))))</pre>
  </div>

<div class="form-block function" id="def-bogus-exported-compliants" data-defines="BOGUS-EXPORTED-COMPLIANTS" data-references="T,CDR,CONS,GUARD,ALL-FNNAMES,INSTANTIABLE-ANCESTORS,INTERSECTP-EQ,MEMBER-EQ,OR,CONSTRAINEDP,QUOTE,GETPROPC,NOT,CAR,SYMBOL-CLASS,EQ,AND,ENDP,COND,WRLD,SIG-FNS,EXPORTS-WITH-SIG-ANCESTORS,NAMES,DEFUN" data-used-by="ENCAPSULATE-PASS-2" data-part-name="BOGUS-EXPORTED-COMPLIANTS" data-part-args="WRLD,SIG-FNS,EXPORTS-WITH-SIG-ANCESTORS,NAMES" data-part-body="T,CDR,BOGUS-EXPORTED-COMPLIANTS,CONS,GUARD,ALL-FNNAMES,INSTANTIABLE-ANCESTORS,SIG-FNS,INTERSECTP-EQ,EXPORTS-WITH-SIG-ANCESTORS,MEMBER-EQ,OR,CONSTRAINEDP,QUOTE,GETPROPC,NOT,WRLD,CAR,SYMBOL-CLASS,EQ,AND,NAMES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BOGUS-EXPORTED-COMPLIANTS">bogus-exported-compliants</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-bogus-exported-compliants" data-sym="BOGUS-EXPORTED-COMPLIANTS" title="(defun bogus-exported-compliants
       (names exports-with-sig-ancestors sig-fns wrld)
  (cond ((endp names) nil)
        ((and (eq (symbol-class (car names) wrld) :common-lisp-compliant)
              (not (getpropc (car names) &#39;constrainedp nil wrld))
...">bogus-exported-compliants</a>
  (names exports-with-sig-ancestors sig-fns wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> names) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> (car names) wrld) <span class="keyword">:common-lisp-compliant</span>)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car names) 'constrainedp nil wrld))
       (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car names) exports-with-sig-ancestors)
         (<a class="sym-link system" href="axioms.html#def-intersectp-eq" data-sym="INTERSECTP-EQ">intersectp-eq</a> sig-fns
           (<a class="sym-link system" href="history-management.html#def-instantiable-ancestors" data-sym="INSTANTIABLE-ANCESTORS">instantiable-ancestors</a> (all-fnnames (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> (car names) nil wrld))
             wrld
             nil)))) (cons (car names)
        (<a class="sym-link local-def" href="#def-bogus-exported-compliants" data-sym="BOGUS-EXPORTED-COMPLIANTS" title="(defun bogus-exported-compliants
       (names exports-with-sig-ancestors sig-fns wrld)
  (cond ((endp names) nil)
        ((and (eq (symbol-class (car names) wrld) :common-lisp-compliant)
              (not (getpropc (car names) &#39;constrainedp nil wrld))
...">bogus-exported-compliants</a> (cdr names)
          exports-with-sig-ancestors
          sig-fns
          wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-bogus-exported-compliants" data-sym="BOGUS-EXPORTED-COMPLIANTS" title="(defun bogus-exported-compliants
       (names exports-with-sig-ancestors sig-fns wrld)
  (cond ((endp names) nil)
        ((and (eq (symbol-class (car names) wrld) :common-lisp-compliant)
              (not (getpropc (car names) &#39;constrainedp nil wrld))
...">bogus-exported-compliants</a> (cdr names)
        exports-with-sig-ancestors
        sig-fns
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-remove-type-prescription-cert-data" data-defines="REMOVE-TYPE-PRESCRIPTION-CERT-DATA" data-references="REMOVE1-ASSOC-EQ,CERT-DATA,DEFUN" data-used-by="ENCAPSULATE-PASS-2" data-part-name="REMOVE-TYPE-PRESCRIPTION-CERT-DATA" data-part-args="CERT-DATA" data-part-body="CERT-DATA,REMOVE1-ASSOC-EQ" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-TYPE-PRESCRIPTION-CERT-DATA">remove-type-prescription-cert-data</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-type-prescription-cert-data" data-sym="REMOVE-TYPE-PRESCRIPTION-CERT-DATA" title="(defun remove-type-prescription-cert-data (cert-data)
  (remove1-assoc-eq :type-prescription cert-data))">remove-type-prescription-cert-data</a>
  (cert-data)
  (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> <span class="keyword">:type-prescription</span> cert-data))</pre>
  </div>

<div class="form-block function" id="def-encapsulate-return-value-p" data-defines="ENCAPSULATE-RETURN-VALUE-P" data-references="T,&,CASE-MATCH,VAL,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="ENCAPSULATE-RETURN-VALUE-P" data-part-args="VAL" data-part-body="T,&,VAL,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENCAPSULATE-RETURN-VALUE-P">encapsulate-return-value-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-encapsulate-return-value-p" data-sym="ENCAPSULATE-RETURN-VALUE-P" title="(defun encapsulate-return-value-p (val)
  (case-match val ((:return-value &amp;) t) (&amp; nil)))">encapsulate-return-value-p</a>
  (val)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> val ((<span class="keyword">:return-value</span> &amp;) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (&amp; nil)))</pre>
  </div>

<div class="form-block function" id="def-transparent-mismatch" data-defines="TRANSPARENT-MISMATCH" data-references="CONS,T,CDR,CANONICAL-SIBLING,TRANSPARENT-FN-P,IFF,CONSTRAINEDP,QUOTE,CAR,GETPROPC,NOT,OR,ENDP,COND,WRLD,INFECTIOUS-FNS,TRANSPARENT,DEFUN" data-used-by="ENCAPSULATE-PASS-2" data-part-name="TRANSPARENT-MISMATCH" data-part-args="WRLD,INFECTIOUS-FNS,TRANSPARENT" data-part-body="CONS,T,CDR,TRANSPARENT-MISMATCH,CANONICAL-SIBLING,TRANSPARENT-FN-P,TRANSPARENT,IFF,WRLD,CONSTRAINEDP,QUOTE,CAR,GETPROPC,NOT,OR,INFECTIOUS-FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSPARENT-MISMATCH">transparent-mismatch</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-transparent-mismatch" data-sym="TRANSPARENT-MISMATCH" title="(defun transparent-mismatch (transparent infectious-fns wrld)
  (cond ((endp infectious-fns) nil)
        ((or (not (getpropc (car infectious-fns) &#39;constrainedp nil wrld))
             (iff transparent
                  (transparent-fn-p
...">transparent-mismatch</a>
  (transparent infectious-fns wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> infectious-fns) nil)
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car infectious-fns) 'constrainedp nil wrld))
       (<a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a> transparent
         (<a class="sym-link system" href="defthm.html#def-transparent-fn-p" data-sym="TRANSPARENT-FN-P">transparent-fn-p</a> (<a class="sym-link system" href="defthm.html#def-canonical-sibling" data-sym="CANONICAL-SIBLING">canonical-sibling</a> (car infectious-fns) wrld)
           wrld))) (<a class="sym-link local-def" href="#def-transparent-mismatch" data-sym="TRANSPARENT-MISMATCH" title="(defun transparent-mismatch (transparent infectious-fns wrld)
  (cond ((endp infectious-fns) nil)
        ((or (not (getpropc (car infectious-fns) &#39;constrainedp nil wrld))
             (iff transparent
                  (transparent-fn-p
...">transparent-mismatch</a> transparent (cdr infectious-fns) wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car infectious-fns)
        (<a class="sym-link local-def" href="#def-transparent-mismatch" data-sym="TRANSPARENT-MISMATCH" title="(defun transparent-mismatch (transparent infectious-fns wrld)
  (cond ((endp infectious-fns) nil)
        ((or (not (getpropc (car infectious-fns) &#39;constrainedp nil wrld))
             (iff transparent
                  (transparent-fn-p
...">transparent-mismatch</a> transparent (cdr infectious-fns) wrld)))))</pre>
  </div>

<div class="form-block function" id="def-encapsulate-pass-2" data-defines="ENCAPSULATE-PASS-2" data-references="BOGUS-EXPORTED-COMPLIANTS,EXTENSION,TRANSPARENT-REC,MAKE,CONSTRAINEDP,PUTPROP,REMOVE1,MEMBER-EQ,SIBLINGS,PUTPROP-X-LST1,SUBSETP-EQ,ASSERT$,CDR,ALL-FNNAMES1,*UNKNOWN-CONSTRAINTS*,REMOVE1-EQ,PUTPROP-CONSTRAINTS,WRLD2,TRANSPARENT-MISMATCH,ENCAPSULATE-CONSTRAINT,EXPORTS-WITH-SIG-ANCESTORS,INFECTIOUS-FNS,SUBVERSIVE-FNS,CONSTRAINED-FNS,CONSTRAINT-LST-ETC,MV-LET,SIG-FNS,LIST,STRIP-CARS,SOFT,ER,ASSOC-KEYWORD,TRANSPARENT,EQUAL,UNKNOWN-CONSTRAINTS-P,EXPORTED-FUNCTION-NAMES,EXPORTED-NAMES,OBSERVATION,PPROGN,CONS,VALUE,RETRACTION,SET-W,LET,COND,CAR,RETVAL,TOP-LEVEL-CLTL-COMMAND-STACK,CERTIFY-BOOK-INFO,FAST-CERT-MODE,EQ,FAST-CERT-EXTENSION,EVENT-LANDMARK,ASSOC-EQ,EMPTY-P,NEW-TRIPS,WRLD,CDDR,PROTO-WRLD3,CADR,EXPANSION-ALIST,REMOVE-TYPE-PRESCRIPTION-CERT-DATA,CERT-DATA,NULL,IF,NOT,T,OR,ENCAPSULATE,LIST*,CURRENT-PACKAGE,INCLUDE-BOOK,PROCESS-EMBEDDED-EVENTS,LOCAL-ENCAPSULATE,F-GET-GLOBAL,AND,IN-LOCAL-FLG,STATE-GLOBAL-LET*,VAL/EXPANSION-ALIST/PROTO-WRLD3,ER-LET*,UNKNOWN-CONSTRAINTS-TABLE,QUOTE,TABLE-ALIST,SAVED-UNKNOWN-CONSTRAINTS-TABLE,W,WRLD1,LET*,STATE,CTX,ONLY-PASS-P,SAVED-ACL2-DEFAULTS-TABLE,EV-LST,KWD-VALUE-LIST-LST,INSIGS,DEFUN" data-used-by="ENCAPSULATE-FN,PROCESS-EMBEDDED-EVENTS,EVAL-EVENT-LST" data-part-name="ENCAPSULATE-PASS-2" data-part-args="STATE,CTX,ONLY-PASS-P,SAVED-ACL2-DEFAULTS-TABLE,EV-LST,KWD-VALUE-LIST-LST,INSIGS" data-part-body="BOGUS-EXPORTED-COMPLIANTS,EXTENSION,TRANSPARENT-REC,MAKE,CONSTRAINEDP,PUTPROP,REMOVE1,MEMBER-EQ,SIBLINGS,PUTPROP-X-LST1,SUBSETP-EQ,ASSERT$,CDR,ALL-FNNAMES1,*UNKNOWN-CONSTRAINTS*,REMOVE1-EQ,PUTPROP-CONSTRAINTS,WRLD2,TRANSPARENT-MISMATCH,ENCAPSULATE-CONSTRAINT,EXPORTS-WITH-SIG-ANCESTORS,INFECTIOUS-FNS,SUBVERSIVE-FNS,CONSTRAINED-FNS,CONSTRAINT-LST-ETC,MV-LET,SIG-FNS,LIST,STRIP-CARS,SOFT,ER,ASSOC-KEYWORD,TRANSPARENT,EQUAL,UNKNOWN-CONSTRAINTS-P,EXPORTED-FUNCTION-NAMES,EXPORTED-NAMES,OBSERVATION,PPROGN,CONS,VALUE,RETRACTION,SET-W,LET,COND,CAR,RETVAL,TOP-LEVEL-CLTL-COMMAND-STACK,CERTIFY-BOOK-INFO,FAST-CERT-MODE,EQ,FAST-CERT-EXTENSION,EVENT-LANDMARK,ASSOC-EQ,EMPTY-P,NEW-TRIPS,WRLD,CDDR,PROTO-WRLD3,CADR,EXPANSION-ALIST,CTX,REMOVE-TYPE-PRESCRIPTION-CERT-DATA,CERT-DATA,NULL,IF,ONLY-PASS-P,NOT,EV-LST,T,KWD-VALUE-LIST-LST,OR,INSIGS,ENCAPSULATE,LIST*,CURRENT-PACKAGE,INCLUDE-BOOK,SAVED-ACL2-DEFAULTS-TABLE,ENCAPSULATE-PASS-2,PROCESS-EMBEDDED-EVENTS,LOCAL-ENCAPSULATE,F-GET-GLOBAL,AND,IN-LOCAL-FLG,STATE-GLOBAL-LET*,VAL/EXPANSION-ALIST/PROTO-WRLD3,ER-LET*,UNKNOWN-CONSTRAINTS-TABLE,QUOTE,TABLE-ALIST,SAVED-UNKNOWN-CONSTRAINTS-TABLE,STATE,W,WRLD1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENCAPSULATE-PASS-2">encapsulate-pass-2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-encapsulate-pass-2" data-sym="ENCAPSULATE-PASS-2" title="(defun encapsulate-pass-2
       (insigs kwd-value-list-lst ev-lst saved-acl2-defaults-table only-pass-p
        ctx state)
  (let* ((wrld1 (w state))
         (saved-unknown-constraints-table
...">encapsulate-pass-2</a>
  (insigs kwd-value-list-lst
    ev-lst
    saved-acl2-defaults-table
    only-pass-p
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (saved-unknown-constraints-table (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'unknown-constraints-table wrld1)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val/expansion-alist/proto-wrld3 (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((in-local-flg (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state) 'local-encapsulate)))
           (<a class="sym-link local-def" href="#def-process-embedded-events" data-sym="PROCESS-EMBEDDED-EVENTS" title="(defun process-embedded-events
       (caller acl2-defaults-table skip-proofsp pkg ee-entry ev-lst index
        make-event-chk cert-data ctx state)
  (let* ((wrld1 (w state))
         (kpa (known-package-alist state))
...">process-embedded-events</a> '<a class="sym-link local-def" href="#def-encapsulate-pass-2" data-sym="ENCAPSULATE-PASS-2" title="(defun encapsulate-pass-2
       (insigs kwd-value-list-lst ev-lst saved-acl2-defaults-table only-pass-p
        ctx state)
  (let* ((wrld1 (w state))
         (saved-unknown-constraints-table
...">encapsulate-pass-2</a>
             saved-acl2-defaults-table
             '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
             (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
             (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> insigs (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> kwd-value-list-lst <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
             ev-lst
             <span class="number">0</span>
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> only-pass-p)
             (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> insigs)
               (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'cert-data state)
               (<a class="sym-link local-def" href="#def-remove-type-prescription-cert-data" data-sym="REMOVE-TYPE-PRESCRIPTION-CERT-DATA" title="(defun remove-type-prescription-cert-data (cert-data)
  (remove1-assoc-eq :type-prescription cert-data))">remove-type-prescription-cert-data</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'cert-data state)))
             ctx
             state))))
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((expansion-alist (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val/expansion-alist/proto-wrld3)) (proto-wrld3 (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> val/expansion-alist/proto-wrld3))
          (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
          (<a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a> (<a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a> wrld proto-wrld3))
          (empty-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> insigs)
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> 'event-landmark <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>))))
          (fast-cert-extension (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> empty-p
              (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="history-management.html#def-fast-cert-mode" data-sym="FAST-CERT-MODE">fast-cert-mode</a> state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'certify-book-info state)
              (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> 'top-level-cltl-command-stack <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>)))
          (retval (if fast-cert-extension
              <span class="keyword">:trivial-extension-for-fast-cert</span> (car val/expansion-alist/proto-wrld3))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> empty-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> fast-cert-extension)) (let ((state (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'retraction wrld1 state)))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <span class="keyword">:empty-encapsulate</span> expansion-alist))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (fast-cert-extension (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
                    <span class="string">"This encapsulate event does not introduce any new ~
                           events, but it has encountered at least one ~
                           non-local definition that was redundant with an ~
                           existing local definition."</span>))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
              (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((exported-names (<a class="sym-link local-def" href="#def-exported-function-names" data-sym="EXPORTED-FUNCTION-NAMES" title="(defun exported-function-names (new-trips)
  (cond ((endp new-trips) nil)
        (t
         (let ((new-name (name-introduced (car new-trips) t)))
           (cond
...">exported-function-names</a> <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>)) (unknown-constraints-table (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'unknown-constraints-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
                  (<a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> insigs
                      (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal unknown-constraints-table
                          saved-unknown-constraints-table))))
                  (transparent (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:transparent</span> (car kwd-value-list-lst)))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> exported-names) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"A partial-encapsulate must introduce only the functions ~
                    listed in its signature.  However, the signature&#39;s list ~
                    of names, ~x0, is missing the function name~#1~[~/s~] ~
                    ~&amp;1, also introduced by that encapsulate.  See :DOC ~
                    partial-encapsulate."</span>
                      (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> insigs)
                      exported-names))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> transparent) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"A partial-encapsulate must not specify :transparent t in ~
                    its signature.  However, the signature with list of names ~
                    ~x0 does just that.  See :DOC transparent-functions."</span>
                      (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> insigs)))
                  ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> insigs) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if only-pass-p
                        (cons expansion-alist retval)
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil retval nil exported-names))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a> (<a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a> wrld wrld1)) (sig-fns (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> insigs)))
                      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a> constrained-fns
                          subversive-fns
                          infectious-fns
                          exports-with-sig-ancestors)
                        (<a class="sym-link local-def" href="#def-encapsulate-constraint" data-sym="ENCAPSULATE-CONSTRAINT" title="(defun encapsulate-constraint (sig-fns exported-names new-trips wrld)
  (assert$ sig-fns
           (let* ((fns
                   (constrained-functions
                    (collect-logicals exported-names wrld) sig-fns new-trips))
...">encapsulate-constraint</a> sig-fns
                          exported-names
                          <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>
                          wrld)
                        (let ((<a class="sym-link local-def" href="#def-transparent-mismatch" data-sym="TRANSPARENT-MISMATCH" title="(defun transparent-mismatch (transparent infectious-fns wrld)
  (cond ((endp infectious-fns) nil)
        ((or (not (getpropc (car infectious-fns) &#39;constrainedp nil wrld))
             (iff transparent
                  (transparent-fn-p
...">transparent-mismatch</a> (<a class="sym-link local-def" href="#def-transparent-mismatch" data-sym="TRANSPARENT-MISMATCH" title="(defun transparent-mismatch (transparent infectious-fns wrld)
  (cond ((endp infectious-fns) nil)
        ((or (not (getpropc (car infectious-fns) &#39;constrainedp nil wrld))
             (iff transparent
                  (transparent-fn-p
...">transparent-mismatch</a> transparent infectious-fns wrld)))
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link local-def" href="#def-transparent-mismatch" data-sym="TRANSPARENT-MISMATCH" title="(defun transparent-mismatch (transparent infectious-fns wrld)
  (cond ((endp infectious-fns) nil)
        ((or (not (getpropc (car infectious-fns) &#39;constrainedp nil wrld))
             (iff transparent
                  (transparent-fn-p
...">transparent-mismatch</a> (if transparent
                                (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                  ctx
                                  <span class="string">"The signature~#0~[~/s~] of the proposed ~
                                encapsulate event ~#0~[specifies~/specify~] ~
                                :transparent t (for ~&amp;0).  But function ~
                                symbol~#1~[~/s~] ~&amp;1 ~#1~[is~/are~] not ~
                                marked as transparent in ~#1~[its subsidiary ~
                                encapsulate signature~/their subsidiary ~
                                encapsulate signatures~].  This is illegal; ~
                                see :DOC transparent-functions."</span>
                                  sig-fns
                                  <a class="sym-link local-def" href="#def-transparent-mismatch" data-sym="TRANSPARENT-MISMATCH" title="(defun transparent-mismatch (transparent infectious-fns wrld)
  (cond ((endp infectious-fns) nil)
        ((or (not (getpropc (car infectious-fns) &#39;constrainedp nil wrld))
             (iff transparent
                  (transparent-fn-p
...">transparent-mismatch</a>)
                                (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                  ctx
                                  <span class="string">"The signature~#0~[~/s~] of the proposed ~
                              encapsulate event ~#0~[does~/do~] not specify ~
                              :transparent t (for ~&amp;0).  But function ~
                              symbol~#1~[~/s~] ~&amp;1 ~#1~[is~/are~] marked with ~
                              :transparent t in ~#1~[its subsidiary ~
                              encapsulate signature~/their subsidiary ~
                              encapsulate signatures~].  This is illegal; see ~
                              :DOC transparent-functions."</span>
                                  sig-fns
                                  <a class="sym-link local-def" href="#def-transparent-mismatch" data-sym="TRANSPARENT-MISMATCH" title="(defun transparent-mismatch (transparent infectious-fns wrld)
  (cond ((endp infectious-fns) nil)
        ((or (not (getpropc (car infectious-fns) &#39;constrainedp nil wrld))
             (iff transparent
                  (transparent-fn-p
...">transparent-mismatch</a>)))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld2 (<a class="sym-link local-def" href="#def-putprop-constraints" data-sym="PUTPROP-CONSTRAINTS" title="(defun putprop-constraints
       (fn constrained-fns constraint-lst-etc unknown-constraints-p wrld3)
  (putprop-x-lst1 constrained-fns &#39;constraint-lst-etc (cons fn nil)
                  (putprop fn &#39;constraint-lst-etc constraint-lst-etc
                           (cond
...">putprop-constraints</a> (car sig-fns)
                                     (<a class="sym-link system" href="axioms.html#def-remove1-eq" data-sym="REMOVE1-EQ">remove1-eq</a> (car sig-fns) constrained-fns)
                                     (if <a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a>
                                       (cons (cons <a class="sym-link system" href="axioms.html#def-_2Aunknown-constraints_2A" data-sym="*UNKNOWN-CONSTRAINTS*">*unknown-constraints*</a>
                                           (all-fnnames1 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                                             (car <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>)
                                             (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:supporters</span> unknown-constraints-table))))
                                         nil)
                                       <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>)
                                     <a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a>
                                     (if constrained-fns
                                       (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> subversive-fns constrained-fns)
                                         (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> infectious-fns constrained-fns)
                                           (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> constrained-fns
                                             '<a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a>
                                             (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> transparent
                                                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car constrained-fns) sig-fns)))
                                               (cons (car sig-fns) (<a class="sym-link system" href="axioms.html#def-remove1" data-sym="REMOVE1">remove1</a> (car sig-fns) constrained-fns))
                                               constrained-fns)
                                             (if transparent
                                               (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> (car sig-fns)
                                                 'constrainedp
                                                 (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> transparent-rec <span class="keyword">:names</span> nil)
                                                 wrld)
                                               wrld))))
                                       wrld))) (state (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension wrld2 state))
                                  (<a class="sym-link local-def" href="#def-bogus-exported-compliants" data-sym="BOGUS-EXPORTED-COMPLIANTS" title="(defun bogus-exported-compliants
       (names exports-with-sig-ancestors sig-fns wrld)
  (cond ((endp names) nil)
        ((and (eq (symbol-class (car names) wrld) :common-lisp-compliant)
              (not (getpropc (car names) &#39;constrainedp nil wrld))
...">bogus-exported-compliants</a> (<a class="sym-link local-def" href="#def-bogus-exported-compliants" data-sym="BOGUS-EXPORTED-COMPLIANTS" title="(defun bogus-exported-compliants
       (names exports-with-sig-ancestors sig-fns wrld)
  (cond ((endp names) nil)
        ((and (eq (symbol-class (car names) wrld) :common-lisp-compliant)
              (not (getpropc (car names) &#39;constrainedp nil wrld))
...">bogus-exported-compliants</a> exported-names
                                      exports-with-sig-ancestors
                                      sig-fns
                                      wrld2)))
                                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link local-def" href="#def-bogus-exported-compliants" data-sym="BOGUS-EXPORTED-COMPLIANTS" title="(defun bogus-exported-compliants
       (names exports-with-sig-ancestors sig-fns wrld)
  (cond ((endp names) nil)
        ((and (eq (symbol-class (car names) wrld) :common-lisp-compliant)
              (not (getpropc (car names) &#39;constrainedp nil wrld))
...">bogus-exported-compliants</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                      ctx
                                      <span class="string">"For the following function~#0~[~/s~] ~
                                introduced by this encapsulate event, guard ~
                                verification may depend on local properties ~
                                that are not exported from the encapsulate ~
                                event: ~&amp;0.  Consider delaying guard ~
                                verification until after the encapsulate ~
                                event, for example by using :verify-guards ~
                                nil."</span>
                                      <a class="sym-link local-def" href="#def-bogus-exported-compliants" data-sym="BOGUS-EXPORTED-COMPLIANTS" title="(defun bogus-exported-compliants
       (names exports-with-sig-ancestors sig-fns wrld)
  (cond ((endp names) nil)
        ((and (eq (symbol-class (car names) wrld) :common-lisp-compliant)
              (not (getpropc (car names) &#39;constrainedp nil wrld))
...">bogus-exported-compliants</a>))
                                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if only-pass-p
                                        (cons expansion-alist retval)
                                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> constrained-fns
                                          retval
                                          (if <a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a>
                                            <a class="sym-link system" href="axioms.html#def-_2Aunknown-constraints_2A" data-sym="*UNKNOWN-CONSTRAINTS*">*unknown-constraints*</a>
                                            (car <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>))
                                          exported-names
                                          subversive-fns
                                          infectious-fns)))))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-tilde-_40-abbreviate-object-phrase" data-defines="TILDE-@-ABBREVIATE-OBJECT-PHRASE" data-references="CADAR,CDAR,CAAR,CADR,CDR,CONSP,AND,LAST,CAR,T,LENGTH,<,SYMBOL-LISTP,MSG,ATOM,COND,X,DEFUN" data-used-by="MAKE-EVENT-CTX,PROGN-FN1,ENCAPSULATE-CTX" data-part-name="TILDE-@-ABBREVIATE-OBJECT-PHRASE" data-part-args="X" data-part-body="CADAR,CDAR,CAAR,CADR,CDR,CONSP,AND,LAST,CAR,T,LENGTH,<,SYMBOL-LISTP,MSG,X,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-@-ABBREVIATE-OBJECT-PHRASE">tilde-@-abbreviate-object-phrase</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_40-abbreviate-object-phrase" data-sym="TILDE-@-ABBREVIATE-OBJECT-PHRASE" title="(defun tilde-@-abbreviate-object-phrase (x)
  (cond ((atom x) (msg &quot;~x0&quot; x))
        ((symbol-listp x)
         (cond ((&lt; (length x) 3) (msg &quot;~x0&quot; x))
               (t (msg &quot;(~x0 ... ~x1)&quot; (car x) (car (last x))))))
...">tilde-@-abbreviate-object-phrase</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0"</span> x))
    ((<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> x) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((&lt; (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> x) <span class="number">3</span>) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0"</span> x))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"(~x0 ... ~x1)"</span> (car x) (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> x))))))
    ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (car x)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr x)) (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"(~x0 ~x1 ...)"</span> (car x) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"(~x0 ...)"</span> (car x)))))
    ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)) (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> x))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"((~x0 ~x1 ...) ...)"</span> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x) (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> x)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"((~x0 ...) ...)"</span> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"(((...) ...) ...)"</span>)))</pre>
  </div>

<div class="form-block function" id="def-encapsulate-ctx" data-defines="ENCAPSULATE-CTX" data-references="T,TILDE-@-ABBREVIATE-OBJECT-PHRASE,MSG,CAAR,CAR,CONSP,AND,COND,FORM-LST,SIGNATURES,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="ENCAPSULATE-CTX" data-part-args="FORM-LST,SIGNATURES" data-part-body="FORM-LST,T,TILDE-@-ABBREVIATE-OBJECT-PHRASE,MSG,CAAR,CAR,CONSP,AND,SIGNATURES,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENCAPSULATE-CTX">encapsulate-ctx</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-encapsulate-ctx" data-sym="ENCAPSULATE-CTX" title="(defun encapsulate-ctx (signatures form-lst)
  (cond
   (signatures
    (cond
     ((and (consp signatures) (consp (car signatures))
...">encapsulate-ctx</a>
  (signatures form-lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (signatures (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp signatures)
           (consp (car signatures))
           (consp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> signatures))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( ENCAPSULATE (~@0 ...) ...)"</span>
            (<a class="sym-link local-def" href="#def-tilde-_40-abbreviate-object-phrase" data-sym="TILDE-@-ABBREVIATE-OBJECT-PHRASE" title="(defun tilde-@-abbreviate-object-phrase (x)
  (cond ((atom x) (msg &quot;~x0&quot; x))
        ((symbol-listp x)
         (cond ((&lt; (length x) 3) (msg &quot;~x0&quot; x))
               (t (msg &quot;(~x0 ... ~x1)&quot; (car x) (car (last x))))))
...">tilde-@-abbreviate-object-phrase</a> (car signatures))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( ENCAPSULATE ~@0 ...)"</span>
            (<a class="sym-link local-def" href="#def-tilde-_40-abbreviate-object-phrase" data-sym="TILDE-@-ABBREVIATE-OBJECT-PHRASE" title="(defun tilde-@-abbreviate-object-phrase (x)
  (cond ((atom x) (msg &quot;~x0&quot; x))
        ((symbol-listp x)
         (cond ((&lt; (length x) 3) (msg &quot;~x0&quot; x))
               (t (msg &quot;(~x0 ... ~x1)&quot; (car x) (car (last x))))))
...">tilde-@-abbreviate-object-phrase</a> signatures)))))
    (form-lst (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( ENCAPSULATE NIL ~@0 ...)"</span>
        (<a class="sym-link local-def" href="#def-tilde-_40-abbreviate-object-phrase" data-sym="TILDE-@-ABBREVIATE-OBJECT-PHRASE" title="(defun tilde-@-abbreviate-object-phrase (x)
  (cond ((atom x) (msg &quot;~x0&quot; x))
        ((symbol-listp x)
         (cond ((&lt; (length x) 3) (msg &quot;~x0&quot; x))
               (t (msg &quot;(~x0 ... ~x1)&quot; (car x) (car (last x))))))
...">tilde-@-abbreviate-object-phrase</a> (car form-lst))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"( ENCAPSULATE NIL)"</span>)))</pre>
  </div>

<div class="form-block function" id="def-print-encapsulate-msg1" data-defines="PRINT-ENCAPSULATE-MSG1" data-references="PROOFS-CO,LD-PRE-EVAL-PRINT,EQ,IF,LENGTH,CONS,LIST,FMS,EVENT,IO?,T,LD-SKIP-PROOFSP,COND,IGNORE,DECLARE,STATE,FORM-LST,INSIGS,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="PRINT-ENCAPSULATE-MSG1" data-part-args="STATE,FORM-LST,INSIGS" data-part-declare="INSIGS,IGNORE,DECLARE" data-part-body="PROOFS-CO,LD-PRE-EVAL-PRINT,EQ,IF,LENGTH,CONS,LIST,FMS,FORM-LST,EVENT,IO?,T,STATE,LD-SKIP-PROOFSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-ENCAPSULATE-MSG1">print-encapsulate-msg1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-encapsulate-msg1" data-sym="PRINT-ENCAPSULATE-MSG1" title="(defun print-encapsulate-msg1 (insigs form-lst state)
  (declare (ignore insigs))
  (cond ((ld-skip-proofsp state) state)
        (t
         (io? event nil state (form-lst)
...">print-encapsulate-msg1</a>
  (insigs form-lst state)
  (declare (ignore insigs))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) state)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
        nil
        state
        (form-lst)
        (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"To verify that the ~#0~[~/~n1 ~]encapsulated event~#0~[~/s~] ~
               correctly extend~#0~[s~/~] the current theory we will evaluate ~
               ~#0~[it~/them~].  The theory thus constructed is only ~
               ephemeral.~|~#2~[~%Encapsulated Event~#0~[~/s~]:~%~/~]"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 form-lst)
            (cons #\1 (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> form-lst))
            (cons #\2
              (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> state) <span class="keyword">:never</span>)
                <span class="number">1</span>
                <span class="number">0</span>)))
          (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
          state
          nil)))))</pre>
  </div>

<div class="form-block function" id="def-print-encapsulate-msg2" data-defines="PRINT-ENCAPSULATE-MSG2" data-references="PROOFS-CO,CONS,LIST,FMS,EVENT,IO?,T,LD-SKIP-PROOFSP,COND,IGNORE,DECLARE,STATE,FORM-LST,INSIGS,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="PRINT-ENCAPSULATE-MSG2" data-part-args="STATE,FORM-LST,INSIGS" data-part-declare="INSIGS,IGNORE,DECLARE" data-part-body="PROOFS-CO,CONS,LIST,FMS,FORM-LST,EVENT,IO?,T,STATE,LD-SKIP-PROOFSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-ENCAPSULATE-MSG2">print-encapsulate-msg2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-encapsulate-msg2" data-sym="PRINT-ENCAPSULATE-MSG2" title="(defun print-encapsulate-msg2 (insigs form-lst state)
  (declare (ignore insigs))
  (cond ((ld-skip-proofsp state) state)
        (t
         (io? event nil state (form-lst)
...">print-encapsulate-msg2</a>
  (insigs form-lst state)
  (declare (ignore insigs))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) state)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
        nil
        state
        (form-lst)
        (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"End of Encapsulated Event~#0~[~/s~].~%"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 form-lst))
          (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
          state
          nil)))))</pre>
  </div>

<div class="form-block function" id="def-print-encapsulate-msg3_2Fexported-names" data-defines="PRINT-ENCAPSULATE-MSG3/EXPORTED-NAMES" data-references="T,STRIP-CARS,MSG,LIST,NULL,COND,LST,INSIGS,DEFUN" data-used-by="PRINT-ENCAPSULATE-MSG3" data-part-name="PRINT-ENCAPSULATE-MSG3/EXPORTED-NAMES" data-part-args="LST,INSIGS" data-part-body="T,STRIP-CARS,MSG,LIST,INSIGS,LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-ENCAPSULATE-MSG3/EXPORTED-NAMES">print-encapsulate-msg3/exported-names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-encapsulate-msg3_2Fexported-names" data-sym="PRINT-ENCAPSULATE-MSG3/EXPORTED-NAMES" title="(defun print-encapsulate-msg3/exported-names (insigs lst)
  (cond ((null lst) nil)
        (insigs
         (list
          (msg &quot;In addition to ~&amp;0, we export ~&amp;1.~|~%&quot; (strip-cars insigs)
...">print-encapsulate-msg3/exported-names</a>
  (insigs lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst) nil)
    (insigs (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"In addition to ~&amp;0, we export ~&amp;1.~|~%"</span>
          (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> insigs)
          lst)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"We export ~&amp;0.~|~%"</span> lst)))))</pre>
  </div>

<div class="form-block function" id="def-print-encapsulate-msg3_2Fconstraints" data-defines="PRINT-ENCAPSULATE-MSG3/CONSTRAINTS" data-references="CONJOIN,UNTRANSLATE,T,OTHERWISE,CASE,LENGTH,N,LET,MSG,LIST,*UNKNOWN-CONSTRAINTS*,EQ,QUOTE,HARD,ER,NULL,COND,WRLD,CONSTRAINTS,CONSTRAINED-FNS,DEFUN" data-used-by="PRINT-ENCAPSULATE-MSG3" data-part-name="PRINT-ENCAPSULATE-MSG3/CONSTRAINTS" data-part-args="WRLD,CONSTRAINTS,CONSTRAINED-FNS" data-part-body="WRLD,CONJOIN,UNTRANSLATE,T,OTHERWISE,CASE,LENGTH,N,LET,MSG,LIST,*UNKNOWN-CONSTRAINTS*,EQ,PRINT-ENCAPSULATE-MSG3/CONSTRAINTS,QUOTE,HARD,ER,CONSTRAINED-FNS,CONSTRAINTS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-ENCAPSULATE-MSG3/CONSTRAINTS">print-encapsulate-msg3/constraints</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-encapsulate-msg3_2Fconstraints" data-sym="PRINT-ENCAPSULATE-MSG3/CONSTRAINTS" title="(defun print-encapsulate-msg3/constraints (constrained-fns constraints wrld)
  (cond ((null constraints) nil)
        ((null constrained-fns)
         (er hard &#39;print-encapsulate-msg3/constraints
             &quot;We had thought that the only way that there can be constraints is if ~
...">print-encapsulate-msg3/constraints</a>
  (constrained-fns constraints wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> constraints) nil)
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> constrained-fns) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-print-encapsulate-msg3_2Fconstraints" data-sym="PRINT-ENCAPSULATE-MSG3/CONSTRAINTS" title="(defun print-encapsulate-msg3/constraints (constrained-fns constraints wrld)
  (cond ((null constraints) nil)
        ((null constrained-fns)
         (er hard &#39;print-encapsulate-msg3/constraints
             &quot;We had thought that the only way that there can be constraints is if ~
...">print-encapsulate-msg3/constraints</a>
        <span class="string">"We had thought that the only way that there can be constraints is if ~
         there are constrained functions.  See ~
         print-encapsulate-msg3/constraints."</span>))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> constraints <a class="sym-link system" href="axioms.html#def-_2Aunknown-constraints_2A" data-sym="*UNKNOWN-CONSTRAINTS*">*unknown-constraints*</a>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Unknown-constraints are associated with ~#0~[the function~/both of ~
           the functions~/every one of the functions~] ~&amp;1.  See :DOC ~
           partial-encapsulate.~|~%"</span>
          (let ((n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> constrained-fns)))
            (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> n (<span class="number">1</span> <span class="number">0</span>) (<span class="number">2</span> <span class="number">1</span>) (otherwise <span class="number">2</span>)))
          constrained-fns)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The following constraint is associated with ~#0~[the ~
             function~/both of the functions~/every one of the functions~] ~
             ~&amp;1:~|~%~p2~|"</span>
          (let ((n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> constrained-fns)))
            (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> n (<span class="number">1</span> <span class="number">0</span>) (<span class="number">2</span> <span class="number">1</span>) (otherwise <span class="number">2</span>)))
          constrained-fns
          (untranslate (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> constraints) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld))))))</pre>
  </div>

<div class="form-block function" id="def-print-encapsulate-msg3" data-defines="PRINT-ENCAPSULATE-MSG3" data-references="WARNING$,IF,STRIP-CARS,PRINT-DEFUN-MSG/SIGNATURES,TERM-EVISC-TUPLE,PROOFS-CO,PRINT-ENCAPSULATE-MSG3/CONSTRAINTS,PRINT-ENCAPSULATE-MSG3/EXPORTED-NAMES,APPEND,CONS,LIST,FMS,PPROGN,EVENT,IO?,T,LD-SKIP-PROOFSP,COND,STATE,WRLD,INFECTIOUS-FNS,SUBVERSIVE-FNS,CONSTRAINTS-INTRODUCED,CONSTRAINED-FNS,EXPORTED-NAMES,FORM-LST,INSIGS,CTX,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="PRINT-ENCAPSULATE-MSG3" data-part-args="STATE,WRLD,INFECTIOUS-FNS,SUBVERSIVE-FNS,CONSTRAINTS-INTRODUCED,CONSTRAINED-FNS,EXPORTED-NAMES,FORM-LST,INSIGS,CTX" data-part-body="WARNING$,IF,STRIP-CARS,PRINT-DEFUN-MSG/SIGNATURES,TERM-EVISC-TUPLE,PROOFS-CO,PRINT-ENCAPSULATE-MSG3/CONSTRAINTS,PRINT-ENCAPSULATE-MSG3/EXPORTED-NAMES,APPEND,CONS,LIST,FMS,PPROGN,FORM-LST,INSIGS,EXPORTED-NAMES,CONSTRAINED-FNS,CONSTRAINTS-INTRODUCED,WRLD,SUBVERSIVE-FNS,CTX,INFECTIOUS-FNS,EVENT,IO?,T,STATE,LD-SKIP-PROOFSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-ENCAPSULATE-MSG3">print-encapsulate-msg3</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-encapsulate-msg3" data-sym="PRINT-ENCAPSULATE-MSG3" title="(defun print-encapsulate-msg3
       (ctx insigs form-lst exported-names constrained-fns
        constraints-introduced subversive-fns infectious-fns wrld state)
  (cond ((ld-skip-proofsp state) state)
        (t
...">print-encapsulate-msg3</a>
  (ctx insigs
    form-lst
    exported-names
    constrained-fns
    constraints-introduced
    subversive-fns
    infectious-fns
    wrld
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) state)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
        nil
        state
        (infectious-fns ctx
          subversive-fns
          wrld
          constraints-introduced
          constrained-fns
          exported-names
          insigs
          form-lst)
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Having verified that the encapsulated event~#0~[ ~
                validates~/s validate~] the signatures of the ~
                ENCAPSULATE event, we discard the ephemeral theory ~
                and extend the original theory as directed by the ~
                signatures and the non-LOCAL events.~|~%~*1"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 form-lst)
              (cons #\1
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span>
                  <span class="string">"~@*"</span>
                  <span class="string">"~@*"</span>
                  <span class="string">"~@*"</span>
                  (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-print-encapsulate-msg3_2Fexported-names" data-sym="PRINT-ENCAPSULATE-MSG3/EXPORTED-NAMES" title="(defun print-encapsulate-msg3/exported-names (insigs lst)
  (cond ((null lst) nil)
        (insigs
         (list
          (msg &quot;In addition to ~&amp;0, we export ~&amp;1.~|~%&quot; (strip-cars insigs)
...">print-encapsulate-msg3/exported-names</a> insigs
                      exported-names)
                    (<a class="sym-link local-def" href="#def-print-encapsulate-msg3_2Fconstraints" data-sym="PRINT-ENCAPSULATE-MSG3/CONSTRAINTS" title="(defun print-encapsulate-msg3/constraints (constrained-fns constraints wrld)
  (cond ((null constraints) nil)
        ((null constrained-fns)
         (er hard &#39;print-encapsulate-msg3/constraints
             &quot;We had thought that the only way that there can be constraints is if ~
...">print-encapsulate-msg3/constraints</a> constrained-fns
                      constraints-introduced
                      wrld)))))
            (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
            state
            (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state))
          (<a class="sym-link system" href="defuns.html#def-print-defun-msg_2Fsignatures" data-sym="PRINT-DEFUN-MSG/SIGNATURES">print-defun-msg/signatures</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> insigs) wrld state)
          (if subversive-fns
            (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
              <span class="string">"Infected"</span>
              <span class="string">"Note that ~&amp;0 ~#0~[is~/are~] ``subversive.&#39;&#39; See ~
                         :DOC subversive-recursions.  Thus, ~#0~[its ~
                         definitional equation infects~/their definitional ~
                         equations infect~] the constraint of this ~
                         en~-cap~-su~-la~-tion.  Furthermore, ~#0~[this ~
                         function~/these functions~] will not suggest any ~
                         induction schemes or type-prescription rules to the ~
                         theorem prover. If possible, you should remove ~
                         ~#0~[this definition~/these definitions~] from the ~
                         encapsulate and introduce ~#0~[it~/them~] ~
                         afterwards.  A constraint containing a definitional ~
                         equation is often hard to use in subsequent ~
                         functional instantiations."</span>
              subversive-fns)
            state)
          (if infectious-fns
            (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
              <span class="string">"Infected"</span>
              <span class="string">"Note that the defining event~#0~[~/s~] for ~&amp;0 ~
                         infect~#0~[s~/~] the constraint of this ~
                         en~-cap~-su~-la~-tion.  That can be caused because a ~
                         function ancestrally involves the constrained ~
                         functions of an encapsulate and is ancestrally ~
                         involved in the constraining theorems of those ~
                         functions.  In any case, if at all possible, you ~
                         should move ~#0~[this defining event~/these defining ~
                         events~] out of the encapsulation.  A constraint ~
                         containing the formula of such an event is often ~
                         hard to use in subsequent functional instantiations. ~
                         ~ See :DOC infected-constraints and perhaps :DOC ~
                         subversive-recursions for discussion of related ~
                         issues."</span>
              infectious-fns)
            state))))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-find-first-non-local-name" data-defines="FIND-FIRST-NON-LOCAL-NAME" data-references="CDR,EQ,ANS2,ATOM,ANS,T,MACROEXPAND1-CMP,EXPANSION,ERP,MV-LET,MACRO-BODY,GETPROPC,LAST,WITH-PROVER-TIME-LIMIT,WITH-PROVER-STEP-LIMIT,WITH-OUTPUT,WITH-GUARD-CHECKING-EVENT,WITH-CURRENT-PACKAGE,WITH-CBD,SKIP-PROOFS,MEMBER-EQ,NOT,COND,LST,SYM,VERIFY-GUARDS,PROGN,CAR,STATE,NAMES,VERIFY-TERMINATION-FN,MAKE-EVENT,FIND-FIRST-NON-LOCAL-NAME-LST,EV-LST,SYMBOL-NAME,EQUAL,SYMBOLP,AND,ARROW,ENCAPSULATE,DEFTHM,DEFABSSTOBJ,DEFSTOBJ,DEFUNS,DEFTHEORY,DEFMACRO,DEFLABEL,DEFCONST,DEFCHOOSE,DEFAXIOM,NAME,&,LOCAL,QUOTE,CASE-MATCH,VAL,LET,STATE-VARS,PRIMITIVES,WRLD,X,DEFUN,MUTUAL-RECURSION" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-FIRST-NON-LOCAL-NAME">find-first-non-local-name</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-first-non-local-name" data-sym="FIND-FIRST-NON-LOCAL-NAME" title="(mutual-recursion
 (defun find-first-non-local-name (x wrld primitives state-vars)
   (let ((val
          (case-match x ((&#39;local . &amp;) nil) ((&#39;defun name . &amp;) name)
                      ((&#39;defaxiom name . &amp;) name) ((&#39;defchoose name . &amp;) name)
...">find-first-non-local-name</a>
    (x wrld primitives state-vars)
    (let ((val (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> x
           (('<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> . &amp;) nil)
           (('<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> name . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-defaxiom" data-sym="DEFAXIOM">defaxiom</a> name . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a> name . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> name . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a> name . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> name . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> name . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a> (name . &amp;) . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> name . &amp;) name)
           (('<a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a> name . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> name . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> (((name . &amp;) arrow . &amp;) . &amp;) . &amp;) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp arrow) (equal (symbol-name arrow) <span class="string">"=&gt;"</span>) name))
           (('<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> ((name . &amp;) . &amp;) . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil . ev-lst) (find-first-non-local-name-lst ev-lst
               wrld
               primitives
               state-vars
               nil))
           (('<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> ('<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> name . &amp;) . &amp;) name)
           (('<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> ('<a class="sym-link system" href="defuns.html#def-verify-termination-fn" data-sym="VERIFY-TERMINATION-FN">verify-termination-fn</a> ('quote names) 'state)) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> names (car names)))
           (('<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> . &amp;) <span class="keyword">:make-event</span>)
           (('<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> . ev-lst) (find-first-non-local-name-lst ev-lst
               wrld
               primitives
               state-vars
               nil))
           (('<a class="sym-link system" href="axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> name . &amp;) name)
           ((sym . lst) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp sym)) nil)
               ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> sym
                  '(<a class="sym-link system" href="axioms.html#def-skip-proofs" data-sym="SKIP-PROOFS">skip-proofs</a> <a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a>
                    <a class="sym-link local-def" href="#def-with-current-package" data-sym="WITH-CURRENT-PACKAGE" title="(defmacro with-current-package (pkg form)
  (let ((form form))
    `(state-global-let* ((current-package ,pkg set-current-package-state))
                        ,form)))">with-current-package</a>
                    <a class="sym-link system" href="axioms.html#def-with-guard-checking-event" data-sym="WITH-GUARD-CHECKING-EVENT">with-guard-checking-event</a>
                    <a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a>
                    <a class="sym-link system" href="history-management.html#def-with-prover-step-limit" data-sym="WITH-PROVER-STEP-LIMIT">with-prover-step-limit</a>
                    <a class="sym-link system" href="axioms.html#def-with-prover-time-limit" data-sym="WITH-PROVER-TIME-LIMIT">with-prover-time-limit</a>)) (<a class="sym-link local-def" href="#def-find-first-non-local-name" data-sym="FIND-FIRST-NON-LOCAL-NAME" title="(mutual-recursion
 (defun find-first-non-local-name (x wrld primitives state-vars)
   (let ((val
          (case-match x ((&#39;local . &amp;) nil) ((&#39;defun name . &amp;) name)
                      ((&#39;defaxiom name . &amp;) name) ((&#39;defchoose name . &amp;) name)
...">find-first-non-local-name</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> lst))
                   wrld
                   primitives
                   state-vars))
               ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> sym primitives) nil)
               ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car x) 'macro-body nil wrld) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp expansion)
                   (macroexpand1-cmp x
                     '<a class="sym-link local-def" href="#def-find-first-non-local-name" data-sym="FIND-FIRST-NON-LOCAL-NAME" title="(mutual-recursion
 (defun find-first-non-local-name (x wrld primitives state-vars)
   (let ((val
          (case-match x ((&#39;local . &amp;) nil) ((&#39;defun name . &amp;) name)
                      ((&#39;defaxiom name . &amp;) name) ((&#39;defchoose name . &amp;) name)
...">find-first-non-local-name</a>
                     wrld
                     state-vars)
                   (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> erp)
                     (<a class="sym-link local-def" href="#def-find-first-non-local-name" data-sym="FIND-FIRST-NON-LOCAL-NAME" title="(mutual-recursion
 (defun find-first-non-local-name (x wrld primitives state-vars)
   (let ((val
          (case-match x ((&#39;local . &amp;) nil) ((&#39;defun name . &amp;) name)
                      ((&#39;defaxiom name . &amp;) name) ((&#39;defchoose name . &amp;) name)
...">find-first-non-local-name</a> expansion
                       wrld
                       primitives
                       state-vars))))
               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
           (&amp; nil))))
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp val) val)))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> find-first-non-local-name-lst
    (lst wrld primitives state-vars ans)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> lst) ans)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((ans2 (<a class="sym-link local-def" href="#def-find-first-non-local-name" data-sym="FIND-FIRST-NON-LOCAL-NAME" title="(mutual-recursion
 (defun find-first-non-local-name (x wrld primitives state-vars)
   (let ((val
          (case-match x ((&#39;local . &amp;) nil) ((&#39;defun name . &amp;) name)
                      ((&#39;defaxiom name . &amp;) name) ((&#39;defchoose name . &amp;) name)
...">find-first-non-local-name</a> (car lst)
               wrld
               primitives
               state-vars)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ans2 <span class="keyword">:make-event</span>) (find-first-non-local-name-lst (cdr lst)
                wrld
                primitives
                state-vars
                <span class="keyword">:make-event</span>))
            (ans2)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (find-first-non-local-name-lst (cdr lst)
                wrld
                primitives
                state-vars
                ans))))))))</pre>
  </div>

<div class="form-block function" id="def-equal-mod-elide-locals1" data-defines="EQUAL-MOD-ELIDE-LOCALS1" data-references="T,LAST,TIME$,RECORD-EXPANSION,WITH-PROVER-STEP-LIMIT,WITH-PROVER-TIME-LIMIT,WITH-OUTPUT,WITH-GUARD-CHECKING-EVENT,WITH-CURRENT-PACKAGE,WITH-CBD,SKIP-PROOFS,MEMBER-EQ,*LOCAL-VALUE-TRIPLE-ELIDED*,LOCAL,QUOTE,CAR,EQ,ATOM,COND,FORM,DEFUN" data-used-by="EQUAL-MOD-ELIDE-LOCALS" data-part-name="EQUAL-MOD-ELIDE-LOCALS1" data-part-args="FORM" data-part-body="T,LAST,EQUAL-MOD-ELIDE-LOCALS1,TIME$,RECORD-EXPANSION,WITH-PROVER-STEP-LIMIT,WITH-PROVER-TIME-LIMIT,WITH-OUTPUT,WITH-GUARD-CHECKING-EVENT,WITH-CURRENT-PACKAGE,WITH-CBD,SKIP-PROOFS,MEMBER-EQ,*LOCAL-VALUE-TRIPLE-ELIDED*,LOCAL,QUOTE,CAR,EQ,FORM,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EQUAL-MOD-ELIDE-LOCALS1">equal-mod-elide-locals1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-equal-mod-elide-locals1" data-sym="EQUAL-MOD-ELIDE-LOCALS1" title="(defun equal-mod-elide-locals1 (form)
  (cond ((atom form) form) ((eq (car form) &#39;local) *local-value-triple-elided*)
        ((member-eq (car form)
                    &#39;(skip-proofs with-cbd with-current-package
                                  with-guard-checking-event with-output
...">equal-mod-elide-locals1</a>
  (form)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> form) form)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>) <a class="sym-link local-def" href="#def-_2Alocal-value-triple-elided_2A" data-sym="*LOCAL-VALUE-TRIPLE-ELIDED*" title="(defconst *local-value-triple-elided* &#39;(local (value-triple :elided)))">*local-value-triple-elided*</a>)
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form)
       '(<a class="sym-link system" href="axioms.html#def-skip-proofs" data-sym="SKIP-PROOFS">skip-proofs</a> <a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a>
         <a class="sym-link local-def" href="#def-with-current-package" data-sym="WITH-CURRENT-PACKAGE" title="(defmacro with-current-package (pkg form)
  (let ((form form))
    `(state-global-let* ((current-package ,pkg set-current-package-state))
                        ,form)))">with-current-package</a>
         <a class="sym-link system" href="axioms.html#def-with-guard-checking-event" data-sym="WITH-GUARD-CHECKING-EVENT">with-guard-checking-event</a>
         <a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a>
         <a class="sym-link system" href="axioms.html#def-with-prover-time-limit" data-sym="WITH-PROVER-TIME-LIMIT">with-prover-time-limit</a>
         <a class="sym-link system" href="history-management.html#def-with-prover-step-limit" data-sym="WITH-PROVER-STEP-LIMIT">with-prover-step-limit</a>
         <a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a>
         <a class="sym-link system" href="axioms.html#def-time_24" data-sym="TIME$">time$</a>)) (<a class="sym-link local-def" href="#def-equal-mod-elide-locals1" data-sym="EQUAL-MOD-ELIDE-LOCALS1" title="(defun equal-mod-elide-locals1 (form)
  (cond ((atom form) form) ((eq (car form) &#39;local) *local-value-triple-elided*)
        ((member-eq (car form)
                    &#39;(skip-proofs with-cbd with-current-package
                                  with-guard-checking-event with-output
...">equal-mod-elide-locals1</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> form))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> form)))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-equal-mod-elide-locals" data-defines="EQUAL-MOD-ELIDE-LOCALS" data-references="NULL,ENDP,LST2,LST1,CDDR,ENCAPSULATE,CDDDR,BINDINGS-P2,CADR,CONSP,AND,BINDINGS-P1,PROGN!,CDR,EQUAL-MOD-ELIDE-LOCALS-LST,PROGN,QUOTE,CAR,EQ,NOT,T,EQUAL,COND,EQUAL-MOD-ELIDE-LOCALS1,LET,EV2,EV1,DEFUN,MUTUAL-RECURSION" data-used-by="CORRESPONDING-ENCAP-EVENTS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="EQUAL-MOD-ELIDE-LOCALS">equal-mod-elide-locals</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-equal-mod-elide-locals" data-sym="EQUAL-MOD-ELIDE-LOCALS" title="(mutual-recursion
 (defun equal-mod-elide-locals (ev1 ev2)
   (let ((ev1 (equal-mod-elide-locals1 ev1))
         (ev2 (equal-mod-elide-locals1 ev2)))
     (cond ((equal ev1 ev2) t) ((not (eq (car ev1) (car ev2))) nil)
...">equal-mod-elide-locals</a>
    (ev1 ev2)
    (let ((ev1 (<a class="sym-link local-def" href="#def-equal-mod-elide-locals1" data-sym="EQUAL-MOD-ELIDE-LOCALS1" title="(defun equal-mod-elide-locals1 (form)
  (cond ((atom form) form) ((eq (car form) &#39;local) *local-value-triple-elided*)
        ((member-eq (car form)
                    &#39;(skip-proofs with-cbd with-current-package
                                  with-guard-checking-event with-output
...">equal-mod-elide-locals1</a> ev1)) (ev2 (<a class="sym-link local-def" href="#def-equal-mod-elide-locals1" data-sym="EQUAL-MOD-ELIDE-LOCALS1" title="(defun equal-mod-elide-locals1 (form)
  (cond ((atom form) form) ((eq (car form) &#39;local) *local-value-triple-elided*)
        ((member-eq (car form)
                    &#39;(skip-proofs with-cbd with-current-package
                                  with-guard-checking-event with-output
...">equal-mod-elide-locals1</a> ev2)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal ev1 ev2) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ev1) (car ev2))) nil)
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ev1) '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>) (equal-mod-elide-locals-lst (cdr ev1) (cdr ev2)))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ev1) '<a class="sym-link system" href="basis-b.html#def-progn_21" data-sym="PROGN!">progn!</a>) (let ((bindings-p1 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr ev1))
                 (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ev1) <span class="keyword">:state-global-bindings</span>))) (bindings-p2 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr ev2))
                  (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ev2) <span class="keyword">:state-global-bindings</span>))))
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> bindings-p1 bindings-p2)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bindings-p1 (equal-mod-elide-locals-lst (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> ev1) (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> ev2)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (equal-mod-elide-locals-lst (cdr ev1) (cdr ev2)))))))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ev1) '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ev1) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ev2))
            (equal-mod-elide-locals-lst (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> ev1) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> ev2))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> equal-mod-elide-locals-lst
    (lst1 lst2)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst1) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst2))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-equal-mod-elide-locals" data-sym="EQUAL-MOD-ELIDE-LOCALS" title="(mutual-recursion
 (defun equal-mod-elide-locals (ev1 ev2)
   (let ((ev1 (equal-mod-elide-locals1 ev1))
         (ev2 (equal-mod-elide-locals1 ev2)))
     (cond ((equal ev1 ev2) t) ((not (eq (car ev1) (car ev2))) nil)
...">equal-mod-elide-locals</a> (car lst1) (car lst2))
          (equal-mod-elide-locals-lst (cdr lst1) (cdr lst2)))))))</pre>
  </div>

<div class="form-block function" id="def-corresponding-encap-events" data-defines="CORRESPONDING-ENCAP-EVENTS" data-references="EQUAL-MOD-ELIDE-LOCALS,CADR,RECORD-EXPANSION,QUOTE,EQ,CDR,EQUAL,NEW-EV,CAR,OLD-EV,LET,T,NULL,AND,ENDP,COND,ANS,R-E-P,NEW-EVS,OLD-EVS,DEFUN" data-used-by="CORRESPONDING-ENCAPS" data-part-name="CORRESPONDING-ENCAP-EVENTS" data-part-args="ANS,R-E-P,NEW-EVS,OLD-EVS" data-part-body="EQUAL-MOD-ELIDE-LOCALS,CADR,RECORD-EXPANSION,QUOTE,EQ,R-E-P,CDR,CORRESPONDING-ENCAP-EVENTS,EQUAL,NEW-EV,CAR,OLD-EV,LET,T,ANS,NEW-EVS,NULL,AND,OLD-EVS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CORRESPONDING-ENCAP-EVENTS">corresponding-encap-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-corresponding-encap-events" data-sym="CORRESPONDING-ENCAP-EVENTS" title="(defun corresponding-encap-events (old-evs new-evs r-e-p ans)
  (cond ((endp old-evs) (and (null new-evs) ans)) ((endp new-evs) nil)
        (t
         (let ((old-ev (car old-evs)) (new-ev (car new-evs)))
           (cond
...">corresponding-encap-events</a>
  (old-evs new-evs r-e-p ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> old-evs) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> new-evs) ans))
    ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> new-evs) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((old-ev (car old-evs)) (new-ev (car new-evs)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal old-ev new-ev) (<a class="sym-link local-def" href="#def-corresponding-encap-events" data-sym="CORRESPONDING-ENCAP-EVENTS" title="(defun corresponding-encap-events (old-evs new-evs r-e-p ans)
  (cond ((endp old-evs) (and (null new-evs) ans)) ((endp new-evs) nil)
        (t
         (let ((old-ev (car old-evs)) (new-ev (car new-evs)))
           (cond
...">corresponding-encap-events</a> (cdr old-evs)
              (cdr new-evs)
              r-e-p
              ans))
          ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> r-e-p
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car old-ev) '<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a>)
             (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> old-ev) new-ev)) (<a class="sym-link local-def" href="#def-corresponding-encap-events" data-sym="CORRESPONDING-ENCAP-EVENTS" title="(defun corresponding-encap-events (old-evs new-evs r-e-p ans)
  (cond ((endp old-evs) (and (null new-evs) ans)) ((endp new-evs) nil)
        (t
         (let ((old-ev (car old-evs)) (new-ev (car new-evs)))
           (cond
...">corresponding-encap-events</a> (cdr old-evs)
              (cdr new-evs)
              r-e-p
              <span class="keyword">:expanded</span>))
          ((<a class="sym-link local-def" href="#def-equal-mod-elide-locals" data-sym="EQUAL-MOD-ELIDE-LOCALS" title="(mutual-recursion
 (defun equal-mod-elide-locals (ev1 ev2)
   (let ((ev1 (equal-mod-elide-locals1 ev1))
         (ev2 (equal-mod-elide-locals1 ev2)))
     (cond ((equal ev1 ev2) t) ((not (eq (car ev1) (car ev2))) nil)
...">equal-mod-elide-locals</a> old-ev new-ev) (<a class="sym-link local-def" href="#def-corresponding-encap-events" data-sym="CORRESPONDING-ENCAP-EVENTS" title="(defun corresponding-encap-events (old-evs new-evs r-e-p ans)
  (cond ((endp old-evs) (and (null new-evs) ans)) ((endp new-evs) nil)
        (t
         (let ((old-ev (car old-evs)) (new-ev (car new-evs)))
           (cond
...">corresponding-encap-events</a> (cdr old-evs)
              (cdr new-evs)
              r-e-p
              <span class="keyword">:expanded</span>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))))</pre>
  </div>

<div class="form-block function" id="def-corresponding-encaps" data-defines="CORRESPONDING-ENCAPS" data-references="T,CDDR,CORRESPONDING-ENCAP-EVENTS,CADR,EQUAL,TRUE-LISTP,AND,ENCAPSULATE,QUOTE,CAR,EQ,ASSERT$,R-E-P,NEW,OLD,DEFUN" data-used-by="REDUNDANT-ENCAPSULATEP,REDUNDANT-ENCAPSULATE-TUPLEP" data-part-name="CORRESPONDING-ENCAPS" data-part-args="R-E-P,NEW,OLD" data-part-body="T,R-E-P,CDDR,CORRESPONDING-ENCAP-EVENTS,CADR,EQUAL,TRUE-LISTP,OLD,AND,ENCAPSULATE,QUOTE,NEW,CAR,EQ,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CORRESPONDING-ENCAPS">corresponding-encaps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-corresponding-encaps" data-sym="CORRESPONDING-ENCAPS" title="(defun corresponding-encaps (old new r-e-p)
  (assert$ (eq (car new) &#39;encapsulate)
           (and (eq (car old) &#39;encapsulate) (true-listp new)
                (equal (cadr old) (cadr new))
                (corresponding-encap-events (cddr old) (cddr new) r-e-p t))))">corresponding-encaps</a>
  (old new r-e-p)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car new) '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>)
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car old) '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>)
      (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> new)
      (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> old) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> new))
      (<a class="sym-link local-def" href="#def-corresponding-encap-events" data-sym="CORRESPONDING-ENCAP-EVENTS" title="(defun corresponding-encap-events (old-evs new-evs r-e-p ans)
  (cond ((endp old-evs) (and (null new-evs) ans)) ((endp new-evs) nil)
        (t
         (let ((old-ev (car old-evs)) (new-ev (car new-evs)))
           (cond
...">corresponding-encap-events</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> old) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> new) r-e-p <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block function" id="def-redundant-encapsulatep-result" data-defines="REDUNDANT-ENCAPSULATEP-RESULT" data-references="T,CDR,TOP-LEVEL-CLTL-COMMAND-STACK,QUOTE,GLOBAL-VAL,ACCESS-EVENT-TUPLE-DEPTH,NEW-TOP-LEVEL-CLTL-COMMAND-STACK,LIST*,ACCESS-EVENT-TUPLE-LOCAL-P,CAR,CDDR,EVENT-TUPLE,LET,STORE-CLTL-COMMAND-FOR-REDUNDANT-DEF,COND,STATE,WRLD,OLD-EV-WRLD,X,DEFUN" data-used-by="REDUNDANT-ENCAPSULATEP,REDUNDANT-ENCAPSULATE-TUPLEP" data-part-name="REDUNDANT-ENCAPSULATEP-RESULT" data-part-args="STATE,WRLD,OLD-EV-WRLD,X" data-part-body="T,CDR,WRLD,TOP-LEVEL-CLTL-COMMAND-STACK,QUOTE,GLOBAL-VAL,ACCESS-EVENT-TUPLE-DEPTH,NEW-TOP-LEVEL-CLTL-COMMAND-STACK,X,LIST*,ACCESS-EVENT-TUPLE-LOCAL-P,OLD-EV-WRLD,CAR,CDDR,EVENT-TUPLE,LET,STATE,STORE-CLTL-COMMAND-FOR-REDUNDANT-DEF,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDUNDANT-ENCAPSULATEP-RESULT">redundant-encapsulatep-result</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-redundant-encapsulatep-result" data-sym="REDUNDANT-ENCAPSULATEP-RESULT" title="(defun redundant-encapsulatep-result (x old-ev-wrld wrld state)
  (cond
   ((store-cltl-command-for-redundant-def state)
    (let ((event-tuple (cddr (car old-ev-wrld))))
      (cond
...">redundant-encapsulatep-result</a>
  (x old-ev-wrld wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="history-management.html#def-store-cltl-command-for-redundant-def" data-sym="STORE-CLTL-COMMAND-FOR-REDUNDANT-DEF">store-cltl-command-for-redundant-def</a> state) (let ((event-tuple (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car old-ev-wrld))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((access-event-tuple-local-p event-tuple) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:update-top-level-cltl-command-stack</span> x
              (<a class="sym-link system" href="history-management.html#def-new-top-level-cltl-command-stack" data-sym="NEW-TOP-LEVEL-CLTL-COMMAND-STACK">new-top-level-cltl-command-stack</a> (access-event-tuple-depth event-tuple)
                (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'top-level-cltl-command-stack wrld)
                (cdr old-ev-wrld))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> x))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> x)))</pre>
  </div>

<div class="form-block function" id="def-redundant-encapsulate-tuplep" data-defines="REDUNDANT-ENCAPSULATE-TUPLEP" data-references="CDR,T,IF,REDUNDANT-ENCAPSULATEP-RESULT,DEFAULT-VERIFY-GUARDS-EAGERNESS-FROM-TABLE,EQL,DEFAULT-RULER-EXTENDERS-FROM-TABLE,DEFAULT-DEFUN-MODE-FROM-TABLE,ACL2-DEFAULTS-TABLE,TABLE-ALIST,ADT,LET,CORRESPONDING-ENCAPS,ENCAPSULATE,CAR,EQUAL?,ACCESS-EVENT-TUPLE-FORM,OLD-EVENT-FORM,LET*,EVENT-LANDMARK,<=,ABSOLUTE-EVENT-NUMBER,INTEGERP,EXIT-BOOT-STRAP-MODE,CDDAR,ACCESS-COMMAND-TUPLE-FORM,EQUAL,GLOBAL-VALUE,CADAR,COMMAND-LANDMARK,QUOTE,CAAR,EQ,AND,NULL,OR,COND,R-E-P,STATE,WRLD0,WRLD,EVENT-NUMBER,VGE,RULER-EXTENDERS,MODE,EVENT-FORM,DEFUN" data-used-by="REDUNDANT-ENCAPSULATEP" data-part-name="REDUNDANT-ENCAPSULATE-TUPLEP" data-part-args="R-E-P,STATE,WRLD0,WRLD,EVENT-NUMBER,VGE,RULER-EXTENDERS,MODE,EVENT-FORM" data-part-body="CDR,REDUNDANT-ENCAPSULATE-TUPLEP,STATE,WRLD0,T,IF,REDUNDANT-ENCAPSULATEP-RESULT,VGE,DEFAULT-VERIFY-GUARDS-EAGERNESS-FROM-TABLE,EQL,RULER-EXTENDERS,DEFAULT-RULER-EXTENDERS-FROM-TABLE,MODE,DEFAULT-DEFUN-MODE-FROM-TABLE,ACL2-DEFAULTS-TABLE,TABLE-ALIST,ADT,LET,R-E-P,EVENT-FORM,CORRESPONDING-ENCAPS,ENCAPSULATE,CAR,EQUAL?,ACCESS-EVENT-TUPLE-FORM,OLD-EVENT-FORM,LET*,EVENT-LANDMARK,<=,ABSOLUTE-EVENT-NUMBER,EVENT-NUMBER,INTEGERP,EXIT-BOOT-STRAP-MODE,CDDAR,ACCESS-COMMAND-TUPLE-FORM,EQUAL,GLOBAL-VALUE,CADAR,COMMAND-LANDMARK,QUOTE,CAAR,EQ,AND,WRLD,NULL,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDUNDANT-ENCAPSULATE-TUPLEP">redundant-encapsulate-tuplep</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-redundant-encapsulate-tuplep" data-sym="REDUNDANT-ENCAPSULATE-TUPLEP" title="(defun redundant-encapsulate-tuplep
       (event-form mode ruler-extenders vge event-number wrld wrld0 state
        r-e-p)
  (cond
   ((or (null wrld)
...">redundant-encapsulate-tuplep</a>
  (event-form mode
    ruler-extenders
    vge
    event-number
    wrld
    wrld0
    state
    r-e-p)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld)
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld) 'command-landmark)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> wrld) 'global-value)
         (equal (access-command-tuple-form (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> wrld))
           '(exit-boot-strap-mode)))
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp event-number)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> wrld) 'absolute-event-number)
         (integerp (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> wrld))
         (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> wrld) event-number))) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld) 'event-landmark)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> wrld) 'global-value)
       (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-event-form (access-event-tuple-form (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> wrld))) (equal? (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car old-event-form) '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>)
               (<a class="sym-link local-def" href="#def-corresponding-encaps" data-sym="CORRESPONDING-ENCAPS" title="(defun corresponding-encaps (old new r-e-p)
  (assert$ (eq (car new) &#39;encapsulate)
           (and (eq (car old) &#39;encapsulate) (true-listp new)
                (equal (cadr old) (cadr new))
                (corresponding-encap-events (cddr old) (cddr new) r-e-p t))))">corresponding-encaps</a> old-event-form event-form r-e-p))))
         (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> equal?
           (let ((adt (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld)))
             (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-table" data-sym="DEFAULT-DEFUN-MODE-FROM-TABLE">default-defun-mode-from-table</a> adt) mode)
               (equal (default-ruler-extenders-from-table adt)
                 ruler-extenders)
               (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-default-verify-guards-eagerness-from-table" data-sym="DEFAULT-VERIFY-GUARDS-EAGERNESS-FROM-TABLE">default-verify-guards-eagerness-from-table</a> adt) vge)
               (<a class="sym-link local-def" href="#def-redundant-encapsulatep-result" data-sym="REDUNDANT-ENCAPSULATEP-RESULT" title="(defun redundant-encapsulatep-result (x old-ev-wrld wrld state)
  (cond
   ((store-cltl-command-for-redundant-def state)
    (let ((event-tuple (cddr (car old-ev-wrld))))
      (cond
...">redundant-encapsulatep-result</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> equal? <span class="keyword">:expanded</span>)
                   old-event-form
                   <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                 wrld
                 wrld0
                 state)))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-redundant-encapsulate-tuplep" data-sym="REDUNDANT-ENCAPSULATE-TUPLEP" title="(defun redundant-encapsulate-tuplep
       (event-form mode ruler-extenders vge event-number wrld wrld0 state
        r-e-p)
  (cond
   ((or (null wrld)
...">redundant-encapsulate-tuplep</a> event-form
        mode
        ruler-extenders
        vge
        event-number
        (cdr wrld)
        wrld0
        state
        r-e-p))))</pre>
  </div>

<div class="form-block function" id="def-redundant-encapsulatep" data-defines="REDUNDANT-ENCAPSULATEP" data-references="REDUNDANT-ENCAPSULATE-TUPLEP,OR,DEFAULT-STATE-VARS,PRIMITIVE-EVENT-MACROS,FIND-FIRST-NON-LOCAL-NAME-LST,NAME0,T,IF,REDUNDANT-ENCAPSULATEP-RESULT,DEFAULT-VERIFY-GUARDS-EAGERNESS-FROM-TABLE,EQL,DEFAULT-RULER-EXTENDERS-FROM-TABLE,DEFAULT-DEFUN-MODE-FROM-TABLE,EQ,NEW-ADT,ACL2-DEFAULTS-TABLE,TABLE-ALIST,OLD-ADT,INCLUDE-BOOK-PATH,GLOBAL-VAL,NULL,CORRESPONDING-ENCAPS,EQUAL?,ACCESS-EVENT-TUPLE-FORM,OLD-EVENT-FORM,CAR,CDDR,EVENT-TUPLE,ABSOLUTE-EVENT-NUMBER,GETPROPC,EVENT,QUOTE,LOOKUP-WORLD-INDEX,WRLD-TAIL,LET*,NEW-NAMEP,NOT,SYMBOL-NAME,EQUAL,SYMBOLP,AND,ARROW,&,CASE-MATCH,NAME,LET,COND,STATE,WRLD,EVENT-FORM,EV-LST,SIGNATURES,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="REDUNDANT-ENCAPSULATEP" data-part-args="STATE,WRLD,EVENT-FORM,EV-LST,SIGNATURES" data-part-body="REDUNDANT-ENCAPSULATE-TUPLEP,OR,DEFAULT-STATE-VARS,PRIMITIVE-EVENT-MACROS,EV-LST,FIND-FIRST-NON-LOCAL-NAME-LST,NAME0,STATE,T,IF,REDUNDANT-ENCAPSULATEP-RESULT,DEFAULT-VERIFY-GUARDS-EAGERNESS-FROM-TABLE,EQL,DEFAULT-RULER-EXTENDERS-FROM-TABLE,DEFAULT-DEFUN-MODE-FROM-TABLE,EQ,NEW-ADT,ACL2-DEFAULTS-TABLE,TABLE-ALIST,OLD-ADT,INCLUDE-BOOK-PATH,GLOBAL-VAL,NULL,EVENT-FORM,CORRESPONDING-ENCAPS,EQUAL?,ACCESS-EVENT-TUPLE-FORM,OLD-EVENT-FORM,CAR,CDDR,EVENT-TUPLE,ABSOLUTE-EVENT-NUMBER,GETPROPC,EVENT,QUOTE,LOOKUP-WORLD-INDEX,WRLD-TAIL,LET*,WRLD,NEW-NAMEP,NOT,SYMBOL-NAME,EQUAL,SYMBOLP,AND,ARROW,&,CASE-MATCH,NAME,LET,SIGNATURES,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDUNDANT-ENCAPSULATEP">redundant-encapsulatep</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-redundant-encapsulatep" data-sym="REDUNDANT-ENCAPSULATEP" title="(defun redundant-encapsulatep (signatures ev-lst event-form wrld state)
  (cond
   (signatures
    (let ((name
           (case-match signatures
...">redundant-encapsulatep</a>
  (signatures ev-lst event-form wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (signatures (let ((name (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> signatures
             ((((name . &amp;) arrow . &amp;) . &amp;) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp arrow) (equal (symbol-name arrow) <span class="string">"=&gt;"</span>) name))
             (((name . &amp;) . &amp;) name))))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> name
          (symbolp name)
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-new-namep" data-sym="NEW-NAMEP">new-namep</a> name wrld))
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld-tail (lookup-world-index 'event
                 (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'absolute-event-number <span class="number">0</span> wrld)
                 wrld)) (event-tuple (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld-tail)))
              (old-event-form (access-event-tuple-form event-tuple))
              (equal? (<a class="sym-link local-def" href="#def-corresponding-encaps" data-sym="CORRESPONDING-ENCAPS" title="(defun corresponding-encaps (old new r-e-p)
  (assert$ (eq (car new) &#39;encapsulate)
           (and (eq (car old) &#39;encapsulate) (true-listp new)
                (equal (cadr old) (cadr new))
                (corresponding-encap-events (cddr old) (cddr new) r-e-p t))))">corresponding-encaps</a> old-event-form
                  event-form
                  (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-path wrld)))))
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> equal?
              (let ((old-adt (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld-tail)) (new-adt (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld)))
                (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-table" data-sym="DEFAULT-DEFUN-MODE-FROM-TABLE">default-defun-mode-from-table</a> old-adt)
                    (<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-table" data-sym="DEFAULT-DEFUN-MODE-FROM-TABLE">default-defun-mode-from-table</a> new-adt))
                  (equal (default-ruler-extenders-from-table old-adt)
                    (default-ruler-extenders-from-table new-adt))
                  (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-default-verify-guards-eagerness-from-table" data-sym="DEFAULT-VERIFY-GUARDS-EAGERNESS-FROM-TABLE">default-verify-guards-eagerness-from-table</a> old-adt)
                    (<a class="sym-link system" href="axioms.html#def-default-verify-guards-eagerness-from-table" data-sym="DEFAULT-VERIFY-GUARDS-EAGERNESS-FROM-TABLE">default-verify-guards-eagerness-from-table</a> new-adt))
                  (<a class="sym-link local-def" href="#def-redundant-encapsulatep-result" data-sym="REDUNDANT-ENCAPSULATEP-RESULT" title="(defun redundant-encapsulatep-result (x old-ev-wrld wrld state)
  (cond
   ((store-cltl-command-for-redundant-def state)
    (let ((event-tuple (cddr (car old-ev-wrld))))
      (cond
...">redundant-encapsulatep-result</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> equal? <span class="keyword">:expanded</span>)
                      old-event-form
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                    wrld-tail
                    wrld
                    state))))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name0 (find-first-non-local-name-lst ev-lst
             wrld
             (primitive-event-macros)
             (<a class="sym-link system" href="basis-a.html#def-default-state-vars" data-sym="DEFAULT-STATE-VARS">default-state-vars</a> nil)
             nil)) (name (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name0 <span class="keyword">:make-event</span>)) name0)))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> name0
          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> name) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-new-namep" data-sym="NEW-NAMEP">new-namep</a> name wrld)))
          (let ((new-adt (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld)))
            (<a class="sym-link local-def" href="#def-redundant-encapsulate-tuplep" data-sym="REDUNDANT-ENCAPSULATE-TUPLEP" title="(defun redundant-encapsulate-tuplep
       (event-form mode ruler-extenders vge event-number wrld wrld0 state
        r-e-p)
  (cond
   ((or (null wrld)
...">redundant-encapsulate-tuplep</a> event-form
              (<a class="sym-link system" href="axioms.html#def-default-defun-mode-from-table" data-sym="DEFAULT-DEFUN-MODE-FROM-TABLE">default-defun-mode-from-table</a> new-adt)
              (default-ruler-extenders-from-table new-adt)
              (<a class="sym-link system" href="axioms.html#def-default-verify-guards-eagerness-from-table" data-sym="DEFAULT-VERIFY-GUARDS-EAGERNESS-FROM-TABLE">default-verify-guards-eagerness-from-table</a> new-adt)
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> name (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'absolute-event-number nil wrld))
              wrld
              wrld
              state
              (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-path wrld)))))))))</pre>
  </div>

<div class="form-block function" id="def-mark-missing-as-hidden-p" data-defines="MARK-MISSING-AS-HIDDEN-P" data-references="CDR,T,CHANGE-PACKAGE-ENTRY-HIDDEN-P,CONS,OR,PACKAGE-ENTRY-NAME,FIND-PACKAGE-ENTRY,ENTRY,LET,CAR,PACKAGE-ENTRY-HIDDEN-P,NOT,AND,ENDP,COND,A2,A1,DEFUN" data-used-by="ENCAPSULATE-FIX-KNOWN-PACKAGE-ALIST" data-part-name="MARK-MISSING-AS-HIDDEN-P" data-part-args="A2,A1" data-part-body="CDR,MARK-MISSING-AS-HIDDEN-P,T,CHANGE-PACKAGE-ENTRY-HIDDEN-P,CONS,OR,A2,PACKAGE-ENTRY-NAME,FIND-PACKAGE-ENTRY,ENTRY,LET,CAR,PACKAGE-ENTRY-HIDDEN-P,NOT,AND,A1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MARK-MISSING-AS-HIDDEN-P">mark-missing-as-hidden-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-mark-missing-as-hidden-p" data-sym="MARK-MISSING-AS-HIDDEN-P" title="(defun mark-missing-as-hidden-p (a1 a2)
  (cond ((endp a1) nil)
        ((and (not (package-entry-hidden-p (car a1)))
              (let ((entry
                     (find-package-entry (package-entry-name (car a1)) a2)))
...">mark-missing-as-hidden-p</a>
  (a1 a2)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> a1) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> (car a1)))
       (let ((entry (<a class="sym-link system" href="axioms.html#def-find-package-entry" data-sym="FIND-PACKAGE-ENTRY">find-package-entry</a> (<a class="sym-link system" href="axioms.html#def-package-entry-name" data-sym="PACKAGE-ENTRY-NAME">package-entry-name</a> (car a1)) a2)))
         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> entry) (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> entry)))) (cons (<a class="sym-link system" href="axioms.html#def-change-package-entry-hidden-p" data-sym="CHANGE-PACKAGE-ENTRY-HIDDEN-P">change-package-entry-hidden-p</a> (car a1) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (<a class="sym-link local-def" href="#def-mark-missing-as-hidden-p" data-sym="MARK-MISSING-AS-HIDDEN-P" title="(defun mark-missing-as-hidden-p (a1 a2)
  (cond ((endp a1) nil)
        ((and (not (package-entry-hidden-p (car a1)))
              (let ((entry
                     (find-package-entry (package-entry-name (car a1)) a2)))
...">mark-missing-as-hidden-p</a> (cdr a1) a2)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car a1) (<a class="sym-link local-def" href="#def-mark-missing-as-hidden-p" data-sym="MARK-MISSING-AS-HIDDEN-P" title="(defun mark-missing-as-hidden-p (a1 a2)
  (cond ((endp a1) nil)
        ((and (not (package-entry-hidden-p (car a1)))
              (let ((entry
                     (find-package-entry (package-entry-name (car a1)) a2)))
...">mark-missing-as-hidden-p</a> (cdr a1) a2)))))</pre>
  </div>

<div class="form-block function" id="def-known-package-alist-included-p" data-defines="KNOWN-PACKAGE-ALIST-INCLUDED-P" data-references="CDR,NOT,PACKAGE-ENTRY-HIDDEN-P,OR,CAR,PACKAGE-ENTRY-NAME,FIND-PACKAGE-ENTRY,A2-ENTRY,LET,AND,T,ENDP,COND,A2,A1,DEFUN" data-used-by="ENCAPSULATE-FIX-KNOWN-PACKAGE-ALIST" data-part-name="KNOWN-PACKAGE-ALIST-INCLUDED-P" data-part-args="A2,A1" data-part-body="CDR,KNOWN-PACKAGE-ALIST-INCLUDED-P,NOT,PACKAGE-ENTRY-HIDDEN-P,OR,A2,CAR,PACKAGE-ENTRY-NAME,FIND-PACKAGE-ENTRY,A2-ENTRY,LET,AND,T,A1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="KNOWN-PACKAGE-ALIST-INCLUDED-P">known-package-alist-included-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-known-package-alist-included-p" data-sym="KNOWN-PACKAGE-ALIST-INCLUDED-P" title="(defun known-package-alist-included-p (a1 a2)
  (cond ((endp a1) t)
        (t
         (and
          (let ((a2-entry
...">known-package-alist-included-p</a>
  (a1 a2)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> a1) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (let ((a2-entry (<a class="sym-link system" href="axioms.html#def-find-package-entry" data-sym="FIND-PACKAGE-ENTRY">find-package-entry</a> (<a class="sym-link system" href="axioms.html#def-package-entry-name" data-sym="PACKAGE-ENTRY-NAME">package-entry-name</a> (car a1)) a2)))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> a2-entry
            (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> (car a1))
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> a2-entry)))))
        (<a class="sym-link local-def" href="#def-known-package-alist-included-p" data-sym="KNOWN-PACKAGE-ALIST-INCLUDED-P" title="(defun known-package-alist-included-p (a1 a2)
  (cond ((endp a1) t)
        (t
         (and
          (let ((a2-entry
...">known-package-alist-included-p</a> (cdr a1) a2)))))</pre>
  </div>

<div class="form-block function" id="def-encapsulate-fix-known-package-alist" data-defines="ENCAPSULATE-FIX-KNOWN-PACKAGE-ALIST" data-references="MARK-MISSING-AS-HIDDEN-P,KNOWN-PACKAGE-ALIST,QUOTE,GLOBAL-SET,KNOWN-PACKAGE-ALIST-INCLUDED-P,ASSERT$,WRLD,PASS2-K-P-ALIST,PASS1-K-P-ALIST,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="ENCAPSULATE-FIX-KNOWN-PACKAGE-ALIST" data-part-args="WRLD,PASS2-K-P-ALIST,PASS1-K-P-ALIST" data-part-body="WRLD,MARK-MISSING-AS-HIDDEN-P,KNOWN-PACKAGE-ALIST,QUOTE,GLOBAL-SET,PASS1-K-P-ALIST,PASS2-K-P-ALIST,KNOWN-PACKAGE-ALIST-INCLUDED-P,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENCAPSULATE-FIX-KNOWN-PACKAGE-ALIST">encapsulate-fix-known-package-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-encapsulate-fix-known-package-alist" data-sym="ENCAPSULATE-FIX-KNOWN-PACKAGE-ALIST" title="(defun encapsulate-fix-known-package-alist
       (pass1-k-p-alist pass2-k-p-alist wrld)
  (assert$ (known-package-alist-included-p pass2-k-p-alist pass1-k-p-alist)
           (global-set &#39;known-package-alist
                       (mark-missing-as-hidden-p pass1-k-p-alist
...">encapsulate-fix-known-package-alist</a>
  (pass1-k-p-alist pass2-k-p-alist wrld)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link local-def" href="#def-known-package-alist-included-p" data-sym="KNOWN-PACKAGE-ALIST-INCLUDED-P" title="(defun known-package-alist-included-p (a1 a2)
  (cond ((endp a1) t)
        (t
         (and
          (let ((a2-entry
...">known-package-alist-included-p</a> pass2-k-p-alist
      pass1-k-p-alist)
    (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a>
      (<a class="sym-link local-def" href="#def-mark-missing-as-hidden-p" data-sym="MARK-MISSING-AS-HIDDEN-P" title="(defun mark-missing-as-hidden-p (a1 a2)
  (cond ((endp a1) nil)
        ((and (not (package-entry-hidden-p (car a1)))
              (let ((entry
                     (find-package-entry (package-entry-name (car a1)) a2)))
...">mark-missing-as-hidden-p</a> pass1-k-p-alist pass2-k-p-alist)
      wrld)))</pre>
  </div>

<div class="form-block function" id="def-subst-by-position1" data-defines="SUBST-BY-POSITION1" data-references="CAR,T,CDAR,CONS,1+,CDR,CAAR,EQL,QUASIQUOTE,QUOTE,HARD,ER,REVAPPEND,ENDP,COND,ACC,INDEX,LST,ALIST,DEFUN" data-used-by="SUBST-BY-POSITION" data-part-name="SUBST-BY-POSITION1" data-part-args="ACC,INDEX,LST,ALIST" data-part-body="CAR,T,CDAR,CONS,1+,CDR,CAAR,INDEX,EQL,QUASIQUOTE,SUBST-BY-POSITION1,QUOTE,HARD,ER,LST,ACC,REVAPPEND,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUBST-BY-POSITION1">subst-by-position1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-subst-by-position1" data-sym="SUBST-BY-POSITION1" title="(defun subst-by-position1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position1</a>
  (alist lst index acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> acc lst))
    ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-subst-by-position1" data-sym="SUBST-BY-POSITION1" title="(defun subst-by-position1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position1</a>
        <span class="string">"Implementation error: lst is an atom, so unable to complete ~
              call ~x0."</span>
        `(<a class="sym-link local-def" href="#def-subst-by-position1" data-sym="SUBST-BY-POSITION1" title="(defun subst-by-position1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position1</a> ,ALIST ,LST ,INDEX ,ACC)))
    ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> index (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (<a class="sym-link local-def" href="#def-subst-by-position1" data-sym="SUBST-BY-POSITION1" title="(defun subst-by-position1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position1</a> (cdr alist)
        (cdr lst)
        (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> index)
        (cons (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) acc)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-subst-by-position1" data-sym="SUBST-BY-POSITION1" title="(defun subst-by-position1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position1</a> alist
        (cdr lst)
        (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> index)
        (cons (car lst) acc)))))</pre>
  </div>

<div class="form-block function" id="def-subst-by-position" data-defines="SUBST-BY-POSITION" data-references="SUBST-BY-POSITION1,T,QUASIQUOTE,QUOTE,HARD,ER,CAAR,<,COND,INDEX,LST,ALIST,DEFUN" data-used-by="CERTIFY-BOOK-STEP-2,INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS,PROGN-FN1,ENCAPSULATE-FN" data-part-name="SUBST-BY-POSITION" data-part-args="INDEX,LST,ALIST" data-part-body="LST,SUBST-BY-POSITION1,T,QUASIQUOTE,SUBST-BY-POSITION,QUOTE,HARD,ER,INDEX,CAAR,<,ALIST,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUBST-BY-POSITION">subst-by-position</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-subst-by-position" data-sym="SUBST-BY-POSITION" title="(defun subst-by-position (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position</a>
  (alist lst index)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((&lt; (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) index) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            '<a class="sym-link local-def" href="#def-subst-by-position" data-sym="SUBST-BY-POSITION" title="(defun subst-by-position (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position</a>
            <span class="string">"Implementation error: The alist in subst-by-position ~
                     must not start with an index less than its index ~
                     argument, so unable to compute ~x0."</span>
            `(<a class="sym-link local-def" href="#def-subst-by-position" data-sym="SUBST-BY-POSITION" title="(defun subst-by-position (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position</a> ,ALIST ,LST ,INDEX)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-subst-by-position1" data-sym="SUBST-BY-POSITION1" title="(defun subst-by-position1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position1</a> alist lst index nil))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> lst)))</pre>
  </div>

<div class="form-block function" id="def-dfp-terms" data-defines="DFP-TERMS" data-references="COLLECT-BY-POSITION,DFP,QUOTE,MAP-PREDICATE,LENGTH,EQL,SYMBOL-LISTP,AND,XARGS,DECLARE,FORMALS,STOBJS-IN,DEFUN" data-used-by="INTRO-UDF-GUARDS" data-part-name="DFP-TERMS" data-part-args="FORMALS,STOBJS-IN" data-part-declare="LENGTH,EQL,STOBJS-IN,FORMALS,SYMBOL-LISTP,AND,XARGS,DECLARE" data-part-body="FORMALS,STOBJS-IN,COLLECT-BY-POSITION,DFP,QUOTE,MAP-PREDICATE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DFP-TERMS">dfp-terms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dfp-terms" data-sym="DFP-TERMS" title="(defun dfp-terms (stobjs-in formals)
  (declare
   (xargs :guard
    (and (symbol-listp formals) (symbol-listp stobjs-in)
         (eql (length formals) (length stobjs-in)))))">dfp-terms</a>
  (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)
        (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)
        (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)))))
  (map-predicate 'dfp
    (<a class="sym-link system" href="basis-b.html#def-collect-by-position" data-sym="COLLECT-BY-POSITION">collect-by-position</a> '(<span class="keyword">:df</span>) <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)))</pre>
  </div>

<div class="form-block function" id="def-intro-udf-guards" data-defines="INTRO-UDF-GUARDS" data-references="*T*,LIST,APPEND,CONJOIN,GUARD,QUOTE,PUTPROP-UNLESS,CDR,CHK-FREE-VARS,ER-PROGN,DFP-TERMS,STOBJ-RECOGNIZER-TERMS,STOBJ-TERMS,COLLECT-NON-NIL-DF,STOBJS,CADDR,STOBJS-IN,FORMALS,FN,INSIG,LET*,CADR,TRANSLATE,CAR,ASSOC-KEYWORD,TAIL,LET,TGUARD,ER-LET*,T,VALUE,ENDP,COND,STATE,CTX,WRLD,WRLD-ACC,KWD-VALUE-LIST-LST,INSIGS,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="INTRO-UDF-GUARDS" data-part-args="STATE,CTX,WRLD,WRLD-ACC,KWD-VALUE-LIST-LST,INSIGS" data-part-body="*T*,LIST,APPEND,CONJOIN,GUARD,QUOTE,PUTPROP-UNLESS,CDR,INTRO-UDF-GUARDS,CHK-FREE-VARS,ER-PROGN,DFP-TERMS,STOBJ-RECOGNIZER-TERMS,STOBJ-TERMS,COLLECT-NON-NIL-DF,STOBJS,CADDR,STOBJS-IN,FORMALS,FN,INSIG,LET*,STATE,WRLD,CTX,CADR,TRANSLATE,KWD-VALUE-LIST-LST,CAR,ASSOC-KEYWORD,TAIL,LET,TGUARD,ER-LET*,T,WRLD-ACC,VALUE,INSIGS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTRO-UDF-GUARDS">intro-udf-guards</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-intro-udf-guards" data-sym="INTRO-UDF-GUARDS" title="(defun intro-udf-guards (insigs kwd-value-list-lst wrld-acc wrld ctx state)
  (cond ((endp insigs) (value wrld-acc))
        (t
         (er-let*
          ((tguard
...">intro-udf-guards</a>
  (insigs kwd-value-list-lst wrld-acc wrld ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> insigs) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> wrld-acc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tguard (let ((tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:guard</span> (car kwd-value-list-lst))))
             (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (tail (translate (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tail) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil ctx wrld state))
               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((insig (car insigs)) (fn (car insig))
            (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> insig))
            (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> insig))
            (stobjs (<a class="sym-link system" href="basis-b.html#def-collect-non-nil-df" data-sym="COLLECT-NON-NIL-DF">collect-non-nil-df</a> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>))
            (stobj-terms (<a class="sym-link system" href="basis-b.html#def-stobj-recognizer-terms" data-sym="STOBJ-RECOGNIZER-TERMS">stobj-recognizer-terms</a> stobjs wrld))
            (<a class="sym-link local-def" href="#def-dfp-terms" data-sym="DFP-TERMS" title="(defun dfp-terms (stobjs-in formals)
  (declare
   (xargs :guard
    (and (symbol-listp formals) (symbol-listp stobjs-in)
         (eql (length formals) (length stobjs-in)))))">dfp-terms</a> (<a class="sym-link local-def" href="#def-dfp-terms" data-sym="DFP-TERMS" title="(defun dfp-terms (stobjs-in formals)
  (declare
   (xargs :guard
    (and (symbol-listp formals) (symbol-listp stobjs-in)
         (eql (length formals) (length stobjs-in)))))">dfp-terms</a> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)))
          (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (tguard (<a class="sym-link system" href="history-management.html#def-chk-free-vars" data-sym="CHK-FREE-VARS">chk-free-vars</a> fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> tguard <span class="string">"guard for"</span> ctx state))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
            (<a class="sym-link local-def" href="#def-intro-udf-guards" data-sym="INTRO-UDF-GUARDS" title="(defun intro-udf-guards (insigs kwd-value-list-lst wrld-acc wrld ctx state)
  (cond ((endp insigs) (value wrld-acc))
        (t
         (er-let*
          ((tguard
...">intro-udf-guards</a> (cdr insigs)
              (cdr kwd-value-list-lst)
              (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> fn
                '<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (tguard (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> stobj-terms <a class="sym-link local-def" href="#def-dfp-terms" data-sym="DFP-TERMS" title="(defun dfp-terms (stobjs-in formals)
  (declare
   (xargs :guard
    (and (symbol-listp formals) (symbol-listp stobjs-in)
         (eql (length formals) (length stobjs-in)))))">dfp-terms</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> tguard))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> stobj-terms <a class="sym-link local-def" href="#def-dfp-terms" data-sym="DFP-TERMS" title="(defun dfp-terms (stobjs-in formals)
  (declare
   (xargs :guard
    (and (symbol-listp formals) (symbol-listp stobjs-in)
         (eql (length formals) (length stobjs-in)))))">dfp-terms</a>))))
                <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>
                wrld-acc)
              wrld
              ctx
              state)))))))</pre>
  </div>

<div class="form-block function" id="def-intro-udf-global-stobjs" data-defines="INTRO-UDF-GLOBAL-STOBJS" data-references="CAR,ASSOC-KEYWORD,CADR,GLOBAL-STOBJS,QUOTE,CAAR,PUTPROP-UNLESS,CDR,T,ENDP,COND,WRLD-ACC,KWD-VALUE-LIST-LST,INSIGS,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="INTRO-UDF-GLOBAL-STOBJS" data-part-args="WRLD-ACC,KWD-VALUE-LIST-LST,INSIGS" data-part-body="CAR,ASSOC-KEYWORD,CADR,GLOBAL-STOBJS,QUOTE,CAAR,PUTPROP-UNLESS,KWD-VALUE-LIST-LST,CDR,INTRO-UDF-GLOBAL-STOBJS,T,WRLD-ACC,INSIGS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTRO-UDF-GLOBAL-STOBJS">intro-udf-global-stobjs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-intro-udf-global-stobjs" data-sym="INTRO-UDF-GLOBAL-STOBJS" title="(defun intro-udf-global-stobjs (insigs kwd-value-list-lst wrld-acc)
  (cond ((endp insigs) wrld-acc)
        (t
         (intro-udf-global-stobjs (cdr insigs) (cdr kwd-value-list-lst)
                                  (putprop-unless (caar insigs) &#39;global-stobjs
...">intro-udf-global-stobjs</a>
  (insigs kwd-value-list-lst wrld-acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> insigs) wrld-acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-intro-udf-global-stobjs" data-sym="INTRO-UDF-GLOBAL-STOBJS" title="(defun intro-udf-global-stobjs (insigs kwd-value-list-lst wrld-acc)
  (cond ((endp insigs) wrld-acc)
        (t
         (intro-udf-global-stobjs (cdr insigs) (cdr kwd-value-list-lst)
                                  (putprop-unless (caar insigs) &#39;global-stobjs
...">intro-udf-global-stobjs</a> (cdr insigs)
        (cdr kwd-value-list-lst)
        (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> insigs)
          'global-stobjs
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:global-stobjs</span> (car kwd-value-list-lst)))
          nil
          wrld-acc)))))</pre>
  </div>

<div class="form-block function" id="def-intro-udf-non-classicalp" data-defines="INTRO-UDF-NON-CLASSICALP" data-references="CLASSICALP,QUOTE,PUTPROP-UNLESS,CDR,CADR,IF,VAL,ASSOC-KEYWORD,TAIL,KWD-VALUE-LIST,FN,CAR,INSIG,LET*,T,ENDP,COND,WRLD,KWD-VALUE-LIST-LST,INSIGS,DEFUN" data-part-name="INTRO-UDF-NON-CLASSICALP" data-part-args="WRLD,KWD-VALUE-LIST-LST,INSIGS" data-part-body="CLASSICALP,QUOTE,PUTPROP-UNLESS,CDR,INTRO-UDF-NON-CLASSICALP,CADR,IF,VAL,ASSOC-KEYWORD,TAIL,KWD-VALUE-LIST-LST,KWD-VALUE-LIST,FN,CAR,INSIG,LET*,T,WRLD,INSIGS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTRO-UDF-NON-CLASSICALP">intro-udf-non-classicalp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-intro-udf-non-classicalp" data-sym="INTRO-UDF-NON-CLASSICALP" title="(defun intro-udf-non-classicalp (insigs kwd-value-list-lst wrld)
  (cond ((endp insigs) wrld)
        (t
         (let* ((insig (car insigs))
                (fn (car insig))
...">intro-udf-non-classicalp</a>
  (insigs kwd-value-list-lst wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> insigs) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((insig (car insigs)) (fn (car insig))
          (kwd-value-list (car kwd-value-list-lst))
          (tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:classicalp</span> kwd-value-list))
          (val (if tail
              (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tail)
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
        (<a class="sym-link local-def" href="#def-intro-udf-non-classicalp" data-sym="INTRO-UDF-NON-CLASSICALP" title="(defun intro-udf-non-classicalp (insigs kwd-value-list-lst wrld)
  (cond ((endp insigs) wrld)
        (t
         (let* ((insig (car insigs))
                (fn (car insig))
...">intro-udf-non-classicalp</a> (cdr insigs)
          (cdr kwd-value-list-lst)
          (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> fn 'classicalp val <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld))))))</pre>
  </div>

<div class="form-block function" id="def-assoc-proof-supporters-alist" data-defines="ASSOC-PROOF-SUPPORTERS-ALIST" data-references="CDR,T,CAR,EQ,MEMBER-EQ,CAAR,CONSP,IF,ENDP,COND,ALIST,SYM,DEFUN" data-used-by="UPDATE-PROOF-SUPPORTERS-ALIST-3" data-part-name="ASSOC-PROOF-SUPPORTERS-ALIST" data-part-args="ALIST,SYM" data-part-body="CDR,ASSOC-PROOF-SUPPORTERS-ALIST,T,CAR,EQ,SYM,MEMBER-EQ,CAAR,CONSP,IF,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ASSOC-PROOF-SUPPORTERS-ALIST">assoc-proof-supporters-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-assoc-proof-supporters-alist" data-sym="ASSOC-PROOF-SUPPORTERS-ALIST" title="(defun assoc-proof-supporters-alist (sym alist)
  (cond ((endp alist) nil)
        ((if (consp (caar alist))
             (member-eq sym (caar alist))
             (eq sym (caar alist)))
...">assoc-proof-supporters-alist</a>
  (sym alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    ((if (consp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))
       (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> sym (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> sym (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))) (car alist))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-assoc-proof-supporters-alist" data-sym="ASSOC-PROOF-SUPPORTERS-ALIST" title="(defun assoc-proof-supporters-alist (sym alist)
  (cond ((endp alist) nil)
        ((if (consp (caar alist))
             (member-eq sym (caar alist))
             (eq sym (caar alist)))
...">assoc-proof-supporters-alist</a> sym (cdr alist)))))</pre>
  </div>

<div class="form-block function" id="def-update-proof-supporters-alist-3" data-defines="UPDATE-PROOF-SUPPORTERS-ALIST-3" data-references="STRICT-MERGE-SYMBOL<,ASSOC-PROOF-SUPPORTERS-ALIST,CAR-NAMES-SUPPORTERS,LET,T,CONS,CDR,ABSOLUTE-EVENT-NUMBER,QUOTE,CAR,GETPROPC,REVERSE,MV,ENDP,COND,WRLD,NEW,OLD,LOCAL-ALIST,NAMES,DEFUN" data-used-by="UPDATE-PROOF-SUPPORTERS-ALIST-2" data-part-name="UPDATE-PROOF-SUPPORTERS-ALIST-3" data-part-args="WRLD,NEW,OLD,LOCAL-ALIST,NAMES" data-part-body="STRICT-MERGE-SYMBOL<,ASSOC-PROOF-SUPPORTERS-ALIST,CAR-NAMES-SUPPORTERS,LET,T,CONS,LOCAL-ALIST,CDR,UPDATE-PROOF-SUPPORTERS-ALIST-3,WRLD,ABSOLUTE-EVENT-NUMBER,QUOTE,CAR,GETPROPC,NEW,OLD,REVERSE,MV,NAMES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-3">update-proof-supporters-alist-3</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-proof-supporters-alist-3" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-3" title="(defun update-proof-supporters-alist-3 (names local-alist old new wrld)
  (cond ((endp names) (mv (reverse old) new))
        ((getpropc (car names) &#39;absolute-event-number nil wrld)
         (update-proof-supporters-alist-3 (cdr names) local-alist
                                          (cons (car names) old) new wrld))
...">update-proof-supporters-alist-3</a>
  (names local-alist old new wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> names) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> old) new))
    ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car names) 'absolute-event-number nil wrld) (<a class="sym-link local-def" href="#def-update-proof-supporters-alist-3" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-3" title="(defun update-proof-supporters-alist-3 (names local-alist old new wrld)
  (cond ((endp names) (mv (reverse old) new))
        ((getpropc (car names) &#39;absolute-event-number nil wrld)
         (update-proof-supporters-alist-3 (cdr names) local-alist
                                          (cons (car names) old) new wrld))
...">update-proof-supporters-alist-3</a> (cdr names)
        local-alist
        (cons (car names) old)
        new
        wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((car-names-supporters (cdr (<a class="sym-link local-def" href="#def-assoc-proof-supporters-alist" data-sym="ASSOC-PROOF-SUPPORTERS-ALIST" title="(defun assoc-proof-supporters-alist (sym alist)
  (cond ((endp alist) nil)
        ((if (consp (caar alist))
             (member-eq sym (caar alist))
             (eq sym (caar alist)))
...">assoc-proof-supporters-alist</a> (car names) local-alist))))
        (<a class="sym-link local-def" href="#def-update-proof-supporters-alist-3" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-3" title="(defun update-proof-supporters-alist-3 (names local-alist old new wrld)
  (cond ((endp names) (mv (reverse old) new))
        ((getpropc (car names) &#39;absolute-event-number nil wrld)
         (update-proof-supporters-alist-3 (cdr names) local-alist
                                          (cons (car names) old) new wrld))
...">update-proof-supporters-alist-3</a> (cdr names)
          local-alist
          old
          (strict-merge-symbol&lt; car-names-supporters new nil)
          wrld)))))</pre>
  </div>

<div class="form-block function" id="def-posn-first-non-event" data-defines="POSN-FIRST-NON-EVENT" data-references="T,1+,CDR,ABSOLUTE-EVENT-NUMBER,QUOTE,CAR,GETPROPC,ENDP,COND,IDX,WRLD,NAMES,DEFUN" data-used-by="UPDATE-PROOF-SUPPORTERS-ALIST-2" data-part-name="POSN-FIRST-NON-EVENT" data-part-args="IDX,WRLD,NAMES" data-part-body="T,IDX,1+,CDR,POSN-FIRST-NON-EVENT,WRLD,ABSOLUTE-EVENT-NUMBER,QUOTE,CAR,GETPROPC,NAMES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POSN-FIRST-NON-EVENT">posn-first-non-event</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-posn-first-non-event" data-sym="POSN-FIRST-NON-EVENT" title="(defun posn-first-non-event (names wrld idx)
  (cond ((endp names) nil)
        ((getpropc (car names) &#39;absolute-event-number nil wrld)
         (posn-first-non-event (cdr names) wrld (1+ idx)))
        (t idx)))">posn-first-non-event</a>
  (names wrld idx)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> names) nil)
    ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car names) 'absolute-event-number nil wrld) (<a class="sym-link local-def" href="#def-posn-first-non-event" data-sym="POSN-FIRST-NON-EVENT" title="(defun posn-first-non-event (names wrld idx)
  (cond ((endp names) nil)
        ((getpropc (car names) &#39;absolute-event-number nil wrld)
         (posn-first-non-event (cdr names) wrld (1+ idx)))
        (t idx)))">posn-first-non-event</a> (cdr names) wrld (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> idx)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> idx)))</pre>
  </div>

<div class="form-block function" id="def-update-proof-supporters-alist-2" data-defines="UPDATE-PROOF-SUPPORTERS-ALIST-2" data-references="TAKE,APPEND,STRICT-MERGE-SYMBOL<,NTHCDR,UPDATE-PROOF-SUPPORTERS-ALIST-3,REST-NEW-NAMES,REST-OLD-EVENT-NAMES,MV-LET,T,NULL,COND,POSN-FIRST-NON-EVENT,N,LET,WRLD,LOCAL-ALIST,NAMES,DEFUN" data-used-by="UPDATE-PROOF-SUPPORTERS-ALIST-1" data-part-name="UPDATE-PROOF-SUPPORTERS-ALIST-2" data-part-args="WRLD,LOCAL-ALIST,NAMES" data-part-body="TAKE,APPEND,STRICT-MERGE-SYMBOL<,LOCAL-ALIST,NTHCDR,UPDATE-PROOF-SUPPORTERS-ALIST-3,REST-NEW-NAMES,REST-OLD-EVENT-NAMES,MV-LET,T,NULL,COND,WRLD,NAMES,POSN-FIRST-NON-EVENT,N,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-2">update-proof-supporters-alist-2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-proof-supporters-alist-2" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-2" title="(defun update-proof-supporters-alist-2 (names local-alist wrld)
  (let ((n (posn-first-non-event names wrld 0)))
    (cond ((null n) names)
          (t
           (mv-let (rest-old-event-names rest-new-names)
...">update-proof-supporters-alist-2</a>
  (names local-alist wrld)
  (let ((n (<a class="sym-link local-def" href="#def-posn-first-non-event" data-sym="POSN-FIRST-NON-EVENT" title="(defun posn-first-non-event (names wrld idx)
  (cond ((endp names) nil)
        ((getpropc (car names) &#39;absolute-event-number nil wrld)
         (posn-first-non-event (cdr names) wrld (1+ idx)))
        (t idx)))">posn-first-non-event</a> names wrld <span class="number">0</span>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> n) names)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (rest-old-event-names rest-new-names)
          (<a class="sym-link local-def" href="#def-update-proof-supporters-alist-3" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-3" title="(defun update-proof-supporters-alist-3 (names local-alist old new wrld)
  (cond ((endp names) (mv (reverse old) new))
        ((getpropc (car names) &#39;absolute-event-number nil wrld)
         (update-proof-supporters-alist-3 (cdr names) local-alist
                                          (cons (car names) old) new wrld))
...">update-proof-supporters-alist-3</a> (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n names)
            local-alist
            nil
            nil
            wrld)
          (strict-merge-symbol&lt; (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> n names) rest-old-event-names)
            rest-new-names
            nil))))))</pre>
  </div>

<div class="form-block function" id="def-update-proof-supporters-alist-1" data-defines="UPDATE-PROOF-SUPPORTERS-ALIST-1" data-references="T,ACONS,MV,ABSOLUTE-EVENT-NUMBER,QUOTE,CAR,SYMBOLP,IF,GETPROPC,COND,UPDATE-PROOF-SUPPORTERS-ALIST-2,NON-LOCAL-NAMES,LET,ASSERT$,WRLD,PROOF-SUPPORTERS-ALIST,LOCAL-ALIST,NAMES,NAMEX,DEFUN" data-used-by="UPDATE-PROOF-SUPPORTERS-ALIST" data-part-name="UPDATE-PROOF-SUPPORTERS-ALIST-1" data-part-args="WRLD,PROOF-SUPPORTERS-ALIST,LOCAL-ALIST,NAMES,NAMEX" data-part-body="T,PROOF-SUPPORTERS-ALIST,ACONS,MV,ABSOLUTE-EVENT-NUMBER,QUOTE,CAR,NAMEX,SYMBOLP,IF,GETPROPC,COND,WRLD,LOCAL-ALIST,UPDATE-PROOF-SUPPORTERS-ALIST-2,NON-LOCAL-NAMES,LET,NAMES,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-1">update-proof-supporters-alist-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-proof-supporters-alist-1" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-1" title="(defun update-proof-supporters-alist-1
       (namex names local-alist proof-supporters-alist wrld)
  (assert$ names
           (let ((non-local-names
                  (update-proof-supporters-alist-2 names local-alist wrld)))
...">update-proof-supporters-alist-1</a>
  (namex names local-alist proof-supporters-alist wrld)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> names
    (let ((non-local-names (<a class="sym-link local-def" href="#def-update-proof-supporters-alist-2" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-2" title="(defun update-proof-supporters-alist-2 (names local-alist wrld)
  (let ((n (posn-first-non-event names wrld 0)))
    (cond ((null n) names)
          (t
           (mv-let (rest-old-event-names rest-new-names)
...">update-proof-supporters-alist-2</a> names local-alist wrld)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (if (symbolp namex)
             namex
             (car namex))
           'absolute-event-number
           nil
           wrld) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> local-alist
            (if non-local-names
              (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> namex non-local-names proof-supporters-alist)
              proof-supporters-alist)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> namex non-local-names local-alist)
            proof-supporters-alist))))))</pre>
  </div>

<div class="form-block function" id="def-update-proof-supporters-alist" data-defines="UPDATE-PROOF-SUPPORTERS-ALIST" data-references="CDAR,CAAR,UPDATE-PROOF-SUPPORTERS-ALIST-1,CDR,LOCAL-ALIST,MV-LET,T,MV,ENDP,COND,WRLD,PROOF-SUPPORTERS-ALIST,NEW-PROOF-SUPPORTERS-ALIST,DEFUN" data-used-by="INSTALL-PROOF-SUPPORTERS-ALIST" data-part-name="UPDATE-PROOF-SUPPORTERS-ALIST" data-part-args="WRLD,PROOF-SUPPORTERS-ALIST,NEW-PROOF-SUPPORTERS-ALIST" data-part-body="CDAR,CAAR,UPDATE-PROOF-SUPPORTERS-ALIST-1,WRLD,CDR,UPDATE-PROOF-SUPPORTERS-ALIST,LOCAL-ALIST,MV-LET,T,PROOF-SUPPORTERS-ALIST,MV,NEW-PROOF-SUPPORTERS-ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST">update-proof-supporters-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-proof-supporters-alist" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST" title="(defun update-proof-supporters-alist
       (new-proof-supporters-alist proof-supporters-alist wrld)
  (cond ((endp new-proof-supporters-alist) (mv nil proof-supporters-alist))
        (t
         (mv-let (local-alist proof-supporters-alist)
...">update-proof-supporters-alist</a>
  (new-proof-supporters-alist proof-supporters-alist wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> new-proof-supporters-alist) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil proof-supporters-alist))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (local-alist proof-supporters-alist)
        (<a class="sym-link local-def" href="#def-update-proof-supporters-alist" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST" title="(defun update-proof-supporters-alist
       (new-proof-supporters-alist proof-supporters-alist wrld)
  (cond ((endp new-proof-supporters-alist) (mv nil proof-supporters-alist))
        (t
         (mv-let (local-alist proof-supporters-alist)
...">update-proof-supporters-alist</a> (cdr new-proof-supporters-alist)
          proof-supporters-alist
          wrld)
        (<a class="sym-link local-def" href="#def-update-proof-supporters-alist-1" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST-1" title="(defun update-proof-supporters-alist-1
       (namex names local-alist proof-supporters-alist wrld)
  (assert$ names
           (let ((non-local-names
                  (update-proof-supporters-alist-2 names local-alist wrld)))
...">update-proof-supporters-alist-1</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> new-proof-supporters-alist)
          (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> new-proof-supporters-alist)
          local-alist
          proof-supporters-alist
          wrld)))))</pre>
  </div>

<div class="form-block function" id="def-install-proof-supporters-alist" data-defines="INSTALL-PROOF-SUPPORTERS-ALIST" data-references="GLOBAL-SET,IGNORE,DECLARE,UPDATE-PROOF-SUPPORTERS-ALIST,LOCAL-ALIST,MV-LET,PROOF-SUPPORTERS-ALIST,QUOTE,GLOBAL-VAL,SAVED-PROOF-SUPPORTERS-ALIST,LET,WRLD,INSTALLED-WRLD,NEW-PROOF-SUPPORTERS-ALIST,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="INSTALL-PROOF-SUPPORTERS-ALIST" data-part-args="WRLD,INSTALLED-WRLD,NEW-PROOF-SUPPORTERS-ALIST" data-part-body="WRLD,GLOBAL-SET,IGNORE,DECLARE,NEW-PROOF-SUPPORTERS-ALIST,UPDATE-PROOF-SUPPORTERS-ALIST,LOCAL-ALIST,MV-LET,INSTALLED-WRLD,PROOF-SUPPORTERS-ALIST,QUOTE,GLOBAL-VAL,SAVED-PROOF-SUPPORTERS-ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSTALL-PROOF-SUPPORTERS-ALIST">install-proof-supporters-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-install-proof-supporters-alist" data-sym="INSTALL-PROOF-SUPPORTERS-ALIST" title="(defun install-proof-supporters-alist
       (new-proof-supporters-alist installed-wrld wrld)
  (let ((saved-proof-supporters-alist
         (global-val &#39;proof-supporters-alist installed-wrld)))
    (mv-let (local-alist proof-supporters-alist)
...">install-proof-supporters-alist</a>
  (new-proof-supporters-alist installed-wrld wrld)
  (let ((saved-proof-supporters-alist (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'proof-supporters-alist installed-wrld)))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (local-alist proof-supporters-alist)
      (<a class="sym-link local-def" href="#def-update-proof-supporters-alist" data-sym="UPDATE-PROOF-SUPPORTERS-ALIST" title="(defun update-proof-supporters-alist
       (new-proof-supporters-alist proof-supporters-alist wrld)
  (cond ((endp new-proof-supporters-alist) (mv nil proof-supporters-alist))
        (t
         (mv-let (local-alist proof-supporters-alist)
...">update-proof-supporters-alist</a> new-proof-supporters-alist
        saved-proof-supporters-alist
        installed-wrld)
      (declare (ignore local-alist))
      (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'proof-supporters-alist
        proof-supporters-alist
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-empty-encapsulate" data-defines="EMPTY-ENCAPSULATE" data-references="VALUE,OBSERVATION,PPROGN,STATE,CTX,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="EMPTY-ENCAPSULATE" data-part-args="STATE,CTX" data-part-body="VALUE,CTX,OBSERVATION,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EMPTY-ENCAPSULATE">empty-encapsulate</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-empty-encapsulate" data-sym="EMPTY-ENCAPSULATE" title="(defun empty-encapsulate (ctx state)
  (pprogn
   (observation ctx &quot;The submitted encapsulate event has created no new ~
                        ACL2 events, and thus is leaving the ACL2 logical ~
                        world unchanged.  See :DOC encapsulate.&quot;)">empty-encapsulate</a>
  (ctx state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
      <span class="string">"The submitted encapsulate event has created no new ~
                        ACL2 events, and thus is leaving the ACL2 logical ~
                        world unchanged.  See :DOC encapsulate."</span>)
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:empty-encapsulate</span>)))</pre>
  </div>

<div class="form-block function" id="def-cert-data-tp-from-runic-type-prescription" data-defines="CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION" data-references="FORMALS,FCONS-TERM,EQUAL,CDDR,NULL,ASSERT$,BASE-SYMBOL,EQ,TYPE-PRESCRIPTION,ACCESS,RUNE,LAST,CAR,TP,LET*,AND,TYPE-PRESCRIPTIONS,QUOTE,GETPROPC,LST,LET,WRLD,FN,DEFUN" data-used-by="CERT-DATA-TPS-1,CERT-DATA-TPS-FROM-FNS" data-part-name="CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION" data-part-args="WRLD,FN" data-part-body="FORMALS,FCONS-TERM,EQUAL,CDDR,NULL,ASSERT$,BASE-SYMBOL,EQ,TYPE-PRESCRIPTION,ACCESS,RUNE,LAST,CAR,TP,LET*,AND,WRLD,TYPE-PRESCRIPTIONS,QUOTE,FN,GETPROPC,LST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION">cert-data-tp-from-runic-type-prescription</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-data-tp-from-runic-type-prescription" data-sym="CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION" title="(defun cert-data-tp-from-runic-type-prescription (fn wrld)
  (let ((lst (getpropc fn &#39;type-prescriptions nil wrld)))
    (and lst
         (let* ((tp (car (last lst)))
                (rune (access type-prescription tp :rune)))
...">cert-data-tp-from-runic-type-prescription</a>
  (fn wrld)
  (let ((lst (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'type-prescriptions nil wrld)))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> lst
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tp (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> lst))) (rune (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription tp <span class="keyword">:rune</span>)))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (base-symbol rune) fn)
          (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> rune))
            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (equal (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription tp <span class="keyword">:term</span>)
                (<a class="sym-link system" href="basis-b.html#def-fcons-term" data-sym="FCONS-TERM">fcons-term</a> fn (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> fn wrld)))
              (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription tp <span class="keyword">:hyps</span>))
                (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription tp <span class="keyword">:backchain-limit-lst</span>))
                  tp)))))))))</pre>
  </div>

<div class="form-block function" id="def-cert-data-tps-from-fns" data-defines="CERT-DATA-TPS-FROM-FNS" data-references="HONS-ACONS,CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION,TP,HONS-GET,PROGRAMP,OR,IF,CAR,FN,LET,CDR,T,ENDP,COND,ACC,WRLD,FNS,DEFUN" data-used-by="CERT-DATA-FOR-CERTIFICATE" data-part-name="CERT-DATA-TPS-FROM-FNS" data-part-args="ACC,WRLD,FNS" data-part-body="HONS-ACONS,CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION,TP,HONS-GET,PROGRAMP,OR,IF,CAR,FN,LET,WRLD,CDR,CERT-DATA-TPS-FROM-FNS,T,ACC,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-DATA-TPS-FROM-FNS">cert-data-tps-from-fns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-data-tps-from-fns" data-sym="CERT-DATA-TPS-FROM-FNS" title="(defun cert-data-tps-from-fns (fns wrld acc)
  (cond ((endp fns) acc)
        (t
         (cert-data-tps-from-fns (cdr fns) wrld
                                 (let ((fn (car fns)))
...">cert-data-tps-from-fns</a>
  (fns wrld acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-cert-data-tps-from-fns" data-sym="CERT-DATA-TPS-FROM-FNS" title="(defun cert-data-tps-from-fns (fns wrld acc)
  (cond ((endp fns) acc)
        (t
         (cert-data-tps-from-fns (cdr fns) wrld
                                 (let ((fn (car fns)))
...">cert-data-tps-from-fns</a> (cdr fns)
        wrld
        (let ((fn (car fns)))
          (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-programp" data-sym="PROGRAMP">programp</a> fn wrld) (hons-get fn acc))
            acc
            (let ((tp (<a class="sym-link local-def" href="#def-cert-data-tp-from-runic-type-prescription" data-sym="CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION" title="(defun cert-data-tp-from-runic-type-prescription (fn wrld)
  (let ((lst (getpropc fn &#39;type-prescriptions nil wrld)))
    (and lst
         (let* ((tp (car (last lst)))
                (rune (access type-prescription tp :rune)))
...">cert-data-tp-from-runic-type-prescription</a> fn wrld)))
              (if tp
                (hons-acons fn tp acc)
                acc))))))))</pre>
  </div>

<div class="form-block function" id="def-cert-data-for-certificate" data-defines="CERT-DATA-FOR-CERTIFICATE" data-references="MAKE-FAST-ALIST,REDEF-SEEN,QUOTE,GLOBAL-VAL,NOT,AND,CERT-DATA-TPS-FROM-FNS,ACONS,WRLD,TRANSLATE-CERT-DATA,FNS,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="CERT-DATA-FOR-CERTIFICATE" data-part-args="WRLD,TRANSLATE-CERT-DATA,FNS" data-part-body="TRANSLATE-CERT-DATA,MAKE-FAST-ALIST,REDEF-SEEN,QUOTE,GLOBAL-VAL,NOT,AND,WRLD,FNS,CERT-DATA-TPS-FROM-FNS,ACONS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-DATA-FOR-CERTIFICATE">cert-data-for-certificate</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-data-for-certificate" data-sym="CERT-DATA-FOR-CERTIFICATE" title="(defun cert-data-for-certificate (fns translate-cert-data wrld)
  (acons :type-prescription (cert-data-tps-from-fns fns wrld nil)
         (acons :translate
                (and (not (global-val &#39;redef-seen wrld))
                     (make-fast-alist translate-cert-data))">cert-data-for-certificate</a>
  (fns translate-cert-data wrld)
  (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:type-prescription</span> (<a class="sym-link local-def" href="#def-cert-data-tps-from-fns" data-sym="CERT-DATA-TPS-FROM-FNS" title="(defun cert-data-tps-from-fns (fns wrld acc)
  (cond ((endp fns) acc)
        (t
         (cert-data-tps-from-fns (cdr fns) wrld
                                 (let ((fn (car fns)))
...">cert-data-tps-from-fns</a> fns wrld nil)
    (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:translate</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'redef-seen wrld))
        (make-fast-alist translate-cert-data))
      nil)))</pre>
  </div>

<div class="form-block function" id="def-top-level-user-fns-rec" data-defines="TOP-LEVEL-USER-FNS-REC" data-references="CAR,CDDDR,REVERSE-STRIP-CARS,DEFUNS,QUOTE,CAAR,EQ,IF,CDR,T,ENDP,COND,ACC,CLTL-COMMAND-LST,DEFUN" data-part-name="TOP-LEVEL-USER-FNS-REC" data-part-args="ACC,CLTL-COMMAND-LST" data-part-body="CAR,CDDDR,REVERSE-STRIP-CARS,DEFUNS,QUOTE,CAAR,EQ,IF,CDR,TOP-LEVEL-USER-FNS-REC,T,ACC,CLTL-COMMAND-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOP-LEVEL-USER-FNS-REC">top-level-user-fns-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-top-level-user-fns-rec" data-sym="TOP-LEVEL-USER-FNS-REC" title="(defun top-level-user-fns-rec (cltl-command-lst acc)
  (cond ((endp cltl-command-lst) acc)
        (t
         (top-level-user-fns-rec (cdr cltl-command-lst)
                                 (if (eq (caar cltl-command-lst) &#39;defuns)
...">top-level-user-fns-rec</a>
  (cltl-command-lst acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> cltl-command-lst) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-top-level-user-fns-rec" data-sym="TOP-LEVEL-USER-FNS-REC" title="(defun top-level-user-fns-rec (cltl-command-lst acc)
  (cond ((endp cltl-command-lst) acc)
        (t
         (top-level-user-fns-rec (cdr cltl-command-lst)
                                 (if (eq (caar cltl-command-lst) &#39;defuns)
...">top-level-user-fns-rec</a> (cdr cltl-command-lst)
        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> cltl-command-lst) '<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a>)
          (<a class="sym-link system" href="axioms.html#def-reverse-strip-cars" data-sym="REVERSE-STRIP-CARS">reverse-strip-cars</a> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (car cltl-command-lst)) acc)
          acc)))))</pre>
  </div>

<div class="form-block function" id="def-top-level-user-fns" data-defines="TOP-LEVEL-USER-FNS" data-references="CAR,CDDDR,REVERSE-STRIP-CARS,DEFUNS,QUOTE,CAAR,EQ,IF,CDR,T,REVERSE,ENDP,COND,ACC,CLTL-COMMAND-LST,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="TOP-LEVEL-USER-FNS" data-part-args="ACC,CLTL-COMMAND-LST" data-part-body="CAR,CDDDR,REVERSE-STRIP-CARS,DEFUNS,QUOTE,CAAR,EQ,IF,CDR,TOP-LEVEL-USER-FNS,T,ACC,REVERSE,CLTL-COMMAND-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOP-LEVEL-USER-FNS">top-level-user-fns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-top-level-user-fns" data-sym="TOP-LEVEL-USER-FNS" title="(defun top-level-user-fns (cltl-command-lst acc)
  (cond ((endp cltl-command-lst) (reverse acc))
        (t
         (top-level-user-fns (cdr cltl-command-lst)
                             (if (eq (caar cltl-command-lst) &#39;defuns)
...">top-level-user-fns</a>
  (cltl-command-lst acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> cltl-command-lst) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-top-level-user-fns" data-sym="TOP-LEVEL-USER-FNS" title="(defun top-level-user-fns (cltl-command-lst acc)
  (cond ((endp cltl-command-lst) (reverse acc))
        (t
         (top-level-user-fns (cdr cltl-command-lst)
                             (if (eq (caar cltl-command-lst) &#39;defuns)
...">top-level-user-fns</a> (cdr cltl-command-lst)
        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> cltl-command-lst) '<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a>)
          (<a class="sym-link system" href="axioms.html#def-reverse-strip-cars" data-sym="REVERSE-STRIP-CARS">reverse-strip-cars</a> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (car cltl-command-lst)) acc)
          acc)))))</pre>
  </div>

<div class="form-block function" id="def-cert-data-tps-1" data-defines="CERT-DATA-TPS-1" data-references="CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION,HONS-ACONS,HONS-GET,PROGRAMP,OR,CDR,CAAR,FN,LET,T,ENDP,COND,ACC,WRLD,DEFS,DEFUN" data-used-by="CERT-DATA-TPS" data-part-name="CERT-DATA-TPS-1" data-part-args="ACC,WRLD,DEFS" data-part-body="CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION,HONS-ACONS,HONS-GET,PROGRAMP,OR,WRLD,CDR,CERT-DATA-TPS-1,CAAR,FN,LET,T,ACC,DEFS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-DATA-TPS-1">cert-data-tps-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-data-tps-1" data-sym="CERT-DATA-TPS-1" title="(defun cert-data-tps-1 (defs wrld acc)
  (cond ((endp defs) acc)
        (t
         (let ((fn (caar defs)))
           (cert-data-tps-1 (cdr defs) wrld
...">cert-data-tps-1</a>
  (defs wrld acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> defs) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((fn (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> defs)))
        (<a class="sym-link local-def" href="#def-cert-data-tps-1" data-sym="CERT-DATA-TPS-1" title="(defun cert-data-tps-1 (defs wrld acc)
  (cond ((endp defs) acc)
        (t
         (let ((fn (caar defs)))
           (cert-data-tps-1 (cdr defs) wrld
...">cert-data-tps-1</a> (cdr defs)
          wrld
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-programp" data-sym="PROGRAMP">programp</a> fn wrld) (hons-get fn acc)) acc)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (hons-acons fn
                (<a class="sym-link local-def" href="#def-cert-data-tp-from-runic-type-prescription" data-sym="CERT-DATA-TP-FROM-RUNIC-TYPE-PRESCRIPTION" title="(defun cert-data-tp-from-runic-type-prescription (fn wrld)
  (let ((lst (getpropc fn &#39;type-prescriptions nil wrld)))
    (and lst
         (let* ((tp (car (last lst)))
                (rune (access type-prescription tp :rune)))
...">cert-data-tp-from-runic-type-prescription</a> fn wrld)
                acc))))))))</pre>
  </div>

<div class="form-block function" id="def-cert-data-tps" data-defines="CERT-DATA-TPS" data-references="CDDDR,CERT-DATA-TPS-1,CADR,NOT,DEFUNS,CDDR,CAR,GLOBAL-VALUE,CADAR,CLTL-COMMAND,QUOTE,CAAR,EQ,AND,CDR,T,EQUAL,COND,ACC,INSTALLED-WRLD,NEW-WRLD,OLD-WRLD,DEFUN" data-used-by="CERT-DATA-PASS1-SAVED" data-part-name="CERT-DATA-TPS" data-part-args="ACC,INSTALLED-WRLD,NEW-WRLD,OLD-WRLD" data-part-body="CDDDR,CERT-DATA-TPS-1,CADR,NOT,DEFUNS,CDDR,CAR,GLOBAL-VALUE,CADAR,CLTL-COMMAND,QUOTE,CAAR,EQ,AND,INSTALLED-WRLD,CDR,CERT-DATA-TPS,T,ACC,NEW-WRLD,OLD-WRLD,EQUAL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-DATA-TPS">cert-data-tps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-data-tps" data-sym="CERT-DATA-TPS" title="(defun cert-data-tps (old-wrld new-wrld installed-wrld acc)
  (cond ((equal old-wrld new-wrld) acc)
        (t
         (cert-data-tps old-wrld (cdr new-wrld) installed-wrld
                        (cond
...">cert-data-tps</a>
  (old-wrld new-wrld installed-wrld acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal old-wrld new-wrld) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-cert-data-tps" data-sym="CERT-DATA-TPS" title="(defun cert-data-tps (old-wrld new-wrld installed-wrld acc)
  (cond ((equal old-wrld new-wrld) acc)
        (t
         (cert-data-tps old-wrld (cdr new-wrld) installed-wrld
                        (cond
...">cert-data-tps</a> old-wrld
        (cdr new-wrld)
        installed-wrld
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> new-wrld) 'cltl-command)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> new-wrld) 'global-value)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car new-wrld))) '<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a>)
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car new-wrld))) <span class="keyword">:program</span>))) (<a class="sym-link local-def" href="#def-cert-data-tps-1" data-sym="CERT-DATA-TPS-1" title="(defun cert-data-tps-1 (defs wrld acc)
  (cond ((endp defs) acc)
        (t
         (let ((fn (caar defs)))
           (cert-data-tps-1 (cdr defs) wrld
...">cert-data-tps-1</a> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car new-wrld)))
              installed-wrld
              acc))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> acc))))))</pre>
  </div>

<div class="form-block function" id="def-cert-data-pass1-saved" data-defines="CERT-DATA-PASS1-SAVED" data-references="T,CERT-DATA-TPS,ACONS,NEW-WRLD,OLD-WRLD,DEFUN" data-used-by="CERTIFY-BOOK-FN,CERTIFY-BOOK-STEP-3+,CERTIFY-BOOK-STEP-3-INFO,ENCAPSULATE-FN" data-part-name="CERT-DATA-PASS1-SAVED" data-part-args="NEW-WRLD,OLD-WRLD" data-part-body="T,NEW-WRLD,OLD-WRLD,CERT-DATA-TPS,ACONS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-DATA-PASS1-SAVED">cert-data-pass1-saved</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a>
  (old-wrld new-wrld)
  (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:type-prescription</span> (<a class="sym-link local-def" href="#def-cert-data-tps" data-sym="CERT-DATA-TPS" title="(defun cert-data-tps (old-wrld new-wrld installed-wrld acc)
  (cond ((equal old-wrld new-wrld) acc)
        (t
         (cert-data-tps old-wrld (cdr new-wrld) installed-wrld
                        (cond
...">cert-data-tps</a> old-wrld new-wrld new-wrld nil)
    (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:pass1-saved</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-functional-substitution-p" data-defines="FUNCTIONAL-SUBSTITUTION-P" data-references="CDR,CAR,HARD,ER,LOGIC-TERMP,X,&,LAMBDA,QUOTE,CASE-MATCH,LOGICP,SYMBOLP,IF,FUNCTION-SYMBOLP,AND,CDAR,FN2,CAAR,FN1,LET,T,ENDP,COND,WRLD,ALIST,DEFUN" data-used-by="NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST" data-part-name="FUNCTIONAL-SUBSTITUTION-P" data-part-args="WRLD,ALIST" data-part-body="CDR,CAR,FUNCTIONAL-SUBSTITUTION-P,HARD,ER,LOGIC-TERMP,X,&,LAMBDA,QUOTE,CASE-MATCH,LOGICP,SYMBOLP,IF,WRLD,FUNCTION-SYMBOLP,AND,CDAR,FN2,CAAR,FN1,LET,T,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FUNCTIONAL-SUBSTITUTION-P">functional-substitution-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-functional-substitution-p" data-sym="FUNCTIONAL-SUBSTITUTION-P" title="(defun functional-substitution-p (alist wrld)
  (cond ((endp alist) t)
        (t
         (let ((fn1 (caar alist)) (fn2 (cdar alist)))
           (and (function-symbolp fn1 wrld)
...">functional-substitution-p</a>
  (alist wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((fn1 (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (fn2 (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> fn1 wrld)
          (if (symbolp fn2)
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> fn2 wrld) (<a class="sym-link system" href="axioms.html#def-logicp" data-sym="LOGICP">logicp</a> fn2 wrld))
            (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> fn2
              (('lambda &amp; x) (logic-termp x wrld))
              (&amp; (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                  '<a class="sym-link local-def" href="#def-functional-substitution-p" data-sym="FUNCTIONAL-SUBSTITUTION-P" title="(defun functional-substitution-p (alist wrld)
  (cond ((endp alist) t)
        (t
         (let ((fn1 (caar alist)) (fn2 (cdar alist)))
           (and (function-symbolp fn1 wrld)
...">functional-substitution-p</a>
                  <span class="string">"Unexpected entry in alleged functional ~
                              substitution:~x0"</span>
                  (car alist)))))
          (<a class="sym-link local-def" href="#def-functional-substitution-p" data-sym="FUNCTIONAL-SUBSTITUTION-P" title="(defun functional-substitution-p (alist wrld)
  (cond ((endp alist) t)
        (t
         (let ((fn1 (caar alist)) (fn2 (cdar alist)))
           (and (function-symbolp fn1 wrld)
...">functional-substitution-p</a> (cdr alist) wrld))))))</pre>
  </div>

<div class="form-block function" id="def-new-proved-functional-instances-alist" data-defines="NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST" data-references="CHANGE,CONS,FORMULA,SYMBOLP,FUNCTIONAL-SUBSTITUTION-P,LOGICP,AND,BEHALF-OF-EVENT-NAME,RESTRICTED-ALIST,PROVED-FUNCTIONAL-INSTANCES-ALIST-ENTRY,ACCESS,NAME,CAR,REC,LET*,CDR,T,REVAPPEND,EQUAL,COND,ACC,WRLD,NEW,OLD,DEFUN" data-used-by="ENCAPSULATE-FN" data-part-name="NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST" data-part-args="ACC,WRLD,NEW,OLD" data-part-body="CHANGE,CONS,FORMULA,SYMBOLP,FUNCTIONAL-SUBSTITUTION-P,LOGICP,AND,BEHALF-OF-EVENT-NAME,RESTRICTED-ALIST,PROVED-FUNCTIONAL-INSTANCES-ALIST-ENTRY,ACCESS,NAME,CAR,REC,LET*,WRLD,CDR,NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST,T,ACC,REVAPPEND,NEW,OLD,EQUAL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST">new-proved-functional-instances-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-new-proved-functional-instances-alist" data-sym="NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST" title="(defun new-proved-functional-instances-alist (old new wrld acc)
  (cond ((equal old new) (revappend acc old))
        (t
         (new-proved-functional-instances-alist old (cdr new) wrld
                                                (let* ((rec (car new))
...">new-proved-functional-instances-alist</a>
  (old new wrld acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal old new) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> acc old))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-new-proved-functional-instances-alist" data-sym="NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST" title="(defun new-proved-functional-instances-alist (old new wrld acc)
  (cond ((equal old new) (revappend acc old))
        (t
         (new-proved-functional-instances-alist old (cdr new) wrld
                                                (let* ((rec (car new))
...">new-proved-functional-instances-alist</a> old
        (cdr new)
        wrld
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((rec (car new)) (name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> proved-functional-instances-alist-entry
                rec
                <span class="keyword">:constraint-event-name</span>))
            (restricted-alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> proved-functional-instances-alist-entry
                rec
                <span class="keyword">:restricted-alist</span>))
            (behalf-of-event-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> proved-functional-instances-alist-entry
                rec
                <span class="keyword">:behalf-of-event-name</span>)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-logicp" data-sym="LOGICP">logicp</a> name wrld)
               (<a class="sym-link local-def" href="#def-functional-substitution-p" data-sym="FUNCTIONAL-SUBSTITUTION-P" title="(defun functional-substitution-p (alist wrld)
  (cond ((endp alist) t)
        (t
         (let ((fn1 (caar alist)) (fn2 (cdar alist)))
           (and (function-symbolp fn1 wrld)
...">functional-substitution-p</a> restricted-alist wrld)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp behalf-of-event-name)
                   (<a class="sym-link system" href="history-management.html#def-formula" data-sym="FORMULA">formula</a> behalf-of-event-name nil wrld)) (cons rec acc))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> proved-functional-instances-alist-entry
                      rec
                      <span class="keyword">:behalf-of-event-name</span> <span class="number">0</span>)
                    acc))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> acc)))))))</pre>
  </div>

<div class="form-block macro" id="def-fast-alist-free-cert-data-on-exit" data-defines="FAST-ALIST-FREE-CERT-DATA-ON-EXIT" data-references="CHECK-VARS-NOT-FREE,CERT-DATA-ENTRY-TR-TO-FREE,LET,FAST-ALIST-FREE-ON-EXIT,ASSOC-EQ,CDR,CERT-DATA-ENTRY-TP-TO-FREE,CERT-DATA-TO-FREE,LET*,QUASIQUOTE,FORM,CERT-DATA,DEFMACRO" data-used-by="CERTIFY-BOOK-FN,CERTIFY-BOOK-STEP-3+,INCLUDE-BOOK-FN1,ENCAPSULATE-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FAST-ALIST-FREE-CERT-DATA-ON-EXIT">fast-alist-free-cert-data-on-exit</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-fast-alist-free-cert-data-on-exit" data-sym="FAST-ALIST-FREE-CERT-DATA-ON-EXIT" title="(defmacro fast-alist-free-cert-data-on-exit (cert-data form)
  `(let* ((cert-data-to-free ,cert-data)
          (cert-data-entry-tp-to-free
           (cdr (assoc-eq :type-prescription cert-data-to-free))))
     (fast-alist-free-on-exit cert-data-entry-tp-to-free
...">fast-alist-free-cert-data-on-exit</a>
  (cert-data form)
  `(<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cert-data-to-free ,CERT-DATA) (cert-data-entry-tp-to-free (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:type-prescription</span> cert-data-to-free))))
    (fast-alist-free-on-exit cert-data-entry-tp-to-free
      (let ((cert-data-entry-tr-to-free (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:translate</span> cert-data-to-free))))
        (fast-alist-free-on-exit cert-data-entry-tr-to-free
          (<a class="sym-link system" href="axioms.html#def-check-vars-not-free" data-sym="CHECK-VARS-NOT-FREE">check-vars-not-free</a> (cert-data-to-free cert-data-entry-tp-to-free
              cert-data-entry-tr-to-free)
            ,FORM))))))</pre>
  </div>

<div class="form-block macro" id="def-with-hcomp-bindings-encapsulate" data-defines="WITH-HCOMP-BINDINGS-ENCAPSULATE" data-references="SYMBOLP,XARGS,IGNORABLE,DECLARE,FORM,BINDP,DEFMACRO" data-used-by="ENCAPSULATE-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-HCOMP-BINDINGS-ENCAPSULATE">with-hcomp-bindings-encapsulate</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-hcomp-bindings-encapsulate" data-sym="WITH-HCOMP-BINDINGS-ENCAPSULATE" title="(defmacro with-hcomp-bindings-encapsulate (bindp form)
  (declare (ignorable bindp)
           (xargs :guard (symbolp bindp)))
  form)">with-hcomp-bindings-encapsulate</a>
  (bindp form)
  (declare (ignorable bindp)
    (xargs <span class="keyword">:guard</span> (symbolp bindp)))
  form)</pre>
  </div>

<div class="form-block macro" id="def-switch-hcomp-status-encapsulate" data-defines="SWITCH-HCOMP-STATUS-ENCAPSULATE" data-references="IGNORABLE,DECLARE,FORM,CONDITION,DEFMACRO" data-used-by="ENCAPSULATE-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SWITCH-HCOMP-STATUS-ENCAPSULATE">switch-hcomp-status-encapsulate</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-switch-hcomp-status-encapsulate" data-sym="SWITCH-HCOMP-STATUS-ENCAPSULATE" title="(defmacro switch-hcomp-status-encapsulate (condition form)
  (declare (ignorable condition))
  form)">switch-hcomp-status-encapsulate</a>
  (condition form)
  (declare (ignorable condition))
  form)</pre>
  </div>

<div class="form-block function" id="def-encapsulate-fn" data-defines="ENCAPSULATE-FN" data-references="EMPTY-ENCAPSULATE-P,EXPANSION-ALIST0/RETVAL,CHK-SIGNATURES,WRLD11,SCAN-TO-COMMAND,MAX-ABSOLUTE-COMMAND-NUMBER,-,CONS,CERTIFY-BOOK-INFO,WRLD10,WRLD9,WRLD8,WRLD7,INSTALL-PROOF-SUPPORTERS-ALIST,WRLD6,WRLD5,ENCAPSULATE-FIX-KNOWN-PACKAGE-ALIST,WRLD4,CDR,ENCAPSULATE-RETURN-VALUE-P,INSTALL-EVENT,INTRO-UDF-GLOBAL-STOBJS,INTRO-UDF-GUARDS,WRLD3A,PRINT-ENCAPSULATE-MSG3,ASSERT$,EQUAL,EQ-PASS12-KPA,PASS2-KPA,NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST,FINAL-PROVED-FNL-INST-ALIST,INFECTIOUS-FNS,SUBVERSIVE-FNS,EXPORTS,CONSTRAINTS-INTRODUCED,RETVAL,NTH,CONSTRAINED-FNS,WRLD3,EMPTY-ENCAPSULATE,ENCAPSULATE-PASS-2,SWITCH-HCOMP-STATUS-ENCAPSULATE,TEMP,NEW-EVENT-FORM,RETRACTION,SUBST-BY-POSITION,NEW-EV-LST,KNOWN-PACKAGE-ALIST,PASS1-KPA,CHK-ACCEPTABLE-ENCAPSULATE2,PRINT-ENCAPSULATE-MSG2,FAST-ALIST-FREE-CERT-DATA-ON-EXIT,CERT-DATA-PASS1-SAVED,CERT-DATA,POST-PASS-1-PROVED-FUNCTIONAL-INSTANCES-ALIST,CERT-REPLAY,POST-PASS-1-CERT-REPLAY,POST-PASS-1-PROOF-SUPPORTERS-ALIST,TTAGS-SEEN,POST-PASS-1-TTAGS-SEEN,PCERT-BOOKS,POST-PASS-1-PCERT-BOOKS,INCLUDE-BOOK-ALIST-ALL,POST-PASS-1-INCLUDE-BOOK-ALIST-ALL,SKIP-PROOFS-SEEN,POST-PASS-1-SKIP-PROOFS-SEEN,WRLD2,LIST,CURRENT-PACKAGE,ENCAPSULATE-PASS-1,PROCESS-EMBEDDED-EVENTS,LOCAL-ENCAPSULATE,STATE-GLOBAL-LET*,EXPANSION-ALIST,PRINT-ENCAPSULATE-MSG1,PROOF-SUPPORTERS-ALIST,GLOBAL-SET,WITH-HCOMP-BINDINGS-ENCAPSULATE,IGNORABLE,DECLARE,LD-REDEFINITION-ACTION,EMBEDDED-EVENT-LST,IN-ENCAPSULATEP,NULL,DO-HCOMP-BUILD-P,KWD-VALUE-LIST-LST,STRIP-CARS,NAMES,INSIGS,CHK-ACCEPTABLE-ENCAPSULATE1,TRIP,ER-LET*,INITIALIZE-ACL2,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,LD-SKIP-PROOFSP,NOT,STOP-REDUNDANT-EVENT,VALUE,MAYBE-ADD-EVENT-LANDMARK,TOP-LEVEL-CLTL-COMMAND-STACK,GLOBAL-SET?,EXTENSION,SET-W,ER-PROGN,LAST-MAKE-EVENT-EXPANSION,F-PUT-GLOBAL,T,PPROGN,CDDR,CADR,MV,CAR,EQ,CONSP,AND,IF,NEW-TOP-LEVEL-CLTL-COMMAND-STACK,MV-LET,COND,REDUNDANT-ENCAPSULATEP,R,REVERT-WORLD-ON-ERROR,F-GET-GLOBAL,IN-LOCAL-FLG,ENCAPSULATE,LIST*,OR,ACL2-DEFAULTS-TABLE,TABLE-ALIST,SAVED-ACL2-DEFAULTS-TABLE,PROVED-FUNCTIONAL-INSTANCES-ALIST,QUOTE,GLOBAL-VAL,SAVED-PROVED-FUNCTIONAL-INSTANCES-ALIST,W,WRLD1,LET*,WITH-CTX-SUMMARIZED,ENCAPSULATE-CTX,CTX,LET,EVENT-FORM,STATE,EV-LST,SIGNATURES,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="ENCAPSULATE-FN" data-part-args="EVENT-FORM,STATE,EV-LST,SIGNATURES" data-part-body="EMPTY-ENCAPSULATE-P,EXPANSION-ALIST0/RETVAL,CHK-SIGNATURES,WRLD11,SCAN-TO-COMMAND,MAX-ABSOLUTE-COMMAND-NUMBER,-,CONS,CERTIFY-BOOK-INFO,WRLD10,WRLD9,WRLD8,WRLD7,INSTALL-PROOF-SUPPORTERS-ALIST,WRLD6,WRLD5,ENCAPSULATE-FIX-KNOWN-PACKAGE-ALIST,WRLD4,CDR,ENCAPSULATE-RETURN-VALUE-P,INSTALL-EVENT,INTRO-UDF-GLOBAL-STOBJS,INTRO-UDF-GUARDS,WRLD3A,PRINT-ENCAPSULATE-MSG3,ASSERT$,EQUAL,EQ-PASS12-KPA,PASS2-KPA,NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST,FINAL-PROVED-FNL-INST-ALIST,INFECTIOUS-FNS,SUBVERSIVE-FNS,EXPORTS,CONSTRAINTS-INTRODUCED,RETVAL,NTH,CONSTRAINED-FNS,WRLD3,EMPTY-ENCAPSULATE,ENCAPSULATE-PASS-2,SWITCH-HCOMP-STATUS-ENCAPSULATE,TEMP,NEW-EVENT-FORM,RETRACTION,SUBST-BY-POSITION,NEW-EV-LST,KNOWN-PACKAGE-ALIST,PASS1-KPA,CHK-ACCEPTABLE-ENCAPSULATE2,PRINT-ENCAPSULATE-MSG2,FAST-ALIST-FREE-CERT-DATA-ON-EXIT,CERT-DATA-PASS1-SAVED,CERT-DATA,POST-PASS-1-PROVED-FUNCTIONAL-INSTANCES-ALIST,CERT-REPLAY,POST-PASS-1-CERT-REPLAY,POST-PASS-1-PROOF-SUPPORTERS-ALIST,TTAGS-SEEN,POST-PASS-1-TTAGS-SEEN,PCERT-BOOKS,POST-PASS-1-PCERT-BOOKS,INCLUDE-BOOK-ALIST-ALL,POST-PASS-1-INCLUDE-BOOK-ALIST-ALL,SKIP-PROOFS-SEEN,POST-PASS-1-SKIP-PROOFS-SEEN,WRLD2,LIST,CURRENT-PACKAGE,ENCAPSULATE-PASS-1,PROCESS-EMBEDDED-EVENTS,LOCAL-ENCAPSULATE,STATE-GLOBAL-LET*,EXPANSION-ALIST,PRINT-ENCAPSULATE-MSG1,PROOF-SUPPORTERS-ALIST,GLOBAL-SET,WITH-HCOMP-BINDINGS-ENCAPSULATE,IGNORABLE,DECLARE,LD-REDEFINITION-ACTION,EMBEDDED-EVENT-LST,IN-ENCAPSULATEP,NULL,DO-HCOMP-BUILD-P,KWD-VALUE-LIST-LST,STRIP-CARS,NAMES,INSIGS,CHK-ACCEPTABLE-ENCAPSULATE1,TRIP,ER-LET*,INITIALIZE-ACL2,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,LD-SKIP-PROOFSP,NOT,STOP-REDUNDANT-EVENT,VALUE,MAYBE-ADD-EVENT-LANDMARK,TOP-LEVEL-CLTL-COMMAND-STACK,GLOBAL-SET?,EXTENSION,SET-W,ER-PROGN,LAST-MAKE-EVENT-EXPANSION,F-PUT-GLOBAL,T,PPROGN,CDDR,CADR,MV,CAR,EQ,CONSP,AND,IF,NEW-TOP-LEVEL-CLTL-COMMAND-STACK,MV-LET,COND,REDUNDANT-ENCAPSULATEP,R,REVERT-WORLD-ON-ERROR,F-GET-GLOBAL,IN-LOCAL-FLG,ENCAPSULATE,LIST*,OR,EVENT-FORM,ACL2-DEFAULTS-TABLE,TABLE-ALIST,SAVED-ACL2-DEFAULTS-TABLE,PROVED-FUNCTIONAL-INSTANCES-ALIST,QUOTE,GLOBAL-VAL,SAVED-PROVED-FUNCTIONAL-INSTANCES-ALIST,STATE,W,WRLD1,LET*,WITH-CTX-SUMMARIZED,EV-LST,SIGNATURES,ENCAPSULATE-CTX,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENCAPSULATE-FN">encapsulate-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-encapsulate-fn" data-sym="ENCAPSULATE-FN" title="(defun encapsulate-fn (signatures ev-lst state event-form)
  (let ((ctx (encapsulate-ctx signatures ev-lst)))
    (with-ctx-summarized ctx
                         (let* ((wrld1 (w state))
                                (saved-proved-functional-instances-alist
...">encapsulate-fn</a>
  (signatures ev-lst state event-form)
  (let ((ctx (<a class="sym-link local-def" href="#def-encapsulate-ctx" data-sym="ENCAPSULATE-CTX" title="(defun encapsulate-ctx (signatures form-lst)
  (cond
   (signatures
    (cond
     ((and (consp signatures) (consp (car signatures))
...">encapsulate-ctx</a> signatures ev-lst)))
    (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> ctx
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (saved-proved-functional-instances-alist (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'proved-functional-instances-alist wrld1))
          (saved-acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld1))
          (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> signatures ev-lst)))
          (in-local-flg (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state)))
        (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (let ((r (<a class="sym-link local-def" href="#def-redundant-encapsulatep" data-sym="REDUNDANT-ENCAPSULATEP" title="(defun redundant-encapsulatep (signatures ev-lst event-form wrld state)
  (cond
   (signatures
    (let ((name
           (case-match signatures
...">redundant-encapsulatep</a> signatures
                 ev-lst
                 event-form
                 wrld1
                 state)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (r (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (r <a class="sym-link system" href="history-management.html#def-new-top-level-cltl-command-stack" data-sym="NEW-TOP-LEVEL-CLTL-COMMAND-STACK">new-top-level-cltl-command-stack</a>)
                  (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp r)
                      (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car r) <span class="keyword">:update-top-level-cltl-command-stack</span>))
                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> r) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> r))
                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> r nil))
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> r <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                      state
                      (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion r state))
                    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if <a class="sym-link system" href="history-management.html#def-new-top-level-cltl-command-stack" data-sym="NEW-TOP-LEVEL-CLTL-COMMAND-STACK">new-top-level-cltl-command-stack</a>
                        (let ((state (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension
                               (<a class="sym-link system" href="history-management.html#def-global-set_3F" data-sym="GLOBAL-SET?">global-set?</a> 'top-level-cltl-command-stack
                                 <a class="sym-link system" href="history-management.html#def-new-top-level-cltl-command-stack" data-sym="NEW-TOP-LEVEL-CLTL-COMMAND-STACK">new-top-level-cltl-command-stack</a>
                                 wrld1
                                 (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'top-level-cltl-command-stack wrld1))
                               state)))
                          (<a class="sym-link local-def" href="#def-maybe-add-event-landmark" data-sym="MAYBE-ADD-EVENT-LANDMARK" title="(defun maybe-add-event-landmark (state)
  (cond
   ((let ((wrld (w state)))
      (not
       (and (eq (caar wrld) &#39;event-landmark) (eq (cadar wrld) &#39;global-value))))
...">maybe-add-event-landmark</a> state))
                        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                      (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx
                        state
                        <span class="keyword">:extra-msg</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> r <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                          <span class="string">"(This event is redundant with a previous encapsulate ~
                       event even though the two might not be equal; see :DOC ~
                       redundant-encapsulate.)"</span>))))))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>))
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) 'include-book-with-locals))
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) 'initialize-acl2))) (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((trip (<a class="sym-link local-def" href="#def-chk-acceptable-encapsulate1" data-sym="CHK-ACCEPTABLE-ENCAPSULATE1" title="(defun chk-acceptable-encapsulate1 (signatures form-lst ctx wrld state)
  (er-progn
   (cond
    ((not (and (true-listp form-lst) (consp form-lst) (consp (car form-lst))))
     (er soft ctx &quot;The arguments to encapsulate, after the first, are ~
...">chk-acceptable-encapsulate1</a> signatures
                       ev-lst
                       ctx
                       wrld1
                       state)))
                  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((insigs (car trip)) (names (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> insigs))
                      (kwd-value-list-lst (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip))
                      (wrld1 (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
                      (do-hcomp-build-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> signatures)
                          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'embedded-event-lst (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                          (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> state)))))
                    (declare (ignorable do-hcomp-build-p))
                    (<a class="sym-link local-def" href="#def-with-hcomp-bindings-encapsulate" data-sym="WITH-HCOMP-BINDINGS-ENCAPSULATE" title="(defmacro with-hcomp-bindings-encapsulate (bindp form)
  (declare (ignorable bindp)
           (xargs :guard (symbolp bindp)))
  form)">with-hcomp-bindings-encapsulate</a> do-hcomp-build-p
                      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension
                          (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'proof-supporters-alist nil wrld1)
                          state)
                        (<a class="sym-link local-def" href="#def-print-encapsulate-msg1" data-sym="PRINT-ENCAPSULATE-MSG1" title="(defun print-encapsulate-msg1 (insigs form-lst state)
  (declare (ignore insigs))
  (cond ((ld-skip-proofsp state) state)
        (t
         (io? event nil state (form-lst)
...">print-encapsulate-msg1</a> insigs ev-lst state)
                        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((expansion-alist (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((in-local-flg (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> in-local-flg 'local-encapsulate)))
                               (<a class="sym-link local-def" href="#def-process-embedded-events" data-sym="PROCESS-EMBEDDED-EVENTS" title="(defun process-embedded-events
       (caller acl2-defaults-table skip-proofsp pkg ee-entry ev-lst index
        make-event-chk cert-data ctx state)
  (let* ((wrld1 (w state))
         (kpa (known-package-alist state))
...">process-embedded-events</a> 'encapsulate-pass-1
                                 saved-acl2-defaults-table
                                 (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
                                 (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
                                 (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> insigs)
                                 ev-lst
                                 <span class="number">0</span>
                                 nil
                                 nil
                                 ctx
                                 state))))
                          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld2 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (post-pass-1-skip-proofs-seen (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'skip-proofs-seen wrld2))
                              (post-pass-1-include-book-alist-all (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist-all wrld2))
                              (post-pass-1-pcert-books (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'pcert-books wrld2))
                              (post-pass-1-ttags-seen (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> wrld2))
                              (post-pass-1-proof-supporters-alist (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'proof-supporters-alist wrld2))
                              (post-pass-1-cert-replay (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'cert-replay wrld2))
                              (post-pass-1-proved-functional-instances-alist (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'proved-functional-instances-alist wrld2))
                              (cert-data (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> insigs) (<a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a> wrld1 wrld2))))
                            (<a class="sym-link local-def" href="#def-fast-alist-free-cert-data-on-exit" data-sym="FAST-ALIST-FREE-CERT-DATA-ON-EXIT" title="(defmacro fast-alist-free-cert-data-on-exit (cert-data form)
  `(let* ((cert-data-to-free ,cert-data)
          (cert-data-entry-tp-to-free
           (cdr (assoc-eq :type-prescription cert-data-to-free))))
     (fast-alist-free-on-exit cert-data-entry-tp-to-free
...">fast-alist-free-cert-data-on-exit</a> cert-data
                              (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((cert-data cert-data))
                                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-print-encapsulate-msg2" data-sym="PRINT-ENCAPSULATE-MSG2" title="(defun print-encapsulate-msg2 (insigs form-lst state)
  (declare (ignore insigs))
  (cond ((ld-skip-proofsp state) state)
        (t
         (io? event nil state (form-lst)
...">print-encapsulate-msg2</a> insigs ev-lst state)
                                  (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-acceptable-encapsulate2" data-sym="CHK-ACCEPTABLE-ENCAPSULATE2" title="(defun chk-acceptable-encapsulate2 (insigs kwd-value-list-lst wrld ctx state)
  (let ((udf-fns (collect-non-logic-mode insigs wrld)))
    (mv-let (erp1 val state)
            (cond
             (udf-fns
...">chk-acceptable-encapsulate2</a> insigs
                                      kwd-value-list-lst
                                      wrld2
                                      ctx
                                      state)
                                    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pass1-kpa (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> wrld2)) (new-ev-lst (<a class="sym-link local-def" href="#def-subst-by-position" data-sym="SUBST-BY-POSITION" title="(defun subst-by-position (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position</a> expansion-alist ev-lst <span class="number">0</span>))
                                        (state (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'retraction wrld1 state))
                                        (new-event-form (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> expansion-alist
                                            (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> signatures new-ev-lst))))
                                      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((temp (<a class="sym-link local-def" href="#def-switch-hcomp-status-encapsulate" data-sym="SWITCH-HCOMP-STATUS-ENCAPSULATE" title="(defmacro switch-hcomp-status-encapsulate (condition form)
  (declare (ignorable condition))
  form)">switch-hcomp-status-encapsulate</a> do-hcomp-build-p
                                             (<a class="sym-link local-def" href="#def-encapsulate-pass-2" data-sym="ENCAPSULATE-PASS-2" title="(defun encapsulate-pass-2
       (insigs kwd-value-list-lst ev-lst saved-acl2-defaults-table only-pass-p
        ctx state)
  (let* ((wrld1 (w state))
         (saved-unknown-constraints-table
...">encapsulate-pass-2</a> insigs
                                               kwd-value-list-lst
                                               new-ev-lst
                                               saved-acl2-defaults-table
                                               nil
                                               ctx
                                               state))))
                                        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion
                                            new-event-form
                                            state)
                                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car temp) <span class="keyword">:empty-encapsulate</span>) (<a class="sym-link local-def" href="#def-empty-encapsulate" data-sym="EMPTY-ENCAPSULATE" title="(defun empty-encapsulate (ctx state)
  (pprogn
   (observation ctx &quot;The submitted encapsulate event has created no new ~
                        ACL2 events, and thus is leaving the ACL2 logical ~
                        world unchanged.  See :DOC encapsulate.&quot;)">empty-encapsulate</a> ctx state))
                                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld3 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (constrained-fns (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> temp))
                                                  (retval (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> temp))
                                                  (constraints-introduced (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> temp))
                                                  (exports (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> temp))
                                                  (subversive-fns (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> temp))
                                                  (infectious-fns (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> temp))
                                                  (final-proved-fnl-inst-alist (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> constrained-fns)
                                                      (<a class="sym-link local-def" href="#def-new-proved-functional-instances-alist" data-sym="NEW-PROVED-FUNCTIONAL-INSTANCES-ALIST" title="(defun new-proved-functional-instances-alist (old new wrld acc)
  (cond ((equal old new) (revappend acc old))
        (t
         (new-proved-functional-instances-alist old (cdr new) wrld
                                                (let* ((rec (car new))
...">new-proved-functional-instances-alist</a> saved-proved-functional-instances-alist
                                                        post-pass-1-proved-functional-instances-alist
                                                        wrld3
                                                        nil)))
                                                  (pass2-kpa (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> wrld3))
                                                  (eq-pass12-kpa (equal pass1-kpa pass2-kpa)))
                                                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> retval <span class="keyword">:trivial-extension-for-fast-cert</span>)
                                                    (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> insigs)
                                                        (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> exports)
                                                        (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> constrained-fns)
                                                        (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> constraints-introduced)
                                                        (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> subversive-fns)
                                                        (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> infectious-fns))
                                                      state)
                                                    (<a class="sym-link local-def" href="#def-print-encapsulate-msg3" data-sym="PRINT-ENCAPSULATE-MSG3" title="(defun print-encapsulate-msg3
       (ctx insigs form-lst exported-names constrained-fns
        constraints-introduced subversive-fns infectious-fns wrld state)
  (cond ((ld-skip-proofsp state) state)
        (t
...">print-encapsulate-msg3</a> ctx
                                                      insigs
                                                      new-ev-lst
                                                      exports
                                                      constrained-fns
                                                      constraints-introduced
                                                      subversive-fns
                                                      infectious-fns
                                                      wrld3
                                                      state))
                                                  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld3a (<a class="sym-link local-def" href="#def-intro-udf-guards" data-sym="INTRO-UDF-GUARDS" title="(defun intro-udf-guards (insigs kwd-value-list-lst wrld-acc wrld ctx state)
  (cond ((endp insigs) (value wrld-acc))
        (t
         (er-let*
          ((tguard
...">intro-udf-guards</a> insigs
                                                         kwd-value-list-lst
                                                         (<a class="sym-link local-def" href="#def-intro-udf-global-stobjs" data-sym="INTRO-UDF-GLOBAL-STOBJS" title="(defun intro-udf-global-stobjs (insigs kwd-value-list-lst wrld-acc)
  (cond ((endp insigs) wrld-acc)
        (t
         (intro-udf-global-stobjs (cdr insigs) (cdr kwd-value-list-lst)
                                  (putprop-unless (caar insigs) &#39;global-stobjs
...">intro-udf-global-stobjs</a> insigs kwd-value-list-lst wrld3)
                                                         wrld3
                                                         ctx
                                                         state)))
                                                    (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-encapsulate-return-value-p" data-sym="ENCAPSULATE-RETURN-VALUE-P" title="(defun encapsulate-return-value-p (val)
  (case-match val ((:return-value &amp;) t) (&amp; nil)))">encapsulate-return-value-p</a> retval) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> retval))
                                                        ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> names) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                                                        ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr names)) (car names))
                                                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> names))
                                                      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> new-event-form event-form)
                                                      '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>
                                                      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> names <span class="number">0</span>)
                                                      nil
                                                      nil
                                                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                                                      ctx
                                                      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld4 (if eq-pass12-kpa
                                                             wrld3a
                                                             (<a class="sym-link local-def" href="#def-encapsulate-fix-known-package-alist" data-sym="ENCAPSULATE-FIX-KNOWN-PACKAGE-ALIST" title="(defun encapsulate-fix-known-package-alist
       (pass1-k-p-alist pass2-k-p-alist wrld)
  (assert$ (known-package-alist-included-p pass2-k-p-alist pass1-k-p-alist)
           (global-set &#39;known-package-alist
                       (mark-missing-as-hidden-p pass1-k-p-alist
...">encapsulate-fix-known-package-alist</a> pass1-kpa
                                                               pass2-kpa
                                                               wrld3a))) (wrld5 (<a class="sym-link system" href="history-management.html#def-global-set_3F" data-sym="GLOBAL-SET?">global-set?</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a>
                                                              post-pass-1-ttags-seen
                                                              wrld4
                                                              (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> wrld3)))
                                                          (wrld6 (<a class="sym-link local-def" href="#def-install-proof-supporters-alist" data-sym="INSTALL-PROOF-SUPPORTERS-ALIST" title="(defun install-proof-supporters-alist
       (new-proof-supporters-alist installed-wrld wrld)
  (let ((saved-proof-supporters-alist
         (global-val &#39;proof-supporters-alist installed-wrld)))
    (mv-let (local-alist proof-supporters-alist)
...">install-proof-supporters-alist</a> post-pass-1-proof-supporters-alist
                                                              wrld3
                                                              wrld5))
                                                          (wrld7 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'skip-proofs-seen wrld3)
                                                                 (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> post-pass-1-skip-proofs-seen)) wrld6)
                                                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'skip-proofs-seen
                                                                  post-pass-1-skip-proofs-seen
                                                                  wrld6))))
                                                          (wrld8 (<a class="sym-link system" href="history-management.html#def-global-set_3F" data-sym="GLOBAL-SET?">global-set?</a> 'include-book-alist-all
                                                              post-pass-1-include-book-alist-all
                                                              wrld7
                                                              (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist-all wrld3)))
                                                          (wrld9 (<a class="sym-link system" href="history-management.html#def-global-set_3F" data-sym="GLOBAL-SET?">global-set?</a> 'pcert-books
                                                              post-pass-1-pcert-books
                                                              wrld8
                                                              (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'pcert-books wrld3)))
                                                          (wrld10 (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> post-pass-1-cert-replay
                                                                (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> eq-pass12-kpa)
                                                                (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'cert-replay wrld3)))
                                                              (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'cert-replay
                                                                (if (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'certify-book-info state)
                                                                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                                                                  (cons (cons (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (max-absolute-command-number wrld3)) nil)
                                                                    (<a class="sym-link system" href="history-management.html#def-scan-to-command" data-sym="SCAN-TO-COMMAND">scan-to-command</a> wrld1)))
                                                                wrld9)
                                                              wrld9))
                                                          (wrld11 (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> constrained-fns)
                                                              (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'proved-functional-instances-alist
                                                                final-proved-fnl-inst-alist
                                                                wrld10)
                                                              wrld10)))
                                                        wrld11)
                                                      state))))))))))))))))))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((trip (<a class="sym-link local-def" href="#def-chk-signatures" data-sym="CHK-SIGNATURES" title="(defun chk-signatures (signatures ctx wrld state)
  (er-let*
   ((trip (chk-signatures-rec signatures ctx wrld state))
    (insig-lst (value (car trip))) (kwd-value-list-lst (value (cadr trip))))
   (er-progn
...">chk-signatures</a> signatures ctx wrld1 state)))
                  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((insigs (car trip)) (names (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> insigs))
                      (kwd-value-list-lst (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip))
                      (wrld1 (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
                    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension wrld1 state)
                      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((expansion-alist0/retval (<a class="sym-link local-def" href="#def-encapsulate-pass-2" data-sym="ENCAPSULATE-PASS-2" title="(defun encapsulate-pass-2
       (insigs kwd-value-list-lst ev-lst saved-acl2-defaults-table only-pass-p
        ctx state)
  (let* ((wrld1 (w state))
         (saved-unknown-constraints-table
...">encapsulate-pass-2</a> insigs
                             kwd-value-list-lst
                             ev-lst
                             saved-acl2-defaults-table
                             <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                             ctx
                             state)))
                        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((empty-encapsulate-p (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car expansion-alist0/retval) <span class="keyword">:empty-encapsulate</span>)) (expansion-alist (if empty-encapsulate-p
                                (cdr expansion-alist0/retval)
                                (car expansion-alist0/retval)))
                            (retval (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> empty-encapsulate-p)
                                (cdr expansion-alist0/retval)))
                            (wrld3 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                            (new-event-form (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> expansion-alist
                                (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>
                                  signatures
                                  (<a class="sym-link local-def" href="#def-subst-by-position" data-sym="SUBST-BY-POSITION" title="(defun subst-by-position (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position</a> expansion-alist ev-lst <span class="number">0</span>)))))
                          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion
                              new-event-form
                              state)
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (empty-encapsulate-p (<a class="sym-link local-def" href="#def-empty-encapsulate" data-sym="EMPTY-ENCAPSULATE" title="(defun empty-encapsulate (ctx state)
  (pprogn
   (observation ctx &quot;The submitted encapsulate event has created no new ~
                        ACL2 events, and thus is leaving the ACL2 logical ~
                        world unchanged.  See :DOC encapsulate.&quot;)">empty-encapsulate</a> ctx state))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld3a (<a class="sym-link local-def" href="#def-intro-udf-guards" data-sym="INTRO-UDF-GUARDS" title="(defun intro-udf-guards (insigs kwd-value-list-lst wrld-acc wrld ctx state)
  (cond ((endp insigs) (value wrld-acc))
        (t
         (er-let*
          ((tguard
...">intro-udf-guards</a> insigs
                                       kwd-value-list-lst
                                       (<a class="sym-link local-def" href="#def-intro-udf-global-stobjs" data-sym="INTRO-UDF-GLOBAL-STOBJS" title="(defun intro-udf-global-stobjs (insigs kwd-value-list-lst wrld-acc)
  (cond ((endp insigs) wrld-acc)
        (t
         (intro-udf-global-stobjs (cdr insigs) (cdr kwd-value-list-lst)
                                  (putprop-unless (caar insigs) &#39;global-stobjs
...">intro-udf-global-stobjs</a> insigs kwd-value-list-lst wrld3)
                                       wrld3
                                       ctx
                                       state)))
                                  (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-encapsulate-return-value-p" data-sym="ENCAPSULATE-RETURN-VALUE-P" title="(defun encapsulate-return-value-p (val)
  (case-match val ((:return-value &amp;) t) (&amp; nil)))">encapsulate-return-value-p</a> retval) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> retval))
                                      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> names) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                                      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr names)) (car names))
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> names))
                                    (if expansion-alist
                                      new-event-form
                                      event-form)
                                    '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>
                                    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> names <span class="number">0</span>)
                                    nil
                                    nil
                                    nil
                                    ctx
                                    wrld3a
                                    state)))))))))))))))
      <span class="keyword">:event-type</span> '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>)))</pre>
  </div>

<div class="form-block function" id="def-progn-fn1" data-defines="PROGN-FN1" data-references="ACL2-RAW-MODE-P,NOT,VALUE,SUBST-BY-POSITION,QUASIQUOTE,ASSERT$,PROGN,PROGN!,CONS,AND,LAST-MAKE-EVENT-EXPANSION,SILENT-ERROR,SOFT,ER,NON-EVENT,EQ,UPDATE-FOR-REDO-FLAT,IGNORE,DECLARE,PROOFS-CO,IN-LOCAL-FLG,F-GET-GLOBAL,EVAL-EVENT-LST-ENVIRONMENT,LD-SKIP-PROOFSP,OR,EVAL-EVENT-LST,REDO-FLAT-FAIL,REDO-FLAT-SUCC,F-PUT-GLOBAL,PPROGN,IGNORE-KPA,EXPANSION-ALIST,VAL,ERP,MV-LET,INSIDE-PROGN-FN1,STATE-GLOBAL-LET*,REVERT-WORLD-ON-ERROR,WITH-CTX-SUMMARIZED,W,EMBEDDED-EVENT-LST,QUOTE,GLOBAL-VAL,IN-ENCAPSULATEP,T,CAR,TILDE-@-ABBREVIATE-OBJECT-PHRASE,IF,MSG,COND,CTX,LET,STATE,BINDINGS,PROGN!P,EV-LST,DEFUN" data-used-by="PROGN!-FN,PROGN-FN" data-part-name="PROGN-FN1" data-part-args="STATE,BINDINGS,PROGN!P,EV-LST" data-part-body="ACL2-RAW-MODE-P,NOT,VALUE,SUBST-BY-POSITION,QUASIQUOTE,ASSERT$,BINDINGS,PROGN,PROGN!,CONS,AND,LAST-MAKE-EVENT-EXPANSION,SILENT-ERROR,SOFT,ER,NON-EVENT,EQ,UPDATE-FOR-REDO-FLAT,IGNORE,DECLARE,PROOFS-CO,PROGN-FN1,IN-LOCAL-FLG,F-GET-GLOBAL,EVAL-EVENT-LST-ENVIRONMENT,LD-SKIP-PROOFSP,OR,EVAL-EVENT-LST,REDO-FLAT-FAIL,REDO-FLAT-SUCC,F-PUT-GLOBAL,PPROGN,IGNORE-KPA,EXPANSION-ALIST,VAL,ERP,MV-LET,INSIDE-PROGN-FN1,STATE-GLOBAL-LET*,REVERT-WORLD-ON-ERROR,WITH-CTX-SUMMARIZED,STATE,W,EMBEDDED-EVENT-LST,QUOTE,GLOBAL-VAL,IN-ENCAPSULATEP,T,CAR,TILDE-@-ABBREVIATE-OBJECT-PHRASE,PROGN!P,IF,MSG,EV-LST,COND,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROGN-FN1">progn-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-progn-fn1" data-sym="PROGN-FN1" title="(defun progn-fn1 (ev-lst progn!p bindings state)
  (let ((ctx
         (cond
          (ev-lst
           (msg &quot;( PROGN~s0 ~@1 ...)&quot;
...">progn-fn1</a>
  (ev-lst progn!p bindings state)
  (let ((ctx (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ev-lst (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( PROGN~s0 ~@1 ...)"</span>
             (if progn!p
               <span class="string">"!"</span>
               <span class="string">""</span>)
             (<a class="sym-link local-def" href="#def-tilde-_40-abbreviate-object-phrase" data-sym="TILDE-@-ABBREVIATE-OBJECT-PHRASE" title="(defun tilde-@-abbreviate-object-phrase (x)
  (cond ((atom x) (msg &quot;~x0&quot; x))
        ((symbol-listp x)
         (cond ((&lt; (length x) 3) (msg &quot;~x0&quot; x))
               (t (msg &quot;(~x0 ... ~x1)&quot; (car x) (car (last x))))))
...">tilde-@-abbreviate-object-phrase</a> (car ev-lst))))
         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (if progn!p
             <span class="string">"( PROGN!)"</span>
             <span class="string">"( PROGN)"</span>)))) (<a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> (<a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'embedded-event-lst (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
          nil)))
    (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> ctx
      (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inside-progn-fn1 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val expansion-alist ignore-kpa state)
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'redo-flat-succ nil state)
              (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'redo-flat-fail nil state)
              (<a class="sym-link local-def" href="#def-eval-event-lst" data-sym="EVAL-EVENT-LST" title="(defun eval-event-lst
       (index expansion-alist ev-lst quietp environment in-local-flg last-val
        other-control kpa caller ctx channel state)
  (flet ((event-macros (caller)
           (if (eq caller &#39;eval-some-portcullis-cmds)
...">eval-event-lst</a> <span class="number">0</span>
                nil
                ev-lst
                (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) progn!p)
                (<a class="sym-link local-def" href="#def-eval-event-lst-environment" data-sym="EVAL-EVENT-LST-ENVIRONMENT" title="(defun eval-event-lst-environment (in-encapsulatep state)
  (let* ((x
          (if in-encapsulatep
              &#39;(encapsulate)
              nil)))
...">eval-event-lst-environment</a> <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> state)
                (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state)
                nil
                (if progn!p
                  <span class="keyword">:non-event-ok</span> nil)
                nil
                '<a class="sym-link local-def" href="#def-progn-fn1" data-sym="PROGN-FN1" title="(defun progn-fn1 (ev-lst progn!p bindings state)
  (let ((ctx
         (cond
          (ev-lst
           (msg &quot;( PROGN~s0 ~@1 ...)&quot;
...">progn-fn1</a>
                ctx
                (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                state))
            (declare (ignore ignore-kpa))
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if erp
                (<a class="sym-link local-def" href="#def-update-for-redo-flat" data-sym="UPDATE-FOR-REDO-FLAT" title="(defun update-for-redo-flat (n ev-lst state)
  (assert$ (and (natp n) (&lt; n (length ev-lst)))
           (pprogn
            (f-put-global &#39;redo-flat-succ
                          (append? (take n ev-lst)
...">update-for-redo-flat</a> val ev-lst state)
                state)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> erp 'non-event) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"PROGN may only be used on legal event forms (see :DOC ~
                    embedded-event-form).  Consider using ER-PROGN instead."</span>))
                (erp (silent-error state))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion
                      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> expansion-alist
                        (cons (if progn!p
                            '<a class="sym-link system" href="basis-b.html#def-progn_21" data-sym="PROGN!">progn!</a>
                            '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>)
                          (if bindings
                            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> progn!p
                              `(<span class="keyword">:state-global-bindings</span> ,BINDINGS
                                ,@(SUBST-BY-POSITION EXPANSION-ALIST EV-LST 0)))
                            (<a class="sym-link local-def" href="#def-subst-by-position" data-sym="SUBST-BY-POSITION" title="(defun subst-by-position (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position</a> expansion-alist ev-lst <span class="number">0</span>))))
                      state)
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'acl2-raw-mode-p state)) val)))))))))
      <span class="keyword">:event-type</span> '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>)))</pre>
  </div>

<div class="form-block function" id="def-progn-fn" data-defines="PROGN-FN" data-references="PROGN-FN1,STATE,EV-LST,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="PROGN-FN" data-part-args="STATE,EV-LST" data-part-body="STATE,EV-LST,PROGN-FN1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROGN-FN">progn-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-progn-fn" data-sym="PROGN-FN" title="(defun progn-fn (ev-lst state) (progn-fn1 ev-lst nil nil state))">progn-fn</a>
  (ev-lst state)
  (<a class="sym-link local-def" href="#def-progn-fn1" data-sym="PROGN-FN1" title="(defun progn-fn1 (ev-lst progn!p bindings state)
  (let ((ctx
         (cond
          (ev-lst
           (msg &quot;( PROGN~s0 ~@1 ...)&quot;
...">progn-fn1</a> ev-lst nil nil state))</pre>
  </div>

<div class="form-block function" id="def-progn_21-fn" data-defines="PROGN!-FN" data-references="T,PROGN-FN1,EQ,IF,OLD,LET,LD-OKP,QUOTE,F-GET-GLOBAL,ACL2-RAW-MODE-P,STATE-GLOBAL-LET*,STATE,BINDINGS,EV-LST,DEFUN" data-part-name="PROGN!-FN" data-part-args="STATE,BINDINGS,EV-LST" data-part-body="BINDINGS,T,EV-LST,PROGN-FN1,EQ,IF,OLD,LET,LD-OKP,STATE,QUOTE,F-GET-GLOBAL,ACL2-RAW-MODE-P,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROGN!-FN">progn!-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-progn_21-fn" data-sym="PROGN!-FN" title="(defun progn!-fn (ev-lst bindings state)
  (state-global-let*
   ((acl2-raw-mode-p (f-get-global &#39;acl2-raw-mode-p state))
    (ld-okp
     (let ((old (f-get-global &#39;ld-okp state)))
...">progn!-fn</a>
  (ev-lst bindings state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((acl2-raw-mode-p (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'acl2-raw-mode-p state)) (ld-okp (let ((old (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-okp state)))
          (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> old <span class="keyword">:default</span>)
            nil
            old))))
    (<a class="sym-link local-def" href="#def-progn-fn1" data-sym="PROGN-FN1" title="(defun progn-fn1 (ev-lst progn!p bindings state)
  (let ((ctx
         (cond
          (ev-lst
           (msg &quot;( PROGN~s0 ~@1 ...)&quot;
...">progn-fn1</a> ev-lst <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> bindings state)))</pre>
  </div>

<div class="form-block function" id="def-include-book-alist-subsetp" data-defines="INCLUDE-BOOK-ALIST-SUBSETP" data-references="STRIP-CDDRS,SUBSETP-EQUAL,ALIST2,ALIST1,DEFUN" data-used-by="CHK-CERTIFY-BOOK-STEP-3,INCLUDE-BOOK-CERTIFIED-P,CHK-RAISE-PORTCULLIS" data-part-name="INCLUDE-BOOK-ALIST-SUBSETP" data-part-args="ALIST2,ALIST1" data-part-body="ALIST2,ALIST1,STRIP-CDDRS,SUBSETP-EQUAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ALIST-SUBSETP">include-book-alist-subsetp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-alist-subsetp" data-sym="INCLUDE-BOOK-ALIST-SUBSETP" title="(defun include-book-alist-subsetp (alist1 alist2)
  (subsetp-equal (strip-cddrs alist1) (strip-cddrs alist2)))">include-book-alist-subsetp</a>
  (alist1 alist2)
  (<a class="sym-link system" href="axioms.html#def-subsetp-equal" data-sym="SUBSETP-EQUAL">subsetp-equal</a> (<a class="sym-link system" href="axioms.html#def-strip-cddrs" data-sym="STRIP-CDDRS">strip-cddrs</a> alist1) (<a class="sym-link system" href="axioms.html#def-strip-cddrs" data-sym="STRIP-CDDRS">strip-cddrs</a> alist2)))</pre>
  </div>

<div class="form-block function" id="def-cbd-fn" data-defines="CBD-FN" data-references="CBD,HARD?,ER,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,OR,STATE,DEFUN" data-used-by="CBD" data-part-name="CBD-FN" data-part-args="STATE" data-part-body="CBD,HARD?,ER,STATE,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,OR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CBD-FN">cbd-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cbd-fn" data-sym="CBD-FN" title="(defun cbd-fn (state)
  (or (f-get-global &#39;connected-book-directory state)
      (er hard? &#39;cbd
          &quot;The connected book directory has apparently not yet been set.  ~
           This could be a sign that the top-level ACL2 loop, generally ~">cbd-fn</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)
    (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard?
      '<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
      <span class="string">"The connected book directory has apparently not yet been set.  ~
           This could be a sign that the top-level ACL2 loop, generally ~
           entered using (LP), has not yet been entered."</span>)))</pre>
  </div>

<div class="form-block macro" id="def-cbd" data-defines="CBD" data-references="STATE,CBD-FN,QUASIQUOTE,DEFMACRO" data-used-by="OLD-AND-NEW-EVENT-DATA-FAL,MAKE-EVENT-FN2,CHANGE-INCLUDE-BOOK-DIR,CERTIFY-BOOK-FN,INCLUDE-BOOK-FN,CHK-WELL-FORMED-TTAGS,FIX-TTAGS,TRANSLATE-BOOK-NAMES,MAKE-INCLUDE-BOOKS-ABSOLUTE,MAKE-INCLUDE-BOOKS-ABSOLUTE-1,WITH-CBD,SET-CBD-FN,GET-PORTCULLIS-CMDS,CBD-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CBD">cbd</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> nil `(<a class="sym-link local-def" href="#def-cbd-fn" data-sym="CBD-FN" title="(defun cbd-fn (state)
  (or (f-get-global &#39;connected-book-directory state)
      (er hard? &#39;cbd
          &quot;The connected book directory has apparently not yet been set.  ~
           This could be a sign that the top-level ACL2 loop, generally ~">cbd-fn</a> state))</pre>
  </div>

<div class="form-block function" id="def-get-portcullis-cmds" data-defines="GET-PORTCULLIS-CMDS" data-references="CONS,CDR,REBUILD-EXPANSION,IGNORE,DECLARE,DESTRUCTURE-EXPANSION,BASE-FORM,WRAPPERS,IF,FORM,ACCESS-COMMAND-TUPLE-LAST-MAKE-EVENT-EXPANSION,EXP,LET*,CHK-EMBEDDED-EVENT-FORM,VAL,ERP,MV-LET,T,EXIT-BOOT-STRAP-MODE,EQUAL,ACCESS-COMMAND-TUPLE-CBD,CBD,CDDAR,ACCESS-COMMAND-TUPLE-FORM,FORM0,LET,GLOBAL-VALUE,CADAR,COMMAND-LANDMARK,QUOTE,CAAR,EQ,AND,MV,NULL,COND,STATE,CTX,NAMES,CBDS,CMDS,WRLD,DEFUN" data-used-by="CHK-ACCEPTABLE-CERTIFY-BOOK" data-part-name="GET-PORTCULLIS-CMDS" data-part-args="STATE,CTX,NAMES,CBDS,CMDS,WRLD" data-part-body="CONS,CDR,GET-PORTCULLIS-CMDS,REBUILD-EXPANSION,IGNORE,DECLARE,DESTRUCTURE-EXPANSION,BASE-FORM,WRAPPERS,IF,FORM,ACCESS-COMMAND-TUPLE-LAST-MAKE-EVENT-EXPANSION,EXP,LET*,NAMES,CTX,CHK-EMBEDDED-EVENT-FORM,VAL,ERP,MV-LET,T,EXIT-BOOT-STRAP-MODE,EQUAL,ACCESS-COMMAND-TUPLE-CBD,CBD,CDDAR,ACCESS-COMMAND-TUPLE-FORM,FORM0,LET,GLOBAL-VALUE,CADAR,COMMAND-LANDMARK,QUOTE,CAAR,EQ,AND,STATE,CBDS,CMDS,MV,WRLD,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-PORTCULLIS-CMDS">get-portcullis-cmds</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-portcullis-cmds" data-sym="GET-PORTCULLIS-CMDS" title="(defun get-portcullis-cmds (wrld cmds cbds names ctx state)
  (cond ((null wrld) (mv nil cmds cbds state))
        ((and (eq (caar wrld) &#39;command-landmark)
              (eq (cadar wrld) &#39;global-value))
         (let ((form0 (access-command-tuple-form (cddar wrld)))
...">get-portcullis-cmds</a>
  (wrld cmds cbds names ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil cmds cbds state))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld) 'command-landmark)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> wrld) 'global-value)) (let ((form0 (access-command-tuple-form (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> wrld))) (<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> (access-command-tuple-cbd (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> wrld))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal form0 '(exit-boot-strap-mode)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil cmds cbds state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
              (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> form0
                nil
                wrld
                ctx
                state
                names
                nil
                nil
                nil)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp nil nil state))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((exp (access-command-tuple-last-make-event-expansion (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> wrld))) (form (if exp
                          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (wrappers base-form)
                            (<a class="sym-link local-def" href="#def-destructure-expansion" data-sym="DESTRUCTURE-EXPANSION" title="(defun destructure-expansion (form)
  (declare (xargs :guard (true-listp form)))
  (cond
   ((member-eq (car form) *destructure-expansion-wrappers*)
    (mv-let (wrappers base-form) (destructure-expansion (car (last form)))
...">destructure-expansion</a> val)
                            (declare (ignore base-form))
                            (<a class="sym-link local-def" href="#def-rebuild-expansion" data-sym="REBUILD-EXPANSION" title="(defun rebuild-expansion (wrappers form)
  (cond ((endp wrappers) form)
        (t
         (append (car wrappers)
                 (list (rebuild-expansion (cdr wrappers) form))))))">rebuild-expansion</a> wrappers exp))
                          form0)))
                    (<a class="sym-link local-def" href="#def-get-portcullis-cmds" data-sym="GET-PORTCULLIS-CMDS" title="(defun get-portcullis-cmds (wrld cmds cbds names ctx state)
  (cond ((null wrld) (mv nil cmds cbds state))
        ((and (eq (caar wrld) &#39;command-landmark)
              (eq (cadar wrld) &#39;global-value))
         (let ((form0 (access-command-tuple-form (cddar wrld)))
...">get-portcullis-cmds</a> (cdr wrld)
                      (cons form cmds)
                      (cons <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> cbds)
                      names
                      ctx
                      state)))))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-get-portcullis-cmds" data-sym="GET-PORTCULLIS-CMDS" title="(defun get-portcullis-cmds (wrld cmds cbds names ctx state)
  (cond ((null wrld) (mv nil cmds cbds state))
        ((and (eq (caar wrld) &#39;command-landmark)
              (eq (cadar wrld) &#39;global-value))
         (let ((form0 (access-command-tuple-form (cddar wrld)))
...">get-portcullis-cmds</a> (cdr wrld) cmds cbds names ctx state))))</pre>
  </div>

<div class="form-block other" id="form-204" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> canonical-pathname (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>)</pre>
  </div>

<div class="form-block function" id="def-canonical-dirname_21" data-defines="CANONICAL-DIRNAME!" data-references="HARD?,ER,COND,X,LET,CANONICAL-PATHNAME,OR,T,XARGS,DECLARE,STATE,CTX,PATHNAME,DEFUN" data-used-by="SET-CBD-FN-DIR" data-part-name="CANONICAL-DIRNAME!" data-part-args="STATE,CTX,PATHNAME" data-part-declare="T,XARGS,DECLARE" data-part-body="CTX,HARD?,ER,COND,X,LET,STATE,T,PATHNAME,CANONICAL-PATHNAME,OR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CANONICAL-DIRNAME!">canonical-dirname!</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-canonical-dirname_21" data-sym="CANONICAL-DIRNAME!" title="(defun canonical-dirname! (pathname ctx state)
  (declare (xargs :guard t))
  (or (canonical-pathname pathname t state)
      (let ((x (canonical-pathname pathname nil state)))
        (cond
...">canonical-dirname!</a>
  (pathname ctx state)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (canonical-pathname pathname <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)
    (let ((x (canonical-pathname pathname nil state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (x (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard?
            ctx
            <span class="string">"The file ~x0 is not known to be a directory."</span>
            x))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard? ctx <span class="string">"The directory ~x0 does not exist."</span> pathname))))))</pre>
  </div>

<div class="form-block function" id="def-directory-of-absolute-pathname" data-defines="DIRECTORY-OF-ABSOLUTE-PATHNAME" data-references="STRING,*DIRECTORY-SEPARATOR*,MEMBER,TEMP,REVERSE,RLST,LIST,QUOTE,COERCE,LST,LET*,PATHNAME,DEFUN" data-used-by="EVAL-PORT-FILE,CHK-ACCEPTABLE-CERTIFY-BOOK,CHK-CERTIFICATE-FILE,EXTEND-PATHNAME+" data-part-name="DIRECTORY-OF-ABSOLUTE-PATHNAME" data-part-args="PATHNAME" data-part-body="STRING,*DIRECTORY-SEPARATOR*,MEMBER,TEMP,REVERSE,RLST,LIST,QUOTE,PATHNAME,COERCE,LST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DIRECTORY-OF-ABSOLUTE-PATHNAME">directory-of-absolute-pathname</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-directory-of-absolute-pathname" data-sym="DIRECTORY-OF-ABSOLUTE-PATHNAME" title="(defun directory-of-absolute-pathname (pathname)
  (let* ((lst (coerce pathname &#39;list))
         (rlst (reverse lst))
         (temp (member *directory-separator* rlst)))
    (coerce (reverse temp) &#39;string)))">directory-of-absolute-pathname</a>
  (pathname)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((lst (coerce pathname '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)) (rlst (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> lst))
      (temp (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator_2A" data-sym="*DIRECTORY-SEPARATOR*">*directory-separator*</a> rlst)))
    (coerce (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> temp) '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>)))</pre>
  </div>

<div class="form-block function" id="def-extend-pathname_2B" data-defines="EXTEND-PATHNAME+" data-references="SUBSEQ,STRING,CONCATENATE,DIR1,LEN0,DIRECTORY-OF-ABSOLUTE-PATHNAME,1-,CHAR,EQL,ASSERT$,LENGTH,LEN,LET,NOT,AND,OR,CANONICAL-PATHNAME,CANONICAL-FILENAME,OUR-MERGE-PATHNAMES,T,ABSOLUTE-PATHNAME-STRING-P,COND,ABS-FILENAME,EXPAND-TILDE-TO-USER-HOME-DIR,FILE-NAME1,PROJECT-DIR-ALIST,PROJECT-DIR-LOOKUP,KEYWORDP,IF,DIR,EXTEND-PATHNAME,QUOTE,CTX,OS,W,WRLD,LET*,STATE,CANON-P,FILE-NAME,DIR0,DEFUN" data-used-by="EXTEND-PATHNAME" data-part-name="EXTEND-PATHNAME+" data-part-args="STATE,CANON-P,FILE-NAME,DIR0" data-part-body="SUBSEQ,STRING,CONCATENATE,DIR1,LEN0,DIRECTORY-OF-ABSOLUTE-PATHNAME,1-,CHAR,EQL,ASSERT$,LENGTH,LEN,LET,CANON-P,NOT,AND,OR,CANONICAL-PATHNAME,CANONICAL-FILENAME,OUR-MERGE-PATHNAMES,T,ABSOLUTE-PATHNAME-STRING-P,COND,ABS-FILENAME,FILE-NAME,EXPAND-TILDE-TO-USER-HOME-DIR,FILE-NAME1,PROJECT-DIR-ALIST,PROJECT-DIR-LOOKUP,DIR0,KEYWORDP,IF,DIR,EXTEND-PATHNAME,QUOTE,CTX,OS,STATE,W,WRLD,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXTEND-PATHNAME+">extend-pathname+</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-extend-pathname_2B" data-sym="EXTEND-PATHNAME+" title="(defun extend-pathname+ (dir0 file-name canon-p state)
  (let* ((wrld (w state))
         (os (os wrld))
         (ctx &#39;extend-pathname)
         (dir
...">extend-pathname+</a>
  (dir0 file-name canon-p state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> wrld))
      (ctx '<a class="sym-link local-def" href="#def-extend-pathname" data-sym="EXTEND-PATHNAME" title="(defun extend-pathname (dir0 file-name state)
  (extend-pathname+ dir0 file-name nil state))">extend-pathname</a>)
      (dir (if (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> dir0)
          (<a class="sym-link system" href="basis-a.html#def-project-dir-lookup" data-sym="PROJECT-DIR-LOOKUP">project-dir-lookup</a> dir0 (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> wrld) ctx)
          dir0))
      (file-name1 (<a class="sym-link system" href="basis-a.html#def-expand-tilde-to-user-home-dir" data-sym="EXPAND-TILDE-TO-USER-HOME-DIR">expand-tilde-to-user-home-dir</a> file-name <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> ctx state))
      (abs-filename (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-absolute-pathname-string-p" data-sym="ABSOLUTE-PATHNAME-STRING-P">absolute-pathname-string-p</a> file-name1 nil <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a>) file-name1)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-our-merge-pathnames" data-sym="OUR-MERGE-PATHNAMES">our-merge-pathnames</a> dir file-name1))))
      (canonical-filename (if (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> dir0)
          abs-filename
          (canonical-pathname abs-filename nil state))))
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> canonical-filename
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> canon-p)
        (let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> abs-filename)))
          (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <span class="number">0</span>))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> abs-filename (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> abs-filename))) #\/) abs-filename)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((dir0 (<a class="sym-link local-def" href="#def-directory-of-absolute-pathname" data-sym="DIRECTORY-OF-ABSOLUTE-PATHNAME" title="(defun directory-of-absolute-pathname (pathname)
  (let* ((lst (coerce pathname &#39;list))
         (rlst (reverse lst))
         (temp (member *directory-separator* rlst)))
    (coerce (reverse temp) &#39;string)))">directory-of-absolute-pathname</a> abs-filename)) (len0 (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> dir0))
                    (dir1 (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> len0 <span class="number">0</span>)) (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> dir0 (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> len0)) #\/))
                        (canonical-pathname dir0 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (dir1 (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> dir1 (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> abs-filename len0 <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> abs-filename)))))))))))</pre>
  </div>

<div class="form-block function" id="def-extend-pathname" data-defines="EXTEND-PATHNAME" data-references="EXTEND-PATHNAME+,STATE,FILE-NAME,DIR0,DEFUN" data-used-by="CHANGE-INCLUDE-BOOK-DIR,INITIAL-USELESS-RUNES,TRANSLATE-BOOK-NAMES,SYSFILE-TO-FILENAME,MAKE-INCLUDE-BOOKS-ABSOLUTE-1,PARSE-BOOK-NAME,EXTEND-PATHNAME+" data-part-name="EXTEND-PATHNAME" data-part-args="STATE,FILE-NAME,DIR0" data-part-body="STATE,FILE-NAME,DIR0,EXTEND-PATHNAME+" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXTEND-PATHNAME">extend-pathname</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-extend-pathname" data-sym="EXTEND-PATHNAME" title="(defun extend-pathname (dir0 file-name state)
  (extend-pathname+ dir0 file-name nil state))">extend-pathname</a>
  (dir0 file-name state)
  (<a class="sym-link local-def" href="#def-extend-pathname_2B" data-sym="EXTEND-PATHNAME+" title="(defun extend-pathname+ (dir0 file-name canon-p state)
  (let* ((wrld (w state))
         (os (os wrld))
         (ctx &#39;extend-pathname)
         (dir
...">extend-pathname+</a> dir0 file-name nil state))</pre>
  </div>

<div class="form-block function" id="def-maybe-add-separator" data-defines="MAYBE-ADD-SEPARATOR" data-references="*DIRECTORY-SEPARATOR-STRING*,STRING-APPEND,*DIRECTORY-SEPARATOR*,LENGTH,1-,CHAR,EQL,EQUAL,NOT,AND,IF,STR,DEFUN" data-used-by="CHANGE-INCLUDE-BOOK-DIR,SET-CBD-FN-DIR" data-part-name="MAYBE-ADD-SEPARATOR" data-part-args="STR" data-part-body="*DIRECTORY-SEPARATOR-STRING*,STRING-APPEND,*DIRECTORY-SEPARATOR*,LENGTH,1-,CHAR,EQL,STR,EQUAL,NOT,AND,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-ADD-SEPARATOR">maybe-add-separator</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-add-separator" data-sym="MAYBE-ADD-SEPARATOR" title="(defun maybe-add-separator (str)
  (if (and (not (equal str &quot;&quot;))
           (eql (char str (1- (length str))) *directory-separator*))
      str
      (string-append str *directory-separator-string*)))">maybe-add-separator</a>
  (str)
  (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal str <span class="string">""</span>))
      (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> str (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> str))) <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator_2A" data-sym="*DIRECTORY-SEPARATOR*">*directory-separator*</a>))
    str
    (<a class="sym-link system" href="axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> str <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator-string_2A" data-sym="*DIRECTORY-SEPARATOR-STRING*">*directory-separator-string*</a>)))</pre>
  </div>

<div class="form-block function" id="def-set-cbd-fn1" data-defines="SET-CBD-FN1" data-references="CONNECTED-BOOK-DIRECTORY,ASSIGN,INCREMENT-FILE-CLOCK,PPROGN,STATE,DIR,DEFUN" data-used-by="SET-CBD-FN" data-part-name="SET-CBD-FN1" data-part-args="STATE,DIR" data-part-body="DIR,CONNECTED-BOOK-DIRECTORY,ASSIGN,STATE,INCREMENT-FILE-CLOCK,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-CBD-FN1">set-cbd-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-cbd-fn1" data-sym="SET-CBD-FN1" title="(defun set-cbd-fn1 (dir state)
  (pprogn (increment-file-clock state) (assign connected-book-directory dir)))">set-cbd-fn1</a>
  (dir state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-increment-file-clock" data-sym="INCREMENT-FILE-CLOCK">increment-file-clock</a> state)
    (<a class="sym-link system" href="axioms.html#def-assign" data-sym="ASSIGN">assign</a> connected-book-directory dir)))</pre>
  </div>

<div class="form-block function" id="def-set-cbd-fn-dir" data-defines="SET-CBD-FN-DIR" data-references="OUR-MERGE-PATHNAMES,CONNECTED-BOOK-DIRECTORY,CANONICAL-DIRNAME!,MAYBE-ADD-SEPARATOR,ABSOLUTE-PATHNAME-STRING-P,EXPAND-TILDE-TO-USER-HOME-DIR,LET,MSG,T,BOOT-STRAP-FLG,QUOTE,F-GET-GLOBAL,NULL,AND,STRINGP,NOT,COND,STATE,CTX,OS,STR,DEFUN" data-used-by="MAKE-INCLUDE-BOOKS-ABSOLUTE-1,SET-CBD-FN" data-part-name="SET-CBD-FN-DIR" data-part-args="STATE,CTX,OS,STR" data-part-body="OUR-MERGE-PATHNAMES,CONNECTED-BOOK-DIRECTORY,CANONICAL-DIRNAME!,MAYBE-ADD-SEPARATOR,ABSOLUTE-PATHNAME-STRING-P,CTX,OS,EXPAND-TILDE-TO-USER-HOME-DIR,LET,MSG,T,STATE,BOOT-STRAP-FLG,QUOTE,F-GET-GLOBAL,NULL,AND,STR,STRINGP,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-CBD-FN-DIR">set-cbd-fn-dir</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-cbd-fn-dir" data-sym="SET-CBD-FN-DIR" title="(defun set-cbd-fn-dir (str os ctx state)
  (cond
   ((not (stringp str))
    (cond ((and (null str) (f-get-global &#39;boot-strap-flg state)) nil)
          (t
...">set-cbd-fn-dir</a>
  (str <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (stringp str)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> str) (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state)) nil)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The argument cbd must be a string, unlike ~x0.  See :DOC cbd."</span>
            str))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((str (<a class="sym-link system" href="basis-a.html#def-expand-tilde-to-user-home-dir" data-sym="EXPAND-TILDE-TO-USER-HOME-DIR">expand-tilde-to-user-home-dir</a> str <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> ctx state)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-absolute-pathname-string-p" data-sym="ABSOLUTE-PATHNAME-STRING-P">absolute-pathname-string-p</a> str nil <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a>) (<a class="sym-link local-def" href="#def-maybe-add-separator" data-sym="MAYBE-ADD-SEPARATOR" title="(defun maybe-add-separator (str)
  (if (and (not (equal str &quot;&quot;))
           (eql (char str (1- (length str))) *directory-separator*))
      str
      (string-append str *directory-separator-string*)))">maybe-add-separator</a> (<a class="sym-link local-def" href="#def-canonical-dirname_21" data-sym="CANONICAL-DIRNAME!" title="(defun canonical-dirname! (pathname ctx state)
  (declare (xargs :guard t))
  (or (canonical-pathname pathname t state)
      (let ((x (canonical-pathname pathname nil state)))
        (cond
...">canonical-dirname!</a> str ctx state)))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-absolute-pathname-string-p" data-sym="ABSOLUTE-PATHNAME-STRING-P">absolute-pathname-string-p</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)
               <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
               <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a>)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"An attempt was made to set the connected book directory (cbd) ~
                using relative pathname ~p0, but surprisingly, the existing ~
                cbd is ~p1, which is not an absolute pathname.  This appears ~
                to be an implementation error; please contact the ACL2 ~
                implementors."</span>
              str
              (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-maybe-add-separator" data-sym="MAYBE-ADD-SEPARATOR" title="(defun maybe-add-separator (str)
  (if (and (not (equal str &quot;&quot;))
           (eql (char str (1- (length str))) *directory-separator*))
      str
      (string-append str *directory-separator-string*)))">maybe-add-separator</a> (<a class="sym-link local-def" href="#def-canonical-dirname_21" data-sym="CANONICAL-DIRNAME!" title="(defun canonical-dirname! (pathname ctx state)
  (declare (xargs :guard t))
  (or (canonical-pathname pathname t state)
      (let ((x (canonical-pathname pathname nil state)))
        (cond
...">canonical-dirname!</a> (<a class="sym-link system" href="basis-a.html#def-our-merge-pathnames" data-sym="OUR-MERGE-PATHNAMES">our-merge-pathnames</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)
                  str)
                ctx
                state))))))))</pre>
  </div>

<div class="form-block function" id="def-set-cbd-fn" data-defines="SET-CBD-FN" data-references="SET-CBD-FN1,SOFT,ER,CONSP,SET-CBD-FN-DIR,VAL,SET-CBD,QUOTE,CONS,CTX,W,OS,LET*,T,VALUE,CBD,EQUAL,AND,COND,STATE,STR,DEFUN" data-used-by="SET-CBD-STATE,SET-CBD" data-part-name="SET-CBD-FN" data-part-args="STATE,STR" data-part-body="SET-CBD-FN1,SOFT,ER,CONSP,SET-CBD-FN-DIR,VAL,SET-CBD,QUOTE,CONS,CTX,STATE,W,OS,LET*,T,VALUE,CBD,EQUAL,STR,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-CBD-FN">set-cbd-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-cbd-fn" data-sym="SET-CBD-FN" title="(defun set-cbd-fn (str state)
  (cond ((and str (equal (cbd) str)) (value nil))
        (t
         (let* ((os (os (w state)))
                (ctx (cons &#39;set-cbd str))
...">set-cbd-fn</a>
  (str state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> str (equal (<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>) str)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (ctx (cons '<a class="sym-link local-def" href="#def-set-cbd" data-sym="SET-CBD" title="(defmacro set-cbd (str) `(set-cbd-fn ,str state))">set-cbd</a> str))
          (val (<a class="sym-link local-def" href="#def-set-cbd-fn-dir" data-sym="SET-CBD-FN-DIR" title="(defun set-cbd-fn-dir (str os ctx state)
  (cond
   ((not (stringp str))
    (cond ((and (null str) (f-get-global &#39;boot-strap-flg state)) nil)
          (t
...">set-cbd-fn-dir</a> str <a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> ctx state)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp val) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@0"</span> val))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-set-cbd-fn1" data-sym="SET-CBD-FN1" title="(defun set-cbd-fn1 (dir state)
  (pprogn (increment-file-clock state) (assign connected-book-directory dir)))">set-cbd-fn1</a> val state)))))))</pre>
  </div>

<div class="form-block macro" id="def-set-cbd" data-defines="SET-CBD" data-references="STATE,SET-CBD-FN,QUASIQUOTE,STR,DEFMACRO" data-used-by="SET-CBD-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-CBD">set-cbd</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-cbd" data-sym="SET-CBD" title="(defmacro set-cbd (str) `(set-cbd-fn ,str state))">set-cbd</a> (str) `(<a class="sym-link local-def" href="#def-set-cbd-fn" data-sym="SET-CBD-FN" title="(defun set-cbd-fn (str state)
  (cond ((and str (equal (cbd) str)) (value nil))
        (t
         (let* ((os (os (w state)))
                (ctx (cons &#39;set-cbd str))
...">set-cbd-fn</a> ,STR state))</pre>
  </div>

<div class="form-block function" id="def-set-cbd-state" data-defines="SET-CBD-STATE" data-references="QUOTE,HARD,ER,AND,PROG2$,IGNORE,DECLARE,SET-CBD-FN,VAL,ERP,MV-LET,STATE,STR,DEFUN" data-used-by="WITH-CBD" data-part-name="SET-CBD-STATE" data-part-args="STATE,STR" data-part-body="SET-CBD-STATE,QUOTE,HARD,ER,AND,PROG2$,IGNORE,DECLARE,STR,SET-CBD-FN,STATE,VAL,ERP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-CBD-STATE">set-cbd-state</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-cbd-state" data-sym="SET-CBD-STATE" title="(defun set-cbd-state (str state)
  (mv-let (erp val state) (set-cbd-fn str state) (declare (ignore val))
          (prog2$
           (and erp
                (er hard &#39;set-cbd-state
...">set-cbd-state</a>
  (str state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
    (<a class="sym-link local-def" href="#def-set-cbd-fn" data-sym="SET-CBD-FN" title="(defun set-cbd-fn (str state)
  (cond ((and str (equal (cbd) str)) (value nil))
        (t
         (let* ((os (os (w state)))
                (ctx (cons &#39;set-cbd str))
...">set-cbd-fn</a> str state)
    (declare (ignore val))
    (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> erp
        (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-set-cbd-state" data-sym="SET-CBD-STATE" title="(defun set-cbd-state (str state)
  (mv-let (erp val state) (set-cbd-fn str state) (declare (ignore val))
          (prog2$
           (and erp
                (er hard &#39;set-cbd-state
...">set-cbd-state</a>
          <span class="string">"Implementation error: Only use ~x0 when it is known that ~
                     this will not cause an error."</span>
          '<a class="sym-link local-def" href="#def-set-cbd-state" data-sym="SET-CBD-STATE" title="(defun set-cbd-state (str state)
  (mv-let (erp val state) (set-cbd-fn str state) (declare (ignore val))
          (prog2$
           (and erp
                (er hard &#39;set-cbd-state
...">set-cbd-state</a>))
      state)))</pre>
  </div>

<div class="form-block macro" id="def-with-cbd" data-defines="WITH-CBD" data-references="SET-CBD-STATE,CBD,CONNECTED-BOOK-DIRECTORY,STATE-GLOBAL-LET*,QUASIQUOTE,LET,FORM,DIR,DEFMACRO" data-used-by="CERTIFY-BOOK-STEP-3+,CERTIFY-BOOK-STEP-2,INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS,EVAL-PORT-FILE,CHK-CERTIFICATE-FILE,MAKE-INCLUDE-BOOKS-ABSOLUTE-1,EQUAL-MOD-ELIDE-LOCALS1,FIND-FIRST-NON-LOCAL-NAME,ELIDE-LOCALS-REC,*DESTRUCTURE-EXPANSION-WRAPPERS*,CHK-EMBEDDED-EVENT-FORM" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-CBD">with-cbd</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a>
  (dir form)
  (let ((form form))
    `(<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((connected-book-directory (<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>) <a class="sym-link local-def" href="#def-set-cbd-state" data-sym="SET-CBD-STATE" title="(defun set-cbd-state (str state)
  (mv-let (erp val state) (set-cbd-fn str state) (declare (ignore val))
          (prog2$
           (and erp
                (er hard &#39;set-cbd-state
...">set-cbd-state</a>))
      ,(IF (EQ DIR :SAME)
     FORM
     `(PPROGN (SET-CBD-STATE ,DIR STATE) ,FORM)))))</pre>
  </div>

<div class="form-block macro" id="def-with-current-package" data-defines="WITH-CURRENT-PACKAGE" data-references="SET-CURRENT-PACKAGE-STATE,CURRENT-PACKAGE,STATE-GLOBAL-LET*,QUASIQUOTE,LET,FORM,PKG,DEFMACRO" data-used-by="MAKE-INCLUDE-BOOKS-ABSOLUTE-1,EQUAL-MOD-ELIDE-LOCALS1,FIND-FIRST-NON-LOCAL-NAME,ELIDE-LOCALS-REC,*DESTRUCTURE-EXPANSION-WRAPPERS*,CHK-EMBEDDED-EVENT-FORM" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-CURRENT-PACKAGE">with-current-package</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-current-package" data-sym="WITH-CURRENT-PACKAGE" title="(defmacro with-current-package (pkg form)
  (let ((form form))
    `(state-global-let* ((current-package ,pkg set-current-package-state))
                        ,form)))">with-current-package</a>
  (pkg form)
  (let ((form form))
    `(<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> ,PKG set-current-package-state))
      ,FORM)))</pre>
  </div>

<div class="form-block function" id="def-parse-book-name" data-defines="PARSE-BOOK-NAME" data-references="W,FILENAME-TO-BOOK-NAME,FAMILIAR,STRING-SUFFIXP,FULL-BOOK-STRING,-,LEN0-5,LENGTH,LEN0,1+,SUBSEQ,ASSERT$,DIR0,*DIRECTORY-SEPARATOR-STRING*,POS0,EXTEND-PATHNAME,FULL-BOOK-STRING0,STRING,QUOTE,CONCATENATE,X+,LET*,T,SEARCH,STRINGP,QUASIQUOTE,HARD,ER,MV,EQUAL,NOT,AND,COND,STATE,CTX,EXTENSION,X,DIR,DEFUN" data-used-by="OLD-AND-NEW-EVENT-DATA-FAL,CERTIFY-BOOK-FN,INCLUDE-BOOK-FN,MAKE-INCLUDE-BOOKS-ABSOLUTE-1" data-part-name="PARSE-BOOK-NAME" data-part-args="STATE,CTX,EXTENSION,X,DIR" data-part-body="W,FILENAME-TO-BOOK-NAME,FAMILIAR,STRING-SUFFIXP,FULL-BOOK-STRING,-,LEN0-5,LENGTH,LEN0,1+,SUBSEQ,ASSERT$,DIR0,*DIRECTORY-SEPARATOR-STRING*,POS0,DIR,EXTEND-PATHNAME,FULL-BOOK-STRING0,STRING,QUOTE,CONCATENATE,X+,LET*,T,SEARCH,STRINGP,X,STATE,PARSE-BOOK-NAME,QUASIQUOTE,CTX,HARD,ER,MV,EQUAL,NOT,EXTENSION,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-BOOK-NAME">parse-book-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-book-name" data-sym="PARSE-BOOK-NAME" title="(defun parse-book-name (dir x extension ctx state)
  (cond
   ((and extension (not (equal extension &quot;.lisp&quot;)))
    (mv
     (er hard ctx &quot;Calls of parse-book-name with non-nil extension other than ~
...">parse-book-name</a>
  (dir x extension ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> extension (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal extension <span class="string">".lisp"</span>))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          ctx
          <span class="string">"Calls of parse-book-name with non-nil extension other than ~
             &quot;.lisp&quot; are not supported.  The call ~x0 is thus illegal."</span>
          `(<a class="sym-link local-def" href="#def-parse-book-name" data-sym="PARSE-BOOK-NAME" title="(defun parse-book-name (dir x extension ctx state)
  (cond
   ((and extension (not (equal extension &quot;.lisp&quot;)))
    (mv
     (er hard ctx &quot;Calls of parse-book-name with non-nil extension other than ~
...">parse-book-name</a> ,DIR ,X ,EXTENSION ,CTX state))
        nil
        nil
        x))
    ((stringp x) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> <span class="string">"//"</span> x) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
              ctx
              <span class="string">"The filename~|~x0~|is illegal because it has consecutive ~
               directory separators, //."</span>
              x)
            nil
            nil
            x))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((x+ (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> x <span class="string">".lisp"</span>)) (full-book-string0 (<a class="sym-link local-def" href="#def-extend-pathname" data-sym="EXTEND-PATHNAME" title="(defun extend-pathname (dir0 file-name state)
  (extend-pathname+ dir0 file-name nil state))">extend-pathname</a> dir x+ state))
              (pos0 (<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator-string_2A" data-sym="*DIRECTORY-SEPARATOR-STRING*">*directory-separator-string*</a>
                  full-book-string0
                  <span class="keyword">:from-end</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
              (dir0 (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> pos0 (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> full-book-string0 <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> pos0))))
              (len0 (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> full-book-string0))
              (len0-5 (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> len0 <span class="number">5</span>))
              (full-book-string (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (extension full-book-string0)
                  ((<a class="sym-link system" href="basis-a.html#def-string-suffixp" data-sym="STRING-SUFFIXP">string-suffixp</a> <span class="string">".lisp"</span> full-book-string0) (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> full-book-string0 <span class="number">0</span> len0-5))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                      ctx
                      <span class="string">"A file with pathname ~x0 appears to have canonical ~
                         pathname ~x1, which unfortunately does not also end ~
                         in &quot;.lisp&quot;!  Note that ACL2 requires that a book&#39;s ~
                         filename ends in &quot;.lisp&quot; even after resolving soft ~
                         links."</span>
                      x+
                      full-book-string0))))
              (familiar (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> full-book-string0 (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> pos0) len0-5)))
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> full-book-string
              (<a class="sym-link system" href="basis-a.html#def-filename-to-book-name" data-sym="FILENAME-TO-BOOK-NAME">filename-to-book-name</a> full-book-string (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
              dir0
              familiar)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          ctx
          <span class="string">"The object ~x0 was found as a book name where a string was ~
               expected."</span>
          x)
        nil
        nil
        x))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-make-include-books-absolute-1" data-defines="MAKE-INCLUDE-BOOKS-ABSOLUTE-1" data-references="CHANGEDP-2,FIRST,CHANGEDP-1,ENDP,IF,FORMS,DEFAULT-STATE-VARS,MACROEXPAND1-CMP,ERP,MACRO-BODY,GETPROPC,WITH-PROVER-TIME-LIMIT,WITH-PROVER-STEP-LIMIT,WITH-OUTPUT,WITH-GUARD-CHECKING-EVENT,WITH-CURRENT-PACKAGE,BUTLAST,APPEND,LAST,HARD,ER,OS,SET-CBD-FN-DIR,NEW-CBD,WITH-CBD,MAKE-EVENT,EXTEND-PATHNAME,CADDR,ADD-INCLUDE-BOOK-DIR!,ADD-INCLUDE-BOOK-DIR,W,FILENAME-TO-BOOK-NAME,BOOK-NAME,LET,SYSFILE-KEY,SYSFILE-FILENAME,LIST*,CONSP,IGNORE,DECLARE,PARSE-BOOK-NAME,FAMILIAR-NAME,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,STRINGP,EQUAL,ASSOC-KEYWORD,CDDR,KEYWORD-VALUE-LISTP,ASSERT$,INCLUDE-BOOK,VALUE,CONS,CDR,MAKE-INCLUDE-BOOKS-ABSOLUTE-LST,REST,PROGN,LIST,CADR,X,CHANGEDP,MV-LET,T,NOT,EQ,AND,SKIP-PROOFS,LOCAL,QUOTE,CAR,MEMBER-EQ,MV,ATOM,COND,STATE,CTX,LOCALP,NAMES,DIR,CBD,FORM,DEFUN,MUTUAL-RECURSION" data-used-by="MAKE-INCLUDE-BOOKS-ABSOLUTE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE-1">make-include-books-absolute-1</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-include-books-absolute-1" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE-1" title="(mutual-recursion
 (defun make-include-books-absolute-1 (form cbd dir names localp ctx state)
   (cond ((atom form) (mv nil form))
         ((member-eq (car form) &#39;(local skip-proofs))
          (cond ((and (eq (car form) &#39;local) (not localp)) (mv nil form))
...">make-include-books-absolute-1</a>
    (form <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> dir names localp ctx state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> form) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form) '(<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> <a class="sym-link system" href="axioms.html#def-skip-proofs" data-sym="SKIP-PROOFS">skip-proofs</a>)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> localp)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp x)
              (<a class="sym-link local-def" href="#def-make-include-books-absolute-1" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE-1" title="(mutual-recursion
 (defun make-include-books-absolute-1 (form cbd dir names localp ctx state)
   (cond ((atom form) (mv nil form))
         ((member-eq (car form) &#39;(local skip-proofs))
          (cond ((and (eq (car form) &#39;local) (not localp)) (mv nil form))
...">make-include-books-absolute-1</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)
                <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
                dir
                names
                localp
                ctx
                state)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changedp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car form) x)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form)))))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)
          (make-include-books-absolute-lst (cdr form)
            <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
            dir
            names
            localp
            ctx
            state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changedp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car form) <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form)))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:dir</span> form) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> dir)) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (stringp <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>)
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (full-book-string full-book-name
                    directory-name
                    familiar-name)
                  (<a class="sym-link local-def" href="#def-parse-book-name" data-sym="PARSE-BOOK-NAME" title="(defun parse-book-name (dir x extension ctx state)
  (cond
   ((and extension (not (equal extension &quot;.lisp&quot;)))
    (mv
     (er hard ctx &quot;Calls of parse-book-name with non-nil extension other than ~
...">parse-book-name</a> <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) nil ctx state)
                  (declare (ignore directory-name familiar-name))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp full-book-name) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                        (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
                          (<a class="sym-link system" href="basis-a.html#def-sysfile-filename" data-sym="SYSFILE-FILENAME">sysfile-filename</a> full-book-name)
                          <span class="keyword">:dir</span> (<a class="sym-link system" href="basis-a.html#def-sysfile-key" data-sym="SYSFILE-KEY">sysfile-key</a> full-book-name)
                          (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form))))
                    ((<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (equal full-book-name full-book-string)
                       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dir (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal full-book-string (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form))))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> full-book-string (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (stringp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form))
                (let ((book-name (<a class="sym-link system" href="basis-a.html#def-filename-to-book-name" data-sym="FILENAME-TO-BOOK-NAME">filename-to-book-name</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp book-name) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                        (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
                          (<a class="sym-link system" href="basis-a.html#def-sysfile-filename" data-sym="SYSFILE-FILENAME">sysfile-filename</a> book-name)
                          <span class="keyword">:dir</span> (<a class="sym-link system" href="basis-a.html#def-sysfile-key" data-sym="SYSFILE-KEY">sysfile-key</a> book-name)
                          (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form)))))))))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form)
         '(<a class="sym-link system" href="axioms.html#def-add-include-book-dir" data-sym="ADD-INCLUDE-BOOK-DIR">add-include-book-dir</a> <a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a>)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> form)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> dir)) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (stringp <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>)
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car form)
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)
                  (<a class="sym-link system" href="basis-a.html#def-filename-to-book-name" data-sym="FILENAME-TO-BOOK-NAME">filename-to-book-name</a> (<a class="sym-link local-def" href="#def-extend-pathname" data-sym="EXTEND-PATHNAME" title="(defun extend-pathname (dir0 file-name state)
  (extend-pathname+ dir0 file-name nil state))">extend-pathname</a> <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> form) state)
                    (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((book-name (<a class="sym-link system" href="basis-a.html#def-filename-to-book-name" data-sym="FILENAME-TO-BOOK-NAME">filename-to-book-name</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> form) (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp book-name) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car form) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) book-name)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form)))))))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form) names) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a>) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (stringp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form))
          (let ((new-cbd (<a class="sym-link local-def" href="#def-set-cbd-fn-dir" data-sym="SET-CBD-FN-DIR" title="(defun set-cbd-fn-dir (str os ctx state)
  (cond
   ((not (stringp str))
    (cond ((and (null str) (f-get-global &#39;boot-strap-flg state)) nil)
          (t
...">set-cbd-fn-dir</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) ctx state)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp new-cbd) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                    ctx
                    <span class="string">"A call of with-cbd has unexpectedly referenced a ~
                       directory, ~x0, that does not exist in the current ~
                       context.  The error message produced is as ~
                       follows.~|~%~@1"</span>
                    (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)
                    new-cbd)
                  form))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (stringp new-cbd)
                  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp x)
                    (<a class="sym-link local-def" href="#def-make-include-books-absolute-1" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE-1" title="(mutual-recursion
 (defun make-include-books-absolute-1 (form cbd dir names localp ctx state)
   (cond ((atom form) (mv nil form))
         ((member-eq (car form) &#39;(local skip-proofs))
          (cond ((and (eq (car form) &#39;local) (not localp)) (mv nil form))
...">make-include-books-absolute-1</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> form))
                      new-cbd
                      new-cbd
                      names
                      localp
                      ctx
                      state)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changedp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> form <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> x))))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form))))))))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form)
           '(<a class="sym-link local-def" href="#def-with-current-package" data-sym="WITH-CURRENT-PACKAGE" title="(defmacro with-current-package (pkg form)
  (let ((form form))
    `(state-global-let* ((current-package ,pkg set-current-package-state))
                        ,form)))">with-current-package</a> <a class="sym-link system" href="axioms.html#def-with-guard-checking-event" data-sym="WITH-GUARD-CHECKING-EVENT">with-guard-checking-event</a>
             <a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a>
             <a class="sym-link system" href="history-management.html#def-with-prover-step-limit" data-sym="WITH-PROVER-STEP-LIMIT">with-prover-step-limit</a>
             <a class="sym-link system" href="axioms.html#def-with-prover-time-limit" data-sym="WITH-PROVER-TIME-LIMIT">with-prover-time-limit</a>))
         (consp (cdr form))) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp x)
          (<a class="sym-link local-def" href="#def-make-include-books-absolute-1" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE-1" title="(mutual-recursion
 (defun make-include-books-absolute-1 (form cbd dir names localp ctx state)
   (cond ((atom form) (mv nil form))
         ((member-eq (car form) &#39;(local skip-proofs))
          (cond ((and (eq (car form) &#39;local) (not localp)) (mv nil form))
...">make-include-books-absolute-1</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> form))
            <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
            dir
            names
            localp
            ctx
            state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changedp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> form <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> x))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil form)))))
      ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car form) 'macro-body) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp x)
          (macroexpand1-cmp form ctx (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state) (<a class="sym-link system" href="basis-a.html#def-default-state-vars" data-sym="DEFAULT-STATE-VARS">default-state-vars</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard erp <span class="string">"~@0"</span> x) nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-make-include-books-absolute-1" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE-1" title="(mutual-recursion
 (defun make-include-books-absolute-1 (form cbd dir names localp ctx state)
   (cond ((atom form) (mv nil form))
         ((member-eq (car form) &#39;(local skip-proofs))
          (cond ((and (eq (car form) &#39;local) (not localp)) (mv nil form))
...">make-include-books-absolute-1</a> x
                <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
                dir
                names
                localp
                ctx
                state)))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
          (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            ctx
            <span class="string">"Implementation error in make-include-books-absolute-1:  ~
               unrecognized event type, ~x0.  Make-include-books-absolute ~
               needs to be kept in sync with chk-embedded-event-form.  Please ~
               send this error message to the implementors."</span>
            (car form))))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> make-include-books-absolute-lst
    (forms <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> dir names localp ctx state)
    (if (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> forms)
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil)
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp-1 <a class="sym-link system" href="axioms.html#def-first" data-sym="FIRST">first</a>)
        (<a class="sym-link local-def" href="#def-make-include-books-absolute-1" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE-1" title="(mutual-recursion
 (defun make-include-books-absolute-1 (form cbd dir names localp ctx state)
   (cond ((atom form) (mv nil form))
         ((member-eq (car form) &#39;(local skip-proofs))
          (cond ((and (eq (car form) &#39;local) (not localp)) (mv nil form))
...">make-include-books-absolute-1</a> (car forms)
          <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
          dir
          names
          localp
          ctx
          state)
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp-2 <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)
          (make-include-books-absolute-lst (cdr forms)
            <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
            dir
            names
            localp
            ctx
            state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changedp-1 (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons <a class="sym-link system" href="axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)))
            (changedp-2 (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car forms) <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil forms))))))))</pre>
  </div>

<div class="form-block function" id="def-make-include-books-absolute" data-defines="MAKE-INCLUDE-BOOKS-ABSOLUTE" data-references="IF,MAKE-INCLUDE-BOOKS-ABSOLUTE-1,NEW-FORM,CHANGEDP,MV-LET,STATE,CTX,LOCALP,NAMES,DIR,CBD,FORM,DEFUN" data-used-by="MAKE-EVENT-FN2,FIX-PORTCULLIS-CMDS1" data-part-name="MAKE-INCLUDE-BOOKS-ABSOLUTE" data-part-args="STATE,CTX,LOCALP,NAMES,DIR,CBD,FORM" data-part-body="IF,STATE,CTX,LOCALP,NAMES,DIR,CBD,FORM,MAKE-INCLUDE-BOOKS-ABSOLUTE-1,NEW-FORM,CHANGEDP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE">make-include-books-absolute</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-include-books-absolute" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE" title="(defun make-include-books-absolute (form cbd dir names localp ctx state)
  (mv-let (changedp new-form)
          (make-include-books-absolute-1 form cbd dir names localp ctx state)
          (if changedp
              new-form">make-include-books-absolute</a>
  (form <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> dir names localp ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp new-form)
    (<a class="sym-link local-def" href="#def-make-include-books-absolute-1" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE-1" title="(mutual-recursion
 (defun make-include-books-absolute-1 (form cbd dir names localp ctx state)
   (cond ((atom form) (mv nil form))
         ((member-eq (car form) &#39;(local skip-proofs))
          (cond ((and (eq (car form) &#39;local) (not localp)) (mv nil form))
...">make-include-books-absolute-1</a> form
      <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
      dir
      names
      localp
      ctx
      state)
    (if changedp
      new-form
      form)))</pre>
  </div>

<div class="form-block function" id="def-first-known-package-alist" data-defines="FIRST-KNOWN-PACKAGE-ALIST" data-references="CDR,T,HARD,ER,*ACL2-PROPERTY-UNBOUND*,IF,CDDAR,KPA,LET*,GLOBAL-VALUE,CADAR,KNOWN-PACKAGE-ALIST,QUOTE,CAAR,EQ,AND,NULL,COND,WRLD-SEGMENT,DEFUN" data-part-name="FIRST-KNOWN-PACKAGE-ALIST" data-part-args="WRLD-SEGMENT" data-part-body="CDR,T,FIRST-KNOWN-PACKAGE-ALIST,HARD,ER,*ACL2-PROPERTY-UNBOUND*,IF,CDDAR,KPA,LET*,GLOBAL-VALUE,CADAR,KNOWN-PACKAGE-ALIST,QUOTE,CAAR,EQ,AND,WRLD-SEGMENT,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIRST-KNOWN-PACKAGE-ALIST">first-known-package-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-first-known-package-alist" data-sym="FIRST-KNOWN-PACKAGE-ALIST" title="(defun first-known-package-alist (wrld-segment)
  (cond ((null wrld-segment) nil)
        ((and (eq (caar wrld-segment) &#39;known-package-alist)
              (eq (cadar wrld-segment) &#39;global-value))
         (let* ((kpa (cddar wrld-segment)))
...">first-known-package-alist</a>
  (wrld-segment)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld-segment) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld-segment) '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a>)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> wrld-segment) 'global-value)) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((kpa (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> wrld-segment)))
        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> kpa <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>)
          (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            '<a class="sym-link local-def" href="#def-first-known-package-alist" data-sym="FIRST-KNOWN-PACKAGE-ALIST" title="(defun first-known-package-alist (wrld-segment)
  (cond ((null wrld-segment) nil)
        ((and (eq (caar wrld-segment) &#39;known-package-alist)
              (eq (cadar wrld-segment) &#39;global-value))
         (let* ((kpa (cddar wrld-segment)))
...">first-known-package-alist</a>
            <span class="string">"Implementation error!  Unexpected find of unbound ~
               known-package-alist value!  Please contact the ACL2 ~
               implementors and send this message."</span>)
          kpa)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-first-known-package-alist" data-sym="FIRST-KNOWN-PACKAGE-ALIST" title="(defun first-known-package-alist (wrld-segment)
  (cond ((null wrld-segment) nil)
        ((and (eq (caar wrld-segment) &#39;known-package-alist)
              (eq (cadar wrld-segment) &#39;global-value))
         (let* ((kpa (cddar wrld-segment)))
...">first-known-package-alist</a> (cdr wrld-segment)))))</pre>
  </div>

<div class="form-block function" id="def-defpkg-items-rec" data-defines="DEFPKG-ITEMS-REC" data-references="KWOTE,TERMP,SORT-SYMBOL-LISTP,OR,NOT,AND,EQUAL,ASSERT$,LIST,CONS,SIMPLE-TRANSLATE-AND-EVAL,PAIR,ERP,MV-LET,PACKAGE-ENTRY-BOOK-PATH,BOOK-PATH,PACKAGE-ENTRY-TTERM,TTERM,CADDDR,DOC,CADDR,BODY,CADR,NAME,PACKAGE-ENTRY-DEFPKG-EVENT-FORM,EVENT,PACKAGE-ENTRY-IMPORTS,IMPORTS,CDR,FIND-PACKAGE-ENTRY,PACKAGE-ENTRY-NAME,N,CAR,E,LET*,T,VALUE,ENDP,COND,ACC,STATE,W,CTX,OLD-KPA,NEW-KPA,DEFUN" data-used-by="DEFPKG-ITEMS" data-part-name="DEFPKG-ITEMS-REC" data-part-args="ACC,STATE,W,CTX,OLD-KPA,NEW-KPA" data-part-body="KWOTE,TERMP,SORT-SYMBOL-LISTP,OR,NOT,AND,EQUAL,ASSERT$,LIST,CONS,SIMPLE-TRANSLATE-AND-EVAL,PAIR,ERP,MV-LET,PACKAGE-ENTRY-BOOK-PATH,BOOK-PATH,PACKAGE-ENTRY-TTERM,TTERM,CADDDR,DOC,CADDR,BODY,CADR,NAME,PACKAGE-ENTRY-DEFPKG-EVENT-FORM,EVENT,PACKAGE-ENTRY-IMPORTS,IMPORTS,STATE,W,CTX,CDR,DEFPKG-ITEMS-REC,OLD-KPA,FIND-PACKAGE-ENTRY,PACKAGE-ENTRY-NAME,N,CAR,E,LET*,T,ACC,VALUE,NEW-KPA,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFPKG-ITEMS-REC">defpkg-items-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defpkg-items-rec" data-sym="DEFPKG-ITEMS-REC" title="(defun defpkg-items-rec (new-kpa old-kpa ctx w state acc)
  (cond ((endp new-kpa) (value acc))
        (t
         (let* ((e (car new-kpa)) (n (package-entry-name e)))
           (cond
...">defpkg-items-rec</a>
  (new-kpa old-kpa ctx <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> new-kpa) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> acc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((e (car new-kpa)) (n (<a class="sym-link system" href="axioms.html#def-package-entry-name" data-sym="PACKAGE-ENTRY-NAME">package-entry-name</a> e)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-find-package-entry" data-sym="FIND-PACKAGE-ENTRY">find-package-entry</a> n old-kpa) (<a class="sym-link local-def" href="#def-defpkg-items-rec" data-sym="DEFPKG-ITEMS-REC" title="(defun defpkg-items-rec (new-kpa old-kpa ctx w state acc)
  (cond ((endp new-kpa) (value acc))
        (t
         (let* ((e (car new-kpa)) (n (package-entry-name e)))
           (cond
...">defpkg-items-rec</a> (cdr new-kpa) old-kpa ctx <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state acc))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((imports (<a class="sym-link system" href="axioms.html#def-package-entry-imports" data-sym="PACKAGE-ENTRY-IMPORTS">package-entry-imports</a> e)) (event (<a class="sym-link system" href="axioms.html#def-package-entry-defpkg-event-form" data-sym="PACKAGE-ENTRY-DEFPKG-EVENT-FORM">package-entry-defpkg-event-form</a> e))
                (name (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> event))
                (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> event))
                (<a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> event))
                (tterm (<a class="sym-link system" href="axioms.html#def-package-entry-tterm" data-sym="PACKAGE-ENTRY-TTERM">package-entry-tterm</a> e))
                (book-path (<a class="sym-link system" href="axioms.html#def-package-entry-book-path" data-sym="PACKAGE-ENTRY-BOOK-PATH">package-entry-book-path</a> e)))
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp pair state)
                (simple-translate-and-eval <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>
                  nil
                  nil
                  <span class="string">"The second argument to defpkg"</span>
                  ctx
                  <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                  state
                  nil)
                (<a class="sym-link local-def" href="#def-defpkg-items-rec" data-sym="DEFPKG-ITEMS-REC" title="(defun defpkg-items-rec (new-kpa old-kpa ctx w state acc)
  (cond ((endp new-kpa) (value acc))
        (t
         (let* ((e (car new-kpa)) (n (package-entry-name e)))
           (cond
...">defpkg-items-rec</a> (cdr new-kpa)
                  old-kpa
                  ctx
                  <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                  state
                  (cons (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name
                      imports
                      (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> event
                        (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (equal n name)
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> erp)
                               (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal (cdr pair) imports)
                                 (equal (sort-symbol-listp (cdr pair)) imports))
                               (equal tterm (car pair))) <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
                            ((termp tterm <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) tterm)
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> imports)))))
                      <a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a>
                      book-path)
                    acc))))))))))</pre>
  </div>

<div class="form-block function" id="def-new-defpkg-p" data-defines="NEW-DEFPKG-P" data-references="CDR,CAR,PACKAGE-ENTRY-NAME,FIND-PACKAGE-ENTRY,NOT,OR,T,ENDP,COND,OLD-KPA,NEW-KPA,DEFUN" data-used-by="DEFPKG-ITEMS" data-part-name="NEW-DEFPKG-P" data-part-args="OLD-KPA,NEW-KPA" data-part-body="CDR,NEW-DEFPKG-P,OLD-KPA,CAR,PACKAGE-ENTRY-NAME,FIND-PACKAGE-ENTRY,NOT,OR,T,NEW-KPA,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEW-DEFPKG-P">new-defpkg-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-new-defpkg-p" data-sym="NEW-DEFPKG-P" title="(defun new-defpkg-p (new-kpa old-kpa)
  (cond ((endp new-kpa) nil)
        (t
         (or
          (not (find-package-entry (package-entry-name (car new-kpa)) old-kpa))">new-defpkg-p</a>
  (new-kpa old-kpa)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> new-kpa) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-find-package-entry" data-sym="FIND-PACKAGE-ENTRY">find-package-entry</a> (<a class="sym-link system" href="axioms.html#def-package-entry-name" data-sym="PACKAGE-ENTRY-NAME">package-entry-name</a> (car new-kpa))
            old-kpa))
        (<a class="sym-link local-def" href="#def-new-defpkg-p" data-sym="NEW-DEFPKG-P" title="(defun new-defpkg-p (new-kpa old-kpa)
  (cond ((endp new-kpa) nil)
        (t
         (or
          (not (find-package-entry (package-entry-name (car new-kpa)) old-kpa))">new-defpkg-p</a> (cdr new-kpa) old-kpa)))))</pre>
  </div>

<div class="form-block function" id="def-defpkg-items" data-defines="DEFPKG-ITEMS" data-references="VALUE,NULL,ASSERT$,DEFPKG-ITEMS-REC,VAL,ERP,MV-LET,T,INHIBIT-ER-HARD,F-GET-GLOBAL,ERROR,QUOTE,CONS,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,NEW-DEFPKG-P,COND,STATE,W,CTX,OLD-KPA,NEW-KPA,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+,NEW-DEFPKG-LIST,NEW-DEFPKG-LIST1" data-part-name="DEFPKG-ITEMS" data-part-args="STATE,W,CTX,OLD-KPA,NEW-KPA" data-part-body="VALUE,NULL,ASSERT$,W,CTX,DEFPKG-ITEMS-REC,VAL,ERP,MV-LET,T,INHIBIT-ER-HARD,STATE,F-GET-GLOBAL,ERROR,QUOTE,CONS,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,OLD-KPA,NEW-KPA,NEW-DEFPKG-P,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFPKG-ITEMS">defpkg-items</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a>
  (new-kpa old-kpa ctx <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-new-defpkg-p" data-sym="NEW-DEFPKG-P" title="(defun new-defpkg-p (new-kpa old-kpa)
  (cond ((endp new-kpa) nil)
        (t
         (or
          (not (find-package-entry (package-entry-name (car new-kpa)) old-kpa))">new-defpkg-p</a> new-kpa old-kpa) (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (cons 'error (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state))) (<a class="sym-link system" href="axioms.html#def-inhibit-er-hard" data-sym="INHIBIT-ER-HARD">inhibit-er-hard</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          (<a class="sym-link local-def" href="#def-defpkg-items-rec" data-sym="DEFPKG-ITEMS-REC" title="(defun defpkg-items-rec (new-kpa old-kpa ctx w state acc)
  (cond ((endp new-kpa) (value acc))
        (t
         (let* ((e (car new-kpa)) (n (package-entry-name e)))
           (cond
...">defpkg-items-rec</a> new-kpa old-kpa ctx <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state nil)
          (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> erp) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-new-defpkg-list2" data-defines="NEW-DEFPKG-LIST2" data-references="CONS,ITEM,CDR,ASSOC-EQUAL,OR,CAR,SYMBOL-PACKAGE-NAME,P,LET,T,ENDP,COND,SEEN,ACC,ALL-DEFPKG-ITEMS,IMPORTS,DEFUN" data-used-by="NEW-DEFPKG-LIST1" data-part-name="NEW-DEFPKG-LIST2" data-part-args="SEEN,ACC,ALL-DEFPKG-ITEMS,IMPORTS" data-part-body="CONS,ITEM,ALL-DEFPKG-ITEMS,CDR,NEW-DEFPKG-LIST2,SEEN,ASSOC-EQUAL,OR,CAR,SYMBOL-PACKAGE-NAME,P,LET,T,ACC,IMPORTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEW-DEFPKG-LIST2">new-defpkg-list2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-new-defpkg-list2" data-sym="NEW-DEFPKG-LIST2" title="(defun new-defpkg-list2 (imports all-defpkg-items acc seen)
  (cond ((endp imports) acc)
        (t
         (let ((p (symbol-package-name (car imports))))
           (cond
...">new-defpkg-list2</a>
  (imports all-defpkg-items acc seen)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> imports) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((p (symbol-package-name (car imports))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> p acc) (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> p seen)) (<a class="sym-link local-def" href="#def-new-defpkg-list2" data-sym="NEW-DEFPKG-LIST2" title="(defun new-defpkg-list2 (imports all-defpkg-items acc seen)
  (cond ((endp imports) acc)
        (t
         (let ((p (symbol-package-name (car imports))))
           (cond
...">new-defpkg-list2</a> (cdr imports) all-defpkg-items acc seen))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((item (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> p all-defpkg-items)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (item (<a class="sym-link local-def" href="#def-new-defpkg-list2" data-sym="NEW-DEFPKG-LIST2" title="(defun new-defpkg-list2 (imports all-defpkg-items acc seen)
  (cond ((endp imports) acc)
        (t
         (let ((p (symbol-package-name (car imports))))
           (cond
...">new-defpkg-list2</a> (cdr imports)
                    all-defpkg-items
                    (cons item acc)
                    seen))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-new-defpkg-list2" data-sym="NEW-DEFPKG-LIST2" title="(defun new-defpkg-list2 (imports all-defpkg-items acc seen)
  (cond ((endp imports) acc)
        (t
         (let ((p (symbol-package-name (car imports))))
           (cond
...">new-defpkg-list2</a> (cdr imports) all-defpkg-items acc seen))))))))))</pre>
  </div>

<div class="form-block function" id="def-make-hidden-defpkg" data-defines="MAKE-HIDDEN-DEFPKG" data-references="T,DEFPKG,QUASIQUOTE,CADDR,BOOK-PATH,CADR,DOC,CAR,IMPORTS,LET,IMPORTS/DOC/BOOK-PATH,NAME,DEFUN" data-used-by="NEW-DEFPKG-LIST1" data-part-name="MAKE-HIDDEN-DEFPKG" data-part-args="IMPORTS/DOC/BOOK-PATH,NAME" data-part-body="T,DEFPKG,QUASIQUOTE,CADDR,BOOK-PATH,CADR,DOC,IMPORTS/DOC/BOOK-PATH,CAR,IMPORTS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-HIDDEN-DEFPKG">make-hidden-defpkg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-hidden-defpkg" data-sym="MAKE-HIDDEN-DEFPKG" title="(defun make-hidden-defpkg (name imports/doc/book-path)
  (let ((imports (car imports/doc/book-path))
        (doc (cadr imports/doc/book-path))
        (book-path (caddr imports/doc/book-path)))
    `(defpkg ,name ,imports ,doc ,book-path t)))">make-hidden-defpkg</a>
  (name imports/doc/book-path)
  (let ((imports (car imports/doc/book-path)) (<a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> imports/doc/book-path))
      (book-path (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> imports/doc/book-path)))
    `(<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> ,NAME ,IMPORTS ,DOC ,BOOK-PATH <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block function" id="def-new-defpkg-list1" data-defines="NEW-DEFPKG-LIST1" data-references="CADR,NEW-DEFPKG-LIST2,CDDR,MAKE-HIDDEN-DEFPKG,CONS,FIND-PACKAGE-ENTRY,NAME,CAR,ITEM,CDR,LET*,T,ENDP,COND,ADDED-DEFPKGS,EARLIER-KPA,BASE-KPA,ALL-DEFPKG-ITEMS,DEFPKG-ITEMS,DEFUN" data-used-by="NEW-DEFPKG-LIST" data-part-name="NEW-DEFPKG-LIST1" data-part-args="ADDED-DEFPKGS,EARLIER-KPA,BASE-KPA,ALL-DEFPKG-ITEMS,DEFPKG-ITEMS" data-part-body="CADR,NEW-DEFPKG-LIST2,CDDR,MAKE-HIDDEN-DEFPKG,CONS,FIND-PACKAGE-ENTRY,NAME,CAR,ITEM,EARLIER-KPA,BASE-KPA,ALL-DEFPKG-ITEMS,CDR,NEW-DEFPKG-LIST1,LET*,T,ADDED-DEFPKGS,DEFPKG-ITEMS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEW-DEFPKG-LIST1">new-defpkg-list1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-new-defpkg-list1" data-sym="NEW-DEFPKG-LIST1" title="(defun new-defpkg-list1
       (defpkg-items all-defpkg-items base-kpa earlier-kpa added-defpkgs)
  (cond ((endp defpkg-items) added-defpkgs)
        (t
         (let* ((added-defpkgs
...">new-defpkg-list1</a>
  (<a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a> all-defpkg-items
    base-kpa
    earlier-kpa
    added-defpkgs)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a>) added-defpkgs)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((added-defpkgs (<a class="sym-link local-def" href="#def-new-defpkg-list1" data-sym="NEW-DEFPKG-LIST1" title="(defun new-defpkg-list1
       (defpkg-items all-defpkg-items base-kpa earlier-kpa added-defpkgs)
  (cond ((endp defpkg-items) added-defpkgs)
        (t
         (let* ((added-defpkgs
...">new-defpkg-list1</a> (cdr <a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a>)
             all-defpkg-items
             base-kpa
             earlier-kpa
             added-defpkgs)) (item (car <a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a>))
          (name (car item)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-find-package-entry" data-sym="FIND-PACKAGE-ENTRY">find-package-entry</a> name base-kpa) added-defpkgs)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-make-hidden-defpkg" data-sym="MAKE-HIDDEN-DEFPKG" title="(defun make-hidden-defpkg (name imports/doc/book-path)
  (let ((imports (car imports/doc/book-path))
        (doc (cadr imports/doc/book-path))
        (book-path (caddr imports/doc/book-path)))
    `(defpkg ,name ,imports ,doc ,book-path t)))">make-hidden-defpkg</a> name (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> item))
              (<a class="sym-link local-def" href="#def-new-defpkg-list1" data-sym="NEW-DEFPKG-LIST1" title="(defun new-defpkg-list1
       (defpkg-items all-defpkg-items base-kpa earlier-kpa added-defpkgs)
  (cond ((endp defpkg-items) added-defpkgs)
        (t
         (let* ((added-defpkgs
...">new-defpkg-list1</a> (<a class="sym-link local-def" href="#def-new-defpkg-list2" data-sym="NEW-DEFPKG-LIST2" title="(defun new-defpkg-list2 (imports all-defpkg-items acc seen)
  (cond ((endp imports) acc)
        (t
         (let ((p (symbol-package-name (car imports))))
           (cond
...">new-defpkg-list2</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> item)
                  all-defpkg-items
                  nil
                  added-defpkgs)
                all-defpkg-items
                earlier-kpa
                earlier-kpa
                added-defpkgs))))))))</pre>
  </div>

<div class="form-block function" id="def-new-defpkg-list" data-defines="NEW-DEFPKG-LIST" data-references="NEW-DEFPKG-LIST1,REMOVE-DUPLICATES-EQUAL,REVERSE,T,NULL,COND,EARLIER-KPA,BASE-KPA,DEFPKG-ITEMS,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="NEW-DEFPKG-LIST" data-part-args="EARLIER-KPA,BASE-KPA,DEFPKG-ITEMS" data-part-body="EARLIER-KPA,BASE-KPA,NEW-DEFPKG-LIST1,REMOVE-DUPLICATES-EQUAL,REVERSE,T,DEFPKG-ITEMS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEW-DEFPKG-LIST">new-defpkg-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-new-defpkg-list" data-sym="NEW-DEFPKG-LIST" title="(defun new-defpkg-list (defpkg-items base-kpa earlier-kpa)
  (cond ((null defpkg-items) nil)
        (t
         (reverse
          (remove-duplicates-equal
...">new-defpkg-list</a>
  (<a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a> base-kpa earlier-kpa)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a>) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (<a class="sym-link system" href="axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> (<a class="sym-link local-def" href="#def-new-defpkg-list1" data-sym="NEW-DEFPKG-LIST1" title="(defun new-defpkg-list1
       (defpkg-items all-defpkg-items base-kpa earlier-kpa added-defpkgs)
  (cond ((endp defpkg-items) added-defpkgs)
        (t
         (let* ((added-defpkgs
...">new-defpkg-list1</a> <a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a>
            <a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a>
            base-kpa
            earlier-kpa
            nil))))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-term-ignore-okp" data-defines="TERM-IGNORE-OKP" data-references="CDR,CAR,ENDP,LAMBDA-BODY,ALL-VARS,LAMBDA-FORMALS,SET-DIFFERENCE-EQ,NULL,AND,FARGS,TERM-LIST-IGNORE-OKP,FFN-SYMB,SYMBOLP,T,FQUOTEP,ATOM,OR,COND,X,DEFUN,MUTUAL-RECURSION" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TERM-IGNORE-OKP">term-ignore-okp</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-term-ignore-okp" data-sym="TERM-IGNORE-OKP" title="(mutual-recursion
 (defun term-ignore-okp (x)
   (cond ((or (atom x) (fquotep x)) t)
         ((symbolp (ffn-symb x)) (term-list-ignore-okp (fargs x)))
         (t
...">term-ignore-okp</a>
    (x)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> x)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      ((symbolp (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> x)) (term-list-ignore-okp (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> x)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> x))
              (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> (<a class="sym-link system" href="basis-b.html#def-lambda-body" data-sym="LAMBDA-BODY">lambda-body</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> x)))))
          (term-list-ignore-okp (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> x))))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> term-list-ignore-okp
    (x)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> x) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      ((<a class="sym-link local-def" href="#def-term-ignore-okp" data-sym="TERM-IGNORE-OKP" title="(mutual-recursion
 (defun term-ignore-okp (x)
   (cond ((or (atom x) (fquotep x)) t)
         ((symbolp (ffn-symb x)) (term-list-ignore-okp (fargs x)))
         (t
...">term-ignore-okp</a> (car x)) (term-list-ignore-okp (cdr x)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-hidden-defpkg-events1" data-defines="HIDDEN-DEFPKG-EVENTS1" data-references="DEFPKG,QUASIQUOTE,CONS,SIMPLE-TRANSLATE-AND-EVAL,PAIR,ERP,MV-LET,PACKAGE-ENTRY-BOOK-PATH,BOOK-PATH,PACKAGE-ENTRY-TTERM,TTERM,CADDDR,DOC,CADDR,BODY,CADR,NAME,PACKAGE-ENTRY-DEFPKG-EVENT-FORM,EVENT,PACKAGE-ENTRY-IMPORTS,IMPORTS,PACKAGE-ENTRY-NAME,N,E,LET*,T,CDR,CAR,PACKAGE-ENTRY-HIDDEN-P,NOT,REVERSE,VALUE,ENDP,COND,ACC,STATE,CTX,W,KPA,DEFUN" data-used-by="HIDDEN-DEFPKG-EVENTS" data-part-name="HIDDEN-DEFPKG-EVENTS1" data-part-args="ACC,STATE,CTX,W,KPA" data-part-body="DEFPKG,QUASIQUOTE,CONS,SIMPLE-TRANSLATE-AND-EVAL,PAIR,ERP,MV-LET,PACKAGE-ENTRY-BOOK-PATH,BOOK-PATH,PACKAGE-ENTRY-TTERM,TTERM,CADDDR,DOC,CADDR,BODY,CADR,NAME,PACKAGE-ENTRY-DEFPKG-EVENT-FORM,EVENT,PACKAGE-ENTRY-IMPORTS,IMPORTS,PACKAGE-ENTRY-NAME,N,E,LET*,T,STATE,CTX,W,CDR,HIDDEN-DEFPKG-EVENTS1,CAR,PACKAGE-ENTRY-HIDDEN-P,NOT,ACC,REVERSE,VALUE,KPA,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HIDDEN-DEFPKG-EVENTS1">hidden-defpkg-events1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hidden-defpkg-events1" data-sym="HIDDEN-DEFPKG-EVENTS1" title="(defun hidden-defpkg-events1 (kpa w ctx state acc)
  (cond ((endp kpa) (value (reverse acc)))
        ((not (package-entry-hidden-p (car kpa)))
         (hidden-defpkg-events1 (cdr kpa) w ctx state acc))
        (t
...">hidden-defpkg-events1</a>
  (kpa <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> ctx state acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> kpa) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc)))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> (car kpa))) (<a class="sym-link local-def" href="#def-hidden-defpkg-events1" data-sym="HIDDEN-DEFPKG-EVENTS1" title="(defun hidden-defpkg-events1 (kpa w ctx state acc)
  (cond ((endp kpa) (value (reverse acc)))
        ((not (package-entry-hidden-p (car kpa)))
         (hidden-defpkg-events1 (cdr kpa) w ctx state acc))
        (t
...">hidden-defpkg-events1</a> (cdr kpa) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> ctx state acc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((e (car kpa)) (n (<a class="sym-link system" href="axioms.html#def-package-entry-name" data-sym="PACKAGE-ENTRY-NAME">package-entry-name</a> e))
          (imports (<a class="sym-link system" href="axioms.html#def-package-entry-imports" data-sym="PACKAGE-ENTRY-IMPORTS">package-entry-imports</a> e))
          (event (<a class="sym-link system" href="axioms.html#def-package-entry-defpkg-event-form" data-sym="PACKAGE-ENTRY-DEFPKG-EVENT-FORM">package-entry-defpkg-event-form</a> e))
          (name (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> event))
          (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> event))
          (<a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> event))
          (tterm (<a class="sym-link system" href="axioms.html#def-package-entry-tterm" data-sym="PACKAGE-ENTRY-TTERM">package-entry-tterm</a> e))
          (book-path (<a class="sym-link system" href="axioms.html#def-package-entry-book-path" data-sym="PACKAGE-ENTRY-BOOK-PATH">package-entry-book-path</a> e)))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp pair state)
          (simple-translate-and-eval <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>
            nil
            nil
            <span class="string">"The second argument to defpkg"</span>
            ctx
            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
            state
            nil)
          (<a class="sym-link local-def" href="#def-hidden-defpkg-events1" data-sym="HIDDEN-DEFPKG-EVENTS1" title="(defun hidden-defpkg-events1 (kpa w ctx state acc)
  (cond ((endp kpa) (value (reverse acc)))
        ((not (package-entry-hidden-p (car kpa)))
         (hidden-defpkg-events1 (cdr kpa) w ctx state acc))
        (t
...">hidden-defpkg-events1</a> (cdr kpa)
            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
            ctx
            state
            (cons `(<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> ,NAME
                ,(ASSERT$ EVENT
          (ASSERT$ (EQUAL N NAME)
                   (COND
                    ((AND (NOT ERP)
                          (OR (EQUAL (CDR PAIR) IMPORTS)
                              (EQUAL (SORT-SYMBOL-LISTP (CDR PAIR)) IMPORTS))
                          (EQUAL TTERM (CAR PAIR)))
                     (IF (TERM-IGNORE-OKP TTERM)
                         BODY
                         (KWOTE IMPORTS)))
                    ((AND (TERMP TTERM W) (TERM-IGNORE-OKP TTERM)) TTERM)
                    (T (KWOTE IMPORTS)))))
                ,DOC
                ,BOOK-PATH
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              acc)))))))</pre>
  </div>

<div class="form-block function" id="def-hidden-defpkg-events" data-defines="HIDDEN-DEFPKG-EVENTS" data-references="HIDDEN-DEFPKG-EVENTS1,*VALID-OUTPUT-NAMES*,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,STATE,CTX,W,KPA,DEFUN" data-used-by="FIX-PORTCULLIS-CMDS" data-part-name="HIDDEN-DEFPKG-EVENTS" data-part-args="STATE,CTX,W,KPA" data-part-body="STATE,CTX,W,KPA,HIDDEN-DEFPKG-EVENTS1,*VALID-OUTPUT-NAMES*,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HIDDEN-DEFPKG-EVENTS">hidden-defpkg-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hidden-defpkg-events" data-sym="HIDDEN-DEFPKG-EVENTS" title="(defun hidden-defpkg-events (kpa w ctx state)
  (state-global-let* ((inhibit-output-lst *valid-output-names*))
                     (hidden-defpkg-events1 kpa w ctx state nil)))">hidden-defpkg-events</a>
  (kpa <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst <a class="sym-link system" href="axioms.html#def-_2Avalid-output-names_2A" data-sym="*VALID-OUTPUT-NAMES*">*valid-output-names*</a>))
    (<a class="sym-link local-def" href="#def-hidden-defpkg-events1" data-sym="HIDDEN-DEFPKG-EVENTS1" title="(defun hidden-defpkg-events1 (kpa w ctx state acc)
  (cond ((endp kpa) (value (reverse acc)))
        ((not (package-entry-hidden-p (car kpa)))
         (hidden-defpkg-events1 (cdr kpa) w ctx state acc))
        (t
...">hidden-defpkg-events1</a> kpa <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> ctx state nil)))</pre>
  </div>

<div class="form-block function" id="def-fix-portcullis-cmds1" data-defines="FIX-PORTCULLIS-CMDS1" data-references="CONS,CDR,CAR,MAKE-INCLUDE-BOOKS-ABSOLUTE,CMD,LET,T,NULL,COND,STATE,CTX,NAMES,ANS,CBDS,CMDS,DIR,DEFUN" data-used-by="FIX-PORTCULLIS-CMDS" data-part-name="FIX-PORTCULLIS-CMDS1" data-part-args="STATE,CTX,NAMES,ANS,CBDS,CMDS,DIR" data-part-body="CONS,CDR,FIX-PORTCULLIS-CMDS1,STATE,CTX,NAMES,DIR,CBDS,CAR,MAKE-INCLUDE-BOOKS-ABSOLUTE,CMD,LET,T,ANS,CMDS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-PORTCULLIS-CMDS1">fix-portcullis-cmds1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-portcullis-cmds1" data-sym="FIX-PORTCULLIS-CMDS1" title="(defun fix-portcullis-cmds1 (dir cmds cbds ans names ctx state)
  (cond ((null cmds) ans)
        (t
         (let ((cmd
                (make-include-books-absolute (car cmds) (car cbds) dir names
...">fix-portcullis-cmds1</a>
  (dir cmds cbds ans names ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> cmds) ans)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((cmd (<a class="sym-link local-def" href="#def-make-include-books-absolute" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE" title="(defun make-include-books-absolute (form cbd dir names localp ctx state)
  (mv-let (changedp new-form)
          (make-include-books-absolute-1 form cbd dir names localp ctx state)
          (if changedp
              new-form">make-include-books-absolute</a> (car cmds)
             (car cbds)
             dir
             names
             nil
             ctx
             state)))
        (<a class="sym-link local-def" href="#def-fix-portcullis-cmds1" data-sym="FIX-PORTCULLIS-CMDS1" title="(defun fix-portcullis-cmds1 (dir cmds cbds ans names ctx state)
  (cond ((null cmds) ans)
        (t
         (let ((cmd
                (make-include-books-absolute (car cmds) (car cbds) dir names
...">fix-portcullis-cmds1</a> dir
          (cdr cmds)
          (cdr cbds)
          (cons cmd ans)
          names
          ctx
          state)))))</pre>
  </div>

<div class="form-block function" id="def-fix-portcullis-cmds" data-defines="FIX-PORTCULLIS-CMDS" data-references="REVAPPEND,VALUE,KNOWN-PACKAGE-ALIST,QUOTE,GLOBAL-VAL,HIDDEN-DEFPKG-EVENTS,NEW-DEFPKGS,ER-LET*,FIX-PORTCULLIS-CMDS1,NEW-CMDS,LET,STATE,CTX,WRLD,NAMES,CBDS,CMDS,DIR,DEFUN" data-used-by="CHK-ACCEPTABLE-CERTIFY-BOOK1" data-part-name="FIX-PORTCULLIS-CMDS" data-part-args="STATE,CTX,WRLD,NAMES,CBDS,CMDS,DIR" data-part-body="REVAPPEND,VALUE,WRLD,KNOWN-PACKAGE-ALIST,QUOTE,GLOBAL-VAL,HIDDEN-DEFPKG-EVENTS,NEW-DEFPKGS,ER-LET*,STATE,CTX,NAMES,CBDS,CMDS,DIR,FIX-PORTCULLIS-CMDS1,NEW-CMDS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-PORTCULLIS-CMDS">fix-portcullis-cmds</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-portcullis-cmds" data-sym="FIX-PORTCULLIS-CMDS" title="(defun fix-portcullis-cmds (dir cmds cbds names wrld ctx state)
  (let ((new-cmds (fix-portcullis-cmds1 dir cmds cbds nil names ctx state)))
    (er-let*
     ((new-defpkgs
       (hidden-defpkg-events (global-val &#39;known-package-alist wrld) wrld ctx
...">fix-portcullis-cmds</a>
  (dir cmds cbds names wrld ctx state)
  (let ((new-cmds (<a class="sym-link local-def" href="#def-fix-portcullis-cmds1" data-sym="FIX-PORTCULLIS-CMDS1" title="(defun fix-portcullis-cmds1 (dir cmds cbds ans names ctx state)
  (cond ((null cmds) ans)
        (t
         (let ((cmd
                (make-include-books-absolute (car cmds) (car cbds) dir names
...">fix-portcullis-cmds1</a> dir cmds cbds nil names ctx state)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((new-defpkgs (<a class="sym-link local-def" href="#def-hidden-defpkg-events" data-sym="HIDDEN-DEFPKG-EVENTS" title="(defun hidden-defpkg-events (kpa w ctx state)
  (state-global-let* ((inhibit-output-lst *valid-output-names*))
                     (hidden-defpkg-events1 kpa w ctx state nil)))">hidden-defpkg-events</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> wrld)
           wrld
           ctx
           state)))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> new-cmds new-defpkgs)))))</pre>
  </div>

<div class="form-block function" id="def-collect-uncertified-books" data-defines="COLLECT-UNCERTIFIED-BOOKS" data-references="T,CDR,CAAR,CONS,CAR,CDDDDR,NULL,COND,ALIST,DEFUN" data-used-by="CHK-ACCEPTABLE-CERTIFY-BOOK1" data-part-name="COLLECT-UNCERTIFIED-BOOKS" data-part-args="ALIST" data-part-body="T,CDR,COLLECT-UNCERTIFIED-BOOKS,CAAR,CONS,CAR,CDDDDR,ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-UNCERTIFIED-BOOKS">collect-uncertified-books</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-uncertified-books" data-sym="COLLECT-UNCERTIFIED-BOOKS" title="(defun collect-uncertified-books (alist)
  (cond ((null alist) nil)
        ((null (cddddr (car alist)))
         (cons (caar alist) (collect-uncertified-books (cdr alist))))
        (t (collect-uncertified-books (cdr alist)))))">collect-uncertified-books</a>
  (alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> alist) nil)
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> (car alist))) (cons (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) (<a class="sym-link local-def" href="#def-collect-uncertified-books" data-sym="COLLECT-UNCERTIFIED-BOOKS" title="(defun collect-uncertified-books (alist)
  (cond ((null alist) nil)
        ((null (cddddr (car alist)))
         (cons (caar alist) (collect-uncertified-books (cdr alist))))
        (t (collect-uncertified-books (cdr alist)))))">collect-uncertified-books</a> (cdr alist))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-collect-uncertified-books" data-sym="COLLECT-UNCERTIFIED-BOOKS" title="(defun collect-uncertified-books (alist)
  (cond ((null alist) nil)
        ((null (cddddr (car alist)))
         (cons (caar alist) (collect-uncertified-books (cdr alist))))
        (t (collect-uncertified-books (cdr alist)))))">collect-uncertified-books</a> (cdr alist)))))</pre>
  </div>

<div class="form-block function" id="def-chk-in-package" data-defines="CHK-IN-PACKAGE" data-references="MSG,W,INCLUDE-BOOK-PATH,GLOBAL-VAL,IF,STRIP-NON-HIDDEN-PACKAGE-NAMES,&,TILDE-*-&V-STRINGS,KNOWN-PACKAGE-ALIST,FIND-NON-HIDDEN-PACKAGE-ENTRY,CADR,STRINGP,IN-PACKAGE,QUOTE,CAR,EQ,LENGTH,=,TRUE-LISTP,AND,SOFT,ER,T,VALUE,COND,READ-OBJECT,VAL,EOFP,MV-LET,CURRENT-PACKAGE,STATE-GLOBAL-LET*,STATE,CTX,EMPTY-OKP,FILE,CHANNEL,DEFUN" data-used-by="EVAL-PORT-FILE,READ-OBJECT-FILE,CHK-CERTIFICATE-FILE" data-part-name="CHK-IN-PACKAGE" data-part-args="STATE,CTX,EMPTY-OKP,FILE,CHANNEL" data-part-body="MSG,W,INCLUDE-BOOK-PATH,GLOBAL-VAL,IF,STRIP-NON-HIDDEN-PACKAGE-NAMES,&,TILDE-*-&V-STRINGS,KNOWN-PACKAGE-ALIST,FIND-NON-HIDDEN-PACKAGE-ENTRY,CADR,STRINGP,IN-PACKAGE,QUOTE,CAR,EQ,LENGTH,=,TRUE-LISTP,AND,FILE,CTX,SOFT,ER,T,VALUE,EMPTY-OKP,COND,CHANNEL,READ-OBJECT,STATE,VAL,EOFP,MV-LET,CURRENT-PACKAGE,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-IN-PACKAGE">chk-in-package</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-in-package" data-sym="CHK-IN-PACKAGE" title="(defun chk-in-package (channel file empty-okp ctx state)
  (state-global-let* ((current-package &quot;ACL2&quot;))
                     (mv-let (eofp val state) (read-object channel state)
                             (cond
                              (eofp
...">chk-in-package</a>
  (channel file empty-okp ctx state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp val state)
      (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> channel state)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (empty-okp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The file ~x0 is empty.  An IN-PACKAGE form, ~
                                at the very least, was expected."</span>
                file))))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val)
           (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> val) <span class="number">2</span>)
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car val) '<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a>)
           (stringp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-find-non-hidden-package-entry" data-sym="FIND-NON-HIDDEN-PACKAGE-ENTRY">find-non-hidden-package-entry</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val)
               (<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The argument to IN-PACKAGE must be a known ~
                      package name, but ~x0, used in the first form ~
                      in ~x1, is not.  The known packages are ~*2~@3"</span>
                (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> val)
                file
                (<a class="sym-link system" href="basis-a.html#def-tilde-_2A-_26v-strings" data-sym="TILDE-*-&amp;V-STRINGS">tilde-*-&amp;v-strings</a> '&amp;
                  (<a class="sym-link system" href="defuns.html#def-strip-non-hidden-package-names" data-sym="STRIP-NON-HIDDEN-PACKAGE-NAMES">strip-non-hidden-package-names</a> (<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> state))
                  #\.)
                (if (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-path (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~%NOTE: This error might be eliminated by ~
                               certifying the book mentioned above.  See :DOC ~
                               certify-book."</span>)
                  <span class="string">""</span>)))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The first form in ~x0 was expected to be ~
                    (IN-PACKAGE &quot;pkg&quot;) where &quot;pkg&quot; is a known ~
                    ACL2 package name.  See :DOC book-contents.  The first ~
                    form was, in fact, ~x1."</span>
            file
            val))))))</pre>
  </div>

<div class="form-block macro" id="def-ill-formed-certificate-er" data-defines="ILL-FORMED-CERTIFICATE-ER" data-references="SOFT,ER,QUASIQUOTE,BAD-OBJECTP,QUOTE,BAD-OBJECT,&OPTIONAL,FILE2,FILE1,MARK,CTX,DEFMACRO" data-used-by="CHK-CERTIFICATE-FILE,CHK-CERTIFICATE-FILE1,CHK-RAISE-PORTCULLIS,CHK-RAISE-PORTCULLIS2,GET-CMDS-FROM-PORTCULLIS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ILL-FORMED-CERTIFICATE-ER">ill-formed-certificate-er</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a>
  (ctx mark
    file1
    file2
    &amp;optional
    (bad-object 'nil bad-objectp))
  `(<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
    ,CTX
    <span class="string">"The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
       ~x0 is described in the portcullis of ~x1 (see :DOC portcullis) so you ~
       might want to look at ~x1 to remind yourself of ~x0&#39;s certification~ ~
       world.~|Debug note for developers:~|~@2~@3"</span>
    ,FILE1
    ,FILE2
    ,(IF (AND (CONSP MARK) (EQ (CAR MARK) &#39;QUOTE) (SYMBOLP (CADR MARK)))
     (SYMBOL-NAME (CADR MARK))
     MARK)
    ,(IF BAD-OBJECTP
     `(MSG &quot;~|Bad object: ~x0&quot; ,BAD-OBJECT)
     &quot;&quot;)))</pre>
  </div>

<div class="form-block function" id="def-include-book-er-warning-summary" data-defines="INCLUDE-BOOK-ER-WARNING-SUMMARY" data-references="DEFAXIOMS-OKP-CERT,AND,SKIP-PROOFS-OKP-CERT,F-GET-GLOBAL,NOT,CDR,ASSOC-EQ,COND,INCLUDE-BOOK-ER,QUOTE,HARD,ER,EQ,IF,T,CASE,KEYWORD-STRING,LET,STATE,SUSPECT-BOOK-ACTION-ALIST,KEYWORD,DEFUN" data-used-by="INCLUDE-BOOK-CERTIFIED-P,CHK-RAISE-PORTCULLIS,INCLUDE-BOOK-ER" data-part-name="INCLUDE-BOOK-ER-WARNING-SUMMARY" data-part-args="STATE,SUSPECT-BOOK-ACTION-ALIST,KEYWORD" data-part-body="DEFAXIOMS-OKP-CERT,AND,STATE,SKIP-PROOFS-OKP-CERT,F-GET-GLOBAL,NOT,CDR,SUSPECT-BOOK-ACTION-ALIST,ASSOC-EQ,COND,INCLUDE-BOOK-ER,QUOTE,HARD,ER,EQ,IF,T,KEYWORD,CASE,KEYWORD-STRING,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ER-WARNING-SUMMARY">include-book-er-warning-summary</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-er-warning-summary" data-sym="INCLUDE-BOOK-ER-WARNING-SUMMARY" title="(defun include-book-er-warning-summary
       (keyword suspect-book-action-alist state)
  (let ((keyword-string
         (case keyword
           (:uncertified-okp &quot;Uncertified&quot;)
...">include-book-er-warning-summary</a>
  (keyword suspect-book-action-alist state)
  (let ((keyword-string (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> keyword
         (<span class="keyword">:uncertified-okp</span> <span class="string">"Uncertified"</span>)
         (<span class="keyword">:skip-proofs-okp</span> <span class="string">"Skip-proofs"</span>)
         (<span class="keyword">:defaxioms-okp</span> <span class="string">"Defaxioms"</span>)
         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> keyword <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
             nil
             (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
               '<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a>
               <span class="string">"Include-book-er does not know the include-book keyword ~
                      argument ~x0."</span>
               keyword))))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> keyword <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) nil)
      ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> keyword suspect-book-action-alist) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> keyword suspect-book-action-alist)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> keyword <span class="keyword">:skip-proofs-okp</span>)
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'skip-proofs-okp-cert state))
                 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> keyword <span class="keyword">:defaxioms-okp</span>)
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'defaxioms-okp-cert state)))) keyword)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> keyword-string)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> keyword)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a>
          <span class="string">"There is a discrepancy between the keywords in the ~
             suspect-book-action-alist, ~x0, and the keyword, ~x1, supplied ~
             to include-book-er."</span>
          suspect-book-action-alist
          keyword)))))</pre>
  </div>

<div class="form-block function" id="def-include-book-er1" data-defines="INCLUDE-BOOK-ER1" data-references="VALUE,WARNING$,PPROGN,T,QUOTE,CERT-OP,MEMBER-EQ,SYMBOLP,SOFT,ER,NULL,COND,STATE,CTX,WARNING-SUMMARY,MSG,FILE2,FILE1,DEFUN" data-used-by="INCLUDE-BOOK-CERTIFIED-P,CHK-RAISE-PORTCULLIS,INCLUDE-BOOK-ER" data-part-name="INCLUDE-BOOK-ER1" data-part-args="STATE,CTX,WARNING-SUMMARY,MSG,FILE2,FILE1" data-part-body="VALUE,WARNING$,PPROGN,T,QUOTE,STATE,CERT-OP,MEMBER-EQ,SYMBOLP,MSG,FILE2,FILE1,CTX,SOFT,ER,WARNING-SUMMARY,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ER1">include-book-er1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-er1" data-sym="INCLUDE-BOOK-ER1" title="(defun include-book-er1 (file1 file2 msg warning-summary ctx state)
  (cond ((null warning-summary) (er soft ctx &quot;~@2&quot; file1 file2 msg))
        ((symbolp warning-summary)
         (cond
          ((member-eq (cert-op state) &#39;(nil :write-acl2xu))
...">include-book-er1</a>
  (file1 file2 <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> warning-summary ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> warning-summary) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@2"</span> file1 file2 <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
    ((symbolp warning-summary) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state) '(nil <span class="keyword">:write-acl2xu</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"~@0  This is illegal because we are currently attempting ~
           include-book with ~x1 set to NIL.  You can avoid this error by ~
           using a value of T for ~x1; see :DOC include-book."</span>
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@2"</span> file1 file2 <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)
            warning-summary))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"~@0  This is illegal because we are currently attempting ~
           certify-book; see :DOC certify-book."</span>
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@2"</span> file1 file2 <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx warning-summary <span class="string">"~@2"</span> file1 file2 <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))</pre>
  </div>

<div class="form-block function" id="def-include-book-er" data-defines="INCLUDE-BOOK-ER" data-references="INCLUDE-BOOK-ER1,INCLUDE-BOOK-ER-WARNING-SUMMARY,WARNING-SUMMARY,LET,STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,KEYWORD,MSG,FILE2,FILE1,DEFUN" data-used-by="INCLUDE-BOOK-OK-FAMILIAR-NAME-AND-HASH,INCLUDE-BOOK-CERT-OBJ-PRELIM,CHK-CERT-ANNOTATIONS-POST-ALIST,CHK-CERT-ANNOTATIONS,CHK-CERTIFICATE-FILE,CHK-CERTIFICATE-FILE1,INCLUDE-BOOK-ER-WARNING-SUMMARY" data-part-name="INCLUDE-BOOK-ER" data-part-args="STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,KEYWORD,MSG,FILE2,FILE1" data-part-body="CTX,MSG,FILE2,FILE1,INCLUDE-BOOK-ER1,STATE,SUSPECT-BOOK-ACTION-ALIST,KEYWORD,INCLUDE-BOOK-ER-WARNING-SUMMARY,WARNING-SUMMARY,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ER">include-book-er</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a>
  (file1 file2
    <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
    keyword
    suspect-book-action-alist
    ctx
    state)
  (let ((warning-summary (<a class="sym-link local-def" href="#def-include-book-er-warning-summary" data-sym="INCLUDE-BOOK-ER-WARNING-SUMMARY" title="(defun include-book-er-warning-summary
       (keyword suspect-book-action-alist state)
  (let ((keyword-string
         (case keyword
           (:uncertified-okp &quot;Uncertified&quot;)
...">include-book-er-warning-summary</a> keyword
         suspect-book-action-alist
         state)))
    (<a class="sym-link local-def" href="#def-include-book-er1" data-sym="INCLUDE-BOOK-ER1" title="(defun include-book-er1 (file1 file2 msg warning-summary ctx state)
  (cond ((null warning-summary) (er soft ctx &quot;~@2&quot; file1 file2 msg))
        ((symbolp warning-summary)
         (cond
          ((member-eq (cert-op state) &#39;(nil :write-acl2xu))
...">include-book-er1</a> file1 file2 <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> warning-summary ctx state)))</pre>
  </div>

<div class="form-block function" id="def-post-alist-from-channel" data-defines="POST-ALIST-FROM-CHANNEL" data-references="EQ,OR,READ-OBJECT,T,MV,READ-OBJECT-SUPPRESS,QUOTE,MEMBER-EQ,COND,OBJ,EOFP,MV-LET,STATE,CH,Y,X,DEFUN" data-used-by="CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE" data-part-name="POST-ALIST-FROM-CHANNEL" data-part-args="STATE,CH,Y,X" data-part-body="POST-ALIST-FROM-CHANNEL,X,EQ,OR,READ-OBJECT,T,MV,CH,READ-OBJECT-SUPPRESS,QUOTE,Y,MEMBER-EQ,COND,STATE,OBJ,EOFP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POST-ALIST-FROM-CHANNEL">post-alist-from-channel</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-post-alist-from-channel" data-sym="POST-ALIST-FROM-CHANNEL" title="(defun post-alist-from-channel (x y ch state)
  (mv-let (eofp obj state)
          (cond
           ((member-eq y &#39;(:expansion-alist :cert-data))
            (mv-let (eofp state) (read-object-suppress ch state)
...">post-alist-from-channel</a>
  (x y ch state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp obj state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> y '(<span class="keyword">:expansion-alist</span> <span class="keyword">:cert-data</span>)) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp state)
          (<a class="sym-link system" href="axioms.html#def-read-object-suppress" data-sym="READ-OBJECT-SUPPRESS">read-object-suppress</a> ch state)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> eofp nil state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> eofp (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> obj <span class="keyword">:pcert-info</span>)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> x state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-post-alist-from-channel" data-sym="POST-ALIST-FROM-CHANNEL" title="(defun post-alist-from-channel (x y ch state)
  (mv-let (eofp obj state)
          (cond
           ((member-eq y &#39;(:expansion-alist :cert-data))
            (mv-let (eofp state) (read-object-suppress ch state)
...">post-alist-from-channel</a> y obj ch state)))))</pre>
  </div>

<div class="form-block function" id="def-certificate-file-and-input-channel1" data-defines="CERTIFICATE-FILE-AND-INPUT-CHANNEL1" data-references="MV,OPEN-INPUT-CHANNEL,CH,MV-LET,CONVERT-BOOK-STRING-TO-CERT,CERT-NAME,LET,STATE,CERT-OP,FULL-BOOK-STRING,DEFUN" data-used-by="CHECK-CERTIFICATE-FILE-EXISTS,CERTIFICATE-FILE-AND-INPUT-CHANNEL" data-part-name="CERTIFICATE-FILE-AND-INPUT-CHANNEL1" data-part-args="STATE,CERT-OP,FULL-BOOK-STRING" data-part-body="MV,OPEN-INPUT-CHANNEL,STATE,CH,MV-LET,CERT-OP,FULL-BOOK-STRING,CONVERT-BOOK-STRING-TO-CERT,CERT-NAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL1">certificate-file-and-input-channel1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certificate-file-and-input-channel1" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL1" title="(defun certificate-file-and-input-channel1 (full-book-string cert-op state)
  (let ((cert-name (convert-book-string-to-cert full-book-string cert-op)))
    (mv-let (ch state) (open-input-channel cert-name :object state)
            (mv ch cert-name state))))">certificate-file-and-input-channel1</a>
  (full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state)
  (let ((cert-name (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>)))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch state)
      (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> cert-name <span class="keyword">:object</span> state)
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ch cert-name state))))</pre>
  </div>

<div class="form-block macro" id="def-pcert-op-p" data-defines="PCERT-OP-P" data-references="QUOTE,MEMBER-EQ,QUASIQUOTE,CERT-OP,DEFMACRO" data-used-by="INCLUDE-BOOK-PCERT-P,CHK-ACCEPTABLE-CERTIFY-BOOK" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PCERT-OP-P">pcert-op-p</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-pcert-op-p" data-sym="PCERT-OP-P" title="(defmacro pcert-op-p (cert-op)
  `(member-eq ,cert-op &#39;(:create-pcert :create+convert-pcert :convert-pcert)))">pcert-op-p</a>
  (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>)
  `(<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> ,CERT-OP
    '(<span class="keyword">:create-pcert</span> <span class="keyword">:create+convert-pcert</span> <span class="keyword">:convert-pcert</span>)))</pre>
  </div>

<div class="form-block other" id="form-242" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-a.html#def-defrec" data-sym="DEFREC">defrec</a> cert-obj
  ((cmds . pre-alist) post-alist
    (expansion-alist . cert-data) . pcert-info)
  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-get-cert-obj-and-cert-filename" data-defines="GET-CERT-OBJ-AND-CERT-FILENAME" data-references="MV,CDR,STRINGP,CAR,WEAK-CERT-OBJ-P,CONSP,NOT,AND,LET,READ-ACL2-ORACLE,VAL,ERP,MV-LET,IGNORE,DECLARE,STATE,FULL-BOOK-NAME,DEFUN" data-used-by="CERTIFICATE-FILE-AND-INPUT-CHANNEL" data-part-name="GET-CERT-OBJ-AND-CERT-FILENAME" data-part-args="STATE,FULL-BOOK-NAME" data-part-declare="FULL-BOOK-NAME,IGNORE,DECLARE" data-part-body="MV,CDR,STRINGP,CAR,WEAK-CERT-OBJ-P,CONSP,NOT,AND,LET,READ-ACL2-ORACLE,STATE,VAL,ERP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-CERT-OBJ-AND-CERT-FILENAME">get-cert-obj-and-cert-filename</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-cert-obj-and-cert-filename" data-sym="GET-CERT-OBJ-AND-CERT-FILENAME" title="(defun get-cert-obj-and-cert-filename (full-book-name state)
  (declare (ignore full-book-name))
  (mv-let (erp val state) (read-acl2-oracle state)
          (let ((val
                 (and (not erp) (consp val) (weak-cert-obj-p (car val))
...">get-cert-obj-and-cert-filename</a>
  (full-book-name state)
  (declare (ignore full-book-name))
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
    (<a class="sym-link system" href="axioms.html#def-read-acl2-oracle" data-sym="READ-ACL2-ORACLE">read-acl2-oracle</a> state)
    (let ((val (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> erp)
           (consp val)
           (weak-cert-obj-p (car val))
           (stringp (cdr val)))))
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car val) (cdr val) state))))</pre>
  </div>

<div class="form-block function" id="def-certificate-file-and-input-channel" data-defines="CERTIFICATE-FILE-AND-INPUT-CHANNEL" data-references="T,CERTIFICATE-FILE-AND-INPUT-CHANNEL1,CERT-NAME,CH,COND,MV,GET-CERT-OBJ-AND-CERT-FILENAME,IF,CERT-FILENAME,CERT-OBJ,MV-LET,STATE,OLD-CERT-OP,FULL-BOOK-NAME,FULL-BOOK-STRING,DEFUN" data-used-by="CHK-CERTIFICATE-FILE,CERTIFICATE-FILE,CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE" data-part-name="CERTIFICATE-FILE-AND-INPUT-CHANNEL" data-part-args="STATE,OLD-CERT-OP,FULL-BOOK-NAME,FULL-BOOK-STRING" data-part-body="T,FULL-BOOK-STRING,CERTIFICATE-FILE-AND-INPUT-CHANNEL1,CERT-NAME,CH,OLD-CERT-OP,COND,MV,GET-CERT-OBJ-AND-CERT-FILENAME,FULL-BOOK-NAME,IF,STATE,CERT-FILENAME,CERT-OBJ,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL">certificate-file-and-input-channel</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certificate-file-and-input-channel" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL" title="(defun certificate-file-and-input-channel
       (full-book-string full-book-name old-cert-op state)
  (mv-let (cert-obj cert-filename state)
          (if full-book-name
              (get-cert-obj-and-cert-filename full-book-name state)
...">certificate-file-and-input-channel</a>
  (full-book-string full-book-name old-cert-op state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (cert-obj cert-filename state)
    (if full-book-name
      (<a class="sym-link local-def" href="#def-get-cert-obj-and-cert-filename" data-sym="GET-CERT-OBJ-AND-CERT-FILENAME" title="(defun get-cert-obj-and-cert-filename (full-book-name state)
  (declare (ignore full-book-name))
  (mv-let (erp val state) (read-acl2-oracle state)
          (let ((val
                 (and (not erp) (consp val) (weak-cert-obj-p (car val))
...">get-cert-obj-and-cert-filename</a> full-book-name state)
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (cert-obj (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> cert-obj cert-filename state))
      (old-cert-op (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch cert-name state)
          (<a class="sym-link local-def" href="#def-certificate-file-and-input-channel1" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL1" title="(defun certificate-file-and-input-channel1 (full-book-string cert-op state)
  (let ((cert-name (convert-book-string-to-cert full-book-string cert-op)))
    (mv-let (ch state) (open-input-channel cert-name :object state)
            (mv ch cert-name state))))">certificate-file-and-input-channel1</a> full-book-string
            old-cert-op
            state)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ch cert-name state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch cert-name state)
          (<a class="sym-link local-def" href="#def-certificate-file-and-input-channel1" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL1" title="(defun certificate-file-and-input-channel1 (full-book-string cert-op state)
  (let ((cert-name (convert-book-string-to-cert full-book-string cert-op)))
    (mv-let (ch state) (open-input-channel cert-name :object state)
            (mv ch cert-name state))))">certificate-file-and-input-channel1</a> full-book-string
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ch (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ch cert-name state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch cert-name state)
                (<a class="sym-link local-def" href="#def-certificate-file-and-input-channel1" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL1" title="(defun certificate-file-and-input-channel1 (full-book-string cert-op state)
  (let ((cert-name (convert-book-string-to-cert full-book-string cert-op)))
    (mv-let (ch state) (open-input-channel cert-name :object state)
            (mv ch cert-name state))))">certificate-file-and-input-channel1</a> full-book-string
                  <span class="keyword">:create-pcert</span> state)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ch (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ch cert-name state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch cert-name state)
                      (<a class="sym-link local-def" href="#def-certificate-file-and-input-channel1" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL1" title="(defun certificate-file-and-input-channel1 (full-book-string cert-op state)
  (let ((cert-name (convert-book-string-to-cert full-book-string cert-op)))
    (mv-let (ch state) (open-input-channel cert-name :object state)
            (mv ch cert-name state))))">certificate-file-and-input-channel1</a> full-book-string
                        <span class="keyword">:convert-pcert</span> state)
                      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ch cert-name state))))))))))))</pre>
  </div>

<div class="form-block function" id="def-cert-annotations-and-checksum-from-cert-file" data-defines="CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE" data-references="SILENT-ERROR,T,CAR,CDDDR,VALUE,CLOSE-INPUT-CHANNEL,PPROGN,POST-ALIST-FROM-CHANNEL,X,COND,IGNORE,DECLARE,CERT-OP,EQ,IF,CERTIFICATE-FILE-AND-INPUT-CHANNEL,CERT-NAME,CH,MV-LET,STATE,FULL-BOOK-STRING,DEFUN" data-used-by="TILDE-@-CERT-POST-ALIST-PHRASE" data-part-name="CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE" data-part-args="STATE,FULL-BOOK-STRING" data-part-body="SILENT-ERROR,T,CAR,CDDDR,VALUE,CLOSE-INPUT-CHANNEL,PPROGN,POST-ALIST-FROM-CHANNEL,X,COND,IGNORE,DECLARE,CERT-OP,EQ,IF,FULL-BOOK-STRING,CERTIFICATE-FILE-AND-INPUT-CHANNEL,STATE,CERT-NAME,CH,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE">cert-annotations-and-checksum-from-cert-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-annotations-and-checksum-from-cert-file" data-sym="CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE" title="(defun cert-annotations-and-checksum-from-cert-file (full-book-string state)
  (mv-let (ch cert-name state)
          (certificate-file-and-input-channel full-book-string nil
                                              (if (eq (cert-op state)
                                                      :convert-pcert)
...">cert-annotations-and-checksum-from-cert-file</a>
  (full-book-string state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch cert-name state)
    (<a class="sym-link local-def" href="#def-certificate-file-and-input-channel" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL" title="(defun certificate-file-and-input-channel
       (full-book-string full-book-name old-cert-op state)
  (mv-let (cert-obj cert-filename state)
          (if full-book-name
              (get-cert-obj-and-cert-filename full-book-name state)
...">certificate-file-and-input-channel</a> full-book-string
      nil
      (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state) <span class="keyword">:convert-pcert</span>)
        <span class="keyword">:create-pcert</span> nil)
      state)
    (declare (ignore cert-name))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ch (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (x state)
          (<a class="sym-link local-def" href="#def-post-alist-from-channel" data-sym="POST-ALIST-FROM-CHANNEL" title="(defun post-alist-from-channel (x y ch state)
  (mv-let (eofp obj state)
          (cond
           ((member-eq y &#39;(:expansion-alist :cert-data))
            (mv-let (eofp state) (read-object-suppress ch state)
...">post-alist-from-channel</a> nil nil ch state)
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> ch state)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (car x))))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (silent-error state)))))</pre>
  </div>

<div class="form-block function" id="def-tilde-_40-cert-post-alist-phrase" data-defines="TILDE-@-CERT-POST-ALIST-PHRASE" data-references="STRING,QUOTE,CONCATENATE,MSG,EQUAL,T,CDR,NULL,COND,CERT-MAYBE-UNCHANGED-P,LET,MV,CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE,PAIR,ERP,MV-LET,IGNORE,DECLARE,STATE,CDR-ACTUAL-ENTRY,CDR-REQD-ENTRY,FAMILIAR-NAME,FULL-BOOK-STRING,DEFUN" data-used-by="TILDE-*-BOOK-HASH-PHRASE1" data-part-name="TILDE-@-CERT-POST-ALIST-PHRASE" data-part-args="STATE,CDR-ACTUAL-ENTRY,CDR-REQD-ENTRY,FAMILIAR-NAME,FULL-BOOK-STRING" data-part-declare="CDR-REQD-ENTRY,IGNORE,DECLARE" data-part-body="FAMILIAR-NAME,STRING,QUOTE,CONCATENATE,MSG,EQUAL,T,CDR-ACTUAL-ENTRY,CDR,NULL,COND,CERT-MAYBE-UNCHANGED-P,LET,MV,FULL-BOOK-STRING,CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE,STATE,PAIR,ERP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-@-CERT-POST-ALIST-PHRASE">tilde-@-cert-post-alist-phrase</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_40-cert-post-alist-phrase" data-sym="TILDE-@-CERT-POST-ALIST-PHRASE" title="(defun tilde-@-cert-post-alist-phrase
       (full-book-string familiar-name cdr-reqd-entry cdr-actual-entry state)
  (declare (ignore cdr-reqd-entry))
  (mv-let (erp pair state)
          (cert-annotations-and-checksum-from-cert-file full-book-string state)
...">tilde-@-cert-post-alist-phrase</a>
  (full-book-string familiar-name
    cdr-reqd-entry
    cdr-actual-entry
    state)
  (declare (ignore cdr-reqd-entry))
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp pair state)
    (<a class="sym-link local-def" href="#def-cert-annotations-and-checksum-from-cert-file" data-sym="CERT-ANNOTATIONS-AND-CHECKSUM-FROM-CERT-FILE" title="(defun cert-annotations-and-checksum-from-cert-file (full-book-string state)
  (mv-let (ch cert-name state)
          (certificate-file-and-input-channel full-book-string nil
                                              (if (eq (cert-op state)
                                                      :convert-pcert)
...">cert-annotations-and-checksum-from-cert-file</a> full-book-string
      state)
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (let ((cert-maybe-unchanged-p (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp nil)
             ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr cdr-actual-entry)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
             (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (equal cdr-actual-entry pair)))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~|AND NOTE that file ~x0 does not currently ~
                             exist, so you will need to recertify ~x1 and the ~
                             books that depend on it (and, if you are using ~
                             an image created by save-exec, then consider ~
                             rebuilding that image)"</span>
              (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> familiar-name <span class="string">".cert"</span>)
              familiar-name))
          (cert-maybe-unchanged-p <span class="string">" so book recertification is probably required"</span>)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~|AND NOTE that file ~x0 changed after ~x1 was ~
                             included, so you should probably undo back ~
                             through the command that included ~x1 (or, if ~
                             you are using an image created by save-exec, ~
                             consider rebuilding that image)"</span>
              (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> familiar-name <span class="string">".cert"</span>)
              familiar-name))))
      state)))</pre>
  </div>

<div class="form-block function" id="def-assoc-familiar-name" data-defines="ASSOC-FAMILIAR-NAME" data-references="CDR,T,CAR,CADDR,EQUAL,ENDP,COND,ALIST,FAMILIAR-NAME,DEFUN" data-used-by="TILDE-*-BOOK-HASH-PHRASE1" data-part-name="ASSOC-FAMILIAR-NAME" data-part-args="ALIST,FAMILIAR-NAME" data-part-body="CDR,ASSOC-FAMILIAR-NAME,T,CAR,CADDR,FAMILIAR-NAME,EQUAL,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ASSOC-FAMILIAR-NAME">assoc-familiar-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-assoc-familiar-name" data-sym="ASSOC-FAMILIAR-NAME" title="(defun assoc-familiar-name (familiar-name alist)
  (cond ((endp alist) nil)
        ((equal familiar-name (caddr (car alist))) (car alist))
        (t (assoc-familiar-name familiar-name (cdr alist)))))">assoc-familiar-name</a>
  (familiar-name alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    ((equal familiar-name (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car alist))) (car alist))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-assoc-familiar-name" data-sym="ASSOC-FAMILIAR-NAME" title="(defun assoc-familiar-name (familiar-name alist)
  (cond ((endp alist) nil)
        ((equal familiar-name (caddr (car alist))) (car alist))
        (t (assoc-familiar-name familiar-name (cdr alist)))))">assoc-familiar-name</a> familiar-name (cdr alist)))))</pre>
  </div>

<div class="form-block function" id="def-tilde-_2A-book-hash-phrase1" data-defines="TILDE-*-BOOK-HASH-PHRASE1" data-references="TILDE-@-CERT-POST-ALIST-PHRASE,PHRASE,LET,EQUAL,CONS,CDR,MSGS,MV-LET,MSG,QUOTE,BOOK-NAME-TO-FILENAME,FULL-BOOK-STRING,W,WRLD,ASSOC-FAMILIAR-NAME,PAIR,ACTUAL-ENTRY,ASSOC-EQUAL,ACTUAL-ELEMENT,FULL-BOOK-NAME,CADDR,FAMILIAR-NAME,CAR,CDDDR,REQD-ENTRY,LET*,T,MV,NULL,COND,STATE,ACTUAL-ALIST,REQD-ALIST,DEFUN" data-used-by="TILDE-*-BOOK-HASH-PHRASE" data-part-name="TILDE-*-BOOK-HASH-PHRASE1" data-part-args="STATE,ACTUAL-ALIST,REQD-ALIST" data-part-body="TILDE-@-CERT-POST-ALIST-PHRASE,PHRASE,LET,EQUAL,CONS,CDR,MSGS,MV-LET,MSG,TILDE-*-BOOK-HASH-PHRASE1,QUOTE,BOOK-NAME-TO-FILENAME,FULL-BOOK-STRING,W,WRLD,ASSOC-FAMILIAR-NAME,PAIR,ACTUAL-ENTRY,ACTUAL-ALIST,ASSOC-EQUAL,ACTUAL-ELEMENT,FULL-BOOK-NAME,CADDR,FAMILIAR-NAME,CAR,CDDDR,REQD-ENTRY,LET*,T,STATE,MV,REQD-ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-*-BOOK-HASH-PHRASE1">tilde-*-book-hash-phrase1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase1" data-sym="TILDE-*-BOOK-HASH-PHRASE1" title="(defun tilde-*-book-hash-phrase1 (reqd-alist actual-alist state)
  (cond ((null reqd-alist) (mv nil state))
        (t
         (let* ((reqd-entry (cdddr (car reqd-alist)))
                (familiar-name (caddr (car reqd-alist)))
...">tilde-*-book-hash-phrase1</a>
  (reqd-alist actual-alist state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> reqd-alist) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((reqd-entry (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (car reqd-alist))) (familiar-name (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car reqd-alist)))
          (full-book-name (car (car reqd-alist)))
          (actual-element (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> full-book-name actual-alist))
          (actual-entry (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> actual-element)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> actual-entry) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pair (<a class="sym-link local-def" href="#def-assoc-familiar-name" data-sym="ASSOC-FAMILIAR-NAME" title="(defun assoc-familiar-name (familiar-name alist)
  (cond ((endp alist) nil)
        ((equal familiar-name (caddr (car alist))) (car alist))
        (t (assoc-familiar-name familiar-name (cdr alist)))))">assoc-familiar-name</a> familiar-name actual-alist)) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                (full-book-string (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename" data-sym="BOOK-NAME-TO-FILENAME">book-name-to-filename</a> full-book-name
                    wrld
                    '<a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase1" data-sym="TILDE-*-BOOK-HASH-PHRASE1" title="(defun tilde-*-book-hash-phrase1 (reqd-alist actual-alist state)
  (cond ((null reqd-alist) (mv nil state))
        (t
         (let* ((reqd-entry (cdddr (car reqd-alist)))
                (familiar-name (caddr (car reqd-alist)))
...">tilde-*-book-hash-phrase1</a>))
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pair (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"-- its certificate requires the book ~
                                    &quot;~s0&quot;, but that book has not been ~
                                    included although the book &quot;~s1&quot; -- ~
                                    which has the same familiar name as that ~
                                    required book (but with a different ~
                                    full-book-name; see :DOC full-book-name) ~
                                    -- has been included"</span>
                        full-book-string
                        (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename" data-sym="BOOK-NAME-TO-FILENAME">book-name-to-filename</a> (car pair)
                          wrld
                          '<a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase1" data-sym="TILDE-*-BOOK-HASH-PHRASE1" title="(defun tilde-*-book-hash-phrase1 (reqd-alist actual-alist state)
  (cond ((null reqd-alist) (mv nil state))
        (t
         (let* ((reqd-entry (cdddr (car reqd-alist)))
                (familiar-name (caddr (car reqd-alist)))
...">tilde-*-book-hash-phrase1</a>)))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"-- its certificate requires the book ~
                                    &quot;~s0&quot;, but that book has not been ~
                                    included, nor has any book with the same ~
                                    familiar name as that required book (see ~
                                    :DOC full-book-name) -- perhaps the ~
                                    certificate file changed during inclusion ~
                                    of some superior book"</span>
                        full-book-string)))))
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (msgs state)
                (<a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase1" data-sym="TILDE-*-BOOK-HASH-PHRASE1" title="(defun tilde-*-book-hash-phrase1 (reqd-alist actual-alist state)
  (cond ((null reqd-alist) (mv nil state))
        (t
         (let* ((reqd-entry (cdddr (car reqd-alist)))
                (familiar-name (caddr (car reqd-alist)))
...">tilde-*-book-hash-phrase1</a> (cdr reqd-alist)
                  actual-alist
                  state)
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> msgs) state))))
          ((equal reqd-entry actual-entry) (<a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase1" data-sym="TILDE-*-BOOK-HASH-PHRASE1" title="(defun tilde-*-book-hash-phrase1 (reqd-alist actual-alist state)
  (cond ((null reqd-alist) (mv nil state))
        (t
         (let* ((reqd-entry (cdddr (car reqd-alist)))
                (familiar-name (caddr (car reqd-alist)))
...">tilde-*-book-hash-phrase1</a> (cdr reqd-alist)
              actual-alist
              state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (msgs state)
              (<a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase1" data-sym="TILDE-*-BOOK-HASH-PHRASE1" title="(defun tilde-*-book-hash-phrase1 (reqd-alist actual-alist state)
  (cond ((null reqd-alist) (mv nil state))
        (t
         (let* ((reqd-entry (cdddr (car reqd-alist)))
                (familiar-name (caddr (car reqd-alist)))
...">tilde-*-book-hash-phrase1</a> (cdr reqd-alist)
                actual-alist
                state)
              (let ((full-book-string (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename" data-sym="BOOK-NAME-TO-FILENAME">book-name-to-filename</a> full-book-name
                     (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
                     '<a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase1" data-sym="TILDE-*-BOOK-HASH-PHRASE1" title="(defun tilde-*-book-hash-phrase1 (reqd-alist actual-alist state)
  (cond ((null reqd-alist) (mv nil state))
        (t
         (let* ((reqd-entry (cdddr (car reqd-alist)))
                (familiar-name (caddr (car reqd-alist)))
...">tilde-*-book-hash-phrase1</a>)))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (phrase state)
                  (<a class="sym-link local-def" href="#def-tilde-_40-cert-post-alist-phrase" data-sym="TILDE-@-CERT-POST-ALIST-PHRASE" title="(defun tilde-@-cert-post-alist-phrase
       (full-book-string familiar-name cdr-reqd-entry cdr-actual-entry state)
  (declare (ignore cdr-reqd-entry))
  (mv-let (erp pair state)
          (cert-annotations-and-checksum-from-cert-file full-book-string state)
...">tilde-@-cert-post-alist-phrase</a> full-book-string
                    familiar-name
                    reqd-entry
                    actual-entry
                    state)
                  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr actual-entry)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"-- its certificate requires the uncertified book ~
                           ~x0~@1"</span>
                            full-book-string
                            phrase))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"-- its certificate requires the book &quot;~s0&quot; with ~
                           certificate annotations~|  ~x1~|and book hash ~x2, ~
                           but we have included ~@3~@4"</span>
                            full-book-string
                            (car reqd-entry)
                            (cdr reqd-entry)
                            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"a version of ~x0 with certificate ~
                                  annotations~|  ~x1~|and book-hash ~x2,"</span>
                              familiar-name
                              (car actual-entry)
                              (cdr actual-entry))
                            phrase)))
                      msgs)
                    state))))))))))</pre>
  </div>

<div class="form-block function" id="def-tilde-_2A-book-hash-phrase" data-defines="TILDE-*-BOOK-HASH-PHRASE" data-references="LIST,MV,TILDE-*-BOOK-HASH-PHRASE1,PHRASE1,MV-LET,STATE,ACTUAL-ALIST,REQD-ALIST,DEFUN" data-used-by="INCLUDE-BOOK-CERTIFIED-P,CHK-RAISE-PORTCULLIS" data-part-name="TILDE-*-BOOK-HASH-PHRASE" data-part-args="STATE,ACTUAL-ALIST,REQD-ALIST" data-part-body="LIST,MV,ACTUAL-ALIST,REQD-ALIST,TILDE-*-BOOK-HASH-PHRASE1,STATE,PHRASE1,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-*-BOOK-HASH-PHRASE">tilde-*-book-hash-phrase</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase" data-sym="TILDE-*-BOOK-HASH-PHRASE" title="(defun tilde-*-book-hash-phrase (reqd-alist actual-alist state)
  (mv-let (phrase1 state)
          (tilde-*-book-hash-phrase1 reqd-alist actual-alist state)
          (mv (list &quot;~|&quot; &quot;~|~@*&quot; &quot;~|~@*;~|&quot; &quot;~|~@*;~|&quot; phrase1) state)))">tilde-*-book-hash-phrase</a>
  (reqd-alist actual-alist state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (phrase1 state)
    (<a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase1" data-sym="TILDE-*-BOOK-HASH-PHRASE1" title="(defun tilde-*-book-hash-phrase1 (reqd-alist actual-alist state)
  (cond ((null reqd-alist) (mv nil state))
        (t
         (let* ((reqd-entry (cdddr (car reqd-alist)))
                (familiar-name (caddr (car reqd-alist)))
...">tilde-*-book-hash-phrase1</a> reqd-alist actual-alist state)
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">"~|"</span> <span class="string">"~|~@*"</span> <span class="string">"~|~@*;~|"</span> <span class="string">"~|~@*;~|"</span> phrase1) state)))</pre>
  </div>

<div class="form-block function" id="def-get-cmds-from-portcullis1" data-defines="GET-CMDS-FROM-PORTCULLIS1" data-references="CONS,TRANS-EVAL-DEFAULT-WARNING,ER-PROGN,&,DEFPKG,QUOTE,CASE-MATCH,AND,REVERSE,VALUE,EQ,T,MV,COND,READ-OBJECT,FORM,EOFP,MV-LET,ANS,STATE,CTX,CH,EVAL-HIDDEN-DEFPKGS,DEFUN" data-used-by="GET-CMDS-FROM-PORTCULLIS" data-part-name="GET-CMDS-FROM-PORTCULLIS1" data-part-args="ANS,STATE,CTX,CH,EVAL-HIDDEN-DEFPKGS" data-part-body="CONS,GET-CMDS-FROM-PORTCULLIS1,CTX,TRANS-EVAL-DEFAULT-WARNING,ER-PROGN,&,DEFPKG,QUOTE,CASE-MATCH,EVAL-HIDDEN-DEFPKGS,AND,ANS,REVERSE,VALUE,EQ,T,MV,COND,CH,READ-OBJECT,STATE,FORM,EOFP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-CMDS-FROM-PORTCULLIS1">get-cmds-from-portcullis1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-cmds-from-portcullis1" data-sym="GET-CMDS-FROM-PORTCULLIS1" title="(defun get-cmds-from-portcullis1 (eval-hidden-defpkgs ch ctx state ans)
  (mv-let (eofp form state) (read-object ch state)
          (cond (eofp (mv t nil state))
                ((eq form :end-portcullis-cmds) (value (reverse ans)))
                ((and eval-hidden-defpkgs
...">get-cmds-from-portcullis1</a>
  (eval-hidden-defpkgs ch ctx state ans)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp form state)
    (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> form <span class="keyword">:end-portcullis-cmds</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> ans)))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> eval-hidden-defpkgs
         (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> form (('<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> &amp; &amp; &amp; &amp; '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (&amp; nil))) (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (trans-eval-default-warning form ctx state nil)
          (<a class="sym-link local-def" href="#def-get-cmds-from-portcullis1" data-sym="GET-CMDS-FROM-PORTCULLIS1" title="(defun get-cmds-from-portcullis1 (eval-hidden-defpkgs ch ctx state ans)
  (mv-let (eofp form state) (read-object ch state)
          (cond (eofp (mv t nil state))
                ((eq form :end-portcullis-cmds) (value (reverse ans)))
                ((and eval-hidden-defpkgs
...">get-cmds-from-portcullis1</a> eval-hidden-defpkgs
            ch
            ctx
            state
            (cons form ans))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-get-cmds-from-portcullis1" data-sym="GET-CMDS-FROM-PORTCULLIS1" title="(defun get-cmds-from-portcullis1 (eval-hidden-defpkgs ch ctx state ans)
  (mv-let (eofp form state) (read-object ch state)
          (cond (eofp (mv t nil state))
                ((eq form :end-portcullis-cmds) (value (reverse ans)))
                ((and eval-hidden-defpkgs
...">get-cmds-from-portcullis1</a> eval-hidden-defpkgs
          ch
          ctx
          state
          (cons form ans))))))</pre>
  </div>

<div class="form-block function" id="def-hidden-defpkg-events-simple" data-defines="HIDDEN-DEFPKG-EVENTS-SIMPLE" data-references="DEFPKG,QUASIQUOTE,CONS,CADR,NAME,PACKAGE-ENTRY-DEFPKG-EVENT-FORM,EVENT,PACKAGE-ENTRY-IMPORTS,IMPORTS,PACKAGE-ENTRY-NAME,N,E,LET*,T,CDR,CAR,PACKAGE-ENTRY-HIDDEN-P,NOT,REVERSE,ENDP,COND,ACC,KPA,DEFUN" data-used-by="GET-CMDS-FROM-PORTCULLIS" data-part-name="HIDDEN-DEFPKG-EVENTS-SIMPLE" data-part-args="ACC,KPA" data-part-body="DEFPKG,QUASIQUOTE,CONS,CADR,NAME,PACKAGE-ENTRY-DEFPKG-EVENT-FORM,EVENT,PACKAGE-ENTRY-IMPORTS,IMPORTS,PACKAGE-ENTRY-NAME,N,E,LET*,T,CDR,HIDDEN-DEFPKG-EVENTS-SIMPLE,CAR,PACKAGE-ENTRY-HIDDEN-P,NOT,ACC,REVERSE,KPA,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HIDDEN-DEFPKG-EVENTS-SIMPLE">hidden-defpkg-events-simple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hidden-defpkg-events-simple" data-sym="HIDDEN-DEFPKG-EVENTS-SIMPLE" title="(defun hidden-defpkg-events-simple (kpa acc)
  (cond ((endp kpa) (reverse acc))
        ((not (package-entry-hidden-p (car kpa)))
         (hidden-defpkg-events-simple (cdr kpa) acc))
        (t
...">hidden-defpkg-events-simple</a>
  (kpa acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> kpa) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-package-entry-hidden-p" data-sym="PACKAGE-ENTRY-HIDDEN-P">package-entry-hidden-p</a> (car kpa))) (<a class="sym-link local-def" href="#def-hidden-defpkg-events-simple" data-sym="HIDDEN-DEFPKG-EVENTS-SIMPLE" title="(defun hidden-defpkg-events-simple (kpa acc)
  (cond ((endp kpa) (reverse acc))
        ((not (package-entry-hidden-p (car kpa)))
         (hidden-defpkg-events-simple (cdr kpa) acc))
        (t
...">hidden-defpkg-events-simple</a> (cdr kpa) acc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((e (car kpa)) (n (<a class="sym-link system" href="axioms.html#def-package-entry-name" data-sym="PACKAGE-ENTRY-NAME">package-entry-name</a> e))
          (imports (<a class="sym-link system" href="axioms.html#def-package-entry-imports" data-sym="PACKAGE-ENTRY-IMPORTS">package-entry-imports</a> e))
          (event (<a class="sym-link system" href="axioms.html#def-package-entry-defpkg-event-form" data-sym="PACKAGE-ENTRY-DEFPKG-EVENT-FORM">package-entry-defpkg-event-form</a> e))
          (name (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> event)))
        (<a class="sym-link local-def" href="#def-hidden-defpkg-events-simple" data-sym="HIDDEN-DEFPKG-EVENTS-SIMPLE" title="(defun hidden-defpkg-events-simple (kpa acc)
  (cond ((endp kpa) (reverse acc))
        ((not (package-entry-hidden-p (car kpa)))
         (hidden-defpkg-events-simple (cdr kpa) acc))
        (t
...">hidden-defpkg-events-simple</a> (cdr kpa)
          (cons `(<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> ,NAME
              ,(ASSERT$ EVENT (ASSERT$ (EQUAL N NAME) (KWOTE IMPORTS))))
            acc))))))</pre>
  </div>

<div class="form-block function" id="def-get-cmds-from-portcullis" data-defines="GET-CMDS-FROM-PORTCULLIS" data-references="SET-W!,PPROGN,ILL-FORMED-CERTIFICATE-ER,COND,GET-CMDS-FROM-PORTCULLIS1,VAL,ERP,MV-LET,VALUE,T,CONS,TRANS-EVAL-DEFAULT-WARNING,*VALID-OUTPUT-NAMES*,ERROR,REMOVE1-EQ,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,IF,ER-PROGN,KNOWN-PACKAGE-ALIST,QUOTE,GLOBAL-VAL,HIDDEN-DEFPKG-EVENTS-SIMPLE,EVENTS,W,WRLD,LET*,REVERT-WORLD-ON-ERROR,STATE,CTX,CH,EVAL-HIDDEN-DEFPKGS,FILE2,FILE1,DEFUN" data-used-by="CHK-RAISE-PORTCULLIS" data-part-name="GET-CMDS-FROM-PORTCULLIS" data-part-args="STATE,CTX,CH,EVAL-HIDDEN-DEFPKGS,FILE2,FILE1" data-part-body="SET-W!,PPROGN,FILE2,FILE1,GET-CMDS-FROM-PORTCULLIS,ILL-FORMED-CERTIFICATE-ER,COND,CH,EVAL-HIDDEN-DEFPKGS,GET-CMDS-FROM-PORTCULLIS1,VAL,ERP,MV-LET,VALUE,T,CTX,CONS,TRANS-EVAL-DEFAULT-WARNING,*VALID-OUTPUT-NAMES*,ERROR,REMOVE1-EQ,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,IF,ER-PROGN,KNOWN-PACKAGE-ALIST,QUOTE,GLOBAL-VAL,HIDDEN-DEFPKG-EVENTS-SIMPLE,EVENTS,STATE,W,WRLD,LET*,REVERT-WORLD-ON-ERROR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-CMDS-FROM-PORTCULLIS">get-cmds-from-portcullis</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-cmds-from-portcullis" data-sym="GET-CMDS-FROM-PORTCULLIS" title="(defun get-cmds-from-portcullis (file1 file2 eval-hidden-defpkgs ch ctx state)
  (revert-world-on-error
   (let* ((wrld (w state))
          (events
           (hidden-defpkg-events-simple (global-val &#39;known-package-alist wrld)
...">get-cmds-from-portcullis</a>
  (file1 file2 eval-hidden-defpkgs ch ctx state)
  (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (events (<a class="sym-link local-def" href="#def-hidden-defpkg-events-simple" data-sym="HIDDEN-DEFPKG-EVENTS-SIMPLE" title="(defun hidden-defpkg-events-simple (kpa acc)
  (cond ((endp kpa) (reverse acc))
        ((not (package-entry-hidden-p (car kpa)))
         (hidden-defpkg-events-simple (cdr kpa) acc))
        (t
...">hidden-defpkg-events-simple</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> wrld)
            nil)))
      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if events
          (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (<a class="sym-link system" href="axioms.html#def-remove1-eq" data-sym="REMOVE1-EQ">remove1-eq</a> 'error <a class="sym-link system" href="axioms.html#def-_2Avalid-output-names_2A" data-sym="*VALID-OUTPUT-NAMES*">*valid-output-names*</a>)))
            (trans-eval-default-warning (cons '<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> events)
              ctx
              state
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          (<a class="sym-link local-def" href="#def-get-cmds-from-portcullis1" data-sym="GET-CMDS-FROM-PORTCULLIS1" title="(defun get-cmds-from-portcullis1 (eval-hidden-defpkgs ch ctx state ans)
  (mv-let (eofp form state) (read-object ch state)
          (cond (eofp (mv t nil state))
                ((eq form :end-portcullis-cmds) (value (reverse ans)))
                ((and eval-hidden-defpkgs
...">get-cmds-from-portcullis1</a> eval-hidden-defpkgs
            ch
            ctx
            state
            nil)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                '<a class="sym-link local-def" href="#def-get-cmds-from-portcullis" data-sym="GET-CMDS-FROM-PORTCULLIS" title="(defun get-cmds-from-portcullis (file1 file2 eval-hidden-defpkgs ch ctx state)
  (revert-world-on-error
   (let* ((wrld (w state))
          (events
           (hidden-defpkg-events-simple (global-val &#39;known-package-alist wrld)
...">get-cmds-from-portcullis</a>
                file1
                file2))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if events
                  (<a class="sym-link system" href="history-management.html#def-set-w_21" data-sym="SET-W!">set-w!</a> wrld state)
                  state)
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val)))))))))</pre>
  </div>

<div class="form-block function" id="def-convert-book-string-to-port" data-defines="CONVERT-BOOK-STRING-TO-PORT" data-references="REMOVE-LISP-SUFFIX,STRING,QUOTE,CONCATENATE,X,DEFUN" data-used-by="WRITE-PORT-FILE,EVAL-PORT-FILE,CHK-RAISE-PORTCULLIS2" data-part-name="CONVERT-BOOK-STRING-TO-PORT" data-part-args="X" data-part-body="X,REMOVE-LISP-SUFFIX,STRING,QUOTE,CONCATENATE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONVERT-BOOK-STRING-TO-PORT">convert-book-string-to-port</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-convert-book-string-to-port" data-sym="CONVERT-BOOK-STRING-TO-PORT" title="(defun convert-book-string-to-port (x)
  (concatenate &#39;string (remove-lisp-suffix x nil) &quot;port&quot;))">convert-book-string-to-port</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> (<a class="sym-link system" href="history-management.html#def-remove-lisp-suffix" data-sym="REMOVE-LISP-SUFFIX">remove-lisp-suffix</a> x nil) <span class="string">"port"</span>))</pre>
  </div>

<div class="form-block function" id="def-chk-raise-portcullis2" data-defines="CHK-RAISE-PORTCULLIS2" data-references="CONS,CONVERT-BOOK-STRING-TO-PORT,WARNING$,PPROGN,ERP-PRIME,LET,IF,MSG,TRANS-EVAL-DEFAULT-WARNING,TRANS-ANS,ERROR-FLG,LISTP,ASSERT$,NOT,EQ,AND,CHK-RAISE-PORTCULLIS2{PORT},QUOTE,ILL-FORMED-CERTIFICATE-ER,REVERSE,VALUE,OR,CDR,CAR,READ-OBJECT,SYMBOLP,T,MV,NULL,COND,FORM,EOFP,MV-LET,ANS,STATE,CTX,PORT-FILE-P,CH-OR-CMDS,FILE2,FILE1,DEFUN" data-used-by="CHK-RAISE-PORTCULLIS1" data-part-name="CHK-RAISE-PORTCULLIS2" data-part-args="ANS,STATE,CTX,PORT-FILE-P,CH-OR-CMDS,FILE2,FILE1" data-part-body="CONS,CHK-RAISE-PORTCULLIS2,CONVERT-BOOK-STRING-TO-PORT,WARNING$,PPROGN,ERP-PRIME,LET,IF,MSG,TRANS-EVAL-DEFAULT-WARNING,TRANS-ANS,ERROR-FLG,LISTP,ASSERT$,NOT,EQ,AND,FILE2,FILE1,CHK-RAISE-PORTCULLIS2{PORT},QUOTE,CTX,ILL-FORMED-CERTIFICATE-ER,ANS,REVERSE,VALUE,PORT-FILE-P,OR,CDR,CAR,READ-OBJECT,SYMBOLP,T,MV,NULL,COND,STATE,CH-OR-CMDS,FORM,EOFP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-RAISE-PORTCULLIS2">chk-raise-portcullis2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-raise-portcullis2" data-sym="CHK-RAISE-PORTCULLIS2" title="(defun chk-raise-portcullis2 (file1 file2 ch-or-cmds port-file-p ctx state ans)
  (mv-let (eofp form ch-or-cmds state)
          (cond ((null ch-or-cmds) (mv t nil nil state))
                ((symbolp ch-or-cmds)
                 (mv-let (eofp form state) (read-object ch-or-cmds state)
...">chk-raise-portcullis2</a>
  (file1 file2 ch-or-cmds port-file-p ctx state ans)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp form ch-or-cmds state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch-or-cmds) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil nil state))
      ((symbolp ch-or-cmds) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp form state)
          (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch-or-cmds state)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> eofp form ch-or-cmds state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (car ch-or-cmds) (cdr ch-or-cmds) state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch-or-cmds) port-file-p) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> ans)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
              '|CHK-RAISE-PORTCULLIS2{PORT}|
              file1
              file2))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> form <span class="keyword">:end-portcullis-cmds</span>) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> port-file-p)) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-listp" data-sym="LISTP">listp</a> ch-or-cmds)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> ans))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (error-flg trans-ans state)
          (trans-eval-default-warning form
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (if port-file-p
                <span class="string">"the .port file for ~x0"</span>
                <span class="string">"the portcullis for ~x0"</span>)
              file1)
            state
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
          (let ((erp-prime (car (cdr trans-ans))))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> error-flg erp-prime) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (port-file-p (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                        <span class="string">"Portcullis"</span>
                        <span class="string">"The error reported above was caused while ~
                                 trying to execute commands from file ~x0 ~
                                 while including uncertified book ~x1.  In ~
                                 particular, we were trying to execute ~x2 ~
                                 when the error occurred.  Because of this ~
                                 error, we cannot complete the include-book ~
                                 operation for the above book, in the current ~
                                 world.  You can perhaps eliminate this error ~
                                 by removing file ~x0."</span>
                        (<a class="sym-link local-def" href="#def-convert-book-string-to-port" data-sym="CONVERT-BOOK-STRING-TO-PORT" title="(defun convert-book-string-to-port (x)
  (concatenate &#39;string (remove-lisp-suffix x nil) &quot;port&quot;))">convert-book-string-to-port</a> file1)
                        file1
                        form))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                        <span class="string">"Portcullis"</span>
                        <span class="string">"The error reported above was caused while ~
                                 trying to raise the portcullis for the book ~
                                 ~x0.  In particular, we were trying to ~
                                 execute ~x1 when the error occurred.  ~
                                 Because we cannot raise the portcullis, we ~
                                 cannot include this book in this world.  ~
                                 There are two standard responses to this ~
                                 situation.  Either change the current ~
                                 logical world so that this error does not ~
                                 occur, e.g., redefine one of your functions, ~
                                 or recertify the book in a different ~
                                 environment."</span>
                        file1
                        form)))
                  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-raise-portcullis2" data-sym="CHK-RAISE-PORTCULLIS2" title="(defun chk-raise-portcullis2 (file1 file2 ch-or-cmds port-file-p ctx state ans)
  (mv-let (eofp form ch-or-cmds state)
          (cond ((null ch-or-cmds) (mv t nil nil state))
                ((symbolp ch-or-cmds)
                 (mv-let (eofp form state) (read-object ch-or-cmds state)
...">chk-raise-portcullis2</a> file1
                  file2
                  ch-or-cmds
                  port-file-p
                  ctx
                  state
                  (cons form ans))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-raise-portcullis1" data-defines="CHK-RAISE-PORTCULLIS1" data-references="CERT-OBJ,ACCESS,SYMBOLP,IF,CHK-RAISE-PORTCULLIS2,*INITIAL-ACL2-DEFAULTS-TABLE*,MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,ER-PROGN,LOCAL-INCLUDE-BOOK,F-GET-GLOBAL,AND,IN-LOCAL-FLG,T,SKIP-PROOFS-BY-SYSTEM,INCLUDE-BOOK,QUOTE,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*,STATE,CTX,PORT-FILE-P,CH-OR-CERT-OBJ,FILE2,FILE1,DEFUN" data-used-by="EVAL-PORT-FILE,CHK-RAISE-PORTCULLIS" data-part-name="CHK-RAISE-PORTCULLIS1" data-part-args="STATE,CTX,PORT-FILE-P,CH-OR-CERT-OBJ,FILE2,FILE1" data-part-body="CTX,PORT-FILE-P,CERT-OBJ,ACCESS,CH-OR-CERT-OBJ,SYMBOLP,IF,FILE2,FILE1,CHK-RAISE-PORTCULLIS2,*INITIAL-ACL2-DEFAULTS-TABLE*,MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,ER-PROGN,LOCAL-INCLUDE-BOOK,STATE,F-GET-GLOBAL,AND,IN-LOCAL-FLG,T,SKIP-PROOFS-BY-SYSTEM,INCLUDE-BOOK,QUOTE,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-RAISE-PORTCULLIS1">chk-raise-portcullis1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-raise-portcullis1" data-sym="CHK-RAISE-PORTCULLIS1" title="(defun chk-raise-portcullis1 (file1 file2 ch-or-cert-obj port-file-p ctx state)
  (state-global-let*
   ((ld-skip-proofsp &#39;include-book) (skip-proofs-by-system t)
    (in-local-flg
     (and (f-get-global &#39;in-local-flg state) &#39;local-include-book)))
...">chk-raise-portcullis1</a>
  (file1 file2 ch-or-cert-obj port-file-p ctx state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (skip-proofs-by-system <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      (in-local-flg (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state) 'local-include-book)))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-maybe-install-acl2-defaults-table" data-sym="MAYBE-INSTALL-ACL2-DEFAULTS-TABLE" title="(defun maybe-install-acl2-defaults-table (acl2-defaults-table state)
  (cond
   ((equal acl2-defaults-table (table-alist &#39;acl2-defaults-table (w state)))
    (value nil))
   (t
...">maybe-install-acl2-defaults-table</a> <a class="sym-link system" href="axioms.html#def-_2Ainitial-acl2-defaults-table_2A" data-sym="*INITIAL-ACL2-DEFAULTS-TABLE*">*initial-acl2-defaults-table*</a>
        state)
      (<a class="sym-link local-def" href="#def-chk-raise-portcullis2" data-sym="CHK-RAISE-PORTCULLIS2" title="(defun chk-raise-portcullis2 (file1 file2 ch-or-cmds port-file-p ctx state ans)
  (mv-let (eofp form ch-or-cmds state)
          (cond ((null ch-or-cmds) (mv t nil nil state))
                ((symbolp ch-or-cmds)
                 (mv-let (eofp form state) (read-object ch-or-cmds state)
...">chk-raise-portcullis2</a> file1
        file2
        (if (symbolp ch-or-cert-obj)
          ch-or-cert-obj
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj ch-or-cert-obj <span class="keyword">:cmds</span>))
        port-file-p
        ctx
        state
        nil))))</pre>
  </div>

<div class="form-block function" id="def-mark-local-included-books" data-defines="MARK-LOCAL-INCLUDED-BOOKS" data-references="LIST,T,ASSOC-EQUAL,CDR,CAR,CONS,LOCAL,QUOTE,CAAR,EQ,NULL,COND,POST-ALIST2,POST-ALIST1,DEFUN" data-used-by="MAKE-CERTIFICATE-FILE" data-part-name="MARK-LOCAL-INCLUDED-BOOKS" data-part-args="POST-ALIST2,POST-ALIST1" data-part-body="LIST,T,ASSOC-EQUAL,POST-ALIST2,CDR,MARK-LOCAL-INCLUDED-BOOKS,CAR,CONS,LOCAL,QUOTE,CAAR,EQ,POST-ALIST1,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MARK-LOCAL-INCLUDED-BOOKS">mark-local-included-books</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-mark-local-included-books" data-sym="MARK-LOCAL-INCLUDED-BOOKS" title="(defun mark-local-included-books (post-alist1 post-alist2)
  (cond ((null post-alist1) nil)
        ((eq (caar post-alist1) &#39;local)
         (cons (car post-alist1)
               (mark-local-included-books (cdr post-alist1) post-alist2)))
...">mark-local-included-books</a>
  (post-alist1 post-alist2)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> post-alist1) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> post-alist1) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>) (cons (car post-alist1)
        (<a class="sym-link local-def" href="#def-mark-local-included-books" data-sym="MARK-LOCAL-INCLUDED-BOOKS" title="(defun mark-local-included-books (post-alist1 post-alist2)
  (cond ((null post-alist1) nil)
        ((eq (caar post-alist1) &#39;local)
         (cons (car post-alist1)
               (mark-local-included-books (cdr post-alist1) post-alist2)))
...">mark-local-included-books</a> (cdr post-alist1) post-alist2)))
    ((<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> post-alist1) post-alist2) (cons (car post-alist1)
        (<a class="sym-link local-def" href="#def-mark-local-included-books" data-sym="MARK-LOCAL-INCLUDED-BOOKS" title="(defun mark-local-included-books (post-alist1 post-alist2)
  (cond ((null post-alist1) nil)
        ((eq (caar post-alist1) &#39;local)
         (cons (car post-alist1)
               (mark-local-included-books (cdr post-alist1) post-alist2)))
...">mark-local-included-books</a> (cdr post-alist1) post-alist2)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (car post-alist1))
        (<a class="sym-link local-def" href="#def-mark-local-included-books" data-sym="MARK-LOCAL-INCLUDED-BOOKS" title="(defun mark-local-included-books (post-alist1 post-alist2)
  (cond ((null post-alist1) nil)
        ((eq (caar post-alist1) &#39;local)
         (cons (car post-alist1)
               (mark-local-included-books (cdr post-alist1) post-alist2)))
...">mark-local-included-books</a> (cdr post-alist1) post-alist2)))))</pre>
  </div>

<div class="form-block function" id="def-unmark-and-delete-local-included-books" data-defines="UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS" data-references="CAR,CONS,T,CDR,LOCAL,QUOTE,CAAR,EQ,NULL,COND,POST-ALIST3,DEFUN" data-used-by="INCLUDE-BOOK-CERTIFIED-P" data-part-name="UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS" data-part-args="POST-ALIST3" data-part-body="CAR,CONS,T,CDR,UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS,LOCAL,QUOTE,CAAR,EQ,POST-ALIST3,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS">unmark-and-delete-local-included-books</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-unmark-and-delete-local-included-books" data-sym="UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS" title="(defun unmark-and-delete-local-included-books (post-alist3)
  (cond ((null post-alist3) nil)
        ((eq (caar post-alist3) &#39;local)
         (unmark-and-delete-local-included-books (cdr post-alist3)))
        (t
...">unmark-and-delete-local-included-books</a>
  (post-alist3)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> post-alist3) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> post-alist3) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>) (<a class="sym-link local-def" href="#def-unmark-and-delete-local-included-books" data-sym="UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS" title="(defun unmark-and-delete-local-included-books (post-alist3)
  (cond ((null post-alist3) nil)
        ((eq (caar post-alist3) &#39;local)
         (unmark-and-delete-local-included-books (cdr post-alist3)))
        (t
...">unmark-and-delete-local-included-books</a> (cdr post-alist3)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car post-alist3)
        (<a class="sym-link local-def" href="#def-unmark-and-delete-local-included-books" data-sym="UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS" title="(defun unmark-and-delete-local-included-books (post-alist3)
  (cond ((null post-alist3) nil)
        ((eq (caar post-alist3) &#39;local)
         (unmark-and-delete-local-included-books (cdr post-alist3)))
        (t
...">unmark-and-delete-local-included-books</a> (cdr post-alist3))))))</pre>
  </div>

<div class="form-block function" id="def-earlier-acl2-versionp" data-defines="EARLIER-ACL2-VERSIONP" data-references="NATP,ASSERT$,INT=,AND,<,T,IF,QUOTE,HARD,ER,NULL,OR,COND,REST2,INCRL2,MINOR2,MAJOR2,IGNORE,DECLARE,PARSE-VERSION,REST1,INCRL1,MINOR1,MAJOR1,MV-LET,VERSION2,VERSION1,DEFUN" data-part-name="EARLIER-ACL2-VERSIONP" data-part-args="VERSION2,VERSION1" data-part-body="NATP,ASSERT$,INT=,AND,<,T,IF,EARLIER-ACL2-VERSIONP,QUOTE,HARD,ER,NULL,OR,COND,VERSION2,REST2,INCRL2,MINOR2,MAJOR2,IGNORE,DECLARE,VERSION1,PARSE-VERSION,REST1,INCRL1,MINOR1,MAJOR1,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EARLIER-ACL2-VERSIONP">earlier-acl2-versionp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-earlier-acl2-versionp" data-sym="EARLIER-ACL2-VERSIONP" title="(defun earlier-acl2-versionp (version1 version2)
  (mv-let (major1 minor1 incrl1 rest1) (parse-version version1)
          (declare (ignore rest1))
          (mv-let (major2 minor2 incrl2 rest2) (parse-version version2)
                  (declare (ignore rest2))
...">earlier-acl2-versionp</a>
  (version1 version2)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (major1 minor1 incrl1 rest1)
    (<a class="sym-link system" href="basis-a.html#def-parse-version" data-sym="PARSE-VERSION">parse-version</a> version1)
    (declare (ignore rest1))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (major2 minor2 incrl2 rest2)
      (<a class="sym-link system" href="basis-a.html#def-parse-version" data-sym="PARSE-VERSION">parse-version</a> version2)
      (declare (ignore rest2))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> major1) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> major2)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            '<a class="sym-link local-def" href="#def-earlier-acl2-versionp" data-sym="EARLIER-ACL2-VERSIONP" title="(defun earlier-acl2-versionp (version1 version2)
  (mv-let (major1 minor1 incrl1 rest1) (parse-version version1)
          (declare (ignore rest1))
          (mv-let (major2 minor2 incrl2 rest2) (parse-version version2)
                  (declare (ignore rest2))
...">earlier-acl2-versionp</a>
            <span class="string">"We are surprised to find an ACL2 version string, ~x0, that ~
               cannot be parsed."</span>
            (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> major1)
              version1
              version2)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (&lt; major1 major2)
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> major1 major2)
              (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> minor1) (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> minor2))
                (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (&lt; minor1 minor2)
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> minor1 minor2) (&lt; incrl1 incrl2)))))))))))</pre>
  </div>

<div class="form-block function" id="def-acl2-version-r-p" data-defines="ACL2-VERSION-R-P" data-references="SUBSEQ,EQUAL,LENGTH,+,<,AND,POSITION,P,LET,VERSION,DEFUN" data-used-by="CHK-CERTIFICATE-FILE1" data-part-name="ACL2-VERSION-R-P" data-part-args="VERSION" data-part-body="SUBSEQ,EQUAL,LENGTH,+,<,AND,VERSION,POSITION,P,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2-VERSION-R-P">acl2-version-r-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-acl2-version-r-p" data-sym="ACL2-VERSION-R-P" title="(defun acl2-version-r-p (version)
  (let ((p (position #\( version)))
    (and p (&lt; (+ p 2) (length version))
         (equal (subseq version p (+ p 3)) &quot;(r)&quot;))))">acl2-version-r-p</a>
  (version)
  (let ((p (<a class="sym-link system" href="axioms.html#def-position" data-sym="POSITION">position</a> #\( version)))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> p
      (&lt; (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> p <span class="number">2</span>) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> version))
      (equal (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> version p (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> p <span class="number">3</span>)) <span class="string">"(r)"</span>))))</pre>
  </div>

<div class="form-block function" id="def-ttag-alistp" data-defines="TTAG-ALISTP" data-references="CDR,REMOVE1,BOOK-NAME-LISTP,CDAR,TRUE-LISTP,CAAR,SYMBOLP,CAR,CONSP,AND,T,NULL,ATOM,COND,X,DEFUN" data-used-by="CERT-ANNOTATIONSP" data-part-name="TTAG-ALISTP" data-part-args="X" data-part-body="CDR,TTAG-ALISTP,REMOVE1,BOOK-NAME-LISTP,CDAR,TRUE-LISTP,CAAR,SYMBOLP,CAR,CONSP,AND,T,NULL,X,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TTAG-ALISTP">ttag-alistp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ttag-alistp" data-sym="TTAG-ALISTP" title="(defun ttag-alistp (x)
  (cond ((atom x) (null x))
        (t
         (and (consp (car x)) (symbolp (caar x)) (true-listp (cdar x))
              (book-name-listp (remove1 nil (cdar x))) (ttag-alistp (cdr x))))))">ttag-alistp</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car x))
        (symbolp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x))
        (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> x))
        (<a class="sym-link system" href="basis-a.html#def-book-name-listp" data-sym="BOOK-NAME-LISTP">book-name-listp</a> (<a class="sym-link system" href="axioms.html#def-remove1" data-sym="REMOVE1">remove1</a> nil (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)))
        (<a class="sym-link local-def" href="#def-ttag-alistp" data-sym="TTAG-ALISTP" title="(defun ttag-alistp (x)
  (cond ((atom x) (null x))
        (t
         (and (consp (car x)) (symbolp (caar x)) (true-listp (cdar x))
              (book-name-listp (remove1 nil (cdar x))) (ttag-alistp (cdr x))))))">ttag-alistp</a> (cdr x))))))</pre>
  </div>

<div class="form-block function" id="def-cert-annotationsp" data-defines="CERT-ANNOTATIONSP" data-references="&,TTAG-ALISTP,TTAGS,NULL,OR,?,T,MEMBER-EQ,AND,TTAGS-SINGLETON,AP,SP,QUOTE,CASE-MATCH,X,DEFUN" data-used-by="INCLUDE-BOOK-ALIST-ENTRY-P" data-part-name="CERT-ANNOTATIONSP" data-part-args="X" data-part-body="&,TTAG-ALISTP,TTAGS,NULL,OR,?,T,MEMBER-EQ,AND,TTAGS-SINGLETON,AP,SP,QUOTE,X,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-ANNOTATIONSP">cert-annotationsp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-annotationsp" data-sym="CERT-ANNOTATIONSP" title="(defun cert-annotationsp (x)
  (case-match x
              (((&#39;:skipped-proofsp . sp) (&#39;:axiomsp . ap) . ttags-singleton)
               (and (member-eq sp &#39;(t nil ?)) (member-eq ap &#39;(t nil ?))
                    (or (null ttags-singleton)
...">cert-annotationsp</a>
  (x)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> x
    ((('<span class="keyword">:skipped-proofsp</span> . sp) ('<span class="keyword">:axiomsp</span> . ap) . ttags-singleton) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> sp '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil ?))
        (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> ap '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil ?))
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ttags-singleton)
          (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> ttags-singleton
            ((('<span class="keyword">:ttags</span> . ttags)) (<a class="sym-link local-def" href="#def-ttag-alistp" data-sym="TTAG-ALISTP" title="(defun ttag-alistp (x)
  (cond ((atom x) (null x))
        (t
         (and (consp (car x)) (symbolp (caar x)) (true-listp (cdar x))
              (book-name-listp (remove1 nil (cdar x))) (ttag-alistp (cdr x))))))">ttag-alistp</a> ttags))
            (&amp; nil)))))
    (&amp; nil)))</pre>
  </div>

<div class="form-block constant" id="def-_2Atrivial-book-hash_2A" data-defines="*TRIVIAL-BOOK-HASH*" data-references="DEFCONST" data-used-by="CERT-HASH" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*TRIVIAL-BOOK-HASH*">*trivial-book-hash*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Atrivial-book-hash_2A" data-sym="*TRIVIAL-BOOK-HASH*" title="(defconst *trivial-book-hash* :trivial-book-hash)">*trivial-book-hash*</a> <span class="keyword">:trivial-book-hash</span>)</pre>
  </div>

<div class="form-block function" id="def-cert-hash" data-defines="CERT-HASH" data-references="*TRIVIAL-BOOK-HASH*,T,LIST*,CONS,CHECK-SUM-OBJ,BOOK-HASH-ALISTP,QUOTE,F-GET-GLOBAL,NOT,INTEGERP,IF,COND,STATE,CERT-DATA,EXPANSION-ALIST,POST-ALIST,PRE-ALIST,CMDS,OLD-CERT-HASH,DEFUN" data-used-by="MAKE-CERTIFICATE-FILE1,CHK-RAISE-PORTCULLIS" data-part-name="CERT-HASH" data-part-args="STATE,CERT-DATA,EXPANSION-ALIST,POST-ALIST,PRE-ALIST,CMDS,OLD-CERT-HASH" data-part-body="*TRIVIAL-BOOK-HASH*,T,CERT-DATA,EXPANSION-ALIST,POST-ALIST,LIST*,PRE-ALIST,CMDS,CONS,CHECK-SUM-OBJ,STATE,BOOK-HASH-ALISTP,QUOTE,F-GET-GLOBAL,NOT,INTEGERP,OLD-CERT-HASH,IF,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-HASH">cert-hash</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-hash" data-sym="CERT-HASH" title="(defun cert-hash
       (old-cert-hash cmds pre-alist post-alist expansion-alist cert-data
        state)
  (cond
   ((if old-cert-hash
...">cert-hash</a>
  (old-cert-hash cmds
    pre-alist
    post-alist
    expansion-alist
    cert-data
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((if old-cert-hash
       (integerp old-cert-hash)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'book-hash-alistp state))) (<a class="sym-link system" href="basis-b.html#def-check-sum-obj" data-sym="CHECK-SUM-OBJ">check-sum-obj</a> (cons (cons cmds pre-alist)
          (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> post-alist expansion-alist cert-data))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link local-def" href="#def-_2Atrivial-book-hash_2A" data-sym="*TRIVIAL-BOOK-HASH*" title="(defconst *trivial-book-hash* :trivial-book-hash)">*trivial-book-hash*</a>)))</pre>
  </div>

<div class="form-block function" id="def-include-book-alist-entry-p" data-defines="INCLUDE-BOOK-ALIST-ENTRY-P" data-references="INTEGERP,&,NATP,BOOK-WRITE-DATE,BOOK-LENGTH,QUOTE,CASE-MATCH,CDDDDR,BOOK-HASH,LET,CADDDR,CERT-ANNOTATIONSP,CDDDR,CADDR,CDDR,CADR,STRINGP,CDR,CAR,BOOK-NAME-P,CONSP,AND,ENTRY,DEFUN" data-used-by="INCLUDE-BOOK-ALISTP-1" data-part-name="INCLUDE-BOOK-ALIST-ENTRY-P" data-part-args="ENTRY" data-part-body="INTEGERP,&,NATP,BOOK-WRITE-DATE,BOOK-LENGTH,QUOTE,CASE-MATCH,CDDDDR,BOOK-HASH,LET,CADDDR,CERT-ANNOTATIONSP,CDDDR,CADDR,CDDR,CADR,STRINGP,CDR,CAR,BOOK-NAME-P,ENTRY,CONSP,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ALIST-ENTRY-P">include-book-alist-entry-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-alist-entry-p" data-sym="INCLUDE-BOOK-ALIST-ENTRY-P" title="(defun include-book-alist-entry-p (entry)
  (and (consp entry) (book-name-p (car entry)) (consp (cdr entry))
       (stringp (cadr entry)) (consp (cddr entry)) (stringp (caddr entry))
       (consp (cdddr entry)) (cert-annotationsp (cadddr entry))
       (let ((book-hash (cddddr entry)))
...">include-book-alist-entry-p</a>
  (entry)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp entry)
    (<a class="sym-link system" href="basis-a.html#def-book-name-p" data-sym="BOOK-NAME-P">book-name-p</a> (car entry))
    (consp (cdr entry))
    (stringp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> entry))
    (consp (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> entry))
    (stringp (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> entry))
    (consp (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> entry))
    (<a class="sym-link local-def" href="#def-cert-annotationsp" data-sym="CERT-ANNOTATIONSP" title="(defun cert-annotationsp (x)
  (case-match x
              (((&#39;:skipped-proofsp . sp) (&#39;:axiomsp . ap) . ttags-singleton)
               (and (member-eq sp &#39;(t nil ?)) (member-eq ap &#39;(t nil ?))
                    (or (null ttags-singleton)
...">cert-annotationsp</a> (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> entry))
    (let ((<a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a> (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> entry)))
      (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> <a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a>
        ((('<span class="keyword">:book-length</span> . book-length) ('<span class="keyword">:book-write-date</span> . book-write-date)) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> book-length) (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> book-write-date)))
        (&amp; (integerp <a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a>))))))</pre>
  </div>

<div class="form-block function" id="def-sysfile-to-filename" data-defines="SYSFILE-TO-FILENAME" data-references="T,SYSFILE-FILENAME,SYSFILE-KEY,EXTEND-PATHNAME,SYSFILE-P,COND,STATE,X,DEFUN" data-used-by="CHANGE-INCLUDE-BOOK-DIR,CHK-CERTIFICATE-FILE1" data-part-name="SYSFILE-TO-FILENAME" data-part-args="STATE,X" data-part-body="T,STATE,SYSFILE-FILENAME,SYSFILE-KEY,EXTEND-PATHNAME,X,SYSFILE-P,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYSFILE-TO-FILENAME">sysfile-to-filename</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sysfile-to-filename" data-sym="SYSFILE-TO-FILENAME" title="(defun sysfile-to-filename (x state)
  (cond
   ((sysfile-p x) (extend-pathname (sysfile-key x) (sysfile-filename x) state))
   (t x)))">sysfile-to-filename</a>
  (x state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="basis-a.html#def-sysfile-p" data-sym="SYSFILE-P">sysfile-p</a> x) (<a class="sym-link local-def" href="#def-extend-pathname" data-sym="EXTEND-PATHNAME" title="(defun extend-pathname (dir0 file-name state)
  (extend-pathname+ dir0 file-name nil state))">extend-pathname</a> (<a class="sym-link system" href="basis-a.html#def-sysfile-key" data-sym="SYSFILE-KEY">sysfile-key</a> x) (<a class="sym-link system" href="basis-a.html#def-sysfile-filename" data-sym="SYSFILE-FILENAME">sysfile-filename</a> x) state))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> x)))</pre>
  </div>

<div class="form-block function" id="def-keyword-listp" data-defines="KEYWORD-LISTP" data-references="NULL,CDR,CAR,KEYWORDP,AND,CONSP,IF,T,XARGS,DECLARE,X,DEFUN" data-used-by="FIRST-ASSOC-KEYWORD,READ-FILE-INTO-TEMPLATE" data-part-name="KEYWORD-LISTP" data-part-args="X" data-part-declare="T,XARGS,DECLARE" data-part-body="NULL,CDR,KEYWORD-LISTP,CAR,KEYWORDP,AND,X,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="KEYWORD-LISTP">keyword-listp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-keyword-listp" data-sym="KEYWORD-LISTP" title="(defun keyword-listp (x)
  (declare (xargs :guard t))
  (if (consp x)
      (and (keywordp (car x)) (keyword-listp (cdr x)))
      (null x)))">keyword-listp</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (if (consp x)
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car x)) (<a class="sym-link local-def" href="#def-keyword-listp" data-sym="KEYWORD-LISTP" title="(defun keyword-listp (x)
  (declare (xargs :guard t))
  (if (consp x)
      (and (keywordp (car x)) (keyword-listp (cdr x)))
      (null x)))">keyword-listp</a> (cdr x)))
    (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x)))</pre>
  </div>

<div class="form-block function" id="def-read-file-into-template" data-defines="READ-FILE-INTO-TEMPLATE" data-references="STRAY-VALUE2,ASSERT$,MAKE-LIST-AC,NTHCDR,VAL2,<,POSN-NIL,POSITION-EQ,KEYWORDP,AND,POSN-KWD-VAL,LET,EQ,CONS,CDR,CAR,EOF,LENGTH,MAKE-LIST,REVAPPEND,KEYWORD-LISTP,LIST,STRAY-VALUE1,QUOTE,MV,T,REVERSE,VALUE,READ-OBJECT,VAL,EOFP,MV-LET,NULL,COND,ACC,STATE,CH,TEMPLATE,DEFUN" data-used-by="CHK-RAISE-PORTCULLIS" data-part-name="READ-FILE-INTO-TEMPLATE" data-part-args="ACC,STATE,CH,TEMPLATE" data-part-body="STRAY-VALUE2,ASSERT$,MAKE-LIST-AC,NTHCDR,VAL2,<,POSN-NIL,POSITION-EQ,KEYWORDP,AND,POSN-KWD-VAL,LET,EQ,CONS,CDR,READ-FILE-INTO-TEMPLATE,CAR,EOF,LENGTH,MAKE-LIST,REVAPPEND,KEYWORD-LISTP,LIST,STRAY-VALUE1,QUOTE,MV,T,ACC,REVERSE,VALUE,CH,READ-OBJECT,STATE,VAL,EOFP,MV-LET,TEMPLATE,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-FILE-INTO-TEMPLATE">read-file-into-template</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-file-into-template" data-sym="READ-FILE-INTO-TEMPLATE" title="(defun read-file-into-template (template ch state acc)
  (cond
   ((null template)
    (mv-let (eofp val state) (read-object ch state)
            (cond (eofp (value (reverse acc)))
...">read-file-into-template</a>
  (template ch state acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> template) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp val state)
        (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'stray-value1 (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> val template) state)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp val state)
        (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-keyword-listp" data-sym="KEYWORD-LISTP" title="(defun keyword-listp (x)
  (declare (xargs :guard t))
  (if (consp x)
      (and (keywordp (car x)) (keyword-listp (cdr x)))
      (null x)))">keyword-listp</a> template) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> acc (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> template)))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'eof template state))))
          ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (car template)) (<a class="sym-link local-def" href="#def-read-file-into-template" data-sym="READ-FILE-INTO-TEMPLATE" title="(defun read-file-into-template (template ch state acc)
  (cond
   ((null template)
    (mv-let (eofp val state) (read-object ch state)
            (cond (eofp (value (reverse acc)))
...">read-file-into-template</a> (cdr template)
              ch
              state
              (cons val acc)))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val (car template)) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp val state)
              (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch state)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'eof template state))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-read-file-into-template" data-sym="READ-FILE-INTO-TEMPLATE" title="(defun read-file-into-template (template ch state acc)
  (cond
   ((null template)
    (mv-let (eofp val state) (read-object ch state)
            (cond (eofp (value (reverse acc)))
...">read-file-into-template</a> (cdr template)
                    ch
                    state
                    (cons val acc))))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((posn-kwd-val (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> val) (<a class="sym-link system" href="axioms.html#def-position-eq" data-sym="POSITION-EQ">position-eq</a> val template))) (posn-nil (<a class="sym-link system" href="axioms.html#def-position-eq" data-sym="POSITION-EQ">position-eq</a> nil template)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (posn-kwd-val (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> posn-nil (&lt; posn-nil posn-kwd-val)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:kwd-late</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> posn-kwd-val posn-nil template) state))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp val2 state)
                        (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch state)
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'eof val state))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-read-file-into-template" data-sym="READ-FILE-INTO-TEMPLATE" title="(defun read-file-into-template (template ch state acc)
  (cond
   ((null template)
    (mv-let (eofp val state) (read-object ch state)
            (cond (eofp (value (reverse acc)))
...">read-file-into-template</a> (cdr (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> posn-kwd-val template))
                              ch
                              state
                              (cons val2 (<a class="sym-link system" href="axioms.html#def-make-list-ac" data-sym="MAKE-LIST-AC">make-list-ac</a> posn-kwd-val nil acc)))))))))
                (posn-nil (<a class="sym-link local-def" href="#def-read-file-into-template" data-sym="READ-FILE-INTO-TEMPLATE" title="(defun read-file-into-template (template ch state acc)
  (cond
   ((null template)
    (mv-let (eofp val state) (read-object ch state)
            (cond (eofp (value (reverse acc)))
...">read-file-into-template</a> (cdr (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> posn-nil template))
                    ch
                    state
                    (cons val (<a class="sym-link system" href="axioms.html#def-make-list-ac" data-sym="MAKE-LIST-AC">make-list-ac</a> posn-nil nil acc))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link local-def" href="#def-keyword-listp" data-sym="KEYWORD-LISTP" title="(defun keyword-listp (x)
  (declare (xargs :guard t))
  (if (consp x)
      (and (keywordp (car x)) (keyword-listp (cdr x)))
      (null x)))">keyword-listp</a> template)
                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'stray-value2 (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> val template) state)))))))))))</pre>
  </div>

<div class="form-block function" id="def-cert-data-fal" data-defines="CERT-DATA-FAL" data-references="A2,PAIR2,CDR,MAKE-FAST-ALIST,ACONS,IF,A1,ASSOC-EQ,PAIR1,LET*,CERT-DATA,DEFUN" data-used-by="CHK-RAISE-PORTCULLIS" data-part-name="CERT-DATA-FAL" data-part-args="CERT-DATA" data-part-body="A2,PAIR2,CDR,MAKE-FAST-ALIST,ACONS,IF,A1,CERT-DATA,ASSOC-EQ,PAIR1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-DATA-FAL">cert-data-fal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-data-fal" data-sym="CERT-DATA-FAL" title="(defun cert-data-fal (cert-data)
  (let* ((pair1 (assoc-eq :translate cert-data))
         (a1
          (if pair1
              (acons :translate (make-fast-alist (cdr pair1)) nil)
...">cert-data-fal</a>
  (cert-data)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pair1 (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:translate</span> cert-data)) (a1 (if pair1
          (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:translate</span> (make-fast-alist (cdr pair1)) nil)
          nil))
      (pair2 (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:type-prescription</span> cert-data))
      (a2 (if pair2
          (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:type-prescription</span> (make-fast-alist (cdr pair2)) a1)
          a1)))
    a2))</pre>
  </div>

<div class="form-block function" id="def-include-book-alistp-1" data-defines="INCLUDE-BOOK-ALISTP-1" data-references="CADR,INCLUDE-BOOK-ALIST-ENTRY-P,CDDR,CDR,LOCAL,QUOTE,EQ,ENTRY,LET,CAR,CONSP,AND,T,NULL,ATOM,COND,LOCAL-MARKERS-ALLOWEDP,X,DEFUN" data-used-by="INCLUDE-BOOK-ALISTP" data-part-name="INCLUDE-BOOK-ALISTP-1" data-part-args="LOCAL-MARKERS-ALLOWEDP,X" data-part-body="INCLUDE-BOOK-ALISTP-1,CADR,INCLUDE-BOOK-ALIST-ENTRY-P,CDDR,CDR,LOCAL-MARKERS-ALLOWEDP,LOCAL,QUOTE,EQ,ENTRY,LET,CAR,CONSP,AND,T,NULL,X,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ALISTP-1">include-book-alistp-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-alistp-1" data-sym="INCLUDE-BOOK-ALISTP-1" title="(defun include-book-alistp-1 (x local-markers-allowedp)
  (cond ((atom x) (null x))
        (t
         (and (consp (car x))
              (let ((entry (car x)))
...">include-book-alistp-1</a>
  (x local-markers-allowedp)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car x))
        (let ((entry (car x)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp entry) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car entry) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>)) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> local-markers-allowedp
                (consp (cdr entry))
                (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> entry))
                (<a class="sym-link local-def" href="#def-include-book-alist-entry-p" data-sym="INCLUDE-BOOK-ALIST-ENTRY-P" title="(defun include-book-alist-entry-p (entry)
  (and (consp entry) (book-name-p (car entry)) (consp (cdr entry))
       (stringp (cadr entry)) (consp (cddr entry)) (stringp (caddr entry))
       (consp (cdddr entry)) (cert-annotationsp (cadddr entry))
       (let ((book-hash (cddddr entry)))
...">include-book-alist-entry-p</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> entry))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-include-book-alist-entry-p" data-sym="INCLUDE-BOOK-ALIST-ENTRY-P" title="(defun include-book-alist-entry-p (entry)
  (and (consp entry) (book-name-p (car entry)) (consp (cdr entry))
       (stringp (cadr entry)) (consp (cddr entry)) (stringp (caddr entry))
       (consp (cdddr entry)) (cert-annotationsp (cadddr entry))
       (let ((book-hash (cddddr entry)))
...">include-book-alist-entry-p</a> entry))))
        (<a class="sym-link local-def" href="#def-include-book-alistp-1" data-sym="INCLUDE-BOOK-ALISTP-1" title="(defun include-book-alistp-1 (x local-markers-allowedp)
  (cond ((atom x) (null x))
        (t
         (and (consp (car x))
              (let ((entry (car x)))
...">include-book-alistp-1</a> (cdr x) local-markers-allowedp)))))</pre>
  </div>

<div class="form-block function" id="def-include-book-alistp" data-defines="INCLUDE-BOOK-ALISTP" data-references="INCLUDE-BOOK-ALISTP-1,LOCAL-MARKERS-ALLOWEDP,X,DEFUN" data-used-by="POST-ALIST-FROM-PCERT1-1,MAKE-CERTIFICATE-FILE,CHK-RAISE-PORTCULLIS" data-part-name="INCLUDE-BOOK-ALISTP" data-part-args="LOCAL-MARKERS-ALLOWEDP,X" data-part-body="LOCAL-MARKERS-ALLOWEDP,X,INCLUDE-BOOK-ALISTP-1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ALISTP">include-book-alistp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-alistp" data-sym="INCLUDE-BOOK-ALISTP" title="(defun include-book-alistp (x local-markers-allowedp)
  (include-book-alistp-1 x local-markers-allowedp))">include-book-alistp</a>
  (x local-markers-allowedp)
  (<a class="sym-link local-def" href="#def-include-book-alistp-1" data-sym="INCLUDE-BOOK-ALISTP-1" title="(defun include-book-alistp-1 (x local-markers-allowedp)
  (cond ((atom x) (null x))
        (t
         (and (consp (car x))
              (let ((entry (car x)))
...">include-book-alistp-1</a> x local-markers-allowedp))</pre>
  </div>

<div class="form-block function" id="def-include-book-raw-error" data-defines="INCLUDE-BOOK-RAW-ERROR" data-references="VALUE,IGNORE,DECLARE,STATE,STR,DEFUN" data-used-by="CHK-CERTIFICATE-FILE,CHK-CERTIFICATE-FILE1,CHK-RAISE-PORTCULLIS" data-part-name="INCLUDE-BOOK-RAW-ERROR" data-part-args="STATE,STR" data-part-declare="STR,IGNORE,DECLARE" data-part-body="VALUE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-RAW-ERROR">include-book-raw-error</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a>
  (str state)
  (declare (ignore str))
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))</pre>
  </div>

<div class="form-block function" id="def-chk-raise-portcullis" data-defines="CHK-RAISE-PORTCULLIS" data-references="MAKE,CONS,TILDE-*-BOOK-HASH-PHRASE,MSGS,MSG,INCLUDE-BOOK-ER1,WARNING-DISABLED-P,INCLUDE-BOOK-ER-WARNING-SUMMARY,WARNING-SUMMARY,OR,LIST,CHK-RAISE-PORTCULLIS{CERT-HASH},ACTUAL-ALIST,CERT-HASH,CERT-HASH2,CHK-RAISE-PORTCULLIS{POST-ALIST-2},CHK-RAISE-PORTCULLIS{PRE-ALIST-2},INCLUDE-BOOK-ALISTP,EQUAL,NOT,BOOK-NAME-TO-FILENAME,FILENAME,LET,CAAR,SYSFILE-P,CAR,AND,UNEXPECTED-FROM-BOOK-NAME,PCERT-INFO,CERT-HASH1,POST-ALIST3,PRE-ALIST,CERT-DATA-FAL,CERT-DATA,NTH,EXPANSION-ALIST,LET*,CHK-RAISE-PORTCULLIS{READ-FILE-INTO-TEMPLATE},ILL-FORMED-CERTIFICATE-ER,INCLUDE-BOOK-RAW,READ-FILE-INTO-TEMPLATE,TUPLE,ERP,MV-LET,INCLUDE-BOOK-RAW-ERROR,T,VALUE,W,INCLUDE-BOOK-ALIST,GLOBAL-VAL,CERT-OBJ,ACCESS,INCLUDE-BOOK-ALIST-SUBSETP,CONSP,COND,CONVERT-PCERT,QUOTE,EQ,GET-CMDS-FROM-PORTCULLIS,SYMBOLP,ASSERT$,CHK-RAISE-PORTCULLIS1,IF,PORTCULLIS-CMDS,ER-LET*,WITH-RECKLESS-READTABLE,EVALP,SUSPECT-BOOK-ACTION-ALIST,STATE,CTX,CALLER,LIGHT-CHKP,CH-OR-CERT-OBJ,FILE2,FILE1,DEFUN" data-used-by="CHK-CERTIFICATE-FILE1" data-part-name="CHK-RAISE-PORTCULLIS" data-part-args="EVALP,SUSPECT-BOOK-ACTION-ALIST,STATE,CTX,CALLER,LIGHT-CHKP,CH-OR-CERT-OBJ,FILE2,FILE1" data-part-body="MAKE,CONS,TILDE-*-BOOK-HASH-PHRASE,MSGS,MSG,INCLUDE-BOOK-ER1,WARNING-DISABLED-P,SUSPECT-BOOK-ACTION-ALIST,INCLUDE-BOOK-ER-WARNING-SUMMARY,WARNING-SUMMARY,OR,LIST,CHK-RAISE-PORTCULLIS{CERT-HASH},ACTUAL-ALIST,CERT-HASH,LIGHT-CHKP,CERT-HASH2,CHK-RAISE-PORTCULLIS{POST-ALIST-2},CHK-RAISE-PORTCULLIS{PRE-ALIST-2},INCLUDE-BOOK-ALISTP,EQUAL,NOT,BOOK-NAME-TO-FILENAME,FILENAME,LET,CAAR,SYSFILE-P,CAR,AND,UNEXPECTED-FROM-BOOK-NAME,PCERT-INFO,CERT-HASH1,POST-ALIST3,PRE-ALIST,CERT-DATA-FAL,CERT-DATA,NTH,EXPANSION-ALIST,LET*,CHK-RAISE-PORTCULLIS{READ-FILE-INTO-TEMPLATE},ILL-FORMED-CERTIFICATE-ER,INCLUDE-BOOK-RAW,READ-FILE-INTO-TEMPLATE,TUPLE,ERP,MV-LET,INCLUDE-BOOK-RAW-ERROR,T,VALUE,W,INCLUDE-BOOK-ALIST,GLOBAL-VAL,CERT-OBJ,ACCESS,INCLUDE-BOOK-ALIST-SUBSETP,CONSP,COND,CONVERT-PCERT,QUOTE,CALLER,EQ,GET-CMDS-FROM-PORTCULLIS,SYMBOLP,ASSERT$,STATE,CTX,CH-OR-CERT-OBJ,FILE2,FILE1,CHK-RAISE-PORTCULLIS1,EVALP,IF,PORTCULLIS-CMDS,ER-LET*,WITH-RECKLESS-READTABLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-RAISE-PORTCULLIS">chk-raise-portcullis</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-raise-portcullis" data-sym="CHK-RAISE-PORTCULLIS" title="(defun chk-raise-portcullis
       (file1 file2 ch-or-cert-obj light-chkp caller ctx state
        suspect-book-action-alist evalp)
  (with-reckless-readtable
   (er-let*
...">chk-raise-portcullis</a>
  (file1 file2
    ch-or-cert-obj
    light-chkp
    caller
    ctx
    state
    suspect-book-action-alist
    evalp)
  (<a class="sym-link system" href="axioms.html#def-with-reckless-readtable" data-sym="WITH-RECKLESS-READTABLE">with-reckless-readtable</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((portcullis-cmds (if evalp
           (<a class="sym-link local-def" href="#def-chk-raise-portcullis1" data-sym="CHK-RAISE-PORTCULLIS1" title="(defun chk-raise-portcullis1 (file1 file2 ch-or-cert-obj port-file-p ctx state)
  (state-global-let*
   ((ld-skip-proofsp &#39;include-book) (skip-proofs-by-system t)
    (in-local-flg
     (and (f-get-global &#39;in-local-flg state) &#39;local-include-book)))
...">chk-raise-portcullis1</a> file1
             file2
             ch-or-cert-obj
             nil
             ctx
             state)
           (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (symbolp ch-or-cert-obj)
             (<a class="sym-link local-def" href="#def-get-cmds-from-portcullis" data-sym="GET-CMDS-FROM-PORTCULLIS" title="(defun get-cmds-from-portcullis (file1 file2 eval-hidden-defpkgs ch ctx state)
  (revert-world-on-error
   (let* ((wrld (w state))
          (events
           (hidden-defpkg-events-simple (global-val &#39;known-package-alist wrld)
...">get-cmds-from-portcullis</a> file1
               file2
               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'convert-pcert)
               ch-or-cert-obj
               ctx
               state)))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp ch-or-cert-obj) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-include-book-alist-subsetp" data-sym="INCLUDE-BOOK-ALIST-SUBSETP" title="(defun include-book-alist-subsetp (alist1 alist2)
  (subsetp-equal (strip-cddrs alist1) (strip-cddrs alist2)))">include-book-alist-subsetp</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj ch-or-cert-obj <span class="keyword">:pre-alist</span>)
               (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> ch-or-cert-obj))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"There is a problem with the certificate, which may be ~
                described below in detail."</span>
                state))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp tuple state)
            (<a class="sym-link local-def" href="#def-read-file-into-template" data-sym="READ-FILE-INTO-TEMPLATE" title="(defun read-file-into-template (template ch state acc)
  (cond
   ((null template)
    (mv-let (eofp val state) (read-object ch state)
            (cond (eofp (value (reverse acc)))
...">read-file-into-template</a> '(<span class="keyword">:expansion-alist</span> <span class="keyword">:cert-data</span> nil nil nil <span class="keyword">:pcert-info</span>)
              ch-or-cert-obj
              state
              nil)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)
                  (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"Ill-formed certificate"</span> state)
                  (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                    '|CHK-RAISE-PORTCULLIS{READ-FILE-INTO-TEMPLATE}|
                    file1
                    file2)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((expansion-alist (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> tuple)) (cert-data (<a class="sym-link local-def" href="#def-cert-data-fal" data-sym="CERT-DATA-FAL" title="(defun cert-data-fal (cert-data)
  (let* ((pair1 (assoc-eq :translate cert-data))
         (a1
          (if pair1
              (acons :translate (make-fast-alist (cdr pair1)) nil)
...">cert-data-fal</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> tuple)))
                    (pre-alist (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> tuple))
                    (post-alist3 (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> tuple))
                    (cert-hash1 (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> tuple))
                    (pcert-info (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'convert-pcert)
                        (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> tuple)
                        nil))
                    (unexpected-from-book-name (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp post-alist3)
                        (consp (car post-alist3))
                        (<a class="sym-link system" href="basis-a.html#def-sysfile-p" data-sym="SYSFILE-P">sysfile-p</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> post-alist3))
                        (let ((filename (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename" data-sym="BOOK-NAME-TO-FILENAME">book-name-to-filename</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> post-alist3) (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state) ctx)))
                          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal filename file1)) filename)))))
                  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pre-alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-include-book-alistp" data-sym="INCLUDE-BOOK-ALISTP" title="(defun include-book-alistp (x local-markers-allowedp)
  (include-book-alistp-1 x local-markers-allowedp))">include-book-alistp</a> pre-alist nil) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pre-alist))
                         ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw) (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"Ill-formed certificate"</span> state))
                         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                             '|CHK-RAISE-PORTCULLIS{PRE-ALIST-2}|
                             file1
                             file2
                             pre-alist)))) (post-alist3 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-include-book-alistp" data-sym="INCLUDE-BOOK-ALISTP" title="(defun include-book-alistp (x local-markers-allowedp)
  (include-book-alistp-1 x local-markers-allowedp))">include-book-alistp</a> post-alist3 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> post-alist3))
                          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw) (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"Ill-formed certificate"</span> state))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                              '|CHK-RAISE-PORTCULLIS{POST-ALIST-2}|
                              file1
                              file2
                              post-alist3))))
                      (cert-hash2 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> light-chkp)
                            (<a class="sym-link local-def" href="#def-cert-hash" data-sym="CERT-HASH" title="(defun cert-hash
       (old-cert-hash cmds pre-alist post-alist expansion-alist cert-data
        state)
  (cond
   ((if old-cert-hash
...">cert-hash</a> cert-hash1
                              portcullis-cmds
                              pre-alist
                              post-alist3
                              expansion-alist
                              cert-data
                              state))))
                      (actual-alist (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> light-chkp) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal cert-hash1 cert-hash2))) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)
                          (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"Ill-formed certificate"</span> state)
                          (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                            '|CHK-RAISE-PORTCULLIS{CERT-HASH}|
                            file1
                            file2
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:cert-hash1</span> cert-hash1 <span class="keyword">:cert-hash2</span> cert-hash2))))
                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> light-chkp)
                         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> unexpected-from-book-name
                           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw))
                             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-include-book-alist-subsetp" data-sym="INCLUDE-BOOK-ALIST-SUBSETP" title="(defun include-book-alist-subsetp (alist1 alist2)
  (subsetp-equal (strip-cddrs alist1) (strip-cddrs alist2)))">include-book-alist-subsetp</a> pre-alist actual-alist))))) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)
                          (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"Unexpected error"</span> state)
                          (let ((warning-summary (<a class="sym-link local-def" href="#def-include-book-er-warning-summary" data-sym="INCLUDE-BOOK-ER-WARNING-SUMMARY" title="(defun include-book-er-warning-summary
       (keyword suspect-book-action-alist state)
  (let ((keyword-string
         (case keyword
           (:uncertified-okp &quot;Uncertified&quot;)
...">include-book-er-warning-summary</a> <span class="keyword">:uncertified-okp</span> suspect-book-action-alist
                                 state)))
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal warning-summary <span class="string">"Uncertified"</span>)
                                   (<a class="sym-link system" href="basis-a.html#def-warning-disabled-p" data-sym="WARNING-DISABLED-P">warning-disabled-p</a> <span class="string">"Uncertified"</span>))
                                 (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                              (unexpected-from-book-name (<a class="sym-link local-def" href="#def-include-book-er1" data-sym="INCLUDE-BOOK-ER1" title="(defun include-book-er1 (file1 file2 msg warning-summary ctx state)
  (cond ((null warning-summary) (er soft ctx &quot;~@2&quot; file1 file2 msg))
        ((symbolp warning-summary)
         (cond
          ((member-eq (cert-op state) &#39;(nil :write-acl2xu))
...">include-book-er1</a> file1
                                  file2
                                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The book being ~
                                               included,~|~s0,~%is not in the ~
                                               location expected for the ACL2 ~
                                               executable being used:~|~s1."</span>
                                    file1
                                    unexpected-from-book-name)
                                  warning-summary
                                  ctx
                                  state))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (msgs state)
                                  (<a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase" data-sym="TILDE-*-BOOK-HASH-PHRASE" title="(defun tilde-*-book-hash-phrase (reqd-alist actual-alist state)
  (mv-let (phrase1 state)
          (tilde-*-book-hash-phrase1 reqd-alist actual-alist state)
          (mv (list &quot;~|&quot; &quot;~|~@*&quot; &quot;~|~@*;~|&quot; &quot;~|~@*;~|&quot; phrase1) state)))">tilde-*-book-hash-phrase</a> pre-alist actual-alist state)
                                  (<a class="sym-link local-def" href="#def-include-book-er1" data-sym="INCLUDE-BOOK-ER1" title="(defun include-book-er1 (file1 file2 msg warning-summary ctx state)
  (cond ((null warning-summary) (er soft ctx &quot;~@2&quot; file1 file2 msg))
        ((symbolp warning-summary)
         (cond
          ((member-eq (cert-op state) &#39;(nil :write-acl2xu))
...">include-book-er1</a> file1
                                    file2
                                    (cons <span class="string">"After evaluating the ~
                                               portcullis commands for the ~
                                               book ~x0:~|~*3."</span>
                                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\3 msgs)))
                                    warning-summary
                                    ctx
                                    state)))))))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cert-obj
                            <span class="keyword">:cmds</span> portcullis-cmds
                            <span class="keyword">:cert-data</span> cert-data
                            <span class="keyword">:pre-alist</span> pre-alist
                            <span class="keyword">:post-alist</span> post-alist3
                            <span class="keyword">:expansion-alist</span> expansion-alist
                            <span class="keyword">:pcert-info</span> pcert-info))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-certificate-file1" data-defines="CHK-CERTIFICATE-FILE1" data-references="CHK-CERTIFICATE-FILE1{ACL2-VERSION},VALUE,ER-PROGN,CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-4},CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-3},SUBSEQ,LENGTH,<=,MV,INCLUDE-BOOK-ER,VAL,ERP,ACL2-VERSION-R-P,CONS,MSG,STRINGP,STRING,CONCATENATE,CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-2},CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-1},KEY,LIST,F-PUT-GLOBAL,SYSFILE-TO-FILENAME,S,LET,FAST-CERT-INCLUDED-BOOK,NOT,PPROGN,EQUAL,OR,VERSION-OKP,FAST-CERT-STATUS,CAR,VERSION,HACKP,F-GET-GLOBAL,ACL2-VERSION,LET*,CHK-CERTIFICATE-FILE1{EMPTY},ILL-FORMED-CERTIFICATE-ER,INCLUDE-BOOK-RAW-ERROR,INCLUDE-BOOK-RAW,QUOTE,EQ,IF,SYMBOLP,AND,READ-OBJECT,VERSION0,EOFP,MV-LET,T,CHK-RAISE-PORTCULLIS,CONSP,COND,EVALP,SUSPECT-BOOK-ACTION-ALIST,STATE,CTX,CALLER,LIGHT-CHKP,CH-OR-CERT-OBJ,FILE2,FILE1,DEFUN" data-used-by="CHK-CERTIFICATE-FILE" data-part-name="CHK-CERTIFICATE-FILE1" data-part-args="EVALP,SUSPECT-BOOK-ACTION-ALIST,STATE,CTX,CALLER,LIGHT-CHKP,CH-OR-CERT-OBJ,FILE2,FILE1" data-part-body="CHK-CERTIFICATE-FILE1{ACL2-VERSION},VALUE,ER-PROGN,CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-4},CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-3},SUBSEQ,LENGTH,<=,MV,INCLUDE-BOOK-ER,VAL,ERP,ACL2-VERSION-R-P,CONS,MSG,STRINGP,STRING,CONCATENATE,CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-2},CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-1},KEY,LIST,F-PUT-GLOBAL,SYSFILE-TO-FILENAME,S,LET,FAST-CERT-INCLUDED-BOOK,NOT,PPROGN,EQUAL,OR,VERSION-OKP,FAST-CERT-STATUS,CAR,VERSION,HACKP,F-GET-GLOBAL,ACL2-VERSION,LET*,CHK-CERTIFICATE-FILE1{EMPTY},ILL-FORMED-CERTIFICATE-ER,INCLUDE-BOOK-RAW-ERROR,INCLUDE-BOOK-RAW,QUOTE,EQ,IF,SYMBOLP,AND,READ-OBJECT,VERSION0,EOFP,MV-LET,T,EVALP,SUSPECT-BOOK-ACTION-ALIST,STATE,CTX,CALLER,LIGHT-CHKP,FILE2,FILE1,CHK-RAISE-PORTCULLIS,CH-OR-CERT-OBJ,CONSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-CERTIFICATE-FILE1">chk-certificate-file1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-certificate-file1" data-sym="CHK-CERTIFICATE-FILE1" title="(defun chk-certificate-file1
       (file1 file2 ch-or-cert-obj light-chkp caller ctx state
        suspect-book-action-alist evalp)
  (cond
   ((consp ch-or-cert-obj)
...">chk-certificate-file1</a>
  (file1 file2
    ch-or-cert-obj
    light-chkp
    caller
    ctx
    state
    suspect-book-action-alist
    evalp)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp ch-or-cert-obj) (<a class="sym-link local-def" href="#def-chk-raise-portcullis" data-sym="CHK-RAISE-PORTCULLIS" title="(defun chk-raise-portcullis
       (file1 file2 ch-or-cert-obj light-chkp caller ctx state
        suspect-book-action-alist evalp)
  (with-reckless-readtable
   (er-let*
...">chk-raise-portcullis</a> file1
        file2
        ch-or-cert-obj
        light-chkp
        caller
        ctx
        state
        suspect-book-action-alist
        evalp))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp version0 state)
        (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch-or-cert-obj state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> eofp (symbolp ch-or-cert-obj)) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)
              (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"Reached end-of-file while reading version."</span>
                state)
              (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                '|CHK-CERTIFICATE-FILE1{EMPTY}|
                file1
                file2)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((acl2-version (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'acl2-version state)) (hackp (consp version0))
                (version (if hackp
                    (car version0)
                    version0))
                (fast-cert-status (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'fast-cert-status state))
                (version-okp (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal version0 acl2-version)
                    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> fast-cert-status (equal version acl2-version)))))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> hackp
                     fast-cert-status
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="history-management.html#def-fast-cert-included-book" data-sym="FAST-CERT-INCLUDED-BOOK">fast-cert-included-book</a> fast-cert-status))) (let ((s (<a class="sym-link local-def" href="#def-sysfile-to-filename" data-sym="SYSFILE-TO-FILENAME" title="(defun sysfile-to-filename (x state)
  (cond
   ((sysfile-p x) (extend-pathname (sysfile-key x) (sysfile-filename x) state))
   (t x)))">sysfile-to-filename</a> file1 state)))
                      (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'fast-cert-status
                        (if (consp fast-cert-status)
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> s)
                          s)
                        state)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (version-okp (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp key state)
                      (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch-or-cert-obj state)
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)
                            (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"Reached end-of-file after reading version."</span>
                              state)
                            (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                              '|CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-1}|
                              file1
                              file2)))
                        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key <span class="keyword">:begin-portcullis-cmds</span>)) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)
                            (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"Expected :BEGIN-PORTCULLIS-CMDS."</span>
                              state)
                            (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                              '|CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-2}|
                              file1
                              file2
                              key)))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-raise-portcullis" data-sym="CHK-RAISE-PORTCULLIS" title="(defun chk-raise-portcullis
       (file1 file2 ch-or-cert-obj light-chkp caller ctx state
        suspect-book-action-alist evalp)
  (with-reckless-readtable
   (er-let*
...">chk-raise-portcullis</a> file1
                            file2
                            ch-or-cert-obj
                            light-chkp
                            caller
                            ctx
                            state
                            suspect-book-action-alist
                            evalp)))))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw) (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
                        <span class="string">"Illegal version string read: "</span>
                        (if (stringp version)
                          version
                          <span class="string">"expected a string or list of a string"</span>))
                      state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal version acl2-version) (cons <span class="string">"~x0 was certified using fast-cert mode enabled, but ~
                        fast-cert mode is currently disabled.  See :DOC ~
                        fast-cert.  No compiled file will be loaded with this ~
                        book."</span>
                               nil))
                           ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link local-def" href="#def-acl2-version-r-p" data-sym="ACL2-VERSION-R-P" title="(defun acl2-version-r-p (version)
  (let ((p (position #\( version)))
    (and p (&lt; (+ p 2) (length version))
         (equal (subseq version p (+ p 3)) &quot;(r)&quot;))))">acl2-version-r-p</a> acl2-version)
                                (<a class="sym-link local-def" href="#def-acl2-version-r-p" data-sym="ACL2-VERSION-R-P" title="(defun acl2-version-r-p (version)
  (let ((p (position #\( version)))
    (and p (&lt; (+ p 2) (length version))
         (equal (subseq version p (+ p 3)) &quot;(r)&quot;))))">acl2-version-r-p</a> version))) (cons <span class="string">"We do not permit ACL2 books to be processed by ~
                        ACL2(r) or vice versa.  ~x0 was certified with ~sa ~
                        but this is ~sb.  No compiled file will be loaded ~
                        with this book."</span>
                               (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\a version) (cons #\b acl2-version))))
                           (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons <span class="string">"~x0 was apparently certified with ~sa.  The ~
                             inclusion of this book in the current ACL2 may ~
                             render this ACL2 session unsound!  We recommend ~
                             you recertify the book with the current version, ~
                             ~sb.  See :DOC version.  No compiled file will ~
                             be loaded with this book."</span>
                               (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\a version) (cons #\b acl2-version)))))))
                      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
                        (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> file1
                          file2
                          <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
                          <span class="keyword">:uncertified-okp</span> suspect-book-action-alist
                          ctx
                          state)
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state))
                          ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp version)
                             (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">13</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> version))
                             (equal (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> version <span class="number">0</span> <span class="number">13</span>) <span class="string">"ACL2 Version "</span>)) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp key state)
                              (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch-or-cert-obj state)
                              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                                    '|CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-3}|
                                    file1
                                    file2))
                                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key <span class="keyword">:begin-portcullis-cmds</span>)) (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                                    '|CHK-CERTIFICATE-FILE1{BEGIN-PORTCULLIS-CMDS-4}|
                                    file1
                                    file2
                                    key))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-raise-portcullis" data-sym="CHK-RAISE-PORTCULLIS" title="(defun chk-raise-portcullis
       (file1 file2 ch-or-cert-obj light-chkp caller ctx state
        suspect-book-action-alist evalp)
  (with-reckless-readtable
   (er-let*
...">chk-raise-portcullis</a> file1
                                      file2
                                      ch-or-cert-obj
                                      light-chkp
                                      caller
                                      ctx
                                      state
                                      suspect-book-action-alist
                                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                              '|CHK-CERTIFICATE-FILE1{ACL2-VERSION}|
                              file1
                              file2
                              version)))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-certificate-file" data-defines="CERTIFICATE-FILE" data-references="AND,MV,T,CLOSE-INPUT-CHANNEL,COND,PPROGN,CERTIFICATE-FILE-AND-INPUT-CHANNEL,CERT-NAME,CH,MV-LET,STATE,FULL-BOOK-STRING,DEFUN" data-part-name="CERTIFICATE-FILE" data-part-args="STATE,FULL-BOOK-STRING" data-part-body="AND,MV,T,CLOSE-INPUT-CHANNEL,COND,PPROGN,FULL-BOOK-STRING,CERTIFICATE-FILE-AND-INPUT-CHANNEL,STATE,CERT-NAME,CH,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFICATE-FILE">certificate-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certificate-file" data-sym="CERTIFICATE-FILE" title="(defun certificate-file (full-book-string state)
  (mv-let (ch cert-name state)
          (certificate-file-and-input-channel full-book-string nil nil state)
          (pprogn (cond (ch (close-input-channel ch state)) (t state))
                  (mv (and ch cert-name) state))))">certificate-file</a>
  (full-book-string state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch cert-name state)
    (<a class="sym-link local-def" href="#def-certificate-file-and-input-channel" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL" title="(defun certificate-file-and-input-channel
       (full-book-string full-book-name old-cert-op state)
  (mv-let (cert-obj cert-filename state)
          (if full-book-name
              (get-cert-obj-and-cert-filename full-book-name state)
...">certificate-file-and-input-channel</a> full-book-string
      nil
      nil
      state)
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ch (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> ch state)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ch cert-name) state))))</pre>
  </div>

<div class="form-block function" id="def-defconst-form-to-elide" data-defines="DEFCONST-FORM-TO-ELIDE" data-references="T,&,DEFCONST,QUOTE,CASE-MATCH,EV,DEFUN" data-used-by="SUBST-BY-POSITION-ELIDING-DEFCONST2" data-part-name="DEFCONST-FORM-TO-ELIDE" data-part-args="EV" data-part-body="T,&,DEFCONST,QUOTE,EV,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFCONST-FORM-TO-ELIDE">defconst-form-to-elide</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defconst-form-to-elide" data-sym="DEFCONST-FORM-TO-ELIDE" title="(defun defconst-form-to-elide (ev)
  (case-match ev ((&#39;defconst &amp; (&#39;quote &amp;)) t) (&amp; nil)))">defconst-form-to-elide</a>
  (ev)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> ev (('<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> &amp; ('quote &amp;)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (&amp; nil)))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-hcomp-elided-defconst-alist2" data-defines="HCOMP-ELIDED-DEFCONST-ALIST2" data-references="CDR,T,ENDP,COND,WITH-PROVER-STEP-LIMIT,LAST,CAR,WITH-OUTPUT,SKIP-PROOFS,WITH-GUARD-CHECKING-EVENT,X,RECORD-EXPANSION,ENCAPSULATE,HCOMP-ELIDED-DEFCONST-ALIST2-LST,LST,PROGN,CADDR,CONS,ACONS,&,NAME,DEFCONST,QUOTE,CASE-MATCH,ALIST,EV,INDEX,DEFUN,MUTUAL-RECURSION" data-used-by="HCOMP-ELIDED-DEFCONST-ALIST1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-ELIDED-DEFCONST-ALIST2">hcomp-elided-defconst-alist2</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist2" data-sym="HCOMP-ELIDED-DEFCONST-ALIST2" title="(mutual-recursion
 (defun hcomp-elided-defconst-alist2 (index ev alist)
   (case-match ev
               ((&#39;defconst name (&#39;quote &amp;))
                (acons index (cons name (caddr ev)) alist))
...">hcomp-elided-defconst-alist2</a>
    (index ev alist)
    (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> ev
      (('<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> name ('quote &amp;)) (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> index (cons name (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> ev)) alist))
      (('<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> . lst) (hcomp-elided-defconst-alist2-lst index lst alist))
      (('<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> &amp; . lst) (hcomp-elided-defconst-alist2-lst index lst alist))
      (('<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a> &amp; x) (<a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist2" data-sym="HCOMP-ELIDED-DEFCONST-ALIST2" title="(mutual-recursion
 (defun hcomp-elided-defconst-alist2 (index ev alist)
   (case-match ev
               ((&#39;defconst name (&#39;quote &amp;))
                (acons index (cons name (caddr ev)) alist))
...">hcomp-elided-defconst-alist2</a> index x alist))
      (('<a class="sym-link system" href="axioms.html#def-with-guard-checking-event" data-sym="WITH-GUARD-CHECKING-EVENT">with-guard-checking-event</a> &amp; x) (<a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist2" data-sym="HCOMP-ELIDED-DEFCONST-ALIST2" title="(mutual-recursion
 (defun hcomp-elided-defconst-alist2 (index ev alist)
   (case-match ev
               ((&#39;defconst name (&#39;quote &amp;))
                (acons index (cons name (caddr ev)) alist))
...">hcomp-elided-defconst-alist2</a> index x alist))
      (('<a class="sym-link system" href="axioms.html#def-skip-proofs" data-sym="SKIP-PROOFS">skip-proofs</a> x) (<a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist2" data-sym="HCOMP-ELIDED-DEFCONST-ALIST2" title="(mutual-recursion
 (defun hcomp-elided-defconst-alist2 (index ev alist)
   (case-match ev
               ((&#39;defconst name (&#39;quote &amp;))
                (acons index (cons name (caddr ev)) alist))
...">hcomp-elided-defconst-alist2</a> index x alist))
      (('<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> . lst) (hcomp-elided-defconst-alist2-lst index
          (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> lst))
          alist))
      (('<a class="sym-link system" href="history-management.html#def-with-prover-step-limit" data-sym="WITH-PROVER-STEP-LIMIT">with-prover-step-limit</a> &amp; &amp; x) (hcomp-elided-defconst-alist2-lst index x alist))
      (('<a class="sym-link system" href="history-management.html#def-with-prover-step-limit" data-sym="WITH-PROVER-STEP-LIMIT">with-prover-step-limit</a> &amp; x) (hcomp-elided-defconst-alist2-lst index x alist))
      (&amp; alist)))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> hcomp-elided-defconst-alist2-lst
    (index lst alist)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) alist)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist2" data-sym="HCOMP-ELIDED-DEFCONST-ALIST2" title="(mutual-recursion
 (defun hcomp-elided-defconst-alist2 (index ev alist)
   (case-match ev
               ((&#39;defconst name (&#39;quote &amp;))
                (acons index (cons name (caddr ev)) alist))
...">hcomp-elided-defconst-alist2</a> index
          (car lst)
          (hcomp-elided-defconst-alist2-lst index (cdr lst) alist))))))</pre>
  </div>

<div class="form-block function" id="def-hcomp-elided-defconst-alist1" data-defines="HCOMP-ELIDED-DEFCONST-ALIST1" data-references="CDR,HCOMP-ELIDED-DEFCONST-ALIST2,CDAR,EV,CAAR,INDEX,LET,T,ENDP,COND,ALISTP,XARGS,DECLARE,ALIST,DEFUN" data-used-by="HCOMP-ELIDED-DEFCONST-ALIST" data-part-name="HCOMP-ELIDED-DEFCONST-ALIST1" data-part-args="ALIST" data-part-declare="ALIST,ALISTP,XARGS,DECLARE" data-part-body="CDR,HCOMP-ELIDED-DEFCONST-ALIST1,HCOMP-ELIDED-DEFCONST-ALIST2,CDAR,EV,CAAR,INDEX,LET,T,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-ELIDED-DEFCONST-ALIST1">hcomp-elided-defconst-alist1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist1" data-sym="HCOMP-ELIDED-DEFCONST-ALIST1" title="(defun hcomp-elided-defconst-alist1 (alist)
  (declare (xargs :guard (alistp alist)))
  (cond ((endp alist) nil)
        (t
         (let ((index (caar alist)) (ev (cdar alist)))
...">hcomp-elided-defconst-alist1</a>
  (alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> alist)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((index (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (ev (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)))
        (<a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist2" data-sym="HCOMP-ELIDED-DEFCONST-ALIST2" title="(mutual-recursion
 (defun hcomp-elided-defconst-alist2 (index ev alist)
   (case-match ev
               ((&#39;defconst name (&#39;quote &amp;))
                (acons index (cons name (caddr ev)) alist))
...">hcomp-elided-defconst-alist2</a> index
          ev
          (<a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist1" data-sym="HCOMP-ELIDED-DEFCONST-ALIST1" title="(defun hcomp-elided-defconst-alist1 (alist)
  (declare (xargs :guard (alistp alist)))
  (cond ((endp alist) nil)
        (t
         (let ((index (caar alist)) (ev (cdar alist)))
...">hcomp-elided-defconst-alist1</a> (cdr alist)))))))</pre>
  </div>

<div class="form-block function" id="def-hcomp-elided-defconst-alist" data-defines="HCOMP-ELIDED-DEFCONST-ALIST" data-references="HCOMP-ELIDED-DEFCONST-ALIST1,T,NULL,COND,ACCESS,ALISTP,WEAK-CERT-OBJ-P,AND,XARGS,DECLARE,CERT-OBJ,DEFUN" data-part-name="HCOMP-ELIDED-DEFCONST-ALIST" data-part-args="CERT-OBJ" data-part-declare="ACCESS,ALISTP,CERT-OBJ,WEAK-CERT-OBJ-P,AND,XARGS,DECLARE" data-part-body="ACCESS,HCOMP-ELIDED-DEFCONST-ALIST1,T,CERT-OBJ,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-ELIDED-DEFCONST-ALIST">hcomp-elided-defconst-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist" data-sym="HCOMP-ELIDED-DEFCONST-ALIST" title="(defun hcomp-elided-defconst-alist (cert-obj)
  (declare
   (xargs :guard
    (and (weak-cert-obj-p cert-obj)
         (alistp (access cert-obj cert-obj :expansion-alist)))))
...">hcomp-elided-defconst-alist</a>
  (cert-obj)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (weak-cert-obj-p cert-obj)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:expansion-alist</span>)))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> cert-obj) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-hcomp-elided-defconst-alist1" data-sym="HCOMP-ELIDED-DEFCONST-ALIST1" title="(defun hcomp-elided-defconst-alist1 (alist)
  (declare (xargs :guard (alistp alist)))
  (cond ((endp alist) nil)
        (t
         (let ((index (caar alist)) (ev (cdar alist)))
...">hcomp-elided-defconst-alist1</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:expansion-alist</span>)))))</pre>
  </div>

<div class="form-block function" id="def-convert-cert-file-to-pcert-op" data-defines="CONVERT-CERT-FILE-TO-PCERT-OP" data-references="T,STRING-SUFFIXP,COND,FILE,DEFUN" data-used-by="CHK-CERTIFICATE-FILE" data-part-name="CONVERT-CERT-FILE-TO-PCERT-OP" data-part-args="FILE" data-part-body="T,FILE,STRING-SUFFIXP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONVERT-CERT-FILE-TO-PCERT-OP">convert-cert-file-to-pcert-op</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-convert-cert-file-to-pcert-op" data-sym="CONVERT-CERT-FILE-TO-PCERT-OP" title="(defun convert-cert-file-to-pcert-op (file)
  (cond ((string-suffixp &quot;pcert0&quot; file) :create-pcert)
        ((string-suffixp &quot;pcert1&quot; file) :convert-pcert) (t nil)))">convert-cert-file-to-pcert-op</a>
  (file)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="basis-a.html#def-string-suffixp" data-sym="STRING-SUFFIXP">string-suffixp</a> <span class="string">"pcert0"</span> file) <span class="keyword">:create-pcert</span>)
    ((<a class="sym-link system" href="basis-a.html#def-string-suffixp" data-sym="STRING-SUFFIXP">string-suffixp</a> <span class="string">"pcert1"</span> file) <span class="keyword">:convert-pcert</span>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-chk-certificate-file" data-defines="CHK-CERTIFICATE-FILE" data-references="SET-W!,CLOSE-INPUT-CHANNEL,PPROGN,ASSERT$,CHANGE,CERT-OBJ,ACCESS,AND,CONVERT-CERT-FILE-TO-PCERT-OP,PCERT-OP,LET*,HARD,ER,OTHERWISE,PUFF,INCLUDE-BOOK,CASE,CHK-CERTIFICATE-FILE1,VAL,ERROR-FLG,W,SAVED-WRLD,CURRENT-PACKAGE,STATE-GLOBAL-LET*,WITH-CBD,CHK-CERTIFICATE-FILE{PKG},ILL-FORMED-CERTIFICATE-ER,STRINGP,STRING,CONCATENATE,EQUAL,NOT,VALUE,CHK-IN-PACKAGE,SYMBOLP,PKG,ER-LET*,T,INCLUDE-BOOK-ER,INCLUDE-BOOK-RAW-ERROR,INCLUDE-BOOK-RAW,NULL,COND,CONVERT-PCERT,QUOTE,EQ,IF,CERTIFICATE-FILE-AND-INPUT-CHANNEL,FILE2,CH-OR-CERT-OBJ,MV-LET,DIRECTORY-OF-ABSOLUTE-PATHNAME,OR,LET,EVALP,SUSPECT-BOOK-ACTION-ALIST,STATE,CTX,CALLER,FULL-BOOK-NAME,DIR,FILE1,DEFUN" data-used-by="INCLUDE-BOOK-CERT-OBJ-PRELIM,CERT-OBJ-FOR-CONVERT" data-part-name="CHK-CERTIFICATE-FILE" data-part-args="EVALP,SUSPECT-BOOK-ACTION-ALIST,STATE,CTX,CALLER,FULL-BOOK-NAME,DIR,FILE1" data-part-body="SET-W!,CLOSE-INPUT-CHANNEL,PPROGN,ASSERT$,CHANGE,CERT-OBJ,ACCESS,AND,CONVERT-CERT-FILE-TO-PCERT-OP,PCERT-OP,LET*,EVALP,HARD,ER,OTHERWISE,PUFF,INCLUDE-BOOK,CASE,CHK-CERTIFICATE-FILE1,VAL,ERROR-FLG,W,SAVED-WRLD,CURRENT-PACKAGE,STATE-GLOBAL-LET*,WITH-CBD,CHK-CERTIFICATE-FILE{PKG},ILL-FORMED-CERTIFICATE-ER,STRINGP,STRING,CONCATENATE,EQUAL,NOT,VALUE,CHK-IN-PACKAGE,SYMBOLP,PKG,ER-LET*,T,CTX,SUSPECT-BOOK-ACTION-ALIST,INCLUDE-BOOK-ER,INCLUDE-BOOK-RAW-ERROR,INCLUDE-BOOK-RAW,NULL,COND,CONVERT-PCERT,QUOTE,CALLER,EQ,IF,FULL-BOOK-NAME,CERTIFICATE-FILE-AND-INPUT-CHANNEL,STATE,FILE2,CH-OR-CERT-OBJ,MV-LET,FILE1,DIRECTORY-OF-ABSOLUTE-PATHNAME,OR,DIR,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-CERTIFICATE-FILE">chk-certificate-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-certificate-file" data-sym="CHK-CERTIFICATE-FILE" title="(defun chk-certificate-file
       (file1 dir full-book-name caller ctx state suspect-book-action-alist
        evalp)
  (let ((dir (or dir (directory-of-absolute-pathname file1))))
    (mv-let (ch-or-cert-obj file2 state)
...">chk-certificate-file</a>
  (file1 dir
    full-book-name
    caller
    ctx
    state
    suspect-book-action-alist
    evalp)
  (let ((dir (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> dir (<a class="sym-link local-def" href="#def-directory-of-absolute-pathname" data-sym="DIRECTORY-OF-ABSOLUTE-PATHNAME" title="(defun directory-of-absolute-pathname (pathname)
  (let* ((lst (coerce pathname &#39;list))
         (rlst (reverse lst))
         (temp (member *directory-separator* rlst)))
    (coerce (reverse temp) &#39;string)))">directory-of-absolute-pathname</a> file1))))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch-or-cert-obj file2 state)
      (<a class="sym-link local-def" href="#def-certificate-file-and-input-channel" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL" title="(defun certificate-file-and-input-channel
       (full-book-string full-book-name old-cert-op state)
  (mv-let (cert-obj cert-filename state)
          (if full-book-name
              (get-cert-obj-and-cert-filename full-book-name state)
...">certificate-file-and-input-channel</a> file1
        full-book-name
        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'convert-pcert)
          <span class="keyword">:create-pcert</span> nil)
        state)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch-or-cert-obj) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)
            (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"Certificate is unavailable."</span> state)
            (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> file1
              file2
              <span class="string">"There is no certificate on file for ~x0.  See ~
                            :DOC uncertified-books."</span>
              <span class="keyword">:uncertified-okp</span> suspect-book-action-alist
              ctx
              state)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pkg (if (symbolp ch-or-cert-obj)
                 (<a class="sym-link local-def" href="#def-chk-in-package" data-sym="CHK-IN-PACKAGE" title="(defun chk-in-package (channel file empty-okp ctx state)
  (state-global-let* ((current-package &quot;ACL2&quot;))
                     (mv-let (eofp val state) (read-object channel state)
                             (cond
                              (eofp
...">chk-in-package</a> ch-or-cert-obj file2 nil ctx state)
                 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="string">"ACL2"</span>))))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal pkg <span class="string">"ACL2"</span>)) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)
                  (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
                      <span class="string">"Unexpected package name read from certificate: "</span>
                      (if (stringp pkg)
                        pkg
                        <span class="string">"Not a string"</span>))
                    state)
                  (<a class="sym-link local-def" href="#def-ill-formed-certificate-er" data-sym="ILL-FORMED-CERTIFICATE-ER" title="(defmacro ill-formed-certificate-er
          (ctx mark file1 file2 &amp;optional (bad-object &#39;nil bad-objectp))
  `(er soft ,ctx
       &quot;The certificate for the book ~x0 is ill-formed.  Delete or rename the ~
       file ~x1 and recertify ~x0.  Remember that the certification world for ~
...">ill-formed-certificate-er</a> ctx
                    '|CHK-CERTIFICATE-FILE{PKG}|
                    file1
                    file2
                    pkg)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a> dir
                  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>))
                    (let ((saved-wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
                      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (error-flg val state)
                        (<a class="sym-link local-def" href="#def-chk-certificate-file1" data-sym="CHK-CERTIFICATE-FILE1" title="(defun chk-certificate-file1
       (file1 file2 ch-or-cert-obj light-chkp caller ctx state
        suspect-book-action-alist evalp)
  (cond
   ((consp ch-or-cert-obj)
...">chk-certificate-file1</a> file1
                          file2
                          ch-or-cert-obj
                          (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> caller
                            ((convert-pcert <a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> include-book-raw) nil)
                            (puff <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                            (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                                ctx
                                <span class="string">"Implementation error in chk-certificate-file: ~
                             Unexpected case!"</span>)))
                          caller
                          ctx
                          state
                          suspect-book-action-alist
                          evalp)
                        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pcert-op (<a class="sym-link local-def" href="#def-convert-cert-file-to-pcert-op" data-sym="CONVERT-CERT-FILE-TO-PCERT-OP" title="(defun convert-cert-file-to-pcert-op (file)
  (cond ((string-suffixp &quot;pcert0&quot; file) :create-pcert)
        ((string-suffixp &quot;pcert1&quot; file) :convert-pcert) (t nil)))">convert-cert-file-to-pcert-op</a> file2)) (val (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val pcert-op (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj val <span class="keyword">:pcert-info</span>))) (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> cert-obj
                                    val
                                    <span class="keyword">:pcert-info</span> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pcert-op <span class="keyword">:create-pcert</span>)
                                      <span class="keyword">:unproved</span> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pcert-op <span class="keyword">:convert-pcert</span>) <span class="keyword">:proved</span>))))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> val))))
                          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (symbolp ch-or-cert-obj)
                              (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> ch-or-cert-obj state)
                              state)
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (error-flg (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w_21" data-sym="SET-W!">set-w!</a> saved-wrld state)
                                  (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'include-book-raw)
                                    (<a class="sym-link local-def" href="#def-include-book-raw-error" data-sym="INCLUDE-BOOK-RAW-ERROR" title="(defun include-book-raw-error (str state) (declare (ignore str)) (value nil))">include-book-raw-error</a> <span class="string">"An error was encountered when checking the ~
                                certificate file."</span>
                                      state)
                                    (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> file1
                                      file2
                                      <span class="string">"An error was encountered when ~
                                              checking the certificate file ~
                                              for ~x0."</span>
                                      <span class="keyword">:uncertified-okp</span> suspect-book-action-alist
                                      ctx
                                      state))))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val)))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-equal-modulo-hidden-defpkgs" data-defines="EQUAL-MODULO-HIDDEN-DEFPKGS" data-references="&,DEFPKG,QUOTE,CASE-MATCH,CMD,LET,T,CDR,CAR,EQUAL,AND,ENDP,COND,CMDS2,CMDS1,DEFUN" data-used-by="CERT-OBJ-FOR-CONVERT" data-part-name="EQUAL-MODULO-HIDDEN-DEFPKGS" data-part-args="CMDS2,CMDS1" data-part-body="&,DEFPKG,QUOTE,CASE-MATCH,CMD,LET,T,CDR,EQUAL-MODULO-HIDDEN-DEFPKGS,CAR,EQUAL,AND,CMDS1,CMDS2,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EQUAL-MODULO-HIDDEN-DEFPKGS">equal-modulo-hidden-defpkgs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-equal-modulo-hidden-defpkgs" data-sym="EQUAL-MODULO-HIDDEN-DEFPKGS" title="(defun equal-modulo-hidden-defpkgs (cmds1 cmds2)
  (cond ((endp cmds2) (endp cmds1))
        ((and cmds1 (equal (car cmds1) (car cmds2)))
         (equal-modulo-hidden-defpkgs (cdr cmds1) (cdr cmds2)))
        (t
...">equal-modulo-hidden-defpkgs</a>
  (cmds1 cmds2)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> cmds2) (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> cmds1))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cmds1 (equal (car cmds1) (car cmds2))) (<a class="sym-link local-def" href="#def-equal-modulo-hidden-defpkgs" data-sym="EQUAL-MODULO-HIDDEN-DEFPKGS" title="(defun equal-modulo-hidden-defpkgs (cmds1 cmds2)
  (cond ((endp cmds2) (endp cmds1))
        ((and cmds1 (equal (car cmds1) (car cmds2)))
         (equal-modulo-hidden-defpkgs (cdr cmds1) (cdr cmds2)))
        (t
...">equal-modulo-hidden-defpkgs</a> (cdr cmds1) (cdr cmds2)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((cmd (car cmds2)))
        (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> cmd
          (('<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> &amp; &amp; &amp; &amp; '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-equal-modulo-hidden-defpkgs" data-sym="EQUAL-MODULO-HIDDEN-DEFPKGS" title="(defun equal-modulo-hidden-defpkgs (cmds1 cmds2)
  (cond ((endp cmds2) (endp cmds1))
        ((and cmds1 (equal (car cmds1) (car cmds2)))
         (equal-modulo-hidden-defpkgs (cdr cmds1) (cdr cmds2)))
        (t
...">equal-modulo-hidden-defpkgs</a> cmds1 (cdr cmds2)))
          (&amp; nil))))))</pre>
  </div>

<div class="form-block function" id="def-cert-obj-for-convert" data-defines="CERT-OBJ-FOR-CONVERT" data-references="T,EQUAL,VALUE,QUASIQUOTE,SOFT,ER,ACCESS,EQUAL-MODULO-HIDDEN-DEFPKGS,NOT,COND,CONVERT-PCERT,QUOTE,CHK-CERTIFICATE-FILE,CERT-OBJ,ER-LET*,STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,FIXED-CMDS,PRE-ALIST,DIR,FULL-BOOK-STRING,DEFUN" data-used-by="CHK-ACCEPTABLE-CERTIFY-BOOK1" data-part-name="CERT-OBJ-FOR-CONVERT" data-part-args="STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,FIXED-CMDS,PRE-ALIST,DIR,FULL-BOOK-STRING" data-part-body="T,PRE-ALIST,EQUAL,VALUE,QUASIQUOTE,SOFT,ER,ACCESS,FIXED-CMDS,EQUAL-MODULO-HIDDEN-DEFPKGS,NOT,COND,SUSPECT-BOOK-ACTION-ALIST,STATE,CTX,CONVERT-PCERT,QUOTE,DIR,FULL-BOOK-STRING,CHK-CERTIFICATE-FILE,CERT-OBJ,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-OBJ-FOR-CONVERT">cert-obj-for-convert</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-obj-for-convert" data-sym="CERT-OBJ-FOR-CONVERT" title="(defun cert-obj-for-convert
       (full-book-string dir pre-alist fixed-cmds suspect-book-action-alist ctx
        state)
  (er-let*
   ((cert-obj
...">cert-obj-for-convert</a>
  (full-book-string dir
    pre-alist
    fixed-cmds
    suspect-book-action-alist
    ctx
    state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cert-obj (<a class="sym-link local-def" href="#def-chk-certificate-file" data-sym="CHK-CERTIFICATE-FILE" title="(defun chk-certificate-file
       (file1 dir full-book-name caller ctx state suspect-book-action-alist
        evalp)
  (let ((dir (or dir (directory-of-absolute-pathname file1))))
    (mv-let (ch-or-cert-obj file2 state)
...">chk-certificate-file</a> full-book-string
         dir
         nil
         'convert-pcert
         ctx
         state
         suspect-book-action-alist
         nil)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-equal-modulo-hidden-defpkgs" data-sym="EQUAL-MODULO-HIDDEN-DEFPKGS" title="(defun equal-modulo-hidden-defpkgs (cmds1 cmds2)
  (cond ((endp cmds2) (endp cmds1))
        ((and cmds1 (equal (car cmds1) (car cmds2)))
         (equal-modulo-hidden-defpkgs (cdr cmds1) (cdr cmds2)))
        (t
...">equal-modulo-hidden-defpkgs</a> fixed-cmds
           (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:cmds</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The Convert procedure of provisional certification requires ~
                that the current ACL2 world at the start of that procedure ~
                agrees with the current ACL2 world present at the start of ~
                the Pcertify procedure.  However, these worlds appear to ~
                differ!  To see the current commands, use :pbt! 1.  To see ~
                the portcullis commands from the .pcert0 file, evaluate the ~
                following form:~|~Y01~|Now compare the result of that ~
                evaluation, ignoring DEFPKG events whose fifth argument (of ~
                five) is T, with (``fixed&#39;&#39;) portcullis commands of the ~
                current ACL2 world:~|~y2"</span>
          `(<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cert-obj (<a class="sym-link local-def" href="#def-chk-certificate-file" data-sym="CHK-CERTIFICATE-FILE" title="(defun chk-certificate-file
       (file1 dir full-book-name caller ctx state suspect-book-action-alist
        evalp)
  (let ((dir (or dir (directory-of-absolute-pathname file1))))
    (mv-let (ch-or-cert-obj file2 state)
...">chk-certificate-file</a> ,FULL-BOOK-STRING
                 ,DIR
                 'convert-pcert
                 ',CTX
                 state
                 ',SUSPECT-BOOK-ACTION-ALIST
                 nil)))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:cmds</span>)))
          nil
          fixed-cmds))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal pre-alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:pre-alist</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The Convert procedure of provisional certification requires ~
                that the include-book-alist at the start of that procedure ~
                (the ``pre-alist&#39;&#39;) agrees with the one present at the start ~
                of the Pcertify procedure.  However, these appear to differ!  ~
                The current world&#39;s pre-alist is:~|~%  ~y0~|~%The pre-alist ~
                from the Pcertify procedure (from the .pcert0 file) is:~|~%  ~
                ~y1~|~%"</span>
          pre-alist
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:pre-alist</span>)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> cert-obj)))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-certify-book1" data-defines="CHK-ACCEPTABLE-CERTIFY-BOOK1" data-references="CERT-OBJ,MAKE,CERT-OBJ-FOR-CONVERT,FIX-PORTCULLIS-CMDS,VALUE,NULL,FIXED-CMDS,ER-LET*,T,&,TILDE-*-&V-STRINGS,PROJECT-DIR-ALIST,BOOK-NAME-LST-TO-FILENAME-LST,UNCERT-BOOK-FILENAMES,ASSOC-EQUAL,LENGTH,EQL,SYMBOL-NAME-EQUAL,INTEGERP,SOFT,ER,DEFAULT-DEFUN-MODE,COND,INCLUDE-BOOK-ALIST-ALL,COLLECT-UNCERTIFIED-BOOKS,EQ,NOT,AND,UNCERT-BOOKS,INCLUDE-BOOK-ALIST,QUOTE,GLOBAL-VAL,PRE-ALIST-CERT-WRLD,LET,STATE,CTX,WRLD,SUSPECT-BOOK-ACTION-ALIST,CERT-OP,NAMES,CBDS,CMDS,K,DIR,FULL-BOOK-NAME,FULL-BOOK-STRING,USER-BOOK-NAME,DEFUN" data-used-by="CHK-ACCEPTABLE-CERTIFY-BOOK" data-part-name="CHK-ACCEPTABLE-CERTIFY-BOOK1" data-part-args="STATE,CTX,WRLD,SUSPECT-BOOK-ACTION-ALIST,CERT-OP,NAMES,CBDS,CMDS,K,DIR,FULL-BOOK-NAME,FULL-BOOK-STRING,USER-BOOK-NAME" data-part-body="CERT-OBJ,MAKE,SUSPECT-BOOK-ACTION-ALIST,CERT-OBJ-FOR-CONVERT,STATE,NAMES,DIR,FIX-PORTCULLIS-CMDS,VALUE,CBDS,NULL,FIXED-CMDS,ER-LET*,T,&,TILDE-*-&V-STRINGS,PROJECT-DIR-ALIST,BOOK-NAME-LST-TO-FILENAME-LST,UNCERT-BOOK-FILENAMES,FULL-BOOK-STRING,FULL-BOOK-NAME,ASSOC-EQUAL,USER-BOOK-NAME,CMDS,LENGTH,EQL,SYMBOL-NAME-EQUAL,K,INTEGERP,CTX,SOFT,ER,DEFAULT-DEFUN-MODE,COND,INCLUDE-BOOK-ALIST-ALL,COLLECT-UNCERTIFIED-BOOKS,CERT-OP,EQ,NOT,AND,UNCERT-BOOKS,WRLD,INCLUDE-BOOK-ALIST,QUOTE,GLOBAL-VAL,PRE-ALIST-CERT-WRLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-CERTIFY-BOOK1">chk-acceptable-certify-book1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-certify-book1" data-sym="CHK-ACCEPTABLE-CERTIFY-BOOK1" title="(defun chk-acceptable-certify-book1
       (user-book-name full-book-string full-book-name dir k cmds cbds names
        cert-op suspect-book-action-alist wrld ctx state)
  (let ((pre-alist-cert-wrld (global-val &#39;include-book-alist wrld))
        (uncert-books
...">chk-acceptable-certify-book1</a>
  (user-book-name full-book-string
    full-book-name
    dir
    k
    cmds
    cbds
    names
    <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
    suspect-book-action-alist
    wrld
    ctx
    state)
  (let ((pre-alist-cert-wrld (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist wrld)) (uncert-books (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:write-acl2xu</span>))
          (<a class="sym-link local-def" href="#def-collect-uncertified-books" data-sym="COLLECT-UNCERTIFIED-BOOKS" title="(defun collect-uncertified-books (alist)
  (cond ((null alist) nil)
        ((null (cddddr (car alist)))
         (cons (caar alist) (collect-uncertified-books (cdr alist))))
        (t (collect-uncertified-books (cdr alist)))))">collect-uncertified-books</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist-all wrld)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-default-defun-mode" data-sym="DEFAULT-DEFUN-MODE">default-defun-mode</a> wrld) <span class="keyword">:logic</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"Books must be certified in :LOGIC mode.  The current mode is ~x0."</span>
          (<a class="sym-link system" href="axioms.html#def-default-defun-mode" data-sym="DEFAULT-DEFUN-MODE">default-defun-mode</a> wrld)))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (integerp k)) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbol-name-equal k <span class="string">"?"</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The second argument to certify-book must be a natural number or ~
           the symbol ? (in any package).  You supplied ~x0.  See :DOC ~
           certify-book."</span>
          k))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbol-name-equal k <span class="string">"?"</span>))
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> k (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> cmds)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"Your certify-book command specifies a certification world of ~
           length ~x0 but it is actually of length ~x1.  Perhaps you intended ~
           to issue a command of the form: (certify-book ~x2 ~x1 ...).  See ~
           :DOC certify-book."</span>
          k
          (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> cmds)
          user-book-name))
      ((<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> full-book-name pre-alist-cert-wrld) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"We cannot certify ~x0 in a world in which it has already been ~
           included."</span>
          full-book-string))
      (uncert-books (let ((uncert-book-filenames (<a class="sym-link system" href="basis-a.html#def-book-name-lst-to-filename-lst" data-sym="BOOK-NAME-LST-TO-FILENAME-LST">book-name-lst-to-filename-lst</a> uncert-books
               (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> wrld)
               ctx)))
          (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"It is impossible to certify any book in the current world ~
             because it is built upon ~*0 which ~#1~[is~/are~] uncertified."</span>
            (<a class="sym-link system" href="basis-a.html#def-tilde-_2A-_26v-strings" data-sym="TILDE-*-&amp;V-STRINGS">tilde-*-&amp;v-strings</a> '&amp; uncert-book-filenames #\,)
            uncert-book-filenames)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((fixed-cmds (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> cbds) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> cmds))
               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-fix-portcullis-cmds" data-sym="FIX-PORTCULLIS-CMDS" title="(defun fix-portcullis-cmds (dir cmds cbds names wrld ctx state)
  (let ((new-cmds (fix-portcullis-cmds1 dir cmds cbds nil names ctx state)))
    (er-let*
     ((new-defpkgs
       (hidden-defpkg-events (global-val &#39;known-package-alist wrld) wrld ctx
...">fix-portcullis-cmds</a> dir cmds cbds names wrld ctx state)))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>) (<a class="sym-link local-def" href="#def-cert-obj-for-convert" data-sym="CERT-OBJ-FOR-CONVERT" title="(defun cert-obj-for-convert
       (full-book-string dir pre-alist fixed-cmds suspect-book-action-alist ctx
        state)
  (er-let*
   ((cert-obj
...">cert-obj-for-convert</a> full-book-string
                dir
                pre-alist-cert-wrld
                fixed-cmds
                suspect-book-action-alist
                ctx
                state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> cert-obj
                  <span class="keyword">:cmds</span> fixed-cmds
                  <span class="keyword">:pre-alist</span> nil
                  <span class="keyword">:post-alist</span> nil
                  <span class="keyword">:expansion-alist</span> nil
                  <span class="keyword">:cert-data</span> nil)))))))))</pre>
  </div>

<div class="form-block function" id="def-translate-book-names" data-defines="TRANSLATE-BOOK-NAMES" data-references="BOOK-NAME-TO-FILENAME-1,POSSIBLY-ADD-LISP-EXTENSION,EXTEND-PATHNAME,FILENAME-TO-BOOK-NAME-1,T,SOFT,ER,BOOK-NAME-P,NOT,CONS,CDR,CAR,NULL,REVERSE,VALUE,ENDP,COND,TRUE-LISTP,XARGS,DECLARE,ACC,STATE,PROJECT-DIR-ALIST,MSG,CTX,CBD,BOOK-NAMES,DEFUN" data-used-by="FIX-TTAGS" data-part-name="TRANSLATE-BOOK-NAMES" data-part-args="ACC,STATE,PROJECT-DIR-ALIST,MSG,CTX,CBD,BOOK-NAMES" data-part-declare="BOOK-NAMES,TRUE-LISTP,XARGS,DECLARE" data-part-body="BOOK-NAME-TO-FILENAME-1,POSSIBLY-ADD-LISP-EXTENSION,EXTEND-PATHNAME,FILENAME-TO-BOOK-NAME-1,T,SOFT,ER,BOOK-NAME-P,NOT,CONS,STATE,PROJECT-DIR-ALIST,MSG,CTX,CBD,CDR,TRANSLATE-BOOK-NAMES,CAR,NULL,ACC,REVERSE,VALUE,BOOK-NAMES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-BOOK-NAMES">translate-book-names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-book-names" data-sym="TRANSLATE-BOOK-NAMES" title="(defun translate-book-names
       (book-names cbd ctx msg project-dir-alist state acc)
  (declare (xargs :guard (true-listp book-names)))
  (cond ((endp book-names) (value (reverse acc)))
        ((null (car book-names))
...">translate-book-names</a>
  (book-names <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> ctx <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> state acc)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> book-names)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> book-names) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc)))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (car book-names)) (<a class="sym-link local-def" href="#def-translate-book-names" data-sym="TRANSLATE-BOOK-NAMES" title="(defun translate-book-names
       (book-names cbd ctx msg project-dir-alist state acc)
  (declare (xargs :guard (true-listp book-names)))
  (cond ((endp book-names) (value (reverse acc)))
        ((null (car book-names))
...">translate-book-names</a> (cdr book-names)
        <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
        ctx
        <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
        <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
        state
        (cons nil acc)))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-book-name-p" data-sym="BOOK-NAME-P">book-name-p</a> (car book-names))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The name ~x0~@1 is not a valid book-name.  See :DOC book-name."</span>
        (car book-names)
        <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-translate-book-names" data-sym="TRANSLATE-BOOK-NAMES" title="(defun translate-book-names
       (book-names cbd ctx msg project-dir-alist state acc)
  (declare (xargs :guard (true-listp book-names)))
  (cond ((endp book-names) (value (reverse acc)))
        ((null (car book-names))
...">translate-book-names</a> (cdr book-names)
        <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
        ctx
        <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
        <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
        state
        (cons (<a class="sym-link system" href="basis-a.html#def-filename-to-book-name-1" data-sym="FILENAME-TO-BOOK-NAME-1">filename-to-book-name-1</a> (<a class="sym-link local-def" href="#def-extend-pathname" data-sym="EXTEND-PATHNAME" title="(defun extend-pathname (dir0 file-name state)
  (extend-pathname+ dir0 file-name nil state))">extend-pathname</a> <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
              (<a class="sym-link system" href="rewrite.html#def-possibly-add-lisp-extension" data-sym="POSSIBLY-ADD-LISP-EXTENSION">possibly-add-lisp-extension</a> (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename-1" data-sym="BOOK-NAME-TO-FILENAME-1">book-name-to-filename-1</a> (car book-names)
                  <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
                  ctx))
              state)
            <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>)
          acc)))))</pre>
  </div>

<div class="form-block function" id="def-fix-ttags" data-defines="FIX-TTAGS" data-references="MSG,TRANSLATE-BOOK-NAMES,FULL-BOOK-NAMES,ER-LET*,CONS,MEMBER-EQ,SOFT,ER,CDR,REMOVE1-EQ,BOOK-NAME-LISTP,ATOM,OR,NOT,SYMBOL-NAME,INTERN,SYMBOLP,AND,SYM,CONSP,IF,SYM0,CAR,TTAG,LET*,T,REVERSE,VALUE,ENDP,COND,TRUE-LISTP,XARGS,DECLARE,ACC,SEEN,STATE,PROJECT-DIR-ALIST,CTX,CBD,TTAGS,DEFUN" data-used-by="CHK-WELL-FORMED-TTAGS" data-part-name="FIX-TTAGS" data-part-args="ACC,SEEN,STATE,PROJECT-DIR-ALIST,CTX,CBD,TTAGS" data-part-declare="TTAGS,TRUE-LISTP,XARGS,DECLARE" data-part-body="MSG,TRANSLATE-BOOK-NAMES,FULL-BOOK-NAMES,ER-LET*,CONS,STATE,PROJECT-DIR-ALIST,CBD,FIX-TTAGS,SEEN,MEMBER-EQ,CTX,SOFT,ER,CDR,REMOVE1-EQ,BOOK-NAME-LISTP,ATOM,OR,NOT,SYMBOL-NAME,INTERN,SYMBOLP,AND,SYM,CONSP,IF,SYM0,CAR,TTAG,LET*,T,ACC,REVERSE,VALUE,TTAGS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-TTAGS">fix-ttags</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-ttags" data-sym="FIX-TTAGS" title="(defun fix-ttags (ttags cbd ctx project-dir-alist state seen acc)
  (declare (xargs :guard (true-listp ttags)))
  (cond ((endp ttags) (value (reverse acc)))
        (t
         (let* ((ttag (car ttags))
...">fix-ttags</a>
  (ttags <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> ctx <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> state seen acc)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> ttags)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> ttags) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> (car ttags)) (sym0 (if (consp <a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a>)
              (car <a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a>)
              <a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a>))
          (sym (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp sym0)
              sym0
              (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> (symbol-name sym0) <span class="string">"KEYWORD"</span>))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> sym
               (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> <a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a>)
                 (<a class="sym-link system" href="basis-a.html#def-book-name-listp" data-sym="BOOK-NAME-LISTP">book-name-listp</a> (<a class="sym-link system" href="axioms.html#def-remove1-eq" data-sym="REMOVE1-EQ">remove1-eq</a> nil (cdr <a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a>)))))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"A :ttags value for certify-book or include-book must ~
                    either be the keyword :ALL or else a list, each of whose ~
                    members is one of the following: a non-nil symbol, or the ~
                    CONS of a non-nil symbol onto a true list consisting of ~
                    strings and at most one nil.  The value ~x0 is thus an ~
                    illegal member of such a list."</span>
              <a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a>))
          ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> sym seen) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"A :ttags list may not reference the same ttag more than ~
                    once, but the proposed list references ~x0 more than once."</span>
              sym))
          ((symbolp <a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a>) (<a class="sym-link local-def" href="#def-fix-ttags" data-sym="FIX-TTAGS" title="(defun fix-ttags (ttags cbd ctx project-dir-alist state seen acc)
  (declare (xargs :guard (true-listp ttags)))
  (cond ((endp ttags) (value (reverse acc)))
        (t
         (let* ((ttag (car ttags))
...">fix-ttags</a> (cdr ttags)
              <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
              ctx
              <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
              state
              (cons sym seen)
              (cons sym acc)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((full-book-names (<a class="sym-link local-def" href="#def-translate-book-names" data-sym="TRANSLATE-BOOK-NAMES" title="(defun translate-book-names
       (book-names cbd ctx msg project-dir-alist state acc)
  (declare (xargs :guard (true-listp book-names)))
  (cond ((endp book-names) (value (reverse acc)))
        ((null (car book-names))
...">translate-book-names</a> (cdr <a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a>)
                   <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
                   ctx
                   (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">", which has been ~
                                                      associated with ttag ~
                                                      ~x0, "</span>
                     (car <a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a>))
                   <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
                   state
                   nil)))
              (<a class="sym-link local-def" href="#def-fix-ttags" data-sym="FIX-TTAGS" title="(defun fix-ttags (ttags cbd ctx project-dir-alist state seen acc)
  (declare (xargs :guard (true-listp ttags)))
  (cond ((endp ttags) (value (reverse acc)))
        (t
         (let* ((ttag (car ttags))
...">fix-ttags</a> (cdr ttags)
                <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
                ctx
                <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
                state
                (cons sym seen)
                (cons (cons sym full-book-names) acc)))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-well-formed-ttags" data-defines="CHK-WELL-FORMED-TTAGS" data-references="PROJECT-DIR-ALIST,FIX-TTAGS,W,WRLD,LET,T,SOFT,ER,TRUE-LISTP,NOT,SYMBOL-NAME,EQUAL,SYMBOLP,AND,VALUE,NULL,COND,STATE,CTX,CBD,TTAGS,DEFUN" data-used-by="CERTIFY-BOOK-FN,INCLUDE-BOOK-FN1" data-part-name="CHK-WELL-FORMED-TTAGS" data-part-args="STATE,CTX,CBD,TTAGS" data-part-body="PROJECT-DIR-ALIST,CBD,FIX-TTAGS,STATE,W,WRLD,LET,T,CTX,SOFT,ER,TRUE-LISTP,NOT,SYMBOL-NAME,EQUAL,SYMBOLP,AND,VALUE,TTAGS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-WELL-FORMED-TTAGS">chk-well-formed-ttags</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-well-formed-ttags" data-sym="CHK-WELL-FORMED-TTAGS" title="(defun chk-well-formed-ttags (ttags cbd ctx state)
  (cond ((null ttags) (value nil))
        ((and (symbolp ttags) (equal (symbol-name ttags) &quot;ALL&quot;)) (value :all))
        ((not (true-listp ttags))
         (er soft ctx
...">chk-well-formed-ttags</a>
  (ttags <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ttags) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp ttags) (equal (symbol-name ttags) <span class="string">"ALL"</span>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:all</span>))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> ttags)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"A valid :ttags value must either be :all or a true list,  The ~
              following value is thus illegal: ~x0."</span>
        ttags))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link local-def" href="#def-fix-ttags" data-sym="FIX-TTAGS" title="(defun fix-ttags (ttags cbd ctx project-dir-alist state seen acc)
  (declare (xargs :guard (true-listp ttags)))
  (cond ((endp ttags) (value (reverse acc)))
        (t
         (let* ((ttag (car ttags))
...">fix-ttags</a> ttags
          <a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>
          ctx
          (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> wrld)
          state
          nil
          nil)))))</pre>
  </div>

<div class="form-block function" id="def-check-certificate-file-exists" data-defines="CHECK-CERTIFICATE-FILE-EXISTS" data-references="SOFT,ER,VALUE,CLOSE-INPUT-CHANNEL,PPROGN,T,EQ,COND,CERTIFICATE-FILE-AND-INPUT-CHANNEL1,CERT-NAME,CH,MV-LET,STATE,CTX,CERT-OP,FULL-BOOK-STRING,DEFUN" data-used-by="CHK-ACCEPTABLE-CERTIFY-BOOK" data-part-name="CHECK-CERTIFICATE-FILE-EXISTS" data-part-args="STATE,CTX,CERT-OP,FULL-BOOK-STRING" data-part-body="CTX,SOFT,ER,VALUE,CLOSE-INPUT-CHANNEL,PPROGN,T,CERT-OP,EQ,COND,FULL-BOOK-STRING,CERTIFICATE-FILE-AND-INPUT-CHANNEL1,STATE,CERT-NAME,CH,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-CERTIFICATE-FILE-EXISTS">check-certificate-file-exists</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-certificate-file-exists" data-sym="CHECK-CERTIFICATE-FILE-EXISTS" title="(defun check-certificate-file-exists (full-book-string cert-op ctx state)
  (mv-let (ch cert-name state)
          (certificate-file-and-input-channel1 full-book-string
                                               (cond
                                                ((eq cert-op :convert-pcert)
...">check-certificate-file-exists</a>
  (full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch cert-name state)
    (<a class="sym-link local-def" href="#def-certificate-file-and-input-channel1" data-sym="CERTIFICATE-FILE-AND-INPUT-CHANNEL1" title="(defun certificate-file-and-input-channel1 (full-book-string cert-op state)
  (let ((cert-name (convert-book-string-to-cert full-book-string cert-op)))
    (mv-let (ch state) (open-input-channel cert-name :object state)
            (mv ch cert-name state))))">certificate-file-and-input-channel1</a> full-book-string
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>) <span class="keyword">:create-pcert</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ch (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> ch state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The file ~x0 cannot be opened for input; perhaps it is ~
                 missing.  But that file is required for the Convert ~
                 procedure of provisional certification of the book ~x1."</span>
          cert-name
          full-book-string))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"There is no certificate (.cert) file for ~x0.  But you told ~
                 certify-book to recover the certi~-fication world from the ~
                 old certificate.  You will have to construct the ~
                 certi~-fication world by hand (by executing the desired ~
                 commands in the current logical world) and then call ~
                 certify-book again."</span>
          full-book-string)))))</pre>
  </div>

<div class="form-block function" id="def-illegal-to-certify-check" data-defines="ILLEGAL-TO-CERTIFY-CHECK" data-references="VALUE,T,@,FMX,IF,SOFT,ER,ILLEGAL-TO-CERTIFY-MESSAGE,QUOTE,F-GET-GLOBAL,COND,STATE,CTX,BEFORE-P,DEFUN" data-used-by="CERTIFY-BOOK-STEP-2,CHK-ACCEPTABLE-CERTIFY-BOOK" data-part-name="ILLEGAL-TO-CERTIFY-CHECK" data-part-args="STATE,CTX,BEFORE-P" data-part-body="VALUE,T,@,FMX,BEFORE-P,IF,CTX,SOFT,ER,STATE,ILLEGAL-TO-CERTIFY-MESSAGE,QUOTE,F-GET-GLOBAL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ILLEGAL-TO-CERTIFY-CHECK">illegal-to-certify-check</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-illegal-to-certify-check" data-sym="ILLEGAL-TO-CERTIFY-CHECK" title="(defun illegal-to-certify-check (before-p ctx state)
  (cond
   ((f-get-global &#39;illegal-to-certify-message state)
    (er soft ctx
        &quot;It is illegal to certify a book in this session, as explained ~
...">illegal-to-certify-check</a>
  (before-p ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'illegal-to-certify-message state) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"It is illegal to certify a book in this session, as explained ~
              by the message on a possible invariance violation, printed ~
              earlier ~@0.  To see the message again, evaluate ~
              the following form:~|~x1"</span>
        (if before-p
          <span class="string">"in this session"</span>
          <span class="string">"during the certification attempt"</span>)
        '(<a class="sym-link system" href="basis-a.html#def-fmx" data-sym="FMX">fmx</a> <span class="string">"~@0~%~%"</span> (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> illegal-to-certify-message))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-certify-book" data-defines="CHK-ACCEPTABLE-CERTIFY-BOOK" data-references="CHK-ACCEPTABLE-CERTIFY-BOOK1,SILENT-ERROR,GET-PORTCULLIS-CMDS,CBDS,CMDS,ERP,MV-LET,CHECK-CERTIFICATE-FILE-EXISTS,ILLEGAL-TO-CERTIFY-CHECK,VALUE,T,DEFTTAG,TTAG,PRINT-INDENTED-LIST-MSG,BOOKS,PCERT-BOOKS,PCERT-OP-P,LD-REDEFINITION-ACTION,REDEF-SEEN,CADR,BOOK-NAME-TO-FILENAME,MSG,CAR,CONSP,IF,X,ASSOC-EQ,CDR,SKIP-PROOFS-SEEN,GLOBAL-VAL,IN-LOCAL-FLG,F-GET-GLOBAL,SOFT,ER,EQ,NOT,LD-SKIP-PROOFSP,AND,COND,ER-PROGN,DIRECTORY-OF-ABSOLUTE-PATHNAME,OR,W,WRLD,PRIMITIVE-EVENT-MACROS,DEFPKG,QUOTE,CONS,NAMES,LET,STATE,CTX,K,CERT-OP,SUSPECT-BOOK-ACTION-ALIST,DIR,FULL-BOOK-NAME,FULL-BOOK-STRING,BOOK-NAME,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CHK-ACCEPTABLE-CERTIFY-BOOK" data-part-args="STATE,CTX,K,CERT-OP,SUSPECT-BOOK-ACTION-ALIST,DIR,FULL-BOOK-NAME,FULL-BOOK-STRING,BOOK-NAME" data-part-body="K,FULL-BOOK-NAME,BOOK-NAME,CHK-ACCEPTABLE-CERTIFY-BOOK1,SILENT-ERROR,GET-PORTCULLIS-CMDS,CBDS,CMDS,ERP,MV-LET,CHECK-CERTIFICATE-FILE-EXISTS,ILLEGAL-TO-CERTIFY-CHECK,VALUE,T,DEFTTAG,TTAG,PRINT-INDENTED-LIST-MSG,BOOKS,PCERT-BOOKS,PCERT-OP-P,LD-REDEFINITION-ACTION,REDEF-SEEN,CADR,BOOK-NAME-TO-FILENAME,MSG,CAR,CONSP,IF,X,SUSPECT-BOOK-ACTION-ALIST,ASSOC-EQ,CDR,SKIP-PROOFS-SEEN,GLOBAL-VAL,IN-LOCAL-FLG,F-GET-GLOBAL,CTX,SOFT,ER,CERT-OP,EQ,NOT,LD-SKIP-PROOFSP,AND,COND,ER-PROGN,FULL-BOOK-STRING,DIRECTORY-OF-ABSOLUTE-PATHNAME,OR,DIR,STATE,W,WRLD,PRIMITIVE-EVENT-MACROS,DEFPKG,QUOTE,CONS,NAMES,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-CERTIFY-BOOK">chk-acceptable-certify-book</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-certify-book" data-sym="CHK-ACCEPTABLE-CERTIFY-BOOK" title="(defun chk-acceptable-certify-book
       (book-name full-book-string full-book-name dir suspect-book-action-alist
        cert-op k ctx state)
  (let ((names (cons &#39;defpkg (primitive-event-macros)))
        (wrld (w state))
...">chk-acceptable-certify-book</a>
  (book-name full-book-string
    full-book-name
    dir
    suspect-book-action-alist
    <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
    k
    ctx
    state)
  (let ((names (cons '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> (primitive-event-macros))) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (dir (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> dir (<a class="sym-link local-def" href="#def-directory-of-absolute-pathname" data-sym="DIRECTORY-OF-ABSOLUTE-PATHNAME" title="(defun directory-of-absolute-pathname (pathname)
  (let* ((lst (coerce pathname &#39;list))
         (rlst (reverse lst))
         (temp (member *directory-separator* rlst)))
    (coerce (reverse temp) &#39;string)))">directory-of-absolute-pathname</a> full-book-string))))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> '<span class="keyword">:write-acl2xu</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Certify-book must be called with ld-skip-proofsp set to nil ~
                 (except when writing .acl2x files in the case that ~
                 set-write-acl2x has specified skipping proofs)."</span>))
        ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Certify-book may not be called inside a LOCAL command."</span>))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'skip-proofs-seen wrld)
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:skip-proofs-okp</span> suspect-book-action-alist)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"At least one event in the current ACL2 world was executed ~
                 with proofs skipped, either with a call of skip-proofs or by ~
                 setting ``LD special&#39;&#39; variable &#39;~x0 to a non-nil value.  ~
                 ~@1(If you did not explicitly use ~
                 skip-proofs or set-ld-skip-proofsp, or call ld with ~
                 :ld-skip-proofsp not nil, then some other function did so, ~
                 for example, rebuild or :puff.)  Certification is therefore ~
                 not allowed in this world unless you supply certify-book ~
                 with :skip-proofs-okp t.  See :DOC certify-book."</span>
            '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
            (let ((x (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'skip-proofs-seen wrld)))
              (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp x) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) <span class="keyword">:include-book</span>))
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Such an event was introduced via the ~
                            included book, ~x0.  "</span>
                  (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename" data-sym="BOOK-NAME-TO-FILENAME">book-name-to-filename</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x) wrld ctx))
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Such an event was:~|~%  ~y0~%"</span> x)))))
        ((<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'redef-seen wrld) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"At least one command in the current ACL2 world was executed ~
                 while the value of state global variable &#39;~x0 was not ~
                 nil:~|~%  ~y1~%Certification is therefore not allowed in ~
                 this world.  You can use :ubt to undo back through this ~
                 command; see :DOC ubt."</span>
            '<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a>
            (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'redef-seen wrld)))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-pcert-op-p" data-sym="PCERT-OP-P" title="(defmacro pcert-op-p (cert-op)
  `(member-eq ,cert-op &#39;(:create-pcert :create+convert-pcert :convert-pcert)))">pcert-op-p</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>))
           (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'pcert-books wrld)) (let ((books (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'pcert-books wrld)))
            (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Certify-book has been invoked in an ACL2 world that ~
                   includes the book~#0~[ below, which is~/s below, each of ~
                   which is~] only provisionally certified: there is a ~
                   certificate file with extension .pcert0 or .pcert1, but ~
                   not with extension .cert.~|~%~@1~|~%A certify-book command ~
                   is thus illegal in this world unless a :pcert keyword ~
                   argument is specified to be :create or :convert."</span>
              books
              (<a class="sym-link system" href="history-management.html#def-print-indented-list-msg" data-sym="PRINT-INDENTED-LIST-MSG">print-indented-list-msg</a> books <span class="number">2</span> <span class="string">""</span>))))
        ((<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> wrld) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"It is illegal to certify a book while there is an active ~
                 ttag, in this case, ~x0.  Consider undoing the corresponding ~
                 defttag event (see :DOC ubt) or else executing ~x1.  See ~
                 :DOC defttag."</span>
            (<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> wrld)
            '(<a class="sym-link system" href="axioms.html#def-defttag" data-sym="DEFTTAG">defttag</a> nil)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
      (<a class="sym-link local-def" href="#def-illegal-to-certify-check" data-sym="ILLEGAL-TO-CERTIFY-CHECK" title="(defun illegal-to-certify-check (before-p ctx state)
  (cond
   ((f-get-global &#39;illegal-to-certify-message state)
    (er soft ctx
        &quot;It is illegal to certify a book in this session, as explained ~
...">illegal-to-certify-check</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ctx state)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>) (<a class="sym-link local-def" href="#def-check-certificate-file-exists" data-sym="CHECK-CERTIFICATE-FILE-EXISTS" title="(defun check-certificate-file-exists (full-book-string cert-op ctx state)
  (mv-let (ch cert-name state)
          (certificate-file-and-input-channel1 full-book-string
                                               (cond
                                                ((eq cert-op :convert-pcert)
...">check-certificate-file-exists</a> full-book-string
            <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
            ctx
            state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp cmds cbds state)
        (<a class="sym-link local-def" href="#def-get-portcullis-cmds" data-sym="GET-PORTCULLIS-CMDS" title="(defun get-portcullis-cmds (wrld cmds cbds names ctx state)
  (cond ((null wrld) (mv nil cmds cbds state))
        ((and (eq (caar wrld) &#39;command-landmark)
              (eq (cadar wrld) &#39;global-value))
         (let ((form0 (access-command-tuple-form (cddar wrld)))
...">get-portcullis-cmds</a> wrld nil nil names ctx state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (silent-error state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-acceptable-certify-book1" data-sym="CHK-ACCEPTABLE-CERTIFY-BOOK1" title="(defun chk-acceptable-certify-book1
       (user-book-name full-book-string full-book-name dir k cmds cbds names
        cert-op suspect-book-action-alist wrld ctx state)
  (let ((pre-alist-cert-wrld (global-val &#39;include-book-alist wrld))
        (uncert-books
...">chk-acceptable-certify-book1</a> book-name
              full-book-string
              full-book-name
              dir
              k
              cmds
              cbds
              names
              <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
              suspect-book-action-alist
              wrld
              ctx
              state)))))))</pre>
  </div>

<div class="form-block function" id="def-print-objects" data-defines="PRINT-OBJECTS" data-references="CDR,CAR,PRINT-OBJECT$,PPROGN,T,NULL,COND,STATE,CH,LST,DEFUN" data-used-by="WRITE-PORT-FILE,MAKE-CERTIFICATE-FILE1" data-part-name="PRINT-OBJECTS" data-part-args="STATE,CH,LST" data-part-body="CDR,PRINT-OBJECTS,CH,CAR,PRINT-OBJECT$,PPROGN,T,STATE,LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-OBJECTS">print-objects</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-objects" data-sym="PRINT-OBJECTS" title="(defun print-objects (lst ch state)
  (cond ((null lst) state)
        (t
         (pprogn (print-object$ (car lst) ch state)
                 (print-objects (cdr lst) ch state)))))">print-objects</a>
  (lst ch state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst) state)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (car lst) ch state)
        (<a class="sym-link local-def" href="#def-print-objects" data-sym="PRINT-OBJECTS" title="(defun print-objects (lst ch state)
  (cond ((null lst) state)
        (t
         (pprogn (print-object$ (car lst) ch state)
                 (print-objects (cdr lst) ch state)))))">print-objects</a> (cdr lst) ch state)))))</pre>
  </div>

<div class="form-block function" id="def-replace-initial-substring" data-defines="REPLACE-INITIAL-SUBSTRING" data-references="T,STRING,QUOTE,CONCATENATE,SUBSEQ,EQUAL,LENGTH,>,STRINGP,AND,COND,NEW,OLD-LENGTH,OLD,S,DEFUN" data-used-by="REPLACE-STRING-PREFIX-IN-TREE" data-part-name="REPLACE-INITIAL-SUBSTRING" data-part-args="NEW,OLD-LENGTH,OLD,S" data-part-body="T,NEW,STRING,QUOTE,CONCATENATE,SUBSEQ,OLD,EQUAL,OLD-LENGTH,LENGTH,>,S,STRINGP,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REPLACE-INITIAL-SUBSTRING">replace-initial-substring</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-replace-initial-substring" data-sym="REPLACE-INITIAL-SUBSTRING" title="(defun replace-initial-substring (s old old-length new)
  (cond
   ((and (stringp s) (&gt; (length s) old-length)
         (equal old (subseq s 0 old-length)))
    (concatenate &#39;string new (subseq s old-length (length s))))">replace-initial-substring</a>
  (s old old-length new)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp s)
       (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> s) old-length)
       (equal old (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> s <span class="number">0</span> old-length))) (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> new (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> s old-length (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> s))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> s)))</pre>
  </div>

<div class="form-block function" id="def-replace-string-prefix-in-tree" data-defines="REPLACE-STRING-PREFIX-IN-TREE" data-references="CDR,CAR,CONS,T,REPLACE-INITIAL-SUBSTRING,ATOM,COND,NEW,OLD-LENGTH,OLD,TREE,DEFUN" data-part-name="REPLACE-STRING-PREFIX-IN-TREE" data-part-args="NEW,OLD-LENGTH,OLD,TREE" data-part-body="CDR,CAR,REPLACE-STRING-PREFIX-IN-TREE,CONS,T,NEW,OLD-LENGTH,OLD,REPLACE-INITIAL-SUBSTRING,TREE,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REPLACE-STRING-PREFIX-IN-TREE">replace-string-prefix-in-tree</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-replace-string-prefix-in-tree" data-sym="REPLACE-STRING-PREFIX-IN-TREE" title="(defun replace-string-prefix-in-tree (tree old old-length new)
  (cond ((atom tree) (replace-initial-substring tree old old-length new))
        (t
         (cons (replace-string-prefix-in-tree (car tree) old old-length new)
               (replace-string-prefix-in-tree (cdr tree) old old-length new)))))">replace-string-prefix-in-tree</a>
  (tree old old-length new)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> tree) (<a class="sym-link local-def" href="#def-replace-initial-substring" data-sym="REPLACE-INITIAL-SUBSTRING" title="(defun replace-initial-substring (s old old-length new)
  (cond
   ((and (stringp s) (&gt; (length s) old-length)
         (equal old (subseq s 0 old-length)))
    (concatenate &#39;string new (subseq s old-length (length s))))">replace-initial-substring</a> tree old old-length new))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-replace-string-prefix-in-tree" data-sym="REPLACE-STRING-PREFIX-IN-TREE" title="(defun replace-string-prefix-in-tree (tree old old-length new)
  (cond ((atom tree) (replace-initial-substring tree old old-length new))
        (t
         (cons (replace-string-prefix-in-tree (car tree) old old-length new)
               (replace-string-prefix-in-tree (cdr tree) old old-length new)))))">replace-string-prefix-in-tree</a> (car tree)
          old
          old-length
          new)
        (<a class="sym-link local-def" href="#def-replace-string-prefix-in-tree" data-sym="REPLACE-STRING-PREFIX-IN-TREE" title="(defun replace-string-prefix-in-tree (tree old old-length new)
  (cond ((atom tree) (replace-initial-substring tree old old-length new))
        (t
         (cons (replace-string-prefix-in-tree (car tree) old old-length new)
               (replace-string-prefix-in-tree (cdr tree) old old-length new)))))">replace-string-prefix-in-tree</a> (cdr tree)
          old
          old-length
          new)))))</pre>
  </div>

<div class="form-block macro" id="def-with-output-object-channel-sharing" data-defines="WITH-OUTPUT-OBJECT-CHANNEL-SHARING" data-references="OPEN-OUTPUT-CHANNEL,MV,IF,STATE,MV-LET,QUASIQUOTE,SYMBOLP,AND,XARGS,DECLARE,CHAN0,&OPTIONAL,BODY,FILENAME,CHAN,DEFMACRO" data-used-by="COPY-PCERT0-TO-PCERT1,WRITE-PORT-FILE,WRITE-ACL2X-FILE,WRITE-EXPANSION-FILE,MAKE-CERTIFICATE-FILE1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-OUTPUT-OBJECT-CHANNEL-SHARING">with-output-object-channel-sharing</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-output-object-channel-sharing" data-sym="WITH-OUTPUT-OBJECT-CHANNEL-SHARING" title="(defmacro with-output-object-channel-sharing
          (chan filename body &amp;optional chan0)
  (declare (xargs :guard (and (symbolp chan) (symbolp chan0))))
  `(mv-let (,chan state)
           (if ,chan0
...">with-output-object-channel-sharing</a>
  (chan filename <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> &amp;optional chan0)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp chan) (symbolp chan0))))
  `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (,CHAN state)
    (if ,CHAN0
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ,CHAN0 state)
      (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> ,FILENAME <span class="keyword">:object</span> state))
    ,BODY))</pre>
  </div>

<div class="form-block function" id="def-elide-locals-and-split-expansion-alist" data-defines="ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST" data-references="CONS,CAR,EQUAL,ACONS,CDAR,ELIDE-LOCALS-REC,FORM,CHANGEDP,MV-LET,CDR,EQL,AND,ACL2X-ALIST-NEW,LET,CAAR,<=,NULL,OR,ASSERT$,T,REVERSE,MV,ENDP,COND,Y,X,ACL2X-ALIST,ALIST,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST" data-part-args="Y,X,ACL2X-ALIST,ALIST" data-part-body="CONS,CAR,EQUAL,ACONS,ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST,CDAR,ELIDE-LOCALS-REC,FORM,CHANGEDP,MV-LET,CDR,EQL,AND,ACL2X-ALIST-NEW,LET,CAAR,<=,ACL2X-ALIST,NULL,OR,ASSERT$,T,Y,X,REVERSE,MV,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST">elide-locals-and-split-expansion-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-elide-locals-and-split-expansion-alist" data-sym="ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST" title="(defun elide-locals-and-split-expansion-alist (alist acl2x-alist x y)
  (cond ((endp alist) (mv (reverse x) (reverse y)))
        (t
         (assert$ (or (null acl2x-alist) (&lt;= (caar alist) (caar acl2x-alist)))
                  (let ((acl2x-alist-new
...">elide-locals-and-split-expansion-alist</a>
  (alist acl2x-alist x y)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> x) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> y)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> acl2x-alist) (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> acl2x-alist)))
        (let ((acl2x-alist-new (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> acl2x-alist (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> acl2x-alist))) (cdr acl2x-alist))
               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> acl2x-alist))))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp form)
            (<a class="sym-link local-def" href="#def-elide-locals-rec" data-sym="ELIDE-LOCALS-REC" title="(mutual-recursion
 (defun elide-locals-rec (form)
   (cond ((atom form) (mv nil form))
         ((equal form *local-value-triple-elided*) (mv nil form))
         ((eq (car form) &#39;local) (mv t *local-value-triple-elided*))
...">elide-locals-rec</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changedp (<a class="sym-link local-def" href="#def-elide-locals-and-split-expansion-alist" data-sym="ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST" title="(defun elide-locals-and-split-expansion-alist (alist acl2x-alist x y)
  (cond ((endp alist) (mv (reverse x) (reverse y)))
        (t
         (assert$ (or (null acl2x-alist) (&lt;= (caar alist) (caar acl2x-alist)))
                  (let ((acl2x-alist-new
...">elide-locals-and-split-expansion-alist</a> (cdr alist)
                  acl2x-alist-new
                  (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) form x)
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> acl2x-alist (equal (car alist) (car acl2x-alist))) y)
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car alist) y)))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-elide-locals-and-split-expansion-alist" data-sym="ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST" title="(defun elide-locals-and-split-expansion-alist (alist acl2x-alist x y)
  (cond ((endp alist) (mv (reverse x) (reverse y)))
        (t
         (assert$ (or (null acl2x-alist) (&lt;= (caar alist) (caar acl2x-alist)))
                  (let ((acl2x-alist-new
...">elide-locals-and-split-expansion-alist</a> (cdr alist)
                  acl2x-alist-new
                  (cons (car alist) x)
                  y)))))))))</pre>
  </div>

<div class="form-block function" id="def-make-certificate-file1" data-defines="MAKE-CERTIFICATE-FILE1" data-references="VALUE,CLOSE-OUTPUT-CHANNEL,CERT-HASH,CDR,CAR,PRINT-OBJECTS,ACL2-VERSION,LIST,FAST-CERT-INCLUDED-BOOK,ATOM,OR,AND,FAST-CERT-STATUS,STATUS,LET,IF,IN-PACKAGE,PRINT-OBJECT$,PPROGN,PRINT-READABLY,PRINT-CIRCLE-FILES,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,T,SOFT,ER,NULL,COND,CH,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,EQ,IMPLIES,QUOTE,MEMBER-EQ,NOT,ASSERT$,STATE,CTX,CERT-OP,PCERT-INFO,CERT-DATA,EXPANSION-ALIST,POST-ALIST3,CERTIFICATION-FILE,PORTCULLIS,FILE,DEFUN" data-used-by="MAKE-CERTIFICATE-FILE" data-part-name="MAKE-CERTIFICATE-FILE1" data-part-args="STATE,CTX,CERT-OP,PCERT-INFO,CERT-DATA,EXPANSION-ALIST,POST-ALIST3,CERTIFICATION-FILE,PORTCULLIS,FILE" data-part-body="VALUE,CLOSE-OUTPUT-CHANNEL,PCERT-INFO,CERT-HASH,POST-ALIST3,CDR,CERT-DATA,EXPANSION-ALIST,PORTCULLIS,CAR,PRINT-OBJECTS,ACL2-VERSION,LIST,FAST-CERT-INCLUDED-BOOK,ATOM,OR,AND,FAST-CERT-STATUS,STATUS,LET,IF,IN-PACKAGE,PRINT-OBJECT$,PPROGN,PRINT-READABLY,PRINT-CIRCLE-FILES,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,T,FILE,CTX,SOFT,ER,NULL,COND,CERTIFICATION-FILE,CH,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,STATE,EQ,IMPLIES,QUOTE,CERT-OP,MEMBER-EQ,NOT,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-CERTIFICATE-FILE1">make-certificate-file1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-certificate-file1" data-sym="MAKE-CERTIFICATE-FILE1" title="(defun make-certificate-file1
       (file portcullis certification-file post-alist3 expansion-alist
        cert-data pcert-info cert-op ctx state)
  (assert$ (not (member-eq cert-op &#39;(:write-acl2x :write-acl2xu)))
           (assert$
...">make-certificate-file1</a>
  (file portcullis
    certification-file
    post-alist3
    expansion-alist
    cert-data
    pcert-info
    <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> '(<span class="keyword">:write-acl2x</span> <span class="keyword">:write-acl2xu</span>)))
    (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>)
        (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state) <span class="keyword">:create+convert-pcert</span>))
      (<a class="sym-link local-def" href="#def-with-output-object-channel-sharing" data-sym="WITH-OUTPUT-OBJECT-CHANNEL-SHARING" title="(defmacro with-output-object-channel-sharing
          (chan filename body &amp;optional chan0)
  (declare (xargs :guard (and (symbolp chan) (symbolp chan0))))
  `(mv-let (,chan state)
           (if ,chan0
...">with-output-object-channel-sharing</a> ch
        certification-file
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"We cannot open a certificate file for ~x0.  The file we tried to ~
            open for output was ~x1."</span>
              file
              certification-file))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-with-print-defaults" data-sym="WITH-PRINT-DEFAULTS">with-print-defaults</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>) (print-circle (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-circle-files state))
                (print-readably <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> '(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>) ch state)
                (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (if (let ((status (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'fast-cert-status state)))
                      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> status
                        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> status) (<a class="sym-link system" href="history-management.html#def-fast-cert-included-book" data-sym="FAST-CERT-INCLUDED-BOOK">fast-cert-included-book</a> status))))
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'acl2-version state))
                    (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'acl2-version state))
                  ch
                  state)
                (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> <span class="keyword">:begin-portcullis-cmds</span> ch state)
                (<a class="sym-link local-def" href="#def-print-objects" data-sym="PRINT-OBJECTS" title="(defun print-objects (lst ch state)
  (cond ((null lst) state)
        (t
         (pprogn (print-object$ (car lst) ch state)
                 (print-objects (cdr lst) ch state)))))">print-objects</a> (car portcullis) ch state)
                (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> <span class="keyword">:end-portcullis-cmds</span> ch state)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (expansion-alist (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> <span class="keyword">:expansion-alist</span> ch state)
                      (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> expansion-alist ch state)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (cert-data (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> <span class="keyword">:cert-data</span> ch state)
                      (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> cert-data ch state)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (cdr portcullis) ch state)
                (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> post-alist3 ch state)
                (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (<a class="sym-link local-def" href="#def-cert-hash" data-sym="CERT-HASH" title="(defun cert-hash
       (old-cert-hash cmds pre-alist post-alist expansion-alist cert-data
        state)
  (cond
   ((if old-cert-hash
...">cert-hash</a> nil
                    (car portcullis)
                    (cdr portcullis)
                    post-alist3
                    expansion-alist
                    cert-data
                    state)
                  ch
                  state)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pcert-info (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> <span class="keyword">:pcert-info</span> ch state)
                      (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> pcert-info ch state)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> ch state)
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> certification-file)))))))))</pre>
  </div>

<div class="form-block function" id="def-make-certificate-file" data-defines="MAKE-CERTIFICATE-FILE" data-references="STRING,QUOTE,CONCATENATE,MAKE-CERTIFICATE-FILE1,SOFT,ER,VALUE,T,INCLUDE-BOOK-ALISTP,COND,ER-PROGN,MARK-LOCAL-INCLUDED-BOOKS,POST-ALIST3,CONVERT-BOOK-STRING-TO-CERT,CERTIFICATION-FILE,LET*,STATE,CTX,CERT-OP,PCERT-INFO,CERT-DATA,EXPANSION-ALIST,POST-ALIST2,POST-ALIST1,PORTCULLIS,FILE,DEFUN" data-used-by="MAKE-CERTIFICATE-FILES" data-part-name="MAKE-CERTIFICATE-FILE" data-part-args="STATE,CTX,CERT-OP,PCERT-INFO,CERT-DATA,EXPANSION-ALIST,POST-ALIST2,POST-ALIST1,PORTCULLIS,FILE" data-part-body="STATE,PCERT-INFO,CERT-DATA,EXPANSION-ALIST,STRING,QUOTE,CONCATENATE,PORTCULLIS,MAKE-CERTIFICATE-FILE1,CTX,SOFT,ER,VALUE,T,INCLUDE-BOOK-ALISTP,COND,ER-PROGN,POST-ALIST2,POST-ALIST1,MARK-LOCAL-INCLUDED-BOOKS,POST-ALIST3,CERT-OP,FILE,CONVERT-BOOK-STRING-TO-CERT,CERTIFICATION-FILE,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-CERTIFICATE-FILE">make-certificate-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-certificate-file" data-sym="MAKE-CERTIFICATE-FILE" title="(defun make-certificate-file
       (file portcullis post-alist1 post-alist2 expansion-alist cert-data
        pcert-info cert-op ctx state)
  (let* ((certification-file (convert-book-string-to-cert file cert-op))
         (post-alist3 (mark-local-included-books post-alist1 post-alist2)))
...">make-certificate-file</a>
  (file portcullis
    post-alist1
    post-alist2
    expansion-alist
    cert-data
    pcert-info
    <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((certification-file (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> file <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>)) (post-alist3 (<a class="sym-link local-def" href="#def-mark-local-included-books" data-sym="MARK-LOCAL-INCLUDED-BOOKS" title="(defun mark-local-included-books (post-alist1 post-alist2)
  (cond ((null post-alist1) nil)
        ((eq (caar post-alist1) &#39;local)
         (cons (car post-alist1)
               (mark-local-included-books (cdr post-alist1) post-alist2)))
...">mark-local-included-books</a> post-alist1 post-alist2)))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-include-book-alistp" data-sym="INCLUDE-BOOK-ALISTP" title="(defun include-book-alistp (x local-markers-allowedp)
  (include-book-alistp-1 x local-markers-allowedp))">include-book-alistp</a> post-alist3 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Ill-formed post-alist encountered in file ~x0:~|~x1"</span>
            certification-file
            post-alist3)))
      (<a class="sym-link local-def" href="#def-make-certificate-file1" data-sym="MAKE-CERTIFICATE-FILE1" title="(defun make-certificate-file1
       (file portcullis certification-file post-alist3 expansion-alist
        cert-data pcert-info cert-op ctx state)
  (assert$ (not (member-eq cert-op &#39;(:write-acl2x :write-acl2xu)))
           (assert$
...">make-certificate-file1</a> file
        portcullis
        (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> certification-file <span class="string">".temp"</span>)
        post-alist3
        expansion-alist
        cert-data
        pcert-info
        <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
        ctx
        state))))</pre>
  </div>

<div class="form-block function" id="def-make-certificate-files" data-defines="MAKE-CERTIFICATE-FILES" data-references="CERT-FILE,T,CONVERT-BOOK-STRING-TO-CERT,CONS,LIST,VALUE,PCERT1-FILE,MAKE-CERTIFICATE-FILE,PCERT0-FILE,ER-LET*,EQ,COND,STATE,CTX,CERT-OP,PCERT-INFO,CERT-DATA,EXPANSION-ALIST,POST-ALIST2,POST-ALIST1,PORTCULLIS,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="MAKE-CERTIFICATE-FILES" data-part-args="STATE,CTX,CERT-OP,PCERT-INFO,CERT-DATA,EXPANSION-ALIST,POST-ALIST2,POST-ALIST1,PORTCULLIS,FULL-BOOK-STRING" data-part-body="CERT-FILE,T,CONVERT-BOOK-STRING-TO-CERT,CONS,LIST,VALUE,PCERT1-FILE,STATE,CTX,PCERT-INFO,CERT-DATA,EXPANSION-ALIST,POST-ALIST2,POST-ALIST1,PORTCULLIS,FULL-BOOK-STRING,MAKE-CERTIFICATE-FILE,PCERT0-FILE,ER-LET*,CERT-OP,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-CERTIFICATE-FILES">make-certificate-files</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-certificate-files" data-sym="MAKE-CERTIFICATE-FILES" title="(defun make-certificate-files
       (full-book-string portcullis post-alist1 post-alist2 expansion-alist
        cert-data pcert-info cert-op ctx state)
  (cond
   ((eq cert-op :create+convert-pcert)
...">make-certificate-files</a>
  (full-book-string portcullis
    post-alist1
    post-alist2
    expansion-alist
    cert-data
    pcert-info
    <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:create+convert-pcert</span>) (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pcert0-file (<a class="sym-link local-def" href="#def-make-certificate-file" data-sym="MAKE-CERTIFICATE-FILE" title="(defun make-certificate-file
       (file portcullis post-alist1 post-alist2 expansion-alist cert-data
        pcert-info cert-op ctx state)
  (let* ((certification-file (convert-book-string-to-cert file cert-op))
         (post-alist3 (mark-local-included-books post-alist1 post-alist2)))
...">make-certificate-file</a> full-book-string
             portcullis
             post-alist1
             post-alist2
             expansion-alist
             cert-data
             pcert-info
             <span class="keyword">:create-pcert</span> ctx
             state)) (pcert1-file (<a class="sym-link local-def" href="#def-make-certificate-file" data-sym="MAKE-CERTIFICATE-FILE" title="(defun make-certificate-file
       (file portcullis post-alist1 post-alist2 expansion-alist cert-data
        pcert-info cert-op ctx state)
  (let* ((certification-file (convert-book-string-to-cert file cert-op))
         (post-alist3 (mark-local-included-books post-alist1 post-alist2)))
...">make-certificate-file</a> full-book-string
              portcullis
              post-alist1
              post-alist2
              expansion-alist
              cert-data
              nil
              <span class="keyword">:convert-pcert</span> ctx
              state)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons pcert0-file
              (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <span class="keyword">:create-pcert</span>))
            (cons pcert1-file
              (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string
                <span class="keyword">:convert-pcert</span>))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cert-file (<a class="sym-link local-def" href="#def-make-certificate-file" data-sym="MAKE-CERTIFICATE-FILE" title="(defun make-certificate-file
       (file portcullis post-alist1 post-alist2 expansion-alist cert-data
        pcert-info cert-op ctx state)
  (let* ((certification-file (convert-book-string-to-cert file cert-op))
         (post-alist3 (mark-local-included-books post-alist1 post-alist2)))
...">make-certificate-file</a> full-book-string
             portcullis
             post-alist1
             post-alist2
             expansion-alist
             cert-data
             pcert-info
             <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
             ctx
             state)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons cert-file
              (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>))))))))</pre>
  </div>

<div class="form-block function" id="def-open-input-object-file" data-defines="OPEN-INPUT-OBJECT-FILE" data-references="VALUE,T,SOFT,ER,NULL,OPEN-INPUT-CHANNEL,CH,MV-LET,STRINGP,COND,STATE,CTX,FILE,DEFUN" data-used-by="READ-ACL2X-FILE,CHK-INPUT-OBJECT-FILE,READ-OBJECT-FILE" data-part-name="OPEN-INPUT-OBJECT-FILE" data-part-args="STATE,CTX,FILE" data-part-body="VALUE,T,CTX,SOFT,ER,NULL,OPEN-INPUT-CHANNEL,STATE,CH,MV-LET,FILE,STRINGP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-INPUT-OBJECT-FILE">open-input-object-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-open-input-object-file" data-sym="OPEN-INPUT-OBJECT-FILE" title="(defun open-input-object-file (file ctx state)
  (cond
   ((stringp file)
    (mv-let (ch state) (open-input-channel file :object state)
            (cond
...">open-input-object-file</a>
  (file ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((stringp file) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch state)
        (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> file <span class="keyword">:object</span> state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"There is no file named ~x0 that can be ~
                             opened for input."</span>
              file))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> ch)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"File names in ACL2 must be strings, so ~x0 is not a ~
                legal file name."</span>
        file))))</pre>
  </div>

<div class="form-block function" id="def-read-object-file1" data-defines="READ-OBJECT-FILE1" data-references="CONS,T,REVERSE,VALUE,COND,READ-OBJECT,VAL,EOFP,MV-LET,ANS,STATE,CHANNEL,DEFUN" data-used-by="READ-OBJECT-FILE" data-part-name="READ-OBJECT-FILE1" data-part-args="ANS,STATE,CHANNEL" data-part-body="CONS,READ-OBJECT-FILE1,T,ANS,REVERSE,VALUE,COND,CHANNEL,READ-OBJECT,STATE,VAL,EOFP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-OBJECT-FILE1">read-object-file1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-object-file1" data-sym="READ-OBJECT-FILE1" title="(defun read-object-file1 (channel state ans)
  (mv-let (eofp val state) (read-object channel state)
          (cond (eofp (value (reverse ans)))
                (t (read-object-file1 channel state (cons val ans))))))">read-object-file1</a>
  (channel state ans)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp val state)
    (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> channel state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> ans)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-read-object-file1" data-sym="READ-OBJECT-FILE1" title="(defun read-object-file1 (channel state ans)
  (mv-let (eofp val state) (read-object channel state)
          (cond (eofp (value (reverse ans)))
                (t (read-object-file1 channel state (cons val ans))))))">read-object-file1</a> channel state (cons val ans))))))</pre>
  </div>

<div class="form-block function" id="def-read-object-file" data-defines="READ-OBJECT-FILE" data-references="IN-PACKAGE,QUOTE,LIST,CONS,VALUE,CLOSE-INPUT-CHANNEL,LET,READ-OBJECT-FILE1,LST,CURRENT-PACKAGE,STATE-GLOBAL-LET*,CHK-IN-PACKAGE,NEW-CURRENT-PACKAGE,OPEN-INPUT-OBJECT-FILE,CH,ER-LET*,STATE,CTX,FILE,DEFUN" data-used-by="CERTIFY-BOOK-FN,INCLUDE-BOOK-FN1" data-part-name="READ-OBJECT-FILE" data-part-args="STATE,CTX,FILE" data-part-body="IN-PACKAGE,QUOTE,LIST,CONS,VALUE,CLOSE-INPUT-CHANNEL,LET,READ-OBJECT-FILE1,LST,CURRENT-PACKAGE,STATE-GLOBAL-LET*,CHK-IN-PACKAGE,NEW-CURRENT-PACKAGE,STATE,CTX,FILE,OPEN-INPUT-OBJECT-FILE,CH,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-OBJECT-FILE">read-object-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-object-file" data-sym="READ-OBJECT-FILE" title="(defun read-object-file (file ctx state)
  (er-let*
   ((ch (open-input-object-file file ctx state))
    (new-current-package (chk-in-package ch file nil ctx state)))
   (state-global-let* ((current-package new-current-package))
...">read-object-file</a>
  (file ctx state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ch (<a class="sym-link local-def" href="#def-open-input-object-file" data-sym="OPEN-INPUT-OBJECT-FILE" title="(defun open-input-object-file (file ctx state)
  (cond
   ((stringp file)
    (mv-let (ch state) (open-input-channel file :object state)
            (cond
...">open-input-object-file</a> file ctx state)) (new-current-package (<a class="sym-link local-def" href="#def-chk-in-package" data-sym="CHK-IN-PACKAGE" title="(defun chk-in-package (channel file empty-okp ctx state)
  (state-global-let* ((current-package &quot;ACL2&quot;))
                     (mv-let (eofp val state) (read-object channel state)
                             (cond
                              (eofp
...">chk-in-package</a> ch file nil ctx state)))
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> new-current-package))
      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((lst (<a class="sym-link local-def" href="#def-read-object-file1" data-sym="READ-OBJECT-FILE1" title="(defun read-object-file1 (channel state ans)
  (mv-let (eofp val state) (read-object channel state)
          (cond (eofp (value (reverse ans)))
                (t (read-object-file1 channel state (cons val ans))))))">read-object-file1</a> ch state nil)))
        (let ((state (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> ch state)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> new-current-package) lst)))))))</pre>
  </div>

<div class="form-block function" id="def-chk-cert-annotations" data-defines="CHK-CERT-ANNOTATIONS" data-references="ASSOC,T,VALUE,ASSOC-EQ,CDR,CADR,MSG,CAR,EQ,CONSP,AND,IF,LIST,CONS,INCLUDE-BOOK-ER,COND,ER-PROGN,STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,FULL-BOOK-STRING,PORTCULLIS-CMDS,PORTCULLIS-SKIPPED-PROOFSP,CERT-ANNOTATIONS,DEFUN" data-used-by="CERTIFY-BOOK-FN,INCLUDE-BOOK-FN1" data-part-name="CHK-CERT-ANNOTATIONS" data-part-args="STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,FULL-BOOK-STRING,PORTCULLIS-CMDS,PORTCULLIS-SKIPPED-PROOFSP,CERT-ANNOTATIONS" data-part-body="ASSOC,PORTCULLIS-CMDS,T,VALUE,CERT-ANNOTATIONS,ASSOC-EQ,CDR,STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,CADR,MSG,CAR,EQ,CONSP,AND,IF,LIST,CONS,FULL-BOOK-STRING,INCLUDE-BOOK-ER,PORTCULLIS-SKIPPED-PROOFSP,COND,ER-PROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-CERT-ANNOTATIONS">chk-cert-annotations</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-cert-annotations" data-sym="CHK-CERT-ANNOTATIONS" title="(defun chk-cert-annotations
       (cert-annotations portcullis-skipped-proofsp portcullis-cmds
        full-book-string suspect-book-action-alist ctx state)
  (er-progn
   (cond
...">chk-cert-annotations</a>
  (cert-annotations portcullis-skipped-proofsp
    portcullis-cmds
    full-book-string
    suspect-book-action-alist
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (portcullis-skipped-proofsp (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
          nil
          (cons <span class="string">"The certification world for book ~x0 contains one or more ~
             SKIP-PROOFS events~@3."</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\3
                (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp portcullis-skipped-proofsp)
                    (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car portcullis-skipped-proofsp) <span class="keyword">:include-book</span>))
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" under (subsidiary) book &quot;~@0&quot;"</span>
                    (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> portcullis-skipped-proofsp))
                  <span class="string">""</span>))))
          <span class="keyword">:skip-proofs-okp</span> suspect-book-action-alist
          ctx
          state))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:skipped-proofsp</span> cert-annotations)) nil) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:skipped-proofsp</span> cert-annotations)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
          nil
          (if portcullis-cmds
            <span class="string">"The book ~x0 (including events from its portcullis) ~
                           contains one or more SKIP-PROOFS events."</span>
            <span class="string">"The book ~x0 contains one or more SKIP-PROOFS events."</span>)
          <span class="keyword">:skip-proofs-okp</span> suspect-book-action-alist
          ctx
          state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
          nil
          (if portcullis-cmds
            <span class="string">"The book ~x0 (including events from its ~
                             portcullis) may contain SKIP-PROOFS events."</span>
            <span class="string">"The book ~x0 may contain SKIP-PROOFS events."</span>)
          <span class="keyword">:skip-proofs-okp</span> suspect-book-action-alist
          ctx
          state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:axiomsp</span> cert-annotations)) nil) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:axiomsp</span> cert-annotations)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
          nil
          (if portcullis-cmds
            <span class="string">"The book ~x0 (including events from its portcullis) ~
                           contains one or more DEFAXIOM events."</span>
            <span class="string">"The book ~x0 contains one or more DEFAXIOM events."</span>)
          <span class="keyword">:defaxioms-okp</span> suspect-book-action-alist
          ctx
          state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
          nil
          (if portcullis-cmds
            <span class="string">"The book ~x0 (including events from its ~
                             portcullis) may contain DEFAXIOM events."</span>
            <span class="string">"The book ~x0 may contain DEFAXIOM events."</span>)
          <span class="keyword">:defaxioms-okp</span> suspect-book-action-alist
          ctx
          state)))))</pre>
  </div>

<div class="form-block function" id="def-chk-cert-annotations-post-alist" data-defines="CHK-CERT-ANNOTATIONS-POST-ALIST" data-references="ASSOC,LIST,CONS,INCLUDE-BOOK-ER,ASSOC-EQ,CDR,ER-PROGN,CADDDR,CERT-ANNOTATIONS,CADR,IF,FULL-SUBBOOK,LOCAL,QUOTE,CAR,EQ,LOCALP,LET*,T,VALUE,ENDP,COND,STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,FULL-BOOK-STRING,PORTCULLIS-CMDS,POST-ALIST,DEFUN" data-used-by="INCLUDE-BOOK-FN1" data-part-name="CHK-CERT-ANNOTATIONS-POST-ALIST" data-part-args="STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,FULL-BOOK-STRING,PORTCULLIS-CMDS,POST-ALIST" data-part-body="CHK-CERT-ANNOTATIONS-POST-ALIST,ASSOC,STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,PORTCULLIS-CMDS,LIST,CONS,FULL-BOOK-STRING,INCLUDE-BOOK-ER,ASSOC-EQ,CDR,ER-PROGN,CADDDR,CERT-ANNOTATIONS,CADR,IF,FULL-SUBBOOK,LOCAL,QUOTE,CAR,EQ,LOCALP,LET*,T,VALUE,POST-ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-CERT-ANNOTATIONS-POST-ALIST">chk-cert-annotations-post-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-cert-annotations-post-alist" data-sym="CHK-CERT-ANNOTATIONS-POST-ALIST" title="(defun chk-cert-annotations-post-alist
       (post-alist portcullis-cmds full-book-string suspect-book-action-alist
        ctx state)
  (cond ((endp post-alist) (value nil))
        (t
...">chk-cert-annotations-post-alist</a>
  (post-alist portcullis-cmds
    full-book-string
    suspect-book-action-alist
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> post-alist) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((localp (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car post-alist)) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>)) (full-subbook (if localp
              (car (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car post-alist)))
              (car (car post-alist))))
          (cert-annotations (if localp
              (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car post-alist)))
              (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (car post-alist)))))
        (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:skipped-proofsp</span> cert-annotations)) nil) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:skipped-proofsp</span> cert-annotations)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
                nil
                (cons <span class="string">"The book ~x0~sp~#a~[~/ locally~] includes ~xb, which ~
                   contains one or more SKIP-PROOFS events."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\a
                      (if localp
                        <span class="number">1</span>
                        <span class="number">0</span>))
                    (cons #\b full-subbook)
                    (cons #\p
                      (if portcullis-cmds
                        <span class="string">" (including events from its portcullis)"</span>
                        <span class="string">""</span>))))
                <span class="keyword">:skip-proofs-okp</span> suspect-book-action-alist
                ctx
                state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
                nil
                (cons <span class="string">"The book ~x0~sp~#a~[~/ locally~] includes ~xb, which ~
                     may contain SKIP-PROOFS events."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\a
                      (if localp
                        <span class="number">1</span>
                        <span class="number">0</span>))
                    (cons #\b full-subbook)
                    (cons #\p
                      (if portcullis-cmds
                        <span class="string">" (including events from its portcullis)"</span>
                        <span class="string">""</span>))))
                <span class="keyword">:skip-proofs-okp</span> suspect-book-action-alist
                ctx
                state)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:axiomsp</span> cert-annotations)) nil) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:axiomsp</span> cert-annotations)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
                nil
                (cons <span class="string">"The book ~x0~sp~#a~[~/ locally~] includes ~xb, which ~
                   contains one or more DEFAXIOM events."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\a
                      (if localp
                        <span class="number">1</span>
                        <span class="number">0</span>))
                    (cons #\b full-subbook)
                    (cons #\p
                      (if portcullis-cmds
                        <span class="string">" (including events from its portcullis)"</span>
                        <span class="string">""</span>))))
                <span class="keyword">:defaxioms-okp</span> suspect-book-action-alist
                ctx
                state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
                nil
                (cons <span class="string">"The book ~x0~sp~#a~[~/ locally~] includes ~xb, which ~
                     may contain DEFAXIOM events."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\a
                      (if localp
                        <span class="number">1</span>
                        <span class="number">0</span>))
                    (cons #\b full-subbook)
                    (cons #\p
                      (if portcullis-cmds
                        <span class="string">" (including events from its ~
                                         portcullis)"</span>
                        <span class="string">""</span>))))
                <span class="keyword">:defaxioms-okp</span> suspect-book-action-alist
                ctx
                state)))
          (<a class="sym-link local-def" href="#def-chk-cert-annotations-post-alist" data-sym="CHK-CERT-ANNOTATIONS-POST-ALIST" title="(defun chk-cert-annotations-post-alist
       (post-alist portcullis-cmds full-book-string suspect-book-action-alist
        ctx state)
  (cond ((endp post-alist) (value nil))
        (t
...">chk-cert-annotations-post-alist</a> (cdr post-alist)
            portcullis-cmds
            full-book-string
            suspect-book-action-alist
            ctx
            state))))))</pre>
  </div>

<div class="form-block function" id="def-chk-input-object-file" data-defines="CHK-INPUT-OBJECT-FILE" data-references="VALUE,CLOSE-INPUT-CHANNEL,LET,OPEN-INPUT-OBJECT-FILE,T,SOFT,ER,CANONICAL-PATHNAME,NULL,COND,CH,ER-LET*,STATE,CTX,FILE,DEFUN" data-used-by="INCLUDE-BOOK-FN" data-part-name="CHK-INPUT-OBJECT-FILE" data-part-args="STATE,CTX,FILE" data-part-body="VALUE,CLOSE-INPUT-CHANNEL,LET,OPEN-INPUT-OBJECT-FILE,T,CTX,SOFT,ER,STATE,FILE,CANONICAL-PATHNAME,NULL,COND,CH,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-INPUT-OBJECT-FILE">chk-input-object-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-input-object-file" data-sym="CHK-INPUT-OBJECT-FILE" title="(defun chk-input-object-file (file ctx state)
  (er-let*
   ((ch
     (cond
      ((null (canonical-pathname file nil state))
...">chk-input-object-file</a>
  (file ctx state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ch (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (canonical-pathname file nil state)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"The file ~x0 does not exist."</span> file))
         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-open-input-object-file" data-sym="OPEN-INPUT-OBJECT-FILE" title="(defun open-input-object-file (file ctx state)
  (cond
   ((stringp file)
    (mv-let (ch state) (open-input-channel file :object state)
            (cond
...">open-input-object-file</a> file ctx state)))))
    (let ((state (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> ch state)))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block function" id="def-include-book-dir" data-defines="INCLUDE-BOOK-DIR" data-references="T,PROJECT-DIR-ALIST,PROJECT-DIR-LOOKUP,KEYWORDP,COND,STATE-P1,ENABLE,INCLUDE-BOOK-DIR!-TABLE,ASSOC-EQ,CDR,ACL2-DEFAULTS-TABLE,TABLE-ALIST,ALISTP,W,WRLD,LET,RAW-INCLUDE-BOOK-DIR-ALIST,RAW-INCLUDE-BOOK-DIR!-ALIST,QUOTE,F-GET-GLOBAL,SYMBOL-ALISTP,RAW-INCLUDE-BOOK-DIR-P,NOT,OR,SYMBOLP,AND,XARGS,DECLARE,STATE,DIR,DEFUN" data-used-by="INCLUDE-BOOK-DIR-WITH-CHK" data-part-name="INCLUDE-BOOK-DIR" data-part-args="STATE,DIR" data-part-declare="STATE-P1,ENABLE,INCLUDE-BOOK-DIR!-TABLE,ASSOC-EQ,CDR,ACL2-DEFAULTS-TABLE,TABLE-ALIST,ALISTP,W,WRLD,LET,RAW-INCLUDE-BOOK-DIR-ALIST,RAW-INCLUDE-BOOK-DIR!-ALIST,QUOTE,F-GET-GLOBAL,SYMBOL-ALISTP,RAW-INCLUDE-BOOK-DIR-P,NOT,OR,DIR,SYMBOLP,AND,STATE,XARGS,DECLARE" data-part-body="INCLUDE-BOOK-DIR!-TABLE,ACL2-DEFAULTS-TABLE,TABLE-ALIST,WRLD,LET,T,RAW-INCLUDE-BOOK-DIR-ALIST,RAW-INCLUDE-BOOK-DIR!-ALIST,QUOTE,F-GET-GLOBAL,ASSOC-EQ,CDR,OR,RAW-INCLUDE-BOOK-DIR-P,STATE,W,PROJECT-DIR-ALIST,PROJECT-DIR-LOOKUP,DIR,KEYWORDP,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-DIR">include-book-dir</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-dir" data-sym="INCLUDE-BOOK-DIR" title="(defun include-book-dir (dir state)
  (declare
   (xargs :stobjs state :guard
    (and (symbolp dir)
         (or (not (raw-include-book-dir-p state))
...">include-book-dir</a>
  (dir state)
  (declare (xargs <span class="keyword">:stobjs</span> state
      <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp dir)
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-raw-include-book-dir-p" data-sym="RAW-INCLUDE-BOOK-DIR-P">raw-include-book-dir-p</a> state))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-include-book-dir!-alist state))
            (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-include-book-dir-alist state))))
        (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld))
            (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:include-book-dir-alist</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld))))
            (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'include-book-dir!-table wrld)))))
      <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link local-def" href="#def-enable" data-sym="ENABLE" title="(defmacro enable (&amp;rest rst)
  (list &#39;union-theories &#39;(current-theory :here) (kwote rst)))">enable</a> <a class="sym-link system" href="axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>)))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> dir)
       (<a class="sym-link system" href="basis-a.html#def-project-dir-lookup" data-sym="PROJECT-DIR-LOOKUP">project-dir-lookup</a> dir (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) nil)))
    ((<a class="sym-link system" href="axioms.html#def-raw-include-book-dir-p" data-sym="RAW-INCLUDE-BOOK-DIR-P">raw-include-book-dir-p</a> state) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> dir
            (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-include-book-dir!-alist state)))
        (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> dir
            (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-include-book-dir-alist state)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> dir
              (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:include-book-dir-alist</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld)))))
          (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> dir (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'include-book-dir!-table wrld))))))))</pre>
  </div>

<div class="form-block macro" id="def-include-book-dir-with-chk" data-defines="INCLUDE-BOOK-DIR-WITH-CHK" data-references="T,INCLUDE-BOOK-DIR!-TABLE,ACL2-DEFAULTS-TABLE,TABLE-ALIST,ASSOC-EQ,CDR,APPEND,W,PROJECT-DIR-ALIST,UNION-EQ,STRIP-CARS,MSG,KEYWORDP,ADD-INCLUDE-BOOK-DIR!,ADD-INCLUDE-BOOK-DIR,QUOTE,ER,NULL,COND,STATE,INCLUDE-BOOK-DIR,DIR-VALUE,LET,QUASIQUOTE,DIR,CTX,SOFT-OR-HARD,DEFMACRO" data-used-by="INCLUDE-BOOK-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-DIR-WITH-CHK">include-book-dir-with-chk</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-include-book-dir-with-chk" data-sym="INCLUDE-BOOK-DIR-WITH-CHK" title="(defmacro include-book-dir-with-chk (soft-or-hard ctx dir)
  `(let ((ctx ,ctx) (dir ,dir))
     (let ((dir-value (include-book-dir dir state)))
       (cond
        ((null dir-value)
...">include-book-dir-with-chk</a>
  (soft-or-hard ctx dir)
  `(let ((ctx ,CTX) (dir ,DIR))
    (let ((dir-value (<a class="sym-link local-def" href="#def-include-book-dir" data-sym="INCLUDE-BOOK-DIR" title="(defun include-book-dir (dir state)
  (declare
   (xargs :stobjs state :guard
    (and (symbolp dir)
         (or (not (raw-include-book-dir-p state))
...">include-book-dir</a> dir state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> dir-value) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> ,SOFT-OR-HARD
            ctx
            <span class="string">"The legal values for the :DIR argument are keywords that ~
                   include those in the global project-dir-alist (see :DOC ~
                   project-dir-alist) as well as those added by a call of ~
                   ~v0.  However, that argument is ~x1, which is not ~@2."</span>
            '(<a class="sym-link system" href="axioms.html#def-add-include-book-dir" data-sym="ADD-INCLUDE-BOOK-DIR">add-include-book-dir</a> <a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a>)
            dir
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> dir) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"among the list of those legal values, ~x0"</span>
                  (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                      (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:include-book-dir-alist</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
                        (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'include-book-dir!-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"a keyword"</span>))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ,(IF (EQ SOFT-OR-HARD &#39;SOFT)
     &#39;(VALUE DIR-VALUE)
     &#39;DIR-VALUE))))))</pre>
  </div>

<div class="form-block function" id="def-accumulate-post-alist1" data-defines="ACCUMULATE-POST-ALIST1" data-references="HONS-ACONS,CDR,HONS-GET,HONS-COPY,KEY,CADR,LOCAL,QUOTE,EQ,IF,ENTRY,CAR,ENTRY0,LET*,T,ENDP,COND,INCLUDE-BOOK-ALIST,POST-ALIST,DEFUN" data-used-by="ACCUMULATE-POST-ALIST" data-part-name="ACCUMULATE-POST-ALIST1" data-part-args="INCLUDE-BOOK-ALIST,POST-ALIST" data-part-body="HONS-ACONS,CDR,ACCUMULATE-POST-ALIST1,HONS-GET,HONS-COPY,KEY,CADR,LOCAL,QUOTE,EQ,IF,ENTRY,CAR,ENTRY0,LET*,T,INCLUDE-BOOK-ALIST,POST-ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCUMULATE-POST-ALIST1">accumulate-post-alist1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accumulate-post-alist1" data-sym="ACCUMULATE-POST-ALIST1" title="(defun accumulate-post-alist1 (post-alist include-book-alist)
  (cond ((endp post-alist) include-book-alist)
        (t
         (let* ((entry0 (car post-alist))
                (entry
...">accumulate-post-alist1</a>
  (post-alist include-book-alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> post-alist) include-book-alist)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((entry0 (car post-alist)) (entry (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car entry0) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>)
              (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> entry0)
              entry0))
          (key (hons-copy (car entry))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((hons-get key include-book-alist) (<a class="sym-link local-def" href="#def-accumulate-post-alist1" data-sym="ACCUMULATE-POST-ALIST1" title="(defun accumulate-post-alist1 (post-alist include-book-alist)
  (cond ((endp post-alist) include-book-alist)
        (t
         (let* ((entry0 (car post-alist))
                (entry
...">accumulate-post-alist1</a> (cdr post-alist) include-book-alist))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-accumulate-post-alist1" data-sym="ACCUMULATE-POST-ALIST1" title="(defun accumulate-post-alist1 (post-alist include-book-alist)
  (cond ((endp post-alist) include-book-alist)
        (t
         (let* ((entry0 (car post-alist))
                (entry
...">accumulate-post-alist1</a> (cdr post-alist)
              (hons-acons key (cdr entry) include-book-alist))))))))</pre>
  </div>

<div class="form-block function" id="def-accumulate-post-alist" data-defines="ACCUMULATE-POST-ALIST" data-references="ACCUMULATE-POST-ALIST1,FAST-ALIST-FREE-ON-EXIT,MAKE-FAST-ALIST,LET,INCLUDE-BOOK-ALIST,POST-ALIST,DEFUN" data-used-by="INCLUDE-BOOK-INSTALL-EVENT" data-part-name="ACCUMULATE-POST-ALIST" data-part-args="INCLUDE-BOOK-ALIST,POST-ALIST" data-part-body="POST-ALIST,ACCUMULATE-POST-ALIST1,FAST-ALIST-FREE-ON-EXIT,MAKE-FAST-ALIST,INCLUDE-BOOK-ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCUMULATE-POST-ALIST">accumulate-post-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accumulate-post-alist" data-sym="ACCUMULATE-POST-ALIST" title="(defun accumulate-post-alist (post-alist include-book-alist)
  (let ((include-book-alist (make-fast-alist include-book-alist)))
    (fast-alist-free-on-exit include-book-alist
                             (accumulate-post-alist1 post-alist
                                                     include-book-alist))))">accumulate-post-alist</a>
  (post-alist include-book-alist)
  (let ((include-book-alist (make-fast-alist include-book-alist)))
    (fast-alist-free-on-exit include-book-alist
      (<a class="sym-link local-def" href="#def-accumulate-post-alist1" data-sym="ACCUMULATE-POST-ALIST1" title="(defun accumulate-post-alist1 (post-alist include-book-alist)
  (cond ((endp post-alist) include-book-alist)
        (t
         (let* ((entry0 (car post-alist))
                (entry
...">accumulate-post-alist1</a> post-alist include-book-alist))))</pre>
  </div>

<div class="form-block function" id="def-skipped-proofsp-in-post-alist" data-defines="SKIPPED-PROOFSP-IN-POST-ALIST" data-references="ASSOC-EQ,CDR,CADR,CADDDR,IF,CERT-ANNOTATIONS,LOCAL,QUOTE,CAR,EQ,LOCALP,LET*,T,ENDP,COND,POST-ALIST,DEFUN" data-used-by="INCLUDE-BOOK-INSTALL-EVENT" data-part-name="SKIPPED-PROOFSP-IN-POST-ALIST" data-part-args="POST-ALIST" data-part-body="SKIPPED-PROOFSP-IN-POST-ALIST,ASSOC-EQ,CDR,CADR,CADDDR,IF,CERT-ANNOTATIONS,LOCAL,QUOTE,CAR,EQ,LOCALP,LET*,T,POST-ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SKIPPED-PROOFSP-IN-POST-ALIST">skipped-proofsp-in-post-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-skipped-proofsp-in-post-alist" data-sym="SKIPPED-PROOFSP-IN-POST-ALIST" title="(defun skipped-proofsp-in-post-alist (post-alist)
  (cond ((endp post-alist) nil)
        (t
         (let* ((localp (eq (car (car post-alist)) &#39;local))
                (cert-annotations
...">skipped-proofsp-in-post-alist</a>
  (post-alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> post-alist) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((localp (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car post-alist)) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>)) (cert-annotations (if localp
              (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car post-alist)))
              (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (car post-alist)))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:skipped-proofsp</span> cert-annotations)) (if localp
              (car (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car post-alist)))
              (car (car post-alist))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-skipped-proofsp-in-post-alist" data-sym="SKIPPED-PROOFSP-IN-POST-ALIST" title="(defun skipped-proofsp-in-post-alist (post-alist)
  (cond ((endp post-alist) nil)
        (t
         (let* ((localp (eq (car (car post-alist)) &#39;local))
                (cert-annotations
...">skipped-proofsp-in-post-alist</a> (cdr post-alist))))))))</pre>
  </div>

<div class="form-block function" id="def-book-hash-alist" data-defines="BOOK-HASH-ALIST" data-references="QUASIQUOTE,VALUE,FILE-LENGTH$,BOOK-LENGTH,FILE-WRITE-DATE$,BOOK-WRITE-DATE,MV-LET,STATE,FULL-BOOK-STRING,DEFUN" data-used-by="BOOK-HASH" data-part-name="BOOK-HASH-ALIST" data-part-args="STATE,FULL-BOOK-STRING" data-part-body="QUASIQUOTE,VALUE,FILE-LENGTH$,BOOK-LENGTH,FULL-BOOK-STRING,FILE-WRITE-DATE$,STATE,BOOK-WRITE-DATE,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BOOK-HASH-ALIST">book-hash-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-book-hash-alist" data-sym="BOOK-HASH-ALIST" title="(defun book-hash-alist (full-book-string state)
  (mv-let (book-write-date state) (file-write-date$ full-book-string state)
          (mv-let (book-length state) (file-length$ full-book-string state)
                  (value
                   `((:book-length . ,book-length)">book-hash-alist</a>
  (full-book-string state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (book-write-date state)
    (<a class="sym-link system" href="axioms.html#def-file-write-date_24" data-sym="FILE-WRITE-DATE$">file-write-date$</a> full-book-string state)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (book-length state)
      (<a class="sym-link system" href="axioms.html#def-file-length_24" data-sym="FILE-LENGTH$">file-length$</a> full-book-string state)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `((<span class="keyword">:book-length</span> . ,BOOK-LENGTH) (<span class="keyword">:book-write-date</span> . ,BOOK-WRITE-DATE))))))</pre>
  </div>

<div class="form-block function" id="def-book-hash" data-defines="BOOK-HASH" data-references="BOOK-HASH-ALIST,T,LIST*,CHECK-SUM-OBJ,VALUE,BOOK-HASH-ALISTP,QUOTE,F-GET-GLOBAL,NOT,INTEGERP,IF,COND,STATE,BOOK-EV-LST,CERT-DATA,EXPANSION-ALIST,PORTCULLIS-CMDS,FULL-BOOK-STRING,OLD-BOOK-HASH,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+,CERTIFY-BOOK-CONVERT-PCERT,INCLUDE-BOOK-FN1,INCLUDE-BOOK-ALIST-ENTRY-P" data-part-name="BOOK-HASH" data-part-args="STATE,BOOK-EV-LST,CERT-DATA,EXPANSION-ALIST,PORTCULLIS-CMDS,FULL-BOOK-STRING,OLD-BOOK-HASH" data-part-body="FULL-BOOK-STRING,BOOK-HASH-ALIST,T,CERT-DATA,BOOK-EV-LST,EXPANSION-ALIST,PORTCULLIS-CMDS,LIST*,CHECK-SUM-OBJ,VALUE,STATE,BOOK-HASH-ALISTP,QUOTE,F-GET-GLOBAL,NOT,INTEGERP,OLD-BOOK-HASH,IF,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BOOK-HASH">book-hash</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a>
  (old-book-hash full-book-string
    portcullis-cmds
    expansion-alist
    cert-data
    book-ev-lst
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((if old-book-hash
       (integerp old-book-hash)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'book-hash-alistp state))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="basis-b.html#def-check-sum-obj" data-sym="CHECK-SUM-OBJ">check-sum-obj</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> portcullis-cmds
            expansion-alist
            book-ev-lst
            cert-data))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-book-hash-alist" data-sym="BOOK-HASH-ALIST" title="(defun book-hash-alist (full-book-string state)
  (mv-let (book-write-date state) (file-write-date$ full-book-string state)
          (mv-let (book-length state) (file-length$ full-book-string state)
                  (value
                   `((:book-length . ,book-length)">book-hash-alist</a> full-book-string state))))</pre>
  </div>

<div class="form-block macro" id="def-with-hcomp-bindings" data-defines="WITH-HCOMP-BINDINGS" data-references="FORM,DEFMACRO" data-used-by="CERTIFY-BOOK-STEP-3+" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-HCOMP-BINDINGS">with-hcomp-bindings</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-hcomp-bindings" data-sym="WITH-HCOMP-BINDINGS" title="(defmacro with-hcomp-bindings (form) form)">with-hcomp-bindings</a> (form) form)</pre>
  </div>

<div class="form-block macro" id="def-with-hcomp-ht-bindings" data-defines="WITH-HCOMP-HT-BINDINGS" data-references="FORM,DEFMACRO" data-used-by="INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS,INCLUDE-BOOK-CERT-OBJ-PRELIM" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-HCOMP-HT-BINDINGS">with-hcomp-ht-bindings</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-hcomp-ht-bindings" data-sym="WITH-HCOMP-HT-BINDINGS" title="(defmacro with-hcomp-ht-bindings (form) form)">with-hcomp-ht-bindings</a> (form) form)</pre>
  </div>

<div class="form-block function" id="def-get-declaim-list" data-defines="GET-DECLAIM-LIST" data-references="READ-ACL2-ORACLE,STATE,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+,INCLUDE-BOOK-INSTALL-EVENT" data-part-name="GET-DECLAIM-LIST" data-part-args="STATE" data-part-body="STATE,READ-ACL2-ORACLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-DECLAIM-LIST">get-declaim-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-declaim-list" data-sym="GET-DECLAIM-LIST" title="(defun get-declaim-list (state) (read-acl2-oracle state))">get-declaim-list</a> (state) (<a class="sym-link system" href="axioms.html#def-read-acl2-oracle" data-sym="READ-ACL2-ORACLE">read-acl2-oracle</a> state))</pre>
  </div>

<div class="form-block function" id="def-tilde-_40-book-stack-msg" data-defines="TILDE-@-BOOK-STACK-MSG" data-references="EQ,T,QUASIQUOTE,MSG,COND,ARG,BOOK-NAME-TO-FILENAME-1,SYSFILE-P,IF,STRIP-CARS,REVERSE,BOOK-NAME-LST-TO-FILENAME-LST,STACK-REV,PROJECT-DIR-ALIST,LET*,WRLD,CTX,LOAD-COMPILED-STACK,REASON,DEFUN" data-part-name="TILDE-@-BOOK-STACK-MSG" data-part-args="WRLD,CTX,LOAD-COMPILED-STACK,REASON" data-part-body="EQ,T,QUASIQUOTE,MSG,COND,ARG,BOOK-NAME-TO-FILENAME-1,SYSFILE-P,IF,REASON,CTX,LOAD-COMPILED-STACK,STRIP-CARS,REVERSE,BOOK-NAME-LST-TO-FILENAME-LST,STACK-REV,WRLD,PROJECT-DIR-ALIST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-@-BOOK-STACK-MSG">tilde-@-book-stack-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_40-book-stack-msg" data-sym="TILDE-@-BOOK-STACK-MSG" title="(defun tilde-@-book-stack-msg (reason load-compiled-stack ctx wrld)
  (let* ((project-dir-alist (project-dir-alist wrld))
         (stack-rev
          (book-name-lst-to-filename-lst
           (reverse (strip-cars load-compiled-stack)) project-dir-alist ctx))
...">tilde-@-book-stack-msg</a>
  (reason load-compiled-stack ctx wrld)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> wrld)) (stack-rev (<a class="sym-link system" href="basis-a.html#def-book-name-lst-to-filename-lst" data-sym="BOOK-NAME-LST-TO-FILENAME-LST">book-name-lst-to-filename-lst</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> load-compiled-stack))
          <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>
          ctx))
      (reason (if (<a class="sym-link system" href="basis-a.html#def-sysfile-p" data-sym="SYSFILE-P">sysfile-p</a> reason)
          (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename-1" data-sym="BOOK-NAME-TO-FILENAME-1">book-name-to-filename-1</a> reason <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> ctx)
          reason))
      (arg (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (stack-rev (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Here is the sequence of books with loads of compiled or ~
                  expansion files that have led down to the printing of this ~
                  message, where the load for each is halted during the load ~
                  for the next:~|~%~*0"</span>
              `(<span class="string">"  &lt;empty&gt;"</span> <span class="string">"  ~s*"</span> <span class="string">"  ~s*~|"</span> <span class="string">"  ~s*~|"</span> ,STACK-REV)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"  No load was in progress for any parent book."</span>))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> reason <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  This is an error because an include-book for this book ~
                 specified :LOAD-COMPILE-FILE ~x0; see :DOC include-book.~@1"</span>
          reason
          arg))
      (reason (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  This is an error because we are underneath an include-book ~
                 for~|  ~y0that specified :LOAD-COMPILE-FILE ~x1; see :DOC ~
                 include-book.~@2"</span>
          reason
          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
          arg))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> arg))))</pre>
  </div>

<div class="form-block function" id="def-convert-book-string-to-acl2x" data-defines="CONVERT-BOOK-STRING-TO-ACL2X" data-references="REMOVE-LISP-SUFFIX,STRING,QUOTE,CONCATENATE,X,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CONVERT-BOOK-STRING-TO-ACL2X" data-part-args="X" data-part-body="X,REMOVE-LISP-SUFFIX,STRING,QUOTE,CONCATENATE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONVERT-BOOK-STRING-TO-ACL2X">convert-book-string-to-acl2x</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-convert-book-string-to-acl2x" data-sym="CONVERT-BOOK-STRING-TO-ACL2X" title="(defun convert-book-string-to-acl2x (x)
  (concatenate &#39;string (remove-lisp-suffix x nil) &quot;acl2x&quot;))">convert-book-string-to-acl2x</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> (<a class="sym-link system" href="history-management.html#def-remove-lisp-suffix" data-sym="REMOVE-LISP-SUFFIX">remove-lisp-suffix</a> x nil) <span class="string">"acl2x"</span>))</pre>
  </div>

<div class="form-block function" id="def-acl2x-alistp" data-defines="ACL2X-ALISTP" data-references="T,CDR,CAAR,INTEGERP,CAR,CONSP,<,NULL,AND,ATOM,COND,LEN,INDEX,X,DEFUN" data-used-by="READ-ACL2X-FILE" data-part-name="ACL2X-ALISTP" data-part-args="LEN,INDEX,X" data-part-body="T,CDR,ACL2X-ALISTP,CAAR,INTEGERP,CAR,CONSP,LEN,INDEX,<,NULL,AND,X,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2X-ALISTP">acl2x-alistp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-acl2x-alistp" data-sym="ACL2X-ALISTP" title="(defun acl2x-alistp (x index len)
  (cond ((atom x) (and (null x) (&lt; index len)))
        ((consp (car x))
         (and (integerp (caar x)) (&lt; index (caar x))
              (acl2x-alistp (cdr x) (caar x) len)))">acl2x-alistp</a>
  (x index <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) (&lt; index <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)))
    ((consp (car x)) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x))
        (&lt; index (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x))
        (<a class="sym-link local-def" href="#def-acl2x-alistp" data-sym="ACL2X-ALISTP" title="(defun acl2x-alistp (x index len)
  (cond ((atom x) (and (null x) (&lt; index len)))
        ((consp (car x))
         (and (integerp (caar x)) (&lt; index (caar x))
              (acl2x-alistp (cdr x) (caar x) len)))">acl2x-alistp</a> (cdr x) (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-read-acl2x-file" data-defines="READ-ACL2X-FILE" data-references="ZERO-ONE-OR-MORE,LENGTH,OBSERVATION,ACL2X-ALISTP,READ-OBJECT,VAL,EOFP,CURRENT-PACKAGE,STATE-GLOBAL-LET*,OPEN-INPUT-OBJECT-FILE,CHAN,ER-LET*,IF,SOFT,ER,EQ,<,NATP,OR,BOOK-DATE,VALUE,T,WARNING$,PPROGN,NOT,COND,FILE-WRITE-DATE$,ACL2X-DATE,MV-LET,STATE,CTX,ACL2X,LEN,FULL-BOOK-STRING,ACL2X-FILE,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="READ-ACL2X-FILE" data-part-args="STATE,CTX,ACL2X,LEN,FULL-BOOK-STRING,ACL2X-FILE" data-part-body="ZERO-ONE-OR-MORE,LENGTH,OBSERVATION,LEN,ACL2X-ALISTP,READ-OBJECT,VAL,EOFP,CURRENT-PACKAGE,STATE-GLOBAL-LET*,OPEN-INPUT-OBJECT-FILE,CHAN,ER-LET*,IF,SOFT,ER,EQ,<,NATP,OR,BOOK-DATE,VALUE,T,FULL-BOOK-STRING,CTX,WARNING$,PPROGN,ACL2X,NOT,COND,ACL2X-FILE,FILE-WRITE-DATE$,STATE,ACL2X-DATE,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-ACL2X-FILE">read-acl2x-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-acl2x-file" data-sym="READ-ACL2X-FILE" title="(defun read-acl2x-file (acl2x-file full-book-string len acl2x ctx state)
  (mv-let (acl2x-date state) (file-write-date$ acl2x-file state)
          (cond
           ((not acl2x)
            (pprogn
...">read-acl2x-file</a>
  (acl2x-file full-book-string <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> acl2x ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (acl2x-date state)
    (<a class="sym-link system" href="axioms.html#def-file-write-date_24" data-sym="FILE-WRITE-DATE$">file-write-date$</a> acl2x-file state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> acl2x) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (acl2x-date (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                <span class="string">"acl2x"</span>
                <span class="string">"Although the file ~x0 exists, it is being ~
                               ignored because keyword option :ACL2X T was ~
                               not supplied to certify-book."</span>
                acl2x-file
                full-book-string))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (book-date state)
          (<a class="sym-link system" href="axioms.html#def-file-write-date_24" data-sym="FILE-WRITE-DATE$">file-write-date$</a> full-book-string state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> acl2x-date))
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> book-date))
               (&lt; acl2x-date book-date)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> acl2x <span class="keyword">:optional</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"Certify-book has been instructed with option :ACL2X T to ~
                 read file ~x0.  However, this file ~#1~[does not exist~/has ~
                 not been confirmed to be at least as recent as the book ~
                 ~x2~].  See :DOC set-write-acl2x."</span>
                    acl2x-file
                    (if acl2x-date
                      <span class="number">1</span>
                      <span class="number">0</span>)
                    full-book-string))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((chan (<a class="sym-link local-def" href="#def-open-input-object-file" data-sym="OPEN-INPUT-OBJECT-FILE" title="(defun open-input-object-file (file ctx state)
  (cond
   ((stringp file)
    (mv-let (ch state) (open-input-channel file :object state)
            (cond
...">open-input-object-file</a> acl2x-file ctx state)))
                (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (chan (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp val state)
                        (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> chan state)
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                              ctx
                              <span class="string">"No form was read in acl2x file ~x0.~|See ~
                                   :DOC certify-book."</span>
                              acl2x-file))
                          ((<a class="sym-link local-def" href="#def-acl2x-alistp" data-sym="ACL2X-ALISTP" title="(defun acl2x-alistp (x index len)
  (cond ((atom x) (and (null x) (&lt; index len)))
        ((consp (car x))
         (and (integerp (caar x)) (&lt; index (caar x))
              (acl2x-alistp (cdr x) (caar x) len)))">acl2x-alistp</a> val <span class="number">0</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
                                <span class="string">"Using expansion-alist containing ~n0 ~
                                        ~#1~[entries~/entry~/entries~] from ~
                                        file ~x2."</span>
                                (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> val)
                                (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> val)
                                acl2x-file)
                              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val)))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                              ctx
                              <span class="string">"Illegal value in acl2x file:~|~x0~|See :DOC ~
                                certify-book."</span>
                              val)))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))))))))</pre>
  </div>

<div class="form-block function" id="def-eval-port-file" data-defines="EVAL-PORT-FILE" data-references="PROOFS-CO,LENGTH,CONS,LIST,FMS,EVENT,IO?,SILENT-ERROR,CLOSE-INPUT-CHANNEL,CHK-RAISE-PORTCULLIS1,WITH-RECKLESS-READTABLE,REVERT-WORLD-ON-ERROR,VAL,ERROR-FLG,CURRENT-PACKAGE,STATE-GLOBAL-LET*,WITH-CBD,OBSERVATION-CW,PROG2$,SOFT,ER,EQUAL,NOT,CHK-IN-PACKAGE,PKG,ER-LET*,T,VALUE,NULL,COND,OPEN-INPUT-CHANNEL,CH,MV-LET,PPROGN,DIRECTORY-OF-ABSOLUTE-PATHNAME,DIR,CONVERT-BOOK-STRING-TO-PORT,PORT-FILE,LET,STATE,CTX,FULL-BOOK-STRING,DEFUN" data-used-by="INCLUDE-BOOK-FN1" data-part-name="EVAL-PORT-FILE" data-part-args="STATE,CTX,FULL-BOOK-STRING" data-part-body="PROOFS-CO,LENGTH,CONS,LIST,FMS,EVENT,IO?,SILENT-ERROR,CLOSE-INPUT-CHANNEL,CHK-RAISE-PORTCULLIS1,WITH-RECKLESS-READTABLE,REVERT-WORLD-ON-ERROR,VAL,ERROR-FLG,CURRENT-PACKAGE,STATE-GLOBAL-LET*,WITH-CBD,OBSERVATION-CW,PROG2$,SOFT,ER,EQUAL,NOT,CTX,CHK-IN-PACKAGE,PKG,ER-LET*,T,VALUE,NULL,COND,OPEN-INPUT-CHANNEL,STATE,CH,MV-LET,PPROGN,DIRECTORY-OF-ABSOLUTE-PATHNAME,DIR,FULL-BOOK-STRING,CONVERT-BOOK-STRING-TO-PORT,PORT-FILE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVAL-PORT-FILE">eval-port-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-eval-port-file" data-sym="EVAL-PORT-FILE" title="(defun eval-port-file (full-book-string ctx state)
  (let ((port-file (convert-book-string-to-port full-book-string))
        (dir (directory-of-absolute-pathname full-book-string)))
    (pprogn
     (mv-let (ch state) (open-input-channel port-file :object state)
...">eval-port-file</a>
  (full-book-string ctx state)
  (let ((port-file (<a class="sym-link local-def" href="#def-convert-book-string-to-port" data-sym="CONVERT-BOOK-STRING-TO-PORT" title="(defun convert-book-string-to-port (x)
  (concatenate &#39;string (remove-lisp-suffix x nil) &quot;port&quot;))">convert-book-string-to-port</a> full-book-string)) (dir (<a class="sym-link local-def" href="#def-directory-of-absolute-pathname" data-sym="DIRECTORY-OF-ABSOLUTE-PATHNAME" title="(defun directory-of-absolute-pathname (pathname)
  (let* ((lst (coerce pathname &#39;list))
         (rlst (reverse lst))
         (temp (member *directory-separator* rlst)))
    (coerce (reverse temp) &#39;string)))">directory-of-absolute-pathname</a> full-book-string)))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch state)
        (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> port-file <span class="keyword">:object</span> state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pkg (<a class="sym-link local-def" href="#def-chk-in-package" data-sym="CHK-IN-PACKAGE" title="(defun chk-in-package (channel file empty-okp ctx state)
  (state-global-let* ((current-package &quot;ACL2&quot;))
                     (mv-let (eofp val state) (read-object channel state)
                             (cond
                              (eofp
...">chk-in-package</a> ch port-file <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ctx state)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pkg) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal pkg <span class="string">"ACL2"</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"File ~x0 is corrupted.  It was expected either to contain no ~
                 forms or to start with the form (in-package &quot;ACL2&quot;)."</span>
                    port-file))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="basis-a.html#def-observation-cw" data-sym="OBSERVATION-CW">observation-cw</a> ctx <span class="string">"Reading .port file, ~s0."</span> port-file)
                    (<a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a> dir
                      (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>))
                        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (error-flg val state)
                          (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-with-reckless-readtable" data-sym="WITH-RECKLESS-READTABLE">with-reckless-readtable</a> (<a class="sym-link local-def" href="#def-chk-raise-portcullis1" data-sym="CHK-RAISE-PORTCULLIS1" title="(defun chk-raise-portcullis1 (file1 file2 ch-or-cert-obj port-file-p ctx state)
  (state-global-let*
   ((ld-skip-proofsp &#39;include-book) (skip-proofs-by-system t)
    (in-local-flg
     (and (f-get-global &#39;in-local-flg state) &#39;local-include-book)))
...">chk-raise-portcullis1</a> full-book-string
                                port-file
                                ch
                                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                                ctx
                                state)))
                          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> ch state)
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (error-flg (silent-error state))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> val) state)
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
                                        nil
                                        state
                                        (port-file val)
                                        (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"ACL2 has processed the ~n0 ~
                                         command~#1~[~/s~] in file ~x2.~|"</span>
                                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> val))
                                            (cons #\1 val)
                                            (cons #\2 port-file))
                                          (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                                          state
                                          nil))))
                                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-getenv_21" data-defines="GETENV!" data-references="EQUAL,NOT,AND,VALUE,GETENV$,TEMP,ER-LET*,STRINGP,XARGS,DECLARE,STATE,STR,DEFUN" data-used-by="CERTIFY-BOOK-FN,CERTIFY-BOOK-COMPILE-FLG,CERTIFY-BOOK-WRITE-PORT,EVENT-DATA-CHANNEL,USELESS-RUNES-ENV-INFO,MAYBE-WRITE-BOOKDATA,INCLUDE-BOOK-PCERT-P" data-part-name="GETENV!" data-part-args="STATE,STR" data-part-declare="STR,STRINGP,STATE,XARGS,DECLARE" data-part-body="EQUAL,NOT,AND,VALUE,STATE,STR,GETENV$,TEMP,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GETENV!">getenv!</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a>
  (str state)
  (declare (xargs <span class="keyword">:stobjs</span> state <span class="keyword">:guard</span> (stringp str)))
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((temp (<a class="sym-link system" href="axioms.html#def-getenv_24" data-sym="GETENV$">getenv$</a> str state)))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal temp <span class="string">""</span>)) temp))))</pre>
  </div>

<div class="form-block function" id="def-update-pcert-books" data-defines="UPDATE-PCERT-BOOKS" data-references="T,GLOBAL-VAL,CONS,PCERT-BOOKS,QUOTE,GLOBAL-SET,COND,WRLD,PCERT-P,FULL-BOOK-NAME,DEFUN" data-used-by="INCLUDE-BOOK-INSTALL-EVENT" data-part-name="UPDATE-PCERT-BOOKS" data-part-args="WRLD,PCERT-P,FULL-BOOK-NAME" data-part-body="T,WRLD,GLOBAL-VAL,FULL-BOOK-NAME,CONS,PCERT-BOOKS,QUOTE,GLOBAL-SET,PCERT-P,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-PCERT-BOOKS">update-pcert-books</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-pcert-books" data-sym="UPDATE-PCERT-BOOKS" title="(defun update-pcert-books (full-book-name pcert-p wrld)
  (cond
   (pcert-p
    (global-set &#39;pcert-books
                (cons full-book-name (global-val &#39;pcert-books wrld)) wrld))">update-pcert-books</a>
  (full-book-name pcert-p wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pcert-p (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'pcert-books
        (cons full-book-name (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'pcert-books wrld))
        wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)))</pre>
  </div>

<div class="form-block constant" id="def-_2Aprojects_2Fapply_2Fbase-sysfile_2A" data-defines="*PROJECTS/APPLY/BASE-SYSFILE*" data-references="MAKE-SYSFILE,DEFCONST" data-used-by="INCLUDE-BOOK-INSTALL-EVENT" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*PROJECTS/APPLY/BASE-SYSFILE*">*projects/apply/base-sysfile*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aprojects_2Fapply_2Fbase-sysfile_2A" data-sym="*PROJECTS/APPLY/BASE-SYSFILE*" title="(defconst *projects/apply/base-sysfile*
          (make-sysfile :system &quot;projects/apply/base.lisp&quot;))">*projects/apply/base-sysfile*</a>
  (<a class="sym-link system" href="basis-a.html#def-make-sysfile" data-sym="MAKE-SYSFILE">make-sysfile</a> <span class="keyword">:system</span> <span class="string">"projects/apply/base.lisp"</span>))</pre>
  </div>

<div class="form-block function" id="def-include-book-cert-obj-prelim" data-defines="INCLUDE-BOOK-CERT-OBJ-PRELIM" data-references="INCLUDE-BOOK,CHK-CERTIFICATE-FILE,WITH-HCOMP-HT-BINDINGS,T,BOOK-NAME-TO-FILENAME,MSG,EQUAL,IF,INCLUDE-BOOK-ER,EQ,IGNORE-CERT-FILES,QUOTE,F-GET-GLOBAL,VALUE,COND,STATE,WRLD,CTX,DIRECTORY-NAME,SUSPECT-BOOK-ACTION-ALIST,FULL-BOOK-NAME,FULL-BOOK-STRING,UNCERTIFIED-OKP,BEHALF-OF-CERTIFY-FLG,DEFUN" data-used-by="INCLUDE-BOOK-FN1" data-part-name="INCLUDE-BOOK-CERT-OBJ-PRELIM" data-part-args="STATE,WRLD,CTX,DIRECTORY-NAME,SUSPECT-BOOK-ACTION-ALIST,FULL-BOOK-NAME,FULL-BOOK-STRING,UNCERTIFIED-OKP,BEHALF-OF-CERTIFY-FLG" data-part-body="INCLUDE-BOOK,DIRECTORY-NAME,CHK-CERTIFICATE-FILE,WITH-HCOMP-HT-BINDINGS,T,SUSPECT-BOOK-ACTION-ALIST,CTX,WRLD,BOOK-NAME-TO-FILENAME,MSG,FULL-BOOK-NAME,EQUAL,IF,FULL-BOOK-STRING,INCLUDE-BOOK-ER,UNCERTIFIED-OKP,EQ,STATE,IGNORE-CERT-FILES,QUOTE,F-GET-GLOBAL,VALUE,BEHALF-OF-CERTIFY-FLG,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-CERT-OBJ-PRELIM">include-book-cert-obj-prelim</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-cert-obj-prelim" data-sym="INCLUDE-BOOK-CERT-OBJ-PRELIM" title="(defun include-book-cert-obj-prelim
       (behalf-of-certify-flg uncertified-okp full-book-string full-book-name
        suspect-book-action-alist directory-name ctx wrld state)
  (cond (behalf-of-certify-flg (value nil))
        ((f-get-global &#39;ignore-cert-files state)
...">include-book-cert-obj-prelim</a>
  (behalf-of-certify-flg uncertified-okp
    full-book-string
    full-book-name
    suspect-book-action-alist
    directory-name
    ctx
    wrld
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (behalf-of-certify-flg (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ignore-cert-files state) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> uncertified-okp nil) (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
            nil
            (if (equal full-book-name
                (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ignore-cert-files state))
              <span class="string">"Include-book is specifying :UNCERTIFIED-OKP :IGNORE-CERTS, ~
                 which requires that its certificate file (if any) must be ~
                 ignored."</span>
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"A superior include-book event for ~x0 has specified ~
                    :UNCERTIFIED-OKP :IGNORE-CERTS, which requires that the ~
                    certificate files (if any) for its sub-books must be ~
                    ignored."</span>
                (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename" data-sym="BOOK-NAME-TO-FILENAME">book-name-to-filename</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ignore-cert-files state)
                  wrld
                  ctx)))
            <span class="keyword">:uncertified-okp</span> suspect-book-action-alist
            ctx
            state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-with-hcomp-ht-bindings" data-sym="WITH-HCOMP-HT-BINDINGS" title="(defmacro with-hcomp-ht-bindings (form) form)">with-hcomp-ht-bindings</a> (<a class="sym-link local-def" href="#def-chk-certificate-file" data-sym="CHK-CERTIFICATE-FILE" title="(defun chk-certificate-file
       (file1 dir full-book-name caller ctx state suspect-book-action-alist
        evalp)
  (let ((dir (or dir (directory-of-absolute-pathname file1))))
    (mv-let (ch-or-cert-obj file2 state)
...">chk-certificate-file</a> full-book-string
          directory-name
          full-book-name
          '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
          ctx
          state
          suspect-book-action-alist
          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))</pre>
  </div>

<div class="form-block function" id="def-include-book-ok-familiar-name-and-hash" data-defines="INCLUDE-BOOK-OK-FAMILIAR-NAME-AND-HASH" data-references="NO-ERRP-2,VALUE,T,LIST,CONS,INCLUDE-BOOK-ER,CAR,CADDR,EQUAL,NOT,AND,COND,NO-ERRP-1,ER-LET*,STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,EV-LST-BOOK-HASH,POST-ALIST-BOOK-HASH,FULL-BOOK-STRING,FAMILIAR-NAME,POST-ALIST,CERT-OBJ,DEFUN" data-used-by="INCLUDE-BOOK-FN1" data-part-name="INCLUDE-BOOK-OK-FAMILIAR-NAME-AND-HASH" data-part-args="STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,EV-LST-BOOK-HASH,POST-ALIST-BOOK-HASH,FULL-BOOK-STRING,FAMILIAR-NAME,POST-ALIST,CERT-OBJ" data-part-body="NO-ERRP-2,VALUE,T,STATE,CTX,SUSPECT-BOOK-ACTION-ALIST,EV-LST-BOOK-HASH,POST-ALIST-BOOK-HASH,LIST,CONS,FULL-BOOK-STRING,INCLUDE-BOOK-ER,FAMILIAR-NAME,POST-ALIST,CAR,CADDR,EQUAL,NOT,CERT-OBJ,AND,COND,NO-ERRP-1,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-OK-FAMILIAR-NAME-AND-HASH">include-book-ok-familiar-name-and-hash</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-ok-familiar-name-and-hash" data-sym="INCLUDE-BOOK-OK-FAMILIAR-NAME-AND-HASH" title="(defun include-book-ok-familiar-name-and-hash
       (cert-obj post-alist familiar-name full-book-string post-alist-book-hash
        ev-lst-book-hash suspect-book-action-alist ctx state)
  (er-let*
   ((no-errp-1
...">include-book-ok-familiar-name-and-hash</a>
  (cert-obj post-alist
    familiar-name
    full-book-string
    post-alist-book-hash
    ev-lst-book-hash
    suspect-book-action-alist
    ctx
    state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((no-errp-1 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cert-obj
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car post-alist)) familiar-name))) (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
             nil
             (cons <span class="string">"The cer~-ti~-fi~-cate on file for ~x0 lists the book under ~
                  the name ~x3 whereas we were expecting it to give the name ~
                  ~x4.  While one can often move a certified book from one ~
                  directory to another after cer~-ti~-fi~-ca~-tion, we insist ~
                  that it keep the same familiar name.  This allows the ~
                  cer~-ti~-fi~-cate file to contain the familiar name, making ~
                  it easier to identify which cer~-ti~-fi~-cates go with ~
                  which files and inspiring a little more confidence that the ~
                  cer~-ti~-fi~-cate really does describe the alleged file.  ~
                  In the present case, it looks as though the familiar ~
                  book-name was changed after cer~-ti~-fi~-ca~-tion.  For ~
                  what it is worth, the book-hash of the file at ~
                  cer~-ti~-fi~-ca~-tion was ~x5.  Its book-hash now is ~x6."</span>
               (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\3 (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car post-alist)))
                 (cons #\4 familiar-name)
                 (cons #\5 post-alist-book-hash)
                 (cons #\6 ev-lst-book-hash)))
             <span class="keyword">:uncertified-okp</span> suspect-book-action-alist
             ctx
             state))
         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))) (no-errp-2 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cert-obj
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal post-alist-book-hash ev-lst-book-hash))) (<a class="sym-link local-def" href="#def-include-book-er" data-sym="INCLUDE-BOOK-ER" title="(defun include-book-er
       (file1 file2 msg keyword suspect-book-action-alist ctx state)
  (let ((warning-summary
         (include-book-er-warning-summary keyword suspect-book-action-alist
                                          state)))">include-book-er</a> full-book-string
              nil
              (cons <span class="string">"~|The certificate for ~x0 lists the book-hash of that book ~
                  as ~x3.  But its book-hash is now computed to be ~x4.~|See ~
                  :DOC book-hash-mismatch."</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\3 post-alist-book-hash)
                  (cons #\4 ev-lst-book-hash)))
              <span class="keyword">:uncertified-okp</span> suspect-book-action-alist
              ctx
              state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> no-errp-1 no-errp-2))))</pre>
  </div>

<div class="form-block function" id="def-include-book-process-embedded-events" data-defines="INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS" data-references="VALUE,OR,EQ,CDR,SUBST-BY-POSITION,LIST,CAR,CADR,INCLUDE-BOOK,PROCESS-EMBEDDED-EVENTS,WITH-HCOMP-HT-BINDINGS,ER-PROGN,NOT,INCLUDING-UNCERTIFIED-P,LOCAL-INCLUDE-BOOK,IN-LOCAL-FLG,T,GUARD-CHECKING-ON,MATCH-FREE-ERROR,AND,SKIP-NOTIFY-ON-DEFTTAG,QUOTE,F-GET-GLOBAL,IF,TTAGS-ALLOWED,AXIOMSP,STATE-GLOBAL-LET*,WITH-CBD,STATE,CTX,EXPANSION-ALIST,SKIP-PROOFSP,FULL-BOOK-NAME,FULL-BOOK-STRING,BEHALF-OF-CERTIFY-FLG,CERT-DATA,CERT-TTAGS,CERT-OBJ,TTAGS-INFO,DIRECTORY-NAME,EV-LST,DEFUN" data-used-by="INCLUDE-BOOK-FN1" data-part-name="INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS" data-part-args="STATE,CTX,EXPANSION-ALIST,SKIP-PROOFSP,FULL-BOOK-NAME,FULL-BOOK-STRING,BEHALF-OF-CERTIFY-FLG,CERT-DATA,CERT-TTAGS,CERT-OBJ,TTAGS-INFO,DIRECTORY-NAME,EV-LST" data-part-body="VALUE,CTX,CERT-DATA,OR,EQ,CDR,EXPANSION-ALIST,SUBST-BY-POSITION,FULL-BOOK-NAME,LIST,EV-LST,CAR,CADR,SKIP-PROOFSP,BEHALF-OF-CERTIFY-FLG,INCLUDE-BOOK,PROCESS-EMBEDDED-EVENTS,WITH-HCOMP-HT-BINDINGS,ER-PROGN,NOT,INCLUDING-UNCERTIFIED-P,LOCAL-INCLUDE-BOOK,IN-LOCAL-FLG,T,GUARD-CHECKING-ON,MATCH-FREE-ERROR,FULL-BOOK-STRING,TTAGS-INFO,AND,SKIP-NOTIFY-ON-DEFTTAG,STATE,QUOTE,F-GET-GLOBAL,CERT-TTAGS,CERT-OBJ,IF,TTAGS-ALLOWED,AXIOMSP,STATE-GLOBAL-LET*,DIRECTORY-NAME,WITH-CBD" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS">include-book-process-embedded-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-process-embedded-events" data-sym="INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS" title="(defun include-book-process-embedded-events
       (ev-lst directory-name ttags-info cert-obj cert-ttags cert-data
        behalf-of-certify-flg full-book-string full-book-name skip-proofsp
        expansion-alist ctx state)
  (with-cbd directory-name
...">include-book-process-embedded-events</a>
  (ev-lst directory-name
    ttags-info
    cert-obj
    cert-ttags
    cert-data
    behalf-of-certify-flg
    full-book-string
    full-book-name
    skip-proofsp
    expansion-alist
    ctx
    state)
  (<a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a> directory-name
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((axiomsp nil) (ttags-allowed (if cert-obj
            cert-ttags
            (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ttags-allowed state)))
        (skip-notify-on-defttag (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ttags-info full-book-string))
        (match-free-error nil)
        (guard-checking-on <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (in-local-flg (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state) 'local-include-book))
        (including-uncertified-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> cert-obj)))
      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-with-hcomp-ht-bindings" data-sym="WITH-HCOMP-HT-BINDINGS" title="(defmacro with-hcomp-ht-bindings (form) form)">with-hcomp-ht-bindings</a> (<a class="sym-link local-def" href="#def-process-embedded-events" data-sym="PROCESS-EMBEDDED-EVENTS" title="(defun process-embedded-events
       (caller acl2-defaults-table skip-proofsp pkg ee-entry ev-lst index
        make-event-chk cert-data ctx state)
  (let* ((wrld1 (w state))
         (kpa (known-package-alist state))
...">process-embedded-events</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
            (if behalf-of-certify-flg
              <span class="keyword">:do-not-install!</span> <span class="keyword">:do-not-install</span>)
            skip-proofsp
            (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car ev-lst))
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> full-book-name)
            (<a class="sym-link local-def" href="#def-subst-by-position" data-sym="SUBST-BY-POSITION" title="(defun subst-by-position (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position</a> expansion-alist (cdr ev-lst) <span class="number">1</span>)
            <span class="number">1</span>
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> skip-proofsp '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
              (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cert-obj <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) behalf-of-certify-flg))
            cert-data
            ctx
            state))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if ttags-info
            (car ttags-info)
            (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ttags-allowed state)))))))</pre>
  </div>

<div class="form-block function" id="def-include-book-certified-p" data-defines="INCLUDE-BOOK-CERTIFIED-P" data-references="LIST,CONS,INCLUDE-BOOK-ER1,TILDE-*-BOOK-HASH-PHRASE,MSGS,MV-LET,T,WARNING-DISABLED-P,EQUAL,AND,INCLUDE-BOOK-ER-WARNING-SUMMARY,WARNING-SUMMARY,LET,CDR,UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS,INCLUDE-BOOK-ALIST-SUBSETP,NOT,VALUE,NULL,COND,STATE,CTX,FULL-BOOK-STRING,SUSPECT-BOOK-ACTION-ALIST,ACTUAL-ALIST,POST-ALIST,CERT-OBJ,DEFUN" data-used-by="INCLUDE-BOOK-FN1" data-part-name="INCLUDE-BOOK-CERTIFIED-P" data-part-args="STATE,CTX,FULL-BOOK-STRING,SUSPECT-BOOK-ACTION-ALIST,ACTUAL-ALIST,POST-ALIST,CERT-OBJ" data-part-body="CTX,LIST,CONS,FULL-BOOK-STRING,INCLUDE-BOOK-ER1,TILDE-*-BOOK-HASH-PHRASE,MSGS,MV-LET,T,WARNING-DISABLED-P,EQUAL,AND,STATE,SUSPECT-BOOK-ACTION-ALIST,INCLUDE-BOOK-ER-WARNING-SUMMARY,WARNING-SUMMARY,LET,ACTUAL-ALIST,POST-ALIST,CDR,UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS,INCLUDE-BOOK-ALIST-SUBSETP,NOT,VALUE,CERT-OBJ,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-CERTIFIED-P">include-book-certified-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-certified-p" data-sym="INCLUDE-BOOK-CERTIFIED-P" title="(defun include-book-certified-p
       (cert-obj post-alist actual-alist suspect-book-action-alist
        full-book-string ctx state)
  (cond ((null cert-obj) (value nil))
        ((not
...">include-book-certified-p</a>
  (cert-obj post-alist
    actual-alist
    suspect-book-action-alist
    full-book-string
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> cert-obj) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-include-book-alist-subsetp" data-sym="INCLUDE-BOOK-ALIST-SUBSETP" title="(defun include-book-alist-subsetp (alist1 alist2)
  (subsetp-equal (strip-cddrs alist1) (strip-cddrs alist2)))">include-book-alist-subsetp</a> (<a class="sym-link local-def" href="#def-unmark-and-delete-local-included-books" data-sym="UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS" title="(defun unmark-and-delete-local-included-books (post-alist3)
  (cond ((null post-alist3) nil)
        ((eq (caar post-alist3) &#39;local)
         (unmark-and-delete-local-included-books (cdr post-alist3)))
        (t
...">unmark-and-delete-local-included-books</a> (cdr post-alist))
         actual-alist)) (let ((warning-summary (<a class="sym-link local-def" href="#def-include-book-er-warning-summary" data-sym="INCLUDE-BOOK-ER-WARNING-SUMMARY" title="(defun include-book-er-warning-summary
       (keyword suspect-book-action-alist state)
  (let ((keyword-string
         (case keyword
           (:uncertified-okp &quot;Uncertified&quot;)
...">include-book-er-warning-summary</a> <span class="keyword">:uncertified-okp</span> suspect-book-action-alist
             state)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal warning-summary <span class="string">"Uncertified"</span>)
             (<a class="sym-link system" href="basis-a.html#def-warning-disabled-p" data-sym="WARNING-DISABLED-P">warning-disabled-p</a> <span class="string">"Uncertified"</span>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (msgs state)
              (<a class="sym-link local-def" href="#def-tilde-_2A-book-hash-phrase" data-sym="TILDE-*-BOOK-HASH-PHRASE" title="(defun tilde-*-book-hash-phrase (reqd-alist actual-alist state)
  (mv-let (phrase1 state)
          (tilde-*-book-hash-phrase1 reqd-alist actual-alist state)
          (mv (list &quot;~|&quot; &quot;~|~@*&quot; &quot;~|~@*;~|&quot; &quot;~|~@*;~|&quot; phrase1) state)))">tilde-*-book-hash-phrase</a> (<a class="sym-link local-def" href="#def-unmark-and-delete-local-included-books" data-sym="UNMARK-AND-DELETE-LOCAL-INCLUDED-BOOKS" title="(defun unmark-and-delete-local-included-books (post-alist3)
  (cond ((null post-alist3) nil)
        ((eq (caar post-alist3) &#39;local)
         (unmark-and-delete-local-included-books (cdr post-alist3)))
        (t
...">unmark-and-delete-local-included-books</a> (cdr post-alist))
                actual-alist
                state)
              (<a class="sym-link local-def" href="#def-include-book-er1" data-sym="INCLUDE-BOOK-ER1" title="(defun include-book-er1 (file1 file2 msg warning-summary ctx state)
  (cond ((null warning-summary) (er soft ctx &quot;~@2&quot; file1 file2 msg))
        ((symbolp warning-summary)
         (cond
          ((member-eq (cert-op state) &#39;(nil :write-acl2xu))
...">include-book-er1</a> full-book-string
                nil
                (cons <span class="string">"After processing the events in the book ~x0:~*3."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\3 msgs)))
                warning-summary
                ctx
                state))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block function" id="def-include-book-certification-tuple" data-defines="INCLUDE-BOOK-CERTIFICATION-TUPLE" data-references="T,LIST*,COND,EV-LST-BOOK-HASH,CERT-ANNOTATIONS,FAMILIAR-NAME,USER-BOOK-NAME,FULL-BOOK-NAME,CERT-FULL-BOOK-NAME,CERTIFIED-P,DEFUN" data-used-by="INCLUDE-BOOK-FN1" data-part-name="INCLUDE-BOOK-CERTIFICATION-TUPLE" data-part-args="EV-LST-BOOK-HASH,CERT-ANNOTATIONS,FAMILIAR-NAME,USER-BOOK-NAME,FULL-BOOK-NAME,CERT-FULL-BOOK-NAME,CERTIFIED-P" data-part-body="FULL-BOOK-NAME,T,EV-LST-BOOK-HASH,CERT-ANNOTATIONS,FAMILIAR-NAME,USER-BOOK-NAME,CERT-FULL-BOOK-NAME,LIST*,CERTIFIED-P,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-CERTIFICATION-TUPLE">include-book-certification-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-certification-tuple" data-sym="INCLUDE-BOOK-CERTIFICATION-TUPLE" title="(defun include-book-certification-tuple
       (certified-p cert-full-book-name full-book-name user-book-name
        familiar-name cert-annotations ev-lst-book-hash)
  (cond
   (certified-p
...">include-book-certification-tuple</a>
  (certified-p cert-full-book-name
    full-book-name
    user-book-name
    familiar-name
    cert-annotations
    ev-lst-book-hash)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (certified-p (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> cert-full-book-name
        user-book-name
        familiar-name
        cert-annotations
        ev-lst-book-hash))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> full-book-name user-book-name familiar-name nil nil))))</pre>
  </div>

<div class="form-block function" id="def-include-book-pcert-p" data-defines="INCLUDE-BOOK-PCERT-P" data-references="VALUE,EQ,IF,WARNING$,NOT,ASSERT$,GETENV!,PCERT-ENVP,ERP,MV-LET,T,WARNING-OFF-P,CERT-OP,PCERT-OP-P,OR,PPROGN,ACCESS,AND,COND,STATE,CTX,FULL-BOOK-STRING,CERT-OBJ,CERTIFIED-P,DEFUN" data-used-by="INCLUDE-BOOK-INSTALL-EVENT" data-part-name="INCLUDE-BOOK-PCERT-P" data-part-args="STATE,CTX,FULL-BOOK-STRING,CERT-OBJ,CERTIFIED-P" data-part-body="VALUE,EQ,IF,FULL-BOOK-STRING,CTX,WARNING$,NOT,ASSERT$,GETENV!,PCERT-ENVP,ERP,MV-LET,T,WARNING-OFF-P,STATE,CERT-OP,PCERT-OP-P,OR,PPROGN,CERT-OBJ,ACCESS,CERTIFIED-P,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-PCERT-P">include-book-pcert-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-pcert-p" data-sym="INCLUDE-BOOK-PCERT-P" title="(defun include-book-pcert-p (certified-p cert-obj full-book-string ctx state)
  (cond
   ((and certified-p (access cert-obj cert-obj :pcert-info))
    (pprogn
     (cond
...">include-book-pcert-p</a>
  (certified-p cert-obj full-book-string ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> certified-p (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:pcert-info</span>)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link local-def" href="#def-pcert-op-p" data-sym="PCERT-OP-P" title="(defmacro pcert-op-p (cert-op)
  `(member-eq ,cert-op &#39;(:create-pcert :create+convert-pcert :convert-pcert)))">pcert-op-p</a> (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state))
             (<a class="sym-link system" href="basis-a.html#def-warning-off-p" data-sym="WARNING-OFF-P">warning-off-p</a> <span class="string">"Provisionally certified"</span> state)) state)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp pcert-envp state)
              (<a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a> <span class="string">"ACL2_PCERT"</span> state)
              (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> erp)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pcert-envp state)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                      (<span class="string">"Provisionally certified"</span>)
                      <span class="string">"The book ~s0 was only provisionally certified ~
                          (proofs ~s1)."</span>
                      full-book-string
                      (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:pcert-info</span>) <span class="keyword">:proved</span>)
                        <span class="string">"completed"</span>
                        <span class="string">"skipped"</span>))))))))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-include-book-install-event" data-defines="INCLUDE-BOOK-INSTALL-EVENT" data-references="PROJECTS/APPLY/BASE-INCLUDEDP,*PROJECTS/APPLY/BASE-SYSFILE*,WRLD8,LIST,SKIP-PROOFS-SEEN,SKIPPED-PROOFSP-IN-POST-ALIST,NOT,COND,WRLD7,PUTPROP,ACL2-DEFAULTS-TABLE,TABLE-ALIST,EQUAL,WRLD6,TTAGS-SEEN,GLOBAL-SET?,WRLD5,CDR,ACCUMULATE-POST-ALIST,INCLUDE-BOOK-ALIST-ALL,GLOBAL-VAL,ADD-TO-SET-EQUAL,INCLUDE-BOOK-ALIST,INCLUDE-BOOK-PATH,GLOBAL-SET,UPDATE-PCERT-BOOKS,WRLD4,LET*,T,REMOVE-LISP-SUFFIX,INCLUDE-BOOK,LIST*,BOOK-NAME-TO-FILENAME,SCRIPT-MODE,QUOTE,F-GET-GLOBAL,OR,NAME,LET,IF,INSTALL-EVENT,INCLUDE-BOOK-PCERT-P,PCERT-P,GET-DECLAIM-LIST,DECLAIM-LIST,ER-LET*,STATE,WRLD3,CTX,CERT-OBJ-SKIPPED-PROOFSP,OLD-SKIP-PROOFS-SEEN,SAVED-ACL2-DEFAULTS-TABLE,OLD-TTAGS-SEEN,TTAGS-INFO,POST-ALIST,CERTIFICATION-TUPLE,OLD-INCLUDE-BOOK-PATH,FULL-BOOK-NAME,CERT-FULL-BOOK-NAME,FULL-BOOK-STRING,CDDR-EVENT-FORM,CERT-OBJ,BEHALF-OF-CERTIFY-FLG,CERTIFIED-P,DEFUN" data-used-by="INCLUDE-BOOK-FN1" data-part-name="INCLUDE-BOOK-INSTALL-EVENT" data-part-args="STATE,WRLD3,CTX,CERT-OBJ-SKIPPED-PROOFSP,OLD-SKIP-PROOFS-SEEN,SAVED-ACL2-DEFAULTS-TABLE,OLD-TTAGS-SEEN,TTAGS-INFO,POST-ALIST,CERTIFICATION-TUPLE,OLD-INCLUDE-BOOK-PATH,FULL-BOOK-NAME,CERT-FULL-BOOK-NAME,FULL-BOOK-STRING,CDDR-EVENT-FORM,CERT-OBJ,BEHALF-OF-CERTIFY-FLG,CERTIFIED-P" data-part-body="PROJECTS/APPLY/BASE-INCLUDEDP,*PROJECTS/APPLY/BASE-SYSFILE*,WRLD8,LIST,SKIP-PROOFS-SEEN,SKIPPED-PROOFSP-IN-POST-ALIST,CERT-OBJ-SKIPPED-PROOFSP,NOT,OLD-SKIP-PROOFS-SEEN,COND,WRLD7,PUTPROP,SAVED-ACL2-DEFAULTS-TABLE,ACL2-DEFAULTS-TABLE,TABLE-ALIST,EQUAL,WRLD6,OLD-TTAGS-SEEN,TTAGS-SEEN,GLOBAL-SET?,TTAGS-INFO,WRLD5,POST-ALIST,CDR,ACCUMULATE-POST-ALIST,INCLUDE-BOOK-ALIST-ALL,GLOBAL-VAL,ADD-TO-SET-EQUAL,INCLUDE-BOOK-ALIST,CERTIFICATION-TUPLE,OLD-INCLUDE-BOOK-PATH,INCLUDE-BOOK-PATH,GLOBAL-SET,UPDATE-PCERT-BOOKS,WRLD4,LET*,CDDR-EVENT-FORM,T,REMOVE-LISP-SUFFIX,INCLUDE-BOOK,LIST*,WRLD3,BOOK-NAME-TO-FILENAME,SCRIPT-MODE,QUOTE,F-GET-GLOBAL,FULL-BOOK-NAME,CERT-FULL-BOOK-NAME,OR,NAME,LET,BEHALF-OF-CERTIFY-FLG,IF,INSTALL-EVENT,CTX,FULL-BOOK-STRING,CERT-OBJ,CERTIFIED-P,INCLUDE-BOOK-PCERT-P,PCERT-P,STATE,GET-DECLAIM-LIST,DECLAIM-LIST,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-INSTALL-EVENT">include-book-install-event</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-install-event" data-sym="INCLUDE-BOOK-INSTALL-EVENT" title="(defun include-book-install-event
       (certified-p behalf-of-certify-flg cert-obj cddr-event-form
        full-book-string cert-full-book-name full-book-name
        old-include-book-path certification-tuple post-alist ttags-info
        old-ttags-seen saved-acl2-defaults-table old-skip-proofs-seen
...">include-book-install-event</a>
  (certified-p behalf-of-certify-flg
    cert-obj
    cddr-event-form
    full-book-string
    cert-full-book-name
    full-book-name
    old-include-book-path
    certification-tuple
    post-alist
    ttags-info
    old-ttags-seen
    saved-acl2-defaults-table
    old-skip-proofs-seen
    cert-obj-skipped-proofsp
    ctx
    wrld3
    state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((declaim-list (<a class="sym-link local-def" href="#def-get-declaim-list" data-sym="GET-DECLAIM-LIST" title="(defun get-declaim-list (state) (read-acl2-oracle state))">get-declaim-list</a> state)) (pcert-p (<a class="sym-link local-def" href="#def-include-book-pcert-p" data-sym="INCLUDE-BOOK-PCERT-P" title="(defun include-book-pcert-p (certified-p cert-obj full-book-string ctx state)
  (cond
   ((and certified-p (access cert-obj cert-obj :pcert-info))
    (pprogn
     (cond
...">include-book-pcert-p</a> certified-p
          cert-obj
          full-book-string
          ctx
          state)))
    (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> (if behalf-of-certify-flg
        declaim-list
        (let ((name (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> cert-full-book-name full-book-name)))
          (if (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'script-mode state)
            name
            (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename" data-sym="BOOK-NAME-TO-FILENAME">book-name-to-filename</a> name wrld3 ctx))))
      (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
        (<a class="sym-link system" href="history-management.html#def-remove-lisp-suffix" data-sym="REMOVE-LISP-SUFFIX">remove-lisp-suffix</a> (if cert-full-book-name
            (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename" data-sym="BOOK-NAME-TO-FILENAME">book-name-to-filename</a> cert-full-book-name wrld3 ctx)
            full-book-string)
          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        cddr-event-form)
      '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
      full-book-string
      nil
      nil
      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
      ctx
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld4 (<a class="sym-link local-def" href="#def-update-pcert-books" data-sym="UPDATE-PCERT-BOOKS" title="(defun update-pcert-books (full-book-name pcert-p wrld)
  (cond
   (pcert-p
    (global-set &#39;pcert-books
                (cons full-book-name (global-val &#39;pcert-books wrld)) wrld))">update-pcert-books</a> full-book-name
             pcert-p
             (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'include-book-path
               old-include-book-path
               (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'certification-tuple
                 certification-tuple
                 (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'include-book-alist
                   (<a class="sym-link system" href="axioms.html#def-add-to-set-equal" data-sym="ADD-TO-SET-EQUAL">add-to-set-equal</a> certification-tuple
                     (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist wrld3))
                   (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'include-book-alist-all
                     (<a class="sym-link system" href="axioms.html#def-add-to-set-equal" data-sym="ADD-TO-SET-EQUAL">add-to-set-equal</a> certification-tuple
                       (<a class="sym-link local-def" href="#def-accumulate-post-alist" data-sym="ACCUMULATE-POST-ALIST" title="(defun accumulate-post-alist (post-alist include-book-alist)
  (let ((include-book-alist (make-fast-alist include-book-alist)))
    (fast-alist-free-on-exit include-book-alist
                             (accumulate-post-alist1 post-alist
                                                     include-book-alist))))">accumulate-post-alist</a> (cdr post-alist)
                         (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist-all wrld3)))
                     wrld3)))))) (wrld5 (if ttags-info
              (<a class="sym-link system" href="history-management.html#def-global-set_3F" data-sym="GLOBAL-SET?">global-set?</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a>
                (cdr ttags-info)
                wrld4
                old-ttags-seen)
              wrld4))
          (wrld6 (if (equal (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld3)
                saved-acl2-defaults-table)
              wrld5
              (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> 'acl2-defaults-table
                '<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a>
                saved-acl2-defaults-table
                wrld5)))
          (wrld7 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> old-skip-proofs-seen (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> certified-p)) wrld6)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((full-book-name (if cert-obj-skipped-proofsp
                       full-book-name
                       (<a class="sym-link local-def" href="#def-skipped-proofsp-in-post-alist" data-sym="SKIPPED-PROOFSP-IN-POST-ALIST" title="(defun skipped-proofsp-in-post-alist (post-alist)
  (cond ((endp post-alist) nil)
        (t
         (let* ((localp (eq (car (car post-alist)) &#39;local))
                (cert-annotations
...">skipped-proofsp-in-post-alist</a> post-alist))))
                  (if full-book-name
                    (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'skip-proofs-seen
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:include-book</span> full-book-name)
                      wrld6)
                    (if (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'skip-proofs-seen wrld3)
                      (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'skip-proofs-seen nil wrld6)
                      wrld6))))))
          (wrld8 (if (equal full-book-name <a class="sym-link local-def" href="#def-_2Aprojects_2Fapply_2Fbase-sysfile_2A" data-sym="*PROJECTS/APPLY/BASE-SYSFILE*" title="(defconst *projects/apply/base-sysfile*
          (make-sysfile :system &quot;projects/apply/base.lisp&quot;))">*projects/apply/base-sysfile*</a>)
              (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'projects/apply/base-includedp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld7)
              wrld7)))
        wrld8)
      state)))</pre>
  </div>

<div class="form-block function" id="def-include-book-fn1" data-defines="INCLUDE-BOOK-FN1" data-references="INCLUDE-BOOK-INSTALL-EVENT,F-PUT-GLOBAL,REDEFINED-WARNING,INCLUDE-BOOK-CERTIFICATION-TUPLE,CERTIFICATION-TUPLE,CERT-FULL-BOOK-NAME,CHK-CERT-ANNOTATIONS-POST-ALIST,INCLUDE-BOOK-CERTIFIED-P,CERTIFIED-P,ACTUAL-ALIST,WRLD3,INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS,TTAGS-ALLOWED1,SKIP-PROOFSP,TTAGS-ALLOWED,CHK-ACCEPTABLE-TTAGS1,ER-PROGN,TTAGS-INFO,CHK-CERT-ANNOTATIONS,CHK-WELL-FORMED-TTAGS,WARNING-OFF-P,EQ,WARN-FOR-TTAGS-DEFAULT,CERT-OBJ-SKIPPED-PROOFSP,ASSOC-EQ,CERT-TTAGS,CADDDR,CERT-ANNOTATIONS,EXPANSION-ALIST,POST-ALIST,CERT-DATA,INCLUDE-BOOK-OK-FAMILIAR-NAME-AND-HASH,OK-FAMILIAR-NAME-AND-HASH,BOOK-HASH,EV-LST-BOOK-HASH,CDDDDR,POST-ALIST-BOOK-HASH-PRELIM,READ-OBJECT-FILE,EV-LST,EVAL-PORT-FILE,PORT-FILE-ENABLED,OR,IGNORED-VAL,RETRACTION,EQUAL,CAR,CERT-FULL-BOOK-NAME-PRELIM,POST-ALIST-PRELIM,INCLUDE-BOOK,CHK-NEW-STRINGP-NAME,REDEF,FAST-ALIST-FREE-CERT-DATA-ON-EXIT,CDR,CERT-OBJ,ACCESS,VALUE,CERT-DATA-PRELIM,INCLUDE-BOOK-CERT-OBJ-PRELIM,CERT-OBJ-PRELIM,ER-LET*,EXTENSION,SET-W,PPROGN,GLOBAL-SET,WRLD2,LET,T,STOP-REDUNDANT-EVENT,ASSOC-EQUAL,BOOT-STRAP-FLG,F-GET-GLOBAL,NOT,AND,COND,REVERT-WORLD-ON-ERROR,INCLUDE-BOOK-ALIST,INCLUDE-BOOK-ALIST0,CONS,LIST,SUSPECT-BOOK-ACTION-ALIST,CERT-OP,MEMBER-EQ,IF,UNCERTIFIED-OKP-EFFECTIVE,ACL2-DEFAULTS-TABLE,TABLE-ALIST,SAVED-ACL2-DEFAULTS-TABLE,INCLUDE-BOOK-PATH,OLD-INCLUDE-BOOK-PATH,TTAGS-SEEN,OLD-TTAGS-SEEN,ACTIVE-BOOK-NAME,SKIP-PROOFS-SEEN,QUOTE,GLOBAL-VAL,OLD-SKIP-PROOFS-SEEN,CONSP,BEHALF-OF-CERTIFY-FLG,W,WRLD1,LET*,IGNORE,DECLARE,CDDR-EVENT-FORM,FAMILIAR-NAME,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,CTX,TTAGS,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,EXPANSION-ALIST/CERT-DATA,LOAD-COMPILED-FILE,STATE,USER-BOOK-NAME,DEFUN" data-used-by="INCLUDE-BOOK-FN" data-part-name="INCLUDE-BOOK-FN1" data-part-args="CDDR-EVENT-FORM,FAMILIAR-NAME,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,CTX,TTAGS,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,EXPANSION-ALIST/CERT-DATA,LOAD-COMPILED-FILE,STATE,USER-BOOK-NAME" data-part-declare="LOAD-COMPILED-FILE,IGNORE,DECLARE" data-part-body="CDDR-EVENT-FORM,INCLUDE-BOOK-INSTALL-EVENT,F-PUT-GLOBAL,REDEFINED-WARNING,USER-BOOK-NAME,INCLUDE-BOOK-CERTIFICATION-TUPLE,CERTIFICATION-TUPLE,CERT-FULL-BOOK-NAME,CHK-CERT-ANNOTATIONS-POST-ALIST,INCLUDE-BOOK-CERTIFIED-P,CERTIFIED-P,ACTUAL-ALIST,WRLD3,INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS,TTAGS-ALLOWED1,SKIP-PROOFSP,TTAGS-ALLOWED,CHK-ACCEPTABLE-TTAGS1,ER-PROGN,TTAGS-INFO,CHK-CERT-ANNOTATIONS,CHK-WELL-FORMED-TTAGS,WARNING-OFF-P,TTAGS,EQ,WARN-FOR-TTAGS-DEFAULT,CERT-OBJ-SKIPPED-PROOFSP,ASSOC-EQ,CERT-TTAGS,CADDDR,CERT-ANNOTATIONS,EXPANSION-ALIST,POST-ALIST,CERT-DATA,FAMILIAR-NAME,INCLUDE-BOOK-OK-FAMILIAR-NAME-AND-HASH,OK-FAMILIAR-NAME-AND-HASH,BOOK-HASH,EV-LST-BOOK-HASH,CDDDDR,POST-ALIST-BOOK-HASH-PRELIM,READ-OBJECT-FILE,EV-LST,EVAL-PORT-FILE,PORT-FILE-ENABLED,OR,IGNORED-VAL,RETRACTION,EQUAL,CAR,CERT-FULL-BOOK-NAME-PRELIM,POST-ALIST-PRELIM,INCLUDE-BOOK,CHK-NEW-STRINGP-NAME,REDEF,FAST-ALIST-FREE-CERT-DATA-ON-EXIT,CDR,CERT-OBJ,ACCESS,VALUE,CERT-DATA-PRELIM,DIRECTORY-NAME,FULL-BOOK-STRING,INCLUDE-BOOK-CERT-OBJ-PRELIM,CERT-OBJ-PRELIM,ER-LET*,EXTENSION,SET-W,PPROGN,GLOBAL-SET,WRLD2,LET,T,CTX,STOP-REDUNDANT-EVENT,ASSOC-EQUAL,FULL-BOOK-NAME,BOOT-STRAP-FLG,F-GET-GLOBAL,NOT,AND,COND,REVERT-WORLD-ON-ERROR,INCLUDE-BOOK-ALIST,INCLUDE-BOOK-ALIST0,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,CONS,LIST,SUSPECT-BOOK-ACTION-ALIST,UNCERTIFIED-OKP,CERT-OP,MEMBER-EQ,IF,UNCERTIFIED-OKP-EFFECTIVE,ACL2-DEFAULTS-TABLE,TABLE-ALIST,SAVED-ACL2-DEFAULTS-TABLE,INCLUDE-BOOK-PATH,OLD-INCLUDE-BOOK-PATH,TTAGS-SEEN,OLD-TTAGS-SEEN,ACTIVE-BOOK-NAME,SKIP-PROOFS-SEEN,QUOTE,GLOBAL-VAL,OLD-SKIP-PROOFS-SEEN,EXPANSION-ALIST/CERT-DATA,CONSP,BEHALF-OF-CERTIFY-FLG,STATE,W,WRLD1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-FN1">include-book-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-fn1" data-sym="INCLUDE-BOOK-FN1" title="(defun include-book-fn1
       (user-book-name state load-compiled-file expansion-alist/cert-data
        uncertified-okp defaxioms-okp skip-proofs-okp ttags ctx
        full-book-string full-book-name directory-name familiar-name
        cddr-event-form)
...">include-book-fn1</a>
  (user-book-name state
    load-compiled-file
    expansion-alist/cert-data
    uncertified-okp
    defaxioms-okp
    skip-proofs-okp
    ttags
    ctx
    full-book-string
    full-book-name
    directory-name
    familiar-name
    cddr-event-form)
  (declare (ignore load-compiled-file))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (behalf-of-certify-flg (consp expansion-alist/cert-data))
      (old-skip-proofs-seen (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'skip-proofs-seen wrld1))
      (<a class="sym-link system" href="history-management.html#def-active-book-name" data-sym="ACTIVE-BOOK-NAME">active-book-name</a> (<a class="sym-link system" href="history-management.html#def-active-book-name" data-sym="ACTIVE-BOOK-NAME">active-book-name</a> wrld1 state))
      (old-ttags-seen (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> wrld1))
      (old-include-book-path (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-path wrld1))
      (saved-acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld1))
      (uncertified-okp-effective (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state) '(nil <span class="keyword">:write-acl2xu</span>))
          uncertified-okp
          nil))
      (suspect-book-action-alist (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons <span class="keyword">:uncertified-okp</span> uncertified-okp-effective)
          (cons <span class="keyword">:defaxioms-okp</span> defaxioms-okp)
          (cons <span class="keyword">:skip-proofs-okp</span> skip-proofs-okp)))
      (include-book-alist0 (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist wrld1)))
    (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state))
           full-book-name
           (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> full-book-name include-book-alist0)) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((wrld2 (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'include-book-path
                 (cons full-book-name old-include-book-path)
                 wrld1)))
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension wrld2 state)
              (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cert-obj-prelim (<a class="sym-link local-def" href="#def-include-book-cert-obj-prelim" data-sym="INCLUDE-BOOK-CERT-OBJ-PRELIM" title="(defun include-book-cert-obj-prelim
       (behalf-of-certify-flg uncertified-okp full-book-string full-book-name
        suspect-book-action-alist directory-name ctx wrld state)
  (cond (behalf-of-certify-flg (value nil))
        ((f-get-global &#39;ignore-cert-files state)
...">include-book-cert-obj-prelim</a> behalf-of-certify-flg
                     uncertified-okp-effective
                     full-book-string
                     full-book-name
                     suspect-book-action-alist
                     directory-name
                     ctx
                     wrld1
                     state)) (cert-data-prelim (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if cert-obj-prelim
                        (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj-prelim <span class="keyword">:cert-data</span>)
                        (cdr expansion-alist/cert-data)))))
                (<a class="sym-link local-def" href="#def-fast-alist-free-cert-data-on-exit" data-sym="FAST-ALIST-FREE-CERT-DATA-ON-EXIT" title="(defmacro fast-alist-free-cert-data-on-exit (cert-data form)
  `(let* ((cert-data-to-free ,cert-data)
          (cert-data-entry-tp-to-free
           (cdr (assoc-eq :type-prescription cert-data-to-free))))
     (fast-alist-free-on-exit cert-data-entry-tp-to-free
...">fast-alist-free-cert-data-on-exit</a> cert-data-prelim
                  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((<a class="sym-link system" href="basis-b.html#def-redef" data-sym="REDEF">redef</a> (<a class="sym-link local-def" href="#def-chk-new-stringp-name" data-sym="CHK-NEW-STRINGP-NAME" title="(defun chk-new-stringp-name (ev-type name ctx w state)
  (cond
   ((not
     (if (eq ev-type &#39;defpkg)
         (stringp name)
...">chk-new-stringp-name</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
                         full-book-name
                         ctx
                         wrld2
                         state)) (post-alist-prelim (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cert-obj-prelim
                            (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj-prelim <span class="keyword">:post-alist</span>))))
                      (cert-full-book-name-prelim (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (car (car post-alist-prelim)))))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cert-full-book-name-prelim
                         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal full-book-name cert-full-book-name-prelim))
                         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state))
                         (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> cert-full-book-name-prelim include-book-alist0)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'retraction wrld1 state)
                          (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state)))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ignored-val (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> cert-obj-prelim
                                  behalf-of-certify-flg
                                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'port-file-enabled state))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-eval-port-file" data-sym="EVAL-PORT-FILE" title="(defun eval-port-file (full-book-string ctx state)
  (let ((port-file (convert-book-string-to-port full-book-string))
        (dir (directory-of-absolute-pathname full-book-string)))
    (pprogn
     (mv-let (ch state) (open-input-channel port-file :object state)
...">eval-port-file</a> full-book-string ctx state)))) (ev-lst (<a class="sym-link local-def" href="#def-read-object-file" data-sym="READ-OBJECT-FILE" title="(defun read-object-file (file ctx state)
  (er-let*
   ((ch (open-input-object-file file ctx state))
    (new-current-package (chk-in-package ch file nil ctx state)))
   (state-global-let* ((current-package new-current-package))
...">read-object-file</a> full-book-string ctx state))
                            (post-alist-book-hash-prelim (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> (car post-alist-prelim))))
                            (ev-lst-book-hash (if cert-obj-prelim
                                (<a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a> post-alist-book-hash-prelim
                                  full-book-string
                                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj-prelim <span class="keyword">:cmds</span>)
                                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj-prelim <span class="keyword">:expansion-alist</span>)
                                  cert-data-prelim
                                  ev-lst
                                  state)
                                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
                            (ok-familiar-name-and-hash (<a class="sym-link local-def" href="#def-include-book-ok-familiar-name-and-hash" data-sym="INCLUDE-BOOK-OK-FAMILIAR-NAME-AND-HASH" title="(defun include-book-ok-familiar-name-and-hash
       (cert-obj post-alist familiar-name full-book-string post-alist-book-hash
        ev-lst-book-hash suspect-book-action-alist ctx state)
  (er-let*
   ((no-errp-1
...">include-book-ok-familiar-name-and-hash</a> cert-obj-prelim
                                post-alist-prelim
                                familiar-name
                                full-book-string
                                post-alist-book-hash-prelim
                                ev-lst-book-hash
                                suspect-book-action-alist
                                ctx
                                state)))
                          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cert-obj (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ok-familiar-name-and-hash cert-obj-prelim)) (cert-data (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> cert-obj behalf-of-certify-flg) cert-data-prelim))
                              (post-alist (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cert-obj post-alist-prelim))
                              (expansion-alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (behalf-of-certify-flg (car expansion-alist/cert-data))
                                  (cert-obj (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:expansion-alist</span>))
                                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
                              (cert-annotations (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (car post-alist)))
                              (cert-ttags (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:ttags</span> cert-annotations)))
                              (cert-obj-skipped-proofsp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cert-obj
                                  (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:skipped-proofsp</span> cert-annotations))))
                              (warn-for-ttags-default (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ttags <span class="keyword">:default</span>)
                                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-warning-off-p" data-sym="WARNING-OFF-P">warning-off-p</a> <span class="string">"Ttags"</span> state))))
                              (ttags (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ttags <span class="keyword">:default</span>)
                                  <span class="keyword">:all</span> ttags)))
                            (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ttags (<a class="sym-link local-def" href="#def-chk-well-formed-ttags" data-sym="CHK-WELL-FORMED-TTAGS" title="(defun chk-well-formed-ttags (ttags cbd ctx state)
  (cond ((null ttags) (value nil))
        ((and (symbolp ttags) (equal (symbol-name ttags) &quot;ALL&quot;)) (value :all))
        ((not (true-listp ttags))
         (er soft ctx
...">chk-well-formed-ttags</a> ttags directory-name ctx state)) (ignored-val (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> cert-obj-skipped-proofsp
                                       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cert-obj (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:axiomsp</span> cert-annotations)))) (<a class="sym-link local-def" href="#def-chk-cert-annotations" data-sym="CHK-CERT-ANNOTATIONS" title="(defun chk-cert-annotations
       (cert-annotations portcullis-skipped-proofsp portcullis-cmds
        full-book-string suspect-book-action-alist ctx state)
  (er-progn
   (cond
...">chk-cert-annotations</a> cert-annotations
                                        nil
                                        (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:cmds</span>)
                                        full-book-string
                                        suspect-book-action-alist
                                        ctx
                                        state))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
                                (ttags-info (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> cert-obj) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="history-management.html#def-chk-acceptable-ttags1" data-sym="CHK-ACCEPTABLE-TTAGS1">chk-acceptable-ttags1</a> cert-ttags
                                          nil
                                          ttags
                                          nil
                                          <span class="keyword">:quiet</span> ctx
                                          state)
                                        (<a class="sym-link system" href="history-management.html#def-chk-acceptable-ttags1" data-sym="CHK-ACCEPTABLE-TTAGS1">chk-acceptable-ttags1</a> cert-ttags
                                          <a class="sym-link system" href="history-management.html#def-active-book-name" data-sym="ACTIVE-BOOK-NAME">active-book-name</a>
                                          (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ttags-allowed state)
                                          old-ttags-seen
                                          (if warn-for-ttags-default
                                            (cons ctx full-book-string)
                                            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                                          ctx
                                          state)))))
                                (skip-proofsp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>))
                                (ttags-allowed1 (<a class="sym-link local-def" href="#def-include-book-process-embedded-events" data-sym="INCLUDE-BOOK-PROCESS-EMBEDDED-EVENTS" title="(defun include-book-process-embedded-events
       (ev-lst directory-name ttags-info cert-obj cert-ttags cert-data
        behalf-of-certify-flg full-book-string full-book-name skip-proofsp
        expansion-alist ctx state)
  (with-cbd directory-name
...">include-book-process-embedded-events</a> ev-lst
                                    directory-name
                                    ttags-info
                                    cert-obj
                                    cert-ttags
                                    cert-data
                                    behalf-of-certify-flg
                                    full-book-string
                                    full-book-name
                                    skip-proofsp
                                    expansion-alist
                                    ctx
                                    state)))
                              (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld3 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (actual-alist (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist wrld3)))
                                (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((certified-p (<a class="sym-link local-def" href="#def-include-book-certified-p" data-sym="INCLUDE-BOOK-CERTIFIED-P" title="(defun include-book-certified-p
       (cert-obj post-alist actual-alist suspect-book-action-alist
        full-book-string ctx state)
  (cond ((null cert-obj) (value nil))
        ((not
...">include-book-certified-p</a> cert-obj
                                       post-alist
                                       actual-alist
                                       suspect-book-action-alist
                                       full-book-string
                                       ctx
                                       state)) (cert-obj-skipped-proofsp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> certified-p cert-obj-skipped-proofsp)))
                                    (post-alist (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> certified-p post-alist)))
                                    (ttags-info (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> certified-p ttags-info))))
                                  (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-cert-annotations-post-alist" data-sym="CHK-CERT-ANNOTATIONS-POST-ALIST" title="(defun chk-cert-annotations-post-alist
       (post-alist portcullis-cmds full-book-string suspect-book-action-alist
        ctx state)
  (cond ((endp post-alist) (value nil))
        (t
...">chk-cert-annotations-post-alist</a> (cdr post-alist)
                                      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> certified-p (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:cmds</span>))
                                      full-book-string
                                      suspect-book-action-alist
                                      ctx
                                      state)
                                    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cert-full-book-name (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (certified-p cert-full-book-name-prelim)
                                           (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> full-book-name))) (certification-tuple (<a class="sym-link local-def" href="#def-include-book-certification-tuple" data-sym="INCLUDE-BOOK-CERTIFICATION-TUPLE" title="(defun include-book-certification-tuple
       (certified-p cert-full-book-name full-book-name user-book-name
        familiar-name cert-annotations ev-lst-book-hash)
  (cond
   (certified-p
...">include-book-certification-tuple</a> certified-p
                                            cert-full-book-name
                                            full-book-name
                                            user-book-name
                                            familiar-name
                                            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> certified-p (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (car post-alist)))
                                            ev-lst-book-hash)))
                                      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-redefined-warning" data-sym="REDEFINED-WARNING">redefined-warning</a> <a class="sym-link system" href="basis-b.html#def-redef" data-sym="REDEF">redef</a> ctx state)
                                          (if certified-p
                                            (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'ttags-allowed ttags-allowed1 state)
                                            state)
                                          (<a class="sym-link local-def" href="#def-include-book-install-event" data-sym="INCLUDE-BOOK-INSTALL-EVENT" title="(defun include-book-install-event
       (certified-p behalf-of-certify-flg cert-obj cddr-event-form
        full-book-string cert-full-book-name full-book-name
        old-include-book-path certification-tuple post-alist ttags-info
        old-ttags-seen saved-acl2-defaults-table old-skip-proofs-seen
...">include-book-install-event</a> certified-p
                                            behalf-of-certify-flg
                                            cert-obj
                                            cddr-event-form
                                            full-book-string
                                            cert-full-book-name
                                            full-book-name
                                            old-include-book-path
                                            certification-tuple
                                            post-alist
                                            ttags-info
                                            old-ttags-seen
                                            saved-acl2-defaults-table
                                            old-skip-proofs-seen
                                            cert-obj-skipped-proofsp
                                            ctx
                                            wrld3
                                            state))))))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-include-book-inputs" data-defines="CHK-INCLUDE-BOOK-INPUTS" data-references="VALUE,T,QUOTE,SOFT,ER,*LOAD-COMPILED-FILE-VALUES*,MEMBER-EQ,NOT,COND,ER-STR,LET,STATE,CTX,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,LOAD-COMPILED-FILE,DEFUN" data-used-by="INCLUDE-BOOK-FN" data-part-name="CHK-INCLUDE-BOOK-INPUTS" data-part-args="STATE,CTX,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,LOAD-COMPILED-FILE" data-part-body="VALUE,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,T,QUOTE,UNCERTIFIED-OKP,CTX,SOFT,ER,*LOAD-COMPILED-FILE-VALUES*,LOAD-COMPILED-FILE,MEMBER-EQ,NOT,COND,ER-STR,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-INCLUDE-BOOK-INPUTS">chk-include-book-inputs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-include-book-inputs" data-sym="CHK-INCLUDE-BOOK-INPUTS" title="(defun chk-include-book-inputs
       (load-compiled-file uncertified-okp defaxioms-okp skip-proofs-okp ctx
        state)
  (let ((er-str
         &quot;The ~x0 argument of include-book must be ~v1.  The value ~x2 ~
...">chk-include-book-inputs</a>
  (load-compiled-file uncertified-okp
    defaxioms-okp
    skip-proofs-okp
    ctx
    state)
  (let ((er-str <span class="string">"The ~x0 argument of include-book must be ~v1.  The value ~x2 ~
                 is thus illegal.  See :DOC include-book."</span>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> load-compiled-file <a class="sym-link system" href="axioms.html#def-_2Aload-compiled-file-values_2A" data-sym="*LOAD-COMPILED-FILE-VALUES*">*load-compiled-file-values*</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          er-str
          <span class="keyword">:load-compiled-file</span> <a class="sym-link system" href="axioms.html#def-_2Aload-compiled-file-values_2A" data-sym="*LOAD-COMPILED-FILE-VALUES*">*load-compiled-file-values*</a>
          load-compiled-file))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> uncertified-okp '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:ignore-certs</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          er-str
          <span class="keyword">:uncertified-okp</span> '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:ignore-certs</span>)
          uncertified-okp))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> defaxioms-okp '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx er-str <span class="keyword">:defaxioms-okp</span> '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil) defaxioms-okp))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> skip-proofs-okp '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          er-str
          <span class="keyword">:skip-proofs-okp</span> '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)
          skip-proofs-okp))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))</pre>
  </div>

<div class="form-block function" id="def-include-book-fn" data-defines="INCLUDE-BOOK-FN" data-references="LET,INCLUDE-BOOK-FN1,LIST,APPEND,CDDR,IF,CDDR-EVENT-FORM,LOAD-COMPILED-FILE0,NULL,BEHALF-OF-CERTIFY-FLG,LET*,OR,IGNORE-CERT-FILES,CHK-INCLUDE-BOOK-INPUTS,CHK-INPUT-OBJECT-FILE,ER-PROGN,PARSE-BOOK-NAME,FAMILIAR-NAME,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,MV-LET,CBD,VALUE,SOFT,INCLUDE-BOOK-DIR-WITH-CHK,DIR-VALUE,ER-LET*,T,SET-COMPILER-ENABLED,CTX,WARNING$,EQ,NOT,AND,COND,PPROGN,WARNINGS-AS-ERRORS,PORT-FILE-ENABLED,F-GET-GLOBAL,COMPILER-ENABLED,STATE-GLOBAL-LET*,INCLUDE-BOOK,QUOTE,CONS,WITH-CTX-SUMMARIZED,EVENT-FORM,DIR,TTAGS,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,EXPANSION-ALIST/CERT-DATA,LOAD-COMPILED-FILE,STATE,USER-BOOK-NAME,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+,PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="INCLUDE-BOOK-FN" data-part-args="EVENT-FORM,DIR,TTAGS,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,EXPANSION-ALIST/CERT-DATA,LOAD-COMPILED-FILE,STATE,USER-BOOK-NAME" data-part-body="LET,TTAGS,INCLUDE-BOOK-FN1,LIST,APPEND,CDDR,EVENT-FORM,IF,CDDR-EVENT-FORM,LOAD-COMPILED-FILE0,EXPANSION-ALIST/CERT-DATA,NULL,BEHALF-OF-CERTIFY-FLG,LET*,OR,IGNORE-CERT-FILES,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,CHK-INCLUDE-BOOK-INPUTS,CHK-INPUT-OBJECT-FILE,ER-PROGN,PARSE-BOOK-NAME,FAMILIAR-NAME,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,MV-LET,CBD,VALUE,SOFT,INCLUDE-BOOK-DIR-WITH-CHK,DIR,DIR-VALUE,ER-LET*,T,SET-COMPILER-ENABLED,CTX,WARNING$,LOAD-COMPILED-FILE,EQ,NOT,AND,COND,PPROGN,WARNINGS-AS-ERRORS,PORT-FILE-ENABLED,STATE,F-GET-GLOBAL,COMPILER-ENABLED,STATE-GLOBAL-LET*,USER-BOOK-NAME,INCLUDE-BOOK,QUOTE,CONS,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-FN">include-book-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-fn" data-sym="INCLUDE-BOOK-FN" title="(defun include-book-fn
       (user-book-name state load-compiled-file expansion-alist/cert-data
        uncertified-okp defaxioms-okp skip-proofs-okp ttags dir event-form)
  (with-ctx-summarized (cons &#39;include-book user-book-name)
                       (state-global-let*
...">include-book-fn</a>
  (user-book-name state
    load-compiled-file
    expansion-alist/cert-data
    uncertified-okp
    defaxioms-okp
    skip-proofs-okp
    ttags
    dir
    event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (cons '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> user-book-name)
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((compiler-enabled (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled state)) (port-file-enabled (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'port-file-enabled state))
        (warnings-as-errors nil))
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file <span class="keyword">:default</span>))
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file nil))
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled state))) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
              <span class="string">"Compiled file"</span>
              <span class="string">"Ignoring value ~x0 supplied for include-book keyword ~
                       parameter :LOAD-COMPILED-FILE, treating it as ~x1 ~
                       instead, because of an earlier evaluation of ~x2; see ~
                       :DOC compilation."</span>
              load-compiled-file
              nil
              '(<a class="sym-link system" href="axioms.html#def-set-compiler-enabled" data-sym="SET-COMPILER-ENABLED">set-compiler-enabled</a> nil state)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((dir-value (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (dir (<a class="sym-link local-def" href="#def-include-book-dir-with-chk" data-sym="INCLUDE-BOOK-DIR-WITH-CHK" title="(defmacro include-book-dir-with-chk (soft-or-hard ctx dir)
  `(let ((ctx ,ctx) (dir ,dir))
     (let ((dir-value (include-book-dir dir state)))
       (cond
        ((null dir-value)
...">include-book-dir-with-chk</a> soft ctx dir))
               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>))))))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (full-book-string full-book-name
              directory-name
              familiar-name)
            (<a class="sym-link local-def" href="#def-parse-book-name" data-sym="PARSE-BOOK-NAME" title="(defun parse-book-name (dir x extension ctx state)
  (cond
   ((and extension (not (equal extension &quot;.lisp&quot;)))
    (mv
     (er hard ctx &quot;Calls of parse-book-name with non-nil extension other than ~
...">parse-book-name</a> dir-value user-book-name <span class="string">".lisp"</span> ctx state)
            (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-input-object-file" data-sym="CHK-INPUT-OBJECT-FILE" title="(defun chk-input-object-file (file ctx state)
  (er-let*
   ((ch
     (cond
      ((null (canonical-pathname file nil state))
...">chk-input-object-file</a> full-book-string ctx state)
              (<a class="sym-link local-def" href="#def-chk-include-book-inputs" data-sym="CHK-INCLUDE-BOOK-INPUTS" title="(defun chk-include-book-inputs
       (load-compiled-file uncertified-okp defaxioms-okp skip-proofs-okp ctx
        state)
  (let ((er-str
         &quot;The ~x0 argument of include-book must be ~v1.  The value ~x2 ~
...">chk-include-book-inputs</a> load-compiled-file
                uncertified-okp
                defaxioms-okp
                skip-proofs-okp
                ctx
                state)
              (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((ignore-cert-files (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ignore-cert-files state)
                     (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> uncertified-okp <span class="keyword">:ignore-certs</span>) full-book-name))))
                (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((behalf-of-certify-flg (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> expansion-alist/cert-data))) (load-compiled-file0 load-compiled-file)
                    (load-compiled-file (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled state)
                        load-compiled-file))
                    (cddr-event-form (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> event-form (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file0 load-compiled-file))
                        (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> event-form)
                        (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file <span class="keyword">:default</span>))
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:load-compiled-file</span> load-compiled-file)
                            nil)
                          (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> uncertified-okp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:uncertified-okp</span> uncertified-okp)
                            nil)
                          (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> defaxioms-okp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:defaxioms-okp</span> defaxioms-okp)
                            nil)
                          (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> skip-proofs-okp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:skip-proofs-okp</span> skip-proofs-okp)
                            nil)))))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> behalf-of-certify-flg (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> load-compiled-file)) (<a class="sym-link local-def" href="#def-include-book-fn1" data-sym="INCLUDE-BOOK-FN1" title="(defun include-book-fn1
       (user-book-name state load-compiled-file expansion-alist/cert-data
        uncertified-okp defaxioms-okp skip-proofs-okp ttags ctx
        full-book-string full-book-name directory-name familiar-name
        cddr-event-form)
...">include-book-fn1</a> user-book-name
                        state
                        load-compiled-file
                        expansion-alist/cert-data
                        uncertified-okp
                        defaxioms-okp
                        skip-proofs-okp
                        ttags
                        ctx
                        full-book-string
                        full-book-name
                        directory-name
                        familiar-name
                        cddr-event-form))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let nil
                        (<a class="sym-link local-def" href="#def-include-book-fn1" data-sym="INCLUDE-BOOK-FN1" title="(defun include-book-fn1
       (user-book-name state load-compiled-file expansion-alist/cert-data
        uncertified-okp defaxioms-okp skip-proofs-okp ttags ctx
        full-book-string full-book-name directory-name familiar-name
        cddr-event-form)
...">include-book-fn1</a> user-book-name
                          state
                          load-compiled-file
                          expansion-alist/cert-data
                          uncertified-okp
                          defaxioms-okp
                          skip-proofs-okp
                          ttags
                          ctx
                          full-book-string
                          full-book-name
                          directory-name
                          familiar-name
                          cddr-event-form)))))))))))))</pre>
  </div>

<div class="form-block function" id="def-spontaneous-decertificationp1" data-defines="SPONTANEOUS-DECERTIFICATIONP1" data-references="CONS,NULL,OR,AND,CDR,EQUAL,CDDR,BOOK-HASH2,CADR,CERT-ANNOTATIONS2,ASSOC-EQUAL,TEMP,CDDDDR,BOOK-HASH1,CADDDR,CERT-ANNOTATIONS1,CAR,CADDR,FAMILIAR-NAME1,LET*,T,ENDP,COND,FILES,ALIST,IBALIST,DEFUN" data-used-by="SPONTANEOUS-DECERTIFICATIONP" data-part-name="SPONTANEOUS-DECERTIFICATIONP1" data-part-args="FILES,ALIST,IBALIST" data-part-body="CONS,NULL,OR,AND,CDR,SPONTANEOUS-DECERTIFICATIONP1,EQUAL,CDDR,BOOK-HASH2,CADR,CERT-ANNOTATIONS2,ALIST,ASSOC-EQUAL,TEMP,CDDDDR,BOOK-HASH1,CADDDR,CERT-ANNOTATIONS1,CAR,CADDR,FAMILIAR-NAME1,LET*,T,FILES,IBALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPONTANEOUS-DECERTIFICATIONP1">spontaneous-decertificationp1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-spontaneous-decertificationp1" data-sym="SPONTANEOUS-DECERTIFICATIONP1" title="(defun spontaneous-decertificationp1 (ibalist alist files)
  (cond ((endp ibalist) files)
        (t
         (let* ((familiar-name1 (caddr (car ibalist)))
                (cert-annotations1 (cadddr (car ibalist)))
...">spontaneous-decertificationp1</a>
  (ibalist alist files)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> ibalist) files)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((familiar-name1 (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car ibalist))) (cert-annotations1 (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (car ibalist)))
          (book-hash1 (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> (car ibalist)))
          (temp (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> familiar-name1 alist))
          (cert-annotations2 (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> temp))
          (book-hash2 (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> temp)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (temp (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car ibalist)) temp) (<a class="sym-link local-def" href="#def-spontaneous-decertificationp1" data-sym="SPONTANEOUS-DECERTIFICATIONP1" title="(defun spontaneous-decertificationp1 (ibalist alist files)
  (cond ((endp ibalist) files)
        (t
         (let* ((familiar-name1 (caddr (car ibalist)))
                (cert-annotations1 (cadddr (car ibalist)))
...">spontaneous-decertificationp1</a> (cdr ibalist) alist files))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> cert-annotations1)
                   (equal cert-annotations1 cert-annotations2))
                 (equal book-hash1 nil)
                 book-hash2) (<a class="sym-link local-def" href="#def-spontaneous-decertificationp1" data-sym="SPONTANEOUS-DECERTIFICATIONP1" title="(defun spontaneous-decertificationp1 (ibalist alist files)
  (cond ((endp ibalist) files)
        (t
         (let* ((familiar-name1 (caddr (car ibalist)))
                (cert-annotations1 (cadddr (car ibalist)))
...">spontaneous-decertificationp1</a> (cdr ibalist)
                  alist
                  (cons (car (car ibalist)) files)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))))</pre>
  </div>

<div class="form-block function" id="def-spontaneous-decertificationp" data-defines="SPONTANEOUS-DECERTIFICATIONP" data-references="STRIP-CDDRS,SPONTANEOUS-DECERTIFICATIONP1,ALIST2,ALIST1,DEFUN" data-used-by="CHK-CERTIFY-BOOK-STEP-3" data-part-name="SPONTANEOUS-DECERTIFICATIONP" data-part-args="ALIST2,ALIST1" data-part-body="ALIST2,STRIP-CDDRS,ALIST1,SPONTANEOUS-DECERTIFICATIONP1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPONTANEOUS-DECERTIFICATIONP">spontaneous-decertificationp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-spontaneous-decertificationp" data-sym="SPONTANEOUS-DECERTIFICATIONP" title="(defun spontaneous-decertificationp (alist1 alist2)
  (spontaneous-decertificationp1 alist1 (strip-cddrs alist2) nil))">spontaneous-decertificationp</a>
  (alist1 alist2)
  (<a class="sym-link local-def" href="#def-spontaneous-decertificationp1" data-sym="SPONTANEOUS-DECERTIFICATIONP1" title="(defun spontaneous-decertificationp1 (ibalist alist files)
  (cond ((endp ibalist) files)
        (t
         (let* ((familiar-name1 (caddr (car ibalist)))
                (cert-annotations1 (cadddr (car ibalist)))
...">spontaneous-decertificationp1</a> alist1
    (<a class="sym-link system" href="axioms.html#def-strip-cddrs" data-sym="STRIP-CDDRS">strip-cddrs</a> alist2)
    nil))</pre>
  </div>

<div class="form-block function" id="def-remove-duplicates-equal-from-end" data-defines="REMOVE-DUPLICATES-EQUAL-FROM-END" data-references="CONS,T,CDR,CAR,MEMBER-EQUAL,REVERSE,ENDP,COND,ACC,LST,DEFUN" data-part-name="REMOVE-DUPLICATES-EQUAL-FROM-END" data-part-args="ACC,LST" data-part-body="CONS,T,CDR,REMOVE-DUPLICATES-EQUAL-FROM-END,CAR,MEMBER-EQUAL,ACC,REVERSE,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-DUPLICATES-EQUAL-FROM-END">remove-duplicates-equal-from-end</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-duplicates-equal-from-end" data-sym="REMOVE-DUPLICATES-EQUAL-FROM-END" title="(defun remove-duplicates-equal-from-end (lst acc)
  (cond ((endp lst) (reverse acc))
        ((member-equal (car lst) acc)
         (remove-duplicates-equal-from-end (cdr lst) acc))
        (t (remove-duplicates-equal-from-end (cdr lst) (cons (car lst) acc)))))">remove-duplicates-equal-from-end</a>
  (lst acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc))
    ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (car lst) acc) (<a class="sym-link local-def" href="#def-remove-duplicates-equal-from-end" data-sym="REMOVE-DUPLICATES-EQUAL-FROM-END" title="(defun remove-duplicates-equal-from-end (lst acc)
  (cond ((endp lst) (reverse acc))
        ((member-equal (car lst) acc)
         (remove-duplicates-equal-from-end (cdr lst) acc))
        (t (remove-duplicates-equal-from-end (cdr lst) (cons (car lst) acc)))))">remove-duplicates-equal-from-end</a> (cdr lst) acc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-remove-duplicates-equal-from-end" data-sym="REMOVE-DUPLICATES-EQUAL-FROM-END" title="(defun remove-duplicates-equal-from-end (lst acc)
  (cond ((endp lst) (reverse acc))
        ((member-equal (car lst) acc)
         (remove-duplicates-equal-from-end (cdr lst) acc))
        (t (remove-duplicates-equal-from-end (cdr lst) (cons (car lst) acc)))))">remove-duplicates-equal-from-end</a> (cdr lst)
        (cons (car lst) acc)))))</pre>
  </div>

<div class="form-block function" id="def-include-book-alist-subsetp-failure-witnesses" data-defines="INCLUDE-BOOK-ALIST-SUBSETP-FAILURE-WITNESSES" data-references="CONS,CAR,CDDR,MEMBER-EQUAL,IF,CDR,T,ENDP,COND,ACC,STRIP-CDDRS-ALIST2,ALIST1,DEFUN" data-used-by="CHK-CERTIFY-BOOK-STEP-3" data-part-name="INCLUDE-BOOK-ALIST-SUBSETP-FAILURE-WITNESSES" data-part-args="ACC,STRIP-CDDRS-ALIST2,ALIST1" data-part-body="CONS,CAR,CDDR,MEMBER-EQUAL,IF,STRIP-CDDRS-ALIST2,CDR,INCLUDE-BOOK-ALIST-SUBSETP-FAILURE-WITNESSES,T,ACC,ALIST1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ALIST-SUBSETP-FAILURE-WITNESSES">include-book-alist-subsetp-failure-witnesses</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-alist-subsetp-failure-witnesses" data-sym="INCLUDE-BOOK-ALIST-SUBSETP-FAILURE-WITNESSES" title="(defun include-book-alist-subsetp-failure-witnesses
       (alist1 strip-cddrs-alist2 acc)
  (cond ((endp alist1) acc)
        (t
         (include-book-alist-subsetp-failure-witnesses (cdr alist1)
...">include-book-alist-subsetp-failure-witnesses</a>
  (alist1 strip-cddrs-alist2 acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist1) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-include-book-alist-subsetp-failure-witnesses" data-sym="INCLUDE-BOOK-ALIST-SUBSETP-FAILURE-WITNESSES" title="(defun include-book-alist-subsetp-failure-witnesses
       (alist1 strip-cddrs-alist2 acc)
  (cond ((endp alist1) acc)
        (t
         (include-book-alist-subsetp-failure-witnesses (cdr alist1)
...">include-book-alist-subsetp-failure-witnesses</a> (cdr alist1)
        strip-cddrs-alist2
        (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car alist1)) strip-cddrs-alist2)
          acc
          (cons (car alist1) acc))))))</pre>
  </div>

<div class="form-block function" id="def-expansion-filename" data-defines="EXPANSION-FILENAME" data-references="STRING,QUOTE,CONCATENATE,-,SUBSEQ,EQUAL,ASSERT$,LENGTH,LEN,LET,FILE,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+,CERTIFY-BOOK-FINISH-COMPLETE,WRITE-EXPANSION-FILE" data-part-name="EXPANSION-FILENAME" data-part-args="FILE" data-part-body="STRING,QUOTE,CONCATENATE,-,SUBSEQ,EQUAL,ASSERT$,FILE,LENGTH,LEN,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPANSION-FILENAME">expansion-filename</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-expansion-filename" data-sym="EXPANSION-FILENAME" title="(defun expansion-filename (file)
  (let ((len (length file)))
    (assert$ (equal (subseq file (- len 5) len) &quot;.lisp&quot;)
             (concatenate &#39;string (subseq file 0 (- len 5)) &quot;@expansion.lsp&quot;))))">expansion-filename</a>
  (file)
  (let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> file)))
    (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (equal (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> file (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <span class="number">5</span>) <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>) <span class="string">".lisp"</span>)
      (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
        (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> file <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <span class="number">5</span>))
        <span class="string">"@expansion.lsp"</span>))))</pre>
  </div>

<div class="form-block constant" id="def-_2Aelided-defconst_2A" data-defines="*ELIDED-DEFCONST*" data-references="ELIDED-DEFCONST,QUOTE,DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*ELIDED-DEFCONST*">*elided-defconst*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aelided-defconst_2A" data-sym="*ELIDED-DEFCONST*" title="(defconst *elided-defconst* &#39;elided-defconst)">*elided-defconst*</a> 'elided-defconst)</pre>
  </div>

<div class="form-block function" id="def-elided-defconst-form" data-defines="ELIDED-DEFCONST-FORM" data-references="CADR,DEFCONST,QUASIQUOTE,INDEX,EV,DEFUN" data-used-by="SUBST-BY-POSITION-ELIDING-DEFCONST2" data-part-name="ELIDED-DEFCONST-FORM" data-part-args="INDEX,EV" data-part-body="CADR,DEFCONST,QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ELIDED-DEFCONST-FORM">elided-defconst-form</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-elided-defconst-form" data-sym="ELIDED-DEFCONST-FORM" title="(defun elided-defconst-form (ev index)
  `(defconst ,(cadr ev)
             (cadr ,(list *elided-defconst* (list &#39;quote (cadr ev)) index))))">elided-defconst-form</a>
  (ev index)
  `(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> ,(CADR EV)
    (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ,(LIST *ELIDED-DEFCONST* (LIST &#39;QUOTE (CADR EV)) INDEX))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-subst-by-position-eliding-defconst2" data-defines="SUBST-BY-POSITION-ELIDING-DEFCONST2" data-references="T,ENDP,COND,LST,OTHERWISE,LAST,WITH-PROVER-STEP-LIMIT,WITH-OUTPUT,SKIP-PROOFS,CADDR,WITH-GUARD-CHECKING,RECORD-EXPANSION,CDDR,CADR,LIST*,ENCAPSULATE,CDR,SUBST-BY-POSITION-ELIDING-DEFCONST2-LST,QUOTE,CONS,PROGN,ELIDED-DEFCONST-FORM,DEFCONST-FORM-TO-ELIDE,IF,DEFCONST,CAR,CASE,INDEX,EV,DEFUN,MUTUAL-RECURSION" data-used-by="SUBST-BY-POSITION-ELIDING-DEFCONST1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST2">subst-by-position-eliding-defconst2</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst2" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST2" title="(mutual-recursion
 (defun subst-by-position-eliding-defconst2 (ev index)
   (case (car ev)
     (defconst
      (if (defconst-form-to-elide ev)
...">subst-by-position-eliding-defconst2</a>
    (ev index)
    (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (car ev)
      (<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> (if (<a class="sym-link local-def" href="#def-defconst-form-to-elide" data-sym="DEFCONST-FORM-TO-ELIDE" title="(defun defconst-form-to-elide (ev)
  (case-match ev ((&#39;defconst &amp; (&#39;quote &amp;)) t) (&amp; nil)))">defconst-form-to-elide</a> ev)
          (<a class="sym-link local-def" href="#def-elided-defconst-form" data-sym="ELIDED-DEFCONST-FORM" title="(defun elided-defconst-form (ev index)
  `(defconst ,(cadr ev)
             (cadr ,(list *elided-defconst* (list &#39;quote (cadr ev)) index))))">elided-defconst-form</a> ev index)
          ev))
      (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (cons '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>
          (subst-by-position-eliding-defconst2-lst (cdr ev) index)))
      (<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ev)
          (subst-by-position-eliding-defconst2-lst (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> ev) index)))
      ((<a class="sym-link system" href="axioms.html#def-record-expansion" data-sym="RECORD-EXPANSION">record-expansion</a> <a class="sym-link system" href="axioms.html#def-with-guard-checking" data-sym="WITH-GUARD-CHECKING">with-guard-checking</a>) (<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst2" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST2" title="(mutual-recursion
 (defun subst-by-position-eliding-defconst2 (ev index)
   (case (car ev)
     (defconst
      (if (defconst-form-to-elide ev)
...">subst-by-position-eliding-defconst2</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> ev) index))
      (<a class="sym-link system" href="axioms.html#def-skip-proofs" data-sym="SKIP-PROOFS">skip-proofs</a> (<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst2" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST2" title="(mutual-recursion
 (defun subst-by-position-eliding-defconst2 (ev index)
   (case (car ev)
     (defconst
      (if (defconst-form-to-elide ev)
...">subst-by-position-eliding-defconst2</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ev) index))
      ((<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <a class="sym-link system" href="history-management.html#def-with-prover-step-limit" data-sym="WITH-PROVER-STEP-LIMIT">with-prover-step-limit</a>) (<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst2" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST2" title="(mutual-recursion
 (defun subst-by-position-eliding-defconst2 (ev index)
   (case (car ev)
     (defconst
      (if (defconst-form-to-elide ev)
...">subst-by-position-eliding-defconst2</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> ev)) index))
      (otherwise ev)))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> subst-by-position-eliding-defconst2-lst
    (lst index)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst2" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST2" title="(mutual-recursion
 (defun subst-by-position-eliding-defconst2 (ev index)
   (case (car ev)
     (defconst
      (if (defconst-form-to-elide ev)
...">subst-by-position-eliding-defconst2</a> (car lst) index)
          (subst-by-position-eliding-defconst2-lst (cdr lst) index))))))</pre>
  </div>

<div class="form-block function" id="def-subst-by-position-eliding-defconst1" data-defines="SUBST-BY-POSITION-ELIDING-DEFCONST1" data-references="CAR,T,SUBST-BY-POSITION-ELIDING-DEFCONST2,CONS,1+,CDR,CDAR,EV,LET,CAAR,EQL,QUASIQUOTE,QUOTE,HARD,ER,REVAPPEND,ENDP,COND,ACC,INDEX,LST,ALIST,DEFUN" data-used-by="SUBST-BY-POSITION-ELIDING-DEFCONST" data-part-name="SUBST-BY-POSITION-ELIDING-DEFCONST1" data-part-args="ACC,INDEX,LST,ALIST" data-part-body="CAR,T,SUBST-BY-POSITION-ELIDING-DEFCONST2,CONS,1+,CDR,CDAR,EV,LET,CAAR,INDEX,EQL,QUASIQUOTE,SUBST-BY-POSITION-ELIDING-DEFCONST1,QUOTE,HARD,ER,LST,ACC,REVAPPEND,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST1">subst-by-position-eliding-defconst1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst1" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST1" title="(defun subst-by-position-eliding-defconst1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position-eliding-defconst1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position-eliding-defconst1</a>
  (alist lst index acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> acc lst))
    ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst1" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST1" title="(defun subst-by-position-eliding-defconst1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position-eliding-defconst1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position-eliding-defconst1</a>
        <span class="string">"Implementation error: lst is an atom, so unable to complete ~
              call ~x0."</span>
        `(<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst1" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST1" title="(defun subst-by-position-eliding-defconst1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position-eliding-defconst1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position-eliding-defconst1</a> ,ALIST
          ,LST
          ,INDEX
          ,ACC)))
    ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> index (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (let ((ev (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)))
        (<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst1" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST1" title="(defun subst-by-position-eliding-defconst1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position-eliding-defconst1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position-eliding-defconst1</a> (cdr alist)
          (cdr lst)
          (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> index)
          (cons (<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst2" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST2" title="(mutual-recursion
 (defun subst-by-position-eliding-defconst2 (ev index)
   (case (car ev)
     (defconst
      (if (defconst-form-to-elide ev)
...">subst-by-position-eliding-defconst2</a> ev index) acc))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst1" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST1" title="(defun subst-by-position-eliding-defconst1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position-eliding-defconst1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position-eliding-defconst1</a> alist
        (cdr lst)
        (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> index)
        (cons (car lst) acc)))))</pre>
  </div>

<div class="form-block function" id="def-subst-by-position-eliding-defconst" data-defines="SUBST-BY-POSITION-ELIDING-DEFCONST" data-references="SUBST-BY-POSITION-ELIDING-DEFCONST1,T,QUASIQUOTE,QUOTE,HARD,ER,CAAR,<,COND,INDEX,LST,ALIST,DEFUN" data-used-by="WRITE-EXPANSION-FILE" data-part-name="SUBST-BY-POSITION-ELIDING-DEFCONST" data-part-args="INDEX,LST,ALIST" data-part-body="LST,SUBST-BY-POSITION-ELIDING-DEFCONST1,T,QUASIQUOTE,SUBST-BY-POSITION-ELIDING-DEFCONST,QUOTE,HARD,ER,INDEX,CAAR,<,ALIST,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST">subst-by-position-eliding-defconst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST" title="(defun subst-by-position-eliding-defconst (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position-eliding-defconst</a>
  (alist lst index)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((&lt; (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) index) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            '<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST" title="(defun subst-by-position-eliding-defconst (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position-eliding-defconst</a>
            <span class="string">"Implementation error: The alist in ~
                     subst-by-position-eliding-defconst must not start with ~
                     an index less than its index argument, so unable to ~
                     compute ~x0."</span>
            `(<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST" title="(defun subst-by-position-eliding-defconst (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position-eliding-defconst</a> ,ALIST ,LST ,INDEX)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst1" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST1" title="(defun subst-by-position-eliding-defconst1 (alist lst index acc)
  (cond ((endp alist) (revappend acc lst))
        ((endp lst)
         (er hard &#39;subst-by-position-eliding-defconst1
             &quot;Implementation error: lst is an atom, so unable to complete ~
...">subst-by-position-eliding-defconst1</a> alist lst index nil))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> lst)))</pre>
  </div>

<div class="form-block function" id="def-write-expansion-file" data-defines="WRITE-EXPANSION-FILE" data-references="VALUE,CLOSE-OUTPUT-CHANNEL,CDR,SUBST-BY-POSITION-ELIDING-DEFCONST,APPEND,REVERSE,PROGN,HOST-LISP,SYMBOL-NAME,STRING,CONCATENATE,PRINC$,NEWLINE,HCOMP-INIT,IN-PACKAGE,PRINT-OBJECT$,PROOFS-CO,CONS,LIST,FMS!,EVENT,IO?,PPROGN,PRINT-READABLY,PRINT-CIRCLE-FILES,QUOTE,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,T,SOFT,ER,NULL,COND,CH,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,IGNORE,DECLARE,STATE,CTX,KNOWN-PACKAGE-ALIST,EV-LST,PKG-NAMES,EXPANSION-ALIST,EXPANSION-FILENAME,COMPRESSED-CLTL-COMMAND-STACK,NEW-FNS-EXEC,DECLAIM-LIST,PORTCULLIS-CMDS,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="WRITE-EXPANSION-FILE" data-part-args="STATE,CTX,KNOWN-PACKAGE-ALIST,EV-LST,PKG-NAMES,EXPANSION-ALIST,EXPANSION-FILENAME,COMPRESSED-CLTL-COMMAND-STACK,NEW-FNS-EXEC,DECLAIM-LIST,PORTCULLIS-CMDS" data-part-declare="KNOWN-PACKAGE-ALIST,PKG-NAMES,COMPRESSED-CLTL-COMMAND-STACK,NEW-FNS-EXEC,IGNORE,DECLARE" data-part-body="VALUE,CLOSE-OUTPUT-CHANNEL,EV-LST,CDR,EXPANSION-ALIST,SUBST-BY-POSITION-ELIDING-DEFCONST,PORTCULLIS-CMDS,APPEND,REVERSE,PROGN,HOST-LISP,SYMBOL-NAME,STRING,CONCATENATE,PRINC$,DECLAIM-LIST,NEWLINE,HCOMP-INIT,IN-PACKAGE,PRINT-OBJECT$,PROOFS-CO,CONS,LIST,FMS!,EVENT,IO?,PPROGN,PRINT-READABLY,STATE,PRINT-CIRCLE-FILES,QUOTE,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,T,CTX,SOFT,ER,NULL,COND,EXPANSION-FILENAME,CH,WITH-OUTPUT-OBJECT-CHANNEL-SHARING" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRITE-EXPANSION-FILE">write-expansion-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-write-expansion-file" data-sym="WRITE-EXPANSION-FILE" title="(defun write-expansion-file
       (portcullis-cmds declaim-list new-fns-exec compressed-cltl-command-stack
        expansion-filename expansion-alist pkg-names ev-lst known-package-alist
        ctx state)
  (declare
...">write-expansion-file</a>
  (portcullis-cmds declaim-list
    new-fns-exec
    compressed-cltl-command-stack
    <a class="sym-link local-def" href="#def-expansion-filename" data-sym="EXPANSION-FILENAME" title="(defun expansion-filename (file)
  (let ((len (length file)))
    (assert$ (equal (subseq file (- len 5) len) &quot;.lisp&quot;)
             (concatenate &#39;string (subseq file 0 (- len 5)) &quot;@expansion.lsp&quot;))))">expansion-filename</a>
    expansion-alist
    <a class="sym-link local-def" href="#def-pkg-names" data-sym="PKG-NAMES" title="(defun pkg-names (x base-kpa)
  (cond ((null x) nil) (t (merge-sort-lexorder (pkg-names0 x base-kpa nil)))))">pkg-names</a>
    ev-lst
    <a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a>
    ctx
    state)
  (declare (ignore new-fns-exec
      compressed-cltl-command-stack
      <a class="sym-link local-def" href="#def-pkg-names" data-sym="PKG-NAMES" title="(defun pkg-names (x base-kpa)
  (cond ((null x) nil) (t (merge-sort-lexorder (pkg-names0 x base-kpa nil)))))">pkg-names</a>
      <a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a>))
  (<a class="sym-link local-def" href="#def-with-output-object-channel-sharing" data-sym="WITH-OUTPUT-OBJECT-CHANNEL-SHARING" title="(defmacro with-output-object-channel-sharing
          (chan filename body &amp;optional chan0)
  (declare (xargs :guard (and (symbolp chan) (symbolp chan0))))
  `(mv-let (,chan state)
           (if ,chan0
...">with-output-object-channel-sharing</a> ch
    <a class="sym-link local-def" href="#def-expansion-filename" data-sym="EXPANSION-FILENAME" title="(defun expansion-filename (file)
  (let ((len (length file)))
    (assert$ (equal (subseq file (- len 5) len) &quot;.lisp&quot;)
             (concatenate &#39;string (subseq file 0 (- len 5)) &quot;@expansion.lsp&quot;))))">expansion-filename</a>
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"We cannot open expansion file ~s0 for output."</span>
          <a class="sym-link local-def" href="#def-expansion-filename" data-sym="EXPANSION-FILENAME" title="(defun expansion-filename (file)
  (let ((len (length file)))
    (assert$ (equal (subseq file (- len 5) len) &quot;.lisp&quot;)
             (concatenate &#39;string (subseq file 0 (- len 5)) &quot;@expansion.lsp&quot;))))">expansion-filename</a>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-with-print-defaults" data-sym="WITH-PRINT-DEFAULTS">with-print-defaults</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>) (print-circle (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-circle-files state))
            (print-readably <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
              nil
              state
              (<a class="sym-link local-def" href="#def-expansion-filename" data-sym="EXPANSION-FILENAME" title="(defun expansion-filename (file)
  (let ((len (length file)))
    (assert$ (equal (subseq file (- len 5) len) &quot;.lisp&quot;)
             (concatenate &#39;string (subseq file 0 (- len 5)) &quot;@expansion.lsp&quot;))))">expansion-filename</a>)
              (<a class="sym-link system" href="basis-a.html#def-fms_21" data-sym="FMS!">fms!</a> <span class="string">"Note: Writing book expansion file, ~s0."</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 <a class="sym-link local-def" href="#def-expansion-filename" data-sym="EXPANSION-FILENAME" title="(defun expansion-filename (file)
  (let ((len (length file)))
    (assert$ (equal (subseq file (- len 5) len) &quot;.lisp&quot;)
             (concatenate &#39;string (subseq file 0 (- len 5)) &quot;@expansion.lsp&quot;))))">expansion-filename</a>))
                (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                state
                nil))
            (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> '(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>) ch state)
            (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> '(hcomp-init) ch state)
            (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> ch state)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (declaim-list (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-princ_24" data-sym="PRINC$">princ$</a> <span class="string">";;; Declaim forms:"</span> ch state)
                  (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> ch state)
                  (<a class="sym-link system" href="axioms.html#def-princ_24" data-sym="PRINC$">princ$</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
                      <span class="string">"#+"</span>
                      (symbol-name (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'host-lisp state)))
                    ch
                    state)
                  (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (cons '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> declaim-list))
                    ch
                    state)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-princ_24" data-sym="PRINC$">princ$</a> <span class="string">";;; Note: There are no declaim forms to print."</span>
                  ch
                  state)))
            (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (cons '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>
                (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> portcullis-cmds
                  (<a class="sym-link local-def" href="#def-subst-by-position-eliding-defconst" data-sym="SUBST-BY-POSITION-ELIDING-DEFCONST" title="(defun subst-by-position-eliding-defconst (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position-eliding-defconst</a> expansion-alist
                    (cdr ev-lst)
                    <span class="number">1</span>)))
              ch
              state)
            (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> ch state)
            (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> ch state)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link local-def" href="#def-expansion-filename" data-sym="EXPANSION-FILENAME" title="(defun expansion-filename (file)
  (let ((len (length file)))
    (assert$ (equal (subseq file (- len 5) len) &quot;.lisp&quot;)
             (concatenate &#39;string (subseq file 0 (- len 5)) &quot;@expansion.lsp&quot;))))">expansion-filename</a>)))))))</pre>
  </div>

<div class="form-block function" id="def-collect-ideal-user-defuns1" data-defines="COLLECT-IDEAL-USER-DEFUNS1" data-references="T,STRIP-CARS,APPEND,CDDDR,SYMBOL-CLASS,CADR,CDR,DEFUNS,CADDAR,CLTL-COMMAND,EXIT-BOOT-STRAP-MODE,CDDAR,ACCESS-COMMAND-TUPLE-FORM,EQUAL,GLOBAL-VALUE,CADAR,COMMAND-LANDMARK,QUOTE,CAAR,EQ,AND,NULL,OR,COND,ANS,WRLD,TL,DEFUN" data-used-by="COLLECT-IDEAL-USER-DEFUNS" data-part-name="COLLECT-IDEAL-USER-DEFUNS1" data-part-args="ANS,WRLD,TL" data-part-body="T,STRIP-CARS,APPEND,CDDDR,SYMBOL-CLASS,CADR,WRLD,CDR,COLLECT-IDEAL-USER-DEFUNS1,DEFUNS,CADDAR,CLTL-COMMAND,ANS,EXIT-BOOT-STRAP-MODE,CDDAR,ACCESS-COMMAND-TUPLE-FORM,EQUAL,GLOBAL-VALUE,CADAR,COMMAND-LANDMARK,QUOTE,CAAR,EQ,AND,TL,NULL,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-IDEAL-USER-DEFUNS1">collect-ideal-user-defuns1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-ideal-user-defuns1" data-sym="COLLECT-IDEAL-USER-DEFUNS1" title="(defun collect-ideal-user-defuns1 (tl wrld ans)
  (cond
   ((or (null tl)
        (and (eq (caar tl) &#39;command-landmark) (eq (cadar tl) &#39;global-value)
             (equal (access-command-tuple-form (cddar tl))
...">collect-ideal-user-defuns1</a>
  (tl wrld ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> tl)
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> tl) 'command-landmark)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> tl) 'global-value)
         (equal (access-command-tuple-form (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> tl))
           '(exit-boot-strap-mode)))) ans)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> tl) 'cltl-command)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> tl) 'global-value)
       (equal (<a class="sym-link system" href="axioms.html#def-caddar" data-sym="CADDAR">caddar</a> tl) '<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a>)) (<a class="sym-link local-def" href="#def-collect-ideal-user-defuns1" data-sym="COLLECT-IDEAL-USER-DEFUNS1" title="(defun collect-ideal-user-defuns1 (tl wrld ans)
  (cond
   ((or (null tl)
        (and (eq (caar tl) &#39;command-landmark) (eq (cadar tl) &#39;global-value)
             (equal (access-command-tuple-form (cddar tl))
...">collect-ideal-user-defuns1</a> (cdr tl)
        wrld
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> tl))) ans)
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> tl))) wrld) <span class="keyword">:ideal</span>) (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> tl))) ans))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ans))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-collect-ideal-user-defuns1" data-sym="COLLECT-IDEAL-USER-DEFUNS1" title="(defun collect-ideal-user-defuns1 (tl wrld ans)
  (cond
   ((or (null tl)
        (and (eq (caar tl) &#39;command-landmark) (eq (cadar tl) &#39;global-value)
             (equal (access-command-tuple-form (cddar tl))
...">collect-ideal-user-defuns1</a> (cdr tl) wrld ans))))</pre>
  </div>

<div class="form-block function" id="def-collect-ideal-user-defuns" data-defines="COLLECT-IDEAL-USER-DEFUNS" data-references="COLLECT-IDEAL-USER-DEFUNS1,WRLD,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="COLLECT-IDEAL-USER-DEFUNS" data-part-args="WRLD" data-part-body="WRLD,COLLECT-IDEAL-USER-DEFUNS1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-IDEAL-USER-DEFUNS">collect-ideal-user-defuns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-ideal-user-defuns" data-sym="COLLECT-IDEAL-USER-DEFUNS" title="(defun collect-ideal-user-defuns (wrld)
  (collect-ideal-user-defuns1 wrld wrld nil))">collect-ideal-user-defuns</a>
  (wrld)
  (<a class="sym-link local-def" href="#def-collect-ideal-user-defuns1" data-sym="COLLECT-IDEAL-USER-DEFUNS1" title="(defun collect-ideal-user-defuns1 (tl wrld ans)
  (cond
   ((or (null tl)
        (and (eq (caar tl) &#39;command-landmark) (eq (cadar tl) &#39;global-value)
             (equal (access-command-tuple-form (cddar tl))
...">collect-ideal-user-defuns1</a> wrld wrld nil))</pre>
  </div>

<div class="form-block function" id="def-set-difference-eq-sorted" data-defines="SET-DIFFERENCE-EQ-SORTED" data-references="T,CONS,SYMBOL<,CDR,CAR,EQ,REVAPPEND,REVERSE,NULL,COND,ANS,LST2,LST1,DEFUN" data-used-by="PRINT-CERTIFY-BOOK-GUARDS-WARNING" data-part-name="SET-DIFFERENCE-EQ-SORTED" data-part-args="ANS,LST2,LST1" data-part-body="T,CONS,SYMBOL<,CDR,SET-DIFFERENCE-EQ-SORTED,CAR,EQ,REVAPPEND,LST2,ANS,REVERSE,LST1,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-DIFFERENCE-EQ-SORTED">set-difference-eq-sorted</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-difference-eq-sorted" data-sym="SET-DIFFERENCE-EQ-SORTED" title="(defun set-difference-eq-sorted (lst1 lst2 ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        ((eq (car lst1) (car lst2))
         (set-difference-eq-sorted (cdr lst1) (cdr lst2) ans))
        ((symbol&lt; (car lst1) (car lst2))
...">set-difference-eq-sorted</a>
  (lst1 lst2 ans)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst1) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> ans))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst2) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> ans lst1))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car lst1) (car lst2)) (<a class="sym-link local-def" href="#def-set-difference-eq-sorted" data-sym="SET-DIFFERENCE-EQ-SORTED" title="(defun set-difference-eq-sorted (lst1 lst2 ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        ((eq (car lst1) (car lst2))
         (set-difference-eq-sorted (cdr lst1) (cdr lst2) ans))
        ((symbol&lt; (car lst1) (car lst2))
...">set-difference-eq-sorted</a> (cdr lst1) (cdr lst2) ans))
    ((<a class="sym-link system" href="axioms.html#def-symbol_3C" data-sym="SYMBOL&lt;">symbol&lt;</a> (car lst1) (car lst2)) (<a class="sym-link local-def" href="#def-set-difference-eq-sorted" data-sym="SET-DIFFERENCE-EQ-SORTED" title="(defun set-difference-eq-sorted (lst1 lst2 ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        ((eq (car lst1) (car lst2))
         (set-difference-eq-sorted (cdr lst1) (cdr lst2) ans))
        ((symbol&lt; (car lst1) (car lst2))
...">set-difference-eq-sorted</a> (cdr lst1)
        lst2
        (cons (car lst1) ans)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-set-difference-eq-sorted" data-sym="SET-DIFFERENCE-EQ-SORTED" title="(defun set-difference-eq-sorted (lst1 lst2 ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        ((eq (car lst1) (car lst2))
         (set-difference-eq-sorted (cdr lst1) (cdr lst2) ans))
        ((symbol&lt; (car lst1) (car lst2))
...">set-difference-eq-sorted</a> lst1 (cdr lst2) ans))))</pre>
  </div>

<div class="form-block function" id="def-pkg-names0" data-defines="PKG-NAMES0" data-references="CONS,T,FIND-PACKAGE-ENTRY,MEMBER-EQUAL,OR,SYMBOL-PACKAGE-NAME,NAME,LET,SYMBOLP,AND,CAR,CDR,CONSP,COND,ACC,BASE-KPA,X,DEFUN" data-used-by="PKG-NAMES" data-part-name="PKG-NAMES0" data-part-args="ACC,BASE-KPA,X" data-part-body="CONS,T,FIND-PACKAGE-ENTRY,MEMBER-EQUAL,OR,SYMBOL-PACKAGE-NAME,NAME,LET,SYMBOLP,AND,ACC,CAR,BASE-KPA,CDR,PKG-NAMES0,X,CONSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PKG-NAMES0">pkg-names0</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pkg-names0" data-sym="PKG-NAMES0" title="(defun pkg-names0 (x base-kpa acc)
  (cond
   ((consp x) (pkg-names0 (cdr x) base-kpa (pkg-names0 (car x) base-kpa acc)))
   ((and x (symbolp x))
    (let ((name (symbol-package-name x)))
...">pkg-names0</a>
  (x base-kpa acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp x) (<a class="sym-link local-def" href="#def-pkg-names0" data-sym="PKG-NAMES0" title="(defun pkg-names0 (x base-kpa acc)
  (cond
   ((consp x) (pkg-names0 (cdr x) base-kpa (pkg-names0 (car x) base-kpa acc)))
   ((and x (symbolp x))
    (let ((name (symbol-package-name x)))
...">pkg-names0</a> (cdr x)
        base-kpa
        (<a class="sym-link local-def" href="#def-pkg-names0" data-sym="PKG-NAMES0" title="(defun pkg-names0 (x base-kpa acc)
  (cond
   ((consp x) (pkg-names0 (cdr x) base-kpa (pkg-names0 (car x) base-kpa acc)))
   ((and x (symbolp x))
    (let ((name (symbol-package-name x)))
...">pkg-names0</a> (car x) base-kpa acc)))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> x (symbolp x)) (let ((name (symbol-package-name x)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> name acc)
             (<a class="sym-link system" href="axioms.html#def-find-package-entry" data-sym="FIND-PACKAGE-ENTRY">find-package-entry</a> name base-kpa)) acc)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons name acc)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> acc)))</pre>
  </div>

<div class="form-block function" id="def-hons-union-ordered-string-lists" data-defines="HONS-UNION-ORDERED-STRING-LISTS" data-references="T,STRING<,CDR,HONS,CAR,HONS-EQUAL,NULL,COND,Y,X,DEFUN" data-part-name="HONS-UNION-ORDERED-STRING-LISTS" data-part-args="Y,X" data-part-body="T,STRING<,CDR,HONS-UNION-ORDERED-STRING-LISTS,HONS,CAR,HONS-EQUAL,Y,X,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HONS-UNION-ORDERED-STRING-LISTS">hons-union-ordered-string-lists</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hons-union-ordered-string-lists" data-sym="HONS-UNION-ORDERED-STRING-LISTS" title="(defun hons-union-ordered-string-lists (x y)
  (cond ((null x) y) ((null y) x) ((hons-equal x y) x)
        ((hons-equal (car x) (car y))
         (hons (car x) (hons-union-ordered-string-lists (cdr x) (cdr y))))
        ((string&lt; (car x) (car y))
...">hons-union-ordered-string-lists</a>
  (x y)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) y)
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> y) x)
    ((hons-equal x y) x)
    ((hons-equal (car x) (car y)) (hons (car x)
        (<a class="sym-link local-def" href="#def-hons-union-ordered-string-lists" data-sym="HONS-UNION-ORDERED-STRING-LISTS" title="(defun hons-union-ordered-string-lists (x y)
  (cond ((null x) y) ((null y) x) ((hons-equal x y) x)
        ((hons-equal (car x) (car y))
         (hons (car x) (hons-union-ordered-string-lists (cdr x) (cdr y))))
        ((string&lt; (car x) (car y))
...">hons-union-ordered-string-lists</a> (cdr x) (cdr y))))
    ((<a class="sym-link system" href="axioms.html#def-string_3C" data-sym="STRING&lt;">string&lt;</a> (car x) (car y)) (hons (car x) (<a class="sym-link local-def" href="#def-hons-union-ordered-string-lists" data-sym="HONS-UNION-ORDERED-STRING-LISTS" title="(defun hons-union-ordered-string-lists (x y)
  (cond ((null x) y) ((null y) x) ((hons-equal x y) x)
        ((hons-equal (car x) (car y))
         (hons (car x) (hons-union-ordered-string-lists (cdr x) (cdr y))))
        ((string&lt; (car x) (car y))
...">hons-union-ordered-string-lists</a> (cdr x) y)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (hons (car y) (<a class="sym-link local-def" href="#def-hons-union-ordered-string-lists" data-sym="HONS-UNION-ORDERED-STRING-LISTS" title="(defun hons-union-ordered-string-lists (x y)
  (cond ((null x) y) ((null y) x) ((hons-equal x y) x)
        ((hons-equal (car x) (car y))
         (hons (car x) (hons-union-ordered-string-lists (cdr x) (cdr y))))
        ((string&lt; (car x) (car y))
...">hons-union-ordered-string-lists</a> x (cdr y))))))</pre>
  </div>

<div class="form-block function" id="def-pkg-names" data-defines="PKG-NAMES" data-references="PKG-NAMES0,MERGE-SORT-LEXORDER,T,NULL,COND,BASE-KPA,X,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+,WRITE-EXPANSION-FILE" data-part-name="PKG-NAMES" data-part-args="BASE-KPA,X" data-part-body="BASE-KPA,PKG-NAMES0,MERGE-SORT-LEXORDER,T,X,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PKG-NAMES">pkg-names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pkg-names" data-sym="PKG-NAMES" title="(defun pkg-names (x base-kpa)
  (cond ((null x) nil) (t (merge-sort-lexorder (pkg-names0 x base-kpa nil)))))">pkg-names</a>
  (x base-kpa)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-merge-sort-lexorder" data-sym="MERGE-SORT-LEXORDER">merge-sort-lexorder</a> (<a class="sym-link local-def" href="#def-pkg-names0" data-sym="PKG-NAMES0" title="(defun pkg-names0 (x base-kpa acc)
  (cond
   ((consp x) (pkg-names0 (cdr x) base-kpa (pkg-names0 (car x) base-kpa acc)))
   ((and x (symbolp x))
    (let ((name (symbol-package-name x)))
...">pkg-names0</a> x base-kpa nil)))))</pre>
  </div>

<div class="form-block function" id="def-delete-names-from-kpa-rec" data-defines="DELETE-NAMES-FROM-KPA-REC" data-references="CONS,T,CDR,CAR,PACKAGE-ENTRY-NAME,MEMBER-EQUAL,ENDP,COND,KPA,NAMES,DEFUN" data-used-by="DELETE-NAMES-FROM-KPA" data-part-name="DELETE-NAMES-FROM-KPA-REC" data-part-args="KPA,NAMES" data-part-body="CONS,T,CDR,DELETE-NAMES-FROM-KPA-REC,NAMES,CAR,PACKAGE-ENTRY-NAME,MEMBER-EQUAL,KPA,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DELETE-NAMES-FROM-KPA-REC">delete-names-from-kpa-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-delete-names-from-kpa-rec" data-sym="DELETE-NAMES-FROM-KPA-REC" title="(defun delete-names-from-kpa-rec (names kpa)
  (cond ((endp kpa) nil)
        ((member-equal (package-entry-name (car kpa)) names)
         (delete-names-from-kpa-rec names (cdr kpa)))
        (t (cons (car kpa) (delete-names-from-kpa-rec names (cdr kpa))))))">delete-names-from-kpa-rec</a>
  (names kpa)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> kpa) nil)
    ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (<a class="sym-link system" href="axioms.html#def-package-entry-name" data-sym="PACKAGE-ENTRY-NAME">package-entry-name</a> (car kpa)) names) (<a class="sym-link local-def" href="#def-delete-names-from-kpa-rec" data-sym="DELETE-NAMES-FROM-KPA-REC" title="(defun delete-names-from-kpa-rec (names kpa)
  (cond ((endp kpa) nil)
        ((member-equal (package-entry-name (car kpa)) names)
         (delete-names-from-kpa-rec names (cdr kpa)))
        (t (cons (car kpa) (delete-names-from-kpa-rec names (cdr kpa))))))">delete-names-from-kpa-rec</a> names (cdr kpa)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car kpa) (<a class="sym-link local-def" href="#def-delete-names-from-kpa-rec" data-sym="DELETE-NAMES-FROM-KPA-REC" title="(defun delete-names-from-kpa-rec (names kpa)
  (cond ((endp kpa) nil)
        ((member-equal (package-entry-name (car kpa)) names)
         (delete-names-from-kpa-rec names (cdr kpa)))
        (t (cons (car kpa) (delete-names-from-kpa-rec names (cdr kpa))))))">delete-names-from-kpa-rec</a> names (cdr kpa))))))</pre>
  </div>

<div class="form-block function" id="def-delete-names-from-kpa" data-defines="DELETE-NAMES-FROM-KPA" data-references="DELETE-NAMES-FROM-KPA-REC,T,NULL,COND,KPA,NAMES,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="DELETE-NAMES-FROM-KPA" data-part-args="KPA,NAMES" data-part-body="DELETE-NAMES-FROM-KPA-REC,T,KPA,NAMES,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DELETE-NAMES-FROM-KPA">delete-names-from-kpa</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-delete-names-from-kpa" data-sym="DELETE-NAMES-FROM-KPA" title="(defun delete-names-from-kpa (names kpa)
  (cond ((null names) kpa) (t (delete-names-from-kpa-rec names kpa))))">delete-names-from-kpa</a>
  (names kpa)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> names) kpa)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-delete-names-from-kpa-rec" data-sym="DELETE-NAMES-FROM-KPA-REC" title="(defun delete-names-from-kpa-rec (names kpa)
  (cond ((endp kpa) nil)
        ((member-equal (package-entry-name (car kpa)) names)
         (delete-names-from-kpa-rec names (cdr kpa)))
        (t (cons (car kpa) (delete-names-from-kpa-rec names (cdr kpa))))))">delete-names-from-kpa-rec</a> names kpa))))</pre>
  </div>

<div class="form-block function" id="def-print-certify-book-step-2" data-defines="PRINT-CERTIFY-BOOK-STEP-2" data-references="PROOFS-CO,T,IF,MSG,COND,LENGTH,ZERO-ONE-OR-MORE,CONS,LIST,FMS,EVENT,IO?,STATE,ACL2X-FILE,PCERT0-FILE,EXPANSION-ALIST,EV-LST,DEFUN" data-used-by="CERTIFY-BOOK-STEP-2" data-part-name="PRINT-CERTIFY-BOOK-STEP-2" data-part-args="STATE,ACL2X-FILE,PCERT0-FILE,EXPANSION-ALIST,EV-LST" data-part-body="PROOFS-CO,T,IF,MSG,COND,LENGTH,ZERO-ONE-OR-MORE,CONS,LIST,FMS,ACL2X-FILE,PCERT0-FILE,EXPANSION-ALIST,EV-LST,STATE,EVENT,IO?" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-CERTIFY-BOOK-STEP-2">print-certify-book-step-2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-certify-book-step-2" data-sym="PRINT-CERTIFY-BOOK-STEP-2" title="(defun print-certify-book-step-2
       (ev-lst expansion-alist pcert0-file acl2x-file state)
  (io? event nil state (ev-lst expansion-alist pcert0-file acl2x-file)
       (fms &quot;* Step 2:  There ~#0~[were no forms in the file. Why are you ~
             making such a silly book?~/was one form in the file.~/were ~n1 ~
...">print-certify-book-step-2</a>
  (ev-lst expansion-alist pcert0-file acl2x-file state)
  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
    nil
    state
    (ev-lst expansion-alist pcert0-file acl2x-file)
    (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"* Step 2:  There ~#0~[were no forms in the file. Why are you ~
             making such a silly book?~/was one form in the file.~/were ~n1 ~
             forms in the file.~]  We now attempt to establish that each ~
             form, whether local or non-local, is indeed an admissible ~
             embedded event form in the context of the previously admitted ~
             ones.~@2~%"</span>
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> ev-lst))
        (cons #\1 (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> ev-lst))
        (cons #\2
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (expansion-alist (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Note that we are substituting ~n0 ~
                                     ~#1~[form~/forms~], as specified in ~
                                     file~#2~[~x2~/s ~&amp;2~], for ~#1~[a ~
                                     corresponding top-level ~
                                     form~/corresponding top-level forms~] in ~
                                     the book."</span>
                (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> expansion-alist)
                expansion-alist
                (if pcert0-file
                  (if acl2x-file
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> pcert0-file acl2x-file)
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> pcert0-file))
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> acl2x-file))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
      (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
      state
      nil)))</pre>
  </div>

<div class="form-block function" id="def-print-certify-book-step-3" data-defines="PRINT-CERTIFY-BOOK-STEP-3" data-references="T,FAST-CERT-MODE,EQ,MSG,1+,PROOFS-CO,INT=,IF,1-,ZERO-ONE-OR-MORE,CONS,LIST,FMS,NULL,POSP,AND,ASSERT$,COND,EVENT,IO?,STATE,PORT-NON-LOCALP,PORT-INDEX,INDEX,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="PRINT-CERTIFY-BOOK-STEP-3" data-part-args="STATE,PORT-NON-LOCALP,PORT-INDEX,INDEX" data-part-body="T,FAST-CERT-MODE,EQ,MSG,1+,PROOFS-CO,INT=,IF,1-,ZERO-ONE-OR-MORE,CONS,LIST,FMS,NULL,POSP,AND,ASSERT$,COND,PORT-NON-LOCALP,PORT-INDEX,INDEX,STATE,EVENT,IO?" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-CERTIFY-BOOK-STEP-3">print-certify-book-step-3</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-certify-book-step-3" data-sym="PRINT-CERTIFY-BOOK-STEP-3" title="(defun print-certify-book-step-3 (index port-index port-non-localp state)
  (io? event nil state (index port-index port-non-localp)
       (cond
        (index
         (assert$ (and (posp index) (null port-index))
...">print-certify-book-step-3</a>
  (index port-index port-non-localp state)
  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
    nil
    state
    (index port-index port-non-localp)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (index (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-posp" data-sym="POSP">posp</a> index) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> port-index))
          (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"* Step 3:  That completes the admissibility check.  Each form ~
                read was an embedded event form and was admissible.  We now ~
                retract back to the ~#0~[initial world~/world created by ~
                admitting the first event~/world created by the first ~n1 ~
                events~]~#2~[~/ after the initial IN-PACKAGE form~] and try ~
                to include~#2~[~/ the remainder of~] the book; see :DOC ~
                local-incompatibility.~%"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> index)))
              (cons #\1 (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> index))
              (cons #\2
                (if (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> <span class="number">1</span> index)
                  <span class="number">0</span>
                  <span class="number">1</span>)))
            (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
            state
            nil)))
      (port-index (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"* Step 3:  That completes the admissibility check.  Each form ~
               read was an embedded event form and was admissible.  We now ~
               retract the world, back through the ~n0 command after the ~
               initial (boot-strap) world.~@1  Next we will try to execute the ~
               remainder of the events in the certification world, and ~
               finally we will try to include the book; see :DOC ~
               local-incompatibility.~%"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> port-index)))
            (cons #\1
              (if port-non-localp
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Note that the rollback is caused by ~
                                        evaluation of an event after relaxing ~
                                        guard-checking from its default of T."</span>)
                <span class="string">""</span>)))
          (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
          state
          nil))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="history-management.html#def-fast-cert-mode" data-sym="FAST-CERT-MODE">fast-cert-mode</a> state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"* Step 3:  That completes the admissibility check.  Each form ~
               read was an embedded event form and was admissible.  Fast-cert ~
               mode is active, so we skip the check for local ~
               incompatibilities.~%"</span>
          nil
          (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
          state
          nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"* Step 3:  That completes the admissibility check.  Each form ~
               read was an embedded event form and was admissible.  No LOCAL ~
               or SET-GUARD-CHECKING forms make it necessary to check for ~
               local incompatibilities, so we skip that check.~%"</span>
          nil
          (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
          state
          nil)))))</pre>
  </div>

<div class="form-block function" id="def-print-certify-book-guards-warning" data-defines="PRINT-CERTIFY-BOOK-GUARDS-WARNING" data-references="EQL,IF,WARNING$,SET-DIFFERENCE-EQ-SORTED,EXTRA-BAD-FNS,SORT-SYMBOL-LISTP,LET*,STATE,CTX,K,ALL-BAD-FNS,NEW-BAD-FNS,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="PRINT-CERTIFY-BOOK-GUARDS-WARNING" data-part-args="STATE,CTX,K,ALL-BAD-FNS,NEW-BAD-FNS,FULL-BOOK-STRING" data-part-body="K,EQL,IF,FULL-BOOK-STRING,CTX,WARNING$,SET-DIFFERENCE-EQ-SORTED,EXTRA-BAD-FNS,ALL-BAD-FNS,SORT-SYMBOL-LISTP,NEW-BAD-FNS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-CERTIFY-BOOK-GUARDS-WARNING">print-certify-book-guards-warning</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-certify-book-guards-warning" data-sym="PRINT-CERTIFY-BOOK-GUARDS-WARNING" title="(defun print-certify-book-guards-warning
       (full-book-string new-bad-fns all-bad-fns k ctx state)
  (let* ((new-bad-fns (sort-symbol-listp new-bad-fns))
         (all-bad-fns (sort-symbol-listp all-bad-fns))
         (extra-bad-fns (set-difference-eq-sorted all-bad-fns new-bad-fns nil)))
...">print-certify-book-guards-warning</a>
  (full-book-string new-bad-fns all-bad-fns k ctx state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-bad-fns (sort-symbol-listp new-bad-fns)) (all-bad-fns (sort-symbol-listp all-bad-fns))
      (extra-bad-fns (<a class="sym-link local-def" href="#def-set-difference-eq-sorted" data-sym="SET-DIFFERENCE-EQ-SORTED" title="(defun set-difference-eq-sorted (lst1 lst2 ans)
  (cond ((null lst1) (reverse ans)) ((null lst2) (revappend ans lst1))
        ((eq (car lst1) (car lst2))
         (set-difference-eq-sorted (cdr lst1) (cdr lst2) ans))
        ((symbol&lt; (car lst1) (car lst2))
...">set-difference-eq-sorted</a> all-bad-fns new-bad-fns nil)))
    (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
      (<span class="string">"Guards"</span>)
      <span class="string">"~#1~[~/The book ~x0 defines the function~#2~[ ~&amp;2, which has ~
               not had its~/s ~&amp;2, which have not had their~] guards ~
               verified.  ~]~#3~[~/~#1~[For the book ~x0, its~/Moreover, this ~
               book&#39;s~] included sub-books ~#4~[~/and/or its certification ~
               world ~]define function~#5~[ ~&amp;5, which has not had its~/s ~
               ~&amp;5, which have not had their~] guards verified.  ~]See :DOC ~
               guards."</span>
      full-book-string
      (if new-bad-fns
        <span class="number">1</span>
        <span class="number">0</span>)
      new-bad-fns
      (if extra-bad-fns
        <span class="number">1</span>
        <span class="number">0</span>)
      (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> k <span class="number">0</span>)
        <span class="number">0</span>
        <span class="number">1</span>)
      extra-bad-fns)))</pre>
  </div>

<div class="form-block function" id="def-chk-certify-book-step-3" data-defines="CHK-CERTIFY-BOOK-STEP-3" data-references="VALUE,STRIP-CDDRS,INCLUDE-BOOK-ALIST-SUBSETP-FAILURE-WITNESSES,QUOTE,T,SOFT,ER,SPONTANEOUS-DECERTIFICATIONP,FILES,LET,INCLUDE-BOOK-ALIST-SUBSETP,NOT,COND,STATE,CTX,POST-ALIST1,POST-ALIST2,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="CHK-CERTIFY-BOOK-STEP-3" data-part-args="STATE,CTX,POST-ALIST1,POST-ALIST2" data-part-body="VALUE,STRIP-CDDRS,INCLUDE-BOOK-ALIST-SUBSETP-FAILURE-WITNESSES,QUOTE,T,CTX,SOFT,ER,SPONTANEOUS-DECERTIFICATIONP,FILES,LET,POST-ALIST1,POST-ALIST2,INCLUDE-BOOK-ALIST-SUBSETP,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-CERTIFY-BOOK-STEP-3">chk-certify-book-step-3</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-certify-book-step-3" data-sym="CHK-CERTIFY-BOOK-STEP-3" title="(defun chk-certify-book-step-3 (post-alist2 post-alist1 ctx state)
  (cond
   ((not (include-book-alist-subsetp post-alist2 post-alist1))
    (let ((files (spontaneous-decertificationp post-alist2 post-alist1)))
      (cond
...">chk-certify-book-step-3</a>
  (post-alist2 post-alist1 ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-include-book-alist-subsetp" data-sym="INCLUDE-BOOK-ALIST-SUBSETP" title="(defun include-book-alist-subsetp (alist1 alist2)
  (subsetp-equal (strip-cddrs alist1) (strip-cddrs alist2)))">include-book-alist-subsetp</a> post-alist2 post-alist1)) (let ((files (<a class="sym-link local-def" href="#def-spontaneous-decertificationp" data-sym="SPONTANEOUS-DECERTIFICATIONP" title="(defun spontaneous-decertificationp (alist1 alist2)
  (spontaneous-decertificationp1 alist1 (strip-cddrs alist2) nil))">spontaneous-decertificationp</a> post-alist2 post-alist1)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (files (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"During Step 3, we loaded the uncertified ~#0~[book ~&amp;0.  This ~
             book was certified when we looked at it~/books ~&amp;0. These books ~
             were certified when we looked at them~] in Step 2!  The most ~
             likely explanation is that some concurrent job, possibly by ~
             another user of your file system, is currently recertifying ~
             ~#0~[this book~/these books~] (or subbooks of ~#0~[it~/them~]).  ~
             That hypothetical job might have deleted the certificate files ~
             of the books in question, rendering ~#0~[this one~/these~] ~
             uncertified.  If this explanation seems likely, we recommend ~
             that you identify the other job and wait until it has ~
             successfully completed."</span>
              files))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"During Step 3, we loaded different books than were loaded by ~
             Step 2!  Sometimes this happens when the meaning of ``:dir ~
             :system&#39;&#39; for include-book has changed, usually because some ~
             included books were previously certified with an ACL2 image ~
             whose filename differs from that of the current ACL2 image.  ~
             Here are the tuples produced by Step 3 of the form ~X04 whose ~
             CDDRs are not in the list of tuples produced by Step ~
             2:~|~%~X14~|~%Perhaps some other user of your file system was ~
             editing the books during our Step 3? You might think that some ~
             other job is recertifying the books (or subbooks) and has ~
             deleted the certificate files, rendering uncertified some of the ~
             books needed here.  But more has happened!  Some file has ~
             changed (as indicated above)!~%~%DETAILS.  Here is the ~
             include-book-alist as of the end of Step 2:~%~X24.~|~%And here ~
             is the alist as of the end of Step 3:~%~X34.~|~%Frequently, the ~
             former has more entries than the latter because the former ~
             includes LOCAL books. So compare corresponding entries, focusing ~
             on those in the latter.  Each entry is of the form (name1 name2 ~
             name3 alist . book-hash). Name1 is the full name, name2 is the ~
             name as written in an include-book event, and name3 is the ~
             ``familiar&#39;&#39; name of the file. The alist indicates the presence ~
             or absence of problematic forms in the file, such as DEFAXIOM ~
             events.  For example, (:AXIOMSP . T) means there were defaxiom ~
             events; (:AXIOMSP . NIL) -- which actually prints as (:AXIOMSP) ~
             -- means there were no defaxiom events. Finally, book-hash is ~
             either an integer checksum based on the contents of the file at ~
             the time it was certified, an alist indicating the size and ~
             write-date of the book, or nil to indicate that the file is not ~
             certified.  Note that if the book-hash is nil, the entry prints ~
             as (name1 name2 name3 alist).  Go figure."</span>
              '(<span class="keyword">:full-book-name</span> <span class="keyword">:user-book-name</span> <span class="keyword">:familiar-name</span> <span class="keyword">:cert-annotations</span> . <span class="keyword">:book-hash</span>)
              (<a class="sym-link local-def" href="#def-include-book-alist-subsetp-failure-witnesses" data-sym="INCLUDE-BOOK-ALIST-SUBSETP-FAILURE-WITNESSES" title="(defun include-book-alist-subsetp-failure-witnesses
       (alist1 strip-cddrs-alist2 acc)
  (cond ((endp alist1) acc)
        (t
         (include-book-alist-subsetp-failure-witnesses (cdr alist1)
...">include-book-alist-subsetp-failure-witnesses</a> post-alist2
                (<a class="sym-link system" href="axioms.html#def-strip-cddrs" data-sym="STRIP-CDDRS">strip-cddrs</a> post-alist1)
                nil)
              post-alist1
              post-alist2
              nil)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-print-certify-book-step-4" data-defines="PRINT-CERTIFY-BOOK-STEP-4" data-references="PROOFS-CO,CONVERT-BOOK-STRING-TO-CERT,CONS,LIST,FMS,EVENT,IO?,STATE,CERT-OP,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="PRINT-CERTIFY-BOOK-STEP-4" data-part-args="STATE,CERT-OP,FULL-BOOK-STRING" data-part-body="PROOFS-CO,CONVERT-BOOK-STRING-TO-CERT,CONS,LIST,FMS,CERT-OP,FULL-BOOK-STRING,STATE,EVENT,IO?" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-CERTIFY-BOOK-STEP-4">print-certify-book-step-4</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-certify-book-step-4" data-sym="PRINT-CERTIFY-BOOK-STEP-4" title="(defun print-certify-book-step-4 (full-book-string cert-op state)
  (io? event nil state (full-book-string cert-op)
       (fms &quot;* Step 4:  Write the certificate for ~x0 in ~x1.~%&quot;
            (list (cons #\0 full-book-string)
                  (cons #\1
...">print-certify-book-step-4</a>
  (full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state)
  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
    nil
    state
    (full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>)
    (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"* Step 4:  Write the certificate for ~x0 in ~x1.~%"</span>
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 full-book-string)
        (cons #\1
          (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>)))
      (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
      state
      nil)))</pre>
  </div>

<div class="form-block function" id="def-print-certify-book-step-5" data-defines="PRINT-CERTIFY-BOOK-STEP-5" data-references="PROOFS-CO,CONS,LIST,FMS,EVENT,IO?,STATE,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="PRINT-CERTIFY-BOOK-STEP-5" data-part-args="STATE,FULL-BOOK-STRING" data-part-body="PROOFS-CO,CONS,LIST,FMS,FULL-BOOK-STRING,STATE,EVENT,IO?" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-CERTIFY-BOOK-STEP-5">print-certify-book-step-5</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-certify-book-step-5" data-sym="PRINT-CERTIFY-BOOK-STEP-5" title="(defun print-certify-book-step-5 (full-book-string state)
  (io? event nil state (full-book-string)
       (fms &quot;* Step 5:  Compile the functions defined in ~x0.~%&quot;
            (list (cons #\0 full-book-string)) (proofs-co state) state nil)))">print-certify-book-step-5</a>
  (full-book-string state)
  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
    nil
    state
    (full-book-string)
    (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"* Step 5:  Compile the functions defined in ~x0.~%"</span>
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 full-book-string))
      (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
      state
      nil)))</pre>
  </div>

<div class="form-block function" id="def-hcomp-build-from-state" data-defines="HCOMP-BUILD-FROM-STATE" data-references="VALUE,IGNORE,DECLARE,STATE,CLTL-COMMAND-STACK,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="HCOMP-BUILD-FROM-STATE" data-part-args="STATE,CLTL-COMMAND-STACK" data-part-declare="CLTL-COMMAND-STACK,IGNORE,DECLARE" data-part-body="VALUE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-BUILD-FROM-STATE">hcomp-build-from-state</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-build-from-state" data-sym="HCOMP-BUILD-FROM-STATE" title="(defun hcomp-build-from-state (cltl-command-stack state)
  (declare (ignore cltl-command-stack))
  (value nil))">hcomp-build-from-state</a>
  (cltl-command-stack state)
  (declare (ignore cltl-command-stack))
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))</pre>
  </div>

<div class="form-block other" id="form-358" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> acl2x-expansion-alist (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>)</pre>
  </div>

<div class="form-block function" id="def-hons-copy-with-state" data-defines="HONS-COPY-WITH-STATE" data-references="HONS-COPY,IGNORE,STATE-P,XARGS,DECLARE,STATE,X,DEFUN" data-part-name="HONS-COPY-WITH-STATE" data-part-args="STATE,X" data-part-declare="IGNORE,STATE,STATE-P,XARGS,DECLARE" data-part-body="X,HONS-COPY" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HONS-COPY-WITH-STATE">hons-copy-with-state</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hons-copy-with-state" data-sym="HONS-COPY-WITH-STATE" title="(defun hons-copy-with-state (x state)
  (declare (xargs :guard (state-p state)))
  (declare (ignore state))
  (hons-copy x))">hons-copy-with-state</a>
  (x state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state)))
  (declare (ignore state))
  (hons-copy x))</pre>
  </div>

<div class="form-block function" id="def-identity-with-state" data-defines="IDENTITY-WITH-STATE" data-references="IGNORE,STATE-P,XARGS,DECLARE,STATE,X,DEFUN" data-part-name="IDENTITY-WITH-STATE" data-part-args="STATE,X" data-part-declare="IGNORE,STATE,STATE-P,XARGS,DECLARE" data-part-body="X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IDENTITY-WITH-STATE">identity-with-state</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-identity-with-state" data-sym="IDENTITY-WITH-STATE" title="(defun identity-with-state (x state)
  (declare (xargs :guard (state-p state)))
  (declare (ignore state))
  x)">identity-with-state</a>
  (x state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state)))
  (declare (ignore state))
  x)</pre>
  </div>

<div class="form-block other" id="form-361" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> (acl2x-expansion-alist <a class="sym-link local-def" href="#def-identity-with-state" data-sym="IDENTITY-WITH-STATE" title="(defun identity-with-state (x state)
  (declare (xargs :guard (state-p state)))
  (declare (ignore state))
  x)">identity-with-state</a>)
  <span class="keyword">:skip-checks</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-write-acl2x-file" data-defines="WRITE-ACL2X-FILE" data-references="VALUE,CLOSE-OUTPUT-CHANNEL,ACL2X-EXPANSION-ALIST,PRINT-OBJECT$,PROOFS-CO,CONS,LIST,FMS,EVENT,IO?,PPROGN,PRINT-READABLY,PRINT-CIRCLE-FILES,QUOTE,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,T,SOFT,ER,NULL,COND,CH,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,STATE,CTX,ACL2X-FILE,EXPANSION-ALIST,DEFUN" data-used-by="CERTIFY-BOOK-STEP-2" data-part-name="WRITE-ACL2X-FILE" data-part-args="STATE,CTX,ACL2X-FILE,EXPANSION-ALIST" data-part-body="VALUE,CLOSE-OUTPUT-CHANNEL,EXPANSION-ALIST,ACL2X-EXPANSION-ALIST,PRINT-OBJECT$,PROOFS-CO,CONS,LIST,FMS,EVENT,IO?,PPROGN,PRINT-READABLY,STATE,PRINT-CIRCLE-FILES,QUOTE,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,T,CTX,SOFT,ER,NULL,COND,ACL2X-FILE,CH,WITH-OUTPUT-OBJECT-CHANNEL-SHARING" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRITE-ACL2X-FILE">write-acl2x-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-write-acl2x-file" data-sym="WRITE-ACL2X-FILE" title="(defun write-acl2x-file (expansion-alist acl2x-file ctx state)
  (with-output-object-channel-sharing ch acl2x-file
                                      (cond
                                       ((null ch)
                                        (er soft ctx
...">write-acl2x-file</a>
  (expansion-alist acl2x-file ctx state)
  (<a class="sym-link local-def" href="#def-with-output-object-channel-sharing" data-sym="WITH-OUTPUT-OBJECT-CHANNEL-SHARING" title="(defmacro with-output-object-channel-sharing
          (chan filename body &amp;optional chan0)
  (declare (xargs :guard (and (symbolp chan) (symbolp chan0))))
  `(mv-let (,chan state)
           (if ,chan0
...">with-output-object-channel-sharing</a> ch
    acl2x-file
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"We cannot open file ~x0 for output."</span>
          acl2x-file))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-with-print-defaults" data-sym="WITH-PRINT-DEFAULTS">with-print-defaults</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>) (print-circle (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-circle-files state))
            (print-readably <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
              nil
              state
              (acl2x-file)
              (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"* Step 3: Writing file ~x0 and exiting certify-book.~|"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 acl2x-file))
                (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                state
                nil))
            (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (acl2x-expansion-alist expansion-alist state)
              ch
              state)
            (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> ch state)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> acl2x-file)))))))</pre>
  </div>

<div class="form-block function" id="def-merge-into-expansion-alist1" data-defines="MERGE-INTO-EXPANSION-ALIST1" data-references="T,<,CAR,CONS,CDR,CAAR,EQL,REVAPPEND,ENDP,COND,LEN,+,XARGS,DECLARE,ACC,COMPUTED-EXPANSION-ALIST,ACL2X-EXPANSION-ALIST,DEFUN" data-used-by="MERGE-INTO-EXPANSION-ALIST" data-part-name="MERGE-INTO-EXPANSION-ALIST1" data-part-args="ACC,COMPUTED-EXPANSION-ALIST,ACL2X-EXPANSION-ALIST" data-part-declare="COMPUTED-EXPANSION-ALIST,ACL2X-EXPANSION-ALIST,LEN,+,XARGS,DECLARE" data-part-body="T,<,CAR,CONS,CDR,MERGE-INTO-EXPANSION-ALIST1,CAAR,EQL,COMPUTED-EXPANSION-ALIST,ACC,REVAPPEND,ACL2X-EXPANSION-ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MERGE-INTO-EXPANSION-ALIST1">merge-into-expansion-alist1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-merge-into-expansion-alist1" data-sym="MERGE-INTO-EXPANSION-ALIST1" title="(defun merge-into-expansion-alist1
       (acl2x-expansion-alist computed-expansion-alist acc)
  (declare
   (xargs :measure
    (+ (len acl2x-expansion-alist) (len computed-expansion-alist))))
...">merge-into-expansion-alist1</a>
  (acl2x-expansion-alist computed-expansion-alist acc)
  (declare (xargs <span class="keyword">:measure</span> (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> acl2x-expansion-alist)
        (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> computed-expansion-alist))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> acl2x-expansion-alist) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> acc computed-expansion-alist))
    ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> computed-expansion-alist) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> acc acl2x-expansion-alist))
    ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> acl2x-expansion-alist)
       (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> computed-expansion-alist)) (<a class="sym-link local-def" href="#def-merge-into-expansion-alist1" data-sym="MERGE-INTO-EXPANSION-ALIST1" title="(defun merge-into-expansion-alist1
       (acl2x-expansion-alist computed-expansion-alist acc)
  (declare
   (xargs :measure
    (+ (len acl2x-expansion-alist) (len computed-expansion-alist))))
...">merge-into-expansion-alist1</a> (cdr acl2x-expansion-alist)
        (cdr computed-expansion-alist)
        (cons (car computed-expansion-alist) acc)))
    ((&lt; (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> acl2x-expansion-alist)
       (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> computed-expansion-alist)) (<a class="sym-link local-def" href="#def-merge-into-expansion-alist1" data-sym="MERGE-INTO-EXPANSION-ALIST1" title="(defun merge-into-expansion-alist1
       (acl2x-expansion-alist computed-expansion-alist acc)
  (declare
   (xargs :measure
    (+ (len acl2x-expansion-alist) (len computed-expansion-alist))))
...">merge-into-expansion-alist1</a> (cdr acl2x-expansion-alist)
        computed-expansion-alist
        (cons (car acl2x-expansion-alist) acc)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-merge-into-expansion-alist1" data-sym="MERGE-INTO-EXPANSION-ALIST1" title="(defun merge-into-expansion-alist1
       (acl2x-expansion-alist computed-expansion-alist acc)
  (declare
   (xargs :measure
    (+ (len acl2x-expansion-alist) (len computed-expansion-alist))))
...">merge-into-expansion-alist1</a> acl2x-expansion-alist
        (cdr computed-expansion-alist)
        (cons (car computed-expansion-alist) acc)))))</pre>
  </div>

<div class="form-block function" id="def-acl2x-alistp-domains-subsetp" data-defines="ACL2X-ALISTP-DOMAINS-SUBSETP" data-references="<,CDR,CAAR,EQL,ENDP,T,NULL,COND,Y,X,DEFUN" data-used-by="MERGE-INTO-EXPANSION-ALIST" data-part-name="ACL2X-ALISTP-DOMAINS-SUBSETP" data-part-args="Y,X" data-part-body="<,CDR,ACL2X-ALISTP-DOMAINS-SUBSETP,CAAR,EQL,Y,ENDP,T,X,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2X-ALISTP-DOMAINS-SUBSETP">acl2x-alistp-domains-subsetp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-acl2x-alistp-domains-subsetp" data-sym="ACL2X-ALISTP-DOMAINS-SUBSETP" title="(defun acl2x-alistp-domains-subsetp (x y)
  (cond ((null x) t) ((endp y) nil)
        ((eql (caar x) (caar y))
         (acl2x-alistp-domains-subsetp (cdr x) (cdr y)))
        ((&lt; (caar x) (caar y)) nil)">acl2x-alistp-domains-subsetp</a>
  (x y)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> y) nil)
    ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x) (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> y)) (<a class="sym-link local-def" href="#def-acl2x-alistp-domains-subsetp" data-sym="ACL2X-ALISTP-DOMAINS-SUBSETP" title="(defun acl2x-alistp-domains-subsetp (x y)
  (cond ((null x) t) ((endp y) nil)
        ((eql (caar x) (caar y))
         (acl2x-alistp-domains-subsetp (cdr x) (cdr y)))
        ((&lt; (caar x) (caar y)) nil)">acl2x-alistp-domains-subsetp</a> (cdr x) (cdr y)))
    ((&lt; (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x) (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> y)) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-acl2x-alistp-domains-subsetp" data-sym="ACL2X-ALISTP-DOMAINS-SUBSETP" title="(defun acl2x-alistp-domains-subsetp (x y)
  (cond ((null x) t) ((endp y) nil)
        ((eql (caar x) (caar y))
         (acl2x-alistp-domains-subsetp (cdr x) (cdr y)))
        ((&lt; (caar x) (caar y)) nil)">acl2x-alistp-domains-subsetp</a> x (cdr y)))))</pre>
  </div>

<div class="form-block function" id="def-merge-into-expansion-alist" data-defines="MERGE-INTO-EXPANSION-ALIST" data-references="MERGE-INTO-EXPANSION-ALIST1,T,ACL2X-ALISTP-DOMAINS-SUBSETP,ATOM,COND,COMPUTED-EXPANSION-ALIST,ACL2X-EXPANSION-ALIST,DEFUN" data-used-by="CERTIFY-BOOK-STEP-2,CERTIFY-BOOK-EXPANSION-ALIST0" data-part-name="MERGE-INTO-EXPANSION-ALIST" data-part-args="COMPUTED-EXPANSION-ALIST,ACL2X-EXPANSION-ALIST" data-part-body="MERGE-INTO-EXPANSION-ALIST1,T,ACL2X-ALISTP-DOMAINS-SUBSETP,ACL2X-EXPANSION-ALIST,COMPUTED-EXPANSION-ALIST,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MERGE-INTO-EXPANSION-ALIST">merge-into-expansion-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-merge-into-expansion-alist" data-sym="MERGE-INTO-EXPANSION-ALIST" title="(defun merge-into-expansion-alist
       (acl2x-expansion-alist computed-expansion-alist)
  (cond ((atom computed-expansion-alist) acl2x-expansion-alist)
        ((acl2x-alistp-domains-subsetp acl2x-expansion-alist
                                       computed-expansion-alist)
...">merge-into-expansion-alist</a>
  (acl2x-expansion-alist computed-expansion-alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> computed-expansion-alist) acl2x-expansion-alist)
    ((<a class="sym-link local-def" href="#def-acl2x-alistp-domains-subsetp" data-sym="ACL2X-ALISTP-DOMAINS-SUBSETP" title="(defun acl2x-alistp-domains-subsetp (x y)
  (cond ((null x) t) ((endp y) nil)
        ((eql (caar x) (caar y))
         (acl2x-alistp-domains-subsetp (cdr x) (cdr y)))
        ((&lt; (caar x) (caar y)) nil)">acl2x-alistp-domains-subsetp</a> acl2x-expansion-alist
       computed-expansion-alist) computed-expansion-alist)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-merge-into-expansion-alist1" data-sym="MERGE-INTO-EXPANSION-ALIST1" title="(defun merge-into-expansion-alist1
       (acl2x-expansion-alist computed-expansion-alist acc)
  (declare
   (xargs :measure
    (+ (len acl2x-expansion-alist) (len computed-expansion-alist))))
...">merge-into-expansion-alist1</a> acl2x-expansion-alist
        computed-expansion-alist
        nil))))</pre>
  </div>

<div class="form-block function" id="def-restrict-expansion-alist" data-defines="RESTRICT-EXPANSION-ALIST" data-references="T,CDR,CAAR,<,ENDP,COND,EXPANSION-ALIST,INDEX,DEFUN" data-used-by="CERTIFY-BOOK-STEP-2" data-part-name="RESTRICT-EXPANSION-ALIST" data-part-args="EXPANSION-ALIST,INDEX" data-part-body="T,CDR,RESTRICT-EXPANSION-ALIST,INDEX,CAAR,<,EXPANSION-ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RESTRICT-EXPANSION-ALIST">restrict-expansion-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-restrict-expansion-alist" data-sym="RESTRICT-EXPANSION-ALIST" title="(defun restrict-expansion-alist (index expansion-alist)
  (cond ((endp expansion-alist) nil)
        ((&lt; (caar expansion-alist) index)
         (restrict-expansion-alist index (cdr expansion-alist)))
        (t expansion-alist)))">restrict-expansion-alist</a>
  (index expansion-alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> expansion-alist) nil)
    ((&lt; (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> expansion-alist) index) (<a class="sym-link local-def" href="#def-restrict-expansion-alist" data-sym="RESTRICT-EXPANSION-ALIST" title="(defun restrict-expansion-alist (index expansion-alist)
  (cond ((endp expansion-alist) nil)
        ((&lt; (caar expansion-alist) index)
         (restrict-expansion-alist index (cdr expansion-alist)))
        (t expansion-alist)))">restrict-expansion-alist</a> index (cdr expansion-alist)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> expansion-alist)))</pre>
  </div>

<div class="form-block function" id="def-elide-locals-from-expansion-alist" data-defines="ELIDE-LOCALS-FROM-EXPANSION-ALIST" data-references="CDAR,ELIDE-LOCALS,CAAR,CONS,CDR,T,REVERSE,ENDP,COND,ACC,ALIST,DEFUN" data-used-by="CERTIFY-BOOK-STEP-2" data-part-name="ELIDE-LOCALS-FROM-EXPANSION-ALIST" data-part-args="ACC,ALIST" data-part-body="CDAR,ELIDE-LOCALS,CAAR,CONS,CDR,ELIDE-LOCALS-FROM-EXPANSION-ALIST,T,ACC,REVERSE,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ELIDE-LOCALS-FROM-EXPANSION-ALIST">elide-locals-from-expansion-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-elide-locals-from-expansion-alist" data-sym="ELIDE-LOCALS-FROM-EXPANSION-ALIST" title="(defun elide-locals-from-expansion-alist (alist acc)
  (cond ((endp alist) (reverse acc))
        (t
         (elide-locals-from-expansion-alist (cdr alist)
                                            (cons
...">elide-locals-from-expansion-alist</a>
  (alist acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-elide-locals-from-expansion-alist" data-sym="ELIDE-LOCALS-FROM-EXPANSION-ALIST" title="(defun elide-locals-from-expansion-alist (alist acc)
  (cond ((endp alist) (reverse acc))
        (t
         (elide-locals-from-expansion-alist (cdr alist)
                                            (cons
...">elide-locals-from-expansion-alist</a> (cdr alist)
        (cons (cons (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) (<a class="sym-link local-def" href="#def-elide-locals" data-sym="ELIDE-LOCALS" title="(defmacro elide-locals (form)
  `(mv-let (changed-p x) (elide-locals-rec ,form) (declare (ignore changed-p))
           x))">elide-locals</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist))) acc)))))</pre>
  </div>

<div class="form-block function" id="def-write-port-file" data-defines="WRITE-PORT-FILE" data-references="VALUE,CLOSE-OUTPUT-CHANNEL,PRINT-OBJECTS,IN-PACKAGE,PRINT-OBJECT$,PRINT-READABLY,PRINT-CIRCLE-FILES,QUOTE,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,PROOFS-CO,CONS,LIST,FMS!,EVENT,IO?,PPROGN,T,SOFT,ER,NULL,COND,CH,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,CONVERT-BOOK-STRING-TO-PORT,PORT-FILE,LET,STATE,CTX,CMDS,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="WRITE-PORT-FILE" data-part-args="STATE,CTX,CMDS,FULL-BOOK-STRING" data-part-body="VALUE,CLOSE-OUTPUT-CHANNEL,CMDS,PRINT-OBJECTS,IN-PACKAGE,PRINT-OBJECT$,PRINT-READABLY,PRINT-CIRCLE-FILES,QUOTE,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,PROOFS-CO,CONS,LIST,FMS!,STATE,EVENT,IO?,PPROGN,T,CTX,SOFT,ER,NULL,COND,CH,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,FULL-BOOK-STRING,CONVERT-BOOK-STRING-TO-PORT,PORT-FILE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRITE-PORT-FILE">write-port-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-write-port-file" data-sym="WRITE-PORT-FILE" title="(defun write-port-file (full-book-string cmds ctx state)
  (let ((port-file (convert-book-string-to-port full-book-string)))
    (with-output-object-channel-sharing ch port-file
                                        (cond
                                         ((null ch)
...">write-port-file</a>
  (full-book-string cmds ctx state)
  (let ((port-file (<a class="sym-link local-def" href="#def-convert-book-string-to-port" data-sym="CONVERT-BOOK-STRING-TO-PORT" title="(defun convert-book-string-to-port (x)
  (concatenate &#39;string (remove-lisp-suffix x nil) &quot;port&quot;))">convert-book-string-to-port</a> full-book-string)))
    (<a class="sym-link local-def" href="#def-with-output-object-channel-sharing" data-sym="WITH-OUTPUT-OBJECT-CHANNEL-SHARING" title="(defmacro with-output-object-channel-sharing
          (chan filename body &amp;optional chan0)
  (declare (xargs :guard (and (symbolp chan) (symbolp chan0))))
  `(mv-let (,chan state)
           (if ,chan0
...">with-output-object-channel-sharing</a> ch
      port-file
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"We cannot open file ~x0 for output."</span>
            port-file))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
              nil
              state
              (port-file)
              (<a class="sym-link system" href="basis-a.html#def-fms_21" data-sym="FMS!">fms!</a> <span class="string">"Note: Writing .port file, ~s0.~|"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 port-file))
                (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                state
                nil))
            (<a class="sym-link system" href="axioms.html#def-with-print-defaults" data-sym="WITH-PRINT-DEFAULTS">with-print-defaults</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>) (print-circle (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-circle-files state))
                (print-readably <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> '(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>) ch state)
                (<a class="sym-link local-def" href="#def-print-objects" data-sym="PRINT-OBJECTS" title="(defun print-objects (lst ch state)
  (cond ((null lst) state)
        (t
         (pprogn (print-object$ (car lst) ch state)
                 (print-objects (cdr lst) ch state)))))">print-objects</a> cmds ch state)
                (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> ch state)
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> port-file)))))))))</pre>
  </div>

<div class="form-block macro" id="def-save-parallelism-settings" data-defines="SAVE-PARALLELISM-SETTINGS" data-references="FORM,DEFMACRO" data-used-by="CERTIFY-BOOK-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAVE-PARALLELISM-SETTINGS">save-parallelism-settings</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-save-parallelism-settings" data-sym="SAVE-PARALLELISM-SETTINGS" title="(defmacro save-parallelism-settings (form) form)">save-parallelism-settings</a> (form) form)</pre>
  </div>

<div class="form-block function" id="def-include-book-alist-equal-modulo-local" data-defines="INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL" data-references="T,CDR,CADR,EQUAL,LOCAL,QUOTE,EQ,CAR,CONSP,AND,ATOM,COND,NEW-POST-ALIST,OLD-POST-ALIST,DEFUN" data-used-by="CERTIFY-BOOK-FINISH-CONVERT" data-part-name="INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL" data-part-args="NEW-POST-ALIST,OLD-POST-ALIST" data-part-body="T,CDR,INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL,CADR,EQUAL,LOCAL,QUOTE,EQ,CAR,CONSP,AND,NEW-POST-ALIST,OLD-POST-ALIST,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL">include-book-alist-equal-modulo-local</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-alist-equal-modulo-local" data-sym="INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL" title="(defun include-book-alist-equal-modulo-local (old-post-alist new-post-alist)
  (cond ((atom old-post-alist) (atom new-post-alist))
        ((atom new-post-alist) nil)
        ((and (consp (car old-post-alist))
              (eq (car (car old-post-alist)) &#39;local))
...">include-book-alist-equal-modulo-local</a>
  (old-post-alist new-post-alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> old-post-alist) (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> new-post-alist))
    ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> new-post-alist) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car old-post-alist))
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car old-post-alist)) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>)) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car old-post-alist)) (car new-post-alist))
        (<a class="sym-link local-def" href="#def-include-book-alist-equal-modulo-local" data-sym="INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL" title="(defun include-book-alist-equal-modulo-local (old-post-alist new-post-alist)
  (cond ((atom old-post-alist) (atom new-post-alist))
        ((atom new-post-alist) nil)
        ((and (consp (car old-post-alist))
              (eq (car (car old-post-alist)) &#39;local))
...">include-book-alist-equal-modulo-local</a> (cdr old-post-alist)
          (cdr new-post-alist))))
    ((equal (car old-post-alist) (car new-post-alist)) (<a class="sym-link local-def" href="#def-include-book-alist-equal-modulo-local" data-sym="INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL" title="(defun include-book-alist-equal-modulo-local (old-post-alist new-post-alist)
  (cond ((atom old-post-alist) (atom new-post-alist))
        ((atom new-post-alist) nil)
        ((and (consp (car old-post-alist))
              (eq (car (car old-post-alist)) &#39;local))
...">include-book-alist-equal-modulo-local</a> (cdr old-post-alist)
        (cdr new-post-alist)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-copy-object-channel-until-marker" data-defines="COPY-OBJECT-CHANNEL-UNTIL-MARKER" data-references="PRINT-OBJECT$,PPROGN,T,EQ,OR,COND,READ-OBJECT,OBJ,EOFP,MV-LET,STATE,CH-TO,CH-FROM,MARKER,DEFUN" data-used-by="COPY-PCERT0-TO-PCERT1" data-part-name="COPY-OBJECT-CHANNEL-UNTIL-MARKER" data-part-args="STATE,CH-TO,CH-FROM,MARKER" data-part-body="COPY-OBJECT-CHANNEL-UNTIL-MARKER,CH-TO,PRINT-OBJECT$,PPROGN,T,MARKER,EQ,OR,COND,CH-FROM,READ-OBJECT,STATE,OBJ,EOFP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COPY-OBJECT-CHANNEL-UNTIL-MARKER">copy-object-channel-until-marker</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-copy-object-channel-until-marker" data-sym="COPY-OBJECT-CHANNEL-UNTIL-MARKER" title="(defun copy-object-channel-until-marker (marker ch-from ch-to state)
  (mv-let (eofp obj state) (read-object ch-from state)
          (cond ((or eofp (eq obj marker)) state)
                (t
                 (pprogn (print-object$ obj ch-to state)
...">copy-object-channel-until-marker</a>
  (marker ch-from ch-to state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp obj state)
    (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> ch-from state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> eofp (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> obj marker)) state)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> obj ch-to state)
          (<a class="sym-link local-def" href="#def-copy-object-channel-until-marker" data-sym="COPY-OBJECT-CHANNEL-UNTIL-MARKER" title="(defun copy-object-channel-until-marker (marker ch-from ch-to state)
  (mv-let (eofp obj state) (read-object ch-from state)
          (cond ((or eofp (eq obj marker)) state)
                (t
                 (pprogn (print-object$ obj ch-to state)
...">copy-object-channel-until-marker</a> marker
            ch-from
            ch-to
            state))))))</pre>
  </div>

<div class="form-block function" id="def-copy-pcert0-to-pcert1" data-defines="COPY-PCERT0-TO-PCERT1" data-references="VALUE,CLOSE-OUTPUT-CHANNEL,COPY-OBJECT-CHANNEL-UNTIL-MARKER,CLOSE-INPUT-CHANNEL,PPROGN,PRINT-READABLY,PRINT-CIRCLE-FILES,QUOTE,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,CH-TO,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,T,SOFT,ER,NULL,COND,OPEN-INPUT-CHANNEL,CH-FROM,MV-LET,STATE,CTX,TO,FROM,DEFUN" data-used-by="CERTIFY-BOOK-FINISH-CONVERT" data-part-name="COPY-PCERT0-TO-PCERT1" data-part-args="STATE,CTX,TO,FROM" data-part-body="VALUE,CLOSE-OUTPUT-CHANNEL,COPY-OBJECT-CHANNEL-UNTIL-MARKER,CLOSE-INPUT-CHANNEL,PPROGN,PRINT-READABLY,PRINT-CIRCLE-FILES,QUOTE,F-GET-GLOBAL,PRINT-CIRCLE,CURRENT-PACKAGE,WITH-PRINT-DEFAULTS,CH-TO,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,T,TO,CTX,SOFT,ER,NULL,COND,FROM,OPEN-INPUT-CHANNEL,STATE,CH-FROM,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COPY-PCERT0-TO-PCERT1">copy-pcert0-to-pcert1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-copy-pcert0-to-pcert1" data-sym="COPY-PCERT0-TO-PCERT1" title="(defun copy-pcert0-to-pcert1 (from to ctx state)
  (mv-let (ch-from state) (open-input-channel from :object state)
          (cond
           ((null ch-from)
            (er soft ctx
...">copy-pcert0-to-pcert1</a>
  (from to ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ch-from state)
    (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> from <span class="keyword">:object</span> state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch-from) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"Unable to open file ~x0 for input (to copy to file ~x1)."</span>
          from
          to))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-with-output-object-channel-sharing" data-sym="WITH-OUTPUT-OBJECT-CHANNEL-SHARING" title="(defmacro with-output-object-channel-sharing
          (chan filename body &amp;optional chan0)
  (declare (xargs :guard (and (symbolp chan) (symbolp chan0))))
  `(mv-let (,chan state)
           (if ,chan0
...">with-output-object-channel-sharing</a> ch-to
          to
          (<a class="sym-link system" href="axioms.html#def-with-print-defaults" data-sym="WITH-PRINT-DEFAULTS">with-print-defaults</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>) (print-circle (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-circle-files state))
              (print-readably <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ch-to) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> ch-from state)
                  (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"Unable to open file ~x0 for output (to copy ~
                                  into from file ~x1)."</span>
                    to
                    from)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-copy-object-channel-until-marker" data-sym="COPY-OBJECT-CHANNEL-UNTIL-MARKER" title="(defun copy-object-channel-until-marker (marker ch-from ch-to state)
  (mv-let (eofp obj state) (read-object ch-from state)
          (cond ((or eofp (eq obj marker)) state)
                (t
                 (pprogn (print-object$ obj ch-to state)
...">copy-object-channel-until-marker</a> <span class="keyword">:pcert-info</span> ch-from
                    ch-to
                    state)
                  (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> ch-from state)
                  (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> ch-to state)
                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))))))))))</pre>
  </div>

<div class="form-block function" id="def-touch_3F" data-defines="TOUCH?" data-references="SOFT,ER,ZEROP,SYS-CALL-STATUS,STATUS,PROG2$,<=,AND,FILENAME-DATE,FILE-WRITE-DATE$,OLD-FILENAME-DATE,MV-LET,T,LIST,SYS-CALL,VALUE,NULL,COND,STATE,CTX,OLD-FILENAME,FILENAME,DEFUN" data-used-by="CERTIFY-BOOK-FINISH-COMPLETE,CERTIFY-BOOK-FINISH-CONVERT" data-part-name="TOUCH?" data-part-args="STATE,CTX,OLD-FILENAME,FILENAME" data-part-body="CTX,SOFT,ER,ZEROP,SYS-CALL-STATUS,STATUS,PROG2$,<=,AND,FILENAME-DATE,FILE-WRITE-DATE$,STATE,OLD-FILENAME-DATE,MV-LET,T,FILENAME,LIST,SYS-CALL,VALUE,OLD-FILENAME,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOUCH?">touch?</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-touch_3F" data-sym="TOUCH?" title="(defun touch? (filename old-filename ctx state)
  (cond ((null old-filename) (value (sys-call &quot;touch&quot; (list filename))))
        (t
         (mv-let (old-filename-date state)
                 (file-write-date$ old-filename state)
...">touch?</a>
  (filename old-filename ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> old-filename) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-sys-call" data-sym="SYS-CALL">sys-call</a> <span class="string">"touch"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> filename))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (old-filename-date state)
        (<a class="sym-link system" href="axioms.html#def-file-write-date_24" data-sym="FILE-WRITE-DATE$">file-write-date$</a> old-filename state)
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (filename-date state)
          (<a class="sym-link system" href="axioms.html#def-file-write-date_24" data-sym="FILE-WRITE-DATE$">file-write-date$</a> filename state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> old-filename-date
               filename-date
               (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> old-filename-date filename-date)) (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-sys-call" data-sym="SYS-CALL">sys-call</a> <span class="string">"touch"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> filename))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (status state)
                  (<a class="sym-link system" href="axioms.html#def-sys-call-status" data-sym="SYS-CALL-STATUS">sys-call-status</a> state)
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((zerop status) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                        ctx
                        <span class="string">"Obtained non-zero exit status ~x0 ~
                                         when attempting to touch file ~x0 ."</span>
                        status
                        filename))))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))))</pre>
  </div>

<div class="form-block function" id="def-convert-book-string-to-compiled" data-defines="CONVERT-BOOK-STRING-TO-COMPILED" data-references="COMPILED-FILE-EXTENSION,F-GET-GLOBAL,REMOVE-LISP-SUFFIX,STRING,QUOTE,CONCATENATE,STATE,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-FINISH-COMPLETE,CERTIFY-BOOK-FINISH-CONVERT" data-part-name="CONVERT-BOOK-STRING-TO-COMPILED" data-part-args="STATE,FULL-BOOK-STRING" data-part-body="STATE,COMPILED-FILE-EXTENSION,F-GET-GLOBAL,FULL-BOOK-STRING,REMOVE-LISP-SUFFIX,STRING,QUOTE,CONCATENATE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONVERT-BOOK-STRING-TO-COMPILED">convert-book-string-to-compiled</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-convert-book-string-to-compiled" data-sym="CONVERT-BOOK-STRING-TO-COMPILED" title="(defun convert-book-string-to-compiled (full-book-string state)
  (concatenate &#39;string (remove-lisp-suffix full-book-string nil)
               (f-get-global &#39;compiled-file-extension state)))">convert-book-string-to-compiled</a>
  (full-book-string state)
  (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
    (<a class="sym-link system" href="history-management.html#def-remove-lisp-suffix" data-sym="REMOVE-LISP-SUFFIX">remove-lisp-suffix</a> full-book-string nil)
    (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiled-file-extension state)))</pre>
  </div>

<div class="form-block function" id="def-certify-book-finish-convert" data-defines="CERTIFY-BOOK-FINISH-CONVERT" data-references="SOFT,ER,T,VALUE,TOUCH?,COPY-PCERT0-TO-PCERT1,ER-PROGN,CONVERT-BOOK-STRING-TO-COMPILED,COMPILED-NAME,PCERT1-NAME,CONVERT-BOOK-STRING-TO-CERT,PCERT0-NAME,LET,INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL,COND,STATE,CTX,FULL-BOOK-STRING,OLD-POST-ALIST,NEW-POST-ALIST,DEFUN" data-used-by="CERTIFY-BOOK-CONVERT-PCERT" data-part-name="CERTIFY-BOOK-FINISH-CONVERT" data-part-args="STATE,CTX,FULL-BOOK-STRING,OLD-POST-ALIST,NEW-POST-ALIST" data-part-body="SOFT,ER,T,VALUE,TOUCH?,CTX,COPY-PCERT0-TO-PCERT1,ER-PROGN,STATE,CONVERT-BOOK-STRING-TO-COMPILED,COMPILED-NAME,PCERT1-NAME,FULL-BOOK-STRING,CONVERT-BOOK-STRING-TO-CERT,PCERT0-NAME,LET,NEW-POST-ALIST,OLD-POST-ALIST,INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-FINISH-CONVERT">certify-book-finish-convert</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-finish-convert" data-sym="CERTIFY-BOOK-FINISH-CONVERT" title="(defun certify-book-finish-convert
       (new-post-alist old-post-alist full-book-string ctx state)
  (cond
   ((include-book-alist-equal-modulo-local old-post-alist new-post-alist)
    (let ((pcert0-name
...">certify-book-finish-convert</a>
  (new-post-alist old-post-alist full-book-string ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-include-book-alist-equal-modulo-local" data-sym="INCLUDE-BOOK-ALIST-EQUAL-MODULO-LOCAL" title="(defun include-book-alist-equal-modulo-local (old-post-alist new-post-alist)
  (cond ((atom old-post-alist) (atom new-post-alist))
        ((atom new-post-alist) nil)
        ((and (consp (car old-post-alist))
              (eq (car (car old-post-alist)) &#39;local))
...">include-book-alist-equal-modulo-local</a> old-post-alist
       new-post-alist) (let ((pcert0-name (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <span class="keyword">:create-pcert</span>)) (pcert1-name (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string
              <span class="keyword">:convert-pcert</span>))
          (compiled-name (<a class="sym-link local-def" href="#def-convert-book-string-to-compiled" data-sym="CONVERT-BOOK-STRING-TO-COMPILED" title="(defun convert-book-string-to-compiled (full-book-string state)
  (concatenate &#39;string (remove-lisp-suffix full-book-string nil)
               (f-get-global &#39;compiled-file-extension state)))">convert-book-string-to-compiled</a> full-book-string state)))
        (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-copy-pcert0-to-pcert1" data-sym="COPY-PCERT0-TO-PCERT1" title="(defun copy-pcert0-to-pcert1 (from to ctx state)
  (mv-let (ch-from state) (open-input-channel from :object state)
          (cond
           ((null ch-from)
            (er soft ctx
...">copy-pcert0-to-pcert1</a> pcert0-name pcert1-name ctx state)
          (<a class="sym-link local-def" href="#def-touch_3F" data-sym="TOUCH?" title="(defun touch? (filename old-filename ctx state)
  (cond ((null old-filename) (value (sys-call &quot;touch&quot; (list filename))))
        (t
         (mv-let (old-filename-date state)
                 (file-write-date$ old-filename state)
...">touch?</a> compiled-name pcert0-name ctx state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> pcert1-name))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Two sequences of included books unexpectedly differ: one from ~
                the first pass of the Pcertify procedure, and one at the end ~
                of the Convert procedure.  Here is the include-book-alist as ~
                of the end of the first pass of the Pcertify ~
                procedure:~%~X02.~|~%And here is the include-book-alist at ~
                the end of Convert procedure:~%~X12."</span>
        old-post-alist
        new-post-alist
        nil))))</pre>
  </div>

<div class="form-block function" id="def-include-book-alist-uncertified-books" data-defines="INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS" data-references="CONS,<=,AND,CDR,CERT-DATE,FILE-WRITE-DATE$,BOOK-DATE,MV-LET,CONVERT-BOOK-STRING-TO-CERT,CERT-NAME,BOOK-NAME-TO-FILENAME,FULL-BOOK-STRING,CADR,LOCAL,QUOTE,EQ,IF,ENTRY,CAR,ENTRY0,LET*,T,VALUE,ENDP,COND,STATE,WRLD,CTX,ACC,ALIST,DEFUN" data-used-by="CERTIFY-BOOK-FINISH-COMPLETE" data-part-name="INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS" data-part-args="STATE,WRLD,CTX,ACC,ALIST" data-part-body="CONS,<=,AND,CDR,INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS,CERT-DATE,FILE-WRITE-DATE$,STATE,BOOK-DATE,MV-LET,CONVERT-BOOK-STRING-TO-CERT,CERT-NAME,CTX,WRLD,BOOK-NAME-TO-FILENAME,FULL-BOOK-STRING,CADR,LOCAL,QUOTE,EQ,IF,ENTRY,CAR,ENTRY0,LET*,T,ACC,VALUE,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS">include-book-alist-uncertified-books</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-alist-uncertified-books" data-sym="INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS" title="(defun include-book-alist-uncertified-books (alist acc ctx wrld state)
  (cond ((endp alist) (value acc))
        (t
         (let* ((entry0 (car alist))
                (entry
...">include-book-alist-uncertified-books</a>
  (alist acc ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> acc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((entry0 (car alist)) (entry (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car entry0) '<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>)
              (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> entry0)
              entry0))
          (full-book-string (<a class="sym-link system" href="basis-a.html#def-book-name-to-filename" data-sym="BOOK-NAME-TO-FILENAME">book-name-to-filename</a> (car entry) wrld ctx))
          (cert-name (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (book-date state)
          (<a class="sym-link system" href="axioms.html#def-file-write-date_24" data-sym="FILE-WRITE-DATE$">file-write-date$</a> full-book-string state)
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (cert-date state)
            (<a class="sym-link system" href="axioms.html#def-file-write-date_24" data-sym="FILE-WRITE-DATE$">file-write-date$</a> cert-name state)
            (<a class="sym-link local-def" href="#def-include-book-alist-uncertified-books" data-sym="INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS" title="(defun include-book-alist-uncertified-books (alist acc ctx wrld state)
  (cond ((endp alist) (value acc))
        (t
         (let* ((entry0 (car alist))
                (entry
...">include-book-alist-uncertified-books</a> (cdr alist)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> book-date cert-date (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> book-date cert-date)) acc)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons full-book-string acc)))
              ctx
              wrld
              state)))))))</pre>
  </div>

<div class="form-block function" id="def-count-forms-in-channel" data-defines="COUNT-FORMS-IN-CHANNEL" data-references="1+,T,MV,COND,READ-OBJECT-SUPPRESS,EOFP,MV-LET,N,STATE,CH,DEFUN" data-used-by="POST-ALIST-FROM-PCERT1" data-part-name="COUNT-FORMS-IN-CHANNEL" data-part-args="N,STATE,CH" data-part-body="1+,COUNT-FORMS-IN-CHANNEL,T,N,MV,COND,CH,READ-OBJECT-SUPPRESS,STATE,EOFP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COUNT-FORMS-IN-CHANNEL">count-forms-in-channel</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-count-forms-in-channel" data-sym="COUNT-FORMS-IN-CHANNEL" title="(defun count-forms-in-channel (ch state n)
  (mv-let (eofp state) (read-object-suppress ch state)
          (cond (eofp (mv n state))
                (t (count-forms-in-channel ch state (1+ n))))))">count-forms-in-channel</a>
  (ch state n)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp state)
    (<a class="sym-link system" href="axioms.html#def-read-object-suppress" data-sym="READ-OBJECT-SUPPRESS">read-object-suppress</a> ch state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> n state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-count-forms-in-channel" data-sym="COUNT-FORMS-IN-CHANNEL" title="(defun count-forms-in-channel (ch state n)
  (mv-let (eofp state) (read-object-suppress ch state)
          (cond (eofp (mv n state))
                (t (count-forms-in-channel ch state (1+ n))))))">count-forms-in-channel</a> ch state (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> n))))))</pre>
  </div>

<div class="form-block function" id="def-skip-forms-in-channel" data-defines="SKIP-FORMS-IN-CHANNEL" data-references="1-,READ-OBJECT-SUPPRESS,EOFP,MV-LET,T,MV,ZP,COND,STATE,CH,N,DEFUN" data-used-by="POST-ALIST-FROM-PCERT1-1" data-part-name="SKIP-FORMS-IN-CHANNEL" data-part-args="STATE,CH,N" data-part-body="1-,SKIP-FORMS-IN-CHANNEL,CH,READ-OBJECT-SUPPRESS,EOFP,MV-LET,T,STATE,MV,N,ZP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SKIP-FORMS-IN-CHANNEL">skip-forms-in-channel</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-skip-forms-in-channel" data-sym="SKIP-FORMS-IN-CHANNEL" title="(defun skip-forms-in-channel (n ch state)
  (cond ((zp n) (mv nil state))
        (t
         (mv-let (eofp state) (read-object-suppress ch state)
                 (cond (eofp (mv eofp state))">skip-forms-in-channel</a>
  (n ch state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-zp" data-sym="ZP">zp</a> n) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp state)
        (<a class="sym-link system" href="axioms.html#def-read-object-suppress" data-sym="READ-OBJECT-SUPPRESS">read-object-suppress</a> ch state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> eofp state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-skip-forms-in-channel" data-sym="SKIP-FORMS-IN-CHANNEL" title="(defun skip-forms-in-channel (n ch state)
  (cond ((zp n) (mv nil state))
        (t
         (mv-let (eofp state) (read-object-suppress ch state)
                 (cond (eofp (mv eofp state))">skip-forms-in-channel</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) ch state)))))))</pre>
  </div>

<div class="form-block function" id="def-post-alist-from-pcert1-1" data-defines="POST-ALIST-FROM-PCERT1-1" data-references="VALUE,INCLUDE-BOOK-ALISTP,+,-,EQ,READ-OBJECT,POST-ALIST,CLOSE-INPUT-CHANNEL,PPROGN,SKIP-FORMS-IN-CHANNEL,EOFP,T,SOFT,ER,NULL,COND,OPEN-INPUT-CHANNEL,CHAN,MV-LET,STATE,CTX,MSG,PCERT1-FILE,FIRST-TRY-P,N,DEFUN" data-used-by="POST-ALIST-FROM-PCERT1" data-part-name="POST-ALIST-FROM-PCERT1-1" data-part-args="STATE,CTX,MSG,PCERT1-FILE,FIRST-TRY-P,N" data-part-body="VALUE,INCLUDE-BOOK-ALISTP,+,-,POST-ALIST-FROM-PCERT1-1,FIRST-TRY-P,EQ,READ-OBJECT,POST-ALIST,CLOSE-INPUT-CHANNEL,PPROGN,N,SKIP-FORMS-IN-CHANNEL,EOFP,T,MSG,CTX,SOFT,ER,NULL,COND,PCERT1-FILE,OPEN-INPUT-CHANNEL,STATE,CHAN,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POST-ALIST-FROM-PCERT1-1">post-alist-from-pcert1-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-post-alist-from-pcert1-1" data-sym="POST-ALIST-FROM-PCERT1-1" title="(defun post-alist-from-pcert1-1 (n first-try-p pcert1-file msg ctx state)
  (mv-let (chan state) (open-input-channel pcert1-file :object state)
          (cond ((null chan) (er soft ctx &quot;~@0&quot; msg))
                (t
                 (mv-let (eofp state) (skip-forms-in-channel n chan state)
...">post-alist-from-pcert1-1</a>
  (n first-try-p pcert1-file <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (chan state)
    (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> pcert1-file <span class="keyword">:object</span> state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> chan) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp state)
          (<a class="sym-link local-def" href="#def-skip-forms-in-channel" data-sym="SKIP-FORMS-IN-CHANNEL" title="(defun skip-forms-in-channel (n ch state)
  (cond ((zp n) (mv nil state))
        (t
         (mv-let (eofp state) (read-object-suppress ch state)
                 (cond (eofp (mv eofp state))">skip-forms-in-channel</a> n chan state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> chan state)
                (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"Implementation error: Unexpected end of file, reading ~x0 ~
                forms from file ~x1.  Please contact the ACL2 implementors."</span>
                  n
                  pcert1-file)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eofp post-alist state)
                (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> chan state)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eofp (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"Implementation error: Unexpected end of file, reading ~x0 ~
                   forms and then one more form from file ~x1.  Please ~
                   contact the ACL2 implementors."</span>
                      n
                      pcert1-file))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> post-alist <span class="keyword">:pcert-info</span>) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> chan state)
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (first-try-p (<a class="sym-link local-def" href="#def-post-alist-from-pcert1-1" data-sym="POST-ALIST-FROM-PCERT1-1" title="(defun post-alist-from-pcert1-1 (n first-try-p pcert1-file msg ctx state)
  (mv-let (chan state) (open-input-channel pcert1-file :object state)
          (cond ((null chan) (er soft ctx &quot;~@0&quot; msg))
                (t
                 (mv-let (eofp state) (skip-forms-in-channel n chan state)
...">post-alist-from-pcert1-1</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> n <span class="number">2</span>)
                            nil
                            pcert1-file
                            <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
                            ctx
                            state))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                            ctx
                            <span class="string">"Implementation error: Unexpectedly we appear to have ~
                        two occurrences of :PCERT-INFO at the top level of ~
                        file ~x0, at positions ~x1 and ~x2."</span>
                            pcert1-file
                            (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">2</span>)
                            n)))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> chan state)
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-include-book-alistp" data-sym="INCLUDE-BOOK-ALISTP" title="(defun include-book-alistp (x local-markers-allowedp)
  (include-book-alistp-1 x local-markers-allowedp))">include-book-alistp</a> post-alist <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> post-alist))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                            ctx
                            <span class="string">"Ill-formed post-alist encountered in ~
                                      file ~x0:~|~x1"</span>
                            pcert1-file
                            post-alist))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-post-alist-from-pcert1" data-defines="POST-ALIST-FROM-PCERT1" data-references="-,POST-ALIST-FROM-PCERT1-1,<=,ASSERT$,CLOSE-INPUT-CHANNEL,PPROGN,COUNT-FORMS-IN-CHANNEL,LEN,T,SOFT,ER,NULL,COND,OPEN-INPUT-CHANNEL,CHAN,MV-LET,STATE,CTX,MSG,PCERT1-FILE,DEFUN" data-used-by="CERTIFICATE-POST-ALIST" data-part-name="POST-ALIST-FROM-PCERT1" data-part-args="STATE,CTX,MSG,PCERT1-FILE" data-part-body="-,POST-ALIST-FROM-PCERT1-1,<=,ASSERT$,CLOSE-INPUT-CHANNEL,PPROGN,COUNT-FORMS-IN-CHANNEL,LEN,T,MSG,CTX,SOFT,ER,NULL,COND,PCERT1-FILE,OPEN-INPUT-CHANNEL,STATE,CHAN,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POST-ALIST-FROM-PCERT1">post-alist-from-pcert1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-post-alist-from-pcert1" data-sym="POST-ALIST-FROM-PCERT1" title="(defun post-alist-from-pcert1 (pcert1-file msg ctx state)
  (mv-let (chan state) (open-input-channel pcert1-file :object state)
          (cond ((null chan) (er soft ctx &quot;~@0&quot; msg))
                (t
                 (mv-let (len state) (count-forms-in-channel chan state 0)
...">post-alist-from-pcert1</a>
  (pcert1-file <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (chan state)
    (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> pcert1-file <span class="keyword">:object</span> state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> chan) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> state)
          (<a class="sym-link local-def" href="#def-count-forms-in-channel" data-sym="COUNT-FORMS-IN-CHANNEL" title="(defun count-forms-in-channel (ch state n)
  (mv-let (eofp state) (read-object-suppress ch state)
          (cond (eofp (mv n state))
                (t (count-forms-in-channel ch state (1+ n))))))">count-forms-in-channel</a> chan state <span class="number">0</span>)
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> chan state)
            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">2</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
              (<a class="sym-link local-def" href="#def-post-alist-from-pcert1-1" data-sym="POST-ALIST-FROM-PCERT1-1" title="(defun post-alist-from-pcert1-1 (n first-try-p pcert1-file msg ctx state)
  (mv-let (chan state) (open-input-channel pcert1-file :object state)
          (cond ((null chan) (er soft ctx &quot;~@0&quot; msg))
                (t
                 (mv-let (eofp state) (skip-forms-in-channel n chan state)
...">post-alist-from-pcert1-1</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <span class="number">2</span>)
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                pcert1-file
                <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
                ctx
                state))))))))</pre>
  </div>

<div class="form-block function" id="def-certificate-post-alist" data-defines="CERTIFICATE-POST-ALIST" data-references="SOFT,ER,T,VALUE,CAAR,EQUAL,COND,MSG,POST-ALIST-FROM-PCERT1,POST-ALIST,ER-LET*,STATE,CTX,FULL-BOOK-NAME,CERT-FILE,PCERT1-FILE,DEFUN" data-used-by="CERTIFY-BOOK-FINISH-COMPLETE" data-part-name="CERTIFICATE-POST-ALIST" data-part-args="STATE,CTX,FULL-BOOK-NAME,CERT-FILE,PCERT1-FILE" data-part-body="SOFT,ER,T,VALUE,FULL-BOOK-NAME,CAAR,EQUAL,COND,STATE,CTX,CERT-FILE,MSG,PCERT1-FILE,POST-ALIST-FROM-PCERT1,POST-ALIST,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFICATE-POST-ALIST">certificate-post-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certificate-post-alist" data-sym="CERTIFICATE-POST-ALIST" title="(defun certificate-post-alist (pcert1-file cert-file full-book-name ctx state)
  (er-let*
   ((post-alist
     (post-alist-from-pcert1 pcert1-file
                             (msg
...">certificate-post-alist</a>
  (pcert1-file cert-file full-book-name ctx state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((post-alist (<a class="sym-link local-def" href="#def-post-alist-from-pcert1" data-sym="POST-ALIST-FROM-PCERT1" title="(defun post-alist-from-pcert1 (pcert1-file msg ctx state)
  (mv-let (chan state) (open-input-channel pcert1-file :object state)
          (cond ((null chan) (er soft ctx &quot;~@0&quot; msg))
                (t
                 (mv-let (len state) (count-forms-in-channel chan state 0)
...">post-alist-from-pcert1</a> pcert1-file
         (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Unable to open file ~x0 for input, hence cannot complete ~
                    its renaming to ~x1."</span>
           pcert1-file
           cert-file)
         ctx
         state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> post-alist) full-book-name) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> post-alist))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"Ill-formed post-alist encountered: expected its caar ~
                         to be the full-book-name ~x0, but the post-alist ~
                         encountered was ~x1."</span>
          full-book-name
          post-alist)))))</pre>
  </div>

<div class="form-block function" id="def-certify-book-finish-complete" data-defines="CERTIFY-BOOK-FINISH-COMPLETE" data-references="VALUE,TOUCH?,ER-PROGN,STANDARD-CO,CONS,LIST,FMS,PPROGN,SOFT,ER,COND,W,CDR,INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS,UNCERTIFIED-BOOKS,CERTIFICATE-POST-ALIST,POST-ALIST,ER-LET*,EXPANSION-FILENAME,EXPANSION-FILE,CONVERT-BOOK-STRING-TO-COMPILED,COMPILED-FILE,T,CERT-FILE,PCERT1-FILE,CONVERT-BOOK-STRING-TO-CERT,PCERT0-FILE,LET,STATE,CTX,FULL-BOOK-NAME,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CERTIFY-BOOK-FINISH-COMPLETE" data-part-args="STATE,CTX,FULL-BOOK-NAME,FULL-BOOK-STRING" data-part-body="VALUE,TOUCH?,ER-PROGN,STANDARD-CO,CONS,LIST,FMS,PPROGN,SOFT,ER,COND,W,CDR,INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS,UNCERTIFIED-BOOKS,CTX,FULL-BOOK-NAME,CERTIFICATE-POST-ALIST,POST-ALIST,ER-LET*,EXPANSION-FILENAME,EXPANSION-FILE,STATE,CONVERT-BOOK-STRING-TO-COMPILED,COMPILED-FILE,T,CERT-FILE,PCERT1-FILE,FULL-BOOK-STRING,CONVERT-BOOK-STRING-TO-CERT,PCERT0-FILE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-FINISH-COMPLETE">certify-book-finish-complete</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-finish-complete" data-sym="CERTIFY-BOOK-FINISH-COMPLETE" title="(defun certify-book-finish-complete (full-book-string full-book-name ctx state)
  (let ((pcert0-file
         (convert-book-string-to-cert full-book-string :create-pcert))
        (pcert1-file
         (convert-book-string-to-cert full-book-string :convert-pcert))
...">certify-book-finish-complete</a>
  (full-book-string full-book-name ctx state)
  (let ((pcert0-file (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <span class="keyword">:create-pcert</span>)) (pcert1-file (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string
          <span class="keyword">:convert-pcert</span>))
      (cert-file (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      (compiled-file (<a class="sym-link local-def" href="#def-convert-book-string-to-compiled" data-sym="CONVERT-BOOK-STRING-TO-COMPILED" title="(defun convert-book-string-to-compiled (full-book-string state)
  (concatenate &#39;string (remove-lisp-suffix full-book-string nil)
               (f-get-global &#39;compiled-file-extension state)))">convert-book-string-to-compiled</a> full-book-string state))
      (expansion-file (<a class="sym-link local-def" href="#def-expansion-filename" data-sym="EXPANSION-FILENAME" title="(defun expansion-filename (file)
  (let ((len (length file)))
    (assert$ (equal (subseq file (- len 5) len) &quot;.lisp&quot;)
             (concatenate &#39;string (subseq file 0 (- len 5)) &quot;@expansion.lsp&quot;))))">expansion-filename</a> full-book-string)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((post-alist (<a class="sym-link local-def" href="#def-certificate-post-alist" data-sym="CERTIFICATE-POST-ALIST" title="(defun certificate-post-alist (pcert1-file cert-file full-book-name ctx state)
  (er-let*
   ((post-alist
     (post-alist-from-pcert1 pcert1-file
                             (msg
...">certificate-post-alist</a> pcert1-file
           cert-file
           full-book-name
           ctx
           state)) (uncertified-books (<a class="sym-link local-def" href="#def-include-book-alist-uncertified-books" data-sym="INCLUDE-BOOK-ALIST-UNCERTIFIED-BOOKS" title="(defun include-book-alist-uncertified-books (alist acc ctx wrld state)
  (cond ((endp alist) (value acc))
        (t
         (let* ((entry0 (car alist))
                (entry
...">include-book-alist-uncertified-books</a> (cdr post-alist)
            nil
            ctx
            (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
            state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (uncertified-books (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Unable to complete the renaming of ~x0 to ~x1, because ~
             ~#2~[~/each of ~]the following included book~#2~[~/s~] does not ~
             have a .cert file that is at least as recent as that included ~
             book: ~&amp;2."</span>
            pcert1-file
            cert-file
            uncertified-books))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Note: Renaming file ~x0 to ~x1.~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 pcert1-file) (cons #\1 cert-file))
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state
              nil)
            (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-touch_3F" data-sym="TOUCH?" title="(defun touch? (filename old-filename ctx state)
  (cond ((null old-filename) (value (sys-call &quot;touch&quot; (list filename))))
        (t
         (mv-let (old-filename-date state)
                 (file-write-date$ old-filename state)
...">touch?</a> cert-file pcert0-file ctx state)
              (<a class="sym-link local-def" href="#def-touch_3F" data-sym="TOUCH?" title="(defun touch? (filename old-filename ctx state)
  (cond ((null old-filename) (value (sys-call &quot;touch&quot; (list filename))))
        (t
         (mv-let (old-filename-date state)
                 (file-write-date$ old-filename state)
...">touch?</a> compiled-file pcert0-file ctx state)
              (<a class="sym-link local-def" href="#def-touch_3F" data-sym="TOUCH?" title="(defun touch? (filename old-filename ctx state)
  (cond ((null old-filename) (value (sys-call &quot;touch&quot; (list filename))))
        (t
         (mv-let (old-filename-date state)
                 (file-write-date$ old-filename state)
...">touch?</a> expansion-file pcert0-file ctx state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> cert-file))))))))</pre>
  </div>

<div class="form-block function" id="def-expansion-alist-conflict" data-defines="EXPANSION-ALIST-CONFLICT" data-references="T,CDR,CDAR,ELIDE-LOCALS,EQUAL,EQL,CAAR,<,CAR,MV,ENDP,COND,ELIDED-EXPANSION-ALIST,ACL2X-EXPANSION-ALIST,DEFUN" data-used-by="CERTIFY-BOOK-EXPANSION-ALIST0" data-part-name="EXPANSION-ALIST-CONFLICT" data-part-args="ELIDED-EXPANSION-ALIST,ACL2X-EXPANSION-ALIST" data-part-body="T,CDR,EXPANSION-ALIST-CONFLICT,CDAR,ELIDE-LOCALS,EQUAL,EQL,CAAR,<,CAR,ELIDED-EXPANSION-ALIST,MV,ACL2X-EXPANSION-ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPANSION-ALIST-CONFLICT">expansion-alist-conflict</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-expansion-alist-conflict" data-sym="EXPANSION-ALIST-CONFLICT" title="(defun expansion-alist-conflict (acl2x-expansion-alist elided-expansion-alist)
  (cond ((endp acl2x-expansion-alist) (mv nil nil))
        ((endp elided-expansion-alist) (mv (car acl2x-expansion-alist) nil))
        ((&lt; (caar acl2x-expansion-alist) (caar elided-expansion-alist))
         (mv (car acl2x-expansion-alist) nil))
...">expansion-alist-conflict</a>
  (acl2x-expansion-alist elided-expansion-alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> acl2x-expansion-alist) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
    ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> elided-expansion-alist) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car acl2x-expansion-alist) nil))
    ((&lt; (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> acl2x-expansion-alist)
       (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> elided-expansion-alist)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car acl2x-expansion-alist) nil))
    ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> acl2x-expansion-alist)
       (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> elided-expansion-alist)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal (<a class="sym-link local-def" href="#def-elide-locals" data-sym="ELIDE-LOCALS" title="(defmacro elide-locals (form)
  `(mv-let (changed-p x) (elide-locals-rec ,form) (declare (ignore changed-p))
           x))">elide-locals</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> acl2x-expansion-alist))
           (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> elided-expansion-alist)) (<a class="sym-link local-def" href="#def-expansion-alist-conflict" data-sym="EXPANSION-ALIST-CONFLICT" title="(defun expansion-alist-conflict (acl2x-expansion-alist elided-expansion-alist)
  (cond ((endp acl2x-expansion-alist) (mv nil nil))
        ((endp elided-expansion-alist) (mv (car acl2x-expansion-alist) nil))
        ((&lt; (caar acl2x-expansion-alist) (caar elided-expansion-alist))
         (mv (car acl2x-expansion-alist) nil))
...">expansion-alist-conflict</a> (cdr acl2x-expansion-alist)
            (cdr elided-expansion-alist)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car acl2x-expansion-alist)
            (car elided-expansion-alist)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-expansion-alist-conflict" data-sym="EXPANSION-ALIST-CONFLICT" title="(defun expansion-alist-conflict (acl2x-expansion-alist elided-expansion-alist)
  (cond ((endp acl2x-expansion-alist) (mv nil nil))
        ((endp elided-expansion-alist) (mv (car acl2x-expansion-alist) nil))
        ((&lt; (caar acl2x-expansion-alist) (caar elided-expansion-alist))
         (mv (car acl2x-expansion-alist) nil))
...">expansion-alist-conflict</a> (cdr acl2x-expansion-alist)
        elided-expansion-alist))))</pre>
  </div>

<div class="form-block function" id="def-symbol-package-name-set" data-defines="SYMBOL-PACKAGE-NAME-SET" data-references="CAR,SYMBOL-PACKAGE-NAME,ADD-TO-SET-EQUAL,CDR,T,ENDP,COND,TRUE-LISTP,SYMBOL-LISTP,AND,XARGS,DECLARE,ACC,SYMS,DEFUN" data-used-by="SYMBOL-LIST-TO-PACKAGE-ALIST" data-part-name="SYMBOL-PACKAGE-NAME-SET" data-part-args="ACC,SYMS" data-part-declare="ACC,TRUE-LISTP,SYMS,SYMBOL-LISTP,AND,XARGS,DECLARE" data-part-body="CAR,SYMBOL-PACKAGE-NAME,ADD-TO-SET-EQUAL,CDR,SYMBOL-PACKAGE-NAME-SET,T,ACC,SYMS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYMBOL-PACKAGE-NAME-SET">symbol-package-name-set</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-symbol-package-name-set" data-sym="SYMBOL-PACKAGE-NAME-SET" title="(defun symbol-package-name-set (syms acc)
  (declare (xargs :guard (and (symbol-listp syms) (true-listp acc))))
  (cond ((endp syms) acc)
        (t
         (symbol-package-name-set (cdr syms)
...">symbol-package-name-set</a>
  (syms acc)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> syms) (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> acc))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> syms) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-symbol-package-name-set" data-sym="SYMBOL-PACKAGE-NAME-SET" title="(defun symbol-package-name-set (syms acc)
  (declare (xargs :guard (and (symbol-listp syms) (true-listp acc))))
  (cond ((endp syms) acc)
        (t
         (symbol-package-name-set (cdr syms)
...">symbol-package-name-set</a> (cdr syms)
        (<a class="sym-link system" href="axioms.html#def-add-to-set-equal" data-sym="ADD-TO-SET-EQUAL">add-to-set-equal</a> (symbol-package-name (car syms)) acc)))))</pre>
  </div>

<div class="form-block function" id="def-names-of-symbols-in-package" data-defines="NAMES-OF-SYMBOLS-IN-PACKAGE" data-references="SYMBOL-NAME,CONS,CAR,SYMBOL-PACKAGE-NAME,EQUAL,IF,CDR,T,ENDP,COND,SYMBOL-LISTP,XARGS,DECLARE,ACC,PACKAGE,SYMS,DEFUN" data-used-by="SYMBOL-LIST-TO-PACKAGE-ALIST1" data-part-name="NAMES-OF-SYMBOLS-IN-PACKAGE" data-part-args="ACC,PACKAGE,SYMS" data-part-declare="SYMS,SYMBOL-LISTP,XARGS,DECLARE" data-part-body="SYMBOL-NAME,CONS,CAR,SYMBOL-PACKAGE-NAME,EQUAL,IF,PACKAGE,CDR,NAMES-OF-SYMBOLS-IN-PACKAGE,T,ACC,SYMS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NAMES-OF-SYMBOLS-IN-PACKAGE">names-of-symbols-in-package</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-names-of-symbols-in-package" data-sym="NAMES-OF-SYMBOLS-IN-PACKAGE" title="(defun names-of-symbols-in-package (syms package acc)
  (declare (xargs :guard (symbol-listp syms)))
  (cond ((endp syms) acc)
        (t
         (names-of-symbols-in-package (cdr syms) package
...">names-of-symbols-in-package</a>
  (syms package acc)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> syms)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> syms) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-names-of-symbols-in-package" data-sym="NAMES-OF-SYMBOLS-IN-PACKAGE" title="(defun names-of-symbols-in-package (syms package acc)
  (declare (xargs :guard (symbol-listp syms)))
  (cond ((endp syms) acc)
        (t
         (names-of-symbols-in-package (cdr syms) package
...">names-of-symbols-in-package</a> (cdr syms)
        package
        (if (equal (symbol-package-name (car syms)) package)
          (cons (symbol-name (car syms)) acc)
          acc)))))</pre>
  </div>

<div class="form-block function" id="def-symbol-list-to-package-alist1" data-defines="SYMBOL-LIST-TO-PACKAGE-ALIST1" data-references="NAMES-OF-SYMBOLS-IN-PACKAGE,CAR,ACONS,CDR,T,ENDP,COND,ALISTP,TRUE-LISTP,SYMBOL-LISTP,AND,XARGS,DECLARE,ACC,PACKAGES,SYMS,DEFUN" data-used-by="SYMBOL-LIST-TO-PACKAGE-ALIST" data-part-name="SYMBOL-LIST-TO-PACKAGE-ALIST1" data-part-args="ACC,PACKAGES,SYMS" data-part-declare="ACC,ALISTP,PACKAGES,TRUE-LISTP,SYMS,SYMBOL-LISTP,AND,XARGS,DECLARE" data-part-body="NAMES-OF-SYMBOLS-IN-PACKAGE,CAR,ACONS,CDR,SYMS,SYMBOL-LIST-TO-PACKAGE-ALIST1,T,ACC,PACKAGES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST1">symbol-list-to-package-alist1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-symbol-list-to-package-alist1" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST1" title="(defun symbol-list-to-package-alist1 (syms packages acc)
  (declare
   (xargs :guard (and (symbol-listp syms) (true-listp packages) (alistp acc))))
  (cond ((endp packages) acc)
        (t
...">symbol-list-to-package-alist1</a>
  (syms packages acc)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> syms) (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> packages) (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> acc))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> packages) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist1" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST1" title="(defun symbol-list-to-package-alist1 (syms packages acc)
  (declare
   (xargs :guard (and (symbol-listp syms) (true-listp packages) (alistp acc))))
  (cond ((endp packages) acc)
        (t
...">symbol-list-to-package-alist1</a> syms
        (cdr packages)
        (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> (car packages)
          (<a class="sym-link local-def" href="#def-names-of-symbols-in-package" data-sym="NAMES-OF-SYMBOLS-IN-PACKAGE" title="(defun names-of-symbols-in-package (syms package acc)
  (declare (xargs :guard (symbol-listp syms)))
  (cond ((endp syms) acc)
        (t
         (names-of-symbols-in-package (cdr syms) package
...">names-of-symbols-in-package</a> syms (car packages) nil)
          acc)))))</pre>
  </div>

<div class="form-block function" id="def-symbol-list-to-package-alist" data-defines="SYMBOL-LIST-TO-PACKAGE-ALIST" data-references="SYMBOL-PACKAGE-NAME-SET,SYMBOL-LIST-TO-PACKAGE-ALIST1,SYMBOL-LISTP,XARGS,DECLARE,SYMS,DEFUN" data-used-by="BOOKDATA-ALIST1" data-part-name="SYMBOL-LIST-TO-PACKAGE-ALIST" data-part-args="SYMS" data-part-declare="SYMS,SYMBOL-LISTP,XARGS,DECLARE" data-part-body="SYMBOL-PACKAGE-NAME-SET,SYMS,SYMBOL-LIST-TO-PACKAGE-ALIST1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST">symbol-list-to-package-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a>
  (syms)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> syms)))
  (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist1" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST1" title="(defun symbol-list-to-package-alist1 (syms packages acc)
  (declare
   (xargs :guard (and (symbol-listp syms) (true-listp packages) (alistp acc))))
  (cond ((endp packages) acc)
        (t
...">symbol-list-to-package-alist1</a> syms
    (<a class="sym-link local-def" href="#def-symbol-package-name-set" data-sym="SYMBOL-PACKAGE-NAME-SET" title="(defun symbol-package-name-set (syms acc)
  (declare (xargs :guard (and (symbol-listp syms) (true-listp acc))))
  (cond ((endp syms) acc)
        (t
         (symbol-package-name-set (cdr syms)
...">symbol-package-name-set</a> syms nil)
    nil))</pre>
  </div>

<div class="form-block function" id="def-bookdata-alist1" data-defines="BOOKDATA-ALIST1" data-references="HARD,ER,OTHERWISE,CERTIFICATION-TUPLE,MACRO-BODY,THEORY,LABEL,STOBJ,CONST,THEOREM,IF,FORMALS,CASE,NAME-INTRODUCED,NAME,ACCESS-EVENT-TUPLE-NAMEX,DEFPKG,ACCESS-EVENT-TUPLE-TYPE,EVENT-LANDMARK,ASSERT$,CONS,NOT,CDR,EQUAL,PORT,CDDR,NULL,GLOBAL-VALUE,CADR,INCLUDE-BOOK-PATH,QUOTE,EQ,AND,CAR,TRIP,LET,T,SYMBOL-LIST-TO-PACKAGE-ALIST,LIST,ENDP,COND,THMS,PORT-THMS,THEORIES,PORT-THEORIES,STOBJS,PORT-STOBJS,MACROS,PORT-MACROS,LABELS,PORT-LABELS,FNS,PORT-FNS,CONSTS,PORT-CONSTS,BOOKS,PORT-BOOKS,PORT-PKGS,TRIPS,COLLECT-P,FULL-BOOK-NAME,DEFUN" data-used-by="BOOKDATA-ALIST" data-part-name="BOOKDATA-ALIST1" data-part-args="THMS,PORT-THMS,THEORIES,PORT-THEORIES,STOBJS,PORT-STOBJS,MACROS,PORT-MACROS,LABELS,PORT-LABELS,FNS,PORT-FNS,CONSTS,PORT-CONSTS,BOOKS,PORT-BOOKS,PORT-PKGS,TRIPS,COLLECT-P,FULL-BOOK-NAME" data-part-body="HARD,ER,OTHERWISE,CERTIFICATION-TUPLE,MACRO-BODY,THEORY,LABEL,STOBJ,CONST,THEOREM,IF,FORMALS,CASE,NAME-INTRODUCED,NAME,ACCESS-EVENT-TUPLE-NAMEX,DEFPKG,ACCESS-EVENT-TUPLE-TYPE,EVENT-LANDMARK,ASSERT$,CONS,NOT,COLLECT-P,CDR,EQUAL,PORT,CDDR,NULL,FULL-BOOK-NAME,BOOKDATA-ALIST1,GLOBAL-VALUE,CADR,INCLUDE-BOOK-PATH,QUOTE,EQ,AND,CAR,TRIP,LET,T,THMS,PORT-THMS,THEORIES,PORT-THEORIES,STOBJS,PORT-STOBJS,MACROS,PORT-MACROS,LABELS,PORT-LABELS,FNS,PORT-FNS,CONSTS,PORT-CONSTS,SYMBOL-LIST-TO-PACKAGE-ALIST,BOOKS,PORT-BOOKS,PORT-PKGS,LIST,TRIPS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BOOKDATA-ALIST1">bookdata-alist1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a>
  (full-book-name collect-p
    trips
    port-pkgs
    port-books
    books
    port-consts
    consts
    port-fns
    fns
    port-labels
    labels
    port-macros
    macros
    port-stobjs
    stobjs
    port-theories
    theories
    port-thms
    thms)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> trips) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:pkgs</span> port-pkgs
        <span class="keyword">:port-books</span> port-books
        <span class="keyword">:books</span> books
        <span class="keyword">:port-consts</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> port-consts)
        <span class="keyword">:consts</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> consts)
        <span class="keyword">:port-fns</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> port-fns)
        <span class="keyword">:fns</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> fns)
        <span class="keyword">:port-labels</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> port-labels)
        <span class="keyword">:labels</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> labels)
        <span class="keyword">:port-macros</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> port-macros)
        <span class="keyword">:macros</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> macros)
        <span class="keyword">:port-stobjs</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> port-stobjs)
        <span class="keyword">:stobjs</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> stobjs)
        <span class="keyword">:port-theories</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> port-theories)
        <span class="keyword">:theories</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> theories)
        <span class="keyword">:port-thms</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> port-thms)
        <span class="keyword">:thms</span> (<a class="sym-link local-def" href="#def-symbol-list-to-package-alist" data-sym="SYMBOL-LIST-TO-PACKAGE-ALIST" title="(defun symbol-list-to-package-alist (syms)
  (declare (xargs :guard (symbol-listp syms)))
  (symbol-list-to-package-alist1 syms (symbol-package-name-set syms nil) nil))">symbol-list-to-package-alist</a> thms)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((trip (car trips)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'include-book-path)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)) (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) 'port)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (equal (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) full-book-name)))
              (cdr trips)
              port-pkgs
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                   (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) full-book-name))) (cons (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) port-books))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> port-books))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) full-book-name))
                    (cons (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) books)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> books))
              port-consts
              consts
              port-fns
              fns
              port-labels
              labels
              port-macros
              macros
              port-stobjs
              stobjs
              port-theories
              theories
              port-thms
              thms))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> collect-p) (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
              nil
              (cdr trips)
              port-pkgs
              port-books
              books
              port-consts
              consts
              port-fns
              fns
              port-labels
              labels
              port-macros
              macros
              port-stobjs
              stobjs
              port-theories
              theories
              port-thms
              thms))
          ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'event-landmark)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (access-event-tuple-type (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>)) (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
              collect-p
              (cdr trips)
              (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                (cons (access-event-tuple-namex (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) port-pkgs))
              port-books
              books
              port-consts
              consts
              port-fns
              fns
              port-labels
              labels
              port-macros
              macros
              port-stobjs
              stobjs
              port-theories
              theories
              port-thms
              thms))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((name (<a class="sym-link local-def" href="#def-name-introduced" data-sym="NAME-INTRODUCED" title="(defun name-introduced (trip functionp)
  (cond ((eq (cddr trip) *acl2-property-unbound*) nil)
        ((eq (cadr trip) &#39;formals) (car trip)) (functionp nil)
        ((member-eq (cadr trip) &#39;(theorem const macro-body label theory stobj))
         (car trip))
...">name-introduced</a> trip nil)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (name (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip)
                    (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
                        collect-p
                        (cdr trips)
                        port-pkgs
                        port-books
                        books
                        port-consts
                        consts
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          (cons name port-fns)
                          port-fns)
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          fns
                          (cons name fns))
                        port-labels
                        labels
                        port-macros
                        macros
                        port-stobjs
                        stobjs
                        port-theories
                        theories
                        port-thms
                        thms))
                    (theorem (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
                        collect-p
                        (cdr trips)
                        port-pkgs
                        port-books
                        books
                        port-consts
                        consts
                        port-fns
                        fns
                        port-labels
                        labels
                        port-macros
                        macros
                        port-stobjs
                        stobjs
                        port-theories
                        theories
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          (cons name port-thms)
                          port-thms)
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          thms
                          (cons name thms))))
                    (const (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
                        collect-p
                        (cdr trips)
                        port-pkgs
                        port-books
                        books
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          (cons name port-consts)
                          port-consts)
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          consts
                          (cons name consts))
                        port-fns
                        fns
                        port-labels
                        labels
                        port-macros
                        macros
                        port-stobjs
                        stobjs
                        port-theories
                        theories
                        port-thms
                        thms))
                    (stobj (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
                        collect-p
                        (cdr trips)
                        port-pkgs
                        port-books
                        books
                        port-consts
                        consts
                        port-fns
                        fns
                        port-labels
                        labels
                        port-macros
                        macros
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          (cons name port-stobjs)
                          port-stobjs)
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          stobjs
                          (cons name stobjs))
                        port-theories
                        theories
                        port-thms
                        thms))
                    (label (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
                        collect-p
                        (cdr trips)
                        port-pkgs
                        port-books
                        books
                        port-consts
                        consts
                        port-fns
                        fns
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          (cons name port-labels)
                          port-labels)
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          labels
                          (cons name labels))
                        port-macros
                        macros
                        port-stobjs
                        stobjs
                        port-theories
                        theories
                        port-thms
                        thms))
                    (<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
                        collect-p
                        (cdr trips)
                        port-pkgs
                        port-books
                        books
                        port-consts
                        consts
                        port-fns
                        fns
                        port-labels
                        labels
                        port-macros
                        macros
                        port-stobjs
                        stobjs
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          (cons name port-theories)
                          theories)
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          theories
                          (cons name theories))
                        port-thms
                        thms))
                    (macro-body (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
                        collect-p
                        (cdr trips)
                        port-pkgs
                        port-books
                        books
                        port-consts
                        consts
                        port-fns
                        fns
                        port-labels
                        labels
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          (cons name port-macros)
                          port-macros)
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> collect-p 'port)
                          macros
                          (cons name macros))
                        port-stobjs
                        stobjs
                        port-theories
                        theories
                        port-thms
                        thms))
                    (global-value (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'certification-tuple)
                        (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
                          collect-p
                          (cdr trips)
                          port-pkgs
                          port-books
                          books
                          port-consts
                          consts
                          port-fns
                          fns
                          port-labels
                          labels
                          port-macros
                          macros
                          port-stobjs
                          stobjs
                          port-theories
                          theories
                          port-thms
                          thms)))
                    (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                        '<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a>
                        <span class="string">"Unexpected case for the cadr of ~x0"</span>
                        trip))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
                    collect-p
                    (cdr trips)
                    port-pkgs
                    port-books
                    books
                    port-consts
                    consts
                    port-fns
                    fns
                    port-labels
                    labels
                    port-macros
                    macros
                    port-stobjs
                    stobjs
                    port-theories
                    theories
                    port-thms
                    thms))))))))))</pre>
  </div>

<div class="form-block function" id="def-bookdata-alist" data-defines="BOOKDATA-ALIST" data-references="PORT,BOOKDATA-ALIST1,-,FIRST-N-AC-REV,NEW-TRIPS,WRLD-LEN,LENGTH,BOOT-STRAP-LEN,RELATIVE-TO-ABSOLUTE-COMMAND-NUMBER,COMMAND,LOOKUP-WORLD-INDEX,BOOT-STRAP-WRLD,LET*,INCLUDE-BOOK-PATH,QUOTE,GLOBAL-VAL,NULL,ASSERT$,WRLD,FULL-BOOK-NAME,DEFUN" data-used-by="MAYBE-WRITE-BOOKDATA" data-part-name="BOOKDATA-ALIST" data-part-args="WRLD,FULL-BOOK-NAME" data-part-body="PORT,FULL-BOOK-NAME,BOOKDATA-ALIST1,-,FIRST-N-AC-REV,NEW-TRIPS,WRLD-LEN,LENGTH,BOOT-STRAP-LEN,RELATIVE-TO-ABSOLUTE-COMMAND-NUMBER,COMMAND,LOOKUP-WORLD-INDEX,BOOT-STRAP-WRLD,LET*,WRLD,INCLUDE-BOOK-PATH,QUOTE,GLOBAL-VAL,NULL,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BOOKDATA-ALIST">bookdata-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-bookdata-alist" data-sym="BOOKDATA-ALIST" title="(defun bookdata-alist (full-book-name wrld)
  (assert$ (null (global-val &#39;include-book-path wrld))
           (let* ((boot-strap-wrld
                   (lookup-world-index &#39;command
                                       (relative-to-absolute-command-number 0
...">bookdata-alist</a>
  (full-book-name wrld)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-path wrld))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((boot-strap-wrld (lookup-world-index 'command
           (<a class="sym-link system" href="history-management.html#def-relative-to-absolute-command-number" data-sym="RELATIVE-TO-ABSOLUTE-COMMAND-NUMBER">relative-to-absolute-command-number</a> <span class="number">0</span> wrld)
           wrld)) (boot-strap-len (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> boot-strap-wrld))
        (wrld-len (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> wrld))
        (<a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a> (<a class="sym-link system" href="history-management.html#def-first-n-ac-rev" data-sym="FIRST-N-AC-REV">first-n-ac-rev</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> wrld-len boot-strap-len) wrld nil)))
      (<a class="sym-link local-def" href="#def-bookdata-alist1" data-sym="BOOKDATA-ALIST1" title="(defun bookdata-alist1
       (full-book-name collect-p trips port-pkgs port-books books port-consts
        consts port-fns fns port-labels labels port-macros macros port-stobjs
        stobjs port-theories theories port-thms thms)
  (cond
...">bookdata-alist1</a> full-book-name
        'port
        <a class="sym-link local-def" href="#def-new-trips" data-sym="NEW-TRIPS" title="(defun new-trips (wrld3 proto-wrld3) (new-trips-rec wrld3 proto-wrld3 nil nil))">new-trips</a>
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil
        nil))))</pre>
  </div>

<div class="form-block function" id="def-maybe-write-bookdata" data-defines="MAYBE-WRITE-BOOKDATA" data-references="CLOSE-OUTPUT-CHANNEL,BOOKDATA-ALIST,CONS,PRINT-OBJECT$-FN,PPROGN,HARD,ER,PROG2$,OPEN-OUTPUT-CHANNEL,CHANNEL,REMOVE-LISP-SUFFIX,STRING,CONCATENATE,OUTFILE,NULL,ASSERT$,GETENV!,VALUE,IF,VAL,ERP,MV-LET,T,EQ,COND,QUOTE,F-GET-GLOBAL,WRITE-BOOKDATA,LET,STATE,CTX,WRLD,FULL-BOOK-NAME,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="MAYBE-WRITE-BOOKDATA" data-part-args="STATE,CTX,WRLD,FULL-BOOK-NAME,FULL-BOOK-STRING" data-part-body="CLOSE-OUTPUT-CHANNEL,WRLD,BOOKDATA-ALIST,FULL-BOOK-NAME,CONS,PRINT-OBJECT$-FN,PPROGN,CTX,HARD,ER,PROG2$,OPEN-OUTPUT-CHANNEL,CHANNEL,FULL-BOOK-STRING,REMOVE-LISP-SUFFIX,STRING,CONCATENATE,OUTFILE,NULL,ASSERT$,GETENV!,VALUE,IF,VAL,ERP,MV-LET,T,EQ,COND,STATE,QUOTE,F-GET-GLOBAL,WRITE-BOOKDATA,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-WRITE-BOOKDATA">maybe-write-bookdata</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-write-bookdata" data-sym="MAYBE-WRITE-BOOKDATA" title="(defun maybe-write-bookdata (full-book-string full-book-name wrld ctx state)
  (let ((write-bookdata (f-get-global &#39;write-bookdata state)))
    (cond ((eq write-bookdata :never) state)
          (t
           (mv-let (erp val state)
...">maybe-write-bookdata</a>
  (full-book-string full-book-name wrld ctx state)
  (let ((write-bookdata (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'write-bookdata state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> write-bookdata <span class="keyword">:never</span>) state)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          (if write-bookdata
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a> <span class="string">"ACL2_WRITE_BOOKDATA"</span> state))
          (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> erp)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (val (let ((outfile (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
                       (<a class="sym-link system" href="history-management.html#def-remove-lisp-suffix" data-sym="REMOVE-LISP-SUFFIX">remove-lisp-suffix</a> full-book-string <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                       <span class="string">"__bookdata.out"</span>)))
                  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (channel state)
                    (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> outfile <span class="keyword">:object</span> state)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> channel) (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                            ctx
                            <span class="string">"Error in maybe-write-bookdata: Unable to ~
                                  open file ~x0 for output."</span>
                            outfile)
                          state))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24-fn" data-sym="PRINT-OBJECT$-FN">print-object$-fn</a> (cons full-book-name (<a class="sym-link local-def" href="#def-bookdata-alist" data-sym="BOOKDATA-ALIST" title="(defun bookdata-alist (full-book-name wrld)
  (assert$ (null (global-val &#39;include-book-path wrld))
           (let* ((boot-strap-wrld
                   (lookup-world-index &#39;command
                                       (relative-to-absolute-command-number 0
...">bookdata-alist</a> full-book-name wrld))
                            nil
                            channel
                            state)
                          (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> channel state)))))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))))))</pre>
  </div>

<div class="form-block function" id="def-fromto" data-defines="FROMTO" data-references="1+,CONS,<,IF,RATIONALP,AND,XARGS,DECLARE,J,I,DEFUN" data-used-by="CERT-INCLUDE-EXPANSION-ALIST" data-part-name="FROMTO" data-part-args="J,I" data-part-declare="J,I,RATIONALP,AND,XARGS,DECLARE" data-part-body="1+,FROMTO,CONS,I,J,<,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FROMTO">fromto</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fromto" data-sym="FROMTO" title="(defun fromto (i j)
  (declare (xargs :guard (and (rationalp i) (rationalp j))))
  (if (&lt; j i)
      nil
      (cons i (fromto (1+ i) j))))">fromto</a>
  (i j)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp i) (rationalp j))))
  (if (&lt; j i)
    nil
    (cons i (<a class="sym-link local-def" href="#def-fromto" data-sym="FROMTO" title="(defun fromto (i j)
  (declare (xargs :guard (and (rationalp i) (rationalp j))))
  (if (&lt; j i)
      nil
      (cons i (fromto (1+ i) j))))">fromto</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> i) j))))</pre>
  </div>

<div class="form-block function" id="def-remove-smaller-keys-from-sorted-alist" data-defines="REMOVE-SMALLER-KEYS-FROM-SORTED-ALIST" data-references="T,CDR,CAAR,<,ENDP,COND,ALIST,INDEX,DEFUN" data-used-by="CERT-INCLUDE-EXPANSION-ALIST" data-part-name="REMOVE-SMALLER-KEYS-FROM-SORTED-ALIST" data-part-args="ALIST,INDEX" data-part-body="T,CDR,REMOVE-SMALLER-KEYS-FROM-SORTED-ALIST,INDEX,CAAR,<,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-SMALLER-KEYS-FROM-SORTED-ALIST">remove-smaller-keys-from-sorted-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-smaller-keys-from-sorted-alist" data-sym="REMOVE-SMALLER-KEYS-FROM-SORTED-ALIST" title="(defun remove-smaller-keys-from-sorted-alist (index alist)
  (cond ((endp alist) nil)
        ((&lt; (caar alist) index)
         (remove-smaller-keys-from-sorted-alist index (cdr alist)))
        (t alist)))">remove-smaller-keys-from-sorted-alist</a>
  (index alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    ((&lt; (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) index) (<a class="sym-link local-def" href="#def-remove-smaller-keys-from-sorted-alist" data-sym="REMOVE-SMALLER-KEYS-FROM-SORTED-ALIST" title="(defun remove-smaller-keys-from-sorted-alist (index alist)
  (cond ((endp alist) nil)
        ((&lt; (caar alist) index)
         (remove-smaller-keys-from-sorted-alist index (cdr alist)))
        (t alist)))">remove-smaller-keys-from-sorted-alist</a> index (cdr alist)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> alist)))</pre>
  </div>

<div class="form-block function" id="def-cert-include-expansion-alist" data-defines="CERT-INCLUDE-EXPANSION-ALIST" data-references="REMOVE-SMALLER-KEYS-FROM-SORTED-ALIST,VALUE-TRIPLE,QUOTE,MAKE-LIST,1-,FROMTO,PAIRLIS$,APPEND,EXPANSION-ALIST,INDEX,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="CERT-INCLUDE-EXPANSION-ALIST" data-part-args="EXPANSION-ALIST,INDEX" data-part-body="EXPANSION-ALIST,REMOVE-SMALLER-KEYS-FROM-SORTED-ALIST,VALUE-TRIPLE,QUOTE,MAKE-LIST,INDEX,1-,FROMTO,PAIRLIS$,APPEND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERT-INCLUDE-EXPANSION-ALIST">cert-include-expansion-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cert-include-expansion-alist" data-sym="CERT-INCLUDE-EXPANSION-ALIST" title="(defun cert-include-expansion-alist (index expansion-alist)
  (append
   (pairlis$ (fromto 1 (1- index))
             (make-list (1- index) :initial-element &#39;(value-triple nil)))
   (remove-smaller-keys-from-sorted-alist index expansion-alist)))">cert-include-expansion-alist</a>
  (index expansion-alist)
  (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link local-def" href="#def-fromto" data-sym="FROMTO" title="(defun fromto (i j)
  (declare (xargs :guard (and (rationalp i) (rationalp j))))
  (if (&lt; j i)
      nil
      (cons i (fromto (1+ i) j))))">fromto</a> <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> index))
      (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> index) <span class="keyword">:initial-element</span> '(<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> nil)))
    (<a class="sym-link local-def" href="#def-remove-smaller-keys-from-sorted-alist" data-sym="REMOVE-SMALLER-KEYS-FROM-SORTED-ALIST" title="(defun remove-smaller-keys-from-sorted-alist (index alist)
  (cond ((endp alist) nil)
        ((&lt; (caar alist) index)
         (remove-smaller-keys-from-sorted-alist index (cdr alist)))
        (t alist)))">remove-smaller-keys-from-sorted-alist</a> index
      expansion-alist)))</pre>
  </div>

<div class="form-block function" id="def-read-useless-runes2" data-defines="READ-USELESS-RUNES2" data-references="CONS,HONS-ACONS,HONS-GET,CDR,OLD,LENGTH,*,CEILING,TAKE,=,IF,NEW,STRIP-CADDRS,NEW0,KEY,LET*,T,CDAR,USELESS-RUNES-REPORT-P,CAAR,SYMBOLP,NOT,SOFT,ER,CAR,ATOM,VALUE,ENDP,COND,TRUE-LIST-LISTP,ALISTP,<=,<,RATIONALP,AND,XARGS,DECLARE,STATE,CTX,FILENAME,FAL,ALIST,R,DEFUN" data-used-by="READ-USELESS-RUNES1" data-part-name="READ-USELESS-RUNES2" data-part-args="STATE,CTX,FILENAME,FAL,ALIST,R" data-part-declare="TRUE-LIST-LISTP,ALIST,ALISTP,<=,<,R,RATIONALP,AND,XARGS,DECLARE" data-part-body="STATE,CONS,HONS-ACONS,READ-USELESS-RUNES2,HONS-GET,CDR,OLD,LENGTH,*,CEILING,TAKE,R,=,IF,NEW,STRIP-CADDRS,NEW0,KEY,LET*,T,CDAR,USELESS-RUNES-REPORT-P,CAAR,SYMBOLP,NOT,FILENAME,CTX,SOFT,ER,CAR,ATOM,FAL,VALUE,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-USELESS-RUNES2">read-useless-runes2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-useless-runes2" data-sym="READ-USELESS-RUNES2" title="(defun read-useless-runes2 (r alist fal filename ctx state)
  (declare
   (xargs :guard
    (and (rationalp r) (&lt; 0 r) (&lt;= r 1) (alistp alist)
         (true-list-listp alist))))
...">read-useless-runes2</a>
  (r alist fal filename ctx state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp r)
        (&lt; <span class="number">0</span> r)
        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> r <span class="number">1</span>)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> alist)
        (<a class="sym-link system" href="axioms.html#def-true-list-listp" data-sym="TRUE-LIST-LISTP">true-list-listp</a> alist))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> fal))
    ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (car alist)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Illegal entry in file ~x0 (not a cons): ~x1."</span>
        filename
        (car alist)))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Illegal entry in file ~x0 (CAR is not a symbol): ~x1."</span>
        filename
        (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="defuns.html#def-useless-runes-report-p" data-sym="USELESS-RUNES-REPORT-P">useless-runes-report-p</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Illegal entry in file ~x0 (CDR is not a list of triples): ~x1."</span>
        filename
        (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((key (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (new0 (strip-caddrs (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)))
          (new (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> r <span class="number">1</span>)
              new0
              (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> (ceiling (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> r (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> new0)) <span class="number">1</span>) new0)))
          (old (cdr (hons-get key fal))))
        (<a class="sym-link local-def" href="#def-read-useless-runes2" data-sym="READ-USELESS-RUNES2" title="(defun read-useless-runes2 (r alist fal filename ctx state)
  (declare
   (xargs :guard
    (and (rationalp r) (&lt; 0 r) (&lt;= r 1) (alistp alist)
         (true-list-listp alist))))
...">read-useless-runes2</a> r
          (cdr alist)
          (hons-acons key (cons new old) fal)
          filename
          ctx
          state)))))</pre>
  </div>

<div class="form-block function" id="def-read-useless-runes1" data-defines="READ-USELESS-RUNES1" data-references="REVERSE,READ-USELESS-RUNES2,TRUE-LIST-LISTP,ALISTP,<=,<,RATIONALP,AND,XARGS,DECLARE,STATE,CTX,FILENAME,ALIST,R,DEFUN" data-used-by="READ-USELESS-RUNES" data-part-name="READ-USELESS-RUNES1" data-part-args="STATE,CTX,FILENAME,ALIST,R" data-part-declare="TRUE-LIST-LISTP,ALIST,ALISTP,<=,<,R,RATIONALP,AND,XARGS,DECLARE" data-part-body="STATE,CTX,FILENAME,ALIST,REVERSE,R,READ-USELESS-RUNES2" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-USELESS-RUNES1">read-useless-runes1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-useless-runes1" data-sym="READ-USELESS-RUNES1" title="(defun read-useless-runes1 (r alist filename ctx state)
  (declare
   (xargs :guard
    (and (rationalp r) (&lt; 0 r) (&lt;= r 1) (alistp alist)
         (true-list-listp alist))))">read-useless-runes1</a>
  (r alist filename ctx state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp r)
        (&lt; <span class="number">0</span> r)
        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> r <span class="number">1</span>)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> alist)
        (<a class="sym-link system" href="axioms.html#def-true-list-listp" data-sym="TRUE-LIST-LISTP">true-list-listp</a> alist))))
  (<a class="sym-link local-def" href="#def-read-useless-runes2" data-sym="READ-USELESS-RUNES2" title="(defun read-useless-runes2 (r alist fal filename ctx state)
  (declare
   (xargs :guard
    (and (rationalp r) (&lt; 0 r) (&lt;= r 1) (alistp alist)
         (true-list-listp alist))))
...">read-useless-runes2</a> r
    (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> alist)
    nil
    filename
    ctx
    state))</pre>
  </div>

<div class="form-block function" id="def-read-file-iterate-safe" data-defines="READ-FILE-ITERATE-SAFE" data-references="CONS,EQ,IF,REVERSE,READ-OBJECT,T,MV,READ-OBJECT-SUPPRESS,COND,IGNORE,DECLARE,READ-ACL2-ORACLE,VAL,ERP,OBJ,EOF,MV-LET,STATE,ACC,CHANNEL,DEFUN" data-used-by="OLD-AND-NEW-EVENT-DATA-FAL,READ-USELESS-RUNES" data-part-name="READ-FILE-ITERATE-SAFE" data-part-args="STATE,ACC,CHANNEL" data-part-body="CONS,EQ,IF,READ-FILE-ITERATE-SAFE,ACC,REVERSE,READ-OBJECT,T,MV,CHANNEL,READ-OBJECT-SUPPRESS,COND,IGNORE,DECLARE,READ-ACL2-ORACLE,VAL,ERP,STATE,OBJ,EOF,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-FILE-ITERATE-SAFE">read-file-iterate-safe</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-file-iterate-safe" data-sym="READ-FILE-ITERATE-SAFE" title="(defun read-file-iterate-safe (channel acc state)
  (mv-let (eof obj state)
          (mv-let (erp val state) (read-acl2-oracle state)
                  (declare (ignore erp))
                  (cond
...">read-file-iterate-safe</a>
  (channel acc state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eof obj state)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
      (<a class="sym-link system" href="axioms.html#def-read-acl2-oracle" data-sym="READ-ACL2-ORACLE">read-acl2-oracle</a> state)
      (declare (ignore erp))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (val (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (eof state)
            (<a class="sym-link system" href="axioms.html#def-read-object-suppress" data-sym="READ-OBJECT-SUPPRESS">read-object-suppress</a> channel state)
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> eof nil state)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> channel state))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (eof (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc) state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-read-file-iterate-safe" data-sym="READ-FILE-ITERATE-SAFE" title="(defun read-file-iterate-safe (channel acc state)
  (mv-let (eof obj state)
          (mv-let (erp val state) (read-acl2-oracle state)
                  (declare (ignore erp))
                  (cond
...">read-file-iterate-safe</a> channel
          (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> obj nil)
            acc
            (cons obj acc))
          state)))))</pre>
  </div>

<div class="form-block function" id="def-useless-runes-env-info" data-defines="USELESS-RUNES-ENV-INFO" data-references="STRING-EQUAL,VAL-LD,T,LIST*,GETENV!,VAL,ER-LET*,VALUE,NULL,OR,AND,COND,STATE,LDP,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W,DEFUN" data-used-by="USELESS-RUNES-VALUE" data-part-name="USELESS-RUNES-ENV-INFO" data-part-args="STATE,LDP,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W" data-part-body="STRING-EQUAL,VAL-LD,T,LIST*,STATE,GETENV!,VAL,ER-LET*,VALUE,LDP,USELESS-RUNES-R/W,NULL,OR,USELESS-RUNES-R/W-P,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="USELESS-RUNES-ENV-INFO">useless-runes-env-info</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-useless-runes-env-info" data-sym="USELESS-RUNES-ENV-INFO" title="(defun useless-runes-env-info (useless-runes-r/w useless-runes-r/w-p ldp state)
  (cond
   ((and useless-runes-r/w-p (or (null useless-runes-r/w) ldp)) (value nil))
   ((null ldp)
    (er-let* ((val (getenv! &quot;ACL2_USELESS_RUNES&quot; state)))
...">useless-runes-env-info</a>
  (useless-runes-r/w useless-runes-r/w-p ldp state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> useless-runes-r/w-p (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> useless-runes-r/w) ldp)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ldp) (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val (<a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a> <span class="string">"ACL2_USELESS_RUNES"</span> state)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="string">"ACL2_USELESS_RUNES"</span> val nil)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val-ld (<a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a> <span class="string">"ACL2_USELESS_RUNES_LD"</span> state)) (val (<a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a> <span class="string">"ACL2_USELESS_RUNES"</span> state)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> val-ld <span class="string">"CERT"</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="string">"ACL2_USELESS_RUNES"</span> val val-ld))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val-ld (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="string">"ACL2_USELESS_RUNES_LD"</span> val-ld nil)))))))))</pre>
  </div>

<div class="form-block function" id="def-useless-runes-source-msg" data-defines="USELESS-RUNES-SOURCE-MSG" data-references="CERTIFY-BOOK,LD,QUOTE,T,ASSERT$,IF,MSG,CDDR,VAL-LD,CADR,VAR,CAR,VAL,LET,COND,LDP,USELESS-RUNES-R/W,ENV-INFO,DEFUN" data-used-by="INITIAL-USELESS-RUNES,READ-USELESS-RUNES" data-part-name="USELESS-RUNES-SOURCE-MSG" data-part-args="LDP,USELESS-RUNES-R/W,ENV-INFO" data-part-body="USELESS-RUNES-R/W,CERTIFY-BOOK,LD,QUOTE,T,LDP,ASSERT$,IF,MSG,CDDR,VAL-LD,CADR,VAR,CAR,VAL,LET,ENV-INFO,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="USELESS-RUNES-SOURCE-MSG">useless-runes-source-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-useless-runes-source-msg" data-sym="USELESS-RUNES-SOURCE-MSG" title="(defun useless-runes-source-msg (env-info useless-runes-r/w ldp)
  (cond
   (env-info
    (let ((val (car env-info)) (var (cadr env-info)) (val-ld (cddr env-info)))
      (msg &quot;the value ~x0 of environment variable ~s1~@2&quot; val var
...">useless-runes-source-msg</a>
  (env-info useless-runes-r/w ldp)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (env-info (let ((val (car env-info)) (var (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> env-info))
          (val-ld (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> env-info)))
        (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"the value ~x0 of environment variable ~s1~@2"</span>
          val
          var
          (if val-ld
            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> ldp
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" (because environment variable ~
                           ACL2_USELESS_RUNES_LD has value ~s0)"</span>
                val-ld))
            <span class="string">""</span>))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0 keyword option :useless-runes ~x1"</span>
        (if ldp
          'ld
          '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>)
        useless-runes-r/w))))</pre>
  </div>

<div class="form-block function" id="def-read-useless-runes" data-defines="READ-USELESS-RUNES" data-references="USELESS-RUNES-SOURCE-MSG,SOFT,ER,T,<,ABS,READ-USELESS-RUNES1,CLOSE-INPUT-CHANNEL,STANDARD-CO,CONS,LIST,FMS!,EVENT,IO?,PPROGN,VALUE,READ-FILE-ITERATE-SAFE,SET-CURRENT-PACKAGE-STATE,CURRENT-PACKAGE,STATE-GLOBAL-LET*,ALIST,ER-LET*,COND,OPEN-INPUT-CHANNEL,CHANNEL,MV-LET,WITH-PACKAGES-UNHIDDEN,USELESS-RUNES-FILENAME,LET,<=,ZEROP,NOT,RATIONALP,AND,ASSERT$,STATE,CTX,LDP,VAL,USELESS-RUNES-R/W,ENV-INFO,FULL-BOOK-STRING,DEFUN" data-used-by="INITIAL-USELESS-RUNES" data-part-name="READ-USELESS-RUNES" data-part-args="STATE,CTX,LDP,VAL,USELESS-RUNES-R/W,ENV-INFO,FULL-BOOK-STRING" data-part-body="LDP,USELESS-RUNES-R/W,ENV-INFO,USELESS-RUNES-SOURCE-MSG,SOFT,ER,T,<,CTX,ABS,READ-USELESS-RUNES1,CLOSE-INPUT-CHANNEL,STANDARD-CO,CONS,LIST,FMS!,EVENT,IO?,PPROGN,VALUE,READ-FILE-ITERATE-SAFE,SET-CURRENT-PACKAGE-STATE,CURRENT-PACKAGE,STATE-GLOBAL-LET*,ALIST,ER-LET*,COND,OPEN-INPUT-CHANNEL,STATE,CHANNEL,MV-LET,WITH-PACKAGES-UNHIDDEN,FULL-BOOK-STRING,USELESS-RUNES-FILENAME,LET,<=,ZEROP,NOT,VAL,RATIONALP,AND,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-USELESS-RUNES">read-useless-runes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-useless-runes" data-sym="READ-USELESS-RUNES" title="(defun read-useless-runes
       (full-book-string env-info useless-runes-r/w val ldp ctx state)
  (assert$ (and (rationalp val) (not (zerop val)) (&lt;= -1 val) (&lt;= val 1))
           (let ((useless-runes-filename
                  (useless-runes-filename full-book-string)))
...">read-useless-runes</a>
  (full-book-string env-info
    useless-runes-r/w
    val
    ldp
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp val)
      (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (zerop val))
      (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">-1</span> val)
      (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> val <span class="number">1</span>))
    (let ((useless-runes-filename (useless-runes-filename full-book-string)))
      (<a class="sym-link system" href="history-management.html#def-with-packages-unhidden" data-sym="WITH-PACKAGES-UNHIDDEN">with-packages-unhidden</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (channel state)
          (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> useless-runes-filename <span class="keyword">:object</span> state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (channel (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((alist (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span> set-current-package-state))
                     (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (alist state)
                       (<a class="sym-link local-def" href="#def-read-file-iterate-safe" data-sym="READ-FILE-ITERATE-SAFE" title="(defun read-file-iterate-safe (channel acc state)
  (mv-let (eof obj state)
          (mv-let (erp val state) (read-acl2-oracle state)
                  (declare (ignore erp))
                  (cond
...">read-file-iterate-safe</a> channel nil state)
                       (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> alist)))))
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
                    nil
                    state
                    (useless-runes-filename)
                    (<a class="sym-link system" href="basis-a.html#def-fms_21" data-sym="FMS!">fms!</a> <span class="string">"; Note: Consulting useless-runes ~
                                     file,~|; ~s0."</span>
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 useless-runes-filename))
                      (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                      state
                      nil))
                  (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> channel state)
                  (<a class="sym-link local-def" href="#def-read-useless-runes1" data-sym="READ-USELESS-RUNES1" title="(defun read-useless-runes1 (r alist filename ctx state)
  (declare
   (xargs :guard
    (and (rationalp r) (&lt; 0 r) (&lt;= r 1) (alistp alist)
         (true-list-listp alist))))">read-useless-runes1</a> (abs val)
                    alist
                    useless-runes-filename
                    ctx
                    state))))
            ((&lt; val <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"Unable to open file ~x0 for reading useless-runes data, ~
                      as specified by ~@1; see :DOC useless-runes."</span>
                useless-runes-filename
                (<a class="sym-link local-def" href="#def-useless-runes-source-msg" data-sym="USELESS-RUNES-SOURCE-MSG" title="(defun useless-runes-source-msg (env-info useless-runes-r/w ldp)
  (cond
   (env-info
    (let ((val (car env-info)) (var (cadr env-info)) (val-ld (cddr env-info)))
      (msg &quot;the value ~x0 of environment variable ~s1~@2&quot; val var
...">useless-runes-source-msg</a> env-info useless-runes-r/w ldp)))))))))</pre>
  </div>

<div class="form-block function" id="def-free-useless-runes" data-defines="FREE-USELESS-RUNES" data-references="QUOTE,HARD,ER,CAR,CLOSE-OUTPUT-CHANNEL,CHANNEL,FAST-ALIST-FREE,PROG2$,FAST-ALIST,ACCESS,CASE,T,NULL,COND,STATE,USELESS-RUNES,DEFUN" data-used-by="UPDATE-USELESS-RUNES" data-part-name="FREE-USELESS-RUNES" data-part-args="STATE,USELESS-RUNES" data-part-body="FREE-USELESS-RUNES,QUOTE,HARD,ER,CAR,CLOSE-OUTPUT-CHANNEL,CHANNEL,FAST-ALIST-FREE,PROG2$,FAST-ALIST,ACCESS,CASE,T,STATE,USELESS-RUNES,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FREE-USELESS-RUNES">free-useless-runes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-free-useless-runes" data-sym="FREE-USELESS-RUNES" title="(defun free-useless-runes (useless-runes state)
  (cond ((null useless-runes) state)
        (t
         (case (access useless-runes useless-runes :tag)
           (fast-alist
...">free-useless-runes</a>
  (<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>) state)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <span class="keyword">:tag</span>)
        (fast-alist (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (fast-alist-free (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <span class="keyword">:data</span>))
            state))
        (channel (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> (car (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <span class="keyword">:data</span>))
            state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
              '<a class="sym-link local-def" href="#def-free-useless-runes" data-sym="FREE-USELESS-RUNES" title="(defun free-useless-runes (useless-runes state)
  (cond ((null useless-runes) state)
        (t
         (case (access useless-runes useless-runes :tag)
           (fast-alist
...">free-useless-runes</a>
              <span class="string">"Implementation error: Unexpected value of ~
                        useless-runes, ~x0"</span>
              <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>)
            state))))))</pre>
  </div>

<div class="form-block function" id="def-useless-runes-value" data-defines="USELESS-RUNES-VALUE" data-references="<=,INTEGERP,MSG,ASSERT$,SOFT,ER,/,DECIMAL-STRING-TO-NUMBER,LIST,COERCE,ALL-DIGITS-P,PERCENT,1-,LEN2,SUBSEQ,INT=,STR,CHAR,EQL,ZEROP,IF,SIGN,LENGTH,LEN,LET*,EQUAL,NULL,OR,CASE,WRITE,QUOTE,CONS,VALUE,NOT,STRING-EQUAL,AND,T,CDDR,CADR,CAR,MV,COND,VAL-LD,ENV-VAL,ENV-VAR,MV-LET,USELESS-RUNES-ENV-INFO,ENV-INFO,ER-LET*,LET,STATE,CTX,LDP,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W,DEFUN" data-used-by="INITIAL-USELESS-RUNES" data-part-name="USELESS-RUNES-VALUE" data-part-args="STATE,CTX,LDP,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W" data-part-body="<=,INTEGERP,MSG,ASSERT$,CTX,SOFT,ER,/,DECIMAL-STRING-TO-NUMBER,LIST,COERCE,ALL-DIGITS-P,PERCENT,1-,LEN2,SUBSEQ,INT=,STR,CHAR,EQL,ZEROP,IF,SIGN,LENGTH,LEN,LET*,EQUAL,NULL,OR,CASE,WRITE,QUOTE,CONS,VALUE,NOT,STRING-EQUAL,AND,T,CDDR,CADR,CAR,MV,COND,VAL-LD,ENV-VAL,ENV-VAR,MV-LET,STATE,LDP,USELESS-RUNES-ENV-INFO,ENV-INFO,ER-LET*,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="USELESS-RUNES-VALUE">useless-runes-value</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-useless-runes-value" data-sym="USELESS-RUNES-VALUE" title="(defun useless-runes-value
       (useless-runes-r/w useless-runes-r/w-p ldp ctx state)
  (let ((useless-runes-r/w useless-runes-r/w)
        (useless-runes-r/w-p useless-runes-r/w-p))
    (er-let*
...">useless-runes-value</a>
  (useless-runes-r/w useless-runes-r/w-p ldp ctx state)
  (let ((useless-runes-r/w useless-runes-r/w) (useless-runes-r/w-p useless-runes-r/w-p))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((env-info (<a class="sym-link local-def" href="#def-useless-runes-env-info" data-sym="USELESS-RUNES-ENV-INFO" title="(defun useless-runes-env-info (useless-runes-r/w useless-runes-r/w-p ldp state)
  (cond
   ((and useless-runes-r/w-p (or (null useless-runes-r/w) ldp)) (value nil))
   ((null ldp)
    (er-let* ((val (getenv! &quot;ACL2_USELESS_RUNES&quot; state)))
...">useless-runes-env-info</a> useless-runes-r/w
           useless-runes-r/w-p
           ldp
           state)))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (env-var env-val val-ld)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (env-info (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car env-info) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> env-info) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> env-info)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil nil)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> env-info (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> env-val <span class="string">"WRITE"</span>) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ldp)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons env-info 'write)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> useless-runes-r/w
              (<span class="keyword">:write</span> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons nil 'write)))
              (<span class="keyword">:read</span> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons nil <span class="number">1</span>)))
              (<span class="keyword">:read?</span> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons nil <span class="number">-1</span>)))
              ((nil) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (useless-runes-r/w-p (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                  ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> env-info) (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> env-val <span class="string">"NIL"</span>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                  ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> env-val <span class="string">"READ"</span>) (equal env-val <span class="string">"100"</span>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons env-info <span class="number">1</span>)))
                  ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> env-val <span class="string">"READ?"</span>) (equal env-val <span class="string">"-100"</span>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons env-info <span class="number">-1</span>)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> env-val)) (sign (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (zerop <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)) (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> env-val <span class="number">0</span>) #\-))
                            <span class="number">1</span>
                            <span class="number">0</span>))
                        (str (if (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> sign <span class="number">1</span>)
                            (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> env-val <span class="number">1</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
                            env-val))
                        (len2 (if (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> sign <span class="number">1</span>)
                            (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
                            <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>))
                        (percent (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> len2 <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> len2 <span class="number">2</span>))
                            (all-digits-p (coerce str '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>) <span class="number">10</span>)
                            (<a class="sym-link system" href="axioms.html#def-decimal-string-to-number" data-sym="DECIMAL-STRING-TO-NUMBER">decimal-string-to-number</a> str len2 <span class="number">0</span>))))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (percent (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons env-info
                              (<a class="sym-link system" href="axioms.html#def-_2F" data-sym="/">/</a> percent
                                (if (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> sign <span class="number">1</span>)
                                  <span class="number">-100</span>
                                  <span class="number">100</span>)))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                            ctx
                            <span class="string">"Illegal value ~x0 for environment variable ~
                               ~@1.  See :DOC useless-runes."</span>
                            env-val
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (val-ld (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> ldp
                                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" (because environment variable ~
                                       ACL2_USELESS_RUNES_LD has value ~s0)"</span>
                                    val-ld)))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> env-var)))))))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp useless-runes-r/w)
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (zerop useless-runes-r/w))
                     (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">-100</span> useless-runes-r/w)
                     (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> useless-runes-r/w <span class="number">100</span>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons nil (<a class="sym-link system" href="axioms.html#def-_2F" data-sym="/">/</a> useless-runes-r/w <span class="number">100</span>))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"Illegal value ~x0 for certify-book parameter ~
                      :USELESS-RUNES.  See :DOC useless-runes."</span>
                      useless-runes-r/w)))))))))))</pre>
  </div>

<div class="form-block function" id="def-initial-useless-runes" data-defines="INITIAL-USELESS-RUNES" data-references="FAST-ALIST,READ-USELESS-RUNES,FAL,ZEROP,<=,RATIONALP,ASSERT$,KNOWN-PACKAGE-ALIST,STRIP-CARS,CONS,CHANNEL,USELESS-RUNES,MAKE,USELESS-RUNES-SOURCE-MSG,OPEN-OUTPUT-CHANNEL,CHAN,MV-LET,USELESS-RUNES-FILENAME,WRITE,EQ,LD,SOFT,ER,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,EXTEND-PATHNAME,NULL,CDR,VAL,CAR,ENV-INFO,USELESS-RUNES-VALUE,PAIR,ER-LET*,T,VALUE,OR,NOT,COND,1-,TERMINAL-SUBSTRINGP,<,LENGTH,LEN,STRINGP,AND,BOOKP,LET,STATE,CTX,LDP,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="INITIAL-USELESS-RUNES" data-part-args="STATE,CTX,LDP,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W,FULL-BOOK-STRING" data-part-body="FAST-ALIST,READ-USELESS-RUNES,FAL,ZEROP,<=,RATIONALP,ASSERT$,KNOWN-PACKAGE-ALIST,STRIP-CARS,CONS,CHANNEL,USELESS-RUNES,MAKE,USELESS-RUNES-SOURCE-MSG,OPEN-OUTPUT-CHANNEL,CHAN,MV-LET,USELESS-RUNES-FILENAME,WRITE,EQ,LD,SOFT,ER,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,EXTEND-PATHNAME,NULL,CDR,VAL,CAR,ENV-INFO,STATE,CTX,LDP,USELESS-RUNES-R/W,USELESS-RUNES-VALUE,PAIR,ER-LET*,T,VALUE,USELESS-RUNES-R/W-P,OR,NOT,COND,1-,TERMINAL-SUBSTRINGP,<,LENGTH,LEN,FULL-BOOK-STRING,STRINGP,AND,BOOKP,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INITIAL-USELESS-RUNES">initial-useless-runes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-initial-useless-runes" data-sym="INITIAL-USELESS-RUNES" title="(defun initial-useless-runes
       (full-book-string useless-runes-r/w useless-runes-r/w-p ldp ctx state)
  (let ((bookp
         (and (stringp full-book-string)
              (let ((len (length full-book-string)))
...">initial-useless-runes</a>
  (full-book-string useless-runes-r/w
    useless-runes-r/w-p
    ldp
    ctx
    state)
  (let ((bookp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp full-book-string)
         (let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> full-book-string)))
           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (&lt; <span class="number">5</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
             (terminal-substringp <span class="string">".lisp"</span> full-book-string <span class="number">4</span> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)))))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> useless-runes-r/w-p bookp)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pair (<a class="sym-link local-def" href="#def-useless-runes-value" data-sym="USELESS-RUNES-VALUE" title="(defun useless-runes-value
       (useless-runes-r/w useless-runes-r/w-p ldp ctx state)
  (let ((useless-runes-r/w useless-runes-r/w)
        (useless-runes-r/w-p useless-runes-r/w-p))
    (er-let*
...">useless-runes-value</a> useless-runes-r/w
               useless-runes-r/w-p
               ldp
               ctx
               state)) (env-info (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (car pair)))
            (val (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cdr pair)))
            (full-book-string (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> val) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ldp)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> full-book-string))
                (bookp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-extend-pathname" data-sym="EXTEND-PATHNAME" title="(defun extend-pathname (dir0 file-name state)
  (extend-pathname+ dir0 file-name nil state))">extend-pathname</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)
                      full-book-string
                      state)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"A non-nil :useless-runes argument is only ~
                             permitted for a call of ~x0 when the first ~
                             argument is a string ending in &quot;.lisp&quot;.  But ~
                             the first argument is ~x1."</span>
                    'ld
                    full-book-string)))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> val) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val 'write) (let ((useless-runes-filename (useless-runes-filename full-book-string)))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (chan state)
                  (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> useless-runes-filename
                    <span class="keyword">:character</span> state)
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> chan) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                        ctx
                        <span class="string">"Unable to open file ~x0 for writing useless-runes data (as ~
                 specified by ~@1); see :DOC useless-runes."</span>
                        useless-runes-filename
                        (<a class="sym-link local-def" href="#def-useless-runes-source-msg" data-sym="USELESS-RUNES-SOURCE-MSG" title="(defun useless-runes-source-msg (env-info useless-runes-r/w ldp)
  (cond
   (env-info
    (let ((val (car env-info)) (var (cadr env-info)) (val-ld (cddr env-info)))
      (msg &quot;the value ~x0 of environment variable ~s1~@2&quot; val var
...">useless-runes-source-msg</a> env-info useless-runes-r/w ldp)))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>
                          <span class="keyword">:tag</span> 'channel
                          <span class="keyword">:data</span> (cons chan (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> state)))
                          <span class="keyword">:full-book-string</span> full-book-string)))))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp val)
                  (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">-1</span> val)
                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (zerop val))
                  (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> val <span class="number">1</span>))
                (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((fal (<a class="sym-link local-def" href="#def-read-useless-runes" data-sym="READ-USELESS-RUNES" title="(defun read-useless-runes
       (full-book-string env-info useless-runes-r/w val ldp ctx state)
  (assert$ (and (rationalp val) (not (zerop val)) (&lt;= -1 val) (&lt;= val 1))
           (let ((useless-runes-filename
                  (useless-runes-filename full-book-string)))
...">read-useless-runes</a> full-book-string
                       env-info
                       useless-runes-r/w
                       val
                       ldp
                       ctx
                       state)))
                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>
                      <span class="keyword">:tag</span> 'fast-alist
                      <span class="keyword">:data</span> fal
                      <span class="keyword">:full-book-string</span> full-book-string)))))))))))</pre>
  </div>

<div class="form-block function" id="def-maybe-refresh-useless-runes" data-defines="MAYBE-REFRESH-USELESS-RUNES" data-references="T,MAKE-FAST-ALIST,CHANGE,FAST-ALIST,QUOTE,ACCESS,EQ,AND,COND,USELESS-RUNES,DEFUN" data-used-by="UPDATE-USELESS-RUNES" data-part-name="MAYBE-REFRESH-USELESS-RUNES" data-part-args="USELESS-RUNES" data-part-body="T,MAKE-FAST-ALIST,CHANGE,FAST-ALIST,QUOTE,ACCESS,EQ,USELESS-RUNES,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-REFRESH-USELESS-RUNES">maybe-refresh-useless-runes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-refresh-useless-runes" data-sym="MAYBE-REFRESH-USELESS-RUNES" title="(defun maybe-refresh-useless-runes (useless-runes)
  (cond
   ((and useless-runes
         (eq (access useless-runes useless-runes :tag) &#39;fast-alist))
    (change useless-runes useless-runes :data
...">maybe-refresh-useless-runes</a>
  (<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <span class="keyword">:tag</span>) 'fast-alist)) (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>
        <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>
        <span class="keyword">:data</span> (make-fast-alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <span class="keyword">:data</span>))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>)))</pre>
  </div>

<div class="form-block function" id="def-update-useless-runes" data-defines="UPDATE-USELESS-RUNES" data-references="MAYBE-REFRESH-USELESS-RUNES,F-PUT-GLOBAL,QUOTE,F-GET-GLOBAL,FREE-USELESS-RUNES,PPROGN,STATE,USELESS-RUNES,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="UPDATE-USELESS-RUNES" data-part-args="STATE,USELESS-RUNES" data-part-body="MAYBE-REFRESH-USELESS-RUNES,F-PUT-GLOBAL,STATE,USELESS-RUNES,QUOTE,F-GET-GLOBAL,FREE-USELESS-RUNES,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-USELESS-RUNES">update-useless-runes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-useless-runes" data-sym="UPDATE-USELESS-RUNES" title="(defun update-useless-runes (useless-runes state)
  (pprogn (free-useless-runes (f-get-global &#39;useless-runes state) state)
          (f-put-global &#39;useless-runes
                        (maybe-refresh-useless-runes useless-runes) state)))">update-useless-runes</a>
  (<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-free-useless-runes" data-sym="FREE-USELESS-RUNES" title="(defun free-useless-runes (useless-runes state)
  (cond ((null useless-runes) state)
        (t
         (case (access useless-runes useless-runes :tag)
           (fast-alist
...">free-useless-runes</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> state)
      state)
    (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>
      (<a class="sym-link local-def" href="#def-maybe-refresh-useless-runes" data-sym="MAYBE-REFRESH-USELESS-RUNES" title="(defun maybe-refresh-useless-runes (useless-runes)
  (cond
   ((and useless-runes
         (eq (access useless-runes useless-runes :tag) &#39;fast-alist))
    (change useless-runes useless-runes :data
...">maybe-refresh-useless-runes</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>)
      state)))</pre>
  </div>

<div class="form-block function" id="def-eval-some-portcullis-cmds" data-defines="EVAL-SOME-PORTCULLIS-CMDS" data-references="MV,IGNORE,DECLARE,PROOFS-CO,NTHCDR,EVAL-EVENT-LST,IGNORE-KPA,EXPANSION-ALIST,VAL,ERP,MV-LET,T,SKIP-PROOFS-BY-SYSTEM,INCLUDE-BOOK,QUOTE,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*,STATE,CTX,PORTCULLIS-CMDS,PORT-INDEX,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+,EVAL-EVENT-LST" data-part-name="EVAL-SOME-PORTCULLIS-CMDS" data-part-args="STATE,CTX,PORTCULLIS-CMDS,PORT-INDEX" data-part-body="MV,IGNORE,DECLARE,PROOFS-CO,CTX,EVAL-SOME-PORTCULLIS-CMDS,PORTCULLIS-CMDS,PORT-INDEX,NTHCDR,EVAL-EVENT-LST,STATE,IGNORE-KPA,EXPANSION-ALIST,VAL,ERP,MV-LET,T,SKIP-PROOFS-BY-SYSTEM,INCLUDE-BOOK,QUOTE,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVAL-SOME-PORTCULLIS-CMDS">eval-some-portcullis-cmds</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-eval-some-portcullis-cmds" data-sym="EVAL-SOME-PORTCULLIS-CMDS" title="(defun eval-some-portcullis-cmds (port-index portcullis-cmds ctx state)
  (state-global-let*
   ((ld-skip-proofsp &#39;include-book) (skip-proofs-by-system t))
   (mv-let (erp val expansion-alist ignore-kpa state)
           (eval-event-lst 0 nil (nthcdr port-index portcullis-cmds) t nil nil
...">eval-some-portcullis-cmds</a>
  (port-index portcullis-cmds ctx state)
  (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (skip-proofs-by-system <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val expansion-alist ignore-kpa state)
      (<a class="sym-link local-def" href="#def-eval-event-lst" data-sym="EVAL-EVENT-LST" title="(defun eval-event-lst
       (index expansion-alist ev-lst quietp environment in-local-flg last-val
        other-control kpa caller ctx channel state)
  (flet ((event-macros (caller)
           (if (eq caller &#39;eval-some-portcullis-cmds)
...">eval-event-lst</a> <span class="number">0</span>
        nil
        (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> port-index portcullis-cmds)
        <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
        nil
        nil
        nil
        nil
        nil
        '<a class="sym-link local-def" href="#def-eval-some-portcullis-cmds" data-sym="EVAL-SOME-PORTCULLIS-CMDS" title="(defun eval-some-portcullis-cmds (port-index portcullis-cmds ctx state)
  (state-global-let*
   ((ld-skip-proofsp &#39;include-book) (skip-proofs-by-system t))
   (mv-let (erp val expansion-alist ignore-kpa state)
           (eval-event-lst 0 nil (nthcdr port-index portcullis-cmds) t nil nil
...">eval-some-portcullis-cmds</a>
        ctx
        (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
        state)
      (declare (ignore expansion-alist ignore-kpa))
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state))))</pre>
  </div>

<div class="form-block function" id="def-compress-cltl-command-stack-rec" data-defines="COMPRESS-CLTL-COMMAND-STACK-REC" data-references="DEFABSSTOBJ,DEFSTOBJ,DEFMACRO,DEFCONST,MEMBER-EQ,DEFX,RECLASSIFYING,QUASIQUOTE,HONS-ACONS,CADR,EQ,OLD,HONS-GET,PAIR,CAAR,NAME,LET*,ALISTP,AND,ASSERT$,DEFS,&,MODE,DEFUNS,QUOTE,CASE-MATCH,CAR,X,LET,CDR,T,FAST-ALIST-FREE,STRIP-CDRS,ENDP,COND,FAL,STACK,DEFUN" data-used-by="COMPRESS-CLTL-COMMAND-STACK" data-part-name="COMPRESS-CLTL-COMMAND-STACK-REC" data-part-args="FAL,STACK" data-part-body="DEFABSSTOBJ,DEFSTOBJ,DEFMACRO,DEFCONST,MEMBER-EQ,DEFX,RECLASSIFYING,QUASIQUOTE,HONS-ACONS,CADR,EQ,OLD,HONS-GET,PAIR,CAAR,NAME,LET*,ALISTP,AND,ASSERT$,DEFS,&,MODE,DEFUNS,QUOTE,CASE-MATCH,CAR,X,LET,CDR,COMPRESS-CLTL-COMMAND-STACK-REC,T,FAL,FAST-ALIST-FREE,STRIP-CDRS,STACK,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPRESS-CLTL-COMMAND-STACK-REC">compress-cltl-command-stack-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-compress-cltl-command-stack-rec" data-sym="COMPRESS-CLTL-COMMAND-STACK-REC" title="(defun compress-cltl-command-stack-rec (stack fal)
  (cond ((endp stack) (strip-cdrs (fast-alist-free fal)))
        (t
         (compress-cltl-command-stack-rec (cdr stack)
                                          (let ((x (car stack)))
...">compress-cltl-command-stack-rec</a>
  (stack fal)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> stack) (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (fast-alist-free fal)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-compress-cltl-command-stack-rec" data-sym="COMPRESS-CLTL-COMMAND-STACK-REC" title="(defun compress-cltl-command-stack-rec (stack fal)
  (cond ((endp stack) (strip-cdrs (fast-alist-free fal)))
        (t
         (compress-cltl-command-stack-rec (cdr stack)
                                          (let ((x (car stack)))
...">compress-cltl-command-stack-rec</a> (cdr stack)
        (let ((x (car stack)))
          (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> x
            (('<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a> mode &amp; . defs) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> defs) defs)
                (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> defs)) (pair (hons-get name fal)))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pair (let ((old (cdr pair)))
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> old) <span class="keyword">:program</span>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> mode <span class="keyword">:logic</span>)) (hons-acons name `(<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a> <span class="keyword">:logic</span> reclassifying ,@DEFS) fal))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> fal))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (hons-acons name x fal))))))
            ((defx name . &amp;) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> defx '(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> <a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a>))
                   (hons-get name fal)) fal)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (hons-acons name x fal))))
            (&amp; (hons-acons nil x fal))))))))</pre>
  </div>

<div class="form-block function" id="def-compress-cltl-command-stack" data-defines="COMPRESS-CLTL-COMMAND-STACK" data-references="REVERSE,COMPRESS-CLTL-COMMAND-STACK-REC,STACK,DEFUN" data-used-by="CERTIFY-BOOK-STEP-3+" data-part-name="COMPRESS-CLTL-COMMAND-STACK" data-part-args="STACK" data-part-body="STACK,REVERSE,COMPRESS-CLTL-COMMAND-STACK-REC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPRESS-CLTL-COMMAND-STACK">compress-cltl-command-stack</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-compress-cltl-command-stack" data-sym="COMPRESS-CLTL-COMMAND-STACK" title="(defun compress-cltl-command-stack (stack)
  (compress-cltl-command-stack-rec (reverse stack) nil))">compress-cltl-command-stack</a>
  (stack)
  (<a class="sym-link local-def" href="#def-compress-cltl-command-stack-rec" data-sym="COMPRESS-CLTL-COMMAND-STACK-REC" title="(defun compress-cltl-command-stack-rec (stack fal)
  (cond ((endp stack) (strip-cdrs (fast-alist-free fal)))
        (t
         (compress-cltl-command-stack-rec (cdr stack)
                                          (let ((x (car stack)))
...">compress-cltl-command-stack-rec</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> stack) nil))</pre>
  </div>

<div class="form-block function" id="def-event-data-channel" data-defines="EVENT-DATA-CHANNEL" data-references="SOFT,ER,OPEN-OUTPUT-CHANNEL,CHANNEL,MV-LET,EVENT-DATA-FILENAME,FILENAME,LET,T,NULL,COND,GETENV!,VALUE,IF,ER-LET*,STATE,CTX,WRITE-EVENT-DATA-P,WRITE-EVENT-DATA,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-FN,CERTIFY-BOOK-STEP-3+" data-part-name="EVENT-DATA-CHANNEL" data-part-args="STATE,CTX,WRITE-EVENT-DATA-P,WRITE-EVENT-DATA,FULL-BOOK-STRING" data-part-body="CTX,SOFT,ER,OPEN-OUTPUT-CHANNEL,CHANNEL,MV-LET,FULL-BOOK-STRING,EVENT-DATA-FILENAME,FILENAME,LET,T,NULL,COND,STATE,GETENV!,VALUE,WRITE-EVENT-DATA-P,IF,WRITE-EVENT-DATA,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVENT-DATA-CHANNEL">event-data-channel</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-event-data-channel" data-sym="EVENT-DATA-CHANNEL" title="(defun event-data-channel
       (full-book-string write-event-data write-event-data-p ctx state)
  (er-let*
   ((write-event-data
     (if write-event-data-p
...">event-data-channel</a>
  (full-book-string write-event-data
    write-event-data-p
    ctx
    state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((write-event-data (if write-event-data-p
         (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> write-event-data)
         (<a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a> <span class="string">"ACL2_WRITE_EVENT_DATA"</span> state))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> write-event-data) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((filename (event-data-filename full-book-string <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (channel state)
            (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> filename <span class="keyword">:object</span> state)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> channel) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"Unable to open output channel for writing event-data ~
                        to file ~x0"</span>
                  filename))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> channel)))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-certify-book-prelim" data-defines="CHK-ACCEPTABLE-CERTIFY-BOOK-PRELIM" data-references="VALUE,T,SET-WRITE-ACL2X,WRITE-ACL2X,F-GET-GLOBAL,BOOLEANP,-,SUBSEQ,EQUAL,<=,LENGTH,LEN,LET,STRINGP,AND,SOFT,ER,COMMAND-LANDMARK,QUOTE,W,CAAR,EQ,NOT,COND,STATE,CTX,TTAGSXP,ACL2X,USER-BOOK-NAME,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CHK-ACCEPTABLE-CERTIFY-BOOK-PRELIM" data-part-args="STATE,CTX,TTAGSXP,ACL2X,USER-BOOK-NAME" data-part-body="VALUE,T,SET-WRITE-ACL2X,WRITE-ACL2X,F-GET-GLOBAL,TTAGSXP,ACL2X,BOOLEANP,-,SUBSEQ,EQUAL,<=,LENGTH,LEN,LET,USER-BOOK-NAME,STRINGP,AND,CTX,SOFT,ER,COMMAND-LANDMARK,QUOTE,STATE,W,CAAR,EQ,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-CERTIFY-BOOK-PRELIM">chk-acceptable-certify-book-prelim</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-certify-book-prelim" data-sym="CHK-ACCEPTABLE-CERTIFY-BOOK-PRELIM" title="(defun chk-acceptable-certify-book-prelim
       (user-book-name acl2x ttagsxp ctx state)
  (cond
   ((not (eq (caar (w state)) &#39;command-landmark))
    (er soft ctx
...">chk-acceptable-certify-book-prelim</a>
  (user-book-name acl2x ttagsxp ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) 'command-landmark)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Certify-book can only be run at the top-level, either directly in ~
         the top-level loop or at the top level of LD."</span>))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp user-book-name)
       (let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> user-book-name)))
         (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">10</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
           (equal (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> user-book-name (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <span class="number">10</span>) <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>) <span class="string">"@expansion"</span>)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Book filenames may not end in &quot;@expansion&quot;."</span>))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> acl2x)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The argument :ACL2X for certify-book must take on the value of T or ~
         NIL.  The value ~x0 is thus illegal.  See :DOC certify-book."</span>
        acl2x))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ttagsxp (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> acl2x)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The  :TTAGSX argument for certify-book may only be supplied if ~
         :ACL2X is T.  See :DOC set-write-acl2x."</span>))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> acl2x) (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'write-acl2x state)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Apparently set-write-acl2x has been evaluated with argument value ~
         ~x0, yet certify-book is being called without supplying keyword ~
         argument :ACL2X T.  This is illegal.  See :DOC set-write-acl2x.  If ~
         you do not intend to write a .acl2x file, you may wish to evaluate ~
         ~x1."</span>
        (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'write-acl2x state)
        '(<a class="sym-link system" href="basis-b.html#def-set-write-acl2x" data-sym="SET-WRITE-ACL2X">set-write-acl2x</a> nil state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-certify-book-write-port" data-defines="CERTIFY-BOOK-WRITE-PORT" data-references="SOFT,ER,STRING-UPCASE,INTERN$,GETENV!,STR,ER-LET*,EQ,VALUE,T,QUOTE,MEMBER-EQ,COND,STATE,CTX,PCERT,WRITE-PORT,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CERTIFY-BOOK-WRITE-PORT" data-part-args="STATE,CTX,PCERT,WRITE-PORT" data-part-body="CTX,SOFT,ER,STRING-UPCASE,INTERN$,STATE,GETENV!,STR,ER-LET*,PCERT,EQ,VALUE,T,QUOTE,WRITE-PORT,MEMBER-EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-WRITE-PORT">certify-book-write-port</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-write-port" data-sym="CERTIFY-BOOK-WRITE-PORT" title="(defun certify-book-write-port (write-port pcert ctx state)
  (cond ((member-eq write-port &#39;(t nil)) (value write-port))
        ((eq write-port :default)
         (cond (pcert (value nil))
               (t
...">certify-book-write-port</a>
  (write-port pcert ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> write-port '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> write-port))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> write-port <span class="keyword">:default</span>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pcert (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((str (<a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a> <span class="string">"ACL2_WRITE_PORT"</span> state)))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (str (<a class="sym-link system" href="axioms.html#def-intern_24" data-sym="INTERN$">intern$</a> (<a class="sym-link system" href="axioms.html#def-string-upcase" data-sym="STRING-UPCASE">string-upcase</a> str) <span class="string">"ACL2"</span>)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Illegal :write-port argument, ~x0.  See :DOC certify-book."</span>))))</pre>
  </div>

<div class="form-block function" id="def-certify-book-cert-op" data-defines="CERTIFY-BOOK-CERT-OP" data-references="MSG,OTHERWISE,CASE,CONSP,IF,VALUE,T,SOFT,ER,AND,COND,STATE,CTX,WRITE-ACL2X,PCERT-ENV,PCERT,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CERTIFY-BOOK-CERT-OP" data-part-args="STATE,CTX,WRITE-ACL2X,PCERT-ENV,PCERT" data-part-body="MSG,OTHERWISE,CASE,CONSP,IF,VALUE,T,PCERT-ENV,CTX,SOFT,ER,PCERT,WRITE-ACL2X,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-CERT-OP">certify-book-cert-op</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-cert-op" data-sym="CERTIFY-BOOK-CERT-OP" title="(defun certify-book-cert-op (pcert pcert-env write-acl2x ctx state)
  (cond
   ((and write-acl2x pcert)
    (er soft ctx
        &quot;It is illegal to specify the writing  of a .acl2x file when a ~
...">certify-book-cert-op</a>
  (pcert pcert-env write-acl2x ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> write-acl2x pcert) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"It is illegal to specify the writing  of a .acl2x file when a ~
              non-nil value for :pcert (here, ~x1) is specified~@0."</span>
        pcert
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pcert-env <span class="string">" (even when the :pcert argument is supplied, as in this ~
                     case, by an environment variable)"</span>)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
    (write-acl2x (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if (consp write-acl2x)
          <span class="keyword">:write-acl2xu</span> <span class="keyword">:write-acl2x</span>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> pcert
        (<span class="keyword">:create</span> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:create-pcert</span>))
        (<span class="keyword">:convert</span> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:convert-pcert</span>))
        ((<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:create+convert-pcert</span>))
        ((nil) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Illegal value of :pcert, ~x0~@1.  See :DOC certify-book."</span>
            pcert
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pcert-env (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" (from environment variable ACL2_PCERT_ARG=~x0"</span>
                  pcert-env))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))))))</pre>
  </div>

<div class="form-block function" id="def-certify-book-compile-flg" data-defines="CERTIFY-BOOK-COMPILE-FLG" data-references="SOFT,ER,NOT,COMPILER-ENABLED,QUOTE,F-GET-GLOBAL,NULL,T,VALUE,EQ,STRING-EQUAL,AND,OR,COND,GETENV!,ENV-COMPILE-FLG,ER-LET*,STATE,CTX,CERT-OP,COMPILE-FLG,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CERTIFY-BOOK-COMPILE-FLG" data-part-args="STATE,CTX,CERT-OP,COMPILE-FLG" data-part-body="CTX,SOFT,ER,NOT,COMPILER-ENABLED,QUOTE,F-GET-GLOBAL,NULL,CERT-OP,T,VALUE,COMPILE-FLG,EQ,STRING-EQUAL,AND,OR,COND,STATE,GETENV!,ENV-COMPILE-FLG,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-COMPILE-FLG">certify-book-compile-flg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-compile-flg" data-sym="CERTIFY-BOOK-COMPILE-FLG" title="(defun certify-book-compile-flg (compile-flg cert-op ctx state)
  (er-let* ((env-compile-flg (getenv! &quot;ACL2_COMPILE_FLG&quot; state)))
           (cond
            ((or (and env-compile-flg (string-equal env-compile-flg &quot;ALL&quot;))
                 (eq compile-flg :all))
...">certify-book-compile-flg</a>
  (compile-flg <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> ctx state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((env-compile-flg (<a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a> <span class="string">"ACL2_COMPILE_FLG"</span> state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> env-compile-flg (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> env-compile-flg <span class="string">"ALL"</span>))
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> compile-flg <span class="keyword">:all</span>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>)
         (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled state))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> compile-flg <span class="keyword">:default</span>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> compile-flg))
      ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> env-compile-flg)
         (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> env-compile-flg <span class="string">"T"</span>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      ((<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> env-compile-flg <span class="string">"NIL"</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"Illegal value, ~x0, for environment variable ~
                  ACL2_COMPILE_FLG.  The legal values are (after converting ~
                  to uppercase) &quot;&quot;, &quot;T&quot;, &quot;NIL&quot;, &quot;&quot;, and &quot;ALL&quot;."</span>
          env-compile-flg)))))</pre>
  </div>

<div class="form-block function" id="def-print-certify-book-step-1" data-defines="PRINT-CERTIFY-BOOK-STEP-1" data-references="PROOFS-CO,NOT,AND,ACL2-VERSION,QUOTE,F-GET-GLOBAL,T,CASE,IF,CONS,LIST,FMS,EVENT,IO?,STATE,FAST-CERT-MODE,CERT-OP,FULL-BOOK-STRING,FAST-CERT-P,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="PRINT-CERTIFY-BOOK-STEP-1" data-part-args="STATE,FAST-CERT-MODE,CERT-OP,FULL-BOOK-STRING,FAST-CERT-P" data-part-body="PROOFS-CO,NOT,AND,ACL2-VERSION,QUOTE,F-GET-GLOBAL,T,CASE,IF,CONS,LIST,FMS,FAST-CERT-MODE,CERT-OP,FULL-BOOK-STRING,FAST-CERT-P,STATE,EVENT,IO?" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-CERTIFY-BOOK-STEP-1">print-certify-book-step-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-certify-book-step-1" data-sym="PRINT-CERTIFY-BOOK-STEP-1" title="(defun print-certify-book-step-1
       (fast-cert-p full-book-string cert-op fast-cert-mode state)
  (io? event nil state (fast-cert-p full-book-string cert-op fast-cert-mode)
       (fms &quot;CERTIFICATION ATTEMPT~#h~[~|**using fast-cert mode**~|~/ ~
             ~]~@0FOR ~x1~%~s2~@3~%~%*~ Step 1: Read ~x1 and compute its ~
...">print-certify-book-step-1</a>
  (fast-cert-p full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <a class="sym-link system" href="history-management.html#def-fast-cert-mode" data-sym="FAST-CERT-MODE">fast-cert-mode</a> state)
  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
    nil
    state
    (fast-cert-p full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <a class="sym-link system" href="history-management.html#def-fast-cert-mode" data-sym="FAST-CERT-MODE">fast-cert-mode</a>)
    (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"CERTIFICATION ATTEMPT~#h~[~|**using fast-cert mode**~|~/ ~
             ~]~@0FOR ~x1~%~s2~@3~%~%*~ Step 1: Read ~x1 and compute its ~
             book-hash.~%"</span>
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\h
          (if fast-cert-p
            <span class="number">0</span>
            <span class="number">1</span>))
        (cons #\0
          (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
            ((<span class="keyword">:write-acl2xu</span> <span class="keyword">:write-acl2x</span>) <span class="string">"(for writing .acl2x file) "</span>)
            (<span class="keyword">:create-pcert</span> <span class="string">"(for writing .pcert0 file) "</span>)
            (<span class="keyword">:create+convert-pcert</span> <span class="string">"(for writing .pcert0 and .pcert1 files) "</span>)
            (<span class="keyword">:convert-pcert</span> <span class="string">"(for writing .pcert1 file) "</span>)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>)))
        (cons #\1 full-book-string)
        (cons #\2 (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'acl2-version state))
        (cons #\3
          (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="history-management.html#def-fast-cert-mode" data-sym="FAST-CERT-MODE">fast-cert-mode</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> fast-cert-p))
            <span class="string">"~|Note that fast-cert mode is enabled but ~
                                 will be ignored during certification, except ~
                                 for noting in the certificate file that ~
                                 fast-cert mode was enabled during ~
                                 certification."</span>
            <span class="string">""</span>)))
      (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
      state
      nil)))</pre>
  </div>

<div class="form-block function" id="def-certify-book-expansion-alist0" data-defines="CERTIFY-BOOK-EXPANSION-ALIST0" data-references="MERGE-INTO-EXPANSION-ALIST,VALUE,T,CONVERT-BOOK-STRING-TO-CERT,MSG,SOFT,ER,EXPANSION-ALIST-CONFLICT,ELIDED-ENTRY,BAD-ENTRY,MV-LET,ACCESS,ELIDED-EXPANSION-ALIST,LET,EQ,COND,STATE,CTX,ACL2X-FILE,FULL-BOOK-STRING,ACL2X-EXPANSION-ALIST,CERT-OBJ,CERT-OP,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CERTIFY-BOOK-EXPANSION-ALIST0" data-part-args="STATE,CTX,ACL2X-FILE,FULL-BOOK-STRING,ACL2X-EXPANSION-ALIST,CERT-OBJ,CERT-OP" data-part-body="MERGE-INTO-EXPANSION-ALIST,VALUE,T,FULL-BOOK-STRING,CONVERT-BOOK-STRING-TO-CERT,MSG,ACL2X-FILE,CTX,SOFT,ER,ACL2X-EXPANSION-ALIST,EXPANSION-ALIST-CONFLICT,ELIDED-ENTRY,BAD-ENTRY,MV-LET,CERT-OBJ,ACCESS,ELIDED-EXPANSION-ALIST,LET,CERT-OP,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-EXPANSION-ALIST0">certify-book-expansion-alist0</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-expansion-alist0" data-sym="CERTIFY-BOOK-EXPANSION-ALIST0" title="(defun certify-book-expansion-alist0
       (cert-op cert-obj acl2x-expansion-alist full-book-string acl2x-file ctx
        state)
  (cond
   ((eq cert-op :convert-pcert)
...">certify-book-expansion-alist0</a>
  (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> cert-obj
    acl2x-expansion-alist
    full-book-string
    acl2x-file
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>) (let ((elided-expansion-alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:expansion-alist</span>)))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (bad-entry elided-entry)
          (<a class="sym-link local-def" href="#def-expansion-alist-conflict" data-sym="EXPANSION-ALIST-CONFLICT" title="(defun expansion-alist-conflict (acl2x-expansion-alist elided-expansion-alist)
  (cond ((endp acl2x-expansion-alist) (mv nil nil))
        ((endp elided-expansion-alist) (mv (car acl2x-expansion-alist) nil))
        ((&lt; (caar acl2x-expansion-alist) (caar elided-expansion-alist))
         (mv (car acl2x-expansion-alist) nil))
...">expansion-alist-conflict</a> acl2x-expansion-alist
            elided-expansion-alist)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-entry (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The following expansion-alist entry from file ~
                              ~x0 is unexpected:~|~x1~|~@2"</span>
                acl2x-file
                bad-entry
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (elided-entry (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"It was expected to correspond to ~
                                          the following entry from the ~
                                          :expansion-alist in file ~x0:~|~x1"</span>
                      (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <span class="keyword">:create-pcert</span>)
                      elided-entry))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-merge-into-expansion-alist" data-sym="MERGE-INTO-EXPANSION-ALIST" title="(defun merge-into-expansion-alist
       (acl2x-expansion-alist computed-expansion-alist)
  (cond ((atom computed-expansion-alist) acl2x-expansion-alist)
        ((acl2x-alistp-domains-subsetp acl2x-expansion-alist
                                       computed-expansion-alist)
...">merge-into-expansion-alist</a> (<a class="sym-link local-def" href="#def-merge-into-expansion-alist" data-sym="MERGE-INTO-EXPANSION-ALIST" title="(defun merge-into-expansion-alist
       (acl2x-expansion-alist computed-expansion-alist)
  (cond ((atom computed-expansion-alist) acl2x-expansion-alist)
        ((acl2x-alistp-domains-subsetp acl2x-expansion-alist
                                       computed-expansion-alist)
...">merge-into-expansion-alist</a> elided-expansion-alist
                    acl2x-expansion-alist)
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:pcert-info</span>))))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> acl2x-expansion-alist))))</pre>
  </div>

<div class="form-block function" id="def-certify-book-step-2" data-defines="CERTIFY-BOOK-STEP-2" data-references="TRANSLATE-CERT-DATA,RESTRICT-EXPANSION-ALIST,INTEGERP,INDEX0,INCLUDE-BOOK-ALIST-ALL,TTAGS-SEEN,F-GET-GLOBAL,VAL,ELIDE-LOCALS-FROM-EXPANSION-ALIST,LET,WRITE-ACL2X-FILE,MERGE-INTO-EXPANSION-ALIST,NULL,ASSERT$,COND,EXPANSION-ALIST,ILLEGAL-TO-CERTIFY-CHECK,CHK-ABSSTOBJ-INVARIANTS,IGNORE,CDR,SUBST-BY-POSITION,LIST,CADR,CAR,CONSP,OR,CERTIFY-BOOK,PROCESS-EMBEDDED-EVENTS,EXPANSION-ALIST-AND-INDEX,T,W,SKIP-PROOFS-SEEN,VALUE,PORTCULLIS-SKIPPED-PROOFSP,ER-LET*,REVERT-WORLD-ON-ERROR,WITH-CBD,LD-REDEFINITION-ACTION,EVENT-NUMBER-BASELINE,EVENT-LANDMARK,SCAN-TO-LANDMARK-NUMBER,NONCONSTRUCTIVE-AXIOM-NAMES,QUOTE,GLOBAL-VAL,EQUAL,NOT,AXIOMSP,USER-HOME-DIR,STATE-GLOBAL-LET*,CONVERT-BOOK-STRING-TO-CERT,EQ,AND,PRINT-CERTIFY-BOOK-STEP-2,PPROGN,STATE,CTX,SAVED-ACL2-DEFAULTS-TABLE,FULL-BOOK-NAME,WRITE-ACL2X,DIRECTORY-NAME,WRLD1,TTAGS-ALLOWED,ACL2X-FILE,FULL-BOOK-STRING,CERT-OP,EXPANSION-ALIST0,EV-LST,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CERTIFY-BOOK-STEP-2" data-part-args="STATE,CTX,SAVED-ACL2-DEFAULTS-TABLE,FULL-BOOK-NAME,WRITE-ACL2X,DIRECTORY-NAME,WRLD1,TTAGS-ALLOWED,ACL2X-FILE,FULL-BOOK-STRING,CERT-OP,EXPANSION-ALIST0,EV-LST" data-part-body="TRANSLATE-CERT-DATA,RESTRICT-EXPANSION-ALIST,INTEGERP,INDEX0,INCLUDE-BOOK-ALIST-ALL,TTAGS-SEEN,F-GET-GLOBAL,VAL,ELIDE-LOCALS-FROM-EXPANSION-ALIST,LET,WRITE-ACL2X-FILE,MERGE-INTO-EXPANSION-ALIST,NULL,ASSERT$,COND,EXPANSION-ALIST,CTX,ILLEGAL-TO-CERTIFY-CHECK,CHK-ABSSTOBJ-INVARIANTS,IGNORE,CDR,SUBST-BY-POSITION,FULL-BOOK-NAME,LIST,CADR,CAR,WRITE-ACL2X,CONSP,OR,SAVED-ACL2-DEFAULTS-TABLE,CERTIFY-BOOK,PROCESS-EMBEDDED-EVENTS,EXPANSION-ALIST-AND-INDEX,T,W,SKIP-PROOFS-SEEN,VALUE,PORTCULLIS-SKIPPED-PROOFSP,ER-LET*,REVERT-WORLD-ON-ERROR,DIRECTORY-NAME,WITH-CBD,LD-REDEFINITION-ACTION,WRLD1,EVENT-NUMBER-BASELINE,EVENT-LANDMARK,SCAN-TO-LANDMARK-NUMBER,NONCONSTRUCTIVE-AXIOM-NAMES,QUOTE,GLOBAL-VAL,EQUAL,NOT,AXIOMSP,USER-HOME-DIR,TTAGS-ALLOWED,STATE-GLOBAL-LET*,STATE,ACL2X-FILE,FULL-BOOK-STRING,CONVERT-BOOK-STRING-TO-CERT,CERT-OP,EQ,AND,EXPANSION-ALIST0,EV-LST,PRINT-CERTIFY-BOOK-STEP-2,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-STEP-2">certify-book-step-2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-step-2" data-sym="CERTIFY-BOOK-STEP-2" title="(defun certify-book-step-2
       (ev-lst expansion-alist0 cert-op full-book-string acl2x-file
        ttags-allowed wrld1 directory-name write-acl2x full-book-name
        saved-acl2-defaults-table ctx state)
  (pprogn
...">certify-book-step-2</a>
  (ev-lst expansion-alist0
    <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
    full-book-string
    acl2x-file
    ttags-allowed
    wrld1
    directory-name
    write-acl2x
    full-book-name
    saved-acl2-defaults-table
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-print-certify-book-step-2" data-sym="PRINT-CERTIFY-BOOK-STEP-2" title="(defun print-certify-book-step-2
       (ev-lst expansion-alist pcert0-file acl2x-file state)
  (io? event nil state (ev-lst expansion-alist pcert0-file acl2x-file)
       (fms &quot;* Step 2:  There ~#0~[were no forms in the file. Why are you ~
             making such a silly book?~/was one form in the file.~/were ~n1 ~
...">print-certify-book-step-2</a> ev-lst
      expansion-alist0
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>)
        (<a class="sym-link local-def" href="#def-convert-book-string-to-cert" data-sym="CONVERT-BOOK-STRING-TO-CERT" title="(defun convert-book-string-to-cert (x cert-op)
  (concatenate &#39;string (remove-lisp-suffix x nil)
               (case cert-op
                 ((t) &quot;cert&quot;)
                 ((:create-pcert :create+convert-pcert) &quot;pcert0&quot;)
...">convert-book-string-to-cert</a> full-book-string <span class="keyword">:create-pcert</span>))
      acl2x-file
      state)
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((ttags-allowed ttags-allowed) (user-home-dir nil)
        (axiomsp (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'nonconstructive-axiom-names
                (scan-to-landmark-number 'event-landmark
                  (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'event-number-baseline wrld1)
                  wrld1))
              (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'nonconstructive-axiom-names wrld1))))
        (<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> nil))
      (<a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a> directory-name
        (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((portcullis-skipped-proofsp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'skip-proofs-seen (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))) (expansion-alist-and-index (<a class="sym-link local-def" href="#def-process-embedded-events" data-sym="PROCESS-EMBEDDED-EVENTS" title="(defun process-embedded-events
       (caller acl2-defaults-table skip-proofsp pkg ee-entry ev-lst index
        make-event-chk cert-data ctx state)
  (let* ((wrld1 (w state))
         (kpa (known-package-alist state))
...">process-embedded-events</a> '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>
                  saved-acl2-defaults-table
                  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:create-pcert</span>)
                    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp write-acl2x) (car write-acl2x)))
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car ev-lst))
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a> full-book-name)
                  (<a class="sym-link local-def" href="#def-subst-by-position" data-sym="SUBST-BY-POSITION" title="(defun subst-by-position (alist lst index)
  (cond
   (alist
    (cond
     ((&lt; (caar alist) index)
...">subst-by-position</a> expansion-alist0 (cdr ev-lst) <span class="number">1</span>)
                  <span class="number">1</span>
                  nil
                  nil
                  '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>
                  state))
              (ignore (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (chk-absstobj-invariants state)
                  (<a class="sym-link local-def" href="#def-illegal-to-certify-check" data-sym="ILLEGAL-TO-CERTIFY-CHECK" title="(defun illegal-to-certify-check (before-p ctx state)
  (cond
   ((f-get-global &#39;illegal-to-certify-message state)
    (er soft ctx
        &quot;It is illegal to certify a book in this session, as explained ~
...">illegal-to-certify-check</a> nil ctx state)))
              (expansion-alist (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (write-acl2x (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> expansion-alist0)
                        (car expansion-alist-and-index)))
                    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>) <span class="keyword">:irrelevant</span>)
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-merge-into-expansion-alist" data-sym="MERGE-INTO-EXPANSION-ALIST" title="(defun merge-into-expansion-alist
       (acl2x-expansion-alist computed-expansion-alist)
  (cond ((atom computed-expansion-alist) acl2x-expansion-alist)
        ((acl2x-alistp-domains-subsetp acl2x-expansion-alist
                                       computed-expansion-alist)
...">merge-into-expansion-alist</a> expansion-alist0
                        (car expansion-alist-and-index)))))))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (write-acl2x (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>))
                  (<a class="sym-link local-def" href="#def-write-acl2x-file" data-sym="WRITE-ACL2X-FILE" title="(defun write-acl2x-file (expansion-alist acl2x-file ctx state)
  (with-output-object-channel-sharing ch acl2x-file
                                      (cond
                                       ((null ch)
                                        (er soft ctx
...">write-acl2x-file</a> expansion-alist acl2x-file ctx state)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((expansion-alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:create-pcert</span>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>)) expansion-alist)
                       (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-elide-locals-from-expansion-alist" data-sym="ELIDE-LOCALS-FROM-EXPANSION-ALIST" title="(defun elide-locals-from-expansion-alist (alist acc)
  (cond ((endp alist) (reverse acc))
        (t
         (elide-locals-from-expansion-alist (cdr alist)
                                            (cons
...">elide-locals-from-expansion-alist</a> expansion-alist nil)))))
                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (let ((val (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'skip-proofs-seen (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
                        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car val) <span class="keyword">:include-book</span>))))
                      portcullis-skipped-proofsp
                      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'axiomsp state)
                      (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                      (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist-all (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                      expansion-alist
                      (let ((index0 (cdr expansion-alist-and-index)))
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>) nil)
                          ((integerp index0) (<a class="sym-link local-def" href="#def-restrict-expansion-alist" data-sym="RESTRICT-EXPANSION-ALIST" title="(defun restrict-expansion-alist (index expansion-alist)
  (cond ((endp expansion-alist) nil)
        ((&lt; (caar expansion-alist) index)
         (restrict-expansion-alist index (cdr expansion-alist)))
        (t expansion-alist)))">restrict-expansion-alist</a> index0 expansion-alist))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
                      (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'translate-cert-data (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))))))))))</pre>
  </div>

<div class="form-block function" id="def-certify-book-convert-pcert" data-defines="CERTIFY-BOOK-CONVERT-PCERT" data-references="CONS,CERTIFY-BOOK-FINISH-CONVERT,LIST*,VALUE,EXTRA-ENTRY,ACCESS,BOOK-HASH,ER-LET*,STATE,CTX,POST-ALIST1,CERT-ANNOTATIONS,EV-LST,CERT-OBJ,PORTCULLIS-CMDS0,FAMILIAR-NAME,USER-BOOK-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CERTIFY-BOOK-CONVERT-PCERT" data-part-args="STATE,CTX,POST-ALIST1,CERT-ANNOTATIONS,EV-LST,CERT-OBJ,PORTCULLIS-CMDS0,FAMILIAR-NAME,USER-BOOK-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING" data-part-body="CTX,POST-ALIST1,CONS,CERTIFY-BOOK-FINISH-CONVERT,CERT-ANNOTATIONS,FAMILIAR-NAME,USER-BOOK-NAME,FULL-BOOK-NAME,LIST*,VALUE,EXTRA-ENTRY,STATE,EV-LST,CERT-OBJ,ACCESS,PORTCULLIS-CMDS0,FULL-BOOK-STRING,BOOK-HASH,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-CONVERT-PCERT">certify-book-convert-pcert</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-convert-pcert" data-sym="CERTIFY-BOOK-CONVERT-PCERT" title="(defun certify-book-convert-pcert
       (full-book-string full-book-name user-book-name familiar-name
        portcullis-cmds0 cert-obj ev-lst cert-annotations post-alist1 ctx
        state)
  (er-let*
...">certify-book-convert-pcert</a>
  (full-book-string full-book-name
    user-book-name
    familiar-name
    portcullis-cmds0
    cert-obj
    ev-lst
    cert-annotations
    post-alist1
    ctx
    state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((<a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a> (<a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a> nil
         full-book-string
         portcullis-cmds0
         (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:expansion-alist</span>)
         (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:cert-data</span>)
         ev-lst
         state)) (extra-entry (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> full-book-name
            user-book-name
            familiar-name
            cert-annotations
            <a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a>))))
    (<a class="sym-link local-def" href="#def-certify-book-finish-convert" data-sym="CERTIFY-BOOK-FINISH-CONVERT" title="(defun certify-book-finish-convert
       (new-post-alist old-post-alist full-book-string ctx state)
  (cond
   ((include-book-alist-equal-modulo-local old-post-alist new-post-alist)
    (let ((pcert0-name
...">certify-book-finish-convert</a> (cons extra-entry post-alist1)
      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:post-alist</span>)
      full-book-string
      ctx
      state)))</pre>
  </div>

<div class="form-block function" id="def-certify-book-step-3-info" data-defines="CERTIFY-BOOK-STEP-3-INFO" data-references="MV,CERT-DATA-PASS1-SAVED,IF,ROLLBACK-WRLD,CDR,PORT-NON-LOCALP,COMMAND-NUMBER-BASELINE-INFO,ACCESS,-,PORT-INDEX,CAR,POSP,LISTP,ASSERT$,INDEX,CERT-REPLAY,QUOTE,GLOBAL-VAL,NOT,AND,ROLLBACK-PAIR,LET*,WRLD-POST-PASS1,WRLD1,FAST-CERT-P,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CERTIFY-BOOK-STEP-3-INFO" data-part-args="WRLD-POST-PASS1,WRLD1,FAST-CERT-P" data-part-body="MV,CERT-DATA-PASS1-SAVED,WRLD1,IF,ROLLBACK-WRLD,CDR,PORT-NON-LOCALP,COMMAND-NUMBER-BASELINE-INFO,ACCESS,-,PORT-INDEX,CAR,POSP,LISTP,ASSERT$,INDEX,WRLD-POST-PASS1,CERT-REPLAY,QUOTE,GLOBAL-VAL,FAST-CERT-P,NOT,AND,ROLLBACK-PAIR,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-STEP-3-INFO">certify-book-step-3-info</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-step-3-info" data-sym="CERTIFY-BOOK-STEP-3-INFO" title="(defun certify-book-step-3-info (fast-cert-p wrld1 wrld-post-pass1)
  (let* ((rollback-pair
          (and (not fast-cert-p) (global-val &#39;cert-replay wrld-post-pass1)))
         (index
          (assert$ (listp rollback-pair)
...">certify-book-step-3-info</a>
  (fast-cert-p wrld1 wrld-post-pass1)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((rollback-pair (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> fast-cert-p)
         (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'cert-replay wrld-post-pass1))) (index (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-listp" data-sym="LISTP">listp</a> rollback-pair)
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-posp" data-sym="POSP">posp</a> (car rollback-pair)) (car rollback-pair))))
      (port-index (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> rollback-pair
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> index)
          (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (car (car rollback-pair)))
            (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> command-number-baseline-info
              (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'command-number-baseline-info wrld-post-pass1)
              <span class="keyword">:original</span>))))
      (port-non-localp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> port-index (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (cdr (car rollback-pair)))))
      (rollback-wrld (if rollback-pair
          (cdr rollback-pair)
          wrld1))
      (<a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> rollback-pair
          (<a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a> (if index
              rollback-wrld
              wrld1)
            wrld-post-pass1))))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> rollback-pair
      index
      port-index
      port-non-localp
      rollback-wrld
      <a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a>)))</pre>
  </div>

<div class="form-block function" id="def-certify-book-step-3_2B" data-defines="CERTIFY-BOOK-STEP-3+" data-references="OBSERVATION,EXPANSION-FILENAME,WRITE-EXPANSION-FILE,PRINT-CERTIFY-BOOK-STEP-5,OS-COMPILED-FILE,MAKE-CERTIFICATE-FILES,TEMP-ALIST,LIST*,EXTRA-ENTRY,BOOK-HASH,APPEND?,PORTCULLIS-CMDS,PRINT-CERTIFY-BOOK-STEP-4,WITH-CBD,CHK-CERTIFY-BOOK-STEP-3,PRINT-CERTIFY-BOOK-GUARDS-WARNING,COLLECT-IDEAL-USER-DEFUNS,COLLECT-IDEALS,WARNING-DISABLED-P,OR,ALL-BAD-FNS,NEW-BAD-FNS,MAYBE-WRITE-BOOKDATA,FAST-ALIST-FREE-CERT-DATA-ON-EXIT,CDR,POST-ALIST2,INCLUDE-BOOK-ALIST-WRLD2,DELETE-NAMES-FROM-KPA,NEW-DEFPKG-LIST,PKG-NAMES,CERT-DATA-FOR-CERTIFICATE,CERT-DATA-PASS2,TOP-LEVEL-USER-FNS,NEW-FNS,CLTL-COMMAND-STACK,WRLD2,LET*,MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,GET-DECLAIM-LIST,CERT-INCLUDE-EXPANSION-ALIST,CONS,INCLUDE-BOOK-FN,HCOMP-BUILD-FROM-STATE,LD-REDEFINITION-ACTION,STATE-GLOBAL-LET*,DECLAIM-LIST,TOP-LEVEL-CLTL-COMMAND-STACK,COMPRESS-CLTL-COMMAND-STACK,CLTL-COMMAND-STACK0,DEFPKG-ITEMS,PORTCULLIS-WRLD-KNOWN-PACKAGE-ALIST,INCLUDE-BOOK-ALIST,PRE-ALIST,W,PORTCULLIS-WRLD,ER-LET*,MV,ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST,EQ,PCERT-INFO,MV-LET,WITH-HCOMP-BINDINGS,VALUE,EVAL-SOME-PORTCULLIS-CMDS,IF,ER-PROGN,KNOWN-PACKAGE-ALIST,GLOBAL-VAL,AND,ROLLBACK-WRLD-KNOWN-PACKAGE-ALIST,LET,T,RETRACTION,QUOTE,SET-W,COND,PPROGN,IGNORE,DECLARE,STATE,CTX,EVENT-DATA-CHANNEL,WRLD1,SAVED-ACL2-DEFAULTS-TABLE,EXPANSION-ALIST0,K,PRE-ALIST-WRLD1,ACL2X-FILE,PASS1-KNOWN-PACKAGE-ALIST,CERT-ANNOTATIONS,FAMILIAR-NAME,USER-BOOK-NAME,FULL-BOOK-NAME,EV-LST,DIRECTORY-NAME,POST-ALIST1,FULL-BOOK-STRING,EXPANSION-ALIST-TO-CHECK,TRANSLATE-CERT-DATA,TTAGS-SEEN,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,CERT-DATA-PASS1-SAVED,INDEX,WRLD1-KNOWN-PACKAGE-ALIST,FAST-CERT-P,ACL2X-EXPANSION-ALIST,EXPANSION-ALIST,CERT-OP,COMPILE-FLG,PORTCULLIS-CMDS0,PORT-INDEX,ROLLBACK-WRLD,ROLLBACK-PAIR,DEFUN" data-used-by="CERTIFY-BOOK-FN" data-part-name="CERTIFY-BOOK-STEP-3+" data-part-args="STATE,CTX,EVENT-DATA-CHANNEL,WRLD1,SAVED-ACL2-DEFAULTS-TABLE,EXPANSION-ALIST0,K,PRE-ALIST-WRLD1,ACL2X-FILE,PASS1-KNOWN-PACKAGE-ALIST,CERT-ANNOTATIONS,FAMILIAR-NAME,USER-BOOK-NAME,FULL-BOOK-NAME,EV-LST,DIRECTORY-NAME,POST-ALIST1,FULL-BOOK-STRING,EXPANSION-ALIST-TO-CHECK,TRANSLATE-CERT-DATA,TTAGS-SEEN,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,CERT-DATA-PASS1-SAVED,INDEX,WRLD1-KNOWN-PACKAGE-ALIST,FAST-CERT-P,ACL2X-EXPANSION-ALIST,EXPANSION-ALIST,CERT-OP,COMPILE-FLG,PORTCULLIS-CMDS0,PORT-INDEX,ROLLBACK-WRLD,ROLLBACK-PAIR" data-part-declare="EVENT-DATA-CHANNEL,IGNORE,DECLARE" data-part-body="ACL2X-FILE,OBSERVATION,EXPANSION-ALIST0,EXPANSION-FILENAME,WRITE-EXPANSION-FILE,PRINT-CERTIFY-BOOK-STEP-5,COMPILE-FLG,OS-COMPILED-FILE,MAKE-CERTIFICATE-FILES,TEMP-ALIST,CERT-ANNOTATIONS,FAMILIAR-NAME,LIST*,EXTRA-ENTRY,EV-LST,BOOK-HASH,APPEND?,PORTCULLIS-CMDS,PRINT-CERTIFY-BOOK-STEP-4,DIRECTORY-NAME,WITH-CBD,POST-ALIST1,CHK-CERTIFY-BOOK-STEP-3,K,PRINT-CERTIFY-BOOK-GUARDS-WARNING,COLLECT-IDEAL-USER-DEFUNS,COLLECT-IDEALS,WARNING-DISABLED-P,OR,ALL-BAD-FNS,NEW-BAD-FNS,FULL-BOOK-NAME,FULL-BOOK-STRING,MAYBE-WRITE-BOOKDATA,FAST-ALIST-FREE-CERT-DATA-ON-EXIT,CDR,POST-ALIST2,INCLUDE-BOOK-ALIST-WRLD2,DELETE-NAMES-FROM-KPA,NEW-DEFPKG-LIST,EXPANSION-ALIST-TO-CHECK,PKG-NAMES,TRANSLATE-CERT-DATA,CERT-DATA-FOR-CERTIFICATE,CERT-DATA-PASS2,TOP-LEVEL-USER-FNS,NEW-FNS,CLTL-COMMAND-STACK,WRLD2,LET*,SAVED-ACL2-DEFAULTS-TABLE,MAYBE-INSTALL-ACL2-DEFAULTS-TABLE,IGNORE,GET-DECLAIM-LIST,TTAGS-SEEN,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,UNCERTIFIED-OKP,CERT-DATA-PASS1-SAVED,CERT-INCLUDE-EXPANSION-ALIST,INDEX,CONS,USER-BOOK-NAME,INCLUDE-BOOK-FN,HCOMP-BUILD-FROM-STATE,LD-REDEFINITION-ACTION,STATE-GLOBAL-LET*,DECLAIM-LIST,TOP-LEVEL-CLTL-COMMAND-STACK,COMPRESS-CLTL-COMMAND-STACK,CLTL-COMMAND-STACK0,WRLD1-KNOWN-PACKAGE-ALIST,PASS1-KNOWN-PACKAGE-ALIST,DEFPKG-ITEMS,PORTCULLIS-WRLD-KNOWN-PACKAGE-ALIST,PRE-ALIST-WRLD1,INCLUDE-BOOK-ALIST,FAST-CERT-P,PRE-ALIST,WRLD1,W,PORTCULLIS-WRLD,ER-LET*,MV,ACL2X-EXPANSION-ALIST,ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST,CERT-OP,EQ,PCERT-INFO,EXPANSION-ALIST,MV-LET,WITH-HCOMP-BINDINGS,VALUE,CTX,PORTCULLIS-CMDS0,EVAL-SOME-PORTCULLIS-CMDS,PORT-INDEX,IF,ER-PROGN,KNOWN-PACKAGE-ALIST,GLOBAL-VAL,AND,ROLLBACK-WRLD-KNOWN-PACKAGE-ALIST,LET,T,STATE,ROLLBACK-WRLD,RETRACTION,QUOTE,SET-W,ROLLBACK-PAIR,COND,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-STEP-3+">certify-book-step-3+</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-step-3_2B" data-sym="CERTIFY-BOOK-STEP-3+" title="(defun certify-book-step-3+
       (rollback-pair rollback-wrld port-index portcullis-cmds0 compile-flg
        cert-op expansion-alist acl2x-expansion-alist fast-cert-p
        wrld1-known-package-alist index cert-data-pass1-saved uncertified-okp
        defaxioms-okp skip-proofs-okp ttags-seen translate-cert-data
...">certify-book-step-3+</a>
  (rollback-pair rollback-wrld
    port-index
    portcullis-cmds0
    compile-flg
    <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
    expansion-alist
    acl2x-expansion-alist
    fast-cert-p
    wrld1-known-package-alist
    index
    <a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a>
    uncertified-okp
    defaxioms-okp
    skip-proofs-okp
    <a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a>
    translate-cert-data
    expansion-alist-to-check
    full-book-string
    post-alist1
    directory-name
    ev-lst
    full-book-name
    user-book-name
    familiar-name
    cert-annotations
    pass1-known-package-alist
    acl2x-file
    pre-alist-wrld1
    k
    expansion-alist0
    saved-acl2-defaults-table
    wrld1
    <a class="sym-link local-def" href="#def-event-data-channel" data-sym="EVENT-DATA-CHANNEL" title="(defun event-data-channel
       (full-book-string write-event-data write-event-data-p ctx state)
  (er-let*
   ((write-event-data
     (if write-event-data-p
...">event-data-channel</a>
    ctx
    state)
  (declare (ignore <a class="sym-link local-def" href="#def-event-data-channel" data-sym="EVENT-DATA-CHANNEL" title="(defun event-data-channel
       (full-book-string write-event-data write-event-data-p ctx state)
  (er-let*
   ((write-event-data
     (if write-event-data-p
...">event-data-channel</a>))
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (rollback-pair (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'retraction rollback-wrld state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
    (let ((rollback-wrld-known-package-alist (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> rollback-pair
           (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> rollback-wrld))))
      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if port-index
          (<a class="sym-link local-def" href="#def-eval-some-portcullis-cmds" data-sym="EVAL-SOME-PORTCULLIS-CMDS" title="(defun eval-some-portcullis-cmds (port-index portcullis-cmds ctx state)
  (state-global-let*
   ((ld-skip-proofsp &#39;include-book) (skip-proofs-by-system t))
   (mv-let (erp val expansion-alist ignore-kpa state)
           (eval-event-lst 0 nil (nthcdr port-index portcullis-cmds) t nil nil
...">eval-some-portcullis-cmds</a> port-index
            portcullis-cmds0
            ctx
            state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-with-hcomp-bindings" data-sym="WITH-HCOMP-BINDINGS" title="(defmacro with-hcomp-bindings (form) form)">with-hcomp-bindings</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (expansion-alist pcert-info)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:create-pcert</span>) (<a class="sym-link local-def" href="#def-elide-locals-and-split-expansion-alist" data-sym="ELIDE-LOCALS-AND-SPLIT-EXPANSION-ALIST" title="(defun elide-locals-and-split-expansion-alist (alist acl2x-alist x y)
  (cond ((endp alist) (mv (reverse x) (reverse y)))
        (t
         (assert$ (or (null acl2x-alist) (&lt;= (caar alist) (caar acl2x-alist)))
                  (let ((acl2x-alist-new
...">elide-locals-and-split-expansion-alist</a> expansion-alist
                    acl2x-expansion-alist
                    nil
                    nil))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> expansion-alist
                    (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:create+convert-pcert</span>)
                      <span class="keyword">:proved</span> nil))))
              (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((portcullis-wrld (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if port-index
                       (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
                       wrld1))) (pre-alist (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (fast-cert-p nil)
                        (port-index (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist portcullis-wrld))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> pre-alist-wrld1))))
                  (portcullis-wrld-known-package-alist (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> portcullis-wrld)))
                  (<a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a> (if fast-cert-p
                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)
                      (<a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a> pass1-known-package-alist
                        (if rollback-pair
                          rollback-wrld-known-package-alist
                          wrld1-known-package-alist)
                        ctx
                        portcullis-wrld
                        state)))
                  (cltl-command-stack0 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if fast-cert-p
                        (<a class="sym-link local-def" href="#def-compress-cltl-command-stack" data-sym="COMPRESS-CLTL-COMMAND-STACK" title="(defun compress-cltl-command-stack (stack)
  (compress-cltl-command-stack-rec (reverse stack) nil))">compress-cltl-command-stack</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'top-level-cltl-command-stack (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
                        nil)))
                  (declaim-list (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a> nil))
                      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-hcomp-build-from-state" data-sym="HCOMP-BUILD-FROM-STATE" title="(defun hcomp-build-from-state (cltl-command-stack state)
  (declare (ignore cltl-command-stack))
  (value nil))">hcomp-build-from-state</a> (if fast-cert-p
                            cltl-command-stack0
                            (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'top-level-cltl-command-stack (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
                          state)
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (rollback-pair (<a class="sym-link local-def" href="#def-include-book-fn" data-sym="INCLUDE-BOOK-FN" title="(defun include-book-fn
       (user-book-name state load-compiled-file expansion-alist/cert-data
        uncertified-okp defaxioms-okp skip-proofs-okp ttags dir event-form)
  (with-ctx-summarized (cons &#39;include-book user-book-name)
                       (state-global-let*
...">include-book-fn</a> user-book-name
                              state
                              nil
                              (cons (if index
                                  (<a class="sym-link local-def" href="#def-cert-include-expansion-alist" data-sym="CERT-INCLUDE-EXPANSION-ALIST" title="(defun cert-include-expansion-alist (index expansion-alist)
  (append
   (pairlis$ (fromto 1 (1- index))
             (make-list (1- index) :initial-element &#39;(value-triple nil)))
   (remove-smaller-keys-from-sorted-alist index expansion-alist)))">cert-include-expansion-alist</a> index expansion-alist)
                                  expansion-alist)
                                <a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a>)
                              uncertified-okp
                              defaxioms-okp
                              skip-proofs-okp
                              <a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a>
                              nil
                              nil))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-get-declaim-list" data-sym="GET-DECLAIM-LIST" title="(defun get-declaim-list (state) (read-acl2-oracle state))">get-declaim-list</a> state))))))
                  (ignore (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (rollback-pair (<a class="sym-link local-def" href="#def-maybe-install-acl2-defaults-table" data-sym="MAYBE-INSTALL-ACL2-DEFAULTS-TABLE" title="(defun maybe-install-acl2-defaults-table (acl2-defaults-table state)
  (cond
   ((equal acl2-defaults-table (table-alist &#39;acl2-defaults-table (w state)))
    (value nil))
   (t
...">maybe-install-acl2-defaults-table</a> saved-acl2-defaults-table
                          state))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))
                (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld2 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (cltl-command-stack (if fast-cert-p
                        cltl-command-stack0
                        (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'top-level-cltl-command-stack wrld2)))
                    (new-fns (<a class="sym-link local-def" href="#def-top-level-user-fns" data-sym="TOP-LEVEL-USER-FNS" title="(defun top-level-user-fns (cltl-command-lst acc)
  (cond ((endp cltl-command-lst) (reverse acc))
        (t
         (top-level-user-fns (cdr cltl-command-lst)
                             (if (eq (caar cltl-command-lst) &#39;defuns)
...">top-level-user-fns</a> cltl-command-stack nil))
                    (cert-data-pass2 (<a class="sym-link local-def" href="#def-cert-data-for-certificate" data-sym="CERT-DATA-FOR-CERTIFICATE" title="(defun cert-data-for-certificate (fns translate-cert-data wrld)
  (acons :type-prescription (cert-data-tps-from-fns fns wrld nil)
         (acons :translate
                (and (not (global-val &#39;redef-seen wrld))
                     (make-fast-alist translate-cert-data))">cert-data-for-certificate</a> new-fns
                        translate-cert-data
                        wrld2))
                    (<a class="sym-link local-def" href="#def-pkg-names" data-sym="PKG-NAMES" title="(defun pkg-names (x base-kpa)
  (cond ((null x) nil) (t (merge-sort-lexorder (pkg-names0 x base-kpa nil)))))">pkg-names</a> (<a class="sym-link local-def" href="#def-pkg-names" data-sym="PKG-NAMES" title="(defun pkg-names (x base-kpa)
  (cond ((null x) nil) (t (merge-sort-lexorder (pkg-names0 x base-kpa nil)))))">pkg-names</a> (cons expansion-alist-to-check cert-data-pass2)
                        portcullis-wrld-known-package-alist))
                    (<a class="sym-link local-def" href="#def-new-defpkg-list" data-sym="NEW-DEFPKG-LIST" title="(defun new-defpkg-list (defpkg-items base-kpa earlier-kpa)
  (cond ((null defpkg-items) nil)
        (t
         (reverse
          (remove-duplicates-equal
...">new-defpkg-list</a> (<a class="sym-link local-def" href="#def-new-defpkg-list" data-sym="NEW-DEFPKG-LIST" title="(defun new-defpkg-list (defpkg-items base-kpa earlier-kpa)
  (cond ((null defpkg-items) nil)
        (t
         (reverse
          (remove-duplicates-equal
...">new-defpkg-list</a> <a class="sym-link local-def" href="#def-defpkg-items" data-sym="DEFPKG-ITEMS" title="(defun defpkg-items (new-kpa old-kpa ctx w state)
  (cond
   ((new-defpkg-p new-kpa old-kpa)
    (state-global-let*
     ((inhibit-output-lst
...">defpkg-items</a>
                        (<a class="sym-link local-def" href="#def-delete-names-from-kpa" data-sym="DELETE-NAMES-FROM-KPA" title="(defun delete-names-from-kpa (names kpa)
  (cond ((null names) kpa) (t (delete-names-from-kpa-rec names kpa))))">delete-names-from-kpa</a> <a class="sym-link local-def" href="#def-pkg-names" data-sym="PKG-NAMES" title="(defun pkg-names (x base-kpa)
  (cond ((null x) nil) (t (merge-sort-lexorder (pkg-names0 x base-kpa nil)))))">pkg-names</a>
                          (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> wrld2))
                        (if rollback-pair
                          rollback-wrld-known-package-alist
                          wrld1-known-package-alist)))
                    (include-book-alist-wrld2 (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist wrld2))
                    (post-alist2 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (fast-cert-p nil)
                        (rollback-pair (cdr include-book-alist-wrld2))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> include-book-alist-wrld2))))
                  (<a class="sym-link local-def" href="#def-fast-alist-free-cert-data-on-exit" data-sym="FAST-ALIST-FREE-CERT-DATA-ON-EXIT" title="(defmacro fast-alist-free-cert-data-on-exit (cert-data form)
  `(let* ((cert-data-to-free ,cert-data)
          (cert-data-entry-tp-to-free
           (cdr (assoc-eq :type-prescription cert-data-to-free))))
     (fast-alist-free-on-exit cert-data-entry-tp-to-free
...">fast-alist-free-cert-data-on-exit</a> cert-data-pass2
                    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-maybe-write-bookdata" data-sym="MAYBE-WRITE-BOOKDATA" title="(defun maybe-write-bookdata (full-book-string full-book-name wrld ctx state)
  (let ((write-bookdata (f-get-global &#39;write-bookdata state)))
    (cond ((eq write-bookdata :never) state)
          (t
           (mv-let (erp val state)
...">maybe-write-bookdata</a> full-book-string
                        full-book-name
                        wrld2
                        ctx
                        state)
                      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (new-bad-fns all-bad-fns)
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> fast-cert-p (<a class="sym-link system" href="basis-a.html#def-warning-disabled-p" data-sym="WARNING-DISABLED-P">warning-disabled-p</a> <span class="string">"Guards"</span>)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="defuns.html#def-collect-ideals" data-sym="COLLECT-IDEALS">collect-ideals</a> new-fns wrld2 nil)
                              (<a class="sym-link local-def" href="#def-collect-ideal-user-defuns" data-sym="COLLECT-IDEAL-USER-DEFUNS" title="(defun collect-ideal-user-defuns (wrld)
  (collect-ideal-user-defuns1 wrld wrld nil))">collect-ideal-user-defuns</a> wrld2))))
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> new-bad-fns all-bad-fns) (<a class="sym-link local-def" href="#def-print-certify-book-guards-warning" data-sym="PRINT-CERTIFY-BOOK-GUARDS-WARNING" title="(defun print-certify-book-guards-warning
       (full-book-string new-bad-fns all-bad-fns k ctx state)
  (let* ((new-bad-fns (sort-symbol-listp new-bad-fns))
         (all-bad-fns (sort-symbol-listp all-bad-fns))
         (extra-bad-fns (set-difference-eq-sorted all-bad-fns new-bad-fns nil)))
...">print-certify-book-guards-warning</a> full-book-string
                              new-bad-fns
                              all-bad-fns
                              k
                              ctx
                              state))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
                      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-certify-book-step-3" data-sym="CHK-CERTIFY-BOOK-STEP-3" title="(defun chk-certify-book-step-3 (post-alist2 post-alist1 ctx state)
  (cond
   ((not (include-book-alist-subsetp post-alist2 post-alist1))
    (let ((files (spontaneous-decertificationp post-alist2 post-alist1)))
      (cond
...">chk-certify-book-step-3</a> post-alist2 post-alist1 ctx state)
                        (<a class="sym-link local-def" href="#def-with-cbd" data-sym="WITH-CBD" title="(defmacro with-cbd (dir form)
  (let ((form form))
    `(state-global-let* ((connected-book-directory (cbd) set-cbd-state))
                        ,(if (eq dir :same)
                             form">with-cbd</a> directory-name
                          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-print-certify-book-step-4" data-sym="PRINT-CERTIFY-BOOK-STEP-4" title="(defun print-certify-book-step-4 (full-book-string cert-op state)
  (io? event nil state (full-book-string cert-op)
       (fms &quot;* Step 4:  Write the certificate for ~x0 in ~x1.~%&quot;
            (list (cons #\0 full-book-string)
                  (cons #\1
...">print-certify-book-step-4</a> full-book-string <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state)
                            (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((portcullis-cmds (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-append_3F" data-sym="APPEND?">append?</a> portcullis-cmds0 <a class="sym-link local-def" href="#def-new-defpkg-list" data-sym="NEW-DEFPKG-LIST" title="(defun new-defpkg-list (defpkg-items base-kpa earlier-kpa)
  (cond ((null defpkg-items) nil)
        (t
         (reverse
          (remove-duplicates-equal
...">new-defpkg-list</a>))) (<a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a> (<a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a> nil
                                    full-book-string
                                    portcullis-cmds
                                    expansion-alist
                                    cert-data-pass2
                                    ev-lst
                                    state))
                                (extra-entry (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> full-book-name
                                      user-book-name
                                      familiar-name
                                      cert-annotations
                                      <a class="sym-link local-def" href="#def-book-hash" data-sym="BOOK-HASH" title="(defun book-hash
       (old-book-hash full-book-string portcullis-cmds expansion-alist
        cert-data book-ev-lst state)
  (cond
   ((if old-book-hash
...">book-hash</a>)))
                                (temp-alist (<a class="sym-link local-def" href="#def-make-certificate-files" data-sym="MAKE-CERTIFICATE-FILES" title="(defun make-certificate-files
       (full-book-string portcullis post-alist1 post-alist2 expansion-alist
        cert-data pcert-info cert-op ctx state)
  (cond
   ((eq cert-op :create+convert-pcert)
...">make-certificate-files</a> full-book-string
                                    (cons portcullis-cmds pre-alist)
                                    (cons extra-entry post-alist1)
                                    (cons extra-entry post-alist2)
                                    expansion-alist
                                    cert-data-pass2
                                    pcert-info
                                    <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
                                    ctx
                                    state))
                                (os-compiled-file (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (compile-flg (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-print-certify-book-step-5" data-sym="PRINT-CERTIFY-BOOK-STEP-5" title="(defun print-certify-book-step-5 (full-book-string state)
  (io? event nil state (full-book-string)
       (fms &quot;* Step 5:  Compile the functions defined in ~x0.~%&quot;
            (list (cons #\0 full-book-string)) (proofs-co state) state nil)))">print-certify-book-step-5</a> full-book-string state)
                                        (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-write-expansion-file" data-sym="WRITE-EXPANSION-FILE" title="(defun write-expansion-file
       (portcullis-cmds declaim-list new-fns-exec compressed-cltl-command-stack
        expansion-filename expansion-alist pkg-names ev-lst known-package-alist
        ctx state)
  (declare
...">write-expansion-file</a> portcullis-cmds
                                            declaim-list
                                            new-fns
                                            cltl-command-stack
                                            (<a class="sym-link local-def" href="#def-expansion-filename" data-sym="EXPANSION-FILENAME" title="(defun expansion-filename (file)
  (let ((len (length file)))
    (assert$ (equal (subseq file (- len 5) len) &quot;.lisp&quot;)
             (concatenate &#39;string (subseq file 0 (- len 5)) &quot;@expansion.lsp&quot;))))">expansion-filename</a> full-book-string)
                                            expansion-alist
                                            <a class="sym-link local-def" href="#def-pkg-names" data-sym="PKG-NAMES" title="(defun pkg-names (x base-kpa)
  (cond ((null x) nil) (t (merge-sort-lexorder (pkg-names0 x base-kpa nil)))))">pkg-names</a>
                                            ev-lst
                                            pass1-known-package-alist
                                            ctx
                                            state))))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))
                              (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (expansion-alist0 (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
                                        <span class="string">"Used expansion-alist obtained from file ~x0."</span>
                                        acl2x-file))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> full-book-string))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-certify-book-fn" data-defines="CERTIFY-BOOK-FN" data-references="CERTIFY-BOOK-STEP-3+,PRINT-CERTIFY-BOOK-STEP-3,CLOSE-OUTPUT-CHANNEL,UPDATE-USELESS-RUNES,FAST-ALIST-FREE-CERT-DATA-ON-EXIT,CERTIFY-BOOK-STEP-3-INFO,CERT-DATA-PASS1-SAVED,ROLLBACK-WRLD,PORT-NON-LOCALP,PORT-INDEX,INDEX,ROLLBACK-PAIR,CERTIFY-BOOK-CONVERT-PCERT,CHK-CERT-ANNOTATIONS,POST-ALIST1,CERT-ANNOTATIONS,TRANSLATE-CERT-DATA,EXPANSION-ALIST-TO-CHECK,EXPANSION-ALIST,NEW-INCLUDE-BOOK-ALIST-ALL,AXIOMSP,PORTCULLIS-SKIPPED-PROOFSP,NTH,SKIPPED-PROOFSP,PASS1-KNOWN-PACKAGE-ALIST,CAR,CERTIFY-BOOK-STEP-2,PASS1-RESULT,CERTIFY-BOOK-EXPANSION-ALIST0,EXPANSION-ALIST0,LENGTH,READ-ACL2X-FILE,ACL2X-EXPANSION-ALIST,READ-OBJECT-FILE,LET,EV-LST,PRINT-CERTIFY-BOOK-STEP-1,F-PUT-GLOBAL,PPROGN,AND,FAST-CERT-P,FAST-CERT-MODE,CONVERT-BOOK-STRING-TO-ACL2X,ACL2X-FILE,KNOWN-PACKAGE-ALIST,WRLD1-KNOWN-PACKAGE-ALIST,INCLUDE-BOOK-ALIST,PRE-ALIST-WRLD1,WRLD1,LET*,WRITE-PORT-FILE,IGNORE,INITIAL-USELESS-RUNES,USELESS-RUNES,OLD-USELESS-RUNES,ACCESS,PORTCULLIS-CMDS0,CHK-ACCEPTABLE-CERTIFY-BOOK,CERT-OBJ,LIST,SUSPECT-BOOK-ACTION-ALIST,ACL2-DEFAULTS-TABLE,TABLE-ALIST,SAVED-ACL2-DEFAULTS-TABLE,CERTIFY-BOOK-COMPILE-FLG,GUARD-CHECKING-ON,SKIP-PROOFS-OKP-CERT,DEFAXIOMS-OKP-CERT,MATCH-FREE-ERROR,PORT-FILE-ENABLED,COMPILER-ENABLED,CERTIFY-BOOK-INFO,MAKE,CERTIFY-BOOK-INFO-0,MEMBER-EQ,EVENT-DATA-CHANNEL,CHK-ACCEPTABLE-TTAGS1,TTAGS-ALLOWED/TTAGS-SEEN-IGNORED,CHK-WELL-FORMED-TTAGS,UNCERTIFIED-OKP,CONSP,CERTIFY-BOOK-CERT-OP,CERT-OP,F-GET-GLOBAL,WRITE-ACL2X,CERTIFY-BOOK-WRITE-PORT,CERTIFY-BOOK-FINISH-COMPLETE,CBD,PARSE-BOOK-NAME,FAMILIAR-NAME,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,MV-LET,W,TTAGS-SEEN,GLOBAL-VAL,TTAGS-SEEN0,STRING-UPCASE,INTERN,STRING-EQUAL,IF,NOT,VALUE,T,GETENV!,EQ,COND,PCERT-ENV,ER-LET*,SAVE-PARALLELISM-SETTINGS,WARNINGS-AS-ERRORS,STATE-GLOBAL-LET*,CTX,CHK-ACCEPTABLE-CERTIFY-BOOK-PRELIM,ER-PROGN,CERTIFY-BOOK,QUOTE,CONS,WITH-CTX-SUMMARIZED,STATE,WRITE-EVENT-DATA-P,WRITE-EVENT-DATA,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W,PCERT,WRITE-PORT,ACL2X,TTAGSXP,TTAGSX,TTAGS,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,COMPILE-FLG,K,USER-BOOK-NAME,DEFUN" data-used-by="CERTIFY-BOOK" data-part-name="CERTIFY-BOOK-FN" data-part-args="STATE,WRITE-EVENT-DATA-P,WRITE-EVENT-DATA,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W,PCERT,WRITE-PORT,ACL2X,TTAGSXP,TTAGSX,TTAGS,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,COMPILE-FLG,K,USER-BOOK-NAME" data-part-body="CERTIFY-BOOK-STEP-3+,PRINT-CERTIFY-BOOK-STEP-3,CLOSE-OUTPUT-CHANNEL,UPDATE-USELESS-RUNES,FAST-ALIST-FREE-CERT-DATA-ON-EXIT,CERTIFY-BOOK-STEP-3-INFO,CERT-DATA-PASS1-SAVED,ROLLBACK-WRLD,PORT-NON-LOCALP,PORT-INDEX,INDEX,ROLLBACK-PAIR,CERTIFY-BOOK-CONVERT-PCERT,CHK-CERT-ANNOTATIONS,POST-ALIST1,CERT-ANNOTATIONS,TRANSLATE-CERT-DATA,EXPANSION-ALIST-TO-CHECK,EXPANSION-ALIST,NEW-INCLUDE-BOOK-ALIST-ALL,AXIOMSP,PORTCULLIS-SKIPPED-PROOFSP,NTH,SKIPPED-PROOFSP,PASS1-KNOWN-PACKAGE-ALIST,CAR,CERTIFY-BOOK-STEP-2,PASS1-RESULT,CERTIFY-BOOK-EXPANSION-ALIST0,EXPANSION-ALIST0,LENGTH,READ-ACL2X-FILE,ACL2X-EXPANSION-ALIST,READ-OBJECT-FILE,LET,EV-LST,PRINT-CERTIFY-BOOK-STEP-1,F-PUT-GLOBAL,PPROGN,AND,FAST-CERT-P,FAST-CERT-MODE,CONVERT-BOOK-STRING-TO-ACL2X,ACL2X-FILE,KNOWN-PACKAGE-ALIST,WRLD1-KNOWN-PACKAGE-ALIST,INCLUDE-BOOK-ALIST,PRE-ALIST-WRLD1,WRLD1,LET*,WRITE-PORT-FILE,IGNORE,USELESS-RUNES-R/W-P,USELESS-RUNES-R/W,INITIAL-USELESS-RUNES,USELESS-RUNES,OLD-USELESS-RUNES,ACCESS,PORTCULLIS-CMDS0,K,CHK-ACCEPTABLE-CERTIFY-BOOK,CERT-OBJ,LIST,SUSPECT-BOOK-ACTION-ALIST,ACL2-DEFAULTS-TABLE,TABLE-ALIST,SAVED-ACL2-DEFAULTS-TABLE,CERTIFY-BOOK-COMPILE-FLG,COMPILE-FLG,GUARD-CHECKING-ON,SKIP-PROOFS-OKP-CERT,DEFAXIOMS-OKP,DEFAXIOMS-OKP-CERT,MATCH-FREE-ERROR,PORT-FILE-ENABLED,COMPILER-ENABLED,CERTIFY-BOOK-INFO,MAKE,CERTIFY-BOOK-INFO-0,WRITE-EVENT-DATA-P,WRITE-EVENT-DATA,MEMBER-EQ,EVENT-DATA-CHANNEL,CHK-ACCEPTABLE-TTAGS1,TTAGS-ALLOWED/TTAGS-SEEN-IGNORED,CHK-WELL-FORMED-TTAGS,TTAGS,TTAGSX,UNCERTIFIED-OKP,CONSP,SKIP-PROOFS-OKP,CERTIFY-BOOK-CERT-OP,CERT-OP,F-GET-GLOBAL,WRITE-ACL2X,CERTIFY-BOOK-WRITE-PORT,WRITE-PORT,CERTIFY-BOOK-FINISH-COMPLETE,CBD,PARSE-BOOK-NAME,FAMILIAR-NAME,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,MV-LET,W,TTAGS-SEEN,GLOBAL-VAL,TTAGS-SEEN0,STRING-UPCASE,INTERN,STRING-EQUAL,IF,NOT,VALUE,T,GETENV!,PCERT,EQ,COND,PCERT-ENV,ER-LET*,SAVE-PARALLELISM-SETTINGS,WARNINGS-AS-ERRORS,STATE-GLOBAL-LET*,STATE,CTX,TTAGSXP,ACL2X,CHK-ACCEPTABLE-CERTIFY-BOOK-PRELIM,ER-PROGN,USER-BOOK-NAME,CERTIFY-BOOK,QUOTE,CONS,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK-FN">certify-book-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-certify-book-fn" data-sym="CERTIFY-BOOK-FN" title="(defun certify-book-fn
       (user-book-name k compile-flg defaxioms-okp skip-proofs-okp ttags ttagsx
        ttagsxp acl2x write-port pcert useless-runes-r/w useless-runes-r/w-p
        write-event-data write-event-data-p state)
  (with-ctx-summarized (cons &#39;certify-book user-book-name)
...">certify-book-fn</a>
  (user-book-name k
    compile-flg
    defaxioms-okp
    skip-proofs-okp
    ttags
    ttagsx
    ttagsxp
    acl2x
    write-port
    pcert
    useless-runes-r/w
    useless-runes-r/w-p
    write-event-data
    write-event-data-p
    state)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (cons '<a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a> user-book-name)
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-acceptable-certify-book-prelim" data-sym="CHK-ACCEPTABLE-CERTIFY-BOOK-PRELIM" title="(defun chk-acceptable-certify-book-prelim
       (user-book-name acl2x ttagsxp ctx state)
  (cond
   ((not (eq (caar (w state)) &#39;command-landmark))
    (er soft ctx
...">chk-acceptable-certify-book-prelim</a> user-book-name
        acl2x
        ttagsxp
        ctx
        state)
      (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((warnings-as-errors nil))
        (<a class="sym-link local-def" href="#def-save-parallelism-settings" data-sym="SAVE-PARALLELISM-SETTINGS" title="(defmacro save-parallelism-settings (form) form)">save-parallelism-settings</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pcert-env (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pcert <span class="keyword">:default</span>) (<a class="sym-link local-def" href="#def-getenv_21" data-sym="GETENV!" title="(defun getenv! (str state)
  (declare (xargs :stobjs state :guard (stringp str)))
  (er-let* ((temp (getenv$ str state)))
           (value (and (not (equal temp &quot;&quot;)) temp))))">getenv!</a> <span class="string">"ACL2_PCERT_ARG"</span> state))
                 (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))) (pcert (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> pcert-env) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pcert <span class="keyword">:default</span>)
                        nil
                        pcert)))
                  ((<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> pcert-env <span class="string">"T"</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> (<a class="sym-link system" href="axioms.html#def-string-upcase" data-sym="STRING-UPCASE">string-upcase</a> pcert-env) <span class="string">"KEYWORD"</span>)))))
              (ttags-seen0 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (full-book-string full-book-name
                directory-name
                familiar-name)
              (<a class="sym-link local-def" href="#def-parse-book-name" data-sym="PARSE-BOOK-NAME" title="(defun parse-book-name (dir x extension ctx state)
  (cond
   ((and extension (not (equal extension &quot;.lisp&quot;)))
    (mv
     (er hard ctx &quot;Calls of parse-book-name with non-nil extension other than ~
...">parse-book-name</a> (<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>) user-book-name <span class="string">".lisp"</span> ctx state)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pcert <span class="keyword">:complete</span>) (<a class="sym-link local-def" href="#def-certify-book-finish-complete" data-sym="CERTIFY-BOOK-FINISH-COMPLETE" title="(defun certify-book-finish-complete (full-book-string full-book-name ctx state)
  (let ((pcert0-file
         (convert-book-string-to-cert full-book-string :create-pcert))
        (pcert1-file
         (convert-book-string-to-cert full-book-string :convert-pcert))
...">certify-book-finish-complete</a> full-book-string
                    full-book-name
                    ctx
                    state))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((write-port (<a class="sym-link local-def" href="#def-certify-book-write-port" data-sym="CERTIFY-BOOK-WRITE-PORT" title="(defun certify-book-write-port (write-port pcert ctx state)
  (cond ((member-eq write-port &#39;(t nil)) (value write-port))
        ((eq write-port :default)
         (cond (pcert (value nil))
               (t
...">certify-book-write-port</a> write-port pcert ctx state)) (write-acl2x (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'write-acl2x state)))
                      (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> (<a class="sym-link local-def" href="#def-certify-book-cert-op" data-sym="CERTIFY-BOOK-CERT-OP" title="(defun certify-book-cert-op (pcert pcert-env write-acl2x ctx state)
  (cond
   ((and write-acl2x pcert)
    (er soft ctx
        &quot;It is illegal to specify the writing  of a .acl2x file when a ~
...">certify-book-cert-op</a> pcert pcert-env write-acl2x ctx state))
                      (skip-proofs-okp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> skip-proofs-okp <span class="keyword">:default</span>) (consp write-acl2x))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> skip-proofs-okp))))
                      (uncertified-okp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (consp write-acl2x)))
                      (ttagsx (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if ttagsxp
                            ttagsx
                            ttags)))
                      (ttags (<a class="sym-link local-def" href="#def-chk-well-formed-ttags" data-sym="CHK-WELL-FORMED-TTAGS" title="(defun chk-well-formed-ttags (ttags cbd ctx state)
  (cond ((null ttags) (value nil))
        ((and (symbolp ttags) (equal (symbol-name ttags) &quot;ALL&quot;)) (value :all))
        ((not (true-listp ttags))
         (er soft ctx
...">chk-well-formed-ttags</a> (if write-acl2x
                            ttagsx
                            ttags)
                          (<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>)
                          ctx
                          state))
                      (ttags-allowed/ttags-seen-ignored (<a class="sym-link system" href="history-management.html#def-chk-acceptable-ttags1" data-sym="CHK-ACCEPTABLE-TTAGS1">chk-acceptable-ttags1</a> ttags-seen0
                          nil
                          ttags
                          nil
                          <span class="keyword">:quiet</span> ctx
                          state))
                      (<a class="sym-link local-def" href="#def-event-data-channel" data-sym="EVENT-DATA-CHANNEL" title="(defun event-data-channel
       (full-book-string write-event-data write-event-data-p ctx state)
  (er-let*
   ((write-event-data
     (if write-event-data-p
...">event-data-channel</a> (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
                            '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:convert-pcert</span> <span class="keyword">:create+convert-pcert</span>))
                          (<a class="sym-link local-def" href="#def-event-data-channel" data-sym="EVENT-DATA-CHANNEL" title="(defun event-data-channel
       (full-book-string write-event-data write-event-data-p ctx state)
  (er-let*
   ((write-event-data
     (if write-event-data-p
...">event-data-channel</a> full-book-string
                            write-event-data
                            write-event-data-p
                            ctx
                            state)
                          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
                      (certify-book-info-0 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> certify-book-info
                            <span class="keyword">:full-book-name</span> full-book-name
                            <span class="keyword">:cert-op</span> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
                            <span class="keyword">:event-data-channel</span> <a class="sym-link local-def" href="#def-event-data-channel" data-sym="EVENT-DATA-CHANNEL" title="(defun event-data-channel
       (full-book-string write-event-data write-event-data-p ctx state)
  (er-let*
   ((write-event-data
     (if write-event-data-p
...">event-data-channel</a>))))
                    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((compiler-enabled (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled state)) (port-file-enabled (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'port-file-enabled state))
                        (certify-book-info certify-book-info-0)
                        (match-free-error nil)
                        (defaxioms-okp-cert defaxioms-okp)
                        (skip-proofs-okp-cert skip-proofs-okp)
                        (guard-checking-on <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((compile-flg (<a class="sym-link local-def" href="#def-certify-book-compile-flg" data-sym="CERTIFY-BOOK-COMPILE-FLG" title="(defun certify-book-compile-flg (compile-flg cert-op ctx state)
  (er-let* ((env-compile-flg (getenv! &quot;ACL2_COMPILE_FLG&quot; state)))
           (cond
            ((or (and env-compile-flg (string-equal env-compile-flg &quot;ALL&quot;))
                 (eq compile-flg :all))
...">certify-book-compile-flg</a> compile-flg <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> ctx state)) (saved-acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
                          (suspect-book-action-alist (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons <span class="keyword">:uncertified-okp</span> uncertified-okp)
                                (cons <span class="keyword">:defaxioms-okp</span> defaxioms-okp)
                                (cons <span class="keyword">:skip-proofs-okp</span> skip-proofs-okp))))
                          (cert-obj (<a class="sym-link local-def" href="#def-chk-acceptable-certify-book" data-sym="CHK-ACCEPTABLE-CERTIFY-BOOK" title="(defun chk-acceptable-certify-book
       (book-name full-book-string full-book-name dir suspect-book-action-alist
        cert-op k ctx state)
  (let ((names (cons &#39;defpkg (primitive-event-macros)))
        (wrld (w state))
...">chk-acceptable-certify-book</a> user-book-name
                              full-book-string
                              full-book-name
                              directory-name
                              suspect-book-action-alist
                              <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
                              k
                              ctx
                              state))
                          (portcullis-cmds0 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> cert-obj cert-obj <span class="keyword">:cmds</span>)))
                          (old-useless-runes (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> state)))
                          (<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> (<a class="sym-link local-def" href="#def-initial-useless-runes" data-sym="INITIAL-USELESS-RUNES" title="(defun initial-useless-runes
       (full-book-string useless-runes-r/w useless-runes-r/w-p ldp ctx state)
  (let ((bookp
         (and (stringp full-book-string)
              (let ((len (length full-book-string)))
...">initial-useless-runes</a> full-book-string
                              useless-runes-r/w
                              useless-runes-r/w-p
                              nil
                              ctx
                              state))
                          (ignore (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (write-port (<a class="sym-link local-def" href="#def-write-port-file" data-sym="WRITE-PORT-FILE" title="(defun write-port-file (full-book-string cmds ctx state)
  (let ((port-file (convert-book-string-to-port full-book-string)))
    (with-output-object-channel-sharing ch port-file
                                        (cond
                                         ((null ch)
...">write-port-file</a> full-book-string
                                  portcullis-cmds0
                                  ctx
                                  state))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))
                        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (pre-alist-wrld1 (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist wrld1))
                            (wrld1-known-package-alist (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> wrld1))
                            (acl2x-file (<a class="sym-link local-def" href="#def-convert-book-string-to-acl2x" data-sym="CONVERT-BOOK-STRING-TO-ACL2X" title="(defun convert-book-string-to-acl2x (x)
  (concatenate &#39;string (remove-lisp-suffix x nil) &quot;acl2x&quot;))">convert-book-string-to-acl2x</a> full-book-string))
                            (<a class="sym-link system" href="history-management.html#def-fast-cert-mode" data-sym="FAST-CERT-MODE">fast-cert-mode</a> (<a class="sym-link system" href="history-management.html#def-fast-cert-mode" data-sym="FAST-CERT-MODE">fast-cert-mode</a> state))
                            (fast-cert-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> pcert) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="history-management.html#def-fast-cert-mode" data-sym="FAST-CERT-MODE">fast-cert-mode</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
                          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> state)
                            (<a class="sym-link local-def" href="#def-print-certify-book-step-1" data-sym="PRINT-CERTIFY-BOOK-STEP-1" title="(defun print-certify-book-step-1
       (fast-cert-p full-book-string cert-op fast-cert-mode state)
  (io? event nil state (fast-cert-p full-book-string cert-op fast-cert-mode)
       (fms &quot;CERTIFICATION ATTEMPT~#h~[~|**using fast-cert mode**~|~/ ~
             ~]~@0FOR ~x1~%~s2~@3~%~%*~ Step 1: Read ~x1 and compute its ~
...">print-certify-book-step-1</a> fast-cert-p
                              full-book-string
                              <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
                              <a class="sym-link system" href="history-management.html#def-fast-cert-mode" data-sym="FAST-CERT-MODE">fast-cert-mode</a>
                              state)
                            (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ev-lst (let nil
                                   (<a class="sym-link local-def" href="#def-read-object-file" data-sym="READ-OBJECT-FILE" title="(defun read-object-file (file ctx state)
  (er-let*
   ((ch (open-input-object-file file ctx state))
    (new-current-package (chk-in-package ch file nil ctx state)))
   (state-global-let* ((current-package new-current-package))
...">read-object-file</a> full-book-string ctx state))) (acl2x-expansion-alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (write-acl2x (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-read-acl2x-file" data-sym="READ-ACL2X-FILE" title="(defun read-acl2x-file (acl2x-file full-book-string len acl2x ctx state)
  (mv-let (acl2x-date state) (file-write-date$ acl2x-file state)
          (cond
           ((not acl2x)
            (pprogn
...">read-acl2x-file</a> acl2x-file
                                        full-book-string
                                        (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> ev-lst)
                                        acl2x
                                        ctx
                                        state))))
                                (expansion-alist0 (<a class="sym-link local-def" href="#def-certify-book-expansion-alist0" data-sym="CERTIFY-BOOK-EXPANSION-ALIST0" title="(defun certify-book-expansion-alist0
       (cert-op cert-obj acl2x-expansion-alist full-book-string acl2x-file ctx
        state)
  (cond
   ((eq cert-op :convert-pcert)
...">certify-book-expansion-alist0</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
                                    cert-obj
                                    acl2x-expansion-alist
                                    full-book-string
                                    acl2x-file
                                    ctx
                                    state))
                                (pass1-result (<a class="sym-link local-def" href="#def-certify-book-step-2" data-sym="CERTIFY-BOOK-STEP-2" title="(defun certify-book-step-2
       (ev-lst expansion-alist0 cert-op full-book-string acl2x-file
        ttags-allowed wrld1 directory-name write-acl2x full-book-name
        saved-acl2-defaults-table ctx state)
  (pprogn
...">certify-book-step-2</a> ev-lst
                                    expansion-alist0
                                    <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
                                    full-book-string
                                    acl2x-file
                                    (car ttags-allowed/ttags-seen-ignored)
                                    wrld1
                                    directory-name
                                    write-acl2x
                                    full-book-name
                                    saved-acl2-defaults-table
                                    ctx
                                    state)))
                              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (write-acl2x (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> acl2x-file))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pass1-known-package-alist (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (skipped-proofsp (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> pass1-result))
                                      (portcullis-skipped-proofsp (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> pass1-result))
                                      (axiomsp (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> pass1-result))
                                      (<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> pass1-result))
                                      (new-include-book-alist-all (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> pass1-result))
                                      (expansion-alist (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> pass1-result))
                                      (expansion-alist-to-check (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">6</span> pass1-result))
                                      (translate-cert-data (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">7</span> pass1-result))
                                      (cert-annotations (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons <span class="keyword">:skipped-proofsp</span> skipped-proofsp)
                                          (cons <span class="keyword">:axiomsp</span> axiomsp)
                                          (cons <span class="keyword">:ttags</span> <a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a>)))
                                      (post-alist1 (if fast-cert-p
                                          nil
                                          new-include-book-alist-all)))
                                    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-cert-annotations" data-sym="CHK-CERT-ANNOTATIONS" title="(defun chk-cert-annotations
       (cert-annotations portcullis-skipped-proofsp portcullis-cmds
        full-book-string suspect-book-action-alist ctx state)
  (er-progn
   (cond
...">chk-cert-annotations</a> cert-annotations
                                        portcullis-skipped-proofsp
                                        portcullis-cmds0
                                        full-book-string
                                        suspect-book-action-alist
                                        ctx
                                        state)
                                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> <span class="keyword">:convert-pcert</span>) (<a class="sym-link local-def" href="#def-certify-book-convert-pcert" data-sym="CERTIFY-BOOK-CONVERT-PCERT" title="(defun certify-book-convert-pcert
       (full-book-string full-book-name user-book-name familiar-name
        portcullis-cmds0 cert-obj ev-lst cert-annotations post-alist1 ctx
        state)
  (er-let*
...">certify-book-convert-pcert</a> full-book-string
                                            full-book-name
                                            user-book-name
                                            familiar-name
                                            portcullis-cmds0
                                            cert-obj
                                            ev-lst
                                            cert-annotations
                                            post-alist1
                                            ctx
                                            state))
                                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (rollback-pair index
                                              port-index
                                              port-non-localp
                                              rollback-wrld
                                              <a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a>)
                                            (<a class="sym-link local-def" href="#def-certify-book-step-3-info" data-sym="CERTIFY-BOOK-STEP-3-INFO" title="(defun certify-book-step-3-info (fast-cert-p wrld1 wrld-post-pass1)
  (let* ((rollback-pair
          (and (not fast-cert-p) (global-val &#39;cert-replay wrld-post-pass1)))
         (index
          (assert$ (listp rollback-pair)
...">certify-book-step-3-info</a> fast-cert-p wrld1 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                                            (<a class="sym-link local-def" href="#def-fast-alist-free-cert-data-on-exit" data-sym="FAST-ALIST-FREE-CERT-DATA-ON-EXIT" title="(defmacro fast-alist-free-cert-data-on-exit (cert-data form)
  `(let* ((cert-data-to-free ,cert-data)
          (cert-data-entry-tp-to-free
           (cdr (assoc-eq :type-prescription cert-data-to-free))))
     (fast-alist-free-on-exit cert-data-entry-tp-to-free
...">fast-alist-free-cert-data-on-exit</a> <a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a>
                                              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-update-useless-runes" data-sym="UPDATE-USELESS-RUNES" title="(defun update-useless-runes (useless-runes state)
  (pprogn (free-useless-runes (f-get-global &#39;useless-runes state) state)
          (f-put-global &#39;useless-runes
                        (maybe-refresh-useless-runes useless-runes) state)))">update-useless-runes</a> old-useless-runes state)
                                                (if <a class="sym-link local-def" href="#def-event-data-channel" data-sym="EVENT-DATA-CHANNEL" title="(defun event-data-channel
       (full-book-string write-event-data write-event-data-p ctx state)
  (er-let*
   ((write-event-data
     (if write-event-data-p
...">event-data-channel</a>
                                                  (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> <a class="sym-link local-def" href="#def-event-data-channel" data-sym="EVENT-DATA-CHANNEL" title="(defun event-data-channel
       (full-book-string write-event-data write-event-data-p ctx state)
  (er-let*
   ((write-event-data
     (if write-event-data-p
...">event-data-channel</a> state)
                                                  state)
                                                (<a class="sym-link local-def" href="#def-print-certify-book-step-3" data-sym="PRINT-CERTIFY-BOOK-STEP-3" title="(defun print-certify-book-step-3 (index port-index port-non-localp state)
  (io? event nil state (index port-index port-non-localp)
       (cond
        (index
         (assert$ (and (posp index) (null port-index))
...">print-certify-book-step-3</a> index
                                                  port-index
                                                  port-non-localp
                                                  state)
                                                (<a class="sym-link local-def" href="#def-certify-book-step-3_2B" data-sym="CERTIFY-BOOK-STEP-3+" title="(defun certify-book-step-3+
       (rollback-pair rollback-wrld port-index portcullis-cmds0 compile-flg
        cert-op expansion-alist acl2x-expansion-alist fast-cert-p
        wrld1-known-package-alist index cert-data-pass1-saved uncertified-okp
        defaxioms-okp skip-proofs-okp ttags-seen translate-cert-data
...">certify-book-step-3+</a> rollback-pair
                                                  rollback-wrld
                                                  port-index
                                                  portcullis-cmds0
                                                  compile-flg
                                                  <a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a>
                                                  expansion-alist
                                                  acl2x-expansion-alist
                                                  fast-cert-p
                                                  wrld1-known-package-alist
                                                  index
                                                  <a class="sym-link local-def" href="#def-cert-data-pass1-saved" data-sym="CERT-DATA-PASS1-SAVED" title="(defun cert-data-pass1-saved (old-wrld new-wrld)
  (acons :type-prescription (cert-data-tps old-wrld new-wrld new-wrld nil)
         (acons :pass1-saved t nil)))">cert-data-pass1-saved</a>
                                                  uncertified-okp
                                                  defaxioms-okp
                                                  skip-proofs-okp
                                                  <a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a>
                                                  translate-cert-data
                                                  expansion-alist-to-check
                                                  full-book-string
                                                  post-alist1
                                                  directory-name
                                                  ev-lst
                                                  full-book-name
                                                  user-book-name
                                                  familiar-name
                                                  cert-annotations
                                                  pass1-known-package-alist
                                                  acl2x-file
                                                  pre-alist-wrld1
                                                  k
                                                  expansion-alist0
                                                  saved-acl2-defaults-table
                                                  wrld1
                                                  <a class="sym-link local-def" href="#def-event-data-channel" data-sym="EVENT-DATA-CHANNEL" title="(defun event-data-channel
       (full-book-string write-event-data write-event-data-p ctx state)
  (er-let*
   ((write-event-data
     (if write-event-data-p
...">event-data-channel</a>
                                                  ctx
                                                  state)))))))))))))))))))))))))</pre>
  </div>

<div class="form-block macro" id="def-certify-book" data-defines="CERTIFY-BOOK" data-references="STATE,CERTIFY-BOOK-FN,LIST,T,MEMBER-EQ,BOOLEANP,AND,XARGS,DECLARE,WRITE-EVENT-DATA-P,WRITE-EVENT-DATA,USELESS-RUNES-P,USELESS-RUNES,PCERT,WRITE-PORT,ACL2X,TTAGSXP,TTAGSX,TTAGS,SKIP-PROOFS-OKP,DEFAXIOMS-OKP,&KEY,COMPILE-FLG,QUOTE,K,&OPTIONAL,USER-BOOK-NAME,DEFMACRO" data-used-by="CERTIFY-BOOK-FN,CERTIFY-BOOK-STEP-2,USELESS-RUNES-SOURCE-MSG,PROCESS-EMBEDDED-EVENTS,EVAL-EVENT-LST-ENVIRONMENT,EVAL-EVENT-LST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK">certify-book</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-certify-book" data-sym="CERTIFY-BOOK" title="(defmacro certify-book
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;:default)
           &amp;key (defaxioms-okp &#39;nil) (skip-proofs-okp &#39;:default) (ttags &#39;nil)
           (ttagsx &#39;nil ttagsxp) (acl2x &#39;nil) (write-port &#39;:default)
...">certify-book</a>
  (user-book-name &amp;optional
    (k '<span class="number">0</span>)
    (compile-flg '<span class="keyword">:default</span>)
    &amp;key
    (defaxioms-okp 'nil)
    (skip-proofs-okp '<span class="keyword">:default</span>)
    (ttags 'nil)
    (ttagsx 'nil ttagsxp)
    (acl2x 'nil)
    (write-port '<span class="keyword">:default</span>)
    (pcert '<span class="keyword">:default</span>)
    (<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a> 'nil useless-runes-p)
    (write-event-data 'nil write-event-data-p))
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> acl2x)
        (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> compile-flg '(nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:all</span> <span class="keyword">:default</span>)))))
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-certify-book-fn" data-sym="CERTIFY-BOOK-FN" title="(defun certify-book-fn
       (user-book-name k compile-flg defaxioms-okp skip-proofs-okp ttags ttagsx
        ttagsxp acl2x write-port pcert useless-runes-r/w useless-runes-r/w-p
        write-event-data write-event-data-p state)
  (with-ctx-summarized (cons &#39;certify-book user-book-name)
...">certify-book-fn</a>
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote user-book-name)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote k)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote compile-flg)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote defaxioms-okp)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote skip-proofs-okp)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote ttags)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote ttagsx)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote ttagsxp)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote acl2x)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote write-port)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote pcert)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote <a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote useless-runes-p)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote write-event-data)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote write-event-data-p)
    'state))</pre>
  </div>

<div class="form-block macro" id="def-certify-book_21" data-defines="CERTIFY-BOOK!" data-references="UBT!,ER-PROGN,QUASIQUOTE,<=,INTEGERP,AND,XARGS,DECLARE,ARGS,&REST,COMPILE-FLG-SUPPLIED-P,T,COMPILE-FLG,QUOTE,K,&OPTIONAL,USER-BOOK-NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CERTIFY-BOOK!">certify-book!</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-certify-book_21" data-sym="CERTIFY-BOOK!" title="(defmacro certify-book!
          (user-book-name
           &amp;optional (k &#39;0) (compile-flg &#39;t compile-flg-supplied-p)
           &amp;rest args)
  (declare (xargs :guard (and (integerp k) (&lt;= 0 k))))
...">certify-book!</a>
  (user-book-name &amp;optional
    (k '<span class="number">0</span>)
    (compile-flg '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> compile-flg-supplied-p)
    &amp;rest
    <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp k) (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> k))))
  `(<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="history-management.html#def-ubt_21" data-sym="UBT!">ubt!</a> ,(1+ K))
    ,(IF COMPILE-FLG-SUPPLIED-P
     `(CERTIFY-BOOK ,USER-BOOK-NAME ,K ,COMPILE-FLG ,@ARGS)
     `(CERTIFY-BOOK ,USER-BOOK-NAME ,K))))</pre>
  </div>

<div class="form-block function" id="def-redundant-defchoosep" data-defines="REDUNDANT-DEFCHOOSEP" data-references="ASSOC-KEYWORD,CADR,EQ,EQUAL,NEW-REST,NEW-BODY,NEW-FREE-VARS,NEW-BOUND-VARS,OLD-REST,OLD-BODY,OLD-FREE-VARS,OLD-BOUND-VARS,!NAME,DEFCHOOSE,QUOTE,CASE-MATCH,AND,GET-EVENT,OLD-EV,LET*,WRLD,EVENT-FORM,NAME,DEFUN" data-used-by="DEFCHOOSE-FN" data-part-name="REDUNDANT-DEFCHOOSEP" data-part-args="WRLD,EVENT-FORM,NAME" data-part-body="ASSOC-KEYWORD,CADR,EQ,EQUAL,NEW-REST,NEW-BODY,NEW-FREE-VARS,NEW-BOUND-VARS,EVENT-FORM,OLD-REST,OLD-BODY,OLD-FREE-VARS,OLD-BOUND-VARS,!NAME,DEFCHOOSE,QUOTE,CASE-MATCH,AND,WRLD,NAME,GET-EVENT,OLD-EV,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDUNDANT-DEFCHOOSEP">redundant-defchoosep</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-redundant-defchoosep" data-sym="REDUNDANT-DEFCHOOSEP" title="(defun redundant-defchoosep (name event-form wrld)
  (let* ((old-ev (get-event name wrld)))
    (and old-ev
         (case-match old-ev
                     ((&#39;defchoose !name old-bound-vars old-free-vars old-body
...">redundant-defchoosep</a>
  (name event-form wrld)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-ev (get-event name wrld)))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> old-ev
      (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> old-ev
        (('<a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a> !name
           old-bound-vars
           old-free-vars
           old-body . old-rest) (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> event-form
            (('<a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a> !name
               new-bound-vars
               new-free-vars
               new-body . new-rest) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal old-bound-vars new-bound-vars)
                (equal old-free-vars new-free-vars)
                (equal old-body new-body)
                (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:strengthen</span> old-rest))
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:strengthen</span> new-rest)))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-arglist-for-defchoose" data-defines="CHK-ARGLIST-FOR-DEFCHOOSE" data-references="FIND-FIRST-BAD-ARG,EXPLAN,CULPRIT,MV-LET,T,IF,SOFT,ER,TRUE-LISTP,NOT,VALUE,ARGLISTP,COND,STATE,CTX,BOUND-VARS-FLG,ARGS,DEFUN" data-used-by="DEFCHOOSE-FN" data-part-name="CHK-ARGLIST-FOR-DEFCHOOSE" data-part-args="STATE,CTX,BOUND-VARS-FLG,ARGS" data-part-body="FIND-FIRST-BAD-ARG,EXPLAN,CULPRIT,MV-LET,T,BOUND-VARS-FLG,IF,CTX,SOFT,ER,TRUE-LISTP,NOT,VALUE,ARGS,ARGLISTP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ARGLIST-FOR-DEFCHOOSE">chk-arglist-for-defchoose</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-arglist-for-defchoose" data-sym="CHK-ARGLIST-FOR-DEFCHOOSE" title="(defun chk-arglist-for-defchoose (args bound-vars-flg ctx state)
  (cond ((arglistp args) (value nil))
        ((not (true-listp args))
         (er soft ctx
             &quot;The ~#0~[bound~/free~] variables of a DEFCHOOSE event must be a ~
...">chk-arglist-for-defchoose</a>
  (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> bound-vars-flg ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="basis-a.html#def-arglistp" data-sym="ARGLISTP">arglistp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The ~#0~[bound~/free~] variables of a DEFCHOOSE event must be a ~
              true list but ~x1 is not."</span>
        (if bound-vars-flg
          <span class="number">0</span>
          <span class="number">1</span>)
        <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (culprit explan)
        (<a class="sym-link system" href="basis-a.html#def-find-first-bad-arg" data-sym="FIND-FIRST-BAD-ARG">find-first-bad-arg</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
        (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The ~#0~[bound~/free~] variables of a DEFCHOOSE event ~
                        must be a true list of distinct, legal variable names.  ~
                        ~x1 is not such a list.  The element ~x2 violates the ~
                        rules because it ~@3."</span>
          (if bound-vars-flg
            <span class="number">0</span>
            <span class="number">1</span>)
          <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
          culprit
          explan)))))</pre>
  </div>

<div class="form-block function" id="def-without-warnings-fn" data-defines="WITHOUT-WARNINGS-FN" data-references="WARNING,ADD-TO-SET-EQ,F-PUT-GLOBAL,PPROGN,STATE,QUOTE,F-GET-GLOBAL,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,QUASIQUOTE,FORM,DEFUN" data-used-by="WITHOUT-WARNINGS" data-part-name="WITHOUT-WARNINGS-FN" data-part-args="FORM" data-part-body="WARNING,ADD-TO-SET-EQ,F-PUT-GLOBAL,PPROGN,STATE,QUOTE,F-GET-GLOBAL,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITHOUT-WARNINGS-FN">without-warnings-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-without-warnings-fn" data-sym="WITHOUT-WARNINGS-FN" title="(defun without-warnings-fn (form)
  `(state-global-let*
    ((inhibit-output-lst (f-get-global &#39;inhibit-output-lst state)))
    (pprogn
     (f-put-global &#39;inhibit-output-lst
...">without-warnings-fn</a>
  (form)
  `(<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state)))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'inhibit-output-lst
        (<a class="sym-link system" href="axioms.html#def-add-to-set-eq" data-sym="ADD-TO-SET-EQ">add-to-set-eq</a> 'warning
          (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state))
        state)
      ,FORM)))</pre>
  </div>

<div class="form-block macro" id="def-without-warnings" data-defines="WITHOUT-WARNINGS" data-references="WITHOUT-WARNINGS-FN,FORM,DEFMACRO" data-used-by="TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITHOUT-WARNINGS">without-warnings</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-without-warnings" data-sym="WITHOUT-WARNINGS" title="(defmacro without-warnings (form) (without-warnings-fn form))">without-warnings</a>
  (form)
  (<a class="sym-link local-def" href="#def-without-warnings-fn" data-sym="WITHOUT-WARNINGS-FN" title="(defun without-warnings-fn (form)
  `(state-global-let*
    ((inhibit-output-lst (f-get-global &#39;inhibit-output-lst state)))
    (pprogn
     (f-put-global &#39;inhibit-output-lst
...">without-warnings-fn</a> form))</pre>
  </div>

<div class="form-block function" id="def-translate-ignore-ok" data-defines="TRANSLATE-IGNORE-OK" data-references="TRANSLATE,T,PUT-ASSOC-EQUAL-FAST,TABLE-ALIST,ACL2-DEFAULTS-TABLE,QUOTE,PUTPROP,LET,STATE,W,CTX,KNOWN-STOBJS,LOGIC-MODEP,STOBJS-OUT,X,DEFUN" data-used-by="TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK" data-part-name="TRANSLATE-IGNORE-OK" data-part-args="STATE,W,CTX,KNOWN-STOBJS,LOGIC-MODEP,STOBJS-OUT,X" data-part-body="STATE,CTX,KNOWN-STOBJS,LOGIC-MODEP,STOBJS-OUT,X,TRANSLATE,T,PUT-ASSOC-EQUAL-FAST,TABLE-ALIST,ACL2-DEFAULTS-TABLE,QUOTE,PUTPROP,W,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-IGNORE-OK">translate-ignore-ok</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-ignore-ok" data-sym="TRANSLATE-IGNORE-OK" title="(defun translate-ignore-ok (x stobjs-out logic-modep known-stobjs ctx w state)
  (let ((w
         (putprop &#39;acl2-defaults-table &#39;table-alist
                  (put-assoc-equal-fast :ignore-ok t
                                        (table-alist &#39;acl2-defaults-table w))
...">translate-ignore-ok</a>
  (x <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> logic-modep known-stobjs ctx <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
  (let ((<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> 'acl2-defaults-table
         '<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a>
         (<a class="sym-link system" href="history-management.html#def-put-assoc-equal-fast" data-sym="PUT-ASSOC-EQUAL-FAST">put-assoc-equal-fast</a> <span class="keyword">:ignore-ok</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
           (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
         <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
    (translate x
      <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
      logic-modep
      known-stobjs
      ctx
      <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
      state)))</pre>
  </div>

<div class="form-block macro" id="def-translate-without-warnings-ignore-ok" data-defines="TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK" data-references="TRANSLATE-IGNORE-OK,WITHOUT-WARNINGS,QUASIQUOTE,ARGS,&REST,DEFMACRO" data-used-by="DEFCHOOSE-CONSTRAINT,DEFCHOOSE-CONSTRAINT-BASIC" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK">translate-without-warnings-ignore-ok</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-translate-without-warnings-ignore-ok" data-sym="TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK" title="(defmacro translate-without-warnings-ignore-ok (&amp;rest args)
  `(without-warnings (translate-ignore-ok ,@args)))">translate-without-warnings-ignore-ok</a>
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  `(<a class="sym-link local-def" href="#def-without-warnings" data-sym="WITHOUT-WARNINGS" title="(defmacro without-warnings (form) (without-warnings-fn form))">without-warnings</a> (<a class="sym-link local-def" href="#def-translate-ignore-ok" data-sym="TRANSLATE-IGNORE-OK" title="(defun translate-ignore-ok (x stobjs-out logic-modep known-stobjs ctx w state)
  (let ((w
         (putprop &#39;acl2-defaults-table &#39;table-alist
                  (put-assoc-equal-fast :ignore-ok t
                                        (table-alist &#39;acl2-defaults-table w))
...">translate-ignore-ok</a> ,@ARGS)))</pre>
  </div>

<div class="form-block function" id="def-defchoose-constraint-basic" data-defines="DEFCHOOSE-CONSTRAINT-BASIC" data-references="*NIL*,CONS-TERM,TRUE-LISTP,IF,MV-LET,IMPLIES,QUOTE,FCONS-TERM*,VALUE,T,LET,QUASIQUOTE,TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK,CONSEQUENT,ER-LET*,CDR,NULL,COND,STATE,WRLD,CTX,TBODY,FORMALS,BOUND-VARS,FN,DEFUN" data-used-by="DEFCHOOSE-CONSTRAINT" data-part-name="DEFCHOOSE-CONSTRAINT-BASIC" data-part-args="STATE,WRLD,CTX,TBODY,FORMALS,BOUND-VARS,FN" data-part-body="*NIL*,FORMALS,FN,CONS-TERM,TRUE-LISTP,IF,MV-LET,TBODY,IMPLIES,QUOTE,FCONS-TERM*,VALUE,STATE,WRLD,CTX,T,LET,QUASIQUOTE,TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK,CONSEQUENT,ER-LET*,BOUND-VARS,CDR,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFCHOOSE-CONSTRAINT-BASIC">defchoose-constraint-basic</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defchoose-constraint-basic" data-sym="DEFCHOOSE-CONSTRAINT-BASIC" title="(defun defchoose-constraint-basic (fn bound-vars formals tbody ctx wrld state)
  (cond
   ((null (cdr bound-vars))
    (er-let*
     ((consequent
...">defchoose-constraint-basic</a>
  (fn <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> tbody ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>)) (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((consequent (<a class="sym-link local-def" href="#def-translate-without-warnings-ignore-ok" data-sym="TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK" title="(defmacro translate-without-warnings-ignore-ok (&amp;rest args)
  `(without-warnings (translate-ignore-ok ,@args)))">translate-without-warnings-ignore-ok</a> `(let ((,(CAR BOUND-VARS) ,(CONS FN FORMALS)))
               ,TBODY)
             <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
             <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
             <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
             ctx
             wrld
             state)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> tbody consequent))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((consequent (<a class="sym-link local-def" href="#def-translate-without-warnings-ignore-ok" data-sym="TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK" title="(defmacro translate-without-warnings-ignore-ok (&amp;rest args)
  `(without-warnings (translate-ignore-ok ,@args)))">translate-without-warnings-ignore-ok</a> `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> ,BOUND-VARS ,(CONS FN FORMALS) ,TBODY)
             <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
             <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
             <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
             ctx
             wrld
             state)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> 'if
            (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="basis-b.html#def-cons-term" data-sym="CONS-TERM">cons-term</a> fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>))
            (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> tbody consequent)
            <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a>))))))</pre>
  </div>

<div class="form-block function" id="def-generate-variable-lst-simple" data-defines="GENERATE-VARIABLE-LST-SIMPLE" data-references="CDR,CONS,1+,FIND-PKG-WITNESS,GENVAR,NEW-VAR,SYMBOL-NAME,STRIP-FINAL-DIGITS,N,STR,MV-LET,CAR,OLD-VAR,LET,T,NULL,COND,AVOID-LST,VAR-LST,DEFUN" data-used-by="DEFCHOOSE-CONSTRAINT-EXTRA" data-part-name="GENERATE-VARIABLE-LST-SIMPLE" data-part-args="AVOID-LST,VAR-LST" data-part-body="CDR,GENERATE-VARIABLE-LST-SIMPLE,CONS,AVOID-LST,1+,FIND-PKG-WITNESS,GENVAR,NEW-VAR,SYMBOL-NAME,STRIP-FINAL-DIGITS,N,STR,MV-LET,CAR,OLD-VAR,LET,T,VAR-LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GENERATE-VARIABLE-LST-SIMPLE">generate-variable-lst-simple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-generate-variable-lst-simple" data-sym="GENERATE-VARIABLE-LST-SIMPLE" title="(defun generate-variable-lst-simple (var-lst avoid-lst)
  (cond ((null var-lst) nil)
        (t
         (let ((old-var (car var-lst)))
           (mv-let (str n) (strip-final-digits (symbol-name old-var))
...">generate-variable-lst-simple</a>
  (var-lst avoid-lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> var-lst) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((old-var (car var-lst)))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (str n)
          (strip-final-digits (symbol-name old-var))
          (let ((new-var (<a class="sym-link system" href="basis-b.html#def-genvar" data-sym="GENVAR">genvar</a> (find-pkg-witness old-var) str (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> n) avoid-lst)))
            (cons new-var
              (<a class="sym-link local-def" href="#def-generate-variable-lst-simple" data-sym="GENERATE-VARIABLE-LST-SIMPLE" title="(defun generate-variable-lst-simple (var-lst avoid-lst)
  (cond ((null var-lst) nil)
        (t
         (let ((old-var (car var-lst)))
           (mv-let (str n) (strip-final-digits (symbol-name old-var))
...">generate-variable-lst-simple</a> (cdr var-lst)
                (cons new-var avoid-lst)))))))))</pre>
  </div>

<div class="form-block function" id="def-defchoose-constraint-extra" data-defines="DEFCHOOSE-CONSTRAINT-EXTRA" data-references="MV-LET,T,NOT,AND,OR,CAR,BOUND-VAR,CDR,NULL,COND,EQUAL,EQUALITY,LET,QUASIQUOTE,BODY2,APPEND,GENERATE-VARIABLE-LST-SIMPLE,FORMALS2,LET*,BODY,FORMALS,BOUND-VARS,FN,DEFUN" data-used-by="DEFCHOOSE-CONSTRAINT" data-part-name="DEFCHOOSE-CONSTRAINT-EXTRA" data-part-args="BODY,FORMALS,BOUND-VARS,FN" data-part-body="MV-LET,T,NOT,AND,OR,CAR,BOUND-VAR,CDR,NULL,COND,EQUAL,EQUALITY,LET,QUASIQUOTE,BODY2,BOUND-VARS,APPEND,FORMALS,GENERATE-VARIABLE-LST-SIMPLE,FORMALS2,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFCHOOSE-CONSTRAINT-EXTRA">defchoose-constraint-extra</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defchoose-constraint-extra" data-sym="DEFCHOOSE-CONSTRAINT-EXTRA" title="(defun defchoose-constraint-extra (fn bound-vars formals body)
  (let* ((formals2
          (generate-variable-lst-simple formals (append bound-vars formals)))
         (body2
          `(let ,(pairlis$ formals (pairlis$ formals2 nil))
...">defchoose-constraint-extra</a>
  (fn <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((formals2 (<a class="sym-link local-def" href="#def-generate-variable-lst-simple" data-sym="GENERATE-VARIABLE-LST-SIMPLE" title="(defun generate-variable-lst-simple (var-lst avoid-lst)
  (cond ((null var-lst) nil)
        (t
         (let ((old-var (car var-lst)))
           (mv-let (str n) (strip-final-digits (symbol-name old-var))
...">generate-variable-lst-simple</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
         (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>))) (body2 `(let ,(PAIRLIS$ FORMALS (PAIRLIS$ FORMALS2 NIL))
          ,BODY))
      (equality `(equal (,FN ,@FORMALS) (,FN ,@FORMALS2))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>)) (let ((bound-var (car <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>)))
          `(<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> ,EQUALITY
            (let ((,BOUND-VAR (,FN ,@FORMALS)))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ,BODY (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ,BODY2)))
            (let ((,BOUND-VAR (,FN ,@FORMALS2)))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ,BODY2 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ,BODY))))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> ,EQUALITY
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (,@BOUND-VARS)
            (,FN ,@FORMALS)
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ,BODY (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ,BODY2)))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (,@BOUND-VARS)
            (,FN ,@FORMALS2)
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ,BODY2 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ,BODY))))))))</pre>
  </div>

<div class="form-block function" id="def-defchoose-constraint" data-defines="DEFCHOOSE-CONSTRAINT" data-references="CONJOIN2,VALUE,T,DEFCHOOSE-CONSTRAINT-EXTRA,TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK,EXTRA,COND,DEFCHOOSE-CONSTRAINT-BASIC,BASIC,ER-LET*,STATE,WRLD,CTX,STRENGTHEN,TBODY,BODY,FORMALS,BOUND-VARS,FN,DEFUN" data-used-by="DEFCHOOSE-FN" data-part-name="DEFCHOOSE-CONSTRAINT" data-part-args="STATE,WRLD,CTX,STRENGTHEN,TBODY,BODY,FORMALS,BOUND-VARS,FN" data-part-body="CONJOIN2,VALUE,T,BODY,DEFCHOOSE-CONSTRAINT-EXTRA,TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK,EXTRA,STRENGTHEN,COND,STATE,WRLD,CTX,TBODY,FORMALS,BOUND-VARS,FN,DEFCHOOSE-CONSTRAINT-BASIC,BASIC,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFCHOOSE-CONSTRAINT">defchoose-constraint</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defchoose-constraint" data-sym="DEFCHOOSE-CONSTRAINT" title="(defun defchoose-constraint
       (fn bound-vars formals body tbody strengthen ctx wrld state)
  (er-let*
   ((basic
     (defchoose-constraint-basic fn bound-vars formals tbody ctx wrld state)))
...">defchoose-constraint</a>
  (fn <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> tbody strengthen ctx wrld state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((basic (<a class="sym-link local-def" href="#def-defchoose-constraint-basic" data-sym="DEFCHOOSE-CONSTRAINT-BASIC" title="(defun defchoose-constraint-basic (fn bound-vars formals tbody ctx wrld state)
  (cond
   ((null (cdr bound-vars))
    (er-let*
     ((consequent
...">defchoose-constraint-basic</a> fn
         <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>
         <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
         tbody
         ctx
         wrld
         state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (strengthen (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((extra (<a class="sym-link local-def" href="#def-translate-without-warnings-ignore-ok" data-sym="TRANSLATE-WITHOUT-WARNINGS-IGNORE-OK" title="(defmacro translate-without-warnings-ignore-ok (&amp;rest args)
  `(without-warnings (translate-ignore-ok ,@args)))">translate-without-warnings-ignore-ok</a> (<a class="sym-link local-def" href="#def-defchoose-constraint-extra" data-sym="DEFCHOOSE-CONSTRAINT-EXTRA" title="(defun defchoose-constraint-extra (fn bound-vars formals body)
  (let* ((formals2
          (generate-variable-lst-simple formals (append bound-vars formals)))
         (body2
          `(let ,(pairlis$ formals (pairlis$ formals2 nil))
...">defchoose-constraint-extra</a> fn <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
               <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
               <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
               <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
               ctx
               wrld
               state)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-conjoin2" data-sym="CONJOIN2">conjoin2</a> basic extra))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> basic)))))</pre>
  </div>

<div class="form-block function" id="def-defchoose-fn" data-defines="DEFCHOOSE-FN" data-references="DEFCHOOSE-AXIOM,DEFUNS,QUASIQUOTE,INSTALL-EVENT,DEFCHOOSE-CONSTRAINT,CONSTRAINT,PUTPROP-UNLESS,SYMBOL-CLASS,HEREDITARILY-CONSTRAINED-FNNAMES,CONSTRAINEDP,PUTPROP,STOBJS-OUT,COMPUTE-STOBJ-FLAGS,STOBJS-IN,WARNING$,EQ,PPROGN,REVERSE,SUBSETP-EQ,IGNORED-VARS-STRING,ACL2-DEFAULTS-TABLE,TABLE-ALIST,ASSOC-EQ,CDR,IGNORE-OK,SET-DIFFERENCE-EQ,IGNORED,APPEND,BOUND-AND-FREE-VARS,ALL-VARS,BODY-VARS,INTERSECTION-EQ,INTERSECTP-EQ,FUNCTION,CHK-JUST-NEW-NAME,TRANSLATE,TBODY,ER-LET*,CHK-ARGLIST-FOR-DEFCHOOSE,CADDDR,BODY,CADDR,FORMALS,LIST,ATOM,IF,BOUND-VARS,FN,LET,ENFORCE-REDUNDANCY,T,STOP-REDUNDANT-EVENT,REDUNDANT-DEFCHOOSEP,BOOLEANP,SOFT,ER,STRIP-KEYWORD-LIST,NULL,NOT,COND,CONSTRAINED-FUNCTION,CTX,CHK-ALL-BUT-NEW-NAME,ER-PROGN,ASSOC-KEYWORD,AND,STRENGTHEN,KEYWORD-VALUE-LISTP,KAP,NTHCDR,KA,VALID-KEYWORDS,CADR,RAW-BOUND-VARS,OR,W,WRLD,LET*,CAR,DEFCHOOSE,QUOTE,CONS,WITH-CTX-SUMMARIZED,WHEN-LOGIC,TRUE-LISTP,XARGS,DECLARE,EVENT-FORM,STATE,DEF,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="DEFCHOOSE-FN" data-part-args="EVENT-FORM,STATE,DEF" data-part-declare="DEF,TRUE-LISTP,XARGS,DECLARE" data-part-body="DEFCHOOSE-AXIOM,DEFUNS,QUASIQUOTE,INSTALL-EVENT,DEFCHOOSE-CONSTRAINT,CONSTRAINT,PUTPROP-UNLESS,SYMBOL-CLASS,HEREDITARILY-CONSTRAINED-FNNAMES,CONSTRAINEDP,PUTPROP,STOBJS-OUT,COMPUTE-STOBJ-FLAGS,STOBJS-IN,WARNING$,EQ,PPROGN,REVERSE,SUBSETP-EQ,IGNORED-VARS-STRING,ACL2-DEFAULTS-TABLE,TABLE-ALIST,ASSOC-EQ,CDR,IGNORE-OK,SET-DIFFERENCE-EQ,IGNORED,APPEND,BOUND-AND-FREE-VARS,ALL-VARS,BODY-VARS,INTERSECTION-EQ,INTERSECTP-EQ,FUNCTION,CHK-JUST-NEW-NAME,TRANSLATE,TBODY,ER-LET*,CHK-ARGLIST-FOR-DEFCHOOSE,CADDDR,BODY,CADDR,FORMALS,LIST,ATOM,IF,BOUND-VARS,FN,LET,ENFORCE-REDUNDANCY,T,STOP-REDUNDANT-EVENT,REDUNDANT-DEFCHOOSEP,BOOLEANP,SOFT,ER,STRIP-KEYWORD-LIST,NULL,NOT,COND,CONSTRAINED-FUNCTION,CTX,CHK-ALL-BUT-NEW-NAME,ER-PROGN,ASSOC-KEYWORD,AND,STRENGTHEN,KEYWORD-VALUE-LISTP,KAP,NTHCDR,KA,VALID-KEYWORDS,CADR,RAW-BOUND-VARS,OR,EVENT-FORM,STATE,W,WRLD,LET*,DEF,CAR,DEFCHOOSE,QUOTE,CONS,WITH-CTX-SUMMARIZED,WHEN-LOGIC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFCHOOSE-FN">defchoose-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defchoose-fn" data-sym="DEFCHOOSE-FN" title="(defun defchoose-fn (def state event-form)
  (declare (xargs :guard (true-listp def)))
  (when-logic &quot;DEFCHOOSE&quot;
              (with-ctx-summarized (cons &#39;defchoose (car def))
                                   (let* ((wrld (w state))
...">defchoose-fn</a>
  (def state event-form)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> def)))
  (<a class="sym-link system" href="axioms.html#def-when-logic" data-sym="WHEN-LOGIC">when-logic</a> <span class="string">"DEFCHOOSE"</span>
    (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (cons '<a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a> (car def))
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (cons '<a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a> def)))
          (raw-bound-vars (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def))
          (valid-keywords '(<span class="keyword">:strengthen</span>))
          (ka (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> <span class="number">4</span> def))
          (kap (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> ka))
          (strengthen (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> kap (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:strengthen</span> ka)))))
        (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name (car def)
            ctx
            'constrained-function
            wrld
            state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> kap (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-strip-keyword-list" data-sym="STRIP-KEYWORD-LIST">strip-keyword-list</a> valid-keywords ka)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"Defchoose forms must have the form (defchoose fn bound-vars ~
              formals body), with optional keyword argument~#0~[~/s~] ~&amp;0.  ~
              However, ~x1 does not have this form.  See :DOC defchoose."</span>
                valid-keywords
                event-form))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> strengthen)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The :strengthen argument of a defchoose event must be t or nil. ~
              The event ~x0 is thus illegal."</span>
                event-form))
            ((<a class="sym-link local-def" href="#def-redundant-defchoosep" data-sym="REDUNDANT-DEFCHOOSEP" title="(defun redundant-defchoosep (name event-form wrld)
  (let* ((old-ev (get-event name wrld)))
    (and old-ev
         (case-match old-ev
                     ((&#39;defchoose !name old-bound-vars old-free-vars old-body
...">redundant-defchoosep</a> (car def) event-form wrld) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state <span class="keyword">:name</span> (car def)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-enforce-redundancy" data-sym="ENFORCE-REDUNDANCY">enforce-redundancy</a> event-form
                ctx
                wrld
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> raw-bound-vars) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"The bound variables of a defchoose form must be non-empty.  ~
                 The form ~x0 is therefore illegal."</span>
                      event-form))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((fn (car def)) (<a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> (if (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> raw-bound-vars)
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> raw-bound-vars)
                            raw-bound-vars))
                        (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> def))
                        (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> def)))
                      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-arglist-for-defchoose" data-sym="CHK-ARGLIST-FOR-DEFCHOOSE" title="(defun chk-arglist-for-defchoose (args bound-vars-flg ctx state)
  (cond ((arglistp args) (value nil))
        ((not (true-listp args))
         (er soft ctx
             &quot;The ~#0~[bound~/free~] variables of a DEFCHOOSE event must be a ~
...">chk-arglist-for-defchoose</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ctx state)
                        (<a class="sym-link local-def" href="#def-chk-arglist-for-defchoose" data-sym="CHK-ARGLIST-FOR-DEFCHOOSE" title="(defun chk-arglist-for-defchoose (args bound-vars-flg ctx state)
  (cond ((arglistp args) (value nil))
        ((not (true-listp args))
         (er soft ctx
             &quot;The ~#0~[bound~/free~] variables of a DEFCHOOSE event must be a ~
...">chk-arglist-for-defchoose</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> nil ctx state)
                        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tbody (translate <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ctx wrld state)) (wrld (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> fn nil 'function nil ctx wrld state)))
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-intersectp-eq" data-sym="INTERSECTP-EQ">intersectp-eq</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"The bound and free variables of a defchoose form must ~
                        not intersect, but their intersection for the form ~
                        ~x0 is ~x1."</span>
                                event-form
                                (<a class="sym-link system" href="axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((body-vars (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> tbody)) (bound-and-free-vars (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>))
                                  (ignored (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> bound-and-free-vars body-vars))
                                  (ignore-ok (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:ignore-ok</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld))))
                                  (ignored-vars-string <span class="string">"The variable~#0~[ ~&amp;0~ does~/s ~&amp;0 do~] not occur ~
                            in the body of the form ~x1.  However, ~#0~[this ~
                            variable~/each of these variables~] appears in ~
                            the bound variables or the formals of that form.  ~
                            In order to avoid this error, see :DOC ~
                            set-ignore-ok."</span>))
                                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> body-vars bound-and-free-vars)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                      ctx
                                      <span class="string">"All variables in the body of a defchoose form ~
                            must appear among the bound or free variables ~
                            supplied in that form.  However, the ~
                            ~#0~[variable ~x0 does~/variables ~&amp;0 do~] not ~
                            appear in the bound or free variables of the form ~
                            ~x1, even though ~#0~[it appears~/they appear~] ~
                            in its body."</span>
                                      (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> body-vars bound-and-free-vars))
                                      event-form))
                                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ignored (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ignore-ok)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx ignored-vars-string ignored event-form))
                                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ignored (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ignore-ok <span class="keyword">:warn</span>)) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                                            <span class="string">"Ignored-variables"</span>
                                            ignored-vars-string
                                            ignored
                                            event-form))
                                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                                      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (compute-stobj-flags <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> nil nil wrld)) (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (compute-stobj-flags <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> nil nil wrld))
                                          (wrld wrld)
                                          (wrld (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn
                                              'constrainedp
                                              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                                              (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn
                                                'hereditarily-constrained-fnnames
                                                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn)
                                                (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn
                                                  '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
                                                  <span class="keyword">:common-lisp-compliant</span> (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> fn
                                                    '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                                                    <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                                                    nil
                                                    (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> fn
                                                      '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                                                      <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                                                      nil
                                                      (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> wrld))))))))
                                        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((constraint (<a class="sym-link local-def" href="#def-defchoose-constraint" data-sym="DEFCHOOSE-CONSTRAINT" title="(defun defchoose-constraint
       (fn bound-vars formals body tbody strengthen ctx wrld state)
  (er-let*
   ((basic
     (defchoose-constraint-basic fn bound-vars formals tbody ctx wrld state)))
...">defchoose-constraint</a> fn
                                               <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>
                                               <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                                               <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>
                                               tbody
                                               strengthen
                                               ctx
                                               wrld
                                               state)))
                                          (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> fn
                                            event-form
                                            '<a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a>
                                            fn
                                            nil
                                            `(<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a> nil
                                              nil
                                              (,FN ,FORMALS ,(NULL-BODY-ER FN FORMALS NIL)))
                                            <span class="keyword">:protect</span> ctx
                                            (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn 'defchoose-axiom constraint wrld)
                                            state))))))))))))))))))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Adefun-sk-keywords_2A" data-defines="*DEFUN-SK-KEYWORDS*" data-references="QUOTE,DEFCONST" data-used-by="DEFUN-SK-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*DEFUN-SK-KEYWORDS*">*defun-sk-keywords*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Adefun-sk-keywords_2A" data-sym="*DEFUN-SK-KEYWORDS*" title="(defconst *defun-sk-keywords*
          &#39;(:quant-ok :skolem-name :thm-name :rewrite :strengthen :constrain
            :verbose))">*defun-sk-keywords*</a>
  '(<span class="keyword">:quant-ok</span> <span class="keyword">:skolem-name</span> <span class="keyword">:thm-name</span> <span class="keyword">:rewrite</span> <span class="keyword">:strengthen</span> <span class="keyword">:constrain</span> <span class="keyword">:verbose</span>))</pre>
  </div>

<div class="form-block function" id="def-non-acceptable-defun-sk-p" data-defines="NON-ACCEPTABLE-DEFUN-SK-P" data-references="T,CADDR,TREE-OCCUR-EQ,OR,INTERSECTION-EQ,INTERSECTP-EQ,STATE,COLLECT-NON-LEGAL-VARIABLEPS,NULL,EXISTS,FORALL,CAR,LENGTH,EQUAL,FIND-FIRST-BAD-ARG,EXPLAN,CULPRIT,MV-LET,ARGLISTP,*XARGS-KEYWORDS*,STR,GET-STRING,PLAUSIBLE-DCLSP,QUOTE,MEMBER-EQ,NOT,KEYWORDP,MSG,COND,LIST,ATOM,IF,CADR,TRUE-LISTP,AND,BOUND-VARS,LET,DCLS,EXISTS-P,REWRITE,QUANT-OK,BODY,ARGS,NAME,DEFUN" data-used-by="DEFUN-SK-FN" data-part-name="NON-ACCEPTABLE-DEFUN-SK-P" data-part-args="DCLS,EXISTS-P,REWRITE,QUANT-OK,BODY,ARGS,NAME" data-part-body="T,CADDR,TREE-OCCUR-EQ,OR,QUANT-OK,INTERSECTION-EQ,INTERSECTP-EQ,NAME,STATE,COLLECT-NON-LEGAL-VARIABLEPS,NULL,EXISTS,FORALL,CAR,LENGTH,EQUAL,FIND-FIRST-BAD-ARG,EXPLAN,CULPRIT,MV-LET,ARGLISTP,ARGS,*XARGS-KEYWORDS*,STR,GET-STRING,DCLS,PLAUSIBLE-DCLSP,QUOTE,MEMBER-EQ,NOT,KEYWORDP,MSG,EXISTS-P,REWRITE,COND,LIST,ATOM,IF,CADR,BODY,TRUE-LISTP,AND,BOUND-VARS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NON-ACCEPTABLE-DEFUN-SK-P">non-acceptable-defun-sk-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-non-acceptable-defun-sk-p" data-sym="NON-ACCEPTABLE-DEFUN-SK-P" title="(defun non-acceptable-defun-sk-p
       (name args body quant-ok rewrite exists-p dcls)
  (let ((bound-vars
         (and (true-listp body) (cadr body)
              (if (atom (cadr body))
...">non-acceptable-defun-sk-p</a>
  (name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> quant-ok <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> exists-p dcls)
  (let ((<a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
         (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
         (if (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))
           (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))
           (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> exists-p) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"It is illegal to supply a :rewrite argument for a defun-sk form ~
            that uses the exists quantifier.  See :DOC defun-sk."</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> '(<span class="keyword">:direct</span> <span class="keyword">:default</span>)))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The only legal keyword values for the :rewrite argument of a ~
            defun-sk are :direct and :default.  ~x0 is thus illegal."</span>
          <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-plausible-dclsp" data-sym="PLAUSIBLE-DCLSP">plausible-dclsp</a> dcls) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-get-string" data-sym="GET-STRING">get-string</a> dcls)))) (let ((str <span class="string">"The ~@0 of a DEFUN-SK event must be of the form (dcl ... ~
                  dcl), where each dcl is a DECLARE form.  The DECLARE forms ~
                  may contain TYPE, IGNORE, and XARGS entries, where the ~
                  legal XARGS keys are ~&amp;1.  The following value for the ~@0 ~
                  is thus illegal: ~x2.  See :DOC DEFUN-SK."</span>))
          (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> str <span class="string">"DECLARE forms"</span> <a class="sym-link system" href="axioms.html#def-_2Axargs-keywords_2A" data-sym="*XARGS-KEYWORDS*">*xargs-keywords*</a> dcls)))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The second argument of DEFUN-SK must be a true list of legal ~
            variable names, but ~x0 is not a true-listp."</span>
          <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-arglistp" data-sym="ARGLISTP">arglistp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (culprit explan)
          (<a class="sym-link system" href="basis-a.html#def-find-first-bad-arg" data-sym="FIND-FIRST-BAD-ARG">find-first-bad-arg</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
          (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The formal parameters (second argument) of a DEFUN-SK form must ~
             be a true list of distinct, legal variable names.  ~x0 is not ~
             such a list.  The element ~x1 violates the rules because it ~@2."</span>
            <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
            culprit
            explan)))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
           (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>) <span class="number">3</span>)
           (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>) '(forall exists))
           (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>)
           (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (collect-non-legal-variableps <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>)))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The body (last argument) of a DEFUN-SK form must be a true list of ~
            the form (Q vars term), where Q is ~x0 or ~x1 and vars is a ~
            variable or a true list of variables.  The body ~x2 is therefore ~
            illegal."</span>
          'forall
          'exists
          <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The body (last argument) of a DEFUN-SK form must be a true list of ~
            the form (Q vars term), where vars represents the bound ~
            variables.  The bound variables must not include STATE.  The body ~
            ~x0 is therefore illegal."</span>
          <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))
      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The variables of the body of a DEFUN-SK, following the quantifier ~
            EXISTS or FORALL, must be a non-empty list.  However, in DEFUN-SK ~
            of ~x0, they are empty."</span>
          name))
      ((<a class="sym-link system" href="axioms.html#def-intersectp-eq" data-sym="INTERSECTP-EQ">intersectp-eq</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The formal parameters of a DEFUN-SK form must be disjoint from ~
            the variables bound by its body.  However, the ~#0~[variable ~x0 ~
            belongs~/variables ~&amp;0 belong~] to both the formal parameters, ~
            ~x1, and the bound variables, ~x2."</span>
          (<a class="sym-link system" href="axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
          <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
          <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> quant-ok)
         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="basis-a.html#def-tree-occur-eq" data-sym="TREE-OCCUR-EQ">tree-occur-eq</a> 'forall (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))
           (<a class="sym-link system" href="basis-a.html#def-tree-occur-eq" data-sym="TREE-OCCUR-EQ">tree-occur-eq</a> 'exists (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The symbol ~x0 occurs in the term you have supplied to DEFUN-SK, ~
            namely, ~x1.  By default, this is not allowed.  Perhaps you ~
            believe that DEFUN-SK can appropriately handle quantifiers other ~
            than one outermost quantifier; however, this is not the case.  If ~
            however you really intend this DEFUN-SK form to be executed, ~
            simply give a non-nil :quant-ok argument.  See :DOC defun-sk."</span>
          (if (<a class="sym-link system" href="basis-a.html#def-tree-occur-eq" data-sym="TREE-OCCUR-EQ">tree-occur-eq</a> 'forall (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))
            'forall
            'exists)
          <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-definition-rule-name" data-defines="DEFINITION-RULE-NAME" data-references="ADD-SUFFIX,SYMBOLP,XARGS,DECLARE,NAME,DEFUN" data-used-by="DEFUN-SK-FN" data-part-name="DEFINITION-RULE-NAME" data-part-args="NAME" data-part-declare="NAME,SYMBOLP,XARGS,DECLARE" data-part-body="NAME,ADD-SUFFIX" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINITION-RULE-NAME">definition-rule-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-definition-rule-name" data-sym="DEFINITION-RULE-NAME" title="(defun definition-rule-name (name)
  (declare (xargs :guard (symbolp name)))
  (add-suffix name &quot;-DEFINITION&quot;))">definition-rule-name</a>
  (name)
  (declare (xargs <span class="keyword">:guard</span> (symbolp name)))
  (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> name <span class="string">"-DEFINITION"</span>))</pre>
  </div>

<div class="form-block macro" id="def-verify-guards_3F" data-defines="VERIFY-GUARDS?" data-references="MEMBER,T,VERIFY-GUARDS,VALUE-TRIPLE,QUOTE,STATE,W,DEFAULT-VERIFY-GUARDS-EAGERNESS,INT=,IF,MAKE-EVENT,QUASIQUOTE,COND,BOOLEANP,XARGS,DECLARE,ARGS,&REST,GUARD-P,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="VERIFY-GUARDS?">verify-guards?</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-verify-guards_3F" data-sym="VERIFY-GUARDS?" title="(defmacro verify-guards? (guard-p &amp;rest args)
  (declare (xargs :guard (booleanp guard-p)))
  (cond
   (guard-p
    `(make-event
...">verify-guards?</a>
  (guard-p &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> guard-p)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (guard-p `(<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (if (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> (<a class="sym-link system" href="axioms.html#def-default-verify-guards-eagerness" data-sym="DEFAULT-VERIFY-GUARDS-EAGERNESS">default-verify-guards-eagerness</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) <span class="number">0</span>)
          '(<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> <span class="keyword">:skipped</span>)
          '(<a class="sym-link system" href="axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> ,@ARGS))
        <span class="keyword">:expansion?</span> (<a class="sym-link system" href="axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> ,@ARGS)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (if (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (<a class="sym-link system" href="axioms.html#def-default-verify-guards-eagerness" data-sym="DEFAULT-VERIFY-GUARDS-EAGERNESS">default-verify-guards-eagerness</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) '(<span class="number">2</span> <span class="number">3</span>))
          '(<a class="sym-link system" href="axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> ,@ARGS)
          '(<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> <span class="keyword">:skipped</span>))
        <span class="keyword">:expansion?</span> (<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> <span class="keyword">:skipped</span>)))))</pre>
  </div>

<div class="form-block function" id="def-parse-defun-sk-dcls" data-defines="PARSE-DEFUN-SK-DCLS" data-references="MSG,MV,OR,QUASIQUOTE,MEMBER-EQUAL,GUARDS,LET,EQ,IF,STRIP-DCLS,XARGS,DECLARE,CONS,GUARD-HINTS,GUARD-HINTS-FIELDS,CAR,CONSP,CDR,NON-EXEC-P,NON-EXEC-P-FIELDS,ERROR,?,EQUAL,COND,VERIFY-GUARDS-P,FETCH-DCL-FIELD,REMOVE-DUPLICATES-EQUAL,VERIFY-GUARDS-FIELDS,T,TYPE,QUOTE,FETCH-DCL-FIELDS,AND,GUARD-P,LET*,DCLS,DEFUN" data-used-by="DEFUN-SK-FN" data-part-name="PARSE-DEFUN-SK-DCLS" data-part-args="DCLS" data-part-body="MSG,MV,OR,QUASIQUOTE,MEMBER-EQUAL,GUARDS,LET,EQ,IF,STRIP-DCLS,XARGS,DECLARE,CONS,GUARD-HINTS,GUARD-HINTS-FIELDS,CAR,CONSP,CDR,NON-EXEC-P,NON-EXEC-P-FIELDS,ERROR,?,EQUAL,COND,VERIFY-GUARDS-P,FETCH-DCL-FIELD,REMOVE-DUPLICATES-EQUAL,VERIFY-GUARDS-FIELDS,T,DCLS,TYPE,QUOTE,FETCH-DCL-FIELDS,AND,GUARD-P,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-DEFUN-SK-DCLS">parse-defun-sk-dcls</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-defun-sk-dcls" data-sym="PARSE-DEFUN-SK-DCLS" title="(defun parse-defun-sk-dcls (dcls)
  (let* ((guard-p (and (fetch-dcl-fields &#39;(type :guard) dcls) t))
         (verify-guards-fields
          (remove-duplicates-equal (fetch-dcl-field :verify-guards dcls)))
         (verify-guards-p
...">parse-defun-sk-dcls</a>
  (dcls)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((guard-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-fetch-dcl-fields" data-sym="FETCH-DCL-FIELDS">fetch-dcl-fields</a> '(type <span class="keyword">:guard</span>) dcls) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (verify-guards-fields (<a class="sym-link system" href="axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> <span class="keyword">:verify-guards</span> dcls)))
      (verify-guards-p (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal verify-guards-fields '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
          ((equal verify-guards-fields '(nil)) nil)
          ((equal verify-guards-fields nil) '?)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> 'error)))
      (non-exec-p-fields (<a class="sym-link system" href="axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> <span class="keyword">:non-executable</span> dcls)))
      (non-exec-p (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((cdr non-exec-p-fields) 'error)
          ((consp non-exec-p-fields) (car non-exec-p-fields))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
      (guard-hints-fields (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> <span class="keyword">:guard-hints</span> dcls))
      (guard-hints (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((cdr guard-hints-fields) 'error)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (car guard-hints-fields))))
      (dcls (cons '(declare (xargs <span class="keyword">:verify-guards</span> nil))
          (<a class="sym-link system" href="axioms.html#def-strip-dcls" data-sym="STRIP-DCLS">strip-dcls</a> '(<span class="keyword">:guard-hints</span>)
            (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> verify-guards-p <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              (<a class="sym-link system" href="axioms.html#def-strip-dcls" data-sym="STRIP-DCLS">strip-dcls</a> '(<span class="keyword">:verify-guards</span>) dcls)
              dcls))))
      (dcls (let ((guards (<a class="sym-link system" href="axioms.html#def-fetch-dcl-fields" data-sym="FETCH-DCL-FIELDS">fetch-dcl-fields</a> '(<span class="keyword">:guard</span>) dcls)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> guards '((<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) ('<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) nil)) (cons `(declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                (<a class="sym-link system" href="axioms.html#def-strip-dcls" data-sym="STRIP-DCLS">strip-dcls</a> '(<span class="keyword">:guard</span>) dcls)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> dcls)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> verify-guards-p 'error)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> non-exec-p 'error)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> guard-hints 'error)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"There are at least two~#0~[~/ distinct~] values ~
                     associated with XARGS declaration keyword ~x1.  See :DOC ~
                     defun-sk."</span>
            (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> guard-hints 'error)
              <span class="number">0</span>
              <span class="number">1</span>)
            (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> verify-guards-p 'error)
              <span class="keyword">:verify-guards</span> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> non-exec-p 'error)
                <span class="keyword">:non-executable</span> <span class="keyword">:guard-hints</span>)))
          nil
          nil
          nil
          nil
          nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil guard-p verify-guards-p non-exec-p guard-hints dcls)))))</pre>
  </div>

<div class="form-block function" id="def-map-with-output" data-defines="MAP-WITH-OUTPUT" data-references="PAIRLIS$,WITH-OUTPUT,QUOTE,PAIRLIS-X1,TRUE-LISTP,XARGS,DECLARE,FORMS,ARG,KWD,DEFUN" data-part-name="MAP-WITH-OUTPUT" data-part-args="FORMS,ARG,KWD" data-part-declare="FORMS,TRUE-LISTP,XARGS,DECLARE" data-part-body="FORMS,PAIRLIS$,ARG,KWD,WITH-OUTPUT,QUOTE,PAIRLIS-X1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAP-WITH-OUTPUT">map-with-output</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-map-with-output" data-sym="MAP-WITH-OUTPUT" title="(defun map-with-output (kwd arg forms)
  (declare (xargs :guard (true-listp forms)))
  (pairlis-x1 &#39;with-output
              (pairlis-x1 kwd (pairlis-x1 arg (pairlis$ forms nil)))))">map-with-output</a>
  (kwd arg forms)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> forms)))
  (<a class="sym-link system" href="axioms.html#def-pairlis-x1" data-sym="PAIRLIS-X1">pairlis-x1</a> '<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a>
    (<a class="sym-link system" href="axioms.html#def-pairlis-x1" data-sym="PAIRLIS-X1">pairlis-x1</a> kwd (<a class="sym-link system" href="axioms.html#def-pairlis-x1" data-sym="PAIRLIS-X1">pairlis-x1</a> arg (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> forms nil)))))</pre>
  </div>

<div class="form-block function" id="def-defun-sk-fn" data-defines="DEFUN-SK-FN" data-references="VALUE,SUMMARY,ERROR,WITH-OUTPUT,VALUE-TRIPLE,EXTEND-PE-TABLE,MINIMAL-THEORY,THEORY,DEFCHOOSE,SET-IGNORE-OK,IMPLIES,IN-THEORY,LOCAL,=>,ENCAPSULATE,SET-INHIBIT-WARNINGS,SET-MATCH-FREE-DEFAULT,LOGIC,ENCAP-FORMS,EQUAL,DEFTHM,DEFUN-CONSTRAINT,DEFUN-FORM,LENGTH,=,DEFUN-BODY,NON-EXEC,SKOLEM-CALL,DFS,FETCH-DCL-FIELD,STOBJS,ADD-SUFFIX,NOT,DEFCHOOSE-BODY,CADDR,BODY-GUTS,LIST,ATOM,CADR,OR,BOUND-VARS,PARSE-DEFUN-SK-DCLS,DCLS,GUARD-HINTS,NON-EXEC-P,VERIFY-GUARDS-P,GUARD-P,SOFT,IF,NON-ACCEPTABLE-DEFUN-SK-P,MSG,EXISTS,QUOTE,TRUE-LISTP,AND,EXISTS-P,LAST,CAR,BODY,BUTLAST,DCLS0,STRENGTHEN,REWRITE,SYMBOLP,DEFINITION-RULE-NAME,EQ,DEF-NAME,VERBOSE,CONSTRAINED,CONSTRAINED-PAIR,THM-NAME,SKOLEM-NAME,ASSOC-EQ,CDR,QUANT-OK,LET*,T,HARD,ER,COND,*DEFUN-SK-KEYWORDS*,PARTITION-REST-AND-KEYWORD-ARGS,KEYWORD-ALIST,DCLS-AND-BODY,ERP,MV-LET,DEFUN-SK,QUASIQUOTE,CTX,LET,XARGS,DECLARE,REST,ARGS,NAME,FORM,DEFUN" data-used-by="DEFUN-SK,MAKE-APPLY$-WARRANT-DEFUN-SK" data-part-name="DEFUN-SK-FN" data-part-args="REST,ARGS,NAME,FORM" data-part-declare="XARGS,DECLARE" data-part-body="VALUE,SUMMARY,ERROR,WITH-OUTPUT,VALUE-TRIPLE,EXTEND-PE-TABLE,MINIMAL-THEORY,THEORY,DEFCHOOSE,SET-IGNORE-OK,IMPLIES,IN-THEORY,LOCAL,=>,ENCAPSULATE,SET-INHIBIT-WARNINGS,SET-MATCH-FREE-DEFAULT,LOGIC,ENCAP-FORMS,EQUAL,DEFTHM,DEFUN-CONSTRAINT,DEFUN-FORM,LENGTH,=,DEFUN-BODY,NON-EXEC,SKOLEM-CALL,DFS,FETCH-DCL-FIELD,STOBJS,ADD-SUFFIX,NOT,DEFCHOOSE-BODY,CADDR,BODY-GUTS,LIST,ATOM,CADR,OR,BOUND-VARS,PARSE-DEFUN-SK-DCLS,DCLS,GUARD-HINTS,NON-EXEC-P,VERIFY-GUARDS-P,GUARD-P,SOFT,IF,ARGS,NON-ACCEPTABLE-DEFUN-SK-P,MSG,EXISTS,QUOTE,TRUE-LISTP,AND,EXISTS-P,LAST,CAR,BODY,BUTLAST,DCLS0,STRENGTHEN,REWRITE,SYMBOLP,NAME,DEFINITION-RULE-NAME,EQ,DEF-NAME,VERBOSE,CONSTRAINED,CONSTRAINED-PAIR,THM-NAME,SKOLEM-NAME,ASSOC-EQ,CDR,QUANT-OK,LET*,T,FORM,HARD,ER,COND,*DEFUN-SK-KEYWORDS*,REST,PARTITION-REST-AND-KEYWORD-ARGS,KEYWORD-ALIST,DCLS-AND-BODY,ERP,MV-LET,DEFUN-SK,QUASIQUOTE,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFUN-SK-FN">defun-sk-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defun-sk-fn" data-sym="DEFUN-SK-FN" title="(defun defun-sk-fn (form name args rest)
  (declare (xargs :mode :program))
  (let ((ctx `(defun-sk . ,name)))
    (mv-let (erp dcls-and-body keyword-alist)
            (partition-rest-and-keyword-args rest *defun-sk-keywords*)
...">defun-sk-fn</a>
  (form name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (let ((ctx `(<a class="sym-link local-def" href="#def-defun-sk" data-sym="DEFUN-SK" title="(defmacro defun-sk (&amp;whole form name args &amp;rest rest)
  (defun-sk-fn form name args rest))">defun-sk</a> . ,NAME)))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp dcls-and-body keyword-alist)
      (<a class="sym-link system" href="basis-a.html#def-partition-rest-and-keyword-args" data-sym="PARTITION-REST-AND-KEYWORD-ARGS">partition-rest-and-keyword-args</a> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a> <a class="sym-link local-def" href="#def-_2Adefun-sk-keywords_2A" data-sym="*DEFUN-SK-KEYWORDS*" title="(defconst *defun-sk-keywords*
          &#39;(:quant-ok :skolem-name :thm-name :rewrite :strengthen :constrain
            :verbose))">*defun-sk-keywords*</a>)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            ctx
            <span class="string">"The keyword arguments to the DEFUN-SK event must appear after ~
             the body.  The allowed keyword arguments are ~&amp;0, and these may ~
             not be duplicated.  Thus, ~x1 is ill-formed."</span>
            <a class="sym-link local-def" href="#def-_2Adefun-sk-keywords_2A" data-sym="*DEFUN-SK-KEYWORDS*" title="(defconst *defun-sk-keywords*
          &#39;(:quant-ok :skolem-name :thm-name :rewrite :strengthen :constrain
            :verbose))">*defun-sk-keywords*</a>
            form))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((quant-ok (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:quant-ok</span> keyword-alist))) (skolem-name (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:skolem-name</span> keyword-alist)))
              (thm-name (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:thm-name</span> keyword-alist)))
              (constrained-pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:constrain</span> keyword-alist))
              (constrained (cdr constrained-pair))
              (verbose (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:verbose</span> keyword-alist)))
              (def-name (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> constrained <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-definition-rule-name" data-sym="DEFINITION-RULE-NAME" title="(defun definition-rule-name (name)
  (declare (xargs :guard (symbolp name)))
  (add-suffix name &quot;-DEFINITION&quot;))">definition-rule-name</a> name))
                  ((symbolp constrained) constrained)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                      ctx
                      <span class="string">"The :constrain argument of DEFUN-SK ~
                                       must be a symbol, but ~x0 is not."</span>
                      constrained))))
              (<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:rewrite</span> keyword-alist)))
              (strengthen (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:strengthen</span> keyword-alist)))
              (dcls0 (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> dcls-and-body <span class="number">1</span>))
              (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> dcls-and-body)))
              (exists-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>) 'exists)))
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link local-def" href="#def-non-acceptable-defun-sk-p" data-sym="NON-ACCEPTABLE-DEFUN-SK-P" title="(defun non-acceptable-defun-sk-p
       (name args body quant-ok rewrite exists-p dcls)
  (let ((bound-vars
         (and (true-listp body) (cadr body)
              (if (atom (cadr body))
...">non-acceptable-defun-sk-p</a> name
                  <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                  <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>
                  quant-ok
                  <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>
                  exists-p
                  dcls0)))
            (if <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
              `(<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ',CTX <span class="string">"~@0"</span> ',MSG)
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp guard-p verify-guards-p non-exec-p guard-hints dcls)
                (<a class="sym-link local-def" href="#def-parse-defun-sk-dcls" data-sym="PARSE-DEFUN-SK-DCLS" title="(defun parse-defun-sk-dcls (dcls)
  (let* ((guard-p (and (fetch-dcl-fields &#39;(type :guard) dcls) t))
         (verify-guards-fields
          (remove-duplicates-equal (fetch-dcl-field :verify-guards dcls)))
         (verify-guards-p
...">parse-defun-sk-dcls</a> dcls0)
                (if erp
                  `(<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ',CTX <span class="string">"~@0"</span> ',ERP)
                  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
                         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)) (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)))
                         (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)))
                           (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))))) (body-guts (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>) (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)))
                      (defchoose-body (if exists-p
                          body-guts
                          `(<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ,BODY-GUTS)))
                      (skolem-name (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> skolem-name (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> name <span class="string">"-WITNESS"</span>)))
                      (stobjs (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> <span class="keyword">:stobjs</span> dcls))
                      (dfs (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> <span class="keyword">:dfs</span> dcls))
                      (skolem-call `(,SKOLEM-NAME ,@ARGS))
                      (skolem-call (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> stobjs dfs)
                          `(<a class="sym-link system" href="axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> ,SKOLEM-CALL)
                          skolem-call))
                      (defun-body (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>) <span class="number">1</span>)
                          `(let ((,(CAR BOUND-VARS) ,SKOLEM-CALL))
                            ,BODY-GUTS)
                          `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (,@BOUND-VARS) ,SKOLEM-CALL ,BODY-GUTS)))
                      (thm-name (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> thm-name
                          (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> name
                            (if exists-p
                              <span class="string">"-SUFF"</span>
                              <span class="string">"-NECC"</span>))))
                      (defun-form `(,(IF NON-EXEC-P
     &#39;DEFUN-NX
     &#39;DEFUN) ,NAME
                          ,ARGS
                          ,@DCLS
                          ,DEFUN-BODY))
                      (defun-constraint (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> constrained
                          `(<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,DEF-NAME
                            (equal (,NAME ,@ARGS) ,DEFUN-BODY)
                            <span class="keyword">:rule-classes</span> <span class="keyword">:definition</span>)))
                      (encap-forms `((<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>) (<a class="sym-link system" href="axioms.html#def-set-match-free-default" data-sym="SET-MATCH-FREE-DEFAULT">set-match-free-default</a> <span class="keyword">:all</span>)
                          (<a class="sym-link system" href="axioms.html#def-set-inhibit-warnings" data-sym="SET-INHIBIT-WARNINGS">set-inhibit-warnings</a> <span class="string">"Theory"</span>
                            <span class="string">"Use"</span>
                            <span class="string">"Free"</span>
                            <span class="string">"Non-rec"</span>
                            <span class="string">"Infected"</span>)
                          (<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> (((,SKOLEM-NAME ,@(MAKE-LIST (LENGTH ARGS) :INITIAL-ELEMENT &#39;*)) =&gt;
                               ,(IF (= (LENGTH BOUND-VARS) 1)
     &#39;*
     (CONS &#39;MV (MAKE-LIST (LENGTH BOUND-VARS) :INITIAL-ELEMENT &#39;*)))) ,@(AND CONSTRAINED
       `((,NAME ,ARGS T ,@(AND STOBJS `(:STOBJS ,@STOBJS))
          ,@(AND DFS `(:DFS ,@DFS))
          ,@(AND GUARD-P
                 (MV-LET (IGN GUARD)
                         (DCLS-GUARD-RAW-FROM-DEF (CDR DEFUN-FORM) NIL)
                         (DECLARE (IGNORE IGN)) `(:GUARD ,GUARD)))))))
                            (<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> '(<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a>)))
                            (<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
                                (<a class="sym-link system" href="axioms.html#def-set-ignore-ok" data-sym="SET-IGNORE-OK">set-ignore-ok</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                                (<a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a> ,SKOLEM-NAME
                                  ,BOUND-VARS
                                  ,ARGS
                                  ,DEFCHOOSE-BODY
                                  ,@(AND STRENGTHEN &#39;(:STRENGTHEN T)))))
                            ,@(AND STRENGTHEN
       `((DEFTHM ,(ADD-SUFFIX SKOLEM-NAME &quot;-STRENGTHEN&quot;)
                 ,(DEFCHOOSE-CONSTRAINT-EXTRA SKOLEM-NAME BOUND-VARS ARGS
                                              DEFCHOOSE-BODY)
                 :HINTS
                 ((&quot;Goal&quot; :USE ,SKOLEM-NAME :IN-THEORY
                   (THEORY &#39;MINIMAL-THEORY)))
                 :RULE-CLASSES NIL)))
                            ,@(COND
   (CONSTRAINED
    `((LOCAL ,DEFUN-FORM) ,DEFUN-CONSTRAINT
      (LOCAL (IN-THEORY (DISABLE (,NAME))))))
   (T `(,DEFUN-FORM (IN-THEORY (DISABLE (,NAME))))))
                            (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,THM-NAME
                              ,(COND (EXISTS-P `(IMPLIES ,BODY-GUTS (,NAME ,@ARGS)))
       ((EQ REWRITE :DIRECT) `(IMPLIES (,NAME ,@ARGS) ,BODY-GUTS))
       ((MEMBER-EQ REWRITE &#39;(NIL :DEFAULT))
        `(IMPLIES (NOT ,BODY-GUTS) (NOT (,NAME ,@ARGS))))
       (T REWRITE))
                              <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> (,SKOLEM-NAME ,NAME)
                                 <span class="keyword">:in-theory</span> (<a class="sym-link local-def" href="#def-theory" data-sym="THEORY" title="(defmacro theory (name) (list &#39;theory-fn name &#39;world))">theory</a> 'minimal-theory)))))
                          (<a class="sym-link system" href="history-management.html#def-extend-pe-table" data-sym="EXTEND-PE-TABLE">extend-pe-table</a> ,NAME ,FORM)
                          ,@(AND (NOT CONSTRAINED)
       (CASE VERIFY-GUARDS-P
         ((T)
          `((VERIFY-GUARDS ,NAME
                           ,@(AND GUARD-HINTS (LIST :HINTS GUARD-HINTS)))))
         ((NIL) NIL)
         (OTHERWISE
          `((VERIFY-GUARDS? ,GUARD-P ,NAME
                            ,@(AND GUARD-HINTS (LIST :HINTS GUARD-HINTS)))))))
                          (<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> '(<span class="keyword">:return-value</span> ,NAME) <span class="keyword">:on-skip-proofs</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (verbose `(<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil ,@ENCAP-FORMS))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> (<span class="keyword">:other-than</span> error summary)
                          <span class="keyword">:ctx</span> ',CTX
                          <span class="keyword">:summary-off</span> <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a>
                          <span class="keyword">:gag-mode</span> nil
                          (<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
                            ,@(MAP-WITH-OUTPUT :OFF &#39;SUMMARY ENCAP-FORMS)))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-tameness-conditions" data-defines="TAMENESS-CONDITIONS" data-references="T,TAMEP,QUOTE,LIST,CDR,TAMEP-FUNCTIONP,QUASIQUOTE,CONS,CAR,EQ,ENDP,COND,XARGS,DECLARE,VAR,ILKS,DEFUN" data-used-by="DEFWARRANT-EVENTS,MAKE-APPLY$-WARRANT-DEFUN-SK" data-part-name="TAMENESS-CONDITIONS" data-part-args="VAR,ILKS" data-part-declare="XARGS,DECLARE" data-part-body="T,TAMEP,VAR,QUOTE,LIST,CDR,TAMENESS-CONDITIONS,TAMEP-FUNCTIONP,QUASIQUOTE,CONS,CAR,EQ,ILKS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TAMENESS-CONDITIONS">tameness-conditions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tameness-conditions" data-sym="TAMENESS-CONDITIONS" title="(defun tameness-conditions (ilks var)
  (declare (xargs :mode :program))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons `(tamep-functionp (car ,var))
...">tameness-conditions</a>
  (ilks var)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> ilks) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ilks) <span class="keyword">:fn</span>) (cons `(tamep-functionp (car ,VAR))
        (<a class="sym-link local-def" href="#def-tameness-conditions" data-sym="TAMENESS-CONDITIONS" title="(defun tameness-conditions (ilks var)
  (declare (xargs :mode :program))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons `(tamep-functionp (car ,var))
...">tameness-conditions</a> (cdr ilks) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'cdr var))))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ilks) <span class="keyword">:expr</span>) (cons `(tamep (car ,VAR))
        (<a class="sym-link local-def" href="#def-tameness-conditions" data-sym="TAMENESS-CONDITIONS" title="(defun tameness-conditions (ilks var)
  (declare (xargs :mode :program))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons `(tamep-functionp (car ,var))
...">tameness-conditions</a> (cdr ilks) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'cdr var))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-tameness-conditions" data-sym="TAMENESS-CONDITIONS" title="(defun tameness-conditions (ilks var)
  (declare (xargs :mode :program))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons `(tamep-functionp (car ,var))
...">tameness-conditions</a> (cdr ilks) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'cdr var)))))</pre>
  </div>

<div class="form-block function" id="def-successive-cadrs" data-defines="SUCCESSIVE-CADRS" data-references="QUOTE,LIST,CDR,CAR,QUASIQUOTE,CONS,T,ENDP,COND,XARGS,DECLARE,VAR,FORMALS,DEFUN" data-part-name="SUCCESSIVE-CADRS" data-part-args="VAR,FORMALS" data-part-declare="XARGS,DECLARE" data-part-body="VAR,QUOTE,LIST,CDR,SUCCESSIVE-CADRS,CAR,QUASIQUOTE,CONS,T,FORMALS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUCCESSIVE-CADRS">successive-cadrs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-successive-cadrs" data-sym="SUCCESSIVE-CADRS" title="(defun successive-cadrs (formals var)
  (declare (xargs :mode :program))
  (cond ((endp formals) nil)
        (t
         (cons `(car ,var) (successive-cadrs (cdr formals) (list &#39;cdr var))))))">successive-cadrs</a>
  (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> var)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons `(car ,VAR)
        (<a class="sym-link local-def" href="#def-successive-cadrs" data-sym="SUCCESSIVE-CADRS" title="(defun successive-cadrs (formals var)
  (declare (xargs :mode :program))
  (cond ((endp formals) nil)
        (t
         (cons `(car ,var) (successive-cadrs (cdr formals) (list &#39;cdr var))))))">successive-cadrs</a> (cdr <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'cdr var))))))</pre>
  </div>

<div class="form-block function" id="def-make-apply_24-warrant-defun-sk" data-defines="MAKE-APPLY$-WARRANT-DEFUN-SK" data-references="HARD,ER,ADD-SUFFIX,ENCAPSULATE,CONSP,CONSTRAINED-FN,NTH,CRUX,LAST,WITH-OUTPUT,WITH-OUTPUT-P,CDDDR,DEFUN-SK-FN,DEFUN-SK-EVENT,IMPLIES,CAR,CDR,NULL,IF,HYP,TAMENESS-CONDITIONS,HYP-LIST,APPLY$-USERFN,QUOTE,BADGE-USERFN,EQUAL,AND,ARGS,FORALL,DEFUN-SK,QUASIQUOTE,T,APPLY$-BADGE,ACCESS,EQ,COND,FORM,WARRANT-NAME,NAME,LET*,TRANS1-FLG,BDG,FORMALS,FN,DEFUN" data-part-name="MAKE-APPLY$-WARRANT-DEFUN-SK" data-part-args="TRANS1-FLG,BDG,FORMALS,FN" data-part-body="MAKE-APPLY$-WARRANT-DEFUN-SK,HARD,ER,ADD-SUFFIX,ENCAPSULATE,CONSP,CONSTRAINED-FN,NTH,CRUX,LAST,WITH-OUTPUT,WITH-OUTPUT-P,CDDDR,DEFUN-SK-FN,DEFUN-SK-EVENT,TRANS1-FLG,IMPLIES,CAR,CDR,NULL,IF,HYP,TAMENESS-CONDITIONS,HYP-LIST,APPLY$-USERFN,QUOTE,BADGE-USERFN,EQUAL,AND,ARGS,FORALL,DEFUN-SK,QUASIQUOTE,T,BDG,APPLY$-BADGE,ACCESS,EQ,COND,FORM,FN,WARRANT-NAME,NAME,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-APPLY$-WARRANT-DEFUN-SK">make-apply$-warrant-defun-sk</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-apply_24-warrant-defun-sk" data-sym="MAKE-APPLY$-WARRANT-DEFUN-SK" title="(defun make-apply$-warrant-defun-sk (fn formals bdg trans1-flg)
  (let* ((name (warrant-name fn))
         (form
          (cond
           ((eq (access apply$-badge bdg :ilks) t)
...">make-apply$-warrant-defun-sk</a>
  (fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> bdg trans1-flg)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name (warrant-name fn)) (form (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge bdg <span class="keyword">:ilks</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) `(<a class="sym-link local-def" href="#def-defun-sk" data-sym="DEFUN-SK" title="(defmacro defun-sk (&amp;whole form name args &amp;rest rest)
  (defun-sk-fn form name args rest))">defun-sk</a> ,NAME
              nil
              (forall (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (badge-userfn ',FN) ',BDG)
                  (equal (apply$-userfn ',FN <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                    ,(IF (EQL (ACCESS APPLY$-BADGE BDG :OUT-ARITY) 1)
     `(,FN ,@(SUCCESSIVE-CADRS FORMALS &#39;ARGS))
     `(MV-LIST &#39;,(ACCESS APPLY$-BADGE BDG :OUT-ARITY)
               (,FN ,@(SUCCESSIVE-CADRS FORMALS &#39;ARGS)))))))
              <span class="keyword">:constrain</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((hyp-list (<a class="sym-link local-def" href="#def-tameness-conditions" data-sym="TAMENESS-CONDITIONS" title="(defun tameness-conditions (ilks var)
  (declare (xargs :mode :program))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons `(tamep-functionp (car ,var))
...">tameness-conditions</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge bdg <span class="keyword">:ilks</span>) '<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (hyp (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr hyp-list))
                    (car hyp-list)
                    `(<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ,@HYP-LIST))))
              `(<a class="sym-link local-def" href="#def-defun-sk" data-sym="DEFUN-SK" title="(defmacro defun-sk (&amp;whole form name args &amp;rest rest)
  (defun-sk-fn form name args rest))">defun-sk</a> ,NAME
                nil
                (forall (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                  (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> ,HYP
                    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (badge-userfn ',FN) ',BDG)
                      (equal (apply$-userfn ',FN <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                        ,(IF (EQL (ACCESS APPLY$-BADGE BDG :OUT-ARITY) 1)
     `(,FN ,@(SUCCESSIVE-CADRS FORMALS &#39;ARGS))
     `(MV-LIST &#39;,(ACCESS APPLY$-BADGE BDG :OUT-ARITY)
               (,FN ,@(SUCCESSIVE-CADRS FORMALS &#39;ARGS))))))))
                <span class="keyword">:constrain</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> trans1-flg) form)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((defun-sk-event (<a class="sym-link local-def" href="#def-defun-sk-fn" data-sym="DEFUN-SK-FN" title="(defun defun-sk-fn (form name args rest)
  (declare (xargs :mode :program))
  (let ((ctx `(defun-sk . ,name)))
    (mv-let (erp dcls-and-body keyword-alist)
            (partition-rest-and-keyword-args rest *defun-sk-keywords*)
...">defun-sk-fn</a> form name nil (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> form))) (with-output-p (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car defun-sk-event) '<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a>))
            (defun-sk-event (if with-output-p
                (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> defun-sk-event))
                defun-sk-event))
            (crux (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> defun-sk-event))
            (crux (if with-output-p
                (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> crux))
                crux))
            (constrained-fn (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp crux)
                (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car crux) '<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a>)
                (consp (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> crux))
                (consp (car (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> crux)))
                (consp (car (car (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> crux))))
                (car (car (car (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> crux)))))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> constrained-fn (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> name <span class="string">"-WITNESS"</span>)) crux)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                '<a class="sym-link local-def" href="#def-make-apply_24-warrant-defun-sk" data-sym="MAKE-APPLY$-WARRANT-DEFUN-SK" title="(defun make-apply$-warrant-defun-sk (fn formals bdg trans1-flg)
  (let* ((name (warrant-name fn))
         (form
          (cond
           ((eq (access apply$-badge bdg :ilks) t)
...">make-apply$-warrant-defun-sk</a>
                <span class="string">"Make-apply$-warrant-defun-sk, when called on the function ~
                   symbol ~x0, expected to find an ENCAPSULATE constraining ~
                   ~x1 as the 5th element of the form created by ~
                   DEFUN-SK-EVENT.  But that sanity check failed.  This ~
                   indicates that make-apply$-warrant-defun-sk and ~
                   defun-sk-event are no longer in sync.  Please advise the ~
                   ACL2 implementors!"</span>
                name
                (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> name <span class="string">"-WITNESS"</span>)))))))))</pre>
  </div>

<div class="form-block macro" id="def-defun-sk" data-defines="DEFUN-SK" data-references="DEFUN-SK-FN,REST,&REST,ARGS,NAME,FORM,&WHOLE,DEFMACRO" data-used-by="MAKE-APPLY$-WARRANT-DEFUN-SK,DEFUN-SK-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFUN-SK">defun-sk</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defun-sk" data-sym="DEFUN-SK" title="(defmacro defun-sk (&amp;whole form name args &amp;rest rest)
  (defun-sk-fn form name args rest))">defun-sk</a>
  (&amp;whole form name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> &amp;rest <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)
  (<a class="sym-link local-def" href="#def-defun-sk-fn" data-sym="DEFUN-SK-FN" title="(defun defun-sk-fn (form name args rest)
  (declare (xargs :mode :program))
  (let ((ctx `(defun-sk . ,name)))
    (mv-let (erp dcls-and-body keyword-alist)
            (partition-rest-and-keyword-args rest *defun-sk-keywords*)
...">defun-sk-fn</a> form name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>))</pre>
  </div>

<div class="form-block function" id="def-doublet-style-symbol-to-symbol-alistp" data-defines="DOUBLET-STYLE-SYMBOL-TO-SYMBOL-ALISTP" data-references="CDR,CDDAR,NULL,CADAR,CDAR,CAAR,SYMBOLP,CAR,CONSP,AND,T,EQUAL,ATOM,COND,X,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFSTOBJ" data-part-name="DOUBLET-STYLE-SYMBOL-TO-SYMBOL-ALISTP" data-part-args="X" data-part-body="CDR,DOUBLET-STYLE-SYMBOL-TO-SYMBOL-ALISTP,CDDAR,NULL,CADAR,CDAR,CAAR,SYMBOLP,CAR,CONSP,AND,T,EQUAL,X,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DOUBLET-STYLE-SYMBOL-TO-SYMBOL-ALISTP">doublet-style-symbol-to-symbol-alistp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-doublet-style-symbol-to-symbol-alistp" data-sym="DOUBLET-STYLE-SYMBOL-TO-SYMBOL-ALISTP" title="(defun doublet-style-symbol-to-symbol-alistp (x)
  (cond ((atom x) (equal x nil))
        (t
         (and (consp (car x)) (symbolp (caar x)) (consp (cdar x))
              (symbolp (cadar x)) (null (cddar x))">doublet-style-symbol-to-symbol-alistp</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (equal x nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car x))
        (symbolp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> x))
        (consp (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> x))
        (symbolp (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> x))
        (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> x))
        (<a class="sym-link local-def" href="#def-doublet-style-symbol-to-symbol-alistp" data-sym="DOUBLET-STYLE-SYMBOL-TO-SYMBOL-ALISTP" title="(defun doublet-style-symbol-to-symbol-alistp (x)
  (cond ((atom x) (equal x nil))
        (t
         (and (consp (car x)) (symbolp (caar x)) (consp (cdar x))
              (symbolp (cadar x)) (null (cddar x))">doublet-style-symbol-to-symbol-alistp</a> (cdr x))))))</pre>
  </div>

<div class="form-block function" id="def-chk-legal-defstobj-name" data-defines="CHK-LEGAL-DEFSTOBJ-NAME" data-references="T,VALUE,LEGAL-VARIABLEP,WITH-GLOBAL-STOBJ,SYMBOL-NAME,*WITH-GLOBAL-STOBJ-PREFIX*,STRING-PREFIXP,DEFSTOBJ,CONS,SOFT,ER,QUOTE,EQ,COND,STATE,NAME,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFABSSTOBJ,CHK-ACCEPTABLE-DEFSTOBJ" data-part-name="CHK-LEGAL-DEFSTOBJ-NAME" data-part-args="STATE,NAME" data-part-body="T,VALUE,LEGAL-VARIABLEP,WITH-GLOBAL-STOBJ,SYMBOL-NAME,*WITH-GLOBAL-STOBJ-PREFIX*,STRING-PREFIXP,DEFSTOBJ,CONS,SOFT,ER,STATE,QUOTE,NAME,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-LEGAL-DEFSTOBJ-NAME">chk-legal-defstobj-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-legal-defstobj-name" data-sym="CHK-LEGAL-DEFSTOBJ-NAME" title="(defun chk-legal-defstobj-name (name state)
  (cond
   ((eq name &#39;state)
    (er soft (cons &#39;defstobj name)
        &quot;STATE is an illegal name for a user-declared ~
...">chk-legal-defstobj-name</a>
  (name state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'state) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        (cons '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> name)
        <span class="string">"STATE is an illegal name for a user-declared ~
              single-threaded object."</span>))
    ((<a class="sym-link system" href="basis-a.html#def-string-prefixp" data-sym="STRING-PREFIXP">string-prefixp</a> *with-global-stobj-prefix*
       (symbol-name name)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        (cons '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> name)
        <span class="string">"The name ~x0 is not a legal stobj name because its name starts ~
              with ~x1.  Such names are reserved for use in the expansions of ~
              ~x2 calls."</span>
        name
        *with-global-stobj-prefix*
        'with-global-stobj))
    ((<a class="sym-link system" href="basis-a.html#def-legal-variablep" data-sym="LEGAL-VARIABLEP">legal-variablep</a> name) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        (cons '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> name)
        <span class="string">"The symbol ~x0 may not be declared as a single-threaded object ~
              name because it is not a legal variable name."</span>
        name))))</pre>
  </div>

<div class="form-block function" id="def-chk-unrestricted-guards-for-type-spec-term" data-defines="CHK-UNRESTRICTED-GUARDS-FOR-TYPE-SPEC-TERM" data-references="UNTRANSLATE,SOFT,ER,T,CDR,*T*,GUARD,EQUAL,CAR,ARITY,EQ,NOT,OR,VALUE,NULL,COND,STATE,CTX,WRLD,NAMES,DEFUN" data-part-name="CHK-UNRESTRICTED-GUARDS-FOR-TYPE-SPEC-TERM" data-part-args="STATE,CTX,WRLD,NAMES" data-part-body="UNTRANSLATE,SOFT,ER,T,STATE,CTX,CDR,CHK-UNRESTRICTED-GUARDS-FOR-TYPE-SPEC-TERM,*T*,GUARD,EQUAL,WRLD,CAR,ARITY,EQ,NOT,OR,VALUE,NAMES,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-UNRESTRICTED-GUARDS-FOR-TYPE-SPEC-TERM">chk-unrestricted-guards-for-type-spec-term</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-unrestricted-guards-for-type-spec-term" data-sym="CHK-UNRESTRICTED-GUARDS-FOR-TYPE-SPEC-TERM" title="(defun chk-unrestricted-guards-for-type-spec-term (names wrld ctx state)
  (cond ((null names) (value nil))
        ((or (not (eq (arity (car names) wrld) 1))
             (equal (guard (car names) nil wrld) *t*))
         (chk-unrestricted-guards-for-type-spec-term (cdr names) wrld ctx
...">chk-unrestricted-guards-for-type-spec-term</a>
  (names wrld ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> names) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> (car names) wrld) <span class="number">1</span>))
       (equal (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> (car names) nil wrld) <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>)) (<a class="sym-link local-def" href="#def-chk-unrestricted-guards-for-type-spec-term" data-sym="CHK-UNRESTRICTED-GUARDS-FOR-TYPE-SPEC-TERM" title="(defun chk-unrestricted-guards-for-type-spec-term (names wrld ctx state)
  (cond ((null names) (value nil))
        ((or (not (eq (arity (car names) wrld) 1))
             (equal (guard (car names) nil wrld) *t*))
         (chk-unrestricted-guards-for-type-spec-term (cdr names) wrld ctx
...">chk-unrestricted-guards-for-type-spec-term</a> (cdr names)
        wrld
        ctx
        state))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The guard for ~x0 is ~p1.  But in order to use ~x0 in the ~
           type-specification of a single-threaded object it must ~
           have a guard of T."</span>
        (car names)
        (untranslate (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> (car names) nil wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-non-common-lisp-compliants-in-satisfies" data-defines="NON-COMMON-LISP-COMPLIANTS-IN-SATISFIES" data-references="UNION-EQ,FNS2,FLG2,FNS1,FLG1,MV-LET,ENDP,LST,LIST,SYMBOL-CLASS,T,SATISFIES,IF,CONSP,CDR,NON-COMMON-LISP-COMPLIANTS-IN-SATISFIES-LST,AND,CADR,COMPLEX,NOT,QUOTE,CAR,EQ,OR,MV,ATOM,COND,WRLD,TYPE,DEFUN,MUTUAL-RECURSION" data-used-by="CHK-STOBJ-FIELD-TYPE-TERM" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="NON-COMMON-LISP-COMPLIANTS-IN-SATISFIES">non-common-lisp-compliants-in-satisfies</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-non-common-lisp-compliants-in-satisfies" data-sym="NON-COMMON-LISP-COMPLIANTS-IN-SATISFIES" title="(mutual-recursion
 (defun non-common-lisp-compliants-in-satisfies (type wrld)
   (cond ((atom type) (mv nil nil))
         ((or (eq (car type) &#39;not) (eq (car type) &#39;complex))
          (non-common-lisp-compliants-in-satisfies (cadr type) wrld))
...">non-common-lisp-compliants-in-satisfies</a>
    (type wrld)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> type) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
      ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) '<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'complex)) (<a class="sym-link local-def" href="#def-non-common-lisp-compliants-in-satisfies" data-sym="NON-COMMON-LISP-COMPLIANTS-IN-SATISFIES" title="(mutual-recursion
 (defun non-common-lisp-compliants-in-satisfies (type wrld)
   (cond ((atom type) (mv nil nil))
         ((or (eq (car type) &#39;not) (eq (car type) &#39;complex))
          (non-common-lisp-compliants-in-satisfies (cadr type) wrld))
...">non-common-lisp-compliants-in-satisfies</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> type) wrld))
      ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) '<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) '<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a>)) (non-common-lisp-compliants-in-satisfies-lst (cdr type)
          wrld))
      ((consp type) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'satisfies)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> type) wrld) <span class="keyword">:common-lisp-compliant</span>)
              nil
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> type))))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> non-common-lisp-compliants-in-satisfies-lst
    (lst wrld)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg1 fns1)
          (<a class="sym-link local-def" href="#def-non-common-lisp-compliants-in-satisfies" data-sym="NON-COMMON-LISP-COMPLIANTS-IN-SATISFIES" title="(mutual-recursion
 (defun non-common-lisp-compliants-in-satisfies (type wrld)
   (cond ((atom type) (mv nil nil))
         ((or (eq (car type) &#39;not) (eq (car type) &#39;complex))
          (non-common-lisp-compliants-in-satisfies (cadr type) wrld))
...">non-common-lisp-compliants-in-satisfies</a> (car lst) wrld)
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg2 fns2)
            (non-common-lisp-compliants-in-satisfies-lst (cdr lst) wrld)
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> flg1 flg2) (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> fns1 fns2))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-stobj-field-type-term" data-defines="CHK-STOBJ-FIELD-TYPE-TERM" data-references="IGNORE,DECLARE,CLEAN-UP-CLAUSE-SET,EQ,ASSERT$,CAR,GUARD-CLAUSES+,TTREE,CL-SET,T,VALUE,NULL,CDR,NOT,SOFT,ER,COND,NON-COMMON-LISP-COMPLIANTS-IN-SATISFIES,BAD-FNS,FLG,MV-LET,MSG,X,QUOTE,CONS,LIST,SIMPLE-TRANSLATE-AND-EVAL,PAIR,ER-LET*,STATE,WRLD,CTX,TYPE-STRING,NAME,FIELD,INIT,TYPE,TERM,DEFUN" data-used-by="CHK-STOBJ-FIELD-DESCRIPTOR,CHK-STOBJ-FIELD-ETYPE" data-part-name="CHK-STOBJ-FIELD-TYPE-TERM" data-part-args="STATE,WRLD,CTX,TYPE-STRING,NAME,FIELD,INIT,TYPE,TERM" data-part-body="IGNORE,DECLARE,CLEAN-UP-CLAUSE-SET,EQ,ASSERT$,CAR,GUARD-CLAUSES+,TTREE,CL-SET,T,VALUE,NULL,TYPE-STRING,CDR,NOT,NAME,FIELD,SOFT,ER,COND,TYPE,NON-COMMON-LISP-COMPLIANTS-IN-SATISFIES,BAD-FNS,FLG,MV-LET,STATE,WRLD,CTX,MSG,INIT,X,QUOTE,CONS,LIST,TERM,SIMPLE-TRANSLATE-AND-EVAL,PAIR,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-STOBJ-FIELD-TYPE-TERM">chk-stobj-field-type-term</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-stobj-field-type-term" data-sym="CHK-STOBJ-FIELD-TYPE-TERM" title="(defun chk-stobj-field-type-term
       (term type init field name type-string ctx wrld state)
  (er-let*
   ((pair
     (simple-translate-and-eval term (list (cons &#39;x init)) nil
...">chk-stobj-field-type-term</a>
  (term type init field name type-string ctx wrld state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pair (simple-translate-and-eval term
         (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons 'x init))
         nil
         (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The type ~x0"</span> term)
         ctx
         wrld
         state
         nil)))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg bad-fns)
      (<a class="sym-link local-def" href="#def-non-common-lisp-compliants-in-satisfies" data-sym="NON-COMMON-LISP-COMPLIANTS-IN-SATISFIES" title="(mutual-recursion
 (defun non-common-lisp-compliants-in-satisfies (type wrld)
   (cond ((atom type) (mv nil nil))
         ((or (eq (car type) &#39;not) (eq (car type) &#39;complex))
          (non-common-lisp-compliants-in-satisfies (cadr type) wrld))
...">non-common-lisp-compliants-in-satisfies</a> type wrld)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-fns (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The type specifier for the ~x0 field of the proposed stobj, ~x1, ~
             applies SATISFIES to the function symbol~#2~[ ~&amp;2, the guard of ~
             which has~/s ~&amp;2, the guards of which have~] not yet been ~
             verified.  See :DOC defstobj."</span>
            field
            name
            bad-fns))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (cdr pair)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The value specified by the :initially keyword, namely ~x0, fails ~
             to satisfy the declared type ~x1~@2 for the ~x3 field of ~x4."</span>
            init
            type
            type-string
            field
            name))
        ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> flg) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (cl-set ttree)
            (<a class="sym-link system" href="history-management.html#def-guard-clauses_2B" data-sym="GUARD-CLAUSES+">guard-clauses+</a> (car pair)
              nil
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
              nil
              <span class="keyword">:do-not-simplify</span> wrld
              nil
              nil
              nil
              nil)
            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ttree nil)
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (cl-set ttree)
                (<a class="sym-link system" href="history-management.html#def-clean-up-clause-set" data-sym="CLEAN-UP-CLAUSE-SET">clean-up-clause-set</a> cl-set nil wrld nil state)
                (declare (ignore ttree))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> cl-set) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"The type specifier for the ~x0 field of the proposed ~
                      stobj, ~x1, produces the term, ~x2, which ACL2 is ~
                      unable to check is guard-verified.  See :DOC defstobj."</span>
                      field
                      name
                      term)))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-stobj-field-etype" data-defines="CHK-STOBJ-FIELD-ETYPE" data-references="IF,MSG,CHK-STOBJ-FIELD-TYPE-TERM,VALUE,NULL,GETPROPC,SOFT,ER,EQ,COND,ETYPE-ERROR-STRING,X,QUOTE,TRANSLATE-DECLARATION-TO-GUARD,NOT,AND,ETYPE-TERM,T,STOBJP,LET*,STATE,WRLD,CTX,CHILD-STOBJ-MEMOIZABLE-ERROR-STRING,NON-MEMOIZABLE,ARRAYP,INIT,INITP,NAME,FIELD,TYPE,ETYPE,DEFUN" data-used-by="CHK-STOBJ-FIELD-DESCRIPTOR" data-part-name="CHK-STOBJ-FIELD-ETYPE" data-part-args="STATE,WRLD,CTX,CHILD-STOBJ-MEMOIZABLE-ERROR-STRING,NON-MEMOIZABLE,ARRAYP,INIT,INITP,NAME,FIELD,TYPE,ETYPE" data-part-body="ARRAYP,IF,MSG,CHK-STOBJ-FIELD-TYPE-TERM,INIT,TYPE,VALUE,INITP,NULL,CHILD-STOBJ-MEMOIZABLE-ERROR-STRING,GETPROPC,NON-MEMOIZABLE,NAME,FIELD,CTX,SOFT,ER,STATE,EQ,COND,ETYPE-ERROR-STRING,X,QUOTE,TRANSLATE-DECLARATION-TO-GUARD,NOT,AND,ETYPE-TERM,WRLD,T,ETYPE,STOBJP,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-STOBJ-FIELD-ETYPE">chk-stobj-field-etype</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-stobj-field-etype" data-sym="CHK-STOBJ-FIELD-ETYPE" title="(defun chk-stobj-field-etype
       (etype type field name initp init arrayp non-memoizable
        child-stobj-memoizable-error-string ctx wrld state)
  (let* ((stobjp (stobjp etype t wrld))
         (etype-term
...">chk-stobj-field-etype</a>
  (etype type
    field
    name
    initp
    init
    arrayp
    non-memoizable
    child-stobj-memoizable-error-string
    ctx
    wrld
    state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> etype <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)) (etype-term (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> <a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a>)
          (<a class="sym-link system" href="axioms.html#def-translate-declaration-to-guard" data-sym="TRANSLATE-DECLARATION-TO-GUARD">translate-declaration-to-guard</a> etype 'x wrld)))
      (etype-error-string <span class="string">"The element type specified for the ~x0 field of ~x1, namely ~x2, ~
           is not recognized by ACL2 as a type-spec (see :DOC type-spec) or ~
           as a user-defined stobj name."</span>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> etype 'state) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx etype-error-string field name etype))
          ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> non-memoizable
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> etype 'non-memoizable nil wrld))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx child-stobj-memoizable-error-string name etype))
          ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> initp) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The :initially keyword must be omitted for a :type ~
                    specified as an array of stobjs or a hash-table of ~
                    stobjs.  But for :type ~x0, :initially is specified as ~
                    ~x1 for the ~x2 field of ~x3."</span>
              type
              init
              field
              name))))
      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> etype-term) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx etype-error-string field name etype))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-stobj-field-type-term" data-sym="CHK-STOBJ-FIELD-TYPE-TERM" title="(defun chk-stobj-field-type-term
       (term type init field name type-string ctx wrld state)
  (er-let*
   ((pair
     (simple-translate-and-eval term (list (cons &#39;x init)) nil
...">chk-stobj-field-type-term</a> etype-term
          etype
          init
          field
          name
          (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" in the ~@0 specification"</span>
            (if arrayp
              <span class="string">"array"</span>
              <span class="string">"hash-table"</span>))
          ctx
          wrld
          state)))))</pre>
  </div>

<div class="form-block function" id="def-chk-stobj-field-descriptor" data-defines="CHK-STOBJ-FIELD-DESCRIPTOR" data-references="CHK-STOBJ-FIELD-TYPE-TERM,NULL,GETPROPC,TYPE-ERROR-STRING,X,TRANSLATE-DECLARATION-TO-GUARD,TYPE-TERM,STOBJP,FIX-STOBJ-TABLE-TYPE,STOBJ-TABLE,HONS-EQUAL,EQL,MEMBER-EQ,STOBJ-HASH-TABLE-ELEMENT-TYPE,STOBJ-HASH-TABLE-INIT-SIZE,SIZE,STOBJ-HASH-TABLE-TEST,TEST,FIX-STOBJ-HASH-TABLE-TYPE,MEMBER,HASH-TABLE,CHK-STOBJ-FIELD-ETYPE,OR,NATP,N,ETYPE,FIX-STOBJ-ARRAY-TYPE,TYPE0,CADDR,EQUAL,TRUE-LISTP,ARRAY,EQ,NOT,CHILD-STOBJ-MEMOIZABLE-ERROR-STRING,RESIZABLE,INIT,INITP,ELEMENT-TYPE,CADR,ASSOC-KEYWORD,IF,TYPE,FIELD,LET*,SOFT,ER,SUBSETP-EQ,NO-DUPLICATESP,ODDS,KEYS,LET,QUOTE,LENGTH,MEMBER-EQUAL,CDR,KEYWORD-VALUE-LISTP,CAR,CONSP,AND,ER-PROGN,T,VALUE,SYMBOLP,COND,STATE,WRLD,CTX,NON-MEMOIZABLE,FIELD-DESCRIPTOR,NAME,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFSTOBJ1" data-part-name="CHK-STOBJ-FIELD-DESCRIPTOR" data-part-args="STATE,WRLD,CTX,NON-MEMOIZABLE,FIELD-DESCRIPTOR,NAME" data-part-body="CHK-STOBJ-FIELD-TYPE-TERM,NULL,GETPROPC,TYPE-ERROR-STRING,X,TRANSLATE-DECLARATION-TO-GUARD,TYPE-TERM,STOBJP,FIX-STOBJ-TABLE-TYPE,STOBJ-TABLE,HONS-EQUAL,EQL,MEMBER-EQ,STOBJ-HASH-TABLE-ELEMENT-TYPE,STOBJ-HASH-TABLE-INIT-SIZE,SIZE,STOBJ-HASH-TABLE-TEST,TEST,FIX-STOBJ-HASH-TABLE-TYPE,MEMBER,HASH-TABLE,STATE,NON-MEMOIZABLE,CHK-STOBJ-FIELD-ETYPE,OR,NATP,N,ETYPE,WRLD,FIX-STOBJ-ARRAY-TYPE,TYPE0,CADDR,EQUAL,TRUE-LISTP,ARRAY,EQ,NOT,CHILD-STOBJ-MEMOIZABLE-ERROR-STRING,RESIZABLE,INIT,INITP,ELEMENT-TYPE,CADR,ASSOC-KEYWORD,IF,TYPE,FIELD,LET*,NAME,CTX,SOFT,ER,SUBSETP-EQ,NO-DUPLICATESP,ODDS,KEYS,LET,QUOTE,LENGTH,MEMBER-EQUAL,CDR,KEYWORD-VALUE-LISTP,CAR,CONSP,AND,ER-PROGN,T,VALUE,FIELD-DESCRIPTOR,SYMBOLP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-STOBJ-FIELD-DESCRIPTOR">chk-stobj-field-descriptor</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-stobj-field-descriptor" data-sym="CHK-STOBJ-FIELD-DESCRIPTOR" title="(defun chk-stobj-field-descriptor
       (name field-descriptor non-memoizable ctx wrld state)
  (cond ((symbolp field-descriptor) (value nil))
        (t
         (er-progn
...">chk-stobj-field-descriptor</a>
  (name field-descriptor non-memoizable ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp field-descriptor) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp field-descriptor)
             (symbolp (car field-descriptor))
             (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> (cdr field-descriptor))
             (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> field-descriptor) '(<span class="number">1</span> <span class="number">3</span> <span class="number">5</span> <span class="number">7</span> <span class="number">9</span>))
             (let ((keys (<a class="sym-link system" href="axioms.html#def-odds" data-sym="ODDS">odds</a> field-descriptor)))
               (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> keys)
                 (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> keys
                   '(<span class="keyword">:type</span> <span class="keyword">:element-type</span> <span class="keyword">:initially</span> <span class="keyword">:resizable</span>))))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The field descriptors of a single-threaded object ~
                   definition must be a symbolic field-name or a list of the ~
                   form (field-name :type type :initially val), where ~
                   field-name is a symbol.  The :type and :initially keyword ~
                   assignments are optional and their order is irrelevant.  ~
                   The purported descriptor ~x0 for a field in ~x1 is not of ~
                   this form."</span>
              field-descriptor
              name)))
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((field (car field-descriptor)) (type (if (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:type</span> (cdr field-descriptor))
                (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:type</span> (cdr field-descriptor)))
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
            (element-type (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:element-type</span> (cdr field-descriptor))))
            (initp (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:initially</span> (cdr field-descriptor)))
            (init (if initp
                (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> initp)
                nil))
            (resizable (if (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:resizable</span> (cdr field-descriptor))
                (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:resizable</span> (cdr field-descriptor)))
                nil))
            (child-stobj-memoizable-error-string <span class="string">"It is illegal to declare stobj ~x0 as :NON-MEMOIZABLE, because ~
              it has a child stobj, ~x1, that was not thus declared.  See ~
              :DOC defstobj."</span>))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> resizable (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> resizable <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The :resizable value in the ~x0 field of ~x1 is illegal:  ~x2.  ~
              The legal values are t and nil."</span>
                field
                name
                resizable))
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'array)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> type)
                     (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> type) <span class="number">3</span>)
                     (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> type))
                     (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> type)) <span class="number">1</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"When a field descriptor specifies an ARRAY :type, the type ~
                must be of the form (ARRAY etype (n)).  Note that we only ~
                support single-dimensional arrays.  The purported ARRAY :type ~
                ~x0 for the ~x1 field of ~x2 is not of this form."</span>
                    type
                    field
                    name))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((type0 (<a class="sym-link system" href="basis-a.html#def-fix-stobj-array-type" data-sym="FIX-STOBJ-ARRAY-TYPE">fix-stobj-array-type</a> type wrld)) (etype (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> type0))
                      (n (car (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> type0))))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> n)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"An array dimension must be a non-negative integer or a ~
                      defined constant whose value is a non-negative integer. ~
                      ~ The :type ~x0 for the ~x1 field of ~x2 is thus ~
                      illegal."</span>
                          type0
                          field
                          name))
                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> element-type
                         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> element-type <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (equal element-type etype)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"When the :element-type keyword is specified for a stobj ~
                      array field, it must be either T or the type specified ~
                      for the elements of the array by its :type keyword.  ~
                      The :element-type of ~x0 is thus illegal for :type ~x1."</span>
                          element-type
                          type))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-stobj-field-etype" data-sym="CHK-STOBJ-FIELD-ETYPE" title="(defun chk-stobj-field-etype
       (etype type field name initp init arrayp non-memoizable
        child-stobj-memoizable-error-string ctx wrld state)
  (let* ((stobjp (stobjp etype t wrld))
         (etype-term
...">chk-stobj-field-etype</a> etype
                          type
                          field
                          name
                          initp
                          init
                          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                          non-memoizable
                          child-stobj-memoizable-error-string
                          ctx
                          wrld
                          state)))))))
            ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> element-type
               (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:resizable</span> (cdr field-descriptor))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The ~#0~[:resizable~/:element-type~] keyword is only legal for ~
              array types, hence is illegal for the ~x1 field of ~x2."</span>
                (if element-type
                  <span class="number">1</span>
                  <span class="number">0</span>)
                field
                name))
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'hash-table)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> type) (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> type) '(<span class="number">2</span> <span class="number">3</span> <span class="number">4</span>)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"A hash-table type must be a true-list of length 2, 3, or ~
                     4.  The type ~x0 is thus illegal.  See :DOC defstobj.~%"</span>
                    type))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((type (<a class="sym-link system" href="basis-a.html#def-fix-stobj-hash-table-type" data-sym="FIX-STOBJ-HASH-TABLE-TYPE">fix-stobj-hash-table-type</a> type wrld)) (test (<a class="sym-link system" href="basis-a.html#def-stobj-hash-table-test" data-sym="STOBJ-HASH-TABLE-TEST">stobj-hash-table-test</a> type))
                      (size (<a class="sym-link system" href="basis-a.html#def-stobj-hash-table-init-size" data-sym="STOBJ-HASH-TABLE-INIT-SIZE">stobj-hash-table-init-size</a> type))
                      (etype (<a class="sym-link system" href="basis-a.html#def-stobj-hash-table-element-type" data-sym="STOBJ-HASH-TABLE-ELEMENT-TYPE">stobj-hash-table-element-type</a> type)))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> test '(<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> equal hons-equal))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"A hash-table test must be ~v0.  The test ~
                                given was ~x1.  See :DOC defstobj.~%"</span>
                          '(<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> hons-equal equal)
                          test))
                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> size (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> size))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"A hash-table type must specify the size (the ~
                                optional second argument) as nil or a natural ~
                                number, either directly or using a defined ~
                                constant.  The type ~x0 is thus illegal.  See ~
                                :DOC defstobj.~%"</span>
                          type))
                      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> etype <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link local-def" href="#def-chk-stobj-field-etype" data-sym="CHK-STOBJ-FIELD-ETYPE" title="(defun chk-stobj-field-etype
       (etype type field name initp init arrayp non-memoizable
        child-stobj-memoizable-error-string ctx wrld state)
  (let* ((stobjp (stobjp etype t wrld))
         (etype-term
...">chk-stobj-field-etype</a> etype
                          type
                          field
                          name
                          initp
                          init
                          nil
                          non-memoizable
                          child-stobj-memoizable-error-string
                          ctx
                          wrld
                          state))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))))
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'stobj-table)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> type) (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> type) '(<span class="number">1</span> <span class="number">2</span>)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"A stobj-table type must be a true-list of length 1 or 2, ~
                     interpreted as (STOBJ-TABLE) or (STOBJ-TABLE SIZE).  The ~
                     type ~x0 is thus illegal.~%"</span>
                    type))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((type (<a class="sym-link system" href="basis-a.html#def-fix-stobj-table-type" data-sym="FIX-STOBJ-TABLE-TYPE">fix-stobj-table-type</a> type wrld)))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (cdr type) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> type)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"A stobj-table type of the form (STOBJ-TABLE ~
                                SIZE) must specify SIZE as a natural number, ~
                                either directly or using a defined constant.  ~
                                The type ~x0 is thus illegal.~%"</span>
                          type))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> type <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)) (type-term (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> <a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a>)
                      (<a class="sym-link system" href="axioms.html#def-translate-declaration-to-guard" data-sym="TRANSLATE-DECLARATION-TO-GUARD">translate-declaration-to-guard</a> type 'x wrld)))
                  (type-error-string <span class="string">"The :type specified for the ~x0 field of ~x1, namely ~x2, ~
                    is not recognized by ACL2 as a type-spec (see :DOC ~
                    type-spec) or as a user-defined stobj name."</span>))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type 'state) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx type-error-string field name type))
                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> non-memoizable
                         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> type 'non-memoizable nil wrld))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx child-stobj-memoizable-error-string name type))
                      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> initp) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"The :initially keyword must be omitted for a ~
                             :type specified as a stobj.  But for :type ~x0, ~
                             :initially is specified as ~x1 for the ~x2 field ~
                             of ~x3."</span>
                          type
                          init
                          field
                          name))))
                  ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> type-term) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx type-error-string field name type))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-stobj-field-type-term" data-sym="CHK-STOBJ-FIELD-TYPE-TERM" title="(defun chk-stobj-field-type-term
       (term type init field name type-string ctx wrld state)
  (er-let*
   ((pair
     (simple-translate-and-eval term (list (cons &#39;x init)) nil
...">chk-stobj-field-type-term</a> type-term
                      type
                      init
                      field
                      name
                      <span class="string">""</span>
                      ctx
                      wrld
                      state)))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-defstobj-renaming" data-defines="CHK-ACCEPTABLE-DEFSTOBJ-RENAMING" data-references="EQ,DEFSTOBJ-FNNAME-KEY2,KEY2,CDR,ASSOC-KEYWORD,CADR,OR,CONSP,TYPE,CAR,ATOM,IF,FIELD,LET*,SET-DIFFERENCE-EQUAL,SUBSETP,VALUE,T,DUPLICATES,SOFT,ER,NO-DUPLICATESP-EQ,NOT,NULL,STRIP-CARS,DOMAIN,REVERSE,DEFSTOBJ-FNNAME,LIST*,LET,ENDP,COND,DEFAULT-NAMES,STATE,CTX,RENAMING,FIELD-DESCRIPTORS,NAME,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFSTOBJ1" data-part-name="CHK-ACCEPTABLE-DEFSTOBJ-RENAMING" data-part-args="DEFAULT-NAMES,STATE,CTX,RENAMING,FIELD-DESCRIPTORS,NAME" data-part-body="EQ,STATE,CHK-ACCEPTABLE-DEFSTOBJ-RENAMING,DEFSTOBJ-FNNAME-KEY2,KEY2,CDR,ASSOC-KEYWORD,CADR,OR,CONSP,TYPE,CAR,ATOM,IF,FIELD,LET*,SET-DIFFERENCE-EQUAL,SUBSETP,VALUE,T,DUPLICATES,CTX,SOFT,ER,NO-DUPLICATESP-EQ,NOT,NULL,RENAMING,STRIP-CARS,DOMAIN,REVERSE,NAME,DEFSTOBJ-FNNAME,LIST*,DEFAULT-NAMES,LET,FIELD-DESCRIPTORS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-DEFSTOBJ-RENAMING">chk-acceptable-defstobj-renaming</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-defstobj-renaming" data-sym="CHK-ACCEPTABLE-DEFSTOBJ-RENAMING" title="(defun chk-acceptable-defstobj-renaming
       (name field-descriptors renaming ctx state default-names)
  (cond
   ((endp field-descriptors)
    (let ((default-names
...">chk-acceptable-defstobj-renaming</a>
  (name field-descriptors renaming ctx state default-names)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> field-descriptors) (let ((default-names (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> name <span class="keyword">:recognizer</span> <span class="keyword">:top</span> nil)
             (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> name <span class="keyword">:creator</span> <span class="keyword">:top</span> nil)
             (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> default-names))) (domain (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> renaming)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> renaming) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-no-duplicatesp-eq" data-sym="NO-DUPLICATESP-EQ">no-duplicatesp-eq</a> default-names)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"The field descriptors are illegal because they require ~
               the use of the same name for two different functions.  ~
               The duplicated name~#0~[ is~/s are~] ~&amp;0.  You must ~
               change the component names so that no conflict occurs. ~
               ~ You may then wish to use the :RENAMING option to ~
               introduce your own names for these functions.  See ~
               :DOC defstobj."</span>
                  (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> default-names)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-no-duplicatesp-eq" data-sym="NO-DUPLICATESP-EQ">no-duplicatesp-eq</a> default-names)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The field descriptors are illegal because they require ~
             the use of the same default name for two different ~
             functions.  The duplicated default name~#0~[ is~/s are~] ~
             ~&amp;0.  You must change the component names so that no ~
             conflict occurs.  Only then may you use the :RENAMING ~
             option to rename the default names."</span>
              (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> default-names)))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-no-duplicatesp-eq" data-sym="NO-DUPLICATESP-EQ">no-duplicatesp-eq</a> domain)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"No two entries in the :RENAMING alist may mention the ~
             same target symbol.  Your alist, ~x0, contains ~
             duplications in its domain."</span>
              renaming))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> domain default-names)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Your :RENAMING alist, ~x0, mentions ~#1~[a function ~
             symbol~/function symbols~] in its domain which ~
             ~#1~[is~/are~] not among the default symbols to be ~
             renamed.  The offending symbol~#1~[ is~/s are~] ~&amp;1.  ~
             The default defstobj names for this event are ~&amp;2."</span>
              renaming
              (<a class="sym-link system" href="axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> domain default-names)
              default-names))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((field (if (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (car field-descriptors))
             (car field-descriptors)
             (car (car field-descriptors)))) (type (if (consp (car field-descriptors))
              (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:type</span> (cdr (car field-descriptors))))
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (key2 (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname-key2" data-sym="DEFSTOBJ-FNNAME-KEY2">defstobj-fnname-key2</a> type)))
        (<a class="sym-link local-def" href="#def-chk-acceptable-defstobj-renaming" data-sym="CHK-ACCEPTABLE-DEFSTOBJ-RENAMING" title="(defun chk-acceptable-defstobj-renaming
       (name field-descriptors renaming ctx state default-names)
  (cond
   ((endp field-descriptors)
    (let ((default-names
...">chk-acceptable-defstobj-renaming</a> name
          (cdr field-descriptors)
          renaming
          ctx
          state
          (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:updater</span> key2 nil)
            (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:accessor</span> key2 nil)
            (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:recognizer</span> key2 nil)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:array</span>) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:length</span> key2 nil)
                  (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:resize</span> key2 nil)
                  default-names))
              ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:hash-table</span>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:stobj-table</span>)) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:boundp</span> key2 nil)
                  (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:accessor?</span> key2 nil)
                  (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:remove</span> key2 nil)
                  (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:count</span> key2 nil)
                  (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:clear</span> key2 nil)
                  (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:init</span> key2 nil)
                  default-names))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> default-names))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-defstobj1" data-defines="CHK-ACCEPTABLE-DEFSTOBJ1" data-references="CONS,EQ,RESIZE-NAME,LENGTH-NAME,UPDATER-NAME,DEFCONST-NAME,ACCESSOR-CONST-NAME,ACCESSOR-NAME,FIELDP-NAME,INIT-NAME,CLEAR-NAME,COUNT-NAME,REMOVE-NAME,ACCESSOR?-NAME,BOUNDP-NAME,DEFSTOBJ-FNNAME-KEY2,KEY2,CDR,ASSOC-KEYWORD,CADR,OR,CONSP,TYPE,ATOM,IF,FIELD,CAR,CHK-STOBJ-FIELD-DESCRIPTOR,CONST,CHK-JUST-NEW-NAMES,VALUE,T,DUPLICATES,SOFT,ER,NO-DUPLICATESP-EQ,NOT,AND,CHK-ACCEPTABLE-DEFSTOBJ-RENAMING,FUNCTION,QUOTE,CHK-ALL-BUT-NEW-NAME,ER-PROGN,LIST*,CREATOR-NAME,DEFSTOBJ-FNNAME,RECOG-NAME,LET*,ENDP,COND,CONST-NAMES,NAMES,STATE,WRLD,CTX,NON-MEMOIZABLE,RENAMING,FTEMPS,FIELD-DESCRIPTORS,NAME,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFSTOBJ" data-part-name="CHK-ACCEPTABLE-DEFSTOBJ1" data-part-args="CONST-NAMES,NAMES,STATE,WRLD,CTX,NON-MEMOIZABLE,RENAMING,FTEMPS,FIELD-DESCRIPTORS,NAME" data-part-body="CONS,CHK-ACCEPTABLE-DEFSTOBJ1,EQ,RESIZE-NAME,LENGTH-NAME,UPDATER-NAME,DEFCONST-NAME,ACCESSOR-CONST-NAME,ACCESSOR-NAME,FIELDP-NAME,INIT-NAME,CLEAR-NAME,COUNT-NAME,REMOVE-NAME,ACCESSOR?-NAME,BOUNDP-NAME,DEFSTOBJ-FNNAME-KEY2,KEY2,CDR,ASSOC-KEYWORD,CADR,OR,CONSP,TYPE,ATOM,IF,FIELD,NON-MEMOIZABLE,CAR,CHK-STOBJ-FIELD-DESCRIPTOR,CONST,CONST-NAMES,CHK-JUST-NEW-NAMES,VALUE,T,DUPLICATES,SOFT,ER,NO-DUPLICATESP-EQ,NOT,AND,FIELD-DESCRIPTORS,CHK-ACCEPTABLE-DEFSTOBJ-RENAMING,STATE,WRLD,FUNCTION,QUOTE,CTX,CHK-ALL-BUT-NEW-NAME,ER-PROGN,LIST*,NAMES,CREATOR-NAME,RENAMING,NAME,DEFSTOBJ-FNNAME,RECOG-NAME,LET*,FTEMPS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-DEFSTOBJ1">chk-acceptable-defstobj1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-defstobj1" data-sym="CHK-ACCEPTABLE-DEFSTOBJ1" title="(defun chk-acceptable-defstobj1
       (name field-descriptors ftemps renaming non-memoizable ctx wrld state
        names const-names)
  (cond
   ((endp ftemps)
...">chk-acceptable-defstobj1</a>
  (name field-descriptors
    ftemps
    renaming
    non-memoizable
    ctx
    wrld
    state
    names
    const-names)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> ftemps) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((recog-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> name <span class="keyword">:recognizer</span> <span class="keyword">:top</span> renaming)) (creator-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> name <span class="keyword">:creator</span> <span class="keyword">:top</span> renaming))
          (names (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> recog-name creator-name names)))
        (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name recog-name ctx 'function wrld state)
          (chk-all-but-new-name creator-name ctx 'function wrld state)
          (<a class="sym-link local-def" href="#def-chk-acceptable-defstobj-renaming" data-sym="CHK-ACCEPTABLE-DEFSTOBJ-RENAMING" title="(defun chk-acceptable-defstobj-renaming
       (name field-descriptors renaming ctx state default-names)
  (cond
   ((endp field-descriptors)
    (let ((default-names
...">chk-acceptable-defstobj-renaming</a> name
            field-descriptors
            renaming
            ctx
            state
            nil)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> renaming (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-no-duplicatesp-eq" data-sym="NO-DUPLICATESP-EQ">no-duplicatesp-eq</a> names))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The field descriptors are illegal because they require the ~
                   use of the same name for two different functions.  The ~
                   duplicated name~#0~[ is~/s are~] ~&amp;0.  You must change the ~
                   supplied :RENAMING option so that no conflict occurs."</span>
                (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> names)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
          (<a class="sym-link system" href="history-management.html#def-chk-just-new-names" data-sym="CHK-JUST-NEW-NAMES">chk-just-new-names</a> names 'function nil ctx wrld state)
          (<a class="sym-link system" href="history-management.html#def-chk-just-new-names" data-sym="CHK-JUST-NEW-NAMES">chk-just-new-names</a> const-names 'const nil ctx wrld state))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-stobj-field-descriptor" data-sym="CHK-STOBJ-FIELD-DESCRIPTOR" title="(defun chk-stobj-field-descriptor
       (name field-descriptor non-memoizable ctx wrld state)
  (cond ((symbolp field-descriptor) (value nil))
        (t
         (er-progn
...">chk-stobj-field-descriptor</a> name
          (car ftemps)
          non-memoizable
          ctx
          wrld
          state)
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((field (if (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> (car ftemps))
               (car ftemps)
               (car (car ftemps)))) (type (if (consp (car ftemps))
                (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:type</span> (cdr (car ftemps)))) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
            (key2 (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname-key2" data-sym="DEFSTOBJ-FNNAME-KEY2">defstobj-fnname-key2</a> type))
            (boundp-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:boundp</span> key2 renaming))
            (accessor?-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:accessor?</span> key2 renaming))
            (remove-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:remove</span> key2 renaming))
            (count-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:count</span> key2 renaming))
            (clear-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:clear</span> key2 renaming))
            (init-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:init</span> key2 renaming))
            (fieldp-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:recognizer</span> key2 renaming))
            (accessor-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:accessor</span> key2 renaming))
            (accessor-const-name (<a class="sym-link system" href="basis-a.html#def-defconst-name" data-sym="DEFCONST-NAME">defconst-name</a> accessor-name))
            (updater-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:updater</span> key2 renaming))
            (length-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:length</span> key2 renaming))
            (resize-name (<a class="sym-link system" href="basis-a.html#def-defstobj-fnname" data-sym="DEFSTOBJ-FNNAME">defstobj-fnname</a> field <span class="keyword">:resize</span> key2 renaming)))
          (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name fieldp-name ctx 'function wrld state)
            (chk-all-but-new-name accessor-name
              ctx
              'function
              wrld
              state)
            (chk-all-but-new-name updater-name ctx 'function wrld state)
            (chk-all-but-new-name accessor-const-name
              ctx
              'const
              wrld
              state)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:array</span>) (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name length-name ctx 'function wrld state)
                  (chk-all-but-new-name resize-name ctx 'function wrld state)))
              ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:hash-table</span>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:stobj-table</span>)) (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name boundp-name ctx 'function wrld state)
                  (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:hash-table</span>)
                    (chk-all-but-new-name accessor?-name
                      ctx
                      'function
                      wrld
                      state)
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                  (chk-all-but-new-name remove-name ctx 'function wrld state)
                  (chk-all-but-new-name count-name ctx 'function wrld state)
                  (chk-all-but-new-name init-name ctx 'function wrld state)
                  (chk-all-but-new-name clear-name ctx 'function wrld state)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
            (<a class="sym-link local-def" href="#def-chk-acceptable-defstobj1" data-sym="CHK-ACCEPTABLE-DEFSTOBJ1" title="(defun chk-acceptable-defstobj1
       (name field-descriptors ftemps renaming non-memoizable ctx wrld state
        names const-names)
  (cond
   ((endp ftemps)
...">chk-acceptable-defstobj1</a> name
              field-descriptors
              (cdr ftemps)
              renaming
              non-memoizable
              ctx
              wrld
              state
              (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> fieldp-name
                accessor-name
                updater-name
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:array</span>) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> length-name resize-name names))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:hash-table</span>) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> boundp-name
                      accessor?-name
                      remove-name
                      count-name
                      clear-name
                      init-name
                      names))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 <span class="keyword">:stobj-table</span>) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> boundp-name
                      remove-name
                      count-name
                      clear-name
                      init-name
                      names))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> names)))
              (cons accessor-const-name const-names))))))))</pre>
  </div>

<div class="form-block function" id="def-old-field-descriptors" data-defines="OLD-FIELD-DESCRIPTORS" data-references="NULL,IGNORE,DECLARE,*DEFSTOBJ-KEYWORDS*,CDDR,PARTITION-REST-AND-KEYWORD-ARGS,KEY-ALIST,FIELD-DESCRIPTORS,ERP,MV-LET,CADR,DEFSTOBJ,CAR,EQ,AND,GET-EVENT,EV,LET,STOBJ,QUOTE,GETPROPC,ASSERT$,WRLD,NAME,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFSTOBJ" data-part-name="OLD-FIELD-DESCRIPTORS" data-part-args="WRLD,NAME" data-part-body="NULL,IGNORE,DECLARE,*DEFSTOBJ-KEYWORDS*,CDDR,PARTITION-REST-AND-KEYWORD-ARGS,KEY-ALIST,FIELD-DESCRIPTORS,ERP,MV-LET,CADR,DEFSTOBJ,CAR,EQ,AND,GET-EVENT,EV,LET,WRLD,STOBJ,QUOTE,NAME,GETPROPC,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OLD-FIELD-DESCRIPTORS">old-field-descriptors</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-old-field-descriptors" data-sym="OLD-FIELD-DESCRIPTORS" title="(defun old-field-descriptors (name wrld)
  (assert$ (getpropc name &#39;stobj nil wrld)
           (let ((ev (get-event name wrld)))
             (and ev
                  (assert$ (and (eq (car ev) &#39;defstobj) (eq (cadr ev) name))
...">old-field-descriptors</a>
  (name wrld)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'stobj nil wrld)
    (let ((ev (get-event name wrld)))
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ev
        (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ev) '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ev) name))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp field-descriptors key-alist)
            (<a class="sym-link system" href="basis-a.html#def-partition-rest-and-keyword-args" data-sym="PARTITION-REST-AND-KEYWORD-ARGS">partition-rest-and-keyword-args</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> ev)
              <a class="sym-link system" href="basis-a.html#def-_2Adefstobj-keywords_2A" data-sym="*DEFSTOBJ-KEYWORDS*">*defstobj-keywords*</a>)
            (declare (ignore key-alist))
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> erp) field-descriptors)))))))</pre>
  </div>

<div class="form-block function" id="def-redundant-defstobjp" data-defines="REDUNDANT-DEFSTOBJP" data-references="CDDR,EQUAL,CADR,DEFSTOBJ,CAR,EQ,GET-EVENT,EV,LET,STOBJ,QUOTE,GETPROPC,AND,WRLD,ARGS,NAME,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFSTOBJ" data-part-name="REDUNDANT-DEFSTOBJP" data-part-args="WRLD,ARGS,NAME" data-part-body="ARGS,CDDR,EQUAL,CADR,DEFSTOBJ,CAR,EQ,GET-EVENT,EV,LET,WRLD,STOBJ,QUOTE,NAME,GETPROPC,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDUNDANT-DEFSTOBJP">redundant-defstobjp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-redundant-defstobjp" data-sym="REDUNDANT-DEFSTOBJP" title="(defun redundant-defstobjp (name args wrld)
  (and (getpropc name &#39;stobj nil wrld)
       (let ((ev (get-event name wrld)))
         (and ev (eq (car ev) &#39;defstobj) (eq (cadr ev) name)
              (equal (cddr ev) args)))))">redundant-defstobjp</a>
  (name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> wrld)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'stobj nil wrld)
    (let ((ev (get-event name wrld)))
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ev
        (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ev) '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>)
        (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ev) name)
        (equal (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> ev) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))))</pre>
  </div>

<div class="form-block function" id="def-congruent-stobj-fields" data-defines="CONGRUENT-STOBJ-FIELDS" data-references="CDR,EQUAL,CONSP,SYMBOLP,IF,AND,X2,CAR,X1,LET,T,NULL,ENDP,COND,FIELDS2,FIELDS1,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFSTOBJ" data-part-name="CONGRUENT-STOBJ-FIELDS" data-part-args="FIELDS2,FIELDS1" data-part-body="CONGRUENT-STOBJ-FIELDS,CDR,EQUAL,CONSP,SYMBOLP,IF,AND,X2,CAR,X1,LET,T,FIELDS2,NULL,FIELDS1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONGRUENT-STOBJ-FIELDS">congruent-stobj-fields</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-congruent-stobj-fields" data-sym="CONGRUENT-STOBJ-FIELDS" title="(defun congruent-stobj-fields (fields1 fields2)
  (cond ((endp fields1) (null fields2))
        (t
         (let ((x1 (car fields1)) (x2 (car fields2)))
           (and
...">congruent-stobj-fields</a>
  (fields1 fields2)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fields1) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> fields2))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((x1 (car fields1)) (x2 (car fields2)))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (if (symbolp x1)
            (symbolp x2)
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp x1) (consp x2) (equal (cdr x1) (cdr x2))))
          (<a class="sym-link local-def" href="#def-congruent-stobj-fields" data-sym="CONGRUENT-STOBJ-FIELDS" title="(defun congruent-stobj-fields (fields1 fields2)
  (cond ((endp fields1) (null fields2))
        (t
         (let ((x1 (car fields1)) (x2 (car fields2)))
           (and
...">congruent-stobj-fields</a> (cdr fields1) (cdr fields2)))))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-defstobj" data-defines="CHK-ACCEPTABLE-DEFSTOBJ" data-references="CHK-ACCEPTABLE-DEFSTOBJ1,STOBJ-LIVE-VAR,THE-LIVE-VAR,WRLD2,CHK-JUST-NEW-NAME,WRLD1,ER-LET*,DOUBLET-STYLE-SYMBOL-TO-SYMBOL-ALISTP,CHK-LEGAL-DEFSTOBJ-NAME,REHASH-THRESHOLD,REHASH-SIZE,HT-SIZE,K,V,I,MEMBER-EQ,STOBJ,CHK-ALL-BUT-NEW-NAME,ER-PROGN,EQ,OLD-FIELD-DESCRIPTORS,CONGRUENT-STOBJ-FIELDS,ABSSTOBJ-INFO,GETPROPC,STOBJP,IF,AND,BOOLEANP,NON-EXECUTABLE,NON-MEMOIZABLE,CONGRUENT-TO,INLINE,ASSOC-EQ,CDR,RENAMING,LET,REDUNDANT,VALUE,REDUNDANT-DEFSTOBJP,*DEFSTOBJ-KEYWORDS*,PARTITION-REST-AND-KEYWORD-ARGS,KEY-ALIST,FIELD-DESCRIPTORS,ERP,MV-LET,T,DEFSTOBJ,QUOTE,LIST*,SOFT,ER,SYMBOLP,NOT,COND,STATE,WRLD,CTX,ARGS,NAME,DEFUN" data-used-by="DEFSTOBJ-FN" data-part-name="CHK-ACCEPTABLE-DEFSTOBJ" data-part-args="STATE,WRLD,CTX,ARGS,NAME" data-part-body="CHK-ACCEPTABLE-DEFSTOBJ1,STOBJ-LIVE-VAR,THE-LIVE-VAR,WRLD2,CHK-JUST-NEW-NAME,WRLD1,ER-LET*,DOUBLET-STYLE-SYMBOL-TO-SYMBOL-ALISTP,CHK-LEGAL-DEFSTOBJ-NAME,REHASH-THRESHOLD,REHASH-SIZE,HT-SIZE,K,V,I,MEMBER-EQ,STATE,STOBJ,CHK-ALL-BUT-NEW-NAME,ER-PROGN,EQ,OLD-FIELD-DESCRIPTORS,CONGRUENT-STOBJ-FIELDS,ABSSTOBJ-INFO,GETPROPC,STOBJP,IF,AND,BOOLEANP,NON-EXECUTABLE,NON-MEMOIZABLE,CONGRUENT-TO,INLINE,ASSOC-EQ,CDR,RENAMING,LET,REDUNDANT,VALUE,WRLD,REDUNDANT-DEFSTOBJP,*DEFSTOBJ-KEYWORDS*,PARTITION-REST-AND-KEYWORD-ARGS,KEY-ALIST,FIELD-DESCRIPTORS,ERP,MV-LET,T,ARGS,DEFSTOBJ,QUOTE,LIST*,CTX,SOFT,ER,NAME,SYMBOLP,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-DEFSTOBJ">chk-acceptable-defstobj</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-defstobj" data-sym="CHK-ACCEPTABLE-DEFSTOBJ" title="(defun chk-acceptable-defstobj (name args ctx wrld state)
  (cond
   ((not (symbolp name))
    (er soft ctx
        &quot;The first argument of a DEFSTOBJ event must be a symbol.  Thus, ~x0 ~
...">chk-acceptable-defstobj</a>
  (name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp name)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The first argument of a DEFSTOBJ event must be a symbol.  Thus, ~x0 ~
         is ill-formed."</span>
        (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp field-descriptors key-alist)
        (<a class="sym-link system" href="basis-a.html#def-partition-rest-and-keyword-args" data-sym="PARTITION-REST-AND-KEYWORD-ARGS">partition-rest-and-keyword-args</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> <a class="sym-link system" href="basis-a.html#def-_2Adefstobj-keywords_2A" data-sym="*DEFSTOBJ-KEYWORDS*">*defstobj-keywords*</a>)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The keyword arguments to the DEFSTOBJ event must appear after all ~
            field descriptors.  The allowed keyword arguments are ~&amp;0, and ~
            these may not be duplicated, and must be followed by the ~
            corresponding value of the keyword argument.  Thus, ~x1 is ~
            ill-formed."</span>
              <a class="sym-link system" href="basis-a.html#def-_2Adefstobj-keywords_2A" data-sym="*DEFSTOBJ-KEYWORDS*">*defstobj-keywords*</a>
              (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
          ((<a class="sym-link local-def" href="#def-redundant-defstobjp" data-sym="REDUNDANT-DEFSTOBJP" title="(defun redundant-defstobjp (name args wrld)
  (and (getpropc name &#39;stobj nil wrld)
       (let ((ev (get-event name wrld)))
         (and ev (eq (car ev) &#39;defstobj) (eq (cadr ev) name)
              (equal (cddr ev) args)))))">redundant-defstobjp</a> name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> wrld) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'redundant))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((renaming (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:renaming</span> key-alist))) (inline (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:inline</span> key-alist)))
                (congruent-to (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:congruent-to</span> key-alist)))
                (non-memoizable (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:non-memoizable</span> key-alist)))
                (non-executable (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:non-executable</span> key-alist))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> inline)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"DEFSTOBJ requires the :INLINE keyword argument to have a ~
                Boolean value.  See :DOC defstobj."</span>))
                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> non-memoizable) (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> non-executable))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"DEFSTOBJ requires the ~x0 keyword argument to ~
                have a Boolean value.  See :DOC defstobj."</span>
                    (if (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> non-memoizable)
                      <span class="keyword">:non-executable</span> <span class="keyword">:non-memoizable</span>)))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> congruent-to <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"The :CONGRUENT-TO field of a DEFSTOBJ must either be nil or ~
                the name of an existing stobj, but the value ~x0 is neither.  ~
                See :DOC defstobj."</span>
                    congruent-to))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to
                   (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> congruent-to 'absstobj-info nil wrld)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"The symbol ~x0 is the name of an abstract stobj in the ~
                current ACL2 world, so it is not legal for use as the ~
                :CONGRUENT-TO argument of DEFSTOBJ."</span>
                    congruent-to))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-congruent-stobj-fields" data-sym="CONGRUENT-STOBJ-FIELDS" title="(defun congruent-stobj-fields (fields1 fields2)
  (cond ((endp fields1) (null fields2))
        (t
         (let ((x1 (car fields1)) (x2 (car fields2)))
           (and
...">congruent-stobj-fields</a> field-descriptors
                       (<a class="sym-link local-def" href="#def-old-field-descriptors" data-sym="OLD-FIELD-DESCRIPTORS" title="(defun old-field-descriptors (name wrld)
  (assert$ (getpropc name &#39;stobj nil wrld)
           (let ((ev (get-event name wrld)))
             (and ev
                  (assert$ (and (eq (car ev) &#39;defstobj) (eq (cadr ev) name))
...">old-field-descriptors</a> congruent-to wrld)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"A non-nil :CONGRUENT-TO field of a DEFSTOBJ must be the name ~
                of a stobj that has the same shape as the proposed new stobj. ~
                ~ However, the proposed stobj named ~x0 does not have the ~
                same shape as the existing stobj named ~x1.  See :DOC ~
                defstobj."</span>
                    name
                    congruent-to))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> non-memoizable
                       (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> congruent-to 'non-memoizable nil wrld)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"Congruent stobjs must agree on whether or not they are ~
                specified as :NON-MEMOIZABLE.  However, this fails for the ~
                proposed stobj, ~x0, which is specified as :CONGRUENT-TO the ~
                stobj ~x1, since ~x2 is specified with :NON-MEMOIZABLE T but ~
                ~x3 is not.  See :DOC defstobj."</span>
                    name
                    congruent-to
                    (if non-memoizable
                      name
                      congruent-to)
                    (if non-memoizable
                      congruent-to
                      name)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name name ctx 'stobj wrld state)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> name
                         '(i v k ht-size rehash-size rehash-threshold)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"DEFSTOBJ does not allow single-threaded objects with ~
                        the names ~v0, because those symbols may be used as ~
                        formals, along with the new stobj name itself, in ~
                        ``primitive&#39;&#39; stobj functions that will be defined."</span>
                          '(i v k ht-size rehash-size rehash-threshold)))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
                    (<a class="sym-link local-def" href="#def-chk-legal-defstobj-name" data-sym="CHK-LEGAL-DEFSTOBJ-NAME" title="(defun chk-legal-defstobj-name (name state)
  (cond
   ((eq name &#39;state)
    (er soft (cons &#39;defstobj name)
        &quot;STATE is an illegal name for a user-declared ~
...">chk-legal-defstobj-name</a> name state)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-doublet-style-symbol-to-symbol-alistp" data-sym="DOUBLET-STYLE-SYMBOL-TO-SYMBOL-ALISTP" title="(defun doublet-style-symbol-to-symbol-alistp (x)
  (cond ((atom x) (equal x nil))
        (t
         (and (consp (car x)) (symbolp (caar x)) (consp (cdar x))
              (symbolp (cadar x)) (null (cddar x))">doublet-style-symbol-to-symbol-alistp</a> renaming)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"The :RENAMING argument to DEFSTOBJ must be an alist ~
                        containing elements of the form (sym sym), where each ~
                        element of such a doublet is a symbol. Your argument, ~
                        ~x0, is thus illegal."</span>
                          renaming))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
                    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld1 (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> name nil 'stobj nil ctx wrld state)) (wrld2 (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> (<a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a> name)
                            nil
                            'stobj-live-var
                            nil
                            ctx
                            wrld1
                            state)))
                      (<a class="sym-link local-def" href="#def-chk-acceptable-defstobj1" data-sym="CHK-ACCEPTABLE-DEFSTOBJ1" title="(defun chk-acceptable-defstobj1
       (name field-descriptors ftemps renaming non-memoizable ctx wrld state
        names const-names)
  (cond
   ((endp ftemps)
...">chk-acceptable-defstobj1</a> name
                        field-descriptors
                        field-descriptors
                        renaming
                        non-memoizable
                        ctx
                        wrld2
                        state
                        nil
                        nil))))))))))))</pre>
  </div>

<div class="form-block function" id="def-defstobj-field-fns-axiomatic-defs" data-defines="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS" data-references="IGNORABLE,RATIONALP,NATP,REHASH-THRESHOLD,REHASH-SIZE,HT-SIZE,COUNT-KEYS,HONS-REMOVE-ASSOC,UPDATE-NTH,HONS-ASSOC-EQUAL,EQLABLEP,EQL,K,SYMBOLP,COMMON-GUARD,FLET,CDR,+,<,<=,INTEGERP,I,XARGS,DECLARE,APPEND,INIT-NAME,CLEAR-NAME,COUNT-NAME,REMOVE-NAME,ACCESSOR?-NAME,NTH,BOUNDP-NAME,OTHER,RESIZABLE,RESIZE-NAME,LENGTH-NAME,UPDATER-NAME,ACCESSOR-NAME,CADDR,ARRAY-LENGTH,ETYPE-TERM,TRANSLATE-DECLARATION-TO-GUARD,NULL,TYPE-TERM,STOBJ-XARGS,V,V-FORMAL,STOBJ-FORMAL,STATE,NOT,STOBJP,STOBJ-TABLE,STOBJ-TABLEP,STOBJ-HASH-TABLE-TEST,HASH-TEST,KWOTE,NON-EXEC,QUASIQUOTE,IF,INIT,OR,GET-STOBJ-CREATOR,CREATOR,STOBJ-HASH-TABLE-ELEMENT-TYPE,CADR,ETYPE,INIT0,HASH-TABLE,HASHP,ARRAY,QUOTE,EQ,CONSP,AND,ARRAYP,DEFSTOBJ-FIELD-TEMPLATE,ACCESS,TYPE,CAR,FIELD-TEMPLATE,LET*,T,ENDP,COND,WRLD,FIELD-TEMPLATES,N,VAR,TOP-RECOG,DEFUN" data-used-by="DEFSTOBJ-AXIOMATIC-DEFS" data-part-name="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS" data-part-args="WRLD,FIELD-TEMPLATES,N,VAR,TOP-RECOG" data-part-body="IGNORABLE,RATIONALP,NATP,REHASH-THRESHOLD,REHASH-SIZE,HT-SIZE,COUNT-KEYS,HONS-REMOVE-ASSOC,UPDATE-NTH,HONS-ASSOC-EQUAL,EQLABLEP,EQL,K,SYMBOLP,COMMON-GUARD,FLET,CDR,N,+,VAR,TOP-RECOG,DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS,<,<=,INTEGERP,I,XARGS,DECLARE,APPEND,INIT-NAME,CLEAR-NAME,COUNT-NAME,REMOVE-NAME,ACCESSOR?-NAME,NTH,BOUNDP-NAME,OTHER,RESIZABLE,RESIZE-NAME,LENGTH-NAME,UPDATER-NAME,ACCESSOR-NAME,CADDR,ARRAY-LENGTH,ETYPE-TERM,TRANSLATE-DECLARATION-TO-GUARD,NULL,TYPE-TERM,STOBJ-XARGS,V,V-FORMAL,STOBJ-FORMAL,STATE,NOT,STOBJP,STOBJ-TABLE,STOBJ-TABLEP,STOBJ-HASH-TABLE-TEST,HASH-TEST,KWOTE,NON-EXEC,QUASIQUOTE,IF,INIT,WRLD,OR,GET-STOBJ-CREATOR,CREATOR,STOBJ-HASH-TABLE-ELEMENT-TYPE,CADR,ETYPE,INIT0,HASH-TABLE,HASHP,ARRAY,QUOTE,EQ,CONSP,AND,ARRAYP,DEFSTOBJ-FIELD-TEMPLATE,ACCESS,TYPE,CAR,FIELD-TEMPLATE,LET*,T,FIELD-TEMPLATES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS">defstobj-field-fns-axiomatic-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defstobj-field-fns-axiomatic-defs" data-sym="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS" title="(defun defstobj-field-fns-axiomatic-defs (top-recog var n field-templates wrld)
  (cond ((endp field-templates) nil)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">defstobj-field-fns-axiomatic-defs</a>
  (top-recog var n field-templates wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> field-templates) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((field-template (car field-templates)) (type (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:type</span>))
          (arrayp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'array)))
          (hashp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'hash-table)))
          (init0 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:init</span>))
          (etype (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (arrayp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> type))
              (hashp (<a class="sym-link system" href="basis-a.html#def-stobj-hash-table-element-type" data-sym="STOBJ-HASH-TABLE-ELEMENT-TYPE">stobj-hash-table-element-type</a> type))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
          (creator (<a class="sym-link system" href="basis-a.html#def-get-stobj-creator" data-sym="GET-STOBJ-CREATOR">get-stobj-creator</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> etype type) wrld))
          (init (if creator
              `(<a class="sym-link system" href="axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> (,CREATOR))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> init0 (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> init0))))
          (hash-test (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> hashp (<a class="sym-link system" href="basis-a.html#def-stobj-hash-table-test" data-sym="STOBJ-HASH-TABLE-TEST">stobj-hash-table-test</a> type)))
          (stobj-tablep (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'stobj-table)))
          (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (etype (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> etype 'state)) (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> etype <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type 'state)) (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> type <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)))))
          (stobj-formal (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> etype type)))
          (v-formal (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> stobj-formal 'v))
          (stobj-xargs (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> stobj-formal `(<span class="keyword">:stobjs</span> ,STOBJ-FORMAL)))
          (type-term (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> arrayp)
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> hashp)
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> stobj-tablep)
              (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld) stobj-formal)
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                (<a class="sym-link system" href="axioms.html#def-translate-declaration-to-guard" data-sym="TRANSLATE-DECLARATION-TO-GUARD">translate-declaration-to-guard</a> type v-formal wrld))))
          (etype-term (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> arrayp hashp)
              (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld) stobj-formal)
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                (<a class="sym-link system" href="axioms.html#def-translate-declaration-to-guard" data-sym="TRANSLATE-DECLARATION-TO-GUARD">translate-declaration-to-guard</a> etype v-formal wrld))))
          (array-length (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> arrayp (car (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> type))))
          (accessor-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template
              field-template
              <span class="keyword">:accessor-name</span>))
          (updater-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template
              field-template
              <span class="keyword">:updater-name</span>))
          (length-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:length-name</span>))
          (resize-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:resize-name</span>))
          (resizable (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:resizable</span>))
          (other (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:other</span>))
          (boundp-name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> other))
          (accessor?-name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> other))
          (remove-name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> other))
          (count-name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> other))
          (clear-name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> other))
          (init-name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> other)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (arrayp (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> `((,LENGTH-NAME (,VAR)
                 (declare (xargs <span class="keyword">:guard</span> (,TOP-RECOG ,VAR) <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                   ,@(AND (NOT RESIZABLE) `((IGNORE ,VAR))))
                 ,(IF RESIZABLE
     `(LEN (NTH ,N ,VAR))
     ARRAY-LENGTH)) (,RESIZE-NAME (i ,VAR)
                  (declare (xargs <span class="keyword">:guard</span> (,TOP-RECOG ,VAR) <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                    ,@(AND (NOT RESIZABLE) &#39;((IGNORE I))))
                  ,(IF RESIZABLE
     `(UPDATE-NTH ,N (RESIZE-LIST (NTH ,N ,VAR) I ,INIT) ,VAR)
     `(PROG2$
       (HARD-ERROR &#39;,RESIZE-NAME
                   &quot;The array field corresponding to accessor ~x0 of ~
                            stobj ~x1 was not declared :resizable t.  ~
                            Therefore, it is illegal to resize this array.&quot;
                   (LIST (CONS #\0 &#39;,ACCESSOR-NAME) (CONS #\1 &#39;,VAR)))
       ,VAR)))
                (,ACCESSOR-NAME (i ,VAR)
                  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (,TOP-RECOG ,VAR)
                        (integerp i)
                        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> i)
                        (&lt; i (,LENGTH-NAME ,VAR)))
                      <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                  (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> i (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> ,N ,VAR)))
                (,UPDATER-NAME (i ,V-FORMAL ,VAR)
                  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (,TOP-RECOG ,VAR)
                        (integerp i)
                        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> i)
                        (&lt; i (,LENGTH-NAME ,VAR))
                        ,@(IF (EQ ETYPE-TERM T)
      NIL
      (LIST ETYPE-TERM)))
                      <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      ,@STOBJ-XARGS))
                  ,(LET ((FORM `(UPDATE-NTH-ARRAY ,N I ,V-FORMAL ,VAR)))
   (IF STOBJ-FORMAL
       `(NON-EXEC ,FORM)
       FORM))))
              (<a class="sym-link local-def" href="#def-defstobj-field-fns-axiomatic-defs" data-sym="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS" title="(defun defstobj-field-fns-axiomatic-defs (top-recog var n field-templates wrld)
  (cond ((endp field-templates) nil)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">defstobj-field-fns-axiomatic-defs</a> top-recog
                var
                (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">1</span>)
                (cdr field-templates)
                wrld)))
          ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> hashp stobj-tablep) (flet ((common-guard (hash-test var top-recog etype-term)
                 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> hash-test '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>) `(<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (,TOP-RECOG ,VAR)
                       (symbolp k)
                       ,@(AND ETYPE-TERM (NOT (EQ ETYPE-TERM T)) (LIST ETYPE-TERM))))
                   ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> hash-test '<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a>) `(<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (,TOP-RECOG ,VAR)
                       (<a class="sym-link system" href="axioms.html#def-eqlablep" data-sym="EQLABLEP">eqlablep</a> k)
                       ,@(AND ETYPE-TERM (NOT (EQ ETYPE-TERM T)) (LIST ETYPE-TERM))))
                   (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> etype-term (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> etype-term <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
                       `(<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (,TOP-RECOG ,VAR) ,ETYPE-TERM)
                       `(,TOP-RECOG ,VAR))))))
              (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> `(,(COND
  (HASHP
   `(,ACCESSOR-NAME (K ,VAR)
     (DECLARE
      (XARGS :GUARD ,(COMMON-GUARD HASH-TEST VAR TOP-RECOG NIL) :VERIFY-GUARDS
       T))
     ,(IF (NULL INIT)
          `(CDR (HONS-ASSOC-EQUAL K (NTH ,N ,VAR)))
          `(LET ((PAIR (HONS-ASSOC-EQUAL K (NTH ,N ,VAR))))
             (IF PAIR
                 (CDR PAIR)
                 ,INIT)))))
  (T
   `(,ACCESSOR-NAME (K ,VAR V)
     (DECLARE
      (XARGS :GUARD ,(COMMON-GUARD HASH-TEST VAR TOP-RECOG NIL) :VERIFY-GUARDS
       T))
     (LET ((PAIR (HONS-ASSOC-EQUAL K (NTH ,N ,VAR))))
       (IF PAIR
           (CDR PAIR)
           V))))) (,UPDATER-NAME (k ,V-FORMAL ,VAR)
                    (declare (xargs <span class="keyword">:guard</span> ,(COMMON-GUARD HASH-TEST VAR TOP-RECOG ETYPE-TERM)
                        <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                        ,@STOBJ-XARGS))
                    ,(LET ((FORM `(UPDATE-NTH ,N (CONS (CONS K ,V-FORMAL) (NTH ,N ,VAR)) ,VAR)))
   (IF STOBJ-FORMAL
       `(NON-EXEC ,FORM)
       FORM)))
                  (,BOUNDP-NAME (k ,VAR)
                    (declare (xargs <span class="keyword">:guard</span> ,(COMMON-GUARD HASH-TEST VAR TOP-RECOG NIL)
                        <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                    (consp (hons-assoc-equal k (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> ,N ,VAR))))
                  ,@(AND HASHP
       `((,ACCESSOR?-NAME (K ,VAR)
          (DECLARE
           (XARGS :GUARD ,(COMMON-GUARD HASH-TEST VAR TOP-RECOG NIL)
            :VERIFY-GUARDS T))
          (MV (,ACCESSOR-NAME K ,VAR) (,BOUNDP-NAME K ,VAR)))))
                  (,REMOVE-NAME (k ,VAR)
                    (declare (xargs <span class="keyword">:guard</span> ,(COMMON-GUARD HASH-TEST VAR TOP-RECOG NIL)
                        <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                    (<a class="sym-link system" href="axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> ,N (<a class="sym-link system" href="axioms.html#def-hons-remove-assoc" data-sym="HONS-REMOVE-ASSOC">hons-remove-assoc</a> k (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> ,N ,VAR)) ,VAR))
                  (,COUNT-NAME (,VAR)
                    (declare (xargs <span class="keyword">:guard</span> (,TOP-RECOG ,VAR)))
                    (<a class="sym-link system" href="axioms.html#def-count-keys" data-sym="COUNT-KEYS">count-keys</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> ,N ,VAR)))
                  (,CLEAR-NAME (,VAR)
                    (declare (xargs <span class="keyword">:guard</span> (,TOP-RECOG ,VAR)))
                    (<a class="sym-link system" href="axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> ,N nil ,VAR))
                  (,INIT-NAME (ht-size rehash-size rehash-threshold ,VAR)
                    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (,TOP-RECOG ,VAR)
                          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> ht-size) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ht-size))
                          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp rehash-size) (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">1</span> rehash-size))
                            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> rehash-size))
                          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp rehash-threshold)
                              (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> rehash-threshold)
                              (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> rehash-threshold <span class="number">1</span>))
                            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> rehash-threshold))))
                      (ignorable ht-size rehash-size rehash-threshold))
                    (<a class="sym-link system" href="axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> ,N nil ,VAR)))
                (<a class="sym-link local-def" href="#def-defstobj-field-fns-axiomatic-defs" data-sym="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS" title="(defun defstobj-field-fns-axiomatic-defs (top-recog var n field-templates wrld)
  (cond ((endp field-templates) nil)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">defstobj-field-fns-axiomatic-defs</a> top-recog
                  var
                  (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">1</span>)
                  (cdr field-templates)
                  wrld))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> `((,ACCESSOR-NAME (,VAR)
                 (declare (xargs <span class="keyword">:guard</span> (,TOP-RECOG ,VAR) <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                 (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> ,N ,VAR)) (,UPDATER-NAME (,V-FORMAL ,VAR)
                  (declare (xargs <span class="keyword">:guard</span> ,(IF (OR (EQ TYPE-TERM T) STOBJ-XARGS)
     `(,TOP-RECOG ,VAR)
     (ASSERT$ TYPE-TERM `(AND ,TYPE-TERM (,TOP-RECOG ,VAR))))
                      <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      ,@STOBJ-XARGS))
                  ,(IF STOBJ-FORMAL
     `(NON-EXEC (UPDATE-NTH ,N ,V-FORMAL ,VAR))
     `(UPDATE-NTH ,N ,V-FORMAL ,VAR))))
              (<a class="sym-link local-def" href="#def-defstobj-field-fns-axiomatic-defs" data-sym="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS" title="(defun defstobj-field-fns-axiomatic-defs (top-recog var n field-templates wrld)
  (cond ((endp field-templates) nil)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">defstobj-field-fns-axiomatic-defs</a> top-recog
                var
                (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">1</span>)
                (cdr field-templates)
                wrld))))))))</pre>
  </div>

<div class="form-block function" id="def-defstobj-axiomatic-init-fields" data-defines="DEFSTOBJ-AXIOMATIC-INIT-FIELDS" data-references="OR,CDR,MAKE-LIST,CONS,KWOTE,NON-EXEC,QUASIQUOTE,INIT,CADR,IF,GET-STOBJ-CREATOR,CREATOR,INIT0,CADDR,ARRAY-SIZE,STOBJ-TABLE,STOBJ-TABLEP,HASH-TABLE,HASHP,ARRAY,QUOTE,EQ,CONSP,AND,ARRAYP,DEFSTOBJ-FIELD-TEMPLATE,ACCESS,TYPE,CAR,FIELD-TEMPLATE,LET*,T,ENDP,COND,WRLD,FIELD-TEMPLATES,DEFUN" data-part-name="DEFSTOBJ-AXIOMATIC-INIT-FIELDS" data-part-args="WRLD,FIELD-TEMPLATES" data-part-body="OR,CDR,DEFSTOBJ-AXIOMATIC-INIT-FIELDS,MAKE-LIST,CONS,KWOTE,NON-EXEC,QUASIQUOTE,INIT,WRLD,CADR,IF,GET-STOBJ-CREATOR,CREATOR,INIT0,CADDR,ARRAY-SIZE,STOBJ-TABLE,STOBJ-TABLEP,HASH-TABLE,HASHP,ARRAY,QUOTE,EQ,CONSP,AND,ARRAYP,DEFSTOBJ-FIELD-TEMPLATE,ACCESS,TYPE,CAR,FIELD-TEMPLATE,LET*,T,FIELD-TEMPLATES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSTOBJ-AXIOMATIC-INIT-FIELDS">defstobj-axiomatic-init-fields</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defstobj-axiomatic-init-fields" data-sym="DEFSTOBJ-AXIOMATIC-INIT-FIELDS" title="(defun defstobj-axiomatic-init-fields (field-templates wrld)
  (cond ((endp field-templates) nil)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">defstobj-axiomatic-init-fields</a>
  (field-templates wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> field-templates) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((field-template (car field-templates)) (type (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:type</span>))
          (arrayp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'array)))
          (hashp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'hash-table)))
          (stobj-tablep (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'stobj-table)))
          (array-size (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> arrayp (car (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> type))))
          (init0 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:init</span>))
          (creator (<a class="sym-link system" href="basis-a.html#def-get-stobj-creator" data-sym="GET-STOBJ-CREATOR">get-stobj-creator</a> (if arrayp
                (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> type)
                type)
              wrld))
          (init (if creator
              `(<a class="sym-link system" href="axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> (,CREATOR))
              (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> init0))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (arrayp (cons `(<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> ,ARRAY-SIZE <span class="keyword">:initial-element</span> ,INIT)
              (<a class="sym-link local-def" href="#def-defstobj-axiomatic-init-fields" data-sym="DEFSTOBJ-AXIOMATIC-INIT-FIELDS" title="(defun defstobj-axiomatic-init-fields (field-templates wrld)
  (cond ((endp field-templates) nil)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">defstobj-axiomatic-init-fields</a> (cdr field-templates) wrld)))
          ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> hashp stobj-tablep) (cons nil
              (<a class="sym-link local-def" href="#def-defstobj-axiomatic-init-fields" data-sym="DEFSTOBJ-AXIOMATIC-INIT-FIELDS" title="(defun defstobj-axiomatic-init-fields (field-templates wrld)
  (cond ((endp field-templates) nil)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">defstobj-axiomatic-init-fields</a> (cdr field-templates) wrld)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons init
              (<a class="sym-link local-def" href="#def-defstobj-axiomatic-init-fields" data-sym="DEFSTOBJ-AXIOMATIC-INIT-FIELDS" title="(defun defstobj-axiomatic-init-fields (field-templates wrld)
  (cond ((endp field-templates) nil)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">defstobj-axiomatic-init-fields</a> (cdr field-templates) wrld))))))))</pre>
  </div>

<div class="form-block function" id="def-defstobj-creator-def" data-defines="DEFSTOBJ-CREATOR-DEF" data-references="LIST,T,XARGS,DECLARE,QUASIQUOTE,WRLD,FIELD-TEMPLATES,CREATOR-NAME,DEFUN" data-used-by="DEFSTOBJ-AXIOMATIC-DEFS" data-part-name="DEFSTOBJ-CREATOR-DEF" data-part-args="WRLD,FIELD-TEMPLATES,CREATOR-NAME" data-part-body="LIST,T,XARGS,DECLARE,QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSTOBJ-CREATOR-DEF">defstobj-creator-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defstobj-creator-def" data-sym="DEFSTOBJ-CREATOR-DEF" title="(defun defstobj-creator-def (creator-name field-templates wrld)
  `(,creator-name nil (declare (xargs :guard t :verify-guards t))
    (list ,@(defstobj-axiomatic-init-fields field-templates wrld))))">defstobj-creator-def</a>
  (creator-name field-templates wrld)
  `(,CREATOR-NAME nil
    (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:verify-guards</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ,@(DEFSTOBJ-AXIOMATIC-INIT-FIELDS FIELD-TEMPLATES WRLD))))</pre>
  </div>

<div class="form-block function" id="def-defstobj-axiomatic-defs" data-defines="DEFSTOBJ-AXIOMATIC-DEFS" data-references="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS,DEFSTOBJ-CREATOR-DEF,LIST*,DEFSTOBJ-COMPONENT-RECOGNIZER-AXIOMATIC-DEFS,APPEND,DEFSTOBJ-TEMPLATE,ACCESS,FIELD-TEMPLATES,LET,WRLD,TEMPLATE,NAME,DEFUN" data-used-by="DEFSTOBJ-FN" data-part-name="DEFSTOBJ-AXIOMATIC-DEFS" data-part-args="WRLD,TEMPLATE,NAME" data-part-body="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS,DEFSTOBJ-CREATOR-DEF,LIST*,WRLD,NAME,DEFSTOBJ-COMPONENT-RECOGNIZER-AXIOMATIC-DEFS,APPEND,TEMPLATE,DEFSTOBJ-TEMPLATE,ACCESS,FIELD-TEMPLATES,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSTOBJ-AXIOMATIC-DEFS">defstobj-axiomatic-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defstobj-axiomatic-defs" data-sym="DEFSTOBJ-AXIOMATIC-DEFS" title="(defun defstobj-axiomatic-defs (name template wrld)
  (let ((field-templates (access defstobj-template template :field-templates)))
    (append
     (defstobj-component-recognizer-axiomatic-defs name template
                                                   field-templates wrld)
...">defstobj-axiomatic-defs</a>
  (name template wrld)
  (let ((field-templates (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:field-templates</span>)))
    (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="basis-a.html#def-defstobj-component-recognizer-axiomatic-defs" data-sym="DEFSTOBJ-COMPONENT-RECOGNIZER-AXIOMATIC-DEFS">defstobj-component-recognizer-axiomatic-defs</a> name
        template
        field-templates
        wrld)
      (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link local-def" href="#def-defstobj-creator-def" data-sym="DEFSTOBJ-CREATOR-DEF" title="(defun defstobj-creator-def (creator-name field-templates wrld)
  `(,creator-name nil (declare (xargs :guard t :verify-guards t))
    (list ,@(defstobj-axiomatic-init-fields field-templates wrld))))">defstobj-creator-def</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:creator</span>)
          field-templates
          wrld)
        (<a class="sym-link local-def" href="#def-defstobj-field-fns-axiomatic-defs" data-sym="DEFSTOBJ-FIELD-FNS-AXIOMATIC-DEFS" title="(defun defstobj-field-fns-axiomatic-defs (top-recog var n field-templates wrld)
  (cond ((endp field-templates) nil)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">defstobj-field-fns-axiomatic-defs</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:recognizer</span>)
          name
          <span class="number">0</span>
          field-templates
          wrld)))))</pre>
  </div>

<div class="form-block function" id="def-put-stobjs-in-and-outs1" data-defines="PUT-STOBJS-IN-AND-OUTS1" data-references="LET,*STOBJ-TABLE-STOBJ*,STOBJ-HASH-TABLE-ELEMENT-TYPE,STOBJ-TABLE,HASH-TABLE,MEMBER-EQ,PUTPROP-UNLESS,STOBJS-OUT,LIST,STOBJS-IN,PUTPROP,STOBJP,DOUBLE-FLOAT,IF,STOBJ-FLG,CADR,ETYPE,ARRAY,QUOTE,EQ,CONSP,AND,CDR,INIT-FN,CLEAR-FN,COUNT-FN,REMOVE-FN,ACCESSOR?-FN,NTH,BOUNDP-FN,OTHER,RESIZE-FN,LENGTH-FN,UPD-FN,ACC-FN,DEFSTOBJ-FIELD-TEMPLATE,ACCESS,TYPE,CAR,FIELD-TEMPLATE,LET*,T,ENDP,COND,WRLD,FIELD-TEMPLATES,NAME,DEFUN" data-used-by="PUT-STOBJS-IN-AND-OUTS" data-part-name="PUT-STOBJS-IN-AND-OUTS1" data-part-args="WRLD,FIELD-TEMPLATES,NAME" data-part-body="LET,*STOBJ-TABLE-STOBJ*,STOBJ-HASH-TABLE-ELEMENT-TYPE,STOBJ-TABLE,HASH-TABLE,MEMBER-EQ,PUTPROP-UNLESS,STOBJS-OUT,LIST,STOBJS-IN,PUTPROP,STOBJP,DOUBLE-FLOAT,IF,STOBJ-FLG,CADR,ETYPE,ARRAY,QUOTE,EQ,CONSP,AND,CDR,NAME,PUT-STOBJS-IN-AND-OUTS1,INIT-FN,CLEAR-FN,COUNT-FN,REMOVE-FN,ACCESSOR?-FN,NTH,BOUNDP-FN,OTHER,RESIZE-FN,LENGTH-FN,UPD-FN,ACC-FN,DEFSTOBJ-FIELD-TEMPLATE,ACCESS,TYPE,CAR,FIELD-TEMPLATE,LET*,T,WRLD,FIELD-TEMPLATES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-STOBJS-IN-AND-OUTS1">put-stobjs-in-and-outs1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-stobjs-in-and-outs1" data-sym="PUT-STOBJS-IN-AND-OUTS1" title="(defun put-stobjs-in-and-outs1 (name field-templates wrld)
  (cond ((endp field-templates) wrld)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">put-stobjs-in-and-outs1</a>
  (name field-templates wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> field-templates) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((field-template (car field-templates)) (type (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:type</span>))
          (acc-fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template
              field-template
              <span class="keyword">:accessor-name</span>))
          (upd-fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template
              field-template
              <span class="keyword">:updater-name</span>))
          (length-fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:length-name</span>))
          (resize-fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:resize-name</span>))
          (other (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:other</span>))
          (boundp-fn (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> other))
          (accessor?-fn (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> other))
          (remove-fn (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> other))
          (<a class="sym-link system" href="axioms.html#def-count-fn" data-sym="COUNT-FN">count-fn</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> other))
          (clear-fn (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> other))
          (init-fn (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> other)))
        (<a class="sym-link local-def" href="#def-put-stobjs-in-and-outs1" data-sym="PUT-STOBJS-IN-AND-OUTS1" title="(defun put-stobjs-in-and-outs1 (name field-templates wrld)
  (cond ((endp field-templates) wrld)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">put-stobjs-in-and-outs1</a> name
          (cdr field-templates)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'array)) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((etype (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> type)) (stobj-flg (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> etype 'double-float)
                      <span class="keyword">:df</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> etype <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) etype))))
                (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> length-fn
                  '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
                  (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> resize-fn
                    '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil name)
                    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> resize-fn
                      '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
                      (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> acc-fn
                        '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil name)
                        (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> acc-fn
                          '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> stobj-flg)
                          '(nil)
                          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> upd-fn
                            '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil stobj-flg name)
                            (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> upd-fn '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name) wrld)))))))))
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp type)
               (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car type) '(hash-table stobj-table))) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((etype (<a class="sym-link system" href="basis-a.html#def-stobj-hash-table-element-type" data-sym="STOBJ-HASH-TABLE-ELEMENT-TYPE">stobj-hash-table-element-type</a> type)) (stobj-flg (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> etype 'double-float)
                      <span class="keyword">:df</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> etype <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) etype))))
                (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> init-fn
                  '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil nil nil name)
                  (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> init-fn
                    '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
                    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> clear-fn
                      '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
                      (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> clear-fn
                        '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
                        (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> <a class="sym-link system" href="axioms.html#def-count-fn" data-sym="COUNT-FN">count-fn</a>
                          '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
                          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> remove-fn
                            '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil name)
                            (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> remove-fn
                              '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
                              (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> boundp-fn
                                '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil name)
                                (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> acc-fn
                                  '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                                  (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'hash-table)
                                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil name)
                                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil name *stobj-table-stobj*))
                                  (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> acc-fn
                                    '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> stobj-flg)
                                    '(nil)
                                    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> upd-fn
                                      '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                                      (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'stobj-table)
                                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil *stobj-table-stobj* name)
                                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil stobj-flg name))
                                      (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> upd-fn
                                        '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
                                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car type) 'hash-table)
                                          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> accessor?-fn '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil name) wrld)
                                          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> acc-fn '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> *stobj-table-stobj*) wrld))))))))))))))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((stobj-flg (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type 'double-float)
                     <span class="keyword">:df</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> type <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) type))))
                (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> acc-fn
                  '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
                  (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> acc-fn
                    '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> stobj-flg)
                    '(nil)
                    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> upd-fn
                      '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> stobj-flg name)
                      (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> upd-fn '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name) wrld))))))))))))</pre>
  </div>

<div class="form-block function" id="def-put-stobjs-in-and-outs" data-defines="PUT-STOBJS-IN-AND-OUTS" data-references="STOBJS-IN,LIST,STOBJS-OUT,QUOTE,PUTPROP,PUT-STOBJS-IN-AND-OUTS1,FIELD-TEMPLATES,CREATOR-NAME,DEFSTOBJ-TEMPLATE,ACCESS,RECOG-NAME,LET,WRLD,TEMPLATE,NAME,DEFUN" data-used-by="DEFSTOBJ-FN" data-part-name="PUT-STOBJS-IN-AND-OUTS" data-part-args="WRLD,TEMPLATE,NAME" data-part-body="WRLD,STOBJS-IN,LIST,STOBJS-OUT,QUOTE,PUTPROP,NAME,PUT-STOBJS-IN-AND-OUTS1,FIELD-TEMPLATES,CREATOR-NAME,TEMPLATE,DEFSTOBJ-TEMPLATE,ACCESS,RECOG-NAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-STOBJS-IN-AND-OUTS">put-stobjs-in-and-outs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-stobjs-in-and-outs" data-sym="PUT-STOBJS-IN-AND-OUTS" title="(defun put-stobjs-in-and-outs (name template wrld)
  (let ((recog-name (access defstobj-template template :recognizer))
        (creator-name (access defstobj-template template :creator))
        (field-templates (access defstobj-template template :field-templates)))
    (put-stobjs-in-and-outs1 name field-templates
...">put-stobjs-in-and-outs</a>
  (name template wrld)
  (let ((recog-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:recognizer</span>)) (creator-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:creator</span>))
      (field-templates (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:field-templates</span>)))
    (<a class="sym-link local-def" href="#def-put-stobjs-in-and-outs1" data-sym="PUT-STOBJS-IN-AND-OUTS1" title="(defun put-stobjs-in-and-outs1 (name field-templates wrld)
  (cond ((endp field-templates) wrld)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type))
...">put-stobjs-in-and-outs1</a> name
      field-templates
      (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> creator-name
        '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
        (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> recog-name '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name) wrld)))))</pre>
  </div>

<div class="form-block function" id="def-defconst-name-alist" data-defines="DEFCONST-NAME-ALIST" data-references="1+,CDR,CAR,DEFCONST-NAME,CONS,ENDP,IF,N,LST,DEFUN" data-used-by="ACCESSOR-ARRAY" data-part-name="DEFCONST-NAME-ALIST" data-part-args="N,LST" data-part-body="1+,CDR,DEFCONST-NAME-ALIST,CAR,DEFCONST-NAME,N,CONS,LST,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFCONST-NAME-ALIST">defconst-name-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defconst-name-alist" data-sym="DEFCONST-NAME-ALIST" title="(defun defconst-name-alist (lst n)
  (if (endp lst)
      nil
      (cons (cons n (defconst-name (car lst)))
            (defconst-name-alist (cdr lst) (1+ n)))))">defconst-name-alist</a>
  (lst n)
  (if (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst)
    nil
    (cons (cons n (<a class="sym-link system" href="basis-a.html#def-defconst-name" data-sym="DEFCONST-NAME">defconst-name</a> (car lst)))
      (<a class="sym-link local-def" href="#def-defconst-name-alist" data-sym="DEFCONST-NAME-ALIST" title="(defun defconst-name-alist (lst n)
  (if (endp lst)
      nil
      (cons (cons n (defconst-name (car lst)))
            (defconst-name-alist (cdr lst) (1+ n)))))">defconst-name-alist</a> (cdr lst) (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> n)))))</pre>
  </div>

<div class="form-block function" id="def-accessor-array" data-defines="ACCESSOR-ARRAY" data-references="DEFCONST-NAME-ALIST,QUASIQUOTE,CONS,COMPRESS1,LENGTH,LEN,LET,FIELD-NAMES,NAME,DEFUN" data-used-by="DEFSTOBJ-FN" data-part-name="ACCESSOR-ARRAY" data-part-args="FIELD-NAMES,NAME" data-part-body="DEFCONST-NAME-ALIST,QUASIQUOTE,CONS,NAME,COMPRESS1,FIELD-NAMES,LENGTH,LEN,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-ARRAY">accessor-array</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-array" data-sym="ACCESSOR-ARRAY" title="(defun accessor-array (name field-names)
  (let ((len (length field-names)))
    (compress1 name
               (cons
                `(:header :dimensions (,len) :maximum-length ,(+ 1 len)
...">accessor-array</a>
  (name field-names)
  (let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> field-names)))
    (<a class="sym-link system" href="axioms.html#def-compress1" data-sym="COMPRESS1">compress1</a> name
      (cons `(<span class="keyword">:header</span> <span class="keyword">:dimensions</span> (,LEN)
          <span class="keyword">:maximum-length</span> ,(+ 1 LEN)
          <span class="keyword">:default</span> nil
          <span class="keyword">:name</span> ,NAME
          <span class="keyword">:order</span> <span class="keyword">:none</span>)
        (<a class="sym-link local-def" href="#def-defconst-name-alist" data-sym="DEFCONST-NAME-ALIST" title="(defun defconst-name-alist (lst n)
  (if (endp lst)
      nil
      (cons (cons n (defconst-name (car lst)))
            (defconst-name-alist (cdr lst) (1+ n)))))">defconst-name-alist</a> field-names <span class="number">0</span>)))))</pre>
  </div>

<div class="form-block function" id="def-put-defstobj-invariant-risk" data-defines="PUT-DEFSTOBJ-INVARIANT-RISK" data-references="INVARIANT-RISK,QUOTE,PUTPROP,UPDATER,LET,EQ,CDR,DEFSTOBJ-FIELD-TEMPLATE,ACCESS,TYPE,CAR,FIELD-TEMPLATE,LET*,T,ENDP,COND,WRLD,FIELD-TEMPLATES,DEFUN" data-used-by="DEFSTOBJ-FN" data-part-name="PUT-DEFSTOBJ-INVARIANT-RISK" data-part-args="WRLD,FIELD-TEMPLATES" data-part-body="INVARIANT-RISK,QUOTE,PUTPROP,UPDATER,LET,EQ,CDR,PUT-DEFSTOBJ-INVARIANT-RISK,DEFSTOBJ-FIELD-TEMPLATE,ACCESS,TYPE,CAR,FIELD-TEMPLATE,LET*,T,WRLD,FIELD-TEMPLATES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFSTOBJ-INVARIANT-RISK">put-defstobj-invariant-risk</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defstobj-invariant-risk" data-sym="PUT-DEFSTOBJ-INVARIANT-RISK" title="(defun put-defstobj-invariant-risk (field-templates wrld)
  (cond ((endp field-templates) wrld)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type)))
...">put-defstobj-invariant-risk</a>
  (field-templates wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> field-templates) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((field-template (car field-templates)) (type (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template field-template <span class="keyword">:type</span>)))
        (<a class="sym-link local-def" href="#def-put-defstobj-invariant-risk" data-sym="PUT-DEFSTOBJ-INVARIANT-RISK" title="(defun put-defstobj-invariant-risk (field-templates wrld)
  (cond ((endp field-templates) wrld)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type)))
...">put-defstobj-invariant-risk</a> (cdr field-templates)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) wrld)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((updater (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-field-template
                     field-template
                     <span class="keyword">:updater-name</span>)))
                (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> updater 'invariant-risk updater wrld)))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-defstobj-attachments" data-defines="CHK-DEFSTOBJ-ATTACHMENTS" data-references="VALUE,T,SOFT,ER,COND,ATTACHED-FNS,BAD-ATTACHED-FNS,LET,STATE,WRLD,CTX,RECOG-ANCS,RECOG-NAME,NAME,DEFUN" data-used-by="DEFSTOBJ-FN" data-part-name="CHK-DEFSTOBJ-ATTACHMENTS" data-part-args="STATE,WRLD,CTX,RECOG-ANCS,RECOG-NAME,NAME" data-part-body="VALUE,T,RECOG-NAME,NAME,CTX,SOFT,ER,COND,WRLD,RECOG-ANCS,ATTACHED-FNS,BAD-ATTACHED-FNS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFSTOBJ-ATTACHMENTS">chk-defstobj-attachments</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defstobj-attachments" data-sym="CHK-DEFSTOBJ-ATTACHMENTS" title="(defun chk-defstobj-attachments (name recog-name recog-ancs ctx wrld state)
  (let ((bad-attached-fns (attached-fns recog-ancs wrld)))
    (cond
     (bad-attached-fns
      (er soft ctx
...">chk-defstobj-attachments</a>
  (name recog-name recog-ancs ctx wrld state)
  (let ((bad-attached-fns (<a class="sym-link system" href="defthm.html#def-attached-fns" data-sym="ATTACHED-FNS">attached-fns</a> recog-ancs wrld)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-attached-fns (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The defstobj event for ~x0 is illegal because the stobj recognizer ~
           ~x1 would depend on the function~#2~[~/s~] ~&amp;2, which ~#2~[has an ~
           attachment~/have attachments~].  See :DOC ~
           stobj-attachment-restrictions."</span>
          name
          recog-name
          bad-attached-fns))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))</pre>
  </div>

<div class="form-block function" id="def-defstobj-fn" data-defines="DEFSTOBJ-FN" data-references="INSTALL-EVENT,DEFSTOBJ-REDUNDANT-RAW-LISP-DISCRIMINATOR-VALUE,CONS,DISCRIMINATOR,ACCESSOR-ARRAY,ACCESSOR-NAMES,STOBJ-LIVE-VAR,STOBJ-CONSTANT,STOBJ-FUNCTION,PUTPROP-X-LST1,SET-DIFFERENCE-EQ,STOBJ-PROPERTY,MAKE,STOBJ,PUT-STOBJS-IN-AND-OUTS,SYMBOL-CLASS,PUTPROP-UNLESS,PUTPROP,PUT-DEFSTOBJ-INVARIANT-RISK,MARK-ATTACHMENT-DISALLOWED,WRLD3,AND,CONGRUENT-STOBJ-REP,CHK-DEFSTOBJ-ATTACHMENTS,CANONICAL-ANCESTORS-LST,RECOG-ANCS,WRLD2,CERT-DATA,F-GET-GLOBAL,DISABLE,IN-THEORY,SET-INHIBIT-WARNINGS,ENCAPSULATE,QUASIQUOTE,PAIRLIS-X1,APPEND,LIST,CURRENT-PACKAGE,LD-SKIP-PROOFSP,ACL2-DEFAULTS-TABLE,TABLE-ALIST,PROCESS-EMBEDDED-EVENTS,EXTENSION,SET-W,PPROGN,REVERT-WORLD-ON-ERROR,SET-DIFFERENCE-EQUAL,HARD,ER,VALUE,SET-EQUALP-EQUAL,ER-PROGN,NON-EXECUTABLE,NON-MEMOIZABLE,CONGRUENT-TO,THE-LIVE-VAR,STRIP-CARS,NAMES,CREATOR-NAME,RECOG-NAME,DEFSTOBJ-RAW-DEFS,RAW-DEF-LST,DEFSTOBJ-AXIOMATIC-DEFS,AX-DEF-LST,STRIP-CADRS,FIELD-CONST-NAMES,DEFSTOBJ-DEFCONSTS,DEFCONSTS,STRIP-ACCESSOR-NAMES,FIELD-NAMES,ACCESS,FIELD-TEMPLATES,DEFSTOBJ-TEMPLATE,TEMPLATE,LET*,ENFORCE-REDUNDANCY,T,STOP-REDUNDANT-EVENT,REDUNDANT,EQ,COND,CTX,CHK-ACCEPTABLE-DEFSTOBJ,WRLD1,ER-LET*,W,WRLD0,DEFSTOBJ,QUOTE,LIST*,OR,LET,MSG,WITH-CTX-SUMMARIZED,EVENT-FORM,STATE,ARGS,NAME,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="DEFSTOBJ-FN" data-part-args="EVENT-FORM,STATE,ARGS,NAME" data-part-body="INSTALL-EVENT,DEFSTOBJ-REDUNDANT-RAW-LISP-DISCRIMINATOR-VALUE,CONS,DISCRIMINATOR,ACCESSOR-ARRAY,ACCESSOR-NAMES,STOBJ-LIVE-VAR,STOBJ-CONSTANT,STOBJ-FUNCTION,PUTPROP-X-LST1,SET-DIFFERENCE-EQ,STOBJ-PROPERTY,MAKE,STOBJ,PUT-STOBJS-IN-AND-OUTS,SYMBOL-CLASS,PUTPROP-UNLESS,PUTPROP,PUT-DEFSTOBJ-INVARIANT-RISK,MARK-ATTACHMENT-DISALLOWED,WRLD3,AND,CONGRUENT-STOBJ-REP,CHK-DEFSTOBJ-ATTACHMENTS,CANONICAL-ANCESTORS-LST,RECOG-ANCS,WRLD2,CERT-DATA,F-GET-GLOBAL,DISABLE,IN-THEORY,SET-INHIBIT-WARNINGS,ENCAPSULATE,QUASIQUOTE,DEFUN,PAIRLIS-X1,APPEND,LIST,CURRENT-PACKAGE,LD-SKIP-PROOFSP,ACL2-DEFAULTS-TABLE,TABLE-ALIST,PROCESS-EMBEDDED-EVENTS,EXTENSION,SET-W,PPROGN,REVERT-WORLD-ON-ERROR,SET-DIFFERENCE-EQUAL,HARD,ER,VALUE,SET-EQUALP-EQUAL,ER-PROGN,NON-EXECUTABLE,NON-MEMOIZABLE,CONGRUENT-TO,THE-LIVE-VAR,STRIP-CARS,NAMES,CREATOR-NAME,RECOG-NAME,DEFSTOBJ-RAW-DEFS,RAW-DEF-LST,DEFSTOBJ-AXIOMATIC-DEFS,AX-DEF-LST,STRIP-CADRS,FIELD-CONST-NAMES,DEFSTOBJ-DEFCONSTS,DEFCONSTS,STRIP-ACCESSOR-NAMES,FIELD-NAMES,ACCESS,FIELD-TEMPLATES,DEFSTOBJ-TEMPLATE,TEMPLATE,LET*,ENFORCE-REDUNDANCY,T,STOP-REDUNDANT-EVENT,REDUNDANT,EQ,COND,CTX,CHK-ACCEPTABLE-DEFSTOBJ,WRLD1,ER-LET*,STATE,W,WRLD0,ARGS,DEFSTOBJ,QUOTE,LIST*,OR,EVENT-FORM,LET,NAME,MSG,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSTOBJ-FN">defstobj-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defstobj-fn" data-sym="DEFSTOBJ-FN" title="(defun defstobj-fn (name args state event-form)
  (with-ctx-summarized (msg &quot;( DEFSTOBJ ~x0 ...)&quot; name)
                       (let ((event-form
                              (or event-form (list* &#39;defstobj name args)))
                             (wrld0 (w state)))
...">defstobj-fn</a>
  (name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> state event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFSTOBJ ~x0 ...)"</span> name)
    (let ((event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))) (wrld0 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld1 (<a class="sym-link local-def" href="#def-chk-acceptable-defstobj" data-sym="CHK-ACCEPTABLE-DEFSTOBJ" title="(defun chk-acceptable-defstobj (name args ctx wrld state)
  (cond
   ((not (symbolp name))
    (er soft ctx
        &quot;The first argument of a DEFSTOBJ event must be a symbol.  Thus, ~x0 ~
...">chk-acceptable-defstobj</a> name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ctx wrld0 state)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> wrld1 'redundant) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state <span class="keyword">:name</span> name))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-enforce-redundancy" data-sym="ENFORCE-REDUNDANCY">enforce-redundancy</a> event-form
              ctx
              wrld0
              (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((template (<a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> wrld1)) (field-templates (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:field-templates</span>))
                  (field-names (<a class="sym-link system" href="basis-a.html#def-strip-accessor-names" data-sym="STRIP-ACCESSOR-NAMES">strip-accessor-names</a> field-templates))
                  (defconsts (<a class="sym-link system" href="basis-a.html#def-defstobj-defconsts" data-sym="DEFSTOBJ-DEFCONSTS">defstobj-defconsts</a> field-names <span class="number">0</span>))
                  (field-const-names (<a class="sym-link system" href="axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> defconsts))
                  (ax-def-lst (<a class="sym-link local-def" href="#def-defstobj-axiomatic-defs" data-sym="DEFSTOBJ-AXIOMATIC-DEFS" title="(defun defstobj-axiomatic-defs (name template wrld)
  (let ((field-templates (access defstobj-template template :field-templates)))
    (append
     (defstobj-component-recognizer-axiomatic-defs name template
                                                   field-templates wrld)
...">defstobj-axiomatic-defs</a> name template wrld1))
                  (raw-def-lst (<a class="sym-link system" href="basis-a.html#def-defstobj-raw-defs" data-sym="DEFSTOBJ-RAW-DEFS">defstobj-raw-defs</a> name template nil wrld1))
                  (recog-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:recognizer</span>))
                  (creator-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:creator</span>))
                  (names (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> ax-def-lst))
                  (<a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a> (<a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a> name))
                  (congruent-to (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:congruent-to</span>))
                  (non-memoizable (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:non-memoizable</span>))
                  (non-executable (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-a.html#def-defstobj-template" data-sym="DEFSTOBJ-TEMPLATE">defstobj-template</a> template <span class="keyword">:non-executable</span>)))
                (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-set-equalp-equal" data-sym="SET-EQUALP-EQUAL">set-equalp-equal</a> names (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> raw-def-lst)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                          ctx
                          <span class="string">"Defstobj-axiomatic-defs and defstobj-raw-defs are ~
                            out of sync!  They should each define the same ~
                            set of names.  Here are the functions with ~
                            axiomatic defs that have no raw defs:  ~x0.  And ~
                            here are the functions with raw defs but no ~
                            axiomatic ones:  ~x1."</span>
                          (<a class="sym-link system" href="axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> names (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> raw-def-lst))
                          (<a class="sym-link system" href="axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> raw-def-lst) names)))))
                  (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension wrld1 state)
                      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-process-embedded-events" data-sym="PROCESS-EMBEDDED-EVENTS" title="(defun process-embedded-events
       (caller acl2-defaults-table skip-proofsp pkg ee-entry ev-lst index
        make-event-chk cert-data ctx state)
  (let* ((wrld1 (w state))
         (kpa (known-package-alist state))
...">process-embedded-events</a> '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>
                          (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld1)
                          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                          (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> name names)
                          (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-pairlis-x1" data-sym="PAIRLIS-X1">pairlis-x1</a> '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> ax-def-lst)
                            defconsts
                            `((<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
                               (<a class="sym-link system" href="axioms.html#def-set-inhibit-warnings" data-sym="SET-INHIBIT-WARNINGS">set-inhibit-warnings</a> <span class="string">"theory"</span>)
                               (<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link local-def" href="#def-disable" data-sym="DISABLE" title="(defmacro disable (&amp;rest rst)
  (list &#39;set-difference-theories &#39;(current-theory :here) (kwote rst)))">disable</a> (<span class="keyword">:executable-counterpart</span> ,CREATOR-NAME))))))
                          <span class="number">0</span>
                          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                          (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'cert-data state)
                          ctx
                          state)
                        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld2 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (recog-ancs (<a class="sym-link system" href="defthm.html#def-canonical-ancestors-lst" data-sym="CANONICAL-ANCESTORS-LST">canonical-ancestors-lst</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> recog-name) wrld2)))
                          (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-defstobj-attachments" data-sym="CHK-DEFSTOBJ-ATTACHMENTS" title="(defun chk-defstobj-attachments (name recog-name recog-ancs ctx wrld state)
  (let ((bad-attached-fns (attached-fns recog-ancs wrld)))
    (cond
     (bad-attached-fns
      (er soft ctx
...">chk-defstobj-attachments</a> name
                              recog-name
                              recog-ancs
                              ctx
                              wrld2
                              state)
                            (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to (<a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a> congruent-to wrld2))) (wrld3 (<a class="sym-link system" href="defthm.html#def-mark-attachment-disallowed" data-sym="MARK-ATTACHMENT-DISALLOWED">mark-attachment-disallowed</a> recog-ancs
                                    name
                                    <span class="keyword">:defstobj</span> (<a class="sym-link local-def" href="#def-put-defstobj-invariant-risk" data-sym="PUT-DEFSTOBJ-INVARIANT-RISK" title="(defun put-defstobj-invariant-risk (field-templates wrld)
  (cond ((endp field-templates) wrld)
        (t
         (let* ((field-template (car field-templates))
                (type (access defstobj-field-template field-template :type)))
...">put-defstobj-invariant-risk</a> field-templates
                                      (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
                                        '<a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a>
                                        <a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a>
                                        (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> name
                                          'non-memoizable
                                          non-memoizable
                                          nil
                                          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
                                            '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
                                            <span class="keyword">:common-lisp-compliant</span> (<a class="sym-link local-def" href="#def-put-stobjs-in-and-outs" data-sym="PUT-STOBJS-IN-AND-OUTS" title="(defun put-stobjs-in-and-outs (name template wrld)
  (let ((recog-name (access defstobj-template template :recognizer))
        (creator-name (access defstobj-template template :creator))
        (field-templates (access defstobj-template template :field-templates)))
    (put-stobjs-in-and-outs1 name field-templates
...">put-stobjs-in-and-outs</a> name
                                              template
                                              (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
                                                'stobj
                                                (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> stobj-property
                                                  <span class="keyword">:live-var</span> <a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a>
                                                  <span class="keyword">:recognizer</span> recog-name
                                                  <span class="keyword">:creator</span> creator-name
                                                  <span class="keyword">:names</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> names (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> recog-name creator-name))
                                                    field-const-names))
                                                (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> names
                                                  'stobj-function
                                                  name
                                                  (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> field-const-names
                                                    'stobj-constant
                                                    name
                                                    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> <a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a>
                                                      'stobj-live-var
                                                      name
                                                      (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> <a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a>
                                                        '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
                                                        <span class="keyword">:common-lisp-compliant</span> (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
                                                          'accessor-names
                                                          (<a class="sym-link local-def" href="#def-accessor-array" data-sym="ACCESSOR-ARRAY" title="(defun accessor-array (name field-names)
  (let ((len (length field-names)))
    (compress1 name
               (cons
                `(:header :dimensions (,len) :maximum-length ,(+ 1 len)
...">accessor-array</a> name field-names)
                                                          wrld2)))))))))))
                                    wrld2))
                                (discriminator (cons '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>
                                    (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> defstobj-redundant-raw-lisp-discriminator-value
                                      <span class="keyword">:event</span> event-form
                                      <span class="keyword">:recognizer</span> recog-name
                                      <span class="keyword">:creator</span> creator-name
                                      <span class="keyword">:congruent-stobj-rep</span> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a> name)
                                      <span class="keyword">:non-memoizable</span> non-memoizable
                                      <span class="keyword">:non-executable</span> non-executable))))
                              (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> name
                                event-form
                                '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>
                                (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> name <a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a> names)
                                nil
                                `(<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> ,NAME
                                  ,THE-LIVE-VAR
                                  ,(DEFSTOBJ-RAW-INIT TEMPLATE)
                                  ,RAW-DEF-LST
                                  ,DISCRIMINATOR
                                  ,AX-DEF-LST
                                  ,EVENT-FORM)
                                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                                ctx
                                wrld3
                                state))))))))))))))))</pre>
  </div>

<div class="form-block macro" id="def-defabsstobj" data-defines="DEFABSSTOBJ" data-references="STATE,DEFABSSTOBJ-FN,QUOTE,LIST,BOOLEANP,SYMBOLP,AND,XARGS,DECLARE,MISSING-ONLY,ATTACHABLE,NON-EXECUTABLE,CONGRUENT-TO,PROTECT-DEFAULT,EXPORTS,CORR-FN-EXISTS,CORR-FN,CREATOR,RECOGNIZER,FOUNDATION,&KEY,NAME,EVENT-FORM,&WHOLE,DEFMACRO" data-used-by="MEMOIZE-TABLE-CHK,DEFABSSTOBJ-FN1,CHK-ACCEPTABLE-DEFABSSTOBJ,SIMPLE-TRANSLATE-ABSSTOBJ-FIELDS,COMPRESS-CLTL-COMMAND-STACK-REC,FIND-FIRST-NON-LOCAL-NAME,PROCESS-EMBEDDED-EVENTS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ">defabsstobj</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a>
  (&amp;whole event-form
    name
    &amp;key
    foundation
    recognizer
    creator
    corr-fn
    corr-fn-exists
    exports
    protect-default
    congruent-to
    non-executable
    attachable
    missing-only)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp name) (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> protect-default))))
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-defabsstobj-fn" data-sym="DEFABSSTOBJ-FN" title="(defun defabsstobj-fn
       (st-name st$c recognizer creator corr-fn corr-fn-exists exports
        protect-default congruent-to non-executable attachable missing-only
        state event-form)
  (with-ctx-summarized (msg &quot;( DEFABSSTOBJ ~x0 ...)&quot; st-name)
...">defabsstobj-fn</a>
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote foundation)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote recognizer)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote creator)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote corr-fn)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote corr-fn-exists)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote exports)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote protect-default)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote congruent-to)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote non-executable)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote attachable)
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote missing-only)
    'state
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))</pre>
  </div>

<div class="form-block function" id="def-concrete-stobj" data-defines="CONCRETE-STOBJ" data-references="OR,ACCESS,ST$C,AND,QUOTE,GETPROPC,ABSSTOBJ-INFO,LET,WRLD,ST,DEFUN" data-part-name="CONCRETE-STOBJ" data-part-args="WRLD,ST" data-part-body="CONCRETE-STOBJ,OR,ACCESS,ST$C,AND,WRLD,QUOTE,ST,GETPROPC,ABSSTOBJ-INFO,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONCRETE-STOBJ">concrete-stobj</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-concrete-stobj" data-sym="CONCRETE-STOBJ" title="(defun concrete-stobj (st wrld)
  (let ((absstobj-info (getpropc st &#39;absstobj-info nil wrld)))
    (and absstobj-info
         (let ((st$c
                (access absstobj-info (getpropc st &#39;absstobj-info nil wrld)
...">concrete-stobj</a>
  (st wrld)
  (let ((absstobj-info (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> st 'absstobj-info nil wrld)))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> absstobj-info
      (let ((st$c (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-info
             (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> st 'absstobj-info nil wrld)
             <span class="keyword">:st$c</span>)))
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link local-def" href="#def-concrete-stobj" data-sym="CONCRETE-STOBJ" title="(defun concrete-stobj (st wrld)
  (let ((absstobj-info (getpropc st &#39;absstobj-info nil wrld)))
    (and absstobj-info
         (let ((st$c
                (access absstobj-info (getpropc st &#39;absstobj-info nil wrld)
...">concrete-stobj</a> st$c wrld) st$c)))))</pre>
  </div>

<div class="form-block macro" id="def-defabsstobj-missing-events" data-defines="DEFABSSTOBJ-MISSING-EVENTS" data-references="STATE,T,DEFABSSTOBJ-FN1,MSG,QUOTE,LIST,CTX,LET,SYMBOLP,XARGS,DECLARE,ATTACHABLE,NON-EXECUTABLE,CONGRUENT-TO,PROTECT-DEFAULT,EXPORTS,CORR-FN-EXISTS,CORR-FN,CREATOR,RECOGNIZER,FOUNDATION,&KEY,NAME,EVENT-FORM,&WHOLE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-MISSING-EVENTS">defabsstobj-missing-events</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defabsstobj-missing-events" data-sym="DEFABSSTOBJ-MISSING-EVENTS" title="(defmacro defabsstobj-missing-events
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable)
  (declare (xargs :guard (symbolp name)))
...">defabsstobj-missing-events</a>
  (&amp;whole event-form
    name
    &amp;key
    foundation
    recognizer
    creator
    corr-fn
    corr-fn-exists
    exports
    protect-default
    congruent-to
    non-executable
    attachable)
  (declare (xargs <span class="keyword">:guard</span> (symbolp name)))
  (let ((ctx (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote
         (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFABSSTOBJ-MISSING-EVENTS ~x0 ...)"</span> name))))
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-defabsstobj-fn1" data-sym="DEFABSSTOBJ-FN1" title="(defun defabsstobj-fn1
       (st-name st$c recognizer creator corr-fn corr-fn-exists exports
        protect-default congruent-to non-executable attachable missing-only ctx
        state event-form discriminator creator-name-orig absstobj-tuples-new)
  (let* ((wrld0 (w state))
...">defabsstobj-fn1</a>
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote name)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote foundation)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote recognizer)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote creator)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote corr-fn)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote corr-fn-exists)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote exports)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote protect-default)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote congruent-to)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote non-executable)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote attachable)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      ctx
      'state
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)
      nil
      nil
      nil)))</pre>
  </div>

<div class="form-block function" id="def-redundant-defabsstobjp" data-defines="REDUNDANT-DEFABSSTOBJP" data-references="GET-EVENT,EQUAL,STOBJ,QUOTE,GETPROPC,AND,WRLD,EVENT-FORM,NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="REDUNDANT-DEFABSSTOBJP" data-part-args="WRLD,EVENT-FORM,NAME" data-part-body="GET-EVENT,EVENT-FORM,EQUAL,WRLD,STOBJ,QUOTE,NAME,GETPROPC,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDUNDANT-DEFABSSTOBJP">redundant-defabsstobjp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-redundant-defabsstobjp" data-sym="REDUNDANT-DEFABSSTOBJP" title="(defun redundant-defabsstobjp (name event-form wrld)
  (and (getpropc name &#39;stobj nil wrld)
       (equal event-form (get-event name wrld))))">redundant-defabsstobjp</a>
  (name event-form wrld)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'stobj nil wrld)
    (equal event-form (get-event name wrld))))</pre>
  </div>

<div class="form-block function" id="def-absstobj-correspondence-concl-lst" data-defines="ABSSTOBJ-CORRESPONDENCE-CONCL-LST" data-references="1+,CDR,RHS,LHS,MV-NTH,EQUAL,QUOTE,CAR,EQ,IF,FCONS-TERM*,KWOTE,QI,LET,CONS,T,ENDP,COND,CORR-FN,ST$C,I,STOBJS-OUT,DEFUN" data-used-by="ABSSTOBJ-CORRESPONDENCE-FORMULA" data-part-name="ABSSTOBJ-CORRESPONDENCE-CONCL-LST" data-part-args="CORR-FN,ST$C,I,STOBJS-OUT" data-part-body="1+,CDR,ABSSTOBJ-CORRESPONDENCE-CONCL-LST,RHS,LHS,MV-NTH,EQUAL,QUOTE,CORR-FN,ST$C,CAR,EQ,IF,FCONS-TERM*,I,KWOTE,QI,LET,CONS,T,STOBJS-OUT,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ABSSTOBJ-CORRESPONDENCE-CONCL-LST">absstobj-correspondence-concl-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-absstobj-correspondence-concl-lst" data-sym="ABSSTOBJ-CORRESPONDENCE-CONCL-LST" title="(defun absstobj-correspondence-concl-lst (stobjs-out i st$c corr-fn)
  (cond ((endp stobjs-out) nil)
        (t
         (cons
          (let ((qi (kwote i)))
...">absstobj-correspondence-concl-lst</a>
  (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> i st$c corr-fn)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (let ((qi (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> i)))
          (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) st$c)
              corr-fn
              'equal)
            (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> qi 'lhs)
            (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> qi 'rhs)))
        (<a class="sym-link local-def" href="#def-absstobj-correspondence-concl-lst" data-sym="ABSSTOBJ-CORRESPONDENCE-CONCL-LST" title="(defun absstobj-correspondence-concl-lst (stobjs-out i st$c corr-fn)
  (cond ((endp stobjs-out) nil)
        (t
         (cons
          (let ((qi (kwote i)))
...">absstobj-correspondence-concl-lst</a> (cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
          (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> i)
          st$c
          corr-fn)))))</pre>
  </div>

<div class="form-block function" id="def-flatten-ands-in-lit_21" data-defines="FLATTEN-ANDS-IN-LIT!" data-references="*T*,&,LIST,T,DUMB-NEGATE-LIT,UNION-EQUAL-TO-END,*NIL*,EQUAL,COND,T3,T2,T1,IF,QUOTE,CASE-MATCH,PSEUDO-TERMP,XARGS,DECLARE,TERM,DEFUN" data-used-by="CHK-DEFABSSTOBJ-METHOD-LEMMAS,ABSSTOBJ-PRESERVED-FORMULA,ABSSTOBJ-CORRESPONDENCE-FORMULA" data-part-name="FLATTEN-ANDS-IN-LIT!" data-part-args="TERM" data-part-declare="TERM,PSEUDO-TERMP,XARGS,DECLARE" data-part-body="*T*,&,LIST,T,DUMB-NEGATE-LIT,FLATTEN-ANDS-IN-LIT!,UNION-EQUAL-TO-END,*NIL*,EQUAL,COND,T3,T2,T1,IF,QUOTE,TERM,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLATTEN-ANDS-IN-LIT!">flatten-ands-in-lit!</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flatten-ands-in-lit_21" data-sym="FLATTEN-ANDS-IN-LIT!" title="(defun flatten-ands-in-lit! (term)
  (declare (xargs :guard (pseudo-termp term)))
  (case-match term
              ((&#39;if t1 t2 t3)
               (cond
...">flatten-ands-in-lit!</a>
  (term)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> term)))
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
    (('if t1 t2 t3) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal t2 <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a>) (union-equal-to-end (<a class="sym-link local-def" href="#def-flatten-ands-in-lit_21" data-sym="FLATTEN-ANDS-IN-LIT!" title="(defun flatten-ands-in-lit! (term)
  (declare (xargs :guard (pseudo-termp term)))
  (case-match term
              ((&#39;if t1 t2 t3)
               (cond
...">flatten-ands-in-lit!</a> (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> t1))
            (<a class="sym-link local-def" href="#def-flatten-ands-in-lit_21" data-sym="FLATTEN-ANDS-IN-LIT!" title="(defun flatten-ands-in-lit! (term)
  (declare (xargs :guard (pseudo-termp term)))
  (case-match term
              ((&#39;if t1 t2 t3)
               (cond
...">flatten-ands-in-lit!</a> t3)))
        ((equal t3 <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a>) (union-equal-to-end (<a class="sym-link local-def" href="#def-flatten-ands-in-lit_21" data-sym="FLATTEN-ANDS-IN-LIT!" title="(defun flatten-ands-in-lit! (term)
  (declare (xargs :guard (pseudo-termp term)))
  (case-match term
              ((&#39;if t1 t2 t3)
               (cond
...">flatten-ands-in-lit!</a> t1)
            (<a class="sym-link local-def" href="#def-flatten-ands-in-lit_21" data-sym="FLATTEN-ANDS-IN-LIT!" title="(defun flatten-ands-in-lit! (term)
  (declare (xargs :guard (pseudo-termp term)))
  (case-match term
              ((&#39;if t1 t2 t3)
               (cond
...">flatten-ands-in-lit!</a> t2)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> term))))
    (&amp; (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal term <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>) nil) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> term))))))</pre>
  </div>

<div class="form-block function" id="def-absstobj-correspondence-formula" data-defines="ABSSTOBJ-CORRESPONDENCE-FORMULA" data-references="ABSSTOBJ-CORRESPONDENCE-CONCL-LST,MAKE-LAMBDA,EQUAL,CAR,EQ,IF,CDR,FLATTEN-ANDS-IN-LIT!,CONS,CONJOIN,IMPLIES,QUOTE,FCONS-TERM*,RHS,FCONS-TERM,LHS,STOBJS-OUT,LET*,T,QUASIQUOTE,NULL,COND,WRLD,ST$C,ST,GUARD-PRE,FORMALS,CORR-FN,F$C,F$A,DEFUN" data-used-by="CHK-DEFABSSTOBJ-METHOD-LEMMAS" data-part-name="ABSSTOBJ-CORRESPONDENCE-FORMULA" data-part-args="WRLD,ST$C,ST,GUARD-PRE,FORMALS,CORR-FN,F$C,F$A" data-part-body="ABSSTOBJ-CORRESPONDENCE-CONCL-LST,MAKE-LAMBDA,EQUAL,CAR,EQ,IF,CDR,GUARD-PRE,FLATTEN-ANDS-IN-LIT!,ST,ST$C,CORR-FN,CONS,CONJOIN,IMPLIES,QUOTE,FCONS-TERM*,F$A,RHS,FCONS-TERM,LHS,WRLD,F$C,STOBJS-OUT,LET*,T,QUASIQUOTE,FORMALS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ABSSTOBJ-CORRESPONDENCE-FORMULA">absstobj-correspondence-formula</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-absstobj-correspondence-formula" data-sym="ABSSTOBJ-CORRESPONDENCE-FORMULA" title="(defun absstobj-correspondence-formula
       (f$a f$c corr-fn formals guard-pre st st$c wrld)
  (cond ((null formals) `(,corr-fn (,f$c) (,f$a)))
        (t
         (let* ((stobjs-out (stobjs-out f$c wrld))
...">absstobj-correspondence-formula</a>
  (f$a f$c corr-fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> guard-pre st st$c wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) `(,CORR-FN (,F$C) (,F$A)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> f$c wrld)) (lhs (<a class="sym-link system" href="basis-b.html#def-fcons-term" data-sym="FCONS-TERM">fcons-term</a> f$c (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> f$c wrld)))
          (rhs (<a class="sym-link system" href="basis-b.html#def-fcons-term" data-sym="FCONS-TERM">fcons-term</a> f$a <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)))
        (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a>
          (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> (cons (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> corr-fn st$c st)
              (<a class="sym-link local-def" href="#def-flatten-ands-in-lit_21" data-sym="FLATTEN-ANDS-IN-LIT!" title="(defun flatten-ands-in-lit! (term)
  (declare (xargs :guard (pseudo-termp term)))
  (case-match term
              ((&#39;if t1 t2 t3)
               (cond
...">flatten-ands-in-lit!</a> guard-pre)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)) (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) st$c)
                  corr-fn
                  'equal)
                lhs
                rhs))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> (<a class="sym-link system" href="basis-b.html#def-make-lambda" data-sym="MAKE-LAMBDA">make-lambda</a> '(lhs rhs)
                  (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> (<a class="sym-link local-def" href="#def-absstobj-correspondence-concl-lst" data-sym="ABSSTOBJ-CORRESPONDENCE-CONCL-LST" title="(defun absstobj-correspondence-concl-lst (stobjs-out i st$c corr-fn)
  (cond ((endp stobjs-out) nil)
        (t
         (cons
          (let ((qi (kwote i)))
...">absstobj-correspondence-concl-lst</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                      <span class="number">0</span>
                      st$c
                      corr-fn)))
                lhs
                rhs))))))))</pre>
  </div>

<div class="form-block function" id="def-absstobj-preserved-formula" data-defines="ABSSTOBJ-PRESERVED-FORMULA" data-references="KWOTE,MV-NTH,NTHCDR,MEMBER-EQ,NOT,AND,POSITION,POSN,CAR,EQ,ASSERT$,CDR,FLATTEN-ANDS-IN-LIT!,ADD-TO-SET-EQUAL,CONJOIN,IMPLIES,QUOTE,FCONS-TERM,UPDATED-ST-TERM,STOBJS-OUT,LET,T,FCONS-TERM*,NULL,COND,WRLD,ST$AP,ST$C,ST,GUARD-PRE,FORMALS,F$C,F$A,DEFUN" data-used-by="CHK-DEFABSSTOBJ-METHOD-LEMMAS" data-part-name="ABSSTOBJ-PRESERVED-FORMULA" data-part-args="WRLD,ST$AP,ST$C,ST,GUARD-PRE,FORMALS,F$C,F$A" data-part-body="KWOTE,MV-NTH,NTHCDR,MEMBER-EQ,NOT,AND,POSITION,POSN,ST$C,CAR,EQ,ASSERT$,CDR,GUARD-PRE,FLATTEN-ANDS-IN-LIT!,ST,ADD-TO-SET-EQUAL,CONJOIN,IMPLIES,QUOTE,FCONS-TERM,UPDATED-ST-TERM,WRLD,F$C,STOBJS-OUT,LET,T,F$A,ST$AP,FCONS-TERM*,FORMALS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ABSSTOBJ-PRESERVED-FORMULA">absstobj-preserved-formula</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-absstobj-preserved-formula" data-sym="ABSSTOBJ-PRESERVED-FORMULA" title="(defun absstobj-preserved-formula
       (f$a f$c formals guard-pre st st$c st$ap wrld)
  (cond ((null formals) (fcons-term* st$ap (fcons-term* f$a)))
        (t
         (let ((stobjs-out (stobjs-out f$c wrld))
...">absstobj-preserved-formula</a>
  (f$a f$c <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> guard-pre st st$c st$ap wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> st$ap (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> f$a)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> f$c wrld)) (updated-st-term (<a class="sym-link system" href="basis-b.html#def-fcons-term" data-sym="FCONS-TERM">fcons-term</a> f$a <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)))
        (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a>
          (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> (<a class="sym-link system" href="axioms.html#def-add-to-set-equal" data-sym="ADD-TO-SET-EQUAL">add-to-set-equal</a> (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> st$ap st)
              (<a class="sym-link local-def" href="#def-flatten-ands-in-lit_21" data-sym="FLATTEN-ANDS-IN-LIT!" title="(defun flatten-ands-in-lit! (term)
  (declare (xargs :guard (pseudo-termp term)))
  (case-match term
              ((&#39;if t1 t2 t3)
               (cond
...">flatten-ands-in-lit!</a> guard-pre)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) st$c)
                (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> st$ap updated-st-term)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((posn (<a class="sym-link system" href="axioms.html#def-position" data-sym="POSITION">position</a> st$c <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))
                (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> posn
                    (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> st$c (cdr (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> posn <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))))
                  (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> st$ap
                    (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> posn) updated-st-term)))))))))))</pre>
  </div>

<div class="form-block other" id="form-476" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-a.html#def-defrec" data-sym="DEFREC">defrec</a> absstobj-method
  (name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
    guard-pre
    guard-post
    guard-thm
    guard-thm-p
    stobjs-in-posn
    stobjs-in-exec
    stobjs-in-logic
    <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
    <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
    exec
    correspondence
    preserved
    protect
    updater)
  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block mutual-recursion" id="def-fn-stobj-updates-p" data-defines="FN-STOBJ-UPDATES-P" data-references="CDR,CAR,ENDP,STOBJS-OUT,AND,NULL,TEMP3,HARD!,ER,TEMP2,FARGN,TEMP1,RETURN-LAST,MEMBER-EQ,LAMBDA-BODY,FARGS,STOBJ-UPDATES-LISTP,IF,Y,X,OR!,FLET,FFN-SYMB,FLAMBDAP,FQUOTEP,VARIABLEP,OR,TERM,STOBJ-UPDATES-P,ASSERT$,UNNORMALIZED-BODY,BODY,LET,CONSTRAINEDP,T,RECURSIVEP,STOBJ-FUNCTION,QUOTE,GETPROPC,EQ,COND,WRLD,FN,ST,DEFUN,MUTUAL-RECURSION" data-used-by="UNPROTECTED-EXPORT-P" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FN-STOBJ-UPDATES-P">fn-stobj-updates-p</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fn-stobj-updates-p" data-sym="FN-STOBJ-UPDATES-P" title="(mutual-recursion
 (defun fn-stobj-updates-p (st fn wrld)
   (cond ((eq st (getpropc fn &#39;stobj-function nil wrld)) :once)
         ((getpropc fn &#39;recursivep nil wrld) t)
         ((getpropc fn &#39;constrainedp nil wrld) t)
...">fn-stobj-updates-p</a>
    (st fn wrld)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> st (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'stobj-function nil wrld)) <span class="keyword">:once</span>)
      ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'recursivep nil wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'constrainedp nil wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'unnormalized-body nil wrld)))
          (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (stobj-updates-p st <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> wrld))))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> stobj-updates-p
    (st term wrld)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term)) nil)
      ((<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)) (flet ((or! (x y)
             (if x
               (if y
                 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                 x)
               y)))
          (or! (stobj-updates-listp st (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term) wrld)
            (stobj-updates-p st (<a class="sym-link system" href="basis-b.html#def-lambda-body" data-sym="LAMBDA-BODY">lambda-body</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)) wrld))))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) '(if <a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a>)) (let ((temp1 (stobj-updates-p st (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> term <span class="number">1</span>) wrld)) (temp2 (stobj-updates-p st (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> term <span class="number">2</span>) wrld)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (temp1 (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard!
                'stobj-updates-p
                <span class="string">"Please contact the ACL2 implementors.  Unexpected true ~
                       result for first argument of ~x0."</span>
                term))
            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> temp2 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((temp3 (stobj-updates-p st (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> term <span class="number">3</span>) wrld)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> temp3 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> temp2 temp3))))))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (stobj-updates-listp st (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term) wrld))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> st (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) wrld))
            (<a class="sym-link local-def" href="#def-fn-stobj-updates-p" data-sym="FN-STOBJ-UPDATES-P" title="(mutual-recursion
 (defun fn-stobj-updates-p (st fn wrld)
   (cond ((eq st (getpropc fn &#39;stobj-function nil wrld)) :once)
         ((getpropc fn &#39;recursivep nil wrld) t)
         ((getpropc fn &#39;constrainedp nil wrld) t)
...">fn-stobj-updates-p</a> st (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) wrld))))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> stobj-updates-listp
    (st x wrld)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> x) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (flet ((or! (x y)
             (if x
               (if y
                 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                 x)
               y)))
          (or! (stobj-updates-p st (car x) wrld)
            (stobj-updates-listp st (cdr x) wrld)))))))</pre>
  </div>

<div class="form-block function" id="def-unprotected-export-p" data-defines="UNPROTECTED-EXPORT-P" data-references="FN-STOBJ-UPDATES-P,T,EQ,STOBJS-OUT,MEMBER-EQ,AND,WRLD,NAME,ST$C,DEFUN" data-used-by="TRANSLATE-ABSSTOBJ-FIELD" data-part-name="UNPROTECTED-EXPORT-P" data-part-args="WRLD,NAME,ST$C" data-part-body="FN-STOBJ-UPDATES-P,T,EQ,WRLD,NAME,STOBJS-OUT,ST$C,MEMBER-EQ,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNPROTECTED-EXPORT-P">unprotected-export-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-unprotected-export-p" data-sym="UNPROTECTED-EXPORT-P" title="(defun unprotected-export-p (st$c name wrld)
  (and (member-eq st$c (stobjs-out name wrld))
       (eq t (fn-stobj-updates-p st$c name wrld))))">unprotected-export-p</a>
  (st$c name wrld)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> st$c (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> name wrld))
    (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-fn-stobj-updates-p" data-sym="FN-STOBJ-UPDATES-P" title="(mutual-recursion
 (defun fn-stobj-updates-p (st fn wrld)
   (cond ((eq st (getpropc fn &#39;stobj-function nil wrld)) :once)
         ((getpropc fn &#39;recursivep nil wrld) t)
         ((getpropc fn &#39;constrainedp nil wrld) t)
...">fn-stobj-updates-p</a> st$c name wrld))))</pre>
  </div>

<div class="form-block function" id="def-key-position-from-end-eq" data-defines="KEY-POSITION-FROM-END-EQ" data-references="T,CDR,LENGTH,CAAR,EQ,ENDP,COND,ALISTP,SYMBOLP,AND,XARGS,DECLARE,ALIST,KEY,DEFUN" data-used-by="CONGRUENT-ABSSTOBJ-TUPLES-REC,ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG" data-part-name="KEY-POSITION-FROM-END-EQ" data-part-args="ALIST,KEY" data-part-declare="ALIST,ALISTP,KEY,SYMBOLP,AND,XARGS,DECLARE" data-part-body="KEY-POSITION-FROM-END-EQ,T,CDR,LENGTH,CAAR,KEY,EQ,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="KEY-POSITION-FROM-END-EQ">key-position-from-end-eq</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-key-position-from-end-eq" data-sym="KEY-POSITION-FROM-END-EQ" title="(defun key-position-from-end-eq (key alist)
  (declare (xargs :guard (and (symbolp key) (alistp alist))))
  (cond ((endp alist) nil) ((eq key (caar alist)) (length (cdr alist)))
        (t (key-position-from-end-eq key (cdr alist)))))">key-position-from-end-eq</a>
  (key alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp key) (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> alist))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (cdr alist)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-key-position-from-end-eq" data-sym="KEY-POSITION-FROM-END-EQ" title="(defun key-position-from-end-eq (key alist)
  (declare (xargs :guard (and (symbolp key) (alistp alist))))
  (cond ((endp alist) nil) ((eq key (caar alist)) (length (cdr alist)))
        (t (key-position-from-end-eq key (cdr alist)))))">key-position-from-end-eq</a> key (cdr alist)))))</pre>
  </div>

<div class="form-block function" id="def-absstobj-logical-skeleton-difference-msg" data-defines="ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG" data-references="IF,CDR,KEY-POSITION-FROM-END-EQ,EQL,NULL,OR,EQUAL,AND,UPDATER-NEW,CDDDR,UPDATER-OLD,LOGIC-NEW,CADR,LOGIC-OLD,NEW1,CAR,OLD1,LET*,MSG,T,ENDP,COND,NEW-ALL,OLD-ALL,SEE-DOC,ST-NEW,ST-OLD,NEW,OLD,DEFUN" data-used-by="CHK-ABSSTOBJ-ATTACHMENT" data-part-name="ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG" data-part-args="NEW-ALL,OLD-ALL,SEE-DOC,ST-NEW,ST-OLD,NEW,OLD" data-part-body="IF,CDR,ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG,NEW-ALL,OLD-ALL,KEY-POSITION-FROM-END-EQ,EQL,NULL,OR,EQUAL,AND,UPDATER-NEW,CDDDR,UPDATER-OLD,LOGIC-NEW,CADR,LOGIC-OLD,NEW1,CAR,OLD1,LET*,SEE-DOC,ST-OLD,ST-NEW,MSG,T,NEW,OLD,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG">absstobj-logical-skeleton-difference-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-absstobj-logical-skeleton-difference-msg" data-sym="ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG" title="(defun absstobj-logical-skeleton-difference-msg
       (old new st-old st-new see-doc old-all new-all)
  (cond
   ((endp old)
    (cond ((endp new) nil)
...">absstobj-logical-skeleton-difference-msg</a>
  (old new st-old st-new see-doc old-all new-all)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> old) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> new) nil)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The proposed abstract stobj, ~x0, has additional exports ~
                   not in the existing abstract stobj, ~x1.  ~@2"</span>
            st-new
            st-old
            see-doc))))
    ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> new) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The existing abstract stobj, ~x0, has additional exports not ~
               in the proposed abstract stobj, ~x1.  ~@2"</span>
        st-old
        st-new
        see-doc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old1 (car old)) (new1 (car new))
          (logic-old (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> old1))
          (logic-new (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> new1))
          (updater-old (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> old1))
          (updater-new (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> new1)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal logic-old logic-new)
             (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> updater-old) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> updater-new))
               (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> updater-old
                 updater-new
                 (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link local-def" href="#def-key-position-from-end-eq" data-sym="KEY-POSITION-FROM-END-EQ" title="(defun key-position-from-end-eq (key alist)
  (declare (xargs :guard (and (symbolp key) (alistp alist))))
  (cond ((endp alist) nil) ((eq key (caar alist)) (length (cdr alist)))
        (t (key-position-from-end-eq key (cdr alist)))))">key-position-from-end-eq</a> updater-old old-all)
                   (<a class="sym-link local-def" href="#def-key-position-from-end-eq" data-sym="KEY-POSITION-FROM-END-EQ" title="(defun key-position-from-end-eq (key alist)
  (declare (xargs :guard (and (symbolp key) (alistp alist))))
  (cond ((endp alist) nil) ((eq key (caar alist)) (length (cdr alist)))
        (t (key-position-from-end-eq key (cdr alist)))))">key-position-from-end-eq</a> updater-new new-all))))) (<a class="sym-link local-def" href="#def-absstobj-logical-skeleton-difference-msg" data-sym="ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG" title="(defun absstobj-logical-skeleton-difference-msg
       (old new st-old st-new see-doc old-all new-all)
  (cond
   ((endp old)
    (cond ((endp new) nil)
...">absstobj-logical-skeleton-difference-msg</a> (cdr old)
              (cdr new)
              st-old
              st-new
              see-doc
              old-all
              new-all))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The existing abstract stobj, ~x0, has an export ~
                          with name ~x1 that should correspond to the export ~
                          with name ~x2 of the proposed abstract stobj, ~x3.  ~
                          However, these exports have non-corresponding ~x4 ~
                          fields: ~x5 for ~x1 and ~x6 for ~x2.  ~@7"</span>
              st-old
              (car old1)
              (car new1)
              st-new
              (if (equal logic-old logic-new)
                <span class="keyword">:updater</span> <span class="keyword">:logic</span>)
              (if (equal logic-old logic-new)
                updater-old
                logic-old)
              (if (equal logic-old logic-new)
                updater-new
                logic-new)
              see-doc)))))))</pre>
  </div>

<div class="form-block function" id="def-chk-absstobj-attachment" data-defines="CHK-ABSSTOBJ-ATTACHMENT" data-references="VALUE,ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG,MSG,ACCESS,OLD-TUPLES,LET*,T,ATTACH-STOBJ,QUASIQUOTE,SOFT,ER,NULL,COND,ABSSTOBJ-INFO,QUOTE,GETPROPC,ABSSTOBJ-INFO-AT,LET,OBSERVATION,PPROGN,ASSERT$,STATE,SEE-DOC,WRLD,CTX,NEW-TUPLES,IMPL-NAME,ST-NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="CHK-ABSSTOBJ-ATTACHMENT" data-part-args="STATE,SEE-DOC,WRLD,CTX,NEW-TUPLES,IMPL-NAME,ST-NAME" data-part-body="VALUE,SEE-DOC,NEW-TUPLES,ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG,MSG,ACCESS,OLD-TUPLES,LET*,T,ATTACH-STOBJ,QUASIQUOTE,SOFT,ER,NULL,COND,WRLD,ABSSTOBJ-INFO,QUOTE,GETPROPC,ABSSTOBJ-INFO-AT,LET,ST-NAME,CTX,OBSERVATION,PPROGN,IMPL-NAME,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ABSSTOBJ-ATTACHMENT">chk-absstobj-attachment</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-absstobj-attachment" data-sym="CHK-ABSSTOBJ-ATTACHMENT" title="(defun chk-absstobj-attachment
       (st-name impl-name new-tuples ctx wrld see-doc state)
  (assert$ impl-name
           (pprogn
            (observation ctx
...">chk-absstobj-attachment</a>
  (st-name impl-name new-tuples ctx wrld see-doc state)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> impl-name
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
        <span class="string">"Implementation stobj ~x0 is to be attached to proposed ~
                  attachable stobj ~x1."</span>
        impl-name
        st-name)
      (let ((absstobj-info-at (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> impl-name 'absstobj-info nil wrld)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> absstobj-info-at) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Although the event ~x0 was previously executed, the name ~x1 is ~
             not the name of an abstract stobj.  This should only happen if ~
             that name was redefined.  The proposed defabsstobj event for ~
             name ~x2 cannot be admitted since it specifies, with :ATTACHABLE ~
             T and that previous attach-stobj event, that a previous ~
             defabsstobj event for name ~x1 should serve as an attachment."</span>
              `(<a class="sym-link system" href="basis-b.html#def-attach-stobj" data-sym="ATTACH-STOBJ">attach-stobj</a> ,ST-NAME ,IMPL-NAME)
              impl-name
              st-name))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-tuples (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-info absstobj-info-at <span class="keyword">:absstobj-tuples</span>)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link local-def" href="#def-absstobj-logical-skeleton-difference-msg" data-sym="ABSSTOBJ-LOGICAL-SKELETON-DIFFERENCE-MSG" title="(defun absstobj-logical-skeleton-difference-msg
       (old new st-old st-new see-doc old-all new-all)
  (cond
   ((endp old)
    (cond ((endp new) nil)
...">absstobj-logical-skeleton-difference-msg</a> old-tuples
                    new-tuples
                    impl-name
                    st-name
                    see-doc
                    old-tuples
                    new-tuples)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"Illegal abstract stobj attachment for ~x0: ~x1.  ~@2"</span>
                    st-name
                    impl-name
                    <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))))))</pre>
  </div>

<div class="form-block function" id="def-attached-stobj" data-defines="ATTACHED-STOBJ" data-references="T,COND,ATTACH-STOBJ-TABLE,QUOTE,TABLE-ALIST,ASSOC-EQ,CDR,ST2,LET,TOP,WRLD,ST,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="ATTACHED-STOBJ" data-part-args="TOP,WRLD,ST" data-part-body="T,TOP,ATTACHED-STOBJ,COND,WRLD,ATTACH-STOBJ-TABLE,QUOTE,TABLE-ALIST,ST,ASSOC-EQ,CDR,ST2,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ATTACHED-STOBJ">attached-stobj</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-attached-stobj" data-sym="ATTACHED-STOBJ" title="(defun attached-stobj (st wrld top)
  (let ((st2 (cdr (assoc-eq st (table-alist &#39;attach-stobj-table wrld)))))
    (cond (st2 (attached-stobj st2 wrld nil)) (top nil) (t st))))">attached-stobj</a>
  (st wrld top)
  (let ((st2 (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> st (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'attach-stobj-table wrld)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (st2 (<a class="sym-link local-def" href="#def-attached-stobj" data-sym="ATTACHED-STOBJ" title="(defun attached-stobj (st wrld top)
  (let ((st2 (cdr (assoc-eq st (table-alist &#39;attach-stobj-table wrld)))))
    (cond (st2 (attached-stobj st2 wrld nil)) (top nil) (t st))))">attached-stobj</a> st2 wrld nil)) (top nil) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> st))))</pre>
  </div>

<div class="form-block function" id="def-translate-absstobj-field" data-defines="TRANSLATE-ABSSTOBJ-FIELD" data-references="SUBSTITUTE,GUARD,SUBCOR-VAR,GUARD-PRE,UPDATE-NTH,PRETTYIFY-STOBJ-FLAGS,EQUAL,APPEND,LENGTH,EQL,GET-STOBJ-RECOGNIZER,FN,IMPLICIT-P,LP,SYMBOL-CLASS,PRES,PRESERVED-P,PRESERVED,CORR,CORRESPONDENCE-P,CORRESPONDENCE,UPDATER-TAIL,PRESERVED-REQUIRED,CORRESPONDENCE-REQUIRED,STOBJS-OUT-EXEC,STOBJS-OUT,STOBJS-OUT-LOGIC,STOBJS-IN-EXEC,STOBJS-IN,STOBJS-IN-LOGIC,POSITION-EQ,POSN-EXEC,FORMALS,EXEC-FORMALS,GUARD-THM-P,GUARD-THM,UNPROTECTED-EXPORT-P,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,OTHERWISE,CASE,FUNCTION-SYMBOLP,DUPLICATES,DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP,EVENS,STRIP-KEYWORD-LIST,ABSSTOBJ-METHOD,MAKE,VALUE-CMP,NULL,LOGIC-P,LOGIC,QUOTE,MEMBER-EQ,PROTECT,PROTECT-TAIL,ABSSTOBJ-NAME,EQ,MV,ASSOC-KEYWORD,CADR,LET,EXEC-P,EXEC,MV-LET,T,ER-CMP,ODDS,SYMBOL-LISTP,KEYWORD-VALUE-LISTP,SYMBOLP,AND,NOT,COND,CDR,KEYWORD-LST,OR,ACTUAL-NAME,CAR,NAME,LIST,ATOM,IF,FIELD0,LET*,WRLD,CTX,SEE-DOC,LD-SKIP-PROOFSP,PROTECT-DEFAULT,TYPE,FIELD,ST$C,ABSSTOBJ-TUPLE,ST-NEW,ST,DEFUN" data-used-by="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1,CHK-ACCEPTABLE-DEFABSSTOBJ1,SIMPLE-TRANSLATE-ABSSTOBJ-FIELDS" data-part-name="TRANSLATE-ABSSTOBJ-FIELD" data-part-args="WRLD,CTX,SEE-DOC,LD-SKIP-PROOFSP,PROTECT-DEFAULT,TYPE,FIELD,ST$C,ABSSTOBJ-TUPLE,ST-NEW,ST" data-part-body="SUBSTITUTE,GUARD,SUBCOR-VAR,GUARD-PRE,UPDATE-NTH,PRETTYIFY-STOBJ-FLAGS,EQUAL,APPEND,LENGTH,EQL,ST-NEW,GET-STOBJ-RECOGNIZER,FN,IMPLICIT-P,LP,SYMBOL-CLASS,PRES,PRESERVED-P,PRESERVED,CORR,CORRESPONDENCE-P,CORRESPONDENCE,UPDATER-TAIL,PRESERVED-REQUIRED,CORRESPONDENCE-REQUIRED,STOBJS-OUT-EXEC,STOBJS-OUT,STOBJS-OUT-LOGIC,STOBJS-IN-EXEC,STOBJS-IN,STOBJS-IN-LOGIC,POSITION-EQ,POSN-EXEC,FORMALS,EXEC-FORMALS,GUARD-THM-P,GUARD-THM,ST$C,UNPROTECTED-EXPORT-P,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,LD-SKIP-PROOFSP,OTHERWISE,CASE,FUNCTION-SYMBOLP,DUPLICATES,DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP,EVENS,STRIP-KEYWORD-LIST,ABSSTOBJ-METHOD,MAKE,VALUE-CMP,WRLD,NULL,LOGIC-P,LOGIC,QUOTE,MEMBER-EQ,PROTECT-DEFAULT,PROTECT,PROTECT-TAIL,ST,ABSSTOBJ-NAME,TYPE,EQ,MV,ASSOC-KEYWORD,CADR,LET,EXEC-P,EXEC,MV-LET,T,SEE-DOC,CTX,ER-CMP,ODDS,SYMBOL-LISTP,KEYWORD-VALUE-LISTP,SYMBOLP,AND,NOT,COND,CDR,KEYWORD-LST,ABSSTOBJ-TUPLE,OR,ACTUAL-NAME,CAR,NAME,LIST,ATOM,IF,FIELD,FIELD0,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-ABSSTOBJ-FIELD">translate-absstobj-field</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-absstobj-field" data-sym="TRANSLATE-ABSSTOBJ-FIELD" title="(defun translate-absstobj-field
       (st st-new absstobj-tuple st$c field type protect-default
        ld-skip-proofsp see-doc ctx wrld)
  (let* ((field0 field)
         (field
...">translate-absstobj-field</a>
  (st st-new
    absstobj-tuple
    st$c
    field
    type
    protect-default
    <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
    see-doc
    ctx
    wrld)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((field0 field) (field (if (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> field)
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> field)
          field))
      (name (car field))
      (actual-name (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (car absstobj-tuple) name))
      (keyword-lst (cdr field)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
           (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> keyword-lst)
           (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="axioms.html#def-odds" data-sym="ODDS">odds</a> keyword-lst)))) (er-cmp ctx
          <span class="string">"Each field of a DEFABSSTOBJ event must be a symbol or a list ~
               of the form (symbol :KWD1 val1 :KWD2 val2 ...) where each vali ~
               is a symbol, but the field ~x0 is not of this form.  ~@1"</span>
          field0
          see-doc))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (exec exec-p)
          (let ((exec (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:exec</span> keyword-lst))))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (exec (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> exec <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
              ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:recognizer</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> st <span class="keyword">:recognizer-exec</span>) nil))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> name <span class="keyword">:c</span>) nil))))
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((protect-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:protect</span> keyword-lst)) (protect (if protect-tail
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> protect-tail)
                  protect-default)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> protect-tail (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> protect '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))) (er-cmp ctx
                  <span class="string">"Illegal value of :PROTECT, ~x0, in the field for ~x1.  ~@2"</span>
                  protect
                  name
                  see-doc))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> logic-p)
                  (let ((<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:logic</span> keyword-lst))))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:recognizer</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> st <span class="keyword">:recognizer-logic</span>) nil))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> name <span class="keyword">:a</span>) nil))))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld) (value-cmp (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> absstobj-method
                          <span class="keyword">:name</span> actual-name
                          <span class="keyword">:logic</span> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
                          <span class="keyword">:exec</span> exec
                          <span class="keyword">:protect</span> protect)))
                    ((<a class="sym-link system" href="axioms.html#def-strip-keyword-list" data-sym="STRIP-KEYWORD-LIST">strip-keyword-list</a> '(<span class="keyword">:logic</span> <span class="keyword">:exec</span> <span class="keyword">:correspondence</span> <span class="keyword">:preserved</span> <span class="keyword">:guard-thm</span> <span class="keyword">:protect</span> <span class="keyword">:updater</span>)
                       keyword-lst) (er-cmp ctx
                        <span class="string">"Unexpected keyword~#0~[~/s~], ~&amp;0, in field ~x1.  ~@2"</span>
                        (<a class="sym-link system" href="axioms.html#def-evens" data-sym="EVENS">evens</a> (<a class="sym-link system" href="axioms.html#def-strip-keyword-list" data-sym="STRIP-KEYWORD-LIST">strip-keyword-list</a> '(<span class="keyword">:logic</span> <span class="keyword">:exec</span> <span class="keyword">:correspondence</span> <span class="keyword">:preserved</span> <span class="keyword">:guard-thm</span> <span class="keyword">:updater</span>)
                            keyword-lst))
                        field0
                        see-doc))
                    ((<a class="sym-link local-def" href="#def-duplicate-key-in-keyword-value-listp" data-sym="DUPLICATE-KEY-IN-KEYWORD-VALUE-LISTP" title="(defun duplicate-key-in-keyword-value-listp (l)
  (declare (xargs :guard (keyword-value-listp l)))
  (cond ((endp l) nil) ((assoc-keyword (car l) (cddr l)) (car l))
        (t (duplicate-key-in-keyword-value-listp (cddr l)))))">duplicate-key-in-keyword-value-listp</a> keyword-lst) (er-cmp ctx
                        <span class="string">"Duplicate keyword~#0~[~/s~] ~&amp;0 found in field ~x1.~|~@2"</span>
                        (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> (<a class="sym-link system" href="axioms.html#def-evens" data-sym="EVENS">evens</a> keyword-lst))
                        field0
                        see-doc))
                    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> exec wrld)) (er-cmp ctx
                        <span class="string">"The :EXEC field ~x0, specified~#1~[~/ (implicitly)~] ~
                         for ~#2~[defabsstobj :RECOGNIZER~/defabsstobj ~
                         :CREATOR~/exported~] symbol ~x3, is not a function ~
                         symbol in the current ACL2 logical world.  ~@4"</span>
                        exec
                        (if exec-p
                          <span class="number">0</span>
                          <span class="number">1</span>)
                        (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> type (<span class="keyword">:recognizer</span> <span class="number">0</span>) (<span class="keyword">:creator</span> <span class="number">1</span>) (otherwise <span class="number">2</span>))
                        name
                        see-doc))
                    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> protect)
                       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> type '(<span class="keyword">:recognizer</span> <span class="keyword">:creator</span>)))
                       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
                           '(<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> include-book-with-locals)))
                       (<a class="sym-link local-def" href="#def-unprotected-export-p" data-sym="UNPROTECTED-EXPORT-P" title="(defun unprotected-export-p (st$c name wrld)
  (and (member-eq st$c (stobjs-out name wrld))
       (eq t (fn-stobj-updates-p st$c name wrld))))">unprotected-export-p</a> st$c exec wrld)) (er-cmp ctx
                        <span class="string">"The :EXEC field ~x0, specified~#1~[~/ (implicitly)~] ~
                         for defabsstobj field ~x2, appears capable of ~
                         modifying the foundational stobj, ~x3, ~
                         non-atomically; yet :PROTECT T was not specified for ~
                         this field.  ~@4"</span>
                        exec
                        (if exec-p
                          <span class="number">0</span>
                          <span class="number">1</span>)
                        name
                        st$c
                        see-doc))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (guard-thm guard-thm-p)
                        (let ((guard-thm (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:guard-thm</span> keyword-lst))))
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (guard-thm (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> guard-thm <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> name <span class="keyword">:guard-thm</span>) nil))))
                        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((exec-formals (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> exec wrld)) (posn-exec (<a class="sym-link system" href="axioms.html#def-position-eq" data-sym="POSITION-EQ">position-eq</a> st$c exec-formals))
                            (stobjs-in-logic (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> wrld))
                            (stobjs-in-exec (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> exec wrld))
                            (stobjs-out-logic (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> wrld))
                            (stobjs-out-exec (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> exec wrld))
                            (correspondence-required (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:recognizer</span>)))
                            (preserved-required (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:recognizer</span>))
                                (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> st$c stobjs-out-exec)))
                            (updater-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:updater</span> keyword-lst)))
                          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (correspondence correspondence-p)
                            (let ((corr (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:correspondence</span> keyword-lst))))
                              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (corr (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> corr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> correspondence-required
                                      (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> name <span class="keyword">:correspondence</span>))
                                    nil))))
                            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (preserved preserved-p)
                              (let ((pres (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:preserved</span> keyword-lst))))
                                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pres (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> pres <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> preserved-required (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> name <span class="keyword">:preserved</span>))
                                      nil))))
                              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:recognizer</span>)
                                     (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> correspondence-p
                                       preserved-p
                                       guard-thm-p
                                       updater-tail
                                       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> logic-p)
                                       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> exec-p)))
                                   (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:creator</span>) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> updater-tail guard-thm-p))) (er-cmp ctx
                                    <span class="string">"The ~@0 for keyword ~x1.  ~@2"</span>
                                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (updater-tail <span class="string">":UPDATER field is not allowed"</span>)
                                      (guard-thm-p <span class="string">":GUARD-THM field is not allowed"</span>)
                                      (correspondence-p <span class="string">":CORRESPONDENCE field is not allowed"</span>)
                                      (preserved-p <span class="string">":PRESERVED field is not allowed"</span>)
                                      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> logic-p) <span class="string">":LOGIC field is required"</span>)
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">":EXEC field is required"</span>))
                                    type
                                    see-doc))
                                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> wrld)) (er-cmp ctx
                                    <span class="string">"The :LOGIC field ~x0, specified~#1~[~/ ~
                                   (implicitly)~] for ~#2~[defabsstobj ~
                                   :RECOGNIZER~/defabsstobj ~
                                   :CREATOR~/exported~] symbol ~x3, is not a ~
                                   function symbol in the current ACL2 ~
                                   logical world.  ~@4"</span>
                                    <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
                                    (if logic-p
                                      <span class="number">0</span>
                                      <span class="number">1</span>)
                                    (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> type (<span class="keyword">:recognizer</span> <span class="number">0</span>) (<span class="keyword">:creator</span> <span class="number">1</span>) (otherwise <span class="number">2</span>))
                                    name
                                    see-doc))
                                ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> exec wrld) <span class="keyword">:common-lisp-compliant</span>))
                                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> wrld) <span class="keyword">:common-lisp-compliant</span>))) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((lp (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> wrld) <span class="keyword">:common-lisp-compliant</span>))) (implicit-p (if lp
                                          logic-p
                                          exec-p))
                                      (fn (if lp
                                          <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
                                          exec)))
                                    (er-cmp ctx
                                      <span class="string">"The~#0~[~/ (implicit)~] ~x1 component of ~
                                     field ~x2, ~x3, is a function symbol but ~
                                     its guards have not yet been verified.  ~
                                     ~@4"</span>
                                      (if implicit-p
                                        <span class="number">0</span>
                                        <span class="number">1</span>)
                                      (if lp
                                        <span class="keyword">:logic</span> <span class="keyword">:exec</span>)
                                      field0
                                      fn
                                      see-doc)))
                                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:recognizer</span>)
                                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> exec (<a class="sym-link system" href="basis-b.html#def-get-stobj-recognizer" data-sym="GET-STOBJ-RECOGNIZER">get-stobj-recognizer</a> st$c wrld)))) (er-cmp ctx
                                    <span class="string">"The~#0~[~/ (implicit)~] :EXEC component, ~
                                   ~x1, of the specified :RECOGNIZER, ~x2, is ~
                                   not the recognizer of the foundational ~
                                   stobj ~x3.  ~@4"</span>
                                    (if exec-p
                                      <span class="number">0</span>
                                      <span class="number">1</span>)
                                    exec
                                    name
                                    st$c
                                    see-doc))
                                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> preserved-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> preserved-required)) (er-cmp ctx
                                    <span class="string">"It is illegal to specify :PRESERVED for a ~
                                   field whose :EXEC does not return the ~
                                   foundational stobj.  In this case, ~
                                   :PRESERVED ~x0 has been specified for an ~
                                   :EXEC of ~x1, which does not return ~x2.  ~
                                   ~@3"</span>
                                    preserved
                                    exec
                                    st$c
                                    see-doc))
                                ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> st-new st) exec-formals) (er-cmp ctx
                                    <span class="string">"We do not allow the use of the defabsstobj ~
                                   name, ~x0, in the formals of the :EXEC ~
                                   function of a field, in particular, the ~
                                   :EXEC function ~x1 for field ~x2~#3~[ from ~
                                   the attached stobj, ~x4~/~].  ~@5"</span>
                                    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> st-new st)
                                    exec
                                    field0
                                    (if st-new
                                      <span class="number">0</span>
                                      <span class="number">1</span>)
                                    st-new
                                    see-doc))
                                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:creator</span>)
                                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> stobjs-in-logic)
                                       (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> stobjs-in-exec)
                                       (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr stobjs-out-exec))
                                       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car stobjs-out-exec) st$c)
                                       (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr stobjs-in-exec))
                                       (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> stobjs-out-logic) <span class="number">1</span>)))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> stobjs-in-logic stobjs-in-exec) (er-cmp ctx
                                        <span class="string">"The :LOGIC and :EXEC versions of ~
                                          the :CREATOR function must both be ~
                                          functions of no arguments but ~&amp;0 ~
                                          ~#0~[is not such a function~/xare ~
                                          not such functions~].  ~@1"</span>
                                        (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> stobjs-in-logic (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>))
                                          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> stobjs-in-exec (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> exec)))
                                        see-doc))
                                    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> stobjs-out-logic) <span class="number">1</span>))
                                       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> stobjs-out-exec) <span class="number">1</span>))) (er-cmp ctx
                                        <span class="string">"The :LOGIC and :EXEC versions of ~
                                          the :CREATOR function must both be ~
                                          functions that return a single ~
                                          value, but ~&amp;0 ~#0~[is not such a ~
                                          function~/are not such functions~]. ~
                                          ~ ~@1"</span>
                                        (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> stobjs-out-logic) <span class="number">1</span>)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>))
                                          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> stobjs-out-exec) <span class="number">1</span>)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> exec)))
                                        see-doc))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (er-cmp ctx
                                        <span class="string">"The :EXEC version of the :CREATOR ~
                                          function must return a single value ~
                                          that is the stobj ~x0, but ~x1 does ~
                                          not have that property.  ~@2"</span>
                                        st$c
                                        exec
                                        see-doc))))
                                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:creator</span>)) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> posn-exec)) (er-cmp ctx
                                    <span class="string">"The foundational stobj name, ~x0, is not ~
                                   a known stobj parameter of :EXEC function ~
                                   ~x1 for field ~x2.~|~@3"</span>
                                    st$c
                                    exec
                                    field0
                                    see-doc))
                                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:creator</span>))
                                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> stobjs-in-logic) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> stobjs-in-exec)))) (er-cmp ctx
                                    <span class="string">"The :LOGIC and :EXEC functions for a field ~
                                   must have input signatures of the same ~
                                   length.  However, this fails for field ~
                                   descriptor ~x0, as the input signatures ~
                                   are as follows.~|~%~x1 ~
                                   (:LOGIC):~|~X25~|~%~x3 ~
                                   (:EXEC):~|~X45~|~%~@6"</span>
                                    field0
                                    <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
                                    (prettyify-stobj-flags stobjs-in-logic)
                                    exec
                                    (prettyify-stobj-flags stobjs-in-exec)
                                    nil
                                    see-doc))
                                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:creator</span>))
                                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> stobjs-out-logic) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> stobjs-out-exec)))) (er-cmp ctx
                                    <span class="string">"The output signatures of the :LOGIC and ~
                                   :EXEC functions for an abstract stobj ~
                                   export must have the same length.  ~
                                   However, the output signatures are as ~
                                   follows for field descriptor ~x0 of ~
                                   abstract stobj ~x1.~|~%~x2 ~
                                   (:LOGIC):~|~X36~|~%~x4 ~
                                   (:EXEC):~|~X56~|~%~@7"</span>
                                    field0
                                    st
                                    <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
                                    (prettyify-stobj-flags stobjs-out-logic)
                                    exec
                                    (prettyify-stobj-flags stobjs-out-exec)
                                    nil
                                    see-doc))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type <span class="keyword">:creator</span>)
                                         nil
                                         (<a class="sym-link system" href="axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> posn-exec (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> st-new st) exec-formals))) (guard-pre (<a class="sym-link system" href="basis-b.html#def-subcor-var" data-sym="SUBCOR-VAR">subcor-var</a> (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> wrld)
                                          <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                                          (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> nil wrld))))
                                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> st$c stobjs-in-logic) (er-cmp ctx
                                          <span class="string">"the :LOGIC function ~x0 for export ~x1 ~
                                       declares as a stobj the formal ~
                                       parameter, ~x2.  This is illegal ~
                                       because ~x2 is the foundational stobj ~
                                       for the proposed abstract stobj, ~x3."</span>
                                          <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
                                          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> actual-name name)
                                          st$c
                                          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> st-new st)))
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (value-cmp (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> absstobj-method
                                            <span class="keyword">:name</span> actual-name
                                            <span class="keyword">:formals</span> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                                            <span class="keyword">:guard-pre</span> guard-pre
                                            <span class="keyword">:guard-post</span> nil
                                            <span class="keyword">:guard-thm</span> guard-thm
                                            <span class="keyword">:guard-thm-p</span> (if type
                                              <span class="keyword">:skip</span> guard-thm-p)
                                            <span class="keyword">:stobjs-in-posn</span> posn-exec
                                            <span class="keyword">:stobjs-in-exec</span> stobjs-in-exec
                                            <span class="keyword">:stobjs-in-logic</span> stobjs-in-logic
                                            <span class="keyword">:stobjs-out</span> (<a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> st-new st) st$c stobjs-out-exec)
                                            <span class="keyword">:logic</span> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
                                            <span class="keyword">:exec</span> exec
                                            <span class="keyword">:correspondence</span> correspondence
                                            <span class="keyword">:preserved</span> preserved
                                            <span class="keyword">:protect</span> protect
                                            <span class="keyword">:updater</span> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> updater-tail)))))))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-simple-translate-absstobj-fields" data-defines="SIMPLE-TRANSLATE-ABSSTOBJ-FIELDS" data-references="CONS,VALUE-CMP,CDR,REST,DEFABSSTOBJ,QUOTE,CAR,TRANSLATE-ABSSTOBJ-FIELD,METHOD,ER-LET*-CMP,T,MV,ENDP,COND,LD-SKIP-PROOFSP,PROTECT-DEFAULT,TYPES,FIELDS,ST$C,ST,DEFUN" data-part-name="SIMPLE-TRANSLATE-ABSSTOBJ-FIELDS" data-part-args="LD-SKIP-PROOFSP,PROTECT-DEFAULT,TYPES,FIELDS,ST$C,ST" data-part-body="CONS,VALUE-CMP,CDR,SIMPLE-TRANSLATE-ABSSTOBJ-FIELDS,REST,DEFABSSTOBJ,QUOTE,LD-SKIP-PROOFSP,PROTECT-DEFAULT,TYPES,CAR,ST$C,ST,TRANSLATE-ABSSTOBJ-FIELD,METHOD,ER-LET*-CMP,T,MV,FIELDS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIMPLE-TRANSLATE-ABSSTOBJ-FIELDS">simple-translate-absstobj-fields</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-simple-translate-absstobj-fields" data-sym="SIMPLE-TRANSLATE-ABSSTOBJ-FIELDS" title="(defun simple-translate-absstobj-fields
       (st st$c fields types protect-default ld-skip-proofsp)
  (cond ((endp fields) (mv nil nil))
        (t
         (er-let*-cmp
...">simple-translate-absstobj-fields</a>
  (st st$c fields types protect-default <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fields) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (er-let*-cmp ((method (<a class="sym-link local-def" href="#def-translate-absstobj-field" data-sym="TRANSLATE-ABSSTOBJ-FIELD" title="(defun translate-absstobj-field
       (st st-new absstobj-tuple st$c field type protect-default
        ld-skip-proofsp see-doc ctx wrld)
  (let* ((field0 field)
         (field
...">translate-absstobj-field</a> st
             nil
             nil
             st$c
             (car fields)
             (car types)
             protect-default
             <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
             <span class="string">""</span>
             '<a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a>
             nil)) (<a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link local-def" href="#def-simple-translate-absstobj-fields" data-sym="SIMPLE-TRANSLATE-ABSSTOBJ-FIELDS" title="(defun simple-translate-absstobj-fields
       (st st$c fields types protect-default ld-skip-proofsp)
  (cond ((endp fields) (mv nil nil))
        (t
         (er-let*-cmp
...">simple-translate-absstobj-fields</a> st
              st$c
              (cdr fields)
              (cdr types)
              protect-default
              <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>)))
        (value-cmp (cons method <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>))))))</pre>
  </div>

<div class="form-block function" id="def-one-way-unify-p" data-defines="ONE-WAY-UNIFY-P" data-references="IGNORE,DECLARE,ONE-WAY-UNIFY,UNIFY-SUBST,ANS,MV-LET,EQUAL,OR,TERM,PAT,DEFUN" data-used-by="CHK-DEFABSSTOBJ-METHOD-LEMMAS" data-part-name="ONE-WAY-UNIFY-P" data-part-args="TERM,PAT" data-part-body="IGNORE,DECLARE,ONE-WAY-UNIFY,UNIFY-SUBST,ANS,MV-LET,TERM,PAT,EQUAL,OR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ONE-WAY-UNIFY-P">one-way-unify-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-one-way-unify-p" data-sym="ONE-WAY-UNIFY-P" title="(defun one-way-unify-p (pat term)
  (or (equal pat term)
      (mv-let (ans unify-subst) (one-way-unify pat term)
              (declare (ignore unify-subst)) ans)))">one-way-unify-p</a>
  (pat term)
  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal pat term)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ans unify-subst)
      (one-way-unify pat term)
      (declare (ignore unify-subst))
      ans)))</pre>
  </div>

<div class="form-block function" id="def-obviously-equal-lambda-args" data-defines="OBVIOUSLY-EQUAL-LAMBDA-ARGS" data-references="CDR,NTH,EQUAL,CAR,POSITION-EQ,POSN,LET,T,ENDP,COND,PSEUDO-TERM-LISTP,SYMBOL-LISTP,AND,XARGS,DECLARE,Y-ARGS,Y-FORMALS,X-ARGS-TAIL,X-FORMALS-TAIL,DEFUN" data-used-by="OBVIOUSLY-EQUIV-TERMS" data-part-name="OBVIOUSLY-EQUAL-LAMBDA-ARGS" data-part-args="Y-ARGS,Y-FORMALS,X-ARGS-TAIL,X-FORMALS-TAIL" data-part-declare="Y-ARGS,Y-FORMALS,X-ARGS-TAIL,PSEUDO-TERM-LISTP,X-FORMALS-TAIL,SYMBOL-LISTP,AND,XARGS,DECLARE" data-part-body="CDR,OBVIOUSLY-EQUAL-LAMBDA-ARGS,Y-ARGS,NTH,X-ARGS-TAIL,EQUAL,AND,Y-FORMALS,CAR,POSITION-EQ,POSN,LET,T,X-FORMALS-TAIL,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OBVIOUSLY-EQUAL-LAMBDA-ARGS">obviously-equal-lambda-args</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-obviously-equal-lambda-args" data-sym="OBVIOUSLY-EQUAL-LAMBDA-ARGS" title="(defun obviously-equal-lambda-args
       (x-formals-tail x-args-tail y-formals y-args)
  (declare
   (xargs :guard
    (and (symbol-listp x-formals-tail) (pseudo-term-listp x-args-tail)
...">obviously-equal-lambda-args</a>
  (x-formals-tail x-args-tail y-formals y-args)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> x-formals-tail)
        (pseudo-term-listp x-args-tail)
        (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> y-formals)
        (pseudo-term-listp y-args))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> x-formals-tail) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((posn (<a class="sym-link system" href="axioms.html#def-position-eq" data-sym="POSITION-EQ">position-eq</a> (car x-formals-tail) y-formals)))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> posn
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (car x-args-tail) (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> posn y-args))
            (<a class="sym-link local-def" href="#def-obviously-equal-lambda-args" data-sym="OBVIOUSLY-EQUAL-LAMBDA-ARGS" title="(defun obviously-equal-lambda-args
       (x-formals-tail x-args-tail y-formals y-args)
  (declare
   (xargs :guard
    (and (symbol-listp x-formals-tail) (pseudo-term-listp x-args-tail)
...">obviously-equal-lambda-args</a> (cdr x-formals-tail)
              (cdr x-args-tail)
              y-formals
              y-args)))))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-obviously-equiv-terms" data-defines="OBVIOUSLY-EQUIV-TERMS" data-references="CDR,CAR,ENDP,PSEUDO-TERM-LISTP,*T*,IF,FARGN,IFF,IMPLIES,QUOTE,MEMBER-EQ,EQ,NOT,OBVIOUSLY-EQUAL-LAMBDA-ARGS,SUBCOR-VAR,LENGTH,EQL,Y-BODY,Y-FORMALS,LAMBDA-BODY,X-BODY,LAMBDA-FORMALS,X-FORMALS,T,OBVIOUSLY-EQUIV-TERMS-LST,Y-ARGS,FARGS,X-ARGS,Y-FN,FFN-SYMB,X-FN,LET,FLAMBDA-APPLICATIONP,UNQUOTE,FQUOTEP,VARIABLEP,COND,EQUAL,OR,PSEUDO-TERMP,AND,XARGS,DECLARE,IFF-FLG,Y,X,DEFUN,MUTUAL-RECURSION" data-used-by="OBVIOUSLY-IFF-EQUIV-TERMS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="OBVIOUSLY-EQUIV-TERMS">obviously-equiv-terms</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a>
    (x y iff-flg)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> x) (<a class="sym-link system" href="axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> y))))
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal x y)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> x) (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> y)) nil)
        ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> x) (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> y)) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> iff-flg
            (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> x)
            (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> y)
            (<a class="sym-link system" href="axioms.html#def-unquote" data-sym="UNQUOTE">unquote</a> x)
            (<a class="sym-link system" href="axioms.html#def-unquote" data-sym="UNQUOTE">unquote</a> y)))
        ((<a class="sym-link system" href="basis-b.html#def-flambda-applicationp" data-sym="FLAMBDA-APPLICATIONP">flambda-applicationp</a> x) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-b.html#def-flambda-applicationp" data-sym="FLAMBDA-APPLICATIONP">flambda-applicationp</a> y)
            (let ((x-fn (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> x)) (y-fn (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> y))
                (x-args (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> x))
                (y-args (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> y)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal x-fn y-fn) (obviously-equiv-terms-lst x-args y-args))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((x-formals (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> x-fn)) (x-body (<a class="sym-link system" href="basis-b.html#def-lambda-body" data-sym="LAMBDA-BODY">lambda-body</a> x-fn))
                      (y-formals (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> y-fn))
                      (y-body (<a class="sym-link system" href="basis-b.html#def-lambda-body" data-sym="LAMBDA-BODY">lambda-body</a> y-fn)))
                    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> x-formals) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> y-formals))
                      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (<a class="sym-link system" href="basis-b.html#def-subcor-var" data-sym="SUBCOR-VAR">subcor-var</a> x-formals y-formals x-body)
                            y-body
                            iff-flg)
                          (obviously-equiv-terms-lst x-args y-args))
                        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> x-body y-body iff-flg)
                          (<a class="sym-link local-def" href="#def-obviously-equal-lambda-args" data-sym="OBVIOUSLY-EQUAL-LAMBDA-ARGS" title="(defun obviously-equal-lambda-args
       (x-formals-tail x-args-tail y-formals y-args)
  (declare
   (xargs :guard
    (and (symbol-listp x-formals-tail) (pseudo-term-listp x-args-tail)
...">obviously-equal-lambda-args</a> x-formals
                            (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> x)
                            y-formals
                            (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> y)))))))))))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> x) (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> y))) nil)
        ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> x) '(<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> <a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a>)) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> y <span class="number">1</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">2</span>) (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> y <span class="number">2</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> x) '<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a>) (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> y <span class="number">1</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> x) 'if) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> y <span class="number">1</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">3</span>) (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> y <span class="number">3</span>) iff-flg)
            (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">2</span>) (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> y <span class="number">2</span>) iff-flg)
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> iff-flg
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">2</span>) <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>) (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> y <span class="number">2</span>) (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> y <span class="number">1</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                  ((equal (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> y <span class="number">2</span>) <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>) (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">2</span>) (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> x <span class="number">1</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> x)) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> y)))
            (obviously-equiv-terms-lst (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> x) (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> y)))))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> obviously-equiv-terms-lst
    (x y)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (pseudo-term-listp x) (pseudo-term-listp y))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> x) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> (car x) (car y) nil)
          (obviously-equiv-terms-lst (cdr x) (cdr y)))))))</pre>
  </div>

<div class="form-block function" id="def-obviously-iff-equiv-terms" data-defines="OBVIOUSLY-IFF-EQUIV-TERMS" data-references="T,OBVIOUSLY-EQUIV-TERMS,PSEUDO-TERMP,AND,XARGS,DECLARE,Y,X,DEFUN" data-used-by="CHK-DEFABSSTOBJ-METHOD-LEMMAS" data-part-name="OBVIOUSLY-IFF-EQUIV-TERMS" data-part-args="Y,X" data-part-declare="Y,X,PSEUDO-TERMP,AND,XARGS,DECLARE" data-part-body="T,Y,X,OBVIOUSLY-EQUIV-TERMS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OBVIOUSLY-IFF-EQUIV-TERMS">obviously-iff-equiv-terms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-obviously-iff-equiv-terms" data-sym="OBVIOUSLY-IFF-EQUIV-TERMS" title="(defun obviously-iff-equiv-terms (x y)
  (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
  (obviously-equiv-terms x y t))">obviously-iff-equiv-terms</a>
  (x y)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> x) (<a class="sym-link system" href="axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> y))))
  (<a class="sym-link local-def" href="#def-obviously-equiv-terms" data-sym="OBVIOUSLY-EQUIV-TERMS" title="(mutual-recursion
 (defun obviously-equiv-terms (x y iff-flg)
   (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
   (or (equal x y)
       (cond ((or (variablep x) (variablep y)) nil)
...">obviously-equiv-terms</a> x y <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block function" id="def-chk-defabsstobj-method-lemmas" data-defines="CHK-DEFABSSTOBJ-METHOD-LEMMAS" data-references="OLD-PRESERVED-FORMULA,ABSSTOBJ-PRESERVED-FORMULA,EXPECTED-PRESERVED-FORMULA,NOT,OLD-GUARD-THM-FORMULA,GUARD-THM,TAUTOLOGYP,AND,TAUT-P,GUARD,CONJOIN,FLATTEN-ANDS-IN-LIT!,FCONS-TERM*,MAKE-IMPLICATION,EXPECTED-GUARD-THM-FORMULA,EQ,GUARD-THM-P,ONE-WAY-UNIFY-P,OBVIOUSLY-IFF-EQUIV-TERMS,QUASIQUOTE,TUPLE,FORMULA,OLD-CORR-FORMULA,ABSSTOBJ-CORRESPONDENCE-FORMULA,EXPECTED-CORR-FORMULA,EXEC,LOGIC,GUARD-PRE,FORMALS,LET*,T,CONS,VALUE,ASSERT$,NULL,COND,PRESERVED,ABSSTOBJ-METHOD,ACCESS,CORRESPONDENCE,LET,STATE,WRLD,MISSING,CORR-FN,ST$AP,ST$C,ST,METHOD,DEFUN" data-used-by="CHK-DEFABSSTOBJ-METHOD" data-part-name="CHK-DEFABSSTOBJ-METHOD-LEMMAS" data-part-args="STATE,WRLD,MISSING,CORR-FN,ST$AP,ST$C,ST,METHOD" data-part-body="OLD-PRESERVED-FORMULA,ST$AP,ABSSTOBJ-PRESERVED-FORMULA,EXPECTED-PRESERVED-FORMULA,NOT,OLD-GUARD-THM-FORMULA,GUARD-THM,TAUTOLOGYP,AND,TAUT-P,GUARD,CONJOIN,FLATTEN-ANDS-IN-LIT!,FCONS-TERM*,MAKE-IMPLICATION,EXPECTED-GUARD-THM-FORMULA,EQ,GUARD-THM-P,ONE-WAY-UNIFY-P,OBVIOUSLY-IFF-EQUIV-TERMS,QUASIQUOTE,TUPLE,FORMULA,OLD-CORR-FORMULA,ST$C,ST,CORR-FN,ABSSTOBJ-CORRESPONDENCE-FORMULA,EXPECTED-CORR-FORMULA,EXEC,LOGIC,GUARD-PRE,FORMALS,LET*,T,WRLD,MISSING,CONS,VALUE,ASSERT$,NULL,COND,PRESERVED,METHOD,ABSSTOBJ-METHOD,ACCESS,CORRESPONDENCE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFABSSTOBJ-METHOD-LEMMAS">chk-defabsstobj-method-lemmas</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defabsstobj-method-lemmas" data-sym="CHK-DEFABSSTOBJ-METHOD-LEMMAS" title="(defun chk-defabsstobj-method-lemmas
       (method st st$c st$ap corr-fn missing wrld state)
  (let ((correspondence (access absstobj-method method :correspondence))
        (preserved (access absstobj-method method :preserved)))
    (cond
...">chk-defabsstobj-method-lemmas</a>
  (method st st$c st$ap corr-fn missing wrld state)
  (let ((correspondence (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:correspondence</span>)) (preserved (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:preserved</span>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> correspondence) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> preserved) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons missing wrld))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:formals</span>)) (guard-pre (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:guard-pre</span>))
            (<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:logic</span>))
            (exec (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:exec</span>))
            (expected-corr-formula (<a class="sym-link local-def" href="#def-absstobj-correspondence-formula" data-sym="ABSSTOBJ-CORRESPONDENCE-FORMULA" title="(defun absstobj-correspondence-formula
       (f$a f$c corr-fn formals guard-pre st st$c wrld)
  (cond ((null formals) `(,corr-fn (,f$c) (,f$a)))
        (t
         (let* ((stobjs-out (stobjs-out f$c wrld))
...">absstobj-correspondence-formula</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
                exec
                corr-fn
                <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                guard-pre
                st
                st$c
                wrld))
            (old-corr-formula (<a class="sym-link system" href="history-management.html#def-formula" data-sym="FORMULA">formula</a> correspondence nil wrld))
            (tuple (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> old-corr-formula) `(,CORRESPONDENCE ,EXPECTED-CORR-FORMULA))
                ((<a class="sym-link local-def" href="#def-obviously-iff-equiv-terms" data-sym="OBVIOUSLY-IFF-EQUIV-TERMS" title="(defun obviously-iff-equiv-terms (x y)
  (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
  (obviously-equiv-terms x y t))">obviously-iff-equiv-terms</a> expected-corr-formula
                   old-corr-formula) nil)
                ((<a class="sym-link local-def" href="#def-one-way-unify-p" data-sym="ONE-WAY-UNIFY-P" title="(defun one-way-unify-p (pat term)
  (or (equal pat term)
      (mv-let (ans unify-subst) (one-way-unify pat term)
              (declare (ignore unify-subst)) ans)))">one-way-unify-p</a> old-corr-formula expected-corr-formula) nil)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(,CORRESPONDENCE ,EXPECTED-CORR-FORMULA ,@OLD-CORR-FORMULA))))
            (missing (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (tuple (cons tuple missing)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> missing)))
            (guard-thm-p (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:guard-thm-p</span>))
            (tuple (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> guard-thm-p <span class="keyword">:skip</span>) nil)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((expected-guard-thm-formula (make-implication (cons (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> corr-fn st$c st)
                           (<a class="sym-link local-def" href="#def-flatten-ands-in-lit_21" data-sym="FLATTEN-ANDS-IN-LIT!" title="(defun flatten-ands-in-lit! (term)
  (declare (xargs :guard (pseudo-termp term)))
  (case-match term
              ((&#39;if t1 t2 t3)
               (cond
...">flatten-ands-in-lit!</a> guard-pre))
                         (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> (<a class="sym-link local-def" href="#def-flatten-ands-in-lit_21" data-sym="FLATTEN-ANDS-IN-LIT!" title="(defun flatten-ands-in-lit! (term)
  (declare (xargs :guard (pseudo-termp term)))
  (case-match term
              ((&#39;if t1 t2 t3)
               (cond
...">flatten-ands-in-lit!</a> (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> exec <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld))))) (taut-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> guard-thm-p)
                          (<a class="sym-link system" href="rewrite.html#def-tautologyp" data-sym="TAUTOLOGYP">tautologyp</a> expected-guard-thm-formula wrld)))
                      (guard-thm (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:guard-thm</span>))
                      (old-guard-thm-formula (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> taut-p) (<a class="sym-link system" href="history-management.html#def-formula" data-sym="FORMULA">formula</a> guard-thm nil wrld))))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (taut-p nil)
                      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> old-guard-thm-formula) `(,GUARD-THM ,EXPECTED-GUARD-THM-FORMULA))
                      ((<a class="sym-link local-def" href="#def-obviously-iff-equiv-terms" data-sym="OBVIOUSLY-IFF-EQUIV-TERMS" title="(defun obviously-iff-equiv-terms (x y)
  (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
  (obviously-equiv-terms x y t))">obviously-iff-equiv-terms</a> expected-guard-thm-formula
                         old-guard-thm-formula) nil)
                      ((<a class="sym-link local-def" href="#def-one-way-unify-p" data-sym="ONE-WAY-UNIFY-P" title="(defun one-way-unify-p (pat term)
  (or (equal pat term)
      (mv-let (ans unify-subst) (one-way-unify pat term)
              (declare (ignore unify-subst)) ans)))">one-way-unify-p</a> old-guard-thm-formula
                         expected-guard-thm-formula) nil)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(,GUARD-THM ,EXPECTED-GUARD-THM-FORMULA
                          ,@OLD-GUARD-THM-FORMULA)))))))
            (missing (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (tuple (cons tuple missing)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> missing))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> preserved) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons missing wrld)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((expected-preserved-formula (<a class="sym-link local-def" href="#def-absstobj-preserved-formula" data-sym="ABSSTOBJ-PRESERVED-FORMULA" title="(defun absstobj-preserved-formula
       (f$a f$c formals guard-pre st st$c st$ap wrld)
  (cond ((null formals) (fcons-term* st$ap (fcons-term* f$a)))
        (t
         (let ((stobjs-out (stobjs-out f$c wrld))
...">absstobj-preserved-formula</a> <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
                     exec
                     <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                     guard-pre
                     st
                     st$c
                     st$ap
                     wrld)) (old-preserved-formula (<a class="sym-link system" href="history-management.html#def-formula" data-sym="FORMULA">formula</a> preserved nil wrld))
                  (tuple (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> old-preserved-formula) `(,PRESERVED ,EXPECTED-PRESERVED-FORMULA))
                      ((<a class="sym-link local-def" href="#def-obviously-iff-equiv-terms" data-sym="OBVIOUSLY-IFF-EQUIV-TERMS" title="(defun obviously-iff-equiv-terms (x y)
  (declare (xargs :guard (and (pseudo-termp x) (pseudo-termp y))))
  (obviously-equiv-terms x y t))">obviously-iff-equiv-terms</a> expected-preserved-formula
                         old-preserved-formula) nil)
                      ((<a class="sym-link local-def" href="#def-one-way-unify-p" data-sym="ONE-WAY-UNIFY-P" title="(defun one-way-unify-p (pat term)
  (or (equal pat term)
      (mv-let (ans unify-subst) (one-way-unify pat term)
              (declare (ignore unify-subst)) ans)))">one-way-unify-p</a> old-preserved-formula
                         expected-preserved-formula) nil)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(,PRESERVED ,EXPECTED-PRESERVED-FORMULA
                          ,@OLD-PRESERVED-FORMULA))))
                  (missing (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (tuple (cons tuple missing)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> missing))))
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons missing wrld))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-defabsstobj-method" data-defines="CHK-DEFABSSTOBJ-METHOD" data-references="CHK-DEFABSSTOBJ-METHOD-LEMMAS,T,CONS,VALUE,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,LD-SKIP-PROOFSP,MEMBER-EQ,OR,COND,CHK-JUST-NEW-NAME,FUNCTION,QUOTE,CHK-ALL-BUT-NEW-NAME,ER-PROGN,ER-LET*,ABSSTOBJ-METHOD,ACCESS,NAME,LET,STATE,WRLD,CTX,MISSING,CONGRUENT-TO,CORR-FN,ST$AP,ST$C,ST,METHOD,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFABSSTOBJ1" data-part-name="CHK-DEFABSSTOBJ-METHOD" data-part-args="STATE,WRLD,CTX,MISSING,CONGRUENT-TO,CORR-FN,ST$AP,ST$C,ST,METHOD" data-part-body="CORR-FN,ST$AP,ST$C,ST,CHK-DEFABSSTOBJ-METHOD-LEMMAS,T,MISSING,CONS,VALUE,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,LD-SKIP-PROOFSP,MEMBER-EQ,CONGRUENT-TO,OR,COND,CHK-JUST-NEW-NAME,STATE,FUNCTION,QUOTE,CTX,CHK-ALL-BUT-NEW-NAME,ER-PROGN,WRLD,ER-LET*,METHOD,ABSSTOBJ-METHOD,ACCESS,NAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFABSSTOBJ-METHOD">chk-defabsstobj-method</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defabsstobj-method" data-sym="CHK-DEFABSSTOBJ-METHOD" title="(defun chk-defabsstobj-method
       (method st st$c st$ap corr-fn congruent-to missing ctx wrld state)
  (let ((name (access absstobj-method method :name)))
    (er-let*
     ((wrld
...">chk-defabsstobj-method</a>
  (method st
    st$c
    st$ap
    corr-fn
    congruent-to
    missing
    ctx
    wrld
    state)
  (let ((name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name name ctx 'function wrld state)
           (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> name nil 'function nil ctx wrld state))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> congruent-to
           (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
             '(<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> include-book-with-locals))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons missing wrld)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-defabsstobj-method-lemmas" data-sym="CHK-DEFABSSTOBJ-METHOD-LEMMAS" title="(defun chk-defabsstobj-method-lemmas
       (method st st$c st$ap corr-fn missing wrld state)
  (let ((correspondence (access absstobj-method method :correspondence))
        (preserved (access absstobj-method method :preserved)))
    (cond
...">chk-defabsstobj-method-lemmas</a> method
            st
            st$c
            st$ap
            corr-fn
            missing
            wrld
            state))))))</pre>
  </div>

<div class="form-block function" id="def-intersperse" data-defines="INTERSPERSE" data-references="CDR,CAR,LIST*,T,ENDP,COND,LENGTH,=,TRUE-LISTP,AND,XARGS,DECLARE,LST2,LST1,DEFUN" data-used-by="SORT-ABSSTOBJ-NAMES" data-part-name="INTERSPERSE" data-part-args="LST2,LST1" data-part-declare="LENGTH,=,LST2,LST1,TRUE-LISTP,AND,XARGS,DECLARE" data-part-body="CDR,INTERSPERSE,LST2,CAR,LIST*,T,LST1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTERSPERSE">intersperse</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-intersperse" data-sym="INTERSPERSE" title="(defun intersperse (lst1 lst2)
  (declare
   (xargs :guard
    (and (true-listp lst1) (true-listp lst2) (= (length lst1) (length lst2)))))
  (cond ((endp lst1) nil)">intersperse</a>
  (lst1 lst2)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lst1)
        (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lst2)
        (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> lst1) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> lst2)))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst1) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car lst1)
        (car lst2)
        (<a class="sym-link local-def" href="#def-intersperse" data-sym="INTERSPERSE" title="(defun intersperse (lst1 lst2)
  (declare
   (xargs :guard
    (and (true-listp lst1) (true-listp lst2) (= (length lst1) (length lst2)))))
  (cond ((endp lst1) nil)">intersperse</a> (cdr lst1) (cdr lst2))))))</pre>
  </div>

<div class="form-block function" id="def-sort-absstobj-names" data-defines="SORT-ABSSTOBJ-NAMES" data-references="SET-DIFFERENCE-EQ,APPEND,INTERSPERSE,LST,LET,UPDATERS,ACCESSORS,NAMES,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="SORT-ABSSTOBJ-NAMES" data-part-args="UPDATERS,ACCESSORS,NAMES" data-part-body="NAMES,SET-DIFFERENCE-EQ,APPEND,UPDATERS,ACCESSORS,INTERSPERSE,LST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SORT-ABSSTOBJ-NAMES">sort-absstobj-names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sort-absstobj-names" data-sym="SORT-ABSSTOBJ-NAMES" title="(defun sort-absstobj-names (names accessors updaters)
  (let ((lst (intersperse accessors updaters)))
    (append lst (set-difference-eq names lst))))">sort-absstobj-names</a>
  (names accessors updaters)
  (let ((lst (<a class="sym-link local-def" href="#def-intersperse" data-sym="INTERSPERSE" title="(defun intersperse (lst1 lst2)
  (declare
   (xargs :guard
    (and (true-listp lst1) (true-listp lst2) (= (length lst1) (length lst2)))))
  (cond ((endp lst1) nil)">intersperse</a> accessors updaters)))
    (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> lst (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> names lst))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-defabsstobj1" data-defines="CHK-ACCEPTABLE-DEFABSSTOBJ1" data-references="CONS,ABSSTOBJ-METHOD,ACCESS,ASSOC-EQ,CDR,LET,CHK-DEFABSSTOBJ-METHOD,MISSING/WRLD,ER-LET*,SOFT,ER,LD-SKIP-PROOFSP,CAR,TRANSLATE-ABSSTOBJ-FIELD,METHOD,ERP,MV-LET,T,REVERSE,LIST*,VALUE,ENDP,COND,MISSING,METHODS,STATE,WRLD,CTX,SEE-DOC,CONGRUENT-TO,PROTECT-DEFAULT,TYPES,FIELDS,CORR-FN,ST$AP,ST$C,ST,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFABSSTOBJ" data-part-name="CHK-ACCEPTABLE-DEFABSSTOBJ1" data-part-args="MISSING,METHODS,STATE,WRLD,CTX,SEE-DOC,CONGRUENT-TO,PROTECT-DEFAULT,TYPES,FIELDS,CORR-FN,ST$AP,ST$C,ST" data-part-body="CONS,CHK-ACCEPTABLE-DEFABSSTOBJ1,ABSSTOBJ-METHOD,ACCESS,ASSOC-EQ,CDR,LET,CONGRUENT-TO,CORR-FN,ST$AP,CHK-DEFABSSTOBJ-METHOD,MISSING/WRLD,ER-LET*,SOFT,ER,CTX,SEE-DOC,STATE,LD-SKIP-PROOFSP,PROTECT-DEFAULT,TYPES,CAR,ST$C,ST,TRANSLATE-ABSSTOBJ-FIELD,METHOD,ERP,MV-LET,T,WRLD,METHODS,MISSING,REVERSE,LIST*,VALUE,FIELDS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-DEFABSSTOBJ1">chk-acceptable-defabsstobj1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-defabsstobj1" data-sym="CHK-ACCEPTABLE-DEFABSSTOBJ1" title="(defun chk-acceptable-defabsstobj1
       (st st$c st$ap corr-fn fields types protect-default congruent-to see-doc
        ctx wrld state methods missing)
  (cond
   ((endp fields) (value (list* (reverse missing) (reverse methods) wrld)))
...">chk-acceptable-defabsstobj1</a>
  (st st$c
    st$ap
    corr-fn
    fields
    types
    protect-default
    congruent-to
    see-doc
    ctx
    wrld
    state
    methods
    missing)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fields) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> missing) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> methods) wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp method)
        (<a class="sym-link local-def" href="#def-translate-absstobj-field" data-sym="TRANSLATE-ABSSTOBJ-FIELD" title="(defun translate-absstobj-field
       (st st-new absstobj-tuple st$c field type protect-default
        ld-skip-proofsp see-doc ctx wrld)
  (let* ((field0 field)
         (field
...">translate-absstobj-field</a> st
          nil
          nil
          st$c
          (car fields)
          (car types)
          protect-default
          (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
          see-doc
          ctx
          wrld)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft erp <span class="string">"~@0"</span> method))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((missing/wrld (<a class="sym-link local-def" href="#def-chk-defabsstobj-method" data-sym="CHK-DEFABSSTOBJ-METHOD" title="(defun chk-defabsstobj-method
       (method st st$c st$ap corr-fn congruent-to missing ctx wrld state)
  (let ((name (access absstobj-method method :name)))
    (er-let*
     ((wrld
...">chk-defabsstobj-method</a> method
                   st
                   st$c
                   st$ap
                   corr-fn
                   congruent-to
                   missing
                   ctx
                   wrld
                   state)))
              (let ((missing (car missing/wrld)) (wrld (cdr missing/wrld)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>) methods) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"The name ~x0 is introduced more than once by a ~
                       DEFABSSTOBJ event.  ~@1"</span>
                      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>)
                      see-doc))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-acceptable-defabsstobj1" data-sym="CHK-ACCEPTABLE-DEFABSSTOBJ1" title="(defun chk-acceptable-defabsstobj1
       (st st$c st$ap corr-fn fields types protect-default congruent-to see-doc
        ctx wrld state methods missing)
  (cond
   ((endp fields) (value (list* (reverse missing) (reverse methods) wrld)))
...">chk-acceptable-defabsstobj1</a> st
                      st$c
                      st$ap
                      corr-fn
                      (cdr fields)
                      (cdr types)
                      protect-default
                      congruent-to
                      see-doc
                      ctx
                      wrld
                      state
                      (cons method methods)
                      missing)))))))))))</pre>
  </div>

<div class="form-block function" id="def-first-keyword" data-defines="FIRST-KEYWORD" data-references="CDR,T,CAR,KEYWORDP,ENDP,COND,TRUE-LISTP,XARGS,DECLARE,LST,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFABSSTOBJ" data-part-name="FIRST-KEYWORD" data-part-args="LST" data-part-declare="LST,TRUE-LISTP,XARGS,DECLARE" data-part-body="CDR,FIRST-KEYWORD,T,CAR,KEYWORDP,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIRST-KEYWORD">first-keyword</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-first-keyword" data-sym="FIRST-KEYWORD" title="(defun first-keyword (lst)
  (declare (xargs :guard (true-listp lst)))
  (cond ((endp lst) nil) ((keywordp (car lst)) (car lst))
        (t (first-keyword (cdr lst)))))">first-keyword</a>
  (lst)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lst)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) nil)
    ((<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car lst)) (car lst))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-first-keyword" data-sym="FIRST-KEYWORD" title="(defun first-keyword (lst)
  (declare (xargs :guard (true-listp lst)))
  (cond ((endp lst) nil) ((keywordp (car lst)) (car lst))
        (t (first-keyword (cdr lst)))))">first-keyword</a> (cdr lst)))))</pre>
  </div>

<div class="form-block function" id="def-collect-defabsstobj-updaters" data-defines="COLLECT-DEFABSSTOBJ-UPDATERS" data-references="CONS,ASSOC-EQ,UPDATER-METHOD,MSG,STOBJ-FIELD-ACCESSOR-P,OR,NAME,EQ,NOT,CONSP,AND,CHILD,ASSERT$,STOBJS-OUT,EXEC,CDR,NULL,ABSSTOBJ-METHOD,ACCESS,UPDATER,CAR,METHOD,LET*,T,REVERSE,MV,ENDP,COND,UPDATERS-EXEC,ACCESSORS-EXEC,UPDATERS,ACCESSORS,WRLD,ALL-METHODS,ST$C,METHODS,DEFUN" data-used-by="CHK-DEFABSSTOBJ-UPDATERS" data-part-name="COLLECT-DEFABSSTOBJ-UPDATERS" data-part-args="UPDATERS-EXEC,ACCESSORS-EXEC,UPDATERS,ACCESSORS,WRLD,ALL-METHODS,ST$C,METHODS" data-part-body="CONS,ASSOC-EQ,UPDATER-METHOD,MSG,STOBJ-FIELD-ACCESSOR-P,OR,NAME,EQ,NOT,CONSP,AND,CHILD,ASSERT$,STOBJS-OUT,EXEC,WRLD,ALL-METHODS,ST$C,CDR,COLLECT-DEFABSSTOBJ-UPDATERS,NULL,ABSSTOBJ-METHOD,ACCESS,UPDATER,CAR,METHOD,LET*,T,UPDATERS-EXEC,ACCESSORS-EXEC,UPDATERS,ACCESSORS,REVERSE,MV,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-DEFABSSTOBJ-UPDATERS">collect-defabsstobj-updaters</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-defabsstobj-updaters" data-sym="COLLECT-DEFABSSTOBJ-UPDATERS" title="(defun collect-defabsstobj-updaters
       (methods st$c all-methods wrld accessors updaters accessors-exec
        updaters-exec)
  (cond
   ((endp methods)
...">collect-defabsstobj-updaters</a>
  (methods st$c
    all-methods
    wrld
    accessors
    updaters
    accessors-exec
    updaters-exec)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
        (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> accessors)
        (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> updaters)
        (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> accessors-exec)
        (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> updaters-exec)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((method (car methods)) (updater (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:updater</span>)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> updater) (<a class="sym-link local-def" href="#def-collect-defabsstobj-updaters" data-sym="COLLECT-DEFABSSTOBJ-UPDATERS" title="(defun collect-defabsstobj-updaters
       (methods st$c all-methods wrld accessors updaters accessors-exec
        updaters-exec)
  (cond
   ((endp methods)
...">collect-defabsstobj-updaters</a> (cdr methods)
              st$c
              all-methods
              wrld
              accessors
              updaters
              accessors-exec
              updaters-exec))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((exec (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:exec</span>)) (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> exec (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> exec wrld)))
                (child (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
                    (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))
                    (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) <span class="keyword">:df</span>))
                    (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))
                (name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (stobj-field-accessor-p exec st$c wrld))
                   (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> child)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The function spec for ~x0 specifies an :UPDATER ~
                          function, which is only allowed when the specified ~
                          :EXEC function is a stobj field accessor for the ~
                          foundational stobj.  However, the :EXEC function is ~
                          ~x1, which ~@2."</span>
                      name
                      exec
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((stobj-field-accessor-p exec st$c wrld) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"is an accessor of ~x0 for a non-stobj field"</span> st$c))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"is not a field accessor of ~x0"</span> st$c))))
                    nil
                    nil
                    nil
                    nil))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((updater-method (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> updater all-methods)))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> updater-method) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"In the function spec for ~x0, the :UPDATER ~
                                keyword has value ~x1.  However, there is no ~
                                function spec for ~x1."</span>
                            name
                            updater)
                          nil
                          nil
                          nil
                          nil))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-collect-defabsstobj-updaters" data-sym="COLLECT-DEFABSSTOBJ-UPDATERS" title="(defun collect-defabsstobj-updaters
       (methods st$c all-methods wrld accessors updaters accessors-exec
        updaters-exec)
  (cond
   ((endp methods)
...">collect-defabsstobj-updaters</a> (cdr methods)
                          st$c
                          all-methods
                          wrld
                          (cons name accessors)
                          (cons updater updaters)
                          (cons exec accessors-exec)
                          (cons (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method updater-method <span class="keyword">:exec</span>)
                            updaters-exec))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-defabsstobj-updaters-1" data-defines="CHK-DEFABSSTOBJ-UPDATERS-1" data-references="MSG,CDR,EQ,ASSERT$,CADR,ACTUAL-UPDATER-EXEC,MEMBER-EQ,ACCESSOR-TAIL,ACCESSOR-EXEC,CAR,UPDATER-EXEC,LET*,T,ENDP,COND,LST,UPDATERS-EXEC,UPDATERS,ACCESSORS-EXEC,ACCESSORS,DEFUN" data-used-by="CHK-DEFABSSTOBJ-UPDATERS" data-part-name="CHK-DEFABSSTOBJ-UPDATERS-1" data-part-args="LST,UPDATERS-EXEC,UPDATERS,ACCESSORS-EXEC,ACCESSORS" data-part-body="MSG,UPDATERS,ACCESSORS,CDR,CHK-DEFABSSTOBJ-UPDATERS-1,EQ,ASSERT$,CADR,ACTUAL-UPDATER-EXEC,LST,MEMBER-EQ,ACCESSOR-TAIL,ACCESSORS-EXEC,ACCESSOR-EXEC,CAR,UPDATER-EXEC,LET*,T,UPDATERS-EXEC,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFABSSTOBJ-UPDATERS-1">chk-defabsstobj-updaters-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defabsstobj-updaters-1" data-sym="CHK-DEFABSSTOBJ-UPDATERS-1" title="(defun chk-defabsstobj-updaters-1
       (accessors accessors-exec updaters updaters-exec lst)
  (cond ((endp updaters-exec) nil)
        (t
         (let* ((updater-exec (car updaters-exec))
...">chk-defabsstobj-updaters-1</a>
  (accessors accessors-exec updaters updaters-exec lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> updaters-exec) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((updater-exec (car updaters-exec)) (accessor-exec (car accessors-exec))
          (accessor-tail (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car accessors-exec) lst))
          (actual-updater-exec (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> accessor-tail)))
        (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> accessor-tail
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> updater-exec actual-updater-exec) (<a class="sym-link local-def" href="#def-chk-defabsstobj-updaters-1" data-sym="CHK-DEFABSSTOBJ-UPDATERS-1" title="(defun chk-defabsstobj-updaters-1
       (accessors accessors-exec updaters updaters-exec lst)
  (cond ((endp updaters-exec) nil)
        (t
         (let* ((updater-exec (car updaters-exec))
...">chk-defabsstobj-updaters-1</a> (cdr accessors)
                (cdr accessors-exec)
                (cdr updaters)
                (cdr updaters-exec)
                lst))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The :EXPORTS specify that the :UPDATER for accessor ~x0 ~
                      is the exported function, ~x1.  The :EXEC function for ~
                      ~x1 is ~x2, but is expected to be ~x3, which is the ~
                      updater corresponding to the :EXEC function for ~x0, ~
                      ~x4."</span>
                (car accessors)
                (car updaters)
                updater-exec
                actual-updater-exec
                accessor-exec))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-defabsstobj-updaters" data-defines="CHK-DEFABSSTOBJ-UPDATERS" data-references="STOBJ-PROPERTY,ACCESS,CHK-DEFABSSTOBJ-UPDATERS-1,STOBJ,QUOTE,GETPROPC,PROP,LET*,T,MV,COND,COLLECT-DEFABSSTOBJ-UPDATERS,UPDATERS-EXEC,ACCESSORS-EXEC,UPDATERS,ACCESSORS,MSG,MV-LET,WRLD,METHODS,ST$C,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="CHK-DEFABSSTOBJ-UPDATERS" data-part-args="WRLD,METHODS,ST$C" data-part-body="STOBJ-PROPERTY,ACCESS,CHK-DEFABSSTOBJ-UPDATERS-1,STOBJ,QUOTE,GETPROPC,PROP,LET*,T,MV,COND,WRLD,ST$C,METHODS,COLLECT-DEFABSSTOBJ-UPDATERS,UPDATERS-EXEC,ACCESSORS-EXEC,UPDATERS,ACCESSORS,MSG,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFABSSTOBJ-UPDATERS">chk-defabsstobj-updaters</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defabsstobj-updaters" data-sym="CHK-DEFABSSTOBJ-UPDATERS" title="(defun chk-defabsstobj-updaters (st$c methods wrld)
  (mv-let (msg accessors updaters accessors-exec updaters-exec)
          (collect-defabsstobj-updaters methods st$c methods wrld nil nil nil
                                        nil)
          (cond (msg (mv msg nil nil))
...">chk-defabsstobj-updaters</a>
  (st$c methods wrld)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> accessors updaters accessors-exec updaters-exec)
    (<a class="sym-link local-def" href="#def-collect-defabsstobj-updaters" data-sym="COLLECT-DEFABSSTOBJ-UPDATERS" title="(defun collect-defabsstobj-updaters
       (methods st$c all-methods wrld accessors updaters accessors-exec
        updaters-exec)
  (cond
   ((endp methods)
...">collect-defabsstobj-updaters</a> methods
      st$c
      methods
      wrld
      nil
      nil
      nil
      nil)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> nil nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((prop (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> st$c 'stobj nil wrld)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link local-def" href="#def-chk-defabsstobj-updaters-1" data-sym="CHK-DEFABSSTOBJ-UPDATERS-1" title="(defun chk-defabsstobj-updaters-1
       (accessors accessors-exec updaters updaters-exec lst)
  (cond ((endp updaters-exec) nil)
        (t
         (let* ((updater-exec (car updaters-exec))
...">chk-defabsstobj-updaters-1</a> accessors
                accessors-exec
                updaters
                updaters-exec
                (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> stobj-property prop <span class="keyword">:names</span>))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> nil nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil accessors updaters))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-defabsstobj" data-defines="CHK-ACCEPTABLE-DEFABSSTOBJ" data-references="LIST*,CHK-ACCEPTABLE-DEFABSSTOBJ1,STOBJ-LIVE-VAR,THE-LIVE-VAR,WRLD2,CHK-JUST-NEW-NAME,WRLD1,ER-LET*,CHK-LEGAL-DEFSTOBJ-NAME,STOBJ,CHK-ALL-BUT-NEW-NAME,ER-PROGN,FUNCTION-SYMBOLP,BOOLEANP,ABSSTOBJ-INFO,GETPROPC,SYMBOLP,AND,FIRST-KEYWORD,TRUE-LISTP,T,STOBJP,NOT,DEFABSSTOBJ,QUOTE,SOFT,ER,ATOM,COND,STATE,WRLD,CTX,SEE-DOC,NON-EXECUTABLE,CONGRUENT-TO,PROTECT-DEFAULT,EXPORTS,CORR-FN-EXISTS,CORR-FN,CREATOR,ST$AP,RECOGNIZER,ST$C,NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="CHK-ACCEPTABLE-DEFABSSTOBJ" data-part-args="STATE,WRLD,CTX,SEE-DOC,NON-EXECUTABLE,CONGRUENT-TO,PROTECT-DEFAULT,EXPORTS,CORR-FN-EXISTS,CORR-FN,CREATOR,ST$AP,RECOGNIZER,ST$C,NAME" data-part-body="PROTECT-DEFAULT,CREATOR,RECOGNIZER,LIST*,ST$AP,CHK-ACCEPTABLE-DEFABSSTOBJ1,STOBJ-LIVE-VAR,THE-LIVE-VAR,WRLD2,CHK-JUST-NEW-NAME,WRLD1,ER-LET*,CHK-LEGAL-DEFSTOBJ-NAME,STATE,STOBJ,CHK-ALL-BUT-NEW-NAME,ER-PROGN,NAME,FUNCTION-SYMBOLP,CORR-FN,CORR-FN-EXISTS,NON-EXECUTABLE,BOOLEANP,ABSSTOBJ-INFO,GETPROPC,SYMBOLP,CONGRUENT-TO,AND,FIRST-KEYWORD,TRUE-LISTP,WRLD,T,ST$C,STOBJP,NOT,SEE-DOC,DEFABSSTOBJ,QUOTE,CTX,SOFT,ER,EXPORTS,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-DEFABSSTOBJ">chk-acceptable-defabsstobj</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-defabsstobj" data-sym="CHK-ACCEPTABLE-DEFABSSTOBJ" title="(defun chk-acceptable-defabsstobj
       (name st$c recognizer st$ap creator corr-fn corr-fn-exists exports
        protect-default congruent-to non-executable see-doc ctx wrld state)
  (cond
   ((atom exports)
...">chk-acceptable-defabsstobj</a>
  (name st$c
    recognizer
    st$ap
    creator
    corr-fn
    corr-fn-exists
    exports
    protect-default
    congruent-to
    non-executable
    see-doc
    ctx
    wrld
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> exports) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"~x0 requires at least one export.  ~@1"</span>
        '<a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a>
        see-doc))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> st$c <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The symbol ~x0 is not the name of a stobj in the current ACL2 world. ~
         ~ ~@1"</span>
        st$c
        see-doc))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> exports)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"DEFABSSTOBJ requires the value of its :EXPORTS keyword argument to ~
         be a non-empty true list.  ~@0"</span>
        see-doc))
    ((<a class="sym-link local-def" href="#def-first-keyword" data-sym="FIRST-KEYWORD" title="(defun first-keyword (lst)
  (declare (xargs :guard (true-listp lst)))
  (cond ((endp lst) nil) ((keywordp (car lst)) (car lst))
        (t (first-keyword (cdr lst)))))">first-keyword</a> exports) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The keyword ~x0 is being specified as an export.  This may indicate ~
         a parenthesis error, since keywords cannot be exports.  ~@1"</span>
        (<a class="sym-link local-def" href="#def-first-keyword" data-sym="FIRST-KEYWORD" title="(defun first-keyword (lst)
  (declare (xargs :guard (true-listp lst)))
  (cond ((endp lst) nil) ((keywordp (car lst)) (car lst))
        (t (first-keyword (cdr lst)))))">first-keyword</a> exports)
        see-doc))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp congruent-to)
           (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> congruent-to 'absstobj-info nil wrld)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The :CONGRUENT-TO parameter of a DEFABSSTOBJ must either be nil or ~
         the name of an existing abstract stobj, but the value ~x0 is ~
         neither.  ~@1."</span>
        congruent-to
        see-doc))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> non-executable)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"DEFABSSTOBJ requires the :NON-EXECUTABLE keyword argument to have a ~
         Boolean value.  See :DOC defabsstobj."</span>))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> corr-fn-exists)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"DEFABSSTOBJ requires the :CORR-FN-EXISTS keyword argument to have a ~
         Boolean value.  See :DOC defabsstobj."</span>))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> congruent-to)
       corr-fn-exists
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp corr-fn) (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> corr-fn wrld)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Since :CORR-FN-EXISTS is T, the DEFABSSTOBJ event for ~x0 is illegal ~
         because the value of :CORR-FN must be a known function symbol, yet ~
         ~x1 is not.  See :DOC stobj-attachment-restrictions for restrictions ~
         on the creator and exported functions when :CORR-FN-EXISTS has value ~
         NIL."</span>
        name
        corr-fn))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (chk-all-but-new-name name ctx 'stobj wrld state)
        (<a class="sym-link local-def" href="#def-chk-legal-defstobj-name" data-sym="CHK-LEGAL-DEFSTOBJ-NAME" title="(defun chk-legal-defstobj-name (name state)
  (cond
   ((eq name &#39;state)
    (er soft (cons &#39;defstobj name)
        &quot;STATE is an illegal name for a user-declared ~
...">chk-legal-defstobj-name</a> name state)
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld1 (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> name nil 'stobj nil ctx wrld state)) (wrld2 (<a class="sym-link system" href="history-management.html#def-chk-just-new-name" data-sym="CHK-JUST-NEW-NAME">chk-just-new-name</a> (<a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a> name)
                nil
                'stobj-live-var
                nil
                ctx
                wrld1
                state)))
          (<a class="sym-link local-def" href="#def-chk-acceptable-defabsstobj1" data-sym="CHK-ACCEPTABLE-DEFABSSTOBJ1" title="(defun chk-acceptable-defabsstobj1
       (st st$c st$ap corr-fn fields types protect-default congruent-to see-doc
        ctx wrld state methods missing)
  (cond
   ((endp fields) (value (list* (reverse missing) (reverse methods) wrld)))
...">chk-acceptable-defabsstobj1</a> name
            st$c
            st$ap
            corr-fn
            (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> recognizer creator exports)
            (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:recognizer</span> <span class="keyword">:creator</span> nil)
            protect-default
            congruent-to
            see-doc
            ctx
            wrld2
            state
            nil
            nil))))))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-axiomatic-defs" data-defines="DEFABSSTOBJ-AXIOMATIC-DEFS" data-references="CDR,XARGS,DECLARE,QUASIQUOTE,ABSSTOBJ-METHOD,ACCESS,MV,STOBJS-IN-LOGIC,LOGIC,GUARD-POST,FORMALS,NAME,MV-LET,CAR,METHOD,LET,CONS,T,ENDP,COND,METHODS,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="DEFABSSTOBJ-AXIOMATIC-DEFS" data-part-args="METHODS" data-part-body="CDR,DEFABSSTOBJ-AXIOMATIC-DEFS,XARGS,DECLARE,QUASIQUOTE,ABSSTOBJ-METHOD,ACCESS,MV,STOBJS-IN-LOGIC,LOGIC,GUARD-POST,FORMALS,NAME,MV-LET,CAR,METHOD,LET,CONS,T,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-AXIOMATIC-DEFS">defabsstobj-axiomatic-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-axiomatic-defs" data-sym="DEFABSSTOBJ-AXIOMATIC-DEFS" title="(defun defabsstobj-axiomatic-defs (methods)
  (cond ((endp methods) nil)
        (t
         (cons
          (let ((method (car methods)))
...">defabsstobj-axiomatic-defs</a>
  (methods)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (let ((method (car methods)))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> guard-post <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> stobjs-in-logic)
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:formals</span>)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:guard-post</span>)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:logic</span>)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:stobjs-in-logic</span>))
            `(,NAME ,FORMALS
              (declare (xargs <span class="keyword">:guard</span> ,GUARD-POST
                  ,@(LET ((STOBJS (REMOVE-EQ NIL STOBJS-IN-LOGIC)))
    (AND STOBJS `(:STOBJS ,STOBJS)))))
              (,LOGIC ,@FORMALS))))
        (<a class="sym-link local-def" href="#def-defabsstobj-axiomatic-defs" data-sym="DEFABSSTOBJ-AXIOMATIC-DEFS" title="(defun defabsstobj-axiomatic-defs (methods)
  (cond ((endp methods) nil)
        (t
         (cons
          (let ((method (car methods)))
...">defabsstobj-axiomatic-defs</a> (cdr methods))))))</pre>
  </div>

<div class="form-block function" id="def-with-inside-absstobj-update" data-defines="WITH-INSIDE-ABSSTOBJ-UPDATE" data-references="POP,PUSH,T,DECF,THE,INCF,FIXNUM,QUOTE,TYPEP,OUR-MULTIPLE-VALUE-PROG1,SETF,EQL,EQ,COND,SIMPLE-ARRAY,TYPE,SVREF,*INSIDE-ABSSTOBJ-UPDATE*,LET*,QUASIQUOTE,SYMBOLP,AND,XARGS,DECLARE,FORM,NAME,SAVED,TEMP,DEFUN" data-used-by="DEFABSSTOBJ-RAW-DEF" data-part-name="WITH-INSIDE-ABSSTOBJ-UPDATE" data-part-args="FORM,NAME,SAVED,TEMP" data-part-declare="TEMP,NAME,SYMBOLP,AND,XARGS,DECLARE" data-part-body="POP,PUSH,T,DECF,THE,INCF,FIXNUM,QUOTE,TYPEP,OUR-MULTIPLE-VALUE-PROG1,SETF,EQL,EQ,COND,SIMPLE-ARRAY,TYPE,DECLARE,SVREF,*INSIDE-ABSSTOBJ-UPDATE*,LET*,QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-INSIDE-ABSSTOBJ-UPDATE">with-inside-absstobj-update</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-with-inside-absstobj-update" data-sym="WITH-INSIDE-ABSSTOBJ-UPDATE" title="(defun with-inside-absstobj-update (temp saved name form)
  (declare (xargs :guard (and (symbolp name) (symbolp temp))))
  `(let* ((,temp *inside-absstobj-update*) (,saved (svref ,temp 0)))
     (declare (type simple-array ,temp))
     (cond ((eq ,saved :ignore) ,form)
...">with-inside-absstobj-update</a>
  (temp saved name form)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp name) (symbolp temp))))
  `(<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((,TEMP *inside-absstobj-update*) (,SAVED (svref ,TEMP <span class="number">0</span>)))
    (declare (type simple-array ,TEMP))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,SAVED <span class="keyword">:ignore</span>) ,FORM)
      ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> ,SAVED <span class="number">0</span>) (setf (svref ,TEMP <span class="number">0</span>) <span class="number">1</span>)
        (our-multiple-value-prog1 ,FORM (setf (svref ,TEMP <span class="number">0</span>) <span class="number">0</span>)))
      ((typep ,SAVED 'fixnum) (incf (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> fixnum (svref ,TEMP <span class="number">0</span>)))
        (our-multiple-value-prog1 ,FORM
          (decf (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> fixnum (svref ,TEMP <span class="number">0</span>)))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> nil ,SAVED) (setf (svref ,TEMP <span class="number">0</span>) ',NAME)
            (our-multiple-value-prog1 ,FORM (setf (svref ,TEMP <span class="number">0</span>) nil)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (push ',NAME (svref ,TEMP <span class="number">0</span>))
            (our-multiple-value-prog1 ,FORM (pop (svref ,TEMP <span class="number">0</span>)))))))))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-raw-def" data-defines="DEFABSSTOBJ-RAW-DEF" data-references="&REST,LIST,SAVED,TEMP,WITH-INSIDE-ABSSTOBJ-UPDATE,T,NULL,COND,BODY,ARGS,QUOTE,CONS,QUASIQUOTE,FORM0,PROTECT,EXEC,ABSSTOBJ-METHOD,ACCESS,NAME,LET*,METHOD,DEFUN" data-used-by="DEFABSSTOBJ-RAW-DEFS-REC" data-part-name="DEFABSSTOBJ-RAW-DEF" data-part-args="METHOD" data-part-body="&REST,LIST,SAVED,TEMP,WITH-INSIDE-ABSSTOBJ-UPDATE,T,NULL,COND,BODY,ARGS,QUOTE,CONS,QUASIQUOTE,FORM0,PROTECT,EXEC,METHOD,ABSSTOBJ-METHOD,ACCESS,NAME,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-RAW-DEF">defabsstobj-raw-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-raw-def" data-sym="DEFABSSTOBJ-RAW-DEF" title="(defun defabsstobj-raw-def (method)
  (let* ((name (access absstobj-method method :name))
         (exec (access absstobj-method method :exec))
         (protect (access absstobj-method method :protect))
         (form0 `(cons &#39;,exec args))
...">defabsstobj-raw-def</a>
  (method)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>)) (exec (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:exec</span>))
      (protect (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:protect</span>))
      (form0 `(cons ',EXEC <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
      (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> protect) form0)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link local-def" href="#def-with-inside-absstobj-update" data-sym="WITH-INSIDE-ABSSTOBJ-UPDATE" title="(defun with-inside-absstobj-update (temp saved name form)
  (declare (xargs :guard (and (symbolp name) (symbolp temp))))
  `(let* ((,temp *inside-absstobj-update*) (,saved (svref ,temp 0)))
     (declare (type simple-array ,temp))
     (cond ((eq ,saved :ignore) ,form)
...">with-inside-absstobj-update</a> 'temp 'saved ',NAME ,FORM0)))))
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name '(&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-raw-defs-rec" data-defines="DEFABSSTOBJ-RAW-DEFS-REC" data-references="CDR,CAR,DEFABSSTOBJ-RAW-DEF,CONS,T,ENDP,COND,METHODS,DEFUN" data-used-by="DEFABSSTOBJ-RAW-DEFS" data-part-name="DEFABSSTOBJ-RAW-DEFS-REC" data-part-args="METHODS" data-part-body="CDR,DEFABSSTOBJ-RAW-DEFS-REC,CAR,DEFABSSTOBJ-RAW-DEF,CONS,T,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-RAW-DEFS-REC">defabsstobj-raw-defs-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-raw-defs-rec" data-sym="DEFABSSTOBJ-RAW-DEFS-REC" title="(defun defabsstobj-raw-defs-rec (methods)
  (cond ((endp methods) nil)
        (t
         (cons (defabsstobj-raw-def (car methods))
               (defabsstobj-raw-defs-rec (cdr methods))))))">defabsstobj-raw-defs-rec</a>
  (methods)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-defabsstobj-raw-def" data-sym="DEFABSSTOBJ-RAW-DEF" title="(defun defabsstobj-raw-def (method)
  (let* ((name (access absstobj-method method :name))
         (exec (access absstobj-method method :exec))
         (protect (access absstobj-method method :protect))
         (form0 `(cons &#39;,exec args))
...">defabsstobj-raw-def</a> (car methods))
        (<a class="sym-link local-def" href="#def-defabsstobj-raw-defs-rec" data-sym="DEFABSSTOBJ-RAW-DEFS-REC" title="(defun defabsstobj-raw-defs-rec (methods)
  (cond ((endp methods) nil)
        (t
         (cons (defabsstobj-raw-def (car methods))
               (defabsstobj-raw-defs-rec (cdr methods))))))">defabsstobj-raw-defs-rec</a> (cdr methods))))))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-raw-defs" data-defines="DEFABSSTOBJ-RAW-DEFS" data-references="CDDR,DEFABSSTOBJ-RAW-DEFS-REC,CONS,&REST,ARGS,EQ,NOT,ASSERT$,EXEC,CADR,T,LIVE-STOBJP,COND,Y,LET,QUOTE,LIST,X,QUASIQUOTE,ABSSTOBJ-NAME,OR,LOGIC,ABSSTOBJ-METHOD,ACCESS,NAME,CAR,METHOD,LET*,LIST*,METHODS,ST-NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="DEFABSSTOBJ-RAW-DEFS" data-part-args="METHODS,ST-NAME" data-part-body="CDDR,DEFABSSTOBJ-RAW-DEFS-REC,CONS,&REST,ARGS,EQ,NOT,ASSERT$,EXEC,CADR,T,LIVE-STOBJP,COND,Y,LET,QUOTE,LIST,X,QUASIQUOTE,ST-NAME,ABSSTOBJ-NAME,OR,LOGIC,ABSSTOBJ-METHOD,ACCESS,NAME,METHODS,CAR,METHOD,LET*,LIST*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-RAW-DEFS">defabsstobj-raw-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-raw-defs" data-sym="DEFABSSTOBJ-RAW-DEFS" title="(defun defabsstobj-raw-defs (st-name methods)
  (list*
   (let* ((method (car methods))
          (name (access absstobj-method method :name))
          (logic
...">defabsstobj-raw-defs</a>
  (st-name methods)
  (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((method (car methods)) (name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>))
        (<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:logic</span>)
            (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> st-name <span class="keyword">:recognizer-logic</span>))))
      `(,NAME (x)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'let
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'y x))
          '(<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-live-stobjp" data-sym="LIVE-STOBJP">live-stobjp</a> y) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (,LOGIC y))))))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((method (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> methods)) (name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>))
        (exec (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:exec</span>)))
      (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> exec '<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
        `(,NAME (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (cons ',EXEC <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
    (<a class="sym-link local-def" href="#def-defabsstobj-raw-defs-rec" data-sym="DEFABSSTOBJ-RAW-DEFS-REC" title="(defun defabsstobj-raw-defs-rec (methods)
  (cond ((endp methods) nil)
        (t
         (cons (defabsstobj-raw-def (car methods))
               (defabsstobj-raw-defs-rec (cdr methods))))))">defabsstobj-raw-defs-rec</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> methods))))</pre>
  </div>

<div class="form-block function" id="def-expand-recognizer" data-defines="EXPAND-RECOGNIZER" data-references="SOFT,ER,T,CDDDDR,NULL,ASSOC-KEYWORD,CDR,KEYWORD-VALUE-LISTP,CONSP,AND,LIST,VALUE,SYMBOLP,COND,ABSSTOBJ-NAME,OR,LET,STATE,CTX,SEE-DOC,RECOGNIZER,ST-NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="EXPAND-RECOGNIZER" data-part-args="STATE,CTX,SEE-DOC,RECOGNIZER,ST-NAME" data-part-body="SEE-DOC,CTX,SOFT,ER,T,CDDDDR,NULL,ASSOC-KEYWORD,CDR,KEYWORD-VALUE-LISTP,CONSP,AND,LIST,VALUE,SYMBOLP,COND,ST-NAME,ABSSTOBJ-NAME,OR,RECOGNIZER,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPAND-RECOGNIZER">expand-recognizer</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-expand-recognizer" data-sym="EXPAND-RECOGNIZER" title="(defun expand-recognizer (st-name recognizer see-doc ctx state)
  (let ((recognizer (or recognizer (absstobj-name st-name :recognizer))))
    (cond
     ((symbolp recognizer)
      (value
...">expand-recognizer</a>
  (st-name recognizer see-doc ctx state)
  (let ((recognizer (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> recognizer (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> st-name <span class="keyword">:recognizer</span>))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp recognizer) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> recognizer
            <span class="keyword">:logic</span> (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> st-name <span class="keyword">:recognizer-logic</span>)
            <span class="keyword">:exec</span> (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> st-name <span class="keyword">:recognizer-exec</span>))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp recognizer)
         (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> (cdr recognizer))
         (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:logic</span> (cdr recognizer))
         (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:exec</span> (cdr recognizer))
         (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> (cdr recognizer)))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> recognizer))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"Illegal :RECOGNIZER field.  ~@0"</span> see-doc)))))</pre>
  </div>

<div class="form-block function" id="def-put-absstobjs-in-and-outs" data-defines="PUT-ABSSTOBJS-IN-AND-OUTS" data-references="UPDATE-NTH,IF,STOBJS-IN,QUOTE,PUTPROP,ABSSTOBJ-METHOD,ACCESS,MV,CAR,METHOD,LET,STOBJS-OUT,STOBJS-IN-EXEC,POSN,NAME,MV-LET,CDR,T,ENDP,COND,WRLD,METHODS,ST,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="PUT-ABSSTOBJS-IN-AND-OUTS" data-part-args="WRLD,METHODS,ST" data-part-body="UPDATE-NTH,IF,STOBJS-IN,QUOTE,PUTPROP,ABSSTOBJ-METHOD,ACCESS,MV,CAR,METHOD,LET,STOBJS-OUT,STOBJS-IN-EXEC,POSN,NAME,MV-LET,CDR,ST,PUT-ABSSTOBJS-IN-AND-OUTS,T,WRLD,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-ABSSTOBJS-IN-AND-OUTS">put-absstobjs-in-and-outs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-absstobjs-in-and-outs" data-sym="PUT-ABSSTOBJS-IN-AND-OUTS" title="(defun put-absstobjs-in-and-outs (st methods wrld)
  (cond ((endp methods) wrld)
        (t
         (put-absstobjs-in-and-outs st (cdr methods)
                                    (mv-let
...">put-absstobjs-in-and-outs</a>
  (st methods wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-put-absstobjs-in-and-outs" data-sym="PUT-ABSSTOBJS-IN-AND-OUTS" title="(defun put-absstobjs-in-and-outs (st methods wrld)
  (cond ((endp methods) wrld)
        (t
         (put-absstobjs-in-and-outs st (cdr methods)
                                    (mv-let
...">put-absstobjs-in-and-outs</a> st
        (cdr methods)
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (name posn stobjs-in-exec <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
          (let ((method (car methods)))
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:stobjs-in-posn</span>)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:stobjs-in-exec</span>)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:stobjs-out</span>)))
          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
            '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
            (if posn
              (<a class="sym-link system" href="axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> posn st stobjs-in-exec)
              stobjs-in-exec)
            (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> wrld)))))))</pre>
  </div>

<div class="form-block function" id="def-method-exec" data-defines="METHOD-EXEC" data-references="CDR,T,CAR,ABSSTOBJ-METHOD,ACCESS,EQ,QUOTE,HARD,ER,ENDP,COND,METHODS,NAME,DEFUN" data-part-name="METHOD-EXEC" data-part-args="METHODS,NAME" data-part-body="CDR,T,CAR,ABSSTOBJ-METHOD,ACCESS,EQ,NAME,METHOD-EXEC,QUOTE,HARD,ER,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="METHOD-EXEC">method-exec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-method-exec" data-sym="METHOD-EXEC" title="(defun method-exec (name methods)
  (cond
   ((endp methods)
    (er hard &#39;method-exec &quot;Name ~x0 not found in methods, ~x1.&quot; name methods))
   ((eq name (access absstobj-method (car methods) :name))
...">method-exec</a>
  (name methods)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-method-exec" data-sym="METHOD-EXEC" title="(defun method-exec (name methods)
  (cond
   ((endp methods)
    (er hard &#39;method-exec &quot;Name ~x0 not found in methods, ~x1.&quot; name methods))
   ((eq name (access absstobj-method (car methods) :name))
...">method-exec</a>
        <span class="string">"Name ~x0 not found in methods, ~x1."</span>
        name
        methods))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:name</span>)) (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:exec</span>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-method-exec" data-sym="METHOD-EXEC" title="(defun method-exec (name methods)
  (cond
   ((endp methods)
    (er hard &#39;method-exec &quot;Name ~x0 not found in methods, ~x1.&quot; name methods))
   ((eq name (access absstobj-method (car methods) :name))
...">method-exec</a> name (cdr methods)))))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-raw-init" data-defines="DEFABSSTOBJ-RAW-INIT" data-references="QUASIQUOTE,METHODS,CREATOR-NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="DEFABSSTOBJ-RAW-INIT" data-part-args="METHODS,CREATOR-NAME" data-part-body="QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-RAW-INIT">defabsstobj-raw-init</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-raw-init" data-sym="DEFABSSTOBJ-RAW-INIT" title="(defun defabsstobj-raw-init (creator-name methods)
  `(,(method-exec creator-name methods)))">defabsstobj-raw-init</a>
  (creator-name methods)
  `(,(METHOD-EXEC CREATOR-NAME METHODS)))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-missing-msg" data-defines="DEFABSSTOBJ-MISSING-MSG" data-references="CDR,ENDP,COND,MSG,DEFTHM,QUASIQUOTE,EXPECTED-DEFTHM,CDDR,OLD-FORMULA,T,CADR,UNTRANSLATE,EXPECTED-FORMULA,NAME,CAR,TUPLE,LET*,ASSERT$,WRLD,MISSING,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="DEFABSSTOBJ-MISSING-MSG" data-part-args="WRLD,MISSING" data-part-body="DEFABSSTOBJ-MISSING-MSG,CDR,ENDP,COND,MSG,DEFTHM,QUASIQUOTE,EXPECTED-DEFTHM,CDDR,OLD-FORMULA,WRLD,T,CADR,UNTRANSLATE,EXPECTED-FORMULA,NAME,CAR,TUPLE,LET*,MISSING,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-MISSING-MSG">defabsstobj-missing-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-missing-msg" data-sym="DEFABSSTOBJ-MISSING-MSG" title="(defun defabsstobj-missing-msg (missing wrld)
  (assert$ missing
           (let* ((tuple (car missing))
                  (name (car tuple))
                  (expected-formula (untranslate (cadr tuple) t wrld))
...">defabsstobj-missing-msg</a>
  (missing wrld)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> missing
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tuple (car missing)) (name (car tuple))
        (expected-formula (untranslate (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld))
        (old-formula (untranslate (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> tuple) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld))
        (expected-defthm `(<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,NAME ,EXPECTED-FORMULA <span class="keyword">:rule-classes</span> nil))
        (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (old-formula (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~%~Y01[Note discrepancy with existing ~
                                        formula named ~x2:~|  ~Y31~|]~%"</span>
                expected-defthm
                nil
                name
                old-formula))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~%~Y01"</span> expected-defthm nil name old-formula)))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr missing)) <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~@1"</span>
            <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
            (<a class="sym-link local-def" href="#def-defabsstobj-missing-msg" data-sym="DEFABSSTOBJ-MISSING-MSG" title="(defun defabsstobj-missing-msg (missing wrld)
  (assert$ missing
           (let* ((tuple (car missing))
                  (name (car tuple))
                  (expected-formula (untranslate (cadr tuple) t wrld))
...">defabsstobj-missing-msg</a> (cdr missing) wrld)))))))</pre>
  </div>

<div class="form-block function" id="def-update-guard-post" data-defines="UPDATE-GUARD-POST" data-references="CDR,ACCESS,SUBLIS-FN-SIMPLE,CAR,ABSSTOBJ-METHOD,CHANGE,CONS,T,ENDP,COND,METHODS,LOGIC-SUBST,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="UPDATE-GUARD-POST" data-part-args="METHODS,LOGIC-SUBST" data-part-body="CDR,UPDATE-GUARD-POST,ACCESS,LOGIC-SUBST,SUBLIS-FN-SIMPLE,CAR,ABSSTOBJ-METHOD,CHANGE,CONS,T,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-GUARD-POST">update-guard-post</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-guard-post" data-sym="UPDATE-GUARD-POST" title="(defun update-guard-post (logic-subst methods)
  (cond ((endp methods) nil)
        (t
         (cons
          (change absstobj-method (car methods) :guard-post
...">update-guard-post</a>
  (logic-subst methods)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> absstobj-method
          (car methods)
          <span class="keyword">:guard-post</span> (<a class="sym-link system" href="history-management.html#def-sublis-fn-simple" data-sym="SUBLIS-FN-SIMPLE">sublis-fn-simple</a> logic-subst
            (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:guard-pre</span>)))
        (<a class="sym-link local-def" href="#def-update-guard-post" data-sym="UPDATE-GUARD-POST" title="(defun update-guard-post (logic-subst methods)
  (cond ((endp methods) nil)
        (t
         (cons
          (change absstobj-method (car methods) :guard-post
...">update-guard-post</a> logic-subst (cdr methods))))))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-logic-subst" data-defines="DEFABSSTOBJ-LOGIC-SUBST" data-references="CDR,CAR,ABSSTOBJ-METHOD,ACCESS,ACONS,T,ENDP,COND,METHODS,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="DEFABSSTOBJ-LOGIC-SUBST" data-part-args="METHODS" data-part-body="CDR,DEFABSSTOBJ-LOGIC-SUBST,CAR,ABSSTOBJ-METHOD,ACCESS,ACONS,T,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-LOGIC-SUBST">defabsstobj-logic-subst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-logic-subst" data-sym="DEFABSSTOBJ-LOGIC-SUBST" title="(defun defabsstobj-logic-subst (methods)
  (cond ((endp methods) nil)
        (t
         (acons (access absstobj-method (car methods) :logic)
                (access absstobj-method (car methods) :name)">defabsstobj-logic-subst</a>
  (methods)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:logic</span>)
        (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:name</span>)
        (<a class="sym-link local-def" href="#def-defabsstobj-logic-subst" data-sym="DEFABSSTOBJ-LOGIC-SUBST" title="(defun defabsstobj-logic-subst (methods)
  (cond ((endp methods) nil)
        (t
         (acons (access absstobj-method (car methods) :logic)
                (access absstobj-method (car methods) :name)">defabsstobj-logic-subst</a> (cdr methods))))))</pre>
  </div>

<div class="form-block function" id="def-chk-defabsstobj-guard" data-defines="CHK-DEFABSSTOBJ-GUARD" data-references="VALUE-CMP,ER-CMP,COND,STOBJS-IN,T,QUOTE,ABSSTOBJ-METHOD,ACCESS,TRANSLATE-CMP,MSG,MV-LET,STATE-VARS,WRLD,CTX,METHOD,DEFUN" data-used-by="CHK-DEFABSSTOBJ-GUARDS1" data-part-name="CHK-DEFABSSTOBJ-GUARD" data-part-args="STATE-VARS,WRLD,CTX,METHOD" data-part-body="VALUE-CMP,ER-CMP,COND,STATE-VARS,WRLD,STOBJS-IN,T,QUOTE,METHOD,ABSSTOBJ-METHOD,ACCESS,TRANSLATE-CMP,MSG,CTX,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFABSSTOBJ-GUARD">chk-defabsstobj-guard</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defabsstobj-guard" data-sym="CHK-DEFABSSTOBJ-GUARD" title="(defun chk-defabsstobj-guard (method ctx wrld state-vars)
  (mv-let (ctx msg)
          (translate-cmp (access absstobj-method method :guard-post) &#39;(nil) t
                         (stobjs-in (access absstobj-method method :name) wrld)
                         ctx wrld state-vars)
...">chk-defabsstobj-guard</a>
  (method ctx wrld state-vars)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ctx <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)
    (translate-cmp (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:guard-post</span>)
      '(nil)
      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
      (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>) wrld)
      ctx
      wrld
      state-vars)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ctx (er-cmp ctx
          <span class="string">"The guard for exported function ~x0 fails to ~
                              pass a test for being suitably single-threaded. ~
                              ~ Here is that guard (derived from the guard ~
                              for function ~x1).~|  ~x2~|And here is the ~
                              error message for the failed test.~|  ~@3"</span>
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>)
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:logic</span>)
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:guard-post</span>)
          <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (value-cmp nil)))))</pre>
  </div>

<div class="form-block function" id="def-chk-defabsstobj-guards1" data-defines="CHK-DEFABSSTOBJ-GUARDS1" data-references="ASSERT$,CDR,CAR,CHK-DEFABSSTOBJ-GUARD,MSG0,CTX0,MV-LET,T,ENDP,COND,STATE-VARS,WRLD,CTX,MSG,METHODS,DEFUN" data-used-by="CHK-DEFABSSTOBJ-GUARDS" data-part-name="CHK-DEFABSSTOBJ-GUARDS1" data-part-args="STATE-VARS,WRLD,CTX,MSG,METHODS" data-part-body="ASSERT$,CDR,CHK-DEFABSSTOBJ-GUARDS1,STATE-VARS,WRLD,CTX,CAR,CHK-DEFABSSTOBJ-GUARD,MSG0,CTX0,MV-LET,T,MSG,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFABSSTOBJ-GUARDS1">chk-defabsstobj-guards1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defabsstobj-guards1" data-sym="CHK-DEFABSSTOBJ-GUARDS1" title="(defun chk-defabsstobj-guards1 (methods msg ctx wrld state-vars)
  (cond ((endp methods) msg)
        (t
         (mv-let (ctx0 msg0)
                 (chk-defabsstobj-guard (car methods) ctx wrld state-vars)
...">chk-defabsstobj-guards1</a>
  (methods <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> ctx wrld state-vars)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ctx0 msg0)
        (<a class="sym-link local-def" href="#def-chk-defabsstobj-guard" data-sym="CHK-DEFABSSTOBJ-GUARD" title="(defun chk-defabsstobj-guard (method ctx wrld state-vars)
  (mv-let (ctx msg)
          (translate-cmp (access absstobj-method method :guard-post) &#39;(nil) t
                         (stobjs-in (access absstobj-method method :name) wrld)
                         ctx wrld state-vars)
...">chk-defabsstobj-guard</a> (car methods) ctx wrld state-vars)
        (<a class="sym-link local-def" href="#def-chk-defabsstobj-guards1" data-sym="CHK-DEFABSSTOBJ-GUARDS1" title="(defun chk-defabsstobj-guards1 (methods msg ctx wrld state-vars)
  (cond ((endp methods) msg)
        (t
         (mv-let (ctx0 msg0)
                 (chk-defabsstobj-guard (car methods) ctx wrld state-vars)
...">chk-defabsstobj-guards1</a> (cdr methods)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ctx0 (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> msg0
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~|~%~@1"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> msg0)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> msg0))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
          ctx
          wrld
          state-vars)))))</pre>
  </div>

<div class="form-block function" id="def-chk-defabsstobj-guards" data-defines="CHK-DEFABSSTOBJ-GUARDS" data-references="SOFT,ER,DEFAULT-STATE-VARS,CHK-DEFABSSTOBJ-GUARDS1,MSG,LET,T,VALUE,COND,STATE,WRLD,CTX,CONGRUENT-TO,METHODS,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="CHK-DEFABSSTOBJ-GUARDS" data-part-args="STATE,WRLD,CTX,CONGRUENT-TO,METHODS" data-part-body="SOFT,ER,DEFAULT-STATE-VARS,WRLD,CTX,METHODS,CHK-DEFABSSTOBJ-GUARDS1,MSG,LET,T,VALUE,CONGRUENT-TO,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFABSSTOBJ-GUARDS">chk-defabsstobj-guards</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defabsstobj-guards" data-sym="CHK-DEFABSSTOBJ-GUARDS" title="(defun chk-defabsstobj-guards (methods congruent-to ctx wrld state)
  (cond (congruent-to (value nil))
        (t
         (let ((msg
                (chk-defabsstobj-guards1 methods nil ctx wrld
...">chk-defabsstobj-guards</a>
  (methods congruent-to ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (congruent-to (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link local-def" href="#def-chk-defabsstobj-guards1" data-sym="CHK-DEFABSSTOBJ-GUARDS1" title="(defun chk-defabsstobj-guards1 (methods msg ctx wrld state-vars)
  (cond ((endp methods) msg)
        (t
         (mv-let (ctx0 msg0)
                 (chk-defabsstobj-guard (car methods) ctx wrld state-vars)
...">chk-defabsstobj-guards1</a> methods
             nil
             ctx
             wrld
             (<a class="sym-link system" href="basis-a.html#def-default-state-vars" data-sym="DEFAULT-STATE-VARS">default-state-vars</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"At least one guard of an exported function fails to ~
                        obey single-threadedness restrictions.  See :DOC ~
                        defabsstobj.  See below for details.~|~%~@0~|~%"</span>
              <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))))</pre>
  </div>

<div class="form-block function" id="def-make-absstobj-tuples" data-defines="MAKE-ABSSTOBJ-TUPLES" data-references="CDR,CAR,ABSSTOBJ-METHOD,ACCESS,LIST*,CONS,T,ENDP,COND,METHODS,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="MAKE-ABSSTOBJ-TUPLES" data-part-args="METHODS" data-part-body="CDR,MAKE-ABSSTOBJ-TUPLES,CAR,ABSSTOBJ-METHOD,ACCESS,LIST*,CONS,T,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-ABSSTOBJ-TUPLES">make-absstobj-tuples</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-absstobj-tuples" data-sym="MAKE-ABSSTOBJ-TUPLES" title="(defun make-absstobj-tuples (methods)
  (cond ((endp methods) nil)
        (t
         (cons
          (list* (access absstobj-method (car methods) :name)
...">make-absstobj-tuples</a>
  (methods)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:name</span>)
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:logic</span>)
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:exec</span>)
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:updater</span>))
        (<a class="sym-link local-def" href="#def-make-absstobj-tuples" data-sym="MAKE-ABSSTOBJ-TUPLES" title="(defun make-absstobj-tuples (methods)
  (cond ((endp methods) nil)
        (t
         (cons
          (list* (access absstobj-method (car methods) :name)
...">make-absstobj-tuples</a> (cdr methods))))))</pre>
  </div>

<div class="form-block function" id="def-put-defabsstobj-invariant-risk" data-defines="PUT-DEFABSSTOBJ-INVARIANT-RISK" data-references="PUTPROP,QUOTE,ABSSTOBJ-METHOD,ACCESS,GETPROPC,INVARIANT-RISK,CDR,CAR,METHOD,LET,T,ENDP,COND,WRLD,METHODS,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="PUT-DEFABSSTOBJ-INVARIANT-RISK" data-part-args="WRLD,METHODS" data-part-body="PUTPROP,QUOTE,ABSSTOBJ-METHOD,ACCESS,GETPROPC,INVARIANT-RISK,CDR,PUT-DEFABSSTOBJ-INVARIANT-RISK,CAR,METHOD,LET,T,WRLD,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFABSSTOBJ-INVARIANT-RISK">put-defabsstobj-invariant-risk</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defabsstobj-invariant-risk" data-sym="PUT-DEFABSSTOBJ-INVARIANT-RISK" title="(defun put-defabsstobj-invariant-risk (methods wrld)
  (cond ((endp methods) wrld)
        (t
         (let ((method (car methods)))
           (put-defabsstobj-invariant-risk (cdr methods)
...">put-defabsstobj-invariant-risk</a>
  (methods wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((method (car methods)))
        (<a class="sym-link local-def" href="#def-put-defabsstobj-invariant-risk" data-sym="PUT-DEFABSSTOBJ-INVARIANT-RISK" title="(defun put-defabsstobj-invariant-risk (methods wrld)
  (cond ((endp methods) wrld)
        (t
         (let ((method (car methods)))
           (put-defabsstobj-invariant-risk (cdr methods)
...">put-defabsstobj-invariant-risk</a> (cdr methods)
          (let ((invariant-risk (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:exec</span>)
                 'invariant-risk
                 nil
                 wrld)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (invariant-risk (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>)
                  'invariant-risk
                  invariant-risk
                  wrld))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld))))))))</pre>
  </div>

<div class="form-block function" id="def-congruent-absstobj-tuples-rec" data-defines="CONGRUENT-ABSSTOBJ-TUPLES-REC" data-references="KEY-POSITION-FROM-END-EQ,EQL,UP2,CDDDR,UP1,CADDR,CADR,EQ,CDR,EQUAL,OR,AND,X2,CAR,X1,LET,T,NULL,ENDP,COND,ALL-TUPLES2,ALL-TUPLES1,TUPLES2,TUPLES1,DEFUN" data-used-by="CONGRUENT-ABSSTOBJ-TUPLES" data-part-name="CONGRUENT-ABSSTOBJ-TUPLES-REC" data-part-args="ALL-TUPLES2,ALL-TUPLES1,TUPLES2,TUPLES1" data-part-body="CONGRUENT-ABSSTOBJ-TUPLES-REC,ALL-TUPLES2,ALL-TUPLES1,KEY-POSITION-FROM-END-EQ,EQL,UP2,CDDDR,UP1,CADDR,CADR,EQ,CDR,EQUAL,OR,AND,X2,CAR,X1,LET,T,TUPLES2,NULL,TUPLES1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONGRUENT-ABSSTOBJ-TUPLES-REC">congruent-absstobj-tuples-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-congruent-absstobj-tuples-rec" data-sym="CONGRUENT-ABSSTOBJ-TUPLES-REC" title="(defun congruent-absstobj-tuples-rec (tuples1 tuples2 all-tuples1 all-tuples2)
  (cond ((endp tuples1) (null tuples2))
        (t
         (let ((x1 (car tuples1)) (x2 (car tuples2)))
           (and
...">congruent-absstobj-tuples-rec</a>
  (tuples1 tuples2 all-tuples1 all-tuples2)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> tuples1) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> tuples2))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((x1 (car tuples1)) (x2 (car tuples2)))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal (cdr x1) (cdr x2))
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x1) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x2))
              (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> x1) (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> x2))
              (let ((up1 (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> x1)) (up2 (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> x2)))
                (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> up1
                  up2
                  (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link local-def" href="#def-key-position-from-end-eq" data-sym="KEY-POSITION-FROM-END-EQ" title="(defun key-position-from-end-eq (key alist)
  (declare (xargs :guard (and (symbolp key) (alistp alist))))
  (cond ((endp alist) nil) ((eq key (caar alist)) (length (cdr alist)))
        (t (key-position-from-end-eq key (cdr alist)))))">key-position-from-end-eq</a> up1 all-tuples1)
                    (<a class="sym-link local-def" href="#def-key-position-from-end-eq" data-sym="KEY-POSITION-FROM-END-EQ" title="(defun key-position-from-end-eq (key alist)
  (declare (xargs :guard (and (symbolp key) (alistp alist))))
  (cond ((endp alist) nil) ((eq key (caar alist)) (length (cdr alist)))
        (t (key-position-from-end-eq key (cdr alist)))))">key-position-from-end-eq</a> up2 all-tuples2))))))
          (<a class="sym-link local-def" href="#def-congruent-absstobj-tuples-rec" data-sym="CONGRUENT-ABSSTOBJ-TUPLES-REC" title="(defun congruent-absstobj-tuples-rec (tuples1 tuples2 all-tuples1 all-tuples2)
  (cond ((endp tuples1) (null tuples2))
        (t
         (let ((x1 (car tuples1)) (x2 (car tuples2)))
           (and
...">congruent-absstobj-tuples-rec</a> (cdr tuples1)
            (cdr tuples2)
            all-tuples1
            all-tuples2))))))</pre>
  </div>

<div class="form-block function" id="def-congruent-absstobj-tuples" data-defines="CONGRUENT-ABSSTOBJ-TUPLES" data-references="CONGRUENT-ABSSTOBJ-TUPLES-REC,TUPLES2,TUPLES1,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="CONGRUENT-ABSSTOBJ-TUPLES" data-part-args="TUPLES2,TUPLES1" data-part-body="TUPLES2,TUPLES1,CONGRUENT-ABSSTOBJ-TUPLES-REC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONGRUENT-ABSSTOBJ-TUPLES">congruent-absstobj-tuples</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-congruent-absstobj-tuples" data-sym="CONGRUENT-ABSSTOBJ-TUPLES" title="(defun congruent-absstobj-tuples (tuples1 tuples2)
  (congruent-absstobj-tuples-rec tuples1 tuples2 tuples1 tuples2))">congruent-absstobj-tuples</a>
  (tuples1 tuples2)
  (<a class="sym-link local-def" href="#def-congruent-absstobj-tuples-rec" data-sym="CONGRUENT-ABSSTOBJ-TUPLES-REC" title="(defun congruent-absstobj-tuples-rec (tuples1 tuples2 all-tuples1 all-tuples2)
  (cond ((endp tuples1) (null tuples2))
        (t
         (let ((x1 (car tuples1)) (x2 (car tuples2)))
           (and
...">congruent-absstobj-tuples-rec</a> tuples1
    tuples2
    tuples1
    tuples2))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-methods-for-attachment1" data-defines="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1" data-references="CONS,CDR,SOFT,ER,LD-SKIP-PROOFSP,CAR,TRANSLATE-ABSSTOBJ-FIELD,METHOD,ERP,MV-LET,T,REVERSE,LIST*,VALUE,ENDP,COND,METHODS,STATE,WRLD,CTX,SEE-DOC,PROTECT-DEFAULT,TYPES,FIELDS,ST$C,ABSSTOBJ-TUPLES,ST-NEW,ST,DEFUN" data-used-by="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT" data-part-name="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1" data-part-args="METHODS,STATE,WRLD,CTX,SEE-DOC,PROTECT-DEFAULT,TYPES,FIELDS,ST$C,ABSSTOBJ-TUPLES,ST-NEW,ST" data-part-body="CONS,CDR,DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1,SOFT,ER,CTX,SEE-DOC,STATE,LD-SKIP-PROOFSP,PROTECT-DEFAULT,TYPES,ST$C,ABSSTOBJ-TUPLES,CAR,ST-NEW,ST,TRANSLATE-ABSSTOBJ-FIELD,METHOD,ERP,MV-LET,T,WRLD,METHODS,REVERSE,LIST*,VALUE,FIELDS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1">defabsstobj-methods-for-attachment1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-methods-for-attachment1" data-sym="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1" title="(defun defabsstobj-methods-for-attachment1
       (st st-new absstobj-tuples st$c fields types protect-default see-doc ctx
        wrld state methods)
  (cond ((endp fields) (value (list* nil (reverse methods) wrld)))
        (t
...">defabsstobj-methods-for-attachment1</a>
  (st st-new
    absstobj-tuples
    st$c
    fields
    types
    protect-default
    see-doc
    ctx
    wrld
    state
    methods)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fields) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> nil (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> methods) wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp method)
        (<a class="sym-link local-def" href="#def-translate-absstobj-field" data-sym="TRANSLATE-ABSSTOBJ-FIELD" title="(defun translate-absstobj-field
       (st st-new absstobj-tuple st$c field type protect-default
        ld-skip-proofsp see-doc ctx wrld)
  (let* ((field0 field)
         (field
...">translate-absstobj-field</a> st
          st-new
          (car absstobj-tuples)
          st$c
          (car fields)
          (car types)
          protect-default
          (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
          see-doc
          ctx
          wrld)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft erp <span class="string">"~@0"</span> method))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defabsstobj-methods-for-attachment1" data-sym="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1" title="(defun defabsstobj-methods-for-attachment1
       (st st-new absstobj-tuples st$c fields types protect-default see-doc ctx
        wrld state methods)
  (cond ((endp fields) (value (list* nil (reverse methods) wrld)))
        (t
...">defabsstobj-methods-for-attachment1</a> st
              st-new
              (cdr absstobj-tuples)
              st$c
              (cdr fields)
              (cdr types)
              protect-default
              see-doc
              ctx
              wrld
              state
              (cons method methods))))))))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-methods-for-attachment" data-defines="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT" data-references="LIST*,DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1,STATE,WRLD,CTX,SEE-DOC,PROTECT-DEFAULT,EXPORTS,CREATOR,RECOGNIZER,ST$C,ABSSTOBJ-TUPLES,NAME-NEW,NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT" data-part-args="STATE,WRLD,CTX,SEE-DOC,PROTECT-DEFAULT,EXPORTS,CREATOR,RECOGNIZER,ST$C,ABSSTOBJ-TUPLES,NAME-NEW,NAME" data-part-body="STATE,WRLD,CTX,SEE-DOC,PROTECT-DEFAULT,EXPORTS,CREATOR,RECOGNIZER,LIST*,ST$C,ABSSTOBJ-TUPLES,NAME-NEW,NAME,DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT">defabsstobj-methods-for-attachment</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-methods-for-attachment" data-sym="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT" title="(defun defabsstobj-methods-for-attachment
       (name name-new absstobj-tuples st$c recognizer creator exports
        protect-default see-doc ctx wrld state)
  (defabsstobj-methods-for-attachment1 name name-new absstobj-tuples st$c
                                       (list* recognizer creator exports)
...">defabsstobj-methods-for-attachment</a>
  (name name-new
    absstobj-tuples
    st$c
    recognizer
    creator
    exports
    protect-default
    see-doc
    ctx
    wrld
    state)
  (<a class="sym-link local-def" href="#def-defabsstobj-methods-for-attachment1" data-sym="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT1" title="(defun defabsstobj-methods-for-attachment1
       (st st-new absstobj-tuples st$c fields types protect-default see-doc ctx
        wrld state methods)
  (cond ((endp fields) (value (list* nil (reverse methods) wrld)))
        (t
...">defabsstobj-methods-for-attachment1</a> name
    name-new
    absstobj-tuples
    st$c
    (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> recognizer creator exports)
    (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:recognizer</span> <span class="keyword">:creator</span> nil)
    protect-default
    see-doc
    ctx
    wrld
    state
    nil))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-update-ext-gens-1" data-defines="DEFABSSTOBJ-UPDATE-EXT-GENS-1" data-references="CONS,ABSSTOBJ-METHOD,ACCESS,MEMBER-EQ,IF,CDR,CAR,METHOD,LET,T,ENDP,COND,ACC,EXT-GENS,METHODS,DEFUN" data-used-by="DEFABSSTOBJ-UPDATE-EXT-GENS" data-part-name="DEFABSSTOBJ-UPDATE-EXT-GENS-1" data-part-args="ACC,EXT-GENS,METHODS" data-part-body="CONS,ABSSTOBJ-METHOD,ACCESS,MEMBER-EQ,IF,EXT-GENS,CDR,DEFABSSTOBJ-UPDATE-EXT-GENS-1,CAR,METHOD,LET,T,ACC,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-UPDATE-EXT-GENS-1">defabsstobj-update-ext-gens-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-update-ext-gens-1" data-sym="DEFABSSTOBJ-UPDATE-EXT-GENS-1" title="(defun defabsstobj-update-ext-gens-1 (methods ext-gens acc)
  (cond ((endp methods) acc)
        (t
         (let ((method (car methods)))
           (defabsstobj-update-ext-gens-1 (cdr methods) ext-gens
...">defabsstobj-update-ext-gens-1</a>
  (methods ext-gens acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((method (car methods)))
        (<a class="sym-link local-def" href="#def-defabsstobj-update-ext-gens-1" data-sym="DEFABSSTOBJ-UPDATE-EXT-GENS-1" title="(defun defabsstobj-update-ext-gens-1 (methods ext-gens acc)
  (cond ((endp methods) acc)
        (t
         (let ((method (car methods)))
           (defabsstobj-update-ext-gens-1 (cdr methods) ext-gens
...">defabsstobj-update-ext-gens-1</a> (cdr methods)
          ext-gens
          (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:exec</span>) ext-gens)
            (cons (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method method <span class="keyword">:name</span>) acc)
            acc))))))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-update-ext-gens" data-defines="DEFABSSTOBJ-UPDATE-EXT-GENS" data-references="DEFABSSTOBJ-UPDATE-EXT-GENS-1,GLOBAL-SET?,T,NULL,APPEND?,QUOTE,GLOBAL-SET,COND,WRLD,METHODS,NAMES,DOIT,EXT-GENS,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="DEFABSSTOBJ-UPDATE-EXT-GENS" data-part-args="WRLD,METHODS,NAMES,DOIT,EXT-GENS" data-part-body="METHODS,DEFABSSTOBJ-UPDATE-EXT-GENS-1,GLOBAL-SET?,T,NULL,WRLD,NAMES,APPEND?,EXT-GENS,QUOTE,GLOBAL-SET,DOIT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-UPDATE-EXT-GENS">defabsstobj-update-ext-gens</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-update-ext-gens" data-sym="DEFABSSTOBJ-UPDATE-EXT-GENS" title="(defun defabsstobj-update-ext-gens (ext-gens doit names methods wrld)
  (cond (doit (global-set &#39;ext-gens (append? names ext-gens) wrld))
        ((null ext-gens) wrld)
        (t
         (global-set? &#39;ext-gens
...">defabsstobj-update-ext-gens</a>
  (ext-gens doit names methods wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (doit (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'ext-gens (<a class="sym-link system" href="axioms.html#def-append_3F" data-sym="APPEND?">append?</a> names ext-gens) wrld))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ext-gens) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-global-set_3F" data-sym="GLOBAL-SET?">global-set?</a> 'ext-gens
        (<a class="sym-link local-def" href="#def-defabsstobj-update-ext-gens-1" data-sym="DEFABSSTOBJ-UPDATE-EXT-GENS-1" title="(defun defabsstobj-update-ext-gens-1 (methods ext-gens acc)
  (cond ((endp methods) acc)
        (t
         (let ((method (car methods)))
           (defabsstobj-update-ext-gens-1 (cdr methods) ext-gens
...">defabsstobj-update-ext-gens-1</a> methods ext-gens ext-gens)
        wrld
        ext-gens))))</pre>
  </div>

<div class="form-block function" id="def-fix-export-updaters1" data-defines="FIX-EXPORT-UPDATERS1" data-references="CONS-WITH-HINT,CDDR,ASSOC-EQ,LIST*,APPEND,CONS,SPLIT-KEYWORD-ALIST,POST,PRE,MV-LET,CDR,ASSOC-KEYWORD,CADR,UPDATER-OLD,CAR,FIELD-OLD,LET*,T,ENDP,COND,OLD-TO-NEW,OLD,DEFUN" data-used-by="FIX-EXPORT-UPDATERS" data-part-name="FIX-EXPORT-UPDATERS1" data-part-args="OLD-TO-NEW,OLD" data-part-body="CONS-WITH-HINT,FIX-EXPORT-UPDATERS1,CDDR,OLD-TO-NEW,ASSOC-EQ,LIST*,APPEND,CONS,SPLIT-KEYWORD-ALIST,POST,PRE,MV-LET,CDR,ASSOC-KEYWORD,CADR,UPDATER-OLD,CAR,FIELD-OLD,LET*,T,OLD,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-EXPORT-UPDATERS1">fix-export-updaters1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-export-updaters1" data-sym="FIX-EXPORT-UPDATERS1" title="(defun fix-export-updaters1 (old old-to-new)
  (cond ((endp old) nil)
        (t
         (let* ((field-old (car old))
                (updater-old (cadr (assoc-keyword :updater (cdr field-old)))))
...">fix-export-updaters1</a>
  (old old-to-new)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> old) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((field-old (car old)) (updater-old (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:updater</span> (cdr field-old)))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (updater-old (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (pre post)
              (<a class="sym-link system" href="history-management.html#def-split-keyword-alist" data-sym="SPLIT-KEYWORD-ALIST">split-keyword-alist</a> <span class="keyword">:updater</span> (cdr field-old))
              (cons (cons (car field-old)
                  (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> pre
                    (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:updater</span> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> post) old-to-new))
                      (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> post))))
                (<a class="sym-link local-def" href="#def-fix-export-updaters1" data-sym="FIX-EXPORT-UPDATERS1" title="(defun fix-export-updaters1 (old old-to-new)
  (cond ((endp old) nil)
        (t
         (let* ((field-old (car old))
                (updater-old (cadr (assoc-keyword :updater (cdr field-old)))))
...">fix-export-updaters1</a> (cdr old) old-to-new))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-cons-with-hint" data-sym="CONS-WITH-HINT">cons-with-hint</a> field-old
              (<a class="sym-link local-def" href="#def-fix-export-updaters1" data-sym="FIX-EXPORT-UPDATERS1" title="(defun fix-export-updaters1 (old old-to-new)
  (cond ((endp old) nil)
        (t
         (let* ((field-old (car old))
                (updater-old (cadr (assoc-keyword :updater (cdr field-old)))))
...">fix-export-updaters1</a> (cdr old) old-to-new)
              (cdr old))))))))</pre>
  </div>

<div class="form-block function" id="def-export-names" data-defines="EXPORT-NAMES" data-references="CDR,CAAR,CAR,SYMBOLP,IF,CONS,T,ENDP,COND,EXPORTS,DEFUN" data-used-by="FIX-EXPORT-UPDATERS" data-part-name="EXPORT-NAMES" data-part-args="EXPORTS" data-part-body="CDR,EXPORT-NAMES,CAAR,CAR,SYMBOLP,IF,CONS,T,EXPORTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPORT-NAMES">export-names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-export-names" data-sym="EXPORT-NAMES" title="(defun export-names (exports)
  (cond ((endp exports) nil)
        (t
         (cons
          (if (symbolp (car exports))
...">export-names</a>
  (exports)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> exports) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (if (symbolp (car exports))
          (car exports)
          (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> exports))
        (<a class="sym-link local-def" href="#def-export-names" data-sym="EXPORT-NAMES" title="(defun export-names (exports)
  (cond ((endp exports) nil)
        (t
         (cons
          (if (symbolp (car exports))
...">export-names</a> (cdr exports))))))</pre>
  </div>

<div class="form-block function" id="def-fix-export-updaters" data-defines="FIX-EXPORT-UPDATERS" data-references="FIX-EXPORT-UPDATERS1,EXPORT-NAMES,PAIRLIS$,OLD-TO-NEW,LET,NEW,OLD,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="FIX-EXPORT-UPDATERS" data-part-args="NEW,OLD" data-part-body="FIX-EXPORT-UPDATERS1,NEW,OLD,EXPORT-NAMES,PAIRLIS$,OLD-TO-NEW,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-EXPORT-UPDATERS">fix-export-updaters</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-export-updaters" data-sym="FIX-EXPORT-UPDATERS" title="(defun fix-export-updaters (old new)
  (let ((old-to-new (pairlis$ (export-names old) (export-names new))))
    (fix-export-updaters1 old old-to-new)))">fix-export-updaters</a>
  (old new)
  (let ((old-to-new (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link local-def" href="#def-export-names" data-sym="EXPORT-NAMES" title="(defun export-names (exports)
  (cond ((endp exports) nil)
        (t
         (cons
          (if (symbolp (car exports))
...">export-names</a> old) (<a class="sym-link local-def" href="#def-export-names" data-sym="EXPORT-NAMES" title="(defun export-names (exports)
  (cond ((endp exports) nil)
        (t
         (cons
          (if (symbolp (car exports))
...">export-names</a> new))))
    (<a class="sym-link local-def" href="#def-fix-export-updaters1" data-sym="FIX-EXPORT-UPDATERS1" title="(defun fix-export-updaters1 (old old-to-new)
  (cond ((endp old) nil)
        (t
         (let* ((field-old (car old))
                (updater-old (cadr (assoc-keyword :updater (cdr field-old)))))
...">fix-export-updaters1</a> old old-to-new)))</pre>
  </div>

<div class="form-block function" id="def-absstobj-producer-fns" data-defines="ABSSTOBJ-PRODUCER-FNS" data-references="LIST*,T,CDR,CAR,ABSSTOBJ-METHOD,ACCESS,MEMBER-EQ,NOT,ENDP,COND,METHODS,ST-NAME,DEFUN" data-used-by="CHK-DEFABSSTOBJ-ATTACHMENTS-ANCESTORS" data-part-name="ABSSTOBJ-PRODUCER-FNS" data-part-args="METHODS,ST-NAME" data-part-body="LIST*,T,CDR,ABSSTOBJ-PRODUCER-FNS,CAR,ABSSTOBJ-METHOD,ACCESS,ST-NAME,MEMBER-EQ,NOT,METHODS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ABSSTOBJ-PRODUCER-FNS">absstobj-producer-fns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-absstobj-producer-fns" data-sym="ABSSTOBJ-PRODUCER-FNS" title="(defun absstobj-producer-fns (st-name methods)
  (cond ((endp methods) nil)
        ((not
          (member-eq st-name
                     (access absstobj-method (car methods) :stobjs-out)))
...">absstobj-producer-fns</a>
  (st-name methods)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> methods) nil)
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> st-name
         (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:stobjs-out</span>))) (<a class="sym-link local-def" href="#def-absstobj-producer-fns" data-sym="ABSSTOBJ-PRODUCER-FNS" title="(defun absstobj-producer-fns (st-name methods)
  (cond ((endp methods) nil)
        ((not
          (member-eq st-name
                     (access absstobj-method (car methods) :stobjs-out)))
...">absstobj-producer-fns</a> st-name (cdr methods)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:logic</span>)
        (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method (car methods) <span class="keyword">:exec</span>)
        (<a class="sym-link local-def" href="#def-absstobj-producer-fns" data-sym="ABSSTOBJ-PRODUCER-FNS" title="(defun absstobj-producer-fns (st-name methods)
  (cond ((endp methods) nil)
        ((not
          (member-eq st-name
                     (access absstobj-method (car methods) :stobjs-out)))
...">absstobj-producer-fns</a> st-name (cdr methods))))))</pre>
  </div>

<div class="form-block function" id="def-chk-defabsstobj-attachments-ancestors" data-defines="CHK-DEFABSSTOBJ-ATTACHMENTS-ANCESTORS" data-references="CANONICAL-ANCESTORS-LST,ABSSTOBJ-PRODUCER-FNS,LIST,IF,CONS,LST,ABSSTOBJ-METHOD,ACCESS,RECOGNIZER-LOGIC,CDR,CREATOR-AND-EXPORT-METHODS,CAR,RECOGNIZER-METHOD,LET*,WRLD,METHODS,CORR-FN,CORR-FN-EXISTS,ST-NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="CHK-DEFABSSTOBJ-ATTACHMENTS-ANCESTORS" data-part-args="WRLD,METHODS,CORR-FN,CORR-FN-EXISTS,ST-NAME" data-part-body="WRLD,CANONICAL-ANCESTORS-LST,ST-NAME,ABSSTOBJ-PRODUCER-FNS,CORR-FN,LIST,CORR-FN-EXISTS,IF,CONS,LST,ABSSTOBJ-METHOD,ACCESS,RECOGNIZER-LOGIC,CDR,CREATOR-AND-EXPORT-METHODS,METHODS,CAR,RECOGNIZER-METHOD,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFABSSTOBJ-ATTACHMENTS-ANCESTORS">chk-defabsstobj-attachments-ancestors</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defabsstobj-attachments-ancestors" data-sym="CHK-DEFABSSTOBJ-ATTACHMENTS-ANCESTORS" title="(defun chk-defabsstobj-attachments-ancestors
       (st-name corr-fn-exists corr-fn methods wrld)
  (let* ((recognizer-method (car methods))
         (creator-and-export-methods (cdr methods))
         (recognizer-logic (access absstobj-method recognizer-method :logic))
...">chk-defabsstobj-attachments-ancestors</a>
  (st-name corr-fn-exists corr-fn methods wrld)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((recognizer-method (car methods)) (creator-and-export-methods (cdr methods))
      (recognizer-logic (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-method recognizer-method <span class="keyword">:logic</span>))
      (lst (cons recognizer-logic
          (if corr-fn-exists
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> corr-fn)
            (<a class="sym-link local-def" href="#def-absstobj-producer-fns" data-sym="ABSSTOBJ-PRODUCER-FNS" title="(defun absstobj-producer-fns (st-name methods)
  (cond ((endp methods) nil)
        ((not
          (member-eq st-name
                     (access absstobj-method (car methods) :stobjs-out)))
...">absstobj-producer-fns</a> st-name creator-and-export-methods)))))
    (<a class="sym-link system" href="defthm.html#def-canonical-ancestors-lst" data-sym="CANONICAL-ANCESTORS-LST">canonical-ancestors-lst</a> lst wrld)))</pre>
  </div>

<div class="form-block function" id="def-chk-defabsstobj-attachments" data-defines="CHK-DEFABSSTOBJ-ATTACHMENTS" data-references="IF,SOFT,ER,ATTACHED-FNS,BAD-ATTACHED-FNS,LET,T,VALUE,COND,STATE,WRLD,CTX,CONGRUENT-TO,CORR-FN-EXISTS,ANC,NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="CHK-DEFABSSTOBJ-ATTACHMENTS" data-part-args="STATE,WRLD,CTX,CONGRUENT-TO,CORR-FN-EXISTS,ANC,NAME" data-part-body="CORR-FN-EXISTS,IF,NAME,CTX,SOFT,ER,WRLD,ANC,ATTACHED-FNS,BAD-ATTACHED-FNS,LET,T,VALUE,CONGRUENT-TO,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFABSSTOBJ-ATTACHMENTS">chk-defabsstobj-attachments</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defabsstobj-attachments" data-sym="CHK-DEFABSSTOBJ-ATTACHMENTS" title="(defun chk-defabsstobj-attachments
       (name anc corr-fn-exists congruent-to ctx wrld state)
  (cond (congruent-to (value nil))
        (t
         (let ((bad-attached-fns (attached-fns anc wrld)))
...">chk-defabsstobj-attachments</a>
  (name anc corr-fn-exists congruent-to ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (congruent-to (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((bad-attached-fns (<a class="sym-link system" href="defthm.html#def-attached-fns" data-sym="ATTACHED-FNS">attached-fns</a> anc wrld)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-attached-fns (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The proposed defabsstobj event for ~x0 is illegal because ~
                ~#1~[there is an ancestor ~&amp;1 of ~s2 that has an ~
                attachment~/there are ancestors ~&amp;1 of ~s2 that have ~
                attachments~].  See :DOC stobj-attachment-restrictions."</span>
              name
              bad-attached-fns
              (if corr-fn-exists
                <span class="string">"the correlation or recognizer function"</span>
                <span class="string">"the recognizer, creator, or some exported function"</span>)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))))</pre>
  </div>

<div class="form-block function" id="def-put-defabsstobj-attachments-disallowed" data-defines="PUT-DEFABSSTOBJ-ATTACHMENTS-DISALLOWED" data-references="IF,MARK-ATTACHMENT-DISALLOWED,T,COND,INSTALLED-W,WRLD,CONGRUENT-TO,CORR-FN-EXISTS,ANC,NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN1" data-part-name="PUT-DEFABSSTOBJ-ATTACHMENTS-DISALLOWED" data-part-args="INSTALLED-W,WRLD,CONGRUENT-TO,CORR-FN-EXISTS,ANC,NAME" data-part-body="INSTALLED-W,CORR-FN-EXISTS,IF,NAME,ANC,MARK-ATTACHMENT-DISALLOWED,T,WRLD,CONGRUENT-TO,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFABSSTOBJ-ATTACHMENTS-DISALLOWED">put-defabsstobj-attachments-disallowed</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defabsstobj-attachments-disallowed" data-sym="PUT-DEFABSSTOBJ-ATTACHMENTS-DISALLOWED" title="(defun put-defabsstobj-attachments-disallowed
       (name anc corr-fn-exists congruent-to wrld installed-w)
  (cond (congruent-to wrld)
        (t
         (mark-attachment-disallowed anc name
...">put-defabsstobj-attachments-disallowed</a>
  (name anc corr-fn-exists congruent-to wrld installed-w)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (congruent-to wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="defthm.html#def-mark-attachment-disallowed" data-sym="MARK-ATTACHMENT-DISALLOWED">mark-attachment-disallowed</a> anc
        name
        (if corr-fn-exists
          <span class="keyword">:defabsstobj</span> <span class="keyword">:defabsstobj-no-corr</span>)
        wrld
        installed-w))))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-fn1" data-defines="DEFABSSTOBJ-FN1" data-references="LIST*,INSTALL-EVENT,FIX-EXPORT-UPDATERS,GET-EVENT,KWA,LET,RETRACTION,CHK-DEFABSSTOBJ-GUARDS,DEFABSSTOBJ-UPDATE-EXT-GENS,WRLD5,DEFABSSTOBJ-RAW-INIT,RAW-INIT-FORM-NEW,DEFSTOBJ-REDUNDANT-RAW-LISP-DISCRIMINATOR-VALUE,DISCRIMINATOR1,PUT-DEFABSSTOBJ-ATTACHMENTS-DISALLOWED,WRLD4,STOBJ-LIVE-VAR,STOBJ-FUNCTION,PUTPROP-X-LST1,SORT-ABSSTOBJ-NAMES,STOBJ-PROPERTY,STOBJ,PUT-ABSSTOBJS-IN-AND-OUTS,SYMBOL-CLASS,MAKE,NON-EXECUTABLEP,PUTPROP-UNLESS,PUTPROP,PUT-DEFABSSTOBJ-INVARIANT-RISK,WRLD3,NON-MEMOIZABLE,CONGRUENT-STOBJ-REP,CHK-DEFABSSTOBJ-ATTACHMENTS,CHK-DEFABSSTOBJ-ATTACHMENTS-ANCESTORS,ANC,WRLD2,CERT-DATA,F-GET-GLOBAL,DISABLE,IN-THEORY,SET-INHIBIT-WARNINGS,ENCAPSULATE,QUASIQUOTE,PAIRLIS-X1,APPEND,DEFSTOBJ,LIST,CURRENT-PACKAGE,ACL2-DEFAULTS-TABLE,TABLE-ALIST,DEFABSSTOBJ,PROCESS-EMBEDDED-EVENTS,EXTENSION,SET-W,REVERT-WORLD-ON-ERROR,HARD,THE-LIVE-VAR,STRIP-CARS,NAMES,DEFABSSTOBJ-RAW-DEFS,RAW-DEF-LST,DEFABSSTOBJ-AXIOMATIC-DEFS,AX-DEF-LST,CDDR,WRLD1,DEFABSSTOBJ-LOGIC-SUBST,UPDATE-GUARD-POST,METHODS,ENFORCE-REDUNDANCY,DEFABSSTOBJ-MISSING-MSG,WARNING$,PPROGN,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,LD-SKIP-PROOFSP,MEMBER-EQ,CHK-DEFABSSTOBJ-UPDATERS,UPDATERS,ACCESSORS,MSG,MV-LET,STRIP-CDRS,CONGRUENT-ABSSTOBJ-TUPLES,SOFT,ER,ACCESS,EQUAL,CHK-ABSSTOBJ-ATTACHMENT,ER-PROGN,TWO-PASSES,ATTACHED-STOBJ,NULL,ASSERT$,EQ,ATT-NAME,MAKE-ABSSTOBJ-TUPLES,ABSSTOBJ-TUPLES,ABSSTOBJ-INFO,GETPROPC,ABSSTOBJ-INFO-CONG,METHODS0,MISSING,CHK-ACCEPTABLE-DEFABSSTOBJ,DEFABSSTOBJ-METHODS-FOR-ATTACHMENT,MISSING/METHODS/WRLD1,ASSOC-KEYWORD,ST$AP,CDR,CONS,EXPAND-RECOGNIZER,RECOGNIZER0,ER-LET*,T,REDUNDANT,VALUE,REDUNDANT-DEFABSSTOBJP,NOT,AND,COND,EXT-GENS,QUOTE,GLOBAL-VAL,EXT-GENS-WRLD0,CAR,CONSP,CREATOR-NAME,ABSSTOBJ-NAME,OR,SEE-DOC,CADR,IF,ST-NAME-NEW,W,WRLD0,LET*,ABSSTOBJ-TUPLES-NEW,CREATOR-NAME-ORIG,DISCRIMINATOR,EVENT-FORM,STATE,CTX,MISSING-ONLY,ATTACHABLE,NON-EXECUTABLE,CONGRUENT-TO,PROTECT-DEFAULT,EXPORTS,CORR-FN-EXISTS,CORR-FN,CREATOR,RECOGNIZER,ST$C,ST-NAME,DEFUN" data-used-by="DEFABSSTOBJ-FN,DEFABSSTOBJ-MISSING-EVENTS" data-part-name="DEFABSSTOBJ-FN1" data-part-args="ABSSTOBJ-TUPLES-NEW,CREATOR-NAME-ORIG,DISCRIMINATOR,EVENT-FORM,STATE,CTX,MISSING-ONLY,ATTACHABLE,NON-EXECUTABLE,CONGRUENT-TO,PROTECT-DEFAULT,EXPORTS,CORR-FN-EXISTS,CORR-FN,CREATOR,RECOGNIZER,ST$C,ST-NAME" data-part-body="LIST*,INSTALL-EVENT,FIX-EXPORT-UPDATERS,DEFABSSTOBJ-FN1,GET-EVENT,KWA,LET,RETRACTION,CHK-DEFABSSTOBJ-GUARDS,DEFABSSTOBJ-UPDATE-EXT-GENS,WRLD5,CREATOR-NAME-ORIG,DEFABSSTOBJ-RAW-INIT,RAW-INIT-FORM-NEW,DEFSTOBJ-REDUNDANT-RAW-LISP-DISCRIMINATOR-VALUE,DISCRIMINATOR1,PUT-DEFABSSTOBJ-ATTACHMENTS-DISALLOWED,WRLD4,STOBJ-LIVE-VAR,STOBJ-FUNCTION,PUTPROP-X-LST1,SORT-ABSSTOBJ-NAMES,STOBJ-PROPERTY,STOBJ,PUT-ABSSTOBJS-IN-AND-OUTS,SYMBOL-CLASS,MAKE,NON-EXECUTABLEP,PUTPROP-UNLESS,PUTPROP,PUT-DEFABSSTOBJ-INVARIANT-RISK,WRLD3,NON-MEMOIZABLE,CONGRUENT-STOBJ-REP,CHK-DEFABSSTOBJ-ATTACHMENTS,CHK-DEFABSSTOBJ-ATTACHMENTS-ANCESTORS,ANC,WRLD2,CERT-DATA,F-GET-GLOBAL,DISABLE,IN-THEORY,SET-INHIBIT-WARNINGS,ENCAPSULATE,QUASIQUOTE,DEFUN,PAIRLIS-X1,APPEND,DEFSTOBJ,LIST,CURRENT-PACKAGE,ACL2-DEFAULTS-TABLE,TABLE-ALIST,DEFABSSTOBJ,PROCESS-EMBEDDED-EVENTS,EXTENSION,SET-W,REVERT-WORLD-ON-ERROR,HARD,THE-LIVE-VAR,STRIP-CARS,NAMES,DEFABSSTOBJ-RAW-DEFS,RAW-DEF-LST,DEFABSSTOBJ-AXIOMATIC-DEFS,AX-DEF-LST,CDDR,WRLD1,DEFABSSTOBJ-LOGIC-SUBST,UPDATE-GUARD-POST,METHODS,ENFORCE-REDUNDANCY,DEFABSSTOBJ-MISSING-MSG,WARNING$,PPROGN,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,LD-SKIP-PROOFSP,MEMBER-EQ,CHK-DEFABSSTOBJ-UPDATERS,UPDATERS,ACCESSORS,MSG,MV-LET,STRIP-CDRS,CONGRUENT-ABSSTOBJ-TUPLES,SOFT,ER,ACCESS,EQUAL,MISSING-ONLY,CHK-ABSSTOBJ-ATTACHMENT,ER-PROGN,TWO-PASSES,ATTACHED-STOBJ,NULL,ASSERT$,ATTACHABLE,EQ,ATT-NAME,MAKE-ABSSTOBJ-TUPLES,ABSSTOBJ-TUPLES,ABSSTOBJ-INFO,GETPROPC,ABSSTOBJ-INFO-CONG,METHODS0,MISSING,NON-EXECUTABLE,CONGRUENT-TO,CORR-FN-EXISTS,CHK-ACCEPTABLE-DEFABSSTOBJ,PROTECT-DEFAULT,EXPORTS,ABSSTOBJ-TUPLES-NEW,DEFABSSTOBJ-METHODS-FOR-ATTACHMENT,MISSING/METHODS/WRLD1,ASSOC-KEYWORD,ST$AP,CDR,CONS,CTX,RECOGNIZER,EXPAND-RECOGNIZER,RECOGNIZER0,ER-LET*,T,REDUNDANT,VALUE,REDUNDANT-DEFABSSTOBJP,NOT,AND,COND,EXT-GENS,QUOTE,GLOBAL-VAL,EXT-GENS-WRLD0,CORR-FN,CAR,CONSP,CREATOR-NAME,CREATOR,ABSSTOBJ-NAME,OR,ST$C,SEE-DOC,ST-NAME,EVENT-FORM,CADR,DISCRIMINATOR,IF,ST-NAME-NEW,STATE,W,WRLD0,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-FN1">defabsstobj-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-fn1" data-sym="DEFABSSTOBJ-FN1" title="(defun defabsstobj-fn1
       (st-name st$c recognizer creator corr-fn corr-fn-exists exports
        protect-default congruent-to non-executable attachable missing-only ctx
        state event-form discriminator creator-name-orig absstobj-tuples-new)
  (let* ((wrld0 (w state))
...">defabsstobj-fn1</a>
  (st-name st$c
    recognizer
    creator
    corr-fn
    corr-fn-exists
    exports
    protect-default
    congruent-to
    non-executable
    attachable
    missing-only
    ctx
    state
    event-form
    discriminator
    creator-name-orig
    absstobj-tuples-new)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld0 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (st-name-new (if discriminator
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> event-form)
          st-name))
      (see-doc <span class="string">"See :DOC defabsstobj."</span>)
      (st$c (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> st$c (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> st-name <span class="keyword">:c</span>)))
      (creator (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> creator (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> st-name <span class="keyword">:creator</span>)))
      (creator-name (if (consp creator)
          (car creator)
          creator))
      (corr-fn (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> corr-fn (<a class="sym-link system" href="basis-a.html#def-absstobj-name" data-sym="ABSSTOBJ-NAME">absstobj-name</a> st-name <span class="keyword">:corr-fn</span>)))
      (ext-gens-wrld0 (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'ext-gens wrld0)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> discriminator)
         (<a class="sym-link local-def" href="#def-redundant-defabsstobjp" data-sym="REDUNDANT-DEFABSSTOBJP" title="(defun redundant-defabsstobjp (name event-form wrld)
  (and (getpropc name &#39;stobj nil wrld)
       (equal event-form (get-event name wrld))))">redundant-defabsstobjp</a> st-name event-form wrld0)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'redundant))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((recognizer0 (<a class="sym-link local-def" href="#def-expand-recognizer" data-sym="EXPAND-RECOGNIZER" title="(defun expand-recognizer (st-name recognizer see-doc ctx state)
  (let ((recognizer (or recognizer (absstobj-name st-name :recognizer))))
    (cond
     ((symbolp recognizer)
      (value
...">expand-recognizer</a> st-name recognizer see-doc ctx state)) (recognizer (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if discriminator
                  (cons st-name-new (cdr recognizer0))
                  recognizer0)))
            (st$ap (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:logic</span> (cdr recognizer)))))
            (missing/methods/wrld1 (if discriminator
                (<a class="sym-link local-def" href="#def-defabsstobj-methods-for-attachment" data-sym="DEFABSSTOBJ-METHODS-FOR-ATTACHMENT" title="(defun defabsstobj-methods-for-attachment
       (name name-new absstobj-tuples st$c recognizer creator exports
        protect-default see-doc ctx wrld state)
  (defabsstobj-methods-for-attachment1 name name-new absstobj-tuples st$c
                                       (list* recognizer creator exports)
...">defabsstobj-methods-for-attachment</a> st-name
                  st-name-new
                  absstobj-tuples-new
                  st$c
                  recognizer
                  creator
                  exports
                  protect-default
                  see-doc
                  ctx
                  wrld0
                  state)
                (<a class="sym-link local-def" href="#def-chk-acceptable-defabsstobj" data-sym="CHK-ACCEPTABLE-DEFABSSTOBJ" title="(defun chk-acceptable-defabsstobj
       (name st$c recognizer st$ap creator corr-fn corr-fn-exists exports
        protect-default congruent-to non-executable see-doc ctx wrld state)
  (cond
   ((atom exports)
...">chk-acceptable-defabsstobj</a> st-name
                  st$c
                  recognizer
                  st$ap
                  creator
                  corr-fn
                  corr-fn-exists
                  exports
                  protect-default
                  congruent-to
                  non-executable
                  see-doc
                  ctx
                  wrld0
                  state))))
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((missing (car missing/methods/wrld1)) (methods0 (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> missing/methods/wrld1))
              (absstobj-info-cong (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to
                  (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> congruent-to 'absstobj-info nil wrld0)))
              (absstobj-tuples (<a class="sym-link local-def" href="#def-make-absstobj-tuples" data-sym="MAKE-ABSSTOBJ-TUPLES" title="(defun make-absstobj-tuples (methods)
  (cond ((endp methods) nil)
        (t
         (cons
          (list* (access absstobj-method (car methods) :name)
...">make-absstobj-tuples</a> methods0))
              (att-name (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> attachable <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> discriminator)
                    (<a class="sym-link local-def" href="#def-attached-stobj" data-sym="ATTACHED-STOBJ" title="(defun attached-stobj (st wrld top)
  (let ((st2 (cdr (assoc-eq st (table-alist &#39;attach-stobj-table wrld)))))
    (cond (st2 (attached-stobj st2 wrld nil)) (top nil) (t st))))">attached-stobj</a> st-name wrld0 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
              (two-passes (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> att-name discriminator)))
            (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if att-name
                (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> discriminator)
                  (<a class="sym-link local-def" href="#def-chk-absstobj-attachment" data-sym="CHK-ABSSTOBJ-ATTACHMENT" title="(defun chk-absstobj-attachment
       (st-name impl-name new-tuples ctx wrld see-doc state)
  (assert$ impl-name
           (pprogn
            (observation ctx
...">chk-absstobj-attachment</a> st-name
                    att-name
                    absstobj-tuples
                    ctx
                    wrld0
                    see-doc
                    state))
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> missing-only (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> congruent-to)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (car missing/methods/wrld1)))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> att-name)
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal st$c (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-info absstobj-info-cong <span class="keyword">:st$c</span>)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"The value provided for :congruent-to, ~x0, is illegal, ~
                  because the foundational stobj associated with ~x0 is ~x1, ~
                  while the foundational stobj proposed for ~x2 is ~x3.  ~@4"</span>
                    congruent-to
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-info absstobj-info-cong <span class="keyword">:st$c</span>)
                    st-name
                    st$c
                    see-doc))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> att-name)
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-congruent-absstobj-tuples" data-sym="CONGRUENT-ABSSTOBJ-TUPLES" title="(defun congruent-absstobj-tuples (tuples1 tuples2)
  (congruent-absstobj-tuples-rec tuples1 tuples2 tuples1 tuples2))">congruent-absstobj-tuples</a> absstobj-tuples
                       (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-info absstobj-info-cong <span class="keyword">:absstobj-tuples</span>)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"The value provided for :congruent-to, ~x0, is illegal.  ~
                  ACL2 requires that the :LOGIC, :EXEC, and :UPDATER ~
                  functions match up perfectly (in the same order), for stobj ~
                  primitives introduced by the proposed new abstract stobj, ~
                  ~x1 and the existing stobj to which it is supposed to be ~
                  congruent, ~x0. Here are the lists of tuples (:LOGIC :EXEC ~
                  . :UPDATER) for each.~|~%For ~x1 (proposed):~|~Y24~%For ~
                  ~x0:~|~Y34~%~|~@5"</span>
                    congruent-to
                    st-name
                    (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> absstobj-tuples)
                    (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> absstobj-info absstobj-info-cong <span class="keyword">:absstobj-tuples</span>))
                    nil
                    see-doc))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> accessors updaters)
                    (<a class="sym-link local-def" href="#def-chk-defabsstobj-updaters" data-sym="CHK-DEFABSSTOBJ-UPDATERS" title="(defun chk-defabsstobj-updaters (st$c methods wrld)
  (mv-let (msg accessors updaters accessors-exec updaters-exec)
          (collect-defabsstobj-updaters methods st$c methods wrld nil nil nil
                                        nil)
          (cond (msg (mv msg nil nil))
...">chk-defabsstobj-updaters</a> st$c methods0 wrld0)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@0  ~@1"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> see-doc))
                      (missing-only (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> missing))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> missing)
                               (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
                                 '(<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> include-book-with-locals))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                            ((<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                                  <span class="string">"defabsstobj"</span>
                                  <span class="string">"The following events would have to be ~
                                       admitted, if not for proofs currently ~
                                       being skipped (see :DOC ~
                                       ld-skip-proofsp), before the given ~
                                       defabsstobj event.  ~@0~|~@1"</span>
                                  see-doc
                                  (<a class="sym-link local-def" href="#def-defabsstobj-missing-msg" data-sym="DEFABSSTOBJ-MISSING-MSG" title="(defun defabsstobj-missing-msg (missing wrld)
  (assert$ missing
           (let* ((tuple (car missing))
                  (name (car tuple))
                  (expected-formula (untranslate (cadr tuple) t wrld))
...">defabsstobj-missing-msg</a> missing wrld0))
                                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"The following events must be admitted before the ~
                           given defabsstobj event is admitted.  ~@0~|~@1"</span>
                                see-doc
                                (<a class="sym-link local-def" href="#def-defabsstobj-missing-msg" data-sym="DEFABSSTOBJ-MISSING-MSG" title="(defun defabsstobj-missing-msg (missing wrld)
  (assert$ missing
           (let* ((tuple (car missing))
                  (name (car tuple))
                  (expected-formula (untranslate (cadr tuple) t wrld))
...">defabsstobj-missing-msg</a> missing wrld0))))
                          (<a class="sym-link system" href="basis-b.html#def-enforce-redundancy" data-sym="ENFORCE-REDUNDANCY">enforce-redundancy</a> event-form
                            ctx
                            wrld0
                            (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((methods (<a class="sym-link local-def" href="#def-update-guard-post" data-sym="UPDATE-GUARD-POST" title="(defun update-guard-post (logic-subst methods)
  (cond ((endp methods) nil)
        (t
         (cons
          (change absstobj-method (car methods) :guard-post
...">update-guard-post</a> (<a class="sym-link local-def" href="#def-defabsstobj-logic-subst" data-sym="DEFABSSTOBJ-LOGIC-SUBST" title="(defun defabsstobj-logic-subst (methods)
  (cond ((endp methods) nil)
        (t
         (acons (access absstobj-method (car methods) :logic)
                (access absstobj-method (car methods) :name)">defabsstobj-logic-subst</a> methods0)
                                   methods0)) (wrld1 (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> missing/methods/wrld1))
                                (ax-def-lst (<a class="sym-link local-def" href="#def-defabsstobj-axiomatic-defs" data-sym="DEFABSSTOBJ-AXIOMATIC-DEFS" title="(defun defabsstobj-axiomatic-defs (methods)
  (cond ((endp methods) nil)
        (t
         (cons
          (let ((method (car methods)))
...">defabsstobj-axiomatic-defs</a> methods))
                                (raw-def-lst (<a class="sym-link local-def" href="#def-defabsstobj-raw-defs" data-sym="DEFABSSTOBJ-RAW-DEFS" title="(defun defabsstobj-raw-defs (st-name methods)
  (list*
   (let* ((method (car methods))
          (name (access absstobj-method method :name))
          (logic
...">defabsstobj-raw-defs</a> st-name methods))
                                (names (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> ax-def-lst))
                                (<a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a> (<a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a> st-name-new)))
                              (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal names (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> raw-def-lst)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                                        ctx
                                        <span class="string">"Defabsstobj-axiomatic-defs and ~
                                     defabsstobj-raw-defs are out of sync!  ~
                                     We expect them to define the same list ~
                                     of names.  Here are the strip-cars of ~
                                     the axiomatic defs:  ~x0.  And here are ~
                                     the strip-cars of the raw defs:  ~x1."</span>
                                        names
                                        (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> raw-def-lst)))))
                                (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension wrld1 state)
                                    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-process-embedded-events" data-sym="PROCESS-EMBEDDED-EVENTS" title="(defun process-embedded-events
       (caller acl2-defaults-table skip-proofsp pkg ee-entry ev-lst index
        make-event-chk cert-data ctx state)
  (let* ((wrld1 (w state))
         (kpa (known-package-alist state))
...">process-embedded-events</a> '<a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a>
                                        (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld1)
                                        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                                        (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
                                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> st-name-new names)
                                        (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-pairlis-x1" data-sym="PAIRLIS-X1">pairlis-x1</a> '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> ax-def-lst)
                                          `((<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
                                             (<a class="sym-link system" href="axioms.html#def-set-inhibit-warnings" data-sym="SET-INHIBIT-WARNINGS">set-inhibit-warnings</a> <span class="string">"theory"</span>)
                                             (<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link local-def" href="#def-disable" data-sym="DISABLE" title="(defmacro disable (&amp;rest rst)
  (list &#39;set-difference-theories &#39;(current-theory :here) (kwote rst)))">disable</a> (<span class="keyword">:executable-counterpart</span> ,CREATOR-NAME))))))
                                        <span class="number">0</span>
                                        <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                                        (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'cert-data state)
                                        ctx
                                        state)
                                      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld2 (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (anc (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> congruent-to)
                                              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> two-passes)
                                              (<a class="sym-link local-def" href="#def-chk-defabsstobj-attachments-ancestors" data-sym="CHK-DEFABSSTOBJ-ATTACHMENTS-ANCESTORS" title="(defun chk-defabsstobj-attachments-ancestors
       (st-name corr-fn-exists corr-fn methods wrld)
  (let* ((recognizer-method (car methods))
         (creator-and-export-methods (cdr methods))
         (recognizer-logic (access absstobj-method recognizer-method :logic))
...">chk-defabsstobj-attachments-ancestors</a> st-name
                                                corr-fn-exists
                                                corr-fn
                                                methods
                                                wrld2))))
                                        (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if two-passes
                                            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)
                                            (<a class="sym-link local-def" href="#def-chk-defabsstobj-attachments" data-sym="CHK-DEFABSSTOBJ-ATTACHMENTS" title="(defun chk-defabsstobj-attachments
       (name anc corr-fn-exists congruent-to ctx wrld state)
  (cond (congruent-to (value nil))
        (t
         (let ((bad-attached-fns (attached-fns anc wrld)))
...">chk-defabsstobj-attachments</a> st-name
                                              anc
                                              corr-fn-exists
                                              congruent-to
                                              ctx
                                              wrld2
                                              state))
                                          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> congruent-to (<a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a> congruent-to wrld2))) (non-memoizable (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> st$c 'non-memoizable nil wrld2))
                                              (wrld3 (<a class="sym-link local-def" href="#def-put-defabsstobj-invariant-risk" data-sym="PUT-DEFABSSTOBJ-INVARIANT-RISK" title="(defun put-defabsstobj-invariant-risk (methods wrld)
  (cond ((endp methods) wrld)
        (t
         (let ((method (car methods)))
           (put-defabsstobj-invariant-risk (cdr methods)
...">put-defabsstobj-invariant-risk</a> methods
                                                  (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> st-name-new
                                                    '<a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a>
                                                    <a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a>
                                                    (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> st-name-new
                                                      'non-memoizable
                                                      non-memoizable
                                                      nil
                                                      (<a class="sym-link system" href="history-management.html#def-putprop-unless" data-sym="PUTPROP-UNLESS">putprop-unless</a> st-name-new
                                                        'non-executablep
                                                        non-executable
                                                        nil
                                                        (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> st-name-new
                                                          'absstobj-info
                                                          (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> absstobj-info
                                                            <span class="keyword">:st$c</span> st$c
                                                            <span class="keyword">:absstobj-tuples</span> absstobj-tuples)
                                                          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> st-name-new
                                                            '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
                                                            <span class="keyword">:common-lisp-compliant</span> (<a class="sym-link local-def" href="#def-put-absstobjs-in-and-outs" data-sym="PUT-ABSSTOBJS-IN-AND-OUTS" title="(defun put-absstobjs-in-and-outs (st methods wrld)
  (cond ((endp methods) wrld)
        (t
         (put-absstobjs-in-and-outs st (cdr methods)
                                    (mv-let
...">put-absstobjs-in-and-outs</a> st-name-new
                                                              methods
                                                              (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> st-name-new
                                                                'stobj
                                                                (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> stobj-property
                                                                  <span class="keyword">:live-var</span> <a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a>
                                                                  <span class="keyword">:recognizer</span> (car names)
                                                                  <span class="keyword">:creator</span> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> names)
                                                                  <span class="keyword">:names</span> (<a class="sym-link local-def" href="#def-sort-absstobj-names" data-sym="SORT-ABSSTOBJ-NAMES" title="(defun sort-absstobj-names (names accessors updaters)
  (let ((lst (intersperse accessors updaters)))
    (append lst (set-difference-eq names lst))))">sort-absstobj-names</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> names) accessors updaters))
                                                                (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> names
                                                                  'stobj-function
                                                                  st-name-new
                                                                  (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> <a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a>
                                                                    'stobj-live-var
                                                                    st-name-new
                                                                    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> <a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a>
                                                                      '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
                                                                      <span class="keyword">:common-lisp-compliant</span> wrld2))))))))))))
                                              (wrld4 (if two-passes
                                                  wrld3
                                                  (<a class="sym-link local-def" href="#def-put-defabsstobj-attachments-disallowed" data-sym="PUT-DEFABSSTOBJ-ATTACHMENTS-DISALLOWED" title="(defun put-defabsstobj-attachments-disallowed
       (name anc corr-fn-exists congruent-to wrld installed-w)
  (cond (congruent-to wrld)
        (t
         (mark-attachment-disallowed anc name
...">put-defabsstobj-attachments-disallowed</a> st-name
                                                    anc
                                                    corr-fn-exists
                                                    congruent-to
                                                    wrld3
                                                    wrld2)))
                                              (discriminator1 (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> discriminator
                                                  (cons '<a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a>
                                                    (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> defstobj-redundant-raw-lisp-discriminator-value
                                                      <span class="keyword">:event</span> event-form
                                                      <span class="keyword">:recognizer</span> (car names)
                                                      <span class="keyword">:creator</span> creator-name
                                                      <span class="keyword">:congruent-stobj-rep</span> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="basis-a.html#def-congruent-stobj-rep" data-sym="CONGRUENT-STOBJ-REP">congruent-stobj-rep</a> st-name-new)
                                                      <span class="keyword">:non-memoizable</span> non-memoizable
                                                      <span class="keyword">:non-executable</span> non-executable))))
                                              (raw-init-form-new (<a class="sym-link local-def" href="#def-defabsstobj-raw-init" data-sym="DEFABSSTOBJ-RAW-INIT" title="(defun defabsstobj-raw-init (creator-name methods)
  `(,(method-exec creator-name methods)))">defabsstobj-raw-init</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> creator-name-orig creator-name)
                                                  methods))
                                              (wrld5 (if att-name
                                                  wrld4
                                                  (<a class="sym-link local-def" href="#def-defabsstobj-update-ext-gens" data-sym="DEFABSSTOBJ-UPDATE-EXT-GENS" title="(defun defabsstobj-update-ext-gens (ext-gens doit names methods wrld)
  (cond (doit (global-set &#39;ext-gens (append? names ext-gens) wrld))
        ((null ext-gens) wrld)
        (t
         (global-set? &#39;ext-gens
...">defabsstobj-update-ext-gens</a> ext-gens-wrld0
                                                    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> discriminator attachable)
                                                    names
                                                    methods
                                                    wrld4))))
                                            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension wrld5 state)
                                              (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-defabsstobj-guards" data-sym="CHK-DEFABSSTOBJ-GUARDS" title="(defun chk-defabsstobj-guards (methods congruent-to ctx wrld state)
  (cond (congruent-to (value nil))
        (t
         (let ((msg
                (chk-defabsstobj-guards1 methods nil ctx wrld
...">chk-defabsstobj-guards</a> methods
                                                  congruent-to
                                                  ctx
                                                  wrld5
                                                  state)
                                                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (att-name (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'retraction wrld1 state)
                                                      (let ((kwa (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (get-event att-name wrld0))))
                                                        (<a class="sym-link local-def" href="#def-defabsstobj-fn1" data-sym="DEFABSSTOBJ-FN1" title="(defun defabsstobj-fn1
       (st-name st$c recognizer creator corr-fn corr-fn-exists exports
        protect-default congruent-to non-executable attachable missing-only ctx
        state event-form discriminator creator-name-orig absstobj-tuples-new)
  (let* ((wrld0 (w state))
...">defabsstobj-fn1</a> att-name
                                                          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:foundation</span> kwa))
                                                          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:recognizer</span> kwa))
                                                          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:creator</span> kwa))
                                                          <span class="keyword">:irrelevant</span> <span class="keyword">:irrelevant</span> (<a class="sym-link local-def" href="#def-fix-export-updaters" data-sym="FIX-EXPORT-UPDATERS" title="(defun fix-export-updaters (old new)
  (let ((old-to-new (pairlis$ (export-names old) (export-names new))))
    (fix-export-updaters1 old old-to-new)))">fix-export-updaters</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:exports</span> kwa))
                                                            exports)
                                                          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:protect-default</span> kwa))
                                                          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:congruent-to</span> kwa))
                                                          non-executable
                                                          nil
                                                          nil
                                                          ctx
                                                          state
                                                          event-form
                                                          discriminator1
                                                          creator-name
                                                          absstobj-tuples))))
                                                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> st-name-new
                                                      event-form
                                                      '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>
                                                      (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> st-name-new <a class="sym-link system" href="basis-a.html#def-the-live-var" data-sym="THE-LIVE-VAR">the-live-var</a> names)
                                                      nil
                                                      `(<a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a> ,ST-NAME-NEW
                                                        ,THE-LIVE-VAR
                                                        ,RAW-INIT-FORM-NEW
                                                        ,RAW-DEF-LST
                                                        ,DISCRIMINATOR1
                                                        ,AX-DEF-LST)
                                                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                                                      ctx
                                                      wrld5
                                                      state)))))))))))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-defabsstobj-fn" data-defines="DEFABSSTOBJ-FN" data-references="DEFABSSTOBJ-FN1,T,CTX,SOFT,ER,BOOLEANP,NOT,COND,MSG,WITH-CTX-SUMMARIZED,EVENT-FORM,STATE,MISSING-ONLY,ATTACHABLE,NON-EXECUTABLE,CONGRUENT-TO,PROTECT-DEFAULT,EXPORTS,CORR-FN-EXISTS,CORR-FN,CREATOR,RECOGNIZER,ST$C,ST-NAME,DEFUN" data-used-by="DEFABSSTOBJ" data-part-name="DEFABSSTOBJ-FN" data-part-args="EVENT-FORM,STATE,MISSING-ONLY,ATTACHABLE,NON-EXECUTABLE,CONGRUENT-TO,PROTECT-DEFAULT,EXPORTS,CORR-FN-EXISTS,CORR-FN,CREATOR,RECOGNIZER,ST$C,ST-NAME" data-part-body="EVENT-FORM,STATE,MISSING-ONLY,NON-EXECUTABLE,CONGRUENT-TO,PROTECT-DEFAULT,EXPORTS,CORR-FN-EXISTS,CORR-FN,CREATOR,RECOGNIZER,ST$C,DEFABSSTOBJ-FN1,T,CTX,SOFT,ER,ATTACHABLE,BOOLEANP,NOT,COND,ST-NAME,MSG,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFABSSTOBJ-FN">defabsstobj-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defabsstobj-fn" data-sym="DEFABSSTOBJ-FN" title="(defun defabsstobj-fn
       (st-name st$c recognizer creator corr-fn corr-fn-exists exports
        protect-default congruent-to non-executable attachable missing-only
        state event-form)
  (with-ctx-summarized (msg &quot;( DEFABSSTOBJ ~x0 ...)&quot; st-name)
...">defabsstobj-fn</a>
  (st-name st$c
    recognizer
    creator
    corr-fn
    corr-fn-exists
    exports
    protect-default
    congruent-to
    non-executable
    attachable
    missing-only
    state
    event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFABSSTOBJ ~x0 ...)"</span> st-name)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> attachable)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The value of the :ATTACHABLE keyword for DEFABSSTOBJ must be ~x0 or ~
          ~x1.  The value ~x2 is thus illegal."</span>
          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
          nil
          attachable))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defabsstobj-fn1" data-sym="DEFABSSTOBJ-FN1" title="(defun defabsstobj-fn1
       (st-name st$c recognizer creator corr-fn corr-fn-exists exports
        protect-default congruent-to non-executable attachable missing-only ctx
        state event-form discriminator creator-name-orig absstobj-tuples-new)
  (let* ((wrld0 (w state))
...">defabsstobj-fn1</a> st-name
          st$c
          recognizer
          creator
          corr-fn
          corr-fn-exists
          exports
          protect-default
          congruent-to
          non-executable
          attachable
          missing-only
          ctx
          state
          event-form
          nil
          nil
          nil)))))</pre>
  </div>

<div class="form-block function" id="def-create-state" data-defines="CREATE-STATE" data-references="*DEFAULT-STATE*,COERCE-OBJECT-TO-STATE,T,XARGS,DECLARE,DEFUN" data-part-name="CREATE-STATE" data-part-declare="T,XARGS,DECLARE" data-part-body="*DEFAULT-STATE*,COERCE-OBJECT-TO-STATE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CREATE-STATE">create-state</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-create-state" data-sym="CREATE-STATE" title="(defun create-state ()
  (declare (xargs :guard t))
  (coerce-object-to-state *default-state*))">create-state</a>
  nil
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="axioms.html#def-coerce-object-to-state" data-sym="COERCE-OBJECT-TO-STATE">coerce-object-to-state</a> <a class="sym-link system" href="axioms.html#def-_2Adefault-state_2A" data-sym="*DEFAULT-STATE*">*default-state*</a>))</pre>
  </div>

<div class="form-block macro" id="def-with-local-state" data-defines="WITH-LOCAL-STATE" data-references="STATE,WITH-LOCAL-STOBJ,QUASIQUOTE,MV-LET-FORM,DEFMACRO" data-used-by="CHANNEL-TO-STRING" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-LOCAL-STATE">with-local-state</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-local-state" data-sym="WITH-LOCAL-STATE" title="(defmacro with-local-state (mv-let-form) `(with-local-stobj state ,mv-let-form))">with-local-state</a>
  (mv-let-form)
  `(with-local-stobj state ,MV-LET-FORM))</pre>
  </div>

<div class="form-block macro" id="def-stobj-let" data-defines="STOBJ-LET" data-references="STOBJ-LET-FN,IGNORE,DECLARE,ARGS,&REST,X,&WHOLE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="STOBJ-LET">stobj-let</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-stobj-let" data-sym="STOBJ-LET" title="(defmacro stobj-let (&amp;whole x &amp;rest args)
  (declare (ignore args))
  (stobj-let-fn x))">stobj-let</a>
  (&amp;whole x &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
  (stobj-let-fn x))</pre>
  </div>

<div class="form-block function" id="def-collect-badged-fns" data-defines="COLLECT-BADGED-FNS" data-references="CDR,CONS,NOT,ASSERT$,T,CAR,LIST,EXECUTABLE-BADGE,QUOTE,EV-FNCALL-W,VAL,ERP,MV-LET,ENDP,COND,WRLD,FNS,DEFUN" data-used-by="PUSH-UNTOUCHABLE-FN" data-part-name="COLLECT-BADGED-FNS" data-part-args="WRLD,FNS" data-part-body="CDR,COLLECT-BADGED-FNS,CONS,NOT,ASSERT$,T,WRLD,CAR,LIST,EXECUTABLE-BADGE,QUOTE,EV-FNCALL-W,VAL,ERP,MV-LET,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-BADGED-FNS">collect-badged-fns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-badged-fns" data-sym="COLLECT-BADGED-FNS" title="(defun collect-badged-fns (fns wrld)
  (cond ((endp fns) nil)
        ((mv-let (erp val)
                 (ev-fncall-w &#39;executable-badge (list (car fns) wrld) wrld nil
                              nil nil t nil)
...">collect-badged-fns</a>
  (fns wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) nil)
    ((<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val)
       (ev-fncall-w 'executable-badge
         (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car fns) wrld)
         wrld
         nil
         nil
         nil
         <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
         nil)
       (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> erp) val)) (cons (car fns) (<a class="sym-link local-def" href="#def-collect-badged-fns" data-sym="COLLECT-BADGED-FNS" title="(defun collect-badged-fns (fns wrld)
  (cond ((endp fns) nil)
        ((mv-let (erp val)
                 (ev-fncall-w &#39;executable-badge (list (car fns) wrld) wrld nil
                              nil nil t nil)
...">collect-badged-fns</a> (cdr fns) wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-collect-badged-fns" data-sym="COLLECT-BADGED-FNS" title="(defun collect-badged-fns (fns wrld)
  (cond ((endp fns) nil)
        ((mv-let (erp val)
                 (ev-fncall-w &#39;executable-badge (list (car fns) wrld) wrld nil
                              nil nil t nil)
...">collect-badged-fns</a> (cdr fns) wrld))))</pre>
  </div>

<div class="form-block function" id="def-collect-macros" data-defines="COLLECT-MACROS" data-references="CONS,CDR,T,MACRO-ARGS,QUOTE,CAR,GETPROPC,EQ,ENDP,COND,WRLD,NAMES,DEFUN" data-used-by="PUSH-UNTOUCHABLE-FN" data-part-name="COLLECT-MACROS" data-part-args="WRLD,NAMES" data-part-body="CONS,CDR,COLLECT-MACROS,WRLD,T,MACRO-ARGS,QUOTE,CAR,GETPROPC,EQ,NAMES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-MACROS">collect-macros</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-macros" data-sym="COLLECT-MACROS" title="(defun collect-macros (names wrld)
  (cond ((endp names) nil)
        ((eq (getpropc (car names) &#39;macro-args t wrld) t)
         (collect-macros (cdr names) wrld))
        (t (cons (car names) (collect-macros (cdr names) wrld)))))">collect-macros</a>
  (names wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> names) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car names) 'macro-args <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-collect-macros" data-sym="COLLECT-MACROS" title="(defun collect-macros (names wrld)
  (cond ((endp names) nil)
        ((eq (getpropc (car names) &#39;macro-args t wrld) t)
         (collect-macros (cdr names) wrld))
        (t (cons (car names) (collect-macros (cdr names) wrld)))))">collect-macros</a> (cdr names) wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car names) (<a class="sym-link local-def" href="#def-collect-macros" data-sym="COLLECT-MACROS" title="(defun collect-macros (names wrld)
  (cond ((endp names) nil)
        ((eq (getpropc (car names) &#39;macro-args t wrld) t)
         (collect-macros (cdr names) wrld))
        (t (cons (car names) (collect-macros (cdr names) wrld)))))">collect-macros</a> (cdr names) wrld)))))</pre>
  </div>

<div class="form-block function" id="def-push-untouchable-fn" data-defines="PUSH-UNTOUCHABLE-FN" data-references="UNION-EQ,GLOBAL-SET,INSTALL-EVENT,STRIP-CARS,COLLECT-MACROS,AND,BAD3,COLLECT-BADGED-FNS,BAD2,NEVER-UNTOUCHABLE-FNS,COLLECT-NEVER-UNTOUCHABLE-FNS-ENTRIES,BAD1,STOP-REDUNDANT-EVENT,GLOBAL-VAL,SUBSETP-EQ,CTX,SOFT,ER,SYMBOL-LISTP,NOT,UNTOUCHABLE-VARS,UNTOUCHABLE-FNS,UNTOUCHABLE-PROP,IF,NAMES,PUSH-UNTOUCHABLE,QUOTE,LIST,OR,W,WRLD,LET,T,MSG,SYMBOLP,COND,WITH-CTX-SUMMARIZED,EVENT-FORM,STATE,FN-P,NAME,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="PUSH-UNTOUCHABLE-FN" data-part-args="EVENT-FORM,STATE,FN-P,NAME" data-part-body="UNION-EQ,GLOBAL-SET,INSTALL-EVENT,STRIP-CARS,COLLECT-MACROS,AND,BAD3,COLLECT-BADGED-FNS,BAD2,NEVER-UNTOUCHABLE-FNS,COLLECT-NEVER-UNTOUCHABLE-FNS-ENTRIES,BAD1,STOP-REDUNDANT-EVENT,GLOBAL-VAL,SUBSETP-EQ,CTX,SOFT,ER,SYMBOL-LISTP,NOT,UNTOUCHABLE-VARS,UNTOUCHABLE-FNS,UNTOUCHABLE-PROP,IF,NAMES,PUSH-UNTOUCHABLE,QUOTE,LIST,OR,EVENT-FORM,STATE,W,WRLD,LET,T,FN-P,MSG,NAME,SYMBOLP,COND,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUSH-UNTOUCHABLE-FN">push-untouchable-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-push-untouchable-fn" data-sym="PUSH-UNTOUCHABLE-FN" title="(defun push-untouchable-fn (name fn-p state event-form)
  (with-ctx-summarized
   (cond ((symbolp name) (msg &quot;( PUSH-UNTOUCHABLE ~x0 ~x1)&quot; name fn-p))
         (t &quot;( PUSH-UNTOUCHABLE ...)&quot;))
   (let ((wrld (w state))
...">push-untouchable-fn</a>
  (name fn-p state event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp name) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( PUSH-UNTOUCHABLE ~x0 ~x1)"</span> name fn-p))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"( PUSH-UNTOUCHABLE ...)"</span>))
    (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-push-untouchable" data-sym="PUSH-UNTOUCHABLE">push-untouchable</a> name fn-p)))
        (names (if (symbolp name)
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
            name))
        (untouchable-prop (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (fn-p 'untouchable-fns) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> 'untouchable-vars))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> names)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The argument to push-untouchable must be either a non-nil symbol ~
            or a non-empty true list of symbols and ~x0 is neither."</span>
            name))
        ((<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> names (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> untouchable-prop wrld)) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((bad1 (if fn-p
                 (<a class="sym-link system" href="defthm.html#def-collect-never-untouchable-fns-entries" data-sym="COLLECT-NEVER-UNTOUCHABLE-FNS-ENTRIES">collect-never-untouchable-fns-entries</a> names
                   (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'never-untouchable-fns wrld))
                 nil)) (bad2 (if fn-p
                  (<a class="sym-link local-def" href="#def-collect-badged-fns" data-sym="COLLECT-BADGED-FNS" title="(defun collect-badged-fns (fns wrld)
  (cond ((endp fns) nil)
        ((mv-let (erp val)
                 (ev-fncall-w &#39;executable-badge (list (car fns) wrld) wrld nil
                              nil nil t nil)
...">collect-badged-fns</a> names wrld)
                  nil))
              (bad3 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> fn-p (<a class="sym-link local-def" href="#def-collect-macros" data-sym="COLLECT-MACROS" title="(defun collect-macros (names wrld)
  (cond ((endp names) nil)
        ((eq (getpropc (car names) &#39;macro-args t wrld) t)
         (collect-macros (cdr names) wrld))
        (t (cons (car names) (collect-macros (cdr names) wrld)))))">collect-macros</a> names wrld))))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad1 (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"You have tried to make untouchable the ~
                     function~#0~[~/s~], ~&amp;0.  However, ~#0~[this function ~
                     is~/these functions are~] sometimes introduced into ~
                     proofs by one or more metatheorems or clause processors ~
                     having well-formedness guarantees.   If you insist on ~
                     making ~#0~[this name~/these names~] untouchable you ~
                     must redefine the relevant metafunctions and clause ~
                     processors so they do not create terms involving ~
                     ~#0~[it~/them~] and prove and cite appropriate ~
                     :WELL-FORMEDNESS-GUARANTEE theorems.  The following data ~
                     structure may help you find the relevant events to ~
                     change.  The data structure is an alist pairing each ~
                     function name above with information about all the ~
                     metatheorems or clause processors that may introduce ~
                     that name.  The information for each metatheorem or ~
                     clause processor is the name of the correctness theorem, ~
                     the name of the metafunction or clause processor ~
                     verified by that metatheorem, the name of the ~
                     well-formedness guarantee for that metafunction or ~
                     clause processor, and analogous information about any ~
                     hypothesis metafunction involved.  All of these events ~
                     (and possibly their supporting functions and lemmas) ~
                     must be fixed so that the names you now want to be ~
                     untouchable are not produced.~%~X12"</span>
                  (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> bad1)
                  bad1
                  nil))
              (bad2 (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"You have tried to make untouchable the ~
                     function~#0~[~/s~], ~&amp;0.  However, ~#0~[this function ~
                     has a badge~/these functions have badges~] (see :DOC ~
                     apply$).  We do not allow a badged function F to be ~
                     untouchable because (apply$ &#39;F (list arg1 arg2 ...)) is ~
                     still a legal term that, however, is a proxy for (F arg1 ~
                     arg2 ...)."</span>
                  bad2))
              (bad3 (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"You have tried to make untouchable the macro~#0~[~/s~], ~
                     ~&amp;0.  However, macros are never directly untouchable.  ~
                     To get the effect of an untouchable macro, see :DOC ~
                     defmacro-untouchable."</span>
                  bad3))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> name
                  event-form
                  '<a class="sym-link system" href="axioms.html#def-push-untouchable" data-sym="PUSH-UNTOUCHABLE">push-untouchable</a>
                  <span class="number">0</span>
                  nil
                  nil
                  nil
                  nil
                  (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> untouchable-prop
                    (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> names (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> untouchable-prop wrld))
                    wrld)
                  state)))))))))</pre>
  </div>

<div class="form-block function" id="def-remove-untouchable-fn" data-defines="REMOVE-UNTOUCHABLE-FN" data-references="SET-DIFFERENCE-EQ,GLOBAL-SET,INSTALL-EVENT,OLD-UNTOUCHABLE-PROP,STOP-REDUNDANT-EVENT,GLOBAL-VAL,INTERSECTP-EQ,CTX,SOFT,ER,SYMBOL-LISTP,NOT,UNTOUCHABLE-VARS,UNTOUCHABLE-FNS,UNTOUCHABLE-PROP,IF,NAMES,REMOVE-UNTOUCHABLE,QUOTE,LIST,OR,W,WRLD,LET,T,MSG,SYMBOLP,COND,WITH-CTX-SUMMARIZED,EVENT-FORM,STATE,FN-P,NAME,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS" data-part-name="REMOVE-UNTOUCHABLE-FN" data-part-args="EVENT-FORM,STATE,FN-P,NAME" data-part-body="SET-DIFFERENCE-EQ,GLOBAL-SET,INSTALL-EVENT,OLD-UNTOUCHABLE-PROP,STOP-REDUNDANT-EVENT,GLOBAL-VAL,INTERSECTP-EQ,CTX,SOFT,ER,SYMBOL-LISTP,NOT,UNTOUCHABLE-VARS,UNTOUCHABLE-FNS,UNTOUCHABLE-PROP,IF,NAMES,REMOVE-UNTOUCHABLE,QUOTE,LIST,OR,EVENT-FORM,STATE,W,WRLD,LET,T,FN-P,MSG,NAME,SYMBOLP,COND,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-UNTOUCHABLE-FN">remove-untouchable-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-untouchable-fn" data-sym="REMOVE-UNTOUCHABLE-FN" title="(defun remove-untouchable-fn (name fn-p state event-form)
  (with-ctx-summarized
   (cond ((symbolp name) (msg &quot;( REMOVE-UNTOUCHABLE ~x0 ~x1)&quot; name fn-p))
         (t &quot;( REMOVE-UNTOUCHABLE ...)&quot;))
   (let ((wrld (w state))
...">remove-untouchable-fn</a>
  (name fn-p state event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp name) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( REMOVE-UNTOUCHABLE ~x0 ~x1)"</span> name fn-p))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"( REMOVE-UNTOUCHABLE ...)"</span>))
    (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-remove-untouchable" data-sym="REMOVE-UNTOUCHABLE">remove-untouchable</a> name fn-p)))
        (names (if (symbolp name)
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> name)
            name))
        (untouchable-prop (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (fn-p 'untouchable-fns) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> 'untouchable-vars))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> names)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The argument to remove-untouchable must be either a non-nil ~
            symbol or a non-empty true list of symbols and ~x0 is neither."</span>
            name))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-intersectp-eq" data-sym="INTERSECTP-EQ">intersectp-eq</a> names (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> untouchable-prop wrld))) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((old-untouchable-prop (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> untouchable-prop wrld)))
            (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> name
              event-form
              '<a class="sym-link system" href="axioms.html#def-remove-untouchable" data-sym="REMOVE-UNTOUCHABLE">remove-untouchable</a>
              <span class="number">0</span>
              nil
              nil
              nil
              nil
              (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> untouchable-prop
                (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> old-untouchable-prop names)
                wrld)
              state)))))))</pre>
  </div>

<div class="form-block function" id="def-def-body-lemmas" data-defines="DEF-BODY-LEMMAS" data-references="CDR,CAR,DEF-BODY,ACCESS,FIND-RUNED-LEMMA,CONS,T,ENDP,COND,LEMMAS,DEF-BODIES,DEFUN" data-used-by="SHOW-BODIES" data-part-name="DEF-BODY-LEMMAS" data-part-args="LEMMAS,DEF-BODIES" data-part-body="CDR,DEF-BODY-LEMMAS,LEMMAS,CAR,DEF-BODY,ACCESS,FIND-RUNED-LEMMA,CONS,T,DEF-BODIES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEF-BODY-LEMMAS">def-body-lemmas</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-def-body-lemmas" data-sym="DEF-BODY-LEMMAS" title="(defun def-body-lemmas (def-bodies lemmas)
  (cond ((endp def-bodies) nil)
        (t
         (cons
          (find-runed-lemma (access def-body (car def-bodies) :rune) lemmas)">def-body-lemmas</a>
  (def-bodies lemmas)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> def-bodies) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="history-management.html#def-find-runed-lemma" data-sym="FIND-RUNED-LEMMA">find-runed-lemma</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> (car def-bodies) <span class="keyword">:rune</span>)
          lemmas)
        (<a class="sym-link local-def" href="#def-def-body-lemmas" data-sym="DEF-BODY-LEMMAS" title="(defun def-body-lemmas (def-bodies lemmas)
  (cond ((endp def-bodies) nil)
        (t
         (cons
          (find-runed-lemma (access def-body (car def-bodies) :rune) lemmas)">def-body-lemmas</a> (cdr def-bodies) lemmas)))))</pre>
  </div>

<div class="form-block macro" id="def-show-bodies" data-defines="SHOW-BODIES" data-references="SOFT,ER,ENS-MAYBE-BRR,T,INFO-FOR-LEMMAS,PRINT-INFO-FOR-RULES,STANDARD-CO,CONS,LIST,FMS,PPROGN,COND,DEF-BODIES,GETPROPC,DEF-BODY-LEMMAS,LEMMAS,MACRO-ALIASES,DEREF-MACRO-NAME,STATE,W,WRLD,LET*,QUASIQUOTE,IF,LET,CADR,QUOTE,CAR,EQ,LENGTH,EQL,TRUE-LISTP,AND,SYMBOLP,OR,XARGS,DECLARE,FN,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-BODIES">show-bodies</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-show-bodies" data-sym="SHOW-BODIES" title="(defmacro show-bodies (fn)
  (declare
   (xargs :guard
    (or (symbolp fn)
        (and (true-listp fn) (eql (length fn) 2) (eq (car fn) (quote quote))
...">show-bodies</a>
  (fn)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (symbolp fn)
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> fn)
          (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> fn) <span class="number">2</span>)
          (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car fn) 'quote)
          (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> fn))))))
  (let ((fn (if (symbolp fn)
         fn
         (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> fn))))
    `(<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (fn (<a class="sym-link system" href="axioms.html#def-deref-macro-name" data-sym="DEREF-MACRO-NAME">deref-macro-name</a> ',FN (<a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> wrld)))
        (lemmas (<a class="sym-link local-def" href="#def-def-body-lemmas" data-sym="DEF-BODY-LEMMAS" title="(defun def-body-lemmas (def-bodies lemmas)
  (cond ((endp def-bodies) nil)
        (t
         (cons
          (find-runed-lemma (access def-body (car def-bodies) :rune) lemmas)">def-body-lemmas</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'def-bodies nil wrld)
            (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'lemmas nil wrld))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (lemmas (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Definitional bodies available for ~x0, current ~
                            one listed first:~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 fn))
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state
              nil)
            (<a class="sym-link system" href="defthm.html#def-print-info-for-rules" data-sym="PRINT-INFO-FOR-RULES">print-info-for-rules</a> (<a class="sym-link system" href="defthm.html#def-info-for-lemmas" data-sym="INFO-FOR-LEMMAS">info-for-lemmas</a> lemmas <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-ens-maybe-brr" data-sym="ENS-MAYBE-BRR">ens-maybe-brr</a> state) wrld)
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            '<a class="sym-link local-def" href="#def-show-bodies" data-sym="SHOW-BODIES" title="(defmacro show-bodies (fn)
  (declare
   (xargs :guard
    (or (symbolp fn)
        (and (true-listp fn) (eql (length fn) 2) (eq (car fn) (quote quote))
...">show-bodies</a>
            <span class="string">"There are no definitional bodies for ~x0."</span>
            fn))))))</pre>
  </div>

<div class="form-block function" id="def-set-body-fn1" data-defines="SET-BODY-FN1" data-references="T,CDR,REVAPPEND,CONS,CAR,DEF-BODY,ACCESS,EQUAL,NULL,COND,ACC,DEF-BODIES,RUNE,DEFUN" data-used-by="SET-BODY-FN" data-part-name="SET-BODY-FN1" data-part-args="ACC,DEF-BODIES,RUNE" data-part-body="SET-BODY-FN1,T,CDR,ACC,REVAPPEND,CONS,CAR,DEF-BODY,ACCESS,RUNE,EQUAL,DEF-BODIES,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-BODY-FN1">set-body-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-body-fn1" data-sym="SET-BODY-FN1" title="(defun set-body-fn1 (rune def-bodies acc)
  (cond ((null def-bodies) nil)
        ((equal rune (access def-body (car def-bodies) :rune))
         (cons (car def-bodies) (revappend acc (cdr def-bodies))))
        (t (set-body-fn1 rune (cdr def-bodies) (cons (car def-bodies) acc)))))">set-body-fn1</a>
  (rune def-bodies acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> def-bodies) nil)
    ((equal rune (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> (car def-bodies) <span class="keyword">:rune</span>)) (cons (car def-bodies) (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> acc (cdr def-bodies))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-set-body-fn1" data-sym="SET-BODY-FN1" title="(defun set-body-fn1 (rune def-bodies acc)
  (cond ((null def-bodies) nil)
        ((equal rune (access def-body (car def-bodies) :rune))
         (cons (car def-bodies) (revappend acc (cdr def-bodies))))
        (t (set-body-fn1 rune (cdr def-bodies) (cons (car def-bodies) acc)))))">set-body-fn1</a> rune
        (cdr def-bodies)
        (cons (car def-bodies) acc)))))</pre>
  </div>

<div class="form-block function" id="def-set-body-fn" data-defines="SET-BODY-FN" data-references="PUTPROP,SET-BODY,INSTALL-EVENT,STOP-REDUNDANT-EVENT,EQ,CTX,SOFT,ER,NULL,SET-BODY-FN1,CAR,DEF-BODY,ACCESS,EQUAL,DEF-BODIES,QUOTE,GETPROPC,OLD-DEF-BODIES,MACRO-ALIASES,DEREF-MACRO-NAME,AND,LIST,IF,RUNE,W,WRLD,LET*,T,MSG,SYMBOLP,COND,WITH-CTX-SUMMARIZED,EVENT-FORM,STATE,NAME-OR-RUNE,FN,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="SET-BODY-FN" data-part-args="EVENT-FORM,STATE,NAME-OR-RUNE,FN" data-part-body="PUTPROP,SET-BODY,EVENT-FORM,INSTALL-EVENT,STOP-REDUNDANT-EVENT,EQ,CTX,SOFT,ER,NULL,SET-BODY-FN1,CAR,DEF-BODY,ACCESS,EQUAL,DEF-BODIES,QUOTE,GETPROPC,OLD-DEF-BODIES,MACRO-ALIASES,DEREF-MACRO-NAME,AND,LIST,NAME-OR-RUNE,IF,RUNE,STATE,W,WRLD,LET*,T,MSG,FN,SYMBOLP,COND,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-BODY-FN">set-body-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-body-fn" data-sym="SET-BODY-FN" title="(defun set-body-fn (fn name-or-rune state event-form)
  (with-ctx-summarized
   (cond ((symbolp fn) (msg &quot;( SET-BODY ~x0)&quot; fn)) (t &quot;( SET-BODY ...)&quot;))
   (let* ((wrld (w state))
          (rune
...">set-body-fn</a>
  (fn name-or-rune state event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp fn) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( SET-BODY ~x0)"</span> fn))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"( SET-BODY ...)"</span>))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (rune (if (symbolp name-or-rune)
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:definition</span> name-or-rune)
            name-or-rune))
        (fn (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp fn)
            (<a class="sym-link system" href="axioms.html#def-deref-macro-name" data-sym="DEREF-MACRO-NAME">deref-macro-name</a> fn (<a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> wrld))))
        (old-def-bodies (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'def-bodies nil wrld))
        (def-bodies (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> fn
            old-def-bodies
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal rune (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> (car old-def-bodies) <span class="keyword">:rune</span>)) <span class="keyword">:redundant</span>)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-set-body-fn1" data-sym="SET-BODY-FN1" title="(defun set-body-fn1 (rune def-bodies acc)
  (cond ((null def-bodies) nil)
        ((equal rune (access def-body (car def-bodies) :rune))
         (cons (car def-bodies) (revappend acc (cdr def-bodies))))
        (t (set-body-fn1 rune (cdr def-bodies) (cons (car def-bodies) acc)))))">set-body-fn1</a> rune old-def-bodies nil))))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> def-bodies) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"No definitional body was found for function ~x0 with rune ~
            ~x1.  See :DOC set-body."</span>
            fn
            rune))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> def-bodies <span class="keyword">:redundant</span>) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> rune
            event-form
            '<a class="sym-link system" href="axioms.html#def-set-body" data-sym="SET-BODY">set-body</a>
            <span class="number">0</span>
            nil
            nil
            nil
            ctx
            (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn 'def-bodies def-bodies wrld)
            state))))))</pre>
  </div>

<div class="form-block function" id="def-trace-multiplicity" data-defines="TRACE-MULTIPLICITY" data-references="LENGTH,AND,QUOTE,GETPROPC,STOBJS-OUT,LET,STATE,NAME,DEFUN" data-part-name="TRACE-MULTIPLICITY" data-part-args="STATE,NAME" data-part-body="LENGTH,AND,QUOTE,NAME,GETPROPC,STOBJS-OUT,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE-MULTIPLICITY">trace-multiplicity</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace-multiplicity" data-sym="TRACE-MULTIPLICITY" title="(defun trace-multiplicity (name state)
  (let ((stobjs-out (getpropc name &#39;stobjs-out)))
    (and stobjs-out (length stobjs-out))))">trace-multiplicity</a>
  (name state)
  (let ((<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))))</pre>
  </div>

<div class="form-block function" id="def-_2A1_2Adefp" data-defines="*1*DEFP" data-references="T,FORMALS,QUOTE,GETPROPC,EQ,NOT,CAR,FN,LET,WRLD,TRACE-SPEC,DEFUN" data-part-name="*1*DEFP" data-part-args="WRLD,TRACE-SPEC" data-part-body="WRLD,T,FORMALS,QUOTE,GETPROPC,EQ,NOT,TRACE-SPEC,CAR,FN,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="*1*DEFP">*1*defp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-_2A1_2Adefp" data-sym="*1*DEFP" title="(defun *1*defp (trace-spec wrld)
  (let ((fn (car trace-spec)))
    (not (eq (getpropc fn &#39;formals t wrld) t))))">*1*defp</a>
  (trace-spec wrld)
  (let ((fn (car trace-spec)))
    (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block function" id="def-trace_24-er-msg" data-defines="TRACE$-ER-MSG" data-references="MSG,FN,DEFUN" data-used-by="TRACE$-FN-GENERAL" data-part-name="TRACE$-ER-MSG" data-part-args="FN" data-part-body="FN,MSG" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE$-ER-MSG">trace$-er-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace_24-er-msg" data-sym="TRACE$-ER-MSG" title="(defun trace$-er-msg (fn)
  (msg &quot;Ignoring request to trace function ~x0, because&quot; fn))">trace$-er-msg</a>
  (fn)
  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Ignoring request to trace function ~x0, because"</span> fn))</pre>
  </div>

<div class="form-block function" id="def-decls-and-doc" data-defines="DECLS-AND-DOC" data-references="T,CDR,CONS,DECLARE,QUOTE,CAAR,EQ,CONSP,AND,CAR,STRINGP,OR,ENDP,COND,FORMS,DEFUN" data-part-name="DECLS-AND-DOC" data-part-args="FORMS" data-part-body="T,CDR,DECLS-AND-DOC,CONS,DECLARE,QUOTE,CAAR,EQ,CONSP,AND,CAR,STRINGP,OR,FORMS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DECLS-AND-DOC">decls-and-doc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-decls-and-doc" data-sym="DECLS-AND-DOC" title="(defun decls-and-doc (forms)
  (cond ((endp forms) nil)
        ((or (stringp (car forms))
             (and (consp (car forms)) (eq (caar forms) &#39;declare)))
         (cons (car forms) (decls-and-doc (cdr forms))))">decls-and-doc</a>
  (forms)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> forms) nil)
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (stringp (car forms))
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car forms)) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> forms) 'declare))) (cons (car forms) (<a class="sym-link local-def" href="#def-decls-and-doc" data-sym="DECLS-AND-DOC" title="(defun decls-and-doc (forms)
  (cond ((endp forms) nil)
        ((or (stringp (car forms))
             (and (consp (car forms)) (eq (caar forms) &#39;declare)))
         (cons (car forms) (decls-and-doc (cdr forms))))">decls-and-doc</a> (cdr forms))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-trace_24-when-gcond" data-defines="TRACE$-WHEN-GCOND" data-references="WHEN,QUASIQUOTE,IF,FORM,GCOND,DEFUN" data-part-name="TRACE$-WHEN-GCOND" data-part-args="FORM,GCOND" data-part-body="FORM,WHEN,QUASIQUOTE,GCOND,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE$-WHEN-GCOND">trace$-when-gcond</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace_24-when-gcond" data-sym="TRACE$-WHEN-GCOND" title="(defun trace$-when-gcond (gcond form)
  (if gcond
      `(when ,gcond ,form)
      form))">trace$-when-gcond</a>
  (gcond form)
  (if gcond
    `(when ,GCOND ,FORM)
    form))</pre>
  </div>

<div class="form-block function" id="def-evisceration-stobj-mark-simple" data-defines="EVISCERATION-STOBJ-MARK-SIMPLE" data-references="STOBJ-PRINT-NAME,*EVISCERATION-MARK*,CONS,T,*EVISCERATION-STATE-MARK*,STATE,QUOTE,EQ,COND,NAME,DEFUN" data-used-by="STOBJ-EVISCERATION-ALIST" data-part-name="EVISCERATION-STOBJ-MARK-SIMPLE" data-part-args="NAME" data-part-body="STOBJ-PRINT-NAME,*EVISCERATION-MARK*,CONS,T,*EVISCERATION-STATE-MARK*,STATE,QUOTE,NAME,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVISCERATION-STOBJ-MARK-SIMPLE">evisceration-stobj-mark-simple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-evisceration-stobj-mark-simple" data-sym="EVISCERATION-STOBJ-MARK-SIMPLE" title="(defun evisceration-stobj-mark-simple (name)
  (cond ((eq name &#39;state) *evisceration-state-mark*)
        (t (cons *evisceration-mark* (stobj-print-name name)))))">evisceration-stobj-mark-simple</a>
  (name)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'state) <a class="sym-link system" href="basis-a.html#def-_2Aevisceration-state-mark_2A" data-sym="*EVISCERATION-STATE-MARK*">*evisceration-state-mark*</a>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons <a class="sym-link system" href="basis-a.html#def-_2Aevisceration-mark_2A" data-sym="*EVISCERATION-MARK*">*evisceration-mark*</a> (<a class="sym-link system" href="basis-b.html#def-stobj-print-name" data-sym="STOBJ-PRINT-NAME">stobj-print-name</a> name)))))</pre>
  </div>

<div class="form-block function" id="def-stobj-evisceration-alist" data-defines="STOBJ-EVISCERATION-ALIST" data-references="CDR,CAAR,EVISCERATION-STOBJ-MARK-SIMPLE,CDAR,T,*EVISCERATION-STATE-MARK*,COERCE-STATE-TO-OBJECT,CONS,LIST,ENDP,COND,STATE,USER-STOBJ-ALIST,DEFUN" data-used-by="TRACE-EVISCERATION-ALIST" data-part-name="STOBJ-EVISCERATION-ALIST" data-part-args="STATE,USER-STOBJ-ALIST" data-part-body="CDR,STOBJ-EVISCERATION-ALIST,CAAR,EVISCERATION-STOBJ-MARK-SIMPLE,CDAR,T,*EVISCERATION-STATE-MARK*,STATE,COERCE-STATE-TO-OBJECT,CONS,LIST,USER-STOBJ-ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="STOBJ-EVISCERATION-ALIST">stobj-evisceration-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-stobj-evisceration-alist" data-sym="STOBJ-EVISCERATION-ALIST" title="(defun stobj-evisceration-alist (user-stobj-alist state)
  (cond
   ((endp user-stobj-alist)
    (list (cons (coerce-state-to-object state) *evisceration-state-mark*)))
   (t
...">stobj-evisceration-alist</a>
  (<a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a> state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a>) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons (<a class="sym-link system" href="axioms.html#def-coerce-state-to-object" data-sym="COERCE-STATE-TO-OBJECT">coerce-state-to-object</a> state)
          <a class="sym-link system" href="basis-a.html#def-_2Aevisceration-state-mark_2A" data-sym="*EVISCERATION-STATE-MARK*">*evisceration-state-mark*</a>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (cons (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> <a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a>)
          (<a class="sym-link local-def" href="#def-evisceration-stobj-mark-simple" data-sym="EVISCERATION-STOBJ-MARK-SIMPLE" title="(defun evisceration-stobj-mark-simple (name)
  (cond ((eq name &#39;state) *evisceration-state-mark*)
        (t (cons *evisceration-mark* (stobj-print-name name)))))">evisceration-stobj-mark-simple</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> <a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a>)))
        (<a class="sym-link local-def" href="#def-stobj-evisceration-alist" data-sym="STOBJ-EVISCERATION-ALIST" title="(defun stobj-evisceration-alist (user-stobj-alist state)
  (cond
   ((endp user-stobj-alist)
    (list (cons (coerce-state-to-object state) *evisceration-state-mark*)))
   (t
...">stobj-evisceration-alist</a> (cdr <a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a>) state)))))</pre>
  </div>

<div class="form-block function" id="def-trace-evisceration-alist" data-defines="TRACE-EVISCERATION-ALIST" data-references="USER-STOBJ-ALIST,STOBJ-EVISCERATION-ALIST,WORLD-EVISCERATION-ALIST,APPEND,STATE,DEFUN" data-used-by="EXPLAIN-GIANT-LAMBDA-OBJECT-FN" data-part-name="TRACE-EVISCERATION-ALIST" data-part-args="STATE" data-part-body="USER-STOBJ-ALIST,STOBJ-EVISCERATION-ALIST,STATE,WORLD-EVISCERATION-ALIST,APPEND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE-EVISCERATION-ALIST">trace-evisceration-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace-evisceration-alist" data-sym="TRACE-EVISCERATION-ALIST" title="(defun trace-evisceration-alist (state)
  (append (world-evisceration-alist state nil)
          (stobj-evisceration-alist (user-stobj-alist state) state)))">trace-evisceration-alist</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="basis-a.html#def-world-evisceration-alist" data-sym="WORLD-EVISCERATION-ALIST">world-evisceration-alist</a> state nil)
    (<a class="sym-link local-def" href="#def-stobj-evisceration-alist" data-sym="STOBJ-EVISCERATION-ALIST" title="(defun stobj-evisceration-alist (user-stobj-alist state)
  (cond
   ((endp user-stobj-alist)
    (list (cons (coerce-state-to-object state) *evisceration-state-mark*)))
   (t
...">stobj-evisceration-alist</a> (<a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a> state) state)))</pre>
  </div>

<div class="form-block function" id="def-set-trace-evisc-tuple" data-defines="SET-TRACE-EVISC-TUPLE" data-references="IGNORE,DECLARE,STATE,VAL,DEFUN" data-used-by="SET-EVISC-TUPLE-FN,SET-SITE-EVISC-TUPLE" data-part-name="SET-TRACE-EVISC-TUPLE" data-part-args="STATE,VAL" data-part-declare="VAL,IGNORE,DECLARE" data-part-body="STATE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-TRACE-EVISC-TUPLE">set-trace-evisc-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-trace-evisc-tuple" data-sym="SET-TRACE-EVISC-TUPLE" title="(defun set-trace-evisc-tuple (val state) (declare (ignore val)) state)">set-trace-evisc-tuple</a>
  (val state)
  (declare (ignore val))
  state)</pre>
  </div>

<div class="form-block function" id="def-hide-nume-in-rewrite-or-linear-rule" data-defines="HIDE-NUME-IN-REWRITE-OR-LINEAR-RULE" data-references="T,LINEAR-LEMMA,some-nume,CHANGE,REWRITE-RULE,QUOTE,RECORD-TYPE,EQ,COND,LEMMA,DEFUN" data-used-by="PRETTYIFY-BRR-GSTACK-FRAME" data-part-name="HIDE-NUME-IN-REWRITE-OR-LINEAR-RULE" data-part-args="LEMMA" data-part-body="T,LINEAR-LEMMA,some-nume,CHANGE,REWRITE-RULE,QUOTE,LEMMA,RECORD-TYPE,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HIDE-NUME-IN-REWRITE-OR-LINEAR-RULE">hide-nume-in-rewrite-or-linear-rule</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hide-nume-in-rewrite-or-linear-rule" data-sym="HIDE-NUME-IN-REWRITE-OR-LINEAR-RULE" title="(defun hide-nume-in-rewrite-or-linear-rule (lemma)
  (cond
   ((eq (record-type lemma) &#39;rewrite-rule)
    (change rewrite-rule lemma :nume &#39;|some-nume|))
   ((eq (record-type lemma) &#39;linear-lemma)
...">hide-nume-in-rewrite-or-linear-rule</a>
  (lemma)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-a.html#def-record-type" data-sym="RECORD-TYPE">record-type</a> lemma) 'rewrite-rule) (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> rewrite-rule lemma <span class="keyword">:nume</span> '|some-nume|))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-a.html#def-record-type" data-sym="RECORD-TYPE">record-type</a> lemma) 'linear-lemma) (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> linear-lemma lemma <span class="keyword">:nume</span> '|some-nume|))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> lemma)))</pre>
  </div>

<div class="form-block function" id="def-prettyify-brr-gstack-frame" data-defines="PRETTYIFY-BRR-GSTACK-FRAME" data-references="OTHERWISE,CONS,CDR,ADD-LINEAR-LEMMA,HIDE-NUME-IN-REWRITE-OR-LINEAR-RULE,CAR,LIST*,CHANGE,CDDR,GENEQV,CADR,LEMMA,ARGS,LET*,REWRITE-QUOTED-CONSTANT-WITH-LEMMA,REWRITE-WITH-LEMMA,GFRAME,ACCESS,CASE,FRAME,DEFUN" data-used-by="PRETTYIFY-BRR-GSTACK" data-part-name="PRETTYIFY-BRR-GSTACK-FRAME" data-part-args="FRAME" data-part-body="OTHERWISE,CONS,CDR,ADD-LINEAR-LEMMA,HIDE-NUME-IN-REWRITE-OR-LINEAR-RULE,CAR,LIST*,CHANGE,CDDR,GENEQV,CADR,LEMMA,ARGS,LET*,REWRITE-QUOTED-CONSTANT-WITH-LEMMA,REWRITE-WITH-LEMMA,FRAME,GFRAME,ACCESS,CASE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRETTYIFY-BRR-GSTACK-FRAME">prettyify-brr-gstack-frame</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prettyify-brr-gstack-frame" data-sym="PRETTYIFY-BRR-GSTACK-FRAME" title="(defun prettyify-brr-gstack-frame (frame)
  (case (access gframe frame :sys-fn)
    ((rewrite-with-lemma rewrite-quoted-constant-with-lemma)
     (let* ((args (access gframe frame :args))
            (lemma (cadr args))
...">prettyify-brr-gstack-frame</a>
  (frame)
  (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:sys-fn</span>)
    ((rewrite-with-lemma rewrite-quoted-constant-with-lemma) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:args</span>)) (lemma (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
          (geneqv (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
        (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> gframe
          frame
          <span class="keyword">:args</span> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
            (<a class="sym-link local-def" href="#def-hide-nume-in-rewrite-or-linear-rule" data-sym="HIDE-NUME-IN-REWRITE-OR-LINEAR-RULE" title="(defun hide-nume-in-rewrite-or-linear-rule (lemma)
  (cond
   ((eq (record-type lemma) &#39;rewrite-rule)
    (change rewrite-rule lemma :nume &#39;|some-nume|))
   ((eq (record-type lemma) &#39;linear-lemma)
...">hide-nume-in-rewrite-or-linear-rule</a> lemma)
            geneqv))))
    (add-linear-lemma (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:args</span>)) (lemma (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
        (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> gframe
          frame
          <span class="keyword">:args</span> (cons (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
            (<a class="sym-link local-def" href="#def-hide-nume-in-rewrite-or-linear-rule" data-sym="HIDE-NUME-IN-REWRITE-OR-LINEAR-RULE" title="(defun hide-nume-in-rewrite-or-linear-rule (lemma)
  (cond
   ((eq (record-type lemma) &#39;rewrite-rule)
    (change rewrite-rule lemma :nume &#39;|some-nume|))
   ((eq (record-type lemma) &#39;linear-lemma)
...">hide-nume-in-rewrite-or-linear-rule</a> lemma)))))
    (otherwise frame)))</pre>
  </div>

<div class="form-block function" id="def-prettyify-brr-gstack" data-defines="PRETTYIFY-BRR-GSTACK" data-references="CDR,CAR,PRETTYIFY-BRR-GSTACK-FRAME,CONS,T,ENDP,COND,GSTACK,DEFUN" data-part-name="PRETTYIFY-BRR-GSTACK" data-part-args="GSTACK" data-part-body="CDR,PRETTYIFY-BRR-GSTACK,CAR,PRETTYIFY-BRR-GSTACK-FRAME,CONS,T,GSTACK,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRETTYIFY-BRR-GSTACK">prettyify-brr-gstack</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prettyify-brr-gstack" data-sym="PRETTYIFY-BRR-GSTACK" title="(defun prettyify-brr-gstack (gstack)
  (cond ((endp gstack) nil)
        (t
         (cons (prettyify-brr-gstack-frame (car gstack))
               (prettyify-brr-gstack (cdr gstack))))))">prettyify-brr-gstack</a>
  (gstack)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> gstack) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-prettyify-brr-gstack-frame" data-sym="PRETTYIFY-BRR-GSTACK-FRAME" title="(defun prettyify-brr-gstack-frame (frame)
  (case (access gframe frame :sys-fn)
    ((rewrite-with-lemma rewrite-quoted-constant-with-lemma)
     (let* ((args (access gframe frame :args))
            (lemma (cadr args))
...">prettyify-brr-gstack-frame</a> (car gstack))
        (<a class="sym-link local-def" href="#def-prettyify-brr-gstack" data-sym="PRETTYIFY-BRR-GSTACK" title="(defun prettyify-brr-gstack (gstack)
  (cond ((endp gstack) nil)
        (t
         (cons (prettyify-brr-gstack-frame (car gstack))
               (prettyify-brr-gstack (cdr gstack))))))">prettyify-brr-gstack</a> (cdr gstack))))))</pre>
  </div>

<div class="form-block function" id="def-prettyify-brr-status" data-defines="PRETTYIFY-BRR-STATUS" data-references="QUOTE,BRR-STATUS,MAKE,QUASIQUOTE,T,NULL,COND,STATUS,HIDE-STUFF-FLG,DEFUN" data-part-name="PRETTYIFY-BRR-STATUS" data-part-args="STATUS,HIDE-STUFF-FLG" data-part-body="QUOTE,BRR-STATUS,MAKE,QUASIQUOTE,T,STATUS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRETTYIFY-BRR-STATUS">prettyify-brr-status</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prettyify-brr-status" data-sym="PRETTYIFY-BRR-STATUS" title="(defun prettyify-brr-status (hide-stuff-flg status)
  (cond ((null status) nil)
        (t
         `(make brr-status :entry-code &#39;,(access brr-status status :entry-code)
                :brr-monitored-runes
...">prettyify-brr-status</a>
  (hide-stuff-flg status)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> status) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> brr-status
        <span class="keyword">:entry-code</span> ',(ACCESS BRR-STATUS STATUS :ENTRY-CODE)
        <span class="keyword">:brr-monitored-runes</span> ',(ACCESS BRR-STATUS STATUS :BRR-MONITORED-RUNES)
        <span class="keyword">:brr-gstack</span> ',(PRETTYIFY-BRR-GSTACK (ACCESS BRR-STATUS STATUS :BRR-GSTACK))
        <span class="keyword">:brr-local-alist</span> ',(LET* ((ALIST0 (ACCESS BRR-STATUS STATUS :BRR-LOCAL-ALIST))
        (ALIST1
         (COND
          ((AND HIDE-STUFF-FLG (ASSOC-EQ &#39;RCNST ALIST0))
           (PUT-ASSOC-EQ &#39;RCNST &#39;|some-rewrite-constant| ALIST0))
          (T ALIST0)))
        (ALIST2
         (COND
          ((AND HIDE-STUFF-FLG (ASSOC-EQ &#39;LEMMA ALIST1))
           (LET ((LEMMA (CDR (ASSOC-EQ &#39;LEMMA ALIST1))))
             (PUT-ASSOC-EQ &#39;LEMMA (HIDE-NUME-IN-REWRITE-OR-LINEAR-RULE LEMMA)
                           ALIST1)))
          (T ALIST1)))
        (ALIST3
         (COND
          ((AND HIDE-STUFF-FLG (ASSOC-EQ &#39;SAVED-STANDARD-OI ALIST2))
           (PUT-ASSOC-EQ &#39;SAVED-STANDARD-OI &#39;|some-channel| ALIST2))
          (T ALIST2))))
   ALIST3)
        <span class="keyword">:brr-previous-status</span> ,(PRETTYIFY-BRR-STATUS HIDE-STUFF-FLG
                       (ACCESS BRR-STATUS STATUS :BRR-PREVIOUS-STATUS))))))</pre>
  </div>

<div class="form-block function" id="def-print-brr-status" data-defines="PRINT-BRR-STATUS" data-references="IGNORE,DECLARE,HIDE-RCNST-FLG,DEFUN" data-part-name="PRINT-BRR-STATUS" data-part-args="HIDE-RCNST-FLG" data-part-declare="HIDE-RCNST-FLG,IGNORE,DECLARE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-BRR-STATUS">print-brr-status</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-brr-status" data-sym="PRINT-BRR-STATUS" title="(defun print-brr-status (hide-rcnst-flg) (declare (ignore hide-rcnst-flg)) nil)">print-brr-status</a>
  (hide-rcnst-flg)
  (declare (ignore hide-rcnst-flg))
  nil)</pre>
  </div>

<div class="form-block function" id="def-chk-trace-options-aux" data-defines="CHK-TRACE-OPTIONS-AUX" data-references="T,REVERSE,SOFT,ER,COND,OTHERWISE,VALUES,VALUE,ARGLIST,TRACE-LEVEL,TRACED-FN,CASE,APPEND,ALL-VARS,SET-DIFFERENCE-EQ,VARS,LET,QUOTE,TRANSLATE,TERM,ER-LET*,STATE,WRLD,CTX,FORMALS,KWD,FORM,DEFUN" data-used-by="CHK-TRACE-OPTIONS" data-part-name="CHK-TRACE-OPTIONS-AUX" data-part-args="STATE,WRLD,CTX,FORMALS,KWD,FORM" data-part-body="T,REVERSE,SOFT,ER,COND,FORMALS,OTHERWISE,VALUES,VALUE,ARGLIST,TRACE-LEVEL,TRACED-FN,KWD,CASE,APPEND,ALL-VARS,SET-DIFFERENCE-EQ,VARS,LET,WRLD,CTX,STATE,QUOTE,FORM,TRANSLATE,TERM,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-TRACE-OPTIONS-AUX">chk-trace-options-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-trace-options-aux" data-sym="CHK-TRACE-OPTIONS-AUX" title="(defun chk-trace-options-aux (form kwd formals ctx wrld state)
  (er-let* ((term (translate form &#39;(nil) nil &#39;(state) ctx wrld state)))
           (let ((vars
                  (set-difference-eq (all-vars term)
                                     (append
...">chk-trace-options-aux</a>
  (form kwd <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> ctx wrld state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((term (translate form '(nil) nil '(state) ctx wrld state)))
    (let ((vars (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> term)
           (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> kwd
               ((<span class="keyword">:entry</span> <span class="keyword">:cond</span>) '(traced-fn trace-level arglist state))
               (<span class="keyword">:exit</span> '(traced-fn trace-level arglist <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> values state))
               (<span class="keyword">:hide</span> nil)
               (otherwise '(state)))
             <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (vars (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Global variables, such as ~&amp;0, are not allowed for ~
                         tracing option ~x1, especially without a trust tag.  ~
                         See :DOC trace$."</span>
            (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> vars)
            kwd))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))</pre>
  </div>

<div class="form-block function" id="def-trace_24-value-msgp" data-defines="TRACE$-VALUE-MSGP" data-references="TRACE$,HARD,ER,CDDR,NULL,CDR,QUOTE,MEMBER-EQ,OR,CAR,KEYWORDP,CONSP,AND,KWD,X,DEFUN" data-used-by="CHK-TRACE-OPTIONS" data-part-name="TRACE$-VALUE-MSGP" data-part-args="KWD,X" data-part-body="KWD,TRACE$,HARD,ER,CDDR,NULL,CDR,QUOTE,MEMBER-EQ,OR,CAR,KEYWORDP,X,CONSP,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE$-VALUE-MSGP">trace$-value-msgp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace_24-value-msgp" data-sym="TRACE$-VALUE-MSGP" title="(defun trace$-value-msgp (x kwd)
  (and (consp x) (keywordp (car x))
       (or
        (and (member-eq (car x) &#39;(:fmt :fmt!)) (consp (cdr x)) (null (cddr x)))
        (er hard &#39;trace$
...">trace$-value-msgp</a>
  (x kwd)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp x)
    (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car x))
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x) '(<span class="keyword">:fmt</span> <span class="keyword">:fmt!</span>))
        (consp (cdr x))
        (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> x)))
      (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-trace_24" data-sym="TRACE$" title="(defmacro trace$ (&amp;rest trace-specs)
  (cond ((null trace-specs) &#39;(value (f-get-global &#39;trace-specs state)))
        (t
         `(pprogn
           (if (equal (f-get-global &#39;trace-co state) *standard-co*)
...">trace$</a>
        <span class="string">"Illegal ~x0 value.  A legal ~x0 value starting with a ~
                keyword must be of the form (:FMT x).  The ~x0 value ~x1 ~
                is therefore illegal."</span>
        kwd
        x))
    (car x)))</pre>
  </div>

<div class="form-block function" id="def-chk-trace-options" data-defines="CHK-TRACE-OPTIONS" data-references="TRACE$-VALUE-MSGP,CHK-TRACE-OPTIONS-AUX,IF,ER-PROGN,EVISC-TUPLE-TAIL,EXIT-TAIL,ENTRY-TAIL,COND-TAIL,LET*,VALUE,TTAG,LOGIC-FNS-WITH-RAW-CODE,PROGRAM-FNS-WITH-RAW-CODE,F-GET-GLOBAL,RETURN-LAST,EQ,OR,NATP,SOFT,ER,T,QUOTE,CADR,MEMBER-EQ,NOT,AND,COND,MULTIPLICITY-TAIL,ASSOC-KEYWORD,NOTINLINE-TAIL,LET,STATE,WRLD,CTX,FORMALS,TRACE-OPTIONS,PREDEFINED,FN,DEFUN" data-used-by="TRACE$-FN-GENERAL" data-part-name="CHK-TRACE-OPTIONS" data-part-args="STATE,WRLD,CTX,FORMALS,TRACE-OPTIONS,PREDEFINED,FN" data-part-body="TRACE$-VALUE-MSGP,FORMALS,CHK-TRACE-OPTIONS-AUX,IF,ER-PROGN,EVISC-TUPLE-TAIL,EXIT-TAIL,ENTRY-TAIL,COND-TAIL,LET*,VALUE,WRLD,TTAG,LOGIC-FNS-WITH-RAW-CODE,STATE,PROGRAM-FNS-WITH-RAW-CODE,F-GET-GLOBAL,RETURN-LAST,FN,EQ,OR,PREDEFINED,NATP,CTX,SOFT,ER,T,QUOTE,CADR,MEMBER-EQ,NOT,AND,COND,MULTIPLICITY-TAIL,TRACE-OPTIONS,ASSOC-KEYWORD,NOTINLINE-TAIL,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-TRACE-OPTIONS">chk-trace-options</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-trace-options" data-sym="CHK-TRACE-OPTIONS" title="(defun chk-trace-options (fn predefined trace-options formals ctx wrld state)
  (let ((notinline-tail (assoc-keyword :notinline trace-options))
        (multiplicity-tail (assoc-keyword :multiplicity trace-options)))
    (cond
     ((and notinline-tail
...">chk-trace-options</a>
  (fn predefined trace-options <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> ctx wrld state)
  (let ((notinline-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:notinline</span> trace-options)) (multiplicity-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:multiplicity</span> trace-options)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> notinline-tail
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> notinline-tail) '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:fncall</span>)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The only legal values for trace option :NOTINLINE are ~&amp;0.  The ~
           value ~x1 is thus illegal."</span>
          '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:fncall</span>)
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> notinline-tail)))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> multiplicity-tail
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> multiplicity-tail)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The value of trace option :MULTIPLICITY must be a non-negative ~
           integer value.  The value ~x0 is thus illegal."</span>
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> multiplicity-tail)))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> predefined
         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn '<a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a>)
           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> notinline-tail
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> notinline-tail) <span class="keyword">:fncall</span>))
             (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn
                 (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'program-fns-with-raw-code state))
               (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'logic-fns-with-raw-code state))
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> wrld)))))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn '<a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Due to its special nature, tracing of ~x0 is not allowed."</span>
              fn))
          ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn
               (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'program-fns-with-raw-code state))
             (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'logic-fns-with-raw-code state))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The ACL2 built-in function ~x0 has special code that will not be ~
             captured properly when creating code for its traced executable ~
             counterpart.  It is therefore illegal to specify a value for ~
             :NOTINLINE other than :FNCALL unless there is an active trust ~
             tag.  There may be an easy fix, so contact the ACL2 implementors ~
             if this error presents a hardship."</span>
              fn))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The function ~x0 is built into ACL2.  It is therefore illegal to ~
             specify a value for :NOTINLINE other than :FNCALL unless there ~
             is an active trust tag."</span>
              fn))))
      ((<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> wrld) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cond-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:cond</span> trace-options)) (entry-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:entry</span> trace-options))
            (exit-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:exit</span> trace-options))
            (evisc-tuple-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:evisc-tuple</span> trace-options)))
          (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if cond-tail
              (<a class="sym-link local-def" href="#def-chk-trace-options-aux" data-sym="CHK-TRACE-OPTIONS-AUX" title="(defun chk-trace-options-aux (form kwd formals ctx wrld state)
  (er-let* ((term (translate form &#39;(nil) nil &#39;(state) ctx wrld state)))
           (let ((vars
                  (set-difference-eq (all-vars term)
                                     (append
...">chk-trace-options-aux</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cond-tail)
                <span class="keyword">:cond</span> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                ctx
                wrld
                state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (if entry-tail
              (<a class="sym-link local-def" href="#def-chk-trace-options-aux" data-sym="CHK-TRACE-OPTIONS-AUX" title="(defun chk-trace-options-aux (form kwd formals ctx wrld state)
  (er-let* ((term (translate form &#39;(nil) nil &#39;(state) ctx wrld state)))
           (let ((vars
                  (set-difference-eq (all-vars term)
                                     (append
...">chk-trace-options-aux</a> (if (<a class="sym-link local-def" href="#def-trace_24-value-msgp" data-sym="TRACE$-VALUE-MSGP" title="(defun trace$-value-msgp (x kwd)
  (and (consp x) (keywordp (car x))
       (or
        (and (member-eq (car x) &#39;(:fmt :fmt!)) (consp (cdr x)) (null (cddr x)))
        (er hard &#39;trace$
...">trace$-value-msgp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> entry-tail) <span class="keyword">:entry</span>)
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> entry-tail))
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> entry-tail))
                <span class="keyword">:entry</span> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                ctx
                wrld
                state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (if exit-tail
              (<a class="sym-link local-def" href="#def-chk-trace-options-aux" data-sym="CHK-TRACE-OPTIONS-AUX" title="(defun chk-trace-options-aux (form kwd formals ctx wrld state)
  (er-let* ((term (translate form &#39;(nil) nil &#39;(state) ctx wrld state)))
           (let ((vars
                  (set-difference-eq (all-vars term)
                                     (append
...">chk-trace-options-aux</a> (if (<a class="sym-link local-def" href="#def-trace_24-value-msgp" data-sym="TRACE$-VALUE-MSGP" title="(defun trace$-value-msgp (x kwd)
  (and (consp x) (keywordp (car x))
       (or
        (and (member-eq (car x) &#39;(:fmt :fmt!)) (consp (cdr x)) (null (cddr x)))
        (er hard &#39;trace$
...">trace$-value-msgp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> exit-tail) <span class="keyword">:exit</span>)
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> exit-tail))
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> exit-tail))
                <span class="keyword">:exit</span> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                ctx
                wrld
                state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> evisc-tuple-tail
                (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> evisc-tuple-tail) '(<span class="keyword">:print</span> <span class="keyword">:no-print</span>))))
              (<a class="sym-link local-def" href="#def-chk-trace-options-aux" data-sym="CHK-TRACE-OPTIONS-AUX" title="(defun chk-trace-options-aux (form kwd formals ctx wrld state)
  (er-let* ((term (translate form &#39;(nil) nil &#39;(state) ctx wrld state)))
           (let ((vars
                  (set-difference-eq (all-vars term)
                                     (append
...">chk-trace-options-aux</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> evisc-tuple-tail)
                <span class="keyword">:evisc-tuple</span> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                ctx
                wrld
                state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-off-trace-error" data-defines="MEMOIZE-OFF-TRACE-ERROR" data-references="HARD,ER,CTX,FN,DEFUN" data-part-name="MEMOIZE-OFF-TRACE-ERROR" data-part-args="CTX,FN" data-part-body="FN,CTX,HARD,ER" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-OFF-TRACE-ERROR">memoize-off-trace-error</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-off-trace-error" data-sym="MEMOIZE-OFF-TRACE-ERROR" title="(defun memoize-off-trace-error (fn ctx)
  (er hard ctx &quot;Memoized function ~x0 is to be traced or untraced, but its ~
       symbol-function differs from the :MEMOIZED-FN field of its memoization ~
       hash-table entry.  Perhaps the trace or untrace request occurred in ~
       the context of ~x1; at any rate, it is illegal.&quot;">memoize-off-trace-error</a>
  (fn ctx)
  (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
    ctx
    <span class="string">"Memoized function ~x0 is to be traced or untraced, but its ~
       symbol-function differs from the :MEMOIZED-FN field of its memoization ~
       hash-table entry.  Perhaps the trace or untrace request occurred in ~
       the context of ~x1; at any rate, it is illegal."</span>
    fn
    ctx))</pre>
  </div>

<div class="form-block function" id="def-untrace_24-fn1" data-defines="UNTRACE$-FN1" data-references="F-GET-GLOBAL,REMOVE1-ASSOC-EQ,TRACE-SPECS,QUOTE,F-PUT-GLOBAL,STATE,FN,DEFUN" data-used-by="MAYBE-UNTRACE$-FN,UNTRACE$-REC" data-part-name="UNTRACE$-FN1" data-part-args="STATE,FN" data-part-body="STATE,F-GET-GLOBAL,FN,REMOVE1-ASSOC-EQ,TRACE-SPECS,QUOTE,F-PUT-GLOBAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNTRACE$-FN1">untrace$-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-untrace_24-fn1" data-sym="UNTRACE$-FN1" title="(defun untrace$-fn1 (fn state)
  (f-put-global &#39;trace-specs
                (remove1-assoc-eq fn (f-get-global &#39;trace-specs state)) state))">untrace$-fn1</a>
  (fn state)
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'trace-specs
    (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> fn (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-specs state))
    state))</pre>
  </div>

<div class="form-block function" id="def-untrace_24-rec" data-defines="UNTRACE$-REC" data-references="WARNING$,CONS,CDR,FNLIST,ER-LET*,UNTRACE$-FN1,PPROGN,TRACE-SPECS,QUOTE,F-GET-GLOBAL,CAR,ASSOC-EQ,TRACE-SPEC,LET,T,VALUE,ENDP,COND,STATE,CTX,FNS,DEFUN" data-used-by="UNTRACE$-FN" data-part-name="UNTRACE$-REC" data-part-args="STATE,CTX,FNS" data-part-body="WARNING$,CONS,CTX,CDR,UNTRACE$-REC,FNLIST,ER-LET*,UNTRACE$-FN1,PPROGN,STATE,TRACE-SPECS,QUOTE,F-GET-GLOBAL,CAR,ASSOC-EQ,TRACE-SPEC,LET,T,VALUE,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNTRACE$-REC">untrace$-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-untrace_24-rec" data-sym="UNTRACE$-REC" title="(defun untrace$-rec (fns ctx state)
  (cond ((endp fns) (value nil))
        (t
         (let ((trace-spec
                (assoc-eq (car fns) (f-get-global &#39;trace-specs state))))
...">untrace$-rec</a>
  (fns ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((trace-spec (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car fns) (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-specs state))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (trace-spec (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-untrace_24-fn1" data-sym="UNTRACE$-FN1" title="(defun untrace$-fn1 (fn state)
  (f-put-global &#39;trace-specs
                (remove1-assoc-eq fn (f-get-global &#39;trace-specs state)) state))">untrace$-fn1</a> (car fns) state)
              (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((fnlist (<a class="sym-link local-def" href="#def-untrace_24-rec" data-sym="UNTRACE$-REC" title="(defun untrace$-rec (fns ctx state)
  (cond ((endp fns) (value nil))
        (t
         (let ((trace-spec
                (assoc-eq (car fns) (f-get-global &#39;trace-specs state))))
...">untrace$-rec</a> (cdr fns) ctx state)))
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons (car fns) fnlist)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                <span class="string">"Trace"</span>
                <span class="string">"The function ~x0 is not currently traced.  Ignoring ~
                      attempt to apply untrace$ to it."</span>
                (car fns))
              (<a class="sym-link local-def" href="#def-untrace_24-rec" data-sym="UNTRACE$-REC" title="(defun untrace$-rec (fns ctx state)
  (cond ((endp fns) (value nil))
        (t
         (let ((trace-spec
                (assoc-eq (car fns) (f-get-global &#39;trace-specs state))))
...">untrace$-rec</a> (cdr fns) ctx state))))))))</pre>
  </div>

<div class="form-block function" id="def-untrace_24-fn" data-defines="UNTRACE$-FN" data-references="SOFT,ER,T,SYMBOL-LISTP,TRACE-SPECS,F-GET-GLOBAL,STRIP-CARS,UNTRACE$-REC,NULL,COND,UNTRACE$,QUOTE,CTX,LET,STATE,FNS,DEFUN" data-used-by="UNTRACE$" data-part-name="UNTRACE$-FN" data-part-args="STATE,FNS" data-part-body="SOFT,ER,T,SYMBOL-LISTP,STATE,TRACE-SPECS,F-GET-GLOBAL,STRIP-CARS,UNTRACE$-REC,FNS,NULL,COND,UNTRACE$,QUOTE,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNTRACE$-FN">untrace$-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-untrace_24-fn" data-sym="UNTRACE$-FN" title="(defun untrace$-fn (fns state)
  (let ((ctx &#39;untrace$))
    (cond
     ((null fns)
      (untrace$-rec (strip-cars (f-get-global &#39;trace-specs state)) ctx state))
...">untrace$-fn</a>
  (fns state)
  (let ((ctx '<a class="sym-link local-def" href="#def-untrace_24" data-sym="UNTRACE$" title="(defmacro untrace$ (&amp;rest fns) `(untrace$-fn &#39;,fns state))">untrace$</a>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> fns) (<a class="sym-link local-def" href="#def-untrace_24-rec" data-sym="UNTRACE$-REC" title="(defun untrace$-rec (fns ctx state)
  (cond ((endp fns) (value nil))
        (t
         (let ((trace-spec
                (assoc-eq (car fns) (f-get-global &#39;trace-specs state))))
...">untrace$-rec</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-specs state))
          ctx
          state))
      ((<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> fns) (<a class="sym-link local-def" href="#def-untrace_24-rec" data-sym="UNTRACE$-REC" title="(defun untrace$-rec (fns ctx state)
  (cond ((endp fns) (value nil))
        (t
         (let ((trace-spec
                (assoc-eq (car fns) (f-get-global &#39;trace-specs state))))
...">untrace$-rec</a> fns ctx state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"Untrace$ may only be applied to a list of symbols, hence not ~
               to the list ~x0."</span>
          fns)))))</pre>
  </div>

<div class="form-block function" id="def-maybe-untrace_24-fn" data-defines="MAYBE-UNTRACE$-FN" data-references="UNTRACE$-FN1,TRACE-SPECS,F-GET-GLOBAL,ASSOC-EQ,IF,UNTRACE$,QUOTE,HARD,ER,SYMBOLP,OR,PROG2$,STATE,FN,DEFUN" data-used-by="TRACE$-FN-GENERAL,MAYBE-UNTRACE$" data-part-name="MAYBE-UNTRACE$-FN" data-part-args="STATE,FN" data-part-body="UNTRACE$-FN1,STATE,TRACE-SPECS,F-GET-GLOBAL,ASSOC-EQ,IF,UNTRACE$,QUOTE,HARD,ER,FN,SYMBOLP,OR,PROG2$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-UNTRACE$-FN">maybe-untrace$-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-untrace_24-fn" data-sym="MAYBE-UNTRACE$-FN" title="(defun maybe-untrace$-fn (fn state)
  (prog2$
   (or (symbolp fn)
       (er hard &#39;untrace$ &quot;Illegal attempt to untrace non-symbol: ~x0&quot; fn))
   (if (assoc-eq fn (f-get-global &#39;trace-specs state))
...">maybe-untrace$-fn</a>
  (fn state)
  (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (symbolp fn)
      (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-untrace_24" data-sym="UNTRACE$" title="(defmacro untrace$ (&amp;rest fns) `(untrace$-fn &#39;,fns state))">untrace$</a>
        <span class="string">"Illegal attempt to untrace non-symbol: ~x0"</span>
        fn))
    (if (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> fn (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-specs state))
      (<a class="sym-link local-def" href="#def-untrace_24-fn1" data-sym="UNTRACE$-FN1" title="(defun untrace$-fn1 (fn state)
  (f-put-global &#39;trace-specs
                (remove1-assoc-eq fn (f-get-global &#39;trace-specs state)) state))">untrace$-fn1</a> fn state)
      state)))</pre>
  </div>

<div class="form-block macro" id="def-maybe-untrace_24" data-defines="MAYBE-UNTRACE$" data-references="STATE,QUOTE,MAYBE-UNTRACE$-FN,QUASIQUOTE,FN,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-UNTRACE$">maybe-untrace$</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-maybe-untrace_24" data-sym="MAYBE-UNTRACE$" title="(defmacro maybe-untrace$ (fn) `(maybe-untrace$-fn &#39;,fn state))">maybe-untrace$</a>
  (fn)
  `(<a class="sym-link local-def" href="#def-maybe-untrace_24-fn" data-sym="MAYBE-UNTRACE$-FN" title="(defun maybe-untrace$-fn (fn state)
  (prog2$
   (or (symbolp fn)
       (er hard &#39;untrace$ &quot;Illegal attempt to untrace non-symbol: ~x0&quot; fn))
   (if (assoc-eq fn (f-get-global &#39;trace-specs state))
...">maybe-untrace$-fn</a> ',FN state))</pre>
  </div>

<div class="form-block function" id="def-trace_24-fn-general" data-defines="TRACE$-FN-GENERAL" data-references="F-PUT-GLOBAL,PPROGN,NULL,TRACE-SPECS,F-GET-GLOBAL,CONS,NEW-TRACE-SPECS,MAYBE-UNTRACE$-FN,VALUE,RETURN-LAST,TTAG,IF,IGNORE,DECLARE,CHK-TRACE-OPTIONS,VAL,ERP,MV-LET,*MAIN-LISP-PACKAGE-NAME*,SYMBOL-PACKAGE-NAME,WORMHOLE-EVAL,MEMBER-EQ,KEYWORDP,SYMBOL-LISTP,EQUAL,TRACE$-ER-MSG,MSG,MACRO-ALIASES,DEREF-MACRO-NAME,SYM,MACRO-BODY,VERY-SOFT,ER,ABSSTOBJ-INFO,PREDEFINED,COMPILE,EVISC-TUPLE,CONSP,ATOM,FORMALS-DEFAULT,FORMALS-TAIL,NULL-BODY-ER,LIST,EQ,ASSERT$,FORMALS,CONSTRAINEDP,T,COND,CLTL-DEF-FROM-NAME1,DEFUN+DEF,LET,OR,DEF,QUOTE,GETPROPC,NOT,AND,STOBJ-FUNCTION,W,WRLD,ASSOC-KEYWORD,CADR,NATIVE,CDR,TRACE-OPTIONS,CAR,FN,LET*,STATE,CTX,TRACE-SPEC,DEFUN" data-used-by="TRACE$-FN,TRACE$-FN-SIMPLE" data-part-name="TRACE$-FN-GENERAL" data-part-args="STATE,CTX,TRACE-SPEC" data-part-body="F-PUT-GLOBAL,PPROGN,NULL,TRACE-SPECS,F-GET-GLOBAL,CONS,NEW-TRACE-SPECS,MAYBE-UNTRACE$-FN,VALUE,RETURN-LAST,TTAG,IF,IGNORE,DECLARE,CHK-TRACE-OPTIONS,VAL,ERP,MV-LET,*MAIN-LISP-PACKAGE-NAME*,SYMBOL-PACKAGE-NAME,WORMHOLE-EVAL,MEMBER-EQ,KEYWORDP,SYMBOL-LISTP,EQUAL,TRACE$-ER-MSG,MSG,MACRO-ALIASES,DEREF-MACRO-NAME,SYM,MACRO-BODY,CTX,VERY-SOFT,ER,ABSSTOBJ-INFO,PREDEFINED,COMPILE,EVISC-TUPLE,CONSP,ATOM,FORMALS-DEFAULT,FORMALS-TAIL,NULL-BODY-ER,LIST,EQ,ASSERT$,FORMALS,CONSTRAINEDP,T,COND,CLTL-DEF-FROM-NAME1,DEFUN+DEF,LET,OR,DEF,QUOTE,GETPROPC,NOT,AND,STOBJ-FUNCTION,STATE,W,WRLD,ASSOC-KEYWORD,CADR,NATIVE,CDR,TRACE-OPTIONS,TRACE-SPEC,CAR,FN,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE$-FN-GENERAL">trace$-fn-general</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace_24-fn-general" data-sym="TRACE$-FN-GENERAL" title="(defun trace$-fn-general (trace-spec ctx state)
  (let* ((fn (car trace-spec))
         (trace-options (cdr trace-spec))
         (native (cadr (assoc-keyword :native trace-options)))
         (wrld (w state))
...">trace$-fn-general</a>
  (trace-spec ctx state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (car trace-spec)) (trace-options (cdr trace-spec))
      (native (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:native</span> trace-options)))
      (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (stobj-function (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:def</span> trace-options))
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'stobj-function nil wrld)))
      (def (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:def</span> trace-options))
          (let ((defun+def (cltl-def-from-name1 fn stobj-function nil wrld)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (defun+def (cdr defun+def))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> stobj-function
                 (cltl-def-from-name1 fn stobj-function <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)) <span class="keyword">:macro</span>)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'constrainedp nil wrld)
            (let ((<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)))
              (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-null-body-er" data-sym="NULL-BODY-ER">null-body-er</a> fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))))
      (formals-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:formals</span> trace-options))
      (formals-default (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> formals-tail)
          (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> def)
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> native)
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)))
      (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (formals-tail (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> formals-tail))
          ((consp def) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> formals-default)))
      (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:evisc-tuple</span> trace-options)))
      (compile (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:compile</span> trace-options)))
      (predefined (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'predefined nil wrld)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> def <span class="keyword">:macro</span>) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> stobj-function
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> stobj-function 'absstobj-info nil wrld) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
                ctx
                <span class="string">"~x0 cannot be traced, because it is a macro in raw Lisp, ~
              introduced with the defabsstobj event for abstract stobj ~x1."</span>
                fn
                stobj-function))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
                ctx
                <span class="string">"~x0 cannot be traced, because it is a macro in raw Lisp: its ~
              introducing defstobj event (for stobj ~x1) was supplied with ~
              :INLINE T."</span>
                fn
                stobj-function)))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> formals-default <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'macro-body nil wrld) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
              ctx
              <span class="string">"~x0 is an ACL2 macro, hence cannot be traced in ACL2.~@1"</span>
              fn
              (let ((sym (<a class="sym-link system" href="axioms.html#def-deref-macro-name" data-sym="DEREF-MACRO-NAME">deref-macro-name</a> fn (<a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> wrld))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> sym fn) <span class="string">""</span>)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Perhaps you meant instead to trace the ~
                                  corresponding function, ~x0."</span>
                      sym))))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
              ctx
              <span class="string">"~@0 this symbol does not have an ACL2 function definition.  ~
                  Consider using option :native, :def, or :formals.  See :DOC ~
                  trace$."</span>
              (<a class="sym-link local-def" href="#def-trace_24-er-msg" data-sym="TRACE$-ER-MSG" title="(defun trace$-er-msg (fn)
  (msg &quot;Ignoring request to trace function ~x0, because&quot; fn))">trace$-er-msg</a> fn)))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> def (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def) <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
          ctx
          <span class="string">"~@0 the formals list, ~x1, does not match the definition&#39;s formals ~
           ~x2."</span>
          (<a class="sym-link local-def" href="#def-trace_24-er-msg" data-sym="TRACE$-ER-MSG" title="(defun trace$-er-msg (fn)
  (msg &quot;Ignoring request to trace function ~x0, because&quot; fn))">trace$-er-msg</a> fn)
          <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def)))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
          ctx
          <span class="string">"~@0 the provided formals is not a true list of symbols."</span>
          (<a class="sym-link local-def" href="#def-trace_24-er-msg" data-sym="TRACE$-ER-MSG" title="(defun trace$-er-msg (fn)
  (msg &quot;Ignoring request to trace function ~x0, because&quot; fn))">trace$-er-msg</a> fn)))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> '(<span class="keyword">:print</span> <span class="keyword">:no-print</span>)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
          ctx
          <span class="string">"~@0 the only legal keyword values for option :evisc-tuple are ~
           :print and :no-print."</span>
          (<a class="sym-link local-def" href="#def-trace_24-er-msg" data-sym="TRACE$-ER-MSG" title="(defun trace$-er-msg (fn)
  (msg &quot;Ignoring request to trace function ~x0, because&quot; fn))">trace$-er-msg</a> fn)))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn '(<a class="sym-link system" href="basis-a.html#def-wormhole-eval" data-sym="WORMHOLE-EVAL">wormhole-eval</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
          ctx
          <span class="string">"~@0 it is illegal (for ACL2 implementation reasons) to trace ~x1."</span>
          (<a class="sym-link local-def" href="#def-trace_24-er-msg" data-sym="TRACE$-ER-MSG" title="(defun trace$-er-msg (fn)
  (msg &quot;Ignoring request to trace function ~x0, because&quot; fn))">trace$-er-msg</a> fn)
          fn))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> native)
         (equal (symbol-package-name fn) <a class="sym-link system" href="axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
          ctx
          <span class="string">"~@0 the ACL2 trace$ utility must be used with option :native for ~
           function symbols in the main Lisp package, ~x1.  See :DOC trace$."</span>
          (<a class="sym-link local-def" href="#def-trace_24-er-msg" data-sym="TRACE$-ER-MSG" title="(defun trace$-er-msg (fn)
  (msg &quot;Ignoring request to trace function ~x0, because&quot; fn))">trace$-er-msg</a> fn)
          <a class="sym-link system" href="axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> compile native) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
          ctx
          <span class="string">"~@0 we do not support compilation in trace specs (via keyword ~
           :compile) when :native is present, as in trace spec ~x1.  Consider ~
           removing :compile and performing compilation separately."</span>
          (<a class="sym-link local-def" href="#def-trace_24-er-msg" data-sym="TRACE$-ER-MSG" title="(defun trace$-er-msg (fn)
  (msg &quot;Ignoring request to trace function ~x0, because&quot; fn))">trace$-er-msg</a> fn)
          trace-spec))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          (<a class="sym-link local-def" href="#def-chk-trace-options" data-sym="CHK-TRACE-OPTIONS" title="(defun chk-trace-options (fn predefined trace-options formals ctx wrld state)
  (let ((notinline-tail (assoc-keyword :notinline trace-options))
        (multiplicity-tail (assoc-keyword :multiplicity trace-options)))
    (cond
     ((and notinline-tail
...">chk-trace-options</a> fn
            predefined
            trace-options
            <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
            ctx
            wrld
            state)
          (declare (ignore val))
          (if erp
            (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> wrld) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn '<a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a>))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)
              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
                ctx
                <span class="string">"It is possible that you can use TRACE! to avoid the above ~
                  error (but consider that only with great care!).  See :DOC ~
                  trace!."</span>))
            (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((state (<a class="sym-link local-def" href="#def-maybe-untrace_24-fn" data-sym="MAYBE-UNTRACE$-FN" title="(defun maybe-untrace$-fn (fn state)
  (prog2$
   (or (symbolp fn)
       (er hard &#39;untrace$ &quot;Illegal attempt to untrace non-symbol: ~x0&quot; fn))
   (if (assoc-eq fn (f-get-global &#39;trace-specs state))
...">maybe-untrace$-fn</a> fn state)) (new-trace-specs (cons trace-spec (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-specs state))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> native) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> def)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
                    ctx
                    <span class="string">"ACL2 found no definition for ~x0.  Consider supplying the ~
                  :def trace option.  See :DOC trace$."</span>
                    fn))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'trace-specs new-trace-specs state)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (native (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> trace-spec)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> trace-spec)))))))))))))</pre>
  </div>

<div class="form-block function" id="def-trace_24-fn-simple" data-defines="TRACE$-FN-SIMPLE" data-references="LIST,TRACE$-FN-GENERAL,STATE,CTX,TRACE-SPEC,DEFUN" data-used-by="TRACE$-FN" data-part-name="TRACE$-FN-SIMPLE" data-part-args="STATE,CTX,TRACE-SPEC" data-part-body="STATE,CTX,TRACE-SPEC,LIST,TRACE$-FN-GENERAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE$-FN-SIMPLE">trace$-fn-simple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace_24-fn-simple" data-sym="TRACE$-FN-SIMPLE" title="(defun trace$-fn-simple (trace-spec ctx state)
  (trace$-fn-general (list trace-spec) ctx state))">trace$-fn-simple</a>
  (trace-spec ctx state)
  (<a class="sym-link local-def" href="#def-trace_24-fn-general" data-sym="TRACE$-FN-GENERAL" title="(defun trace$-fn-general (trace-spec ctx state)
  (let* ((fn (car trace-spec))
         (trace-options (cdr trace-spec))
         (native (cadr (assoc-keyword :native trace-options)))
         (wrld (w state))
...">trace$-fn-general</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> trace-spec) ctx state))</pre>
  </div>

<div class="form-block constant" id="def-_2Atrace-keywords_2A" data-defines="*TRACE-KEYWORDS*" data-references="QUOTE,DEFCONST" data-used-by="TRACE$-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*TRACE-KEYWORDS*">*trace-keywords*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Atrace-keywords_2A" data-sym="*TRACE-KEYWORDS*" title="(defconst *trace-keywords*
          &#39;(:cond :entry :exit :compile :def :multiplicity :evisc-tuple
            :formals :hide :native :notinline))">*trace-keywords*</a>
  '(<span class="keyword">:cond</span> <span class="keyword">:entry</span> <span class="keyword">:exit</span> <span class="keyword">:compile</span> <span class="keyword">:def</span> <span class="keyword">:multiplicity</span> <span class="keyword">:evisc-tuple</span> <span class="keyword">:formals</span> <span class="keyword">:hide</span> <span class="keyword">:native</span> <span class="keyword">:notinline</span>))</pre>
  </div>

<div class="form-block constant" id="def-_2Atrace-keywords-needing-ttag_2A" data-defines="*TRACE-KEYWORDS-NEEDING-TTAG*" data-references="QUOTE,DEFCONST" data-used-by="TRACE$-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*TRACE-KEYWORDS-NEEDING-TTAG*">*trace-keywords-needing-ttag*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Atrace-keywords-needing-ttag_2A" data-sym="*TRACE-KEYWORDS-NEEDING-TTAG*" title="(defconst *trace-keywords-needing-ttag* &#39;(:native :def :multiplicity))">*trace-keywords-needing-ttag*</a>
  '(<span class="keyword">:native</span> <span class="keyword">:def</span> <span class="keyword">:multiplicity</span>))</pre>
  </div>

<div class="form-block function" id="def-first-assoc-keyword" data-defines="FIRST-ASSOC-KEYWORD" data-references="CDR,CAR,ASSOC-KEYWORD,OR,T,ENDP,COND,KEYWORD-LISTP,KEYWORD-VALUE-LISTP,AND,XARGS,DECLARE,X,KEYS,DEFUN" data-used-by="TRACE$-FN" data-part-name="FIRST-ASSOC-KEYWORD" data-part-args="X,KEYS" data-part-declare="KEYS,KEYWORD-LISTP,X,KEYWORD-VALUE-LISTP,AND,XARGS,DECLARE" data-part-body="CDR,FIRST-ASSOC-KEYWORD,X,CAR,ASSOC-KEYWORD,OR,T,KEYS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIRST-ASSOC-KEYWORD">first-assoc-keyword</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-first-assoc-keyword" data-sym="FIRST-ASSOC-KEYWORD" title="(defun first-assoc-keyword (keys x)
  (declare (xargs :guard (and (keyword-value-listp x) (keyword-listp keys))))
  (cond ((endp keys) nil)
        (t
         (or (assoc-keyword (car keys) x) (first-assoc-keyword (cdr keys) x)))))">first-assoc-keyword</a>
  (keys x)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> x) (<a class="sym-link local-def" href="#def-keyword-listp" data-sym="KEYWORD-LISTP" title="(defun keyword-listp (x)
  (declare (xargs :guard t))
  (if (consp x)
      (and (keywordp (car x)) (keyword-listp (cdr x)))
      (null x)))">keyword-listp</a> keys))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> keys) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> (car keys) x)
        (<a class="sym-link local-def" href="#def-first-assoc-keyword" data-sym="FIRST-ASSOC-KEYWORD" title="(defun first-assoc-keyword (keys x)
  (declare (xargs :guard (and (keyword-value-listp x) (keyword-listp keys))))
  (cond ((endp keys) nil)
        (t
         (or (assoc-keyword (car keys) x) (first-assoc-keyword (cdr keys) x)))))">first-assoc-keyword</a> (cdr keys) x)))))</pre>
  </div>

<div class="form-block constant" id="def-_2Aillegal-trace-spec-fmt-string_2A" data-defines="*ILLEGAL-TRACE-SPEC-FMT-STRING*" data-references="DEFCONST" data-used-by="TRACE$-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*ILLEGAL-TRACE-SPEC-FMT-STRING*">*illegal-trace-spec-fmt-string*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aillegal-trace-spec-fmt-string_2A" data-sym="*ILLEGAL-TRACE-SPEC-FMT-STRING*" title="(defconst *illegal-trace-spec-fmt-string*
          &quot;A trace spec must be a symbol or a symbol consed onto an alternating list ~
   of the form (:kwd1 val1 :kwd2 val2 ...).  The trace spec ~x0 is thus ~
   illegal.  See :DOC trace$.&quot;)">*illegal-trace-spec-fmt-string*</a>
  <span class="string">"A trace spec must be a symbol or a symbol consed onto an alternating list ~
   of the form (:kwd1 val1 :kwd2 val2 ...).  The trace spec ~x0 is thus ~
   illegal.  See :DOC trace$."</span>)</pre>
  </div>

<div class="form-block function" id="def-trace_24-fn" data-defines="TRACE$-FN" data-references="*ILLEGAL-TRACE-SPEC-FMT-STRING*,TRACE$-FN-GENERAL,T,W,TTAG,*TRACE-KEYWORDS-NEEDING-TTAG*,FIRST-ASSOC-KEYWORD,RETRACE-P,QUOTE,F-GET-GLOBAL,VERY-SOFT,ER,EVENS,BAD-KEYWORDS,LET,*TRACE-KEYWORDS*,STRIP-KEYWORD-LIST,ASSOC-KEYWORD,NOT,CDR,KEYWORD-VALUE-LISTP,CAR,CONSP,AND,TRACE$-FN-SIMPLE,SYMBOLP,COND,STATE,CTX,TRACE-SPEC,DEFUN" data-used-by="TRACE$-LST" data-part-name="TRACE$-FN" data-part-args="STATE,CTX,TRACE-SPEC" data-part-body="*ILLEGAL-TRACE-SPEC-FMT-STRING*,TRACE$-FN-GENERAL,T,W,TTAG,*TRACE-KEYWORDS-NEEDING-TTAG*,FIRST-ASSOC-KEYWORD,RETRACE-P,QUOTE,F-GET-GLOBAL,VERY-SOFT,ER,EVENS,BAD-KEYWORDS,LET,*TRACE-KEYWORDS*,STRIP-KEYWORD-LIST,ASSOC-KEYWORD,NOT,CDR,KEYWORD-VALUE-LISTP,CAR,CONSP,AND,STATE,CTX,TRACE$-FN-SIMPLE,TRACE-SPEC,SYMBOLP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE$-FN">trace$-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace_24-fn" data-sym="TRACE$-FN" title="(defun trace$-fn (trace-spec ctx state)
  (cond ((symbolp trace-spec) (trace$-fn-simple trace-spec ctx state))
        ((and (consp trace-spec) (symbolp (car trace-spec))
              (keyword-value-listp (cdr trace-spec)))
         (cond
...">trace$-fn</a>
  (trace-spec ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp trace-spec) (<a class="sym-link local-def" href="#def-trace_24-fn-simple" data-sym="TRACE$-FN-SIMPLE" title="(defun trace$-fn-simple (trace-spec ctx state)
  (trace$-fn-general (list trace-spec) ctx state))">trace$-fn-simple</a> trace-spec ctx state))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp trace-spec)
       (symbolp (car trace-spec))
       (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> (cdr trace-spec))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:native</span> (cdr trace-spec)))
           (<a class="sym-link system" href="axioms.html#def-strip-keyword-list" data-sym="STRIP-KEYWORD-LIST">strip-keyword-list</a> <a class="sym-link local-def" href="#def-_2Atrace-keywords_2A" data-sym="*TRACE-KEYWORDS*" title="(defconst *trace-keywords*
          &#39;(:cond :entry :exit :compile :def :multiplicity :evisc-tuple
            :formals :hide :native :notinline))">*trace-keywords*</a> (cdr trace-spec))) (let ((bad-keywords (<a class="sym-link system" href="axioms.html#def-evens" data-sym="EVENS">evens</a> (<a class="sym-link system" href="axioms.html#def-strip-keyword-list" data-sym="STRIP-KEYWORD-LIST">strip-keyword-list</a> <a class="sym-link local-def" href="#def-_2Atrace-keywords_2A" data-sym="*TRACE-KEYWORDS*" title="(defconst *trace-keywords*
          &#39;(:cond :entry :exit :compile :def :multiplicity :evisc-tuple
            :formals :hide :native :notinline))">*trace-keywords*</a> (cdr trace-spec)))))
            (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
              ctx
              <span class="string">"The keyword~#0~[~/s~] ~&amp;0 ~#0~[is~/are~] illegal for ~
                       trace specs.  See :DOC trace."</span>
              bad-keywords)))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'retrace-p state))
           (<a class="sym-link local-def" href="#def-first-assoc-keyword" data-sym="FIRST-ASSOC-KEYWORD" title="(defun first-assoc-keyword (keys x)
  (declare (xargs :guard (and (keyword-value-listp x) (keyword-listp keys))))
  (cond ((endp keys) nil)
        (t
         (or (assoc-keyword (car keys) x) (first-assoc-keyword (cdr keys) x)))))">first-assoc-keyword</a> <a class="sym-link local-def" href="#def-_2Atrace-keywords-needing-ttag_2A" data-sym="*TRACE-KEYWORDS-NEEDING-TTAG*" title="(defconst *trace-keywords-needing-ttag* &#39;(:native :def :multiplicity))">*trace-keywords-needing-ttag*</a>
             (cdr trace-spec))
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
            ctx
            <span class="string">"The keyword ~x0 cannot be used in a trace spec unless ~
                     there is an active trust tag.  The trace spec ~x1 is ~
                     thus illegal.  Consider using trace! instead.  The ~
                     complete list of keywords that require a trust tag for ~
                     use in a trace spec is: ~x2."</span>
            (car (<a class="sym-link local-def" href="#def-first-assoc-keyword" data-sym="FIRST-ASSOC-KEYWORD" title="(defun first-assoc-keyword (keys x)
  (declare (xargs :guard (and (keyword-value-listp x) (keyword-listp keys))))
  (cond ((endp keys) nil)
        (t
         (or (assoc-keyword (car keys) x) (first-assoc-keyword (cdr keys) x)))))">first-assoc-keyword</a> <a class="sym-link local-def" href="#def-_2Atrace-keywords-needing-ttag_2A" data-sym="*TRACE-KEYWORDS-NEEDING-TTAG*" title="(defconst *trace-keywords-needing-ttag* &#39;(:native :def :multiplicity))">*trace-keywords-needing-ttag*</a>
                (cdr trace-spec)))
            trace-spec
            <a class="sym-link local-def" href="#def-_2Atrace-keywords-needing-ttag_2A" data-sym="*TRACE-KEYWORDS-NEEDING-TTAG*" title="(defconst *trace-keywords-needing-ttag* &#39;(:native :def :multiplicity))">*trace-keywords-needing-ttag*</a>))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-trace_24-fn-general" data-sym="TRACE$-FN-GENERAL" title="(defun trace$-fn-general (trace-spec ctx state)
  (let* ((fn (car trace-spec))
         (trace-options (cdr trace-spec))
         (native (cadr (assoc-keyword :native trace-options)))
         (wrld (w state))
...">trace$-fn-general</a> trace-spec ctx state))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> very-soft
        ctx
        <a class="sym-link local-def" href="#def-_2Aillegal-trace-spec-fmt-string_2A" data-sym="*ILLEGAL-TRACE-SPEC-FMT-STRING*" title="(defconst *illegal-trace-spec-fmt-string*
          &quot;A trace spec must be a symbol or a symbol consed onto an alternating list ~
   of the form (:kwd1 val1 :kwd2 val2 ...).  The trace spec ~x0 is thus ~
   illegal.  See :DOC trace$.&quot;)">*illegal-trace-spec-fmt-string*</a>
        trace-spec))))</pre>
  </div>

<div class="form-block function" id="def-trace_24-lst" data-defines="TRACE$-LST" data-references="CONS,IF,CDR,TSPECS,CAR,TRACE$-FN,TSPEC,ER-LET*,T,VALUE,ENDP,COND,STATE,CTX,TRACE-SPEC-LST,DEFUN" data-used-by="TRACE$" data-part-name="TRACE$-LST" data-part-args="STATE,CTX,TRACE-SPEC-LST" data-part-body="CONS,IF,CDR,TRACE$-LST,TSPECS,STATE,CTX,CAR,TRACE$-FN,TSPEC,ER-LET*,T,VALUE,TRACE-SPEC-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE$-LST">trace$-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace_24-lst" data-sym="TRACE$-LST" title="(defun trace$-lst (trace-spec-lst ctx state)
  (cond ((endp trace-spec-lst) (value nil))
        (t
         (er-let*
          ((tspec (trace$-fn (car trace-spec-lst) ctx state))
...">trace$-lst</a>
  (trace-spec-lst ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> trace-spec-lst) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tspec (<a class="sym-link local-def" href="#def-trace_24-fn" data-sym="TRACE$-FN" title="(defun trace$-fn (trace-spec ctx state)
  (cond ((symbolp trace-spec) (trace$-fn-simple trace-spec ctx state))
        ((and (consp trace-spec) (symbolp (car trace-spec))
              (keyword-value-listp (cdr trace-spec)))
         (cond
...">trace$-fn</a> (car trace-spec-lst) ctx state)) (tspecs (<a class="sym-link local-def" href="#def-trace_24-lst" data-sym="TRACE$-LST" title="(defun trace$-lst (trace-spec-lst ctx state)
  (cond ((endp trace-spec-lst) (value nil))
        (t
         (er-let*
          ((tspec (trace$-fn (car trace-spec-lst) ctx state))
...">trace$-lst</a> (cdr trace-spec-lst) ctx state)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if tspec
            (cons tspec tspecs)
            tspecs))))))</pre>
  </div>

<div class="form-block macro" id="def-trace_24" data-defines="TRACE$" data-references="TRACE$-LST,LD,LD-LEVEL,EQL,FMS,*STANDARD-CO*,TRACE-CO,EQUAL,IF,PPROGN,QUASIQUOTE,T,STATE,F-GET-GLOBAL,VALUE,QUOTE,NULL,COND,TRACE-SPECS,&REST,DEFMACRO" data-used-by="TRACE!,TRACE$-VALUE-MSGP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE$">trace$</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-trace_24" data-sym="TRACE$" title="(defmacro trace$ (&amp;rest trace-specs)
  (cond ((null trace-specs) &#39;(value (f-get-global &#39;trace-specs state)))
        (t
         `(pprogn
           (if (equal (f-get-global &#39;trace-co state) *standard-co*)
...">trace$</a>
  (&amp;rest trace-specs)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> trace-specs) '(<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-specs state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (equal (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-co state) <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>)
          state
          (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"**NOTE**: Trace output will continue to go to a file.~|~%"</span>
            nil
            <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
            state
            nil))
        (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'ld-level state))
          (ld '((<a class="sym-link local-def" href="#def-trace_24-lst" data-sym="TRACE$-LST" title="(defun trace$-lst (trace-spec-lst ctx state)
  (cond ((endp trace-spec-lst) (value nil))
        (t
         (er-let*
          ((tspec (trace$-fn (car trace-spec-lst) ctx state))
...">trace$-lst</a> ',TRACE-SPECS '<a class="sym-link local-def" href="#def-trace_24" data-sym="TRACE$" title="(defmacro trace$ (&amp;rest trace-specs)
  (cond ((null trace-specs) &#39;(value (f-get-global &#39;trace-specs state)))
        (t
         `(pprogn
           (if (equal (f-get-global &#39;trace-co state) *standard-co*)
...">trace$</a> state))
            <span class="keyword">:ld-verbose</span> nil
            <span class="keyword">:ld-user-stobjs-modified-warning</span> <span class="keyword">:same</span>)
          (<a class="sym-link local-def" href="#def-trace_24-lst" data-sym="TRACE$-LST" title="(defun trace$-lst (trace-spec-lst ctx state)
  (cond ((endp trace-spec-lst) (value nil))
        (t
         (er-let*
          ((tspec (trace$-fn (car trace-spec-lst) ctx state))
...">trace$-lst</a> ',TRACE-SPECS '<a class="sym-link local-def" href="#def-trace_24" data-sym="TRACE$" title="(defmacro trace$ (&amp;rest trace-specs)
  (cond ((null trace-specs) &#39;(value (f-get-global &#39;trace-specs state)))
        (t
         `(pprogn
           (if (equal (f-get-global &#39;trace-co state) *standard-co*)
...">trace$</a> state))))))</pre>
  </div>

<div class="form-block macro" id="def-with-ubt_21" data-defines="WITH-UBT!" data-references="VALUE,UBT!,DEFLABEL,LD,WITH-OUTPUT,ER-PROGN,QUASIQUOTE,WITH-UBT!-LABEL,QUOTE,LABEL,LET,FORM,DEFMACRO" data-used-by="SET-CHECK-INVARIANT-RISK,TRACE!" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-UBT!">with-ubt!</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-ubt_21" data-sym="WITH-UBT!" title="(defmacro with-ubt! (form)
  (let ((label &#39;with-ubt!-label))
    `(er-progn
      (with-output :stack :push :off :all
                   (ld
...">with-ubt!</a>
  (form)
  (let ((label 'with-ubt!-label))
    `(<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:stack</span> <span class="keyword">:push</span> <span class="keyword">:off</span> <span class="keyword">:all</span> (ld '((<a class="sym-link system" href="axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a> ,LABEL) (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:stack</span> <span class="keyword">:pop</span> ,FORM)
            (<a class="sym-link system" href="history-management.html#def-ubt_21" data-sym="UBT!">ubt!</a> ',LABEL))
          <span class="keyword">:ld-verbose</span> nil
          <span class="keyword">:ld-prompt</span> nil
          <span class="keyword">:ld-pre-eval-print</span> nil
          <span class="keyword">:ld-post-eval-print</span> nil
          <span class="keyword">:ld-error-action</span> <span class="keyword">:error</span> <span class="keyword">:ld-user-stobjs-modified-warning</span> <span class="keyword">:same</span>))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))))</pre>
  </div>

<div class="form-block macro" id="def-trace_21" data-defines="TRACE!" data-references="KWOTE,VALUE-TRIPLE,QUOTE,LIST,VALUE,TRACE$,SPECS,ER-LET*,PROGN!,DEFTTAG,PROGN,MAKE-EVENT,WARNING!,WARNING,ERROR,WITH-OUTPUT,WITH-UBT!,QUASIQUOTE,FORM,LET,FNS,&REST,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE!">trace!</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-trace_21" data-sym="TRACE!" title="(defmacro trace! (&amp;rest fns)
  (let ((form
         `(with-ubt!
           (with-output :off :all
                        (with-output :on (error warning warning!)
...">trace!</a>
  (&amp;rest fns)
  (let ((form `(<a class="sym-link local-def" href="#def-with-ubt_21" data-sym="WITH-UBT!" title="(defmacro with-ubt! (form)
  (let ((label &#39;with-ubt!-label))
    `(er-progn
      (with-output :stack :push :off :all
                   (ld
...">with-ubt!</a> (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> <span class="keyword">:all</span> (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:on</span> (error warning warning!)
             (<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-defttag" data-sym="DEFTTAG">defttag</a> <span class="keyword">:trace!</span>)
                 (<a class="sym-link system" href="basis-b.html#def-progn_21" data-sym="PROGN!">progn!</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((specs (<a class="sym-link local-def" href="#def-trace_24" data-sym="TRACE$" title="(defmacro trace$ (&amp;rest trace-specs)
  (cond ((null trace-specs) &#39;(value (f-get-global &#39;trace-specs state)))
        (t
         `(pprogn
           (if (equal (f-get-global &#39;trace-co state) *standard-co*)
...">trace$</a> ,@FNS)))
                     (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> specs))))))))))))
    form))</pre>
  </div>

<div class="form-block macro" id="def-untrace_24" data-defines="UNTRACE$" data-references="STATE,QUOTE,UNTRACE$-FN,QUASIQUOTE,FNS,&REST,DEFMACRO" data-used-by="MAYBE-UNTRACE$-FN,UNTRACE$-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNTRACE$">untrace$</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-untrace_24" data-sym="UNTRACE$" title="(defmacro untrace$ (&amp;rest fns) `(untrace$-fn &#39;,fns state))">untrace$</a> (&amp;rest fns) `(<a class="sym-link local-def" href="#def-untrace_24-fn" data-sym="UNTRACE$-FN" title="(defun untrace$-fn (fns state)
  (let ((ctx &#39;untrace$))
    (cond
     ((null fns)
      (untrace$-rec (strip-cars (f-get-global &#39;trace-specs state)) ctx state))
...">untrace$-fn</a> ',FNS state))</pre>
  </div>

<div class="form-block function" id="def-open-trace-file-fn" data-defines="OPEN-TRACE-FILE-FN" data-references="OPEN-TRACE-FILE,HARD,ER,PROG2$,T,F-PUT-GLOBAL,CLOSE-OUTPUT-CHANNEL,*STANDARD-CO*,TRACE-CO,QUOTE,F-GET-GLOBAL,EQUAL,IF,PPROGN,COND,OPEN-OUTPUT-CHANNEL,CHAN,MV-LET,STATE,FILENAME,DEFUN" data-used-by="OPEN-TRACE-FILE" data-part-name="OPEN-TRACE-FILE-FN" data-part-args="STATE,FILENAME" data-part-body="OPEN-TRACE-FILE,HARD,ER,PROG2$,T,F-PUT-GLOBAL,CLOSE-OUTPUT-CHANNEL,*STANDARD-CO*,TRACE-CO,QUOTE,F-GET-GLOBAL,EQUAL,IF,PPROGN,COND,FILENAME,OPEN-OUTPUT-CHANNEL,STATE,CHAN,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-TRACE-FILE-FN">open-trace-file-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-open-trace-file-fn" data-sym="OPEN-TRACE-FILE-FN" title="(defun open-trace-file-fn (filename state)
  (mv-let (chan state) (open-output-channel filename :character state)
          (cond
           (chan
            (pprogn
...">open-trace-file-fn</a>
  (filename state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (chan state)
    (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> filename <span class="keyword">:character</span> state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (chan (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (equal (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-co state) <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>)
            state
            (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-co state) state))
          (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'trace-co chan state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            '<a class="sym-link local-def" href="#def-open-trace-file" data-sym="OPEN-TRACE-FILE" title="(defmacro open-trace-file (filename)
  (declare (xargs :guard (stringp filename)))
  `(pprogn (close-trace-file-fn t state) (open-trace-file-fn ,filename state)))">open-trace-file</a>
            <span class="string">"Unable to open file ~s0 for trace output."</span>
            filename)
          state)))))</pre>
  </div>

<div class="form-block macro" id="def-open-trace-file" data-defines="OPEN-TRACE-FILE" data-references="OPEN-TRACE-FILE-FN,STATE,T,CLOSE-TRACE-FILE-FN,PPROGN,QUASIQUOTE,STRINGP,XARGS,DECLARE,FILENAME,DEFMACRO" data-used-by="OPEN-TRACE-FILE-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-TRACE-FILE">open-trace-file</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-open-trace-file" data-sym="OPEN-TRACE-FILE" title="(defmacro open-trace-file (filename)
  (declare (xargs :guard (stringp filename)))
  `(pprogn (close-trace-file-fn t state) (open-trace-file-fn ,filename state)))">open-trace-file</a>
  (filename)
  (declare (xargs <span class="keyword">:guard</span> (stringp filename)))
  `(<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-close-trace-file-fn" data-sym="CLOSE-TRACE-FILE-FN" title="(defun close-trace-file-fn (quiet-p state)
  (if (equal (f-get-global &#39;trace-co state) *standard-co*)
      (if quiet-p
          state
          (prog2$
...">close-trace-file-fn</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)
    (<a class="sym-link local-def" href="#def-open-trace-file-fn" data-sym="OPEN-TRACE-FILE-FN" title="(defun open-trace-file-fn (filename state)
  (mv-let (chan state) (open-output-channel filename :character state)
          (cond
           (chan
            (pprogn
...">open-trace-file-fn</a> ,FILENAME state)))</pre>
  </div>

<div class="form-block function" id="def-close-trace-file-fn" data-defines="CLOSE-TRACE-FILE-FN" data-references="F-PUT-GLOBAL,CLOSE-OUTPUT-CHANNEL,PPROGN,CLOSE-TRACE-FILE,HARD,ER,PROG2$,*STANDARD-CO*,TRACE-CO,QUOTE,F-GET-GLOBAL,EQUAL,IF,STATE,QUIET-P,DEFUN" data-used-by="CLOSE-TRACE-FILE,OPEN-TRACE-FILE" data-part-name="CLOSE-TRACE-FILE-FN" data-part-args="STATE,QUIET-P" data-part-body="F-PUT-GLOBAL,CLOSE-OUTPUT-CHANNEL,PPROGN,CLOSE-TRACE-FILE,HARD,ER,PROG2$,QUIET-P,*STANDARD-CO*,STATE,TRACE-CO,QUOTE,F-GET-GLOBAL,EQUAL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CLOSE-TRACE-FILE-FN">close-trace-file-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-close-trace-file-fn" data-sym="CLOSE-TRACE-FILE-FN" title="(defun close-trace-file-fn (quiet-p state)
  (if (equal (f-get-global &#39;trace-co state) *standard-co*)
      (if quiet-p
          state
          (prog2$
...">close-trace-file-fn</a>
  (quiet-p state)
  (if (equal (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-co state) <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>)
    (if quiet-p
      state
      (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-close-trace-file" data-sym="CLOSE-TRACE-FILE" title="(defmacro close-trace-file () &#39;(close-trace-file-fn nil state))">close-trace-file</a>
          <span class="string">"No change: trace is already written to standard output.~%"</span>)
        state))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-co state) state)
      (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'trace-co <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a> state))))</pre>
  </div>

<div class="form-block macro" id="def-close-trace-file" data-defines="CLOSE-TRACE-FILE" data-references="STATE,CLOSE-TRACE-FILE-FN,QUOTE,DEFMACRO" data-used-by="CLOSE-TRACE-FILE-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CLOSE-TRACE-FILE">close-trace-file</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-close-trace-file" data-sym="CLOSE-TRACE-FILE" title="(defmacro close-trace-file () &#39;(close-trace-file-fn nil state))">close-trace-file</a>
  nil
  '(<a class="sym-link local-def" href="#def-close-trace-file-fn" data-sym="CLOSE-TRACE-FILE-FN" title="(defun close-trace-file-fn (quiet-p state)
  (if (equal (f-get-global &#39;trace-co state) *standard-co*)
      (if quiet-p
          state
          (prog2$
...">close-trace-file-fn</a> nil state))</pre>
  </div>

<div class="form-block macro" id="def-break-on-error" data-defines="BREAK-ON-ERROR" data-references="SOFT,ER,STATE,RAW-MODE-P,IF,QUASIQUOTE,T,QUOTE,ON,&OPTIONAL,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="BREAK-ON-ERROR">break-on-error</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-break-on-error" data-sym="BREAK-ON-ERROR" title="(defmacro break-on-error (&amp;optional (on &#39;t))
  `(if (raw-mode-p state)
       (er soft &#39;break-on-error
           &quot;It is illegal to call ~x0 while in raw-mode.  Consider exiting ~
            raw-mode and then trying again.&quot;
...">break-on-error</a>
  (&amp;optional (on '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  `(if (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state)
    (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
      '<a class="sym-link local-def" href="#def-break-on-error" data-sym="BREAK-ON-ERROR" title="(defmacro break-on-error (&amp;optional (on &#39;t))
  `(if (raw-mode-p state)
       (er soft &#39;break-on-error
           &quot;It is illegal to call ~x0 while in raw-mode.  Consider exiting ~
            raw-mode and then trying again.&quot;
...">break-on-error</a>
      <span class="string">"It is illegal to call ~x0 while in raw-mode.  Consider exiting ~
            raw-mode and then trying again."</span>
      '<a class="sym-link local-def" href="#def-break-on-error" data-sym="BREAK-ON-ERROR" title="(defmacro break-on-error (&amp;optional (on &#39;t))
  `(if (raw-mode-p state)
       (er soft &#39;break-on-error
           &quot;It is illegal to call ~x0 while in raw-mode.  Consider exiting ~
            raw-mode and then trying again.&quot;
...">break-on-error</a>)
    ,(LET* ((ERROR1-TRACE-FORM
         &#39;(ERROR1 :ENTRY (:FMT (MSG &quot;[Breaking on error:]&quot;)) :EXIT
                  (PROG2$ (MAYBE-PRINT-CALL-HISTORY STATE) (BREAK$)) :COMPILE
                  NIL))
        (ER-CMP-FN-TRACE-FORM
         &#39;(ER-CMP-FN :ENTRY
                     (PPROGN
                      (IO? ERROR NIL STATE (CTX MSG)
                           (ERROR-FMS NIL CTX NIL
                                      &quot;~|[Breaking on cmp error:]~|~@0&quot;
                                      (LIST (CONS #\0 MSG)) STATE))
                      (MV :ENTER-BREAK NIL STATE))
                     :EXIT (PROG2$ (MAYBE-PRINT-CALL-HISTORY STATE) (BREAK$))
                     :COMPILE NIL))
        (ABORT!-TRACE-FORM
         `(ABORT! :ENTRY
                  (PROGN$
                   (FMT-ABBREV &quot;~%Breaking on abort to top level.&quot; NIL 0
                               *STANDARD-CO* STATE &quot;~|~%&quot;)
                   (MAYBE-PRINT-CALL-HISTORY STATE) (BREAK$))))
        (THROW-RAW-EV-FNCALL-STRING
         &quot;[Breaking on error (entry to ev-fncall-msg)]&quot;)
        (THROW-RAW-EV-FNCALL-TRACE-FORM
         `(THROW-RAW-EV-FNCALL :DEF
                               (THROW-RAW-EV-FNCALL (VAL)
                                                    (THROW &#39;RAW-EV-FNCALL VAL))
                               :MULTIPLICITY 1 :ENTRY
                               (PROGN$
                                (FMT-ABBREV &quot;~%ACL2 Error ~@0:   ~@1&quot;
                                            (LIST
                                             (CONS #\0
                                                   ,THROW-RAW-EV-FNCALL-STRING)
                                             (CONS #\1
                                                   (EV-FNCALL-MSG (CAR ARGLIST)
                                                                  (W STATE)
                                                                  (USER-STOBJ-ALIST
                                                                   STATE))))
                                            0 *STANDARD-CO* STATE &quot;~|~%&quot;)
                                (MAYBE-PRINT-CALL-HISTORY STATE) (BREAK$)))))
   `(LET ((ON ,ON))
      (ER-PROGN
       (CASE ON
         (:ALL
          (TRACE! ,ERROR1-TRACE-FORM ,ER-CMP-FN-TRACE-FORM ,ABORT!-TRACE-FORM
                  ,THROW-RAW-EV-FNCALL-TRACE-FORM))
         ((T)
          (TRACE! ,ERROR1-TRACE-FORM ,ER-CMP-FN-TRACE-FORM ,ABORT!-TRACE-FORM
                  (,@THROW-RAW-EV-FNCALL-TRACE-FORM :COND
                   (NOT (F-GET-GLOBAL &#39;IN-PROVE-FLG STATE)))))
         ((NIL)
          (WITH-OUTPUT :OFF WARNING
                       (UNTRACE$ ERROR1 ER-CMP-FN THROW-RAW-EV-FNCALL)))
         (OTHERWISE
          (ER SOFT &#39;BREAK-ON-ERROR
              &quot;Illegal argument value for break-on-error: ~x0.&quot; ON)))
       (VALUE :INVISIBLE))))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-explore-giant-term" data-defines="EXPLORE-GIANT-TERM" data-references="CDR,CAR,ENDP,N,TERMS,FARGS,EXPLORE-GIANT-TERM-LST,LAMBDA-FORMALS,LEN,LAMBDA-BODY,I1,BQ-LST1,MV-LET,FFN-SYMB,FLAMBDAP,REVAPPEND,CONS,T,+,<,CONS-COUNT-BOUNDED-AC,QI,LET,FQUOTEP,VARIABLEP,MV,>=,COND,MAX,MIN,I,BQ-LST,RADDR,TERM,DEFUN,MUTUAL-RECURSION" data-used-by="EXPLAIN-GIANT-LAMBDA-OBJECT-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPLORE-GIANT-TERM">explore-giant-term</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-explore-giant-term" data-sym="EXPLORE-GIANT-TERM" title="(mutual-recursion
 (defun explore-giant-term (term raddr bq-lst i min max)
   (cond ((&gt;= i max) (mv bq-lst i)) ((variablep term) (mv bq-lst i))
         ((fquotep term)
          (let ((qi (cons-count-bounded-ac term 0 max)))
...">explore-giant-term</a>
    (term raddr bq-lst i min max)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i max) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> bq-lst i))
      ((<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> bq-lst i))
      ((<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term) (let ((qi (cons-count-bounded-ac term <span class="number">0</span> max)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((&lt; qi min) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> bq-lst (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> qi i)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons (cons qi (cons (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> raddr nil) term)) bq-lst)
                i)))))
      ((<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (bq-lst1 i1)
          (<a class="sym-link local-def" href="#def-explore-giant-term" data-sym="EXPLORE-GIANT-TERM" title="(mutual-recursion
 (defun explore-giant-term (term raddr bq-lst i min max)
   (cond ((&gt;= i max) (mv bq-lst i)) ((variablep term) (mv bq-lst i))
         ((fquotep term)
          (let ((qi (cons-count-bounded-ac term 0 max)))
...">explore-giant-term</a> (<a class="sym-link system" href="basis-b.html#def-lambda-body" data-sym="LAMBDA-BODY">lambda-body</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term))
            (cons <span class="number">3</span> (cons <span class="number">1</span> raddr))
            bq-lst
            (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">4</span> (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term))) i)
            min
            max)
          (explore-giant-term-lst (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)
            <span class="number">2</span>
            raddr
            bq-lst1
            i1
            min
            max)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (explore-giant-term-lst (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)
          <span class="number">2</span>
          raddr
          bq-lst
          (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> i)
          min
          max))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> explore-giant-term-lst
    (terms n raddr bq-lst i min max)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> terms) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> bq-lst i))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (bq-lst1 i1)
          (<a class="sym-link local-def" href="#def-explore-giant-term" data-sym="EXPLORE-GIANT-TERM" title="(mutual-recursion
 (defun explore-giant-term (term raddr bq-lst i min max)
   (cond ((&gt;= i max) (mv bq-lst i)) ((variablep term) (mv bq-lst i))
         ((fquotep term)
          (let ((qi (cons-count-bounded-ac term 0 max)))
...">explore-giant-term</a> (car terms)
            (cons n raddr)
            bq-lst
            i
            min
            max)
          (explore-giant-term-lst (cdr terms)
            (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n)
            raddr
            bq-lst1
            (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> i1)
            min
            max))))))</pre>
  </div>

<div class="form-block function" id="def-tilde-_2A-big-constants-phrase" data-defines="TILDE-*-BIG-CONSTANTS-PHRASE" data-references="CDR,EVISC-TUPLE,CDDR,CAR,GIANT-LAMBDA-OBJECT,@,QUOTE,FETCH-ADDR,QUASIQUOTE,MSG,CONS,T,ENDP,COND,BQ-LST,DEFUN" data-used-by="EXPLAIN-GIANT-LAMBDA-OBJECT-FN" data-part-name="TILDE-*-BIG-CONSTANTS-PHRASE" data-part-args="BQ-LST" data-part-body="CDR,TILDE-*-BIG-CONSTANTS-PHRASE,EVISC-TUPLE,CDDR,CAR,GIANT-LAMBDA-OBJECT,@,QUOTE,FETCH-ADDR,QUASIQUOTE,MSG,CONS,T,BQ-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-*-BIG-CONSTANTS-PHRASE">tilde-*-big-constants-phrase</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_2A-big-constants-phrase" data-sym="TILDE-*-BIG-CONSTANTS-PHRASE" title="(defun tilde-*-big-constants-phrase (bq-lst)
  (cond ((endp bq-lst) nil)
        (t
         (cons
          (msg &quot;* ~X01~|  accounts for at ~
...">tilde-*-big-constants-phrase</a>
  (bq-lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> bq-lst) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"* ~X01~|  accounts for at ~
             least ~x2 conses:~|~  ~Y34"</span>
          `(fetch-addr ',(CADR (CAR BQ-LST)) (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> giant-lambda-object))
          nil
          (car (car bq-lst))
          (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car bq-lst))
          (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="number">3</span> <span class="number">6</span> nil nil))
        (<a class="sym-link local-def" href="#def-tilde-_2A-big-constants-phrase" data-sym="TILDE-*-BIG-CONSTANTS-PHRASE" title="(defun tilde-*-big-constants-phrase (bq-lst)
  (cond ((endp bq-lst) nil)
        (t
         (cons
          (msg &quot;* ~X01~|  accounts for at ~
...">tilde-*-big-constants-phrase</a> (cdr bq-lst))))))</pre>
  </div>

<div class="form-block function" id="def-explain-giant-lambda-object-fn" data-defines="EXPLAIN-GIANT-LAMBDA-OBJECT-FN" data-references="T,>=,TILDE-*-BIG-CONSTANTS-PHRASE,LEN,CMDS,@,FETCH-ADDR,QUASIQUOTE,CDDR,CAR,CADR,TRACE-EVISCERATION-ALIST,EVISC-TUPLE,CONS,LIST,<,CDR,CONSP,AND,FMS,NULL,COND,PPROGN,STANDARD-CO,F-GET-GLOBAL,CHAN,MERGE-SORT-CAR->,LET,QUOTE,LAMBDA-OBJECT-DCL,IF,EXPLORE-GIANT-TERM,I,BQ-LST,MV-LET,QMAX,FLOOR,QMIN,LAMBDA-OBJECT-COUNT-MAX-VAL,MAX,LET*,LAMBDA-OBJECT-BODY,VALUE,BODY,UNQUOTE,GIANT-LAMBDA-OBJECT,ASSIGN,LAMBDA-OBJ,READ-HONS-COPY-LAMBDA-OBJECT-CULPRIT,QUOTED-LAMBDA-OBJ,ER-LET*,STATE,DEFUN" data-used-by="EXPLAIN-GIANT-LAMBDA-OBJECT" data-part-name="EXPLAIN-GIANT-LAMBDA-OBJECT-FN" data-part-args="STATE" data-part-body="T,>=,TILDE-*-BIG-CONSTANTS-PHRASE,LEN,CMDS,@,FETCH-ADDR,QUASIQUOTE,CDDR,CAR,CADR,TRACE-EVISCERATION-ALIST,EVISC-TUPLE,CONS,LIST,<,CDR,CONSP,AND,FMS,NULL,COND,PPROGN,STANDARD-CO,F-GET-GLOBAL,CHAN,MERGE-SORT-CAR->,LET,QUOTE,LAMBDA-OBJECT-DCL,IF,EXPLORE-GIANT-TERM,I,BQ-LST,MV-LET,QMAX,FLOOR,QMIN,LAMBDA-OBJECT-COUNT-MAX-VAL,MAX,LET*,LAMBDA-OBJECT-BODY,VALUE,BODY,UNQUOTE,GIANT-LAMBDA-OBJECT,ASSIGN,LAMBDA-OBJ,STATE,READ-HONS-COPY-LAMBDA-OBJECT-CULPRIT,QUOTED-LAMBDA-OBJ,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPLAIN-GIANT-LAMBDA-OBJECT-FN">explain-giant-lambda-object-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-explain-giant-lambda-object-fn" data-sym="EXPLAIN-GIANT-LAMBDA-OBJECT-FN" title="(defun explain-giant-lambda-object-fn (state)
  (er-let*
   ((quoted-lambda-obj (read-hons-copy-lambda-object-culprit state))
    (lambda-obj (assign giant-lambda-object (unquote quoted-lambda-obj)))
    (body (value (lambda-object-body lambda-obj))))
...">explain-giant-lambda-object-fn</a>
  (state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((quoted-lambda-obj (read-hons-copy-lambda-object-culprit state)) (lambda-obj (<a class="sym-link system" href="axioms.html#def-assign" data-sym="ASSIGN">assign</a> giant-lambda-object (<a class="sym-link system" href="axioms.html#def-unquote" data-sym="UNQUOTE">unquote</a> quoted-lambda-obj)))
      (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-lambda-object-body" data-sym="LAMBDA-OBJECT-BODY">lambda-object-body</a> lambda-obj))))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((max (lambda-object-count-max-val)) (qmin (floor max <span class="number">1000</span>))
        (qmax (floor max <span class="number">2</span>)))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (bq-lst i)
        (<a class="sym-link local-def" href="#def-explore-giant-term" data-sym="EXPLORE-GIANT-TERM" title="(mutual-recursion
 (defun explore-giant-term (term raddr bq-lst i min max)
   (cond ((&gt;= i max) (mv bq-lst i)) ((variablep term) (mv bq-lst i))
         ((fquotep term)
          (let ((qi (cons-count-bounded-ac term 0 max)))
...">explore-giant-term</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>
          (if (<a class="sym-link system" href="axioms.html#def-lambda-object-dcl" data-sym="LAMBDA-OBJECT-DCL">lambda-object-dcl</a> lambda-obj)
            '(<span class="number">4</span>)
            '(<span class="number">3</span>))
          nil
          <span class="number">0</span>
          qmin
          qmax)
        (let ((bq-lst (merge-sort-car-&gt; bq-lst)) (chan (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lambda-obj) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"No giant lambda object has been encountered yet."</span>
                  nil
                  chan
                  state
                  nil))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp bq-lst) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr bq-lst)) (&lt; i qmax)) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"The offending lambda object is~%~X01.~%You may retrieve this ~
               object with (@ GIANT-LAMBDA-OBJECT).~%~%The reason it is so ~
               big is probably due to the fact that at address ~X23 you&#39;ll ~
               see the quoted constant ~X45, which contains at least ~x6 ~
               conses.  You can retrieve this constant with ~X73.  ~
               Alternatively, you can explore the giant lambda object with ~
               walkabout (see :DOC walkabout).  The walkabout command ~X83 ~
               will take you from the top of the lambda object to the large ~
               constant.~%~%See :DOC explain-giant-lambda-object for ~
               suggestions."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 lambda-obj)
                    (cons #\1
                      (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="number">10</span> <span class="number">12</span> (<a class="sym-link local-def" href="#def-trace-evisceration-alist" data-sym="TRACE-EVISCERATION-ALIST" title="(defun trace-evisceration-alist (state)
  (append (world-evisceration-alist state nil)
          (stobj-evisceration-alist (user-stobj-alist state) state)))">trace-evisceration-alist</a> state) nil))
                    (cons #\2 (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car bq-lst)))
                    (cons #\3 nil)
                    (cons #\4 (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car bq-lst)))
                    (cons #\5 (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="number">3</span> <span class="number">6</span> nil nil))
                    (cons #\6 (car (car bq-lst)))
                    (cons #\7
                      `(fetch-addr ',(CADR (CAR BQ-LST)) (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> giant-lambda-object)))
                    (cons #\8 `(cmds ,@(CADR (CAR BQ-LST)))))
                  chan
                  state
                  nil))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp bq-lst) (&lt; i qmax)) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"The offending lambda object is~%~X01.~%You may retrieve this ~
               object with (@ GIANT-LAMBDA-OBJECT).~%~%This lambda object ~
               contains ~x2 large constants (described below) and the body of ~
               the lambda itself is small (no more than ~x3 conses not ~
               counting the large constants detailed below).~%~%The large ~
               constants are sketched below.  The addresses, (i1 i2 ... in), ~
               shown in the FETCH-ADDR forms are the locations of the ~
               constants.  Executing the FETCH-ADDR forms will retrieve the ~
               indicated constant.  Alternatively, if you use walkabout (see ~
               :DOC walkabout) to explore the giant lambda object and you are ~
               standing at the top of the object and wish to go to the ~
               constant at address (i1 i2 ... in), use the walkabout command ~
               (cmds i1 i2 ... in).~%~%~*4See :DOC ~
               explain-giant-lambda-object for suggestions."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 lambda-obj)
                    (cons #\1
                      (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="number">10</span> <span class="number">12</span> (<a class="sym-link local-def" href="#def-trace-evisceration-alist" data-sym="TRACE-EVISCERATION-ALIST" title="(defun trace-evisceration-alist (state)
  (append (world-evisceration-alist state nil)
          (stobj-evisceration-alist (user-stobj-alist state) state)))">trace-evisceration-alist</a> state) nil))
                    (cons #\2 (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> bq-lst))
                    (cons #\3 i)
                    (cons #\4
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span>
                        <span class="string">"~@*~%"</span>
                        <span class="string">"~@*~%"</span>
                        <span class="string">"~@*."</span>
                        (<a class="sym-link local-def" href="#def-tilde-_2A-big-constants-phrase" data-sym="TILDE-*-BIG-CONSTANTS-PHRASE" title="(defun tilde-*-big-constants-phrase (bq-lst)
  (cond ((endp bq-lst) nil)
        (t
         (cons
          (msg &quot;* ~X01~|  accounts for at ~
...">tilde-*-big-constants-phrase</a> bq-lst))))
                  chan
                  state
                  nil))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> bq-lst) (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i qmax)) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"The offending lambda object is~%~X01.~%You may retrieve this ~
               object with (@ GIANT-LAMBDA-OBJECT).~%~%This lambda object ~
               apparently contains no quoted constants with more than ~x2 ~
               conses.  We say ``apparently&#39;&#39; because we stopped looking when ~
               the body&#39;s cons-count reached ~x3 conses.  This lambda object ~
               has a large body and quoted constants apparently don&#39;t ~
               contribute.~%~%See :DOC explain-giant-lambda-object for ~
               suggestions."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 lambda-obj)
                    (cons #\1
                      (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="number">10</span> <span class="number">12</span> (<a class="sym-link local-def" href="#def-trace-evisceration-alist" data-sym="TRACE-EVISCERATION-ALIST" title="(defun trace-evisceration-alist (state)
  (append (world-evisceration-alist state nil)
          (stobj-evisceration-alist (user-stobj-alist state) state)))">trace-evisceration-alist</a> state) nil))
                    (cons #\2 qmin)
                    (cons #\3 i))
                  chan
                  state
                  nil))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp bq-lst) (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i qmax)) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"The offending lambda object is~%~X01.~%You may retrieve this ~
               object with (@ GIANT-LAMBDA-OBJECT).~%~%This lambda object ~
               contains at least ~x2 large constant~#5~[~/s~] (described ~
               below) and the body of the lambda itself is large too ~
               (containing at least ~x3 conses not counting the large ~
               constant~#5~[~/s~] detailed below).  We stopped looking for ~
               large constants when the body&#39;s cons-count reached ~x3.~%~%The ~
               large constant~#5~[ is~/s are~] sketched below.  The ~
               address~#5~[~/es~], (i1 i2 ... in), shown in the FETCH-ADDR ~
               form~#5~[ is~/s are~] the location~#5~[~/s~] of the ~
               constant~#5~[~/s~].  Executing a FETCH-ADDR form will retrieve ~
               the indicated constant.  Alternatively, if you use walkabout ~
               (see :DOC walkabout) to explore the giant lambda object and ~
               you are standing at the top of the object and wish to go to ~
               the constant at address (i1 i2 ... in), use the walkabout ~
               command (cmds i1 i2 ... in).~%~%~*4See :DOC ~
               explain-giant-lambda-object for suggestions."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 lambda-obj)
                    (cons #\1
                      (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="number">10</span> <span class="number">12</span> (<a class="sym-link local-def" href="#def-trace-evisceration-alist" data-sym="TRACE-EVISCERATION-ALIST" title="(defun trace-evisceration-alist (state)
  (append (world-evisceration-alist state nil)
          (stobj-evisceration-alist (user-stobj-alist state) state)))">trace-evisceration-alist</a> state) nil))
                    (cons #\2 (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> bq-lst))
                    (cons #\3 i)
                    (cons #\4
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span>
                        <span class="string">"~@*~%"</span>
                        <span class="string">"~@*~%and~%"</span>
                        <span class="string">"~@*."</span>
                        (<a class="sym-link local-def" href="#def-tilde-_2A-big-constants-phrase" data-sym="TILDE-*-BIG-CONSTANTS-PHRASE" title="(defun tilde-*-big-constants-phrase (bq-lst)
  (cond ((endp bq-lst) nil)
        (t
         (cons
          (msg &quot;* ~X01~|  accounts for at ~
...">tilde-*-big-constants-phrase</a> bq-lst)))
                    (cons #\5
                      (if (cdr bq-lst)
                        <span class="number">1</span>
                        <span class="number">0</span>)))
                  chan
                  state
                  nil))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"The offending lambda object is~%~X01.~%You may retrieve this ~
               object with (@ GIANT-LAMBDA-OBJECT).~%~%But the body of this ~
               lambda object contains no more than ~x2 conses, so the ~
               excessive size is due to the formals and declaration (if ~
               any).~%~%See :DOC explain-giant-lambda-object for suggestions."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 lambda-obj)
                    (cons #\1
                      (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="number">10</span> <span class="number">12</span> (<a class="sym-link local-def" href="#def-trace-evisceration-alist" data-sym="TRACE-EVISCERATION-ALIST" title="(defun trace-evisceration-alist (state)
  (append (world-evisceration-alist state nil)
          (stobj-evisceration-alist (user-stobj-alist state) state)))">trace-evisceration-alist</a> state) nil))
                    (cons #\2 i))
                  chan
                  state
                  nil)))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))))</pre>
  </div>

<div class="form-block macro" id="def-explain-giant-lambda-object" data-defines="EXPLAIN-GIANT-LAMBDA-OBJECT" data-references="STATE,EXPLAIN-GIANT-LAMBDA-OBJECT-FN,QUOTE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPLAIN-GIANT-LAMBDA-OBJECT">explain-giant-lambda-object</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-explain-giant-lambda-object" data-sym="EXPLAIN-GIANT-LAMBDA-OBJECT" title="(defmacro explain-giant-lambda-object ()
  &#39;(explain-giant-lambda-object-fn state))">explain-giant-lambda-object</a>
  nil
  '(<a class="sym-link local-def" href="#def-explain-giant-lambda-object-fn" data-sym="EXPLAIN-GIANT-LAMBDA-OBJECT-FN" title="(defun explain-giant-lambda-object-fn (state)
  (er-let*
   ((quoted-lambda-obj (read-hons-copy-lambda-object-culprit state))
    (lambda-obj (assign giant-lambda-object (unquote quoted-lambda-obj)))
    (body (value (lambda-object-body lambda-obj))))
...">explain-giant-lambda-object-fn</a> state))</pre>
  </div>

<div class="form-block function" id="def-defexec-extract-key" data-defines="DEFEXEC-EXTRACT-KEY" data-references="CADR,CAR,EQ,CDDR,ERP,MV-LET,T,MV,ENDP,COND,KEYWORD-VALUE-LISTP,KEYWORDP,AND,XARGS,DECLARE,RESULT-P,RESULT,KEYWORD,X,DEFUN" data-used-by="PARSE-DEFEXEC-DCLS-1" data-part-name="DEFEXEC-EXTRACT-KEY" data-part-args="RESULT-P,RESULT,KEYWORD,X" data-part-declare="X,KEYWORD-VALUE-LISTP,KEYWORD,KEYWORDP,AND,XARGS,DECLARE" data-part-body="CADR,CAR,EQ,KEYWORD,CDDR,DEFEXEC-EXTRACT-KEY,ERP,MV-LET,T,RESULT-P,RESULT,MV,X,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFEXEC-EXTRACT-KEY">defexec-extract-key</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defexec-extract-key" data-sym="DEFEXEC-EXTRACT-KEY" title="(defun defexec-extract-key (x keyword result result-p)
  (declare (xargs :guard (and (keywordp keyword) (keyword-value-listp x))))
  (cond ((endp x) (mv nil result result-p))
        (t
         (mv-let (erp result result-p)
...">defexec-extract-key</a>
  (x keyword result result-p)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> keyword) (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> x))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> x) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil result result-p))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp result result-p)
        (<a class="sym-link local-def" href="#def-defexec-extract-key" data-sym="DEFEXEC-EXTRACT-KEY" title="(defun defexec-extract-key (x keyword result result-p)
  (declare (xargs :guard (and (keywordp keyword) (keyword-value-listp x))))
  (cond ((endp x) (mv nil result result-p))
        (t
         (mv-let (erp result result-p)
...">defexec-extract-key</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> x) keyword result result-p)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp nil nil))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) keyword) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (result-p (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"more than one ~x0 has been specified"</span> nil nil))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil result result-p)))))))</pre>
  </div>

<div class="form-block function" id="def-parse-defexec-dcls-1" data-defines="PARSE-DEFEXEC-DCLS-1" data-references="REMOVE-KEYWORD,IF,ASSOC-KEYWORD,CADR,AND,OR,DEFEXEC-EXTRACT-KEY,ERP,MV-LET,KEYWORD-VALUE-LISTP,EQ,CDR,X,SYM,CAR,DECL,LET*,T,REVERSE,QUOTE,CONS,MV,ENDP,COND,SYMBOL-ALISTP,XARGS,DECLARE,ACC,EXEC-DEFAULT,EXEC-TEST,EXEC-XARGS,DFS-P,DFS,STOBJS-P,STOBJS,WFREL-P,WFREL,RULER-EXTENDERS-P,RULER-EXTENDERS,MEASURE-P,MEASURE,HINTS-P,HINTS,GUARD-P,GUARD,ALIST,DEFUN" data-used-by="PARSE-DEFEXEC-DCLS" data-part-name="PARSE-DEFEXEC-DCLS-1" data-part-args="ACC,EXEC-DEFAULT,EXEC-TEST,EXEC-XARGS,DFS-P,DFS,STOBJS-P,STOBJS,WFREL-P,WFREL,RULER-EXTENDERS-P,RULER-EXTENDERS,MEASURE-P,MEASURE,HINTS-P,HINTS,GUARD-P,GUARD,ALIST" data-part-declare="ALIST,SYMBOL-ALISTP,XARGS,DECLARE" data-part-body="REMOVE-KEYWORD,IF,ASSOC-KEYWORD,CADR,AND,OR,PARSE-DEFEXEC-DCLS-1,DEFEXEC-EXTRACT-KEY,ERP,MV-LET,KEYWORD-VALUE-LISTP,XARGS,EQ,CDR,X,SYM,CAR,DECL,LET*,T,EXEC-DEFAULT,EXEC-TEST,EXEC-XARGS,DFS-P,DFS,STOBJS-P,STOBJS,WFREL-P,WFREL,RULER-EXTENDERS-P,RULER-EXTENDERS,MEASURE-P,MEASURE,HINTS-P,HINTS,GUARD-P,GUARD,ACC,REVERSE,DECLARE,QUOTE,CONS,MV,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-DEFEXEC-DCLS-1">parse-defexec-dcls-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-defexec-dcls-1" data-sym="PARSE-DEFEXEC-DCLS-1" title="(defun parse-defexec-dcls-1
       (alist guard guard-p hints hints-p measure measure-p ruler-extenders
        ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs dfs-p exec-xargs
        exec-test exec-default acc)
  (declare (xargs :guard (symbol-alistp alist)))
...">parse-defexec-dcls-1</a>
  (alist <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
    guard-p
    hints
    hints-p
    measure
    measure-p
    ruler-extenders
    ruler-extenders-p
    wfrel
    wfrel-p
    stobjs
    stobjs-p
    dfs
    dfs-p
    exec-xargs
    exec-test
    exec-default
    acc)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> alist)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
        (cons 'declare (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc))
        <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
        guard-p
        hints
        hints-p
        measure
        measure-p
        ruler-extenders
        ruler-extenders-p
        wfrel
        wfrel-p
        stobjs
        stobjs-p
        dfs
        dfs-p
        exec-xargs
        exec-test
        exec-default))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((decl (car alist)) (sym (car decl)) (x (cdr decl)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> sym 'xargs) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> x) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> guard-p)
                  (<a class="sym-link local-def" href="#def-defexec-extract-key" data-sym="DEFEXEC-EXTRACT-KEY" title="(defun defexec-extract-key (x keyword result result-p)
  (declare (xargs :guard (and (keywordp keyword) (keyword-value-listp x))))
  (cond ((endp x) (mv nil result result-p))
        (t
         (mv-let (erp result result-p)
...">defexec-extract-key</a> x <span class="keyword">:guard</span> <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> guard-p)
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil
                        nil))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp hints hints-p)
                        (<a class="sym-link local-def" href="#def-defexec-extract-key" data-sym="DEFEXEC-EXTRACT-KEY" title="(defun defexec-extract-key (x keyword result result-p)
  (declare (xargs :guard (and (keywordp keyword) (keyword-value-listp x))))
  (cond ((endp x) (mv nil result result-p))
        (t
         (mv-let (erp result result-p)
...">defexec-extract-key</a> x <span class="keyword">:hints</span> hints hints-p)
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil
                              nil))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp measure measure-p)
                              (<a class="sym-link local-def" href="#def-defexec-extract-key" data-sym="DEFEXEC-EXTRACT-KEY" title="(defun defexec-extract-key (x keyword result result-p)
  (declare (xargs :guard (and (keywordp keyword) (keyword-value-listp x))))
  (cond ((endp x) (mv nil result result-p))
        (t
         (mv-let (erp result result-p)
...">defexec-extract-key</a> x <span class="keyword">:measure</span> measure measure-p)
                              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil
                                    nil))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp ruler-extenders ruler-extenders-p)
                                    (<a class="sym-link local-def" href="#def-defexec-extract-key" data-sym="DEFEXEC-EXTRACT-KEY" title="(defun defexec-extract-key (x keyword result result-p)
  (declare (xargs :guard (and (keywordp keyword) (keyword-value-listp x))))
  (cond ((endp x) (mv nil result result-p))
        (t
         (mv-let (erp result result-p)
...">defexec-extract-key</a> x
                                      <span class="keyword">:ruler-extenders</span> ruler-extenders
                                      ruler-extenders-p)
                                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil
                                          nil))
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp wfrel wfrel-p)
                                          (<a class="sym-link local-def" href="#def-defexec-extract-key" data-sym="DEFEXEC-EXTRACT-KEY" title="(defun defexec-extract-key (x keyword result result-p)
  (declare (xargs :guard (and (keywordp keyword) (keyword-value-listp x))))
  (cond ((endp x) (mv nil result result-p))
        (t
         (mv-let (erp result result-p)
...">defexec-extract-key</a> x <span class="keyword">:well-founded-relation</span> wfrel wfrel-p)
                                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil
                                                nil))
                                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp stobjs stobjs-p)
                                                (<a class="sym-link local-def" href="#def-defexec-extract-key" data-sym="DEFEXEC-EXTRACT-KEY" title="(defun defexec-extract-key (x keyword result result-p)
  (declare (xargs :guard (and (keywordp keyword) (keyword-value-listp x))))
  (cond ((endp x) (mv nil result result-p))
        (t
         (mv-let (erp result result-p)
...">defexec-extract-key</a> x <span class="keyword">:stobjs</span> stobjs stobjs-p)
                                                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil
                                                      nil))
                                                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp dfs dfs-p)
                                                      (<a class="sym-link local-def" href="#def-defexec-extract-key" data-sym="DEFEXEC-EXTRACT-KEY" title="(defun defexec-extract-key (x keyword result result-p)
  (declare (xargs :guard (and (keywordp keyword) (keyword-value-listp x))))
  (cond ((endp x) (mv nil result result-p))
        (t
         (mv-let (erp result result-p)
...">defexec-extract-key</a> x <span class="keyword">:dfs</span> dfs dfs-p)
                                                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil
                                                            nil))
                                                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-parse-defexec-dcls-1" data-sym="PARSE-DEFEXEC-DCLS-1" title="(defun parse-defexec-dcls-1
       (alist guard guard-p hints hints-p measure measure-p ruler-extenders
        ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs dfs-p exec-xargs
        exec-test exec-default acc)
  (declare (xargs :guard (symbol-alistp alist)))
...">parse-defexec-dcls-1</a> (cdr alist)
                                                            <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                                                            guard-p
                                                            hints
                                                            hints-p
                                                            measure
                                                            measure-p
                                                            ruler-extenders
                                                            ruler-extenders-p
                                                            wfrel
                                                            wfrel-p
                                                            stobjs
                                                            stobjs-p
                                                            dfs
                                                            dfs-p
                                                            exec-xargs
                                                            exec-test
                                                            exec-default
                                                            (cons decl acc))))))))))))))))))))))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"we found (XARGS . x) where x is not a keyword-value-listp"</span>
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil))))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> sym 'exec-xargs) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> exec-xargs exec-test exec-default) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"more than one EXEC-XARGS has been specified"</span>
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> x) x) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((exec-test (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:test</span> x))) (x (if exec-test
                        (remove-keyword <span class="keyword">:test</span> x)
                        x))
                    (exec-default (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:default-value</span> x)))
                    (x (if exec-default
                        (remove-keyword <span class="keyword">:default-value</span> x)
                        x)))
                  (<a class="sym-link local-def" href="#def-parse-defexec-dcls-1" data-sym="PARSE-DEFEXEC-DCLS-1" title="(defun parse-defexec-dcls-1
       (alist guard guard-p hints hints-p measure measure-p ruler-extenders
        ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs dfs-p exec-xargs
        exec-test exec-default acc)
  (declare (xargs :guard (symbol-alistp alist)))
...">parse-defexec-dcls-1</a> (cdr alist)
                    <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                    guard-p
                    hints
                    hints-p
                    measure
                    measure-p
                    ruler-extenders
                    ruler-extenders-p
                    wfrel
                    wfrel-p
                    stobjs
                    stobjs-p
                    dfs
                    dfs-p
                    x
                    exec-test
                    exec-default
                    acc)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"we found declaration (EXEC-XARGS . x) where x is not a ~
                   non-empty keyword-value-listp"</span>
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil
                  nil))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-parse-defexec-dcls-1" data-sym="PARSE-DEFEXEC-DCLS-1" title="(defun parse-defexec-dcls-1
       (alist guard guard-p hints hints-p measure measure-p ruler-extenders
        ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs dfs-p exec-xargs
        exec-test exec-default acc)
  (declare (xargs :guard (symbol-alistp alist)))
...">parse-defexec-dcls-1</a> (cdr alist)
              <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
              guard-p
              hints
              hints-p
              measure
              measure-p
              ruler-extenders
              ruler-extenders-p
              wfrel
              wfrel-p
              stobjs
              stobjs-p
              dfs
              dfs-p
              x
              exec-test
              exec-default
              (cons (car alist) acc))))))))</pre>
  </div>

<div class="form-block function" id="def-fix-exec-xargs" data-defines="FIX-EXEC-XARGS" data-references="LIST*,ASSOC-KEYWORD,NOT,AND,IF,X,LET*,KEYWORD-VALUE-LISTP,XARGS,DECLARE,DFS-P,DFS,STOBJS-P,STOBJS,WFREL-P,WFREL,RULER-EXTENDERS-P,RULER-EXTENDERS,MEASURE-P,MEASURE,HINTS-P,HINTS,EXEC-XARGS,DEFUN" data-used-by="PARSE-DEFEXEC-DCLS" data-part-name="FIX-EXEC-XARGS" data-part-args="DFS-P,DFS,STOBJS-P,STOBJS,WFREL-P,WFREL,RULER-EXTENDERS-P,RULER-EXTENDERS,MEASURE-P,MEASURE,HINTS-P,HINTS,EXEC-XARGS" data-part-declare="EXEC-XARGS,KEYWORD-VALUE-LISTP,XARGS,DECLARE" data-part-body="DFS,DFS-P,STOBJS,STOBJS-P,WFREL,WFREL-P,RULER-EXTENDERS,RULER-EXTENDERS-P,MEASURE,MEASURE-P,HINTS,LIST*,EXEC-XARGS,ASSOC-KEYWORD,NOT,HINTS-P,AND,IF,X,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-EXEC-XARGS">fix-exec-xargs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-exec-xargs" data-sym="FIX-EXEC-XARGS" title="(defun fix-exec-xargs
       (exec-xargs hints hints-p measure measure-p ruler-extenders
        ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs dfs-p)
  (declare (xargs :guard (keyword-value-listp exec-xargs)))
  (let* ((x
...">fix-exec-xargs</a>
  (exec-xargs hints
    hints-p
    measure
    measure-p
    ruler-extenders
    ruler-extenders-p
    wfrel
    wfrel-p
    stobjs
    stobjs-p
    dfs
    dfs-p)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> exec-xargs)))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((x (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> hints-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:hints</span> exec-xargs)))
         (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:hints</span> hints exec-xargs)
         exec-xargs)) (x (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> measure-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:measure</span> exec-xargs)))
          (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:measure</span> measure x)
          x))
      (x (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ruler-extenders-p
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:ruler-extenders</span> exec-xargs)))
          (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:ruler-extenders</span> ruler-extenders x)
          x))
      (x (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> wfrel-p
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:well-founded-relation</span> exec-xargs)))
          (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:well-founded-relation</span> wfrel x)
          x))
      (x (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> stobjs-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:stobjs</span> exec-xargs)))
          (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:stobjs</span> stobjs x)
          x))
      (x (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dfs-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:dfs</span> exec-xargs)))
          (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:dfs</span> dfs x)
          x)))
    x))</pre>
  </div>

<div class="form-block function" id="def-parse-defexec-dcls" data-defines="PARSE-DEFEXEC-DCLS" data-references="MSG,PARSE-DEFEXEC-DCLS-1,DECL,ERP,MV-LET,SYMBOL-ALISTP,DECLARE,QUOTE,EQ,CONSP,AND,CONS,CDR,STRINGP,CAR,X,LET,OR,FIX-EXEC-XARGS,REVERSE,T,MV,NULL,ENDP,COND,EXEC-DEFAULT,EXEC-TEST,EXEC-XARGS,DFS-P,DFS,STOBJS-P,STOBJS,WFREL-P,WFREL,RULER-EXTENDERS-P,RULER-EXTENDERS,MEASURE-P,MEASURE,HINTS-P,HINTS,GUARD-P,GUARD,FINAL,DCLS-AND-STRINGS,DEFUN" data-used-by="DEFEXEC" data-part-name="PARSE-DEFEXEC-DCLS" data-part-args="EXEC-DEFAULT,EXEC-TEST,EXEC-XARGS,DFS-P,DFS,STOBJS-P,STOBJS,WFREL-P,WFREL,RULER-EXTENDERS-P,RULER-EXTENDERS,MEASURE-P,MEASURE,HINTS-P,HINTS,GUARD-P,GUARD,FINAL,DCLS-AND-STRINGS" data-part-body="MSG,PARSE-DEFEXEC-DCLS-1,DECL,ERP,MV-LET,SYMBOL-ALISTP,DECLARE,QUOTE,EQ,CONSP,AND,CONS,CDR,PARSE-DEFEXEC-DCLS,STRINGP,CAR,X,LET,EXEC-DEFAULT,EXEC-TEST,OR,DFS-P,DFS,STOBJS-P,STOBJS,WFREL-P,WFREL,RULER-EXTENDERS-P,RULER-EXTENDERS,MEASURE-P,MEASURE,HINTS-P,HINTS,EXEC-XARGS,FIX-EXEC-XARGS,GUARD,FINAL,REVERSE,T,MV,GUARD-P,NULL,DCLS-AND-STRINGS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-DEFEXEC-DCLS">parse-defexec-dcls</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-defexec-dcls" data-sym="PARSE-DEFEXEC-DCLS" title="(defun parse-defexec-dcls
       (dcls-and-strings final guard guard-p hints hints-p measure measure-p
        ruler-extenders ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs
        dfs-p exec-xargs exec-test exec-default)
  (cond
...">parse-defexec-dcls</a>
  (dcls-and-strings final
    <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
    guard-p
    hints
    hints-p
    measure
    measure-p
    ruler-extenders
    ruler-extenders-p
    wfrel
    wfrel-p
    stobjs
    stobjs-p
    dfs
    dfs-p
    exec-xargs
    exec-test
    exec-default)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> dcls-and-strings) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> guard-p) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"no :GUARD has been specified in the XARGS.  The MBE proof ~
           obligation is actually a guard condition -- we have to prove that ~
           the guard ensures that the :LOGIC and :EXEC terms are equivalent ~
           and that the guards are satisfied for the :EXEC term.  Please ~
           specify a :GUARD.  Note also that you can delay the verification ~
           of the MBE conditions by delaying guard verification, as with ~
           :VERIFY-GUARDS NIL"</span>
            nil
            nil
            nil
            nil
            nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
            (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> final)
            <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
            (<a class="sym-link local-def" href="#def-fix-exec-xargs" data-sym="FIX-EXEC-XARGS" title="(defun fix-exec-xargs
       (exec-xargs hints hints-p measure measure-p ruler-extenders
        ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs dfs-p)
  (declare (xargs :guard (keyword-value-listp exec-xargs)))
  (let* ((x
...">fix-exec-xargs</a> exec-xargs
              hints
              hints-p
              measure
              measure-p
              ruler-extenders
              ruler-extenders-p
              wfrel
              wfrel-p
              stobjs
              stobjs-p
              dfs
              dfs-p)
            (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> exec-test <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>)
            exec-default))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((x (car dcls-and-strings)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((stringp x) (<a class="sym-link local-def" href="#def-parse-defexec-dcls" data-sym="PARSE-DEFEXEC-DCLS" title="(defun parse-defexec-dcls
       (dcls-and-strings final guard guard-p hints hints-p measure measure-p
        ruler-extenders ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs
        dfs-p exec-xargs exec-test exec-default)
  (cond
...">parse-defexec-dcls</a> (cdr dcls-and-strings)
              (cons x final)
              <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
              guard-p
              hints
              hints-p
              measure
              measure-p
              ruler-extenders
              ruler-extenders-p
              wfrel
              wfrel-p
              stobjs
              stobjs-p
              dfs
              dfs-p
              exec-xargs
              exec-test
              exec-default))
          ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp x)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'declare)
             (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> (cdr x))) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp decl
                <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                guard-p
                hints
                hints-p
                measure
                measure-p
                ruler-extenders
                ruler-extenders-p
                wfrel
                wfrel-p
                stobjs
                stobjs-p
                dfs
                dfs-p
                exec-xargs
                exec-test
                exec-default)
              (<a class="sym-link local-def" href="#def-parse-defexec-dcls-1" data-sym="PARSE-DEFEXEC-DCLS-1" title="(defun parse-defexec-dcls-1
       (alist guard guard-p hints hints-p measure measure-p ruler-extenders
        ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs dfs-p exec-xargs
        exec-test exec-default acc)
  (declare (xargs :guard (symbol-alistp alist)))
...">parse-defexec-dcls-1</a> (cdr x)
                <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                guard-p
                hints
                hints-p
                measure
                measure-p
                ruler-extenders
                ruler-extenders-p
                wfrel
                wfrel-p
                stobjs
                stobjs-p
                dfs
                dfs-p
                exec-xargs
                exec-test
                exec-default
                nil)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp nil nil nil nil nil))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-parse-defexec-dcls" data-sym="PARSE-DEFEXEC-DCLS" title="(defun parse-defexec-dcls
       (dcls-and-strings final guard guard-p hints hints-p measure measure-p
        ruler-extenders ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs
        dfs-p exec-xargs exec-test exec-default)
  (cond
...">parse-defexec-dcls</a> (cdr dcls-and-strings)
                    (cons decl final)
                    <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                    guard-p
                    hints
                    hints-p
                    measure
                    measure-p
                    ruler-extenders
                    ruler-extenders-p
                    wfrel
                    wfrel-p
                    stobjs
                    stobjs-p
                    dfs
                    dfs-p
                    exec-xargs
                    exec-test
                    exec-default)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"the form ~x0 is neither a string nor a form (declare . x) ~
                    where x is a symbol-alistp"</span>
                x)
              nil
              nil
              nil
              nil
              nil)))))))</pre>
  </div>

<div class="form-block macro" id="def-defexec" data-defines="DEFEXEC" data-references="IMPLIES,DEFTHM,IF,XARGS,DECLARE,DEFUN,SET-IRRELEVANT-FORMALS-OK,SET-IGNORE-OK,LOCAL,ENCAPSULATE,PARSE-DEFEXEC-DCLS,EXEC-DEFAULT,EXEC-TEST,EXEC-XARGS,GUARD,FINAL-DCLS-AND-STRINGS,ARGLISTP,SYMBOLP,NOT,SOFT,ER,QUASIQUOTE,COND,T,MV,&,MBE,QUOTE,CASE-MATCH,EXEC-BODY,ERP,MV-LET,LAST,CAR,BODY,BUTLAST,DCLS-AND-STRINGS,LET,REST,&REST,FORMALS,FN,WHOLE,&WHOLE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFEXEC">defexec</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defexec" data-sym="DEFEXEC" title="(defmacro defexec (&amp;whole whole fn formals &amp;rest rest)
  (let ((dcls-and-strings (butlast rest 1)) (body (car (last rest))))
    (mv-let (erp exec-body)
            (case-match body
                        ((&#39;mbe &#39;:logic &amp; &#39;:exec exec-body) (mv nil exec-body))
...">defexec</a>
  (&amp;whole whole fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> &amp;rest <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)
  (let ((dcls-and-strings (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a> <span class="number">1</span>)) (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>))))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp exec-body)
      (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>
        (('<a class="sym-link system" href="axioms.html#def-mbe" data-sym="MBE">mbe</a> '<span class="keyword">:logic</span> &amp; '<span class="keyword">:exec</span> exec-body) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil exec-body))
        (('<a class="sym-link system" href="axioms.html#def-mbe" data-sym="MBE">mbe</a> '<span class="keyword">:exec</span> exec-body '<span class="keyword">:logic</span> &amp;) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil exec-body))
        (('<a class="sym-link system" href="axioms.html#def-mbe" data-sym="MBE">mbe</a> . &amp;) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> '<a class="sym-link system" href="axioms.html#def-mbe" data-sym="MBE">mbe</a> nil))
        (&amp; (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp `(<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            '<a class="sym-link local-def" href="#def-defexec" data-sym="DEFEXEC" title="(defmacro defexec (&amp;whole whole fn formals &amp;rest rest)
  (let ((dcls-and-strings (butlast rest 1)) (body (car (last rest))))
    (mv-let (erp exec-body)
            (case-match body
                        ((&#39;mbe &#39;:logic &amp; &#39;:exec exec-body) (mv nil exec-body))
...">defexec</a>
            <span class="string">"A defexec form must have a body that is a valid call of mbe. ~
                  See :DOC ~s0."</span>
            ,(IF (EQ ERP &#39;MBE)
     &quot;mbe&quot;
     &quot;defexec&quot;)))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp fn)) `(<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            '<a class="sym-link local-def" href="#def-defexec" data-sym="DEFEXEC" title="(defmacro defexec (&amp;whole whole fn formals &amp;rest rest)
  (let ((dcls-and-strings (butlast rest 1)) (body (car (last rest))))
    (mv-let (erp exec-body)
            (case-match body
                        ((&#39;mbe &#39;:logic &amp; &#39;:exec exec-body) (mv nil exec-body))
...">defexec</a>
            <span class="string">"The first argument of defexec must be a symbol, but ~x0 is not."</span>
            ',FN))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-arglistp" data-sym="ARGLISTP">arglistp</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) `(<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            '<a class="sym-link local-def" href="#def-defexec" data-sym="DEFEXEC" title="(defmacro defexec (&amp;whole whole fn formals &amp;rest rest)
  (let ((dcls-and-strings (butlast rest 1)) (body (car (last rest))))
    (mv-let (erp exec-body)
            (case-match body
                        ((&#39;mbe &#39;:logic &amp; &#39;:exec exec-body) (mv nil exec-body))
...">defexec</a>
            <span class="string">"The second argument of defexec must be legal list of formals, ~
              but ~x0 is not."</span>
            ',FORMALS))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp final-dcls-and-strings
              <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
              exec-xargs
              exec-test
              exec-default)
            (<a class="sym-link local-def" href="#def-parse-defexec-dcls" data-sym="PARSE-DEFEXEC-DCLS" title="(defun parse-defexec-dcls
       (dcls-and-strings final guard guard-p hints hints-p measure measure-p
        ruler-extenders ruler-extenders-p wfrel wfrel-p stobjs stobjs-p dfs
        dfs-p exec-xargs exec-test exec-default)
  (cond
...">parse-defexec-dcls</a> dcls-and-strings
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil
              nil)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp `(<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  '<a class="sym-link local-def" href="#def-defexec" data-sym="DEFEXEC" title="(defmacro defexec (&amp;whole whole fn formals &amp;rest rest)
  (let ((dcls-and-strings (butlast rest 1)) (body (car (last rest))))
    (mv-let (erp exec-body)
            (case-match body
                        ((&#39;mbe &#39;:logic &amp; &#39;:exec exec-body) (mv nil exec-body))
...">defexec</a>
                  <span class="string">"Macroexpansion of ~x0 has failed because ~@1."</span>
                  ',WHOLE
                  ',ERP))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
                  (<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
                      (<a class="sym-link system" href="axioms.html#def-set-ignore-ok" data-sym="SET-IGNORE-OK">set-ignore-ok</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                      (<a class="sym-link system" href="axioms.html#def-set-irrelevant-formals-ok" data-sym="SET-IRRELEVANT-FORMALS-OK">set-irrelevant-formals-ok</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                      (<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> ,FN
                          ,FORMALS
                          (declare (xargs <span class="keyword">:verify-guards</span> nil ,@EXEC-XARGS))
                          (if ,EXEC-TEST
                            ,EXEC-BODY
                            ,EXEC-DEFAULT)))
                      (<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(PACKN (LIST FN &#39;-GUARD-IMPLIES-TEST))
                          (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> ,GUARD ,EXEC-TEST)
                          <span class="keyword">:rule-classes</span> nil))))
                  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> ,FN ,FORMALS ,@FINAL-DCLS-AND-STRINGS ,BODY))))))))))</pre>
  </div>

<div class="form-block other" id="form-591" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-a.html#def-defrec" data-sym="DEFREC">defrec</a> sar ((lemma . alist) (index . equiv)) nil)</pre>
  </div>

<div class="form-block function" id="def-applicable-rewrite-rules1" data-defines="APPLICABLE-REWRITE-RULES1" data-references="T,CONS,1+,CDR,SAR,MAKE,LIST,EQL,ONE-WAY-UNIFY,ALIST,FLG,MV-LET,GENEQV-REFINEMENTP,EQ,REWRITE-QUOTED-CONSTANT,DEFINITION,ABBREVIATION,BACKCHAIN,QUOTE,MEMBER,REWRITE-RULE,ACCESS,CADR,EQUAL,SYMBOLP,IF,AND,CAR,LEMMA,LET,CONSP,COND,INTEGERP,NULL,OR,XARGS,DECLARE,WRLD,TARGET-INDEX,TARGET-NAME-OR-RUNE,CURRENT-INDEX,LEMMAS,GENEQV,TERM,DEFUN" data-used-by="SHOW-REWRITES-LINEARS-FN" data-part-name="APPLICABLE-REWRITE-RULES1" data-part-args="WRLD,TARGET-INDEX,TARGET-NAME-OR-RUNE,CURRENT-INDEX,LEMMAS,GENEQV,TERM" data-part-declare="INTEGERP,TARGET-INDEX,NULL,OR,XARGS,DECLARE" data-part-body="T,CONS,1+,CDR,APPLICABLE-REWRITE-RULES1,SAR,MAKE,LIST,CURRENT-INDEX,TARGET-INDEX,TERM,EQL,ONE-WAY-UNIFY,ALIST,FLG,MV-LET,WRLD,GENEQV-REFINEMENTP,GENEQV,EQ,REWRITE-QUOTED-CONSTANT,DEFINITION,ABBREVIATION,BACKCHAIN,QUOTE,MEMBER,REWRITE-RULE,ACCESS,CADR,EQUAL,SYMBOLP,IF,TARGET-NAME-OR-RUNE,NULL,OR,AND,CAR,LEMMA,LET,LEMMAS,CONSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="APPLICABLE-REWRITE-RULES1">applicable-rewrite-rules1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-applicable-rewrite-rules1" data-sym="APPLICABLE-REWRITE-RULES1" title="(defun applicable-rewrite-rules1
       (term geneqv lemmas current-index target-name-or-rune target-index wrld)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-rewrite-rules1</a>
  (term geneqv
    lemmas
    current-index
    target-name-or-rune
    target-index
    wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> target-index) (integerp target-index))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp lemmas) (let ((lemma (car lemmas)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> target-name-or-rune)
               (if (symbolp target-name-or-rune)
                 (equal target-name-or-rune
                   (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rune</span>)))
                 (equal target-name-or-rune
                   (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rune</span>))))
             (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:subclass</span>)
               '(backchain abbreviation definition rewrite-quoted-constant))
             (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> geneqv <span class="keyword">:none</span>)
               (<a class="sym-link system" href="rewrite.html#def-geneqv-refinementp" data-sym="GENEQV-REFINEMENTP">geneqv-refinementp</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:equiv</span>)
                 geneqv
                 wrld))) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg alist)
              (one-way-unify (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:subclass</span>)
                      'rewrite-quoted-constant)
                    (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (car (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:heuristic-info</span>)) <span class="number">2</span>))
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rhs</span>)
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:lhs</span>))
                term)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (flg (if target-index
                    (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> target-index current-index)
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> sar
                          <span class="keyword">:index</span> current-index
                          <span class="keyword">:lemma</span> lemma
                          <span class="keyword">:alist</span> alist
                          <span class="keyword">:equiv</span> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:equiv</span>)))
                      (<a class="sym-link local-def" href="#def-applicable-rewrite-rules1" data-sym="APPLICABLE-REWRITE-RULES1" title="(defun applicable-rewrite-rules1
       (term geneqv lemmas current-index target-name-or-rune target-index wrld)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-rewrite-rules1</a> term
                        geneqv
                        (cdr lemmas)
                        (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> current-index)
                        target-name-or-rune
                        target-index
                        wrld))
                    (cons (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> sar
                        <span class="keyword">:index</span> (if target-name-or-rune
                          nil
                          current-index)
                        <span class="keyword">:lemma</span> lemma
                        <span class="keyword">:alist</span> alist
                        <span class="keyword">:equiv</span> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:equiv</span>))
                      (<a class="sym-link local-def" href="#def-applicable-rewrite-rules1" data-sym="APPLICABLE-REWRITE-RULES1" title="(defun applicable-rewrite-rules1
       (term geneqv lemmas current-index target-name-or-rune target-index wrld)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-rewrite-rules1</a> term
                        geneqv
                        (cdr lemmas)
                        (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> current-index)
                        target-name-or-rune
                        target-index
                        wrld))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-applicable-rewrite-rules1" data-sym="APPLICABLE-REWRITE-RULES1" title="(defun applicable-rewrite-rules1
       (term geneqv lemmas current-index target-name-or-rune target-index wrld)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-rewrite-rules1</a> term
                    geneqv
                    (cdr lemmas)
                    current-index
                    target-name-or-rune
                    target-index
                    wrld)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-applicable-rewrite-rules1" data-sym="APPLICABLE-REWRITE-RULES1" title="(defun applicable-rewrite-rules1
       (term geneqv lemmas current-index target-name-or-rune target-index wrld)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-rewrite-rules1</a> term
              geneqv
              (cdr lemmas)
              current-index
              target-name-or-rune
              target-index
              wrld)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-applicable-linear-rules1" data-defines="APPLICABLE-LINEAR-RULES1" data-references="CONS,1+,CDR,T,SAR,MAKE,LIST,EQL,ONE-WAY-UNIFY,ALIST,FLG,MV-LET,LINEAR-LEMMA,ACCESS,CADR,EQUAL,SYMBOLP,IF,CAR,LEMMA,LET,CONSP,COND,INTEGERP,NULL,OR,XARGS,DECLARE,TARGET-INDEX,TARGET-NAME-OR-RUNE,CURRENT-INDEX,LEMMAS,TERM,DEFUN" data-used-by="SHOW-REWRITES-LINEARS-FN" data-part-name="APPLICABLE-LINEAR-RULES1" data-part-args="TARGET-INDEX,TARGET-NAME-OR-RUNE,CURRENT-INDEX,LEMMAS,TERM" data-part-declare="INTEGERP,TARGET-INDEX,NULL,OR,XARGS,DECLARE" data-part-body="CONS,1+,CDR,APPLICABLE-LINEAR-RULES1,T,SAR,MAKE,LIST,CURRENT-INDEX,EQL,TARGET-INDEX,TERM,ONE-WAY-UNIFY,ALIST,FLG,MV-LET,LINEAR-LEMMA,ACCESS,CADR,EQUAL,SYMBOLP,IF,TARGET-NAME-OR-RUNE,NULL,OR,CAR,LEMMA,LET,LEMMAS,CONSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="APPLICABLE-LINEAR-RULES1">applicable-linear-rules1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-applicable-linear-rules1" data-sym="APPLICABLE-LINEAR-RULES1" title="(defun applicable-linear-rules1
       (term lemmas current-index target-name-or-rune target-index)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-linear-rules1</a>
  (term lemmas current-index target-name-or-rune target-index)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> target-index) (integerp target-index))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp lemmas) (let ((lemma (car lemmas)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> target-name-or-rune)
             (if (symbolp target-name-or-rune)
               (equal target-name-or-rune
                 (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:rune</span>)))
               (equal target-name-or-rune
                 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:rune</span>)))) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg alist)
              (one-way-unify (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:max-term</span>) term)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (flg (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (target-index (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> target-index current-index) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> sar <span class="keyword">:index</span> current-index <span class="keyword">:lemma</span> lemma <span class="keyword">:alist</span> alist)))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-applicable-linear-rules1" data-sym="APPLICABLE-LINEAR-RULES1" title="(defun applicable-linear-rules1
       (term lemmas current-index target-name-or-rune target-index)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-linear-rules1</a> term
                            (cdr lemmas)
                            (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> current-index)
                            target-name-or-rune
                            target-index))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> sar
                          <span class="keyword">:index</span> (if target-name-or-rune
                            nil
                            current-index)
                          <span class="keyword">:lemma</span> lemma
                          <span class="keyword">:alist</span> alist)
                        (<a class="sym-link local-def" href="#def-applicable-linear-rules1" data-sym="APPLICABLE-LINEAR-RULES1" title="(defun applicable-linear-rules1
       (term lemmas current-index target-name-or-rune target-index)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-linear-rules1</a> term
                          (cdr lemmas)
                          (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> current-index)
                          target-name-or-rune
                          target-index)))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-applicable-linear-rules1" data-sym="APPLICABLE-LINEAR-RULES1" title="(defun applicable-linear-rules1
       (term lemmas current-index target-name-or-rune target-index)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-linear-rules1</a> term
                    (cdr lemmas)
                    current-index
                    target-name-or-rune
                    target-index)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-applicable-linear-rules1" data-sym="APPLICABLE-LINEAR-RULES1" title="(defun applicable-linear-rules1
       (term lemmas current-index target-name-or-rune target-index)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-linear-rules1</a> term
              (cdr lemmas)
              current-index
              target-name-or-rune
              target-index)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-pc-relieve-hyp" data-defines="PC-RELIEVE-HYP" data-references="IF-TAUTOLOGYP,*NIL*,EQUAL,STRIP-NOT,ATM,NOT-FLG,NOT,KNOWN-WHETHER-NIL,NILP-TTREE,NILP,KNOWNP,INST-HYP,OK-TO-FORCE-ENS,SEARCH-GROUND-UNITS,FREE-VARSP,LOOKUP-HYP,LOOKUP-HYP-ANS,SUBLIS-VAR,CONS,FARGN,IF,LET,BINDING-HYP-P,BIND-FLG,FORCEP,T,MV,IGNORE,DECLARE,WEAK,MAKE-RCNST,REWRITE-STACK-LIMIT,RELIEVE-HYP-SYNP,FAILURE-REASON,WONP,MV-LET,CAR,MEMBER-EQ,SYNP,QUOTE,FFN-SYMB-P,AND,COND,TTREE,ENS,STATE,WRLD,TYPE-ALIST,UNIFY-SUBST,HYP,RUNE,DEFUN" data-used-by="PC-RELIEVE-HYPS1-ITER" data-part-name="PC-RELIEVE-HYP" data-part-args="TTREE,ENS,STATE,WRLD,TYPE-ALIST,UNIFY-SUBST,HYP,RUNE" data-part-body="IF-TAUTOLOGYP,*NIL*,EQUAL,STRIP-NOT,ATM,NOT-FLG,NOT,KNOWN-WHETHER-NIL,NILP-TTREE,NILP,KNOWNP,INST-HYP,OK-TO-FORCE-ENS,SEARCH-GROUND-UNITS,FREE-VARSP,LOOKUP-HYP,LOOKUP-HYP-ANS,SUBLIS-VAR,CONS,FARGN,IF,LET,BINDING-HYP-P,BIND-FLG,FORCEP,T,MV,IGNORE,DECLARE,WEAK,ENS,MAKE-RCNST,STATE,TYPE-ALIST,WRLD,REWRITE-STACK-LIMIT,RELIEVE-HYP-SYNP,TTREE,UNIFY-SUBST,FAILURE-REASON,WONP,MV-LET,RUNE,CAR,MEMBER-EQ,SYNP,QUOTE,HYP,FFN-SYMB-P,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PC-RELIEVE-HYP">pc-relieve-hyp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pc-relieve-hyp" data-sym="PC-RELIEVE-HYP" title="(defun pc-relieve-hyp (rune hyp unify-subst type-alist wrld state ens ttree)
  (cond
   ((and (ffn-symb-p hyp &#39;synp)
         (member-eq (car rune) &#39;(:rewrite :meta :definition :linear)))
    (mv-let (wonp failure-reason unify-subst ttree)
...">pc-relieve-hyp</a>
  (rune hyp unify-subst type-alist wrld state ens ttree)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-b.html#def-ffn-symb-p" data-sym="FFN-SYMB-P">ffn-symb-p</a> hyp '<a class="sym-link system" href="axioms.html#def-synp" data-sym="SYNP">synp</a>)
       (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car rune) '(<span class="keyword">:rewrite</span> <span class="keyword">:meta</span> <span class="keyword">:definition</span> <span class="keyword">:linear</span>))) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (wonp failure-reason unify-subst ttree)
        (<a class="sym-link system" href="rewrite.html#def-relieve-hyp-synp" data-sym="RELIEVE-HYP-SYNP">relieve-hyp-synp</a> rune
          hyp
          unify-subst
          (<a class="sym-link system" href="axioms.html#def-rewrite-stack-limit" data-sym="REWRITE-STACK-LIMIT">rewrite-stack-limit</a> wrld)
          type-alist
          wrld
          state
          nil
          nil
          nil
          nil
          (make-rcnst ens wrld state <span class="keyword">:force-info</span> 'weak)
          nil
          ttree
          nil)
        (declare (ignore failure-reason))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> wonp unify-subst ttree)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (forcep bind-flg)
        (binding-hyp-p hyp unify-subst wrld)
        (let ((hyp (if forcep
               (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> hyp <span class="number">1</span>)
               hyp)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bind-flg (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                (cons (cons (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> hyp <span class="number">1</span>) (<a class="sym-link system" href="basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> unify-subst (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> hyp <span class="number">2</span>)))
                  unify-subst)
                ttree))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (lookup-hyp-ans unify-subst ttree)
                (lookup-hyp hyp type-alist wrld unify-subst ttree ens)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (lookup-hyp-ans (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> unify-subst ttree))
                  ((free-varsp hyp unify-subst) (<a class="sym-link system" href="rewrite.html#def-search-ground-units" data-sym="SEARCH-GROUND-UNITS">search-ground-units</a> hyp
                      unify-subst
                      type-alist
                      ens
                      (ok-to-force-ens ens)
                      wrld
                      ttree))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((inst-hyp (<a class="sym-link system" href="basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> unify-subst hyp)))
                      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (knownp nilp nilp-ttree)
                        (known-whether-nil inst-hyp
                          type-alist
                          ens
                          (ok-to-force-ens ens)
                          nil
                          wrld
                          ttree)
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (knownp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> nilp) unify-subst nilp-ttree))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (not-flg atm)
                              (<a class="sym-link system" href="basis-b.html#def-strip-not" data-sym="STRIP-NOT">strip-not</a> hyp)
                              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (not-flg (if (equal atm <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a>)
                                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> unify-subst ttree)
                                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil unify-subst ttree)))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (if (<a class="sym-link system" href="rewrite.html#def-if-tautologyp" data-sym="IF-TAUTOLOGYP">if-tautologyp</a> atm)
                                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> unify-subst ttree)
                                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil unify-subst ttree)))))))))))))))))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-pc-relieve-hyps1-iter" data-defines="PC-RELIEVE-HYPS1-ITER" data-references="AND,IF,PC-RELIEVE-HYP,NEW-UNIFY-SUBST,RELIEVE-HYP-ANS,EQ,NOT,NULL,T,MV,CDR,ENDP,OR,COND,CAR,EXTEND-UNIFY-SUBST,PC-RELIEVE-HYPS1,TTREE1,UNIFY-SUBST1,RELIEVE-HYPS1-ANS,MV-LET,TTREE,ENS,STATE,WRLD,KEEP-UNIFY-SUBST,TYPE-ALIST,TTREE0,UNIFY-SUBST0,UNIFY-SUBST,UNIFY-SUBST-LST,HYPS,RUNE,DEFUN,MUTUAL-RECURSION" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PC-RELIEVE-HYPS1-ITER">pc-relieve-hyps1-iter</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pc-relieve-hyps1-iter" data-sym="PC-RELIEVE-HYPS1-ITER" title="(mutual-recursion
 (defun pc-relieve-hyps1-iter
        (rune hyps unify-subst-lst unify-subst unify-subst0 ttree0 type-alist
         keep-unify-subst wrld state ens ttree)
   (mv-let (relieve-hyps1-ans unify-subst1 ttree1)
...">pc-relieve-hyps1-iter</a>
    (rune hyps
      unify-subst-lst
      unify-subst
      unify-subst0
      ttree0
      type-alist
      keep-unify-subst
      wrld
      state
      ens
      ttree)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (relieve-hyps1-ans unify-subst1 ttree1)
      (pc-relieve-hyps1 rune
        hyps
        (<a class="sym-link system" href="rewrite.html#def-extend-unify-subst" data-sym="EXTEND-UNIFY-SUBST">extend-unify-subst</a> (car unify-subst-lst) unify-subst)
        unify-subst0
        ttree0
        type-alist
        keep-unify-subst
        wrld
        state
        ens
        ttree)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr unify-subst-lst)) relieve-hyps1-ans) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> relieve-hyps1-ans unify-subst1 ttree1))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-pc-relieve-hyps1-iter" data-sym="PC-RELIEVE-HYPS1-ITER" title="(mutual-recursion
 (defun pc-relieve-hyps1-iter
        (rune hyps unify-subst-lst unify-subst unify-subst0 ttree0 type-alist
         keep-unify-subst wrld state ens ttree)
   (mv-let (relieve-hyps1-ans unify-subst1 ttree1)
...">pc-relieve-hyps1-iter</a> rune
            hyps
            (cdr unify-subst-lst)
            unify-subst
            unify-subst0
            ttree0
            type-alist
            keep-unify-subst
            wrld
            state
            ens
            ttree)))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> pc-relieve-hyps1
    (rune hyps
      unify-subst
      unify-subst0
      ttree0
      type-alist
      keep-unify-subst
      wrld
      state
      ens
      ttree)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> hyps) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> keep-unify-subst <span class="keyword">:failed</span>)) unify-subst ttree))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (relieve-hyp-ans new-unify-subst ttree)
          (<a class="sym-link local-def" href="#def-pc-relieve-hyp" data-sym="PC-RELIEVE-HYP" title="(defun pc-relieve-hyp (rune hyp unify-subst type-alist wrld state ens ttree)
  (cond
   ((and (ffn-symb-p hyp &#39;synp)
         (member-eq (car rune) &#39;(:rewrite :meta :definition :linear)))
    (mv-let (wonp failure-reason unify-subst ttree)
...">pc-relieve-hyp</a> rune
            (car hyps)
            unify-subst
            type-alist
            wrld
            state
            ens
            ttree)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> relieve-hyp-ans <span class="keyword">:unify-subst-list</span>) (<a class="sym-link local-def" href="#def-pc-relieve-hyps1-iter" data-sym="PC-RELIEVE-HYPS1-ITER" title="(mutual-recursion
 (defun pc-relieve-hyps1-iter
        (rune hyps unify-subst-lst unify-subst unify-subst0 ttree0 type-alist
         keep-unify-subst wrld state ens ttree)
   (mv-let (relieve-hyps1-ans unify-subst1 ttree1)
...">pc-relieve-hyps1-iter</a> rune
                (cdr hyps)
                new-unify-subst
                unify-subst
                unify-subst0
                ttree0
                type-alist
                keep-unify-subst
                wrld
                state
                ens
                ttree))
            ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> relieve-hyp-ans keep-unify-subst) (pc-relieve-hyps1 rune
                (cdr hyps)
                new-unify-subst
                unify-subst0
                ttree0
                type-alist
                (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> keep-unify-subst (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> relieve-hyp-ans))
                  <span class="keyword">:failed</span> keep-unify-subst)
                wrld
                state
                ens
                ttree))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil unify-subst0 ttree0))))))))</pre>
  </div>

<div class="form-block function" id="def-pc-relieve-hyps" data-defines="PC-RELIEVE-HYPS" data-references="NULL,NOT,PC-RELIEVE-HYPS1,TTREE,ENS,STATE,WRLD,KEEP-UNIFY-SUBST,TYPE-ALIST,UNIFY-SUBST,HYPS,RUNE,DEFUN" data-used-by="UNRELIEVED-HYPS" data-part-name="PC-RELIEVE-HYPS" data-part-args="TTREE,ENS,STATE,WRLD,KEEP-UNIFY-SUBST,TYPE-ALIST,UNIFY-SUBST,HYPS,RUNE" data-part-body="ENS,STATE,WRLD,KEEP-UNIFY-SUBST,NULL,NOT,TYPE-ALIST,TTREE,UNIFY-SUBST,HYPS,RUNE,PC-RELIEVE-HYPS1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PC-RELIEVE-HYPS">pc-relieve-hyps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pc-relieve-hyps" data-sym="PC-RELIEVE-HYPS" title="(defun pc-relieve-hyps
       (rune hyps unify-subst type-alist keep-unify-subst wrld state ens ttree)
  (pc-relieve-hyps1 rune hyps unify-subst unify-subst ttree type-alist
                    (not (null keep-unify-subst)) wrld state ens ttree))">pc-relieve-hyps</a>
  (rune hyps
    unify-subst
    type-alist
    keep-unify-subst
    wrld
    state
    ens
    ttree)
  (pc-relieve-hyps1 rune
    hyps
    unify-subst
    unify-subst
    ttree
    type-alist
    (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> keep-unify-subst))
    wrld
    state
    ens
    ttree))</pre>
  </div>

<div class="form-block function" id="def-remove-trivial-lits" data-defines="REMOVE-TRIVIAL-LITS" data-references="NOT,AND,OK-TO-FORCE-ENS,KNOWN-WHETHER-NIL,NILP-TTREE,NILP,KNOWNP,CONS,MV,FREE-VARSP,CAR,SUBLIS-VAR,NEW-LIT,LET,CDR,REST-LIST,MV-LET,CONSP,IF,TTREE,ENS,WRLD,ALIST,TYPE-ALIST,LST,DEFUN" data-used-by="UNRELIEVED-HYPS" data-part-name="REMOVE-TRIVIAL-LITS" data-part-args="TTREE,ENS,WRLD,ALIST,TYPE-ALIST,LST" data-part-body="NOT,AND,OK-TO-FORCE-ENS,KNOWN-WHETHER-NIL,NILP-TTREE,NILP,KNOWNP,CONS,MV,FREE-VARSP,CAR,SUBLIS-VAR,NEW-LIT,LET,ENS,WRLD,ALIST,TYPE-ALIST,CDR,REMOVE-TRIVIAL-LITS,TTREE,REST-LIST,MV-LET,LST,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-TRIVIAL-LITS">remove-trivial-lits</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-trivial-lits" data-sym="REMOVE-TRIVIAL-LITS" title="(defun remove-trivial-lits (lst type-alist alist wrld ens ttree)
  (if (consp lst)
      (mv-let (rest-list ttree)
              (remove-trivial-lits (cdr lst) type-alist alist wrld ens ttree)
              (let ((new-lit (sublis-var alist (car lst))))
...">remove-trivial-lits</a>
  (lst type-alist alist wrld ens ttree)
  (if (consp lst)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (rest-list ttree)
      (<a class="sym-link local-def" href="#def-remove-trivial-lits" data-sym="REMOVE-TRIVIAL-LITS" title="(defun remove-trivial-lits (lst type-alist alist wrld ens ttree)
  (if (consp lst)
      (mv-let (rest-list ttree)
              (remove-trivial-lits (cdr lst) type-alist alist wrld ens ttree)
              (let ((new-lit (sublis-var alist (car lst))))
...">remove-trivial-lits</a> (cdr lst)
        type-alist
        alist
        wrld
        ens
        ttree)
      (let ((new-lit (<a class="sym-link system" href="basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> alist (car lst))))
        (if (free-varsp (car lst) alist)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons new-lit rest-list) ttree)
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (knownp nilp nilp-ttree)
            (known-whether-nil new-lit
              type-alist
              ens
              (ok-to-force-ens ens)
              nil
              wrld
              ttree)
            (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> knownp (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> nilp))
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> rest-list nilp-ttree)
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons new-lit rest-list) ttree))))))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil ttree)))</pre>
  </div>

<div class="form-block function" id="def-unrelieved-hyps" data-defines="UNRELIEVED-HYPS" data-references="REMOVE-TRIVIAL-LITS,LITS,MV,IF,PC-RELIEVE-HYPS,NEW-TTREE,NEW-UNIFY-SUBST,SUCCESS-FLG,MV-LET,TTREE,ENS,STATE,WRLD,KEEP-UNIFY-SUBST,TYPE-ALIST,UNIFY-SUBST,HYPS,RUNE,DEFUN" data-used-by="SHOW-TYPE-PRESCRIPTION-RULE,SHOW-REWRITES-LINEARS" data-part-name="UNRELIEVED-HYPS" data-part-args="TTREE,ENS,STATE,WRLD,KEEP-UNIFY-SUBST,TYPE-ALIST,UNIFY-SUBST,HYPS,RUNE" data-part-body="REMOVE-TRIVIAL-LITS,LITS,MV,IF,TTREE,ENS,STATE,WRLD,KEEP-UNIFY-SUBST,TYPE-ALIST,UNIFY-SUBST,HYPS,RUNE,PC-RELIEVE-HYPS,NEW-TTREE,NEW-UNIFY-SUBST,SUCCESS-FLG,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNRELIEVED-HYPS">unrelieved-hyps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-unrelieved-hyps" data-sym="UNRELIEVED-HYPS" title="(defun unrelieved-hyps
       (rune hyps unify-subst type-alist keep-unify-subst wrld state ens ttree)
  (mv-let (success-flg new-unify-subst new-ttree)
          (pc-relieve-hyps rune hyps unify-subst type-alist keep-unify-subst
                           wrld state ens ttree)
...">unrelieved-hyps</a>
  (rune hyps
    unify-subst
    type-alist
    keep-unify-subst
    wrld
    state
    ens
    ttree)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (success-flg new-unify-subst new-ttree)
    (<a class="sym-link local-def" href="#def-pc-relieve-hyps" data-sym="PC-RELIEVE-HYPS" title="(defun pc-relieve-hyps
       (rune hyps unify-subst type-alist keep-unify-subst wrld state ens ttree)
  (pc-relieve-hyps1 rune hyps unify-subst unify-subst ttree type-alist
                    (not (null keep-unify-subst)) wrld state ens ttree))">pc-relieve-hyps</a> rune
      hyps
      unify-subst
      type-alist
      keep-unify-subst
      wrld
      state
      ens
      ttree)
    (if success-flg
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil new-unify-subst new-ttree)
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (unify-subst ttree)
        (if keep-unify-subst
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> new-unify-subst new-ttree)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> unify-subst ttree))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (lits ttree)
          (<a class="sym-link local-def" href="#def-remove-trivial-lits" data-sym="REMOVE-TRIVIAL-LITS" title="(defun remove-trivial-lits (lst type-alist alist wrld ens ttree)
  (if (consp lst)
      (mv-let (rest-list ttree)
              (remove-trivial-lits (cdr lst) type-alist alist wrld ens ttree)
              (let ((new-lit (sublis-var alist (car lst))))
...">remove-trivial-lits</a> hyps
            type-alist
            unify-subst
            wrld
            ens
            ttree)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> lits unify-subst ttree))))))</pre>
  </div>

<div class="form-block function" id="def-untranslate-subst-abb" data-defines="UNTRANSLATE-SUBST-ABB" data-references="CDR,CDAR,UNTRANS0,CAAR,LIST,CONS,CONSP,IF,SYMBOL-ALISTP,XARGS,DECLARE,STATE,ABBREVIATIONS,SUB,DEFUN" data-used-by="SHOW-TYPE-PRESCRIPTION-RULE,SHOW-REWRITE-LINEAR" data-part-name="UNTRANSLATE-SUBST-ABB" data-part-args="STATE,ABBREVIATIONS,SUB" data-part-declare="SUB,SYMBOL-ALISTP,XARGS,DECLARE" data-part-body="STATE,CDR,UNTRANSLATE-SUBST-ABB,ABBREVIATIONS,CDAR,UNTRANS0,CAAR,LIST,CONS,SUB,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNTRANSLATE-SUBST-ABB">untranslate-subst-abb</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-untranslate-subst-abb" data-sym="UNTRANSLATE-SUBST-ABB" title="(defun untranslate-subst-abb (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (cons (list (caar sub) (untrans0 (cdar sub) nil abbreviations))
            (untranslate-subst-abb (cdr sub) abbreviations state))">untranslate-subst-abb</a>
  (sub abbreviations state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> sub)))
  (if (consp sub)
    (cons (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> sub) (untrans0 (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> sub) nil abbreviations))
      (<a class="sym-link local-def" href="#def-untranslate-subst-abb" data-sym="UNTRANSLATE-SUBST-ABB" title="(defun untranslate-subst-abb (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (cons (list (caar sub) (untrans0 (cdar sub) nil abbreviations))
            (untranslate-subst-abb (cdr sub) abbreviations state))">untranslate-subst-abb</a> (cdr sub) abbreviations state))
    nil))</pre>
  </div>

<div class="form-block function" id="def-show-rewrite-linear" data-defines="SHOW-REWRITE-LINEAR" data-references="NULL,EQL,MSG,ALIST-DIFFERENCE-EQ,EXTRA,FMS0,TERM-EVISC-TUPLE,*NIL*,MEMBER-EQUAL,LENGTH,ZERO-ONE-OR-MORE,UNTRANS0-LST,UNTRANSLATE-SUBST-ABB,UNTRANS0,FMT-STRING,STANDARD-CO,BASE-SYMBOL,T,CDDR,COND,CONS,LIST,FMS,PPROGN,NOT,IF,SHOW-REWRITES,QUOTE,EQ,AND,SUBLIS-VAR,SUBST-RHS,ENABLED-NUMEP,ENABLEDP,LET,STATE,PL-P,EQUIV,ENABLED-ONLY-FLG,ENS,TERM-ID-IFF,ABBREVIATIONS,REWRITE-QUOTED-CONSTANT-FORM-2P,RHS,FREE-2,FREE,UNIFY-SUBST-2,UNIFY-SUBST,SUBST-HYPS-2,SUBST-HYPS,SHOW-MORE,NUME,RUNE,COL,INDEX,CALLER,DEFUN" data-used-by="SHOW-REWRITES-LINEARS" data-part-name="SHOW-REWRITE-LINEAR" data-part-args="STATE,PL-P,EQUIV,ENABLED-ONLY-FLG,ENS,TERM-ID-IFF,ABBREVIATIONS,REWRITE-QUOTED-CONSTANT-FORM-2P,RHS,FREE-2,FREE,UNIFY-SUBST-2,UNIFY-SUBST,SUBST-HYPS-2,SUBST-HYPS,SHOW-MORE,NUME,RUNE,COL,INDEX,CALLER" data-part-body="NULL,FREE-2,EQL,SUBST-HYPS-2,MSG,UNIFY-SUBST-2,ALIST-DIFFERENCE-EQ,EXTRA,FMS0,SHOW-MORE,REWRITE-QUOTED-CONSTANT-FORM-2P,TERM-EVISC-TUPLE,*NIL*,MEMBER-EQUAL,FREE,LENGTH,ZERO-ONE-OR-MORE,UNTRANS0-LST,EQUIV,SUBST-HYPS,UNTRANSLATE-SUBST-ABB,ABBREVIATIONS,UNTRANS0,FMT-STRING,STANDARD-CO,BASE-SYMBOL,T,CDDR,RUNE,COND,COL,INDEX,PL-P,CONS,LIST,FMS,PPROGN,STATE,NOT,ENABLED-ONLY-FLG,IF,SHOW-REWRITES,QUOTE,CALLER,EQ,AND,TERM-ID-IFF,RHS,UNIFY-SUBST,SUBLIS-VAR,SUBST-RHS,ENS,NUME,ENABLED-NUMEP,ENABLEDP,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-REWRITE-LINEAR">show-rewrite-linear</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-show-rewrite-linear" data-sym="SHOW-REWRITE-LINEAR" title="(defun show-rewrite-linear
       (caller index col rune nume show-more subst-hyps subst-hyps-2
        unify-subst unify-subst-2 free free-2 rhs
        rewrite-quoted-constant-form-2p abbreviations term-id-iff ens
        enabled-only-flg equiv pl-p state)
...">show-rewrite-linear</a>
  (caller index
    col
    rune
    nume
    show-more
    subst-hyps
    subst-hyps-2
    unify-subst
    unify-subst-2
    free
    free-2
    rhs
    rewrite-quoted-constant-form-2p
    abbreviations
    term-id-iff
    ens
    enabled-only-flg
    equiv
    pl-p
    state)
  (let ((enabledp (enabled-numep nume ens)) (subst-rhs (<a class="sym-link system" href="basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> unify-subst rhs))
      (term-id-iff (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites) term-id-iff)))
    (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> enabled-only-flg (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> enabledp))
      state
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~|~#a~[~/~c0. ~/  ~]~x1~#2~[~/ (disabled)~]"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\a
              (if pl-p
                <span class="number">0</span>
                (if index
                  <span class="number">1</span>
                  <span class="number">2</span>)))
            (cons #\0 (cons index col))
            (cons #\1
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pl-p rune) ((<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> rune) rune) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (base-symbol rune))))
            (cons #\2
              (if enabledp
                <span class="number">0</span>
                <span class="number">1</span>)))
          (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
          state
          nil)
        (let ((fmt-string <span class="string">"~@x~|~
               ~ ~ ~#c~[New term~/Conclusion~]: ~Y3t~|~
               ~ ~ Hypotheses: ~#b~[&lt;none&gt;~/~Y4t~]~|~
               ~#c~[~ ~ Equiv: ~ye~|~/~]~
               ~#s~[~/~ ~ Substitution: ~Yat~|~]~
               ~#5~[~/~
                    ~ ~ ~@f variable: ~&amp;6~/~
                    ~ ~ ~@f variables: ~&amp;6~sn~]~
               ~#7~[~/  WARNING:  One of the hypotheses is (equivalent to) NIL, ~
               and hence will apparently be impossible to relieve.~]~
               ~#8~[~/  WARNING:  The new term above is only used if it ~
               rewrites to a quoted constant!~]~|"</span>))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> fmt-string
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\x <span class="string">""</span>)
                (cons #\c
                  (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                    <span class="number">0</span>
                    <span class="number">1</span>))
                (cons #\3 (untrans0 subst-rhs term-id-iff abbreviations))
                (cons #\s
                  (if pl-p
                    <span class="number">1</span>
                    <span class="number">0</span>))
                (cons #\a
                  (<a class="sym-link local-def" href="#def-untranslate-subst-abb" data-sym="UNTRANSLATE-SUBST-ABB" title="(defun untranslate-subst-abb (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (cons (list (caar sub) (untrans0 (cdar sub) nil abbreviations))
            (untranslate-subst-abb (cdr sub) abbreviations state))">untranslate-subst-abb</a> unify-subst abbreviations state))
                (cons #\b
                  (if subst-hyps
                    <span class="number">1</span>
                    <span class="number">0</span>))
                (cons #\e equiv)
                (cons #\4 (untrans0-lst subst-hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> abbreviations))
                (cons #\f
                  (if pl-p
                    <span class="string">"Free"</span>
                    <span class="string">"Remaining free"</span>))
                (cons #\5 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> free)))
                (cons #\6 free)
                (cons #\n <span class="string">""</span>)
                (cons #\7
                  (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a> subst-hyps)
                    <span class="number">1</span>
                    <span class="number">0</span>))
                (cons #\t (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state))
                (cons #\8
                  (if rewrite-quoted-constant-form-2p
                    <span class="number">1</span>
                    <span class="number">0</span>)))
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state
              nil)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (show-more (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pl-p state)
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (fms0 <span class="string">"  -- IF ~#c~[REWRITE~/APPLY-LINEAR~] is called ~
                           with a third argument of t: --"</span>
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\c
                            (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                              <span class="number">0</span>
                              <span class="number">1</span>))))))
                  (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> fmt-string
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\x
                        (let ((extra (<a class="sym-link local-def" href="#def-untranslate-subst-abb" data-sym="UNTRANSLATE-SUBST-ABB" title="(defun untranslate-subst-abb (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (cons (list (caar sub) (untrans0 (cdar sub) nil abbreviations))
            (untranslate-subst-abb (cdr sub) abbreviations state))">untranslate-subst-abb</a> (<a class="sym-link system" href="axioms.html#def-alist-difference-eq" data-sym="ALIST-DIFFERENCE-EQ">alist-difference-eq</a> unify-subst-2 unify-subst)
                               abbreviations
                               state)))
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (extra (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~ ~ Additional bindings: ~X01"</span>
                                extra
                                (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state)))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
                      (cons #\c
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                          <span class="number">0</span>
                          <span class="number">1</span>))
                      (cons #\3
                        (untrans0 (<a class="sym-link system" href="basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> unify-subst-2 rhs)
                          term-id-iff
                          abbreviations))
                      (cons #\s
                        (if pl-p
                          <span class="number">1</span>
                          <span class="number">0</span>))
                      (cons #\a
                        (<a class="sym-link local-def" href="#def-untranslate-subst-abb" data-sym="UNTRANSLATE-SUBST-ABB" title="(defun untranslate-subst-abb (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (cons (list (caar sub) (untrans0 (cdar sub) nil abbreviations))
            (untranslate-subst-abb (cdr sub) abbreviations state))">untranslate-subst-abb</a> unify-subst-2 abbreviations state))
                      (cons #\b
                        (if subst-hyps-2
                          <span class="number">1</span>
                          <span class="number">0</span>))
                      (cons #\e equiv)
                      (cons #\4 (untrans0-lst subst-hyps-2 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> abbreviations))
                      (cons #\f
                        (if pl-p
                          <span class="string">"Free"</span>
                          <span class="string">"Remaining free"</span>))
                      (cons #\5
                        (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> free-2) <span class="number">1</span>)
                          <span class="number">1</span>
                          <span class="number">2</span>))
                      (cons #\6 free-2)
                      (cons #\n
                        (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> free-2)
                          <span class="string">"[none]"</span>
                          <span class="string">""</span>))
                      (cons #\7
                        (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a> subst-hyps-2)
                          <span class="number">1</span>
                          <span class="number">0</span>))
                      (cons #\t (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state))
                      (cons #\8
                        (if rewrite-quoted-constant-form-2p
                          <span class="number">1</span>
                          <span class="number">0</span>)))
                    (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                    state
                    nil)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))))))</pre>
  </div>

<div class="form-block function" id="def-show-rewrites-linears" data-defines="SHOW-REWRITES-LINEARS" data-references="CDR,ASSERT$,EQUAL,UNIFY-SUBST-2,SUBST-HYPS-2,SHOW-MORE,SHOW-REWRITE-LINEAR,REWRITE-QUOTED-CONSTANT-FORM-2P,SET-DIFFERENCE-ASSOC-EQ,REVERSE,FREE,ALL-VARS1-LST,ALL-VARS,UNION-EQ,RESULT-AND-HYPS-VARS,IGNORE,DECLARE,UNRELIEVED-HYPS,TTREE,UNIFY-SUBST,SUBST-HYPS,LINEAR-LEMMA,EQL,REWRITE-QUOTED-CONSTANT,AND,IF,REWRITE-RULE,MV,SHOW-REWRITES,QUOTE,EQ,RUNE,RESULT,HYPS,MV-LET,INDEX,ALIST,ACCESS,LEMMA,CAR,SAR,LET*,PPROGN,T,NULL,COND,STATE,W,PL-P,ENABLED-ONLY-FLG,TYPE-ALIST,ENS,TERM-ID-IFF,ABBREVIATIONS,COL,APP-RULES,CALLER,DEFUN" data-used-by="SHOW-REWRITES-LINEARS-FN" data-part-name="SHOW-REWRITES-LINEARS" data-part-args="STATE,W,PL-P,ENABLED-ONLY-FLG,TYPE-ALIST,ENS,TERM-ID-IFF,ABBREVIATIONS,COL,APP-RULES,CALLER" data-part-body="CDR,SHOW-REWRITES-LINEARS,ASSERT$,EQUAL,UNIFY-SUBST-2,SUBST-HYPS-2,SHOW-MORE,ENABLED-ONLY-FLG,TERM-ID-IFF,ABBREVIATIONS,COL,SHOW-REWRITE-LINEAR,PL-P,REWRITE-QUOTED-CONSTANT-FORM-2P,SET-DIFFERENCE-ASSOC-EQ,REVERSE,FREE,ALL-VARS1-LST,ALL-VARS,UNION-EQ,RESULT-AND-HYPS-VARS,IGNORE,DECLARE,ENS,W,TYPE-ALIST,UNRELIEVED-HYPS,TTREE,UNIFY-SUBST,SUBST-HYPS,LINEAR-LEMMA,EQL,REWRITE-QUOTED-CONSTANT,AND,IF,REWRITE-RULE,MV,SHOW-REWRITES,QUOTE,CALLER,EQ,RUNE,RESULT,HYPS,MV-LET,INDEX,ALIST,ACCESS,LEMMA,CAR,SAR,LET*,PPROGN,T,STATE,APP-RULES,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-REWRITES-LINEARS">show-rewrites-linears</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-show-rewrites-linears" data-sym="SHOW-REWRITES-LINEARS" title="(defun show-rewrites-linears
       (caller app-rules col abbreviations term-id-iff ens type-alist
        enabled-only-flg pl-p w state)
  (cond ((null app-rules) state)
        (t
...">show-rewrites-linears</a>
  (caller app-rules
    col
    abbreviations
    term-id-iff
    ens
    type-alist
    enabled-only-flg
    pl-p
    <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> app-rules) state)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((sar (car app-rules)) (lemma (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> sar sar <span class="keyword">:lemma</span>))
            (alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> sar sar <span class="keyword">:alist</span>))
            (index (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> sar sar <span class="keyword">:index</span>)))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (hyps result rune)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:hyps</span>)
                  (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:subclass</span>)
                        'rewrite-quoted-constant)
                      (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (car (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:heuristic-info</span>)) <span class="number">2</span>))
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:lhs</span>)
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rhs</span>))
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rune</span>)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:hyps</span>)
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:concl</span>)
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:rune</span>))))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (subst-hyps unify-subst ttree)
              (<a class="sym-link local-def" href="#def-unrelieved-hyps" data-sym="UNRELIEVED-HYPS" title="(defun unrelieved-hyps
       (rune hyps unify-subst type-alist keep-unify-subst wrld state ens ttree)
  (mv-let (success-flg new-unify-subst new-ttree)
          (pc-relieve-hyps rune hyps unify-subst type-alist keep-unify-subst
                           wrld state ens ttree)
...">unrelieved-hyps</a> rune
                hyps
                alist
                type-alist
                nil
                <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                state
                ens
                nil)
              (declare (ignore ttree))
              (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((result-and-hyps-vars (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> result) (all-vars1-lst hyps nil))) (free (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (set-difference-assoc-eq result-and-hyps-vars unify-subst)))
                  (rewrite-quoted-constant-form-2p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                      (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:subclass</span>)
                        'rewrite-quoted-constant)
                      (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (car (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:heuristic-info</span>)) <span class="number">2</span>))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pl-p (<a class="sym-link local-def" href="#def-show-rewrite-linear" data-sym="SHOW-REWRITE-LINEAR" title="(defun show-rewrite-linear
       (caller index col rune nume show-more subst-hyps subst-hyps-2
        unify-subst unify-subst-2 free free-2 rhs
        rewrite-quoted-constant-form-2p abbreviations term-id-iff ens
        enabled-only-flg equiv pl-p state)
...">show-rewrite-linear</a> caller
                      index
                      col
                      rune
                      (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                        (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:nume</span>)
                        (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:nume</span>))
                      nil
                      subst-hyps
                      nil
                      unify-subst
                      nil
                      free
                      nil
                      result
                      rewrite-quoted-constant-form-2p
                      abbreviations
                      term-id-iff
                      ens
                      enabled-only-flg
                      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites) (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> sar sar <span class="keyword">:equiv</span>))
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (show-more subst-hyps-2 unify-subst-2)
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> free subst-hyps) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (subst-hyps-2 unify-subst-2 ttree)
                            (<a class="sym-link local-def" href="#def-unrelieved-hyps" data-sym="UNRELIEVED-HYPS" title="(defun unrelieved-hyps
       (rune hyps unify-subst type-alist keep-unify-subst wrld state ens ttree)
  (mv-let (success-flg new-unify-subst new-ttree)
          (pc-relieve-hyps rune hyps unify-subst type-alist keep-unify-subst
                           wrld state ens ttree)
...">unrelieved-hyps</a> rune
                              hyps
                              alist
                              type-alist
                              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                              <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                              state
                              ens
                              nil)
                            (declare (ignore ttree))
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal unify-subst-2 unify-subst) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (equal subst-hyps-2 subst-hyps)
                                  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil subst-hyps unify-subst)))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> subst-hyps-2 unify-subst-2)))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil subst-hyps unify-subst)))
                      (<a class="sym-link local-def" href="#def-show-rewrite-linear" data-sym="SHOW-REWRITE-LINEAR" title="(defun show-rewrite-linear
       (caller index col rune nume show-more subst-hyps subst-hyps-2
        unify-subst unify-subst-2 free free-2 rhs
        rewrite-quoted-constant-form-2p abbreviations term-id-iff ens
        enabled-only-flg equiv pl-p state)
...">show-rewrite-linear</a> caller
                        index
                        col
                        rune
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:nume</span>)
                          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:nume</span>))
                        show-more
                        subst-hyps
                        subst-hyps-2
                        unify-subst
                        unify-subst-2
                        free
                        (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (set-difference-assoc-eq result-and-hyps-vars unify-subst-2))
                        result
                        rewrite-quoted-constant-form-2p
                        abbreviations
                        term-id-iff
                        ens
                        enabled-only-flg
                        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites) (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> sar sar <span class="keyword">:equiv</span>))
                        nil
                        state))))))))
        (<a class="sym-link local-def" href="#def-show-rewrites-linears" data-sym="SHOW-REWRITES-LINEARS" title="(defun show-rewrites-linears
       (caller app-rules col abbreviations term-id-iff ens type-alist
        enabled-only-flg pl-p w state)
  (cond ((null app-rules) state)
        (t
...">show-rewrites-linears</a> caller
          (cdr app-rules)
          col
          abbreviations
          term-id-iff
          ens
          type-alist
          enabled-only-flg
          pl-p
          <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
          state)))))</pre>
  </div>

<div class="form-block function" id="def-expand-assumptions-1" data-defines="EXPAND-ASSUMPTIONS-1" data-references="&,EQUAL,MCONS-TERM*,LIST,EQLABLEP,EQL,CADR,SYMBOLP,CAR,CONSP,EQ,AND,OR,EQUALITY-P,APPEND,B,A,IF,QUOTE,CASE-MATCH,TERM,DEFUN" data-used-by="EXPAND-ASSUMPTIONS" data-part-name="EXPAND-ASSUMPTIONS-1" data-part-args="TERM" data-part-body="&,EQUAL,MCONS-TERM*,LIST,EQLABLEP,EQL,CADR,SYMBOLP,CAR,CONSP,EQ,AND,OR,EQUALITY-P,EXPAND-ASSUMPTIONS-1,APPEND,B,A,IF,QUOTE,TERM,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPAND-ASSUMPTIONS-1">expand-assumptions-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-expand-assumptions-1" data-sym="EXPAND-ASSUMPTIONS-1" title="(defun expand-assumptions-1 (term)
  (case-match term
              ((&#39;if a b &#39;&#39;nil)
               (append (expand-assumptions-1 a) (expand-assumptions-1 b)))
              ((equality-p a b)
...">expand-assumptions-1</a>
  (term)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
    (('if a b ''nil) (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-expand-assumptions-1" data-sym="EXPAND-ASSUMPTIONS-1" title="(defun expand-assumptions-1 (term)
  (case-match term
              ((&#39;if a b &#39;&#39;nil)
               (append (expand-assumptions-1 a) (expand-assumptions-1 b)))
              ((equality-p a b)
...">expand-assumptions-1</a> a) (<a class="sym-link local-def" href="#def-expand-assumptions-1" data-sym="EXPAND-ASSUMPTIONS-1" title="(defun expand-assumptions-1 (term)
  (case-match term
              ((&#39;if a b &#39;&#39;nil)
               (append (expand-assumptions-1 a) (expand-assumptions-1 b)))
              ((equality-p a b)
...">expand-assumptions-1</a> b)))
    ((equality-p a b) (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> equality-p '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>)
            (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp a) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car a) 'quote) (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> a)))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp b) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car b) 'quote) (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> b)))))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> equality-p '<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a>)
            (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp a) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car a) 'quote) (<a class="sym-link system" href="axioms.html#def-eqlablep" data-sym="EQLABLEP">eqlablep</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> a)))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp b) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car b) 'quote) (<a class="sym-link system" href="axioms.html#def-eqlablep" data-sym="EQLABLEP">eqlablep</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> b))))))
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> term (<a class="sym-link system" href="basis-b.html#def-mcons-term_2A" data-sym="MCONS-TERM*">mcons-term*</a> 'equal a b))
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> term)))
    (&amp; (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> term))))</pre>
  </div>

<div class="form-block function" id="def-expand-assumptions" data-defines="EXPAND-ASSUMPTIONS" data-references="CDR,CAR,EXPAND-ASSUMPTIONS-1,APPEND,IF,TRUE-LISTP,XARGS,DECLARE,X,DEFUN" data-used-by="HYPS-TYPE-ALIST" data-part-name="EXPAND-ASSUMPTIONS" data-part-args="X" data-part-declare="X,TRUE-LISTP,XARGS,DECLARE" data-part-body="CDR,EXPAND-ASSUMPTIONS,CAR,EXPAND-ASSUMPTIONS-1,APPEND,X,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPAND-ASSUMPTIONS">expand-assumptions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-expand-assumptions" data-sym="EXPAND-ASSUMPTIONS" title="(defun expand-assumptions (x)
  (declare (xargs :guard (true-listp x)))
  (if x
      (append (expand-assumptions-1 (car x)) (expand-assumptions (cdr x)))
      nil))">expand-assumptions</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)))
  (if x
    (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-expand-assumptions-1" data-sym="EXPAND-ASSUMPTIONS-1" title="(defun expand-assumptions-1 (term)
  (case-match term
              ((&#39;if a b &#39;&#39;nil)
               (append (expand-assumptions-1 a) (expand-assumptions-1 b)))
              ((equality-p a b)
...">expand-assumptions-1</a> (car x))
      (<a class="sym-link local-def" href="#def-expand-assumptions" data-sym="EXPAND-ASSUMPTIONS" title="(defun expand-assumptions (x)
  (declare (xargs :guard (true-listp x)))
  (if x
      (append (expand-assumptions-1 (car x)) (expand-assumptions (cdr x)))
      nil))">expand-assumptions</a> (cdr x)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-hyps-type-alist" data-defines="HYPS-TYPE-ALIST" data-references="MATCH-FREE-OVERRIDE,OK-TO-FORCE-ENS,EXPAND-ASSUMPTIONS,DUMB-NEGATE-LIT-LST,SHOW-REWRITES,QUOTE,FORWARD-CHAIN-TOP,STATE,WRLD,ENS,ASSUMPTIONS,DEFUN" data-used-by="SHOW-TYPE-PRESCRIPTION-RULES,SHOW-REWRITES-LINEARS-FN" data-part-name="HYPS-TYPE-ALIST" data-part-args="STATE,WRLD,ENS,ASSUMPTIONS" data-part-body="STATE,MATCH-FREE-OVERRIDE,WRLD,ENS,OK-TO-FORCE-ENS,ASSUMPTIONS,EXPAND-ASSUMPTIONS,DUMB-NEGATE-LIT-LST,SHOW-REWRITES,QUOTE,FORWARD-CHAIN-TOP" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HYPS-TYPE-ALIST">hyps-type-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hyps-type-alist" data-sym="HYPS-TYPE-ALIST" title="(defun hyps-type-alist (assumptions ens wrld state)
  (forward-chain-top &#39;show-rewrites
                     (dumb-negate-lit-lst (expand-assumptions assumptions)) nil
                     (ok-to-force-ens ens) nil wrld ens
                     (match-free-override wrld) state))">hyps-type-alist</a>
  (assumptions ens wrld state)
  (forward-chain-top 'show-rewrites
    (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit-lst" data-sym="DUMB-NEGATE-LIT-LST">dumb-negate-lit-lst</a> (<a class="sym-link local-def" href="#def-expand-assumptions" data-sym="EXPAND-ASSUMPTIONS" title="(defun expand-assumptions (x)
  (declare (xargs :guard (true-listp x)))
  (if x
      (append (expand-assumptions-1 (car x)) (expand-assumptions (cdr x)))
      nil))">expand-assumptions</a> assumptions))
    nil
    (ok-to-force-ens ens)
    nil
    wrld
    ens
    (<a class="sym-link system" href="axioms.html#def-match-free-override" data-sym="MATCH-FREE-OVERRIDE">match-free-override</a> wrld)
    state))</pre>
  </div>

<div class="form-block function" id="def-show-rewrites-linears-fn" data-defines="SHOW-REWRITES-LINEARS-FN" data-references="LENGTH,FLOOR,SHOW-REWRITES-LINEARS,>,NULL,LINEAR-LEMMAS,APPLICABLE-LINEAR-RULES1,LEMMAS,GETPROPC,REWRITE-QUOTED-CONSTANT-RULES,GLOBAL-VAL,QUOTEP,APPLICABLE-REWRITE-RULES1,APP-RULES,ASSERT$,IGNORE,DECLARE,TTREE,HYPS-TYPE-ALIST,FLG,MV-LET,SHOW-LINEARS,TERM-EVISC-TUPLE,FFN-SYMB,FLAMBDAP,FQUOTEP,VARIABLEP,STANDARD-CO,SYMBOL-NAME,CONS,LIST,FMS,OR,NOT,W,T,SHOW-REWRITES,QUOTE,EQ,COND,MEMBER-EQ,CAR,KEYWORDP,IF,CONSP,RUNE,<,INTEGERP,INDEX,SYMBOLP,AND,NAME,LET,STATE,PL-P,GENEQV,ALL-HYPS,TERM-ID-IFF,ABBREVIATIONS,CURRENT-TERM,ENS,ENABLED-ONLY-FLG,RULE-ID,CALLER,DEFUN" data-used-by="PL2-FN" data-part-name="SHOW-REWRITES-LINEARS-FN" data-part-args="STATE,PL-P,GENEQV,ALL-HYPS,TERM-ID-IFF,ABBREVIATIONS,CURRENT-TERM,ENS,ENABLED-ONLY-FLG,RULE-ID,CALLER" data-part-body="ENABLED-ONLY-FLG,TERM-ID-IFF,ABBREVIATIONS,LENGTH,FLOOR,SHOW-REWRITES-LINEARS,>,NULL,LINEAR-LEMMAS,APPLICABLE-LINEAR-RULES1,LEMMAS,GETPROPC,REWRITE-QUOTED-CONSTANT-RULES,GLOBAL-VAL,QUOTEP,GENEQV,APPLICABLE-REWRITE-RULES1,APP-RULES,ASSERT$,IGNORE,DECLARE,ENS,ALL-HYPS,TTREE,HYPS-TYPE-ALIST,FLG,MV-LET,SHOW-LINEARS,TERM-EVISC-TUPLE,FFN-SYMB,FLAMBDAP,FQUOTEP,CURRENT-TERM,VARIABLEP,STANDARD-CO,SYMBOL-NAME,CONS,LIST,FMS,OR,NOT,STATE,W,T,SHOW-REWRITES,QUOTE,CALLER,EQ,COND,MEMBER-EQ,CAR,KEYWORDP,PL-P,IF,CONSP,RUNE,<,INTEGERP,INDEX,RULE-ID,SYMBOLP,AND,NAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-REWRITES-LINEARS-FN">show-rewrites-linears-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-show-rewrites-linears-fn" data-sym="SHOW-REWRITES-LINEARS-FN" title="(defun show-rewrites-linears-fn
       (caller rule-id enabled-only-flg ens current-term abbreviations
        term-id-iff all-hyps geneqv pl-p state)
  (let ((name (and (symbolp rule-id) rule-id))
        (index (and (integerp rule-id) (&lt; 0 rule-id) rule-id))
...">show-rewrites-linears-fn</a>
  (caller rule-id
    enabled-only-flg
    ens
    current-term
    abbreviations
    term-id-iff
    all-hyps
    geneqv
    pl-p
    state)
  (let ((name (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp rule-id) rule-id)) (index (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp rule-id) (&lt; <span class="number">0</span> rule-id) rule-id))
      (rune (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp rule-id)
          (if pl-p
            (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car rule-id))
            (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car rule-id)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites) '(<span class="keyword">:rewrite</span> <span class="keyword">:rewrite-quoted-constant</span> <span class="keyword">:definition</span>))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:linear</span>))))
          rule-id))
      (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> pl-p) rule-id (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name index rune))) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"The rule-id argument to ~s0 must be a name, a positive integer, ~
            or a rune representing a rewrite, rewrite-quoted-constant, or ~
            definition rule, but ~x1 is none of these.~|"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (symbol-name caller)) (cons #\1 rule-id))
          (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
          state
          nil))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> pl-p)
         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> current-term)
           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> current-term)
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                 rule-id
                 (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car rule-id) <span class="keyword">:rewrite-quoted-constant</span>))))
           (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term)))) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"It is only possible to apply ~#0~[rewrite rules to terms that are ~
            not variables or applications of lambda expressions~/linear rules ~
            for triggers that are not variables, quoted constants, or ~
            applications of lambda expressions~].  However, the current term ~
            is:~%~ ~ ~y1.~|"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
              (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                <span class="number">0</span>
                <span class="number">1</span>))
            (cons #\1 current-term))
          (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
          state
          (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state)))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> pl-p)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term) 'if)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-linears)) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"It is only possible to apply linear rules for triggers that are ~
            applications of function symbols other than IF.  However, the ~
            current term is~|~ ~ ~y0.~|"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 current-term))
          (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
          state
          (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg <a class="sym-link local-def" href="#def-hyps-type-alist" data-sym="HYPS-TYPE-ALIST" title="(defun hyps-type-alist (assumptions ens wrld state)
  (forward-chain-top &#39;show-rewrites
                     (dumb-negate-lit-lst (expand-assumptions assumptions)) nil
                     (ok-to-force-ens ens) nil wrld ens
                     (match-free-override wrld) state))">hyps-type-alist</a> ttree)
          (<a class="sym-link local-def" href="#def-hyps-type-alist" data-sym="HYPS-TYPE-ALIST" title="(defun hyps-type-alist (assumptions ens wrld state)
  (forward-chain-top &#39;show-rewrites
                     (dumb-negate-lit-lst (expand-assumptions assumptions)) nil
                     (ok-to-force-ens ens) nil wrld ens
                     (match-free-override wrld) state))">hyps-type-alist</a> all-hyps ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
          (declare (ignore ttree))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (flg (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> pl-p)
                (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"*** Contradiction in the hypotheses! ***~%The S command ~
                should complete this goal.~|"</span>
                  nil
                  (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                  state
                  nil)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((app-rules (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites) (<a class="sym-link local-def" href="#def-applicable-rewrite-rules1" data-sym="APPLICABLE-REWRITE-RULES1" title="(defun applicable-rewrite-rules1
       (term geneqv lemmas current-index target-name-or-rune target-index wrld)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-rewrite-rules1</a> current-term
                         geneqv
                         (if (<a class="sym-link system" href="axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> current-term)
                           (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'rewrite-quoted-constant-rules <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
                           (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term) 'lemmas nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                         <span class="number">1</span>
                         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name rune)
                         index
                         <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                     (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-applicable-linear-rules1" data-sym="APPLICABLE-LINEAR-RULES1" title="(defun applicable-linear-rules1
       (term lemmas current-index target-name-or-rune target-index)
  (declare (xargs :guard (or (null target-index) (integerp target-index))))
  (cond
   ((consp lemmas)
...">applicable-linear-rules1</a> current-term
                         (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term) 'linear-lemmas nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
                         <span class="number">1</span>
                         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name rune)
                         index)))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> app-rules) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pl-p state)
                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> index (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> index <span class="number">1</span>)) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~|*** There are fewer than ~x0 applicable ~s1 ~
                            rules. ***~%"</span>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 index)
                            (cons #\1
                              (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                                <span class="string">"rewrite"</span>
                                <span class="string">"linear"</span>)))
                          (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                          state
                          nil))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~|*** There are no applicable ~s0 rules. ***~%"</span>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                              (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> caller 'show-rewrites)
                                <span class="string">"rewrite"</span>
                                <span class="string">"linear"</span>)))
                          (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                          state
                          nil))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-show-rewrites-linears" data-sym="SHOW-REWRITES-LINEARS" title="(defun show-rewrites-linears
       (caller app-rules col abbreviations term-id-iff ens type-alist
        enabled-only-flg pl-p w state)
  (cond ((null app-rules) state)
        (t
...">show-rewrites-linears</a> caller
                      app-rules
                      (floor (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> app-rules) <span class="number">10</span>)
                      abbreviations
                      term-id-iff
                      ens
                      <a class="sym-link local-def" href="#def-hyps-type-alist" data-sym="HYPS-TYPE-ALIST" title="(defun hyps-type-alist (assumptions ens wrld state)
  (forward-chain-top &#39;show-rewrites
                     (dumb-negate-lit-lst (expand-assumptions assumptions)) nil
                     (ok-to-force-ens ens) nil wrld ens
                     (match-free-override wrld) state))">hyps-type-alist</a>
                      enabled-only-flg
                      pl-p
                      <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                      state)))))))))))</pre>
  </div>

<div class="form-block function" id="def-show-meta-lemmas1" data-defines="SHOW-META-LEMMAS1" data-references="CDR,STANDARD-CO,TERM-EVISC-TUPLE,UNTRANSLATE,CONS,LIST,FMS,*T*,MV,HYP,HYP-FN,LET,TERMP,NOT,IGNORE,DECLARE,EV-FNCALL-META,LATCHES,NEW-TERM,ERP,MV-LET,META-FN-ARGS,ARGS,EXTENDEDP,FN,EQUAL,BASE-SYMBOL,SYMBOLP,IF,NULL,OR,META,QUOTE,REWRITE-RULE,ACCESS,EQ,AND,RUNE,CAR,LEMMA,LET*,PPROGN,T,ENDP,COND,STATE,ENS,WRLD,TERM,RULE-ID,LEMMAS,DEFUN" data-used-by="SHOW-META-LEMMAS" data-part-name="SHOW-META-LEMMAS1" data-part-args="STATE,ENS,WRLD,TERM,RULE-ID,LEMMAS" data-part-body="CDR,SHOW-META-LEMMAS1,STANDARD-CO,TERM-EVISC-TUPLE,UNTRANSLATE,CONS,LIST,FMS,*T*,MV,HYP,HYP-FN,LET,WRLD,TERMP,NOT,IGNORE,DECLARE,EV-FNCALL-META,LATCHES,NEW-TERM,ERP,MV-LET,ENS,TERM,META-FN-ARGS,ARGS,EXTENDEDP,FN,EQUAL,BASE-SYMBOL,SYMBOLP,IF,RULE-ID,NULL,OR,META,QUOTE,REWRITE-RULE,ACCESS,EQ,AND,RUNE,CAR,LEMMA,LET*,PPROGN,T,STATE,LEMMAS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-META-LEMMAS1">show-meta-lemmas1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-show-meta-lemmas1" data-sym="SHOW-META-LEMMAS1" title="(defun show-meta-lemmas1 (lemmas rule-id term wrld ens state)
  (cond ((endp lemmas) state)
        (t
         (pprogn
          (let* ((lemma (car lemmas))
...">show-meta-lemmas1</a>
  (lemmas rule-id term wrld ens state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lemmas) state)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((lemma (car lemmas)) (rune (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:subclass</span>) 'meta)
                (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rune</span>))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> rune
               (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> rule-id)
                 (if (symbolp rule-id)
                   (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> rule-id (base-symbol rune))
                   (equal rule-id rune)))) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:lhs</span>)) (extendedp (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rhs</span>))
                  (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link system" href="defthm.html#def-meta-fn-args" data-sym="META-FN-ARGS">meta-fn-args</a> term extendedp ens state)))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp new-term latches)
                  (<a class="sym-link system" href="rewrite.html#def-ev-fncall-meta" data-sym="EV-FNCALL-META">ev-fncall-meta</a> fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> state)
                  (declare (ignore latches))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp (equal new-term term) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (termp new-term wrld))) state)
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((hyp-fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:hyps</span>)))
                        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp hyp latches)
                          (if hyp-fn
                            (<a class="sym-link system" href="rewrite.html#def-ev-fncall-meta" data-sym="EV-FNCALL-META">ev-fncall-meta</a> hyp-fn
                              (<a class="sym-link system" href="defthm.html#def-meta-fn-args" data-sym="META-FN-ARGS">meta-fn-args</a> term extendedp ens state)
                              state)
                            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a> nil))
                          (declare (ignore latches))
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (termp hyp wrld))) state)
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~Y01~|~
                               ~ ~ New term: ~Y2t~|~
                               ~ ~ Hypothesis: ~Y3t~|~
                               ~ ~ Equiv: ~y4~|"</span>
                                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 rune)
                                  (cons #\1 nil)
                                  (cons #\2 new-term)
                                  (cons #\3 (untranslate hyp nil wrld))
                                  (cons #\4 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:equiv</span>))
                                  (cons #\t (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state)))
                                (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                                state
                                nil))))))))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
        (<a class="sym-link local-def" href="#def-show-meta-lemmas1" data-sym="SHOW-META-LEMMAS1" title="(defun show-meta-lemmas1 (lemmas rule-id term wrld ens state)
  (cond ((endp lemmas) state)
        (t
         (pprogn
          (let* ((lemma (car lemmas))
...">show-meta-lemmas1</a> (cdr lemmas) rule-id term wrld ens state)))))</pre>
  </div>

<div class="form-block function" id="def-show-meta-lemmas" data-defines="SHOW-META-LEMMAS" data-references="T,LEMMAS,QUOTE,GETPROPC,SHOW-META-LEMMAS1,W,WRLD,LET,FFN-SYMB,FLAMBDAP,FQUOTEP,NOT,NVARIABLEP,AND,COND,STATE,ENS,RULE-ID,TERM,DEFUN" data-used-by="PL2-FN" data-part-name="SHOW-META-LEMMAS" data-part-args="STATE,ENS,RULE-ID,TERM" data-part-body="T,ENS,RULE-ID,LEMMAS,QUOTE,GETPROPC,SHOW-META-LEMMAS1,STATE,W,WRLD,LET,FFN-SYMB,FLAMBDAP,FQUOTEP,NOT,TERM,NVARIABLEP,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-META-LEMMAS">show-meta-lemmas</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-show-meta-lemmas" data-sym="SHOW-META-LEMMAS" title="(defun show-meta-lemmas (term rule-id ens state)
  (cond
   ((and (nvariablep term) (not (fquotep term))
         (not (flambdap (ffn-symb term))))
    (let ((wrld (w state)))
...">show-meta-lemmas</a>
  (term rule-id ens state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-nvariablep" data-sym="NVARIABLEP">nvariablep</a> term)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term))
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)))) (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link local-def" href="#def-show-meta-lemmas1" data-sym="SHOW-META-LEMMAS1" title="(defun show-meta-lemmas1 (lemmas rule-id term wrld ens state)
  (cond ((endp lemmas) state)
        (t
         (pprogn
          (let* ((lemma (car lemmas))
...">show-meta-lemmas1</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) 'lemmas nil wrld)
          rule-id
          term
          wrld
          ens
          state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))</pre>
  </div>

<div class="form-block function" id="def-decoded-type-set-from-tp-rule" data-defines="DECODED-TYPE-SET-FROM-TP-RULE" data-references="DECODE-TYPE-SET,IGNORE,DECLARE,OK-TO-FORCE-ENS,TYPE-PRESCRIPTION,ACCESS,TYPE-SET-WITH-RULE1,TTREE,TYPE-ALIST,TS,MV-LET,ENS,WRLD,UNIFY-SUBST,TP,DEFUN" data-used-by="SHOW-TYPE-PRESCRIPTION-RULE" data-part-name="DECODED-TYPE-SET-FROM-TP-RULE" data-part-args="ENS,WRLD,UNIFY-SUBST,TP" data-part-body="DECODE-TYPE-SET,IGNORE,DECLARE,WRLD,ENS,OK-TO-FORCE-ENS,TP,TYPE-PRESCRIPTION,ACCESS,UNIFY-SUBST,TYPE-SET-WITH-RULE1,TTREE,TYPE-ALIST,TS,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DECODED-TYPE-SET-FROM-TP-RULE">decoded-type-set-from-tp-rule</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-decoded-type-set-from-tp-rule" data-sym="DECODED-TYPE-SET-FROM-TP-RULE" title="(defun decoded-type-set-from-tp-rule (tp unify-subst wrld ens)
  (mv-let (ts type-alist ttree)
          (type-set-with-rule1 unify-subst (access type-prescription tp :vars)
                               (ok-to-force-ens ens) nil nil nil ens wrld
                               (access type-prescription tp :basic-ts) nil nil
...">decoded-type-set-from-tp-rule</a>
  (tp unify-subst wrld ens)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ts type-alist ttree)
    (type-set-with-rule1 unify-subst
      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription tp <span class="keyword">:vars</span>)
      (ok-to-force-ens ens)
      nil
      nil
      nil
      ens
      wrld
      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription tp <span class="keyword">:basic-ts</span>)
      nil
      nil
      nil
      nil)
    (declare (ignore type-alist ttree))
    (decode-type-set ts)))</pre>
  </div>

<div class="form-block function" id="def-show-type-prescription-rule" data-defines="SHOW-TYPE-PRESCRIPTION-RULE" data-references="TERM-EVISC-TUPLE,MEMBER-EQ,LENGTH,ZERO-ONE-OR-MORE,T,UNTRANS0-LST,DECODED-TYPE-SET-FROM-TP-RULE,UNTRANSLATE-SUBST-ABB,ALL-VARS1-LST,SET-DIFFERENCE-ASSOC-EQ,REVERSE,FREE,IGNORE,DECLARE,UNRELIEVED-HYPS,TTREE,SUBST-HYPS,MV-LET,FMT-STRING,STANDARD-CO,ENABLED-NUMEP,IF,CONS,LIST,FMS,PPROGN,HYPS,NUME,TYPE-PRESCRIPTION,ACCESS,RUNE,LET,STATE,ENS,WRLD,ABBREVIATIONS,TYPE-ALIST,UNIFY-SUBST,RULE,DEFUN" data-used-by="SHOW-TYPE-PRESCRIPTION-RULES1" data-part-name="SHOW-TYPE-PRESCRIPTION-RULE" data-part-args="STATE,ENS,WRLD,ABBREVIATIONS,TYPE-ALIST,UNIFY-SUBST,RULE" data-part-body="TERM-EVISC-TUPLE,MEMBER-EQ,LENGTH,ZERO-ONE-OR-MORE,T,UNTRANS0-LST,DECODED-TYPE-SET-FROM-TP-RULE,ABBREVIATIONS,UNTRANSLATE-SUBST-ABB,ALL-VARS1-LST,SET-DIFFERENCE-ASSOC-EQ,REVERSE,FREE,IGNORE,DECLARE,WRLD,TYPE-ALIST,UNRELIEVED-HYPS,TTREE,UNIFY-SUBST,SUBST-HYPS,MV-LET,FMT-STRING,STATE,STANDARD-CO,ENS,ENABLED-NUMEP,IF,CONS,LIST,FMS,PPROGN,HYPS,NUME,RULE,TYPE-PRESCRIPTION,ACCESS,RUNE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-TYPE-PRESCRIPTION-RULE">show-type-prescription-rule</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-show-type-prescription-rule" data-sym="SHOW-TYPE-PRESCRIPTION-RULE" title="(defun show-type-prescription-rule
       (rule unify-subst type-alist abbreviations wrld ens state)
  (let ((rune (access type-prescription rule :rune))
        (nume (access type-prescription rule :nume))
        (hyps (access type-prescription rule :hyps)))
...">show-type-prescription-rule</a>
  (rule unify-subst type-alist abbreviations wrld ens state)
  (let ((rune (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription rule <span class="keyword">:rune</span>)) (nume (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription rule <span class="keyword">:nume</span>))
      (hyps (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription rule <span class="keyword">:hyps</span>)))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~x1~#2~[~/ (disabled)~]"</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\1 rune)
          (cons #\2
            (if (enabled-numep nume ens)
              <span class="number">0</span>
              <span class="number">1</span>)))
        (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
        state
        nil)
      (let ((fmt-string <span class="string">"~ ~ Type: ~Y01~|~
             ~ ~ Hypotheses: ~#b~[&lt;none&gt;~/~Y4t~]~|~
             ~ ~ Substitution: ~Yat~|~
             ~#5~[~/~
                  ~ ~ Remaining free variable: ~&amp;6~/~
                  ~ ~ Remaining free variables: ~&amp;6~sn~]~
             ~#7~[~/  WARNING:  One of the hypotheses is (equivalent to) NIL, ~
                  and hence will apparently be impossible to relieve.~]~|"</span>))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (subst-hyps unify-subst ttree)
          (<a class="sym-link local-def" href="#def-unrelieved-hyps" data-sym="UNRELIEVED-HYPS" title="(defun unrelieved-hyps
       (rune hyps unify-subst type-alist keep-unify-subst wrld state ens ttree)
  (mv-let (success-flg new-unify-subst new-ttree)
          (pc-relieve-hyps rune hyps unify-subst type-alist keep-unify-subst
                           wrld state ens ttree)
...">unrelieved-hyps</a> rune
            hyps
            unify-subst
            type-alist
            nil
            wrld
            state
            ens
            nil)
          (declare (ignore ttree))
          (let ((free (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (set-difference-assoc-eq (all-vars1-lst hyps nil)
                   unify-subst))))
            (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> fmt-string
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\a
                  (<a class="sym-link local-def" href="#def-untranslate-subst-abb" data-sym="UNTRANSLATE-SUBST-ABB" title="(defun untranslate-subst-abb (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (cons (list (caar sub) (untrans0 (cdar sub) nil abbreviations))
            (untranslate-subst-abb (cdr sub) abbreviations state))">untranslate-subst-abb</a> unify-subst abbreviations state))
                (cons #\b
                  (if subst-hyps
                    <span class="number">1</span>
                    <span class="number">0</span>))
                (cons #\0
                  (<a class="sym-link local-def" href="#def-decoded-type-set-from-tp-rule" data-sym="DECODED-TYPE-SET-FROM-TP-RULE" title="(defun decoded-type-set-from-tp-rule (tp unify-subst wrld ens)
  (mv-let (ts type-alist ttree)
          (type-set-with-rule1 unify-subst (access type-prescription tp :vars)
                               (ok-to-force-ens ens) nil nil nil ens wrld
                               (access type-prescription tp :basic-ts) nil nil
...">decoded-type-set-from-tp-rule</a> rule unify-subst wrld ens))
                (cons #\1 nil)
                (cons #\4 (untrans0-lst subst-hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> abbreviations))
                (cons #\5 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> free)))
                (cons #\6 free)
                (cons #\n <span class="string">""</span>)
                (cons #\7
                  (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> nil subst-hyps)
                    <span class="number">1</span>
                    <span class="number">0</span>))
                (cons #\t (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state)))
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state
              nil)))))))</pre>
  </div>

<div class="form-block function" id="def-show-type-prescription-rules1" data-defines="SHOW-TYPE-PRESCRIPTION-RULES1" data-references="CDR,SHOW-TYPE-PRESCRIPTION-RULE,MV,ONE-WAY-UNIFY,EQUAL,BASE-SYMBOL,EQ,SYMBOLP,IF,CAR,TYPE-PRESCRIPTION,ACCESS,RUNE,LET,NULL,OR,UNIFY-SUBST,UNIFY-ANS,MV-LET,PPROGN,T,ENDP,COND,STATE,ENS,WRLD,ABBREVIATIONS,TYPE-ALIST,RULE-ID,TERM,RULES,DEFUN" data-used-by="SHOW-TYPE-PRESCRIPTION-RULES" data-part-name="SHOW-TYPE-PRESCRIPTION-RULES1" data-part-args="STATE,ENS,WRLD,ABBREVIATIONS,TYPE-ALIST,RULE-ID,TERM,RULES" data-part-body="CDR,SHOW-TYPE-PRESCRIPTION-RULES1,ENS,WRLD,ABBREVIATIONS,TYPE-ALIST,SHOW-TYPE-PRESCRIPTION-RULE,MV,TERM,ONE-WAY-UNIFY,EQUAL,BASE-SYMBOL,EQ,SYMBOLP,IF,CAR,TYPE-PRESCRIPTION,ACCESS,RUNE,LET,RULE-ID,NULL,OR,UNIFY-SUBST,UNIFY-ANS,MV-LET,PPROGN,T,STATE,RULES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-TYPE-PRESCRIPTION-RULES1">show-type-prescription-rules1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-show-type-prescription-rules1" data-sym="SHOW-TYPE-PRESCRIPTION-RULES1" title="(defun show-type-prescription-rules1
       (rules term rule-id type-alist abbreviations wrld ens state)
  (cond ((endp rules) state)
        (t
         (pprogn
...">show-type-prescription-rules1</a>
  (rules term rule-id type-alist abbreviations wrld ens state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> rules) state)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (unify-ans unify-subst)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> rule-id)
               (let ((rune (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription (car rules) <span class="keyword">:rune</span>)))
                 (if (symbolp rule-id)
                   (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> rule-id (base-symbol rune))
                   (equal rule-id rune)))) (one-way-unify (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription (car rules) <span class="keyword">:term</span>)
                term))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (unify-ans (<a class="sym-link local-def" href="#def-show-type-prescription-rule" data-sym="SHOW-TYPE-PRESCRIPTION-RULE" title="(defun show-type-prescription-rule
       (rule unify-subst type-alist abbreviations wrld ens state)
  (let ((rune (access type-prescription rule :rune))
        (nume (access type-prescription rule :nume))
        (hyps (access type-prescription rule :hyps)))
...">show-type-prescription-rule</a> (car rules)
                unify-subst
                type-alist
                abbreviations
                wrld
                ens
                state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
        (<a class="sym-link local-def" href="#def-show-type-prescription-rules1" data-sym="SHOW-TYPE-PRESCRIPTION-RULES1" title="(defun show-type-prescription-rules1
       (rules term rule-id type-alist abbreviations wrld ens state)
  (cond ((endp rules) state)
        (t
         (pprogn
...">show-type-prescription-rules1</a> (cdr rules)
          term
          rule-id
          type-alist
          abbreviations
          wrld
          ens
          state)))))</pre>
  </div>

<div class="form-block function" id="def-show-type-prescription-rules" data-defines="SHOW-TYPE-PRESCRIPTION-RULES" data-references="CONS,LIST,TYPE-PRESCRIPTIONS,QUOTE,GETPROPC,SHOW-TYPE-PRESCRIPTION-RULES1,T,STANDARD-CO,FMS,IGNORE,DECLARE,TTREE,HYPS-TYPE-ALIST,FLG,MV-LET,W,WRLD,LET,FFN-SYMB,FLAMBDAP,FQUOTEP,NOT,NVARIABLEP,AND,COND,STATE,ENS,ALL-HYPS,ABBREVIATIONS,RULE-ID,TERM,DEFUN" data-used-by="PL2-FN" data-part-name="SHOW-TYPE-PRESCRIPTION-RULES" data-part-args="STATE,ENS,ALL-HYPS,ABBREVIATIONS,RULE-ID,TERM" data-part-body="CONS,LIST,ABBREVIATIONS,RULE-ID,TYPE-PRESCRIPTIONS,QUOTE,GETPROPC,SHOW-TYPE-PRESCRIPTION-RULES1,T,STANDARD-CO,FMS,IGNORE,DECLARE,ENS,ALL-HYPS,TTREE,HYPS-TYPE-ALIST,FLG,MV-LET,STATE,W,WRLD,LET,FFN-SYMB,FLAMBDAP,FQUOTEP,NOT,TERM,NVARIABLEP,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-TYPE-PRESCRIPTION-RULES">show-type-prescription-rules</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-show-type-prescription-rules" data-sym="SHOW-TYPE-PRESCRIPTION-RULES" title="(defun show-type-prescription-rules
       (term rule-id abbreviations all-hyps ens state)
  (cond
   ((and (nvariablep term) (not (fquotep term))
         (not (flambdap (ffn-symb term))))
...">show-type-prescription-rules</a>
  (term rule-id abbreviations all-hyps ens state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-nvariablep" data-sym="NVARIABLEP">nvariablep</a> term)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term))
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)))) (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg <a class="sym-link local-def" href="#def-hyps-type-alist" data-sym="HYPS-TYPE-ALIST" title="(defun hyps-type-alist (assumptions ens wrld state)
  (forward-chain-top &#39;show-rewrites
                     (dumb-negate-lit-lst (expand-assumptions assumptions)) nil
                     (ok-to-force-ens ens) nil wrld ens
                     (match-free-override wrld) state))">hyps-type-alist</a> ttree)
          (<a class="sym-link local-def" href="#def-hyps-type-alist" data-sym="HYPS-TYPE-ALIST" title="(defun hyps-type-alist (assumptions ens wrld state)
  (forward-chain-top &#39;show-rewrites
                     (dumb-negate-lit-lst (expand-assumptions assumptions)) nil
                     (ok-to-force-ens ens) nil wrld ens
                     (match-free-override wrld) state))">hyps-type-alist</a> all-hyps ens wrld state)
          (declare (ignore ttree))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (flg (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"*** Contradiction in the hypotheses! ***~%The S command ~
                    should complete this goal.~|"</span>
                nil
                (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                state
                nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-show-type-prescription-rules1" data-sym="SHOW-TYPE-PRESCRIPTION-RULES1" title="(defun show-type-prescription-rules1
       (rules term rule-id type-alist abbreviations wrld ens state)
  (cond ((endp rules) state)
        (t
         (pprogn
...">show-type-prescription-rules1</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) 'type-prescriptions nil wrld)
                term
                rule-id
                <a class="sym-link local-def" href="#def-hyps-type-alist" data-sym="HYPS-TYPE-ALIST" title="(defun hyps-type-alist (assumptions ens wrld state)
  (forward-chain-top &#39;show-rewrites
                     (dumb-negate-lit-lst (expand-assumptions assumptions)) nil
                     (ok-to-force-ens ens) nil wrld ens
                     (match-free-override wrld) state))">hyps-type-alist</a>
                abbreviations
                wrld
                ens
                state))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Type-prescription rules are associated with function symbols ~
               (other than IF).  The current term, ~x0, is therefore not ~
               suitable for listing associated type-prescription rules.~|"</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 term))
        (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
        state
        nil))))</pre>
  </div>

<div class="form-block function" id="def-pl2-fn" data-defines="PL2-FN" data-references="VALUE,SHOW-TYPE-PRESCRIPTION-RULES,SHOW-LINEARS,SHOW-META-LEMMAS,SHOW-REWRITES,SHOW-REWRITES-LINEARS-FN,STANDARD-CO,UNTRANSLATE,CONS,LIST,FMS,PPROGN,QUOTE,HARD,OTHERWISE,PL2,MSG,PL,CASE,REMOVE-GUARD-HOLDERS,MV,FFN-SYMB,FLAMBDAP,VARIABLEP,TERM1,FLG,MV-LET,SOFT,ER,CAR,KEYWORDP,CONSP,AND,SYMBOLP,OR,NOT,COND,T,TRANSLATE,TERM,ER-LET*,W,WRLD,ENS-MAYBE-BRR,ENS,LET,STATE,CALLER,RULE-ID,FORM,DEFUN" data-used-by="PL2,PL-FN" data-part-name="PL2-FN" data-part-args="STATE,CALLER,RULE-ID,FORM" data-part-body="VALUE,SHOW-TYPE-PRESCRIPTION-RULES,SHOW-LINEARS,SHOW-META-LEMMAS,SHOW-REWRITES,SHOW-REWRITES-LINEARS-FN,STANDARD-CO,UNTRANSLATE,CONS,LIST,FMS,PPROGN,PL2-FN,QUOTE,HARD,OTHERWISE,PL2,MSG,PL,CASE,REMOVE-GUARD-HOLDERS,MV,FFN-SYMB,FLAMBDAP,VARIABLEP,TERM1,FLG,MV-LET,SOFT,ER,CAR,KEYWORDP,CONSP,AND,RULE-ID,SYMBOLP,OR,NOT,COND,CALLER,T,FORM,TRANSLATE,TERM,ER-LET*,W,WRLD,STATE,ENS-MAYBE-BRR,ENS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PL2-FN">pl2-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pl2-fn" data-sym="PL2-FN" title="(defun pl2-fn (form rule-id caller state)
  (let ((ens (ens-maybe-brr state)) (wrld (w state)))
    (er-let* ((term (translate form t t nil caller wrld state)))
             (cond
              ((not
...">pl2-fn</a>
  (form rule-id caller state)
  (let ((ens (<a class="sym-link system" href="history-management.html#def-ens-maybe-brr" data-sym="ENS-MAYBE-BRR">ens-maybe-brr</a> state)) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((term (translate form <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil caller wrld state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (symbolp rule-id)
             (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp rule-id) (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car rule-id))))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            caller
            <span class="string">"The rule-id supplied to ~x0 must be a symbol or a rune, but ~x1 ~
             is neither.  See :DOC ~x0."</span>
            caller
            rule-id))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg term1)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (remove-guard-holders term wrld)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil term)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term1) (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term1))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  caller
                  <span class="string">"~@0 must represent a term that is not a variable or a ~
                        LET (or LAMBDA application).  But ~x1 does not meet ~
                        this requirement."</span>
                  (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> caller
                    (<a class="sym-link local-def" href="#def-pl" data-sym="PL" title="(defmacro pl (name) (list &#39;pl-fn name &#39;state))">pl</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"A non-symbol argument of ~x0"</span> caller))
                    (<a class="sym-link local-def" href="#def-pl2" data-sym="PL2" title="(defmacro pl2 (form rule-id) (list &#39;pl2-fn form rule-id &#39;&#39;pl2 &#39;state))">pl2</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The first argument of ~x0"</span> caller))
                    (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                        '<a class="sym-link local-def" href="#def-pl2-fn" data-sym="PL2-FN" title="(defun pl2-fn (form rule-id caller state)
  (let ((ens (ens-maybe-brr state)) (wrld (w state)))
    (er-let* ((term (translate form t t nil caller wrld state)))
             (cond
              ((not
...">pl2-fn</a>
                        <span class="string">"Implementation error: Unexpected case! ~
                                       ~ Please contact the ACL2 implementors."</span>)))
                  form))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((term term1))
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (flg (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"+++++++++~%**NOTE**:~%Instead showing ~
                                       rules for the following term, which is ~
                                       much more likely to be encountered ~
                                       during proofs:~|~%  ~y0+++++++++~%"</span>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (untranslate term1 nil wrld)))
                          (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                          state
                          nil))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                    (<a class="sym-link local-def" href="#def-show-rewrites-linears-fn" data-sym="SHOW-REWRITES-LINEARS-FN" title="(defun show-rewrites-linears-fn
       (caller rule-id enabled-only-flg ens current-term abbreviations
        term-id-iff all-hyps geneqv pl-p state)
  (let ((name (and (symbolp rule-id) rule-id))
        (index (and (integerp rule-id) (&lt; 0 rule-id) rule-id))
...">show-rewrites-linears-fn</a> 'show-rewrites
                      rule-id
                      nil
                      ens
                      term
                      nil
                      nil
                      nil
                      <span class="keyword">:none</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      state)
                    (<a class="sym-link local-def" href="#def-show-meta-lemmas" data-sym="SHOW-META-LEMMAS" title="(defun show-meta-lemmas (term rule-id ens state)
  (cond
   ((and (nvariablep term) (not (fquotep term))
         (not (flambdap (ffn-symb term))))
    (let ((wrld (w state)))
...">show-meta-lemmas</a> term rule-id ens state)
                    (<a class="sym-link local-def" href="#def-show-rewrites-linears-fn" data-sym="SHOW-REWRITES-LINEARS-FN" title="(defun show-rewrites-linears-fn
       (caller rule-id enabled-only-flg ens current-term abbreviations
        term-id-iff all-hyps geneqv pl-p state)
  (let ((name (and (symbolp rule-id) rule-id))
        (index (and (integerp rule-id) (&lt; 0 rule-id) rule-id))
...">show-rewrites-linears-fn</a> 'show-linears
                      rule-id
                      nil
                      ens
                      term
                      nil
                      nil
                      nil
                      <span class="keyword">:none</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      state)
                    (<a class="sym-link local-def" href="#def-show-type-prescription-rules" data-sym="SHOW-TYPE-PRESCRIPTION-RULES" title="(defun show-type-prescription-rules
       (term rule-id abbreviations all-hyps ens state)
  (cond
   ((and (nvariablep term) (not (fquotep term))
         (not (flambdap (ffn-symb term))))
...">show-type-prescription-rules</a> term
                      rule-id
                      nil
                      nil
                      ens
                      state)
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))))))))))</pre>
  </div>

<div class="form-block function" id="def-pl-fn" data-defines="PL-FN" data-references="PL2-FN,MSG,MACRO-BODY,PL,SOFT,ER,INDUCTION-RULES,INFO-FOR-INDUCTION-RULES,ELIMINATE-DESTRUCTORS-RULES,INFO-FOR-ELIMINATE-DESTRUCTORS-RULES,FORWARD-CHAINING-RULES,INFO-FOR-FORWARD-CHAINING-RULES,TYPE-PRESCRIPTIONS,INFO-FOR-TYPE-PRESCRIPTIONS,LINEAR-LEMMAS,INFO-FOR-LINEAR-LEMMAS,LEMMAS,GETPROPC,APPEND,FUNCTION-SYMBOLP,STANDARD-CO,T,REWRITE-QUOTED-CONSTANT-RULES,GLOBAL-VAL,INFO-FOR-LEMMAS,PRINT-INFO-FOR-RULES,QUOTE,EQ,MACRO-ALIASES,DEREF-MACRO-NAME,NAME,ENS-MAYBE-BRR,ENS,W,WRLD,LET*,SYMBOLP,COND,STATE,NAME0,DEFUN" data-used-by="PL" data-part-name="PL-FN" data-part-args="STATE,NAME0" data-part-body="PL2-FN,MSG,MACRO-BODY,PL,SOFT,ER,INDUCTION-RULES,INFO-FOR-INDUCTION-RULES,ELIMINATE-DESTRUCTORS-RULES,INFO-FOR-ELIMINATE-DESTRUCTORS-RULES,FORWARD-CHAINING-RULES,INFO-FOR-FORWARD-CHAINING-RULES,TYPE-PRESCRIPTIONS,INFO-FOR-TYPE-PRESCRIPTIONS,LINEAR-LEMMAS,INFO-FOR-LINEAR-LEMMAS,LEMMAS,GETPROPC,APPEND,FUNCTION-SYMBOLP,STANDARD-CO,T,REWRITE-QUOTED-CONSTANT-RULES,GLOBAL-VAL,INFO-FOR-LEMMAS,PRINT-INFO-FOR-RULES,QUOTE,EQ,MACRO-ALIASES,DEREF-MACRO-NAME,NAME,ENS-MAYBE-BRR,ENS,STATE,W,WRLD,LET*,NAME0,SYMBOLP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PL-FN">pl-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pl-fn" data-sym="PL-FN" title="(defun pl-fn (name0 state)
  (cond
   ((symbolp name0)
    (let* ((wrld (w state))
           (ens (ens-maybe-brr state))
...">pl-fn</a>
  (name0 state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp name0) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (ens (<a class="sym-link system" href="history-management.html#def-ens-maybe-brr" data-sym="ENS-MAYBE-BRR">ens-maybe-brr</a> state))
          (name (<a class="sym-link system" href="axioms.html#def-deref-macro-name" data-sym="DEREF-MACRO-NAME">deref-macro-name</a> name0 (<a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> wrld))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'quote) (<a class="sym-link system" href="defthm.html#def-print-info-for-rules" data-sym="PRINT-INFO-FOR-RULES">print-info-for-rules</a> (<a class="sym-link system" href="defthm.html#def-info-for-lemmas" data-sym="INFO-FOR-LEMMAS">info-for-lemmas</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'rewrite-quoted-constant-rules wrld)
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                ens
                wrld)
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state))
          ((<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> name wrld) (<a class="sym-link system" href="defthm.html#def-print-info-for-rules" data-sym="PRINT-INFO-FOR-RULES">print-info-for-rules</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="defthm.html#def-info-for-lemmas" data-sym="INFO-FOR-LEMMAS">info-for-lemmas</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'lemmas nil wrld)
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  ens
                  wrld)
                (<a class="sym-link system" href="defthm.html#def-info-for-linear-lemmas" data-sym="INFO-FOR-LINEAR-LEMMAS">info-for-linear-lemmas</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'linear-lemmas nil wrld)
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  ens
                  wrld)
                (<a class="sym-link system" href="defthm.html#def-info-for-type-prescriptions" data-sym="INFO-FOR-TYPE-PRESCRIPTIONS">info-for-type-prescriptions</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'type-prescriptions nil wrld)
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  ens
                  wrld)
                (<a class="sym-link system" href="defthm.html#def-info-for-forward-chaining-rules" data-sym="INFO-FOR-FORWARD-CHAINING-RULES">info-for-forward-chaining-rules</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'forward-chaining-rules nil wrld)
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  ens
                  wrld)
                (<a class="sym-link system" href="defthm.html#def-info-for-eliminate-destructors-rules" data-sym="INFO-FOR-ELIMINATE-DESTRUCTORS-RULES">info-for-eliminate-destructors-rules</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'eliminate-destructors-rules nil wrld)
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  ens
                  wrld)
                (<a class="sym-link system" href="defthm.html#def-info-for-induction-rules" data-sym="INFO-FOR-INDUCTION-RULES">info-for-induction-rules</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'induction-rules nil wrld)
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  ens
                  wrld))
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              '<a class="sym-link local-def" href="#def-pl" data-sym="PL" title="(defmacro pl (name) (list &#39;pl-fn name &#39;state))">pl</a>
              <span class="string">"If the argument to PL is a symbol, then it must be a function ~
               symbol in the current world, the symbol QUOTE, or else a macro ~
               that is associated with a function symbol (see :DOC ~
               add-macro-alias).~@0"</span>
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name0 'macro-body) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Since ~x0 is a macro without such association, ~
                      consider applying PL to a call (~x0 ...); see :DOC pl."</span>
                    name0))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>)))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-pl2-fn" data-sym="PL2-FN" title="(defun pl2-fn (form rule-id caller state)
  (let ((ens (ens-maybe-brr state)) (wrld (w state)))
    (er-let* ((term (translate form t t nil caller wrld state)))
             (cond
              ((not
...">pl2-fn</a> name0 nil '<a class="sym-link local-def" href="#def-pl" data-sym="PL" title="(defmacro pl (name) (list &#39;pl-fn name &#39;state))">pl</a> state))))</pre>
  </div>

<div class="form-block macro" id="def-pl" data-defines="PL" data-references="STATE,PL-FN,QUOTE,LIST,NAME,DEFMACRO" data-used-by="PL-FN,PL2-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PL">pl</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-pl" data-sym="PL" title="(defmacro pl (name) (list &#39;pl-fn name &#39;state))">pl</a> (name) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-pl-fn" data-sym="PL-FN" title="(defun pl-fn (name0 state)
  (cond
   ((symbolp name0)
    (let* ((wrld (w state))
           (ens (ens-maybe-brr state))
...">pl-fn</a> name 'state))</pre>
  </div>

<div class="form-block macro" id="def-pl2" data-defines="PL2" data-references="STATE,PL2-FN,QUOTE,LIST,RULE-ID,FORM,DEFMACRO" data-used-by="PL2-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PL2">pl2</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-pl2" data-sym="PL2" title="(defmacro pl2 (form rule-id) (list &#39;pl2-fn form rule-id &#39;&#39;pl2 &#39;state))">pl2</a>
  (form rule-id)
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-pl2-fn" data-sym="PL2-FN" title="(defun pl2-fn (form rule-id caller state)
  (let ((ens (ens-maybe-brr state)) (wrld (w state)))
    (er-let* ((term (translate form t t nil caller wrld state)))
             (cond
              ((not
...">pl2-fn</a> form rule-id ''<a class="sym-link local-def" href="#def-pl2" data-sym="PL2" title="(defmacro pl2 (form rule-id) (list &#39;pl2-fn form rule-id &#39;&#39;pl2 &#39;state))">pl2</a> 'state))</pre>
  </div>

<div class="form-block function" id="def-acl2-defaults-table-local-ctx-p" data-defines="ACL2-DEFAULTS-TABLE-LOCAL-CTX-P" data-references="EMBEDDED-EVENT-LST,IN-ENCAPSULATEP,CERTIFY-BOOK-INFO,F-GET-GLOBAL,INCLUDE-BOOK-PATH,QUOTE,GLOBAL-VAL,OR,W,WRLD,LET,STATE,DEFUN" data-part-name="ACL2-DEFAULTS-TABLE-LOCAL-CTX-P" data-part-args="STATE" data-part-body="EMBEDDED-EVENT-LST,IN-ENCAPSULATEP,CERTIFY-BOOK-INFO,F-GET-GLOBAL,INCLUDE-BOOK-PATH,QUOTE,GLOBAL-VAL,OR,STATE,W,WRLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2-DEFAULTS-TABLE-LOCAL-CTX-P">acl2-defaults-table-local-ctx-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-acl2-defaults-table-local-ctx-p" data-sym="ACL2-DEFAULTS-TABLE-LOCAL-CTX-P" title="(defun acl2-defaults-table-local-ctx-p (state)
  (let ((wrld (w state)))
    (or (global-val &#39;include-book-path wrld)
        (f-get-global &#39;certify-book-info state)
        (in-encapsulatep (global-val &#39;embedded-event-lst wrld) nil))))">acl2-defaults-table-local-ctx-p</a>
  (state)
  (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-path wrld)
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'certify-book-info state)
      (<a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'embedded-event-lst wrld) nil))))</pre>
  </div>

<div class="form-block function" id="def-change-include-book-dir" data-defines="CHANGE-INCLUDE-BOOK-DIR" data-references="TABLE,KWOTE,TABLE-FN,VALUE,F-PUT-GLOBAL,PPROGN,ER-PROGN,REMOVE1-ASSOC-EQ,ACONS,NEW,OTHER-DELETE,OTHER-ADD,OR,STOP-REDUNDANT-EVENT,*DIRECTORY-SEPARATOR-STRING*,OS,ABSOLUTE-PATHNAME-STRING-P,ALT-PAIR,OLD-PAIR,LET,ACL2-DEFAULTS-TABLE,ASSOC-EQ,CDR,INCLUDE-BOOK-DIR!-TABLE,TABLE-ALIST,RAW-INCLUDE-BOOK-DIR-ALIST,RAW-INCLUDE-BOOK-DIR!-ALIST,F-GET-GLOBAL,MV,ALT,OLD,MV-LET,MODIFYING-INCLUDE-BOOK-DIR-ALIST,@,SUMMARY,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,EQUAL,RAW-INCLUDE-BOOK-DIR-P,RAW-P,PROJECT-DIR-ALIST,PROJECT-DIR-LOOKUP,FNAME,W,WRLD,CBD,EXTEND-PATHNAME,MAYBE-ADD-SEPARATOR,STRINGP,KEYWORDP,T,SOFT,ER,NULL,DELETE-INCLUDE-BOOK-DIR,ADD-INCLUDE-BOOK-DIR,NOT,COND,SYSFILE-TO-FILENAME,AND,DIR,DELETE-INCLUDE-BOOK-DIR!,ADD-INCLUDE-BOOK-DIR!,QUOTE,MEMBER-EQ,BANG-P,LIST,MSG,CONS,IF,CTX,LET*,STATE-P,XARGS,DECLARE,STATE,CALLER,DIR0,KEYWORD,DEFUN" data-part-name="CHANGE-INCLUDE-BOOK-DIR" data-part-args="STATE,CALLER,DIR0,KEYWORD" data-part-declare="STATE,STATE-P,XARGS,DECLARE" data-part-body="TABLE,KWOTE,TABLE-FN,VALUE,F-PUT-GLOBAL,PPROGN,ER-PROGN,REMOVE1-ASSOC-EQ,ACONS,NEW,OTHER-DELETE,OTHER-ADD,OR,STOP-REDUNDANT-EVENT,*DIRECTORY-SEPARATOR-STRING*,OS,ABSOLUTE-PATHNAME-STRING-P,ALT-PAIR,OLD-PAIR,LET,ACL2-DEFAULTS-TABLE,ASSOC-EQ,CDR,INCLUDE-BOOK-DIR!-TABLE,TABLE-ALIST,RAW-INCLUDE-BOOK-DIR-ALIST,RAW-INCLUDE-BOOK-DIR!-ALIST,F-GET-GLOBAL,MV,ALT,OLD,MV-LET,MODIFYING-INCLUDE-BOOK-DIR-ALIST,@,SUMMARY,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,EQUAL,RAW-INCLUDE-BOOK-DIR-P,RAW-P,PROJECT-DIR-ALIST,PROJECT-DIR-LOOKUP,FNAME,W,WRLD,CBD,EXTEND-PATHNAME,MAYBE-ADD-SEPARATOR,STRINGP,KEYWORDP,T,SOFT,ER,NULL,DELETE-INCLUDE-BOOK-DIR,ADD-INCLUDE-BOOK-DIR,NOT,COND,STATE,SYSFILE-TO-FILENAME,AND,DIR,DELETE-INCLUDE-BOOK-DIR!,ADD-INCLUDE-BOOK-DIR!,QUOTE,MEMBER-EQ,BANG-P,LIST,MSG,KEYWORD,CALLER,CONS,DIR0,IF,CTX,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHANGE-INCLUDE-BOOK-DIR">change-include-book-dir</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-change-include-book-dir" data-sym="CHANGE-INCLUDE-BOOK-DIR" title="(defun change-include-book-dir (keyword dir0 caller state)
  (declare (xargs :guard (state-p state) :mode :program))
  (let* ((ctx
          (if dir0
              (cons caller keyword)
...">change-include-book-dir</a>
  (keyword dir0 caller state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state) <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ctx (if dir0
         (cons caller keyword)
         (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> caller keyword)))) (bang-p (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> caller
          '(<a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a> <a class="sym-link system" href="axioms.html#def-delete-include-book-dir_21" data-sym="DELETE-INCLUDE-BOOK-DIR!">delete-include-book-dir!</a>)))
      (dir (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dir0 (<a class="sym-link local-def" href="#def-sysfile-to-filename" data-sym="SYSFILE-TO-FILENAME" title="(defun sysfile-to-filename (x state)
  (cond
   ((sysfile-p x) (extend-pathname (sysfile-key x) (sysfile-filename x) state))
   (t x)))">sysfile-to-filename</a> dir0 state))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (if dir
           (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> caller
             '(<a class="sym-link system" href="axioms.html#def-add-include-book-dir" data-sym="ADD-INCLUDE-BOOK-DIR">add-include-book-dir</a> <a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a>))
           (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> caller
             '(<a class="sym-link system" href="axioms.html#def-delete-include-book-dir" data-sym="DELETE-INCLUDE-BOOK-DIR">delete-include-book-dir</a> <a class="sym-link system" href="axioms.html#def-delete-include-book-dir_21" data-sym="DELETE-INCLUDE-BOOK-DIR!">delete-include-book-dir!</a>)))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> dir)
             (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> caller
               '(<a class="sym-link system" href="axioms.html#def-add-include-book-dir" data-sym="ADD-INCLUDE-BOOK-DIR">add-include-book-dir</a> <a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"It is illegal to call ~x0 with a directory argument of nil."</span>
              caller))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Internal error: Illegal call of change-include-book-dir: ~
                  ~x0 is ~x1 but ~x2 is ~x3 (expected ~v4)."</span>
              'dir
              dir
              'caller
              caller
              (if dir
                '(<a class="sym-link system" href="axioms.html#def-add-include-book-dir" data-sym="ADD-INCLUDE-BOOK-DIR">add-include-book-dir</a> <a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a>)
                '(<a class="sym-link system" href="axioms.html#def-delete-include-book-dir" data-sym="DELETE-INCLUDE-BOOK-DIR">delete-include-book-dir</a> <a class="sym-link system" href="axioms.html#def-delete-include-book-dir_21" data-sym="DELETE-INCLUDE-BOOK-DIR!">delete-include-book-dir!</a>))))))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> keyword)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The first argument of ~x0 must be a keyword other than ~
                :SYSTEM, but ~x1 is not."</span>
          caller
          keyword))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dir (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (stringp dir))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The second argument of ~x0 must be a string or ~
                of the form (:keyword . string), but ~x1 is not."</span>
          caller
          dir))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((dir (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dir
               (<a class="sym-link local-def" href="#def-maybe-add-separator" data-sym="MAYBE-ADD-SEPARATOR" title="(defun maybe-add-separator (str)
  (if (and (not (equal str &quot;&quot;))
           (eql (char str (1- (length str))) *directory-separator*))
      str
      (string-append str *directory-separator-string*)))">maybe-add-separator</a> (<a class="sym-link local-def" href="#def-extend-pathname" data-sym="EXTEND-PATHNAME" title="(defun extend-pathname (dir0 file-name state)
  (extend-pathname+ dir0 file-name nil state))">extend-pathname</a> (<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>) dir state)))) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
            (fname (<a class="sym-link system" href="basis-a.html#def-project-dir-lookup" data-sym="PROJECT-DIR-LOOKUP">project-dir-lookup</a> keyword (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> wrld) nil))
            (raw-p (<a class="sym-link system" href="axioms.html#def-raw-include-book-dir-p" data-sym="RAW-INCLUDE-BOOK-DIR-P">raw-include-book-dir-p</a> state)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> fname (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal fname dir))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"Illegal call of ~x0: it associates ~x1 with ~x2, yet ~x1 ~
                    is already bound to a different value, ~x3, in the ~
                    project-dir-alist (see :DOC project-dir-alist)."</span>
                caller
                keyword
                dir
                fname))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (cons 'summary (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))) (modifying-include-book-dir-alist <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (old alt)
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (raw-p (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bang-p (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-include-book-dir!-alist state)
                            (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-include-book-dir-alist state)))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-include-book-dir-alist state)
                            (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-include-book-dir!-alist state)))))
                    (bang-p (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'include-book-dir!-table wrld)
                        (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:include-book-dir-alist</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld)))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:include-book-dir-alist</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld)))
                        (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'include-book-dir!-table wrld))))
                  (let ((old-pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> keyword old)) (alt-pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> keyword alt)))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dir (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-absolute-pathname-string-p" data-sym="ABSOLUTE-PATHNAME-STRING-P">absolute-pathname-string-p</a> dir <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> wrld)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"The second argument of ~x0 must represent a ~
                           directory, in particular ending with character ~
                           &#39;~s1&#39;, but ~x2 does not."</span>
                          caller
                          <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator-string_2A" data-sym="*DIRECTORY-SEPARATOR-STRING*">*directory-separator-string*</a>
                          dir))
                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dir (equal (cdr old-pair) dir)) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state))
                      ((if dir
                         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> old-pair alt-pair)
                         alt-pair) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (other-add other-delete)
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bang-p (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> '<a class="sym-link system" href="axioms.html#def-add-include-book-dir" data-sym="ADD-INCLUDE-BOOK-DIR">add-include-book-dir</a> '<a class="sym-link system" href="axioms.html#def-delete-include-book-dir" data-sym="DELETE-INCLUDE-BOOK-DIR">delete-include-book-dir</a>))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> '<a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a> '<a class="sym-link system" href="axioms.html#def-delete-include-book-dir_21" data-sym="DELETE-INCLUDE-BOOK-DIR!">delete-include-book-dir!</a>)))
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> dir) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"The keyword ~x0 was previously bound to ~
                                    directory ~x1 by a call of ~x2.  Perhaps ~
                                    you intended to call ~x3 instead of ~x4."</span>
                                keyword
                                (cdr alt-pair)
                                other-add
                                other-delete
                                caller))
                            (alt-pair (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"The keyword ~x0 was previously bound to ~
                                    directory ~x1 by a call of ~x2.  To bind ~
                                    ~x0 with ~x3 first evaluate ~x4."</span>
                                keyword
                                (cdr alt-pair)
                                other-add
                                caller
                                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> other-delete keyword)))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"The keyword ~x0 was previously bound to ~
                                      directory ~x1.  If you intend to ~
                                      override the old setting with directory ~
                                      ~x2, first evaluate ~x3."</span>
                                keyword
                                (cdr old-pair)
                                dir
                                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bang-p '<a class="sym-link system" href="axioms.html#def-delete-include-book-dir_21" data-sym="DELETE-INCLUDE-BOOK-DIR!">delete-include-book-dir!</a>)
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> '<a class="sym-link system" href="axioms.html#def-delete-include-book-dir" data-sym="DELETE-INCLUDE-BOOK-DIR">delete-include-book-dir</a>))
                                  keyword))))))
                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> dir) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr old-pair))) (<a class="sym-link system" href="history-management.html#def-stop-redundant-event" data-sym="STOP-REDUNDANT-EVENT">stop-redundant-event</a> ctx state))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((new (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (dir (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> keyword dir old))
                               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> keyword old)))))
                          (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (raw-p (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bang-p (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'raw-include-book-dir!-alist new state))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'raw-include-book-dir-alist new state)))
                                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
                              ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> bang-p) (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'acl2-defaults-table
                                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:include-book-dir-alist</span> (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> new))
                                  state
                                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a>
                                    'acl2-defaults-table
                                    '<span class="keyword">:include-book-dir-alist</span>
                                    (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> new))))
                              (dir (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'include-book-dir!-table
                                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> keyword (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> dir))
                                  state
                                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> 'include-book-dir!-table keyword (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> dir))))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'include-book-dir!-table
                                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> nil (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> new) <span class="keyword">:clear</span>)
                                  state
                                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a>
                                    'include-book-dir!-table
                                    nil
                                    (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> new)
                                    <span class="keyword">:clear</span>))))
                            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> new)))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-add-custom-keyword-hint-fn" data-defines="ADD-CUSTOM-KEYWORD-HINT-FN" data-references="TABLE,KWOTE,TABLE-FN,ER-PROGN,LIST,@,SUMMARY,CONS,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,T,SET-DIFFERENCE-EQ,REVERSE,ALL-VARS,SUBSETP-EQ,CUSTOM-KEYWORDS-TABLE,TABLE-ALIST,ASSOC-EQ,*HINT-KEYWORDS*,MEMBER-EQ,SOFT,ER,KEYWORDP,NOT,COND,*ERROR-TRIPLE-SIG*,TRANSLATE,TERM2,TRANSLATE-SIMPLE-OR-ERROR-TRIPLE,TERM1,ER-LET*,ALLOWED-CVARS,PSPV,HIST,STABLE-UNDER-SIMPLIFICATIONP,CLAUSE,ID,KEYWORD-ALIST,VAL,ALLOWED-GVARS,ADD-CUSTOM-KEYWORD-HINT,QUOTE,CTX,W,WORLD,LET,STATE-P,XARGS,DECLARE,STATE,UTERM2,UTERM1,KEY,DEFUN" data-part-name="ADD-CUSTOM-KEYWORD-HINT-FN" data-part-args="STATE,UTERM2,UTERM1,KEY" data-part-declare="STATE,STATE-P,XARGS,DECLARE" data-part-body="TABLE,KWOTE,TABLE-FN,ER-PROGN,LIST,@,SUMMARY,CONS,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,T,SET-DIFFERENCE-EQ,REVERSE,ALL-VARS,SUBSETP-EQ,CUSTOM-KEYWORDS-TABLE,TABLE-ALIST,ASSOC-EQ,*HINT-KEYWORDS*,MEMBER-EQ,SOFT,ER,KEY,KEYWORDP,NOT,COND,*ERROR-TRIPLE-SIG*,UTERM2,TRANSLATE,TERM2,UTERM1,TRANSLATE-SIMPLE-OR-ERROR-TRIPLE,TERM1,ER-LET*,ALLOWED-CVARS,PSPV,HIST,STABLE-UNDER-SIMPLIFICATIONP,CLAUSE,ID,KEYWORD-ALIST,VAL,ALLOWED-GVARS,ADD-CUSTOM-KEYWORD-HINT,QUOTE,CTX,STATE,W,WORLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADD-CUSTOM-KEYWORD-HINT-FN">add-custom-keyword-hint-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-add-custom-keyword-hint-fn" data-sym="ADD-CUSTOM-KEYWORD-HINT-FN" title="(defun add-custom-keyword-hint-fn (key uterm1 uterm2 state)
  (declare (xargs :guard (state-p state) :mode :program))
  (let ((world (w state))
        (ctx &#39;add-custom-keyword-hint)
        (allowed-gvars
...">add-custom-keyword-hint-fn</a>
  (key uterm1 uterm2 state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state) <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (let ((world (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (ctx '<a class="sym-link system" href="axioms.html#def-add-custom-keyword-hint" data-sym="ADD-CUSTOM-KEYWORD-HINT">add-custom-keyword-hint</a>)
      (allowed-gvars '(val keyword-alist
          id
          clause
          world
          stable-under-simplificationp
          hist
          pspv
          ctx
          state))
      (allowed-cvars '(val world ctx state)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((term1 (translate-simple-or-error-triple uterm1 ctx world state)) (term2 (translate uterm2
            <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>
            nil
            '(state)
            ctx
            world
            state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> key)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The first argument of add-custom-keyword-hint must be a keyword ~
            and ~x0 is not!"</span>
            key))
        ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key <a class="sym-link system" href="axioms.html#def-_2Ahint-keywords_2A" data-sym="*HINT-KEYWORDS*">*hint-keywords*</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"It is illegal to use the name of a primitive hint, ~e.g., ~x0, as ~
            a custom keyword hint."</span>
            key))
        ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key
           (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'custom-keywords-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"It is illegal to use the name of an existing custom keyword hint, ~
            e.g., ~x0.  Use remove-custom-keyword-hint first to remove the ~
            existing custom keyword hint of that name."</span>
            key))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> term1) allowed-gvars)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The second argument of add-custom-keyword-hint must be a term ~
            whose free variables are among ~%~Y01, but you provided the term ~
            ~x2, whose variables include~%~Y31."</span>
            allowed-gvars
            nil
            uterm1
            (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> term1) allowed-gvars))))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> term2) allowed-cvars)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The :checker argument of add-custom-keyword-hint must be a term ~
            whose free variables are among ~%~Y01, but you provided the term ~
            ~x2, whose variables include~%~Y31."</span>
            allowed-cvars
            nil
            uterm2
            (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> term2) allowed-cvars))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (cons 'summary (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))))
            (let ((val (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> uterm1 uterm2)))
              (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'custom-keywords-table
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> key) (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> val))
                  state
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> 'custom-keywords-table (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> key) (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> val)))
                (<a class="sym-link system" href="history-management.html#def-table-fn" data-sym="TABLE-FN">table-fn</a> 'custom-keywords-table
                  'nil
                  state
                  '(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> custom-keywords-table))))))))))</pre>
  </div>

<div class="form-block macro" id="def-reset-prehistory" data-defines="RESET-PREHISTORY" data-references="STATE,RESET-PREHISTORY-FN,LIST,T,QUOTE,MEMBER-EQ,XARGS,DECLARE,PFLG,&OPTIONAL,EVENT-FORM,&WHOLE,DEFMACRO" data-used-by="RESET-PREHISTORY-FN,PRIMORDIAL-WORLD-GLOBALS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="RESET-PREHISTORY">reset-prehistory</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-reset-prehistory" data-sym="RESET-PREHISTORY" title="(defmacro reset-prehistory (&amp;whole event-form &amp;optional pflg)
  (declare (xargs :guard (member-eq pflg (quote (t nil)))))
  (list &#39;reset-prehistory-fn (list &#39;quote pflg) &#39;state
        (list &#39;quote event-form)))">reset-prehistory</a>
  (&amp;whole event-form &amp;optional pflg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> pflg '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-reset-prehistory-fn" data-sym="RESET-PREHISTORY-FN" title="(defun reset-prehistory-fn (pflg state event-form)
  (with-ctx-summarized
   (if (and (consp event-form) (eq (car event-form) &#39;disable-ubt))
       (if (cdr event-form)
           (msg &quot;( DISABLE-UBT ...)&quot;)
...">reset-prehistory-fn</a>
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote pflg)
    'state
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))</pre>
  </div>

<div class="form-block macro" id="def-disable-ubt" data-defines="DISABLE-UBT" data-references="STATE,OR,RESET-PREHISTORY-FN,LIST,QUOTE,ARG,&OPTIONAL,EVENT-FORM,&WHOLE,DEFMACRO" data-used-by="RESET-PREHISTORY-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DISABLE-UBT">disable-ubt</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-disable-ubt" data-sym="DISABLE-UBT" title="(defmacro disable-ubt (&amp;whole event-form &amp;optional (arg &#39;:disable-ubt))
  (list &#39;reset-prehistory-fn (or arg :disable-ubt) &#39;state
        (list &#39;quote event-form)))">disable-ubt</a>
  (&amp;whole event-form &amp;optional (arg '<span class="keyword">:disable-ubt</span>))
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-reset-prehistory-fn" data-sym="RESET-PREHISTORY-FN" title="(defun reset-prehistory-fn (pflg state event-form)
  (with-ctx-summarized
   (if (and (consp event-form) (eq (car event-form) &#39;disable-ubt))
       (if (cdr event-form)
           (msg &quot;( DISABLE-UBT ...)&quot;)
...">reset-prehistory-fn</a>
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> arg <span class="keyword">:disable-ubt</span>)
    'state
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote event-form)))</pre>
  </div>

<div class="form-block function" id="def-reset-kill-ring" data-defines="RESET-KILL-RING" data-references="VALUE,MAKE-LIST,F-PUT-GLOBAL,PPROGN,UNDONE-WORLDS-KILL-RING,QUOTE,F-GET-GLOBAL,LENGTH,IF,LET,NATP,T,EQ,OR,XARGS,DECLARE,STATE,N,DEFUN" data-used-by="RESET-PREHISTORY-FN" data-part-name="RESET-KILL-RING" data-part-args="STATE,N" data-part-declare="NATP,T,N,EQ,OR,XARGS,DECLARE" data-part-body="VALUE,MAKE-LIST,F-PUT-GLOBAL,PPROGN,STATE,UNDONE-WORLDS-KILL-RING,QUOTE,F-GET-GLOBAL,LENGTH,T,EQ,IF,N,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RESET-KILL-RING">reset-kill-ring</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-reset-kill-ring" data-sym="RESET-KILL-RING" title="(defun reset-kill-ring (n state)
  (declare (xargs :guard (or (eq n t) (natp n))))
  (let ((n
         (if (eq n t)
             (length (f-get-global &#39;undone-worlds-kill-ring state))
...">reset-kill-ring</a>
  (n state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> n <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> n))))
  (let ((n (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> n <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
         (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'undone-worlds-kill-ring state))
         n)))
    (if n
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'undone-worlds-kill-ring (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> n) state)
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'undone-worlds-kill-ring state)))))</pre>
  </div>

<div class="form-block function" id="def-reset-prehistory-fn" data-defines="RESET-PREHISTORY-FN" data-references="RESET-KILL-RING,ER-PROGN,GLOBAL-SET,INSTALL-EVENT,VAL,ER-LET*,CONS,CHANGE,NEW-INFO,COMMAND-NUMBER-BASELINE-INFO,GLOBAL-VAL,OLD-INFO,NEXT-ABSOLUTE-COMMAND-NUMBER,LIST,W,WRLD,LET*,VALUE,RESET-PREHISTORY,OBSERVATION,PPROGN,SKIP-RESET-PREHISTORY,INCLUDE-BOOK,LD-SKIP-PROOFSP,CERTIFY-BOOK-INFO,F-GET-GLOBAL,CTX,SOFT,ER,MSGP,T,MEMBER-EQ,OR,NOT,COND,MSG,CDR,DISABLE-UBT,QUOTE,CAR,EQ,CONSP,AND,IF,WITH-CTX-SUMMARIZED,EVENT-FORM,STATE,PFLG,DEFUN" data-used-by="DISABLE-UBT,RESET-PREHISTORY,PRIMORDIAL-WORLD-GLOBALS" data-part-name="RESET-PREHISTORY-FN" data-part-args="EVENT-FORM,STATE,PFLG" data-part-body="RESET-KILL-RING,ER-PROGN,GLOBAL-SET,INSTALL-EVENT,VAL,ER-LET*,CONS,CHANGE,NEW-INFO,COMMAND-NUMBER-BASELINE-INFO,GLOBAL-VAL,OLD-INFO,NEXT-ABSOLUTE-COMMAND-NUMBER,LIST,W,WRLD,LET*,VALUE,RESET-PREHISTORY,OBSERVATION,PPROGN,SKIP-RESET-PREHISTORY,INCLUDE-BOOK,LD-SKIP-PROOFSP,STATE,CERTIFY-BOOK-INFO,F-GET-GLOBAL,CTX,SOFT,ER,MSGP,T,MEMBER-EQ,OR,NOT,COND,PFLG,MSG,CDR,DISABLE-UBT,QUOTE,CAR,EQ,EVENT-FORM,CONSP,AND,IF,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RESET-PREHISTORY-FN">reset-prehistory-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-reset-prehistory-fn" data-sym="RESET-PREHISTORY-FN" title="(defun reset-prehistory-fn (pflg state event-form)
  (with-ctx-summarized
   (if (and (consp event-form) (eq (car event-form) &#39;disable-ubt))
       (if (cdr event-form)
           (msg &quot;( DISABLE-UBT ...)&quot;)
...">reset-prehistory-fn</a>
  (pflg state event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp event-form) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car event-form) '<a class="sym-link local-def" href="#def-disable-ubt" data-sym="DISABLE-UBT" title="(defmacro disable-ubt (&amp;whole event-form &amp;optional (arg &#39;:disable-ubt))
  (list &#39;reset-prehistory-fn (or arg :disable-ubt) &#39;state
        (list &#39;quote event-form)))">disable-ubt</a>))
      (if (cdr event-form)
        (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DISABLE-UBT ...)"</span>)
        (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DISABLE-UBT)"</span>))
      (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( RESET-PREHISTORY ~x0 ...)"</span> pflg))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> pflg '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:disable-ubt</span>)) (<a class="sym-link system" href="axioms.html#def-msgp" data-sym="MSGP">msgp</a> pflg))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The optional argument of ~x0 must be the default, which is ~
               ~x1, or an expression whose evaluation result satisfies ~x2 ~
               (see :DOC msgp).  But that argument has evaluated to ~x3."</span>
          '<a class="sym-link local-def" href="#def-disable-ubt" data-sym="DISABLE-UBT" title="(defmacro disable-ubt (&amp;whole event-form &amp;optional (arg &#39;:disable-ubt))
  (list &#39;reset-prehistory-fn (or arg :disable-ubt) &#39;state
        (list &#39;quote event-form)))">disable-ubt</a>
          <span class="keyword">:disable-ubt</span> '<a class="sym-link system" href="axioms.html#def-msgp" data-sym="MSGP">msgp</a>
          pflg))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pflg <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'certify-book-info state)
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
           (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'skip-reset-prehistory state))) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
            <span class="string">"~x0 events with pflg not equal to ~x1 ~
                                are skipped when ~@2.  See :DOC ~
                                reset-prehistory."</span>
            '<a class="sym-link local-def" href="#def-reset-prehistory" data-sym="RESET-PREHISTORY" title="(defmacro reset-prehistory (&amp;whole event-form &amp;optional pflg)
  (declare (xargs :guard (member-eq pflg (quote (t nil)))))
  (list &#39;reset-prehistory-fn (list &#39;quote pflg) &#39;state
        (list &#39;quote event-form)))">reset-prehistory</a>
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'certify-book-info state) <span class="string">"certifying books"</span>)
              ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) <span class="string">"including books or during the second pass ~
                                  of an encapsulate"</span>)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"state global &#39;skip-reset-prehistory has a ~
                                    non-nil value"</span>)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:skipped</span>)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link local-def" href="#def-reset-prehistory" data-sym="RESET-PREHISTORY" title="(defmacro reset-prehistory (&amp;whole event-form &amp;optional pflg)
  (declare (xargs :guard (member-eq pflg (quote (t nil)))))
  (list &#39;reset-prehistory-fn (list &#39;quote pflg) &#39;state
        (list &#39;quote event-form)))">reset-prehistory</a> pflg)))
            (next-absolute-command-number (next-absolute-command-number wrld))
            (old-info (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'command-number-baseline-info wrld))
            (new-info (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pflg <span class="keyword">:disable-ubt</span>) (<a class="sym-link system" href="axioms.html#def-msgp" data-sym="MSGP">msgp</a> pflg))
                (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> command-number-baseline-info
                  old-info
                  <span class="keyword">:permanent-p</span> (cons next-absolute-command-number
                    (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pflg <span class="keyword">:disable-ubt</span>)
                      nil
                      pflg)))
                (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> command-number-baseline-info
                  old-info
                  <span class="keyword">:permanent-p</span> pflg
                  <span class="keyword">:current</span> next-absolute-command-number))))
          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pflg <span class="keyword">:disable-ubt</span>) (<a class="sym-link system" href="axioms.html#def-msgp" data-sym="MSGP">msgp</a> pflg))
                   <span class="keyword">:disable-ubt</span> <span class="keyword">:new-prehistory-set</span>)
                 event-form
                 '<a class="sym-link local-def" href="#def-reset-prehistory" data-sym="RESET-PREHISTORY" title="(defmacro reset-prehistory (&amp;whole event-form &amp;optional pflg)
  (declare (xargs :guard (member-eq pflg (quote (t nil)))))
  (list &#39;reset-prehistory-fn (list &#39;quote pflg) &#39;state
        (list &#39;quote event-form)))">reset-prehistory</a>
                 <span class="number">0</span>
                 nil
                 nil
                 nil
                 ctx
                 (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'command-number-baseline-info new-info wrld)
                 state)))
            (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-reset-kill-ring" data-sym="RESET-KILL-RING" title="(defun reset-kill-ring (n state)
  (declare (xargs :guard (or (eq n t) (natp n))))
  (let ((n
         (if (eq n t)
             (length (f-get-global &#39;undone-worlds-kill-ring state))
...">reset-kill-ring</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-table-chk-commutative-msg" data-defines="MEMOIZE-TABLE-CHK-COMMUTATIVE-MSG" data-references="&,VARIABLEP,Y,X,!FN,EQUAL,CASE-MATCH,THEOREM,THM,MSG,LEN,EQL,NULL,COND,ASSOC-EQ,CDR,COMMUTATIVE,LET,SYMBOL-ALISTP,T,FORMALS,QUOTE,GETPROPC,EQ,NOT,SYMBOLP,AND,XARGS,DECLARE,WRLD,VAL,FN,STR,DEFUN" data-used-by="MEMOIZE-TABLE-CHK" data-part-name="MEMOIZE-TABLE-CHK-COMMUTATIVE-MSG" data-part-args="WRLD,VAL,FN,STR" data-part-declare="VAL,SYMBOL-ALISTP,WRLD,T,FORMALS,QUOTE,GETPROPC,EQ,NOT,FN,SYMBOLP,AND,XARGS,DECLARE" data-part-body="&,EQ,VARIABLEP,AND,Y,X,!FN,EQUAL,CASE-MATCH,THEOREM,THM,SYMBOLP,STR,MSG,WRLD,T,FORMALS,QUOTE,FN,GETPROPC,LEN,EQL,NOT,NULL,COND,VAL,ASSOC-EQ,CDR,COMMUTATIVE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-TABLE-CHK-COMMUTATIVE-MSG">memoize-table-chk-commutative-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-table-chk-commutative-msg" data-sym="MEMOIZE-TABLE-CHK-COMMUTATIVE-MSG" title="(defun memoize-table-chk-commutative-msg (str fn val wrld)
  (declare
   (xargs :guard
    (and (symbolp fn) (not (eq (getpropc fn (quote formals) t wrld) t))
         (symbol-alistp val))))
...">memoize-table-chk-commutative-msg</a>
  (str fn val wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp fn)
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> val))))
  (let ((commutative (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:commutative</span> val))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> commutative) nil)
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)) <span class="number">2</span>)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 is not a binary function symbol, so it is illegal to ~
                 specify a non-nil value of :commutative (here, ~x2) for ~
                 memoization of this function."</span>
          str
          fn
          commutative))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp commutative)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0Attempted to memoize ~x1 with a non-symbolp value of ~
                 :commutative, ~x2."</span>
          str
          fn
          commutative))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="defthm.html#def-thm" data-sym="THM">thm</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> commutative 'theorem nil wrld)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="defthm.html#def-thm" data-sym="THM">thm</a>) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The theorem ~x1 specified for :commutative ~
                            memoization of ~x2 does not exist."</span>
                str
                commutative
                fn))
            ((<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> <a class="sym-link system" href="defthm.html#def-thm" data-sym="THM">thm</a>
               (('equal (!fn x y) (!fn y x)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> x) (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> y) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x y))) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                   (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
               (&amp; nil)) nil)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The theorem ~x1 specified for :commutative ~
                              memoization of ~x2 does not have the expected ~
                              form.  See :DOC memoize."</span>
                str
                commutative
                fn))))))))</pre>
  </div>

<div class="form-block function" id="def-non-memoizable-stobjs" data-defines="NON-MEMOIZABLE-STOBJS" data-references="T,CDR,CONS,NON-MEMOIZABLE,QUOTE,CAR,GETPROPC,ENDP,COND,WRLD,STOBJS-IN,DEFUN" data-used-by="MEMOIZE-TABLE-CHK" data-part-name="NON-MEMOIZABLE-STOBJS" data-part-args="WRLD,STOBJS-IN" data-part-body="T,CDR,NON-MEMOIZABLE-STOBJS,CONS,WRLD,NON-MEMOIZABLE,QUOTE,CAR,GETPROPC,STOBJS-IN,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NON-MEMOIZABLE-STOBJS">non-memoizable-stobjs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-non-memoizable-stobjs" data-sym="NON-MEMOIZABLE-STOBJS" title="(defun non-memoizable-stobjs (stobjs-in wrld)
  (cond ((endp stobjs-in) nil)
        ((getpropc (car stobjs-in) &#39;non-memoizable nil wrld)
         (cons (car stobjs-in) (non-memoizable-stobjs (cdr stobjs-in) wrld)))
        (t (non-memoizable-stobjs (cdr stobjs-in) wrld))))">non-memoizable-stobjs</a>
  (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>) nil)
    ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>) 'non-memoizable nil wrld) (cons (car <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)
        (<a class="sym-link local-def" href="#def-non-memoizable-stobjs" data-sym="NON-MEMOIZABLE-STOBJS" title="(defun non-memoizable-stobjs (stobjs-in wrld)
  (cond ((endp stobjs-in) nil)
        ((getpropc (car stobjs-in) &#39;non-memoizable nil wrld)
         (cons (car stobjs-in) (non-memoizable-stobjs (cdr stobjs-in) wrld)))
        (t (non-memoizable-stobjs (cdr stobjs-in) wrld))))">non-memoizable-stobjs</a> (cdr <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>) wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-non-memoizable-stobjs" data-sym="NON-MEMOIZABLE-STOBJS" title="(defun non-memoizable-stobjs (stobjs-in wrld)
  (cond ((endp stobjs-in) nil)
        ((getpropc (car stobjs-in) &#39;non-memoizable nil wrld)
         (cons (car stobjs-in) (non-memoizable-stobjs (cdr stobjs-in) wrld)))
        (t (non-memoizable-stobjs (cdr stobjs-in) wrld))))">non-memoizable-stobjs</a> (cdr <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>) wrld))))</pre>
  </div>

<div class="form-block function" id="def-filter-absstobjs" data-defines="FILTER-ABSSTOBJS" data-references="T,CONS,CDR,ABSSTOBJ-INFO,QUOTE,CAR,GETPROPC,REVERSE,MV,ENDP,COND,CONC,ABS,WRLD,LST,DEFUN" data-used-by="MEMOIZE-TABLE-CHK" data-part-name="FILTER-ABSSTOBJS" data-part-args="CONC,ABS,WRLD,LST" data-part-body="T,CONS,CDR,FILTER-ABSSTOBJS,WRLD,ABSSTOBJ-INFO,QUOTE,CAR,GETPROPC,CONC,ABS,REVERSE,MV,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FILTER-ABSSTOBJS">filter-absstobjs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-filter-absstobjs" data-sym="FILTER-ABSSTOBJS" title="(defun filter-absstobjs (lst wrld abs conc)
  (cond ((endp lst) (mv (reverse abs) (reverse conc)))
        ((getpropc (car lst) &#39;absstobj-info nil wrld)
         (filter-absstobjs (cdr lst) wrld (cons (car lst) abs) conc))
        (t (filter-absstobjs (cdr lst) wrld abs (cons (car lst) conc)))))">filter-absstobjs</a>
  (lst wrld abs conc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> abs) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> conc)))
    ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car lst) 'absstobj-info nil wrld) (<a class="sym-link local-def" href="#def-filter-absstobjs" data-sym="FILTER-ABSSTOBJS" title="(defun filter-absstobjs (lst wrld abs conc)
  (cond ((endp lst) (mv (reverse abs) (reverse conc)))
        ((getpropc (car lst) &#39;absstobj-info nil wrld)
         (filter-absstobjs (cdr lst) wrld (cons (car lst) abs) conc))
        (t (filter-absstobjs (cdr lst) wrld abs (cons (car lst) conc)))))">filter-absstobjs</a> (cdr lst) wrld (cons (car lst) abs) conc))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-filter-absstobjs" data-sym="FILTER-ABSSTOBJS" title="(defun filter-absstobjs (lst wrld abs conc)
  (cond ((endp lst) (mv (reverse abs) (reverse conc)))
        ((getpropc (car lst) &#39;absstobj-info nil wrld)
         (filter-absstobjs (cdr lst) wrld (cons (car lst) abs) conc))
        (t (filter-absstobjs (cdr lst) wrld abs (cons (car lst) conc)))))">filter-absstobjs</a> (cdr lst) wrld abs (cons (car lst) conc)))))</pre>
  </div>

<div class="form-block function" id="def-remove-stobjs-in-by-position" data-defines="REMOVE-STOBJS-IN-BY-POSITION" data-references="CONS,T,CDR,CAR,ENDP,COND,LENGTH,EQL,TRUE-LISTP,AND,XARGS,DECLARE,STOBJS-IN,LST,DEFUN" data-part-name="REMOVE-STOBJS-IN-BY-POSITION" data-part-args="STOBJS-IN,LST" data-part-declare="LENGTH,EQL,STOBJS-IN,LST,TRUE-LISTP,AND,XARGS,DECLARE" data-part-body="CONS,T,CDR,REMOVE-STOBJS-IN-BY-POSITION,STOBJS-IN,CAR,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-STOBJS-IN-BY-POSITION">remove-stobjs-in-by-position</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-stobjs-in-by-position" data-sym="REMOVE-STOBJS-IN-BY-POSITION" title="(defun remove-stobjs-in-by-position (lst stobjs-in)
  (declare
   (xargs :guard
    (and (true-listp lst) (true-listp stobjs-in)
         (eql (length lst) (length stobjs-in)))))
...">remove-stobjs-in-by-position</a>
  (lst <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lst)
        (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)
        (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> lst) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) nil)
    ((car <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>) (<a class="sym-link local-def" href="#def-remove-stobjs-in-by-position" data-sym="REMOVE-STOBJS-IN-BY-POSITION" title="(defun remove-stobjs-in-by-position (lst stobjs-in)
  (declare
   (xargs :guard
    (and (true-listp lst) (true-listp stobjs-in)
         (eql (length lst) (length stobjs-in)))))
...">remove-stobjs-in-by-position</a> (cdr lst) (cdr <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car lst)
        (<a class="sym-link local-def" href="#def-remove-stobjs-in-by-position" data-sym="REMOVE-STOBJS-IN-BY-POSITION" title="(defun remove-stobjs-in-by-position (lst stobjs-in)
  (declare
   (xargs :guard
    (and (true-listp lst) (true-listp stobjs-in)
         (eql (length lst) (length stobjs-in)))))
...">remove-stobjs-in-by-position</a> (cdr lst) (cdr <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>))))))</pre>
  </div>

<div class="form-block function" id="def-add-suffix-to-fn" data-defines="ADD-SUFFIX-TO-FN" data-references="ADD-SUFFIX,SYMBOL-NAME,STRING,QUOTE,CONCATENATE,INTERN,*MAIN-LISP-PACKAGE-NAME*,SYMBOL-PACKAGE-NAME,EQUAL,IF,STRINGP,SYMBOLP,AND,XARGS,DECLARE,SUFFIX,SYM,DEFUN" data-used-by="PRINT-GV1" data-part-name="ADD-SUFFIX-TO-FN" data-part-args="SUFFIX,SYM" data-part-declare="SUFFIX,STRINGP,SYM,SYMBOLP,AND,XARGS,DECLARE" data-part-body="ADD-SUFFIX,SUFFIX,SYMBOL-NAME,STRING,QUOTE,CONCATENATE,INTERN,*MAIN-LISP-PACKAGE-NAME*,SYM,SYMBOL-PACKAGE-NAME,EQUAL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADD-SUFFIX-TO-FN">add-suffix-to-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-add-suffix-to-fn" data-sym="ADD-SUFFIX-TO-FN" title="(defun add-suffix-to-fn (sym suffix)
  (declare (xargs :guard (and (symbolp sym) (stringp suffix))))
  (if (equal (symbol-package-name sym) *main-lisp-package-name*)
      (intern (concatenate &#39;string (symbol-name sym) suffix) &quot;ACL2&quot;)
      (add-suffix sym suffix)))">add-suffix-to-fn</a>
  (sym suffix)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp sym) (stringp suffix))))
  (if (equal (symbol-package-name sym) <a class="sym-link system" href="axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>)
    (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> (symbol-name sym) suffix)
      <span class="string">"ACL2"</span>)
    (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> sym suffix)))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-fsubcor-var" data-defines="FSUBCOR-VAR" data-references="CDR,CAR,CONS,ENDP,FORMS,FARGS,FSUBCOR-VAR-LST,FFN-SYMB,FCONS-TERM,T,FQUOTEP,SUBCOR-VAR1,VARIABLEP,COND,PSEUDO-TERMP,LENGTH,EQUAL,PSEUDO-TERM-LISTP,SYMBOL-LISTP,AND,XARGS,DECLARE,FORM,TERMS,VARS,DEFUN,MUTUAL-RECURSION" data-used-by="PRINT-GV-FORM" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FSUBCOR-VAR">fsubcor-var</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fsubcor-var" data-sym="FSUBCOR-VAR" title="(mutual-recursion
 (defun fsubcor-var (vars terms form)
   (declare
    (xargs :guard
     (and (symbol-listp vars) (pseudo-term-listp terms)
...">fsubcor-var</a>
    (vars terms form)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> vars)
          (pseudo-term-listp terms)
          (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> vars) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> terms))
          (<a class="sym-link system" href="axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> form))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> form) (<a class="sym-link system" href="basis-b.html#def-subcor-var1" data-sym="SUBCOR-VAR1">subcor-var1</a> vars terms form))
      ((<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> form) form)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-fcons-term" data-sym="FCONS-TERM">fcons-term</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> form)
          (fsubcor-var-lst vars terms (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> form))))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> fsubcor-var-lst
    (vars terms forms)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> vars)
          (pseudo-term-listp terms)
          (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> vars) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> terms))
          (pseudo-term-listp forms))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> forms) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-fsubcor-var" data-sym="FSUBCOR-VAR" title="(mutual-recursion
 (defun fsubcor-var (vars terms form)
   (declare
    (xargs :guard
     (and (symbol-listp vars) (pseudo-term-listp terms)
...">fsubcor-var</a> vars terms (car forms))
          (fsubcor-var-lst vars terms (cdr forms)))))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-print-gv-substitute-p1" data-defines="PRINT-GV-SUBSTITUTE-P1" data-references="EQ,CAR,ENDP,TERMLIST,FARGS,PRINT-GV-SUBSTITUTE-P1-LST,FQUOTEP,PUT-ASSOC-EQ,T,CONS-COUNT-BOUNDED-AC,EQL,IF,CDR,ACONS,NULL,ASSOC-EQ,PAIR,LET,VARIABLEP,COND,ACC,ALIST,TERM,BOUND,DEFUN,MUTUAL-RECURSION" data-used-by="PRINT-GV-SUBSTITUTE-P" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GV-SUBSTITUTE-P1">print-gv-substitute-p1</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-gv-substitute-p1" data-sym="PRINT-GV-SUBSTITUTE-P1" title="(mutual-recursion
 (defun print-gv-substitute-p1 (bound term alist acc)
   (cond
    ((variablep term)
     (let ((pair (assoc-eq term acc)))
...">print-gv-substitute-p1</a>
    (bound term alist acc)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> term acc)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pair) (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> term nil acc))
            ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr pair)) (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (cons-count-bounded-ac (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> term alist)) <span class="number">0</span> bound)
                  bound)
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> term <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> acc)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> acc))))
      ((<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term) acc)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (print-gv-substitute-p1-lst bound (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term) alist acc))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> print-gv-substitute-p1-lst
    (bound termlist alist acc)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> termlist) acc)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((acc (<a class="sym-link local-def" href="#def-print-gv-substitute-p1" data-sym="PRINT-GV-SUBSTITUTE-P1" title="(mutual-recursion
 (defun print-gv-substitute-p1 (bound term alist acc)
   (cond
    ((variablep term)
     (let ((pair (assoc-eq term acc)))
...">print-gv-substitute-p1</a> bound (car termlist) alist acc)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> acc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (print-gv-substitute-p1-lst bound (cdr termlist) alist acc))))))))</pre>
  </div>

<div class="form-block function" id="def-print-gv-substitute-p" data-defines="PRINT-GV-SUBSTITUTE-P" data-references="T,PAIRLIS$,PRINT-GV-SUBSTITUTE-P1,EQ,NOT,NATP,COND,ARGS,VARS,TGUARD,SUBSTITUTE,DEFUN" data-used-by="PRINT-GV-FORM" data-part-name="PRINT-GV-SUBSTITUTE-P" data-part-args="ARGS,VARS,TGUARD,SUBSTITUTE" data-part-body="T,ARGS,VARS,PAIRLIS$,TGUARD,PRINT-GV-SUBSTITUTE-P1,EQ,NOT,SUBSTITUTE,NATP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GV-SUBSTITUTE-P">print-gv-substitute-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-gv-substitute-p" data-sym="PRINT-GV-SUBSTITUTE-P" title="(defun print-gv-substitute-p (substitute tguard vars args)
  (cond
   ((natp substitute)
    (not
     (eq (print-gv-substitute-p1 substitute tguard (pairlis$ vars args) nil)
...">print-gv-substitute-p</a>
  (<a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> tguard vars <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link local-def" href="#def-print-gv-substitute-p1" data-sym="PRINT-GV-SUBSTITUTE-P1" title="(mutual-recursion
 (defun print-gv-substitute-p1 (bound term alist acc)
   (cond
    ((variablep term)
     (let ((pair (assoc-eq term acc)))
...">print-gv-substitute-p1</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>
            tguard
            (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> vars <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
            nil)
          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>)))</pre>
  </div>

<div class="form-block function" id="def-print-gv-form" data-defines="PRINT-GV-FORM" data-references="FLET,QUASIQUOTE,FSUBCOR-VAR,UNTRANSLATE,ASSERT$,PRINT-GV-SUBSTITUTE-P,COND,VALUE,T,QUOTE,TRANSLATE,NULL,AND,IF,ER-LET*,W,WRLD,LET,STATE,CTX,SUBSTITUTE,IGNORABLE,ARGS,VARS,TGUARD,GUARD,GUARD-FN,DEFUN" data-used-by="PRINT-GV1,PRINT-GV-CONJUNCT" data-part-name="PRINT-GV-FORM" data-part-args="STATE,CTX,SUBSTITUTE,IGNORABLE,ARGS,VARS,TGUARD,GUARD,GUARD-FN" data-part-body="FLET,QUASIQUOTE,FSUBCOR-VAR,UNTRANSLATE,ASSERT$,ARGS,VARS,PRINT-GV-SUBSTITUTE-P,COND,VALUE,CTX,T,QUOTE,GUARD,TRANSLATE,NULL,SUBSTITUTE,AND,IF,TGUARD,ER-LET*,STATE,W,WRLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GV-FORM">print-gv-form</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-gv-form" data-sym="PRINT-GV-FORM" title="(defun print-gv-form
       (guard-fn guard tguard vars args ignorable substitute ctx state)
  (let ((wrld (w state)))
    (er-let*
     ((tguard
...">print-gv-form</a>
  (guard-fn <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
    tguard
    vars
    <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
    ignorable
    <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>
    ctx
    state)
  (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tguard (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> tguard))
           (translate <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> '(nil) nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ctx wrld state)
           (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> tguard))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-print-gv-substitute-p" data-sym="PRINT-GV-SUBSTITUTE-P" title="(defun print-gv-substitute-p (substitute tguard vars args)
  (cond
   ((natp substitute)
    (not
     (eq (print-gv-substitute-p1 substitute tguard (pairlis$ vars args) nil)
...">print-gv-substitute-p</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> tguard vars <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> tguard
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (untranslate (<a class="sym-link local-def" href="#def-fsubcor-var" data-sym="FSUBCOR-VAR" title="(mutual-recursion
 (defun fsubcor-var (vars terms form)
   (declare
    (xargs :guard
     (and (symbol-listp vars) (pseudo-term-listp terms)
...">fsubcor-var</a> vars <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> tguard) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> (if tguard
                 (untranslate tguard <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)
                 <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>)))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(flet ((,GUARD-FN ,VARS
                   ,@(AND IGNORABLE `((DECLARE (IGNORABLE ,@VARS))))
                   ,GUARD))
                (,GUARD-FN ,@(UNTRANSLATE-LST ARGS NIL WRLD))))))))))</pre>
  </div>

<div class="form-block function" id="def-print-gv-conjunct" data-defines="PRINT-GV-CONJUNCT" data-references="1+,CDR,MSG,VALUE,TRANS-EVAL-DEFAULT-WARNING,STOBJS-OUT/REPLACED-VAL,ERP,MV-LET,PRINT-GV-FORM,FORM,ER-LET*,STRIP-CDRS,A1,STRIP-CARS,F1,PAIRLIS$,RESTRICT-ALIST-TO-ALL-VARS,ALIST,CAR,CONJUNCT,LET*,T,PRINT-GV,QUOTE,SOFT,ER,ENDP,COND,STATE,CTX,SUBSTITUTE,FN,LEN-ALL-CONJUNCTS,INDEX,ARGS,CONJUNCTS,FORMALS,GUARD-FN,DEFUN" data-used-by="PRINT-GV1" data-part-name="PRINT-GV-CONJUNCT" data-part-args="STATE,CTX,SUBSTITUTE,FN,LEN-ALL-CONJUNCTS,INDEX,ARGS,CONJUNCTS,FORMALS,GUARD-FN" data-part-body="LEN-ALL-CONJUNCTS,INDEX,1+,PRINT-GV-CONJUNCT,CDR,MSG,VALUE,TRANS-EVAL-DEFAULT-WARNING,STOBJS-OUT/REPLACED-VAL,ERP,MV-LET,STATE,SUBSTITUTE,GUARD-FN,PRINT-GV-FORM,FORM,ER-LET*,STRIP-CDRS,A1,STRIP-CARS,F1,ARGS,FORMALS,PAIRLIS$,RESTRICT-ALIST-TO-ALL-VARS,ALIST,CAR,CONJUNCT,LET*,T,FN,PRINT-GV,QUOTE,CTX,SOFT,ER,CONJUNCTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GV-CONJUNCT">print-gv-conjunct</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-gv-conjunct" data-sym="PRINT-GV-CONJUNCT" title="(defun print-gv-conjunct
       (guard-fn formals conjuncts args index len-all-conjuncts fn substitute
        ctx state)
  (cond
   ((endp conjuncts)
...">print-gv-conjunct</a>
  (guard-fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
    conjuncts
    <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
    index
    len-all-conjuncts
    fn
    <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> conjuncts) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"It is surprising that ~x0 yields no conjunct of the guard of ~x1 ~
         that evaluates to ~x2.  Sorry!  Try ~x0 without the :conjunct ~
         keyword argument."</span>
        '<a class="sym-link local-def" href="#def-print-gv" data-sym="PRINT-GV" title="(defmacro print-gv
          (
           &amp;key (evisc-tuple &#39;nil evisc-tuple-p) (conjunct &#39;nil conjunct-p)
           (substitute &#39;nil substitute-p))
  `(print-gv-fn ,(print-gv-default :evisc-tuple) ,(print-gv-default :conjunct)">print-gv</a>
        fn
        nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((conjunct (car conjuncts)) (alist (<a class="sym-link system" href="rewrite.html#def-restrict-alist-to-all-vars" data-sym="RESTRICT-ALIST-TO-ALL-VARS">restrict-alist-to-all-vars</a> (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
              conjunct))
          (f1 (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> alist))
          (a1 (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> alist)))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((form (<a class="sym-link local-def" href="#def-print-gv-form" data-sym="PRINT-GV-FORM" title="(defun print-gv-form
       (guard-fn guard tguard vars args ignorable substitute ctx state)
  (let ((wrld (w state)))
    (er-let*
     ((tguard
...">print-gv-form</a> guard-fn
               nil
               conjunct
               f1
               a1
               nil
               <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>
               ctx
               state)))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp stobjs-out/replaced-val state)
            (trans-eval-default-warning form ctx state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Evaluation causes an error:~|~x0"</span> conjunct)))
              ((cdr stobjs-out/replaced-val) (<a class="sym-link local-def" href="#def-print-gv-conjunct" data-sym="PRINT-GV-CONJUNCT" title="(defun print-gv-conjunct
       (guard-fn formals conjuncts args index len-all-conjuncts fn substitute
        ctx state)
  (cond
   ((endp conjuncts)
...">print-gv-conjunct</a> guard-fn
                  <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                  (cdr conjuncts)
                  <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                  (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> index)
                  len-all-conjuncts
                  fn
                  <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>
                  ctx
                  state))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Showing guard conjunct (#~x0 of ~x1) that ~
                                evaluates to nil:~|~%~x2."</span>
                    index
                    len-all-conjuncts
                    form))))))))))</pre>
  </div>

<div class="form-block function" id="def-print-gv1" data-defines="PRINT-GV1" data-references="PRINT-GV-FORM,LENGTH,PRINT-GV-CONJUNCT,FLATTEN-ANDS-IN-LIT,CONJUNCTS,IF,USER-STOBJ-ALIST,APPLY-USER-STOBJ-ALIST-OR-KWOTE,ARGS,FORMALS,LET,SET-W!,PPROGN,REVERT-WORLD,ADD-SUFFIX-TO-FN,GUARD-FN,WRLD,GUARD,NTH,FN,LET*,T,PRINT-GV,QUOTE,SOFT,ER,NATP,BOOLEANP,OR,NOT,COND,STATE,CTX,SUBSTITUTE,CONJUNCT,INFO,DEFUN" data-used-by="PRINT-GV-FN" data-part-name="PRINT-GV1" data-part-args="STATE,CTX,SUBSTITUTE,CONJUNCT,INFO" data-part-body="PRINT-GV-FORM,CTX,LENGTH,PRINT-GV-CONJUNCT,FLATTEN-ANDS-IN-LIT,CONJUNCTS,CONJUNCT,IF,USER-STOBJ-ALIST,APPLY-USER-STOBJ-ALIST-OR-KWOTE,ARGS,FORMALS,LET,STATE,SET-W!,PPROGN,REVERT-WORLD,ADD-SUFFIX-TO-FN,GUARD-FN,WRLD,GUARD,INFO,NTH,FN,LET*,T,PRINT-GV,QUOTE,SOFT,ER,NATP,SUBSTITUTE,BOOLEANP,OR,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GV1">print-gv1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-gv1" data-sym="PRINT-GV1" title="(defun print-gv1 (info conjunct substitute ctx state)
  (cond
   ((not (or (booleanp substitute) (natp substitute)))
    (er soft &#39;print-gv
        &quot;The :substitute keyword argument of PRINT-GV must evaluate to T, ~
...">print-gv1</a>
  (info conjunct <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>) (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        '<a class="sym-link local-def" href="#def-print-gv" data-sym="PRINT-GV" title="(defmacro print-gv
          (
           &amp;key (evisc-tuple &#39;nil evisc-tuple-p) (conjunct &#39;nil conjunct-p)
           (substitute &#39;nil substitute-p))
  `(print-gv-fn ,(print-gv-default :evisc-tuple) ,(print-gv-default :conjunct)">print-gv</a>
        <span class="string">"The :substitute keyword argument of PRINT-GV must evaluate to T, ~
         NIL, or a natural number."</span>
        <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> info)) (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> info))
          (wrld (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> info))
          (guard-fn (<a class="sym-link local-def" href="#def-add-suffix-to-fn" data-sym="ADD-SUFFIX-TO-FN" title="(defun add-suffix-to-fn (sym suffix)
  (declare (xargs :guard (and (symbolp sym) (stringp suffix))))
  (if (equal (symbol-package-name sym) *main-lisp-package-name*)
      (intern (concatenate &#39;string (symbol-name sym) suffix) &quot;ACL2&quot;)
      (add-suffix sym suffix)))">add-suffix-to-fn</a> fn <span class="string">"{GUARD}"</span>)))
        (<a class="sym-link system" href="prove.html#def-revert-world" data-sym="REVERT-WORLD">revert-world</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w_21" data-sym="SET-W!">set-w!</a> wrld state)
            (let ((<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> fn wrld)) (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (apply-user-stobj-alist-or-kwote (<a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a> state)
                    (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> info)
                    nil)))
              (if conjunct
                (let ((conjuncts (flatten-ands-in-lit (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> fn nil wrld))))
                  (<a class="sym-link local-def" href="#def-print-gv-conjunct" data-sym="PRINT-GV-CONJUNCT" title="(defun print-gv-conjunct
       (guard-fn formals conjuncts args index len-all-conjuncts fn substitute
        ctx state)
  (cond
   ((endp conjuncts)
...">print-gv-conjunct</a> guard-fn
                    <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                    conjuncts
                    <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                    <span class="number">1</span>
                    (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> conjuncts)
                    fn
                    <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>
                    ctx
                    state))
                (<a class="sym-link local-def" href="#def-print-gv-form" data-sym="PRINT-GV-FORM" title="(defun print-gv-form
       (guard-fn guard tguard vars args ignorable substitute ctx state)
  (let ((wrld (w state)))
    (er-let*
     ((tguard
...">print-gv-form</a> guard-fn
                  <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                  nil
                  <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                  <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>
                  ctx
                  state)))))))))</pre>
  </div>

<div class="form-block function" id="def-print-gv-fn" data-defines="PRINT-GV-FN" data-references="CONS,LIST,PRINT-GV,PRINT-GV1,VAL,ER-LET*,T,VALUE,STANDARD-CO,FMS,PPROGN,NULL,COND,WORMHOLE-STATUS,F-GET-GLOBAL,WORMHOLE-DATA,INFO,LET,ER-PROGN,QUASIQUOTE,SET-WORMHOLE-ENTRY-CODE,WHS,LAMBDA,EV-FNCALL-GUARD-ER-WORMHOLE,QUOTE,WORMHOLE,PROG2$,STATE,SUBSTITUTE,CONJUNCT,EVISC-TUPLE,DEFUN" data-used-by="PRINT-GV" data-part-name="PRINT-GV-FN" data-part-args="STATE,SUBSTITUTE,CONJUNCT,EVISC-TUPLE" data-part-body="CONS,LIST,PRINT-GV,PRINT-GV1,VAL,ER-LET*,T,VALUE,STANDARD-CO,FMS,PPROGN,NULL,COND,STATE,WORMHOLE-STATUS,F-GET-GLOBAL,WORMHOLE-DATA,INFO,LET,ER-PROGN,QUASIQUOTE,SET-WORMHOLE-ENTRY-CODE,WHS,LAMBDA,EV-FNCALL-GUARD-ER-WORMHOLE,QUOTE,WORMHOLE,PROG2$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GV-FN">print-gv-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-gv-fn" data-sym="PRINT-GV-FN" title="(defun print-gv-fn (evisc-tuple conjunct substitute state)
  (prog2$
   (wormhole &#39;ev-fncall-guard-er-wormhole
             &#39;(lambda (whs) (set-wormhole-entry-code whs :enter)) nil
             `(er-progn
...">print-gv-fn</a>
  (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> conjunct <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> state)
  (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="basis-a.html#def-wormhole" data-sym="WORMHOLE">wormhole</a> 'ev-fncall-guard-er-wormhole
      '(lambda (whs) (<a class="sym-link system" href="basis-a.html#def-set-wormhole-entry-code" data-sym="SET-WORMHOLE-ENTRY-CODE">set-wormhole-entry-code</a> whs <span class="keyword">:enter</span>))
      nil
      `(<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (let ((info (<a class="sym-link system" href="basis-a.html#def-wormhole-data" data-sym="WORMHOLE-DATA">wormhole-data</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'wormhole-status state))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> info) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"There is no guard violation to debug.~|~%"</span>
                  nil
                  (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                  state
                  nil)
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val (<a class="sym-link local-def" href="#def-print-gv1" data-sym="PRINT-GV1" title="(defun print-gv1 (info conjunct substitute ctx state)
  (cond
   ((not (or (booleanp substitute) (natp substitute)))
    (er soft &#39;print-gv
        &quot;The :substitute keyword argument of PRINT-GV must evaluate to T, ~
...">print-gv1</a> info ',CONJUNCT ',SUBSTITUTE '<a class="sym-link local-def" href="#def-print-gv" data-sym="PRINT-GV" title="(defmacro print-gv
          (
           &amp;key (evisc-tuple &#39;nil evisc-tuple-p) (conjunct &#39;nil conjunct-p)
           (substitute &#39;nil substitute-p))
  `(print-gv-fn ,(print-gv-default :evisc-tuple) ,(print-gv-default :conjunct)">print-gv</a> state)))
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> ,(IF CONJUNCT
     &quot;~@0~|~%&quot;
     &quot;~x0~|~%&quot;)
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 val))
                    (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                    state
                    ',EVISC-TUPLE)
                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:q</span>))
      <span class="keyword">:ld-prompt</span> nil
      <span class="keyword">:ld-missing-input-ok</span> nil
      <span class="keyword">:ld-always-skip-top-level-locals</span> nil
      <span class="keyword">:ld-pre-eval-filter</span> <span class="keyword">:all</span> <span class="keyword">:ld-pre-eval-print</span> nil
      <span class="keyword">:ld-post-eval-print</span> <span class="keyword">:command-conventions</span> <span class="keyword">:ld-evisc-tuple</span> nil
      <span class="keyword">:ld-error-triples</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:ld-error-action</span> <span class="keyword">:error</span> <span class="keyword">:ld-query-control-alist</span> nil
      <span class="keyword">:ld-verbose</span> nil)
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))</pre>
  </div>

<div class="form-block function" id="def-set-print-gv-defaults-fn" data-defines="SET-PRINT-GV-DEFAULTS-FN" data-references="F-PUT-GLOBAL,PPROGN,PUT-ASSOC-EQ,REMOVE1-ASSOC-EQ,ALIST,LET*,NATP,BOOLEANP,SOFT,ER,STANDARD-EVISC-TUPLEP,EQ,OR,NOT,SET-PRINT-GV-DEFAULTS,CTX,LET,PRINT-GV-DEFAULTS,QUOTE,F-GET-GLOBAL,VALUE,NULL,AND,COND,T,XARGS,DECLARE,SUBSTITUTE-P,SUBSTITUTE,CONJUNCT-P,CONJUNCT,EVISC-TUPLE-P,EVISC-TUPLE,STATE,DEFUN" data-used-by="SET-PRINT-GV-DEFAULTS" data-part-name="SET-PRINT-GV-DEFAULTS-FN" data-part-args="SUBSTITUTE-P,SUBSTITUTE,CONJUNCT-P,CONJUNCT,EVISC-TUPLE-P,EVISC-TUPLE,STATE" data-part-declare="T,XARGS,DECLARE" data-part-body="F-PUT-GLOBAL,PPROGN,PUT-ASSOC-EQ,REMOVE1-ASSOC-EQ,ALIST,LET*,NATP,SUBSTITUTE,CONJUNCT,BOOLEANP,SOFT,ER,STANDARD-EVISC-TUPLEP,EQ,EVISC-TUPLE,OR,NOT,SET-PRINT-GV-DEFAULTS,CTX,LET,T,STATE,PRINT-GV-DEFAULTS,QUOTE,F-GET-GLOBAL,VALUE,SUBSTITUTE-P,CONJUNCT-P,EVISC-TUPLE-P,NULL,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-PRINT-GV-DEFAULTS-FN">set-print-gv-defaults-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-print-gv-defaults-fn" data-sym="SET-PRINT-GV-DEFAULTS-FN" title="(defun set-print-gv-defaults-fn
       (state evisc-tuple evisc-tuple-p conjunct conjunct-p substitute
        substitute-p)
  (declare (xargs :guard t :mode :program))
  (cond
...">set-print-gv-defaults-fn</a>
  (state <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>
    evisc-tuple-p
    conjunct
    conjunct-p
    <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>
    substitute-p)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> evisc-tuple-p)
       (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> conjunct-p)
       (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> substitute-p)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-gv-defaults state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((ctx '<a class="sym-link local-def" href="#def-set-print-gv-defaults" data-sym="SET-PRINT-GV-DEFAULTS" title="(defmacro set-print-gv-defaults
          (
           &amp;key (evisc-tuple &#39;nil evisc-tuple-p) (conjunct &#39;nil conjunct-p)
           (substitute &#39;nil substitute-p))
  `(set-print-gv-defaults-fn state ,evisc-tuple ,evisc-tuple-p ,conjunct">set-print-gv-defaults</a>))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="keyword">:restore</span>)
               (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"Illegal evisc-tuple: ~x0"</span> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> conjunct) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> conjunct <span class="keyword">:restore</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Illegal value for :conjunct (must be Boolean): ~x0"</span>
              conjunct))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>)
               (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>)
               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> <span class="keyword">:restore</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Illegal value for :conjunct (must be Boolean or a natural ~
                  number): ~x0"</span>
              <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((alist (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-gv-defaults state)) (alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> evisc-tuple-p) alist)
                    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="keyword">:restore</span>) (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> <span class="keyword">:evisc-tuple</span> alist))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:evisc-tuple</span> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> alist))))
                (alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> conjunct-p) alist)
                    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> conjunct <span class="keyword">:restore</span>) (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> <span class="keyword">:conjunct</span> alist))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:conjunct</span> conjunct alist))))
                (alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> substitute-p) alist)
                    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> <span class="keyword">:restore</span>) (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> <span class="keyword">:substitute</span> alist))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:substitute</span> <a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> alist)))))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'print-gv-defaults alist state)
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> alist)))))))))</pre>
  </div>

<div class="form-block macro" id="def-set-print-gv-defaults" data-defines="SET-PRINT-GV-DEFAULTS" data-references="STATE,SET-PRINT-GV-DEFAULTS-FN,QUASIQUOTE,SUBSTITUTE-P,SUBSTITUTE,CONJUNCT-P,CONJUNCT,EVISC-TUPLE-P,QUOTE,EVISC-TUPLE,&KEY,DEFMACRO" data-used-by="SET-PRINT-GV-DEFAULTS-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-PRINT-GV-DEFAULTS">set-print-gv-defaults</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-print-gv-defaults" data-sym="SET-PRINT-GV-DEFAULTS" title="(defmacro set-print-gv-defaults
          (
           &amp;key (evisc-tuple &#39;nil evisc-tuple-p) (conjunct &#39;nil conjunct-p)
           (substitute &#39;nil substitute-p))
  `(set-print-gv-defaults-fn state ,evisc-tuple ,evisc-tuple-p ,conjunct">set-print-gv-defaults</a>
  (&amp;key (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> 'nil evisc-tuple-p)
    (conjunct 'nil conjunct-p)
    (<a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> 'nil substitute-p))
  `(<a class="sym-link local-def" href="#def-set-print-gv-defaults-fn" data-sym="SET-PRINT-GV-DEFAULTS-FN" title="(defun set-print-gv-defaults-fn
       (state evisc-tuple evisc-tuple-p conjunct conjunct-p substitute
        substitute-p)
  (declare (xargs :guard t :mode :program))
  (cond
...">set-print-gv-defaults-fn</a> state
    ,EVISC-TUPLE
    ,EVISC-TUPLE-P
    ,CONJUNCT
    ,CONJUNCT-P
    ,SUBSTITUTE
    ,SUBSTITUTE-P))</pre>
  </div>

<div class="form-block macro" id="def-print-gv-evisc-tuple" data-defines="PRINT-GV-EVISC-TUPLE" data-references="STATE,WORLD-EVISCERATION-ALIST,EVISC-TUPLE,QUOTE,DEFMACRO" data-used-by="PRINT-GV-DEFAULT" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GV-EVISC-TUPLE">print-gv-evisc-tuple</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-print-gv-evisc-tuple" data-sym="PRINT-GV-EVISC-TUPLE" title="(defmacro print-gv-evisc-tuple ()
  &#39;(evisc-tuple nil nil (world-evisceration-alist state nil) nil))">print-gv-evisc-tuple</a>
  nil
  '(<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> nil
    nil
    (<a class="sym-link system" href="basis-a.html#def-world-evisceration-alist" data-sym="WORLD-EVISCERATION-ALIST">world-evisceration-alist</a> state nil)
    nil))</pre>
  </div>

<div class="form-block macro" id="def-print-gv-default" data-defines="PRINT-GV-DEFAULT" data-references="CDR,STATE,PRINT-GV-DEFAULTS,F-GET-GLOBAL,ASSOC-EQ,PAIR,LET,T,COND,QUASIQUOTE,PRINT-GV-EVISC-TUPLE,EQ,IF,DEFAULT,STRING,CONCATENATE,INTERN,KEY-P,SYMBOL-NAME,NAME,LET*,QUOTE,MEMBER-EQ,XARGS,DECLARE,KEY,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GV-DEFAULT">print-gv-default</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-print-gv-default" data-sym="PRINT-GV-DEFAULT" title="(defmacro print-gv-default (key)
  (declare
   (xargs :guard (member-eq key (quote (:evisc-tuple :conjunct :substitute)))))
  (let* ((name (symbol-name key))
         (key-p (intern (concatenate &#39;string name &quot;-P&quot;) &quot;ACL2&quot;))
...">print-gv-default</a>
  (key)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key '(<span class="keyword">:evisc-tuple</span> <span class="keyword">:conjunct</span> <span class="keyword">:substitute</span>))))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name (symbol-name key)) (key-p (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> name <span class="string">"-P"</span>) <span class="string">"ACL2"</span>))
      (<a class="sym-link system" href="axioms.html#def-default" data-sym="DEFAULT">default</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key <span class="keyword">:evisc-tuple</span>)
          '(<a class="sym-link local-def" href="#def-print-gv-evisc-tuple" data-sym="PRINT-GV-EVISC-TUPLE" title="(defmacro print-gv-evisc-tuple ()
  &#39;(evisc-tuple nil nil (world-evisceration-alist state nil) nil))">print-gv-evisc-tuple</a>)
          nil)))
    `(<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (,KEY-P ,(INTERN NAME &quot;ACL2&quot;))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> '(let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> ,KEY (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-gv-defaults state))))
          (if pair
            (cdr pair)
            ,DEFAULT))))))</pre>
  </div>

<div class="form-block macro" id="def-print-gv" data-defines="PRINT-GV" data-references="STATE,PRINT-GV-FN,QUASIQUOTE,SUBSTITUTE-P,SUBSTITUTE,CONJUNCT-P,CONJUNCT,EVISC-TUPLE-P,QUOTE,EVISC-TUPLE,&KEY,DEFMACRO" data-used-by="PRINT-GV-FN,PRINT-GV1,PRINT-GV-CONJUNCT" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GV">print-gv</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-print-gv" data-sym="PRINT-GV" title="(defmacro print-gv
          (
           &amp;key (evisc-tuple &#39;nil evisc-tuple-p) (conjunct &#39;nil conjunct-p)
           (substitute &#39;nil substitute-p))
  `(print-gv-fn ,(print-gv-default :evisc-tuple) ,(print-gv-default :conjunct)">print-gv</a>
  (&amp;key (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> 'nil evisc-tuple-p)
    (conjunct 'nil conjunct-p)
    (<a class="sym-link system" href="axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> 'nil substitute-p))
  `(<a class="sym-link local-def" href="#def-print-gv-fn" data-sym="PRINT-GV-FN" title="(defun print-gv-fn (evisc-tuple conjunct substitute state)
  (prog2$
   (wormhole &#39;ev-fncall-guard-er-wormhole
             &#39;(lambda (whs) (set-wormhole-entry-code whs :enter)) nil
             `(er-progn
...">print-gv-fn</a> ,(PRINT-GV-DEFAULT :EVISC-TUPLE)
    ,(PRINT-GV-DEFAULT :CONJUNCT)
    ,(PRINT-GV-DEFAULT :SUBSTITUTE)
    state))</pre>
  </div>

<div class="form-block function" id="def-disable-iprint-ar" data-defines="DISABLE-IPRINT-AR" data-references="T,MV,CDR,CAAR,EQL,IF,LIST,ACONS,COMPRESS1,F-PUT-GLOBAL,PPROGN,AREF1,LAST-INDEX,QUOTE,F-GET-GLOBAL,IPRINT-AR,LET*,IPRINT-ENABLEDP,COND,STATE,DEFUN" data-used-by="SET-IPRINT-FN1" data-part-name="DISABLE-IPRINT-AR" data-part-args="STATE" data-part-body="T,MV,CDR,CAAR,EQL,IF,LIST,ACONS,COMPRESS1,F-PUT-GLOBAL,PPROGN,AREF1,LAST-INDEX,QUOTE,F-GET-GLOBAL,IPRINT-AR,LET*,STATE,IPRINT-ENABLEDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DISABLE-IPRINT-AR">disable-iprint-ar</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-disable-iprint-ar" data-sym="DISABLE-IPRINT-AR" title="(defun disable-iprint-ar (state)
  (cond
   ((iprint-enabledp state)
    (let* ((iprint-ar (f-get-global &#39;iprint-ar state))
           (last-index (aref1 &#39;iprint-ar iprint-ar 0)))
...">disable-iprint-ar</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="basis-a.html#def-iprint-enabledp" data-sym="IPRINT-ENABLEDP">iprint-enabledp</a> state) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((iprint-ar (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'iprint-ar state)) (last-index (<a class="sym-link system" href="axioms.html#def-aref1" data-sym="AREF1">aref1</a> 'iprint-ar iprint-ar <span class="number">0</span>)))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'iprint-ar
            (<a class="sym-link system" href="axioms.html#def-compress1" data-sym="COMPRESS1">compress1</a> 'iprint-ar
              (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="number">0</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> last-index)
                (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> iprint-ar) <span class="number">0</span>)
                  (cdr iprint-ar)
                  iprint-ar)))
            state)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state))))</pre>
  </div>

<div class="form-block function" id="def-enable-iprint-ar" data-defines="ENABLE-IPRINT-AR" data-references="T,MV,CDR,CAAR,EQL,IF,ACONS,COMPRESS1,F-PUT-GLOBAL,PPROGN,AREF1,CAR,LAST-INDEX,QUOTE,F-GET-GLOBAL,IPRINT-AR,LET*,IPRINT-ENABLEDP,NOT,COND,STATE,DEFUN" data-used-by="SET-IPRINT-FN1" data-part-name="ENABLE-IPRINT-AR" data-part-args="STATE" data-part-body="T,MV,CDR,CAAR,EQL,IF,ACONS,COMPRESS1,F-PUT-GLOBAL,PPROGN,AREF1,CAR,LAST-INDEX,QUOTE,F-GET-GLOBAL,IPRINT-AR,LET*,STATE,IPRINT-ENABLEDP,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENABLE-IPRINT-AR">enable-iprint-ar</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-enable-iprint-ar" data-sym="ENABLE-IPRINT-AR" title="(defun enable-iprint-ar (state)
  (cond
   ((not (iprint-enabledp state))
    (let* ((iprint-ar (f-get-global &#39;iprint-ar state))
           (last-index (car (aref1 &#39;iprint-ar iprint-ar 0))))
...">enable-iprint-ar</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-iprint-enabledp" data-sym="IPRINT-ENABLEDP">iprint-enabledp</a> state)) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((iprint-ar (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'iprint-ar state)) (last-index (car (<a class="sym-link system" href="axioms.html#def-aref1" data-sym="AREF1">aref1</a> 'iprint-ar iprint-ar <span class="number">0</span>))))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'iprint-ar
            (<a class="sym-link system" href="axioms.html#def-compress1" data-sym="COMPRESS1">compress1</a> 'iprint-ar
              (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="number">0</span>
                last-index
                (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> iprint-ar) <span class="number">0</span>)
                  (cdr iprint-ar)
                  iprint-ar)))
            state)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state))))</pre>
  </div>

<div class="form-block constant" id="def-_2Aiprint-actions_2A" data-defines="*IPRINT-ACTIONS*" data-references="T,QUOTE,DEFCONST" data-used-by="SET-IPRINT,SET-IPRINT-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*IPRINT-ACTIONS*">*iprint-actions*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aiprint-actions_2A" data-sym="*IPRINT-ACTIONS*" title="(defconst *iprint-actions* &#39;(t nil :reset :reset-enable :same))">*iprint-actions*</a>
  '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:reset</span> <span class="keyword">:reset-enable</span> <span class="keyword">:same</span>))</pre>
  </div>

<div class="form-block function" id="def-set-iprint-fn1" data-defines="SET-IPRINT-FN1" data-references="HARD,ER,IPRINT-HARD-BOUND,F-GET-GLOBAL,INIT-IPRINT-AR,COMPRESS1,IPRINT-AR,F-PUT-GLOBAL,PPROGN,QUOTE,MEMBER-EQ,ENABLE-IPRINT-AR,T,DISABLE-IPRINT-AR,RESULT,MV-LET,NULL,MV,EQ,COND,STATE,X,DEFUN" data-used-by="SET-IPRINT-FN" data-part-name="SET-IPRINT-FN1" data-part-args="STATE,X" data-part-body="SET-IPRINT-FN1,HARD,ER,IPRINT-HARD-BOUND,F-GET-GLOBAL,INIT-IPRINT-AR,COMPRESS1,IPRINT-AR,F-PUT-GLOBAL,PPROGN,QUOTE,MEMBER-EQ,ENABLE-IPRINT-AR,T,DISABLE-IPRINT-AR,RESULT,MV-LET,NULL,STATE,MV,X,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-IPRINT-FN1">set-iprint-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-iprint-fn1" data-sym="SET-IPRINT-FN1" title="(defun set-iprint-fn1 (x state)
  (cond ((eq x :same) (mv nil state))
        ((null x)
         (mv-let (result state) (disable-iprint-ar state)
                 (cond (result (mv &quot;Iprinting has been disabled.&quot; state))
...">set-iprint-fn1</a>
  (x state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x <span class="keyword">:same</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (result state)
        (<a class="sym-link local-def" href="#def-disable-iprint-ar" data-sym="DISABLE-IPRINT-AR" title="(defun disable-iprint-ar (state)
  (cond
   ((iprint-enabledp state)
    (let* ((iprint-ar (f-get-global &#39;iprint-ar state))
           (last-index (aref1 &#39;iprint-ar iprint-ar 0)))
...">disable-iprint-ar</a> state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (result (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Iprinting has been disabled."</span> state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Iprinting remains disabled."</span> state)))))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (result state)
        (<a class="sym-link local-def" href="#def-enable-iprint-ar" data-sym="ENABLE-IPRINT-AR" title="(defun enable-iprint-ar (state)
  (cond
   ((not (iprint-enabledp state))
    (let* ((iprint-ar (f-get-global &#39;iprint-ar state))
           (last-index (car (aref1 &#39;iprint-ar iprint-ar 0))))
...">enable-iprint-ar</a> state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (result (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Iprinting has been enabled."</span> state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Iprinting remains enabled."</span> state)))))
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> x '(<span class="keyword">:reset</span> <span class="keyword">:reset-enable</span>)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'iprint-ar
          (<a class="sym-link system" href="axioms.html#def-compress1" data-sym="COMPRESS1">compress1</a> 'iprint-ar
            (<a class="sym-link system" href="axioms.html#def-init-iprint-ar" data-sym="INIT-IPRINT-AR">init-iprint-ar</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="basis-a.html#def-iprint-hard-bound" data-sym="IPRINT-HARD-BOUND">iprint-hard-bound</a> state)
              (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x <span class="keyword">:reset-enable</span>)))
          state)
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x <span class="keyword">:reset-enable</span>) <span class="string">"Iprinting has been reset and enabled."</span>)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"Iprinting has been reset and disabled."</span>))
          state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-set-iprint-fn1" data-sym="SET-IPRINT-FN1" title="(defun set-iprint-fn1 (x state)
  (cond ((eq x :same) (mv nil state))
        ((null x)
         (mv-let (result state) (disable-iprint-ar state)
                 (cond (result (mv &quot;Iprinting has been disabled.&quot; state))
...">set-iprint-fn1</a>
          <span class="string">"Implementation error!  Please contact the ACL2 implementors."</span>)
        state))))</pre>
  </div>

<div class="form-block function" id="def-init-iprint-fal_2B" data-defines="INIT-IPRINT-FAL+" data-references="T,OBSERVATION,COND,INIT-IPRINT-FAL,MSG,MV-LET,STATE,CTX,SYM,DEFUN" data-used-by="SET-IPRINT-FN" data-part-name="INIT-IPRINT-FAL+" data-part-args="STATE,CTX,SYM" data-part-body="T,CTX,OBSERVATION,COND,SYM,INIT-IPRINT-FAL,STATE,MSG,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INIT-IPRINT-FAL+">init-iprint-fal+</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-init-iprint-fal_2B" data-sym="INIT-IPRINT-FAL+" title="(defun init-iprint-fal+ (sym ctx state)
  (mv-let (msg state) (init-iprint-fal sym state)
          (cond (msg (observation ctx &quot;~@0&quot; msg)) (t state))))">init-iprint-fal+</a>
  (sym ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> state)
    (<a class="sym-link system" href="basis-a.html#def-init-iprint-fal" data-sym="INIT-IPRINT-FAL">init-iprint-fal</a> sym state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))</pre>
  </div>

<div class="form-block function" id="def-set-iprint-fn" data-defines="SET-IPRINT-FN" data-references="VALUE,SET-IPRINT-FN1,MSG,MV-LET,INIT-IPRINT-FAL+,IPRINT-HARD-BOUND,OBSERVATION,IPRINT-SOFT-BOUND,F-PUT-GLOBAL,SET-IPRINT,WARNING$,EQ,PPROGN,POSP,AND,SYMBOLP,QUOTE,ASSERT$,OTHERWISE,IPRINT-ENABLEDP,IF,CASE,OR,ACTION,LET,T,SOFT,ER,*IPRINT-ACTIONS*,MEMBER-EQ,NOT,COND,STATE,CTX,HARD-BOUND-P,HARD-BOUND,SOFT-BOUND-P,SOFT-BOUND,SHARE-P,SHARE,ACTION0,DEFUN" data-used-by="SET-EVISC-TUPLE-FN,SET-IPRINT" data-part-name="SET-IPRINT-FN" data-part-args="STATE,CTX,HARD-BOUND-P,HARD-BOUND,SOFT-BOUND-P,SOFT-BOUND,SHARE-P,SHARE,ACTION0" data-part-body="VALUE,SET-IPRINT-FN1,MSG,MV-LET,INIT-IPRINT-FAL+,IPRINT-HARD-BOUND,OBSERVATION,IPRINT-SOFT-BOUND,F-PUT-GLOBAL,SET-IPRINT,WARNING$,EQ,PPROGN,HARD-BOUND,SOFT-BOUND,POSP,SOFT-BOUND-P,AND,SHARE,SYMBOLP,QUOTE,ASSERT$,OTHERWISE,STATE,IPRINT-ENABLEDP,IF,CASE,HARD-BOUND-P,SHARE-P,OR,ACTION,LET,T,CTX,SOFT,ER,*IPRINT-ACTIONS*,ACTION0,MEMBER-EQ,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-IPRINT-FN">set-iprint-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-iprint-fn" data-sym="SET-IPRINT-FN" title="(defun set-iprint-fn
       (action0 share share-p soft-bound soft-bound-p hard-bound hard-bound-p
        ctx state)
  (cond
   ((not (member-eq action0 *iprint-actions*))
...">set-iprint-fn</a>
  (action0 share
    share-p
    soft-bound
    soft-bound-p
    hard-bound
    hard-bound-p
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> action0 <a class="sym-link local-def" href="#def-_2Aiprint-actions_2A" data-sym="*IPRINT-ACTIONS*" title="(defconst *iprint-actions* &#39;(t nil :reset :reset-enable :same))">*iprint-actions*</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Unknown option, ~x0.  The legal iprint actions are ~&amp;1."</span>
        action0
        <a class="sym-link local-def" href="#def-_2Aiprint-actions_2A" data-sym="*IPRINT-ACTIONS*" title="(defconst *iprint-actions* &#39;(t nil :reset :reset-enable :same))">*iprint-actions*</a>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((action (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> share-p hard-bound-p) (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> action0
                 ((<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <span class="keyword">:reset-enable</span>)
                 ((nil) <span class="keyword">:reset</span>)
                 ((<span class="keyword">:same</span>) (if (<a class="sym-link system" href="basis-a.html#def-iprint-enabledp" data-sym="IPRINT-ENABLEDP">iprint-enabledp</a> state)
                     <span class="keyword">:reset-enable</span> <span class="keyword">:reset</span>))
                 (otherwise (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> action0 '(<span class="keyword">:reset</span> <span class="keyword">:reset-enable</span>))
                     action0))))
             (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> action0))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp share)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The :share argument for iprinting must be a symbol, but ~x0 is not."</span>
              share))
          ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> soft-bound-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-posp" data-sym="POSP">posp</a> soft-bound))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The :SOFT-BOUND argument of SET-IPRINT must be a positive ~
             integer, but ~x0 is not."</span>
              soft-bound))
          ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> hard-bound-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-posp" data-sym="POSP">posp</a> hard-bound))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The :HARD-BOUND argument of SET-IPRINT must be a positive ~
             integer, but ~x0 is not."</span>
              hard-bound))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> action action0)) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> '<a class="sym-link local-def" href="#def-set-iprint" data-sym="SET-IPRINT" title="(defmacro set-iprint
          (
           &amp;optional (action &#39;:reset action-p)
           &amp;key (share &#39;:same share-p) (soft-bound &#39;1 soft-bound-p)
           (hard-bound &#39;1 hard-bound-p))
...">set-iprint</a>
                    <span class="string">"Iprint"</span>
                    <span class="string">"Converting SET-IPRINT action from ~x0 to ~
                                    ~x1, as required by use of keyword :SHARE ~
                                    or :HARD-BOUND.  See :DOC set-iprint."</span>
                    action0
                    action))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (soft-bound-p (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-iprint-soft-bound" data-sym="IPRINT-SOFT-BOUND">iprint-soft-bound</a> soft-bound state)
                      (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
                        <span class="string">"The soft-bound for ~
                                                  iprinting has been set to ~
                                                  ~x0."</span>
                        soft-bound)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (hard-bound-p (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-iprint-hard-bound" data-sym="IPRINT-HARD-BOUND">iprint-hard-bound</a> hard-bound state)
                      (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
                        <span class="string">"The hard-bound for ~
                                                  iprinting has been set to ~
                                                  ~x0."</span>
                        hard-bound)))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> share <span class="keyword">:same</span>) (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> action '(<span class="keyword">:reset</span> <span class="keyword">:reset-enable</span>))
                      (<a class="sym-link local-def" href="#def-init-iprint-fal_2B" data-sym="INIT-IPRINT-FAL+" title="(defun init-iprint-fal+ (sym ctx state)
  (mv-let (msg state) (init-iprint-fal sym state)
          (cond (msg (observation ctx &quot;~@0&quot; msg)) (t state))))">init-iprint-fal+</a> <span class="keyword">:same</span> ctx state)
                      state))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> share nil) (<a class="sym-link local-def" href="#def-init-iprint-fal_2B" data-sym="INIT-IPRINT-FAL+" title="(defun init-iprint-fal+ (sym ctx state)
  (mv-let (msg state) (init-iprint-fal sym state)
          (cond (msg (observation ctx &quot;~@0&quot; msg)) (t state))))">init-iprint-fal+</a> share ctx state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-init-iprint-fal_2B" data-sym="INIT-IPRINT-FAL+" title="(defun init-iprint-fal+ (sym ctx state)
  (mv-let (msg state) (init-iprint-fal sym state)
          (cond (msg (observation ctx &quot;~@0&quot; msg)) (t state))))">init-iprint-fal+</a> share ctx state)))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> state)
                  (<a class="sym-link local-def" href="#def-set-iprint-fn1" data-sym="SET-IPRINT-FN1" title="(defun set-iprint-fn1 (x state)
  (cond ((eq x :same) (mv nil state))
        ((null x)
         (mv-let (result state) (disable-iprint-ar state)
                 (cond (result (mv &quot;Iprinting has been disabled.&quot; state))
...">set-iprint-fn1</a> action state)
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))))))))))</pre>
  </div>

<div class="form-block macro" id="def-set-iprint" data-defines="SET-IPRINT" data-references="SET-IPRINT-FN,SILENT-ERROR,EQ,COND,STATE,*IPRINT-ACTIONS*,CONS,LIST,ACL2-QUERY,VALUE,IF,ER-LET*,MV,MV-LET,QUASIQUOTE,T,XARGS,DECLARE,HARD-BOUND-P,HARD-BOUND,SOFT-BOUND-P,SOFT-BOUND,SHARE-P,SHARE,&KEY,ACTION-P,QUOTE,ACTION,&OPTIONAL,DEFMACRO" data-used-by="SET-EVISC-TUPLE-FN,SET-IPRINT-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-IPRINT">set-iprint</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-iprint" data-sym="SET-IPRINT" title="(defmacro set-iprint
          (
           &amp;optional (action &#39;:reset action-p)
           &amp;key (share &#39;:same share-p) (soft-bound &#39;1 soft-bound-p)
           (hard-bound &#39;1 hard-bound-p))
...">set-iprint</a>
  (&amp;optional (action '<span class="keyword">:reset</span> action-p)
    &amp;key
    (share '<span class="keyword">:same</span> share-p)
    (soft-bound '<span class="number">1</span> soft-bound-p)
    (hard-bound '<span class="number">1</span> hard-bound-p))
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (action action-p
      share
      share-p
      soft-bound
      soft-bound-p
      hard-bound
      hard-bound-p)
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ,ACTION
      ,ACTION-P
      ,SHARE
      ,SHARE-P
      ,SOFT-BOUND
      ,SOFT-BOUND-P
      ,HARD-BOUND
      ,HARD-BOUND-P)
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((action (if action-p
           (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> action)
           (<a class="sym-link system" href="rewrite.html#def-acl2-query" data-sym="ACL2-QUERY">acl2-query</a> <span class="keyword">:set-iprint</span> '(<span class="string">"Action"</span> <span class="keyword">:t</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
               <span class="keyword">:nil</span> nil
               <span class="keyword">:reset</span> <span class="keyword">:reset</span> <span class="keyword">:reset-enable</span> <span class="keyword">:reset-enable</span> <span class="keyword">:same</span> <span class="keyword">:same</span> <span class="keyword">:q</span> <span class="keyword">:q</span> <span class="keyword">:?</span> (<span class="string">"reply with :Q to quit, or else with one of the ~
                          options to set-iprint, which are ~&amp;0 (see :DOC ~
                          set-iprint)"</span> <span class="keyword">:t</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                 <span class="keyword">:nil</span> nil
                 <span class="keyword">:reset</span> <span class="keyword">:reset</span> <span class="keyword">:reset-enable</span> <span class="keyword">:reset-enable</span> <span class="keyword">:same</span> <span class="keyword">:same</span> <span class="keyword">:q</span> <span class="keyword">:q</span>))
             (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 <a class="sym-link local-def" href="#def-_2Aiprint-actions_2A" data-sym="*IPRINT-ACTIONS*" title="(defconst *iprint-actions* &#39;(t nil :reset :reset-enable :same))">*iprint-actions*</a>))
             state))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> action <span class="keyword">:q</span>) (silent-error state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-set-iprint-fn" data-sym="SET-IPRINT-FN" title="(defun set-iprint-fn
       (action0 share share-p soft-bound soft-bound-p hard-bound hard-bound-p
        ctx state)
  (cond
   ((not (member-eq action0 *iprint-actions*))
...">set-iprint-fn</a> action
            share
            share-p
            soft-bound
            soft-bound-p
            hard-bound
            hard-bound-p
            '<a class="sym-link local-def" href="#def-set-iprint" data-sym="SET-IPRINT" title="(defmacro set-iprint
          (
           &amp;optional (action &#39;:reset action-p)
           &amp;key (share &#39;:same share-p) (soft-bound &#39;1 soft-bound-p)
           (hard-bound &#39;1 hard-bound-p))
...">set-iprint</a>
            state))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Aevisc-tuple-sites_2A" data-defines="*EVISC-TUPLE-SITES*" data-references="QUOTE,DEFCONST" data-used-by="SET-EVISC-TUPLE-FN,SET-SITE-EVISC-TUPLE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*EVISC-TUPLE-SITES*">*evisc-tuple-sites*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>
  '(<span class="keyword">:term</span> <span class="keyword">:ld</span> <span class="keyword">:trace</span> <span class="keyword">:abbrev</span> <span class="keyword">:gag-mode</span> <span class="keyword">:brr</span>))</pre>
  </div>

<div class="form-block function" id="def-set-brr-evisc-tuple1" data-defines="SET-BRR-EVISC-TUPLE1" data-references="BRR-EVISC-TUPLE,QUOTE,F-PUT-GLOBAL,STATE,VAL,DEFUN" data-used-by="SET-SITE-EVISC-TUPLE" data-part-name="SET-BRR-EVISC-TUPLE1" data-part-args="STATE,VAL" data-part-body="STATE,VAL,BRR-EVISC-TUPLE,QUOTE,F-PUT-GLOBAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-BRR-EVISC-TUPLE1">set-brr-evisc-tuple1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-brr-evisc-tuple1" data-sym="SET-BRR-EVISC-TUPLE1" title="(defun set-brr-evisc-tuple1 (val state)
  (f-put-global &#39;brr-evisc-tuple val state))">set-brr-evisc-tuple1</a>
  (val state)
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-brr-evisc-tuple" data-sym="BRR-EVISC-TUPLE">brr-evisc-tuple</a> val state))</pre>
  </div>

<div class="form-block function" id="def-set-site-evisc-tuple" data-defines="SET-SITE-EVISC-TUPLE" data-references="HARD,ER,PROG2$,OTHERWISE,SET-BRR-EVISC-TUPLE1,SET-TRACE-EVISC-TUPLE,IF,LD-EVISC-TUPLE,GAG-MODE-EVISC-TUPLE,ABBREV-EVISC-TUPLE,TERM-EVISC-TUPLE,QUOTE,F-PUT-GLOBAL,CASE,STATE-P,STANDARD-EVISC-TUPLEP,T,EQ,NULL,OR,*EVISC-TUPLE-SITES*,MEMBER-EQ,AND,XARGS,DECLARE,STATE,CTX,EVISC-TUPLE,SITE,DEFUN" data-used-by="SET-EVISC-TUPLE-LST" data-part-name="SET-SITE-EVISC-TUPLE" data-part-args="STATE,CTX,EVISC-TUPLE,SITE" data-part-declare="STATE,STATE-P,STANDARD-EVISC-TUPLEP,T,EQ,EVISC-TUPLE,NULL,OR,*EVISC-TUPLE-SITES*,SITE,MEMBER-EQ,AND,XARGS,DECLARE" data-part-body="*EVISC-TUPLE-SITES*,CTX,HARD,ER,PROG2$,OTHERWISE,SET-BRR-EVISC-TUPLE1,SET-TRACE-EVISC-TUPLE,EQ,IF,LD-EVISC-TUPLE,GAG-MODE-EVISC-TUPLE,ABBREV-EVISC-TUPLE,STATE,EVISC-TUPLE,TERM-EVISC-TUPLE,QUOTE,F-PUT-GLOBAL,SITE,CASE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-SITE-EVISC-TUPLE">set-site-evisc-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-site-evisc-tuple" data-sym="SET-SITE-EVISC-TUPLE" title="(defun set-site-evisc-tuple (site evisc-tuple ctx state)
  (declare
   (xargs :guard
    (and (member-eq site *evisc-tuple-sites*)
         (or (null evisc-tuple) (eq evisc-tuple :default)
...">set-site-evisc-tuple</a>
  (site <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> ctx state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> site <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>)
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
          (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="keyword">:default</span>)
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> site <span class="keyword">:gag-mode</span>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>))
        (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state))))
  (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> site
    (<span class="keyword">:term</span> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> state))
    (<span class="keyword">:abbrev</span> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-abbrev-evisc-tuple" data-sym="ABBREV-EVISC-TUPLE">abbrev-evisc-tuple</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> state))
    (<span class="keyword">:gag-mode</span> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-gag-mode-evisc-tuple" data-sym="GAG-MODE-EVISC-TUPLE">gag-mode-evisc-tuple</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> state))
    (<span class="keyword">:ld</span> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a>
        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="keyword">:default</span>)
          nil
          <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
        state))
    (<span class="keyword">:trace</span> (<a class="sym-link local-def" href="#def-set-trace-evisc-tuple" data-sym="SET-TRACE-EVISC-TUPLE" title="(defun set-trace-evisc-tuple (val state) (declare (ignore val)) state)">set-trace-evisc-tuple</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="keyword">:default</span>)
          nil
          <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
        state))
    (<span class="keyword">:brr</span> (<a class="sym-link local-def" href="#def-set-brr-evisc-tuple1" data-sym="SET-BRR-EVISC-TUPLE1" title="(defun set-brr-evisc-tuple1 (val state)
  (f-put-global &#39;brr-evisc-tuple val state))">set-brr-evisc-tuple1</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> state))
    (otherwise (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          ctx
          <span class="string">"Implementation Error: Unrecognized keyword, ~x0.  ~
                            Expected evisc-tuple site: ~v1"</span>
          site
          <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>)
        state))))</pre>
  </div>

<div class="form-block function" id="def-chk-evisc-tuple" data-defines="CHK-EVISC-TUPLE" data-references="SOFT,ER,T,VALUE,STANDARD-EVISC-TUPLEP,EQ,NULL,OR,COND,STATE,CTX,EVISC-TUPLE,DEFUN" data-used-by="SET-EVISC-TUPLE-FN" data-part-name="CHK-EVISC-TUPLE" data-part-args="STATE,CTX,EVISC-TUPLE" data-part-body="CTX,SOFT,ER,T,VALUE,STANDARD-EVISC-TUPLEP,EQ,EVISC-TUPLE,NULL,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-EVISC-TUPLE">chk-evisc-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-evisc-tuple" data-sym="CHK-EVISC-TUPLE" title="(defun chk-evisc-tuple (evisc-tuple ctx state)
  (cond
   ((or (null evisc-tuple) (eq evisc-tuple :default)
        (standard-evisc-tuplep evisc-tuple))
    (value nil))
...">chk-evisc-tuple</a>
  (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <span class="keyword">:default</span>)
       (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"Illegal evisc-tuple argument, ~x0.  See :DOC set-evisc-tuple."</span>
        <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>))))</pre>
  </div>

<div class="form-block function" id="def-set-evisc-tuple-lst" data-defines="SET-EVISC-TUPLE-LST" data-references="CONS,CDR,CAR,SET-SITE-EVISC-TUPLE,PPROGN,T,REVERSE,VALUE,ENDP,COND,STATE,CTX,ACC,EVISC-TUPLE,KEYS,DEFUN" data-used-by="SET-EVISC-TUPLE-FN,SET-EVISC-TUPLE-FN1" data-part-name="SET-EVISC-TUPLE-LST" data-part-args="STATE,CTX,ACC,EVISC-TUPLE,KEYS" data-part-body="CONS,CDR,SET-EVISC-TUPLE-LST,STATE,CTX,EVISC-TUPLE,CAR,SET-SITE-EVISC-TUPLE,PPROGN,T,ACC,REVERSE,VALUE,KEYS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-EVISC-TUPLE-LST">set-evisc-tuple-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-evisc-tuple-lst" data-sym="SET-EVISC-TUPLE-LST" title="(defun set-evisc-tuple-lst (keys evisc-tuple acc ctx state)
  (cond ((endp keys) (value (reverse acc)))
        (t
         (pprogn (set-site-evisc-tuple (car keys) evisc-tuple ctx state)
                 (set-evisc-tuple-lst (cdr keys) evisc-tuple">set-evisc-tuple-lst</a>
  (keys <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> acc ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> keys) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-set-site-evisc-tuple" data-sym="SET-SITE-EVISC-TUPLE" title="(defun set-site-evisc-tuple (site evisc-tuple ctx state)
  (declare
   (xargs :guard
    (and (member-eq site *evisc-tuple-sites*)
         (or (null evisc-tuple) (eq evisc-tuple :default)
...">set-site-evisc-tuple</a> (car keys) <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> ctx state)
        (<a class="sym-link local-def" href="#def-set-evisc-tuple-lst" data-sym="SET-EVISC-TUPLE-LST" title="(defun set-evisc-tuple-lst (keys evisc-tuple acc ctx state)
  (cond ((endp keys) (value (reverse acc)))
        (t
         (pprogn (set-site-evisc-tuple (car keys) evisc-tuple ctx state)
                 (set-evisc-tuple-lst (cdr keys) evisc-tuple">set-evisc-tuple-lst</a> (cdr keys)
          <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>
          (cons (car keys) acc)
          ctx
          state)))))</pre>
  </div>

<div class="form-block function" id="def-set-evisc-tuple-fn1" data-defines="SET-EVISC-TUPLE-FN1" data-references="IF,CDR,OTHERWISE,VALUE,CASE,CAR,SYMBOL-NAME,STRING-APPEND,CONS,LIST,QUOTE,ACL2-QUERY,ANS,ER-LET*,T,SET-EVISC-TUPLE-LST,REVERSE,LST,LET,ENDP,COND,STATE-P,STANDARD-EVISC-TUPLEP,SYMBOL-LISTP,AND,XARGS,DECLARE,STATE,CTX,ACC,EVISC-TUPLE,ALL-KEYS,KEYS,DEFUN" data-used-by="SET-EVISC-TUPLE-FN" data-part-name="SET-EVISC-TUPLE-FN1" data-part-args="STATE,CTX,ACC,EVISC-TUPLE,ALL-KEYS,KEYS" data-part-declare="STATE,STATE-P,ACC,EVISC-TUPLE,STANDARD-EVISC-TUPLEP,ALL-KEYS,KEYS,SYMBOL-LISTP,AND,XARGS,DECLARE" data-part-body="IF,CDR,SET-EVISC-TUPLE-FN1,OTHERWISE,VALUE,ALL-KEYS,CASE,CAR,SYMBOL-NAME,STRING-APPEND,CONS,LIST,QUOTE,ACL2-QUERY,ANS,ER-LET*,T,STATE,CTX,EVISC-TUPLE,SET-EVISC-TUPLE-LST,ACC,REVERSE,LST,LET,KEYS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-EVISC-TUPLE-FN1">set-evisc-tuple-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-evisc-tuple-fn1" data-sym="SET-EVISC-TUPLE-FN1" title="(defun set-evisc-tuple-fn1 (keys all-keys evisc-tuple acc ctx state)
  (declare
   (xargs :guard
    (and (symbol-listp keys) (symbol-listp all-keys)
         (standard-evisc-tuplep evisc-tuple) (symbol-listp acc)
...">set-evisc-tuple-fn1</a>
  (keys all-keys <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> acc ctx state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> keys)
        (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> all-keys)
        (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
        (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> acc)
        (<a class="sym-link system" href="axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> keys) (let ((lst (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc)))
        (<a class="sym-link local-def" href="#def-set-evisc-tuple-lst" data-sym="SET-EVISC-TUPLE-LST" title="(defun set-evisc-tuple-lst (keys evisc-tuple acc ctx state)
  (cond ((endp keys) (value (reverse acc)))
        (t
         (pprogn (set-site-evisc-tuple (car keys) evisc-tuple ctx state)
                 (set-evisc-tuple-lst (cdr keys) evisc-tuple">set-evisc-tuple-lst</a> lst <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> nil ctx state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ans (<a class="sym-link system" href="rewrite.html#def-acl2-query" data-sym="ACL2-QUERY">acl2-query</a> <span class="keyword">:set-evisc-tuple</span> '(<span class="string">"Do you wish to set ~s0?"</span> <span class="keyword">:y</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
               <span class="keyword">:n</span> nil
               <span class="keyword">:all</span> <span class="keyword">:all</span> <span class="keyword">:rest</span> <span class="keyword">:rest</span> <span class="keyword">:q</span> <span class="keyword">:q</span> <span class="keyword">:abort</span> <span class="keyword">:abort</span> <span class="keyword">:?</span> (<span class="string">"reply with REST to set ~s0 and all remaining ~
                    evisc-tuples, ALL to set all evisc-tuples, Q to set only ~
                    the evisc-tuples already specified, or ABORT to quit ~
                    without setting any evisc-tuples at all; or reply with Y ~
                    or N to set or not to set (respectively) ~s0 before ~
                    considering whether to set other evisc-tuples"</span> <span class="keyword">:y</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                 <span class="keyword">:n</span> nil
                 <span class="keyword">:all</span> <span class="keyword">:all</span> <span class="keyword">:rest</span> <span class="keyword">:rest</span> <span class="keyword">:q</span> <span class="keyword">:q</span> <span class="keyword">:abort</span> <span class="keyword">:abort</span>))
             (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                 (<a class="sym-link system" href="axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> (symbol-name (car keys)) <span class="string">"-EVISC-TUPLE"</span>)))
             state)))
        (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> ans
          ((<span class="keyword">:rest</span> <span class="keyword">:all</span> <span class="keyword">:q</span>) (let ((lst (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> ans (<span class="keyword">:rest</span> keys) (<span class="keyword">:all</span> all-keys) (<span class="keyword">:q</span> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc)))))
              (<a class="sym-link local-def" href="#def-set-evisc-tuple-lst" data-sym="SET-EVISC-TUPLE-LST" title="(defun set-evisc-tuple-lst (keys evisc-tuple acc ctx state)
  (cond ((endp keys) (value (reverse acc)))
        (t
         (pprogn (set-site-evisc-tuple (car keys) evisc-tuple ctx state)
                 (set-evisc-tuple-lst (cdr keys) evisc-tuple">set-evisc-tuple-lst</a> lst <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> nil ctx state)))
          (<span class="keyword">:abort</span> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
          (otherwise (<a class="sym-link local-def" href="#def-set-evisc-tuple-fn1" data-sym="SET-EVISC-TUPLE-FN1" title="(defun set-evisc-tuple-fn1 (keys all-keys evisc-tuple acc ctx state)
  (declare
   (xargs :guard
    (and (symbol-listp keys) (symbol-listp all-keys)
         (standard-evisc-tuplep evisc-tuple) (symbol-listp acc)
...">set-evisc-tuple-fn1</a> (cdr keys)
              all-keys
              <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>
              (if ans
                (cons (car keys) acc)
                acc)
              ctx
              state)))))))</pre>
  </div>

<div class="form-block function" id="def-iprint-virginp" data-defines="IPRINT-VIRGINP" data-references="IPRINT-LAST-INDEX*,INT=,NULL,DEFAULT,BOUND,QUOTE,F-GET-GLOBAL,IPRINT-AR,LET*,IPRINT-ENABLEDP,NOT,AND,STATE,DEFUN" data-used-by="SET-EVISC-TUPLE-FN" data-part-name="IPRINT-VIRGINP" data-part-args="STATE" data-part-body="IPRINT-LAST-INDEX*,INT=,NULL,DEFAULT,BOUND,QUOTE,F-GET-GLOBAL,IPRINT-AR,LET*,STATE,IPRINT-ENABLEDP,NOT,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IPRINT-VIRGINP">iprint-virginp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-iprint-virginp" data-sym="IPRINT-VIRGINP" title="(defun iprint-virginp (state)
  (and (not (iprint-enabledp state))
       (let* ((iprint-ar (f-get-global &#39;iprint-ar state))
              (bound (default &#39;iprint-ar iprint-ar)))
         (and (null bound) (int= 0 (iprint-last-index* iprint-ar))))))">iprint-virginp</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-iprint-enabledp" data-sym="IPRINT-ENABLEDP">iprint-enabledp</a> state))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((iprint-ar (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'iprint-ar state)) (bound (<a class="sym-link system" href="axioms.html#def-default" data-sym="DEFAULT">default</a> 'iprint-ar iprint-ar)))
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> bound) (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-iprint-last-index_2A" data-sym="IPRINT-LAST-INDEX*">iprint-last-index*</a> iprint-ar))))))</pre>
  </div>

<div class="form-block function" id="def-set-evisc-tuple-fn" data-defines="SET-EVISC-TUPLE-FN" data-references="SET-EVISC-TUPLE-LST,SET-EVISC-TUPLE-FN1,SET-IPRINT,IPRINT-VIRGINP,SET-IPRINT-FN,CHK-EVISC-TUPLE,ER-PROGN,VALUE,GAG-MODE-EVISC-TUPLE,F-PUT-GLOBAL,SET-TRACE-EVISC-TUPLE,PPROGN,LIST,SYMBOLP,IF,MEMBER-EQ,*EVISC-TUPLE-SITES*,SUBSETP-EQ,TRUE-LISTP,AND,OR,NOT,SOFT,ER,NULL,T,EQ,COND,FAIL-STRING,SET-EVISC-TUPLE,QUOTE,CTX,LET,STATE,SITES-P,SITES,IPRINT-P,IPRINT,EVISC-TUPLE,DEFUN" data-used-by="SET-EVISC-TUPLE" data-part-name="SET-EVISC-TUPLE-FN" data-part-args="STATE,SITES-P,SITES,IPRINT-P,IPRINT,EVISC-TUPLE" data-part-body="SET-EVISC-TUPLE-LST,SET-EVISC-TUPLE-FN1,SITES-P,SET-IPRINT,IPRINT-VIRGINP,IPRINT,SET-IPRINT-FN,IPRINT-P,CHK-EVISC-TUPLE,ER-PROGN,VALUE,GAG-MODE-EVISC-TUPLE,F-PUT-GLOBAL,STATE,SET-TRACE-EVISC-TUPLE,PPROGN,LIST,SYMBOLP,IF,MEMBER-EQ,*EVISC-TUPLE-SITES*,SUBSETP-EQ,TRUE-LISTP,AND,OR,NOT,SOFT,ER,SITES,NULL,T,EVISC-TUPLE,EQ,COND,FAIL-STRING,SET-EVISC-TUPLE,QUOTE,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-EVISC-TUPLE-FN">set-evisc-tuple-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-evisc-tuple-fn" data-sym="SET-EVISC-TUPLE-FN" title="(defun set-evisc-tuple-fn (evisc-tuple iprint iprint-p sites sites-p state)
  (let ((ctx &#39;set-evisc-tuple)
        (fail-string
         &quot;The legal values for :SITES are :ALL and either members ~
                      or subsets of the list ~x0.  The :SITES ~x1 is thus ~
...">set-evisc-tuple-fn</a>
  (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> iprint iprint-p sites sites-p state)
  (let ((ctx '<a class="sym-link local-def" href="#def-set-evisc-tuple" data-sym="SET-EVISC-TUPLE" title="(defmacro set-evisc-tuple
          (evisc-tuple &amp;key (iprint &#39;nil iprint-p) (sites &#39;nil sites-p))
  `(set-evisc-tuple-fn ,evisc-tuple ,iprint ,iprint-p ,sites ,sites-p state))">set-evisc-tuple</a>) (fail-string <span class="string">"The legal values for :SITES are :ALL and either members ~
                      or subsets of the list ~x0.  The :SITES ~x1 is thus ~
                      illegal.  See :DOC set-evisc-tuple."</span>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> sites) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The :SITES argument is required for set-evisc-tuple when a ~
                  value of T is specified, in which case :SITES should ~
                  specify :TRACE and/or :GAG-MODE.~ ~ See :DOC ~
                  set-evisc-tuple."</span>))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> sites)
                 (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> sites <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>))
               (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> sites <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx fail-string <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a> sites))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((sites (if (symbolp sites)
                   (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> sites)
                   sites)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> sites '(<span class="keyword">:trace</span> <span class="keyword">:gag-mode</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"You have called set-evisc-tuple with an ~
                             `evisc-tuple&#39; of T.  The only :SITES for which ~
                             this is legal are :TRACE and :GAG-MODE, but you ~
                             have supplied ~&amp;0."</span>
                    sites))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:trace</span> sites) (<a class="sym-link local-def" href="#def-set-trace-evisc-tuple" data-sym="SET-TRACE-EVISC-TUPLE" title="(defun set-trace-evisc-tuple (val state) (declare (ignore val)) state)">set-trace-evisc-tuple</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:gag-mode</span> sites) (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-a.html#def-gag-mode-evisc-tuple" data-sym="GAG-MODE-EVISC-TUPLE">gag-mode-evisc-tuple</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> sites))))))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-evisc-tuple" data-sym="CHK-EVISC-TUPLE" title="(defun chk-evisc-tuple (evisc-tuple ctx state)
  (cond
   ((or (null evisc-tuple) (eq evisc-tuple :default)
        (standard-evisc-tuplep evisc-tuple))
    (value nil))
...">chk-evisc-tuple</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> ctx state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (iprint-p (<a class="sym-link local-def" href="#def-set-iprint-fn" data-sym="SET-IPRINT-FN" title="(defun set-iprint-fn
       (action0 share share-p soft-bound soft-bound-p hard-bound hard-bound-p
        ctx state)
  (cond
   ((not (member-eq action0 *iprint-actions*))
...">set-iprint-fn</a> iprint <span class="keyword">:same</span> nil nil nil nil nil ctx state))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-iprint-virginp" data-sym="IPRINT-VIRGINP" title="(defun iprint-virginp (state)
  (and (not (iprint-enabledp state))
       (let* ((iprint-ar (f-get-global &#39;iprint-ar state))
              (bound (default &#39;iprint-ar iprint-ar)))
         (and (null bound) (int= 0 (iprint-last-index* iprint-ar))))))">iprint-virginp</a> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-set-iprint" data-sym="SET-IPRINT" title="(defmacro set-iprint
          (
           &amp;optional (action &#39;:reset action-p)
           &amp;key (share &#39;:same share-p) (soft-bound &#39;1 soft-bound-p)
           (hard-bound &#39;1 hard-bound-p))
...">set-iprint</a>)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> sites-p) (<a class="sym-link local-def" href="#def-set-evisc-tuple-fn1" data-sym="SET-EVISC-TUPLE-FN1" title="(defun set-evisc-tuple-fn1 (keys all-keys evisc-tuple acc ctx state)
  (declare
   (xargs :guard
    (and (symbol-listp keys) (symbol-listp all-keys)
         (standard-evisc-tuplep evisc-tuple) (symbol-listp acc)
...">set-evisc-tuple-fn1</a> <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>
                <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>
                <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>
                nil
                ctx
                state))
            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> sites <span class="keyword">:all</span>) (<a class="sym-link local-def" href="#def-set-evisc-tuple-lst" data-sym="SET-EVISC-TUPLE-LST" title="(defun set-evisc-tuple-lst (keys evisc-tuple acc ctx state)
  (cond ((endp keys) (value (reverse acc)))
        (t
         (pprogn (set-site-evisc-tuple (car keys) evisc-tuple ctx state)
                 (set-evisc-tuple-lst (cdr keys) evisc-tuple">set-evisc-tuple-lst</a> <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>
                <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>
                nil
                ctx
                state))
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> sites)
               (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> sites <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>)) (<a class="sym-link local-def" href="#def-set-evisc-tuple-lst" data-sym="SET-EVISC-TUPLE-LST" title="(defun set-evisc-tuple-lst (keys evisc-tuple acc ctx state)
  (cond ((endp keys) (value (reverse acc)))
        (t
         (pprogn (set-site-evisc-tuple (car keys) evisc-tuple ctx state)
                 (set-evisc-tuple-lst (cdr keys) evisc-tuple">set-evisc-tuple-lst</a> sites <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> nil ctx state))
            ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> sites <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a>) (<a class="sym-link local-def" href="#def-set-evisc-tuple-lst" data-sym="SET-EVISC-TUPLE-LST" title="(defun set-evisc-tuple-lst (keys evisc-tuple acc ctx state)
  (cond ((endp keys) (value (reverse acc)))
        (t
         (pprogn (set-site-evisc-tuple (car keys) evisc-tuple ctx state)
                 (set-evisc-tuple-lst (cdr keys) evisc-tuple">set-evisc-tuple-lst</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> sites) <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> nil ctx state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx fail-string <a class="sym-link local-def" href="#def-_2Aevisc-tuple-sites_2A" data-sym="*EVISC-TUPLE-SITES*" title="(defconst *evisc-tuple-sites* &#39;(:term :ld :trace :abbrev :gag-mode :brr))">*evisc-tuple-sites*</a> sites))))))))</pre>
  </div>

<div class="form-block macro" id="def-set-evisc-tuple" data-defines="SET-EVISC-TUPLE" data-references="STATE,SET-EVISC-TUPLE-FN,QUASIQUOTE,SITES-P,SITES,IPRINT-P,QUOTE,IPRINT,&KEY,EVISC-TUPLE,DEFMACRO" data-used-by="SET-EVISC-TUPLE-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-EVISC-TUPLE">set-evisc-tuple</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-evisc-tuple" data-sym="SET-EVISC-TUPLE" title="(defmacro set-evisc-tuple
          (evisc-tuple &amp;key (iprint &#39;nil iprint-p) (sites &#39;nil sites-p))
  `(set-evisc-tuple-fn ,evisc-tuple ,iprint ,iprint-p ,sites ,sites-p state))">set-evisc-tuple</a>
  (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> &amp;key
    (iprint 'nil iprint-p)
    (sites 'nil sites-p))
  `(<a class="sym-link local-def" href="#def-set-evisc-tuple-fn" data-sym="SET-EVISC-TUPLE-FN" title="(defun set-evisc-tuple-fn (evisc-tuple iprint iprint-p sites sites-p state)
  (let ((ctx &#39;set-evisc-tuple)
        (fail-string
         &quot;The legal values for :SITES are :ALL and either members ~
                      or subsets of the list ~x0.  The :SITES ~x1 is thus ~
...">set-evisc-tuple-fn</a> ,EVISC-TUPLE
    ,IPRINT
    ,IPRINT-P
    ,SITES
    ,SITES-P
    state))</pre>
  </div>

<div class="form-block macro" id="def-top-level" data-defines="TOP-LEVEL" data-references="@,MV,IGNORE,UBT!,T,IGNORABLE,XARGS,DECLARE,TOP-LEVEL-FN,DEFUN,ERROR,WITH-OUTPUT,VALUE,TOP-LEVEL-ERRORP,F-PUT-GLOBAL,PPROGN,QUOTE,LD,STATE,VAL,ERP,MV-LET,QUASIQUOTE,DECLARES,&REST,FORM,DEFMACRO" data-used-by="ACL2-RAW-EVAL" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOP-LEVEL">top-level</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-top-level" data-sym="TOP-LEVEL" title="(defmacro top-level (form &amp;rest declares)
  `(mv-let (erp val state)
           (ld
            &#39;((pprogn (f-put-global &#39;top-level-errorp nil state)
                      (value :invisible))
...">top-level</a>
  (form &amp;rest declares)
  `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
    (ld '((<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'top-level-errorp nil state)
         (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)) (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> <span class="keyword">:all</span> <span class="keyword">:on</span> error
          (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> top-level-fn
            (state)
            (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state)
              (ignorable state))
            ,@DECLARES
            ,FORM))
        (ld '((<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'top-level-errorp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)
             (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)) (top-level-fn state)
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'top-level-errorp nil state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))
          <span class="keyword">:ld-post-eval-print</span> <span class="keyword">:command-conventions</span> <span class="keyword">:ld-error-action</span> <span class="keyword">:return</span> <span class="keyword">:ld-error-triples</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
          <span class="keyword">:ld-user-stobjs-modified-warning</span> <span class="keyword">:same</span>)
        (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> <span class="keyword">:all</span> <span class="keyword">:on</span> error (<a class="sym-link system" href="history-management.html#def-ubt_21" data-sym="UBT!">ubt!</a> 'top-level-fn)))
      <span class="keyword">:ld-pre-eval-print</span> nil
      <span class="keyword">:ld-post-eval-print</span> nil
      <span class="keyword">:ld-error-action</span> <span class="keyword">:error</span> <span class="keyword">:ld-error-triples</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:ld-verbose</span> nil
      <span class="keyword">:ld-prompt</span> nil
      <span class="keyword">:ld-user-stobjs-modified-warning</span> <span class="keyword">:same</span>)
    (declare (ignore erp val))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-_40" data-sym="@">@</a> top-level-errorp) <span class="keyword">:invisible</span> state)))</pre>
  </div>

<div class="form-block function" id="def-necc-name-args-instance" data-defines="NECC-NAME-ARGS-INSTANCE" data-references="T,CDR,EQUAL,QUOTE,CONS,CAR,EQ,ENDP,COND,TRUE-LISTP,XARGS,DECLARE,ILKS,DEFUN" data-part-name="NECC-NAME-ARGS-INSTANCE" data-part-args="ILKS" data-part-declare="ILKS,TRUE-LISTP,XARGS,DECLARE" data-part-body="T,CDR,NECC-NAME-ARGS-INSTANCE,EQUAL,QUOTE,CONS,CAR,EQ,ILKS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NECC-NAME-ARGS-INSTANCE">necc-name-args-instance</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-necc-name-args-instance" data-sym="NECC-NAME-ARGS-INSTANCE" title="(defun necc-name-args-instance (ilks)
  (declare (xargs :guard (true-listp ilks) :mode :logic))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons &#39;equal (necc-name-args-instance (cdr ilks))))
...">necc-name-args-instance</a>
  (ilks)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> ilks) <span class="keyword">:mode</span> <span class="keyword">:logic</span>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> ilks) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ilks) <span class="keyword">:fn</span>) (cons 'equal (<a class="sym-link local-def" href="#def-necc-name-args-instance" data-sym="NECC-NAME-ARGS-INSTANCE" title="(defun necc-name-args-instance (ilks)
  (declare (xargs :guard (true-listp ilks) :mode :logic))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons &#39;equal (necc-name-args-instance (cdr ilks))))
...">necc-name-args-instance</a> (cdr ilks))))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ilks) <span class="keyword">:expr</span>) (cons <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-necc-name-args-instance" data-sym="NECC-NAME-ARGS-INSTANCE" title="(defun necc-name-args-instance (ilks)
  (declare (xargs :guard (true-listp ilks) :mode :logic))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons &#39;equal (necc-name-args-instance (cdr ilks))))
...">necc-name-args-instance</a> (cdr ilks))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons nil (<a class="sym-link local-def" href="#def-necc-name-args-instance" data-sym="NECC-NAME-ARGS-INSTANCE" title="(defun necc-name-args-instance (ilks)
  (declare (xargs :guard (true-listp ilks) :mode :logic))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons &#39;equal (necc-name-args-instance (cdr ilks))))
...">necc-name-args-instance</a> (cdr ilks))))))</pre>
  </div>

<div class="form-block function" id="def-defwarrant-events" data-defines="DEFWARRANT-EVENTS" data-references="CAR,CDR,NULL,IF,HYP,TAMENESS-CONDITIONS,HYP-LIST,E/D,HIDE,X,ARGS,APPLY$,BADGE,EQUAL,AND,FORCE,IMPLIES,DEFTHM,DISABLE,IN-THEORY,QUASIQUOTE,T,APPLY$-BADGE,ACCESS,EQ,COND,STRING,LIST,QUOTE,SYMBOL-NAME,APPEND,COERCE,INTERN-IN-PACKAGE-OF-SYMBOL,NECC-NAME,APPLY$-RULE-NAME,RULE-NAME,WARRANT-NAME,NAME,LET*,XARGS,DECLARE,BDG,FORMALS,FN,DEFUN" data-part-name="DEFWARRANT-EVENTS" data-part-args="BDG,FORMALS,FN" data-part-declare="XARGS,DECLARE" data-part-body="CAR,CDR,NULL,IF,HYP,TAMENESS-CONDITIONS,HYP-LIST,E/D,HIDE,X,ARGS,APPLY$,BADGE,EQUAL,AND,FORCE,IMPLIES,DEFTHM,DISABLE,IN-THEORY,QUASIQUOTE,T,BDG,APPLY$-BADGE,ACCESS,EQ,COND,STRING,LIST,QUOTE,SYMBOL-NAME,APPEND,COERCE,INTERN-IN-PACKAGE-OF-SYMBOL,NECC-NAME,APPLY$-RULE-NAME,RULE-NAME,FN,WARRANT-NAME,NAME,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWARRANT-EVENTS">defwarrant-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defwarrant-events" data-sym="DEFWARRANT-EVENTS" title="(defun defwarrant-events (fn formals bdg)
  (declare (xargs :mode :program))
  (let* ((name (warrant-name fn))
         (rule-name (apply$-rule-name fn))
         (necc-name
...">defwarrant-events</a>
  (fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> bdg)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name (warrant-name fn)) (rule-name (<a class="sym-link system" href="rewrite.html#def-apply_24-rule-name" data-sym="APPLY$-RULE-NAME">apply$-rule-name</a> fn))
      (necc-name (intern-in-package-of-symbol (coerce (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (coerce (symbol-name name) '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)
              '(#\- #\N #\E #\C #\C))
            '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>)
          fn)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge bdg <span class="keyword">:ilks</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) `(,(MAKE-APPLY$-WARRANT-DEFUN-SK FN FORMALS BDG NIL) (<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link local-def" href="#def-disable" data-sym="DISABLE" title="(defmacro disable (&amp;rest rst)
  (list &#39;set-difference-theories &#39;(current-theory :here) (kwote rst)))">disable</a> ,(DEFINITION-RULE-NAME NAME)))
          (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,RULE-NAME
            (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a> (,(WARRANT-NAME FN)))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (badge ',FN) ',BDG)
                (equal (apply$ ',FN <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                  ,(IF (EQL (ACCESS APPLY$-BADGE BDG :OUT-ARITY) 1)
     `(,FN ,@(SUCCESSIVE-CADRS FORMALS &#39;ARGS))
     `(MV-LIST &#39;,(ACCESS APPLY$-BADGE BDG :OUT-ARITY)
               (,FN ,@(SUCCESSIVE-CADRS FORMALS &#39;ARGS)))))))
            <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ,NECC-NAME
               <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x) (<a class="sym-link system" href="axioms.html#def-hide" data-sym="HIDE">hide</a> (badge x))))
               <span class="keyword">:in-theory</span> (<a class="sym-link system" href="axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (badge apply$) (,NECC-NAME ,FN)))))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((hyp-list (<a class="sym-link local-def" href="#def-tameness-conditions" data-sym="TAMENESS-CONDITIONS" title="(defun tameness-conditions (ilks var)
  (declare (xargs :mode :program))
  (cond ((endp ilks) nil)
        ((eq (car ilks) :fn)
         (cons `(tamep-functionp (car ,var))
...">tameness-conditions</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge bdg <span class="keyword">:ilks</span>) '<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (hyp (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr hyp-list))
                (car hyp-list)
                `(<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ,@HYP-LIST))))
          `(,(MAKE-APPLY$-WARRANT-DEFUN-SK FN FORMALS BDG NIL) (<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link local-def" href="#def-disable" data-sym="DISABLE" title="(defmacro disable (&amp;rest rst)
  (list &#39;set-difference-theories &#39;(current-theory :here) (kwote rst)))">disable</a> ,(DEFINITION-RULE-NAME NAME)))
            (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,RULE-NAME
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a> (,(WARRANT-NAME FN)))
                  (equal (badge ',FN) ',BDG))
                (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a> (,(WARRANT-NAME FN))) ,HYP)
                  (equal (apply$ ',FN <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                    ,(IF (EQL (ACCESS APPLY$-BADGE BDG :OUT-ARITY) 1)
     `(,FN ,@(SUCCESSIVE-CADRS FORMALS &#39;ARGS))
     `(MV-LIST &#39;,(ACCESS APPLY$-BADGE BDG :OUT-ARITY)
               (,FN ,@(SUCCESSIVE-CADRS FORMALS &#39;ARGS)))))))
              <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> ,NECC-NAME
                    (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ',(NECC-NAME-ARGS-INSTANCE (ACCESS APPLY$-BADGE BDG :ILKS)))) (<span class="keyword">:instance</span> ,NECC-NAME))
                 <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x) (<a class="sym-link system" href="axioms.html#def-hide" data-sym="HIDE">hide</a> (badge x))))
                 <span class="keyword">:in-theory</span> (<a class="sym-link system" href="axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (badge apply$) (,NECC-NAME)))))))))))</pre>
  </div>

<div class="form-block function" id="def-translate-defattach-helpers" data-defines="TRANSLATE-DEFATTACH-HELPERS" data-references="CONS,HARD,OTHERWISE,TRANSLATE-INSTRUCTIONS,DEFAULT-HINTS,TRANSLATE-HINTS+,CASE,EQ,QUOTE,MEMBER-EQ,AND,OR,SOFT,ER,ASSOC-EQ,TVAL,CDDR,REST,ER-LET*,CADR,VAL,CAR,KEY,LET,T,VALUE,ENDP,COND,STATE,WRLD,CTX,NAME-TREE,KWD-VALUE-LST,DEFUN" data-used-by="PROCESS-DEFATTACH-ARGS,PROCESS-DEFATTACH-ARGS1" data-part-name="TRANSLATE-DEFATTACH-HELPERS" data-part-args="STATE,WRLD,CTX,NAME-TREE,KWD-VALUE-LST" data-part-body="CONS,HARD,OTHERWISE,TRANSLATE-INSTRUCTIONS,DEFAULT-HINTS,TRANSLATE-HINTS+,CASE,EQ,QUOTE,MEMBER-EQ,AND,OR,SOFT,ER,ASSOC-EQ,TVAL,STATE,WRLD,CTX,NAME-TREE,CDDR,TRANSLATE-DEFATTACH-HELPERS,REST,ER-LET*,CADR,VAL,CAR,KEY,LET,T,VALUE,KWD-VALUE-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-DEFATTACH-HELPERS">translate-defattach-helpers</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-defattach-helpers" data-sym="TRANSLATE-DEFATTACH-HELPERS" title="(defun translate-defattach-helpers (kwd-value-lst name-tree ctx wrld state)
  (cond ((endp kwd-value-lst) (value nil))
        (t
         (let ((key (car kwd-value-lst)) (val (cadr kwd-value-lst)))
           (er-let*
...">translate-defattach-helpers</a>
  (kwd-value-lst name-tree ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> kwd-value-lst) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((key (car kwd-value-lst)) (val (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> kwd-value-lst)))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((<a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link local-def" href="#def-translate-defattach-helpers" data-sym="TRANSLATE-DEFATTACH-HELPERS" title="(defun translate-defattach-helpers (kwd-value-lst name-tree ctx wrld state)
  (cond ((endp kwd-value-lst) (value nil))
        (t
         (let ((key (car kwd-value-lst)) (val (cadr kwd-value-lst)))
           (er-let*
...">translate-defattach-helpers</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> kwd-value-lst)
               name-tree
               ctx
               wrld
               state)) (tval (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"The key ~x0 occurs more than once in the same context ~
                     for a defattach event."</span>
                    key))
                ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key '(<span class="keyword">:otf-flg</span> <span class="keyword">:hints</span>))
                     (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:instructions</span> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>))
                   (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key <span class="keyword">:instructions</span>)
                     (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:otf-flg</span> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>) (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:hints</span> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"The combination of :INSTRUCTIONS and either :HINTS or ~
                     :OTF-FLG is illegal for the same context in a defattach ~
                     event."</span>))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> key
                    (<span class="keyword">:hints</span> (<a class="sym-link system" href="history-management.html#def-translate-hints_2B" data-sym="TRANSLATE-HINTS+">translate-hints+</a> name-tree
                        val
                        (<a class="sym-link system" href="axioms.html#def-default-hints" data-sym="DEFAULT-HINTS">default-hints</a> wrld)
                        ctx
                        wrld
                        state))
                    (<span class="keyword">:instructions</span> (<a class="sym-link system" href="defthm.html#def-translate-instructions" data-sym="TRANSLATE-INSTRUCTIONS">translate-instructions</a> val ctx state))
                    (<span class="keyword">:otf-flg</span> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))
                    (<span class="keyword">:attach</span> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> val '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                            ctx
                            <span class="string">"The only legal values for keyword :ATTACH in ~
                                 a defattach event are ~&amp;0.  The value ~x1 is ~
                                 thus illegal."</span>
                            '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)
                            val))))
                    (otherwise (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                          ctx
                          <span class="string">"Implementation error: Should already have ~
                               checked keys in process-defattach-args1."</span>))))))))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons (cons key tval) <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Adefattach-keys_2A" data-defines="*DEFATTACH-KEYS*" data-references="QUOTE,DEFCONST" data-used-by="*DEFATTACH-KEYS-EXTENDED*,PROCESS-DEFATTACH-ARGS1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*DEFATTACH-KEYS*">*defattach-keys*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Adefattach-keys_2A" data-sym="*DEFATTACH-KEYS*" title="(defconst *defattach-keys* &#39;(:hints :instructions :otf-flg :attach))">*defattach-keys*</a>
  '(<span class="keyword">:hints</span> <span class="keyword">:instructions</span> <span class="keyword">:otf-flg</span> <span class="keyword">:attach</span>))</pre>
  </div>

<div class="form-block function" id="def-defattach-unknown-constraints-error" data-defines="DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR" data-references="SOFT,ER,STATE,CTX,NAME,DEFUN" data-used-by="DEFATTACH-CONSTRAINT,PROCESS-DEFATTACH-ARGS1" data-part-name="DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR" data-part-args="STATE,CTX,NAME" data-part-body="NAME,CTX,SOFT,ER" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR">defattach-unknown-constraints-error</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-unknown-constraints-error" data-sym="DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR" title="(defun defattach-unknown-constraints-error (name ctx state)
  (er soft ctx
      &quot;Attachment is disallowed in this context, because the function ~x0 has ~
       unknown-constraints.  See :DOC partial-encapsulate.&quot;
      name))">defattach-unknown-constraints-error</a>
  (name ctx state)
  (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
    ctx
    <span class="string">"Attachment is disallowed in this context, because the function ~x0 has ~
       unknown-constraints.  See :DOC partial-encapsulate."</span>
    name))</pre>
  </div>

<div class="form-block function" id="def-intersection-domains" data-defines="INTERSECTION-DOMAINS" data-references="CDR,CONS,CAAR,ASSOC-EQ,CONSP,IF,SYMBOL-ALISTP,AND,XARGS,DECLARE,A2,A1,DEFUN" data-part-name="INTERSECTION-DOMAINS" data-part-args="A2,A1" data-part-declare="A2,A1,SYMBOL-ALISTP,AND,XARGS,DECLARE" data-part-body="CDR,INTERSECTION-DOMAINS,CONS,A2,CAAR,ASSOC-EQ,A1,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTERSECTION-DOMAINS">intersection-domains</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-intersection-domains" data-sym="INTERSECTION-DOMAINS" title="(defun intersection-domains (a1 a2)
  (declare (xargs :guard (and (symbol-alistp a1) (symbol-alistp a2))))
  (if (consp a1)
      (if (assoc-eq (caar a1) a2)
          (cons (caar a1) (intersection-domains (cdr a1) a2))
...">intersection-domains</a>
  (a1 a2)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> a1) (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> a2))))
  (if (consp a1)
    (if (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> a1) a2)
      (cons (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> a1) (<a class="sym-link local-def" href="#def-intersection-domains" data-sym="INTERSECTION-DOMAINS" title="(defun intersection-domains (a1 a2)
  (declare (xargs :guard (and (symbol-alistp a1) (symbol-alistp a2))))
  (if (consp a1)
      (if (assoc-eq (caar a1) a2)
          (cons (caar a1) (intersection-domains (cdr a1) a2))
...">intersection-domains</a> (cdr a1) a2))
      (<a class="sym-link local-def" href="#def-intersection-domains" data-sym="INTERSECTION-DOMAINS" title="(defun intersection-domains (a1 a2)
  (declare (xargs :guard (and (symbol-alistp a1) (symbol-alistp a2))))
  (if (consp a1)
      (if (assoc-eq (caar a1) a2)
          (cons (caar a1) (intersection-domains (cdr a1) a2))
...">intersection-domains</a> (cdr a1) a2))
    nil))</pre>
  </div>

<div class="form-block function" id="def-process-defattach-args1" data-defines="PROCESS-DEFATTACH-ARGS1" data-references="&,CANONICAL-SIBLING,STOBJS-OUT,STOBJS-IN,DEFATTACH!,SYMBOL-CLASS,G1,DEFCHOOSE-AXIOM,*PRIMITIVE-FORMALS-AND-GUARDS*,CONSTRAINEDP,EQUAL,NON-EXECUTABLEP,WARNING$,PPROGN,STRIP-CARS,DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR,UNKNOWN-CONSTRAINTS-P,ASSOC-EQ,ATTACH-PAIR,CONSTRAINT-LST-ETC,OTHERWISE,CASE,META-FN,RULE-CLASS,RULE-NAME,CADR,CONSP,ASSERT$,PAIR,CDR,SYMBOLP,IF,LET*,AT-ALIST,TRUE-APPLY$-WARRANT,WARRANT-FUNCTION-NAMEP,PREDEFINED,*UNATTACHABLE-PRIMITIVES*,MEMBER-EQ,NULL,LOGICP,AND,APPEND,TEMP-TOUCHABLE-FNS,UNTOUCHABLE-FN-P,MACRO-BODY,GETPROPC,MACRO-ALIASES,DEREF-MACRO-NAME,F1,FUNCTION-SYMBOLP,CONS,TRANSLATE-DEFATTACH-HELPERS,SOFT,ER,*DEFATTACH-KEYS*,STRIP-KEYWORD-LIST,KEYWORD-VALUE-LISTP,INITIALIZE-ACL2,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,OR,HELPER-ALIST,ER-LET*,KWD-VALUE-LST,G,F,CASE-MATCH,BOOT-STRAP-FLG,QUOTE,F-GET-GLOBAL,NOT,NOT-BOOT-STRAP-P,MSG,UNLESS-TTAG,EQ,SKIP-CHECKS-T,LD-SKIP-PROOFSP,SEE-DOC,CAR,ARG,LET,T,LIST,VALUE,ENDP,COND,SYSTEM-OK,SKIP-CHECKS,HELPER-ALIST-LST,ATTACHMENT-ALIST,EXPLICIT-ERASURES,ERASURES,STATE,WRLD,CTX,ARGS,DEFUN" data-used-by="PROCESS-DEFATTACH-ARGS" data-part-name="PROCESS-DEFATTACH-ARGS1" data-part-args="SYSTEM-OK,SKIP-CHECKS,HELPER-ALIST-LST,ATTACHMENT-ALIST,EXPLICIT-ERASURES,ERASURES,STATE,WRLD,CTX,ARGS" data-part-body="&,CANONICAL-SIBLING,STOBJS-OUT,STOBJS-IN,DEFATTACH!,SYMBOL-CLASS,G1,DEFCHOOSE-AXIOM,*PRIMITIVE-FORMALS-AND-GUARDS*,CONSTRAINEDP,EQUAL,NON-EXECUTABLEP,PROCESS-DEFATTACH-ARGS1,WARNING$,PPROGN,STRIP-CARS,DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR,UNKNOWN-CONSTRAINTS-P,ASSOC-EQ,ATTACH-PAIR,CONSTRAINT-LST-ETC,OTHERWISE,CASE,META-FN,RULE-CLASS,RULE-NAME,CADR,CONSP,ASSERT$,PAIR,CDR,SYMBOLP,IF,LET*,AT-ALIST,TRUE-APPLY$-WARRANT,WARRANT-FUNCTION-NAMEP,PREDEFINED,SYSTEM-OK,*UNATTACHABLE-PRIMITIVES*,MEMBER-EQ,NULL,LOGICP,AND,APPEND,TEMP-TOUCHABLE-FNS,UNTOUCHABLE-FN-P,MACRO-BODY,GETPROPC,MACRO-ALIASES,DEREF-MACRO-NAME,F1,FUNCTION-SYMBOLP,WRLD,CONS,TRANSLATE-DEFATTACH-HELPERS,CTX,SOFT,ER,*DEFATTACH-KEYS*,STRIP-KEYWORD-LIST,KEYWORD-VALUE-LISTP,INITIALIZE-ACL2,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,OR,HELPER-ALIST,ER-LET*,KWD-VALUE-LST,G,F,CASE-MATCH,BOOT-STRAP-FLG,QUOTE,F-GET-GLOBAL,NOT,NOT-BOOT-STRAP-P,MSG,UNLESS-TTAG,SKIP-CHECKS,EQ,SKIP-CHECKS-T,STATE,LD-SKIP-PROOFSP,SEE-DOC,CAR,ARG,LET,T,HELPER-ALIST-LST,ATTACHMENT-ALIST,EXPLICIT-ERASURES,ERASURES,LIST,VALUE,ARGS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROCESS-DEFATTACH-ARGS1">process-defattach-args1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-process-defattach-args1" data-sym="PROCESS-DEFATTACH-ARGS1" title="(defun process-defattach-args1
       (args ctx wrld state erasures explicit-erasures attachment-alist
        helper-alist-lst skip-checks system-ok)
  (cond
   ((endp args)
...">process-defattach-args1</a>
  (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ctx
    wrld
    state
    erasures
    explicit-erasures
    attachment-alist
    helper-alist-lst
    skip-checks
    system-ok)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> erasures
          explicit-erasures
          attachment-alist
          helper-alist-lst)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((arg (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (see-doc <span class="string">"  See :DOC defattach."</span>)
          (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state))
          (skip-checks-t (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> skip-checks <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (unless-ttag (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" (unless :SKIP-CHECKS T is specified with an active trust ~
                  tag)"</span>))
          (not-boot-strap-p (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state))))
        (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> arg
          ((f g . kwd-value-lst) (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((helper-alist (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
                      (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> 'include-book-with-locals)
                      (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> 'initialize-acl2)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                   ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> kwd-value-lst))
                      (<a class="sym-link system" href="axioms.html#def-strip-keyword-list" data-sym="STRIP-KEYWORD-LIST">strip-keyword-list</a> <a class="sym-link local-def" href="#def-_2Adefattach-keys_2A" data-sym="*DEFATTACH-KEYS*" title="(defconst *defattach-keys* &#39;(:hints :instructions :otf-flg :attach))">*defattach-keys*</a> kwd-value-lst)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                       ctx
                       <span class="string">"Each specified attachment must be of the form (F ~
                             G . LST), where LST is an alternating list of ~
                             keywords and values (see :DOC ~
                             keyword-value-listp) whose keys are without ~
                             duplicates, such that each key is ~v1.  The LST ~
                             specified for the attachment to ~x0 is not of ~
                             this form.~@2"</span>
                       f
                       <a class="sym-link local-def" href="#def-_2Adefattach-keys_2A" data-sym="*DEFATTACH-KEYS*" title="(defconst *defattach-keys* &#39;(:hints :instructions :otf-flg :attach))">*defattach-keys*</a>
                       see-doc))
                   (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-translate-defattach-helpers" data-sym="TRANSLATE-DEFATTACH-HELPERS" title="(defun translate-defattach-helpers (kwd-value-lst name-tree ctx wrld state)
  (cond ((endp kwd-value-lst) (value nil))
        (t
         (let ((key (car kwd-value-lst)) (val (cadr kwd-value-lst)))
           (er-let*
...">translate-defattach-helpers</a> kwd-value-lst
                       (cons <span class="string">"DEFATTACH guard obligation for attaching to"</span> f)
                       ctx
                       wrld
                       state)))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> f wrld)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"Attachment is only legal for function symbols, but ~x0 ~
                      is not a known function symbol.~@1~@2"</span>
                    f
                    see-doc
                    (let ((f1 (<a class="sym-link system" href="axioms.html#def-deref-macro-name" data-sym="DEREF-MACRO-NAME">deref-macro-name</a> f (<a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> wrld))))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> f1 f)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  NOTE: You may have intended to use ~x0 ~
                                    instead of ~x1, which is a macro alias ~
                                    for the function symbol ~x0."</span>
                            f1
                            f))
                        ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> f 'macro-body nil wrld) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  NOTE: ~x0 is a macro, not a function ~
                                    symbol."</span>
                            f))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>)))))
                ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (untouchable-fn-p f
                     wrld
                     (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'temp-touchable-fns state))
                   (untouchable-fn-p g
                     wrld
                     (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'temp-touchable-fns state))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"The function symbol~#0~[ ~&amp;0 is~/s ~&amp;0 are~] ~
                      untouchable.  See :DOC remove-untouchable."</span>
                    (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (untouchable-fn-p f
                          wrld
                          (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'temp-touchable-fns state))
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> f))
                      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (untouchable-fn-p g
                          wrld
                          (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'temp-touchable-fns state))
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> g)))))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> skip-checks-t) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-logicp" data-sym="LOGICP">logicp</a> f wrld))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> g) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                        ctx
                        <span class="string">"You must specify :SKIP-CHECKS T in order to use ~
                             defattach with :PROGRAM mode functions, such as ~
                             ~x0.~@1"</span>
                        f
                        see-doc))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                        ctx
                        <span class="string">"Only function symbols in :LOGIC mode may have ~
                             attachments~@0, but ~x1 is in :PROGRAM mode.~@2"</span>
                        unless-ttag
                        f
                        see-doc))))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> f <a class="sym-link local-def" href="#def-_2Aunattachable-primitives_2A" data-sym="*UNATTACHABLE-PRIMITIVES*" title="(defconst *unattachable-primitives*
          &#39;(big-n decrement-big-n zp-big-n badge-userfn apply$-userfn))">*unattachable-primitives*</a>)
                   not-boot-strap-p) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"It is illegal to add or remove an attachment to the ~
                      function symbol ~x0 because it is given special ~
                      treatment by the ACL2 implementation."</span>
                    f))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> not-boot-strap-p
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> system-ok)
                   (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> f 'predefined)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"The function symbol ~x0 is built into ACL2.  Thus, to ~
                      add or remove an attachment to this symbol it is ~
                      required to specify :SYSTEM-OK T in your defattach ~
                      event."</span>
                    f))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (warrant-function-namep f wrld)
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> g '<a class="sym-link local-def" href="#def-true-apply_24-warrant" data-sym="TRUE-APPLY$-WARRANT" title="(defun true-apply$-warrant () (declare (xargs :guard t :mode :logic)) t)">true-apply$-warrant</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    ctx
                    <span class="string">"The only attachment legal for the warrant function ~x0 ~
                      is ~x1.  The attachment of ~x2 to ~x0 is thus illegal."</span>
                    f
                    '<a class="sym-link local-def" href="#def-true-apply_24-warrant" data-sym="TRUE-APPLY$-WARRANT" title="(defun true-apply$-warrant () (declare (xargs :guard t :mode :logic)) t)">true-apply$-warrant</a>
                    g))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((at-alist (attachment-alist f wrld)))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car at-alist) <span class="keyword">:attachment-disallowed</span>) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((at-alist (if (symbolp (cdr at-alist))
                               (attachment-alist (cdr at-alist) wrld)
                               at-alist)) (pair (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car at-alist) <span class="keyword">:attachment-disallowed</span>)
                                (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (consp (cdr at-alist)) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> at-alist))))
                            (rule-name (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (consp pair) (car pair)))
                            (rule-class (cdr pair)))
                          (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> rule-class '(<span class="keyword">:meta</span> <span class="keyword">:clause-processor</span>))
                            (let ((meta-fn (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> rule-class <span class="keyword">:meta</span>)
                                   <span class="string">"meta"</span>
                                   <span class="string">"clause-processor"</span>)))
                              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"It is illegal to attach to the function ~
                                  symbol ~x0 because it is a common ancestor ~
                                  of the evaluator and ~@1 functions of the ~
                                  ~x2 rule, ~x3.  See :DOC ~
                                  evaluator-restrictions and see :DOC ~
                                  transparent-functions."</span>
                                f
                                meta-fn
                                rule-class
                                rule-name))
                            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> rule-class
                                '(<span class="keyword">:defstobj</span> <span class="keyword">:defabsstobj</span> <span class="keyword">:defabsstobj-no-corr</span>))
                              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"It is illegal to attach to the function symbol ~
                               ~x0 because it is an ancestor of ~@1 of ~
                               the ~s2stobj ~x3.  See :DOC ~
                               stobj-attachment-restrictions."</span>
                                f
                                (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> rule-class
                                  (<span class="keyword">:defstobj</span> <span class="string">"the recognizer"</span>)
                                  (<span class="keyword">:defabsstobj</span> <span class="string">"the recognizer or correlation ~
                                               function"</span>)
                                  (otherwise <span class="string">"the recognizer, creator, or an ~
                                            exported function"</span>))
                                (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> rule-class <span class="keyword">:defstobj</span>)
                                  <span class="string">""</span>
                                  <span class="string">"abstract "</span>)
                                rule-name)))))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((erasures (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp at-alist) (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> at-alist erasures))
                               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> erasures))) (<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> f '<a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a> '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) wrld))
                            (attach-pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:attach</span> helper-alist)))
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> skip-checks-t)
                               (<a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> (car <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a>))) (<a class="sym-link local-def" href="#def-defattach-unknown-constraints-error" data-sym="DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR" title="(defun defattach-unknown-constraints-error (name ctx state)
  (er soft ctx
      &quot;Attachment is disallowed in this context, because the function ~x0 has ~
       unknown-constraints.  See :DOC partial-encapsulate.&quot;
      name))">defattach-unknown-constraints-error</a> f ctx state))
                            ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> g) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (helper-alist (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                    ctx
                                    <span class="string">"The function symbol ~x0 has been associated ~
                                with NIL in a defattach event, yet keyword ~
                                argument~#1~[ ~&amp;1 has~/s ~&amp;1 have~] been ~
                                supplied for this association, which is ~
                                illegal.~@2"</span>
                                    f
                                    (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> helper-alist)
                                    see-doc))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> at-alist) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                                          <span class="string">"Attachment"</span>
                                          <span class="string">"The function symbol ~x0 does not ~
                                         currently have an attachment, so the ~
                                         directive to remove its attachment ~
                                         will have no effect."</span>
                                          f))
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (consp at-alist) state)))
                                    (<a class="sym-link local-def" href="#def-process-defattach-args1" data-sym="PROCESS-DEFATTACH-ARGS1" title="(defun process-defattach-args1
       (args ctx wrld state erasures explicit-erasures attachment-alist
        helper-alist-lst skip-checks system-ok)
  (cond
   ((endp args)
...">process-defattach-args1</a> (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                                      ctx
                                      wrld
                                      state
                                      erasures
                                      (cons f explicit-erasures)
                                      attachment-alist
                                      helper-alist-lst
                                      skip-checks
                                      system-ok)))))
                            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> attach-pair) (cdr attach-pair))
                               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> skip-checks-t
                                   (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> f 'non-executablep nil wrld) <span class="keyword">:program</span>)))
                               (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal <a class="sym-link system" href="history-management.html#def-constraint-lst-etc" data-sym="CONSTRAINT-LST-ETC">constraint-lst-etc</a> '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> f 'constrainedp nil wrld)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"It is illegal to attach to function symbol ~x0, ~
                              because it ~@1.~@2"</span>
                                f
                                (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> f <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-formals-and-guards_2A" data-sym="*PRIMITIVE-FORMALS-AND-GUARDS*">*primitive-formals-and-guards*</a>)))
                                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pair <span class="string">"is a built-in primitive"</span>)
                                    ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> f 'defchoose-axiom nil wrld) <span class="string">"was introduced with DEFCHOOSE"</span>)
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"was introduced with DEFUN"</span>)))
                                see-doc))
                            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp g)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"Only a function symbol may be attached to a ~
                              function symbol.  The proposed attachment of ~
                              ~x0 to ~x1 is thus illegal, since ~x0 is not a ~
                              symbol.~@2"</span>
                                g
                                f
                                see-doc))
                            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> g wrld)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"Only a function symbol may be attached to a ~
                              function symbol.  The proposed attachment of ~
                              ~x0 to ~x1 is thus illegal, since ~x0 is not a ~
                              known function symbol.~@2~@3"</span>
                                g
                                f
                                see-doc
                                (let ((g1 (<a class="sym-link system" href="axioms.html#def-deref-macro-name" data-sym="DEREF-MACRO-NAME">deref-macro-name</a> g (<a class="sym-link system" href="axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> wrld))))
                                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> g1 g)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  NOTE: You may have intended to ~
                                            use ~x0 instead of ~x1, which is ~
                                            a macro alias for the function ~
                                            symbol ~x0."</span>
                                        g1
                                        g))
                                    ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> g 'macro-body nil wrld) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  NOTE: ~x0 is a macro, not a ~
                                            function symbol."</span>
                                        g))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>)))))
                            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> skip-checks-t) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-logicp" data-sym="LOGICP">logicp</a> g wrld))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"Attachments must be function symbols in :LOGIC ~
                              mode~@0, but ~x1 is in :PROGRAM mode.~@2"</span>
                                unless-ttag
                                g
                                see-doc))
                            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> skip-checks-t)
                               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> g wrld) <span class="keyword">:common-lisp-compliant</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"Attachments must be guard-verified function ~
                              symbols~@0, but ~x1 has not had its guard ~
                              verified.  You may wish to use the macro ~x2 in ~
                              community book books/misc/defattach-bang.~@3"</span>
                                unless-ttag
                                g
                                'defattach!
                                see-doc))
                            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> f wrld) (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> g wrld))
                                 (equal (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> f wrld) (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> g wrld)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"Attachments must preserve signatures, but the ~
                              signatures differ for ~x0 and ~x1.~@2"</span>
                                f
                                g
                                see-doc))
                            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> f g) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"It is illegal to attach a function to itself, ~
                              such as ~x0.~@1"</span>
                                f
                                see-doc))
                            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> skip-checks-t)
                               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="defthm.html#def-canonical-sibling" data-sym="CANONICAL-SIBLING">canonical-sibling</a> f wrld) (<a class="sym-link system" href="defthm.html#def-canonical-sibling" data-sym="CANONICAL-SIBLING">canonical-sibling</a> g wrld))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"The function ~x0 is an illegal attachment for ~
                              ~x1~@2, because the two functions were ~
                              introduced in the same event.~@3"</span>
                                g
                                f
                                unless-ttag
                                see-doc))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-process-defattach-args1" data-sym="PROCESS-DEFATTACH-ARGS1" title="(defun process-defattach-args1
       (args ctx wrld state erasures explicit-erasures attachment-alist
        helper-alist-lst skip-checks system-ok)
  (cond
   ((endp args)
...">process-defattach-args1</a> (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                                ctx
                                wrld
                                state
                                erasures
                                explicit-erasures
                                (cons (cons f g) attachment-alist)
                                (cons helper-alist helper-alist-lst)
                                skip-checks
                                system-ok)))))))))))
          (&amp; (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Each tuple supplied to a defattach event must be of the ~
                     form (f g . kwd-value-lst).  The tuple ~x0 is thus ~
                     illegal.~@1"</span>
              arg
              see-doc)))))))</pre>
  </div>

<div class="form-block function" id="def-duplicate-keysp-eq" data-defines="DUPLICATE-KEYSP-EQ" data-references="T,CAR,CDR,CAAR,ASSOC-EQ,ENDP,COND,SYMBOL-ALISTP,XARGS,DECLARE,ALIST,DEFUN" data-used-by="PROCESS-DEFATTACH-ARGS" data-part-name="DUPLICATE-KEYSP-EQ" data-part-args="ALIST" data-part-declare="ALIST,SYMBOL-ALISTP,XARGS,DECLARE" data-part-body="DUPLICATE-KEYSP-EQ,T,CAR,CDR,CAAR,ASSOC-EQ,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DUPLICATE-KEYSP-EQ">duplicate-keysp-eq</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-duplicate-keysp-eq" data-sym="DUPLICATE-KEYSP-EQ" title="(defun duplicate-keysp-eq (alist)
  (declare (xargs :guard (symbol-alistp alist)))
  (cond ((endp alist) nil) ((assoc-eq (caar alist) (cdr alist)) (car alist))
        (t (duplicate-keysp-eq (cdr alist)))))">duplicate-keysp-eq</a>
  (alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> alist)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) (cdr alist)) (car alist))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-duplicate-keysp-eq" data-sym="DUPLICATE-KEYSP-EQ" title="(defun duplicate-keysp-eq (alist)
  (declare (xargs :guard (symbol-alistp alist)))
  (cond ((endp alist) nil) ((assoc-eq (caar alist) (cdr alist)) (car alist))
        (t (duplicate-keysp-eq (cdr alist)))))">duplicate-keysp-eq</a> (cdr alist)))))</pre>
  </div>

<div class="form-block function" id="def-split-at-first-keyword" data-defines="SPLIT-AT-FIRST-KEYWORD" data-references="CONS,CDR,KWD-VALUE-LST,ALIST,MV-LET,T,CAR,KEYWORDP,MV,ENDP,COND,TRUE-LISTP,XARGS,DECLARE,ARGS,DEFUN" data-used-by="PROCESS-DEFATTACH-ARGS" data-part-name="SPLIT-AT-FIRST-KEYWORD" data-part-args="ARGS" data-part-declare="ARGS,TRUE-LISTP,XARGS,DECLARE" data-part-body="CONS,CDR,SPLIT-AT-FIRST-KEYWORD,KWD-VALUE-LST,ALIST,MV-LET,T,CAR,KEYWORDP,MV,ARGS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPLIT-AT-FIRST-KEYWORD">split-at-first-keyword</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-split-at-first-keyword" data-sym="SPLIT-AT-FIRST-KEYWORD" title="(defun split-at-first-keyword (args)
  (declare (xargs :guard (true-listp args)))
  (cond ((endp args) (mv nil nil)) ((keywordp (car args)) (mv nil args))
        (t
         (mv-let (alist kwd-value-lst) (split-at-first-keyword (cdr args))">split-at-first-keyword</a>
  (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
    ((<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (alist kwd-value-lst)
        (<a class="sym-link local-def" href="#def-split-at-first-keyword" data-sym="SPLIT-AT-FIRST-KEYWORD" title="(defun split-at-first-keyword (args)
  (declare (xargs :guard (true-listp args)))
  (cond ((endp args) (mv nil nil)) ((keywordp (car args)) (mv nil args))
        (t
         (mv-let (alist kwd-value-lst) (split-at-first-keyword (cdr args))">split-at-first-keyword</a> (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) alist) kwd-value-lst)))))</pre>
  </div>

<div class="form-block function" id="def-maybe-remove1-eq" data-defines="MAYBE-REMOVE1-EQ" data-references="REMOVE1-EQ,MEMBER-EQ,SYMBOL-LISTP,TRUE-LISTP,SYMBOLP,IF,XARGS,DECLARE,LST,X,DEFUN" data-used-by="FILTER-FOR-ATTACHMENT" data-part-name="MAYBE-REMOVE1-EQ" data-part-args="LST,X" data-part-declare="SYMBOL-LISTP,LST,TRUE-LISTP,X,SYMBOLP,IF,XARGS,DECLARE" data-part-body="REMOVE1-EQ,LST,X,MEMBER-EQ,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-REMOVE1-EQ">maybe-remove1-eq</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-remove1-eq" data-sym="MAYBE-REMOVE1-EQ" title="(defun maybe-remove1-eq (x lst)
  (declare
   (xargs :guard
    (if (symbolp x)
        (true-listp lst)
...">maybe-remove1-eq</a>
  (x lst)
  (declare (xargs <span class="keyword">:guard</span> (if (symbolp x)
        (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lst)
        (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> lst))))
  (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> x lst)
    (<a class="sym-link system" href="axioms.html#def-remove1-eq" data-sym="REMOVE1-EQ">remove1-eq</a> x lst)
    lst))</pre>
  </div>

<div class="form-block function" id="def-filter-for-attachment" data-defines="FILTER-FOR-ATTACHMENT" data-references="ADD-TO-SET-EQ,CAAR,MAYBE-REMOVE1-EQ,CONS,CDR,IF,CAR,ASSOC-EQ,PAIR,LET,T,MV,ENDP,COND,ATTACH-NIL-LST,HL,AA,ATTACH-BY-DEFAULT,HELPERS-LST,ATTACHMENT-ALIST,DEFUN" data-used-by="PROCESS-DEFATTACH-ARGS" data-part-name="FILTER-FOR-ATTACHMENT" data-part-args="ATTACH-NIL-LST,HL,AA,ATTACH-BY-DEFAULT,HELPERS-LST,ATTACHMENT-ALIST" data-part-body="ADD-TO-SET-EQ,CAAR,MAYBE-REMOVE1-EQ,CONS,FILTER-FOR-ATTACHMENT,ATTACH-BY-DEFAULT,CDR,IF,HELPERS-LST,CAR,ASSOC-EQ,PAIR,LET,T,ATTACH-NIL-LST,HL,AA,MV,ATTACHMENT-ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FILTER-FOR-ATTACHMENT">filter-for-attachment</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-filter-for-attachment" data-sym="FILTER-FOR-ATTACHMENT" title="(defun filter-for-attachment
       (attachment-alist helpers-lst attach-by-default aa hl attach-nil-lst)
  (cond ((endp attachment-alist) (mv aa hl attach-nil-lst))
        (t
         (let ((pair (assoc-eq :attach (car helpers-lst))))
...">filter-for-attachment</a>
  (attachment-alist helpers-lst
    attach-by-default
    aa
    hl
    attach-nil-lst)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> attachment-alist) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> aa hl attach-nil-lst))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:attach</span> (car helpers-lst))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((if pair
             (cdr pair)
             attach-by-default) (<a class="sym-link local-def" href="#def-filter-for-attachment" data-sym="FILTER-FOR-ATTACHMENT" title="(defun filter-for-attachment
       (attachment-alist helpers-lst attach-by-default aa hl attach-nil-lst)
  (cond ((endp attachment-alist) (mv aa hl attach-nil-lst))
        (t
         (let ((pair (assoc-eq :attach (car helpers-lst))))
...">filter-for-attachment</a> (cdr attachment-alist)
              (cdr helpers-lst)
              attach-by-default
              (cons (car attachment-alist) aa)
              (cons (car helpers-lst) hl)
              (<a class="sym-link local-def" href="#def-maybe-remove1-eq" data-sym="MAYBE-REMOVE1-EQ" title="(defun maybe-remove1-eq (x lst)
  (declare
   (xargs :guard
    (if (symbolp x)
        (true-listp lst)
...">maybe-remove1-eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> attachment-alist) attach-nil-lst)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-filter-for-attachment" data-sym="FILTER-FOR-ATTACHMENT" title="(defun filter-for-attachment
       (attachment-alist helpers-lst attach-by-default aa hl attach-nil-lst)
  (cond ((endp attachment-alist) (mv aa hl attach-nil-lst))
        (t
         (let ((pair (assoc-eq :attach (car helpers-lst))))
...">filter-for-attachment</a> (cdr attachment-alist)
              (cdr helpers-lst)
              attach-by-default
              aa
              hl
              (<a class="sym-link system" href="axioms.html#def-add-to-set-eq" data-sym="ADD-TO-SET-EQ">add-to-set-eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> attachment-alist) attach-nil-lst))))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Adefattach-keys-extended_2A" data-defines="*DEFATTACH-KEYS-EXTENDED*" data-references="QUOTE,*DEFATTACH-KEYS*,APPEND,DEFCONST" data-used-by="PROCESS-DEFATTACH-ARGS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*DEFATTACH-KEYS-EXTENDED*">*defattach-keys-extended*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Adefattach-keys-extended_2A" data-sym="*DEFATTACH-KEYS-EXTENDED*" title="(defconst *defattach-keys-extended*
          (append *defattach-keys* &#39;(:skip-checks :system-ok)))">*defattach-keys-extended*</a>
  (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link local-def" href="#def-_2Adefattach-keys_2A" data-sym="*DEFATTACH-KEYS*" title="(defconst *defattach-keys* &#39;(:hints :instructions :otf-flg :attach))">*defattach-keys*</a> '(<span class="keyword">:skip-checks</span> <span class="keyword">:system-ok</span>)))</pre>
  </div>

<div class="form-block function" id="def-process-defattach-args" data-defines="PROCESS-DEFATTACH-ARGS" data-references="MERGE-SORT-SYMBOL-ALISTP,LIST,GLOBAL-VAL,FILTER-FOR-ATTACHMENT,ATTACH-NIL-LST,HELPER-ALIST-LST-EXEC,ATTACHMENT-ALIST-EXEC,ASSOC-EQ,PAIR,ATTACH-BY-DEFAULT,HELPER-ALIST-LST,ATTACHMENT-ALIST,EXPLICIT-ERASURES,NTH,ERASURES,TRANSLATE-DEFATTACH-HELPERS,VALUE,INITIALIZE-ACL2,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,CONSTRAINT-HELPERS,PROCESS-DEFATTACH-ARGS1,TUPLE,ER-LET*,BOOLEANP,TTAG,BOOT-STRAP-FLG,F-GET-GLOBAL,SYSTEM-OK,SYSTEM-OK-TAIL,REMOVE-KEYWORD,IF,SKIP-CHECKS,ASSOC-KEYWORD,SKIP-CHECKS-TAIL,LD-SKIP-PROOFSP,W,WRLD,LET*,*DEFATTACH-KEYS-EXTENDED*,STRIP-KEYWORD-LIST,KEYWORD-VALUE-LISTP,OR,DUPLICATE-KEYSP-EQ,SYMBOL-ALISTP,SPLIT-AT-FIRST-KEYWORD,CONSTRAINT-KWD-ALIST,MV-LET,T,EQ,LENGTH,EQL,DEFATTACH,QUOTE,CADDR,MEMBER-EQ,TRUE-LISTP,QUASIQUOTE,CDDR,CADR,CDR,CONSP,KEYWORDP,NOT,AND,CAR,SYMBOLP,SOFT,ER,NULL,COND,MSG,LET,STATE,CTX,ARGS,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFATTACH" data-part-name="PROCESS-DEFATTACH-ARGS" data-part-args="STATE,CTX,ARGS" data-part-body="MERGE-SORT-SYMBOL-ALISTP,LIST,GLOBAL-VAL,FILTER-FOR-ATTACHMENT,ATTACH-NIL-LST,HELPER-ALIST-LST-EXEC,ATTACHMENT-ALIST-EXEC,ASSOC-EQ,PAIR,ATTACH-BY-DEFAULT,HELPER-ALIST-LST,ATTACHMENT-ALIST,EXPLICIT-ERASURES,NTH,ERASURES,TRANSLATE-DEFATTACH-HELPERS,VALUE,INITIALIZE-ACL2,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,CONSTRAINT-HELPERS,PROCESS-DEFATTACH-ARGS1,TUPLE,ER-LET*,BOOLEANP,TTAG,BOOT-STRAP-FLG,F-GET-GLOBAL,SYSTEM-OK,SYSTEM-OK-TAIL,REMOVE-KEYWORD,IF,SKIP-CHECKS,ASSOC-KEYWORD,SKIP-CHECKS-TAIL,LD-SKIP-PROOFSP,W,WRLD,LET*,*DEFATTACH-KEYS-EXTENDED*,STRIP-KEYWORD-LIST,KEYWORD-VALUE-LISTP,OR,DUPLICATE-KEYSP-EQ,SYMBOL-ALISTP,SPLIT-AT-FIRST-KEYWORD,CONSTRAINT-KWD-ALIST,MV-LET,T,EQ,LENGTH,EQL,DEFATTACH,QUOTE,CADDR,MEMBER-EQ,TRUE-LISTP,STATE,QUASIQUOTE,PROCESS-DEFATTACH-ARGS,CDDR,CADR,CDR,CONSP,KEYWORDP,NOT,AND,CAR,SYMBOLP,CTX,SOFT,ER,ARGS,NULL,COND,MSG,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROCESS-DEFATTACH-ARGS">process-defattach-args</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-process-defattach-args" data-sym="PROCESS-DEFATTACH-ARGS" title="(defun process-defattach-args (args ctx state)
  (let ((msg
         &quot;Illegal arguments for defattach.  See :DOC defattach.  Note ~
              that if the first argument is a symbol, then there should be ~
              only two arguments, both of them symbols.  Consider instead ~
...">process-defattach-args</a>
  (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ctx state)
  (let ((<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Illegal arguments for defattach.  See :DOC defattach.  Note ~
              that if the first argument is a symbol, then there should be ~
              only two arguments, both of them symbols.  Consider instead ~
              executing "</span>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"Defattach must specify at least one attachment.  See :DOC ~
           defattach."</span>))
      ((symbolp (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
             (consp (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
             (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link local-def" href="#def-process-defattach-args" data-sym="PROCESS-DEFATTACH-ARGS" title="(defun process-defattach-args (args ctx state)
  (let ((msg
         &quot;Illegal arguments for defattach.  See :DOC defattach.  Note ~
              that if the first argument is a symbol, then there should be ~
              only two arguments, both of them symbols.  Consider instead ~
...">process-defattach-args</a> `((,(CAR ARGS) ,(CADR ARGS)))
                  ctx
                  state))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                 (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) '(<span class="keyword">:skip-checks</span> <span class="keyword">:system-ok</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"~@0the form:~|~%~y1."</span>
                  <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
                  `(<a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> (,(CAR ARGS) ,(CADR ARGS)) ,@(CDDR ARGS))))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                 (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) <span class="number">4</span>)
                 (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) <span class="keyword">:attach</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"~@0the form:~|~%~y1."</span>
                  <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
                  `(<a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> (,@ARGS))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"~@0one of the following two forms:~|~%~y1~ ~ or~|~y2."</span>
                  <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
                  `(<a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> (,(CAR ARGS) ,(CADR ARGS)) ,@(CDDR ARGS))
                  `(<a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> (,(CAR ARGS) ,(CADR ARGS) ,@(CDDR ARGS)))))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Illegal defattach form.  If the first argument is a symbol, then ~
             there must be exactly two arguments, both of which are ~
             non-keyword symbols.  See :DOC defattach."</span>))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> constraint-kwd-alist)
          (<a class="sym-link local-def" href="#def-split-at-first-keyword" data-sym="SPLIT-AT-FIRST-KEYWORD" title="(defun split-at-first-keyword (args)
  (declare (xargs :guard (true-listp args)))
  (cond ((endp args) (mv nil nil)) ((keywordp (car args)) (mv nil args))
        (t
         (mv-let (alist kwd-value-lst) (split-at-first-keyword (cdr args))">split-at-first-keyword</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"Illegal arguments for defattach, ~x0.  See :DOC defattach."</span>
                <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
            ((<a class="sym-link local-def" href="#def-duplicate-keysp-eq" data-sym="DUPLICATE-KEYSP-EQ" title="(defun duplicate-keysp-eq (alist)
  (declare (xargs :guard (symbol-alistp alist)))
  (cond ((endp alist) nil) ((assoc-eq (caar alist) (cdr alist)) (car alist))
        (t (duplicate-keysp-eq (cdr alist)))))">duplicate-keysp-eq</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"A defattach event must specify attachments for distinct ~
              function symbols, but ~x0 is associated with a value more than ~
              once.  See :DOC defattach."</span>
                (car (<a class="sym-link local-def" href="#def-duplicate-keysp-eq" data-sym="DUPLICATE-KEYSP-EQ" title="(defun duplicate-keysp-eq (alist)
  (declare (xargs :guard (symbol-alistp alist)))
  (cond ((endp alist) nil) ((assoc-eq (caar alist) (cdr alist)) (car alist))
        (t (duplicate-keysp-eq (cdr alist)))))">duplicate-keysp-eq</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
            ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> constraint-kwd-alist))
               (<a class="sym-link system" href="axioms.html#def-strip-keyword-list" data-sym="STRIP-KEYWORD-LIST">strip-keyword-list</a> <a class="sym-link local-def" href="#def-_2Adefattach-keys-extended_2A" data-sym="*DEFATTACH-KEYS-EXTENDED*" title="(defconst *defattach-keys-extended*
          (append *defattach-keys* &#39;(:skip-checks :system-ok)))">*defattach-keys-extended*</a>
                 constraint-kwd-alist)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"Illegal defattach argument list.  The tail following the ~
              specified pairs of function symbols should be an alternating ~
              list of keywords and values (see :DOC keyword-value-listp) ~
              whose keys are without duplicates and all belong to the list ~
              ~x0.  That tail is, however, ~x1.  See :DOC defattach."</span>
                <a class="sym-link local-def" href="#def-_2Adefattach-keys-extended_2A" data-sym="*DEFATTACH-KEYS-EXTENDED*" title="(defconst *defattach-keys-extended*
          (append *defattach-keys* &#39;(:skip-checks :system-ok)))">*defattach-keys-extended*</a>
                constraint-kwd-alist))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state))
                  (skip-checks-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:skip-checks</span> constraint-kwd-alist))
                  (skip-checks (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> skip-checks-tail))
                  (constraint-kwd-alist (if skip-checks-tail
                      (remove-keyword <span class="keyword">:skip-checks</span> constraint-kwd-alist)
                      constraint-kwd-alist))
                  (system-ok-tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:system-ok</span> constraint-kwd-alist))
                  (system-ok (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> system-ok-tail))
                  (constraint-kwd-alist (if system-ok-tail
                      (remove-keyword <span class="keyword">:system-ok</span> constraint-kwd-alist)
                      constraint-kwd-alist)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> skip-checks
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> skip-checks <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> skip-checks <span class="keyword">:cycles</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"Illegal value for :SKIP-CHECKS (must be ~x0, ~x1, or ~
                    ~x2): ~x3."</span>
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      nil
                      <span class="keyword">:cycles</span> skip-checks))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> skip-checks
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state) (<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> wrld)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"It is illegal to specify a non-nil value of :SKIP-CHECKS ~
                    for defattach unless there is an active trust tag."</span>))
                  ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> system-ok)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"Illegal value for :SKIP-CHECKS (must be ~x0 or ~x1): ~x2."</span>
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      nil
                      system-ok))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tuple (<a class="sym-link local-def" href="#def-process-defattach-args1" data-sym="PROCESS-DEFATTACH-ARGS1" title="(defun process-defattach-args1
       (args ctx wrld state erasures explicit-erasures attachment-alist
        helper-alist-lst skip-checks system-ok)
  (cond
   ((endp args)
...">process-defattach-args1</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                           ctx
                           wrld
                           state
                           nil
                           nil
                           nil
                           nil
                           skip-checks
                           system-ok)) (constraint-helpers (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
                               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> 'include-book-with-locals)
                               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> 'initialize-acl2)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-translate-defattach-helpers" data-sym="TRANSLATE-DEFATTACH-HELPERS" title="(defun translate-defattach-helpers (kwd-value-lst name-tree ctx wrld state)
  (cond ((endp kwd-value-lst) (value nil))
        (t
         (let ((key (car kwd-value-lst)) (val (cadr kwd-value-lst)))
           (er-let*
...">translate-defattach-helpers</a> constraint-kwd-alist
                                <span class="string">"DEFATTACH constraint proof obligation"</span>
                                ctx
                                wrld
                                state)))))
                      (let ((erasures (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> tuple)) (explicit-erasures (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> tuple))
                          (attachment-alist (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> tuple))
                          (helper-alist-lst (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> tuple))
                          (attach-by-default (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:attach</span> constraint-helpers)))
                              (if pair
                                (cdr pair)
                                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
                        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (attachment-alist-exec helper-alist-lst-exec attach-nil-lst)
                          (<a class="sym-link local-def" href="#def-filter-for-attachment" data-sym="FILTER-FOR-ATTACHMENT" title="(defun filter-for-attachment
       (attachment-alist helpers-lst attach-by-default aa hl attach-nil-lst)
  (cond ((endp attachment-alist) (mv aa hl attach-nil-lst))
        (t
         (let ((pair (assoc-eq :attach (car helpers-lst))))
...">filter-for-attachment</a> attachment-alist
                            helper-alist-lst
                            attach-by-default
                            nil
                            nil
                            (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'attach-nil-lst wrld))
                          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> constraint-helpers
                              erasures
                              explicit-erasures
                              (<a class="sym-link system" href="axioms.html#def-merge-sort-symbol-alistp" data-sym="MERGE-SORT-SYMBOL-ALISTP">merge-sort-symbol-alistp</a> attachment-alist)
                              attachment-alist-exec
                              helper-alist-lst-exec
                              skip-checks
                              attach-nil-lst)))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-prove-defattach-guards1" data-defines="PROVE-DEFATTACH-GUARDS1" data-references="CONS-TAG-TREES,1+,MAKE-PSPV,PROVE,PROOF-BUILDER,TTREE1,ER-LET*,TERM-EVISC-TUPLE,ASSERT$,INT=,UNTRANSLATE,UGOAL,INSTRUCTIONS,HINTS,ASSOC-EQ,CDR,OTF-FLG,CAR,HELPER-ALIST,GUARD,FORMALS,PAIRLIS$,SUBLIS-VAR,IMPLIES,QUOTE,FCONS-TERM*,SUBLIS-FN-SIMPLE,GOAL,CDAR,G,CAAR,F,LET*,VALUE,PROOFS-CO,T,=,CONS,LIST,FMS,EVENT,IO?,PPROGN,NULL,COND,TTREE,STATE,WRLD,ENS,CTX,HELPERS-LST,ATTACHMENT-ALIST,ATTACHMENT-ALIST-TAIL,N,I,DEFUN" data-used-by="PROVE-DEFATTACH-GUARDS" data-part-name="PROVE-DEFATTACH-GUARDS1" data-part-args="TTREE,STATE,WRLD,ENS,CTX,HELPERS-LST,ATTACHMENT-ALIST,ATTACHMENT-ALIST-TAIL,N,I" data-part-body="CONS-TAG-TREES,1+,PROVE-DEFATTACH-GUARDS1,CTX,ENS,MAKE-PSPV,PROVE,PROOF-BUILDER,TTREE1,ER-LET*,TERM-EVISC-TUPLE,ASSERT$,INT=,I,UNTRANSLATE,UGOAL,INSTRUCTIONS,HINTS,ASSOC-EQ,CDR,OTF-FLG,HELPERS-LST,CAR,HELPER-ALIST,GUARD,WRLD,FORMALS,PAIRLIS$,SUBLIS-VAR,IMPLIES,QUOTE,FCONS-TERM*,ATTACHMENT-ALIST,SUBLIS-FN-SIMPLE,GOAL,CDAR,G,CAAR,F,LET*,TTREE,VALUE,PROOFS-CO,T,=,CONS,LIST,FMS,N,STATE,EVENT,IO?,PPROGN,ATTACHMENT-ALIST-TAIL,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROVE-DEFATTACH-GUARDS1">prove-defattach-guards1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prove-defattach-guards1" data-sym="PROVE-DEFATTACH-GUARDS1" title="(defun prove-defattach-guards1
       (i n attachment-alist-tail attachment-alist helpers-lst ctx ens wrld
        state ttree)
  (cond
   ((null attachment-alist-tail)
...">prove-defattach-guards1</a>
  (i n
    attachment-alist-tail
    attachment-alist
    helpers-lst
    ctx
    ens
    wrld
    state
    ttree)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> attachment-alist-tail) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
          nil
          state
          (n)
          (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"This concludes the ~#0~[guard proof~/~n1 guard proofs~].~%"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> n <span class="number">1</span>) <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="number">1</span>))) (cons #\1 n))
            (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
            state
            nil))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> ttree)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((f (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> attachment-alist-tail)) (g (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> attachment-alist-tail))
          (goal (<a class="sym-link system" href="history-management.html#def-sublis-fn-simple" data-sym="SUBLIS-FN-SIMPLE">sublis-fn-simple</a> attachment-alist
              (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a>
                (<a class="sym-link system" href="basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> f wrld) (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> g wrld))
                  (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> f nil wrld))
                (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> g nil wrld))))
          (helper-alist (car helpers-lst))
          (otf-flg (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:otf-flg</span> helper-alist)))
          (hints (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:hints</span> helper-alist)))
          (instructions (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:instructions</span> helper-alist)))
          (ugoal (untranslate goal <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
            nil
            state
            (ugoal n i)
            (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"The~#0~[~/ ~n1 (and last)~/ ~n1~] guard proof obligation ~
                    is~|~%~y2."</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> i <span class="number">1</span>) <span class="number">0</span>)) ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> i n) <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="number">2</span>)))
                (cons #\1 (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> i))
                (cons #\2 ugoal))
              (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
              state
              (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state)))
          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ttree1 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (instructions (proof-builder nil ugoal goal nil instructions wrld state))
                 (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a> goal
                     (<a class="sym-link system" href="prove.html#def-make-pspv" data-sym="MAKE-PSPV">make-pspv</a> ens
                       wrld
                       state
                       <span class="keyword">:displayed-goal</span> ugoal
                       <span class="keyword">:otf-flg</span> otf-flg)
                     hints
                     ens
                     wrld
                     ctx
                     state)))))
            (<a class="sym-link local-def" href="#def-prove-defattach-guards1" data-sym="PROVE-DEFATTACH-GUARDS1" title="(defun prove-defattach-guards1
       (i n attachment-alist-tail attachment-alist helpers-lst ctx ens wrld
        state ttree)
  (cond
   ((null attachment-alist-tail)
...">prove-defattach-guards1</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> i)
              n
              (cdr attachment-alist-tail)
              attachment-alist
              (cdr helpers-lst)
              ctx
              ens
              wrld
              state
              (cons-tag-trees ttree1 ttree))))))))</pre>
  </div>

<div class="form-block function" id="def-prove-defattach-guards" data-defines="PROVE-DEFATTACH-GUARDS" data-references="PROVE-DEFATTACH-GUARDS1,PROOFS-CO,CONS,LIST,FMS,EVENT,IO?,T,COND,PPROGN,INT=,AND,ASSERT$,LENGTH,N,LET,STATE,WRLD,ENS,CTX,HELPERS-LST,ATTACHMENT-ALIST,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFATTACH" data-part-name="PROVE-DEFATTACH-GUARDS" data-part-args="STATE,WRLD,ENS,CTX,HELPERS-LST,ATTACHMENT-ALIST" data-part-body="WRLD,ENS,CTX,PROVE-DEFATTACH-GUARDS1,PROOFS-CO,CONS,LIST,FMS,EVENT,IO?,T,STATE,COND,PPROGN,HELPERS-LST,INT=,AND,ASSERT$,ATTACHMENT-ALIST,LENGTH,N,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROVE-DEFATTACH-GUARDS">prove-defattach-guards</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prove-defattach-guards" data-sym="PROVE-DEFATTACH-GUARDS" title="(defun prove-defattach-guards (attachment-alist helpers-lst ctx ens wrld state)
  (let ((n (length attachment-alist)))
    (assert$ (and attachment-alist (int= n (length helpers-lst)))
             (pprogn
              (cond ((int= n 1) state)
...">prove-defattach-guards</a>
  (attachment-alist helpers-lst ctx ens wrld state)
  (let ((n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> attachment-alist)))
    (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> attachment-alist (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> helpers-lst)))
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">1</span>) state)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
              nil
              state
              (n)
              (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~%We first consider the ~n0 guard proof ~
                          obligations.~%"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 n))
                (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                state
                nil))))
        (<a class="sym-link local-def" href="#def-prove-defattach-guards1" data-sym="PROVE-DEFATTACH-GUARDS1" title="(defun prove-defattach-guards1
       (i n attachment-alist-tail attachment-alist helpers-lst ctx ens wrld
        state ttree)
  (cond
   ((null attachment-alist-tail)
...">prove-defattach-guards1</a> <span class="number">1</span>
          n
          attachment-alist
          attachment-alist
          helpers-lst
          ctx
          ens
          wrld
          state
          nil)))))</pre>
  </div>

<div class="form-block function" id="def-true-apply_24-warrant" data-defines="TRUE-APPLY$-WARRANT" data-references="T,XARGS,DECLARE,DEFUN" data-used-by="ATTACHMENT-RECORDS,DEFATTACH-CONSTRAINT-REC,PROCESS-DEFATTACH-ARGS1" data-part-name="TRUE-APPLY$-WARRANT" data-part-declare="T,XARGS,DECLARE" data-part-body="T" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRUE-APPLY$-WARRANT">true-apply$-warrant</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-true-apply_24-warrant" data-sym="TRUE-APPLY$-WARRANT" title="(defun true-apply$-warrant () (declare (xargs :guard t :mode :logic)) t)">true-apply$-warrant</a>
  nil
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:mode</span> <span class="keyword">:logic</span>))
  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-defattach-constraint-rec" data-defines="DEFATTACH-CONSTRAINT-REC" data-references="PROVED-FUNCTIONAL-INSTANCES-ALIST-ENTRY,MAKE,SUBLIS-FN-SIMPLE,CONJOIN2,SUBLIS-FN-LST-SIMPLE,CONJOIN,IF,ADD-TO-SET,NULL,CONS,RESTRICT-ALIST,CONSTRAINT-ALIST,INSTANTIABLE-FFN-SYMBS,INSTANTIABLE-FFN-SYMBS-LST,INSTANTIABLE-FNS,EVENT-RESPONSIBLE-FOR-PROVED-CONSTRAINT,EV,LET*,MEMBER-EQ,OR,KEY,LET,UNKNOWN-CONSTRAINTS-P,IGNORE,DECLARE,CONSTRAINT-INFO,ORIGINS,X,NAME,MV-LET,T,CDR,CAAR,WARRANT-FUNCTION-NAMEP,TRUE-APPLY$-WARRANT,QUOTE,CDAR,EQ,AND,MV,ENDP,COND,WRLD,SEEN,NEW-ENTRIES,EVENT-NAMES,CONSTRAINT,PROVED-FNL-INSTS-ALIST,FULL-ALIST,ALIST,DEFUN" data-used-by="DEFATTACH-CONSTRAINT" data-part-name="DEFATTACH-CONSTRAINT-REC" data-part-args="WRLD,SEEN,NEW-ENTRIES,EVENT-NAMES,CONSTRAINT,PROVED-FNL-INSTS-ALIST,FULL-ALIST,ALIST" data-part-body="PROVED-FUNCTIONAL-INSTANCES-ALIST-ENTRY,MAKE,SUBLIS-FN-SIMPLE,CONJOIN2,SUBLIS-FN-LST-SIMPLE,CONJOIN,IF,ADD-TO-SET,NULL,CONS,RESTRICT-ALIST,CONSTRAINT-ALIST,INSTANTIABLE-FFN-SYMBS,INSTANTIABLE-FFN-SYMBS-LST,INSTANTIABLE-FNS,EVENT-RESPONSIBLE-FOR-PROVED-CONSTRAINT,EV,LET*,MEMBER-EQ,OR,KEY,LET,UNKNOWN-CONSTRAINTS-P,IGNORE,DECLARE,CONSTRAINT-INFO,ORIGINS,X,NAME,MV-LET,T,SEEN,PROVED-FNL-INSTS-ALIST,FULL-ALIST,CDR,DEFATTACH-CONSTRAINT-REC,WRLD,CAAR,WARRANT-FUNCTION-NAMEP,TRUE-APPLY$-WARRANT,QUOTE,CDAR,EQ,AND,NEW-ENTRIES,EVENT-NAMES,CONSTRAINT,MV,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-CONSTRAINT-REC">defattach-constraint-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-constraint-rec" data-sym="DEFATTACH-CONSTRAINT-REC" title="(defun defattach-constraint-rec
       (alist full-alist proved-fnl-insts-alist constraint event-names
        new-entries seen wrld)
  (cond ((endp alist) (mv constraint event-names new-entries))
        ((and (eq (cdar alist) &#39;true-apply$-warrant)
...">defattach-constraint-rec</a>
  (alist full-alist
    proved-fnl-insts-alist
    constraint
    event-names
    new-entries
    seen
    wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> constraint event-names new-entries))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) '<a class="sym-link local-def" href="#def-true-apply_24-warrant" data-sym="TRUE-APPLY$-WARRANT" title="(defun true-apply$-warrant () (declare (xargs :guard t :mode :logic)) t)">true-apply$-warrant</a>)
       (warrant-function-namep (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) wrld)) (<a class="sym-link local-def" href="#def-defattach-constraint-rec" data-sym="DEFATTACH-CONSTRAINT-REC" title="(defun defattach-constraint-rec
       (alist full-alist proved-fnl-insts-alist constraint event-names
        new-entries seen wrld)
  (cond ((endp alist) (mv constraint event-names new-entries))
        ((and (eq (cdar alist) &#39;true-apply$-warrant)
...">defattach-constraint-rec</a> (cdr alist)
        full-alist
        proved-fnl-insts-alist
        constraint
        event-names
        new-entries
        seen
        wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (name x origins)
        (<a class="sym-link system" href="history-management.html#def-constraint-info" data-sym="CONSTRAINT-INFO">constraint-info</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) wrld)
        (declare (ignore origins))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> x) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> x name nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((key (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key seen) (<a class="sym-link local-def" href="#def-defattach-constraint-rec" data-sym="DEFATTACH-CONSTRAINT-REC" title="(defun defattach-constraint-rec
       (alist full-alist proved-fnl-insts-alist constraint event-names
        new-entries seen wrld)
  (cond ((endp alist) (mv constraint event-names new-entries))
        ((and (eq (cdar alist) &#39;true-apply$-warrant)
...">defattach-constraint-rec</a> (cdr alist)
                    full-alist
                    proved-fnl-insts-alist
                    constraint
                    event-names
                    new-entries
                    seen
                    wrld))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ev (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> x
                         (<a class="sym-link system" href="history-management.html#def-event-responsible-for-proved-constraint" data-sym="EVENT-RESPONSIBLE-FOR-PROVED-CONSTRAINT">event-responsible-for-proved-constraint</a> key
                           full-alist
                           proved-fnl-insts-alist))) (instantiable-fns (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> x
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (name (instantiable-ffn-symbs-lst x wrld nil nil))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-instantiable-ffn-symbs" data-sym="INSTANTIABLE-FFN-SYMBS">instantiable-ffn-symbs</a> x wrld nil nil)))))
                      (constraint-alist (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> x (<a class="sym-link system" href="axioms.html#def-restrict-alist" data-sym="RESTRICT-ALIST">restrict-alist</a> instantiable-fns full-alist)))
                      (seen (cons key seen)))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) (<a class="sym-link local-def" href="#def-defattach-constraint-rec" data-sym="DEFATTACH-CONSTRAINT-REC" title="(defun defattach-constraint-rec
       (alist full-alist proved-fnl-insts-alist constraint event-names
        new-entries seen wrld)
  (cond ((endp alist) (mv constraint event-names new-entries))
        ((and (eq (cdar alist) &#39;true-apply$-warrant)
...">defattach-constraint-rec</a> (cdr alist)
                          full-alist
                          proved-fnl-insts-alist
                          constraint
                          event-names
                          new-entries
                          seen
                          wrld))
                      (ev (<a class="sym-link local-def" href="#def-defattach-constraint-rec" data-sym="DEFATTACH-CONSTRAINT-REC" title="(defun defattach-constraint-rec
       (alist full-alist proved-fnl-insts-alist constraint event-names
        new-entries seen wrld)
  (cond ((endp alist) (mv constraint event-names new-entries))
        ((and (eq (cdar alist) &#39;true-apply$-warrant)
...">defattach-constraint-rec</a> (cdr alist)
                          full-alist
                          proved-fnl-insts-alist
                          constraint
                          (<a class="sym-link system" href="axioms.html#def-add-to-set" data-sym="ADD-TO-SET">add-to-set</a> ev event-names)
                          new-entries
                          seen
                          wrld))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defattach-constraint-rec" data-sym="DEFATTACH-CONSTRAINT-REC" title="(defun defattach-constraint-rec
       (alist full-alist proved-fnl-insts-alist constraint event-names
        new-entries seen wrld)
  (cond ((endp alist) (mv constraint event-names new-entries))
        ((and (eq (cdar alist) &#39;true-apply$-warrant)
...">defattach-constraint-rec</a> (cdr alist)
                          full-alist
                          proved-fnl-insts-alist
                          (if name
                            (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> (cons constraint (<a class="sym-link system" href="history-management.html#def-sublis-fn-lst-simple" data-sym="SUBLIS-FN-LST-SIMPLE">sublis-fn-lst-simple</a> constraint-alist x)))
                            (<a class="sym-link system" href="axioms.html#def-conjoin2" data-sym="CONJOIN2">conjoin2</a> constraint (<a class="sym-link system" href="history-management.html#def-sublis-fn-simple" data-sym="SUBLIS-FN-SIMPLE">sublis-fn-simple</a> constraint-alist x)))
                          event-names
                          (cons (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> proved-functional-instances-alist-entry
                              <span class="keyword">:constraint-event-name</span> key
                              <span class="keyword">:restricted-alist</span> constraint-alist
                              <span class="keyword">:behalf-of-event-name</span> <span class="number">0</span>)
                            new-entries)
                          seen
                          wrld)))))))))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-constraint" data-defines="DEFATTACH-CONSTRAINT" data-references="LIST*,VALUE,T,DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR,UNKNOWN-CONSTRAINTS-P,COND,*T*,DEFATTACH-CONSTRAINT-REC,NEW-ENTRIES,EVENT-NAMES,GOAL,MV-LET,STATE,CTX,WRLD,PROVED-FNL-INSTS-ALIST,ATTACHMENT-ALIST,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFATTACH" data-part-name="DEFATTACH-CONSTRAINT" data-part-args="STATE,CTX,WRLD,PROVED-FNL-INSTS-ALIST,ATTACHMENT-ALIST" data-part-body="LIST*,VALUE,T,STATE,CTX,DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR,UNKNOWN-CONSTRAINTS-P,COND,WRLD,*T*,PROVED-FNL-INSTS-ALIST,ATTACHMENT-ALIST,DEFATTACH-CONSTRAINT-REC,NEW-ENTRIES,EVENT-NAMES,GOAL,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-CONSTRAINT">defattach-constraint</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-constraint" data-sym="DEFATTACH-CONSTRAINT" title="(defun defattach-constraint
       (attachment-alist proved-fnl-insts-alist wrld ctx state)
  (mv-let (goal event-names new-entries)
          (defattach-constraint-rec attachment-alist attachment-alist
                                    proved-fnl-insts-alist *t* nil nil nil
...">defattach-constraint</a>
  (attachment-alist proved-fnl-insts-alist wrld ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (goal event-names new-entries)
    (<a class="sym-link local-def" href="#def-defattach-constraint-rec" data-sym="DEFATTACH-CONSTRAINT-REC" title="(defun defattach-constraint-rec
       (alist full-alist proved-fnl-insts-alist constraint event-names
        new-entries seen wrld)
  (cond ((endp alist) (mv constraint event-names new-entries))
        ((and (eq (cdar alist) &#39;true-apply$-warrant)
...">defattach-constraint-rec</a> attachment-alist
      attachment-alist
      proved-fnl-insts-alist
      <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>
      nil
      nil
      nil
      wrld)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> goal) (<a class="sym-link local-def" href="#def-defattach-unknown-constraints-error" data-sym="DEFATTACH-UNKNOWN-CONSTRAINTS-ERROR" title="(defun defattach-unknown-constraints-error (name ctx state)
  (er soft ctx
      &quot;Attachment is disallowed in this context, because the function ~x0 has ~
       unknown-constraints.  See :DOC partial-encapsulate.&quot;
      name))">defattach-unknown-constraints-error</a> event-names ctx state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> goal event-names new-entries))))))</pre>
  </div>

<div class="form-block function" id="def-prove-defattach-constraint" data-defines="PROVE-DEFATTACH-CONSTRAINT" data-references="MAKE-PSPV,PROVE,PROOF-BUILDER,TTREE,ER-LET*,INSTRUCTIONS,HINTS,ASSOC-EQ,OTF-FLG,UNTRANSLATE,UGOAL,VALUE,PROOFS-CO,REMOVE,T,MSG,CDR,MEMBER,NULL,CONS,LIST,FMS,EVENT,IO?,PPROGN,*T*,EQUAL,COND,CONSTRAINT-BYPASS-STRING,LET,UNKNOWN-CONSTRAINTS-P,NOT,ASSERT$,STATE,WRLD,ENS,CTX,HELPER-ALIST,ATTACHMENT-ALIST,EVENT-NAMES,GOAL,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFATTACH" data-part-name="PROVE-DEFATTACH-CONSTRAINT" data-part-args="STATE,WRLD,ENS,CTX,HELPER-ALIST,ATTACHMENT-ALIST,EVENT-NAMES,GOAL" data-part-body="CTX,ENS,MAKE-PSPV,PROVE,PROOF-BUILDER,TTREE,ER-LET*,INSTRUCTIONS,HINTS,HELPER-ALIST,ASSOC-EQ,OTF-FLG,WRLD,UNTRANSLATE,UGOAL,VALUE,PROOFS-CO,REMOVE,T,MSG,CDR,MEMBER,NULL,CONS,LIST,FMS,EVENT-NAMES,ATTACHMENT-ALIST,STATE,EVENT,IO?,PPROGN,*T*,EQUAL,COND,CONSTRAINT-BYPASS-STRING,LET,GOAL,UNKNOWN-CONSTRAINTS-P,NOT,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROVE-DEFATTACH-CONSTRAINT">prove-defattach-constraint</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prove-defattach-constraint" data-sym="PROVE-DEFATTACH-CONSTRAINT" title="(defun prove-defattach-constraint
       (goal event-names attachment-alist helper-alist ctx ens wrld state)
  (assert$ (not (unknown-constraints-p goal))
           (let ((constraint-bypass-string
                  &quot;  Note that we are bypassing constraints that have been proved ~
...">prove-defattach-constraint</a>
  (goal event-names
    attachment-alist
    helper-alist
    ctx
    ens
    wrld
    state)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="history-management.html#def-unknown-constraints-p" data-sym="UNKNOWN-CONSTRAINTS-P">unknown-constraints-p</a> goal))
    (let ((constraint-bypass-string <span class="string">"  Note that we are bypassing constraints that have been proved ~
           when processing ~#0~[previous events~/events including ~&amp;1~/the ~
           event~#1~[~/s~] ~&amp;1~]."</span>))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal goal <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
              nil
              state
              (attachment-alist event-names constraint-bypass-string)
              (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~%The attachment~#0~[ trivially satisfies~/s trivially ~
                 satisfy~] the required constraints.~@1~|~%"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 attachment-alist)
                  (cons #\1
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> event-names) <span class="string">""</span>)
                      ((<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> <span class="number">0</span> event-names) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr event-names)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> constraint-bypass-string <span class="number">0</span> event-names))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> constraint-bypass-string <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-remove" data-sym="REMOVE">remove</a> <span class="number">0</span> event-names)))))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> constraint-bypass-string <span class="number">2</span> event-names)))))
                (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                state
                nil))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((ugoal (untranslate goal <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)) (otf-flg (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:otf-flg</span> helper-alist)))
              (hints (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:hints</span> helper-alist)))
              (instructions (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:instructions</span> helper-alist))))
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
                nil
                state
                (attachment-alist event-names
                  constraint-bypass-string
                  ugoal)
                (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~%We now prove that the attachment~#0~[ satisfies~/s ~
                 satisfy~] the required constraint.~@1~|The goal to prove ~
                 is~|~%~y2."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 attachment-alist)
                    (cons #\1
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> event-names) <span class="string">""</span>)
                        ((<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> <span class="number">0</span> event-names) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr event-names)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> constraint-bypass-string <span class="number">0</span> event-names))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> constraint-bypass-string <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-remove" data-sym="REMOVE">remove</a> <span class="number">0</span> event-names)))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> constraint-bypass-string <span class="number">2</span> event-names))))
                    (cons #\2 ugoal))
                  (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                  state
                  nil))
              (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ttree (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (instructions (proof-builder nil ugoal goal nil instructions wrld state))
                     (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a> goal
                         (<a class="sym-link system" href="prove.html#def-make-pspv" data-sym="MAKE-PSPV">make-pspv</a> ens
                           wrld
                           state
                           <span class="keyword">:displayed-goal</span> ugoal
                           <span class="keyword">:otf-flg</span> otf-flg)
                         hints
                         ens
                         wrld
                         ctx
                         state)))))
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> ttree)))))))))</pre>
  </div>

<div class="form-block function" id="def-attachment-component-owner" data-defines="ATTACHMENT-COMPONENT-OWNER" data-references="CAR,IF,PATH,G,DEFUN" data-used-by="EXTEND-ATTACHMENT-COMPONENTS,DEFATTACH-MERGE-COMPONENTS,DEFATTACH-COMPONENT-HAS-OWNER" data-part-name="ATTACHMENT-COMPONENT-OWNER" data-part-args="PATH,G" data-part-body="G,CAR,PATH,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ATTACHMENT-COMPONENT-OWNER">attachment-component-owner</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-attachment-component-owner" data-sym="ATTACHMENT-COMPONENT-OWNER" title="(defun attachment-component-owner (g path)
  (if path
      (car path)
      g))">attachment-component-owner</a>
  (g path)
  (if path
    (car path)
    g))</pre>
  </div>

<div class="form-block function" id="def-defattach-component-has-owner" data-defines="DEFATTACH-COMPONENT-HAS-OWNER" data-references="CDR,ATTACHMENT-COMPONENT-OWNER,EQ,OR,CAR,ATTACHMENT-COMPONENT,ACCESS,PATH,LET,T,ENDP,COND,COMPS,G0,G,DEFUN" data-used-by="DEFATTACH-MERGE-COMPONENTS" data-part-name="DEFATTACH-COMPONENT-HAS-OWNER" data-part-args="COMPS,G0,G" data-part-body="CDR,DEFATTACH-COMPONENT-HAS-OWNER,G0,ATTACHMENT-COMPONENT-OWNER,G,EQ,OR,CAR,ATTACHMENT-COMPONENT,ACCESS,PATH,LET,T,COMPS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-COMPONENT-HAS-OWNER">defattach-component-has-owner</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-component-has-owner" data-sym="DEFATTACH-COMPONENT-HAS-OWNER" title="(defun defattach-component-has-owner (g g0 comps)
  (cond ((endp comps) nil)
        (t
         (let ((path (access attachment-component (car comps) :path)))
           (or (eq g (attachment-component-owner g0 path))">defattach-component-has-owner</a>
  (g g0 comps)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> comps) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((path (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component (car comps) <span class="keyword">:path</span>)))
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> g (<a class="sym-link local-def" href="#def-attachment-component-owner" data-sym="ATTACHMENT-COMPONENT-OWNER" title="(defun attachment-component-owner (g path)
  (if path
      (car path)
      g))">attachment-component-owner</a> g0 path))
          (<a class="sym-link local-def" href="#def-defattach-component-has-owner" data-sym="DEFATTACH-COMPONENT-HAS-OWNER" title="(defun defattach-component-has-owner (g g0 comps)
  (cond ((endp comps) nil)
        (t
         (let ((path (access attachment-component (car comps) :path)))
           (or (eq g (attachment-component-owner g0 path))">defattach-component-has-owner</a> g g0 (cdr comps)))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-merge-into-component" data-defines="DEFATTACH-MERGE-INTO-COMPONENT" data-references="MAKE,H1,LOOP,QUOTE,CDR,LIST*,INTERSECTION1-EQ,H,LET,CONS,APPEND,NULL,AND,MEMBER-EQ,OR,NEW-PATH,ORD-ANC0,EXT-ANC0,ATTACHMENT-COMPONENT,ACCESS,PATH0,CAR,COMP0,LET*,T,MV,ENDP,COND,PATH1,EXT-ANC1,ORD-ANC1,G1,EXT-SUCC1,COMPS0,EXT-SUCC0,G0,DEFUN" data-used-by="DEFATTACH-MERGE-COMPONENTS" data-part-name="DEFATTACH-MERGE-INTO-COMPONENT" data-part-args="PATH1,EXT-ANC1,ORD-ANC1,G1,EXT-SUCC1,COMPS0,EXT-SUCC0,G0" data-part-body="MAKE,H1,LOOP,QUOTE,EXT-ANC1,ORD-ANC1,CDR,EXT-SUCC0,G0,DEFATTACH-MERGE-INTO-COMPONENT,LIST*,EXT-SUCC1,INTERSECTION1-EQ,H,LET,CONS,APPEND,PATH1,NULL,AND,G1,MEMBER-EQ,OR,NEW-PATH,ORD-ANC0,EXT-ANC0,ATTACHMENT-COMPONENT,ACCESS,PATH0,CAR,COMP0,LET*,T,MV,COMPS0,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-MERGE-INTO-COMPONENT">defattach-merge-into-component</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-merge-into-component" data-sym="DEFATTACH-MERGE-INTO-COMPONENT" title="(defun defattach-merge-into-component
       (g0 ext-succ0 comps0 ext-succ1 g1 ord-anc1 ext-anc1 path1)
  (cond ((endp comps0) (mv nil nil))
        (t
         (let* ((comp0 (car comps0))
...">defattach-merge-into-component</a>
  (g0 ext-succ0 comps0 ext-succ1 g1 ord-anc1 ext-anc1 path1)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> comps0) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((comp0 (car comps0)) (path0 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component comp0 <span class="keyword">:path</span>))
          (ext-anc0 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component comp0 <span class="keyword">:ext-anc</span>))
          (ord-anc0 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component comp0 <span class="keyword">:ord-anc</span>))
          (new-path (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> g1 ext-anc0)
                 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> path1) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> g1 ord-anc0))) (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> path1 (cons g1 path0)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((h (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="rewrite.html#def-intersection1-eq" data-sym="INTERSECTION1-EQ">intersection1-eq</a> ext-anc0 ext-succ1)
                       (<a class="sym-link system" href="rewrite.html#def-intersection1-eq" data-sym="INTERSECTION1-EQ">intersection1-eq</a> ord-anc0 ext-succ1))))
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> h (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> path1 (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> g1 h path0))))))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> new-path) (<a class="sym-link local-def" href="#def-defattach-merge-into-component" data-sym="DEFATTACH-MERGE-INTO-COMPONENT" title="(defun defattach-merge-into-component
       (g0 ext-succ0 comps0 ext-succ1 g1 ord-anc1 ext-anc1 path1)
  (cond ((endp comps0) (mv nil nil))
        (t
         (let* ((comp0 (car comps0))
...">defattach-merge-into-component</a> g0
              ext-succ0
              (cdr comps0)
              ext-succ1
              g1
              ord-anc1
              ext-anc1
              path1))
          ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> g0 ord-anc1) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> g0 ext-anc1)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'loop (cons g0 new-path)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((h1 (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="rewrite.html#def-intersection1-eq" data-sym="INTERSECTION1-EQ">intersection1-eq</a> ext-succ0 ord-anc1)
                   (<a class="sym-link system" href="rewrite.html#def-intersection1-eq" data-sym="INTERSECTION1-EQ">intersection1-eq</a> ext-succ0 ext-anc1))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (h1 (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'loop (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> g0 h1 new-path)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
                    (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> attachment-component
                      <span class="keyword">:ord-anc</span> ord-anc1
                      <span class="keyword">:ext-anc</span> ext-anc1
                      <span class="keyword">:path</span> new-path)))))))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-merge-components" data-defines="DEFATTACH-MERGE-COMPONENTS" data-references="CONS,LOOP,QUOTE,EQ,DEFATTACH-MERGE-INTO-COMPONENT,COMP1,LET,NEW-COMP,FLG1,MV-LET,T,CDR,CAR,ATTACHMENT-COMPONENT,ACCESS,ATTACHMENT-COMPONENT-OWNER,DEFATTACH-COMPONENT-HAS-OWNER,MV,ENDP,COND,EXTENDED-COMPS0,FLG,COMPS1,G1,EXT-SUCC1,COMPS0,EXT-SUCC0,G0,DEFUN" data-used-by="DEFATTACH-MERGE" data-part-name="DEFATTACH-MERGE-COMPONENTS" data-part-args="EXTENDED-COMPS0,FLG,COMPS1,G1,EXT-SUCC1,COMPS0,EXT-SUCC0,G0" data-part-body="CONS,LOOP,QUOTE,EQ,DEFATTACH-MERGE-INTO-COMPONENT,COMP1,LET,NEW-COMP,FLG1,MV-LET,T,CDR,EXT-SUCC1,EXT-SUCC0,DEFATTACH-MERGE-COMPONENTS,COMPS0,G0,CAR,ATTACHMENT-COMPONENT,ACCESS,G1,ATTACHMENT-COMPONENT-OWNER,DEFATTACH-COMPONENT-HAS-OWNER,EXTENDED-COMPS0,FLG,MV,COMPS1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-MERGE-COMPONENTS">defattach-merge-components</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-merge-components" data-sym="DEFATTACH-MERGE-COMPONENTS" title="(defun defattach-merge-components
       (g0 ext-succ0 comps0 ext-succ1 g1 comps1 flg extended-comps0)
  (cond ((endp comps1) (mv flg extended-comps0))
        ((defattach-component-has-owner
          (attachment-component-owner g1
...">defattach-merge-components</a>
  (g0 ext-succ0
    comps0
    ext-succ1
    g1
    comps1
    flg
    extended-comps0)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> comps1) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> flg extended-comps0))
    ((<a class="sym-link local-def" href="#def-defattach-component-has-owner" data-sym="DEFATTACH-COMPONENT-HAS-OWNER" title="(defun defattach-component-has-owner (g g0 comps)
  (cond ((endp comps) nil)
        (t
         (let ((path (access attachment-component (car comps) :path)))
           (or (eq g (attachment-component-owner g0 path))">defattach-component-has-owner</a> (<a class="sym-link local-def" href="#def-attachment-component-owner" data-sym="ATTACHMENT-COMPONENT-OWNER" title="(defun attachment-component-owner (g path)
  (if path
      (car path)
      g))">attachment-component-owner</a> g1
         (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component (car comps1) <span class="keyword">:path</span>))
       g0
       comps0) (<a class="sym-link local-def" href="#def-defattach-merge-components" data-sym="DEFATTACH-MERGE-COMPONENTS" title="(defun defattach-merge-components
       (g0 ext-succ0 comps0 ext-succ1 g1 comps1 flg extended-comps0)
  (cond ((endp comps1) (mv flg extended-comps0))
        ((defattach-component-has-owner
          (attachment-component-owner g1
...">defattach-merge-components</a> g0
        ext-succ0
        comps0
        ext-succ1
        g1
        (cdr comps1)
        flg
        extended-comps0))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg1 new-comp)
        (let ((comp1 (car comps1)))
          (<a class="sym-link local-def" href="#def-defattach-merge-into-component" data-sym="DEFATTACH-MERGE-INTO-COMPONENT" title="(defun defattach-merge-into-component
       (g0 ext-succ0 comps0 ext-succ1 g1 ord-anc1 ext-anc1 path1)
  (cond ((endp comps0) (mv nil nil))
        (t
         (let* ((comp0 (car comps0))
...">defattach-merge-into-component</a> g0
            ext-succ0
            comps0
            ext-succ1
            g1
            (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component comp1 <span class="keyword">:ord-anc</span>)
            (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component comp1 <span class="keyword">:ext-anc</span>)
            (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component comp1 <span class="keyword">:path</span>)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg1 'loop) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> flg1 new-comp))
          (new-comp (<a class="sym-link local-def" href="#def-defattach-merge-components" data-sym="DEFATTACH-MERGE-COMPONENTS" title="(defun defattach-merge-components
       (g0 ext-succ0 comps0 ext-succ1 g1 comps1 flg extended-comps0)
  (cond ((endp comps1) (mv flg extended-comps0))
        ((defattach-component-has-owner
          (attachment-component-owner g1
...">defattach-merge-components</a> g0
              ext-succ0
              comps0
              ext-succ1
              g1
              (cdr comps1)
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
              (cons new-comp extended-comps0)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defattach-merge-components" data-sym="DEFATTACH-MERGE-COMPONENTS" title="(defun defattach-merge-components
       (g0 ext-succ0 comps0 ext-succ1 g1 comps1 flg extended-comps0)
  (cond ((endp comps1) (mv flg extended-comps0))
        ((defattach-component-has-owner
          (attachment-component-owner g1
...">defattach-merge-components</a> g0
              ext-succ0
              comps0
              ext-succ1
              g1
              (cdr comps1)
              flg
              extended-comps0)))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-merge" data-defines="DEFATTACH-MERGE" data-references="CHANGE,T,NULL,MV,LOOP,QUOTE,EQ,COND,DEFATTACH-MERGE-COMPONENTS,VAL,FLG,MV-LET,COMPS1,G1,EXT-SUCC1,COMPS0,EXT-SUCC0,ATTACHMENT,ACCESS,G0,LET,R1,R0,DEFUN" data-used-by="DEFATTACH-MERGE-LST" data-part-name="DEFATTACH-MERGE" data-part-args="R1,R0" data-part-body="CHANGE,T,NULL,MV,LOOP,QUOTE,EQ,COND,DEFATTACH-MERGE-COMPONENTS,VAL,FLG,MV-LET,COMPS1,G1,R1,EXT-SUCC1,COMPS0,EXT-SUCC0,R0,ATTACHMENT,ACCESS,G0,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-MERGE">defattach-merge</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-merge" data-sym="DEFATTACH-MERGE" title="(defun defattach-merge (r0 r1)
  (let ((g0 (access attachment r0 :g))
        (ext-succ0 (access attachment r0 :ext-succ))
        (comps0 (access attachment r0 :components))
        (ext-succ1 (access attachment r1 :ext-succ))
...">defattach-merge</a>
  (r0 r1)
  (let ((g0 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment r0 <span class="keyword">:g</span>)) (ext-succ0 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment r0 <span class="keyword">:ext-succ</span>))
      (comps0 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment r0 <span class="keyword">:components</span>))
      (ext-succ1 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment r1 <span class="keyword">:ext-succ</span>))
      (g1 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment r1 <span class="keyword">:g</span>))
      (comps1 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment r1 <span class="keyword">:components</span>)))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg val)
      (<a class="sym-link local-def" href="#def-defattach-merge-components" data-sym="DEFATTACH-MERGE-COMPONENTS" title="(defun defattach-merge-components
       (g0 ext-succ0 comps0 ext-succ1 g1 comps1 flg extended-comps0)
  (cond ((endp comps1) (mv flg extended-comps0))
        ((defattach-component-has-owner
          (attachment-component-owner g1
...">defattach-merge-components</a> g0
        ext-succ0
        comps0
        ext-succ1
        g1
        comps1
        nil
        comps0)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'loop) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> flg val))
        ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> flg) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil r0))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> attachment r0 <span class="keyword">:components</span> val)))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-merge-lst" data-defines="DEFATTACH-MERGE-LST" data-references="OR,CDR,LOOP,QUOTE,EQ,CAR,DEFATTACH-MERGE,FLG,MV-LET,T,MV,ENDP,COND,ACL2-COUNT,XARGS,DECLARE,CHANGEDP,LST,R,DEFUN" data-used-by="DEFATTACH-MERGE-LST-LST" data-part-name="DEFATTACH-MERGE-LST" data-part-args="CHANGEDP,LST,R" data-part-declare="LST,ACL2-COUNT,XARGS,DECLARE" data-part-body="OR,CDR,DEFATTACH-MERGE-LST,LOOP,QUOTE,EQ,CAR,DEFATTACH-MERGE,FLG,MV-LET,T,R,CHANGEDP,MV,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-MERGE-LST">defattach-merge-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-merge-lst" data-sym="DEFATTACH-MERGE-LST" title="(defun defattach-merge-lst (r lst changedp)
  (declare (xargs :measure (acl2-count lst)))
  (cond ((endp lst) (mv changedp r))
        (t
         (mv-let (flg r) (defattach-merge r (car lst))
...">defattach-merge-lst</a>
  (r lst changedp)
  (declare (xargs <span class="keyword">:measure</span> (<a class="sym-link system" href="axioms.html#def-acl2-count" data-sym="ACL2-COUNT">acl2-count</a> lst)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> changedp r))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg r)
        (<a class="sym-link local-def" href="#def-defattach-merge" data-sym="DEFATTACH-MERGE" title="(defun defattach-merge (r0 r1)
  (let ((g0 (access attachment r0 :g))
        (ext-succ0 (access attachment r0 :ext-succ))
        (comps0 (access attachment r0 :components))
        (ext-succ1 (access attachment r1 :ext-succ))
...">defattach-merge</a> r (car lst))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'loop) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> flg r))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defattach-merge-lst" data-sym="DEFATTACH-MERGE-LST" title="(defun defattach-merge-lst (r lst changedp)
  (declare (xargs :measure (acl2-count lst)))
  (cond ((endp lst) (mv changedp r))
        (t
         (mv-let (flg r) (defattach-merge r (car lst))
...">defattach-merge-lst</a> r (cdr lst) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> flg changedp))))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-merge-lst-lst" data-defines="DEFATTACH-MERGE-LST-LST" data-references="OR,CONS,LOOP,QUOTE,EQ,CDR,CAR,DEFATTACH-MERGE-LST,R,FLG,MV-LET,T,MV,ENDP,COND,CHANGEDP,DONE,TO-DO,DEFUN" data-used-by="DEFATTACH-CLOSE" data-part-name="DEFATTACH-MERGE-LST-LST" data-part-args="CHANGEDP,DONE,TO-DO" data-part-body="OR,CONS,DEFATTACH-MERGE-LST-LST,LOOP,QUOTE,EQ,CDR,CAR,DEFATTACH-MERGE-LST,R,FLG,MV-LET,T,DONE,CHANGEDP,MV,TO-DO,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-MERGE-LST-LST">defattach-merge-lst-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-merge-lst-lst" data-sym="DEFATTACH-MERGE-LST-LST" title="(defun defattach-merge-lst-lst (to-do done changedp)
  (cond ((endp to-do) (mv changedp done))
        (t
         (mv-let (flg r) (defattach-merge-lst (car to-do) (cdr to-do) changedp)
                 (cond ((eq flg &#39;loop) (mv flg r))
...">defattach-merge-lst-lst</a>
  (to-do done changedp)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> to-do) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> changedp done))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg r)
        (<a class="sym-link local-def" href="#def-defattach-merge-lst" data-sym="DEFATTACH-MERGE-LST" title="(defun defattach-merge-lst (r lst changedp)
  (declare (xargs :measure (acl2-count lst)))
  (cond ((endp lst) (mv changedp r))
        (t
         (mv-let (flg r) (defattach-merge r (car lst))
...">defattach-merge-lst</a> (car to-do) (cdr to-do) changedp)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'loop) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> flg r))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg r)
              (<a class="sym-link local-def" href="#def-defattach-merge-lst" data-sym="DEFATTACH-MERGE-LST" title="(defun defattach-merge-lst (r lst changedp)
  (declare (xargs :measure (acl2-count lst)))
  (cond ((endp lst) (mv changedp r))
        (t
         (mv-let (flg r) (defattach-merge r (car lst))
...">defattach-merge-lst</a> r done flg)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'loop) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> flg r))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defattach-merge-lst-lst" data-sym="DEFATTACH-MERGE-LST-LST" title="(defun defattach-merge-lst-lst (to-do done changedp)
  (cond ((endp to-do) (mv changedp done))
        (t
         (mv-let (flg r) (defattach-merge-lst (car to-do) (cdr to-do) changedp)
                 (cond ((eq flg &#39;loop) (mv flg r))
...">defattach-merge-lst-lst</a> (cdr to-do)
                    (cons r done)
                    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> changedp flg)))))))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-loop-error-msg" data-defines="DEFATTACH-LOOP-ERROR-MSG" data-references="MSG,CADR,CDR,IF,H2,CAR,H1,LET,T,ENDP,COND,END,LOOP,DEFUN" data-used-by="DEFATTACH-LOOP-ERROR" data-part-name="DEFATTACH-LOOP-ERROR-MSG" data-part-args="END,LOOP" data-part-body="DEFATTACH-LOOP-ERROR-MSG,MSG,END,CADR,CDR,IF,H2,CAR,H1,LET,T,LOOP,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-LOOP-ERROR-MSG">defattach-loop-error-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-loop-error-msg" data-sym="DEFATTACH-LOOP-ERROR-MSG" title="(defun defattach-loop-error-msg (loop end)
  (cond ((endp loop) &quot;&quot;)
        (t
         (let ((h1 (car loop))
               (h2
...">defattach-loop-error-msg</a>
  (loop end)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> loop) <span class="string">""</span>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((h1 (car loop)) (h2 (if (cdr loop)
              (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> loop)
              end)))
        (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0 is an extended ancestor of ~x1.~|~@2"</span>
          h1
          h2
          (<a class="sym-link local-def" href="#def-defattach-loop-error-msg" data-sym="DEFATTACH-LOOP-ERROR-MSG" title="(defun defattach-loop-error-msg (loop end)
  (cond ((endp loop) &quot;&quot;)
        (t
         (let ((h1 (car loop))
               (h2
...">defattach-loop-error-msg</a> (cdr loop) end))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-loop-error" data-defines="DEFATTACH-LOOP-ERROR" data-references="CAR,DEFATTACH-LOOP-ERROR-MSG,SOFT,ER,STATE,CTX,LOOP,DEFUN" data-used-by="UPDATE-ATTACHMENT-RECORDS,DEFATTACH-CLOSE" data-part-name="DEFATTACH-LOOP-ERROR" data-part-args="STATE,CTX,LOOP" data-part-body="CAR,LOOP,DEFATTACH-LOOP-ERROR-MSG,CTX,SOFT,ER" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-LOOP-ERROR">defattach-loop-error</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-loop-error" data-sym="DEFATTACH-LOOP-ERROR" title="(defun defattach-loop-error (loop ctx state)
  (er soft ctx
      &quot;The proposed defattach event is illegal because the following is a ~
       loop in the resulting extended ancestor relation.  See :DOC ~
       defattach.~|~%~@0&quot;">defattach-loop-error</a>
  (loop ctx state)
  (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
    ctx
    <span class="string">"The proposed defattach event is illegal because the following is a ~
       loop in the resulting extended ancestor relation.  See :DOC ~
       defattach.~|~%~@0"</span>
    (<a class="sym-link local-def" href="#def-defattach-loop-error-msg" data-sym="DEFATTACH-LOOP-ERROR-MSG" title="(defun defattach-loop-error-msg (loop end)
  (cond ((endp loop) &quot;&quot;)
        (t
         (let ((h1 (car loop))
               (h2
...">defattach-loop-error-msg</a> loop (car loop))))</pre>
  </div>

<div class="form-block function" id="def-defattach-close" data-defines="DEFATTACH-CLOSE" data-references="T,VALUE,DEFATTACH-LOOP-ERROR,LOOP,QUOTE,EQ,COND,DEFATTACH-MERGE-LST-LST,FLG,MV-LET,STATE,CTX,RECORDS,DEFUN" data-used-by="CHK-DEFATTACH-LOOP" data-part-name="DEFATTACH-CLOSE" data-part-args="STATE,CTX,RECORDS" data-part-body="DEFATTACH-CLOSE,T,VALUE,STATE,CTX,DEFATTACH-LOOP-ERROR,LOOP,QUOTE,EQ,COND,DEFATTACH-MERGE-LST-LST,RECORDS,FLG,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-CLOSE">defattach-close</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-close" data-sym="DEFATTACH-CLOSE" title="(defun defattach-close (records ctx state)
  (mv-let (flg records) (defattach-merge-lst-lst records nil nil)
          (cond ((eq flg &#39;loop) (defattach-loop-error records ctx state))
                ((eq flg nil) (value records))
                (t (defattach-close records ctx state)))))">defattach-close</a>
  (records ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg records)
    (<a class="sym-link local-def" href="#def-defattach-merge-lst-lst" data-sym="DEFATTACH-MERGE-LST-LST" title="(defun defattach-merge-lst-lst (to-do done changedp)
  (cond ((endp to-do) (mv changedp done))
        (t
         (mv-let (flg r) (defattach-merge-lst (car to-do) (cdr to-do) changedp)
                 (cond ((eq flg &#39;loop) (mv flg r))
...">defattach-merge-lst-lst</a> records nil nil)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'loop) (<a class="sym-link local-def" href="#def-defattach-loop-error" data-sym="DEFATTACH-LOOP-ERROR" title="(defun defattach-loop-error (loop ctx state)
  (er soft ctx
      &quot;The proposed defattach event is illegal because the following is a ~
       loop in the resulting extended ancestor relation.  See :DOC ~
       defattach.~|~%~@0&quot;">defattach-loop-error</a> records ctx state))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg nil) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> records))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defattach-close" data-sym="DEFATTACH-CLOSE" title="(defun defattach-close (records ctx state)
  (mv-let (flg records) (defattach-merge-lst-lst records nil nil)
          (cond ((eq flg &#39;loop) (defattach-loop-error records ctx state))
                ((eq flg nil) (value records))
                (t (defattach-close records ctx state)))))">defattach-close</a> records ctx state)))))</pre>
  </div>

<div class="form-block function" id="def-defattach-erase-components" data-defines="DEFATTACH-ERASE-COMPONENTS" data-references="CONS,ATTACHMENT-COMPONENT,ACCESS,INTERSECTP-EQ,CDR,CDR-COMPS,CHANGEDP,MV-LET,CAR,COMP,LET,T,MV,ENDP,COND,CANONICAL-ERASED-FS,COMPONENTS,DEFUN" data-used-by="DEFATTACH-ERASE1" data-part-name="DEFATTACH-ERASE-COMPONENTS" data-part-args="CANONICAL-ERASED-FS,COMPONENTS" data-part-body="CONS,ATTACHMENT-COMPONENT,ACCESS,INTERSECTP-EQ,CANONICAL-ERASED-FS,CDR,DEFATTACH-ERASE-COMPONENTS,CDR-COMPS,CHANGEDP,MV-LET,CAR,COMP,LET,T,MV,COMPONENTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-ERASE-COMPONENTS">defattach-erase-components</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-erase-components" data-sym="DEFATTACH-ERASE-COMPONENTS" title="(defun defattach-erase-components (components canonical-erased-fs)
  (cond ((endp components) (mv nil nil))
        (t
         (let ((comp (car components)))
           (mv-let (changedp cdr-comps)
...">defattach-erase-components</a>
  (components canonical-erased-fs)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> components) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((comp (car components)))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp cdr-comps)
          (<a class="sym-link local-def" href="#def-defattach-erase-components" data-sym="DEFATTACH-ERASE-COMPONENTS" title="(defun defattach-erase-components (components canonical-erased-fs)
  (cond ((endp components) (mv nil nil))
        (t
         (let ((comp (car components)))
           (mv-let (changedp cdr-comps)
...">defattach-erase-components</a> (cdr components)
            canonical-erased-fs)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-intersectp-eq" data-sym="INTERSECTP-EQ">intersectp-eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component comp <span class="keyword">:path</span>)
               canonical-erased-fs) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> cdr-comps))
            (changedp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons comp cdr-comps)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil components))))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-erase-p" data-defines="DEFATTACH-ERASE-P" data-references="MEMBER-EQ,SET-DIFFERENCE-EQUAL,T,MV,COND,INTERSECTION-EQUAL,REMOVED-PAIRS,ATTACHMENT,ACCESS,PAIRS,LET*,CANONICAL-ERASED-FS,ERASURES,RECORD,DEFUN" data-used-by="DEFATTACH-ERASE1" data-part-name="DEFATTACH-ERASE-P" data-part-args="CANONICAL-ERASED-FS,ERASURES,RECORD" data-part-body="CANONICAL-ERASED-FS,MEMBER-EQ,SET-DIFFERENCE-EQUAL,T,MV,COND,ERASURES,INTERSECTION-EQUAL,REMOVED-PAIRS,RECORD,ATTACHMENT,ACCESS,PAIRS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-ERASE-P">defattach-erase-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-erase-p" data-sym="DEFATTACH-ERASE-P" title="(defun defattach-erase-p (record erasures canonical-erased-fs)
  (let* ((pairs (access attachment record :pairs))
         (removed-pairs (intersection-equal erasures pairs)))
    (cond (removed-pairs (mv t (set-difference-equal pairs removed-pairs)))
          ((member-eq (access attachment record :g) canonical-erased-fs)
...">defattach-erase-p</a>
  (record erasures canonical-erased-fs)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pairs (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment record <span class="keyword">:pairs</span>)) (removed-pairs (<a class="sym-link system" href="axioms.html#def-intersection-equal" data-sym="INTERSECTION-EQUAL">intersection-equal</a> erasures pairs)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (removed-pairs (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> pairs removed-pairs)))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment record <span class="keyword">:g</span>)
         canonical-erased-fs) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> pairs))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil)))))</pre>
  </div>

<div class="form-block function" id="def-defattach-erase1" data-defines="DEFATTACH-ERASE1" data-references="CONS,CHANGE,ASSERT$,DEFATTACH-ERASE-COMPONENTS,CHANGEDP,REC,ATTACHMENT,ACCESS,COMPS,LET*,APPEND,CDR,CAR,DEFATTACH-ERASE-P,NEW-ATTACHMENTS,FLG,MV-LET,T,MV,ENDP,COND,ACC-RECS,CANONICAL-ERASED-FS,ERASURES,ATTACHMENTS,RECORDS,DEFUN" data-used-by="DEFATTACH-ERASE" data-part-name="DEFATTACH-ERASE1" data-part-args="ACC-RECS,CANONICAL-ERASED-FS,ERASURES,ATTACHMENTS,RECORDS" data-part-body="CONS,CHANGE,ASSERT$,DEFATTACH-ERASE-COMPONENTS,CHANGEDP,REC,ATTACHMENT,ACCESS,COMPS,LET*,APPEND,CDR,DEFATTACH-ERASE1,CANONICAL-ERASED-FS,ERASURES,CAR,DEFATTACH-ERASE-P,NEW-ATTACHMENTS,FLG,MV-LET,T,ATTACHMENTS,ACC-RECS,MV,RECORDS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-ERASE1">defattach-erase1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-erase1" data-sym="DEFATTACH-ERASE1" title="(defun defattach-erase1
       (records attachments erasures canonical-erased-fs acc-recs)
  (cond ((endp records) (mv acc-recs attachments))
        (t
         (mv-let (flg new-attachments)
...">defattach-erase1</a>
  (records attachments erasures canonical-erased-fs acc-recs)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> records) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> acc-recs attachments))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg new-attachments)
        (<a class="sym-link local-def" href="#def-defattach-erase-p" data-sym="DEFATTACH-ERASE-P" title="(defun defattach-erase-p (record erasures canonical-erased-fs)
  (let* ((pairs (access attachment record :pairs))
         (removed-pairs (intersection-equal erasures pairs)))
    (cond (removed-pairs (mv t (set-difference-equal pairs removed-pairs)))
          ((member-eq (access attachment record :g) canonical-erased-fs)
...">defattach-erase-p</a> (car records)
          erasures
          canonical-erased-fs)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (flg (<a class="sym-link local-def" href="#def-defattach-erase1" data-sym="DEFATTACH-ERASE1" title="(defun defattach-erase1
       (records attachments erasures canonical-erased-fs acc-recs)
  (cond ((endp records) (mv acc-recs attachments))
        (t
         (mv-let (flg new-attachments)
...">defattach-erase1</a> (cdr records)
              (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> new-attachments attachments)
              erasures
              canonical-erased-fs
              acc-recs))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((comps (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment (car records) <span class="keyword">:components</span>)) (rec (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changedp comps)
                    (<a class="sym-link local-def" href="#def-defattach-erase-components" data-sym="DEFATTACH-ERASE-COMPONENTS" title="(defun defattach-erase-components (components canonical-erased-fs)
  (cond ((endp components) (mv nil nil))
        (t
         (let ((comp (car components)))
           (mv-let (changedp cdr-comps)
...">defattach-erase-components</a> comps canonical-erased-fs)
                    (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> comps
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (changedp (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> attachment (car records) <span class="keyword">:components</span> comps))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (car records)))))))
              (<a class="sym-link local-def" href="#def-defattach-erase1" data-sym="DEFATTACH-ERASE1" title="(defun defattach-erase1
       (records attachments erasures canonical-erased-fs acc-recs)
  (cond ((endp records) (mv acc-recs attachments))
        (t
         (mv-let (flg new-attachments)
...">defattach-erase1</a> (cdr records)
                attachments
                erasures
                canonical-erased-fs
                (cons rec acc-recs)))))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-erase" data-defines="DEFATTACH-ERASE" data-references="DEFATTACH-ERASE1,STRIP-CARS,COLLECT-CANONICAL-SIBLINGS,CANONICAL-ERASED-FS,LET,WRLD,ERASURES,ATTACHMENTS,RECORDS,DEFUN" data-used-by="CHK-DEFATTACH-LOOP" data-part-name="DEFATTACH-ERASE" data-part-args="WRLD,ERASURES,ATTACHMENTS,RECORDS" data-part-body="ATTACHMENTS,RECORDS,DEFATTACH-ERASE1,WRLD,ERASURES,STRIP-CARS,COLLECT-CANONICAL-SIBLINGS,CANONICAL-ERASED-FS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-ERASE">defattach-erase</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-erase" data-sym="DEFATTACH-ERASE" title="(defun defattach-erase (records attachments erasures wrld)
  (let ((canonical-erased-fs
         (collect-canonical-siblings (strip-cars erasures) wrld nil nil)))
    (defattach-erase1 records attachments erasures canonical-erased-fs nil)))">defattach-erase</a>
  (records attachments erasures wrld)
  (let ((canonical-erased-fs (<a class="sym-link system" href="defthm.html#def-collect-canonical-siblings" data-sym="COLLECT-CANONICAL-SIBLINGS">collect-canonical-siblings</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> erasures)
         wrld
         nil
         nil)))
    (<a class="sym-link local-def" href="#def-defattach-erase1" data-sym="DEFATTACH-ERASE1" title="(defun defattach-erase1
       (records attachments erasures canonical-erased-fs acc-recs)
  (cond ((endp records) (mv acc-recs attachments))
        (t
         (mv-let (flg new-attachments)
...">defattach-erase1</a> records
      attachments
      erasures
      canonical-erased-fs
      nil)))</pre>
  </div>

<div class="form-block function" id="def-collect-ext-anc" data-defines="COLLECT-EXT-ANC" data-references="T,CDR,CONS,CAR,ATTACHMENT,ACCESS,MEMBER-EQ,ENDP,COND,RECORDS,F,DEFUN" data-used-by="UPDATE-ATTACHMENT-RECORDS" data-part-name="COLLECT-EXT-ANC" data-part-args="RECORDS,F" data-part-body="T,CDR,COLLECT-EXT-ANC,CONS,CAR,ATTACHMENT,ACCESS,F,MEMBER-EQ,RECORDS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-EXT-ANC">collect-ext-anc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-ext-anc" data-sym="COLLECT-EXT-ANC" title="(defun collect-ext-anc (f records)
  (cond ((endp records) nil)
        ((member-eq f (access attachment (car records) :ext-succ))
         (cons (access attachment (car records) :g)
               (collect-ext-anc f (cdr records))))">collect-ext-anc</a>
  (f records)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> records) nil)
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> f (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment (car records) <span class="keyword">:ext-succ</span>)) (cons (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment (car records) <span class="keyword">:g</span>)
        (<a class="sym-link local-def" href="#def-collect-ext-anc" data-sym="COLLECT-EXT-ANC" title="(defun collect-ext-anc (f records)
  (cond ((endp records) nil)
        ((member-eq f (access attachment (car records) :ext-succ))
         (cons (access attachment (car records) :g)
               (collect-ext-anc f (cdr records))))">collect-ext-anc</a> f (cdr records))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-collect-ext-anc" data-sym="COLLECT-EXT-ANC" title="(defun collect-ext-anc (f records)
  (cond ((endp records) nil)
        ((member-eq f (access attachment (car records) :ext-succ))
         (cons (access attachment (car records) :g)
               (collect-ext-anc f (cdr records))))">collect-ext-anc</a> f (cdr records)))))</pre>
  </div>

<div class="form-block function" id="def-extend-attachment-components" data-defines="EXTEND-ATTACHMENT-COMPONENTS" data-references="CHANGE,CONS,EXT-ANC,LET,LIST*,MEMBER-EQ,ATTACHMENT-COMPONENT-OWNER,ATTACHMENT-COMPONENT,ACCESS,PATH,CAR,COMP,LET*,LOOP,QUOTE,EQ,CDR,CDR-COMPS,FLG,MV-LET,T,MV,ENDP,COND,G,F,EXT-SUCC,G0,COMPS,DEFUN" data-used-by="EXTEND-ATTACHMENT-RECORD" data-part-name="EXTEND-ATTACHMENT-COMPONENTS" data-part-args="G,F,EXT-SUCC,G0,COMPS" data-part-body="CHANGE,CONS,EXT-ANC,LET,LIST*,MEMBER-EQ,ATTACHMENT-COMPONENT-OWNER,ATTACHMENT-COMPONENT,ACCESS,PATH,CAR,COMP,LET*,LOOP,QUOTE,EQ,G,F,EXT-SUCC,G0,CDR,EXTEND-ATTACHMENT-COMPONENTS,CDR-COMPS,FLG,MV-LET,T,MV,COMPS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXTEND-ATTACHMENT-COMPONENTS">extend-attachment-components</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-extend-attachment-components" data-sym="EXTEND-ATTACHMENT-COMPONENTS" title="(defun extend-attachment-components (comps g0 ext-succ f g)
  (cond ((endp comps) (mv nil nil))
        (t
         (mv-let (flg cdr-comps)
                 (extend-attachment-components (cdr comps) g0 ext-succ f g)
...">extend-attachment-components</a>
  (comps g0 ext-succ f g)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> comps) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg cdr-comps)
        (<a class="sym-link local-def" href="#def-extend-attachment-components" data-sym="EXTEND-ATTACHMENT-COMPONENTS" title="(defun extend-attachment-components (comps g0 ext-succ f g)
  (cond ((endp comps) (mv nil nil))
        (t
         (mv-let (flg cdr-comps)
                 (extend-attachment-components (cdr comps) g0 ext-succ f g)
...">extend-attachment-components</a> (cdr comps) g0 ext-succ f g)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'loop) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> flg cdr-comps))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((comp (car comps)) (path (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component comp <span class="keyword">:path</span>)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> f (<a class="sym-link local-def" href="#def-attachment-component-owner" data-sym="ATTACHMENT-COMPONENT-OWNER" title="(defun attachment-component-owner (g path)
  (if path
      (car path)
      g))">attachment-component-owner</a> g0 path)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> g ext-succ) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'loop (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> g0 g path)))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((ext-anc (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component comp <span class="keyword">:ext-anc</span>)))
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> g ext-anc) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (flg (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons comp cdr-comps))) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil comps))))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                              (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> attachment-component comp <span class="keyword">:ext-anc</span> (cons g ext-anc))
                                cdr-comps))))))))
                (flg (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons comp cdr-comps)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil comps))))))))))</pre>
  </div>

<div class="form-block function" id="def-component-path-extension" data-defines="COMPONENT-PATH-EXTENSION" data-references="CDR,T,CONS,MEMBER-EQ,OR,EQ,AND,CAR,ATTACHMENT-COMPONENT,ACCESS,PATH,LET,ENDP,COND,COMPS,F,DEFUN" data-used-by="EXTEND-ATTACHMENT-RECORD" data-part-name="COMPONENT-PATH-EXTENSION" data-part-args="COMPS,F" data-part-body="CDR,COMPONENT-PATH-EXTENSION,T,CONS,MEMBER-EQ,OR,F,EQ,AND,CAR,ATTACHMENT-COMPONENT,ACCESS,PATH,LET,COMPS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPONENT-PATH-EXTENSION">component-path-extension</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-component-path-extension" data-sym="COMPONENT-PATH-EXTENSION" title="(defun component-path-extension (f comps)
  (cond ((endp comps) nil)
        ((let ((path (access attachment-component (car comps) :path)))
           (and (eq (car path) f) path)))
        ((or (member-eq f (access attachment-component (car comps) :ext-anc))
...">component-path-extension</a>
  (f comps)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> comps) nil)
    ((let ((path (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component (car comps) <span class="keyword">:path</span>)))
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car path) f) path)))
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> f
         (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component (car comps) <span class="keyword">:ext-anc</span>))
       (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> f
         (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component (car comps) <span class="keyword">:ord-anc</span>))) (cons f (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component (car comps) <span class="keyword">:path</span>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-component-path-extension" data-sym="COMPONENT-PATH-EXTENSION" title="(defun component-path-extension (f comps)
  (cond ((endp comps) nil)
        ((let ((path (access attachment-component (car comps) :path)))
           (and (eq (car path) f) path)))
        ((or (member-eq f (access attachment-component (car comps) :ext-anc))
...">component-path-extension</a> f (cdr comps)))))</pre>
  </div>

<div class="form-block function" id="def-extend-attachment-record" data-defines="EXTEND-ATTACHMENT-RECORD" data-references="EXTEND-ATTACHMENT-COMPONENTS,NEW-COMPS,FLG,MV-LET,T,CHANGE,FOUND,MEMBER-EQ,CONS,LOOP,QUOTE,MV,MEMBER-EQUAL,NOT,ASSERT$,COMPONENT-PATH-EXTENSION,PATH,PAIRS,EQ,COND,COMPS,G-FIELD,ATTACHMENT,ACCESS,EXT-SUCC,LET,REC,G-CANON,F-CANON,PAIR,DEFUN" data-used-by="UPDATE-ATTACHMENT-RECORDS1" data-part-name="EXTEND-ATTACHMENT-RECORD" data-part-args="REC,G-CANON,F-CANON,PAIR" data-part-body="EXTEND-ATTACHMENT-COMPONENTS,NEW-COMPS,FLG,MV-LET,T,CHANGE,FOUND,MEMBER-EQ,CONS,LOOP,QUOTE,MV,PAIR,MEMBER-EQUAL,NOT,ASSERT$,F-CANON,COMPONENT-PATH-EXTENSION,PATH,PAIRS,G-CANON,EQ,COND,COMPS,G-FIELD,REC,ATTACHMENT,ACCESS,EXT-SUCC,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXTEND-ATTACHMENT-RECORD">extend-attachment-record</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-extend-attachment-record" data-sym="EXTEND-ATTACHMENT-RECORD" title="(defun extend-attachment-record (pair f-canon g-canon rec)
  (let ((ext-succ (access attachment rec :ext-succ))
        (g-field (access attachment rec :g))
        (comps (access attachment rec :components)))
    (cond
...">extend-attachment-record</a>
  (pair f-canon g-canon rec)
  (let ((ext-succ (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment rec <span class="keyword">:ext-succ</span>)) (g-field (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment rec <span class="keyword">:g</span>))
      (comps (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment rec <span class="keyword">:components</span>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> g-canon g-field) (let ((pairs (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment rec <span class="keyword">:pairs</span>)) (path (<a class="sym-link local-def" href="#def-component-path-extension" data-sym="COMPONENT-PATH-EXTENSION" title="(defun component-path-extension (f comps)
  (cond ((endp comps) nil)
        ((let ((path (access attachment-component (car comps) :path)))
           (and (eq (car path) f) path)))
        ((or (member-eq f (access attachment-component (car comps) :ext-anc))
...">component-path-extension</a> f-canon comps)))
          (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> pair pairs))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (path (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'loop (cons g-canon path)))
              ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> f-canon ext-succ) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'found (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> attachment rec <span class="keyword">:pairs</span> (cons pair pairs))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'found
                  (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> attachment
                    rec
                    <span class="keyword">:pairs</span> (cons pair pairs)
                    <span class="keyword">:ext-succ</span> (cons f-canon ext-succ))))))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg new-comps)
          (<a class="sym-link local-def" href="#def-extend-attachment-components" data-sym="EXTEND-ATTACHMENT-COMPONENTS" title="(defun extend-attachment-components (comps g0 ext-succ f g)
  (cond ((endp comps) (mv nil nil))
        (t
         (mv-let (flg cdr-comps)
                 (extend-attachment-components (cdr comps) g0 ext-succ f g)
...">extend-attachment-components</a> comps
            g-field
            ext-succ
            f-canon
            g-canon)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'loop) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'loop new-comps))
            (flg (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> attachment rec <span class="keyword">:components</span> new-comps)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil rec))))))))</pre>
  </div>

<div class="form-block function" id="def-update-attachment-records1" data-defines="UPDATE-ATTACHMENT-RECORDS1" data-references="CONS,FOUND,IF,OR,CAR,EXTEND-ATTACHMENT-RECORD,REC,FLG2,LOOP,QUOTE,EQ,CDR,RECS,FLG,MV-LET,T,MV,ENDP,COND,RECORDS,G-CANON,F-CANON,PAIR,DEFUN" data-used-by="UPDATE-ATTACHMENT-RECORDS" data-part-name="UPDATE-ATTACHMENT-RECORDS1" data-part-args="RECORDS,G-CANON,F-CANON,PAIR" data-part-body="CONS,FOUND,IF,OR,CAR,EXTEND-ATTACHMENT-RECORD,REC,FLG2,LOOP,QUOTE,EQ,CDR,G-CANON,F-CANON,PAIR,UPDATE-ATTACHMENT-RECORDS1,RECS,FLG,MV-LET,T,MV,RECORDS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-ATTACHMENT-RECORDS1">update-attachment-records1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-attachment-records1" data-sym="UPDATE-ATTACHMENT-RECORDS1" title="(defun update-attachment-records1 (pair f-canon g-canon records)
  (cond ((endp records) (mv nil nil))
        (t
         (mv-let (flg recs)
                 (update-attachment-records1 pair f-canon g-canon
...">update-attachment-records1</a>
  (pair f-canon g-canon records)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> records) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg recs)
        (<a class="sym-link local-def" href="#def-update-attachment-records1" data-sym="UPDATE-ATTACHMENT-RECORDS1" title="(defun update-attachment-records1 (pair f-canon g-canon records)
  (cond ((endp records) (mv nil nil))
        (t
         (mv-let (flg recs)
                 (update-attachment-records1 pair f-canon g-canon
...">update-attachment-records1</a> pair
          f-canon
          g-canon
          (cdr records))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'loop) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'loop recs))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg2 rec)
              (<a class="sym-link local-def" href="#def-extend-attachment-record" data-sym="EXTEND-ATTACHMENT-RECORD" title="(defun extend-attachment-record (pair f-canon g-canon rec)
  (let ((ext-succ (access attachment rec :ext-succ))
        (g-field (access attachment rec :g))
        (comps (access attachment rec :components)))
    (cond
...">extend-attachment-record</a> pair
                f-canon
                g-canon
                (car records))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg2 'loop) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> 'loop rec))
                ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> flg flg2) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'found) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg2 'found))
                      'found
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                    (cons rec recs)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil records))))))))))</pre>
  </div>

<div class="form-block function" id="def-update-attachment-records" data-defines="UPDATE-ATTACHMENT-RECORDS" data-references="ATTACHMENT-COMPONENT,ATTACHMENT,MAKE,CONS,LIST,INTERSECTION1-EQ,OR,H,COLLECT-EXT-ANC,EXT-ANC,CANONICAL-ANCESTORS,ORD-ANC,SIBLINGS,EXT-SUCC,LET*,T,VALUE,FOUND,DEFATTACH-LOOP-ERROR,LOOP,QUOTE,EQ,COND,UPDATE-ATTACHMENT-RECORDS1,RECS,FLG,MV-LET,STATE,CTX,WRLD,RECORDS,G-CANON,F-CANON,PAIR,DEFUN" data-used-by="ATTACHMENT-RECORDS" data-part-name="UPDATE-ATTACHMENT-RECORDS" data-part-args="STATE,CTX,WRLD,RECORDS,G-CANON,F-CANON,PAIR" data-part-body="ATTACHMENT-COMPONENT,ATTACHMENT,MAKE,CONS,LIST,INTERSECTION1-EQ,OR,H,COLLECT-EXT-ANC,EXT-ANC,CANONICAL-ANCESTORS,ORD-ANC,WRLD,SIBLINGS,EXT-SUCC,LET*,T,VALUE,FOUND,STATE,CTX,DEFATTACH-LOOP-ERROR,LOOP,QUOTE,EQ,COND,RECORDS,G-CANON,F-CANON,PAIR,UPDATE-ATTACHMENT-RECORDS1,RECS,FLG,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-ATTACHMENT-RECORDS">update-attachment-records</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-attachment-records" data-sym="UPDATE-ATTACHMENT-RECORDS" title="(defun update-attachment-records (pair f-canon g-canon records wrld ctx state)
  (mv-let (flg recs) (update-attachment-records1 pair f-canon g-canon records)
          (cond ((eq flg &#39;loop) (defattach-loop-error recs ctx state))
                ((eq flg &#39;found) (value recs))
                (t
...">update-attachment-records</a>
  (pair f-canon g-canon records wrld ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg recs)
    (<a class="sym-link local-def" href="#def-update-attachment-records1" data-sym="UPDATE-ATTACHMENT-RECORDS1" title="(defun update-attachment-records1 (pair f-canon g-canon records)
  (cond ((endp records) (mv nil nil))
        (t
         (mv-let (flg recs)
                 (update-attachment-records1 pair f-canon g-canon
...">update-attachment-records1</a> pair f-canon g-canon records)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'loop) (<a class="sym-link local-def" href="#def-defattach-loop-error" data-sym="DEFATTACH-LOOP-ERROR" title="(defun defattach-loop-error (loop ctx state)
  (er soft ctx
      &quot;The proposed defattach event is illegal because the following is a ~
       loop in the resulting extended ancestor relation.  See :DOC ~
       defattach.~|~%~@0&quot;">defattach-loop-error</a> recs ctx state))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg 'found) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> recs))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ext-succ (<a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a> f-canon wrld)) (ord-anc (<a class="sym-link system" href="defthm.html#def-canonical-ancestors" data-sym="CANONICAL-ANCESTORS">canonical-ancestors</a> g-canon wrld nil))
            (ext-anc (<a class="sym-link local-def" href="#def-collect-ext-anc" data-sym="COLLECT-EXT-ANC" title="(defun collect-ext-anc (f records)
  (cond ((endp records) nil)
        ((member-eq f (access attachment (car records) :ext-succ))
         (cons (access attachment (car records) :g)
               (collect-ext-anc f (cdr records))))">collect-ext-anc</a> g-canon records))
            (h (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="rewrite.html#def-intersection1-eq" data-sym="INTERSECTION1-EQ">intersection1-eq</a> ord-anc ext-succ)
                (<a class="sym-link system" href="rewrite.html#def-intersection1-eq" data-sym="INTERSECTION1-EQ">intersection1-eq</a> ext-anc ext-succ))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (h (<a class="sym-link local-def" href="#def-defattach-loop-error" data-sym="DEFATTACH-LOOP-ERROR" title="(defun defattach-loop-error (loop ctx state)
  (er soft ctx
      &quot;The proposed defattach event is illegal because the following is a ~
       loop in the resulting extended ancestor relation.  See :DOC ~
       defattach.~|~%~@0&quot;">defattach-loop-error</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> g-canon h) ctx state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> attachment
                    <span class="keyword">:ext-succ</span> ext-succ
                    <span class="keyword">:g</span> g-canon
                    <span class="keyword">:components</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> attachment-component
                        <span class="keyword">:ord-anc</span> ord-anc
                        <span class="keyword">:ext-anc</span> ext-anc
                        <span class="keyword">:path</span> nil))
                    <span class="keyword">:pairs</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> pair))
                  recs)))))))))</pre>
  </div>

<div class="form-block function" id="def-attachment-records" data-defines="ATTACHMENT-RECORDS" data-references="UPDATE-ATTACHMENT-RECORDS,ER-LET*,G-CANON,CANONICAL-SIBLING,F-CANON,TRUE-APPLY$-WARRANT,QUOTE,CDR,EQ,ASSERT$,WARRANT-FUNCTION-NAMEP,CAR,PAIR,LET,T,VALUE,ENDP,COND,STATE,CTX,WRLD,RECORDS,ATTACHMENTS,DEFUN" data-used-by="EXT-ANCESTORS-ATTACHMENTS,ATTACHMENT-RECORDS-FAL,DEFATTACH-FN,CHK-DEFATTACH-LOOP,PRIMORDIAL-WORLD-GLOBALS" data-part-name="ATTACHMENT-RECORDS" data-part-args="STATE,CTX,WRLD,RECORDS,ATTACHMENTS" data-part-body="UPDATE-ATTACHMENT-RECORDS,ER-LET*,G-CANON,CANONICAL-SIBLING,F-CANON,STATE,CTX,ATTACHMENT-RECORDS,TRUE-APPLY$-WARRANT,QUOTE,CDR,EQ,ASSERT$,WRLD,WARRANT-FUNCTION-NAMEP,CAR,PAIR,LET,T,RECORDS,VALUE,ATTACHMENTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ATTACHMENT-RECORDS">attachment-records</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a>
  (attachments records wrld ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> attachments) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> records))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((pair (car attachments)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((warrant-function-namep (car pair) wrld) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr pair) '<a class="sym-link local-def" href="#def-true-apply_24-warrant" data-sym="TRUE-APPLY$-WARRANT" title="(defun true-apply$-warrant () (declare (xargs :guard t :mode :logic)) t)">true-apply$-warrant</a>)
              (<a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a> (cdr attachments)
                records
                wrld
                ctx
                state)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((f-canon (<a class="sym-link system" href="defthm.html#def-canonical-sibling" data-sym="CANONICAL-SIBLING">canonical-sibling</a> (car pair) wrld)) (g-canon (<a class="sym-link system" href="defthm.html#def-canonical-sibling" data-sym="CANONICAL-SIBLING">canonical-sibling</a> (cdr pair) wrld)))
              (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((records (<a class="sym-link local-def" href="#def-update-attachment-records" data-sym="UPDATE-ATTACHMENT-RECORDS" title="(defun update-attachment-records (pair f-canon g-canon records wrld ctx state)
  (mv-let (flg recs) (update-attachment-records1 pair f-canon g-canon records)
          (cond ((eq flg &#39;loop) (defattach-loop-error recs ctx state))
                ((eq flg &#39;found) (value recs))
                (t
...">update-attachment-records</a> pair
                     f-canon
                     g-canon
                     records
                     wrld
                     ctx
                     state)))
                (<a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a> (cdr attachments)
                  records
                  wrld
                  ctx
                  state)))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-defattach-loop" data-defines="CHK-DEFATTACH-LOOP" data-references="DEFATTACH-CLOSE,ER-LET*,VALUE,NULL,MV,T,DEFATTACH-ERASE,COND,MV-LET,ATTACHMENT-RECORDS,QUOTE,GLOBAL-VAL,RECORDS,LET,STATE,CTX,WRLD,ERASURES,ATTACHMENTS,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFATTACH" data-part-name="CHK-DEFATTACH-LOOP" data-part-args="STATE,CTX,WRLD,ERASURES,ATTACHMENTS" data-part-body="DEFATTACH-CLOSE,STATE,CTX,ER-LET*,VALUE,NULL,MV,T,DEFATTACH-ERASE,ERASURES,COND,ATTACHMENTS,MV-LET,WRLD,ATTACHMENT-RECORDS,QUOTE,GLOBAL-VAL,RECORDS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFATTACH-LOOP">chk-defattach-loop</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defattach-loop" data-sym="CHK-DEFATTACH-LOOP" title="(defun chk-defattach-loop (attachments erasures wrld ctx state)
  (let ((records (global-val &#39;attachment-records wrld)))
    (mv-let (records attachments)
            (cond
             (erasures (defattach-erase records attachments erasures wrld))
...">chk-defattach-loop</a>
  (attachments erasures wrld ctx state)
  (let ((records (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a> wrld)))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (records attachments)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erasures (<a class="sym-link local-def" href="#def-defattach-erase" data-sym="DEFATTACH-ERASE" title="(defun defattach-erase (records attachments erasures wrld)
  (let ((canonical-erased-fs
         (collect-canonical-siblings (strip-cars erasures) wrld nil nil)))
    (defattach-erase1 records attachments erasures canonical-erased-fs nil)))">defattach-erase</a> records attachments erasures wrld))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> records attachments)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> attachments) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> records))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((records (<a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a> attachments records wrld ctx state)))
            (<a class="sym-link local-def" href="#def-defattach-close" data-sym="DEFATTACH-CLOSE" title="(defun defattach-close (records ctx state)
  (mv-let (flg records) (defattach-merge-lst-lst records nil nil)
          (cond ((eq flg &#39;loop) (defattach-loop-error records ctx state))
                ((eq flg nil) (value records))
                (t (defattach-close records ctx state)))))">defattach-close</a> records ctx state)))))))</pre>
  </div>

<div class="form-block function" id="def-defaxiom-supporter-msg-list" data-defines="DEFAXIOM-SUPPORTER-MSG-LIST" data-references="CDR,MSG,CONS,DEFAXIOM-SUPPORTER,QUOTE,CAR,GETPROPC,PROP,LET,T,ENDP,COND,WRLD,SYMBOLS,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFATTACH" data-part-name="DEFAXIOM-SUPPORTER-MSG-LIST" data-part-args="WRLD,SYMBOLS" data-part-body="CDR,DEFAXIOM-SUPPORTER-MSG-LIST,MSG,CONS,WRLD,DEFAXIOM-SUPPORTER,QUOTE,CAR,GETPROPC,PROP,LET,T,SYMBOLS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFAXIOM-SUPPORTER-MSG-LIST">defaxiom-supporter-msg-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defaxiom-supporter-msg-list" data-sym="DEFAXIOM-SUPPORTER-MSG-LIST" title="(defun defaxiom-supporter-msg-list (symbols wrld)
  (cond ((endp symbols) nil)
        (t
         (let ((prop (getpropc (car symbols) &#39;defaxiom-supporter nil wrld)))
           (cond
...">defaxiom-supporter-msg-list</a>
  (symbols wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> symbols) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((prop (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car symbols) 'defaxiom-supporter nil wrld)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (prop (cons (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"function symbol ~x0 supports defaxiom ~x1"</span>
                (car symbols)
                prop)
              (<a class="sym-link local-def" href="#def-defaxiom-supporter-msg-list" data-sym="DEFAXIOM-SUPPORTER-MSG-LIST" title="(defun defaxiom-supporter-msg-list (symbols wrld)
  (cond ((endp symbols) nil)
        (t
         (let ((prop (getpropc (car symbols) &#39;defaxiom-supporter nil wrld)))
           (cond
...">defaxiom-supporter-msg-list</a> (cdr symbols) wrld)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defaxiom-supporter-msg-list" data-sym="DEFAXIOM-SUPPORTER-MSG-LIST" title="(defun defaxiom-supporter-msg-list (symbols wrld)
  (cond ((endp symbols) nil)
        (t
         (let ((prop (getpropc (car symbols) &#39;defaxiom-supporter nil wrld)))
           (cond
...">defaxiom-supporter-msg-list</a> (cdr symbols) wrld)))))))</pre>
  </div>

<div class="form-block function" id="def-defattach-global-stobjs-msg" data-defines="DEFATTACH-GLOBAL-STOBJS-MSG" data-references="WITH-GLOBAL-STOBJ-ILLEGAL-PATH-MSG,LIST,PATH-TO-WITH-GLOBAL-STOBJ,PATH,IF,ST,UPD,SET-DIFFERENCE-EQ,MSG,APPEND,SUBSETP-EQ,AND,GS-G-WRITES,GS-G-READS,GS-G,CDR,GS-F-WRITES,CAR,GS-F-READS,GLOBAL-STOBJS,QUOTE,GETPROPC,GS-F,CDAR,G,CAAR,F,LET*,T,ENDP,COND,STATE,WRLD,ATTACHMENT-ALIST-EXEC,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFATTACH" data-part-name="DEFATTACH-GLOBAL-STOBJS-MSG" data-part-args="STATE,WRLD,ATTACHMENT-ALIST-EXEC" data-part-body="WITH-GLOBAL-STOBJ-ILLEGAL-PATH-MSG,LIST,PATH-TO-WITH-GLOBAL-STOBJ,PATH,IF,ST,UPD,SET-DIFFERENCE-EQ,MSG,STATE,DEFATTACH-GLOBAL-STOBJS-MSG,APPEND,SUBSETP-EQ,AND,GS-G-WRITES,GS-G-READS,GS-G,CDR,GS-F-WRITES,CAR,GS-F-READS,WRLD,GLOBAL-STOBJS,QUOTE,GETPROPC,GS-F,CDAR,G,CAAR,F,LET*,T,ATTACHMENT-ALIST-EXEC,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-GLOBAL-STOBJS-MSG">defattach-global-stobjs-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-global-stobjs-msg" data-sym="DEFATTACH-GLOBAL-STOBJS-MSG" title="(defun defattach-global-stobjs-msg (attachment-alist-exec wrld state)
  (cond ((endp attachment-alist-exec) nil)
        (t
         (let* ((f (caar attachment-alist-exec))
                (g (cdar attachment-alist-exec))
...">defattach-global-stobjs-msg</a>
  (attachment-alist-exec wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> attachment-alist-exec) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((f (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> attachment-alist-exec)) (g (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> attachment-alist-exec))
          (gs-f (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> f 'global-stobjs nil wrld))
          (gs-f-reads (car gs-f))
          (gs-f-writes (cdr gs-f))
          (gs-g (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> g 'global-stobjs nil wrld))
          (gs-g-reads (car gs-g))
          (gs-g-writes (cdr gs-g)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> gs-g-writes gs-f-writes)
             (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> gs-g-reads (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> gs-f-writes gs-f-reads))) (<a class="sym-link local-def" href="#def-defattach-global-stobjs-msg" data-sym="DEFATTACH-GLOBAL-STOBJS-MSG" title="(defun defattach-global-stobjs-msg (attachment-alist-exec wrld state)
  (cond ((endp attachment-alist-exec) nil)
        (t
         (let* ((f (caar attachment-alist-exec))
                (g (cdar attachment-alist-exec))
...">defattach-global-stobjs-msg</a> (cdr attachment-alist-exec)
              wrld
              state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The attachment of ~x0 to ~x1 restricts stobjs bound ~
                        by WITH-GLOBAL-STOBJ under calls of ~x0, according to ~
                        the :GLOBAL-STOBJS keyword (default nil) in the ~
                        signature introducing ~x1.  But this restriction is ~
                        violated for stobj~#2~[~/s~] ~&amp;2:  ~@3"</span>
              g
              f
              (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> gs-g-writes gs-f-writes)
                (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> gs-g-reads
                  (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> gs-f-writes gs-f-reads)))
              (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((upd (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> gs-g-writes gs-f-writes)) (st (if upd
                      (car (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> gs-g-writes gs-f-writes))
                      (car (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> gs-g-reads
                          (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> gs-f-writes gs-f-reads)))))
                  (path (path-to-with-global-stobj st (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> g) upd wrld nil nil)))
                (with-global-stobj-illegal-path-msg <span class="string">"the attempt is to attach"</span>
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">", yet that stobj is not specified~@0 by the ~
                                :GLOBAL-STOBJS keyword of ~x1"</span>
                    (if upd
                      <span class="string">" for updating"</span>
                      <span class="string">""</span>)
                    f)
                  path
                  st
                  upd
                  wrld)))))))))</pre>
  </div>

<div class="form-block function" id="def-find-transparent" data-defines="FIND-TRANSPARENT" data-references="CDR,T,CAR,CANONICAL-SIBLING,TRANSPARENT-FN-P,ENDP,COND,WRLD,LST,DEFUN" data-used-by="CHK-DEFATTACH-TRANSPARENT" data-part-name="FIND-TRANSPARENT" data-part-args="WRLD,LST" data-part-body="CDR,FIND-TRANSPARENT,T,WRLD,CAR,CANONICAL-SIBLING,TRANSPARENT-FN-P,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-TRANSPARENT">find-transparent</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-transparent" data-sym="FIND-TRANSPARENT" title="(defun find-transparent (lst wrld)
  (cond ((endp lst) nil)
        ((transparent-fn-p (canonical-sibling (car lst) wrld) wrld) (car lst))
        (t (find-transparent (cdr lst) wrld))))">find-transparent</a>
  (lst wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) nil)
    ((<a class="sym-link system" href="defthm.html#def-transparent-fn-p" data-sym="TRANSPARENT-FN-P">transparent-fn-p</a> (<a class="sym-link system" href="defthm.html#def-canonical-sibling" data-sym="CANONICAL-SIBLING">canonical-sibling</a> (car lst) wrld) wrld) (car lst))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-find-transparent" data-sym="FIND-TRANSPARENT" title="(defun find-transparent (lst wrld)
  (cond ((endp lst) nil)
        ((transparent-fn-p (canonical-sibling (car lst) wrld) wrld) (car lst))
        (t (find-transparent (cdr lst) wrld))))">find-transparent</a> (cdr lst) wrld))))</pre>
  </div>

<div class="form-block function" id="def-chk-defattach-transparent" data-defines="CHK-DEFATTACH-TRANSPARENT" data-references="IF,FIRST-NON-MEMBER-EQ,EQUAL,FNS,SIBLINGS,LET,T,SOFT,ER,AND,VALUE,NULL,COND,FIND-TRANSPARENT,OR,TR,STRIP-CARS,ATTACHED-FNS,LET*,STATE,WRLD,CTX,EXPLICIT-ERASURES,ATTACHMENT-ALIST-SORTED,DEFUN" data-used-by="CHK-ACCEPTABLE-DEFATTACH" data-part-name="CHK-DEFATTACH-TRANSPARENT" data-part-args="STATE,WRLD,CTX,EXPLICIT-ERASURES,ATTACHMENT-ALIST-SORTED" data-part-body="IF,FIRST-NON-MEMBER-EQ,EQUAL,FNS,SIBLINGS,LET,T,CTX,SOFT,ER,AND,VALUE,NULL,COND,EXPLICIT-ERASURES,WRLD,FIND-TRANSPARENT,OR,TR,ATTACHMENT-ALIST-SORTED,STRIP-CARS,ATTACHED-FNS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-DEFATTACH-TRANSPARENT">chk-defattach-transparent</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-defattach-transparent" data-sym="CHK-DEFATTACH-TRANSPARENT" title="(defun chk-defattach-transparent
       (attachment-alist-sorted explicit-erasures ctx wrld state)
  (let* ((attached-fns (strip-cars attachment-alist-sorted))
         (tr
          (or (find-transparent attached-fns wrld)
...">chk-defattach-transparent</a>
  (attachment-alist-sorted explicit-erasures ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="defthm.html#def-attached-fns" data-sym="ATTACHED-FNS">attached-fns</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> attachment-alist-sorted)) (tr (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link local-def" href="#def-find-transparent" data-sym="FIND-TRANSPARENT" title="(defun find-transparent (lst wrld)
  (cond ((endp lst) nil)
        ((transparent-fn-p (canonical-sibling (car lst) wrld) wrld) (car lst))
        (t (find-transparent (cdr lst) wrld))))">find-transparent</a> <a class="sym-link system" href="defthm.html#def-attached-fns" data-sym="ATTACHED-FNS">attached-fns</a> wrld)
          (<a class="sym-link local-def" href="#def-find-transparent" data-sym="FIND-TRANSPARENT" title="(defun find-transparent (lst wrld)
  (cond ((endp lst) nil)
        ((transparent-fn-p (canonical-sibling (car lst) wrld) wrld) (car lst))
        (t (find-transparent (cdr lst) wrld))))">find-transparent</a> explicit-erasures wrld))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> tr) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="defthm.html#def-attached-fns" data-sym="ATTACHED-FNS">attached-fns</a> explicit-erasures) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"When a defattach event specifies a transparent function symbol to ~
           be attached or unattached, then it is illegal for that same event ~
           to specify both an attachment and an erasure.  The proposed ~
           defattach event for transparent function symbol ~x0 is thus ~
           illegal.  See :DOC defattach."</span>
          tr))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a> (<a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a> tr wrld)) (fns (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="defthm.html#def-attached-fns" data-sym="ATTACHED-FNS">attached-fns</a> explicit-erasures)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal fns <a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
            ((first-non-member-eq fns <a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The function symbol ~x0 was introduced as transparent, ~
                      but both ~x0 and ~x1 are specified for ~
                      ~#2~[un~/~]attachment in a proposed defattach event ~
                      even though ~x1 was not introduced in the same ~
                      encapsulate event as ~x0.  This is illegal; see :DOC ~
                      defattach."</span>
                tr
                (first-non-member-eq fns <a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a>)
                (if explicit-erasures
                  <span class="number">0</span>
                  <span class="number">1</span>)))
            ((first-non-member-eq <a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a> fns) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"A proposed defattach event ~#0~[un~/~]attaches to ~x1 ~
                      but not to ~x2, even though ~x1 and ~x2 are transparent ~
                      function symbols that were introduced in the same ~
                      encapsulate event.  This is illegal; see :DOC defattach."</span>
                (if explicit-erasures
                  <span class="number">0</span>
                  <span class="number">1</span>)
                tr
                (first-non-member-eq <a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a> fns)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-acceptable-defattach" data-defines="CHK-ACCEPTABLE-DEFATTACH" data-references="CONS-TAG-TREES,LIST,PROVE-DEFATTACH-CONSTRAINT,CHK-ASSUMPTION-FREE-TTREE,TTREE2,PROVE-DEFATTACH-GUARDS,NULL,OR,TTREE1,CDDR,NEW-ENTRIES,CADR,EVENT-NAMES,CAR,GOAL,DEFATTACH-CONSTRAINT,GOAL/EVENT-NAMES/NEW-ENTRIES,CHK-DEFATTACH-LOOP,VALUE,RECORDS,CHK-DEFATTACH-TRANSPARENT,*SEE-DOC-WITH-GLOBAL-STOBJ*,QUASIQUOTE,SOFT,ER,COND,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,QUOTE,MEMBER-EQ,DEFATTACH-GLOBAL-STOBJS-MSG,STRIP-CARS,NOT,AND,DEFAXIOM-SUPPORTER-MSG-LIST,LD-SKIP-PROOFSP,ENS,T,EQ,SKIP-CHECKS-T,ATTACH-NIL-LST,SKIP-CHECKS,GUARD-HELPERS-LST,ATTACHMENT-ALIST-EXEC,ATTACHMENT-ALIST-SORTED,EXPLICIT-ERASURES,ERASURES,NTH,CONSTRAINT-HELPER-ALIST,LET*,PROCESS-DEFATTACH-ARGS,CHK-NON-LOCAL-IN-NON-TRIVIAL-ENCAPSULATE,ER-PROGN,TUPLE,ER-LET*,STATE,WRLD,CTX,PROVED-FNL-INSTS-ALIST,ARGS,DEFUN" data-used-by="DEFATTACH-FN" data-part-name="CHK-ACCEPTABLE-DEFATTACH" data-part-args="STATE,WRLD,CTX,PROVED-FNL-INSTS-ALIST,ARGS" data-part-body="CONS-TAG-TREES,LIST,PROVE-DEFATTACH-CONSTRAINT,CHK-ASSUMPTION-FREE-TTREE,TTREE2,PROVE-DEFATTACH-GUARDS,NULL,OR,TTREE1,CDDR,NEW-ENTRIES,CADR,EVENT-NAMES,CAR,GOAL,PROVED-FNL-INSTS-ALIST,DEFATTACH-CONSTRAINT,GOAL/EVENT-NAMES/NEW-ENTRIES,CHK-DEFATTACH-LOOP,VALUE,RECORDS,CHK-DEFATTACH-TRANSPARENT,*SEE-DOC-WITH-GLOBAL-STOBJ*,QUASIQUOTE,SOFT,ER,COND,INCLUDE-BOOK-WITH-LOCALS,INCLUDE-BOOK,QUOTE,MEMBER-EQ,DEFATTACH-GLOBAL-STOBJS-MSG,STRIP-CARS,NOT,AND,DEFAXIOM-SUPPORTER-MSG-LIST,LD-SKIP-PROOFSP,ENS,T,EQ,SKIP-CHECKS-T,ATTACH-NIL-LST,SKIP-CHECKS,GUARD-HELPERS-LST,ATTACHMENT-ALIST-EXEC,ATTACHMENT-ALIST-SORTED,EXPLICIT-ERASURES,ERASURES,NTH,CONSTRAINT-HELPER-ALIST,LET*,ARGS,PROCESS-DEFATTACH-ARGS,STATE,WRLD,CTX,CHK-NON-LOCAL-IN-NON-TRIVIAL-ENCAPSULATE,ER-PROGN,TUPLE,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ACCEPTABLE-DEFATTACH">chk-acceptable-defattach</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-acceptable-defattach" data-sym="CHK-ACCEPTABLE-DEFATTACH" title="(defun chk-acceptable-defattach (args proved-fnl-insts-alist ctx wrld state)
  (er-let*
   ((tuple
     (er-progn
      (chk-non-local-in-non-trivial-encapsulate &quot;Defattach events&quot; nil ctx wrld
...">chk-acceptable-defattach</a>
  (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> proved-fnl-insts-alist ctx wrld state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tuple (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="defthm.html#def-chk-non-local-in-non-trivial-encapsulate" data-sym="CHK-NON-LOCAL-IN-NON-TRIVIAL-ENCAPSULATE">chk-non-local-in-non-trivial-encapsulate</a> <span class="string">"Defattach events"</span>
           nil
           ctx
           wrld
           state)
         (<a class="sym-link local-def" href="#def-process-defattach-args" data-sym="PROCESS-DEFATTACH-ARGS" title="(defun process-defattach-args (args ctx state)
  (let ((msg
         &quot;Illegal arguments for defattach.  See :DOC defattach.  Note ~
              that if the first argument is a symbol, then there should be ~
              only two arguments, both of them symbols.  Consider instead ~
...">process-defattach-args</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ctx state))))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((constraint-helper-alist (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> tuple)) (erasures (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> tuple))
        (explicit-erasures (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> tuple))
        (attachment-alist-sorted (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> tuple))
        (attachment-alist-exec (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> tuple))
        (guard-helpers-lst (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> tuple))
        (skip-checks (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">6</span> tuple))
        (attach-nil-lst (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">7</span> tuple))
        (skip-checks-t (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">6</span> tuple) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (ens (ens state))
        (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state))
        (<a class="sym-link local-def" href="#def-defaxiom-supporter-msg-list" data-sym="DEFAXIOM-SUPPORTER-MSG-LIST" title="(defun defaxiom-supporter-msg-list (symbols wrld)
  (cond ((endp symbols) nil)
        (t
         (let ((prop (getpropc (car symbols) &#39;defaxiom-supporter nil wrld)))
           (cond
...">defaxiom-supporter-msg-list</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> skip-checks-t)
            (<a class="sym-link local-def" href="#def-defaxiom-supporter-msg-list" data-sym="DEFAXIOM-SUPPORTER-MSG-LIST" title="(defun defaxiom-supporter-msg-list (symbols wrld)
  (cond ((endp symbols) nil)
        (t
         (let ((prop (getpropc (car symbols) &#39;defaxiom-supporter nil wrld)))
           (cond
...">defaxiom-supporter-msg-list</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> attachment-alist-sorted)
              wrld)))
        (<a class="sym-link local-def" href="#def-defattach-global-stobjs-msg" data-sym="DEFATTACH-GLOBAL-STOBJS-MSG" title="(defun defattach-global-stobjs-msg (attachment-alist-exec wrld state)
  (cond ((endp attachment-alist-exec) nil)
        (t
         (let* ((f (caar attachment-alist-exec))
                (g (cdar attachment-alist-exec))
...">defattach-global-stobjs-msg</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)
                '(<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> include-book-with-locals)))
            (<a class="sym-link local-def" href="#def-defattach-global-stobjs-msg" data-sym="DEFATTACH-GLOBAL-STOBJS-MSG" title="(defun defattach-global-stobjs-msg (attachment-alist-exec wrld state)
  (cond ((endp attachment-alist-exec) nil)
        (t
         (let* ((f (caar attachment-alist-exec))
                (g (cdar attachment-alist-exec))
...">defattach-global-stobjs-msg</a> attachment-alist-exec
              wrld
              state))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link local-def" href="#def-defaxiom-supporter-msg-list" data-sym="DEFAXIOM-SUPPORTER-MSG-LIST" title="(defun defaxiom-supporter-msg-list (symbols wrld)
  (cond ((endp symbols) nil)
        (t
         (let ((prop (getpropc (car symbols) &#39;defaxiom-supporter nil wrld)))
           (cond
...">defaxiom-supporter-msg-list</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"It is illegal for supporters of DEFAXIOM events to receive ~
              attachments, but ~*0.  See :DOC defattach."</span>
            `(<span class="string">"impossible"</span> <span class="string">"~@*"</span>
              <span class="string">"~@*, and "</span>
              <span class="string">"~@*, "</span>
              ,DEFAXIOM-SUPPORTER-MSG-LIST)))
        (<a class="sym-link local-def" href="#def-defattach-global-stobjs-msg" data-sym="DEFATTACH-GLOBAL-STOBJS-MSG" title="(defun defattach-global-stobjs-msg (attachment-alist-exec wrld state)
  (cond ((endp attachment-alist-exec) nil)
        (t
         (let* ((f (caar attachment-alist-exec))
                (g (cdar attachment-alist-exec))
...">defattach-global-stobjs-msg</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"~@0~@1"</span>
            <a class="sym-link local-def" href="#def-defattach-global-stobjs-msg" data-sym="DEFATTACH-GLOBAL-STOBJS-MSG" title="(defun defattach-global-stobjs-msg (attachment-alist-exec wrld state)
  (cond ((endp attachment-alist-exec) nil)
        (t
         (let* ((f (caar attachment-alist-exec))
                (g (cdar attachment-alist-exec))
...">defattach-global-stobjs-msg</a>
            *see-doc-with-global-stobj*))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-defattach-transparent" data-sym="CHK-DEFATTACH-TRANSPARENT" title="(defun chk-defattach-transparent
       (attachment-alist-sorted explicit-erasures ctx wrld state)
  (let* ((attached-fns (strip-cars attachment-alist-sorted))
         (tr
          (or (find-transparent attached-fns wrld)
...">chk-defattach-transparent</a> attachment-alist-sorted
              explicit-erasures
              ctx
              wrld
              state)
            (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((records (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (skip-checks (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:skipped</span>))
                   (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-chk-defattach-loop" data-sym="CHK-DEFATTACH-LOOP" title="(defun chk-defattach-loop (attachments erasures wrld ctx state)
  (let ((records (global-val &#39;attachment-records wrld)))
    (mv-let (records attachments)
            (cond
             (erasures (defattach-erase records attachments erasures wrld))
...">chk-defattach-loop</a> attachment-alist-sorted
                       erasures
                       wrld
                       ctx
                       state)))) (goal/event-names/new-entries (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> skip-checks-t) attachment-alist-sorted) (<a class="sym-link local-def" href="#def-defattach-constraint" data-sym="DEFATTACH-CONSTRAINT" title="(defun defattach-constraint
       (attachment-alist proved-fnl-insts-alist wrld ctx state)
  (mv-let (goal event-names new-entries)
          (defattach-constraint-rec attachment-alist attachment-alist
                                    proved-fnl-insts-alist *t* nil nil nil
...">defattach-constraint</a> attachment-alist-sorted
                        proved-fnl-insts-alist
                        wrld
                        ctx
                        state))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
                (goal (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (car goal/event-names/new-entries)))
                (event-names (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> goal/event-names/new-entries)))
                (new-entries (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> goal/event-names/new-entries)))
                (ttree1 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> skip-checks-t
                       <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>
                       (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> attachment-alist-exec)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-prove-defattach-guards" data-sym="PROVE-DEFATTACH-GUARDS" title="(defun prove-defattach-guards (attachment-alist helpers-lst ctx ens wrld state)
  (let ((n (length attachment-alist)))
    (assert$ (and attachment-alist (int= n (length helpers-lst)))
             (pprogn
              (cond ((int= n 1) state)
...">prove-defattach-guards</a> attachment-alist-exec
                        guard-helpers-lst
                        ctx
                        ens
                        wrld
                        state))))
                (ttree2 (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="prove.html#def-chk-assumption-free-ttree" data-sym="CHK-ASSUMPTION-FREE-TTREE">chk-assumption-free-ttree</a> ttree1 ctx state)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> skip-checks-t)
                         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a>)
                         attachment-alist-sorted) (<a class="sym-link local-def" href="#def-prove-defattach-constraint" data-sym="PROVE-DEFATTACH-CONSTRAINT" title="(defun prove-defattach-constraint
       (goal event-names attachment-alist helper-alist ctx ens wrld state)
  (assert$ (not (unknown-constraints-p goal))
           (let ((constraint-bypass-string
                  &quot;  Note that we are bypassing constraints that have been proved ~
...">prove-defattach-constraint</a> goal
                          event-names
                          attachment-alist-sorted
                          constraint-helper-alist
                          ctx
                          ens
                          wrld
                          state))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))
              (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="prove.html#def-chk-assumption-free-ttree" data-sym="CHK-ASSUMPTION-FREE-TTREE">chk-assumption-free-ttree</a> ttree2 ctx state)
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> erasures
                    explicit-erasures
                    attachment-alist-sorted
                    attachment-alist-exec
                    new-entries
                    (cons-tag-trees ttree1 ttree2)
                    records
                    skip-checks
                    attach-nil-lst))))))))))</pre>
  </div>

<div class="form-block function" id="def-attachment-cltl-cmd" data-defines="ATTACHMENT-CLTL-CMD" data-references="APPEND,ATTACHMENT,QUOTE,CONS,ALIST,ERASURES,DEFUN" data-used-by="DEFATTACH-FN" data-part-name="ATTACHMENT-CLTL-CMD" data-part-args="ALIST,ERASURES" data-part-body="ALIST,ERASURES,APPEND,ATTACHMENT,QUOTE,CONS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ATTACHMENT-CLTL-CMD">attachment-cltl-cmd</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-attachment-cltl-cmd" data-sym="ATTACHMENT-CLTL-CMD" title="(defun attachment-cltl-cmd (erasures alist)
  (cons &#39;attachment (append erasures alist)))">attachment-cltl-cmd</a>
  (erasures alist)
  (cons 'attachment (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> erasures alist)))</pre>
  </div>

<div class="form-block function" id="def-chk-meta-fn-attachments-lst" data-defines="CHK-META-FN-ATTACHMENTS-LST" data-references="UNION-EQ,CONS,VAL2,T,VALUE,NULL,COND,CHK-META-FN-ATTACHMENTS,VAL1,ER-LET*,CDR,EV-FNS,CADDDR,EXTRA-ANC,CADDR,EV-ANC,CADR,META-FN-LST,RULE-CLASS,CAR,LST,LET*,STATE,WRLD,CTX,LST-LST,NAME,DEFUN" data-used-by="PUT-DEFATTACH-PROPS-NAMES" data-part-name="CHK-META-FN-ATTACHMENTS-LST" data-part-args="STATE,WRLD,CTX,LST-LST,NAME" data-part-body="UNION-EQ,CONS,CHK-META-FN-ATTACHMENTS-LST,VAL2,T,VALUE,NULL,COND,STATE,WRLD,CTX,NAME,CHK-META-FN-ATTACHMENTS,VAL1,ER-LET*,CDR,EV-FNS,CADDDR,EXTRA-ANC,CADDR,EV-ANC,CADR,META-FN-LST,RULE-CLASS,LST-LST,CAR,LST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-META-FN-ATTACHMENTS-LST">chk-meta-fn-attachments-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-meta-fn-attachments-lst" data-sym="CHK-META-FN-ATTACHMENTS-LST" title="(defun chk-meta-fn-attachments-lst (name lst-lst ctx wrld state)
  (let* ((lst (car lst-lst))
         (rule-class (car lst))
         (meta-fn-lst (cadr lst))
         (ev-anc (caddr lst))
...">chk-meta-fn-attachments-lst</a>
  (name lst-lst ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((lst (car lst-lst)) (rule-class (car lst))
      (meta-fn-lst (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> lst))
      (ev-anc (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> lst))
      (extra-anc (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> lst))
      (ev-fns (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (cdr lst))))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val1 (<a class="sym-link system" href="defthm.html#def-chk-meta-fn-attachments" data-sym="CHK-META-FN-ATTACHMENTS">chk-meta-fn-attachments</a> name
           rule-class
           meta-fn-lst
           ev-anc
           extra-anc
           ev-fns
           nil
           ctx
           wrld
           state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr lst-lst)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val1))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val2 (<a class="sym-link local-def" href="#def-chk-meta-fn-attachments-lst" data-sym="CHK-META-FN-ATTACHMENTS-LST" title="(defun chk-meta-fn-attachments-lst (name lst-lst ctx wrld state)
  (let* ((lst (car lst-lst))
         (rule-class (car lst))
         (meta-fn-lst (cadr lst))
         (ev-anc (caddr lst))
...">chk-meta-fn-attachments-lst</a> name
                 (cdr lst-lst)
                 ctx
                 wrld
                 state)))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> val1) val2)
                ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> val2) val1)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (car val1) (car val2))
                    (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (cdr val1) (cdr val2))))))))))))</pre>
  </div>

<div class="form-block function" id="def-put-defattach-props-tr-meta-anc-removals" data-defines="PUT-DEFATTACH-PROPS-TR-META-ANC-REMOVALS" data-references="CHANGE,PUTPROP,CDR,REMOVE1,MEMBER-EQ,NEW-NAMES,TRANSPARENT-REC,ACCESS,WEAK-TRANSPARENT-REC-P,ASSERT$,NAMES,QUOTE,GETPROPC,CONSTRAINEDP,CAR,FN,LET*,T,ENDP,COND,WRLD0,WRLD,NAME,FNS,DEFUN" data-used-by="PUT-DEFATTACH-PROPS-TR-META-ANC" data-part-name="PUT-DEFATTACH-PROPS-TR-META-ANC-REMOVALS" data-part-args="WRLD0,WRLD,NAME,FNS" data-part-body="CHANGE,PUTPROP,CDR,PUT-DEFATTACH-PROPS-TR-META-ANC-REMOVALS,REMOVE1,NAME,MEMBER-EQ,NEW-NAMES,TRANSPARENT-REC,ACCESS,WEAK-TRANSPARENT-REC-P,ASSERT$,NAMES,WRLD0,QUOTE,GETPROPC,CONSTRAINEDP,CAR,FN,LET*,T,WRLD,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC-REMOVALS">put-defattach-props-tr-meta-anc-removals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defattach-props-tr-meta-anc-removals" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC-REMOVALS" title="(defun put-defattach-props-tr-meta-anc-removals (fns name wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (constrainedp (getpropc fn &#39;constrainedp nil wrld0))
...">put-defattach-props-tr-meta-anc-removals</a>
  (fns name wrld wrld0)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (car fns)) (constrainedp (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'constrainedp nil wrld0))
          (names (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (weak-transparent-rec-p constrainedp)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> transparent-rec constrainedp <span class="keyword">:names</span>)))
          (new-names (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> name names) (<a class="sym-link system" href="axioms.html#def-remove1" data-sym="REMOVE1">remove1</a> name names))))
        (<a class="sym-link local-def" href="#def-put-defattach-props-tr-meta-anc-removals" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC-REMOVALS" title="(defun put-defattach-props-tr-meta-anc-removals (fns name wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (constrainedp (getpropc fn &#39;constrainedp nil wrld0))
...">put-defattach-props-tr-meta-anc-removals</a> (cdr fns)
          name
          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn
            'constrainedp
            (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> transparent-rec constrainedp <span class="keyword">:names</span> new-names)
            wrld)
          wrld0)))))</pre>
  </div>

<div class="form-block function" id="def-put-defattach-props-tr-meta-anc-additions" data-defines="PUT-DEFATTACH-PROPS-TR-META-ANC-ADDITIONS" data-references="CHANGE,PUTPROP,CDR,CONS,MEMBER-EQ,NOT,NEW-NAMES,TRANSPARENT-REC,ACCESS,WEAK-TRANSPARENT-REC-P,ASSERT$,NAMES,QUOTE,GETPROPC,CONSTRAINEDP,CAR,FN,LET*,T,ENDP,COND,WRLD0,WRLD,NAME,FNS,DEFUN" data-used-by="PUT-DEFATTACH-PROPS-TR-META-ANC" data-part-name="PUT-DEFATTACH-PROPS-TR-META-ANC-ADDITIONS" data-part-args="WRLD0,WRLD,NAME,FNS" data-part-body="CHANGE,PUTPROP,CDR,PUT-DEFATTACH-PROPS-TR-META-ANC-ADDITIONS,CONS,NAME,MEMBER-EQ,NOT,NEW-NAMES,TRANSPARENT-REC,ACCESS,WEAK-TRANSPARENT-REC-P,ASSERT$,NAMES,WRLD0,QUOTE,GETPROPC,CONSTRAINEDP,CAR,FN,LET*,T,WRLD,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC-ADDITIONS">put-defattach-props-tr-meta-anc-additions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defattach-props-tr-meta-anc-additions" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC-ADDITIONS" title="(defun put-defattach-props-tr-meta-anc-additions (fns name wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (constrainedp (getpropc fn &#39;constrainedp nil wrld0))
...">put-defattach-props-tr-meta-anc-additions</a>
  (fns name wrld wrld0)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (car fns)) (constrainedp (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'constrainedp nil wrld0))
          (names (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (weak-transparent-rec-p constrainedp)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> transparent-rec constrainedp <span class="keyword">:names</span>)))
          (new-names (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> name names)) (cons name names))))
        (<a class="sym-link local-def" href="#def-put-defattach-props-tr-meta-anc-additions" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC-ADDITIONS" title="(defun put-defattach-props-tr-meta-anc-additions (fns name wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (constrainedp (getpropc fn &#39;constrainedp nil wrld0))
...">put-defattach-props-tr-meta-anc-additions</a> (cdr fns)
          name
          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn
            'constrainedp
            (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> transparent-rec constrainedp <span class="keyword">:names</span> new-names)
            wrld)
          wrld0)))))</pre>
  </div>

<div class="form-block function" id="def-put-defattach-props-tr-meta-anc" data-defines="PUT-DEFATTACH-PROPS-TR-META-ANC" data-references="PUT-DEFATTACH-PROPS-TR-META-ANC-ADDITIONS,SET-DIFFERENCE-EQ,PUT-DEFATTACH-PROPS-TR-META-ANC-REMOVALS,WRLD1,LET*,WRLD0,WRLD,TR-META-ANC-NEW,TR-META-ANC-OLD,NAME,DEFUN" data-used-by="PUT-DEFATTACH-PROPS-NAMES" data-part-name="PUT-DEFATTACH-PROPS-TR-META-ANC" data-part-args="WRLD0,WRLD,TR-META-ANC-NEW,TR-META-ANC-OLD,NAME" data-part-body="PUT-DEFATTACH-PROPS-TR-META-ANC-ADDITIONS,WRLD0,WRLD,NAME,TR-META-ANC-NEW,TR-META-ANC-OLD,SET-DIFFERENCE-EQ,PUT-DEFATTACH-PROPS-TR-META-ANC-REMOVALS,WRLD1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC">put-defattach-props-tr-meta-anc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defattach-props-tr-meta-anc" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC" title="(defun put-defattach-props-tr-meta-anc
       (name tr-meta-anc-old tr-meta-anc-new wrld wrld0)
  (let* ((wrld1
          (put-defattach-props-tr-meta-anc-removals
           (set-difference-eq tr-meta-anc-old tr-meta-anc-new) name wrld
...">put-defattach-props-tr-meta-anc</a>
  (name tr-meta-anc-old tr-meta-anc-new wrld wrld0)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link local-def" href="#def-put-defattach-props-tr-meta-anc-removals" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC-REMOVALS" title="(defun put-defattach-props-tr-meta-anc-removals (fns name wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (constrainedp (getpropc fn &#39;constrainedp nil wrld0))
...">put-defattach-props-tr-meta-anc-removals</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> tr-meta-anc-old tr-meta-anc-new)
         name
         wrld
         wrld0)))
    (<a class="sym-link local-def" href="#def-put-defattach-props-tr-meta-anc-additions" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC-ADDITIONS" title="(defun put-defattach-props-tr-meta-anc-additions (fns name wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (constrainedp (getpropc fn &#39;constrainedp nil wrld0))
...">put-defattach-props-tr-meta-anc-additions</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> tr-meta-anc-new tr-meta-anc-old)
      name
      wrld1
      wrld0)))</pre>
  </div>

<div class="form-block function" id="def-put-defattach-props-common-anc-removals" data-defines="PUT-DEFATTACH-PROPS-COMMON-ANC-REMOVALS" data-references="CONS,PUTPROP,REMOVE1-ASSOC-EQ,CDR,ASSOC-EQ,EQ,CONSP,AND,ASSERT$,NEW-ALIST,ATTACHMENT,QUOTE,GETPROPC,PROP,CAR,FN,LET*,T,ENDP,COND,WRLD0,WRLD,NAME,FNS,DEFUN" data-used-by="PUT-DEFATTACH-PROPS-COMMON-ANC" data-part-name="PUT-DEFATTACH-PROPS-COMMON-ANC-REMOVALS" data-part-args="WRLD0,WRLD,NAME,FNS" data-part-body="CONS,PUTPROP,PUT-DEFATTACH-PROPS-COMMON-ANC-REMOVALS,REMOVE1-ASSOC-EQ,CDR,NAME,ASSOC-EQ,EQ,CONSP,AND,ASSERT$,NEW-ALIST,WRLD0,ATTACHMENT,QUOTE,GETPROPC,PROP,CAR,FN,LET*,T,WRLD,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC-REMOVALS">put-defattach-props-common-anc-removals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defattach-props-common-anc-removals" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC-REMOVALS" title="(defun put-defattach-props-common-anc-removals (fns name wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (prop (getpropc fn &#39;attachment nil wrld0))
...">put-defattach-props-common-anc-removals</a>
  (fns name wrld wrld0)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (car fns)) (prop (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'attachment nil wrld0))
          (new-alist (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp prop)
                (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car prop) <span class="keyword">:attachment-disallowed</span>)
                (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> name (cdr prop)))
              (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> name (cdr prop)))))
        (<a class="sym-link local-def" href="#def-put-defattach-props-common-anc-removals" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC-REMOVALS" title="(defun put-defattach-props-common-anc-removals (fns name wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (prop (getpropc fn &#39;attachment nil wrld0))
...">put-defattach-props-common-anc-removals</a> (cdr fns)
          name
          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn
            'attachment
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> new-alist (cons <span class="keyword">:attachment-disallowed</span> new-alist))
            wrld)
          wrld0)))))</pre>
  </div>

<div class="form-block function" id="def-put-defattach-props-common-anc-additions" data-defines="PUT-DEFATTACH-PROPS-COMMON-ANC-ADDITIONS" data-references="LIST*,PUTPROP,CDR,EQ,CONSP,AND,ASSERT$,NULL,IF,ALIST,ATTACHMENT,QUOTE,GETPROPC,PROP,CAR,FN,LET*,T,ENDP,COND,WRLD0,WRLD,NEW-PAIR,FNS,DEFUN" data-used-by="PUT-DEFATTACH-PROPS-COMMON-ANC" data-part-name="PUT-DEFATTACH-PROPS-COMMON-ANC-ADDITIONS" data-part-args="WRLD0,WRLD,NEW-PAIR,FNS" data-part-body="LIST*,PUTPROP,NEW-PAIR,PUT-DEFATTACH-PROPS-COMMON-ANC-ADDITIONS,CDR,EQ,CONSP,AND,ASSERT$,NULL,IF,ALIST,WRLD0,ATTACHMENT,QUOTE,GETPROPC,PROP,CAR,FN,LET*,T,WRLD,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC-ADDITIONS">put-defattach-props-common-anc-additions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defattach-props-common-anc-additions" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC-ADDITIONS" title="(defun put-defattach-props-common-anc-additions (fns new-pair wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (prop (getpropc fn &#39;attachment nil wrld0))
...">put-defattach-props-common-anc-additions</a>
  (fns new-pair wrld wrld0)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) wrld)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (car fns)) (prop (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'attachment nil wrld0))
          (alist (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> prop)
              nil
              (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp prop) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car prop) <span class="keyword">:attachment-disallowed</span>))
                (cdr prop)))))
        (<a class="sym-link local-def" href="#def-put-defattach-props-common-anc-additions" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC-ADDITIONS" title="(defun put-defattach-props-common-anc-additions (fns new-pair wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (prop (getpropc fn &#39;attachment nil wrld0))
...">put-defattach-props-common-anc-additions</a> (cdr fns)
          new-pair
          (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> fn
            'attachment
            (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:attachment-disallowed</span> new-pair alist)
            wrld)
          wrld0)))))</pre>
  </div>

<div class="form-block function" id="def-put-defattach-props-common-anc" data-defines="PUT-DEFATTACH-PROPS-COMMON-ANC" data-references="T,CONS,PUT-DEFATTACH-PROPS-COMMON-ANC-ADDITIONS,COND,ONLY-NEW,SET-DIFFERENCE-EQ,PUT-DEFATTACH-PROPS-COMMON-ANC-REMOVALS,WRLD1,LET*,WRLD0,WRLD,RULE-CLASS,COMMON-ANC-NEW,COMMON-ANC-OLD,NAME,DEFUN" data-used-by="PUT-DEFATTACH-PROPS-NAMES" data-part-name="PUT-DEFATTACH-PROPS-COMMON-ANC" data-part-args="WRLD0,WRLD,RULE-CLASS,COMMON-ANC-NEW,COMMON-ANC-OLD,NAME" data-part-body="T,RULE-CLASS,CONS,PUT-DEFATTACH-PROPS-COMMON-ANC-ADDITIONS,COND,ONLY-NEW,WRLD0,WRLD,NAME,COMMON-ANC-NEW,COMMON-ANC-OLD,SET-DIFFERENCE-EQ,PUT-DEFATTACH-PROPS-COMMON-ANC-REMOVALS,WRLD1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC">put-defattach-props-common-anc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defattach-props-common-anc" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC" title="(defun put-defattach-props-common-anc
       (name common-anc-old common-anc-new rule-class wrld wrld0)
  (let* ((wrld1
          (put-defattach-props-common-anc-removals
           (set-difference-eq common-anc-old common-anc-new) name wrld wrld0))
...">put-defattach-props-common-anc</a>
  (name common-anc-old common-anc-new rule-class wrld wrld0)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld1 (<a class="sym-link local-def" href="#def-put-defattach-props-common-anc-removals" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC-REMOVALS" title="(defun put-defattach-props-common-anc-removals (fns name wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (prop (getpropc fn &#39;attachment nil wrld0))
...">put-defattach-props-common-anc-removals</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> common-anc-old common-anc-new)
         name
         wrld
         wrld0)) (only-new (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> common-anc-new common-anc-old)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (only-new (<a class="sym-link local-def" href="#def-put-defattach-props-common-anc-additions" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC-ADDITIONS" title="(defun put-defattach-props-common-anc-additions (fns new-pair wrld wrld0)
  (cond ((endp fns) wrld)
        (t
         (let* ((fn (car fns))
                (prop (getpropc fn &#39;attachment nil wrld0))
...">put-defattach-props-common-anc-additions</a> only-new
          (cons name rule-class)
          wrld1
          wrld0))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld1))))</pre>
  </div>

<div class="form-block function" id="def-put-defattach-props-names" data-defines="PUT-DEFATTACH-PROPS-NAMES" data-references="LIST*,PUTPROP,ASSERT$,WRLD3,PUT-DEFATTACH-PROPS-COMMON-ANC,WRLD2,IF,RULE-CLASS,PUT-DEFATTACH-PROPS-TR-META-ANC,WRLD1,CDR,COMMON-ANC-NEW,TR-META-ANC-NEW,CDDR,CHK-META-FN-ATTACHMENTS-LST,PAIR,ER-LET*,CADR,COMMON-ANC-OLD,TR-META-ANC-OLD,EVALUATOR-CHECK-INPUTS,QUOTE,GETPROPC,PROP,CAR,NAME,LET*,T,VALUE,ENDP,COND,STATE,WRLD0,WRLD,CTX,NAMES,DEFUN" data-used-by="PUT-DEFATTACH-PROPS" data-part-name="PUT-DEFATTACH-PROPS-NAMES" data-part-args="STATE,WRLD0,WRLD,CTX,NAMES" data-part-body="PUT-DEFATTACH-PROPS-NAMES,LIST*,PUTPROP,ASSERT$,WRLD3,PUT-DEFATTACH-PROPS-COMMON-ANC,WRLD2,IF,RULE-CLASS,PUT-DEFATTACH-PROPS-TR-META-ANC,WRLD1,CDR,COMMON-ANC-NEW,TR-META-ANC-NEW,STATE,CTX,CDDR,CHK-META-FN-ATTACHMENTS-LST,PAIR,ER-LET*,CADR,COMMON-ANC-OLD,TR-META-ANC-OLD,WRLD0,EVALUATOR-CHECK-INPUTS,QUOTE,GETPROPC,PROP,CAR,NAME,LET*,T,WRLD,VALUE,NAMES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFATTACH-PROPS-NAMES">put-defattach-props-names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defattach-props-names" data-sym="PUT-DEFATTACH-PROPS-NAMES" title="(defun put-defattach-props-names (names ctx wrld wrld0 state)
  (cond ((endp names) (value wrld))
        (t
         (let* ((name (car names))
                (prop (getpropc name &#39;evaluator-check-inputs nil wrld0))
...">put-defattach-props-names</a>
  (names ctx wrld wrld0 state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> names) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name (car names)) (prop (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'evaluator-check-inputs nil wrld0))
          (tr-meta-anc-old (car prop))
          (common-anc-old (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> prop)))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pair (<a class="sym-link local-def" href="#def-chk-meta-fn-attachments-lst" data-sym="CHK-META-FN-ATTACHMENTS-LST" title="(defun chk-meta-fn-attachments-lst (name lst-lst ctx wrld state)
  (let* ((lst (car lst-lst))
         (rule-class (car lst))
         (meta-fn-lst (cadr lst))
         (ev-anc (caddr lst))
...">chk-meta-fn-attachments-lst</a> name
               (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> prop)
               ctx
               wrld0
               state)))
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tr-meta-anc-new (car pair)) (common-anc-new (cdr pair))
              (wrld1 (<a class="sym-link local-def" href="#def-put-defattach-props-tr-meta-anc" data-sym="PUT-DEFATTACH-PROPS-TR-META-ANC" title="(defun put-defattach-props-tr-meta-anc
       (name tr-meta-anc-old tr-meta-anc-new wrld wrld0)
  (let* ((wrld1
          (put-defattach-props-tr-meta-anc-removals
           (set-difference-eq tr-meta-anc-old tr-meta-anc-new) name wrld
...">put-defattach-props-tr-meta-anc</a> name
                  tr-meta-anc-old
                  tr-meta-anc-new
                  wrld
                  wrld0))
              (rule-class (if (cdr (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> prop))
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  (car (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> prop)))))
              (wrld2 (<a class="sym-link local-def" href="#def-put-defattach-props-common-anc" data-sym="PUT-DEFATTACH-PROPS-COMMON-ANC" title="(defun put-defattach-props-common-anc
       (name common-anc-old common-anc-new rule-class wrld wrld0)
  (let* ((wrld1
          (put-defattach-props-common-anc-removals
           (set-difference-eq common-anc-old common-anc-new) name wrld wrld0))
...">put-defattach-props-common-anc</a> name
                  common-anc-old
                  common-anc-new
                  rule-class
                  wrld1
                  wrld0))
              (wrld3 (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> tr-meta-anc-new
                  (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> name
                    'evaluator-check-inputs
                    (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> tr-meta-anc-new common-anc-new (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> prop))
                    wrld2))))
            (<a class="sym-link local-def" href="#def-put-defattach-props-names" data-sym="PUT-DEFATTACH-PROPS-NAMES" title="(defun put-defattach-props-names (names ctx wrld wrld0 state)
  (cond ((endp names) (value wrld))
        (t
         (let* ((name (car names))
                (prop (getpropc name &#39;evaluator-check-inputs nil wrld0))
...">put-defattach-props-names</a> (cdr names)
              ctx
              wrld3
              wrld0
              state)))))))</pre>
  </div>

<div class="form-block function" id="def-put-defattach-props" data-defines="PUT-DEFATTACH-PROPS" data-references="PUT-DEFATTACH-PROPS-NAMES,TRANSPARENT-REC,ACCESS,WEAK-TRANSPARENT-REC-P,ASSERT$,NAMES,CONSTRAINEDP,GETPROPC,PROP,LET*,EXTENSION,QUOTE,SET-W,PPROGN,REVERT-WORLD-ON-ERROR,STATE,WRLD,CTX,FN,DEFUN" data-used-by="DEFATTACH-FN" data-part-name="PUT-DEFATTACH-PROPS" data-part-args="STATE,WRLD,CTX,FN" data-part-body="CTX,PUT-DEFATTACH-PROPS-NAMES,TRANSPARENT-REC,ACCESS,WEAK-TRANSPARENT-REC-P,ASSERT$,NAMES,CONSTRAINEDP,FN,GETPROPC,PROP,LET*,STATE,WRLD,EXTENSION,QUOTE,SET-W,PPROGN,REVERT-WORLD-ON-ERROR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-DEFATTACH-PROPS">put-defattach-props</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-defattach-props" data-sym="PUT-DEFATTACH-PROPS" title="(defun put-defattach-props (fn ctx wrld state)
  (revert-world-on-error
   (pprogn (set-w &#39;extension wrld state)
           (let* ((prop (getpropc fn &#39;constrainedp nil wrld))
                  (names
...">put-defattach-props</a>
  (fn ctx wrld state)
  (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension wrld state)
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((prop (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'constrainedp nil wrld)) (names (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (weak-transparent-rec-p prop)
              (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> transparent-rec prop <span class="keyword">:names</span>))))
        (<a class="sym-link local-def" href="#def-put-defattach-props-names" data-sym="PUT-DEFATTACH-PROPS-NAMES" title="(defun put-defattach-props-names (names ctx wrld wrld0 state)
  (cond ((endp names) (value wrld))
        (t
         (let* ((name (car names))
                (prop (getpropc name &#39;evaluator-check-inputs nil wrld0))
...">put-defattach-props-names</a> names ctx wrld wrld state)))))</pre>
  </div>

<div class="form-block function" id="def-defattach-fn" data-defines="DEFATTACH-FN" data-references="DEFATTACH,INSTALL-EVENT,OBSERVATION,SET-DIFFERENCE-EQ,IMPLICIT-ERASURES,PPROGN,VALUE,PUT-DEFATTACH-PROPS,IF,WRLD5,TRANSPARENT-FN-P,AND,CAAR,CANONICAL-SIBLING,FN-CANON,LET,CONSP,OR,ASSERT$,FN-TR,SET-DIFFERENCE-ASSOC-EQ,ATTACHMENT-CLTL-CMD,CLTL-CMD,ATTACHMENT-RECORDS,WRLD4,APPEND,GLOBAL-SET,WRLD3,T,PUTPROP,CAR,CDR,COND,WRLD2,ATTACHMENT,PUTPROP-X-LST1,WRLD1,GLOBAL-SET?,WRLD0,ATTACHMENT-FNS,ATTACH-NIL-LST,SKIP-CHECKS,RECORDS,TTREE,NEW-ENTRIES,ATTACHMENT-ALIST-EXEC,ATTACHMENT-ALIST-SORTED,EXPLICIT-ERASURES,NTH,STRIP-CARS,ERASURES,CTX,CHK-ACCEPTABLE-DEFATTACH,TUPLE,ER-LET*,PROVED-FUNCTIONAL-INSTANCES-ALIST,QUOTE,GLOBAL-VAL,PROVED-FNL-INSTS-ALIST,W,WRLD,LET*,&,MSG,Y,X,CASE-MATCH,WITH-CTX-SUMMARIZED,EVENT-FORM,STATE,ARGS,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="DEFATTACH-FN" data-part-args="EVENT-FORM,STATE,ARGS" data-part-body="DEFATTACH,EVENT-FORM,INSTALL-EVENT,OBSERVATION,SET-DIFFERENCE-EQ,IMPLICIT-ERASURES,PPROGN,VALUE,PUT-DEFATTACH-PROPS,IF,WRLD5,TRANSPARENT-FN-P,AND,CAAR,CANONICAL-SIBLING,FN-CANON,LET,CONSP,OR,ASSERT$,FN-TR,SET-DIFFERENCE-ASSOC-EQ,ATTACHMENT-CLTL-CMD,CLTL-CMD,ATTACHMENT-RECORDS,WRLD4,APPEND,GLOBAL-SET,WRLD3,T,PUTPROP,CAR,CDR,COND,WRLD2,ATTACHMENT,PUTPROP-X-LST1,WRLD1,GLOBAL-SET?,WRLD0,ATTACHMENT-FNS,ATTACH-NIL-LST,SKIP-CHECKS,RECORDS,TTREE,NEW-ENTRIES,ATTACHMENT-ALIST-EXEC,ATTACHMENT-ALIST-SORTED,EXPLICIT-ERASURES,NTH,STRIP-CARS,ERASURES,CTX,CHK-ACCEPTABLE-DEFATTACH,TUPLE,ER-LET*,PROVED-FUNCTIONAL-INSTANCES-ALIST,QUOTE,GLOBAL-VAL,PROVED-FNL-INSTS-ALIST,STATE,W,WRLD,LET*,&,MSG,Y,X,ARGS,CASE-MATCH,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-FN">defattach-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defattach-fn" data-sym="DEFATTACH-FN" title="(defun defattach-fn (args state event-form)
  (with-ctx-summarized
   (case-match args (((x y)) (msg &quot;( DEFATTACH (~x0 ~x1))&quot; x y))
               (((x y . &amp;)) (msg &quot;( DEFATTACH (~x0 ~x1 ...))&quot; x y))
               (((x y) . &amp;) (msg &quot;( DEFATTACH (~x0 ~x1) ...)&quot; x y))
...">defattach-fn</a>
  (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> state event-form)
  (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
      (((x y)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFATTACH (~x0 ~x1))"</span> x y))
      (((x y . &amp;)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFATTACH (~x0 ~x1 ...))"</span> x y))
      (((x y) . &amp;) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFATTACH (~x0 ~x1) ...)"</span> x y))
      (((x y . &amp;) . &amp;) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFATTACH (~x0 ~x1 ...) ...)"</span> x y))
      ((x y) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFATTACH ~x0 ~x1)"</span> x y))
      ((x y . &amp;) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFATTACH ~x0 ~x1 ...)"</span> x y))
      (&amp; (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( DEFATTACH ...)"</span>)))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (proved-fnl-insts-alist (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'proved-functional-instances-alist wrld)))
      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tuple (<a class="sym-link local-def" href="#def-chk-acceptable-defattach" data-sym="CHK-ACCEPTABLE-DEFATTACH" title="(defun chk-acceptable-defattach (args proved-fnl-insts-alist ctx wrld state)
  (er-let*
   ((tuple
     (er-progn
      (chk-non-local-in-non-trivial-encapsulate &quot;Defattach events&quot; nil ctx wrld
...">chk-acceptable-defattach</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
             proved-fnl-insts-alist
             ctx
             wrld
             state)))
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((erasures (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> tuple))) (explicit-erasures (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> tuple))
            (attachment-alist-sorted (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> tuple))
            (attachment-alist-exec (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> tuple))
            (new-entries (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> tuple))
            (ttree (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> tuple))
            (records (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">6</span> tuple))
            (skip-checks (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">7</span> tuple))
            (attach-nil-lst (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">8</span> tuple))
            (attachment-fns (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> attachment-alist-sorted))
            (wrld0 (<a class="sym-link system" href="history-management.html#def-global-set_3F" data-sym="GLOBAL-SET?">global-set?</a> 'attach-nil-lst
                attach-nil-lst
                wrld
                (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'attach-nil-lst wrld)))
            (wrld1 (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> erasures 'attachment nil wrld0))
            (wrld2 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (attachment-fns (<a class="sym-link system" href="history-management.html#def-putprop-x-lst1" data-sym="PUTPROP-X-LST1">putprop-x-lst1</a> (cdr attachment-fns)
                    'attachment
                    (car attachment-fns)
                    (<a class="sym-link system" href="axioms.html#def-putprop" data-sym="PUTPROP">putprop</a> (car attachment-fns)
                      'attachment
                      attachment-alist-sorted
                      wrld1)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld1)))
            (wrld3 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (new-entries (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'proved-functional-instances-alist
                    (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> new-entries proved-fnl-insts-alist)
                    wrld2))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld2)))
            (wrld4 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (skip-checks wrld3)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> '<a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a> records wrld3))))
            (cltl-cmd (<a class="sym-link local-def" href="#def-attachment-cltl-cmd" data-sym="ATTACHMENT-CLTL-CMD" title="(defun attachment-cltl-cmd (erasures alist)
  (cons &#39;attachment (append erasures alist)))">attachment-cltl-cmd</a> (set-difference-assoc-eq erasures attachment-alist-exec)
                attachment-alist-exec))
            (fn-tr (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (consp attachment-alist-sorted)
                  (consp explicit-erasures))
                (let ((fn-canon (<a class="sym-link system" href="defthm.html#def-canonical-sibling" data-sym="CANONICAL-SIBLING">canonical-sibling</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> attachment-alist-sorted) (car explicit-erasures))
                       wrld)))
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="defthm.html#def-transparent-fn-p" data-sym="TRANSPARENT-FN-P">transparent-fn-p</a> fn-canon wrld) fn-canon)))))
          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld5 (if fn-tr
                 (<a class="sym-link local-def" href="#def-put-defattach-props" data-sym="PUT-DEFATTACH-PROPS" title="(defun put-defattach-props (fn ctx wrld state)
  (revert-world-on-error
   (pprogn (set-w &#39;extension wrld state)
           (let* ((prop (getpropc fn &#39;constrainedp nil wrld))
                  (names
...">put-defattach-props</a> fn-tr ctx wrld4 state)
                 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> wrld4))))
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (let ((implicit-erasures (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> erasures explicit-erasures)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (implicit-erasures (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
                      <span class="string">"The pre-existing attachment~#0~[ ~
                                          is~/s are~] being removed for ~
                                          function~#0~[~/s~] ~&amp;0~@1~@2."</span>
                      implicit-erasures
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (explicit-erasures (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">", in addition to the ~
                                                      association~#0~[~/s~] ~
                                                      with nil provided ~
                                                      explicitly for ~&amp;0"</span>
                            explicit-erasures))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (attachment-fns (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">", before adding the ~
                                                      requested ~
                                                      attachment~#0~[~/s~]"</span>
                            attachment-fns))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
              (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> <span class="keyword">:attachments-recorded</span> event-form
                '<a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a>
                <span class="number">0</span>
                ttree
                cltl-cmd
                nil
                ctx
                wrld5
                state))))))))</pre>
  </div>

<div class="form-block macro" id="def-defattach-system" data-defines="DEFATTACH-SYSTEM" data-references="MEMBER-EQ,QUOTE,HARD,ER,T,DEFATTACH,LOCAL,QUASIQUOTE,CADR,LENGTH,EQL,CAR,SYMBOLP,AND,COND,ARGS,&REST,FORM,&WHOLE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFATTACH-SYSTEM">defattach-system</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defattach-system" data-sym="DEFATTACH-SYSTEM" title="(defmacro defattach-system (&amp;whole form &amp;rest args)
  (cond
   ((and (symbolp (car args)) (eql (length args) 2) (symbolp (cadr args)))
    `(local (defattach (,(car args) ,(cadr args)) :system-ok t)))
   ((symbolp (car args))
...">defattach-system</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
       (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) <span class="number">2</span>)
       (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))) `(<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> (,(CAR ARGS) ,(CADR ARGS)) <span class="keyword">:system-ok</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
    ((symbolp (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-defattach-system" data-sym="DEFATTACH-SYSTEM" title="(defmacro defattach-system (&amp;whole form &amp;rest args)
  (cond
   ((and (symbolp (car args)) (eql (length args) 2) (symbolp (cadr args)))
    `(local (defattach (,(car args) ,(cadr args)) :system-ok t)))
   ((symbolp (car args))
...">defattach-system</a>
        <span class="string">"When the first argument of a defattach-system call is a symbol, ~
              there must be exactly two arguments, both of them symbols.  The ~
              call ~x0 is thus illegal."</span>
        form))
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:system-ok</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-defattach-system" data-sym="DEFATTACH-SYSTEM" title="(defmacro defattach-system (&amp;whole form &amp;rest args)
  (cond
   ((and (symbolp (car args)) (eql (length args) 2) (symbolp (cadr args)))
    `(local (defattach (,(car args) ,(cadr args)) :system-ok t)))
   ((symbolp (car args))
...">defattach-system</a>
        <span class="string">"The argument :system-ok is illegal for a defattach-system call. ~
              Consider instead using defattach or removing :system-ok."</span>
        form))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> ,@ARGS <span class="keyword">:system-ok</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))</pre>
  </div>

<div class="form-block function" id="def-chk-return-last-entry" data-defines="CHK-RETURN-LAST-ENTRY" data-references="T,MACRO-BODY,GETPROPC,IF,VAL2,LET,WITH-GUARD-CHECKING1-RAW,EC-CALL1-RAW,MBE1-RAW,PROGN,MEMBER-EQ,NOT,CDR,NULL,CAR,CONSP,SYMBOLP,AND,BOOT-STRAP-FLG,QUOTE,GLOBAL-VAL,TTAG,OR,COND,PLIST-WORLDP,XARGS,DECLARE,WRLD,VAL,KEY,DEFUN" data-part-name="CHK-RETURN-LAST-ENTRY" data-part-args="WRLD,VAL,KEY" data-part-declare="WRLD,PLIST-WORLDP,XARGS,DECLARE" data-part-body="T,MACRO-BODY,GETPROPC,IF,VAL2,LET,WITH-GUARD-CHECKING1-RAW,EC-CALL1-RAW,MBE1-RAW,PROGN,MEMBER-EQ,NOT,CDR,NULL,CAR,CONSP,VAL,KEY,SYMBOLP,AND,BOOT-STRAP-FLG,QUOTE,GLOBAL-VAL,WRLD,TTAG,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-RETURN-LAST-ENTRY">chk-return-last-entry</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-return-last-entry" data-sym="CHK-RETURN-LAST-ENTRY" title="(defun chk-return-last-entry (key val wrld)
  (declare (xargs :guard (plist-worldp wrld) :mode :program))
  (cond
   ((or (ttag wrld) (global-val &#39;boot-strap-flg wrld))
    (and (symbolp key) key
...">chk-return-last-entry</a>
  (key val wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> wrld) <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> wrld) (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'boot-strap-flg wrld)) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp key)
        key
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (symbolp val)
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp val)
            (symbolp (car val))
            (car val)
            (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr val))))
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key
            '(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> mbe1-raw ec-call1-raw with-guard-checking1-raw)))
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> val)
          (let ((val2 (if (symbolp val)
                 val
                 (car val))))
            (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> val2 'macro-body nil wrld)))
        <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-chk-return-last-entry-coda" data-defines="CHK-RETURN-LAST-ENTRY-CODA" data-references="T,MACRO-BODY,GETPROPC,NOT,CAR,SYMBOLP,IF,VAL2,LET,AND,RETURN-LAST-TABLE,MSG,WITH-GUARD-CHECKING1-RAW,EC-CALL1-RAW,MBE1-RAW,PROGN,MEMBER-EQ,BOOT-STRAP-FLG,QUOTE,GLOBAL-VAL,TTAG,OR,COND,PLIST-WORLDP,XARGS,DECLARE,WRLD,VAL,KEY,DEFUN" data-part-name="CHK-RETURN-LAST-ENTRY-CODA" data-part-args="WRLD,VAL,KEY" data-part-declare="WRLD,PLIST-WORLDP,XARGS,DECLARE" data-part-body="T,MACRO-BODY,GETPROPC,NOT,CAR,SYMBOLP,IF,VAL2,LET,VAL,AND,RETURN-LAST-TABLE,MSG,WITH-GUARD-CHECKING1-RAW,EC-CALL1-RAW,MBE1-RAW,PROGN,KEY,MEMBER-EQ,BOOT-STRAP-FLG,QUOTE,GLOBAL-VAL,WRLD,TTAG,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-RETURN-LAST-ENTRY-CODA">chk-return-last-entry-coda</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-return-last-entry-coda" data-sym="CHK-RETURN-LAST-ENTRY-CODA" title="(defun chk-return-last-entry-coda (key val wrld)
  (declare (xargs :guard (plist-worldp wrld) :mode :program))
  (cond
   ((or (ttag wrld) (global-val &#39;boot-strap-flg wrld))
    (cond
...">chk-return-last-entry-coda</a>
  (key val wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> wrld) <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> wrld) (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'boot-strap-flg wrld)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key
           '(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> mbe1-raw ec-call1-raw with-guard-checking1-raw)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Note that the proposed key ~x0 for ~x1 is illegal because ~
                  it is given special treatment."</span>
            key
            'return-last-table))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val
           (let ((val2 (if (symbolp val)
                  val
                  (car val))))
             (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> val2 'macro-body nil wrld))
               (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~|Note that the proposed value ~x0 for key ~x1 ~
                              in ~x2 is illegal because ~x3 is not the name ~
                              of a macro known to ACL2.  See :DOC return-last ~
                              and (for the above point made explicitly) see ~
                              :DOC return-last-table."</span>
                 val
                 key
                 'return-last-table
                 val2)))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~|The error is simply that it is illegal to modify the ~
                 table, ~x0, unless there is an active trust tag.  See :DOC ~
                 return-last and see :DOC return-last-table."</span>
        'return-last-table))))</pre>
  </div>

<div class="form-block other" id="form-717" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-set-table-guard" data-sym="SET-TABLE-GUARD">set-table-guard</a> return-last-table
  (<a class="sym-link local-def" href="#def-chk-return-last-entry" data-sym="CHK-RETURN-LAST-ENTRY" title="(defun chk-return-last-entry (key val wrld)
  (declare (xargs :guard (plist-worldp wrld) :mode :program))
  (cond
   ((or (ttag wrld) (global-val &#39;boot-strap-flg wrld))
    (and (symbolp key) key
...">chk-return-last-entry</a> key val world)
  <span class="keyword">:topic</span> <a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a>
  <span class="keyword">:show</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:coda</span> (<a class="sym-link local-def" href="#def-chk-return-last-entry-coda" data-sym="CHK-RETURN-LAST-ENTRY-CODA" title="(defun chk-return-last-entry-coda (key val wrld)
  (declare (xargs :guard (plist-worldp wrld) :mode :program))
  (cond
   ((or (ttag wrld) (global-val &#39;boot-strap-flg wrld))
    (cond
...">chk-return-last-entry-coda</a> key val world))</pre>
  </div>

<div class="form-block macro" id="def-defmacro-last" data-defines="DEFMACRO-LAST" data-references="RETURN-LAST-TABLE,TABLE,RETURN-LAST,LIST,Y,X,PROGN,QUASIQUOTE,ADD-SUFFIX,OR,LET,SYMBOLP,AND,XARGS,DECLARE,T,QUOTE,TOP-LEVEL-OK,RAW,&KEY,FN,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFMACRO-LAST">defmacro-last</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defmacro-last" data-sym="DEFMACRO-LAST" title="(defmacro defmacro-last (fn &amp;key raw (top-level-ok &#39;t))
  (declare (xargs :guard (and (symbolp fn) (symbolp raw))))
  (let ((raw (or raw (add-suffix fn &quot;-RAW&quot;))))
    `(progn
      (defmacro ,fn (x y) (list &#39;return-last (list &#39;quote &#39;,raw) x y))
...">defmacro-last</a>
  (fn &amp;key raw (top-level-ok '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp fn) (symbolp raw))))
  (let ((raw (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> raw (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> fn <span class="string">"-RAW"</span>))))
    `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> ,FN
        (x y)
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote ',RAW) x y))
      (<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> return-last-table
        ',RAW
        ',(IF TOP-LEVEL-OK
     FN
     (LIST FN))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Afmt-control-defaults_2A" data-defines="*FMT-CONTROL-DEFAULTS*" data-references="EVISC-HITP-WITHOUT-IPRINT,SET-IPRINT-AR,STATE,QUOTE,F-GET-GLOBAL,IPRINT-AR,CURRENT-PACKAGE,PPR-FLAT-RIGHT-MARGIN,IPRINT-HARD-BOUND,IPRINT-SOFT-BOUND,SET-FMT-SOFT-RIGHT-MARGIN,FMT-SOFT-RIGHT-MARGIN,SET-FMT-HARD-RIGHT-MARGIN,FMT-HARD-RIGHT-MARGIN,T,WRITE-FOR-READ,QUASIQUOTE,*PRINT-CONTROL-DEFAULTS*,APPEND,DEFCONST" data-used-by="*FMT-CONTROL-DEFAULTS-KEYS*,FMT-CONTROL-BINDINGS,*FMT-CONTROL-DEFAULTS-RAW*" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*FMT-CONTROL-DEFAULTS*">*fmt-control-defaults*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Afmt-control-defaults_2A" data-sym="*FMT-CONTROL-DEFAULTS*" title="(defconst *fmt-control-defaults*
          (append *print-control-defaults*
                  `((write-for-read t)
                    (fmt-hard-right-margin ,*fmt-hard-right-margin-default*
                                           set-fmt-hard-right-margin)
...">*fmt-control-defaults*</a>
  (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link system" href="basis-a.html#def-_2Aprint-control-defaults_2A" data-sym="*PRINT-CONTROL-DEFAULTS*">*print-control-defaults*</a>
    `((<a class="sym-link system" href="basis-a.html#def-write-for-read" data-sym="WRITE-FOR-READ">write-for-read</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="basis-a.html#def-fmt-hard-right-margin" data-sym="FMT-HARD-RIGHT-MARGIN">fmt-hard-right-margin</a> ,*FMT-HARD-RIGHT-MARGIN-DEFAULT*
        <a class="sym-link system" href="basis-a.html#def-set-fmt-hard-right-margin" data-sym="SET-FMT-HARD-RIGHT-MARGIN">set-fmt-hard-right-margin</a>)
      (<a class="sym-link system" href="basis-a.html#def-fmt-soft-right-margin" data-sym="FMT-SOFT-RIGHT-MARGIN">fmt-soft-right-margin</a> ,*FMT-SOFT-RIGHT-MARGIN-DEFAULT*
        <a class="sym-link system" href="basis-a.html#def-set-fmt-soft-right-margin" data-sym="SET-FMT-SOFT-RIGHT-MARGIN">set-fmt-soft-right-margin</a>)
      (<a class="sym-link system" href="basis-a.html#def-iprint-soft-bound" data-sym="IPRINT-SOFT-BOUND">iprint-soft-bound</a> ,*IPRINT-SOFT-BOUND-DEFAULT*)
      (<a class="sym-link system" href="basis-a.html#def-iprint-hard-bound" data-sym="IPRINT-HARD-BOUND">iprint-hard-bound</a> ,*IPRINT-HARD-BOUND-DEFAULT*)
      (<a class="sym-link system" href="basis-a.html#def-ppr-flat-right-margin" data-sym="PPR-FLAT-RIGHT-MARGIN">ppr-flat-right-margin</a> ,(CDR (ASSOC-EQ &#39;PPR-FLAT-RIGHT-MARGIN *INITIAL-GLOBAL-TABLE*)))
      (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span>)
      (iprint-ar (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'iprint-ar state) <a class="sym-link local-def" href="#def-set-iprint-ar" data-sym="SET-IPRINT-AR" title="(defun set-iprint-ar (iprint-ar state)
  (f-put-global &#39;iprint-ar (compress1 &#39;iprint-ar iprint-ar) state))">set-iprint-ar</a>)
      (evisc-hitp-without-iprint nil))))</pre>
  </div>

<div class="form-block constant" id="def-_2Afixed-fmt-controls_2A" data-defines="*FIXED-FMT-CONTROLS*" data-references="EVISC-HITP-WITHOUT-IPRINT,IPRINT-AR,QUOTE,DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*FIXED-FMT-CONTROLS*">*fixed-fmt-controls*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Afixed-fmt-controls_2A" data-sym="*FIXED-FMT-CONTROLS*" title="(defconst *fixed-fmt-controls* &#39;(iprint-ar evisc-hitp-without-iprint))">*fixed-fmt-controls*</a>
  '(iprint-ar evisc-hitp-without-iprint))</pre>
  </div>

<div class="form-block function" id="def-fmt-control-bindings1" data-defines="FMT-CONTROL-BINDINGS1" data-references="CDR,CDDR,NULL,AND,QUOTE,ASSOC-EQ,PAIR,LET,QUASIQUOTE,LIST*,VAR,CAR,TRIP,LET*,CONS,T,ENDP,COND,RAWP,FMT-CONTROL-DEFAULTS-TAIL,ALIST,DEFUN" data-used-by="FMT-CONTROL-BINDINGS" data-part-name="FMT-CONTROL-BINDINGS1" data-part-args="RAWP,FMT-CONTROL-DEFAULTS-TAIL,ALIST" data-part-body="CDR,ALIST,FMT-CONTROL-BINDINGS1,CDDR,RAWP,NULL,AND,QUOTE,ASSOC-EQ,PAIR,LET,QUASIQUOTE,LIST*,VAR,CAR,TRIP,LET*,CONS,T,FMT-CONTROL-DEFAULTS-TAIL,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT-CONTROL-BINDINGS1">fmt-control-bindings1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fmt-control-bindings1" data-sym="FMT-CONTROL-BINDINGS1" title="(defun fmt-control-bindings1 (alist fmt-control-defaults-tail rawp)
  (cond ((endp fmt-control-defaults-tail) nil)
        (t
         (cons
          (let* ((trip (car fmt-control-defaults-tail)) (var (car trip)))
...">fmt-control-bindings1</a>
  (alist fmt-control-defaults-tail rawp)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fmt-control-defaults-tail) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((trip (car fmt-control-defaults-tail)) (var (car trip)))
          (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> var
            `(let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> ',VAR ,ALIST)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pair ,(COND
  ((MEMBER-EQ VAR *FIXED-FMT-CONTROLS*)
   `(ER HARD &#39;FMT-CONTROL-BINDINGS &quot;The binding of ~x0 is illegal in ~
                                           this context.&quot;
        &#39;,VAR))
  (T &#39;(CDR PAIR))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ,(CADR TRIP))))
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> rawp) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))))
        (<a class="sym-link local-def" href="#def-fmt-control-bindings1" data-sym="FMT-CONTROL-BINDINGS1" title="(defun fmt-control-bindings1 (alist fmt-control-defaults-tail rawp)
  (cond ((endp fmt-control-defaults-tail) nil)
        (t
         (cons
          (let* ((trip (car fmt-control-defaults-tail)) (var (car trip)))
...">fmt-control-bindings1</a> alist
          (cdr fmt-control-defaults-tail)
          rawp)))))</pre>
  </div>

<div class="form-block function" id="def-drop-cddrs" data-defines="DROP-CDDRS" data-references="CDR,CADAR,CAAR,LIST,CONS,T,ENDP,COND,TRUE-LIST-LISTP,XARGS,DECLARE,LST,DEFUN" data-used-by="*FMT-CONTROL-DEFAULTS-RAW*" data-part-name="DROP-CDDRS" data-part-args="LST" data-part-declare="LST,TRUE-LIST-LISTP,XARGS,DECLARE" data-part-body="CDR,DROP-CDDRS,CADAR,CAAR,LIST,CONS,T,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DROP-CDDRS">drop-cddrs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-drop-cddrs" data-sym="DROP-CDDRS" title="(defun drop-cddrs (lst)
  (declare (xargs :guard (true-list-listp lst)))
  (cond ((endp lst) nil)
        (t (cons (list (caar lst) (cadar lst)) (drop-cddrs (cdr lst))))))">drop-cddrs</a>
  (lst)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-list-listp" data-sym="TRUE-LIST-LISTP">true-list-listp</a> lst)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> lst) (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> lst)) (<a class="sym-link local-def" href="#def-drop-cddrs" data-sym="DROP-CDDRS" title="(defun drop-cddrs (lst)
  (declare (xargs :guard (true-list-listp lst)))
  (cond ((endp lst) nil)
        (t (cons (list (caar lst) (cadar lst)) (drop-cddrs (cdr lst))))))">drop-cddrs</a> (cdr lst))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Afmt-control-defaults-raw_2A" data-defines="*FMT-CONTROL-DEFAULTS-RAW*" data-references="*FMT-CONTROL-DEFAULTS*,DROP-CDDRS,DEFCONST" data-used-by="FMT-CONTROL-BINDINGS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*FMT-CONTROL-DEFAULTS-RAW*">*fmt-control-defaults-raw*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Afmt-control-defaults-raw_2A" data-sym="*FMT-CONTROL-DEFAULTS-RAW*" title="(defconst *fmt-control-defaults-raw* (drop-cddrs *fmt-control-defaults*))">*fmt-control-defaults-raw*</a>
  (<a class="sym-link local-def" href="#def-drop-cddrs" data-sym="DROP-CDDRS" title="(defun drop-cddrs (lst)
  (declare (xargs :guard (true-list-listp lst)))
  (cond ((endp lst) nil)
        (t (cons (list (caar lst) (cadar lst)) (drop-cddrs (cdr lst))))))">drop-cddrs</a> <a class="sym-link local-def" href="#def-_2Afmt-control-defaults_2A" data-sym="*FMT-CONTROL-DEFAULTS*" title="(defconst *fmt-control-defaults*
          (append *print-control-defaults*
                  `((write-for-read t)
                    (fmt-hard-right-margin ,*fmt-hard-right-margin-default*
                                           set-fmt-hard-right-margin)
...">*fmt-control-defaults*</a>))</pre>
  </div>

<div class="form-block function" id="def-fmt-control-bindings" data-defines="FMT-CONTROL-BINDINGS" data-references="T,*FMT-CONTROL-DEFAULTS-RAW*,*FMT-CONTROL-DEFAULTS*,FMT-CONTROL-BINDINGS1,COND,RAWP,ALIST,DEFUN" data-part-name="FMT-CONTROL-BINDINGS" data-part-args="RAWP,ALIST" data-part-body="T,*FMT-CONTROL-DEFAULTS-RAW*,RAWP,*FMT-CONTROL-DEFAULTS*,FMT-CONTROL-BINDINGS1,ALIST,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT-CONTROL-BINDINGS">fmt-control-bindings</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fmt-control-bindings" data-sym="FMT-CONTROL-BINDINGS" title="(defun fmt-control-bindings (alist rawp)
  (cond (alist (fmt-control-bindings1 alist *fmt-control-defaults* rawp))
        (rawp *fmt-control-defaults-raw*) (t *fmt-control-defaults*)))">fmt-control-bindings</a>
  (alist rawp)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (alist (<a class="sym-link local-def" href="#def-fmt-control-bindings1" data-sym="FMT-CONTROL-BINDINGS1" title="(defun fmt-control-bindings1 (alist fmt-control-defaults-tail rawp)
  (cond ((endp fmt-control-defaults-tail) nil)
        (t
         (cons
          (let* ((trip (car fmt-control-defaults-tail)) (var (car trip)))
...">fmt-control-bindings1</a> alist <a class="sym-link local-def" href="#def-_2Afmt-control-defaults_2A" data-sym="*FMT-CONTROL-DEFAULTS*" title="(defconst *fmt-control-defaults*
          (append *print-control-defaults*
                  `((write-for-read t)
                    (fmt-hard-right-margin ,*fmt-hard-right-margin-default*
                                           set-fmt-hard-right-margin)
...">*fmt-control-defaults*</a> rawp))
    (rawp <a class="sym-link local-def" href="#def-_2Afmt-control-defaults-raw_2A" data-sym="*FMT-CONTROL-DEFAULTS-RAW*" title="(defconst *fmt-control-defaults-raw* (drop-cddrs *fmt-control-defaults*))">*fmt-control-defaults-raw*</a>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link local-def" href="#def-_2Afmt-control-defaults_2A" data-sym="*FMT-CONTROL-DEFAULTS*" title="(defconst *fmt-control-defaults*
          (append *print-control-defaults*
                  `((write-for-read t)
                    (fmt-hard-right-margin ,*fmt-hard-right-margin-default*
                                           set-fmt-hard-right-margin)
...">*fmt-control-defaults*</a>)))</pre>
  </div>

<div class="form-block function" id="def-set-iprint-ar" data-defines="SET-IPRINT-AR" data-references="COMPRESS1,QUOTE,F-PUT-GLOBAL,STATE,IPRINT-AR,DEFUN" data-used-by="*FMT-CONTROL-DEFAULTS*" data-part-name="SET-IPRINT-AR" data-part-args="STATE,IPRINT-AR" data-part-body="STATE,COMPRESS1,IPRINT-AR,QUOTE,F-PUT-GLOBAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-IPRINT-AR">set-iprint-ar</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-iprint-ar" data-sym="SET-IPRINT-AR" title="(defun set-iprint-ar (iprint-ar state)
  (f-put-global &#39;iprint-ar (compress1 &#39;iprint-ar iprint-ar) state))">set-iprint-ar</a>
  (iprint-ar state)
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'iprint-ar
    (<a class="sym-link system" href="axioms.html#def-compress1" data-sym="COMPRESS1">compress1</a> 'iprint-ar iprint-ar)
    state))</pre>
  </div>

<div class="form-block function" id="def-override-global-evisc-table" data-defines="OVERRIDE-GLOBAL-EVISC-TABLE" data-references="T,CDR,STRIP-CARS,PAIRLIS$,CAR,APPEND,CONS,CONSP,NULL,COND,W,QUOTE,TABLE-ALIST,EVISC-TABLE,LET,STATE,EVISC-TUPLE,DEFUN" data-used-by="CHANNEL-TO-STRING" data-part-name="OVERRIDE-GLOBAL-EVISC-TABLE" data-part-args="STATE,EVISC-TUPLE" data-part-body="T,CDR,STRIP-CARS,PAIRLIS$,CAR,APPEND,CONS,CONSP,EVISC-TUPLE,NULL,COND,STATE,W,QUOTE,TABLE-ALIST,EVISC-TABLE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OVERRIDE-GLOBAL-EVISC-TABLE">override-global-evisc-table</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-override-global-evisc-table" data-sym="OVERRIDE-GLOBAL-EVISC-TABLE" title="(defun override-global-evisc-table (evisc-tuple state)
  (let ((evisc-table (table-alist &#39;evisc-table (w state))))
    (cond ((null evisc-table) evisc-tuple)
          ((consp evisc-tuple)
           (cons
...">override-global-evisc-table</a>
  (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> state)
  (let ((evisc-table (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'evisc-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> evisc-table) <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
      ((consp <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>) (cons (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (car <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
            (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> evisc-table) nil))
          (cdr <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> nil
          nil
          (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> evisc-table) nil)
          nil)))))</pre>
  </div>

<div class="form-block function" id="def-block-iprint-ar" data-defines="BLOCK-IPRINT-AR" data-references="MV,CAAR,EQL,CAR,CDR,T,CONS,INTEGERP,IF,ACONS,COMPRESS1,F-PUT-GLOBAL,PPROGN,AREF1,ELT-0,QUOTE,F-GET-GLOBAL,IPRINT-AR,LET*,STATE,DEFUN" data-used-by="CHANNEL-TO-STRING" data-part-name="BLOCK-IPRINT-AR" data-part-args="STATE" data-part-body="MV,CAAR,EQL,CAR,CDR,T,CONS,INTEGERP,IF,ACONS,COMPRESS1,F-PUT-GLOBAL,PPROGN,AREF1,ELT-0,STATE,QUOTE,F-GET-GLOBAL,IPRINT-AR,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BLOCK-IPRINT-AR">block-iprint-ar</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-block-iprint-ar" data-sym="BLOCK-IPRINT-AR" title="(defun block-iprint-ar (state)
  (let* ((iprint-ar (f-get-global &#39;iprint-ar state))
         (elt-0 (aref1 &#39;iprint-ar iprint-ar 0)))
    (pprogn
     (f-put-global &#39;iprint-ar
...">block-iprint-ar</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((iprint-ar (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'iprint-ar state)) (elt-0 (<a class="sym-link system" href="axioms.html#def-aref1" data-sym="AREF1">aref1</a> 'iprint-ar iprint-ar <span class="number">0</span>)))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'iprint-ar
        (<a class="sym-link system" href="axioms.html#def-compress1" data-sym="COMPRESS1">compress1</a> 'iprint-ar
          (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="number">0</span>
            (if (integerp elt-0)
              (cons elt-0 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              (if (cdr elt-0)
                elt-0
                (cons (car elt-0) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
            (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> iprint-ar) <span class="number">0</span>)
              (cdr iprint-ar)
              iprint-ar)))
        state)
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))</pre>
  </div>

<div class="form-block macro" id="def-channel-to-string" data-defines="CHANNEL-TO-STRING" data-references="WITH-LIVE-STATE,WITH-LOCAL-STATE,OPEN-OUTPUT-CHANNEL,BODY,IGNORE,PPROGN,STATE-GLOBAL-LET*,ACL2-UNWIND-PROTECT,T,F-GET-GLOBAL,COMPRESS1,IPRINT-AR,F-PUT-GLOBAL,CLOSE-OUTPUT-CHANNEL,OPEN-OUTPUT-CHANNEL-P,WHEN,BLOCK-IPRINT-AR,PROGN,STATE-FREE-GLOBAL-LET*,UNWIND-PROTECT,COND,BODY1,MV,GET-OUTPUT-STREAM-STRING$,ERP,MV-LET,MV?-LET,BODY0,OVERRIDE-GLOBAL-EVISC-TABLE,LET,QUASIQUOTE,EVISC-TUPLE,MEMBER-EQ,IF,FORM0,LET*,STATE,RESULT,QUOTE,EQ,NOT,SYMBOLP,SYMBOL-LISTP,AND,XARGS,DECLARE,OUTSIDE-LOOP-P,FMT-CONTROLS,EXTRA-VAR,&OPTIONAL,CHANNEL-VAR,FORM,DEFMACRO" data-used-by="FMT1!-TO-STRING-FN,FMT1-TO-STRING-FN,FMT!-TO-STRING-FN,FMT-TO-STRING-FN,FMS!-TO-STRING-FN,FMS-TO-STRING-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHANNEL-TO-STRING">channel-to-string</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-channel-to-string" data-sym="CHANNEL-TO-STRING" title="(defmacro channel-to-string
          (form channel-var &amp;optional extra-var fmt-controls outside-loop-p)
  (declare
   (xargs :guard
    (and (symbol-listp form) (symbolp channel-var) (symbolp extra-var)
...">channel-to-string</a>
  (form channel-var
    &amp;optional
    extra-var
    fmt-controls
    outside-loop-p)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> form)
        (symbolp channel-var)
        (symbolp extra-var)
        (symbolp fmt-controls)
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> 'result extra-var))
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> 'state extra-var)))))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((form0 (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> '<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> form)
         `(let ((<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> (<a class="sym-link local-def" href="#def-override-global-evisc-table" data-sym="OVERRIDE-GLOBAL-EVISC-TABLE" title="(defun override-global-evisc-table (evisc-tuple state)
  (let ((evisc-table (table-alist &#39;evisc-table (w state))))
    (cond ((null evisc-table) evisc-tuple)
          ((consp evisc-tuple)
           (cons
...">override-global-evisc-table</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> state)))
           ,FORM)
         form)) (body0 `(<a class="sym-link system" href="axioms.html#def-mv_3F-let" data-sym="MV?-LET">mv?-let</a> (,@(AND EXTRA-VAR (LIST EXTRA-VAR)) state)
          ,FORM0
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp result state)
            (<a class="sym-link system" href="axioms.html#def-get-output-stream-string_24" data-sym="GET-OUTPUT-STREAM-STRING$">get-output-stream-string$</a> ,CHANNEL-VAR state)
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> erp)
                ,(IF EXTRA-VAR
     `(CONS ,EXTRA-VAR RESULT)
     &#39;RESULT))
              state))))
      (body1 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (outside-loop-p `(unwind-protect (state-free-global-let* ,(FMT-CONTROL-BINDINGS FMT-CONTROLS T)
                (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link local-def" href="#def-block-iprint-ar" data-sym="BLOCK-IPRINT-AR" title="(defun block-iprint-ar (state)
  (let* ((iprint-ar (f-get-global &#39;iprint-ar state))
         (elt-0 (aref1 &#39;iprint-ar iprint-ar 0)))
    (pprogn
     (f-put-global &#39;iprint-ar
...">block-iprint-ar</a> state) ,BODY0))
              (when (<a class="sym-link system" href="axioms.html#def-open-output-channel-p" data-sym="OPEN-OUTPUT-CHANNEL-P">open-output-channel-p</a> ,CHANNEL-VAR <span class="keyword">:character</span> state)
                (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> ,CHANNEL-VAR state))
              (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'iprint-ar
                (<a class="sym-link system" href="axioms.html#def-compress1" data-sym="COMPRESS1">compress1</a> 'iprint-ar (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'iprint-ar state))
                state)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-acl2-unwind-protect" data-sym="ACL2-UNWIND-PROTECT">acl2-unwind-protect</a> <span class="string">"channel-to-string"</span>
              (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ,(FMT-CONTROL-BINDINGS FMT-CONTROLS NIL)
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (result state)
                    (<a class="sym-link local-def" href="#def-block-iprint-ar" data-sym="BLOCK-IPRINT-AR" title="(defun block-iprint-ar (state)
  (let* ((iprint-ar (f-get-global &#39;iprint-ar state))
         (elt-0 (aref1 &#39;iprint-ar iprint-ar 0)))
    (pprogn
     (f-put-global &#39;iprint-ar
...">block-iprint-ar</a> state)
                    (declare (ignore result))
                    state)
                  ,BODY0))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'iprint-ar
                  (<a class="sym-link system" href="axioms.html#def-compress1" data-sym="COMPRESS1">compress1</a> 'iprint-ar (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'iprint-ar state))
                  state)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-open-output-channel-p" data-sym="OPEN-OUTPUT-CHANNEL-P">open-output-channel-p</a> ,CHANNEL-VAR <span class="keyword">:character</span> state) (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> ,CHANNEL-VAR state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
              (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'iprint-ar
                (<a class="sym-link system" href="axioms.html#def-compress1" data-sym="COMPRESS1">compress1</a> 'iprint-ar (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'iprint-ar state))
                state)))))
      (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (,CHANNEL-VAR state)
          (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> <span class="keyword">:string</span> <span class="keyword">:character</span> state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (,CHANNEL-VAR ,BODY1)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ,(COND
  (OUTSIDE-LOOP-P &quot;ERROR: Failed to open string output channel to ~
                         report an error.&quot;)
  (T
   &#39;(ER SOFT &#39;CHANNEL-TO-STRING &quot;Implementation error: Unable to open a ~
                                channel to a string.&quot;))))))))
    `(<a class="sym-link local-def" href="#def-with-local-state" data-sym="WITH-LOCAL-STATE" title="(defmacro with-local-state (mv-let-form) `(with-local-stobj state ,mv-let-form))">with-local-state</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp result state)
        (with-live-state ,BODY)
        (declare (ignore erp))
        ,(COND (EXTRA-VAR `(MV (CAR RESULT) (CDR RESULT))) (T &#39;RESULT))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Afmt-control-defaults-keys_2A" data-defines="*FMT-CONTROL-DEFAULTS-KEYS*" data-references="*FMT-CONTROL-DEFAULTS*,STRIP-CARS,DEFCONST" data-used-by="FMT1!-TO-STRING-FN,FMT1-TO-STRING-FN,FMT!-TO-STRING-FN,FMT-TO-STRING-FN,FMS!-TO-STRING-FN,FMS-TO-STRING-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*FMT-CONTROL-DEFAULTS-KEYS*">*fmt-control-defaults-keys*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Afmt-control-defaults-keys_2A" data-sym="*FMT-CONTROL-DEFAULTS-KEYS*" title="(defconst *fmt-control-defaults-keys* (strip-cars *fmt-control-defaults*))">*fmt-control-defaults-keys*</a>
  (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> <a class="sym-link local-def" href="#def-_2Afmt-control-defaults_2A" data-sym="*FMT-CONTROL-DEFAULTS*" title="(defconst *fmt-control-defaults*
          (append *print-control-defaults*
                  `((write-for-read t)
                    (fmt-hard-right-margin ,*fmt-hard-right-margin-default*
                                           set-fmt-hard-right-margin)
...">*fmt-control-defaults*</a>))</pre>
  </div>

<div class="form-block function" id="def-fms-to-string-fn" data-defines="FMS-TO-STRING-FN" data-references="STATE,CHAN-DO-NOT-USE-ELSEWHERE,FMS,CHANNEL-TO-STRING,*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,ALISTP,STANDARD-EVISC-TUPLEP,CHARACTER-ALISTP,STRINGP,AND,XARGS,DECLARE,FMT-CONTROL-ALIST,EVISC-TUPLE,ALIST,STR,DEFUN" data-used-by="FMS-TO-STRING" data-part-name="FMS-TO-STRING-FN" data-part-args="FMT-CONTROL-ALIST,EVISC-TUPLE,ALIST,STR" data-part-declare="*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,FMT-CONTROL-ALIST,ALISTP,EVISC-TUPLE,STANDARD-EVISC-TUPLEP,ALIST,CHARACTER-ALISTP,STR,STRINGP,AND,XARGS,DECLARE" data-part-body="FMT-CONTROL-ALIST,EVISC-TUPLE,STATE,CHAN-DO-NOT-USE-ELSEWHERE,ALIST,STR,FMS,CHANNEL-TO-STRING" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMS-TO-STRING-FN">fms-to-string-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fms-to-string-fn" data-sym="FMS-TO-STRING-FN" title="(defun fms-to-string-fn (str alist evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fms-to-string-fn</a>
  (str alist <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp str)
        (<a class="sym-link system" href="axioms.html#def-character-alistp" data-sym="CHARACTER-ALISTP">character-alistp</a> alist)
        (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> fmt-control-alist)
        (<a class="sym-link system" href="basis-a.html#def-alist-keys-subsetp" data-sym="ALIST-KEYS-SUBSETP">alist-keys-subsetp</a> fmt-control-alist
          <a class="sym-link local-def" href="#def-_2Afmt-control-defaults-keys_2A" data-sym="*FMT-CONTROL-DEFAULTS-KEYS*" title="(defconst *fmt-control-defaults-keys* (strip-cars *fmt-control-defaults*))">*fmt-control-defaults-keys*</a>))))
  (<a class="sym-link local-def" href="#def-channel-to-string" data-sym="CHANNEL-TO-STRING" title="(defmacro channel-to-string
          (form channel-var &amp;optional extra-var fmt-controls outside-loop-p)
  (declare
   (xargs :guard
    (and (symbol-listp form) (symbolp channel-var) (symbolp extra-var)
...">channel-to-string</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> str alist chan-do-not-use-elsewhere state <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
    chan-do-not-use-elsewhere
    nil
    fmt-control-alist))</pre>
  </div>

<div class="form-block macro" id="def-fms-to-string" data-defines="FMS-TO-STRING" data-references="FMS-TO-STRING-FN,QUASIQUOTE,FMT-CONTROL-ALIST,EVISC-TUPLE,&KEY,ALIST,STR,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMS-TO-STRING">fms-to-string</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-fms-to-string" data-sym="FMS-TO-STRING" title="(defmacro fms-to-string (str alist &amp;key evisc-tuple fmt-control-alist)
  `(fms-to-string-fn ,str ,alist ,evisc-tuple ,fmt-control-alist))">fms-to-string</a>
  (str alist &amp;key <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  `(<a class="sym-link local-def" href="#def-fms-to-string-fn" data-sym="FMS-TO-STRING-FN" title="(defun fms-to-string-fn (str alist evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fms-to-string-fn</a> ,STR
    ,ALIST
    ,EVISC-TUPLE
    ,FMT-CONTROL-ALIST))</pre>
  </div>

<div class="form-block function" id="def-fms_21-to-string-fn" data-defines="FMS!-TO-STRING-FN" data-references="STATE,CHAN-DO-NOT-USE-ELSEWHERE,FMS!,CHANNEL-TO-STRING,*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,ALISTP,STANDARD-EVISC-TUPLEP,CHARACTER-ALISTP,STRINGP,AND,XARGS,DECLARE,FMT-CONTROL-ALIST,EVISC-TUPLE,ALIST,STR,DEFUN" data-used-by="FMS!-TO-STRING" data-part-name="FMS!-TO-STRING-FN" data-part-args="FMT-CONTROL-ALIST,EVISC-TUPLE,ALIST,STR" data-part-declare="*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,FMT-CONTROL-ALIST,ALISTP,EVISC-TUPLE,STANDARD-EVISC-TUPLEP,ALIST,CHARACTER-ALISTP,STR,STRINGP,AND,XARGS,DECLARE" data-part-body="FMT-CONTROL-ALIST,EVISC-TUPLE,STATE,CHAN-DO-NOT-USE-ELSEWHERE,ALIST,STR,FMS!,CHANNEL-TO-STRING" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMS!-TO-STRING-FN">fms!-to-string-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fms_21-to-string-fn" data-sym="FMS!-TO-STRING-FN" title="(defun fms!-to-string-fn (str alist evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fms!-to-string-fn</a>
  (str alist <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp str)
        (<a class="sym-link system" href="axioms.html#def-character-alistp" data-sym="CHARACTER-ALISTP">character-alistp</a> alist)
        (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> fmt-control-alist)
        (<a class="sym-link system" href="basis-a.html#def-alist-keys-subsetp" data-sym="ALIST-KEYS-SUBSETP">alist-keys-subsetp</a> fmt-control-alist
          <a class="sym-link local-def" href="#def-_2Afmt-control-defaults-keys_2A" data-sym="*FMT-CONTROL-DEFAULTS-KEYS*" title="(defconst *fmt-control-defaults-keys* (strip-cars *fmt-control-defaults*))">*fmt-control-defaults-keys*</a>))))
  (<a class="sym-link local-def" href="#def-channel-to-string" data-sym="CHANNEL-TO-STRING" title="(defmacro channel-to-string
          (form channel-var &amp;optional extra-var fmt-controls outside-loop-p)
  (declare
   (xargs :guard
    (and (symbol-listp form) (symbolp channel-var) (symbolp extra-var)
...">channel-to-string</a> (<a class="sym-link system" href="basis-a.html#def-fms_21" data-sym="FMS!">fms!</a> str alist chan-do-not-use-elsewhere state <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
    chan-do-not-use-elsewhere
    nil
    fmt-control-alist))</pre>
  </div>

<div class="form-block macro" id="def-fms_21-to-string" data-defines="FMS!-TO-STRING" data-references="FMS!-TO-STRING-FN,QUASIQUOTE,FMT-CONTROL-ALIST,EVISC-TUPLE,&KEY,ALIST,STR,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMS!-TO-STRING">fms!-to-string</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-fms_21-to-string" data-sym="FMS!-TO-STRING" title="(defmacro fms!-to-string (str alist &amp;key evisc-tuple fmt-control-alist)
  `(fms!-to-string-fn ,str ,alist ,evisc-tuple ,fmt-control-alist))">fms!-to-string</a>
  (str alist &amp;key <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  `(<a class="sym-link local-def" href="#def-fms_21-to-string-fn" data-sym="FMS!-TO-STRING-FN" title="(defun fms!-to-string-fn (str alist evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fms!-to-string-fn</a> ,STR
    ,ALIST
    ,EVISC-TUPLE
    ,FMT-CONTROL-ALIST))</pre>
  </div>

<div class="form-block function" id="def-fmt-to-string-fn" data-defines="FMT-TO-STRING-FN" data-references="COL,STATE,CHAN-DO-NOT-USE-ELSEWHERE,FMT,CHANNEL-TO-STRING,*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,ALISTP,STANDARD-EVISC-TUPLEP,CHARACTER-ALISTP,STRINGP,AND,XARGS,DECLARE,FMT-CONTROL-ALIST,EVISC-TUPLE,ALIST,STR,DEFUN" data-used-by="FMT-TO-STRING" data-part-name="FMT-TO-STRING-FN" data-part-args="FMT-CONTROL-ALIST,EVISC-TUPLE,ALIST,STR" data-part-declare="*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,FMT-CONTROL-ALIST,ALISTP,EVISC-TUPLE,STANDARD-EVISC-TUPLEP,ALIST,CHARACTER-ALISTP,STR,STRINGP,AND,XARGS,DECLARE" data-part-body="FMT-CONTROL-ALIST,COL,EVISC-TUPLE,STATE,CHAN-DO-NOT-USE-ELSEWHERE,ALIST,STR,FMT,CHANNEL-TO-STRING" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT-TO-STRING-FN">fmt-to-string-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fmt-to-string-fn" data-sym="FMT-TO-STRING-FN" title="(defun fmt-to-string-fn (str alist evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fmt-to-string-fn</a>
  (str alist <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp str)
        (<a class="sym-link system" href="axioms.html#def-character-alistp" data-sym="CHARACTER-ALISTP">character-alistp</a> alist)
        (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> fmt-control-alist)
        (<a class="sym-link system" href="basis-a.html#def-alist-keys-subsetp" data-sym="ALIST-KEYS-SUBSETP">alist-keys-subsetp</a> fmt-control-alist
          <a class="sym-link local-def" href="#def-_2Afmt-control-defaults-keys_2A" data-sym="*FMT-CONTROL-DEFAULTS-KEYS*" title="(defconst *fmt-control-defaults-keys* (strip-cars *fmt-control-defaults*))">*fmt-control-defaults-keys*</a>))))
  (<a class="sym-link local-def" href="#def-channel-to-string" data-sym="CHANNEL-TO-STRING" title="(defmacro channel-to-string
          (form channel-var &amp;optional extra-var fmt-controls outside-loop-p)
  (declare
   (xargs :guard
    (and (symbol-listp form) (symbolp channel-var) (symbolp extra-var)
...">channel-to-string</a> (<a class="sym-link system" href="basis-a.html#def-fmt" data-sym="FMT">fmt</a> str alist chan-do-not-use-elsewhere state <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
    chan-do-not-use-elsewhere
    col
    fmt-control-alist))</pre>
  </div>

<div class="form-block macro" id="def-fmt-to-string" data-defines="FMT-TO-STRING" data-references="FMT-TO-STRING-FN,QUASIQUOTE,FMT-CONTROL-ALIST,EVISC-TUPLE,&KEY,ALIST,STR,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT-TO-STRING">fmt-to-string</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-fmt-to-string" data-sym="FMT-TO-STRING" title="(defmacro fmt-to-string (str alist &amp;key evisc-tuple fmt-control-alist)
  `(fmt-to-string-fn ,str ,alist ,evisc-tuple ,fmt-control-alist))">fmt-to-string</a>
  (str alist &amp;key <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  `(<a class="sym-link local-def" href="#def-fmt-to-string-fn" data-sym="FMT-TO-STRING-FN" title="(defun fmt-to-string-fn (str alist evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fmt-to-string-fn</a> ,STR
    ,ALIST
    ,EVISC-TUPLE
    ,FMT-CONTROL-ALIST))</pre>
  </div>

<div class="form-block function" id="def-fmt_21-to-string-fn" data-defines="FMT!-TO-STRING-FN" data-references="COL,STATE,CHAN-DO-NOT-USE-ELSEWHERE,FMT!,CHANNEL-TO-STRING,*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,ALISTP,STANDARD-EVISC-TUPLEP,CHARACTER-ALISTP,STRINGP,AND,XARGS,DECLARE,FMT-CONTROL-ALIST,EVISC-TUPLE,ALIST,STR,DEFUN" data-used-by="FMT!-TO-STRING" data-part-name="FMT!-TO-STRING-FN" data-part-args="FMT-CONTROL-ALIST,EVISC-TUPLE,ALIST,STR" data-part-declare="*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,FMT-CONTROL-ALIST,ALISTP,EVISC-TUPLE,STANDARD-EVISC-TUPLEP,ALIST,CHARACTER-ALISTP,STR,STRINGP,AND,XARGS,DECLARE" data-part-body="FMT-CONTROL-ALIST,COL,EVISC-TUPLE,STATE,CHAN-DO-NOT-USE-ELSEWHERE,ALIST,STR,FMT!,CHANNEL-TO-STRING" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT!-TO-STRING-FN">fmt!-to-string-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fmt_21-to-string-fn" data-sym="FMT!-TO-STRING-FN" title="(defun fmt!-to-string-fn (str alist evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fmt!-to-string-fn</a>
  (str alist <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp str)
        (<a class="sym-link system" href="axioms.html#def-character-alistp" data-sym="CHARACTER-ALISTP">character-alistp</a> alist)
        (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> fmt-control-alist)
        (<a class="sym-link system" href="basis-a.html#def-alist-keys-subsetp" data-sym="ALIST-KEYS-SUBSETP">alist-keys-subsetp</a> fmt-control-alist
          <a class="sym-link local-def" href="#def-_2Afmt-control-defaults-keys_2A" data-sym="*FMT-CONTROL-DEFAULTS-KEYS*" title="(defconst *fmt-control-defaults-keys* (strip-cars *fmt-control-defaults*))">*fmt-control-defaults-keys*</a>))))
  (<a class="sym-link local-def" href="#def-channel-to-string" data-sym="CHANNEL-TO-STRING" title="(defmacro channel-to-string
          (form channel-var &amp;optional extra-var fmt-controls outside-loop-p)
  (declare
   (xargs :guard
    (and (symbol-listp form) (symbolp channel-var) (symbolp extra-var)
...">channel-to-string</a> (<a class="sym-link system" href="basis-a.html#def-fmt_21" data-sym="FMT!">fmt!</a> str alist chan-do-not-use-elsewhere state <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
    chan-do-not-use-elsewhere
    col
    fmt-control-alist))</pre>
  </div>

<div class="form-block macro" id="def-fmt_21-to-string" data-defines="FMT!-TO-STRING" data-references="FMT!-TO-STRING-FN,QUASIQUOTE,FMT-CONTROL-ALIST,EVISC-TUPLE,&KEY,ALIST,STR,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT!-TO-STRING">fmt!-to-string</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-fmt_21-to-string" data-sym="FMT!-TO-STRING" title="(defmacro fmt!-to-string (str alist &amp;key evisc-tuple fmt-control-alist)
  `(fmt!-to-string-fn ,str ,alist ,evisc-tuple ,fmt-control-alist))">fmt!-to-string</a>
  (str alist &amp;key <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  `(<a class="sym-link local-def" href="#def-fmt_21-to-string-fn" data-sym="FMT!-TO-STRING-FN" title="(defun fmt!-to-string-fn (str alist evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fmt!-to-string-fn</a> ,STR
    ,ALIST
    ,EVISC-TUPLE
    ,FMT-CONTROL-ALIST))</pre>
  </div>

<div class="form-block function" id="def-fmt1-to-string-fn" data-defines="FMT1-TO-STRING-FN" data-references="STATE,CHAN-DO-NOT-USE-ELSEWHERE,FMT1,CHANNEL-TO-STRING,UNSIGNED-BYTE,TYPE,*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,ALISTP,STANDARD-EVISC-TUPLEP,STRINGP,CHARACTER-ALISTP,AND,XARGS,DECLARE,FMT-CONTROL-ALIST,EVISC-TUPLE,COL,ALIST,STR,DEFUN" data-used-by="FMT1-TO-STRING" data-part-name="FMT1-TO-STRING-FN" data-part-args="FMT-CONTROL-ALIST,EVISC-TUPLE,COL,ALIST,STR" data-part-declare="COL,UNSIGNED-BYTE,TYPE,*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,FMT-CONTROL-ALIST,ALISTP,EVISC-TUPLE,STANDARD-EVISC-TUPLEP,STR,STRINGP,ALIST,CHARACTER-ALISTP,AND,XARGS,DECLARE" data-part-body="FMT-CONTROL-ALIST,EVISC-TUPLE,STATE,CHAN-DO-NOT-USE-ELSEWHERE,COL,ALIST,STR,FMT1,CHANNEL-TO-STRING" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT1-TO-STRING-FN">fmt1-to-string-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fmt1-to-string-fn" data-sym="FMT1-TO-STRING-FN" title="(defun fmt1-to-string-fn (str alist col evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (character-alistp alist) (stringp str)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fmt1-to-string-fn</a>
  (str alist col <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-character-alistp" data-sym="CHARACTER-ALISTP">character-alistp</a> alist)
        (stringp str)
        (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> fmt-control-alist)
        (<a class="sym-link system" href="basis-a.html#def-alist-keys-subsetp" data-sym="ALIST-KEYS-SUBSETP">alist-keys-subsetp</a> fmt-control-alist
          <a class="sym-link local-def" href="#def-_2Afmt-control-defaults-keys_2A" data-sym="*FMT-CONTROL-DEFAULTS-KEYS*" title="(defconst *fmt-control-defaults-keys* (strip-cars *fmt-control-defaults*))">*fmt-control-defaults-keys*</a>)))
    (type (unsigned-byte <span class="number">60</span>) col))
  (<a class="sym-link local-def" href="#def-channel-to-string" data-sym="CHANNEL-TO-STRING" title="(defmacro channel-to-string
          (form channel-var &amp;optional extra-var fmt-controls outside-loop-p)
  (declare
   (xargs :guard
    (and (symbol-listp form) (symbolp channel-var) (symbolp extra-var)
...">channel-to-string</a> (<a class="sym-link system" href="basis-a.html#def-fmt1" data-sym="FMT1">fmt1</a> str
      alist
      col
      chan-do-not-use-elsewhere
      state
      <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
    chan-do-not-use-elsewhere
    col
    fmt-control-alist))</pre>
  </div>

<div class="form-block macro" id="def-fmt1-to-string" data-defines="FMT1-TO-STRING" data-references="FMT1-TO-STRING-FN,QUASIQUOTE,FMT-CONTROL-ALIST,EVISC-TUPLE,&KEY,COL,ALIST,STR,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT1-TO-STRING">fmt1-to-string</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-fmt1-to-string" data-sym="FMT1-TO-STRING" title="(defmacro fmt1-to-string (str alist col &amp;key evisc-tuple fmt-control-alist)
  `(fmt1-to-string-fn ,str ,alist ,col ,evisc-tuple ,fmt-control-alist))">fmt1-to-string</a>
  (str alist col &amp;key <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  `(<a class="sym-link local-def" href="#def-fmt1-to-string-fn" data-sym="FMT1-TO-STRING-FN" title="(defun fmt1-to-string-fn (str alist col evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (character-alistp alist) (stringp str)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fmt1-to-string-fn</a> ,STR
    ,ALIST
    ,COL
    ,EVISC-TUPLE
    ,FMT-CONTROL-ALIST))</pre>
  </div>

<div class="form-block function" id="def-fmt1_21-to-string-fn" data-defines="FMT1!-TO-STRING-FN" data-references="STATE,CHAN-DO-NOT-USE-ELSEWHERE,FMT1!,CHANNEL-TO-STRING,UNSIGNED-BYTE,TYPE,*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,ALISTP,STANDARD-EVISC-TUPLEP,CHARACTER-ALISTP,STRINGP,AND,XARGS,DECLARE,FMT-CONTROL-ALIST,EVISC-TUPLE,COL,ALIST,STR,DEFUN" data-used-by="FMT1!-TO-STRING" data-part-name="FMT1!-TO-STRING-FN" data-part-args="FMT-CONTROL-ALIST,EVISC-TUPLE,COL,ALIST,STR" data-part-declare="COL,UNSIGNED-BYTE,TYPE,*FMT-CONTROL-DEFAULTS-KEYS*,ALIST-KEYS-SUBSETP,FMT-CONTROL-ALIST,ALISTP,EVISC-TUPLE,STANDARD-EVISC-TUPLEP,ALIST,CHARACTER-ALISTP,STR,STRINGP,AND,XARGS,DECLARE" data-part-body="FMT-CONTROL-ALIST,EVISC-TUPLE,STATE,CHAN-DO-NOT-USE-ELSEWHERE,COL,ALIST,STR,FMT1!,CHANNEL-TO-STRING" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT1!-TO-STRING-FN">fmt1!-to-string-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fmt1_21-to-string-fn" data-sym="FMT1!-TO-STRING-FN" title="(defun fmt1!-to-string-fn (str alist col evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fmt1!-to-string-fn</a>
  (str alist col <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp str)
        (<a class="sym-link system" href="axioms.html#def-character-alistp" data-sym="CHARACTER-ALISTP">character-alistp</a> alist)
        (<a class="sym-link system" href="axioms.html#def-standard-evisc-tuplep" data-sym="STANDARD-EVISC-TUPLEP">standard-evisc-tuplep</a> <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> fmt-control-alist)
        (<a class="sym-link system" href="basis-a.html#def-alist-keys-subsetp" data-sym="ALIST-KEYS-SUBSETP">alist-keys-subsetp</a> fmt-control-alist
          <a class="sym-link local-def" href="#def-_2Afmt-control-defaults-keys_2A" data-sym="*FMT-CONTROL-DEFAULTS-KEYS*" title="(defconst *fmt-control-defaults-keys* (strip-cars *fmt-control-defaults*))">*fmt-control-defaults-keys*</a>)))
    (type (unsigned-byte <span class="number">60</span>) col))
  (<a class="sym-link local-def" href="#def-channel-to-string" data-sym="CHANNEL-TO-STRING" title="(defmacro channel-to-string
          (form channel-var &amp;optional extra-var fmt-controls outside-loop-p)
  (declare
   (xargs :guard
    (and (symbol-listp form) (symbolp channel-var) (symbolp extra-var)
...">channel-to-string</a> (<a class="sym-link system" href="basis-a.html#def-fmt1_21" data-sym="FMT1!">fmt1!</a> str
      alist
      col
      chan-do-not-use-elsewhere
      state
      <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>)
    chan-do-not-use-elsewhere
    col
    fmt-control-alist))</pre>
  </div>

<div class="form-block macro" id="def-fmt1_21-to-string" data-defines="FMT1!-TO-STRING" data-references="FMT1!-TO-STRING-FN,QUASIQUOTE,FMT-CONTROL-ALIST,EVISC-TUPLE,&KEY,COL,ALIST,STR,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FMT1!-TO-STRING">fmt1!-to-string</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-fmt1_21-to-string" data-sym="FMT1!-TO-STRING" title="(defmacro fmt1!-to-string (str alist col &amp;key evisc-tuple fmt-control-alist)
  `(fmt1!-to-string-fn ,str ,alist ,col ,evisc-tuple ,fmt-control-alist))">fmt1!-to-string</a>
  (str alist col &amp;key <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> fmt-control-alist)
  `(<a class="sym-link local-def" href="#def-fmt1_21-to-string-fn" data-sym="FMT1!-TO-STRING-FN" title="(defun fmt1!-to-string-fn (str alist col evisc-tuple fmt-control-alist)
  (declare
   (xargs :guard
    (and (stringp str) (character-alistp alist)
         (standard-evisc-tuplep evisc-tuple) (alistp fmt-control-alist)
...">fmt1!-to-string-fn</a> ,STR
    ,ALIST
    ,COL
    ,EVISC-TUPLE
    ,FMT-CONTROL-ALIST))</pre>
  </div>

<div class="form-block function" id="def-attachment-pairs" data-defines="ATTACHMENT-PAIRS" data-references="CONS,CAR,ATTACHMENT-PAIR,PAIR,LET,CDR,T,ENDP,COND,ACC,WRLD,FNS,DEFUN" data-used-by="SIBLING-ATTACHMENTS" data-part-name="ATTACHMENT-PAIRS" data-part-args="ACC,WRLD,FNS" data-part-body="CONS,CAR,ATTACHMENT-PAIR,PAIR,LET,WRLD,CDR,ATTACHMENT-PAIRS,T,ACC,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ATTACHMENT-PAIRS">attachment-pairs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-attachment-pairs" data-sym="ATTACHMENT-PAIRS" title="(defun attachment-pairs (fns wrld acc)
  (cond ((endp fns) acc)
        (t
         (attachment-pairs (cdr fns) wrld
                           (let ((pair (attachment-pair (car fns) wrld)))">attachment-pairs</a>
  (fns wrld acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-attachment-pairs" data-sym="ATTACHMENT-PAIRS" title="(defun attachment-pairs (fns wrld acc)
  (cond ((endp fns) acc)
        (t
         (attachment-pairs (cdr fns) wrld
                           (let ((pair (attachment-pair (car fns) wrld)))">attachment-pairs</a> (cdr fns)
        wrld
        (let ((pair (attachment-pair (car fns) wrld)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pair (cons pair acc)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> acc)))))))</pre>
  </div>

<div class="form-block function" id="def-sibling-attachments" data-defines="SIBLING-ATTACHMENTS" data-references="SIBLINGS,ATTACHMENT-PAIRS,WRLD,F,DEFUN" data-used-by="EXT-ANCESTORS-ATTACHMENTS1,EXT-ANCESTORS-ATTACHMENTS2,EXT-ANCESTORS-ATTACHMENTS4" data-part-name="SIBLING-ATTACHMENTS" data-part-args="WRLD,F" data-part-body="WRLD,F,SIBLINGS,ATTACHMENT-PAIRS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIBLING-ATTACHMENTS">sibling-attachments</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sibling-attachments" data-sym="SIBLING-ATTACHMENTS" title="(defun sibling-attachments (f wrld)
  (attachment-pairs (siblings f wrld) wrld nil))">sibling-attachments</a>
  (f wrld)
  (<a class="sym-link local-def" href="#def-attachment-pairs" data-sym="ATTACHMENT-PAIRS" title="(defun attachment-pairs (fns wrld acc)
  (cond ((endp fns) acc)
        (t
         (attachment-pairs (cdr fns) wrld
                           (let ((pair (attachment-pair (car fns) wrld)))">attachment-pairs</a> (<a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a> f wrld) wrld nil))</pre>
  </div>

<div class="form-block function" id="def-ext-ancestors-attachments4" data-defines="EXT-ANCESTORS-ATTACHMENTS4" data-references="SIBLING-ATTACHMENTS,HONS-ACONS,CAR,HONS-GET,CDR,T,ENDP,COND,FAL,WRLD,FNS,DEFUN" data-used-by="EXT-ANCESTORS-ATTACHMENTS3" data-part-name="EXT-ANCESTORS-ATTACHMENTS4" data-part-args="FAL,WRLD,FNS" data-part-body="SIBLING-ATTACHMENTS,HONS-ACONS,CAR,HONS-GET,WRLD,CDR,EXT-ANCESTORS-ATTACHMENTS4,T,FAL,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXT-ANCESTORS-ATTACHMENTS4">ext-ancestors-attachments4</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ext-ancestors-attachments4" data-sym="EXT-ANCESTORS-ATTACHMENTS4" title="(defun ext-ancestors-attachments4 (fns wrld fal)
  (cond ((endp fns) fal)
        (t
         (ext-ancestors-attachments4 (cdr fns) wrld
                                     (cond ((hons-get (car fns) fal) fal)
...">ext-ancestors-attachments4</a>
  (fns wrld fal)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) fal)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ext-ancestors-attachments4" data-sym="EXT-ANCESTORS-ATTACHMENTS4" title="(defun ext-ancestors-attachments4 (fns wrld fal)
  (cond ((endp fns) fal)
        (t
         (ext-ancestors-attachments4 (cdr fns) wrld
                                     (cond ((hons-get (car fns) fal) fal)
...">ext-ancestors-attachments4</a> (cdr fns)
        wrld
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((hons-get (car fns) fal) fal)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (hons-acons (car fns)
              (<a class="sym-link local-def" href="#def-sibling-attachments" data-sym="SIBLING-ATTACHMENTS" title="(defun sibling-attachments (f wrld)
  (attachment-pairs (siblings f wrld) wrld nil))">sibling-attachments</a> (car fns) wrld)
              fal)))))))</pre>
  </div>

<div class="form-block function" id="def-ext-ancestors-attachments3" data-defines="EXT-ANCESTORS-ATTACHMENTS3" data-references="CONS,IF,EXT-ANCESTORS-ATTACHMENTS4,PATH,CAR,ATTACHMENT-COMPONENT,ACCESS,ANC,LET,CDR,T,ENDP,COND,FAL,WRLD,COMPONENTS,DEFUN" data-used-by="EXT-ANCESTORS-ATTACHMENTS2" data-part-name="EXT-ANCESTORS-ATTACHMENTS3" data-part-args="FAL,WRLD,COMPONENTS" data-part-body="CONS,IF,EXT-ANCESTORS-ATTACHMENTS4,PATH,CAR,ATTACHMENT-COMPONENT,ACCESS,ANC,LET,WRLD,CDR,EXT-ANCESTORS-ATTACHMENTS3,T,FAL,COMPONENTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXT-ANCESTORS-ATTACHMENTS3">ext-ancestors-attachments3</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ext-ancestors-attachments3" data-sym="EXT-ANCESTORS-ATTACHMENTS3" title="(defun ext-ancestors-attachments3 (components wrld fal)
  (cond ((endp components) fal)
        (t
         (ext-ancestors-attachments3 (cdr components) wrld
                                     (let ((anc
...">ext-ancestors-attachments3</a>
  (components wrld fal)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> components) fal)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ext-ancestors-attachments3" data-sym="EXT-ANCESTORS-ATTACHMENTS3" title="(defun ext-ancestors-attachments3 (components wrld fal)
  (cond ((endp components) fal)
        (t
         (ext-ancestors-attachments3 (cdr components) wrld
                                     (let ((anc
...">ext-ancestors-attachments3</a> (cdr components)
        wrld
        (let ((anc (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component (car components) <span class="keyword">:ord-anc</span>)) (path (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment-component (car components) <span class="keyword">:path</span>)))
          (<a class="sym-link local-def" href="#def-ext-ancestors-attachments4" data-sym="EXT-ANCESTORS-ATTACHMENTS4" title="(defun ext-ancestors-attachments4 (fns wrld fal)
  (cond ((endp fns) fal)
        (t
         (ext-ancestors-attachments4 (cdr fns) wrld
                                     (cond ((hons-get (car fns) fal) fal)
...">ext-ancestors-attachments4</a> (if path
              (cons (car path) anc)
              anc)
            wrld
            fal))))))</pre>
  </div>

<div class="form-block function" id="def-ext-ancestors-attachments2" data-defines="EXT-ANCESTORS-ATTACHMENTS2" data-references="ATTACHMENT,ACCESS,EXT-ANCESTORS-ATTACHMENTS3,SIBLING-ATTACHMENTS,HONS-ACONS,REC,CDR,HONS-GET,CAR,G,LET,T,ENDP,COND,FAL,CANON-GS-FAL,WRLD,ARFAL,CANON-GS,DEFUN" data-used-by="EXT-ANCESTORS-ATTACHMENTS1" data-part-name="EXT-ANCESTORS-ATTACHMENTS2" data-part-args="FAL,CANON-GS-FAL,WRLD,ARFAL,CANON-GS" data-part-body="ATTACHMENT,ACCESS,EXT-ANCESTORS-ATTACHMENTS3,SIBLING-ATTACHMENTS,HONS-ACONS,REC,WRLD,ARFAL,CDR,EXT-ANCESTORS-ATTACHMENTS2,CANON-GS-FAL,HONS-GET,CAR,G,LET,T,FAL,CANON-GS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXT-ANCESTORS-ATTACHMENTS2">ext-ancestors-attachments2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ext-ancestors-attachments2" data-sym="EXT-ANCESTORS-ATTACHMENTS2" title="(defun ext-ancestors-attachments2 (canon-gs arfal wrld canon-gs-fal fal)
  (cond ((endp canon-gs) fal)
        (t
         (let ((g (car canon-gs)))
           (cond
...">ext-ancestors-attachments2</a>
  (canon-gs arfal wrld canon-gs-fal fal)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> canon-gs) fal)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((g (car canon-gs)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((hons-get g canon-gs-fal) (<a class="sym-link local-def" href="#def-ext-ancestors-attachments2" data-sym="EXT-ANCESTORS-ATTACHMENTS2" title="(defun ext-ancestors-attachments2 (canon-gs arfal wrld canon-gs-fal fal)
  (cond ((endp canon-gs) fal)
        (t
         (let ((g (car canon-gs)))
           (cond
...">ext-ancestors-attachments2</a> (cdr canon-gs)
              arfal
              wrld
              canon-gs-fal
              fal))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((rec (cdr (hons-get g arfal))))
              (<a class="sym-link local-def" href="#def-ext-ancestors-attachments2" data-sym="EXT-ANCESTORS-ATTACHMENTS2" title="(defun ext-ancestors-attachments2 (canon-gs arfal wrld canon-gs-fal fal)
  (cond ((endp canon-gs) fal)
        (t
         (let ((g (car canon-gs)))
           (cond
...">ext-ancestors-attachments2</a> (cdr canon-gs)
                arfal
                wrld
                (hons-acons g fal canon-gs-fal)
                (let ((fal (hons-acons g (<a class="sym-link local-def" href="#def-sibling-attachments" data-sym="SIBLING-ATTACHMENTS" title="(defun sibling-attachments (f wrld)
  (attachment-pairs (siblings f wrld) wrld nil))">sibling-attachments</a> (car canon-gs) wrld) fal)))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (rec (<a class="sym-link local-def" href="#def-ext-ancestors-attachments3" data-sym="EXT-ANCESTORS-ATTACHMENTS3" title="(defun ext-ancestors-attachments3 (components wrld fal)
  (cond ((endp components) fal)
        (t
         (ext-ancestors-attachments3 (cdr components) wrld
                                     (let ((anc
...">ext-ancestors-attachments3</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment rec <span class="keyword">:components</span>)
                        wrld
                        fal))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> fal)))))))))))</pre>
  </div>

<div class="form-block function" id="def-canonical-cdrs" data-defines="CANONICAL-CDRS" data-references="CDAR,CANONICAL-SIBLING,CONS,CDR,T,ENDP,COND,ACC,WRLD,ALIST,DEFUN" data-used-by="EXT-ANCESTORS-ATTACHMENTS1" data-part-name="CANONICAL-CDRS" data-part-args="ACC,WRLD,ALIST" data-part-body="CDAR,CANONICAL-SIBLING,CONS,WRLD,CDR,CANONICAL-CDRS,T,ACC,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CANONICAL-CDRS">canonical-cdrs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-canonical-cdrs" data-sym="CANONICAL-CDRS" title="(defun canonical-cdrs (alist wrld acc)
  (cond ((endp alist) acc)
        (t
         (canonical-cdrs (cdr alist) wrld
                         (cons (canonical-sibling (cdar alist) wrld) acc)))))">canonical-cdrs</a>
  (alist wrld acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) acc)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-canonical-cdrs" data-sym="CANONICAL-CDRS" title="(defun canonical-cdrs (alist wrld acc)
  (cond ((endp alist) acc)
        (t
         (canonical-cdrs (cdr alist) wrld
                         (cons (canonical-sibling (cdar alist) wrld) acc)))))">canonical-cdrs</a> (cdr alist)
        wrld
        (cons (<a class="sym-link system" href="defthm.html#def-canonical-sibling" data-sym="CANONICAL-SIBLING">canonical-sibling</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) wrld) acc)))))</pre>
  </div>

<div class="form-block function" id="def-ext-ancestors-attachments1" data-defines="EXT-ANCESTORS-ATTACHMENTS1" data-references="HONS-ACONS,CANONICAL-ANCESTORS,CANONICAL-CDRS,APPEND,NULL,SIBLING-ATTACHMENTS,ALIST,LET*,T,CDR,CAR,HONS-GET,QUOTE,EXT-ANCESTORS-ATTACHMENTS2,ENDP,COND,FAL,WRLD,ARFAL,CANON-GS,FNS,DEFUN" data-used-by="EXT-ANCESTORS-ATTACHMENTS" data-part-name="EXT-ANCESTORS-ATTACHMENTS1" data-part-args="FAL,WRLD,ARFAL,CANON-GS,FNS" data-part-body="HONS-ACONS,CANONICAL-ANCESTORS,CANONICAL-CDRS,APPEND,NULL,SIBLING-ATTACHMENTS,ALIST,LET*,T,CDR,EXT-ANCESTORS-ATTACHMENTS1,CAR,HONS-GET,FAL,QUOTE,WRLD,ARFAL,CANON-GS,EXT-ANCESTORS-ATTACHMENTS2,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXT-ANCESTORS-ATTACHMENTS1">ext-ancestors-attachments1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ext-ancestors-attachments1" data-sym="EXT-ANCESTORS-ATTACHMENTS1" title="(defun ext-ancestors-attachments1 (fns canon-gs arfal wrld fal)
  (cond
   ((endp fns)
    (ext-ancestors-attachments2 canon-gs arfal wrld &#39;ext-ancestors-attachments2
                                fal))
...">ext-ancestors-attachments1</a>
  (fns canon-gs arfal wrld fal)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) (<a class="sym-link local-def" href="#def-ext-ancestors-attachments2" data-sym="EXT-ANCESTORS-ATTACHMENTS2" title="(defun ext-ancestors-attachments2 (canon-gs arfal wrld canon-gs-fal fal)
  (cond ((endp canon-gs) fal)
        (t
         (let ((g (car canon-gs)))
           (cond
...">ext-ancestors-attachments2</a> canon-gs
        arfal
        wrld
        '<a class="sym-link local-def" href="#def-ext-ancestors-attachments2" data-sym="EXT-ANCESTORS-ATTACHMENTS2" title="(defun ext-ancestors-attachments2 (canon-gs arfal wrld canon-gs-fal fal)
  (cond ((endp canon-gs) fal)
        (t
         (let ((g (car canon-gs)))
           (cond
...">ext-ancestors-attachments2</a>
        fal))
    ((hons-get (car fns) fal) (<a class="sym-link local-def" href="#def-ext-ancestors-attachments1" data-sym="EXT-ANCESTORS-ATTACHMENTS1" title="(defun ext-ancestors-attachments1 (fns canon-gs arfal wrld fal)
  (cond
   ((endp fns)
    (ext-ancestors-attachments2 canon-gs arfal wrld &#39;ext-ancestors-attachments2
                                fal))
...">ext-ancestors-attachments1</a> (cdr fns)
        canon-gs
        arfal
        wrld
        fal))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((alist (<a class="sym-link local-def" href="#def-sibling-attachments" data-sym="SIBLING-ATTACHMENTS" title="(defun sibling-attachments (f wrld)
  (attachment-pairs (siblings f wrld) wrld nil))">sibling-attachments</a> (car fns) wrld)) (canon-gs (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> alist) canon-gs)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-canonical-cdrs" data-sym="CANONICAL-CDRS" title="(defun canonical-cdrs (alist wrld acc)
  (cond ((endp alist) acc)
        (t
         (canonical-cdrs (cdr alist) wrld
                         (cons (canonical-sibling (cdar alist) wrld) acc)))))">canonical-cdrs</a> alist wrld nil) canon-gs)))))
        (<a class="sym-link local-def" href="#def-ext-ancestors-attachments1" data-sym="EXT-ANCESTORS-ATTACHMENTS1" title="(defun ext-ancestors-attachments1 (fns canon-gs arfal wrld fal)
  (cond
   ((endp fns)
    (ext-ancestors-attachments2 canon-gs arfal wrld &#39;ext-ancestors-attachments2
                                fal))
...">ext-ancestors-attachments1</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="defthm.html#def-canonical-ancestors" data-sym="CANONICAL-ANCESTORS">canonical-ancestors</a> (car fns) wrld nil) (cdr fns))
          canon-gs
          arfal
          wrld
          (hons-acons (car fns) alist fal))))))</pre>
  </div>

<div class="form-block function" id="def-attachment-records-fal" data-defines="ATTACHMENT-RECORDS-FAL" data-references="CAR,ATTACHMENT,ACCESS,HONS-ACONS,CDR,T,ENDP,COND,FAL,ATTACHMENT-RECORDS,DEFUN" data-used-by="EXT-ANCESTORS-ATTACHMENTS" data-part-name="ATTACHMENT-RECORDS-FAL" data-part-args="FAL,ATTACHMENT-RECORDS" data-part-body="CAR,ATTACHMENT,ACCESS,HONS-ACONS,CDR,ATTACHMENT-RECORDS-FAL,T,FAL,ATTACHMENT-RECORDS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ATTACHMENT-RECORDS-FAL">attachment-records-fal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-attachment-records-fal" data-sym="ATTACHMENT-RECORDS-FAL" title="(defun attachment-records-fal (attachment-records fal)
  (cond ((endp attachment-records) fal)
        (t
         (attachment-records-fal (cdr attachment-records)
                                 (hons-acons
...">attachment-records-fal</a>
  (<a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a> fal)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a>) fal)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-attachment-records-fal" data-sym="ATTACHMENT-RECORDS-FAL" title="(defun attachment-records-fal (attachment-records fal)
  (cond ((endp attachment-records) fal)
        (t
         (attachment-records-fal (cdr attachment-records)
                                 (hons-acons
...">attachment-records-fal</a> (cdr <a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a>)
        (hons-acons (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> attachment (car <a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a>) <span class="keyword">:g</span>)
          (car <a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a>)
          fal)))))</pre>
  </div>

<div class="form-block function" id="def-ext-ancestors-attachments" data-defines="EXT-ANCESTORS-ATTACHMENTS" data-references="ATTACHMENT-RECORDS,QUOTE,GLOBAL-VAL,ATTACHMENT-RECORDS-FAL,CANONICAL-ANCESTORS,CONS,EXT-ANCESTORS-ATTACHMENTS1,CANONICAL-SIBLING,G,LET,WRLD,F,DEFUN" data-part-name="EXT-ANCESTORS-ATTACHMENTS" data-part-args="WRLD,F" data-part-body="ATTACHMENT-RECORDS,QUOTE,GLOBAL-VAL,ATTACHMENT-RECORDS-FAL,CANONICAL-ANCESTORS,CONS,EXT-ANCESTORS-ATTACHMENTS1,WRLD,F,CANONICAL-SIBLING,G,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXT-ANCESTORS-ATTACHMENTS">ext-ancestors-attachments</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ext-ancestors-attachments" data-sym="EXT-ANCESTORS-ATTACHMENTS" title="(defun ext-ancestors-attachments (f wrld)
  (let ((g (canonical-sibling f wrld)))
    (ext-ancestors-attachments1 (cons g (canonical-ancestors g wrld nil)) nil
                                (attachment-records-fal
                                 (global-val &#39;attachment-records wrld)
...">ext-ancestors-attachments</a>
  (f wrld)
  (let ((g (<a class="sym-link system" href="defthm.html#def-canonical-sibling" data-sym="CANONICAL-SIBLING">canonical-sibling</a> f wrld)))
    (<a class="sym-link local-def" href="#def-ext-ancestors-attachments1" data-sym="EXT-ANCESTORS-ATTACHMENTS1" title="(defun ext-ancestors-attachments1 (fns canon-gs arfal wrld fal)
  (cond
   ((endp fns)
    (ext-ancestors-attachments2 canon-gs arfal wrld &#39;ext-ancestors-attachments2
                                fal))
...">ext-ancestors-attachments1</a> (cons g (<a class="sym-link system" href="defthm.html#def-canonical-ancestors" data-sym="CANONICAL-ANCESTORS">canonical-ancestors</a> g wrld nil))
      nil
      (<a class="sym-link local-def" href="#def-attachment-records-fal" data-sym="ATTACHMENT-RECORDS-FAL" title="(defun attachment-records-fal (attachment-records fal)
  (cond ((endp attachment-records) fal)
        (t
         (attachment-records-fal (cdr attachment-records)
                                 (hons-acons
...">attachment-records-fal</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link local-def" href="#def-attachment-records" data-sym="ATTACHMENT-RECORDS" title="(defun attachment-records (attachments records wrld ctx state)
  (cond ((endp attachments) (value records))
        (t
         (let ((pair (car attachments)))
           (cond
...">attachment-records</a> wrld)
        <span class="keyword">:attachment-records-fal</span>)
      wrld
      f)))</pre>
  </div>

<div class="form-block function" id="def-ext-anc-attachment-missing" data-defines="EXT-ANC-ATTACHMENT-MISSING" data-references="T,CAAR,ATTACHMENT-PAIR,CDR,CDAR,EQ,ENDP,COND,WRLD,ALIST,DEFUN" data-used-by="EXT-ANC-ATTACHMENTS-VALID-P" data-part-name="EXT-ANC-ATTACHMENT-MISSING" data-part-args="WRLD,ALIST" data-part-body="T,EXT-ANC-ATTACHMENT-MISSING,WRLD,CAAR,ATTACHMENT-PAIR,CDR,CDAR,EQ,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXT-ANC-ATTACHMENT-MISSING">ext-anc-attachment-missing</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ext-anc-attachment-missing" data-sym="EXT-ANC-ATTACHMENT-MISSING" title="(defun ext-anc-attachment-missing (alist wrld)
  (cond ((endp alist) nil)
        ((eq (cdar alist) (cdr (attachment-pair (caar alist) wrld)))
         (ext-anc-attachment-missing (cdr alist) wrld))
        (t (caar alist))))">ext-anc-attachment-missing</a>
  (alist wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) (cdr (attachment-pair (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) wrld))) (<a class="sym-link local-def" href="#def-ext-anc-attachment-missing" data-sym="EXT-ANC-ATTACHMENT-MISSING" title="(defun ext-anc-attachment-missing (alist wrld)
  (cond ((endp alist) nil)
        ((eq (cdar alist) (cdr (attachment-pair (caar alist) wrld)))
         (ext-anc-attachment-missing (cdr alist) wrld))
        (t (caar alist))))">ext-anc-attachment-missing</a> (cdr alist) wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))))</pre>
  </div>

<div class="form-block function" id="def-ext-anc-attachments-valid-p-1" data-defines="EXT-ANC-ATTACHMENTS-VALID-P-1" data-references="CDR,ATTACHMENT-PAIR,NOT,CAR,ASSOC-EQ,OR,T,ENDP,COND,WRLD,ALIST,FNS,DEFUN" data-used-by="EXT-ANC-ATTACHMENTS-VALID-P" data-part-name="EXT-ANC-ATTACHMENTS-VALID-P-1" data-part-args="WRLD,ALIST,FNS" data-part-body="CDR,EXT-ANC-ATTACHMENTS-VALID-P-1,WRLD,ATTACHMENT-PAIR,NOT,ALIST,CAR,ASSOC-EQ,OR,T,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXT-ANC-ATTACHMENTS-VALID-P-1">ext-anc-attachments-valid-p-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ext-anc-attachments-valid-p-1" data-sym="EXT-ANC-ATTACHMENTS-VALID-P-1" title="(defun ext-anc-attachments-valid-p-1 (fns alist wrld)
  (cond ((endp fns) t)
        ((or (assoc-eq (car fns) alist) (not (attachment-pair (car fns) wrld)))
         (ext-anc-attachments-valid-p-1 (cdr fns) alist wrld))
        (t nil)))">ext-anc-attachments-valid-p-1</a>
  (fns alist wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car fns) alist)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (attachment-pair (car fns) wrld))) (<a class="sym-link local-def" href="#def-ext-anc-attachments-valid-p-1" data-sym="EXT-ANC-ATTACHMENTS-VALID-P-1" title="(defun ext-anc-attachments-valid-p-1 (fns alist wrld)
  (cond ((endp fns) t)
        ((or (assoc-eq (car fns) alist) (not (attachment-pair (car fns) wrld)))
         (ext-anc-attachments-valid-p-1 (cdr fns) alist wrld))
        (t nil)))">ext-anc-attachments-valid-p-1</a> (cdr fns) alist wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-ext-anc-attachments-valid-p" data-defines="EXT-ANC-ATTACHMENTS-VALID-P" data-references="SIBLINGS,EXT-ANC-ATTACHMENTS-VALID-P-1,AND,EXT-ANC-ATTACHMENT-MISSING,MISSING,ALIST,F,LET*,T,CDR,BADGE-USERFN,APPLY$-USERFN,QUOTE,HONS-GET,OR,IF,CAR,EQ,ENDP,COND,ACC,WRLD,SPECIAL-NAME,EXT-ANC-ATTACHMENTS,FNS,DEFUN" data-part-name="EXT-ANC-ATTACHMENTS-VALID-P" data-part-args="ACC,WRLD,SPECIAL-NAME,EXT-ANC-ATTACHMENTS,FNS" data-part-body="SIBLINGS,EXT-ANC-ATTACHMENTS-VALID-P-1,AND,EXT-ANC-ATTACHMENT-MISSING,MISSING,ALIST,F,LET*,T,WRLD,CDR,EXT-ANC-ATTACHMENTS-VALID-P,BADGE-USERFN,EXT-ANC-ATTACHMENTS,APPLY$-USERFN,QUOTE,HONS-GET,OR,IF,SPECIAL-NAME,CAR,EQ,ACC,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXT-ANC-ATTACHMENTS-VALID-P">ext-anc-attachments-valid-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ext-anc-attachments-valid-p" data-sym="EXT-ANC-ATTACHMENTS-VALID-P" title="(defun ext-anc-attachments-valid-p
       (fns ext-anc-attachments special-name wrld acc)
  (cond ((endp fns) acc)
        ((eq (car fns) special-name)
         (if (or (hons-get &#39;apply$-userfn ext-anc-attachments)
...">ext-anc-attachments-valid-p</a>
  (fns ext-anc-attachments special-name wrld acc)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) acc)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car fns) special-name) (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (hons-get 'apply$-userfn ext-anc-attachments)
          (hons-get 'badge-userfn ext-anc-attachments))
        special-name
        (<a class="sym-link local-def" href="#def-ext-anc-attachments-valid-p" data-sym="EXT-ANC-ATTACHMENTS-VALID-P" title="(defun ext-anc-attachments-valid-p
       (fns ext-anc-attachments special-name wrld acc)
  (cond ((endp fns) acc)
        ((eq (car fns) special-name)
         (if (or (hons-get &#39;apply$-userfn ext-anc-attachments)
...">ext-anc-attachments-valid-p</a> (cdr fns)
          ext-anc-attachments
          special-name
          wrld
          acc)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((f (car fns)) (alist (cdr (hons-get f ext-anc-attachments)))
          (missing (<a class="sym-link local-def" href="#def-ext-anc-attachment-missing" data-sym="EXT-ANC-ATTACHMENT-MISSING" title="(defun ext-anc-attachment-missing (alist wrld)
  (cond ((endp alist) nil)
        ((eq (cdar alist) (cdr (attachment-pair (caar alist) wrld)))
         (ext-anc-attachment-missing (cdr alist) wrld))
        (t (caar alist))))">ext-anc-attachment-missing</a> alist wrld)))
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> missing
          (<a class="sym-link local-def" href="#def-ext-anc-attachments-valid-p" data-sym="EXT-ANC-ATTACHMENTS-VALID-P" title="(defun ext-anc-attachments-valid-p
       (fns ext-anc-attachments special-name wrld acc)
  (cond ((endp fns) acc)
        ((eq (car fns) special-name)
         (if (or (hons-get &#39;apply$-userfn ext-anc-attachments)
...">ext-anc-attachments-valid-p</a> (cdr fns)
            ext-anc-attachments
            special-name
            wrld
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> acc
              (<a class="sym-link local-def" href="#def-ext-anc-attachments-valid-p-1" data-sym="EXT-ANC-ATTACHMENTS-VALID-P-1" title="(defun ext-anc-attachments-valid-p-1 (fns alist wrld)
  (cond ((endp fns) t)
        ((or (assoc-eq (car fns) alist) (not (attachment-pair (car fns) wrld)))
         (ext-anc-attachments-valid-p-1 (cdr fns) alist wrld))
        (t nil)))">ext-anc-attachments-valid-p-1</a> (<a class="sym-link system" href="defthm.html#def-siblings" data-sym="SIBLINGS">siblings</a> f wrld) alist wrld))))))))</pre>
  </div>

<div class="form-block function" id="def-regenerate-tau-database-fn0" data-defines="REGENERATE-TAU-DATABASE-FN0" data-references="HARD,ER,ACCESS-EVENT-TUPLE-NAMEX,TAU-VISIT-EVENT,WRLD1,ER-LET*,T,EXIT-BOOT-STRAP-MODE,CDDR,ACCESS-EVENT-TUPLE-TYPE,GLOBAL-VALUE,EVENT-LANDMARK,AND,TAU-VISIT-FUNCTION-INTRODUCTION,CDR,FORMALS,QUOTE,CAR,CADR,EQ,VALUE,ENDP,COND,STATE,WRLD,CTX,TRIPS,ENS,AUTO-MODEP,USER-AUTO-MODEP,DEFUN" data-used-by="REGENERATE-TAU-DATABASE-FN1" data-part-name="REGENERATE-TAU-DATABASE-FN0" data-part-args="STATE,WRLD,CTX,TRIPS,ENS,AUTO-MODEP,USER-AUTO-MODEP" data-part-body="HARD,ER,ACCESS-EVENT-TUPLE-NAMEX,TAU-VISIT-EVENT,WRLD1,ER-LET*,T,EXIT-BOOT-STRAP-MODE,CDDR,ACCESS-EVENT-TUPLE-TYPE,GLOBAL-VALUE,EVENT-LANDMARK,AND,STATE,TAU-VISIT-FUNCTION-INTRODUCTION,CTX,CDR,ENS,AUTO-MODEP,USER-AUTO-MODEP,REGENERATE-TAU-DATABASE-FN0,FORMALS,QUOTE,CAR,CADR,EQ,WRLD,VALUE,TRIPS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REGENERATE-TAU-DATABASE-FN0">regenerate-tau-database-fn0</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-regenerate-tau-database-fn0" data-sym="REGENERATE-TAU-DATABASE-FN0" title="(defun regenerate-tau-database-fn0
       (user-auto-modep auto-modep ens trips ctx wrld state)
  (cond ((endp trips) (value wrld))
        ((eq (cadr (car trips)) &#39;formals)
         (regenerate-tau-database-fn0 user-auto-modep auto-modep ens
...">regenerate-tau-database-fn0</a>
  (user-auto-modep auto-modep ens trips ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> trips) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> wrld))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car trips)) '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) (<a class="sym-link local-def" href="#def-regenerate-tau-database-fn0" data-sym="REGENERATE-TAU-DATABASE-FN0" title="(defun regenerate-tau-database-fn0
       (user-auto-modep auto-modep ens trips ctx wrld state)
  (cond ((endp trips) (value wrld))
        ((eq (cadr (car trips)) &#39;formals)
         (regenerate-tau-database-fn0 user-auto-modep auto-modep ens
...">regenerate-tau-database-fn0</a> user-auto-modep
        auto-modep
        ens
        (cdr trips)
        ctx
        (tau-visit-function-introduction (car (car trips)) wrld)
        state))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car trips)) 'event-landmark)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car trips)) 'global-value)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (access-event-tuple-type (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car trips)))
           'exit-boot-strap-mode) (<a class="sym-link local-def" href="#def-regenerate-tau-database-fn0" data-sym="REGENERATE-TAU-DATABASE-FN0" title="(defun regenerate-tau-database-fn0
       (user-auto-modep auto-modep ens trips ctx wrld state)
  (cond ((endp trips) (value wrld))
        ((eq (cadr (car trips)) &#39;formals)
         (regenerate-tau-database-fn0 user-auto-modep auto-modep ens
...">regenerate-tau-database-fn0</a> user-auto-modep
            user-auto-modep
            ens
            (cdr trips)
            ctx
            wrld
            state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld1 (tau-visit-event nil
                 (access-event-tuple-type (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car trips)))
                 (access-event-tuple-namex (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car trips)))
                 auto-modep
                 ens
                 ctx
                 wrld
                 state)))
            (<a class="sym-link local-def" href="#def-regenerate-tau-database-fn0" data-sym="REGENERATE-TAU-DATABASE-FN0" title="(defun regenerate-tau-database-fn0
       (user-auto-modep auto-modep ens trips ctx wrld state)
  (cond ((endp trips) (value wrld))
        ((eq (cadr (car trips)) &#39;formals)
         (regenerate-tau-database-fn0 user-auto-modep auto-modep ens
...">regenerate-tau-database-fn0</a> user-auto-modep
              auto-modep
              ens
              (cdr trips)
              ctx
              wrld1
              state)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-regenerate-tau-database-fn0" data-sym="REGENERATE-TAU-DATABASE-FN0" title="(defun regenerate-tau-database-fn0
       (user-auto-modep auto-modep ens trips ctx wrld state)
  (cond ((endp trips) (value wrld))
        ((eq (cadr (car trips)) &#39;formals)
         (regenerate-tau-database-fn0 user-auto-modep auto-modep ens
...">regenerate-tau-database-fn0</a>
          <span class="string">"Collect-tau-relevant-triples collected an unrecognized ~
                 property!  We expected to see fn FORMALS and EVENT-LANDMARK ~
                 GLOBAL-VALUE triples, but we see the triple ~x0."</span>
          (car trips))))))</pre>
  </div>

<div class="form-block function" id="def-regenerate-tau-database-fn1" data-defines="REGENERATE-TAU-DATABASE-FN1" data-references="INITIALIZE-TAU-GLOBALS,*PRIMITIVE-MONADIC-BOOLEANS*,INITIALIZE-TAU-PREDS,COLLECT-TAU-RELEVANT-TRIPLES,REGENERATE-TAU-DATABASE-FN0,STATE,WRLD,CTX,ENS,USER-AUTO-MODEP,BOOT-STRAP-AUTO-MODEP,DEFUN" data-used-by="REGENERATE-TAU-DATABASE-FN" data-part-name="REGENERATE-TAU-DATABASE-FN1" data-part-args="STATE,WRLD,CTX,ENS,USER-AUTO-MODEP,BOOT-STRAP-AUTO-MODEP" data-part-body="STATE,INITIALIZE-TAU-GLOBALS,*PRIMITIVE-MONADIC-BOOLEANS*,INITIALIZE-TAU-PREDS,CTX,WRLD,COLLECT-TAU-RELEVANT-TRIPLES,ENS,BOOT-STRAP-AUTO-MODEP,USER-AUTO-MODEP,REGENERATE-TAU-DATABASE-FN0" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REGENERATE-TAU-DATABASE-FN1">regenerate-tau-database-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-regenerate-tau-database-fn1" data-sym="REGENERATE-TAU-DATABASE-FN1" title="(defun regenerate-tau-database-fn1
       (boot-strap-auto-modep user-auto-modep ens ctx wrld state)
  (regenerate-tau-database-fn0 user-auto-modep boot-strap-auto-modep ens
                               (collect-tau-relevant-triples wrld nil) ctx
                               (initialize-tau-preds
...">regenerate-tau-database-fn1</a>
  (boot-strap-auto-modep user-auto-modep ens ctx wrld state)
  (<a class="sym-link local-def" href="#def-regenerate-tau-database-fn0" data-sym="REGENERATE-TAU-DATABASE-FN0" title="(defun regenerate-tau-database-fn0
       (user-auto-modep auto-modep ens trips ctx wrld state)
  (cond ((endp trips) (value wrld))
        ((eq (cadr (car trips)) &#39;formals)
         (regenerate-tau-database-fn0 user-auto-modep auto-modep ens
...">regenerate-tau-database-fn0</a> user-auto-modep
    boot-strap-auto-modep
    ens
    (collect-tau-relevant-triples wrld nil)
    ctx
    (initialize-tau-preds <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-monadic-booleans_2A" data-sym="*PRIMITIVE-MONADIC-BOOLEANS*">*primitive-monadic-booleans*</a>
      (initialize-tau-globals wrld))
    state))</pre>
  </div>

<div class="form-block function" id="def-regenerate-tau-database-fn" data-defines="REGENERATE-TAU-DATABASE-FN" data-references="VALUE,T,INSTALL-EVENT,VAL,CTX,REGENERATE-TAU-DATABASE-FN1,WRLD1,ER-LET*,ENS,TAU-AUTO-MODEP,USER-AUTO-MODEP,*TAU-STATUS-BOOT-STRAP-SETTINGS*,CDAR,BOOT-STRAP-AUTO-MODEP,REGENERATE-TAU-DATABASE,QUOTE,OR,W,WRLD,LET*,WITH-CTX-SUMMARIZED,WHEN-LOGIC,EVENT-FORM,STATE,DEFUN" data-used-by="PRIMORDIAL-WORLD-GLOBALS,*INITIAL-EVENT-DEFMACROS*" data-part-name="REGENERATE-TAU-DATABASE-FN" data-part-args="EVENT-FORM,STATE" data-part-body="VALUE,T,INSTALL-EVENT,VAL,CTX,REGENERATE-TAU-DATABASE-FN1,WRLD1,ER-LET*,ENS,TAU-AUTO-MODEP,USER-AUTO-MODEP,*TAU-STATUS-BOOT-STRAP-SETTINGS*,CDAR,BOOT-STRAP-AUTO-MODEP,REGENERATE-TAU-DATABASE,QUOTE,OR,EVENT-FORM,STATE,W,WRLD,LET*,WITH-CTX-SUMMARIZED,WHEN-LOGIC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REGENERATE-TAU-DATABASE-FN">regenerate-tau-database-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-regenerate-tau-database-fn" data-sym="REGENERATE-TAU-DATABASE-FN" title="(defun regenerate-tau-database-fn (state event-form)
  (when-logic &quot;REGENERATE-TAU-DATABASE&quot;
              (with-ctx-summarized &quot;( REGENERATE-TAU-DATABASE)&quot;
                                   (let* ((wrld (w state))
                                          (event-form
...">regenerate-tau-database-fn</a>
  (state event-form)
  (<a class="sym-link system" href="axioms.html#def-when-logic" data-sym="WHEN-LOGIC">when-logic</a> <span class="string">"REGENERATE-TAU-DATABASE"</span>
    (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> <span class="string">"( REGENERATE-TAU-DATABASE)"</span>
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (event-form (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-form '(<a class="sym-link system" href="axioms.html#def-regenerate-tau-database" data-sym="REGENERATE-TAU-DATABASE">regenerate-tau-database</a>)))
          (boot-strap-auto-modep (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> <a class="sym-link system" href="axioms.html#def-_2Atau-status-boot-strap-settings_2A" data-sym="*TAU-STATUS-BOOT-STRAP-SETTINGS*">*tau-status-boot-strap-settings*</a>))
          (user-auto-modep (<a class="sym-link system" href="axioms.html#def-tau-auto-modep" data-sym="TAU-AUTO-MODEP">tau-auto-modep</a> wrld))
          (ens (ens state)))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((wrld1 (<a class="sym-link local-def" href="#def-regenerate-tau-database-fn1" data-sym="REGENERATE-TAU-DATABASE-FN1" title="(defun regenerate-tau-database-fn1
       (boot-strap-auto-modep user-auto-modep ens ctx wrld state)
  (regenerate-tau-database-fn0 user-auto-modep boot-strap-auto-modep ens
                               (collect-tau-relevant-triples wrld nil) ctx
                               (initialize-tau-preds
...">regenerate-tau-database-fn1</a> boot-strap-auto-modep
               user-auto-modep
               ens
               ctx
               wrld
               state)) (val (<a class="sym-link system" href="history-management.html#def-install-event" data-sym="INSTALL-EVENT">install-event</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                event-form
                '<a class="sym-link system" href="axioms.html#def-regenerate-tau-database" data-sym="REGENERATE-TAU-DATABASE">regenerate-tau-database</a>
                <span class="number">0</span>
                nil
                nil
                <span class="keyword">:protect</span> nil
                wrld1
                state)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))))</pre>
  </div>

<div class="form-block function" id="def-rational-to-decimal-string" data-defines="RATIONAL-TO-DECIMAL-STRING" data-references="VALUE,CLOSE-OUTPUT-CHANNEL,GET-OUTPUT-STREAM-STRING$,STR,ER-LET*,PRINT-RATIONAL-AS-DECIMAL,PPROGN,OPEN-OUTPUT-CHANNEL,CHANNEL,MV-LET,RATIONALP,XARGS,DECLARE,STATE,X,DEFUN" data-part-name="RATIONAL-TO-DECIMAL-STRING" data-part-args="STATE,X" data-part-declare="X,RATIONALP,STATE,XARGS,DECLARE" data-part-body="VALUE,CLOSE-OUTPUT-CHANNEL,GET-OUTPUT-STREAM-STRING$,STR,ER-LET*,X,PRINT-RATIONAL-AS-DECIMAL,PPROGN,OPEN-OUTPUT-CHANNEL,STATE,CHANNEL,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RATIONAL-TO-DECIMAL-STRING">rational-to-decimal-string</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-rational-to-decimal-string" data-sym="RATIONAL-TO-DECIMAL-STRING" title="(defun rational-to-decimal-string (x state)
  (declare (xargs :mode :program :stobjs state :guard (rationalp x)))
  (mv-let (channel state) (open-output-channel :string :character state)
          (pprogn (print-rational-as-decimal x channel state)
                  (er-let*
...">rational-to-decimal-string</a>
  (x state)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state <span class="keyword">:guard</span> (rationalp x)))
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (channel state)
    (<a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> <span class="keyword">:string</span> <span class="keyword">:character</span> state)
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-print-rational-as-decimal" data-sym="PRINT-RATIONAL-AS-DECIMAL">print-rational-as-decimal</a> x channel state)
      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((str (<a class="sym-link system" href="axioms.html#def-get-output-stream-string_24" data-sym="GET-OUTPUT-STREAM-STRING$">get-output-stream-string$</a> channel state nil)))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> channel state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> str))))))</pre>
  </div>

<div class="form-block macro" id="def-defund" data-defines="DEFUND" data-references="T,QUOTE,VALUE-TRIPLE,DEFUN,PROGN,WITH-OUTPUT,QUASIQUOTE,CADR,SYMBOL-LISTP,CAR,SYMBOLP,TRUE-LISTP,AND,XARGS,DECLARE,DEF,&REST,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFUND">defund</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defund" data-sym="DEFUND" title="(defmacro defund (&amp;rest def)
  (declare
   (xargs :guard
    (and (true-listp def) (symbolp (car def)) (symbol-listp (cadr def)))))
  `(with-output :stack :push :off :all
...">defund</a>
  (&amp;rest def)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> def)
        (symbolp (car def))
        (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def)))))
  `(<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:stack</span> <span class="keyword">:push</span> <span class="keyword">:off</span> <span class="keyword">:all</span> (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:stack</span> <span class="keyword">:pop</span> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> ,@DEF))
      ,@(AND (NOT (PROGRAM-DECLARED-P DEF))
       `((WITH-OUTPUT :STACK :POP :OFF SUMMARY
                      (IN-THEORY (DISABLE ,(CAR DEF))))))
      (<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> ',(EVENT-KEYWORD-NAME &#39;DEFUND (CAR DEF))
        <span class="keyword">:on-skip-proofs</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block other" id="form-759" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a> magic-ev-fncall (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> state <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>))</pre>
  </div>

<div class="form-block function" id="def-make-event-ctx" data-defines="MAKE-EVENT-CTX" data-references="CDDR,IF,CADR,TILDE-@-ABBREVIATE-OBJECT-PHRASE,MSG,EVENT-FORM,DEFUN" data-used-by="MAKE-EVENT-FN" data-part-name="MAKE-EVENT-CTX" data-part-args="EVENT-FORM" data-part-body="CDDR,IF,EVENT-FORM,CADR,TILDE-@-ABBREVIATE-OBJECT-PHRASE,MSG" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-EVENT-CTX">make-event-ctx</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-event-ctx" data-sym="MAKE-EVENT-CTX" title="(defun make-event-ctx (event-form)
  (msg &quot;( MAKE-EVENT ~@0~@1)&quot;
       (tilde-@-abbreviate-object-phrase (cadr event-form))
       (if (cddr event-form)
           &quot; ...&quot;">make-event-ctx</a>
  (event-form)
  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"( MAKE-EVENT ~@0~@1)"</span>
    (<a class="sym-link local-def" href="#def-tilde-_40-abbreviate-object-phrase" data-sym="TILDE-@-ABBREVIATE-OBJECT-PHRASE" title="(defun tilde-@-abbreviate-object-phrase (x)
  (cond ((atom x) (msg &quot;~x0&quot; x))
        ((symbol-listp x)
         (cond ((&lt; (length x) 3) (msg &quot;~x0&quot; x))
               (t (msg &quot;(~x0 ... ~x1)&quot; (car x) (car (last x))))))
...">tilde-@-abbreviate-object-phrase</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> event-form))
    (if (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> event-form)
      <span class="string">" ..."</span>
      <span class="string">""</span>)))</pre>
  </div>

<div class="form-block macro" id="def-with-hcomp-bindings-protected-eval" data-defines="WITH-HCOMP-BINDINGS-PROTECTED-EVAL" data-references="FORM,DEFMACRO" data-used-by="PROTECTED-EVAL" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITH-HCOMP-BINDINGS-PROTECTED-EVAL">with-hcomp-bindings-protected-eval</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-with-hcomp-bindings-protected-eval" data-sym="WITH-HCOMP-BINDINGS-PROTECTED-EVAL" title="(defmacro with-hcomp-bindings-protected-eval (form) form)">with-hcomp-bindings-protected-eval</a> (form) form)</pre>
  </div>

<div class="form-block function" id="def-protected-eval" data-defines="PROTECTED-EVAL" data-references="CADR,SET-W!,PPROGN,MSG,T,TILDE-@P,STRINGP,SILENT-ERROR,PRETTYIFY-STOBJS-OUT,SOFT,ER,CDDDR,MEMBER-EQ,CADDR,EQ,NOT,NULL,OR,LIST*,VALUE,COND,EQUAL,SAFEP,CDR,VALS,CAR,STOBJS-OUT,TTAGS-SEEN,QUOTE,GLOBAL-VAL,NEW-TTAGS-SEEN,KNOWN-PACKAGE-ALIST,NEW-KPA,LET*,TRANS-EVAL-DEFAULT-WARNING,WITH-HCOMP-BINDINGS-PROTECTED-EVAL,RESULT,ER-LET*,PROTECT-SYSTEM-STATE-GLOBALS,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,IN-LOCAL-FLG,STATE-GLOBAL-LET*,W,ORIGINAL-WRLD,LET,AOK,STATE,CTX,ON-BEHALF-OF,FORM,DEFUN" data-used-by="TRANS*-FN1,MAKE-EVENT-FN" data-part-name="PROTECTED-EVAL" data-part-args="AOK,STATE,CTX,ON-BEHALF-OF,FORM" data-part-body="CADR,SET-W!,PPROGN,MSG,T,TILDE-@P,STRINGP,SILENT-ERROR,ON-BEHALF-OF,PRETTYIFY-STOBJS-OUT,SOFT,ER,CDDDR,MEMBER-EQ,CADDR,EQ,NOT,NULL,OR,LIST*,VALUE,COND,EQUAL,SAFEP,CDR,VALS,CAR,STOBJS-OUT,TTAGS-SEEN,QUOTE,GLOBAL-VAL,NEW-TTAGS-SEEN,KNOWN-PACKAGE-ALIST,NEW-KPA,LET*,AOK,CTX,FORM,TRANS-EVAL-DEFAULT-WARNING,WITH-HCOMP-BINDINGS-PROTECTED-EVAL,RESULT,ER-LET*,PROTECT-SYSTEM-STATE-GLOBALS,LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS,IN-LOCAL-FLG,STATE-GLOBAL-LET*,STATE,W,ORIGINAL-WRLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROTECTED-EVAL">protected-eval</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-protected-eval" data-sym="PROTECTED-EVAL" title="(defun protected-eval (form on-behalf-of ctx state aok)
  (let ((original-wrld (w state)))
    (state-global-let*
     ((in-local-flg nil) (ld-always-skip-top-level-locals nil))
     (protect-system-state-globals
...">protected-eval</a>
  (form on-behalf-of ctx state aok)
  (let ((original-wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((in-local-flg nil) (<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a> nil))
      (<a class="sym-link system" href="history-management.html#def-protect-system-state-globals" data-sym="PROTECT-SYSTEM-STATE-GLOBALS">protect-system-state-globals</a> (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((result (<a class="sym-link local-def" href="#def-with-hcomp-bindings-protected-eval" data-sym="WITH-HCOMP-BINDINGS-PROTECTED-EVAL" title="(defmacro with-hcomp-bindings-protected-eval (form) form)">with-hcomp-bindings-protected-eval</a> (trans-eval-default-warning form ctx state aok))))
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-kpa (<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> state)) (new-ttags-seen (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
              (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (car result))
              (vals (cdr result))
              (safep (equal <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> '(nil))))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (safep (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> vals new-kpa new-ttags-seen)))
              ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) 'state))
                 (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> nil (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"The form ~x0 was expected to return a result that is ~
                      either a single ordinary value or else is a tuple (mv ~
                      erp val state stobj1 stobj2 ... stobjk) for some k &gt;= ~
                      0.  But the shape of that result was ~x1."</span>
                  form
                  (prettyify-stobjs-out <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))
              ((car vals) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> on-behalf-of <span class="keyword">:quiet!</span>) (silent-error state))
                  ((stringp (car vals)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx (car vals)))
                  ((<a class="sym-link system" href="history-management.html#def-tilde-_40p" data-sym="TILDE-@P">tilde-@p</a> (car vals)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@0"</span> (car vals)))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> on-behalf-of <span class="keyword">:quiet</span>) (silent-error state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"Error in MAKE-EVENT ~@0from expansion of:~|  ~y1"</span>
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (on-behalf-of (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"on behalf of~|  ~y0~|"</span> on-behalf-of))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))
                      form))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w_21" data-sym="SET-W!">set-w!</a> original-wrld state)
                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> vals) new-kpa new-ttags-seen)))))))))))</pre>
  </div>

<div class="form-block function" id="def-make-event-debug-pre" data-defines="MAKE-EVENT-DEBUG-PRE" data-references="PROOFS-CO,TERM-EVISC-TUPLE,MSG,QUOTE,MEMBER-EQ,NOT,AND,IF,CONS,LIST,FMS,STATE,ON-BEHALF-OF,FORM,DEPTH,DEFUN" data-used-by="MAKE-EVENT-FN" data-part-name="MAKE-EVENT-DEBUG-PRE" data-part-args="STATE,ON-BEHALF-OF,FORM,DEPTH" data-part-body="PROOFS-CO,FORM,STATE,TERM-EVISC-TUPLE,MSG,QUOTE,MEMBER-EQ,NOT,ON-BEHALF-OF,AND,IF,DEPTH,CONS,LIST,FMS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-EVENT-DEBUG-PRE">make-event-debug-pre</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-event-debug-pre" data-sym="MAKE-EVENT-DEBUG-PRE" title="(defun make-event-debug-pre (depth form on-behalf-of state)
  (fms &quot;~x0&gt; Expanding for MAKE-EVENT~@1~|  ~y2~|&quot;
       (list (cons #\0 depth)
             (cons #\1
                   (if (and on-behalf-of
...">make-event-debug-pre</a>
  (depth form on-behalf-of state)
  (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~x0&gt; Expanding for MAKE-EVENT~@1~|  ~y2~|"</span>
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 depth)
      (cons #\1
        (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> on-behalf-of
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> on-behalf-of '(<span class="keyword">:quiet</span> <span class="keyword">:quiet!</span>))))
          (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" on behalf of~|  ~Y01:"</span>
            on-behalf-of
            (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state))
          <span class="string">":"</span>))
      (cons #\2 form))
    (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
    state
    nil))</pre>
  </div>

<div class="form-block function" id="def-make-event-debug-post" data-defines="MAKE-EVENT-DEBUG-POST" data-references="PROOFS-CO,TERM-EVISC-TUPLE,CONS,LIST,FMS,STATE,EXPANSION0,DEBUG-DEPTH,DEFUN" data-used-by="MAKE-EVENT-FN" data-part-name="MAKE-EVENT-DEBUG-POST" data-part-args="STATE,EXPANSION0,DEBUG-DEPTH" data-part-body="PROOFS-CO,STATE,TERM-EVISC-TUPLE,EXPANSION0,DEBUG-DEPTH,CONS,LIST,FMS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-EVENT-DEBUG-POST">make-event-debug-post</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-event-debug-post" data-sym="MAKE-EVENT-DEBUG-POST" title="(defun make-event-debug-post (debug-depth expansion0 state)
  (fms &quot;&lt;~x0 Returning MAKE-EVENT expansion:~|  ~Y12~|&quot;
       (list (cons #\0 debug-depth) (cons #\1 expansion0)
             (cons #\2 (term-evisc-tuple nil state)))
       (proofs-co state) state nil))">make-event-debug-post</a>
  (debug-depth expansion0 state)
  (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"&lt;~x0 Returning MAKE-EVENT expansion:~|  ~Y12~|"</span>
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 debug-depth)
      (cons #\1 expansion0)
      (cons #\2 (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state)))
    (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
    state
    nil))</pre>
  </div>

<div class="form-block other" id="form-765" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defstub" data-sym="DEFSTUB">defstub</a> always-do-proofs-during-make-event-expansion nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-766" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> always-do-proofs-during-make-event-expansion
  <a class="sym-link system" href="axioms.html#def-constant-nil-function-arity-0" data-sym="CONSTANT-NIL-FUNCTION-ARITY-0">constant-nil-function-arity-0</a>)</pre>
  </div>

<div class="form-block macro" id="def-do-proofs_3F" data-defines="DO-PROOFS?" data-references="LD-SKIP-PROOFSP,STATE-GLOBAL-LET*,IF,QUASIQUOTE,FORM,USE-ALWAYS-DO-PROOFS,DO-PROOFSP,DEFMACRO" data-used-by="MAKE-EVENT-FN,MAKE-EVENT-FN2" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DO-PROOFS?">do-proofs?</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-do-proofs_3F" data-sym="DO-PROOFS?" title="(defmacro do-proofs? (do-proofsp use-always-do-proofs form)
  `(if ,(if use-always-do-proofs
            `(or ,do-proofsp
                 (let ((flg (always-do-proofs-during-make-event-expansion)))
                   (and flg
...">do-proofs?</a>
  (do-proofsp use-always-do-proofs form)
  `(if ,(IF USE-ALWAYS-DO-PROOFS
     `(OR ,DO-PROOFSP
          (LET ((FLG (ALWAYS-DO-PROOFS-DURING-MAKE-EVENT-EXPANSION)))
            (AND FLG
                 (OR (EQ FLG :ALL)
                     (NOT (EQ (LD-SKIP-PROOFSP STATE) &#39;INCLUDE-BOOK))))))
     DO-PROOFSP)
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> nil)) ,FORM)
    ,FORM))</pre>
  </div>

<div class="form-block function" id="def-make-event-fn2" data-defines="MAKE-EVENT-FN2" data-references="CADR,LIST*,CBD,MAKE-INCLUDE-BOOKS-ABSOLUTE,BOOT-STRAP-FLG,IF,EXPANSION1,SILENT-ERROR,CAR,COND,CDR,RAW-RESULT,LET,TRANS-EVAL-DEFAULT-WARNING,STOBJS-OUT-AND-RAW-RESULT,*LOCAL-VALUE-TRIPLE-ELIDED*,OR,VALUE,EXPANSION1B,IN-LOCAL-FLG,F-GET-GLOBAL,PRIMITIVE-EVENT-MACROS,CHK-EMBEDDED-EVENT-FORM,T,DO-PROOFS?,EXPANSION1A,ER-LET*,&,LD-SKIP-PROOFSP,MV,X,QUOTE,CASE-MATCH,DO-PROOFSP,MV-LET,STATE,CTX,WRLD,CHECK-EXPANSION,IN-ENCAPSULATEP,WHOLE-FORM,EXPANSION0,DEFUN" data-used-by="MAKE-EVENT-FN1,MAKE-EVENT-FN2-LST" data-part-name="MAKE-EVENT-FN2" data-part-args="STATE,CTX,WRLD,CHECK-EXPANSION,IN-ENCAPSULATEP,WHOLE-FORM,EXPANSION0" data-part-body="CADR,LIST*,CBD,MAKE-INCLUDE-BOOKS-ABSOLUTE,BOOT-STRAP-FLG,IF,EXPANSION1,SILENT-ERROR,CAR,COND,CDR,RAW-RESULT,LET,TRANS-EVAL-DEFAULT-WARNING,STOBJS-OUT-AND-RAW-RESULT,*LOCAL-VALUE-TRIPLE-ELIDED*,OR,VALUE,EXPANSION1B,IN-ENCAPSULATEP,IN-LOCAL-FLG,F-GET-GLOBAL,PRIMITIVE-EVENT-MACROS,CTX,WRLD,WHOLE-FORM,CHK-EMBEDDED-EVENT-FORM,T,CHECK-EXPANSION,DO-PROOFS?,EXPANSION1A,ER-LET*,&,STATE,LD-SKIP-PROOFSP,MV,X,QUOTE,CASE-MATCH,EXPANSION0,DO-PROOFSP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-EVENT-FN2">make-event-fn2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-event-fn2" data-sym="MAKE-EVENT-FN2" title="(defun make-event-fn2
       (expansion0 whole-form in-encapsulatep check-expansion wrld ctx state)
  (mv-let (do-proofsp expansion0)
          (case-match expansion0
                      ((&#39;:do-proofs x) (mv (ld-skip-proofsp state) x))
...">make-event-fn2</a>
  (expansion0 whole-form
    <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
    check-expansion
    wrld
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (do-proofsp expansion0)
    (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> expansion0
      (('<span class="keyword">:do-proofs</span> x) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) x))
      (&amp; (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil expansion0)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((expansion1a (<a class="sym-link local-def" href="#def-do-proofs_3F" data-sym="DO-PROOFS?" title="(defmacro do-proofs? (do-proofsp use-always-do-proofs form)
  `(if ,(if use-always-do-proofs
            `(or ,do-proofsp
                 (let ((flg (always-do-proofs-during-make-event-expansion)))
                   (and flg
...">do-proofs?</a> check-expansion
           <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
           (<a class="sym-link local-def" href="#def-chk-embedded-event-form" data-sym="CHK-EMBEDDED-EVENT-FORM" title="(defun chk-embedded-event-form
       (form orig-form wrld ctx state names in-local-flg in-encapsulatep
        make-event-chk)
  (let* ((er-str
          &quot;The form ~x0 is not an embedded event form~@1.  See :DOC ~
...">chk-embedded-event-form</a> expansion0
             whole-form
             wrld
             ctx
             state
             (primitive-event-macros)
             (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state)
             <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
             nil))) (expansion1b (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> expansion1a <a class="sym-link local-def" href="#def-_2Alocal-value-triple-elided_2A" data-sym="*LOCAL-VALUE-TRIPLE-ELIDED*" title="(defconst *local-value-triple-elided* &#39;(local (value-triple :elided)))">*local-value-triple-elided*</a>)))
        (stobjs-out-and-raw-result (<a class="sym-link local-def" href="#def-do-proofs_3F" data-sym="DO-PROOFS?" title="(defmacro do-proofs? (do-proofsp use-always-do-proofs form)
  `(if ,(if use-always-do-proofs
            `(or ,do-proofsp
                 (let ((flg (always-do-proofs-during-make-event-expansion)))
                   (and flg
...">do-proofs?</a> do-proofsp
            nil
            (trans-eval-default-warning expansion1b ctx state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
      (let ((raw-result (cdr stobjs-out-and-raw-result)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((car raw-result) (silent-error state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((expansion1 (if (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state)
                   expansion1b
                   (<a class="sym-link local-def" href="#def-make-include-books-absolute" data-sym="MAKE-INCLUDE-BOOKS-ABSOLUTE" title="(defun make-include-books-absolute (form cbd dir names localp ctx state)
  (mv-let (changedp new-form)
          (make-include-books-absolute-1 form cbd dir names localp ctx state)
          (if changedp
              new-form">make-include-books-absolute</a> expansion1b
                     (<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>)
                     nil
                     (primitive-event-macros)
                     nil
                     ctx
                     state))))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> expansion1
                  (car stobjs-out-and-raw-result)
                  (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> raw-result))))))))))</pre>
  </div>

<div class="form-block function" id="def-make-event-fn2-lst" data-defines="MAKE-EVENT-FN2-LST" data-references="VALUE,CDR,MAKE-EVENT-FN2,VAL,ERP,MV-LET,PROOFS-CO,ABBREV-EVISC-TUPLE,CAR,CONS,LIST,FMS,MAKE-EVENT-DEBUG,F-GET-GLOBAL,PPROGN,SOFT,ER,T,SILENT-ERROR,QUOTE,MEMBER-EQ,ATOM,COND,STATE,CTX,WRLD,ON-BEHALF-OF,CHECK-EXPANSION,IN-ENCAPSULATEP,WHOLE-FORM,EXPANSION-LST,DEFUN" data-used-by="MAKE-EVENT-FN1" data-part-name="MAKE-EVENT-FN2-LST" data-part-args="STATE,CTX,WRLD,ON-BEHALF-OF,CHECK-EXPANSION,IN-ENCAPSULATEP,WHOLE-FORM,EXPANSION-LST" data-part-body="VALUE,CDR,MAKE-EVENT-FN2-LST,WRLD,CHECK-EXPANSION,IN-ENCAPSULATEP,WHOLE-FORM,MAKE-EVENT-FN2,VAL,ERP,MV-LET,PROOFS-CO,ABBREV-EVISC-TUPLE,CAR,CONS,LIST,FMS,MAKE-EVENT-DEBUG,F-GET-GLOBAL,PPROGN,CTX,SOFT,ER,T,STATE,SILENT-ERROR,QUOTE,ON-BEHALF-OF,MEMBER-EQ,EXPANSION-LST,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-EVENT-FN2-LST">make-event-fn2-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-event-fn2-lst" data-sym="MAKE-EVENT-FN2-LST" title="(defun make-event-fn2-lst
       (expansion-lst whole-form in-encapsulatep check-expansion on-behalf-of
        wrld ctx state)
  (cond
   ((atom expansion-lst)
...">make-event-fn2-lst</a>
  (expansion-lst whole-form
    <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
    check-expansion
    on-behalf-of
    wrld
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> expansion-lst) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> on-behalf-of '(<span class="keyword">:quiet</span> <span class="keyword">:quiet!</span>)) (silent-error state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"Evaluation failed for all expansions."</span>))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'make-event-debug state) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Attempting evaluation of next expansion:~|~Y01"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (car expansion-lst))
                (cons #\1 (<a class="sym-link system" href="basis-a.html#def-abbrev-evisc-tuple" data-sym="ABBREV-EVISC-TUPLE">abbrev-evisc-tuple</a> state)))
              (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
              state
              nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          (<a class="sym-link local-def" href="#def-make-event-fn2" data-sym="MAKE-EVENT-FN2" title="(defun make-event-fn2
       (expansion0 whole-form in-encapsulatep check-expansion wrld ctx state)
  (mv-let (do-proofsp expansion0)
          (case-match expansion0
                      ((&#39;:do-proofs x) (mv (ld-skip-proofsp state) x))
...">make-event-fn2</a> (car expansion-lst)
            whole-form
            <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
            check-expansion
            wrld
            ctx
            state)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link local-def" href="#def-make-event-fn2-lst" data-sym="MAKE-EVENT-FN2-LST" title="(defun make-event-fn2-lst
       (expansion-lst whole-form in-encapsulatep check-expansion on-behalf-of
        wrld ctx state)
  (cond
   ((atom expansion-lst)
...">make-event-fn2-lst</a> (cdr expansion-lst)
                whole-form
                <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
                check-expansion
                on-behalf-of
                wrld
                ctx
                state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))))))))</pre>
  </div>

<div class="form-block function" id="def-make-event-fn1" data-defines="MAKE-EVENT-FN1" data-references="MAKE-EVENT-FN2,T,CDR,MAKE-EVENT-FN2-LST,CERT-DATA,STATE-GLOBAL-LET*,CAR,EQ,CONSP,AND,COND,STATE,CTX,WRLD,ON-BEHALF-OF,CHECK-EXPANSION,IN-ENCAPSULATEP,WHOLE-FORM,EXPANSION0,DEFUN" data-used-by="MAKE-EVENT-FN" data-part-name="MAKE-EVENT-FN1" data-part-args="STATE,CTX,WRLD,ON-BEHALF-OF,CHECK-EXPANSION,IN-ENCAPSULATEP,WHOLE-FORM,EXPANSION0" data-part-body="MAKE-EVENT-FN2,T,STATE,CTX,WRLD,ON-BEHALF-OF,CHECK-EXPANSION,IN-ENCAPSULATEP,WHOLE-FORM,CDR,MAKE-EVENT-FN2-LST,CERT-DATA,STATE-GLOBAL-LET*,CAR,EQ,EXPANSION0,CONSP,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-EVENT-FN1">make-event-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-event-fn1" data-sym="MAKE-EVENT-FN1" title="(defun make-event-fn1
       (expansion0 whole-form in-encapsulatep check-expansion on-behalf-of wrld
        ctx state)
  (cond
   ((and (consp expansion0) (eq (car expansion0) :or))
...">make-event-fn1</a>
  (expansion0 whole-form
    <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
    check-expansion
    on-behalf-of
    wrld
    ctx
    state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp expansion0) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car expansion0) <span class="keyword">:or</span>)) (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((cert-data nil))
        (<a class="sym-link local-def" href="#def-make-event-fn2-lst" data-sym="MAKE-EVENT-FN2-LST" title="(defun make-event-fn2-lst
       (expansion-lst whole-form in-encapsulatep check-expansion on-behalf-of
        wrld ctx state)
  (cond
   ((atom expansion-lst)
...">make-event-fn2-lst</a> (cdr expansion0)
          whole-form
          <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
          check-expansion
          on-behalf-of
          wrld
          ctx
          state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-make-event-fn2" data-sym="MAKE-EVENT-FN2" title="(defun make-event-fn2
       (expansion0 whole-form in-encapsulatep check-expansion wrld ctx state)
  (mv-let (do-proofsp expansion0)
          (case-match expansion0
                      ((&#39;:do-proofs x) (mv (ld-skip-proofsp state) x))
...">make-event-fn2</a> expansion0
        whole-form
        <a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a>
        check-expansion
        wrld
        ctx
        state))))</pre>
  </div>

<div class="form-block function" id="def-ultimate-expansion" data-defines="ULTIMATE-EXPANSION" data-references="REBUILD-EXPANSION,DESTRUCTURE-EXPANSION,Y,W,MV-LET,T,NOT,AND,COND,ASSOC-KEYWORD,CADR,EXP,LET,KWD-ALIST,&,MAKE-EVENT,QUOTE,CASE-MATCH,X,DEFUN" data-used-by="MAKE-EVENT-FN" data-part-name="ULTIMATE-EXPANSION" data-part-args="X" data-part-body="REBUILD-EXPANSION,DESTRUCTURE-EXPANSION,Y,W,MV-LET,T,ULTIMATE-EXPANSION,NOT,AND,COND,ASSOC-KEYWORD,CADR,EXP,LET,KWD-ALIST,&,MAKE-EVENT,QUOTE,X,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ULTIMATE-EXPANSION">ultimate-expansion</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ultimate-expansion" data-sym="ULTIMATE-EXPANSION" title="(defun ultimate-expansion (x)
  (case-match x
              ((&#39;make-event &amp; . kwd-alist)
               (let ((exp (cadr (assoc-keyword :expansion? kwd-alist))))
                 (cond
...">ultimate-expansion</a>
  (x)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> x
    (('<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> &amp; . kwd-alist) (let ((exp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:expansion?</span> kwd-alist))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> exp
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:check-expansion</span> kwd-alist)))) (<a class="sym-link local-def" href="#def-ultimate-expansion" data-sym="ULTIMATE-EXPANSION" title="(defun ultimate-expansion (x)
  (case-match x
              ((&#39;make-event &amp; . kwd-alist)
               (let ((exp (cadr (assoc-keyword :expansion? kwd-alist))))
                 (cond
...">ultimate-expansion</a> exp))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> x))))
    (&amp; (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> y)
        (<a class="sym-link local-def" href="#def-destructure-expansion" data-sym="DESTRUCTURE-EXPANSION" title="(defun destructure-expansion (form)
  (declare (xargs :guard (true-listp form)))
  (cond
   ((member-eq (car form) *destructure-expansion-wrappers*)
    (mv-let (wrappers base-form) (destructure-expansion (car (last form)))
...">destructure-expansion</a> x)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link local-def" href="#def-rebuild-expansion" data-sym="REBUILD-EXPANSION" title="(defun rebuild-expansion (wrappers form)
  (cond ((endp wrappers) form)
        (t
         (append (car wrappers)
                 (list (rebuild-expansion (cdr wrappers) form))))))">rebuild-expansion</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link local-def" href="#def-ultimate-expansion" data-sym="ULTIMATE-EXPANSION" title="(defun ultimate-expansion (x)
  (case-match x
              ((&#39;make-event &amp; . kwd-alist)
               (let ((exp (cadr (assoc-keyword :expansion? kwd-alist))))
                 (cond
...">ultimate-expansion</a> y)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> x))))))</pre>
  </div>

<div class="form-block function" id="def-make-event-fn" data-defines="MAKE-EVENT-FN" data-references="MAKE-EVENT-SAVE-EVENT-DATA,MAYBE-ADD-EVENT-LANDMARK,PROOFS-CO,ABBREV-EVISC-TUPLE,CONS,LIST,FMS,F-PUT-GLOBAL,BOOT-STRAP-FLG,ER-PROGN,QUASIQUOTE,MAKE-EVENT,ACTUAL-EXPANSION,EXPECTED-EXPANSION,*ERROR-TRIPLE-SIG*,ULTIMATE-EXPANSION,REBUILD-EXPANSION,IGNORE,DECLARE,DESTRUCTURE-EXPANSION,BASE,WRAPPERS,MV-LET,LAST-MAKE-EVENT-EXPANSION,EXPANSION2,RESULT,STOBJS-OUT,EXPANSION1,EMBEDDED-EVENT-LST,IN-ENCAPSULATEP,MAKE-EVENT-FN1,EXPANSION1/STOBJS-OUT/RESULT,WRLD0,GLOBAL-SET,EXTENSION,SET-W,TTAGS-SEEN,GLOBAL-VAL,EQUAL,NULL,MAKE-EVENT-DEBUG-POST,NEED-EVENT-LANDMARK-P,CDDR,NEW-TTAGS-SEEN,CADR,NEW-KPA,CAR,EXPANSION0,PROTECTED-EVAL,DO-PROOFS?,LIST*,VALUE,IFF,ASSERT$,INCLUDING-UNCERTIFIED-P,INCLUDE-BOOK,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*,MAKE-EVENT-DEBUG-PRE,IF,PPROGN,EXPANSION0/NEW-KPA/NEW-TTAGS-SEEN,ER-LET*,W,WRLD,1+,NEW-DEBUG-DEPTH,MAKE-EVENT-DEBUG,LET*,REVERT-WORLD-ON-ERROR,T,OR,SOFT,ER,MAKE-EVENT-DEBUG-DEPTH,EQL,CONSP,IN-LOCAL-FLG,QUOTE,F-GET-GLOBAL,NOT,CERT-OP,EQ,AND,COND,WITH-CTX-SUMMARIZED,MAKE-EVENT-CTX,CTX,LET,STATE,WHOLE-FORM,SAVE-EVENT-DATA,ON-BEHALF-OF,CHECK-EXPANSION,EXPANSION?,FORM,DEFUN" data-part-name="MAKE-EVENT-FN" data-part-args="STATE,WHOLE-FORM,SAVE-EVENT-DATA,ON-BEHALF-OF,CHECK-EXPANSION,EXPANSION?,FORM" data-part-body="MAKE-EVENT-SAVE-EVENT-DATA,SAVE-EVENT-DATA,MAYBE-ADD-EVENT-LANDMARK,PROOFS-CO,ABBREV-EVISC-TUPLE,CONS,LIST,FMS,F-PUT-GLOBAL,BOOT-STRAP-FLG,ER-PROGN,QUASIQUOTE,MAKE-EVENT,ACTUAL-EXPANSION,EXPECTED-EXPANSION,*ERROR-TRIPLE-SIG*,ULTIMATE-EXPANSION,REBUILD-EXPANSION,IGNORE,DECLARE,DESTRUCTURE-EXPANSION,BASE,WRAPPERS,MV-LET,LAST-MAKE-EVENT-EXPANSION,EXPANSION2,RESULT,STOBJS-OUT,EXPANSION1,EMBEDDED-EVENT-LST,IN-ENCAPSULATEP,MAKE-EVENT-FN1,EXPANSION1/STOBJS-OUT/RESULT,WRLD0,GLOBAL-SET,EXTENSION,SET-W,TTAGS-SEEN,GLOBAL-VAL,EQUAL,NULL,MAKE-EVENT-DEBUG-POST,NEED-EVENT-LANDMARK-P,CDDR,NEW-TTAGS-SEEN,CADR,NEW-KPA,CAR,EXPANSION0,PROTECTED-EVAL,DO-PROOFS?,LIST*,VALUE,IFF,ASSERT$,INCLUDING-UNCERTIFIED-P,INCLUDE-BOOK,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*,ON-BEHALF-OF,FORM,MAKE-EVENT-DEBUG-PRE,IF,PPROGN,EXPANSION0/NEW-KPA/NEW-TTAGS-SEEN,ER-LET*,W,WRLD,1+,NEW-DEBUG-DEPTH,MAKE-EVENT-DEBUG,LET*,REVERT-WORLD-ON-ERROR,T,OR,SOFT,ER,MAKE-EVENT-DEBUG-DEPTH,EQL,EXPANSION?,CHECK-EXPANSION,CONSP,IN-LOCAL-FLG,QUOTE,F-GET-GLOBAL,NOT,STATE,CERT-OP,EQ,AND,COND,WITH-CTX-SUMMARIZED,WHOLE-FORM,MAKE-EVENT-CTX,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-EVENT-FN">make-event-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-event-fn" data-sym="MAKE-EVENT-FN" title="(defun make-event-fn
       (form expansion? check-expansion on-behalf-of save-event-data whole-form
        state)
  (let ((ctx (make-event-ctx whole-form)))
    (with-ctx-summarized ctx
...">make-event-fn</a>
  (form expansion?
    check-expansion
    on-behalf-of
    save-event-data
    whole-form
    state)
  (let ((ctx (<a class="sym-link local-def" href="#def-make-event-ctx" data-sym="MAKE-EVENT-CTX" title="(defun make-event-ctx (event-form)
  (msg &quot;( MAKE-EVENT ~@0~@1)&quot;
       (tilde-@-abbreviate-object-phrase (cadr event-form))
       (if (cddr event-form)
           &quot; ...&quot;">make-event-ctx</a> whole-form)))
    (<a class="sym-link system" href="history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> ctx
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state) <span class="keyword">:convert-pcert</span>)
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state))
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (consp check-expansion))
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> expansion?)
           (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'make-event-debug-depth state) <span class="number">0</span>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Implementation error: You should not be seeing this message!  ~
            Please contact the ACL2 implementors.~|~%Make-event expansion is ~
            illegal during the Convert procedure of provisional certification ~
            (unless :check-expansion is supplied a consp argument or ~
            :expansion? is supplied a non-nil argument).  The form ~x0 is ~
            thus illegal.  The use of a .acl2x file can sometimes solve this ~
            problem.  See :DOC provisional-certification."</span>
            whole-form))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> check-expansion nil)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> check-expansion <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
             (consp check-expansion))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The check-expansion flag of make-event must be t, nil, or a cons ~
            pair.  The following check-expansion flag is thus illegal: ~x0.  ~
            See :DOC make-event."</span>
            check-expansion))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> expansion? (consp check-expansion)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"It is illegal to supply a non-nil value for the keyword argument ~
            :EXPANSION? of make-event when keyword argument :CHECK-EXPANSION ~
            is give a value other than T or NIL.  If you think you have a ~
            reason why such a combination should be supported, please contact ~
            the ACL2 implementors."</span>))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((make-event-debug (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'make-event-debug state)) (new-debug-depth (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'make-event-debug-depth state)))
                (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
              (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((expansion0/new-kpa/new-ttags-seen (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if make-event-debug
                       (<a class="sym-link local-def" href="#def-make-event-debug-pre" data-sym="MAKE-EVENT-DEBUG-PRE" title="(defun make-event-debug-pre (depth form on-behalf-of state)
  (fms &quot;~x0&gt; Expanding for MAKE-EVENT~@1~|  ~y2~|&quot;
       (list (cons #\0 depth)
             (cons #\1
                   (if (and on-behalf-of
...">make-event-debug-pre</a> new-debug-depth
                         form
                         on-behalf-of
                         state)
                       state)
                     (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((make-event-debug-depth new-debug-depth))
                       (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> expansion?
                            (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
                            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'including-uncertified-p state))
                            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a> check-expansion (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> check-expansion <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> check-expansion <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> expansion? nil nil)))
                         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-do-proofs_3F" data-sym="DO-PROOFS?" title="(defmacro do-proofs? (do-proofsp use-always-do-proofs form)
  `(if ,(if use-always-do-proofs
            `(or ,do-proofsp
                 (let ((flg (always-do-proofs-during-make-event-expansion)))
                   (and flg
...">do-proofs?</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> check-expansion (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link local-def" href="#def-cert-op" data-sym="CERT-OP" title="(defun cert-op (state)
  (let ((certify-book-info (f-get-global &#39;certify-book-info state)))
    (and certify-book-info
         (or (access certify-book-info certify-book-info :cert-op) t))))">cert-op</a> state) <span class="keyword">:create-pcert</span>))
                             <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                             (<a class="sym-link local-def" href="#def-protected-eval" data-sym="PROTECTED-EVAL" title="(defun protected-eval (form on-behalf-of ctx state aok)
  (let ((original-wrld (w state)))
    (state-global-let*
     ((in-local-flg nil) (ld-always-skip-top-level-locals nil))
     (protect-system-state-globals
...">protected-eval</a> form on-behalf-of ctx state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))))) (expansion0 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (car expansion0/new-kpa/new-ttags-seen)))
                  (new-kpa (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> expansion0/new-kpa/new-ttags-seen)))
                  (new-ttags-seen (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> expansion0/new-kpa/new-ttags-seen)))
                  (need-event-landmark-p (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if make-event-debug
                        (<a class="sym-link local-def" href="#def-make-event-debug-post" data-sym="MAKE-EVENT-DEBUG-POST" title="(defun make-event-debug-post (debug-depth expansion0 state)
  (fms &quot;&lt;~x0 Returning MAKE-EVENT expansion:~|  ~Y12~|&quot;
       (list (cons #\0 debug-depth) (cons #\1 expansion0)
             (cons #\2 (term-evisc-tuple nil state)))
       (proofs-co state) state nil))">make-event-debug-post</a> new-debug-depth expansion0 state)
                        state)
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> new-ttags-seen)
                           (equal new-ttags-seen (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> wrld))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension
                              (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> '<a class="sym-link system" href="history-management.html#def-ttags-seen" data-sym="TTAGS-SEEN">ttags-seen</a> new-ttags-seen wrld)
                              state)
                            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))))
                  (wrld0 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
                  (expansion1/stobjs-out/result (<a class="sym-link local-def" href="#def-make-event-fn1" data-sym="MAKE-EVENT-FN1" title="(defun make-event-fn1
       (expansion0 whole-form in-encapsulatep check-expansion on-behalf-of wrld
        ctx state)
  (cond
   ((and (consp expansion0) (eq (car expansion0) :or))
...">make-event-fn1</a> expansion0
                      whole-form
                      (<a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'embedded-event-lst wrld0) nil)
                      check-expansion
                      on-behalf-of
                      wrld0
                      ctx
                      state)))
                (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((expansion1 (car expansion1/stobjs-out/result)) (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> expansion1/stobjs-out/result))
                    (result (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> expansion1/stobjs-out/result))
                    (expansion2 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'last-make-event-expansion state) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (wrappers base)
                            (<a class="sym-link local-def" href="#def-destructure-expansion" data-sym="DESTRUCTURE-EXPANSION" title="(defun destructure-expansion (form)
  (declare (xargs :guard (true-listp form)))
  (cond
   ((member-eq (car form) *destructure-expansion-wrappers*)
    (mv-let (wrappers base-form) (destructure-expansion (car (last form)))
...">destructure-expansion</a> expansion1)
                            (declare (ignore base))
                            (<a class="sym-link local-def" href="#def-rebuild-expansion" data-sym="REBUILD-EXPANSION" title="(defun rebuild-expansion (wrappers form)
  (cond ((endp wrappers) form)
        (t
         (append (car wrappers)
                 (list (rebuild-expansion (cdr wrappers) form))))))">rebuild-expansion</a> wrappers
                              (<a class="sym-link local-def" href="#def-ultimate-expansion" data-sym="ULTIMATE-EXPANSION" title="(defun ultimate-expansion (x)
  (case-match x
              ((&#39;make-event &amp; . kwd-alist)
               (let ((exp (cadr (assoc-keyword :expansion? kwd-alist))))
                 (cond
...">ultimate-expansion</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'last-make-event-expansion state)))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-ultimate-expansion" data-sym="ULTIMATE-EXPANSION" title="(defun ultimate-expansion (x)
  (case-match x
              ((&#39;make-event &amp; . kwd-alist)
               (let ((exp (cadr (assoc-keyword :expansion? kwd-alist))))
                 (cond
...">ultimate-expansion</a> expansion1)))))
                  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (equal <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
                    (let ((expected-expansion (if (consp check-expansion)
                           check-expansion
                           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
                             check-expansion
                             expansion?))))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> expected-expansion
                           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal expected-expansion expansion2))
                           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link local-def" href="#def-ultimate-expansion" data-sym="ULTIMATE-EXPANSION" title="(defun ultimate-expansion (x)
  (case-match x
              ((&#39;make-event &amp; . kwd-alist)
               (let ((exp (cadr (assoc-keyword :expansion? kwd-alist))))
                 (cond
...">ultimate-expansion</a> expected-expansion) expansion2))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                            ctx
                            <span class="string">"The current MAKE-EVENT expansion differs from ~
                              the expected (original or specified) expansion. ~
                              ~ See :DOC make-event.~|~%~|~%Make-event ~
                              argument:~|~%~y0~|~%Expected ~
                              expansion:~|~%~y1~|~%Current expansion:~|~%~y2~|"</span>
                            form
                            expected-expansion
                            expansion2))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((actual-expansion (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (consp check-expansion)
                                    (equal expansion? expansion2)
                                    (equal (<a class="sym-link local-def" href="#def-ultimate-expansion" data-sym="ULTIMATE-EXPANSION" title="(defun ultimate-expansion (x)
  (case-match x
              ((&#39;make-event &amp; . kwd-alist)
               (let ((exp (cadr (assoc-keyword :expansion? kwd-alist))))
                 (cond
...">ultimate-expansion</a> expansion?) expansion2)) nil)
                                 (check-expansion (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> check-expansion <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                                     (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a>
                                       form
                                       <span class="keyword">:check-expansion</span> expansion2
                                       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> on-behalf-of `(<span class="keyword">:on-behalf-of</span> ,ON-BEHALF-OF)))))
                                 (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> expansion2))))
                            (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (<a class="sym-link system" href="history-management.html#def-in-encapsulatep" data-sym="IN-ENCAPSULATEP">in-encapsulatep</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'embedded-event-lst (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                                        nil)
                                      (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                        ctx
                                        <span class="string">"Illegal form:~|~x0~|~%Make-event ~
                                            is illegal inside an encapsulate ~
                                            when in the boot-strap.  See the ~
                                            relevant discussion in ~
                                            make-event-fn."</span>
                                        form)
                                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-make-event-expansion
                                      actual-expansion
                                      state)
                                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
                              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'make-event-debug state) (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Saving make-event replacement into state ~
                                    global &#39;last-make-event-expansion (debug ~
                                    level ~
                                    ~x0):~|Form:~|~X13~|Expansion:~|~X23~|"</span>
                                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 new-debug-depth)
                                        (cons #\1 form)
                                        (cons #\2 actual-expansion)
                                        (cons #\3 (<a class="sym-link system" href="basis-a.html#def-abbrev-evisc-tuple" data-sym="ABBREV-EVISC-TUPLE">abbrev-evisc-tuple</a> state)))
                                      (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                                      state
                                      nil))
                                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                                (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (need-event-landmark-p (<a class="sym-link local-def" href="#def-maybe-add-event-landmark" data-sym="MAYBE-ADD-EVENT-LANDMARK" title="(defun maybe-add-event-landmark (state)
  (cond
   ((let ((wrld (w state)))
      (not
       (and (eq (caar wrld) &#39;event-landmark) (eq (cadar wrld) &#39;global-value))))
...">maybe-add-event-landmark</a> state))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
                                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> result)))))))))))))))
      <span class="keyword">:event-type</span> (if save-event-data
        'make-event-save-event-data
        '<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a>))))</pre>
  </div>

<div class="form-block function" id="def-trans_2A-fn1" data-defines="TRANS*-FN1" data-references="OR,IF,SILENT-ERROR,TRANSLATE,MACROEXPAND1,ASSOC-KEYWORD,CADR,PROTECTED-EVAL,REVERT-WORLD-ON-ERROR,EXPANSION0/NEW-KPA/NEW-TTAGS-SEEN,NEXT,ER-LET*,MACRO-BODY,GETPROPC,SYMBOLP,NOT,MACROP,CDDR,KEYWORD-VALUE-LISTP,CDR,MAKE-EVENT,QUOTE,EQ,MAKE-EVENT-CASE,LET*,VALUE,STANDARD-CO,TERM-EVISC-TUPLE,LAST,CONS,LIST,FMS,T,PPROGN,*DESTRUCTURE-EXPANSION-WRAPPERS*,CAR,MEMBER-EQ,CONSP,AND,COND,STATE,WRLD,CTX,FORM,MAKE-EVENT-P,QUIET,TRANSP,ITER,DEFUN" data-used-by="TRANS*-FN-ITER" data-part-name="TRANS*-FN1" data-part-args="STATE,WRLD,CTX,FORM,MAKE-EVENT-P,QUIET,TRANSP,ITER" data-part-body="OR,IF,SILENT-ERROR,WRLD,TRANSLATE,TRANSP,MACROEXPAND1,CTX,ASSOC-KEYWORD,CADR,PROTECTED-EVAL,REVERT-WORLD-ON-ERROR,EXPANSION0/NEW-KPA/NEW-TTAGS-SEEN,NEXT,ER-LET*,MACRO-BODY,GETPROPC,SYMBOLP,NOT,MACROP,CDDR,KEYWORD-VALUE-LISTP,CDR,MAKE-EVENT,QUOTE,EQ,MAKE-EVENT-P,MAKE-EVENT-CASE,LET*,VALUE,STANDARD-CO,TERM-EVISC-TUPLE,LAST,ITER,CONS,LIST,FMS,T,STATE,QUIET,PPROGN,*DESTRUCTURE-EXPANSION-WRAPPERS*,CAR,MEMBER-EQ,FORM,CONSP,AND,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANS*-FN1">trans*-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trans_2A-fn1" data-sym="TRANS*-FN1" title="(defun trans*-fn1 (iter transp quiet make-event-p form ctx wrld state)
  (cond
   ((and (consp form) (member-eq (car form) *destructure-expansion-wrappers*))
    (pprogn
     (cond (quiet state)
...">trans*-fn1</a>
  (iter transp quiet make-event-p form ctx wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp form)
       (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form) <a class="sym-link local-def" href="#def-_2Adestructure-expansion-wrappers_2A" data-sym="*DESTRUCTURE-EXPANSION-WRAPPERS*" title="(defconst *destructure-expansion-wrappers*
          &#39;(local skip-proofs with-cbd with-current-package
                  with-guard-checking-event with-output with-prover-step-limit
                  with-prover-time-limit))">*destructure-expansion-wrappers*</a>)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (quiet state)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Iteration ~x0 is dropping the ~x1 wrapper:~|~X23~|----------~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 iter)
                (cons #\1 (car form))
                (cons #\2 (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> form)))
                (cons #\3 (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state)))
              (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
              state
              nil)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> form))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((make-event-case (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> make-event-p
             (consp form)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a>)
             (consp (cdr form))
             (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form)))) (macrop (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> make-event-case)
              (consp form)
              (symbolp (car form))
              (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car form) 'macro-body))))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((next (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (make-event-case (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((expansion0/new-kpa/new-ttags-seen (<a class="sym-link system" href="history-management.html#def-revert-world-on-error" data-sym="REVERT-WORLD-ON-ERROR">revert-world-on-error</a> (<a class="sym-link local-def" href="#def-protected-eval" data-sym="PROTECTED-EVAL" title="(defun protected-eval (form on-behalf-of ctx state aok)
  (let ((original-wrld (w state)))
    (state-global-let*
     ((in-local-flg nil) (ld-always-skip-top-level-locals nil))
     (protect-system-state-globals
...">protected-eval</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form)
                          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:on-behalf-of</span> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form)))
                          ctx
                          state
                          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
                   (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (car expansion0/new-kpa/new-ttags-seen))))
               (macrop (macroexpand1 form ctx state))
               (transp (translate form <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ctx wrld state))
               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (silent-error state)))))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (quiet state)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Iteration ~x0 produces (by ~#1~[expansion~/make-event ~
                   expansion~/translation~]):~|~X23~|----------~|"</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 iter)
                    (cons #\1
                      (if macrop
                        <span class="number">0</span>
                        (if make-event-case
                          <span class="number">1</span>
                          <span class="number">2</span>)))
                    (cons #\2 next)
                    (cons #\3 (<a class="sym-link system" href="basis-a.html#def-term-evisc-tuple" data-sym="TERM-EVISC-TUPLE">term-evisc-tuple</a> nil state)))
                  (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                  state
                  nil)))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> make-event-case macrop) next))))))))</pre>
  </div>

<div class="form-block function" id="def-trans_2A-fn-iter" data-defines="TRANS*-FN-ITER" data-references="1+,CDR,NEXT,FLG,LET,TRANS*-FN1,FLG/NEXT,ERP,MV-LET,IF,VALUE,HONS-GET,*DESTRUCTURE-EXPANSION-WRAPPERS*,MEMBER-EQ,MAKE-EVENT,QUOTE,CAR,CONSP,>,NOT,COND,T,EQ,OR,POSP,AND,XARGS,DECLARE,STATE,WRLD,CTX,FORM,NAMES-FAL,MAKE-EVENT-P,QUIET,TRANSP,BOUND,ITER,DEFUN" data-used-by="TRANS*-FN" data-part-name="TRANS*-FN-ITER" data-part-args="STATE,WRLD,CTX,FORM,NAMES-FAL,MAKE-EVENT-P,QUIET,TRANSP,BOUND,ITER" data-part-declare="T,BOUND,EQ,OR,ITER,POSP,AND,XARGS,DECLARE" data-part-body="1+,TRANS*-FN-ITER,CDR,NEXT,FLG,LET,WRLD,CTX,TRANSP,TRANS*-FN1,STATE,FLG/NEXT,ERP,MV-LET,QUIET,IF,VALUE,NAMES-FAL,HONS-GET,*DESTRUCTURE-EXPANSION-WRAPPERS*,MEMBER-EQ,MAKE-EVENT,QUOTE,CAR,MAKE-EVENT-P,FORM,CONSP,ITER,>,T,BOUND,EQ,NOT,AND,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANS*-FN-ITER">trans*-fn-iter</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trans_2A-fn-iter" data-sym="TRANS*-FN-ITER" title="(defun trans*-fn-iter
       (iter bound transp quiet make-event-p names-fal form ctx wrld state)
  (declare (xargs :guard (and (posp iter) (or (eq bound t) (posp bound)))))
  (cond
   ((or (and (not (eq bound t)) (&gt; iter bound))
...">trans*-fn-iter</a>
  (iter bound
    transp
    quiet
    make-event-p
    names-fal
    form
    ctx
    wrld
    state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-posp" data-sym="POSP">posp</a> iter) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> bound <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-posp" data-sym="POSP">posp</a> bound)))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> bound <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> iter bound))
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp form)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> make-event-p (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a>)))
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form) <a class="sym-link local-def" href="#def-_2Adestructure-expansion-wrappers_2A" data-sym="*DESTRUCTURE-EXPANSION-WRAPPERS*" title="(defconst *destructure-expansion-wrappers*
          &#39;(local skip-proofs with-cbd with-current-package
                  with-guard-checking-event with-output with-prover-step-limit
                  with-prover-time-limit))">*destructure-expansion-wrappers*</a>))
         (hons-get (car form) names-fal))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if quiet
          form
          <span class="keyword">:invisible</span>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp flg/next state)
        (<a class="sym-link local-def" href="#def-trans_2A-fn1" data-sym="TRANS*-FN1" title="(defun trans*-fn1 (iter transp quiet make-event-p form ctx wrld state)
  (cond
   ((and (consp form) (member-eq (car form) *destructure-expansion-wrappers*))
    (pprogn
     (cond (quiet state)
...">trans*-fn1</a> iter
          transp
          quiet
          make-event-p
          form
          ctx
          wrld
          state)
        (let ((flg (car flg/next)) (next (cdr flg/next)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if quiet
                  form
                  <span class="keyword">:invisible</span>)))
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a>)
               (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp next) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car next) <span class="keyword">:or</span>))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if quiet
                  next
                  <span class="keyword">:invisible</span>)))
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> flg) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if quiet
                  next
                  <span class="keyword">:invisible</span>)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-trans_2A-fn-iter" data-sym="TRANS*-FN-ITER" title="(defun trans*-fn-iter
       (iter bound transp quiet make-event-p names-fal form ctx wrld state)
  (declare (xargs :guard (and (posp iter) (or (eq bound t) (posp bound)))))
  (cond
   ((or (and (not (eq bound t)) (&gt; iter bound))
...">trans*-fn-iter</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> iter)
                bound
                transp
                quiet
                make-event-p
                names-fal
                next
                ctx
                wrld
                state))))))))</pre>
  </div>

<div class="form-block function" id="def-trans_2A-fn" data-defines="TRANS*-FN" data-references="W,TRANS*-FN-ITER,*SYMS-NOT-CALLABLE-IN-CODE-FAL*,HONS-GET,*DESTRUCTURE-EXPANSION-WRAPPERS*,MEMBER-EQ,MAKE-EVENT,QUOTE,NOT,AND,SOFT,ER,EQ,>,-,<,INTEGERP,TRANSP,REPS,CAR,T,MV,CDR,CONSP,COND,QUIET,REPS0,MV-LET,STATE,CTX,MAKE-EVENT-P,FORM,BOUND,DEFUN" data-used-by="TRANS*-,TRANS*" data-part-name="TRANS*-FN" data-part-args="STATE,CTX,MAKE-EVENT-P,FORM,BOUND" data-part-body="STATE,W,TRANS*-FN-ITER,*SYMS-NOT-CALLABLE-IN-CODE-FAL*,HONS-GET,*DESTRUCTURE-EXPANSION-WRAPPERS*,MEMBER-EQ,MAKE-EVENT,QUOTE,MAKE-EVENT-P,NOT,FORM,AND,CTX,SOFT,ER,EQ,>,-,<,INTEGERP,TRANSP,REPS,CAR,T,MV,CDR,BOUND,CONSP,COND,QUIET,REPS0,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANS*-FN">trans*-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trans_2A-fn" data-sym="TRANS*-FN" title="(defun trans*-fn (bound form make-event-p ctx state)
  (mv-let (reps0 quiet)
          (cond
           ((consp bound)
            (cond ((cdr bound) (mv :error nil)) (t (mv (car bound) t))))
...">trans*-fn</a>
  (bound form make-event-p ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (reps0 quiet)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp bound) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((cdr bound) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:error</span> nil)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car bound) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> bound nil)))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (reps transp)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((integerp reps0) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((&lt; reps0 <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> reps0) nil))
            ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> reps0 <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> reps0 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:error</span> nil))))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> reps0 nil) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> reps0 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="keyword">:error</span> nil)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> reps <span class="keyword">:error</span>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Illegal first argument for trans*, ~x0.  See :DOC trans*."</span>
            bound))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp form)
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> make-event-p (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) '<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a>)))
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car form) <a class="sym-link local-def" href="#def-_2Adestructure-expansion-wrappers_2A" data-sym="*DESTRUCTURE-EXPANSION-WRAPPERS*" title="(defconst *destructure-expansion-wrappers*
          &#39;(local skip-proofs with-cbd with-current-package
                  with-guard-checking-event with-output with-prover-step-limit
                  with-prover-time-limit))">*destructure-expansion-wrappers*</a>))
           (hons-get (car form) *syms-not-callable-in-code-fal*)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Nothing to do: The input form is already the final result."</span>))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-trans_2A-fn-iter" data-sym="TRANS*-FN-ITER" title="(defun trans*-fn-iter
       (iter bound transp quiet make-event-p names-fal form ctx wrld state)
  (declare (xargs :guard (and (posp iter) (or (eq bound t) (posp bound)))))
  (cond
   ((or (and (not (eq bound t)) (&gt; iter bound))
...">trans*-fn-iter</a> <span class="number">1</span>
            reps
            transp
            quiet
            make-event-p
            *syms-not-callable-in-code-fal*
            form
            ctx
            (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
            state))))))</pre>
  </div>

<div class="form-block macro" id="def-trans_2A" data-defines="TRANS*" data-references="STATE,QUOTE,T,TRANS*-FN,QUASIQUOTE,FORM,BOUND,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANS*">trans*</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-trans_2A" data-sym="TRANS*" title="(defmacro trans* (bound form) `(trans*-fn ,bound ,form t &#39;trans* state))">trans*</a>
  (bound form)
  `(<a class="sym-link local-def" href="#def-trans_2A-fn" data-sym="TRANS*-FN" title="(defun trans*-fn (bound form make-event-p ctx state)
  (mv-let (reps0 quiet)
          (cond
           ((consp bound)
            (cond ((cdr bound) (mv :error nil)) (t (mv (car bound) t))))
...">trans*-fn</a> ,BOUND ,FORM <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> '<a class="sym-link local-def" href="#def-trans_2A" data-sym="TRANS*" title="(defmacro trans* (bound form) `(trans*-fn ,bound ,form t &#39;trans* state))">trans*</a> state))</pre>
  </div>

<div class="form-block macro" id="def-trans_2A-" data-defines="TRANS*-" data-references="STATE,QUOTE,TRANS*-FN,QUASIQUOTE,FORM,BOUND,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANS*-">trans*-</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-trans_2A-" data-sym="TRANS*-" title="(defmacro trans*- (bound form) `(trans*-fn ,bound ,form nil &#39;trans*- state))">trans*-</a>
  (bound form)
  `(<a class="sym-link local-def" href="#def-trans_2A-fn" data-sym="TRANS*-FN" title="(defun trans*-fn (bound form make-event-p ctx state)
  (mv-let (reps0 quiet)
          (cond
           ((consp bound)
            (cond ((cdr bound) (mv :error nil)) (t (mv (car bound) t))))
...">trans*-fn</a> ,BOUND ,FORM nil '<a class="sym-link local-def" href="#def-trans_2A-" data-sym="TRANS*-" title="(defmacro trans*- (bound form) `(trans*-fn ,bound ,form nil &#39;trans*- state))">trans*-</a> state))</pre>
  </div>

<div class="form-block function" id="def-get-check-invariant-risk" data-defines="GET-CHECK-INVARIANT-RISK" data-references="OTHERWISE,T,EQ,IF,CDR,CASE,COND,CHECK-INVARIANT-RISK,F-GET-GLOBAL,CIR,W,ACL2-DEFAULTS-TABLE,QUOTE,TABLE-ALIST,ASSOC-EQ,PAIR,LET,STATE,DEFUN" data-used-by="SET-CHECK-INVARIANT-RISK-FN,SET-CHECK-INVARIANT-RISK" data-part-name="GET-CHECK-INVARIANT-RISK" data-part-args="STATE" data-part-body="OTHERWISE,T,EQ,IF,CDR,CASE,COND,CHECK-INVARIANT-RISK,F-GET-GLOBAL,CIR,STATE,W,ACL2-DEFAULTS-TABLE,QUOTE,TABLE-ALIST,ASSOC-EQ,PAIR,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-CHECK-INVARIANT-RISK">get-check-invariant-risk</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-check-invariant-risk" data-sym="GET-CHECK-INVARIANT-RISK" title="(defun get-check-invariant-risk (state)
  (let ((pair
         (assoc-eq :check-invariant-risk
                   (table-alist &#39;acl2-defaults-table (w state))))
        (cir (f-get-global &#39;check-invariant-risk state)))
...">get-check-invariant-risk</a>
  (state)
  (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:check-invariant-risk</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (cir (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'check-invariant-risk state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pair (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (cdr pair)
          ((<span class="keyword">:error</span> <span class="keyword">:clear</span>) cir)
          ((<span class="keyword">:warning</span>) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> cir <span class="keyword">:error</span>)
              <span class="keyword">:warning</span> cir))
          ((<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> cir nil)
              nil
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (otherwise nil)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> cir))))</pre>
  </div>

<div class="form-block macro" id="def-set-check-invariant-risk" data-defines="SET-CHECK-INVARIANT-RISK" data-references="PROGN!,DEFTTAG,WARNING!,WARNING,WITH-UBT!,ER-PROGN,CHECK-INVARIANT-RISK,SOFT,ER,SET-CHECK-INVARIANT-RISK-FN,*CHECK-INVARIANT-RISK-VALUES*,MEMBER-EQ,T,VALUE-TRIPLE,VALUE,QUOTE,STATE,GET-CHECK-INVARIANT-RISK,EQ,NOT,AND,IF,PPROGN,MAKE-EVENT,ACL2-DEFAULTS-TABLE,TABLE,PROGN,ERROR,OBSERVATION,WITH-OUTPUT,QUASIQUOTE,COND,BOOLEANP,XARGS,DECLARE,TABLE-P,&OPTIONAL,X,DEFMACRO" data-used-by="SET-CHECK-INVARIANT-RISK-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-CHECK-INVARIANT-RISK">set-check-invariant-risk</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-check-invariant-risk" data-sym="SET-CHECK-INVARIANT-RISK" title="(defmacro set-check-invariant-risk (x &amp;optional table-p)
  (declare (xargs :guard (booleanp table-p)))
  (cond
   (table-p
    `(with-output :off :all :on (observation error)
...">set-check-invariant-risk</a>
  (x &amp;optional table-p)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> table-p)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (table-p `(<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> <span class="keyword">:all</span> <span class="keyword">:on</span> (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> error)
        (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:check-invariant-risk</span> ,X)
          (<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,X (<a class="sym-link local-def" href="#def-get-check-invariant-risk" data-sym="GET-CHECK-INVARIANT-RISK" title="(defun get-check-invariant-risk (state)
  (let ((pair
         (assoc-eq :check-invariant-risk
                   (table-alist &#39;acl2-defaults-table (w state))))
        (cir (f-get-global &#39;check-invariant-risk state)))
...">get-check-invariant-risk</a> state)))
                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,X <span class="keyword">:clear</span>)))
                (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> '<a class="sym-link local-def" href="#def-set-check-invariant-risk" data-sym="SET-CHECK-INVARIANT-RISK" title="(defmacro set-check-invariant-risk (x &amp;optional table-p)
  (declare (xargs :guard (booleanp table-p)))
  (cond
   (table-p
    `(with-output :off :all :on (observation error)
...">set-check-invariant-risk</a>
                  <span class="string">"No change is being made in the value ~
                                        computed by ~x0.  This happens when ~
                                        the value of state global ~
                                        &#39;check-invariant-risk is less than ~
                                        the new table value; see :DOC ~
                                        set-check-invariant-risk."</span>
                  '(<a class="sym-link local-def" href="#def-get-check-invariant-risk" data-sym="GET-CHECK-INVARIANT-RISK" title="(defun get-check-invariant-risk (state)
  (let ((pair
         (assoc-eq :check-invariant-risk
                   (table-alist &#39;acl2-defaults-table (w state))))
        (cir (f-get-global &#39;check-invariant-risk state)))
...">get-check-invariant-risk</a> state))
                state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(<a class="sym-link system" href="axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> ,X)))
            <span class="keyword">:check-expansion</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> x (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> x <a class="sym-link system" href="axioms.html#def-_2Acheck-invariant-risk-values_2A" data-sym="*CHECK-INVARIANT-RISK-VALUES*">*check-invariant-risk-values*</a>)) `(<a class="sym-link local-def" href="#def-set-check-invariant-risk-fn" data-sym="SET-CHECK-INVARIANT-RISK-FN" title="(defun set-check-invariant-risk-fn (x state)
  (declare (xargs :guard (member-eq x *check-invariant-risk-values*)))
  (progn$ (mbt (and (member-eq x *check-invariant-risk-values*) t))
          (cond
           ((and (null x) (f-get-global &#39;check-invariant-risk state)
...">set-check-invariant-risk-fn</a> ,X state))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> ,X '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:error</span> <span class="keyword">:warning</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            'check-invariant-risk
            <span class="string">"Illegal value for ~x0: ~x1"</span>
            'check-invariant-risk
            ',X))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-with-ubt_21" data-sym="WITH-UBT!" title="(defmacro with-ubt! (form)
  (let ((label &#39;with-ubt!-label))
    `(er-progn
      (with-output :stack :push :off :all
                   (ld
...">with-ubt!</a> (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> <span class="keyword">:all</span> (<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:on</span> (error warning warning!)
                  (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-defttag" data-sym="DEFTTAG">defttag</a> <span class="keyword">:set-check-invariant-risk</span>)
                    (<a class="sym-link system" href="basis-b.html#def-progn_21" data-sym="PROGN!">progn!</a> (<a class="sym-link local-def" href="#def-set-check-invariant-risk-fn" data-sym="SET-CHECK-INVARIANT-RISK-FN" title="(defun set-check-invariant-risk-fn (x state)
  (declare (xargs :guard (member-eq x *check-invariant-risk-values*)))
  (progn$ (mbt (and (member-eq x *check-invariant-risk-values*) t))
          (cond
           ((and (null x) (f-get-global &#39;check-invariant-risk state)
...">set-check-invariant-risk-fn</a> ,X state))))))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))))</pre>
  </div>

<div class="form-block function" id="def-set-check-invariant-risk-fn" data-defines="SET-CHECK-INVARIANT-RISK-FN" data-references="VALUE,OBSERVATION,GET-CHECK-INVARIANT-RISK,EQ,IF,F-PUT-GLOBAL,PPROGN,SET-CHECK-INVARIANT-RISK,SOFT,ER,W,TTAG,NOT,CHECK-INVARIANT-RISK,QUOTE,F-GET-GLOBAL,NULL,COND,T,AND,MBT,PROGN$,*CHECK-INVARIANT-RISK-VALUES*,MEMBER-EQ,XARGS,DECLARE,STATE,X,DEFUN" data-used-by="SET-CHECK-INVARIANT-RISK" data-part-name="SET-CHECK-INVARIANT-RISK-FN" data-part-args="STATE,X" data-part-declare="*CHECK-INVARIANT-RISK-VALUES*,X,MEMBER-EQ,XARGS,DECLARE" data-part-body="VALUE,OBSERVATION,GET-CHECK-INVARIANT-RISK,EQ,IF,F-PUT-GLOBAL,PPROGN,SET-CHECK-INVARIANT-RISK,SOFT,ER,W,TTAG,NOT,STATE,CHECK-INVARIANT-RISK,QUOTE,F-GET-GLOBAL,NULL,COND,T,*CHECK-INVARIANT-RISK-VALUES*,X,MEMBER-EQ,AND,MBT,PROGN$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-CHECK-INVARIANT-RISK-FN">set-check-invariant-risk-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-check-invariant-risk-fn" data-sym="SET-CHECK-INVARIANT-RISK-FN" title="(defun set-check-invariant-risk-fn (x state)
  (declare (xargs :guard (member-eq x *check-invariant-risk-values*)))
  (progn$ (mbt (and (member-eq x *check-invariant-risk-values*) t))
          (cond
           ((and (null x) (f-get-global &#39;check-invariant-risk state)
...">set-check-invariant-risk-fn</a>
  (x state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> x <a class="sym-link system" href="axioms.html#def-_2Acheck-invariant-risk-values_2A" data-sym="*CHECK-INVARIANT-RISK-VALUES*">*check-invariant-risk-values*</a>)))
  (<a class="sym-link system" href="axioms.html#def-progn_24" data-sym="PROGN$">progn$</a> (<a class="sym-link system" href="axioms.html#def-mbt" data-sym="MBT">mbt</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> x <a class="sym-link system" href="axioms.html#def-_2Acheck-invariant-risk-values_2A" data-sym="*CHECK-INVARIANT-RISK-VALUES*">*check-invariant-risk-values*</a>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x)
         (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'check-invariant-risk state)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          '<a class="sym-link local-def" href="#def-set-check-invariant-risk" data-sym="SET-CHECK-INVARIANT-RISK" title="(defmacro set-check-invariant-risk (x &amp;optional table-p)
  (declare (xargs :guard (booleanp table-p)))
  (cond
   (table-p
    `(with-output :off :all :on (observation error)
...">set-check-invariant-risk</a>
          <span class="string">"There must be an active trust tag to set &#39;~x0 to ~x1."</span>
          'check-invariant-risk
          nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'check-invariant-risk x state)
          (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x (<a class="sym-link local-def" href="#def-get-check-invariant-risk" data-sym="GET-CHECK-INVARIANT-RISK" title="(defun get-check-invariant-risk (state)
  (let ((pair
         (assoc-eq :check-invariant-risk
                   (table-alist &#39;acl2-defaults-table (w state))))
        (cir (f-get-global &#39;check-invariant-risk state)))
...">get-check-invariant-risk</a> state)))
            (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> '<a class="sym-link local-def" href="#def-set-check-invariant-risk" data-sym="SET-CHECK-INVARIANT-RISK" title="(defmacro set-check-invariant-risk (x &amp;optional table-p)
  (declare (xargs :guard (booleanp table-p)))
  (cond
   (table-p
    `(with-output :off :all :on (observation error)
...">set-check-invariant-risk</a>
              <span class="string">"No change is being made in the value ~
                                      computed by ~x0, because the new value ~
                                      of state global &#39;check-invariant-risk ~
                                      is greater than the table value; see ~
                                      :DOC set-check-invariant-risk."</span>
              '(<a class="sym-link local-def" href="#def-get-check-invariant-risk" data-sym="GET-CHECK-INVARIANT-RISK" title="(defun get-check-invariant-risk (state)
  (let ((pair
         (assoc-eq :check-invariant-risk
                   (table-alist &#39;acl2-defaults-table (w state))))
        (cir (f-get-global &#39;check-invariant-risk state)))
...">get-check-invariant-risk</a> state))
            state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> x))))))</pre>
  </div>

<div class="form-block function" id="def-get-register-invariant-risk" data-defines="GET-REGISTER-INVARIANT-RISK" data-references="W,GET-REGISTER-INVARIANT-RISK-WORLD,STATE,DEFUN" data-part-name="GET-REGISTER-INVARIANT-RISK" data-part-args="STATE" data-part-body="STATE,W,GET-REGISTER-INVARIANT-RISK-WORLD" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-REGISTER-INVARIANT-RISK">get-register-invariant-risk</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-register-invariant-risk" data-sym="GET-REGISTER-INVARIANT-RISK" title="(defun get-register-invariant-risk (state)
  (get-register-invariant-risk-world (w state)))">get-register-invariant-risk</a>
  (state)
  (<a class="sym-link system" href="axioms.html#def-get-register-invariant-risk-world" data-sym="GET-REGISTER-INVARIANT-RISK-WORLD">get-register-invariant-risk-world</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))</pre>
  </div>

<div class="form-block macro" id="def-set-register-invariant-risk" data-defines="SET-REGISTER-INVARIANT-RISK" data-references="ACL2-DEFAULTS-TABLE,TABLE,PROGN,SUMMARY,EVENT,WITH-OUTPUT,QUASIQUOTE,BOOLEANP,XARGS,DECLARE,VAL,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-REGISTER-INVARIANT-RISK">set-register-invariant-risk</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-register-invariant-risk" data-sym="SET-REGISTER-INVARIANT-RISK" title="(defmacro set-register-invariant-risk (val)
  (declare (xargs :guard (booleanp val)))
  `(with-output :off (event summary)
                (progn
                 (table acl2-defaults-table :register-invariant-risk ,val)">set-register-invariant-risk</a>
  (val)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> val)))
  `(<a class="sym-link system" href="axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> (event summary)
    (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:register-invariant-risk</span> ,VAL)
      (<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:register-invariant-risk</span>))))</pre>
  </div>

<div class="form-block function" id="def-sort-fboundps" data-defines="SORT-FBOUNDPS" data-references="FORMALS,NOT,EQ,SYMBOL-CLASS,MEMBER,CONS,CDR,MACRO-BODY,QUOTE,GETPROPC,CAR,S,LET,T,MV,ENDP,COND,XARGS,DECLARE,MS,LS,PS,WRLD,LST,DEFUN" data-part-name="SORT-FBOUNDPS" data-part-args="MS,LS,PS,WRLD,LST" data-part-declare="XARGS,DECLARE" data-part-body="FORMALS,NOT,EQ,SYMBOL-CLASS,MEMBER,CONS,CDR,SORT-FBOUNDPS,WRLD,MACRO-BODY,QUOTE,GETPROPC,CAR,S,LET,T,MS,LS,PS,MV,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SORT-FBOUNDPS">sort-fboundps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sort-fboundps" data-sym="SORT-FBOUNDPS" title="(defun sort-fboundps (lst wrld ps ls ms)
  (declare (xargs :mode :program))
  (cond ((endp lst) (mv ps ls ms))
        (t
         (let ((s (car lst)))
...">sort-fboundps</a>
  (lst wrld ps ls ms)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ps ls ms))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((s (car lst)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> s 'macro-body nil wrld) (<a class="sym-link local-def" href="#def-sort-fboundps" data-sym="SORT-FBOUNDPS" title="(defun sort-fboundps (lst wrld ps ls ms)
  (declare (xargs :mode :program))
  (cond ((endp lst) (mv ps ls ms))
        (t
         (let ((s (car lst)))
...">sort-fboundps</a> (cdr lst) wrld ps ls (cons s ms)))
          ((<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> s wrld)
             '(<span class="keyword">:ideal</span> <span class="keyword">:common-lisp-compliant</span>)
             <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>) (<a class="sym-link local-def" href="#def-sort-fboundps" data-sym="SORT-FBOUNDPS" title="(defun sort-fboundps (lst wrld ps ls ms)
  (declare (xargs :mode :program))
  (cond ((endp lst) (mv ps ls ms))
        (t
         (let ((s (car lst)))
...">sort-fboundps</a> (cdr lst) wrld ps (cons s ls) ms))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> s '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link local-def" href="#def-sort-fboundps" data-sym="SORT-FBOUNDPS" title="(defun sort-fboundps (lst wrld ps ls ms)
  (declare (xargs :mode :program))
  (cond ((endp lst) (mv ps ls ms))
        (t
         (let ((s (car lst)))
...">sort-fboundps</a> (cdr lst) wrld (cons s ps) ls ms))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-sort-fboundps" data-sym="SORT-FBOUNDPS" title="(defun sort-fboundps (lst wrld ps ls ms)
  (declare (xargs :mode :program))
  (cond ((endp lst) (mv ps ls ms))
        (t
         (let ((s (car lst)))
...">sort-fboundps</a> (cdr lst) wrld ps ls ms)))))))</pre>
  </div>

<div class="form-block other" id="form-784" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-partial-encapsulate" data-sym="PARTIAL-ENCAPSULATE">partial-encapsulate</a> (((doppelganger-badge-userfn <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>))
  nil
  (<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>)
  (<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> doppelganger-badge-userfn
      (fn)
      (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:logic</span>))
      (declare (ignore fn))
      nil))
  (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> doppelganger-badge-userfn-type
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (doppelganger-badge-userfn fn))
      (let ((x (doppelganger-badge-userfn fn)))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (weak-apply$-badge-p x)
          (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge x <span class="keyword">:arity</span>))
          (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge x <span class="keyword">:out-arity</span>))
          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge x <span class="keyword">:ilks</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge x <span class="keyword">:ilks</span>))
              (equal (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge x <span class="keyword">:ilks</span>))
                (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge x <span class="keyword">:arity</span>))
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-all-nils" data-sym="ALL-NILS">all-nils</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge x <span class="keyword">:ilks</span>)))
              (<a class="sym-link system" href="axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> apply$-badge x <span class="keyword">:ilks</span>) '(nil <span class="keyword">:fn</span> <span class="keyword">:expr</span>)))))))
    <span class="keyword">:rule-classes</span> nil))</pre>
  </div>

<div class="form-block other" id="form-785" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-partial-encapsulate" data-sym="PARTIAL-ENCAPSULATE">partial-encapsulate</a> (((doppelganger-apply$-userfn <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a>))
  nil
  (<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>)
  (<a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> doppelganger-apply$-userfn
      (fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
      (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:logic</span>))
      (declare (ignore fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
      nil))
  (<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> doppelganger-apply$-userfn-takes-arity-args
    (<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (doppelganger-badge-userfn fn)
      (equal (doppelganger-apply$-userfn fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
        (doppelganger-apply$-userfn fn
          (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (doppelganger-badge-userfn fn)) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
    <span class="keyword">:rule-classes</span> nil))</pre>
  </div>

<div class="form-block macro" id="def-apply_24-lambda-logical" data-defines="APPLY$-LAMBDA-LOGICAL" data-references="LAMBDA-OBJECT-FORMALS,PAIRLIS$,EC-CALL,LAMBDA-OBJECT-BODY,EV$,QUASIQUOTE,SYMBOLP,XARGS,DECLARE,ARGS,FN,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="APPLY$-LAMBDA-LOGICAL">apply$-lambda-logical</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-apply_24-lambda-logical" data-sym="APPLY$-LAMBDA-LOGICAL" title="(defmacro apply$-lambda-logical (fn args)
  (declare (xargs :guard (symbolp fn)))
  `(ev$ (lambda-object-body ,fn)
        (ec-call (pairlis$ (lambda-object-formals ,fn) ,args))))">apply$-lambda-logical</a>
  (fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (xargs <span class="keyword">:guard</span> (symbolp fn)))
  `(ev$ (<a class="sym-link system" href="axioms.html#def-lambda-object-body" data-sym="LAMBDA-OBJECT-BODY">lambda-object-body</a> ,FN)
    (<a class="sym-link system" href="axioms.html#def-ec-call" data-sym="EC-CALL">ec-call</a> (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="axioms.html#def-lambda-object-formals" data-sym="LAMBDA-OBJECT-FORMALS">lambda-object-formals</a> ,FN) ,ARGS))))</pre>
  </div>

<div class="form-block macro" id="def-our-quote-macro" data-defines="OUR-QUOTE-MACRO" data-references="QUOTE,LIST,X,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="OUR-QUOTE-MACRO">our-quote-macro</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-our-quote-macro" data-sym="OUR-QUOTE-MACRO" title="(defmacro our-quote-macro (x) (list &#39;quote x))">our-quote-macro</a> (x) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote x))</pre>
  </div>

<div class="form-block function" id="def-value-triple-fn1" data-defines="VALUE-TRIPLE-FN1" data-references="TILDE-@P,COLLECT-NON-NIL-DF,STOBJS,LET,LIST,CADDR,LENGTH,=,SOFT,ER,CONS,MSG,OUTPUT-MSG,FLET,NOT,CADR,VAL0,*ERROR-TRIPLE-DF-SIG*,ERROR-TRIPLE-P+,*ERROR-TRIPLE-SIG*,ERROR-TRIPLE-P,REPLACED-VAL,STOBJS-OUT,LET*,TRANS-EVAL-NO-WARNING,IF,PROTECT-SYSTEM-STATE-GLOBALS,TTAGS-ALLOWED,STATE-GLOBAL-LET*,REVERT-WORLD,TRANS-EVAL,CDDR,NULL,CDR,CAR,CONSP,AND,QUASIQUOTE,MV,KEYWORDP,EQ,EQUAL,COND,STOBJS-OUT/REPLACED-VAL,QUOTE,OR,VALUE,ER-LET*,T,XARGS,DECLARE,STATE,CTX,STOBJS-OUT0,CHECK,FORM,DEFUN" data-used-by="VALUE-TRIPLE-FN" data-part-name="VALUE-TRIPLE-FN1" data-part-args="STATE,CTX,STOBJS-OUT0,CHECK,FORM" data-part-declare="T,XARGS,DECLARE" data-part-body="TILDE-@P,CHECK,COLLECT-NON-NIL-DF,STOBJS,LET,LIST,CADDR,LENGTH,=,SOFT,ER,CONS,MSG,OUTPUT-MSG,FLET,NOT,CADR,VAL0,*ERROR-TRIPLE-DF-SIG*,ERROR-TRIPLE-P+,*ERROR-TRIPLE-SIG*,ERROR-TRIPLE-P,REPLACED-VAL,STOBJS-OUT,LET*,TRANS-EVAL-NO-WARNING,IF,PROTECT-SYSTEM-STATE-GLOBALS,TTAGS-ALLOWED,STATE-GLOBAL-LET*,REVERT-WORLD,CTX,TRANS-EVAL,CDDR,NULL,CDR,CAR,CONSP,AND,STATE,QUASIQUOTE,MV,KEYWORDP,T,FORM,EQ,EQUAL,COND,STOBJS-OUT/REPLACED-VAL,QUOTE,OR,VALUE,STOBJS-OUT0,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="VALUE-TRIPLE-FN1">value-triple-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-value-triple-fn1" data-sym="VALUE-TRIPLE-FN1" title="(defun value-triple-fn1 (form check stobjs-out0 ctx state)
  (declare (xargs :guard t))
  (er-let*
   ((stobjs-out0 (value (or stobjs-out0 &#39;(nil))))
    (stobjs-out/replaced-val
...">value-triple-fn1</a>
  (form check stobjs-out0 ctx state)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((stobjs-out0 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> stobjs-out0 '(nil)))) (stobjs-out/replaced-val (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal stobjs-out0 '(nil)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> form <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> form nil) (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> form)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil `((nil) . ,FORM) state))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp form)
                 (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) 'quote)
                 (consp (cdr form))
                 (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil `((nil) . ,(CADR FORM)) state))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (trans-eval `(<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> ,FORM) ctx state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="prove.html#def-revert-world" data-sym="REVERT-WORLD">revert-world</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((ttags-allowed nil))
                (<a class="sym-link system" href="history-management.html#def-protect-system-state-globals" data-sym="PROTECT-SYSTEM-STATE-GLOBALS">protect-system-state-globals</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> stobjs-out0 <span class="keyword">:auto</span>)
                    (trans-eval form ctx state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                    (trans-eval-no-warning form ctx state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))))))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (car stobjs-out/replaced-val)) (replaced-val (cdr stobjs-out/replaced-val))
        (error-triple-p (equal <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>))
        (error-triple-p+ (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> error-triple-p (equal <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-df-sig_2A" data-sym="*ERROR-TRIPLE-DF-SIG*">*error-triple-df-sig*</a>)))
        (val0 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (error-triple-p+ (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> replaced-val))
            ((cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) (car replaced-val))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> replaced-val))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> stobjs-out0 <span class="keyword">:auto</span>)
             (equal <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> stobjs-out0)
             (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal stobjs-out0 '(nil)) error-triple-p))) (flet ((output-msg (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
               (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> '(nil)) <span class="string">"an ordinary (non-stobj, non-df) value"</span>)
                 ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) <span class="keyword">:df</span>) <span class="string">"a single :DF value"</span>)
                     (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"a single stobj value, ~x0"</span> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))))
                 (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"multiple values of shape ~x0"</span> (cons '<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))))))
            (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Expected ~@0, but got ~@1.~@2"</span>
              (output-msg stobjs-out0)
              (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal stobjs-out0 '(nil))
                  (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) <span class="number">3</span>)
                  (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) 'state))
                (output-msg (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))
                (output-msg <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))
              (let ((stobjs (if (equal stobjs-out0 '(nil))
                     nil
                     (<a class="sym-link system" href="basis-b.html#def-collect-non-nil-df" data-sym="COLLECT-NON-NIL-DF">collect-non-nil-df</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> stobjs) <span class="string">""</span>)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Note that in spite of the error, evaluation ~
                               may have modified the stobj~#0~[~/s~] ~&amp;0."</span>
                      stobjs)))))))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> error-triple-p+ (car replaced-val)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"Evaluation failed: Result was of the form (mv t _ state).  See ~
             :DOC error-triple."</span>
            (car replaced-val)))
        (check (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) <span class="keyword">:df</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"Ill-formed assertion: The~@0 value returned is ~@1."</span>
                (if (cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
                  <span class="string">" first"</span>
                  <span class="string">""</span>)
                (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) 'state)
                  <span class="string">"the ACL2 state"</span>
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"the stobj, ~x0"</span> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))))
            (val0 (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:passed</span>))
            ((<a class="sym-link system" href="history-management.html#def-tilde-_40p" data-sym="TILDE-@P">tilde-@p</a> check) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"Assertion failed:~%~@0~|"</span> check))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"Assertion failed on form:~%~x0~|"</span> form))))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) <span class="keyword">:df</span>))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val0))))))</pre>
  </div>

<div class="form-block function" id="def-chk-value-triple" data-defines="CHK-VALUE-TRIPLE" data-references="VALUE,T,SYMBOL-LISTP,MSGP,SOFT,ER,EQ,BOOLEANP,OR,NOT,COND,STATE,CTX,STOBJS-OUT,SAFE-MODE,CHECK,ON-SKIP-PROOFS,DEFUN" data-used-by="VALUE-TRIPLE-FN" data-part-name="CHK-VALUE-TRIPLE" data-part-args="STATE,CTX,STOBJS-OUT,SAFE-MODE,CHECK,ON-SKIP-PROOFS" data-part-body="VALUE,T,SYMBOL-LISTP,STOBJS-OUT,SAFE-MODE,MSGP,CHECK,CTX,SOFT,ER,EQ,ON-SKIP-PROOFS,BOOLEANP,OR,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-VALUE-TRIPLE">chk-value-triple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-value-triple" data-sym="CHK-VALUE-TRIPLE" title="(defun chk-value-triple (on-skip-proofs check safe-mode stobjs-out ctx state)
  (cond
   ((not (or (booleanp on-skip-proofs) (eq on-skip-proofs :interactive)))
    (er soft ctx
        &quot;The value of keyword argument :ON-SKIP-PROOFS must be Boolean or ~
...">chk-value-triple</a>
  (on-skip-proofs check safe-mode <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> on-skip-proofs)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> on-skip-proofs <span class="keyword">:interactive</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The value of keyword argument :ON-SKIP-PROOFS must be Boolean or ~
         :INTERACTIVE, but ~x0 is not."</span>
        on-skip-proofs))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> check) (<a class="sym-link system" href="axioms.html#def-msgp" data-sym="MSGP">msgp</a> check))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The value of keyword argument :CHECK must be Boolean or satisfy the ~
         predicate msgp.  The value ~x0 is thus illegal."</span>
        check))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> safe-mode) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> safe-mode <span class="keyword">:same</span>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The value of keyword argument :SAFE-MODE must be Boolean, but ~x0 is ~
         not."</span>
        safe-mode))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <span class="keyword">:auto</span>) (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        ctx
        <span class="string">"The value of keyword argument :STOBJS-OUT must either be :AUTO or ~
         satisfy symbol-listp.  The value ~x0 is thus illegal."</span>
        <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-value-triple-fn" data-defines="VALUE-TRIPLE-FN" data-references="IF,STATE-GLOBAL-LET*,VALUE-TRIPLE-FN1,OR,INCLUDE-BOOK,EQ,VALUE,LD-SKIP-PROOFSP,QUOTE,F-GET-GLOBAL,NOT,AND,COND,CHK-VALUE-TRIPLE,ER-PROGN,T,XARGS,DECLARE,STATE,CTX,STOBJS-OUT,SAFE-MODE,CHECK,ON-SKIP-PROOFS,FORM,DEFUN" data-part-name="VALUE-TRIPLE-FN" data-part-args="STATE,CTX,STOBJS-OUT,SAFE-MODE,CHECK,ON-SKIP-PROOFS,FORM" data-part-declare="T,XARGS,DECLARE" data-part-body="IF,STATE-GLOBAL-LET*,T,FORM,VALUE-TRIPLE-FN1,OR,INCLUDE-BOOK,EQ,VALUE,LD-SKIP-PROOFSP,QUOTE,F-GET-GLOBAL,NOT,AND,COND,STATE,CTX,STOBJS-OUT,SAFE-MODE,CHECK,ON-SKIP-PROOFS,CHK-VALUE-TRIPLE,ER-PROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="VALUE-TRIPLE-FN">value-triple-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-value-triple-fn" data-sym="VALUE-TRIPLE-FN" title="(defun value-triple-fn
       (form on-skip-proofs check safe-mode stobjs-out ctx state)
  (declare (xargs :guard t))
  (er-progn
   (chk-value-triple on-skip-proofs check safe-mode stobjs-out ctx state)
...">value-triple-fn</a>
  (form on-skip-proofs check safe-mode <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> ctx state)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-value-triple" data-sym="CHK-VALUE-TRIPLE" title="(defun chk-value-triple (on-skip-proofs check safe-mode stobjs-out ctx state)
  (cond
   ((not (or (booleanp on-skip-proofs) (eq on-skip-proofs :interactive)))
    (er soft ctx
        &quot;The value of keyword argument :ON-SKIP-PROOFS must be Boolean or ~
...">chk-value-triple</a> on-skip-proofs
      check
      safe-mode
      <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
      ctx
      state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> on-skip-proofs)
         (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:skipped</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> on-skip-proofs <span class="keyword">:interactive</span>)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> state) '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:skipped</span>))
      ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> safe-mode <span class="keyword">:same</span>)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> safe-mode (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'safe-mode state))) (<a class="sym-link local-def" href="#def-value-triple-fn1" data-sym="VALUE-TRIPLE-FN1" title="(defun value-triple-fn1 (form check stobjs-out0 ctx state)
  (declare (xargs :guard t))
  (er-let*
   ((stobjs-out0 (value (or stobjs-out0 &#39;(nil))))
    (stobjs-out/replaced-val
...">value-triple-fn1</a> form check <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> ctx state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((safe-mode (if safe-mode
               <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
               nil)))
          (<a class="sym-link local-def" href="#def-value-triple-fn1" data-sym="VALUE-TRIPLE-FN1" title="(defun value-triple-fn1 (form check stobjs-out0 ctx state)
  (declare (xargs :guard t))
  (er-let*
   ((stobjs-out0 (value (or stobjs-out0 &#39;(nil))))
    (stobjs-out/replaced-val
...">value-triple-fn1</a> form check <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> ctx state))))))</pre>
  </div>

<div class="form-block function" id="def-collect-non-redundant" data-defines="COLLECT-NON-REDUNDANT" data-references="CONS,T,CDR,GET-EVENT,EQUAL,CADR,SYMBOLP,CAR,TRUE-LISTP,AND,ENDP,COND,WRLD,EVENTS,DEFUN" data-used-by="PARTIAL-FUNCTIONS-TABLE-GUARD-MSG" data-part-name="COLLECT-NON-REDUNDANT" data-part-args="WRLD,EVENTS" data-part-body="CONS,T,CDR,COLLECT-NON-REDUNDANT,WRLD,GET-EVENT,EQUAL,CADR,SYMBOLP,CAR,TRUE-LISTP,AND,EVENTS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-NON-REDUNDANT">collect-non-redundant</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-non-redundant" data-sym="COLLECT-NON-REDUNDANT" title="(defun collect-non-redundant (events wrld)
  (cond ((endp events) nil)
        ((and (true-listp (car events)) (symbolp (cadr (car events)))
              (equal (get-event (cadr (car events)) wrld) (car events)))
         (collect-non-redundant (cdr events) wrld))">collect-non-redundant</a>
  (events wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> events) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (car events))
       (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car events)))
       (equal (get-event (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car events)) wrld) (car events))) (<a class="sym-link local-def" href="#def-collect-non-redundant" data-sym="COLLECT-NON-REDUNDANT" title="(defun collect-non-redundant (events wrld)
  (cond ((endp events) nil)
        ((and (true-listp (car events)) (symbolp (cadr (car events)))
              (equal (get-event (cadr (car events)) wrld) (car events)))
         (collect-non-redundant (cdr events) wrld))">collect-non-redundant</a> (cdr events) wrld))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car events)
        (<a class="sym-link local-def" href="#def-collect-non-redundant" data-sym="COLLECT-NON-REDUNDANT" title="(defun collect-non-redundant (events wrld)
  (cond ((endp events) nil)
        ((and (true-listp (car events)) (symbolp (cadr (car events)))
              (equal (get-event (cadr (car events)) wrld) (car events)))
         (collect-non-redundant (cdr events) wrld))">collect-non-redundant</a> (cdr events) wrld)))))</pre>
  </div>

<div class="form-block function" id="def-remove-var-from-type-dcls" data-defines="REMOVE-VAR-FROM-TYPE-DCLS" data-references="TYPE,QUASIQUOTE,CONS,NULL,CDR,REMOVE-EQ,VARS,TP,CAR,D,LET*,T,ENDP,COND,TYPE-DCLS,VAR,DEFUN" data-used-by="MEMOIZE-PARTIAL-DECLARE,MEMOIZE-PARTIAL-DEF" data-part-name="REMOVE-VAR-FROM-TYPE-DCLS" data-part-args="TYPE-DCLS,VAR" data-part-body="TYPE,QUASIQUOTE,CONS,REMOVE-VAR-FROM-TYPE-DCLS,NULL,CDR,VAR,REMOVE-EQ,VARS,TP,CAR,D,LET*,T,TYPE-DCLS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-VAR-FROM-TYPE-DCLS">remove-var-from-type-dcls</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-var-from-type-dcls" data-sym="REMOVE-VAR-FROM-TYPE-DCLS" title="(defun remove-var-from-type-dcls (var type-dcls)
  (cond ((endp type-dcls) nil)
        (t
         (let* ((d (car type-dcls)) (tp (car d)) (vars (remove-eq var (cdr d))))
           (cond ((null vars) (remove-var-from-type-dcls var (cdr type-dcls)))
...">remove-var-from-type-dcls</a>
  (var type-dcls)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> type-dcls) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((d (car type-dcls)) (tp (car d))
          (vars (<a class="sym-link system" href="axioms.html#def-remove-eq" data-sym="REMOVE-EQ">remove-eq</a> var (cdr d))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> vars) (<a class="sym-link local-def" href="#def-remove-var-from-type-dcls" data-sym="REMOVE-VAR-FROM-TYPE-DCLS" title="(defun remove-var-from-type-dcls (var type-dcls)
  (cond ((endp type-dcls) nil)
        (t
         (let* ((d (car type-dcls)) (tp (car d)) (vars (remove-eq var (cdr d))))
           (cond ((null vars) (remove-var-from-type-dcls var (cdr type-dcls)))
...">remove-var-from-type-dcls</a> var (cdr type-dcls)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons `(type ,TP ,@VARS)
              (<a class="sym-link local-def" href="#def-remove-var-from-type-dcls" data-sym="REMOVE-VAR-FROM-TYPE-DCLS" title="(defun remove-var-from-type-dcls (var type-dcls)
  (cond ((endp type-dcls) nil)
        (t
         (let* ((d (car type-dcls)) (tp (car d)) (vars (remove-eq var (cdr d))))
           (cond ((null vars) (remove-var-from-type-dcls var (cdr type-dcls)))
...">remove-var-from-type-dcls</a> var (cdr type-dcls)))))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-def" data-defines="MEMOIZE-PARTIAL-DEF" data-references="INLINE,FLET,IGNORABLE,DECLARE,QUASIQUOTE,TYPE,FETCH-DCL-FIELD,REMOVE-VAR-FROM-TYPE-DCLS,TYPE-DCLS,CDDR,DCLS,BODY,BUTLAST,FN-FORMALS,1-,LET,!LIMIT,ZP,IF,REST,FN-LIMIT-BODY,NULL,CADR,EQUAL,AND,STRIP-CDRS,ASSOC-EQ,DEFS,MUTUAL-RECURSION,CDR,&,!FN-LIMIT-FORMALS,!FN-LIMIT,CASE-MATCH,DEF,LAST,CAR,CONSP,ASSERT$,LIMIT,CLTL-DEF-FROM-NAME,EV,LET*,T,CONS,STOBJS-OUT,COLLECT-USER-STOBJS,STATE,QUOTE,MEMBER-EQ,COND,WRLD,FLET-BINDINGS,FN-LIMIT-FORMALS,FN-LIMIT,FN,DEFUN" data-used-by="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-1" data-part-name="MEMOIZE-PARTIAL-DEF" data-part-args="WRLD,FLET-BINDINGS,FN-LIMIT-FORMALS,FN-LIMIT,FN" data-part-body="INLINE,FLET,IGNORABLE,DECLARE,QUASIQUOTE,TYPE,FETCH-DCL-FIELD,REMOVE-VAR-FROM-TYPE-DCLS,TYPE-DCLS,CDDR,DCLS,BODY,BUTLAST,FN-FORMALS,1-,LET,!LIMIT,ZP,IF,REST,FN-LIMIT-BODY,NULL,CADR,EQUAL,AND,STRIP-CDRS,ASSOC-EQ,DEFS,MUTUAL-RECURSION,CDR,&,!FN-LIMIT-FORMALS,!FN-LIMIT,DEFUN,CASE-MATCH,DEF,LAST,CAR,CONSP,ASSERT$,LIMIT,CLTL-DEF-FROM-NAME,EV,LET*,T,CONS,WRLD,FN-LIMIT,STOBJS-OUT,COLLECT-USER-STOBJS,FN-LIMIT-FORMALS,STATE,QUOTE,MEMBER-EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-DEF">memoize-partial-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-def" data-sym="MEMOIZE-PARTIAL-DEF" title="(defun memoize-partial-def (fn fn-limit fn-limit-formals flet-bindings wrld)
  (cond ((member-eq &#39;state fn-limit-formals) :state)
        ((collect-user-stobjs (stobjs-out fn-limit wrld))
         (cons :stobjs (collect-user-stobjs (stobjs-out fn-limit wrld))))
        (t
...">memoize-partial-def</a>
  (fn fn-limit fn-limit-formals <a class="sym-link local-def" href="#def-flet-bindings" data-sym="FLET-BINDINGS" title="(defun flet-bindings (tuples wrld)
  (cond ((endp tuples) nil)
        (t
         (cons
          (let* ((tuple (car tuples))
...">flet-bindings</a> wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state fn-limit-formals) <span class="keyword">:state</span>)
    ((collect-user-stobjs (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> fn-limit wrld)) (cons <span class="keyword">:stobjs</span> (collect-user-stobjs (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> fn-limit wrld))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ev (cltl-def-from-name fn-limit wrld)) (limit (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (consp fn-limit-formals)
              (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> fn-limit-formals))))
          (def (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> ev
              (('<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> !fn-limit !fn-limit-formals . &amp;) (cdr ev))
              (('<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> . defs) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((def (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> fn-limit (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> defs))))
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def) fn-limit-formals) def)))
              (&amp; nil))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> def) <span class="keyword">:definition-not-found</span>)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn-limit-body (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> ev))) (<a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> fn-limit-body
                    (('if ('<a class="sym-link system" href="axioms.html#def-zp" data-sym="ZP">zp</a> !limit) &amp; ('let ((!limit ('<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> !limit))) . <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)) <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)
                    (('<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (('<a class="sym-link system" href="axioms.html#def-zp" data-sym="ZP">zp</a> !limit) &amp;)
                       (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ('let ((!limit ('<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> !limit))) . <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>))) <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)
                    (&amp; nil))))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>
                (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn-formals (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> fn-limit-formals <span class="number">1</span>)) (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)))
                    (dcls (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> def) <span class="number">1</span>))
                    (type-dcls (<a class="sym-link local-def" href="#def-remove-var-from-type-dcls" data-sym="REMOVE-VAR-FROM-TYPE-DCLS" title="(defun remove-var-from-type-dcls (var type-dcls)
  (cond ((endp type-dcls) nil)
        (t
         (let* ((d (car type-dcls)) (tp (car d)) (vars (remove-eq var (cdr d))))
           (cond ((null vars) (remove-var-from-type-dcls var (cdr type-dcls)))
...">remove-var-from-type-dcls</a> limit
                        (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> 'type dcls))))
                  `(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> ,FN
                    ,FN-FORMALS
                    (declare (ignorable ,@FN-FORMALS))
                    ,@(AND TYPE-DCLS `((DECLARE ,@TYPE-DCLS)))
                    (flet ,FLET-BINDINGS
                      (declare (inline ,FN-LIMIT))
                      (let ((,LIMIT <span class="number">0</span>))
                        (declare (ignorable ,LIMIT))
                        ,BODY))))))))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-declare" data-defines="MEMOIZE-PARTIAL-DECLARE" data-references="XARGS,DECLARE,QUASIQUOTE,GUARD-SIMPLIFY-LST,SPLIT-TYPES-LST,CONJOIN-UNTRANSLATED-TERMS,GUARD,TYPE,FETCH-DCL-FIELD,REMOVE-VAR-FROM-TYPE-DCLS,TYPE-LST,CDDR,BUTLAST,DCLS,HARD,ER,STRIP-CDRS,ASSOC-EQ,DEFS,MUTUAL-RECURSION,CDR,&,!FN-LIMIT,QUOTE,CASE-MATCH,DEF,GET-EVENT,EV,LET*,WRLD,LIMIT,FN-LIMIT,DEFUN" data-part-name="MEMOIZE-PARTIAL-DECLARE" data-part-args="WRLD,LIMIT,FN-LIMIT" data-part-body="XARGS,DECLARE,QUASIQUOTE,GUARD-SIMPLIFY-LST,SPLIT-TYPES-LST,CONJOIN-UNTRANSLATED-TERMS,GUARD,TYPE,FETCH-DCL-FIELD,LIMIT,REMOVE-VAR-FROM-TYPE-DCLS,TYPE-LST,CDDR,BUTLAST,DCLS,MEMOIZE-PARTIAL-DECLARE,HARD,ER,STRIP-CDRS,ASSOC-EQ,DEFS,MUTUAL-RECURSION,CDR,&,!FN-LIMIT,DEFUN,QUOTE,CASE-MATCH,DEF,WRLD,FN-LIMIT,GET-EVENT,EV,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-DECLARE">memoize-partial-declare</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-declare" data-sym="MEMOIZE-PARTIAL-DECLARE" title="(defun memoize-partial-declare (fn-limit limit wrld)
  (let* ((ev (get-event fn-limit wrld))
         (def
          (case-match ev ((&#39;defun !fn-limit . &amp;) (cdr ev))
                      ((&#39;mutual-recursion . defs)
...">memoize-partial-declare</a>
  (fn-limit limit wrld)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ev (get-event fn-limit wrld)) (def (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> ev
          (('<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> !fn-limit . &amp;) (cdr ev))
          (('<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> . defs) (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> fn-limit (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> defs)))
          (&amp; (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
              '<a class="sym-link local-def" href="#def-memoize-partial-declare" data-sym="MEMOIZE-PARTIAL-DECLARE" title="(defun memoize-partial-declare (fn-limit limit wrld)
  (let* ((ev (get-event fn-limit wrld))
         (def
          (case-match ev ((&#39;defun !fn-limit . &amp;) (cdr ev))
                      ((&#39;mutual-recursion . defs)
...">memoize-partial-declare</a>
              <span class="string">"Implementation error: Unable to find event for the ~
                    alleged function, ~x0"</span>
              fn-limit))))
      (dcls (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> def) <span class="number">1</span>))
      (type-lst (<a class="sym-link local-def" href="#def-remove-var-from-type-dcls" data-sym="REMOVE-VAR-FROM-TYPE-DCLS" title="(defun remove-var-from-type-dcls (var type-dcls)
  (cond ((endp type-dcls) nil)
        (t
         (let* ((d (car type-dcls)) (tp (car d)) (vars (remove-eq var (cdr d))))
           (cond ((null vars) (remove-var-from-type-dcls var (cdr type-dcls)))
...">remove-var-from-type-dcls</a> limit
          (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> 'type dcls)))
      (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> (<a class="sym-link system" href="axioms.html#def-conjoin-untranslated-terms" data-sym="CONJOIN-UNTRANSLATED-TERMS">conjoin-untranslated-terms</a> (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> <span class="keyword">:guard</span> dcls)))
      (split-types-lst (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> <span class="keyword">:split-types</span> dcls))
      (guard-simplify-lst (<a class="sym-link system" href="axioms.html#def-fetch-dcl-field" data-sym="FETCH-DCL-FIELD">fetch-dcl-field</a> <span class="keyword">:guard-simplify</span> dcls)))
    `(declare ,@TYPE-LST
      (xargs <span class="keyword">:guard</span> ,(IF (EQ GUARD T)
     T
     `(LET ((,LIMIT 0))
        (DECLARE (IGNORABLE ,LIMIT))
        ,GUARD))
        ,@(AND SPLIT-TYPES-LST (PAIRLIS-X1 :SPLIT-TYPES SPLIT-TYPES-LST))
        ,@(AND GUARD-SIMPLIFY-LST (PAIRLIS-X1 :GUARD-SIMPLIFY GUARD-SIMPLIFY-LST))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-supporting-events-1" data-defines="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-1" data-references="EQUAL,NOT,<=,NATP,AND,DEFCHOOSE,QUASIQUOTE,GENVAR,LARGE,BUTLAST,FN-FORMALS,LAST,CONSP,ASSERT$,LIMIT,T,NULL,CDR,CAR,MSG,MV,EQ,COND,MEMOIZE-PARTIAL-DEF,DEF,FORMALS,FN-LIMIT-FORMALS,LET*,WRLD,FLET-BINDINGS,FN-LIMIT-STABLE,FN-LIMIT-CHANGE,FN-LIMIT,FN,DEFUN" data-used-by="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC" data-part-name="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-1" data-part-args="WRLD,FLET-BINDINGS,FN-LIMIT-STABLE,FN-LIMIT-CHANGE,FN-LIMIT,FN" data-part-body="EQUAL,NOT,<=,NATP,AND,DEFCHOOSE,QUASIQUOTE,GENVAR,LARGE,BUTLAST,FN-FORMALS,LAST,CONSP,ASSERT$,LIMIT,T,NULL,CDR,CAR,MSG,MV,EQ,COND,FLET-BINDINGS,FN,MEMOIZE-PARTIAL-DEF,DEF,WRLD,FN-LIMIT,FORMALS,FN-LIMIT-FORMALS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-1">memoize-partial-supporting-events-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-supporting-events-1" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-1" title="(defun memoize-partial-supporting-events-1
       (fn fn-limit fn-limit-change fn-limit-stable flet-bindings wrld)
  (let* ((fn-limit-formals (formals fn-limit wrld))
         (def
          (memoize-partial-def fn fn-limit fn-limit-formals flet-bindings
...">memoize-partial-supporting-events-1</a>
  (fn fn-limit
    fn-limit-change
    fn-limit-stable
    <a class="sym-link local-def" href="#def-flet-bindings" data-sym="FLET-BINDINGS" title="(defun flet-bindings (tuples wrld)
  (cond ((endp tuples) nil)
        (t
         (cons
          (let* ((tuple (car tuples))
...">flet-bindings</a>
    wrld)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn-limit-formals (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> fn-limit wrld)) (def (<a class="sym-link local-def" href="#def-memoize-partial-def" data-sym="MEMOIZE-PARTIAL-DEF" title="(defun memoize-partial-def (fn fn-limit fn-limit-formals flet-bindings wrld)
  (cond ((member-eq &#39;state fn-limit-formals) :state)
        ((collect-user-stobjs (stobjs-out fn-limit wrld))
         (cons :stobjs (collect-user-stobjs (stobjs-out fn-limit wrld))))
        (t
...">memoize-partial-def</a> fn
          fn-limit
          fn-limit-formals
          <a class="sym-link local-def" href="#def-flet-bindings" data-sym="FLET-BINDINGS" title="(defun flet-bindings (tuples wrld)
  (cond ((endp tuples) nil)
        (t
         (cons
          (let* ((tuple (car tuples))
...">flet-bindings</a>
          wrld)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> def <span class="keyword">:definition-not-found</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Implementation error: Unable to find the definition of ~x0."</span>
            fn-limit)
          nil
          nil))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> def <span class="keyword">:state</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"STATE is among the formals of ~x0, which is illegal for ~
                memoization."</span>
            fn-limit)
          nil
          nil))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) <span class="keyword">:stobjs</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The stobj~#0~[ ~&amp;0 is~/s ~&amp;0 are~] returned by ~x1, which is ~
                illegal for memoization."</span>
            (cdr def)
            fn-limit)
          nil
          nil))
      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> def) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The (untranslated) body of function ~x0 is not of the ~
                appropriate form."</span>
            fn-limit)
          nil
          nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((limit (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (consp fn-limit-formals)
               (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> fn-limit-formals)))) (fn-formals (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> fn-limit-formals <span class="number">1</span>))
            (large (<a class="sym-link system" href="basis-b.html#def-genvar" data-sym="GENVAR">genvar</a> limit <span class="string">"LARGE"</span> nil fn-limit-formals)))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
            `((<a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a> ,FN-LIMIT-CHANGE
               (,LARGE)
               ,FN-LIMIT-FORMALS
               (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> ,LARGE)
                 (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> ,LIMIT ,LARGE)
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (,FN-LIMIT ,@FN-LIMIT-FORMALS)
                     (,FN-LIMIT ,@FN-FORMALS ,LARGE))))) (<a class="sym-link system" href="axioms.html#def-defchoose" data-sym="DEFCHOOSE">defchoose</a> ,FN-LIMIT-STABLE
                (,LIMIT)
                ,FN-FORMALS
                (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> ,LIMIT)
                  (equal (,FN-LIMIT ,@FN-LIMIT-FORMALS)
                    (,FN-LIMIT ,@FN-FORMALS
                      (,FN-LIMIT-CHANGE ,@FN-LIMIT-FORMALS)))))
              ,(LET* ((STOBJS-IN (STOBJS-IN FN-LIMIT WRLD))
        (STOBJS (COLLECT-USER-STOBJS STOBJS-IN)))
   `(DEFUN ,FN ,FN-FORMALS
      ,(MEMOIZE-PARTIAL-DECLARE FN-LIMIT LIMIT WRLD)
      ,@(AND STOBJS `((DECLARE (XARGS :STOBJS ,@STOBJS))))
      (,FN-LIMIT ,@FN-FORMALS
       (NFIX (NON-EXEC (,FN-LIMIT-STABLE ,@FN-FORMALS)))))))
            `(,FN ,FN-LIMIT ,FN-LIMIT-CHANGE ,FN-LIMIT-STABLE ,DEF)))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-supporting-events-rec" data-defines="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC" data-references="CONS,REVAPPEND,CADDDR,CADDR,MEMOIZE-PARTIAL-SUPPORTING-EVENTS-1,TUPLE,LET,TABLE-TUPLE,DEFS1,MSG1,MV-LET,T,WORLD,TABLE-ALIST,ASSOC-EQ,CDR,PUT-ASSOC-EQ-ALIST,QUOTE,PARTIAL-FUNCTIONS-TABLE,TABLE,QUASIQUOTE,CAR,CADR,KEY,VAL,LET*,REVERSE,AND,MV,ENDP,COND,TABLE-TUPLES,DEFS,MSG,WRLD,FLET-BINDINGS,TUPLES,DEFUN" data-used-by="MEMOIZE-PARTIAL-SUPPORTING-EVENTS" data-part-name="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC" data-part-args="TABLE-TUPLES,DEFS,MSG,WRLD,FLET-BINDINGS,TUPLES" data-part-body="CONS,REVAPPEND,MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC,WRLD,FLET-BINDINGS,CADDDR,CADDR,MEMOIZE-PARTIAL-SUPPORTING-EVENTS-1,TUPLE,LET,TABLE-TUPLE,DEFS1,MSG1,MV-LET,T,WORLD,TABLE-ALIST,ASSOC-EQ,CDR,PUT-ASSOC-EQ-ALIST,QUOTE,PARTIAL-FUNCTIONS-TABLE,TABLE,QUASIQUOTE,CAR,CADR,KEY,TABLE-TUPLES,VAL,LET*,DEFS,REVERSE,MSG,AND,MV,TUPLES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC">memoize-partial-supporting-events-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-supporting-events-rec" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC" title="(defun memoize-partial-supporting-events-rec
       (tuples flet-bindings wrld msg defs table-tuples)
  (cond
   ((endp tuples)
    (mv (and msg (msg &quot;~|~@0~|See :DOC memoize-partial.~|&quot; msg)) (reverse defs)
...">memoize-partial-supporting-events-rec</a>
  (tuples <a class="sym-link local-def" href="#def-flet-bindings" data-sym="FLET-BINDINGS" title="(defun flet-bindings (tuples wrld)
  (cond ((endp tuples) nil)
        (t
         (cons
          (let* ((tuple (car tuples))
...">flet-bindings</a> wrld <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> defs table-tuples)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> tuples) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~|~@0~|See :DOC memoize-partial.~|"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
        (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> defs)
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((val (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> table-tuples)) (key (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car val))))
          `(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> partial-functions-table
            ',KEY
            (put-assoc-eq-alist (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> ',KEY
                  (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'partial-functions-table world)))
              ',VAL)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (msg1 defs1 table-tuple)
        (let ((tuple (car tuples)))
          (<a class="sym-link local-def" href="#def-memoize-partial-supporting-events-1" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-1" title="(defun memoize-partial-supporting-events-1
       (fn fn-limit fn-limit-change fn-limit-stable flet-bindings wrld)
  (let* ((fn-limit-formals (formals fn-limit wrld))
         (def
          (memoize-partial-def fn fn-limit fn-limit-formals flet-bindings
...">memoize-partial-supporting-events-1</a> (car tuple)
            (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple)
            (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> tuple)
            (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> tuple)
            <a class="sym-link local-def" href="#def-flet-bindings" data-sym="FLET-BINDINGS" title="(defun flet-bindings (tuples wrld)
  (cond ((endp tuples) nil)
        (t
         (cons
          (let* ((tuple (car tuples))
...">flet-bindings</a>
            wrld))
        (<a class="sym-link local-def" href="#def-memoize-partial-supporting-events-rec" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC" title="(defun memoize-partial-supporting-events-rec
       (tuples flet-bindings wrld msg defs table-tuples)
  (cond
   ((endp tuples)
    (mv (and msg (msg &quot;~|~@0~|See :DOC memoize-partial.~|&quot; msg)) (reverse defs)
...">memoize-partial-supporting-events-rec</a> (cdr tuples)
          <a class="sym-link local-def" href="#def-flet-bindings" data-sym="FLET-BINDINGS" title="(defun flet-bindings (tuples wrld)
  (cond ((endp tuples) nil)
        (t
         (cons
          (let* ((tuple (car tuples))
...">flet-bindings</a>
          wrld
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (msg1 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~|~@1"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> msg1)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> msg1)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
          (<a class="sym-link system" href="axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> defs1 defs)
          (cons table-tuple table-tuples))))))</pre>
  </div>

<div class="form-block function" id="def-flet-bindings" data-defines="FLET-BINDINGS" data-references="CDR,IGNORE,DECLARE,QUASIQUOTE,BUTLAST,FN-FORMALS,LAST,LIMIT,FORMALS,FN-LIMIT-FORMALS,CADR,FN-LIMIT,FN,CAR,TUPLE,LET*,CONS,T,ENDP,COND,WRLD,TUPLES,DEFUN" data-used-by="MEMOIZE-PARTIAL-SUPPORTING-EVENTS,MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC,MEMOIZE-PARTIAL-SUPPORTING-EVENTS-1,MEMOIZE-PARTIAL-DEF" data-part-name="FLET-BINDINGS" data-part-args="WRLD,TUPLES" data-part-body="CDR,FLET-BINDINGS,IGNORE,DECLARE,QUASIQUOTE,BUTLAST,FN-FORMALS,LAST,LIMIT,WRLD,FORMALS,FN-LIMIT-FORMALS,CADR,FN-LIMIT,FN,CAR,TUPLE,LET*,CONS,T,TUPLES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLET-BINDINGS">flet-bindings</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flet-bindings" data-sym="FLET-BINDINGS" title="(defun flet-bindings (tuples wrld)
  (cond ((endp tuples) nil)
        (t
         (cons
          (let* ((tuple (car tuples))
...">flet-bindings</a>
  (tuples wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> tuples) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tuple (car tuples)) (fn (car tuple))
            (fn-limit (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple))
            (fn-limit-formals (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> fn-limit wrld))
            (limit (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> fn-limit-formals)))
            (fn-formals (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> fn-limit-formals <span class="number">1</span>)))
          `(,FN-LIMIT ,FN-LIMIT-FORMALS
            (declare (ignore ,LIMIT))
            (,FN ,@FN-FORMALS)))
        (<a class="sym-link local-def" href="#def-flet-bindings" data-sym="FLET-BINDINGS" title="(defun flet-bindings (tuples wrld)
  (cond ((endp tuples) nil)
        (t
         (cons
          (let* ((tuple (car tuples))
...">flet-bindings</a> (cdr tuples) wrld)))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-supporting-events" data-defines="MEMOIZE-PARTIAL-SUPPORTING-EVENTS" data-references="FLET-BINDINGS,MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC,WRLD,TUPLES,DEFUN" data-used-by="MEMOIZE-PARTIAL,PARTIAL-FUNCTIONS-TABLE-GUARD-MSG" data-part-name="MEMOIZE-PARTIAL-SUPPORTING-EVENTS" data-part-args="WRLD,TUPLES" data-part-body="WRLD,FLET-BINDINGS,TUPLES,MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS">memoize-partial-supporting-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-supporting-events" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS" title="(defun memoize-partial-supporting-events (tuples wrld)
  (memoize-partial-supporting-events-rec tuples (flet-bindings tuples wrld)
                                         wrld nil nil nil))">memoize-partial-supporting-events</a>
  (tuples wrld)
  (<a class="sym-link local-def" href="#def-memoize-partial-supporting-events-rec" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS-REC" title="(defun memoize-partial-supporting-events-rec
       (tuples flet-bindings wrld msg defs table-tuples)
  (cond
   ((endp tuples)
    (mv (and msg (msg &quot;~|~@0~|See :DOC memoize-partial.~|&quot; msg)) (reverse defs)
...">memoize-partial-supporting-events-rec</a> tuples
    (<a class="sym-link local-def" href="#def-flet-bindings" data-sym="FLET-BINDINGS" title="(defun flet-bindings (tuples wrld)
  (cond ((endp tuples) nil)
        (t
         (cons
          (let* ((tuple (car tuples))
...">flet-bindings</a> tuples wrld)
    wrld
    nil
    nil
    nil))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-tuple-shape-p" data-defines="MEMOIZE-PARTIAL-TUPLE-SHAPE-P" data-references="CDR,CDDDDR,CONSP,CADDDR,CADDR,CADR,SYMBOLP,AND,CAR,TUPLE,LET,NULL,ATOM,COND,T,XARGS,DECLARE,LST,DEFUN" data-used-by="PARTIAL-FUNCTIONS-TABLE-GUARD-MSG" data-part-name="MEMOIZE-PARTIAL-TUPLE-SHAPE-P" data-part-args="LST" data-part-declare="T,XARGS,DECLARE" data-part-body="MEMOIZE-PARTIAL-TUPLE-SHAPE-P,CDR,CDDDDR,CONSP,CADDDR,CADDR,CADR,SYMBOLP,AND,CAR,TUPLE,LET,T,NULL,LST,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-TUPLE-SHAPE-P">memoize-partial-tuple-shape-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-tuple-shape-p" data-sym="MEMOIZE-PARTIAL-TUPLE-SHAPE-P" title="(defun memoize-partial-tuple-shape-p (lst)
  (declare (xargs :guard t))
  (cond ((atom lst) (null lst))
        (t
         (let ((tuple (car lst)))
...">memoize-partial-tuple-shape-p</a>
  (lst)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> lst) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> lst))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((tuple (car lst)))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp (car tuple))
          (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple))
          (symbolp (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> tuple))
          (symbolp (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> tuple))
          (consp (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> tuple))
          (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> tuple)))
          (<a class="sym-link local-def" href="#def-memoize-partial-tuple-shape-p" data-sym="MEMOIZE-PARTIAL-TUPLE-SHAPE-P" title="(defun memoize-partial-tuple-shape-p (lst)
  (declare (xargs :guard t))
  (cond ((atom lst) (null lst))
        (t
         (let ((tuple (car lst)))
...">memoize-partial-tuple-shape-p</a> (cdr lst)))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-translations-msg-formals" data-defines="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-FORMALS" data-references="LAST,EQ,MSG,CDR,NULL,FORMALS,CAR,FN,LET*,T,ENDP,COND,WRLD,FN0,LIMIT,FNS,DEFUN" data-used-by="MEMOIZE-PARTIAL-TRANSLATIONS-MSG" data-part-name="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-FORMALS" data-part-args="WRLD,FN0,LIMIT,FNS" data-part-body="FN0,MEMOIZE-PARTIAL-TRANSLATIONS-MSG-FORMALS,LIMIT,LAST,EQ,MSG,CDR,NULL,WRLD,FORMALS,CAR,FN,LET*,T,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-FORMALS">memoize-partial-translations-msg-formals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-translations-msg-formals" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-FORMALS" title="(defun memoize-partial-translations-msg-formals (fns limit fn0 wrld)
  (cond ((endp fns) nil)
        (t
         (let* ((fn (car fns)) (formals (formals fn wrld)))
           (cond
...">memoize-partial-translations-msg-formals</a>
  (fns limit fn0 wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (car fns)) (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> fn wrld)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The function symbol ~x0 must have at least two formal ~
                     parameters."</span>
              fn))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) limit) (<a class="sym-link local-def" href="#def-memoize-partial-translations-msg-formals" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-FORMALS" title="(defun memoize-partial-translations-msg-formals (fns limit fn0 wrld)
  (cond ((endp fns) nil)
        (t
         (let* ((fn (car fns)) (formals (formals fn wrld)))
           (cond
...">memoize-partial-translations-msg-formals</a> (cdr fns)
              limit
              fn0
              wrld))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The formal parameter lists for function symbols ~x0 and ~
                     ~x1 have different final elements (of ~x2 and ~x3, ~
                     respectively)."</span>
              fn0
              fn
              limit
              (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)))))))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-free-exactly-in-last-arg-of-calls" data-defines="FREE-EXACTLY-IN-LAST-ARG-OF-CALLS" data-references="CAR,CDR,ENDP,LAST-IS-LIMIT,MEMBER-EQ,1+,NTHCDR,TAKE,FREE-EXACTLY-IN-LAST-ARG-OF-CALLS-LST,NTH,LAMBDA-BODY,AND,FARGS,ARGS,LAMBDA-FORMALS,POSITION,POSN,LET,FFN-SYMB,FLAMBDAP,T,FQUOTEP,VARIABLEP,OR,EQ,COND,TERM,FNS-LIMIT,LIMIT,DEFUN,MUTUAL-RECURSION" data-used-by="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FREE-EXACTLY-IN-LAST-ARG-OF-CALLS">free-exactly-in-last-arg-of-calls</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-free-exactly-in-last-arg-of-calls" data-sym="FREE-EXACTLY-IN-LAST-ARG-OF-CALLS" title="(mutual-recursion
 (defun free-exactly-in-last-arg-of-calls (limit fns-limit term)
   (cond ((eq term limit) nil) ((or (variablep term) (fquotep term)) t)
         ((flambdap (ffn-symb term))
          (let ((posn (position limit (lambda-formals (ffn-symb term))))
...">free-exactly-in-last-arg-of-calls</a>
    (limit fns-limit term)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> term limit) nil)
      ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      ((<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)) (let ((posn (<a class="sym-link system" href="axioms.html#def-position" data-sym="POSITION">position</a> limit (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)))) (<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-free-exactly-in-last-arg-of-calls" data-sym="FREE-EXACTLY-IN-LAST-ARG-OF-CALLS" title="(mutual-recursion
 (defun free-exactly-in-last-arg-of-calls (limit fns-limit term)
   (cond ((eq term limit) nil) ((or (variablep term) (fquotep term)) t)
         ((flambdap (ffn-symb term))
          (let ((posn (position limit (lambda-formals (ffn-symb term))))
...">free-exactly-in-last-arg-of-calls</a> limit
              fns-limit
              (<a class="sym-link system" href="basis-b.html#def-lambda-body" data-sym="LAMBDA-BODY">lambda-body</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (posn (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> posn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) limit)
                  (free-exactly-in-last-arg-of-calls-lst limit
                    fns-limit
                    (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> posn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                    nil)
                  (free-exactly-in-last-arg-of-calls-lst limit
                    fns-limit
                    (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> posn) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
                    nil)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (free-exactly-in-last-arg-of-calls-lst limit
                  fns-limit
                  <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                  nil))))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (free-exactly-in-last-arg-of-calls-lst limit
          fns-limit
          (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)
          (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) fns-limit)))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> free-exactly-in-last-arg-of-calls-lst
    (limit fns-limit <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> last-is-limit)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> last-is-limit (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) limit))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-free-exactly-in-last-arg-of-calls" data-sym="FREE-EXACTLY-IN-LAST-ARG-OF-CALLS" title="(mutual-recursion
 (defun free-exactly-in-last-arg-of-calls (limit fns-limit term)
   (cond ((eq term limit) nil) ((or (variablep term) (fquotep term)) t)
         ((flambdap (ffn-symb term))
          (let ((posn (position limit (lambda-formals (ffn-symb term))))
...">free-exactly-in-last-arg-of-calls</a> limit
            fns-limit
            (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
          (free-exactly-in-last-arg-of-calls-lst limit
            fns-limit
            (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
            last-is-limit))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-translations-msg-bodies" data-defines="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES" data-references="MSG,CDR,FREE-EXACTLY-IN-LAST-ARG-OF-CALLS,IGNORE,DECLARE,BINARY-+,VARS,LAMBDA,&,!LIMIT,ZP,IF,QUOTE,CASE-MATCH,STR,BODY,CAR,FN,LET*,T,ENDP,COND,WRLD,LIMIT,FNS-LIMIT,TAIL,DEFUN" data-used-by="MEMOIZE-PARTIAL-TRANSLATIONS-MSG" data-part-name="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES" data-part-args="WRLD,LIMIT,FNS-LIMIT,TAIL" data-part-body="MSG,CDR,MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES,FNS-LIMIT,LIMIT,FREE-EXACTLY-IN-LAST-ARG-OF-CALLS,IGNORE,DECLARE,BINARY-+,VARS,LAMBDA,&,!LIMIT,ZP,IF,QUOTE,CASE-MATCH,STR,WRLD,BODY,CAR,FN,LET*,T,TAIL,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES">memoize-partial-translations-msg-bodies</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-translations-msg-bodies" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES" title="(defun memoize-partial-translations-msg-bodies (tail fns-limit limit wrld)
  (cond ((endp tail) nil)
        (t
         (let* ((fn (car tail))
                (body (body fn nil wrld))
...">memoize-partial-translations-msg-bodies</a>
  (tail fns-limit limit wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> tail) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (car tail)) (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> fn nil wrld))
          (str <span class="string">"Unexpected form for translated body of ~x0"</span>))
        (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>
          (('if ('<a class="sym-link system" href="axioms.html#def-zp" data-sym="ZP">zp</a> !limit)
             &amp;
             (('lambda (!limit . vars) <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>) ('binary-+ ''<span class="number">-1</span> !limit) . vars)) (declare (ignore vars))
            (if (<a class="sym-link local-def" href="#def-free-exactly-in-last-arg-of-calls" data-sym="FREE-EXACTLY-IN-LAST-ARG-OF-CALLS" title="(mutual-recursion
 (defun free-exactly-in-last-arg-of-calls (limit fns-limit term)
   (cond ((eq term limit) nil) ((or (variablep term) (fquotep term)) t)
         ((flambdap (ffn-symb term))
          (let ((posn (position limit (lambda-formals (ffn-symb term))))
...">free-exactly-in-last-arg-of-calls</a> limit fns-limit <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
              (<a class="sym-link local-def" href="#def-memoize-partial-translations-msg-bodies" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES" title="(defun memoize-partial-translations-msg-bodies (tail fns-limit limit wrld)
  (cond ((endp tail) nil)
        (t
         (let* ((fn (car tail))
                (body (body fn nil wrld))
...">memoize-partial-translations-msg-bodies</a> (cdr tail)
                fns-limit
                limit
                wrld)
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The limit variable ~x0 fails to occur free exactly where ~
                 expected in the body of the definition of function ~x1 ~
                 (essentially, as the last argument of each recursive call)."</span>
                limit
                fn)))
          (&amp; (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0 (must be of the form (IF (ZP LIMIT) &amp; &amp;))."</span>
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> str fn))))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-translations-msg" data-defines="MEMOIZE-PARTIAL-TRANSLATIONS-MSG" data-references="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES,MEMOIZE-PARTIAL-TRANSLATIONS-MSG-FORMALS,OR,FORMALS,LAST,LIMIT,CAR,FN,LET*,CONSP,ALL-FUNCTION-SYMBOLPS,AND,ASSERT$,WRLD,FNS-LIMIT,DEFUN" data-used-by="PARTIAL-FUNCTIONS-TABLE-GUARD-MSG" data-part-name="MEMOIZE-PARTIAL-TRANSLATIONS-MSG" data-part-args="WRLD,FNS-LIMIT" data-part-body="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES,MEMOIZE-PARTIAL-TRANSLATIONS-MSG-FORMALS,OR,FORMALS,LAST,LIMIT,CAR,FN,LET*,CONSP,WRLD,FNS-LIMIT,ALL-FUNCTION-SYMBOLPS,AND,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG">memoize-partial-translations-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-translations-msg" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG" title="(defun memoize-partial-translations-msg (fns-limit wrld)
  (assert$ (and (all-function-symbolps fns-limit wrld) (consp fns-limit))
           (let* ((fn (car fns-limit)) (limit (car (last (formals fn wrld)))))
             (or
              (memoize-partial-translations-msg-formals fns-limit limit fn
...">memoize-partial-translations-msg</a>
  (fns-limit wrld)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-all-function-symbolps" data-sym="ALL-FUNCTION-SYMBOLPS">all-function-symbolps</a> fns-limit wrld)
      (consp fns-limit))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (car fns-limit)) (limit (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> fn wrld)))))
      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link local-def" href="#def-memoize-partial-translations-msg-formals" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-FORMALS" title="(defun memoize-partial-translations-msg-formals (fns limit fn0 wrld)
  (cond ((endp fns) nil)
        (t
         (let* ((fn (car fns)) (formals (formals fn wrld)))
           (cond
...">memoize-partial-translations-msg-formals</a> fns-limit
          limit
          fn
          wrld)
        (<a class="sym-link local-def" href="#def-memoize-partial-translations-msg-bodies" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG-BODIES" title="(defun memoize-partial-translations-msg-bodies (tail fns-limit limit wrld)
  (cond ((endp tail) nil)
        (t
         (let* ((fn (car tail))
                (body (body fn nil wrld))
...">memoize-partial-translations-msg-bodies</a> fns-limit
          fns-limit
          limit
          wrld)))))</pre>
  </div>

<div class="form-block function" id="def-partial-functions-table-guard-msg" data-defines="PARTIAL-FUNCTIONS-TABLE-GUARD-MSG" data-references="MEMOIZE-PARTIAL-TRANSLATIONS-MSG,CONS,LIST,COLLECT-NON-REDUNDANT,BAD-EVENTS,IGNORE,MEMOIZE-PARTIAL-SUPPORTING-EVENTS,TABLE-EVENT,DEFS,MV-LET,RECURSIVEP,GETPROPC,R,STRIP-CADRS,FNS-LIMIT,MEMOIZE-PARTIAL-TUPLE-SHAPE-P,SET-DIFFERENCE-EQUAL,TAKE,IF,NEW-TUPLES,LET,SUBSETP-EQUAL,OR,FORMALS,NULL,SYMBOL-CLASS,EQ,MSG,FUNCTION-SYMBOLP,SYMBOLP,NOT,COND,NTHCDR,EQUAL,<,TRUE-LISTP,AND,COMMON-CASE,-,LEN-NEW,LEN-NEW-TUPLES/OLD-TUPLES,LEN,LEN-OLD-TUPLES,PARTIAL-FUNCTIONS-TABLE,QUOTE,TABLE-ALIST,ASSOC-EQ,CDR,OLD-TUPLES,LET*,T,XARGS,DECLARE,WRLD,NEW-TUPLES/OLD-TUPLES,KEY,DEFUN" data-used-by="PARTIAL-FUNCTIONS-TABLE-GUARD" data-part-name="PARTIAL-FUNCTIONS-TABLE-GUARD-MSG" data-part-args="WRLD,NEW-TUPLES/OLD-TUPLES,KEY" data-part-declare="T,XARGS,DECLARE" data-part-body="MEMOIZE-PARTIAL-TRANSLATIONS-MSG,CONS,LIST,COLLECT-NON-REDUNDANT,BAD-EVENTS,IGNORE,DECLARE,MEMOIZE-PARTIAL-SUPPORTING-EVENTS,TABLE-EVENT,DEFS,MV-LET,RECURSIVEP,GETPROPC,R,STRIP-CADRS,FNS-LIMIT,MEMOIZE-PARTIAL-TUPLE-SHAPE-P,SET-DIFFERENCE-EQUAL,TAKE,IF,NEW-TUPLES,LET,T,SUBSETP-EQUAL,OR,FORMALS,NULL,SYMBOL-CLASS,EQ,MSG,FUNCTION-SYMBOLP,SYMBOLP,NOT,COND,NTHCDR,EQUAL,<,TRUE-LISTP,AND,COMMON-CASE,-,LEN-NEW,NEW-TUPLES/OLD-TUPLES,LEN-NEW-TUPLES/OLD-TUPLES,LEN,LEN-OLD-TUPLES,WRLD,PARTIAL-FUNCTIONS-TABLE,QUOTE,TABLE-ALIST,KEY,ASSOC-EQ,CDR,OLD-TUPLES,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARTIAL-FUNCTIONS-TABLE-GUARD-MSG">partial-functions-table-guard-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-partial-functions-table-guard-msg" data-sym="PARTIAL-FUNCTIONS-TABLE-GUARD-MSG" title="(defun partial-functions-table-guard-msg (key new-tuples/old-tuples wrld)
  (declare (xargs :guard t))
  (let* ((old-tuples
          (cdr (assoc-eq key (table-alist &#39;partial-functions-table wrld))))
         (len-old-tuples (len old-tuples))
...">partial-functions-table-guard-msg</a>
  (key new-tuples/old-tuples wrld)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-tuples (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'partial-functions-table wrld)))) (len-old-tuples (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> old-tuples))
      (len-new-tuples/old-tuples (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> new-tuples/old-tuples))
      (len-new (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> len-new-tuples/old-tuples len-old-tuples))
      (common-case (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> new-tuples/old-tuples)
          (&lt; len-old-tuples len-new-tuples/old-tuples)
          (equal (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> len-new new-tuples/old-tuples) old-tuples))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp key) (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> key wrld))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The key is not a known function symbol."</span>))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> key wrld) <span class="keyword">:common-lisp-compliant</span>)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The key is a function symbol but it is not guard-verified."</span>))
      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> key wrld))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The key is a guard-verified function symbol but it needs at least ~
            two formal parameters."</span>))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> common-case
           (<a class="sym-link system" href="axioms.html#def-subsetp-equal" data-sym="SUBSETP-EQUAL">subsetp-equal</a> old-tuples new-tuples/old-tuples))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The value is not an extension of the previous value."</span>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((new-tuples (if common-case
               (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> len-new new-tuples/old-tuples)
               (<a class="sym-link system" href="axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> new-tuples/old-tuples old-tuples))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-memoize-partial-tuple-shape-p" data-sym="MEMOIZE-PARTIAL-TUPLE-SHAPE-P" title="(defun memoize-partial-tuple-shape-p (lst)
  (declare (xargs :guard t))
  (cond ((atom lst) (null lst))
        (t
         (let ((tuple (car lst)))
...">memoize-partial-tuple-shape-p</a> new-tuples)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The extension of the old value is not a list of 5-tuples ~
                  where each tuple consists of four symbols followed by one ~
                  more element."</span>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((fns-limit (<a class="sym-link system" href="axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> new-tuples)) (r (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> key 'recursivep nil wrld)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> r) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The key is a non-recursive function symbol."</span>))
                  ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal fns-limit r)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((cdr r) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The strip-cadrs of the proposed extension of the ~
                             old value is not the list of function symbols, ~
                             in order, defined by mutual-recursion with the ~
                             key.  That expected list of functions is ~x0."</span>
                          r))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The proposed extension of the old value is not a ~
                             one-element list containing the key."</span>))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> defs table-event)
                      (<a class="sym-link local-def" href="#def-memoize-partial-supporting-events" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS" title="(defun memoize-partial-supporting-events (tuples wrld)
  (memoize-partial-supporting-events-rec tuples (flet-bindings tuples wrld)
                                         wrld nil nil nil))">memoize-partial-supporting-events</a> new-tuples wrld)
                      (declare (ignore table-event))
                      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
                        (let ((bad-events (<a class="sym-link local-def" href="#def-collect-non-redundant" data-sym="COLLECT-NON-REDUNDANT" title="(defun collect-non-redundant (events wrld)
  (cond ((endp events) nil)
        ((and (true-listp (car events)) (symbolp (cadr (car events)))
              (equal (get-event (cadr (car events)) wrld) (car events)))
         (collect-non-redundant (cdr events) wrld))">collect-non-redundant</a> defs wrld)))
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-events (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The following ~#0~[event is~/events are~] ~
                                missing:~|~%~*1"</span>
                                bad-events
                                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span>
                                  <span class="string">"~X*2~|~%"</span>
                                  <span class="string">"~X*2~|~%"</span>
                                  <span class="string">"~X*2~|~%"</span>
                                  bad-events
                                  (cons #\2 nil))))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-memoize-partial-translations-msg" data-sym="MEMOIZE-PARTIAL-TRANSLATIONS-MSG" title="(defun memoize-partial-translations-msg (fns-limit wrld)
  (assert$ (and (all-function-symbolps fns-limit wrld) (consp fns-limit))
           (let* ((fn (car fns-limit)) (limit (car (last (formals fn wrld)))))
             (or
              (memoize-partial-translations-msg-formals fns-limit limit fn
...">memoize-partial-translations-msg</a> fns-limit wrld))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-partial-functions-table-guard" data-defines="PARTIAL-FUNCTIONS-TABLE-GUARD" data-references="T,MSG,MV,COND,PARTIAL-FUNCTIONS-TABLE-GUARD-MSG,MSG0,LET,WRLD,VAL,FN,DEFUN" data-part-name="PARTIAL-FUNCTIONS-TABLE-GUARD" data-part-args="WRLD,VAL,FN" data-part-body="T,MSG,MV,COND,WRLD,VAL,FN,PARTIAL-FUNCTIONS-TABLE-GUARD-MSG,MSG0,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARTIAL-FUNCTIONS-TABLE-GUARD">partial-functions-table-guard</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-partial-functions-table-guard" data-sym="PARTIAL-FUNCTIONS-TABLE-GUARD" title="(defun partial-functions-table-guard (fn val wrld)
  (let ((msg0 (partial-functions-table-guard-msg fn val wrld)))
    (cond
     (msg0
      (mv nil
...">partial-functions-table-guard</a>
  (fn val wrld)
  (let ((msg0 (<a class="sym-link local-def" href="#def-partial-functions-table-guard-msg" data-sym="PARTIAL-FUNCTIONS-TABLE-GUARD-MSG" title="(defun partial-functions-table-guard-msg (key new-tuples/old-tuples wrld)
  (declare (xargs :guard t))
  (let* ((old-tuples
          (cdr (assoc-eq key (table-alist &#39;partial-functions-table wrld))))
         (len-old-tuples (len old-tuples))
...">partial-functions-table-guard-msg</a> fn val wrld)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (msg0 (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
          (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Illegal partial-functions-table key and value (see :DOC ~
                 memoize-partial):~|key = ~y0value  = ~y1Reason:~%~@2~|~%"</span>
            fn
            val
            msg0)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))))</pre>
  </div>

<div class="form-block other" id="form-806" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> partial-functions-table
  nil
  nil
  <span class="keyword">:guard</span> (<a class="sym-link local-def" href="#def-partial-functions-table-guard" data-sym="PARTIAL-FUNCTIONS-TABLE-GUARD" title="(defun partial-functions-table-guard (fn val wrld)
  (let ((msg0 (partial-functions-table-guard-msg fn val wrld)))
    (cond
     (msg0
      (mv nil
...">partial-functions-table-guard</a> key val world))</pre>
  </div>

<div class="form-block function" id="def-memoize-invoke-equality-p" data-defines="MEMOIZE-INVOKE-EQUALITY-P" data-references="NO-DUPLICATESP-EQ,FARGS,ALL-VARIABLEP,IF,RHS,FARGN,LHS,LET,EQUAL,QUOTE,FFN-SYMB-P,AND,TERM,INVOKE,FN,DEFUN" data-used-by="MEMOIZE-INVOKE-EQUALITY-EXISTS" data-part-name="MEMOIZE-INVOKE-EQUALITY-P" data-part-args="TERM,INVOKE,FN" data-part-body="NO-DUPLICATESP-EQ,FARGS,ALL-VARIABLEP,INVOKE,FN,IF,RHS,FARGN,LHS,LET,EQUAL,QUOTE,TERM,FFN-SYMB-P,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-INVOKE-EQUALITY-P">memoize-invoke-equality-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-invoke-equality-p" data-sym="MEMOIZE-INVOKE-EQUALITY-P" title="(defun memoize-invoke-equality-p (fn invoke term)
  (and (ffn-symb-p term &#39;equal)
       (let ((lhs (fargn term 1)) (rhs (fargn term 2)))
         (and
          (if (ffn-symb-p lhs fn)
...">memoize-invoke-equality-p</a>
  (fn invoke term)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="basis-b.html#def-ffn-symb-p" data-sym="FFN-SYMB-P">ffn-symb-p</a> term 'equal)
    (let ((lhs (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> term <span class="number">1</span>)) (rhs (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> term <span class="number">2</span>)))
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (if (<a class="sym-link system" href="basis-b.html#def-ffn-symb-p" data-sym="FFN-SYMB-P">ffn-symb-p</a> lhs fn)
          (<a class="sym-link system" href="basis-b.html#def-ffn-symb-p" data-sym="FFN-SYMB-P">ffn-symb-p</a> rhs invoke)
          (if (<a class="sym-link system" href="basis-b.html#def-ffn-symb-p" data-sym="FFN-SYMB-P">ffn-symb-p</a> lhs invoke)
            (<a class="sym-link system" href="basis-b.html#def-ffn-symb-p" data-sym="FFN-SYMB-P">ffn-symb-p</a> rhs fn)
            nil))
        (all-variablep (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> lhs))
        (equal (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> lhs) (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> rhs))
        (<a class="sym-link system" href="axioms.html#def-no-duplicatesp-eq" data-sym="NO-DUPLICATESP-EQ">no-duplicatesp-eq</a> (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> lhs))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-invoke-equality-exists" data-defines="MEMOIZE-INVOKE-EQUALITY-EXISTS" data-references="CDR,T,GETPROPC,EQUAL,CDDR,MEMOIZE-INVOKE-EQUALITY-P,THEOREM,QUOTE,CAR,CADR,EQ,AND,NULL,COND,WRLD,WRLD-TAIL,INVOKE,FN,DEFUN" data-used-by="MEMOIZE-TABLE-CHK-INVOKE-MSG" data-part-name="MEMOIZE-INVOKE-EQUALITY-EXISTS" data-part-args="WRLD,WRLD-TAIL,INVOKE,FN" data-part-body="CDR,MEMOIZE-INVOKE-EQUALITY-EXISTS,T,WRLD,GETPROPC,EQUAL,CDDR,INVOKE,FN,MEMOIZE-INVOKE-EQUALITY-P,THEOREM,QUOTE,CAR,CADR,EQ,AND,WRLD-TAIL,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-INVOKE-EQUALITY-EXISTS">memoize-invoke-equality-exists</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-invoke-equality-exists" data-sym="MEMOIZE-INVOKE-EQUALITY-EXISTS" title="(defun memoize-invoke-equality-exists (fn invoke wrld-tail wrld)
  (cond ((null wrld-tail) nil)
        ((and (eq (cadr (car wrld-tail)) &#39;theorem)
              (memoize-invoke-equality-p fn invoke (cddr (car wrld-tail)))
              (equal (getpropc (car (car wrld-tail)) &#39;theorem nil wrld)
...">memoize-invoke-equality-exists</a>
  (fn invoke wrld-tail wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld-tail) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld-tail)) 'theorem)
       (<a class="sym-link local-def" href="#def-memoize-invoke-equality-p" data-sym="MEMOIZE-INVOKE-EQUALITY-P" title="(defun memoize-invoke-equality-p (fn invoke term)
  (and (ffn-symb-p term &#39;equal)
       (let ((lhs (fargn term 1)) (rhs (fargn term 2)))
         (and
          (if (ffn-symb-p lhs fn)
...">memoize-invoke-equality-p</a> fn invoke (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld-tail)))
       (equal (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car (car wrld-tail)) 'theorem nil wrld)
         (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld-tail)))) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-memoize-invoke-equality-exists" data-sym="MEMOIZE-INVOKE-EQUALITY-EXISTS" title="(defun memoize-invoke-equality-exists (fn invoke wrld-tail wrld)
  (cond ((null wrld-tail) nil)
        ((and (eq (cadr (car wrld-tail)) &#39;theorem)
              (memoize-invoke-equality-p fn invoke (cddr (car wrld-tail)))
              (equal (getpropc (car (car wrld-tail)) &#39;theorem nil wrld)
...">memoize-invoke-equality-exists</a> fn
        invoke
        (cdr wrld-tail)
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-memoize-invoke-guard-implication-default-name" data-defines="MEMOIZE-INVOKE-GUARD-IMPLICATION-DEFAULT-NAME" data-references="SYMBOL-NAME,STRING,QUOTE,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,G,F,DEFUN" data-used-by="VERIFY-GUARD-IMPLICATION" data-part-name="MEMOIZE-INVOKE-GUARD-IMPLICATION-DEFAULT-NAME" data-part-args="G,F" data-part-body="G,F,SYMBOL-NAME,STRING,QUOTE,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-INVOKE-GUARD-IMPLICATION-DEFAULT-NAME">memoize-invoke-guard-implication-default-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-invoke-guard-implication-default-name" data-sym="MEMOIZE-INVOKE-GUARD-IMPLICATION-DEFAULT-NAME" title="(defun memoize-invoke-guard-implication-default-name (f g)
  (intern-in-package-of-symbol
   (concatenate &#39;string (symbol-name f) &quot;-guard-implies-&quot; (symbol-name g)
                &quot;-guard&quot;)
   g))">memoize-invoke-guard-implication-default-name</a>
  (f g)
  (intern-in-package-of-symbol (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
      (symbol-name f)
      <span class="string">"-guard-implies-"</span>
      (symbol-name g)
      <span class="string">"-guard"</span>)
    g))</pre>
  </div>

<div class="form-block function" id="def-memoize-invoke-guard-implication-term" data-defines="MEMOIZE-INVOKE-GUARD-IMPLICATION-TERM" data-references="IMPLIES,IF,QUOTE,FCONS-TERM*,IF-TAUTOLOGYP,FORMALS,PAIRLIS$,SUBLIS-VAR,GUARD-F,T,*T*,EQUAL,COND,GUARD,GUARD-G,LET,WRLD,G,F,DEFUN" data-used-by="MEMOIZE-INVOKE-GUARD-THM-EXISTS,VERIFY-GUARD-IMPLICATION" data-part-name="MEMOIZE-INVOKE-GUARD-IMPLICATION-TERM" data-part-args="WRLD,G,F" data-part-body="IMPLIES,IF,QUOTE,FCONS-TERM*,IF-TAUTOLOGYP,FORMALS,PAIRLIS$,SUBLIS-VAR,F,GUARD-F,T,*T*,EQUAL,COND,WRLD,G,GUARD,GUARD-G,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-INVOKE-GUARD-IMPLICATION-TERM">memoize-invoke-guard-implication-term</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-invoke-guard-implication-term" data-sym="MEMOIZE-INVOKE-GUARD-IMPLICATION-TERM" title="(defun memoize-invoke-guard-implication-term (f g wrld)
  (let ((guard-g (guard g nil wrld)))
    (cond ((equal guard-g *t*) nil)
          (t
           (let ((guard-f (guard f nil wrld))
...">memoize-invoke-guard-implication-term</a>
  (f g wrld)
  (let ((guard-g (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> g nil wrld)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal guard-g <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((guard-f (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> f nil wrld)) (guard-g (<a class="sym-link system" href="basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> g wrld) (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> f wrld))
                guard-g)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal guard-f guard-g) nil)
            ((<a class="sym-link system" href="rewrite.html#def-if-tautologyp" data-sym="IF-TAUTOLOGYP">if-tautologyp</a> (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> 'if guard-f guard-g <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>)) nil)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> guard-f guard-g))))))))</pre>
  </div>

<div class="form-block macro" id="def-verify-guard-implication" data-defines="VERIFY-GUARD-IMPLICATION" data-references="DEFTHM,LIST,MEMOIZE-INVOKE-GUARD-IMPLICATION-DEFAULT-NAME,NAME,T,STATE,W,QUOTE,MEMOIZE-INVOKE-GUARD-IMPLICATION-TERM,OR,TERM,LET,MAKE-EVENT,QUASIQUOTE,OTF-FLG,HINTS,&KEY,G,F,DEFMACRO" data-used-by="MEMOIZE-TABLE-CHK-INVOKE-MSG" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="VERIFY-GUARD-IMPLICATION">verify-guard-implication</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-verify-guard-implication" data-sym="VERIFY-GUARD-IMPLICATION" title="(defmacro verify-guard-implication (f g &amp;key hints otf-flg)
  `(make-event
    (let ((term
           (or (memoize-invoke-guard-implication-term &#39;,f &#39;,g (w state)) t))
          (name (memoize-invoke-guard-implication-default-name &#39;,f &#39;,g)))
...">verify-guard-implication</a>
  (f g &amp;key hints otf-flg)
  `(<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (let ((term (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link local-def" href="#def-memoize-invoke-guard-implication-term" data-sym="MEMOIZE-INVOKE-GUARD-IMPLICATION-TERM" title="(defun memoize-invoke-guard-implication-term (f g wrld)
  (let ((guard-g (guard g nil wrld)))
    (cond ((equal guard-g *t*) nil)
          (t
           (let ((guard-f (guard f nil wrld))
...">memoize-invoke-guard-implication-term</a> ',F ',G (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
           <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (name (<a class="sym-link local-def" href="#def-memoize-invoke-guard-implication-default-name" data-sym="MEMOIZE-INVOKE-GUARD-IMPLICATION-DEFAULT-NAME" title="(defun memoize-invoke-guard-implication-default-name (f g)
  (intern-in-package-of-symbol
   (concatenate &#39;string (symbol-name f) &quot;-guard-implies-&quot; (symbol-name g)
                &quot;-guard&quot;)
   g))">memoize-invoke-guard-implication-default-name</a> ',F ',G)))
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a>
        name
        term
        ,@(AND HINTS (LIST :HINTS (LIST &#39;QUOTE HINTS)))
        ,@(AND OTF-FLG (LIST :OTF-FLG (LIST &#39;QUOTE OTF-FLG)))
        <span class="keyword">:rule-classes</span> nil))))</pre>
  </div>

<div class="form-block function" id="def-memoize-invoke-guard-thm-exists-1" data-defines="MEMOIZE-INVOKE-GUARD-THM-EXISTS-1" data-references="CDR,T,GETPROPC,CDDR,EQUAL,THEOREM,QUOTE,CAR,CADR,EQ,AND,NULL,COND,WRLD,WRLD-TAIL,TERM,DEFUN" data-used-by="MEMOIZE-INVOKE-GUARD-THM-EXISTS" data-part-name="MEMOIZE-INVOKE-GUARD-THM-EXISTS-1" data-part-args="WRLD,WRLD-TAIL,TERM" data-part-body="CDR,MEMOIZE-INVOKE-GUARD-THM-EXISTS-1,T,WRLD,GETPROPC,CDDR,TERM,EQUAL,THEOREM,QUOTE,CAR,CADR,EQ,AND,WRLD-TAIL,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-INVOKE-GUARD-THM-EXISTS-1">memoize-invoke-guard-thm-exists-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-invoke-guard-thm-exists-1" data-sym="MEMOIZE-INVOKE-GUARD-THM-EXISTS-1" title="(defun memoize-invoke-guard-thm-exists-1 (term wrld-tail wrld)
  (cond ((null wrld-tail) nil)
        ((and (eq (cadr (car wrld-tail)) &#39;theorem)
              (equal term (cddr (car wrld-tail)))
              (equal (getpropc (car (car wrld-tail)) &#39;theorem nil wrld) term))
...">memoize-invoke-guard-thm-exists-1</a>
  (term wrld-tail wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld-tail) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car wrld-tail)) 'theorem)
       (equal term (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car wrld-tail)))
       (equal (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car (car wrld-tail)) 'theorem nil wrld)
         term)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-memoize-invoke-guard-thm-exists-1" data-sym="MEMOIZE-INVOKE-GUARD-THM-EXISTS-1" title="(defun memoize-invoke-guard-thm-exists-1 (term wrld-tail wrld)
  (cond ((null wrld-tail) nil)
        ((and (eq (cadr (car wrld-tail)) &#39;theorem)
              (equal term (cddr (car wrld-tail)))
              (equal (getpropc (car (car wrld-tail)) &#39;theorem nil wrld) term))
...">memoize-invoke-guard-thm-exists-1</a> term
        (cdr wrld-tail)
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-memoize-invoke-guard-thm-exists" data-defines="MEMOIZE-INVOKE-GUARD-THM-EXISTS" data-references="T,MEMOIZE-INVOKE-GUARD-THM-EXISTS-1,IF,MEMOIZE-INVOKE-GUARD-IMPLICATION-TERM,TERM,LET,WRLD,INVOKE,FN,DEFUN" data-used-by="MEMOIZE-TABLE-CHK-INVOKE-MSG" data-part-name="MEMOIZE-INVOKE-GUARD-THM-EXISTS" data-part-args="WRLD,INVOKE,FN" data-part-body="T,MEMOIZE-INVOKE-GUARD-THM-EXISTS-1,IF,WRLD,INVOKE,FN,MEMOIZE-INVOKE-GUARD-IMPLICATION-TERM,TERM,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-INVOKE-GUARD-THM-EXISTS">memoize-invoke-guard-thm-exists</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-invoke-guard-thm-exists" data-sym="MEMOIZE-INVOKE-GUARD-THM-EXISTS" title="(defun memoize-invoke-guard-thm-exists (fn invoke wrld)
  (let ((term (memoize-invoke-guard-implication-term fn invoke wrld)))
    (if term
        (memoize-invoke-guard-thm-exists-1 term wrld wrld)
        t)))">memoize-invoke-guard-thm-exists</a>
  (fn invoke wrld)
  (let ((term (<a class="sym-link local-def" href="#def-memoize-invoke-guard-implication-term" data-sym="MEMOIZE-INVOKE-GUARD-IMPLICATION-TERM" title="(defun memoize-invoke-guard-implication-term (f g wrld)
  (let ((guard-g (guard g nil wrld)))
    (cond ((equal guard-g *t*) nil)
          (t
           (let ((guard-f (guard f nil wrld))
...">memoize-invoke-guard-implication-term</a> fn invoke wrld)))
    (if term
      (<a class="sym-link local-def" href="#def-memoize-invoke-guard-thm-exists-1" data-sym="MEMOIZE-INVOKE-GUARD-THM-EXISTS-1" title="(defun memoize-invoke-guard-thm-exists-1 (term wrld-tail wrld)
  (cond ((null wrld-tail) nil)
        ((and (eq (cadr (car wrld-tail)) &#39;theorem)
              (equal term (cddr (car wrld-tail)))
              (equal (getpropc (car (car wrld-tail)) &#39;theorem nil wrld) term))
...">memoize-invoke-guard-thm-exists-1</a> term wrld wrld)
      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block function" id="def-memoize-table-chk-invoke-msg" data-defines="MEMOIZE-TABLE-CHK-INVOKE-MSG" data-references="IF,VERIFY-GUARD-IMPLICATION,GUARD-THM-FORMULA,DEFTHM,QUASIQUOTE,THM-FORMULA,LET*,MEMOIZE-INVOKE-GUARD-THM-EXISTS,GD-THM-P,MEMOIZE-INVOKE-EQUALITY-EXISTS,EQ-THM-P,LET,T,SKIP-PROOFS-DUE-TO-SYSTEM,STOBJS-OUT,*STOBJS-OUT-INVALID*,MEMBER-EQ,STOBJS-IN,EQUAL,LOGICP,CDR,OR,TTAG,*TTAG-FNS*,ASSOC-EQ,TEMP-TOUCHABLE-FNS,QUOTE,F-GET-GLOBAL,UNTOUCHABLE-FN-P,MSG,SYMBOL-CLASS,EQ,FUNCTION-SYMBOLP,SYMBOLP,AND,NOT,COND,STATE,WRLD,STR,INVOKE,KEY,DEFUN" data-used-by="MEMOIZE-TABLE-CHK" data-part-name="MEMOIZE-TABLE-CHK-INVOKE-MSG" data-part-args="STATE,WRLD,STR,INVOKE,KEY" data-part-body="IF,VERIFY-GUARD-IMPLICATION,GUARD-THM-FORMULA,DEFTHM,QUASIQUOTE,THM-FORMULA,LET*,MEMOIZE-INVOKE-GUARD-THM-EXISTS,GD-THM-P,MEMOIZE-INVOKE-EQUALITY-EXISTS,EQ-THM-P,LET,T,SKIP-PROOFS-DUE-TO-SYSTEM,STOBJS-OUT,*STOBJS-OUT-INVALID*,MEMBER-EQ,STOBJS-IN,EQUAL,KEY,LOGICP,CDR,OR,TTAG,*TTAG-FNS*,ASSOC-EQ,STATE,TEMP-TOUCHABLE-FNS,QUOTE,F-GET-GLOBAL,UNTOUCHABLE-FN-P,STR,MSG,SYMBOL-CLASS,EQ,WRLD,FUNCTION-SYMBOLP,INVOKE,SYMBOLP,AND,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-TABLE-CHK-INVOKE-MSG">memoize-table-chk-invoke-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-table-chk-invoke-msg" data-sym="MEMOIZE-TABLE-CHK-INVOKE-MSG" title="(defun memoize-table-chk-invoke-msg (key invoke str wrld state)
  (cond
   ((not
     (and (symbolp invoke) (function-symbolp invoke wrld)
          (eq (symbol-class invoke wrld) :common-lisp-compliant)))
...">memoize-table-chk-invoke-msg</a>
  (key invoke str wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp invoke)
         (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> invoke wrld)
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> invoke wrld) <span class="keyword">:common-lisp-compliant</span>))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The value of keyword :INVOKE, ~x1, is not a guard-verified ~
          function symbol."</span>
        str
        invoke))
    ((untouchable-fn-p invoke
       wrld
       (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'temp-touchable-fns state)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The value of keyword :INVOKE, ~x1, is an untouchable function ~
          symbol."</span>
        str
        invoke))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> invoke <a class="sym-link system" href="axioms.html#def-_2Attag-fns_2A" data-sym="*TTAG-FNS*">*ttag-fns*</a>) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-ttag" data-sym="TTAG">ttag</a> wrld))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The value of keyword :INVOKE, ~x1, is a function symbol that ~
          cannot be called unless a trust tag is in effect.  See :DOC ~
          defttag.~@2"</span>
        str
        invoke
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> invoke <a class="sym-link system" href="axioms.html#def-_2Attag-fns_2A" data-sym="*TTAG-FNS*">*ttag-fns*</a>)) <span class="string">""</span>)))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-logicp" data-sym="LOGICP">logicp</a> key wrld)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0When memoizing with memoize keyword :INVOKE, the memoized ~
          function must be in :logic mode, which ~x1 is not."</span>
        str
        key))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> key wrld) (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> invoke wrld))
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key <a class="sym-link system" href="axioms.html#def-_2Astobjs-out-invalid_2A" data-sym="*STOBJS-OUT-INVALID*">*stobjs-out-invalid*</a>))
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> invoke <a class="sym-link system" href="axioms.html#def-_2Astobjs-out-invalid_2A" data-sym="*STOBJS-OUT-INVALID*">*stobjs-out-invalid*</a>))
         (equal (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> key wrld) (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> invoke wrld)))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The function to be memoized, ~x1, has a different signature from ~
          the function to be :INVOKEd, ~x2."</span>
        str
        key
        invoke))
    ((<a class="sym-link system" href="history-management.html#def-skip-proofs-due-to-system" data-sym="SKIP-PROOFS-DUE-TO-SYSTEM">skip-proofs-due-to-system</a> state) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((eq-thm-p (<a class="sym-link local-def" href="#def-memoize-invoke-equality-exists" data-sym="MEMOIZE-INVOKE-EQUALITY-EXISTS" title="(defun memoize-invoke-equality-exists (fn invoke wrld-tail wrld)
  (cond ((null wrld-tail) nil)
        ((and (eq (cadr (car wrld-tail)) &#39;theorem)
              (memoize-invoke-equality-p fn invoke (cddr (car wrld-tail)))
              (equal (getpropc (car (car wrld-tail)) &#39;theorem nil wrld)
...">memoize-invoke-equality-exists</a> key invoke wrld wrld)) (gd-thm-p (<a class="sym-link local-def" href="#def-memoize-invoke-guard-thm-exists" data-sym="MEMOIZE-INVOKE-GUARD-THM-EXISTS" title="(defun memoize-invoke-guard-thm-exists (fn invoke wrld)
  (let ((term (memoize-invoke-guard-implication-term fn invoke wrld)))
    (if term
        (memoize-invoke-guard-thm-exists-1 term wrld wrld)
        t)))">memoize-invoke-guard-thm-exists</a> key invoke wrld)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> eq-thm-p gd-thm-p) nil)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((thm-formula (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> eq-thm-p)
                   `(<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(INTERN-IN-PACKAGE-OF-SYMBOL
  (CONCATENATE &#39;STRING (SYMBOL-NAME KEY) &quot;-is-&quot; (SYMBOL-NAME INVOKE)) INVOKE)
                     ,(LET ((FORMALS (FORMALS KEY WRLD)))
   `(EQUAL (,KEY ,@FORMALS) (,INVOKE ,@FORMALS)))
                     <span class="keyword">:rule-classes</span> nil))) (guard-thm-formula (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> gd-thm-p)
                    `(<a class="sym-link local-def" href="#def-verify-guard-implication" data-sym="VERIFY-GUARD-IMPLICATION" title="(defmacro verify-guard-implication (f g &amp;key hints otf-flg)
  `(make-event
    (let ((term
           (or (memoize-invoke-guard-implication-term &#39;,f &#39;,g (w state)) t))
          (name (memoize-invoke-guard-implication-default-name &#39;,f &#39;,g)))
...">verify-guard-implication</a> ,KEY ,INVOKE)))
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (gd-thm-p (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0"</span> thm-formula))
                    (eq-thm-p (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0"</span> guard-thm-formula))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0~|~%~x1"</span> thm-formula guard-thm-formula)))))
              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The following event~#1~[~/s~] must be admitted ~
                    (possibly with differing name or macro) before memoizing ~
                    function ~x2 with :INVOKE value ~x3.  See :DOC ~
                    memoize.~|~%~@4"</span>
                str
                (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> eq-thm-p gd-thm-p)
                  <span class="number">0</span>
                  <span class="number">1</span>)
                key
                invoke
                <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-table-chk" data-defines="MEMOIZE-TABLE-CHK" data-references="ZERO-ONE-OR-MORE,OBSERVATION-CW,RELEVANT-INPUT-STOBJS,PROGN$,EQUAL,GUARD,VAL-GUARD,VAL-FORMALS,DEFAULT-STATE-VARS,WARNING$-CW0,PROG2$,MEMOIZE,VERIFY-GUARDS,ACL2-DEFAULTS-TABLE,OKP,PARTIAL-FUNCTIONS-TABLE,CLTL-DEF-MEMOIZE-PARTIAL,MEMOIZE-TABLE-CHK-INVOKE-MSG,MEMOIZE-TABLE-CHK-COMMUTATIVE-MSG,POSP,PAIR,*INITIAL-LOGIC-FNS-WITH-RAW-CODE*,*INITIAL-PROGRAM-FNS-WITH-RAW-CODE*,IF,CONSTRAINEDP,DEFABSSTOBJ,DEFSTOBJ,GET-EVENT,EV,STOBJ-FUNCTION,ST,CLTL-DEF-FROM-NAME,*HONS-PRIMITIVE-FNS*,CAR,STOBJ,STOBJS-OUT,COLLECT-NON-NIL-DF,*STOBJS-OUT-INVALID*,NULL,FILTER-ABSSTOBJS,CONC,ABS,MV-LET,NON-MEMOIZABLE-STOBJS,BOOLEANP,STOBJS-IN,MEMBER-EQ,OR,EQ,TOTAL,INVOKE,AOKP,INLINE,ASSOC-EQ,CDR,AND,CONDITION,SYMBOL-CLASS,KEY-CLASS,FORMALS,GETPROPC,KEY-FORMALS,TABLE-ALIST,LET*,T,SYMBOL-ALISTP,MSG,MV,SYMBOLP,NOT,COND,STR,MEMOIZE-TABLE,TABLE,QUOTE,CTX,LET,STATE,WRLD,VAL,KEY,DEFUN" data-part-name="MEMOIZE-TABLE-CHK" data-part-args="STATE,WRLD,VAL,KEY" data-part-body="ZERO-ONE-OR-MORE,OBSERVATION-CW,RELEVANT-INPUT-STOBJS,PROGN$,EQUAL,GUARD,VAL-GUARD,VAL-FORMALS,DEFAULT-STATE-VARS,MEMOIZE-TABLE-CHK,WARNING$-CW0,PROG2$,MEMOIZE,VERIFY-GUARDS,ACL2-DEFAULTS-TABLE,OKP,PARTIAL-FUNCTIONS-TABLE,CLTL-DEF-MEMOIZE-PARTIAL,MEMOIZE-TABLE-CHK-INVOKE-MSG,MEMOIZE-TABLE-CHK-COMMUTATIVE-MSG,POSP,PAIR,*INITIAL-LOGIC-FNS-WITH-RAW-CODE*,*INITIAL-PROGRAM-FNS-WITH-RAW-CODE*,IF,CONSTRAINEDP,DEFABSSTOBJ,DEFSTOBJ,GET-EVENT,EV,STOBJ-FUNCTION,ST,CLTL-DEF-FROM-NAME,*HONS-PRIMITIVE-FNS*,CAR,STOBJ,STOBJS-OUT,COLLECT-NON-NIL-DF,*STOBJS-OUT-INVALID*,NULL,FILTER-ABSSTOBJS,CONC,ABS,MV-LET,NON-MEMOIZABLE-STOBJS,BOOLEANP,STOBJS-IN,STATE,MEMBER-EQ,OR,EQ,TOTAL,INVOKE,AOKP,INLINE,ASSOC-EQ,CDR,AND,CONDITION,SYMBOL-CLASS,KEY-CLASS,FORMALS,GETPROPC,KEY-FORMALS,WRLD,TABLE-ALIST,LET*,T,VAL,SYMBOL-ALISTP,MSG,MV,KEY,SYMBOLP,NOT,COND,STR,MEMOIZE-TABLE,TABLE,QUOTE,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-TABLE-CHK">memoize-table-chk</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-table-chk" data-sym="MEMOIZE-TABLE-CHK" title="(defun memoize-table-chk (key val wrld state)
  (let ((ctx &#39;(table . memoize-table))
        (str &quot;Illegal attempt to set memoize-table:  &quot;))
    (cond
     ((not (symbolp key))
...">memoize-table-chk</a>
  (key val wrld state)
  (let ((ctx '(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> . memoize-table)) (str <span class="string">"Illegal attempt to set memoize-table:  "</span>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp key)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
          (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The first argument of memoize must be a symbol, unlike ~
                    ~x1."</span>
            str
            key)))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> val)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
          (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0Function symbol ~x1 must be associated with a ~
                    symbol-alistp, unlike ~x2."</span>
            str
            key
            val)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((memoize-table (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'memoize-table wrld)) (key-formals (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> key '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld))
            (key-class (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> key wrld))
            (condition (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:condition-fn</span> val))))
            (inline (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:inline</span> val))))
            (aokp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:aokp</span> val))))
            (invoke (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:invoke</span> val))))
            (total (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:total</span> val))))
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key-formals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 is not a function symbol."</span> str key))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> condition (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:inline</span> val)))
                   (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> key wrld))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 takes ACL2&#39;s STATE as an argument (illegal ~
                      except for profiling)."</span>
                    str
                    key))
                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> aokp)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0:aokp has a non-Boolean value, ~x1."</span> str aokp))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> condition (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:inline</span> val)))
                   (<a class="sym-link local-def" href="#def-non-memoizable-stobjs" data-sym="NON-MEMOIZABLE-STOBJS" title="(defun non-memoizable-stobjs (stobjs-in wrld)
  (cond ((endp stobjs-in) nil)
        ((getpropc (car stobjs-in) &#39;non-memoizable nil wrld)
         (cons (car stobjs-in) (non-memoizable-stobjs (cdr stobjs-in) wrld)))
        (t (non-memoizable-stobjs (cdr stobjs-in) wrld))))">non-memoizable-stobjs</a> (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> key wrld) wrld)) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (abs conc)
                    (<a class="sym-link local-def" href="#def-filter-absstobjs" data-sym="FILTER-ABSSTOBJS" title="(defun filter-absstobjs (lst wrld abs conc)
  (cond ((endp lst) (mv (reverse abs) (reverse conc)))
        ((getpropc (car lst) &#39;absstobj-info nil wrld)
         (filter-absstobjs (cdr lst) wrld (cons (car lst) abs) conc))
        (t (filter-absstobjs (cdr lst) wrld abs (cons (car lst) conc)))))">filter-absstobjs</a> (<a class="sym-link local-def" href="#def-non-memoizable-stobjs" data-sym="NON-MEMOIZABLE-STOBJS" title="(defun non-memoizable-stobjs (stobjs-in wrld)
  (cond ((endp stobjs-in) nil)
        ((getpropc (car stobjs-in) &#39;non-memoizable nil wrld)
         (cons (car stobjs-in) (non-memoizable-stobjs (cdr stobjs-in) wrld)))
        (t (non-memoizable-stobjs (cdr stobjs-in) wrld))))">non-memoizable-stobjs</a> (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> key wrld) wrld)
                      wrld
                      nil
                      nil)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> abs) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 has input stobj~#2~[ ~&amp;2~/s ~&amp;2, each~] ~
                          introduced with :NON-MEMOIZABLE T.  See :DOC ~
                          defstobj."</span>
                          str
                          key
                          conc))
                      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> conc) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 has input abstract stobj~#2~[ ~&amp;2~/s ~&amp;2, ~
                          each of~] whose corresponding foundational stobj is ~
                          non-memoizable.  See :DOC defabsstobj."</span>
                          str
                          key
                          abs))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 has input foundational stobj~#2~[ ~&amp;2~/s ~
                          ~&amp;2, each~] introduced as non-memoizable.  ~x1 also ~
                          has input abstract stobj~#3~[ ~&amp;2~/s ~&amp;3, each of~] ~
                          whose corresponding foundational stobj is ~
                          non-memoizable.  See :DOC defstobj."</span>
                          str
                          key
                          conc
                          abs)))))
                ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key <a class="sym-link system" href="axioms.html#def-_2Astobjs-out-invalid_2A" data-sym="*STOBJS-OUT-INVALID*">*stobjs-out-invalid*</a>) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 is a primitive without a fixed output signature."</span>
                    str
                    key))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> condition (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:inline</span> val)))
                   (<a class="sym-link system" href="basis-b.html#def-collect-non-nil-df" data-sym="COLLECT-NON-NIL-DF">collect-non-nil-df</a> (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> key wrld))) (let ((stobj (car (<a class="sym-link system" href="basis-b.html#def-collect-non-nil-df" data-sym="COLLECT-NON-NIL-DF">collect-non-nil-df</a> (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> key wrld)))))
                    (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 returns a stobj, ~x2 (illegal except for ~
                        profiling)."</span>
                      str
                      key
                      stobj)))
                ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key *hons-primitive-fns*) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 is a HONS primitive."</span> str key))
                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (cltl-def-from-name key wrld)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0Although ~x1 is a defined ACL2 function, its ~
                      implementation in raw Lisp is not.~@2"</span>
                    str
                    key
                    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((st (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> key 'stobj-function nil wrld)) (ev (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> st (get-event st wrld))))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ev
                           (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ev) '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:inline</span> ev))
                             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ev) '<a class="sym-link local-def" href="#def-defabsstobj" data-sym="DEFABSSTOBJ" title="(defmacro defabsstobj
          (&amp;whole event-form name
           &amp;key foundation recognizer creator corr-fn corr-fn-exists exports
           protect-default congruent-to non-executable attachable missing-only)
  (declare (xargs :guard (and (symbolp name) (booleanp protect-default))))
...">defabsstobj</a>))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Note that ~x0 was introduced with the event ~
                               ~x1, so ~x0 is ``inlined&#39;&#39; by making it a ~
                               macro in raw Lisp."</span>
                            key
                            ev))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>)))))
                ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> key 'constrainedp nil wrld) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0~x1 is constrained.  You may instead wish to memoize ~
                      a caller or to memoize its attachment (see :DOC ~
                      defattach)."</span>
                    str
                    key))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> inline
                   (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key-class <span class="keyword">:program</span>)
                     (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key <a class="sym-link system" href="axioms.html#def-_2Ainitial-program-fns-with-raw-code_2A" data-sym="*INITIAL-PROGRAM-FNS-WITH-RAW-CODE*">*initial-program-fns-with-raw-code*</a>)
                     (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> key <a class="sym-link system" href="axioms.html#def-_2Ainitial-logic-fns-with-raw-code_2A" data-sym="*INITIAL-LOGIC-FNS-WITH-RAW-CODE*">*initial-logic-fns-with-raw-code*</a>))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The built-in function symbol ~x1 has associated ~
                      raw-Lisp code, hence is illegal to memoize unless ~
                      :RECURSIVE is nil."</span>
                    str
                    key))
                ((let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:memo-table-init-size</span> val)))
                   (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> pair (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-posp" data-sym="POSP">posp</a> (cdr pair))))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The :memo-table-init-size must be a positive ~
                      integer, unlike ~x1."</span>
                    str
                    (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:memo-table-init-size</span> val))))
                ((<a class="sym-link local-def" href="#def-memoize-table-chk-commutative-msg" data-sym="MEMOIZE-TABLE-CHK-COMMUTATIVE-MSG" title="(defun memoize-table-chk-commutative-msg (str fn val wrld)
  (declare
   (xargs :guard
    (and (symbolp fn) (not (eq (getpropc fn (quote formals) t wrld) t))
         (symbol-alistp val))))
...">memoize-table-chk-commutative-msg</a> str key val wrld))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> invoke total) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0It is illegal to specify non-nil values for both the ~
                      :INVOKE and :TOTAL memoize keywords."</span>
                    str))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> invoke inline) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0It is illegal to specify a non-NIL value for the ~
                      :INVOKE keyword of memoize when the :RECURSIVE keyword ~
                      (i.e., the :INLINE keyword for the memoize table) is T."</span>
                    str))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> invoke
                   (<a class="sym-link local-def" href="#def-memoize-table-chk-invoke-msg" data-sym="MEMOIZE-TABLE-CHK-INVOKE-MSG" title="(defun memoize-table-chk-invoke-msg (key invoke str wrld state)
  (cond
   ((not
     (and (symbolp invoke) (function-symbolp invoke wrld)
          (eq (symbol-class invoke wrld) :common-lisp-compliant)))
...">memoize-table-chk-invoke-msg</a> key invoke str wrld state)))
                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp total)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The value of the :total keyword for memoize must be ~
                      a symbol, but ~x1 is not.  Presumably you are trying to ~
                      use the :total option of memoize directly, which is not ~
                      recommended.  See :DOC memoize-partial."</span>
                    str
                    total))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> total (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="history-management.html#def-cltl-def-memoize-partial" data-sym="CLTL-DEF-MEMOIZE-PARTIAL">cltl-def-memoize-partial</a> key total wrld))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0Unable to find executable Common Lisp definition for ~
                      ~x1 in the table, ~x2.  Presumably you are trying to ~
                      use the :total option of memoize directly, which is not ~
                      recommended.  See :DOC memoize-partial."</span>
                    str
                    total
                    'partial-functions-table))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key memoize-table))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0Function ~x1 is already memoized."</span> str key))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> val) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key memoize-table)))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0Cannot unmemoize function ~x1 because it is not ~
                      currently memoized."</span>
                    str
                    key))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key-class <span class="keyword">:ideal</span>)
                   val
                   (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:ideal-okp</span> val)) (okp (if pair
                           (cdr pair)
                           (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:memoize-ideal-okp</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld))))))
                     (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> okp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) nil)
                       ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> okp) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The function symbol ~x1 is in :logic ~
                                    mode but has not had its guards verified. ~
                                    ~ Either run ~x2, or specify :IDEAL-OKP ~
                                    ~x3 in your ~x4 call, or else evaluate ~
                                    ~x5 or ~x6."</span>
                           str
                           key
                           '<a class="sym-link system" href="axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a>
                           <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                           'memoize
                           '(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:memoize-ideal-okp</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                           '(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> acl2-defaults-table <span class="keyword">:memoize-ideal-okp</span> <span class="keyword">:warn</span>)))
                       (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (warning$-cw0 '<a class="sym-link local-def" href="#def-memoize-table-chk" data-sym="MEMOIZE-TABLE-CHK" title="(defun memoize-table-chk (key val wrld state)
  (let ((ctx &#39;(table . memoize-table))
        (str &quot;Illegal attempt to set memoize-table:  &quot;))
    (cond
     ((not (symbolp key))
...">memoize-table-chk</a>
                             <span class="string">"Memoize"</span>
                             (<a class="sym-link system" href="basis-a.html#def-default-state-vars" data-sym="DEFAULT-STATE-VARS">default-state-vars</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                             <span class="string">"The function ~x0 to be memoized is in ~
                                        :logic mode but has not had its ~
                                        guards verified.  Memoization might ~
                                        therefore not take place; see :DOC ~
                                        memoize."</span>
                             key)
                           nil))))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((val-formals (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> condition
                         (if (symbolp condition)
                           (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> condition '<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)
                           <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))) (val-guard (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> condition
                          (if (symbolp condition)
                            (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> condition <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)
                            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val nil) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> condition '(<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))) nil)
                      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val-formals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0The proposed memoization condition function, ~
                          ~x1, is neither T, NIL, nor a function symbol known ~
                          to ACL2."</span>
                          str
                          condition))
                      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp condition)
                           (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key-class <span class="keyword">:program</span>)
                             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> condition wrld) <span class="keyword">:common-lisp-compliant</span>)))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0Function ~x1 cannot serve as a memoization ~
                          condition function for function ~x2, because unlike ~
                          ~x2, ~x1 is not common-lisp-compliant (a logic-mode ~
                          function that has had its guards verified)."</span>
                          str
                          condition
                          key))
                      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal key-formals val-formals)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0Function ~x1 cannot serve as a memoization ~
                          condition function for ~x2, because the two ~
                          functions have different formal parameter lists."</span>
                          str
                          condition
                          key))
                      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> key <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld) val-guard)) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~@0Function ~x1 cannot serve as a memoization ~
                          condition function for ~x2, because the two ~
                          functions have different guards."</span>
                          str
                          condition
                          key))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))))))
          (<a class="sym-link system" href="axioms.html#def-progn_24" data-sym="PROGN$">progn$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val
              (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> key wrld)) (relevant-input-stobjs (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> condition (<a class="sym-link system" href="basis-b.html#def-collect-non-nil-df" data-sym="COLLECT-NON-NIL-DF">collect-non-nil-df</a> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (relevant-input-stobjs (<a class="sym-link system" href="basis-a.html#def-observation-cw" data-sym="OBSERVATION-CW">observation-cw</a> ctx
                      <span class="string">"The function ~x0 has input stobj~#1~[~/s~] ~&amp;1.  The ~
                    memoization table for ~x0 will be cleared whenever ~
                    ~#2~[this stobj is~/either of these stobjs is~/any of ~
                    these stobjs is~] updated.  Any update of a stobj may ~
                    therefore be significantly slower, perhaps by a factor of ~
                    5 or 10, when it is an input of a memoized function."</span>
                      key
                      relevant-input-stobjs
                      (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> (cdr relevant-input-stobjs))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))
            (if <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>)
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))))))</pre>
  </div>

<div class="form-block other" id="form-816" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> memoize-table
  nil
  nil
  <span class="keyword">:guard</span> (<a class="sym-link local-def" href="#def-memoize-table-chk" data-sym="MEMOIZE-TABLE-CHK" title="(defun memoize-table-chk (key val wrld state)
  (let ((ctx &#39;(table . memoize-table))
        (str &quot;Illegal attempt to set memoize-table:  &quot;))
    (cond
     ((not (symbolp key))
...">memoize-table-chk</a> key val world state))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-calls" data-defines="MEMOIZE-PARTIAL-CALLS" data-references="CDR,QUOTE,MEMOIZE,QUASIQUOTE,CONS,T,ENDP,COND,TRUE-LIST-LISTP,SYMBOL-ALISTP,AND,XARGS,DECLARE,TUPLES,DEFUN" data-part-name="MEMOIZE-PARTIAL-CALLS" data-part-args="TUPLES" data-part-declare="TRUE-LIST-LISTP,TUPLES,SYMBOL-ALISTP,AND,XARGS,DECLARE" data-part-body="CDR,MEMOIZE-PARTIAL-CALLS,QUOTE,MEMOIZE,QUASIQUOTE,CONS,T,TUPLES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-CALLS">memoize-partial-calls</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-calls" data-sym="MEMOIZE-PARTIAL-CALLS" title="(defun memoize-partial-calls (tuples)
  (declare
   (xargs :guard (and (symbol-alistp tuples) (true-list-listp tuples))))
  (cond ((endp tuples) nil)
        (t
...">memoize-partial-calls</a>
  (tuples)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> tuples) (<a class="sym-link system" href="axioms.html#def-true-list-listp" data-sym="TRUE-LIST-LISTP">true-list-listp</a> tuples))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> tuples) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons `(memoize ',(CAAR TUPLES)
          <span class="keyword">:total</span> ',(CADAR TUPLES)
          ,@(CDDDDR (CAR TUPLES)))
        (<a class="sym-link local-def" href="#def-memoize-partial-calls" data-sym="MEMOIZE-PARTIAL-CALLS" title="(defun memoize-partial-calls (tuples)
  (declare
   (xargs :guard (and (symbol-alistp tuples) (true-list-listp tuples))))
  (cond ((endp tuples) nil)
        (t
...">memoize-partial-calls</a> (cdr tuples))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-tuple-1" data-defines="MEMOIZE-PARTIAL-TUPLE-1" data-references="REMOVE-KEYWORD,ASSOC-KEYWORD,IF,CADR,CDDR,T,MSG,HARD,ER,CAR,EQ,ADD-SUFFIX,OR,LIST*,ENDP,COND,STRINGP,KEYWORD-VALUE-LISTP,AND,XARGS,DECLARE,STABLE,CHANGE,FN-LIMIT,FN,STR,CTX,X2,X1,DEFUN" data-used-by="MEMOIZE-PARTIAL-TUPLE" data-part-name="MEMOIZE-PARTIAL-TUPLE-1" data-part-args="STABLE,CHANGE,FN-LIMIT,FN,STR,CTX,X2,X1" data-part-declare="STR,STRINGP,X2,X1,KEYWORD-VALUE-LISTP,AND,XARGS,DECLARE" data-part-body="REMOVE-KEYWORD,ASSOC-KEYWORD,IF,CADR,CDDR,MEMOIZE-PARTIAL-TUPLE-1,T,MSG,STR,CTX,HARD,ER,CAR,EQ,X2,STABLE,ADD-SUFFIX,CHANGE,OR,FN-LIMIT,FN,LIST*,X1,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-TUPLE-1">memoize-partial-tuple-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-tuple-1" data-sym="MEMOIZE-PARTIAL-TUPLE-1" title="(defun memoize-partial-tuple-1 (x1 x2 ctx str fn fn-limit change stable)
  (declare
   (xargs :guard
    (and (keyword-value-listp x1) (keyword-value-listp x2) (stringp str))))
  (cond
...">memoize-partial-tuple-1</a>
  (x1 x2 ctx str fn fn-limit <a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> stable)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> x1)
        (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> x2)
        (stringp str))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> x1) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> fn
        fn-limit
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> fn-limit <span class="string">"-CHANGE"</span>))
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> stable (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> fn-limit <span class="string">"-STABLE"</span>))
        x2))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x1) <span class="keyword">:change</span>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            ctx
            str
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The keyword :CHANGE appears more than once ~
                                 for the tuple associated with ~x0"</span>
              fn)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-memoize-partial-tuple-1" data-sym="MEMOIZE-PARTIAL-TUPLE-1" title="(defun memoize-partial-tuple-1 (x1 x2 ctx str fn fn-limit change stable)
  (declare
   (xargs :guard
    (and (keyword-value-listp x1) (keyword-value-listp x2) (stringp str))))
  (cond
...">memoize-partial-tuple-1</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> x1)
            x2
            ctx
            str
            fn
            fn-limit
            (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x1)
            stable))))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x1) <span class="keyword">:stable</span>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (stable (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            ctx
            str
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The keyword :STABLE appears more than once ~
                                 for the tuple associated with ~x0"</span>
              fn)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-memoize-partial-tuple-1" data-sym="MEMOIZE-PARTIAL-TUPLE-1" title="(defun memoize-partial-tuple-1 (x1 x2 ctx str fn fn-limit change stable)
  (declare
   (xargs :guard
    (and (keyword-value-listp x1) (keyword-value-listp x2) (stringp str))))
  (cond
...">memoize-partial-tuple-1</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> x1)
            x2
            ctx
            str
            fn
            fn-limit
            <a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a>
            (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x1)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-memoize-partial-tuple-1" data-sym="MEMOIZE-PARTIAL-TUPLE-1" title="(defun memoize-partial-tuple-1 (x1 x2 ctx str fn fn-limit change stable)
  (declare
   (xargs :guard
    (and (keyword-value-listp x1) (keyword-value-listp x2) (stringp str))))
  (cond
...">memoize-partial-tuple-1</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> x1)
        (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car x1)
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x1)
          (if (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> (car x1) x2)
            (remove-keyword (car x1) x2)
            x2))
        ctx
        str
        fn
        fn-limit
        <a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a>
        stable))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-tuple" data-defines="MEMOIZE-PARTIAL-TUPLE" data-references="CADR,CAR,MEMOIZE-PARTIAL-TUPLE-1,STRINGP,CDDR,KEYWORD-VALUE-LISTP,CDR,CONSP,AND,XARGS,DECLARE,STR,CTX,ARGS,TUPLE,DEFUN" data-used-by="MEMOIZE-PARTIAL-TUPLES" data-part-name="MEMOIZE-PARTIAL-TUPLE" data-part-args="STR,CTX,ARGS,TUPLE" data-part-declare="STR,STRINGP,ARGS,CDDR,KEYWORD-VALUE-LISTP,CDR,TUPLE,CONSP,AND,XARGS,DECLARE" data-part-body="CADR,CAR,STR,CTX,ARGS,TUPLE,CDDR,MEMOIZE-PARTIAL-TUPLE-1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-TUPLE">memoize-partial-tuple</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-tuple" data-sym="MEMOIZE-PARTIAL-TUPLE" title="(defun memoize-partial-tuple (tuple args ctx str)
  (declare
   (xargs :guard
    (and (consp tuple) (consp (cdr tuple)) (keyword-value-listp (cddr tuple))
         (keyword-value-listp args) (stringp str))))
...">memoize-partial-tuple</a>
  (tuple <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ctx str)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp tuple)
        (consp (cdr tuple))
        (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> tuple))
        (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
        (stringp str))))
  (<a class="sym-link local-def" href="#def-memoize-partial-tuple-1" data-sym="MEMOIZE-PARTIAL-TUPLE-1" title="(defun memoize-partial-tuple-1 (x1 x2 ctx str fn fn-limit change stable)
  (declare
   (xargs :guard
    (and (keyword-value-listp x1) (keyword-value-listp x2) (stringp str))))
  (cond
...">memoize-partial-tuple-1</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> tuple)
    <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
    ctx
    str
    (car tuple)
    (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple)
    nil
    nil))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-tuples" data-defines="MEMOIZE-PARTIAL-TUPLES" data-references="MSG,CDR,MEMOIZE-PARTIAL-TUPLE,CONS,CDDR,CADR,LEN,<=,AND,ADD-SUFFIX,LIST,SYMBOLP,IF,CAR,TUPLE,LET*,T,HARD,ER,ATOM,NULL,COND,STR,LET,KEYWORD-VALUE-LISTP,XARGS,DECLARE,CTX,ARGS,TUPLES,DEFUN" data-used-by="MEMOIZE-PARTIAL" data-part-name="MEMOIZE-PARTIAL-TUPLES" data-part-args="CTX,ARGS,TUPLES" data-part-declare="ARGS,KEYWORD-VALUE-LISTP,XARGS,DECLARE" data-part-body="MSG,CDR,MEMOIZE-PARTIAL-TUPLES,ARGS,MEMOIZE-PARTIAL-TUPLE,CONS,CDDR,KEYWORD-VALUE-LISTP,CADR,LEN,<=,AND,ADD-SUFFIX,LIST,SYMBOLP,IF,CAR,TUPLE,LET*,T,CTX,HARD,ER,ATOM,TUPLES,NULL,COND,STR,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-TUPLES">memoize-partial-tuples</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-tuples" data-sym="MEMOIZE-PARTIAL-TUPLES" title="(defun memoize-partial-tuples (tuples args ctx)
  (declare (xargs :guard (keyword-value-listp args)))
  (let ((str
         &quot;Ill-formed argument for memoize-partial: ~@0.  See :DOC ~
          memoize-partial.&quot;))
...">memoize-partial-tuples</a>
  (tuples <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ctx)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
  (let ((str <span class="string">"Ill-formed argument for memoize-partial: ~@0.  See :DOC ~
          memoize-partial."</span>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> tuples) nil)
      ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> tuples) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard ctx str <span class="string">"Not a null-terminated list"</span>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tuple (car tuples)) (tuple (if (symbolp tuple)
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> tuple (<a class="sym-link system" href="axioms.html#def-add-suffix" data-sym="ADD-SUFFIX">add-suffix</a> tuple <span class="string">"-LIMIT"</span>))
                tuple)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">2</span> (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> tuple))
               (symbolp (car tuple))
               (car tuple)
               (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple))
               (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple)
               (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> tuple))) (cons (<a class="sym-link local-def" href="#def-memoize-partial-tuple" data-sym="MEMOIZE-PARTIAL-TUPLE" title="(defun memoize-partial-tuple (tuple args ctx str)
  (declare
   (xargs :guard
    (and (consp tuple) (consp (cdr tuple)) (keyword-value-listp (cddr tuple))
         (keyword-value-listp args) (stringp str))))
...">memoize-partial-tuple</a> tuple <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ctx str)
                (<a class="sym-link local-def" href="#def-memoize-partial-tuples" data-sym="MEMOIZE-PARTIAL-TUPLES" title="(defun memoize-partial-tuples (tuples args ctx)
  (declare (xargs :guard (keyword-value-listp args)))
  (let ((str
         &quot;Ill-formed argument for memoize-partial: ~@0.  See :DOC ~
          memoize-partial.&quot;))
...">memoize-partial-tuples</a> (cdr tuples) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> ctx)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                ctx
                str
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The tuple associated with ~x0 is not of the ~
                                  form (fn fn-limit :kwd1 val1 ... :kwdn ~
                                  valn)"</span>
                  (car tuple))))))))))</pre>
  </div>

<div class="form-block function" id="def-memoize-partial-basic-checks" data-defines="MEMOIZE-PARTIAL-BASIC-CHECKS" data-references="VALUE,COLLECT-NON-COMMON-LISP-COMPLIANTS,LET,T,SOFT,ER,COND,NON-FUNCTION-SYMBOLS,BAD,W,WRLD,STRIP-CADRS,FNS,LET*,STATE,CTX,TUPLES,DEFUN" data-used-by="MEMOIZE-PARTIAL" data-part-name="MEMOIZE-PARTIAL-BASIC-CHECKS" data-part-args="STATE,CTX,TUPLES" data-part-body="VALUE,COLLECT-NON-COMMON-LISP-COMPLIANTS,LET,T,CTX,SOFT,ER,COND,NON-FUNCTION-SYMBOLS,BAD,STATE,W,WRLD,TUPLES,STRIP-CADRS,FNS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL-BASIC-CHECKS">memoize-partial-basic-checks</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-memoize-partial-basic-checks" data-sym="MEMOIZE-PARTIAL-BASIC-CHECKS" title="(defun memoize-partial-basic-checks (tuples ctx state)
  (let* ((fns (strip-cadrs tuples))
         (wrld (w state))
         (bad (non-function-symbols fns wrld)))
    (cond
...">memoize-partial-basic-checks</a>
  (tuples ctx state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fns (<a class="sym-link system" href="axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> tuples)) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (bad (<a class="sym-link system" href="history-management.html#def-non-function-symbols" data-sym="NON-FUNCTION-SYMBOLS">non-function-symbols</a> fns wrld)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"You must define ~&amp;0 before submitting your memoize-partial ~
               form.  See :DOC memoize-partial."</span>
          bad))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((bad (<a class="sym-link system" href="defuns.html#def-collect-non-common-lisp-compliants" data-sym="COLLECT-NON-COMMON-LISP-COMPLIANTS">collect-non-common-lisp-compliants</a> fns wrld)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The function~#0~[ ~&amp;0 is~/s ~&amp;0 are~] not guard-verified.  ~
                 See :DOC memoize-partial."</span>
                bad))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))))))</pre>
  </div>

<div class="form-block macro" id="def-memoize-partial" data-defines="MEMOIZE-PARTIAL" data-references="APPEND,CONS,VALUE,SOFT,W,MEMOIZE-PARTIAL-SUPPORTING-EVENTS,TABLE-EVENT,DEFS,MSG,MV-LET,STATE,MEMOIZE-PARTIAL-BASIC-CHECKS,ER-PROGN,MAKE-EVENT,PROGN,QUASIQUOTE,LIST,SYMBOLP,IF,MEMOIZE-PARTIAL-TUPLES,T,KEYWORD-VALUE-LISTP,NOT,CADR,HARD,ER,CAR,LENGTH,EQUAL,TRUE-LISTP,AND,COND,QUOTE,CTX,LET,ARGS,&REST,TUPLES,WHOLE,&WHOLE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMOIZE-PARTIAL">memoize-partial</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-memoize-partial" data-sym="MEMOIZE-PARTIAL" title="(defmacro memoize-partial (&amp;whole whole tuples &amp;rest args)
  (let ((ctx &#39;memoize-partial))
    (cond
     ((and (true-listp tuples) (equal (length tuples) 2)
           (equal (car tuples) &#39;quote))
...">memoize-partial</a>
  (&amp;whole whole tuples &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (let ((ctx '<a class="sym-link local-def" href="#def-memoize-partial" data-sym="MEMOIZE-PARTIAL" title="(defmacro memoize-partial (&amp;whole whole tuples &amp;rest args)
  (let ((ctx &#39;memoize-partial))
    (cond
     ((and (true-listp tuples) (equal (length tuples) 2)
           (equal (car tuples) &#39;quote))
...">memoize-partial</a>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> tuples)
         (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> tuples) <span class="number">2</span>)
         (equal (car tuples) 'quote)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          ctx
          <span class="string">"The argument for memoize-partial should not be quoted.  ~
                     Perhaps you intended that argument to be ~x0.  See :DOC ~
                     memoize-partial."</span>
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuples)))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          ctx
          <span class="string">"The arguments to MEMOIZE-PARTIAL after the first ~
                     argument should be an alternating list of keywords and ~
                     values (keyword first), which will be passed to ~
                     MEMOIZE.  The call ~x0 is thus illegal.  See :DOC ~
                     memoize-partial."</span>
          whole))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((tuples (<a class="sym-link local-def" href="#def-memoize-partial-tuples" data-sym="MEMOIZE-PARTIAL-TUPLES" title="(defun memoize-partial-tuples (tuples args ctx)
  (declare (xargs :guard (keyword-value-listp args)))
  (let ((str
         &quot;Ill-formed argument for memoize-partial: ~@0.  See :DOC ~
          memoize-partial.&quot;))
...">memoize-partial-tuples</a> (if (symbolp tuples)
                 (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> tuples)
                 tuples)
               <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
               ctx)))
          `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-memoize-partial-basic-checks" data-sym="MEMOIZE-PARTIAL-BASIC-CHECKS" title="(defun memoize-partial-basic-checks (tuples ctx state)
  (let* ((fns (strip-cadrs tuples))
         (wrld (w state))
         (bad (non-function-symbols fns wrld)))
    (cond
...">memoize-partial-basic-checks</a> ',TUPLES ',CTX state)
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> defs table-event)
                  (<a class="sym-link local-def" href="#def-memoize-partial-supporting-events" data-sym="MEMOIZE-PARTIAL-SUPPORTING-EVENTS" title="(defun memoize-partial-supporting-events (tuples wrld)
  (memoize-partial-supporting-events-rec tuples (flet-bindings tuples wrld)
                                         wrld nil nil nil))">memoize-partial-supporting-events</a> ',TUPLES (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ',CTX <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> defs (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> table-event))))))))
              <span class="keyword">:on-behalf-of</span> <span class="keyword">:quiet!</span>)
            ,@(MEMOIZE-PARTIAL-CALLS TUPLES)))))))</pre>
  </div>

<div class="form-block function" id="def-read-event-data-fal" data-defines="READ-EVENT-DATA-FAL" data-references="CONS,HONS-ACONS,HONS-GET,CDR,OLD,CDAR,VAL,CAAR,KEY,LET*,T,ENDP,COND,FAL,ALIST,DEFUN" data-used-by="OLD-AND-NEW-EVENT-DATA-FAL" data-part-name="READ-EVENT-DATA-FAL" data-part-args="FAL,ALIST" data-part-body="CONS,HONS-ACONS,READ-EVENT-DATA-FAL,HONS-GET,CDR,OLD,CDAR,VAL,CAAR,KEY,LET*,T,FAL,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-EVENT-DATA-FAL">read-event-data-fal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-event-data-fal" data-sym="READ-EVENT-DATA-FAL" title="(defun read-event-data-fal (alist fal)
  (cond ((endp alist) fal)
        (t
         (let* ((key (caar alist))
                (val (cdar alist))
...">read-event-data-fal</a>
  (alist fal)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) fal)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((key (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (val (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist))
          (old (cdr (hons-get key fal))))
        (<a class="sym-link local-def" href="#def-read-event-data-fal" data-sym="READ-EVENT-DATA-FAL" title="(defun read-event-data-fal (alist fal)
  (cond ((endp alist) fal)
        (t
         (let* ((key (caar alist))
                (val (cdar alist))
...">read-event-data-fal</a> (cdr alist)
          (hons-acons key (cons val old) fal))))))</pre>
  </div>

<div class="form-block function" id="def-first-non-string-key-pair" data-defines="FIRST-NON-STRING-KEY-PAIR" data-references="CAR,T,CDR,CAAR,STRINGP,ATOM,COND,FAL,DEFUN" data-used-by="OLD-AND-NEW-EVENT-DATA-FN" data-part-name="FIRST-NON-STRING-KEY-PAIR" data-part-args="FAL" data-part-body="CAR,T,CDR,FIRST-NON-STRING-KEY-PAIR,CAAR,STRINGP,FAL,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIRST-NON-STRING-KEY-PAIR">first-non-string-key-pair</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-first-non-string-key-pair" data-sym="FIRST-NON-STRING-KEY-PAIR" title="(defun first-non-string-key-pair (fal)
  (cond ((atom fal) nil)
        ((stringp (caar fal)) (first-non-string-key-pair (cdr fal)))
        (t (car fal))))">first-non-string-key-pair</a>
  (fal)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> fal) nil)
    ((stringp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> fal)) (<a class="sym-link local-def" href="#def-first-non-string-key-pair" data-sym="FIRST-NON-STRING-KEY-PAIR" title="(defun first-non-string-key-pair (fal)
  (cond ((atom fal) nil)
        ((stringp (caar fal)) (first-non-string-key-pair (cdr fal)))
        (t (car fal))))">first-non-string-key-pair</a> (cdr fal)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (car fal))))</pre>
  </div>

<div class="form-block function" id="def-old-and-new-event-data-fal" data-defines="OLD-AND-NEW-EVENT-DATA-FAL" data-references="F-PUT-GLOBAL,HONS-ACONS,NEW-EVENT-DATA-FAL,CLOSE-INPUT-CHANNEL,PPROGN,READ-EVENT-DATA-FAL,FILE-EVENT-DATA-FAL,READ-FILE-ITERATE-SAFE,SET-CURRENT-PACKAGE-STATE,CURRENT-PACKAGE,STATE-GLOBAL-LET*,ALIST,ER-LET*,OPEN-INPUT-CHANNEL,CHANNEL,WITH-PACKAGES-UNHIDDEN,EVENT-DATA-FILENAME,CONS,VALUE,HONS-GET,CDR,CACHED,LET*,IGNORE,DECLARE,CBD,OR,PARSE-BOOK-NAME,FAMILIAR-NAME,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,MV-LET,T,SOFT,ER,NULL,COND,EVENT-DATA-FAL,QUOTE,F-GET-GLOBAL,CURRENT-EVENT-DATA-FAL,LET,STATE,CTX,DIR,BOOK-STRING,DEFUN" data-used-by="OLD-AND-NEW-EVENT-DATA-FN" data-part-name="OLD-AND-NEW-EVENT-DATA-FAL" data-part-args="STATE,CTX,DIR,BOOK-STRING" data-part-body="F-PUT-GLOBAL,HONS-ACONS,NEW-EVENT-DATA-FAL,CLOSE-INPUT-CHANNEL,PPROGN,READ-EVENT-DATA-FAL,FILE-EVENT-DATA-FAL,READ-FILE-ITERATE-SAFE,SET-CURRENT-PACKAGE-STATE,CURRENT-PACKAGE,STATE-GLOBAL-LET*,ALIST,ER-LET*,OPEN-INPUT-CHANNEL,CHANNEL,WITH-PACKAGES-UNHIDDEN,EVENT-DATA-FILENAME,CONS,VALUE,HONS-GET,CDR,CACHED,LET*,IGNORE,DECLARE,BOOK-STRING,CBD,DIR,OR,PARSE-BOOK-NAME,FAMILIAR-NAME,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,MV-LET,T,CTX,SOFT,ER,NULL,COND,STATE,EVENT-DATA-FAL,QUOTE,F-GET-GLOBAL,CURRENT-EVENT-DATA-FAL,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OLD-AND-NEW-EVENT-DATA-FAL">old-and-new-event-data-fal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-old-and-new-event-data-fal" data-sym="OLD-AND-NEW-EVENT-DATA-FAL" title="(defun old-and-new-event-data-fal (book-string dir ctx state)
  (let ((current-event-data-fal (f-get-global &#39;event-data-fal state)))
    (cond
     ((null current-event-data-fal)
      (er soft ctx
...">old-and-new-event-data-fal</a>
  (book-string dir ctx state)
  (let ((current-event-data-fal (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'event-data-fal state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> current-event-data-fal) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"No event-data-fal has been saved in this session.  See :DOC ~
           saving-event-data."</span>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (full-book-string full-book-name
            directory-name
            familiar-name)
          (<a class="sym-link local-def" href="#def-parse-book-name" data-sym="PARSE-BOOK-NAME" title="(defun parse-book-name (dir x extension ctx state)
  (cond
   ((and extension (not (equal extension &quot;.lisp&quot;)))
    (mv
     (er hard ctx &quot;Calls of parse-book-name with non-nil extension other than ~
...">parse-book-name</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> dir (<a class="sym-link local-def" href="#def-cbd" data-sym="CBD" title="(defmacro cbd () `(cbd-fn state))">cbd</a>)) book-string nil ctx state)
          (declare (ignore full-book-name directory-name familiar-name))
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cached (cdr (hons-get full-book-string current-event-data-fal))))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (cached (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons cached current-event-data-fal)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((event-data-filename (event-data-filename full-book-string nil)))
                  (<a class="sym-link system" href="history-management.html#def-with-packages-unhidden" data-sym="WITH-PACKAGES-UNHIDDEN">with-packages-unhidden</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (channel state)
                      (<a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> event-data-filename <span class="keyword">:object</span> state)
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (channel (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((alist (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span> set-current-package-state))
                                 (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (alist state)
                                   (<a class="sym-link local-def" href="#def-read-file-iterate-safe" data-sym="READ-FILE-ITERATE-SAFE" title="(defun read-file-iterate-safe (channel acc state)
  (mv-let (eof obj state)
          (mv-let (erp val state) (read-acl2-oracle state)
                  (declare (ignore erp))
                  (cond
...">read-file-iterate-safe</a> channel nil state)
                                   (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> alist)))))
                            (let ((file-event-data-fal (<a class="sym-link local-def" href="#def-read-event-data-fal" data-sym="READ-EVENT-DATA-FAL" title="(defun read-event-data-fal (alist fal)
  (cond ((endp alist) fal)
        (t
         (let* ((key (caar alist))
                (val (cdar alist))
...">read-event-data-fal</a> alist '<a class="sym-link local-def" href="#def-read-event-data-fal" data-sym="READ-EVENT-DATA-FAL" title="(defun read-event-data-fal (alist fal)
  (cond ((endp alist) fal)
        (t
         (let* ((key (caar alist))
                (val (cdar alist))
...">read-event-data-fal</a>)))
                              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> channel state)
                                (let ((new-event-data-fal (hons-acons full-book-string
                                       file-event-data-fal
                                       current-event-data-fal)))
                                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'event-data-fal new-event-data-fal state)
                                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons file-event-data-fal new-event-data-fal))))))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                            ctx
                            <span class="string">"Unable to open file ~x0 for reading event-data."</span>
                            event-data-filename))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-old-and-new-event-data-fn" data-defines="OLD-AND-NEW-EVENT-DATA-FN" data-references="-,NTH,CONS,T,SOFT,ER,=,VALUE,WARNING$,PPROGN,<,COND,NEW-LEN,NEW-EVENT-DATA-LST,LENGTH,OLD-LEN,HONS-GET,OLD-EVENT-DATA-LST,IF,FIRST-NON-STRING-KEY-PAIR,NOT,AND,PAIR,CDR,NEW,CAR,OLD,LET*,OLD-AND-NEW-EVENT-DATA-FAL,OLD/NEW,ER-LET*,STATE,CTX,DIR,NAMEP,NAME,BOOK-STRING,DEFUN" data-used-by="RUNES-DIFF-FN,OLD-AND-NEW-EVENT-DATA" data-part-name="OLD-AND-NEW-EVENT-DATA-FN" data-part-args="STATE,CTX,DIR,NAMEP,NAME,BOOK-STRING" data-part-body="-,NTH,CONS,T,SOFT,ER,=,VALUE,WARNING$,PPROGN,<,COND,NEW-LEN,NEW-EVENT-DATA-LST,LENGTH,OLD-LEN,HONS-GET,OLD-EVENT-DATA-LST,IF,NAME,FIRST-NON-STRING-KEY-PAIR,NAMEP,NOT,AND,PAIR,CDR,NEW,CAR,OLD,LET*,STATE,CTX,DIR,BOOK-STRING,OLD-AND-NEW-EVENT-DATA-FAL,OLD/NEW,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OLD-AND-NEW-EVENT-DATA-FN">old-and-new-event-data-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-old-and-new-event-data-fn" data-sym="OLD-AND-NEW-EVENT-DATA-FN" title="(defun old-and-new-event-data-fn (book-string name namep dir ctx state)
  (er-let* ((old/new (old-and-new-event-data-fal book-string dir ctx state)))
           (let* ((old (car old/new))
                  (new (cdr old/new))
                  (pair (and (not namep) (first-non-string-key-pair new)))
...">old-and-new-event-data-fn</a>
  (book-string name namep dir ctx state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((old/new (<a class="sym-link local-def" href="#def-old-and-new-event-data-fal" data-sym="OLD-AND-NEW-EVENT-DATA-FAL" title="(defun old-and-new-event-data-fal (book-string dir ctx state)
  (let ((current-event-data-fal (f-get-global &#39;event-data-fal state)))
    (cond
     ((null current-event-data-fal)
      (er soft ctx
...">old-and-new-event-data-fal</a> book-string dir ctx state)))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old (car old/new)) (new (cdr old/new))
        (pair (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> namep) (<a class="sym-link local-def" href="#def-first-non-string-key-pair" data-sym="FIRST-NON-STRING-KEY-PAIR" title="(defun first-non-string-key-pair (fal)
  (cond ((atom fal) nil)
        ((stringp (caar fal)) (first-non-string-key-pair (cdr fal)))
        (t (car fal))))">first-non-string-key-pair</a> new)))
        (name (if namep
            name
            (car pair)))
        (old-event-data-lst (cdr (hons-get name old)))
        (old-len (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> old-event-data-lst))
        (new-event-data-lst (if pair
            (cdr pair)
            (cdr (hons-get name new))))
        (new-len (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> new-event-data-lst)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((&lt; old-len new-len) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
              <span class="string">"Event-data"</span>
              <span class="string">"The number of events named ~x0 in the current ~
                         session, which is ~x1, exceeds the number of events, ~
                         ~x2, that are named ~x0 in the given file.  Thus no ~
                         result is available."</span>
              name
              new-len
              old-len)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
        ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> new-len <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"No event-data ~#0~[was~/ for events named ~x1 were~] saved ~
                  in the current session.  Thus no result is available."</span>
            (if namep
              <span class="number">1</span>
              <span class="number">0</span>)
            name))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> old-len new-len) old-event-data-lst)
              (car new-event-data-lst))))))))</pre>
  </div>

<div class="form-block macro" id="def-old-and-new-event-data" data-defines="OLD-AND-NEW-EVENT-DATA" data-references="STATE,OLD-AND-NEW-EVENT-DATA-FN,QUASIQUOTE,DIR,NAMEP,QUOTE,NAME,&KEY,BOOK-STRING,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="OLD-AND-NEW-EVENT-DATA">old-and-new-event-data</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-old-and-new-event-data" data-sym="OLD-AND-NEW-EVENT-DATA" title="(defmacro old-and-new-event-data (book-string &amp;key (name &#39;nil namep) dir)
  `(old-and-new-event-data-fn ,book-string ,name ,namep ,dir
                              &#39;old-and-new-event-data state))">old-and-new-event-data</a>
  (book-string &amp;key (name 'nil namep) dir)
  `(<a class="sym-link local-def" href="#def-old-and-new-event-data-fn" data-sym="OLD-AND-NEW-EVENT-DATA-FN" title="(defun old-and-new-event-data-fn (book-string name namep dir ctx state)
  (er-let* ((old/new (old-and-new-event-data-fal book-string dir ctx state)))
           (let* ((old (car old/new))
                  (new (cdr old/new))
                  (pair (and (not namep) (first-non-string-key-pair new)))
...">old-and-new-event-data-fn</a> ,BOOK-STRING
    ,NAME
    ,NAMEP
    ,DIR
    '<a class="sym-link local-def" href="#def-old-and-new-event-data" data-sym="OLD-AND-NEW-EVENT-DATA" title="(defmacro old-and-new-event-data (book-string &amp;key (name &#39;nil namep) dir)
  `(old-and-new-event-data-fn ,book-string ,name ,namep ,dir
                              &#39;old-and-new-event-data state))">old-and-new-event-data</a>
    state))</pre>
  </div>

<div class="form-block function" id="def-runes-diff-fn" data-defines="RUNES-DIFF-FN" data-references="LIST,VALUE,NEW-DIFF,SET-DIFFERENCE-EQUAL,OLD-DIFF,NEW-RUNES,RULES,QUOTE,GET-EVENT-DATA-1,OLD-RUNES,CDR,NEW,CAR,OLD,LET*,OLD-AND-NEW-EVENT-DATA-FN,OLD/NEW,ER-LET*,STATE,CTX,DIR,NAMEP,NAME,BOOK-STRING,DEFUN" data-used-by="RUNES-DIFF" data-part-name="RUNES-DIFF-FN" data-part-args="STATE,CTX,DIR,NAMEP,NAME,BOOK-STRING" data-part-body="LIST,VALUE,NEW-DIFF,SET-DIFFERENCE-EQUAL,OLD-DIFF,NEW-RUNES,RULES,QUOTE,GET-EVENT-DATA-1,OLD-RUNES,CDR,NEW,CAR,OLD,LET*,STATE,CTX,DIR,NAMEP,NAME,BOOK-STRING,OLD-AND-NEW-EVENT-DATA-FN,OLD/NEW,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RUNES-DIFF-FN">runes-diff-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-runes-diff-fn" data-sym="RUNES-DIFF-FN" title="(defun runes-diff-fn (book-string name namep dir ctx state)
  (er-let*
   ((old/new (old-and-new-event-data-fn book-string name namep dir ctx state)))
   (let* ((old (car old/new))
          (new (cdr old/new))
...">runes-diff-fn</a>
  (book-string name namep dir ctx state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((old/new (<a class="sym-link local-def" href="#def-old-and-new-event-data-fn" data-sym="OLD-AND-NEW-EVENT-DATA-FN" title="(defun old-and-new-event-data-fn (book-string name namep dir ctx state)
  (er-let* ((old/new (old-and-new-event-data-fal book-string dir ctx state)))
           (let* ((old (car old/new))
                  (new (cdr old/new))
                  (pair (and (not namep) (first-non-string-key-pair new)))
...">old-and-new-event-data-fn</a> book-string
         name
         namep
         dir
         ctx
         state)))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old (car old/new)) (new (cdr old/new))
        (old-runes (<a class="sym-link system" href="history-management.html#def-get-event-data-1" data-sym="GET-EVENT-DATA-1">get-event-data-1</a> 'rules old))
        (new-runes (<a class="sym-link system" href="history-management.html#def-get-event-data-1" data-sym="GET-EVENT-DATA-1">get-event-data-1</a> 'rules new))
        (old-diff (<a class="sym-link system" href="axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> old-runes new-runes))
        (new-diff (<a class="sym-link system" href="axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> new-runes old-runes)))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:old</span> old-diff) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:new</span> new-diff))))))</pre>
  </div>

<div class="form-block macro" id="def-runes-diff" data-defines="RUNES-DIFF" data-references="STATE,RUNES-DIFF-FN,QUASIQUOTE,DIR,NAMEP,QUOTE,NAME,&KEY,BOOK-STRING,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="RUNES-DIFF">runes-diff</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-runes-diff" data-sym="RUNES-DIFF" title="(defmacro runes-diff (book-string &amp;key (name &#39;nil namep) dir)
  `(runes-diff-fn ,book-string ,name ,namep ,dir &#39;runes-diff state))">runes-diff</a>
  (book-string &amp;key (name 'nil namep) dir)
  `(<a class="sym-link local-def" href="#def-runes-diff-fn" data-sym="RUNES-DIFF-FN" title="(defun runes-diff-fn (book-string name namep dir ctx state)
  (er-let*
   ((old/new (old-and-new-event-data-fn book-string name namep dir ctx state)))
   (let* ((old (car old/new))
          (new (cdr old/new))
...">runes-diff-fn</a> ,BOOK-STRING
    ,NAME
    ,NAMEP
    ,DIR
    '<a class="sym-link local-def" href="#def-runes-diff" data-sym="RUNES-DIFF" title="(defmacro runes-diff (book-string &amp;key (name &#39;nil namep) dir)
  `(runes-diff-fn ,book-string ,name ,namep ,dir &#39;runes-diff state))">runes-diff</a>
    state))</pre>
  </div>

<div class="form-block function" id="def-add-global-stobj" data-defines="ADD-GLOBAL-STOBJ" data-references="VALUE,ACONS,UPDATE-USER-STOBJ-ALIST,PPROGN,IGNORE,READ-ACL2-ORACLE,INIT-VAL,ERP,MV-LET,ASSOC-EQ,SOFT,ER,T,STOBJP,NOT,COND,QUOTE,CTX,W,WRLD,USER-STOBJ-ALIST,LET,SYMBOLP,XARGS,DECLARE,STATE,NAME,DEFUN" data-used-by="REMOVE-GLOBAL-STOBJ" data-part-name="ADD-GLOBAL-STOBJ" data-part-args="STATE,NAME" data-part-declare="STATE,NAME,SYMBOLP,XARGS,DECLARE" data-part-body="VALUE,ACONS,UPDATE-USER-STOBJ-ALIST,PPROGN,IGNORE,DECLARE,READ-ACL2-ORACLE,INIT-VAL,ERP,MV-LET,ASSOC-EQ,SOFT,ER,T,NAME,STOBJP,NOT,COND,ADD-GLOBAL-STOBJ,QUOTE,CTX,W,WRLD,STATE,USER-STOBJ-ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADD-GLOBAL-STOBJ">add-global-stobj</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-add-global-stobj" data-sym="ADD-GLOBAL-STOBJ" title="(defun add-global-stobj (name state)
  (declare (xargs :guard (symbolp name) :mode :program :stobjs state))
  (let ((user-stobj-alist (user-stobj-alist state))
        (wrld (w state))
        (ctx &#39;add-global-stobj))
...">add-global-stobj</a>
  (name state)
  (declare (xargs <span class="keyword">:guard</span> (symbolp name) <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state))
  (let ((<a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a> (<a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a> state)) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (ctx '<a class="sym-link local-def" href="#def-add-global-stobj" data-sym="ADD-GLOBAL-STOBJ" title="(defun add-global-stobj (name state)
  (declare (xargs :guard (symbolp name) :mode :program :stobjs state))
  (let ((user-stobj-alist (user-stobj-alist state))
        (wrld (w state))
        (ctx &#39;add-global-stobj))
...">add-global-stobj</a>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> name <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~x0 is not the name of a known stobj."</span> name))
      ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> name <a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"The stobj ~x0 is already global."</span> name))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp init-val state)
          (<a class="sym-link system" href="axioms.html#def-read-acl2-oracle" data-sym="READ-ACL2-ORACLE">read-acl2-oracle</a> state)
          (declare (ignore erp))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-update-user-stobj-alist" data-sym="UPDATE-USER-STOBJ-ALIST">update-user-stobj-alist</a> (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> name init-val <a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a>)
              state)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> name)))))))</pre>
  </div>

<div class="form-block function" id="def-remove-global-stobj" data-defines="REMOVE-GLOBAL-STOBJ" data-references="VALUE,REMOVE-ASSOC-EQ,UPDATE-USER-STOBJ-ALIST,PPROGN,ASSOC-EQ,SOFT,ER,T,STOBJP,NOT,COND,ADD-GLOBAL-STOBJ,QUOTE,CTX,W,WRLD,USER-STOBJ-ALIST,LET,SYMBOLP,XARGS,DECLARE,STATE,NAME,DEFUN" data-part-name="REMOVE-GLOBAL-STOBJ" data-part-args="STATE,NAME" data-part-declare="STATE,NAME,SYMBOLP,XARGS,DECLARE" data-part-body="VALUE,REMOVE-ASSOC-EQ,UPDATE-USER-STOBJ-ALIST,PPROGN,ASSOC-EQ,SOFT,ER,T,NAME,STOBJP,NOT,COND,ADD-GLOBAL-STOBJ,QUOTE,CTX,W,WRLD,STATE,USER-STOBJ-ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-GLOBAL-STOBJ">remove-global-stobj</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-global-stobj" data-sym="REMOVE-GLOBAL-STOBJ" title="(defun remove-global-stobj (name state)
  (declare (xargs :guard (symbolp name) :mode :program :stobjs state))
  (let ((user-stobj-alist (user-stobj-alist state))
        (wrld (w state))
        (ctx &#39;add-global-stobj))
...">remove-global-stobj</a>
  (name state)
  (declare (xargs <span class="keyword">:guard</span> (symbolp name) <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state))
  (let ((<a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a> (<a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a> state)) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (ctx '<a class="sym-link local-def" href="#def-add-global-stobj" data-sym="ADD-GLOBAL-STOBJ" title="(defun add-global-stobj (name state)
  (declare (xargs :guard (symbolp name) :mode :program :stobjs state))
  (let ((user-stobj-alist (user-stobj-alist state))
        (wrld (w state))
        (ctx &#39;add-global-stobj))
...">add-global-stobj</a>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-stobjp" data-sym="STOBJP">stobjp</a> name <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~x0 is not the name of a known stobj."</span> name))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> name <a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a>)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"The stobj ~x0 is not currently global."</span> name))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-update-user-stobj-alist" data-sym="UPDATE-USER-STOBJ-ALIST">update-user-stobj-alist</a> (<a class="sym-link system" href="axioms.html#def-remove-assoc-eq" data-sym="REMOVE-ASSOC-EQ">remove-assoc-eq</a> name <a class="sym-link system" href="axioms.html#def-user-stobj-alist" data-sym="USER-STOBJ-ALIST">user-stobj-alist</a>)
            state)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> name))))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>