<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>defsum - ACL2 Book</title>
  <meta property="name" content="defsum">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">defsum</h1>
    <div class="path"><a href="defsum.lisp" class="source-link">books/tools/defsum</a></div>
  </div>
  
  <main property="text">
  <div class="includes-section">
    <h2>Included Books</h2>
    <div class="includes-list">
      <a class="include-link" href="../xdoc/top.html" title="xdoc/top">top</a>
      <a class="include-link" href="pattern-match.html" title="pattern-match">pattern-match</a>
      <a class="include-link" href="types-misc.html" title="types-misc">types-misc</a>
    </div>
  </div>

<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block include-book" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../xdoc/top.html" title="Open xdoc/top">"xdoc/top"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="pattern-match.html" title="Open pattern-match">"pattern-match"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="types-misc.html" title="Open types-misc">"types-misc"</a>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-set-ignore-ok" data-sym="SET-IGNORE-OK">set-ignore-ok</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-set-bogus-mutual-recursion-ok" data-sym="SET-BOGUS-MUTUAL-RECURSION-OK">set-bogus-mutual-recursion-ok</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-product-type" data-defines="PRODUCT-TYPE" data-references="CAR,CONSP,XARGS,DECLARE,X,DEFUN" data-used-by="DEFSUMS-FN,PRODUCT-TYPE-THMS" data-part-name="PRODUCT-TYPE" data-part-args="X" data-part-declare="X,CONSP,XARGS,DECLARE" data-part-body="X,CAR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-TYPE">product-type</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (consp x)))
  (car x))</pre>
  </div>

<div class="form-block in-theory" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">in-theory</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a>
    (<span class="keyword">:executable-counterpart</span> <a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a>)))</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block function" id="def-sum-name" data-defines="SUM-NAME" data-references="CAR,SUM,DEFUN" data-used-by="SUMS-NAMES,SUM-MEASURE-THMS,NAME-MATCHING-RECOGNIZER,BAD-TYPING-THM,ACCESSOR-TYPE-THM,SUM-POSSIBILITY-THM,SUM-COMPOUND-REC-THM,SUM-RECOGNIZER" data-part-name="SUM-NAME" data-part-args="SUM" data-part-body="SUM,CAR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-NAME">sum-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-name" data-sym="SUM-NAME" title="(defun sum-name (sum) (car sum))">sum-name</a> (sum) (car sum))</pre>
  </div>

<div class="form-block function" id="def-sum-products" data-defines="SUM-PRODUCTS" data-references="CDR,SUM,DEFUN" data-used-by="SUMS-PRODUCTS,SUM-MEASURE-THMS,MEASURE-DEF,ALL-POST-CONSTRUCTOR-THMS,ALL-BAD-TYPING-THMS,ALL-ACCESSOR-TYPE-THMS,ACCESSOR-TYPE-THM,PRODUCT-FAST-RECS-SUMS,SUM-POSSIBILITY-THM" data-part-name="SUM-PRODUCTS" data-part-args="SUM" data-part-body="SUM,CDR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-PRODUCTS">sum-products</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> (sum) (cdr sum))</pre>
  </div>

<div class="form-block function" id="def-sum-recognizer" data-defines="SUM-RECOGNIZER" data-references="P,QUOTE,SUM-NAME,LIST,APPSYMS,SUM,DEFUN" data-used-by="NAME-MATCHING-RECOGNIZER,SUM-RECOGNIZER-CONSTRUCTOR-THM,BAD-TYPING-THM,ACCESSOR-TYPE-THM,PRODUCT-FAST-RECS-SUMS,SUM-POSSIBILITY-THM,SUM-COMPOUND-REC-THM" data-part-name="SUM-RECOGNIZER" data-part-args="SUM" data-part-body="P,QUOTE,SUM,SUM-NAME,LIST,APPSYMS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-RECOGNIZER">sum-recognizer</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-recognizer" data-sym="SUM-RECOGNIZER" title="(defun sum-recognizer (sum) (appsyms (list (sum-name sum) &#39;p)))">sum-recognizer</a>
  (sum)
  (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link local-def" href="#def-sum-name" data-sym="SUM-NAME" title="(defun sum-name (sum) (car sum))">sum-name</a> sum) 'p)))</pre>
  </div>

<div class="form-block function" id="def-sym-recognizer" data-defines="SYM-RECOGNIZER" data-references="P,QUOTE,LIST,APPSYMS,SYM,DEFUN" data-used-by="PRODUCT-RECOGNIZER" data-part-name="SYM-RECOGNIZER" data-part-args="SYM" data-part-body="P,QUOTE,SYM,LIST,APPSYMS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYM-RECOGNIZER">sym-recognizer</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sym-recognizer" data-sym="SYM-RECOGNIZER" title="(defun sym-recognizer (sym) (appsyms (list sym &#39;p)))">sym-recognizer</a> (sym) (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> sym 'p)))</pre>
  </div>

<div class="form-block function" id="def-product-recognizer" data-defines="PRODUCT-RECOGNIZER" data-references="PRODUCT-NAME,SYM-RECOGNIZER,PRODUCT-KWALIST,KWASSOC,OR,PRODUCT,DEFUN" data-used-by="EXCLUSION-THM,SUM-RECOGNIZER-CONSTRUCTOR-THM,BAD-TYPING-THM,ACCESSOR-TYPE-THM,STRIP-PRODUCT-RECOGNIZERS,PRODUCT-FAST-RECS,PRODUCT-COMPONENT-THM,PRODUCT-TYPE-THMS,PRODUCT-ELIM-THM,PRODUCT-RECOGNIZER-CONSTRUCTOR-THM,ACCESSOR-ACL2-COUNT-THM,ACCESSOR-SHORT-CIRCUIT-THM,ACCESSOR-DEF" data-part-name="PRODUCT-RECOGNIZER" data-part-args="PRODUCT" data-part-body="PRODUCT-NAME,SYM-RECOGNIZER,PRODUCT,PRODUCT-KWALIST,KWASSOC,OR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-RECOGNIZER">product-recognizer</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a>
  (product)
  (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:recognizer</span> nil (<a class="sym-link external" href="types-misc.html#def-product-kwalist" data-sym="PRODUCT-KWALIST">product-kwalist</a> product))
    (<a class="sym-link local-def" href="#def-sym-recognizer" data-sym="SYM-RECOGNIZER" title="(defun sym-recognizer (sym) (appsyms (list sym &#39;p)))">sym-recognizer</a> (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product))))</pre>
  </div>

<div class="form-block function" id="def-defsum-munge-product" data-defines="DEFSUM-MUNGE-PRODUCT" data-references="CDR,MUNGE-COMPONENTS,CAR,CONS,STRIP-KEYWORDS,KWALIST,MV-LET,PRODUCT,DEFUN" data-used-by="DEFPRODUCT,DEFSUM-MUNGE-PRODUCTS" data-part-name="DEFSUM-MUNGE-PRODUCT" data-part-args="PRODUCT" data-part-body="CDR,MUNGE-COMPONENTS,CAR,CONS,STRIP-KEYWORDS,KWALIST,PRODUCT,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSUM-MUNGE-PRODUCT">defsum-munge-product</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defsum-munge-product" data-sym="DEFSUM-MUNGE-PRODUCT" title="(defun defsum-munge-product (product)
  (mv-let (product kwalist) (strip-keywords product)
          (cons (cons (car product) (munge-components (cdr product))) kwalist)))">defsum-munge-product</a>
  (product)
  (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (product kwalist)
    (<a class="sym-link external" href="types-misc.html#def-strip-keywords" data-sym="STRIP-KEYWORDS">strip-keywords</a> product)
    (cons (cons (car product) (<a class="sym-link external" href="types-misc.html#def-munge-components" data-sym="MUNGE-COMPONENTS">munge-components</a> (cdr product)))
      kwalist)))</pre>
  </div>

<div class="form-block function" id="def-defsum-munge-products" data-defines="DEFSUM-MUNGE-PRODUCTS" data-references="CDR,CAR,DEFSUM-MUNGE-PRODUCT,CONS,ATOM,IF,PRODUCTS,DEFUN" data-used-by="DEFSUMS-MUNGE-SUMS,DEFSUM-MUNGE-INPUT" data-part-name="DEFSUM-MUNGE-PRODUCTS" data-part-args="PRODUCTS" data-part-body="CDR,DEFSUM-MUNGE-PRODUCTS,CAR,DEFSUM-MUNGE-PRODUCT,CONS,PRODUCTS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSUM-MUNGE-PRODUCTS">defsum-munge-products</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defsum-munge-products" data-sym="DEFSUM-MUNGE-PRODUCTS" title="(defun defsum-munge-products (products)
  (if (atom products)
      nil
      (cons (defsum-munge-product (car products))
            (defsum-munge-products (cdr products)))))">defsum-munge-products</a>
  (products)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> products)
    nil
    (cons (<a class="sym-link local-def" href="#def-defsum-munge-product" data-sym="DEFSUM-MUNGE-PRODUCT" title="(defun defsum-munge-product (product)
  (mv-let (product kwalist) (strip-keywords product)
          (cons (cons (car product) (munge-components (cdr product))) kwalist)))">defsum-munge-product</a> (car products))
      (<a class="sym-link local-def" href="#def-defsum-munge-products" data-sym="DEFSUM-MUNGE-PRODUCTS" title="(defun defsum-munge-products (products)
  (if (atom products)
      nil
      (cons (defsum-munge-product (car products))
            (defsum-munge-products (cdr products)))))">defsum-munge-products</a> (cdr products)))))</pre>
  </div>

<div class="form-block function" id="def-strip-extfns" data-defines="STRIP-EXTFNS" data-references="CONS,QUOTE,CAAR,EQ,CAR,CONSP,AND,CDR,EXTFNS,PRODS,MV-LET,MV,ATOM,IF,PRODUCTS,DEFUN" data-used-by="DEFSUMS-MUNGE-INPUT,DEFSUM-MUNGE-INPUT" data-part-name="STRIP-EXTFNS" data-part-args="PRODUCTS" data-part-body="CONS,DEFUN,QUOTE,CAAR,EQ,CAR,CONSP,AND,CDR,STRIP-EXTFNS,EXTFNS,PRODS,MV-LET,MV,PRODUCTS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="STRIP-EXTFNS">strip-extfns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-strip-extfns" data-sym="STRIP-EXTFNS" title="(defun strip-extfns (products)
  (if (atom products)
      (mv nil nil)
      (mv-let (prods extfns) (strip-extfns (cdr products))
              (if (and (consp (car products)) (eq (caar products) &#39;defun))
...">strip-extfns</a>
  (products)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> products)
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)
    (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (prods extfns)
      (<a class="sym-link local-def" href="#def-strip-extfns" data-sym="STRIP-EXTFNS" title="(defun strip-extfns (products)
  (if (atom products)
      (mv nil nil)
      (mv-let (prods extfns) (strip-extfns (cdr products))
              (if (and (consp (car products)) (eq (caar products) &#39;defun))
...">strip-extfns</a> (cdr products))
      (if (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (consp (car products)) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-caar" data-sym="CAAR">caar</a> products) '<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a>))
        (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> prods (cons (car products) extfns))
        (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cons (car products) prods) extfns)))))</pre>
  </div>

<div class="form-block function" id="def-defsum-munge-input" data-defines="DEFSUM-MUNGE-INPUT" data-references="DEFSUM-MUNGE-PRODUCTS,CONS,LIST,MV,STRIP-EXTFNS,EXTFNS,STRIP-KEYWORDS,KWALIST,PRODUCTS,MV-LET,REST,NAME,DEFUN" data-used-by="DEFSUM" data-part-name="DEFSUM-MUNGE-INPUT" data-part-args="REST,NAME" data-part-body="DEFSUM-MUNGE-PRODUCTS,NAME,CONS,LIST,MV,STRIP-EXTFNS,EXTFNS,REST,STRIP-KEYWORDS,KWALIST,PRODUCTS,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSUM-MUNGE-INPUT">defsum-munge-input</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defsum-munge-input" data-sym="DEFSUM-MUNGE-INPUT" title="(defun defsum-munge-input (name rest)
  (mv-let (products kwalist) (strip-keywords rest)
          (mv-let (products extfns) (strip-extfns products)
                  (mv (list (cons name (defsum-munge-products products)))
                      extfns kwalist))))">defsum-munge-input</a>
  (name <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
  (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (products kwalist)
    (<a class="sym-link external" href="types-misc.html#def-strip-keywords" data-sym="STRIP-KEYWORDS">strip-keywords</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
    (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (products extfns)
      (<a class="sym-link local-def" href="#def-strip-extfns" data-sym="STRIP-EXTFNS" title="(defun strip-extfns (products)
  (if (atom products)
      (mv nil nil)
      (mv-let (prods extfns) (strip-extfns (cdr products))
              (if (and (consp (car products)) (eq (caar products) &#39;defun))
...">strip-extfns</a> products)
      (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons name (<a class="sym-link local-def" href="#def-defsum-munge-products" data-sym="DEFSUM-MUNGE-PRODUCTS" title="(defun defsum-munge-products (products)
  (if (atom products)
      nil
      (cons (defsum-munge-product (car products))
            (defsum-munge-products (cdr products)))))">defsum-munge-products</a> products)))
        extfns
        kwalist))))</pre>
  </div>

<div class="form-block function" id="def-defsums-munge-sums" data-defines="DEFSUMS-MUNGE-SUMS" data-references="CDR,CDAR,DEFSUM-MUNGE-PRODUCTS,CAAR,CONS,ATOM,IF,SUMS,DEFUN" data-used-by="DEFSUMS-MUNGE-INPUT" data-part-name="DEFSUMS-MUNGE-SUMS" data-part-args="SUMS" data-part-body="CDR,DEFSUMS-MUNGE-SUMS,CDAR,DEFSUM-MUNGE-PRODUCTS,CAAR,CONS,SUMS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSUMS-MUNGE-SUMS">defsums-munge-sums</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defsums-munge-sums" data-sym="DEFSUMS-MUNGE-SUMS" title="(defun defsums-munge-sums (sums)
  (if (atom sums)
      nil
      (cons (cons (caar sums) (defsum-munge-products (cdar sums)))
            (defsums-munge-sums (cdr sums)))))">defsums-munge-sums</a>
  (sums)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> sums)
    nil
    (cons (cons (<a class="sym-link system" href="../../axioms.html#def-caar" data-sym="CAAR">caar</a> sums) (<a class="sym-link local-def" href="#def-defsum-munge-products" data-sym="DEFSUM-MUNGE-PRODUCTS" title="(defun defsum-munge-products (products)
  (if (atom products)
      nil
      (cons (defsum-munge-product (car products))
            (defsum-munge-products (cdr products)))))">defsum-munge-products</a> (<a class="sym-link system" href="../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> sums)))
      (<a class="sym-link local-def" href="#def-defsums-munge-sums" data-sym="DEFSUMS-MUNGE-SUMS" title="(defun defsums-munge-sums (sums)
  (if (atom sums)
      nil
      (cons (cons (caar sums) (defsum-munge-products (cdar sums)))
            (defsums-munge-sums (cdr sums)))))">defsums-munge-sums</a> (cdr sums)))))</pre>
  </div>

<div class="form-block function" id="def-defsums-munge-input" data-defines="DEFSUMS-MUNGE-INPUT" data-references="DEFSUMS-MUNGE-SUMS,MV,STRIP-EXTFNS,EXTFNS,STRIP-KEYWORDS,KWALIST,SUMS,MV-LET,ARGS,DEFUN" data-used-by="DEFSUMS" data-part-name="DEFSUMS-MUNGE-INPUT" data-part-args="ARGS" data-part-body="DEFSUMS-MUNGE-SUMS,MV,STRIP-EXTFNS,EXTFNS,ARGS,STRIP-KEYWORDS,KWALIST,SUMS,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSUMS-MUNGE-INPUT">defsums-munge-input</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defsums-munge-input" data-sym="DEFSUMS-MUNGE-INPUT" title="(defun defsums-munge-input (args)
  (mv-let (sums kwalist) (strip-keywords args)
          (mv-let (sums extfns) (strip-extfns sums)
                  (mv (defsums-munge-sums sums) extfns kwalist))))">defsums-munge-input</a>
  (<a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (sums kwalist)
    (<a class="sym-link external" href="types-misc.html#def-strip-keywords" data-sym="STRIP-KEYWORDS">strip-keywords</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)
    (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (sums extfns)
      (<a class="sym-link local-def" href="#def-strip-extfns" data-sym="STRIP-EXTFNS" title="(defun strip-extfns (products)
  (if (atom products)
      (mv nil nil)
      (mv-let (prods extfns) (strip-extfns (cdr products))
              (if (and (consp (car products)) (eq (caar products) &#39;defun))
...">strip-extfns</a> sums)
      (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link local-def" href="#def-defsums-munge-sums" data-sym="DEFSUMS-MUNGE-SUMS" title="(defun defsums-munge-sums (sums)
  (if (atom sums)
      nil
      (cons (cons (caar sums) (defsum-munge-products (cdar sums)))
            (defsums-munge-sums (cdr sums)))))">defsums-munge-sums</a> sums) extfns kwalist))))</pre>
  </div>

<div class="form-block function" id="def-recognizer-name" data-defines="RECOGNIZER-NAME" data-references="P,QUOTE,LIST,APPSYMS,SYM,DEFUN" data-used-by="RECOGNIZER-LIST" data-part-name="RECOGNIZER-NAME" data-part-args="SYM" data-part-body="P,QUOTE,SYM,LIST,APPSYMS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RECOGNIZER-NAME">recognizer-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-recognizer-name" data-sym="RECOGNIZER-NAME" title="(defun recognizer-name (sym) (appsyms (list sym &#39;p)))">recognizer-name</a> (sym) (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> sym 'p)))</pre>
  </div>

<div class="form-block function" id="def-recognizer-list" data-defines="RECOGNIZER-LIST" data-references="CDR,CAR,RECOGNIZER-NAME,CONS,ATOM,IF,SYMS,DEFUN" data-part-name="RECOGNIZER-LIST" data-part-args="SYMS" data-part-body="CDR,RECOGNIZER-LIST,CAR,RECOGNIZER-NAME,CONS,SYMS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RECOGNIZER-LIST">recognizer-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-recognizer-list" data-sym="RECOGNIZER-LIST" title="(defun recognizer-list (syms)
  (if (atom syms)
      nil
      (cons (recognizer-name (car syms)) (recognizer-list (cdr syms)))))">recognizer-list</a>
  (syms)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> syms)
    nil
    (cons (<a class="sym-link local-def" href="#def-recognizer-name" data-sym="RECOGNIZER-NAME" title="(defun recognizer-name (sym) (appsyms (list sym &#39;p)))">recognizer-name</a> (car syms))
      (<a class="sym-link local-def" href="#def-recognizer-list" data-sym="RECOGNIZER-LIST" title="(defun recognizer-list (syms)
  (if (atom syms)
      nil
      (cons (recognizer-name (car syms)) (recognizer-list (cdr syms)))))">recognizer-list</a> (cdr syms)))))</pre>
  </div>

<div class="form-block function" id="def-constructor-call" data-defines="CONSTRUCTOR-CALL" data-references="PRODUCT-COMPONENTS,COMPONENTS-NAMES,PRODUCT-NAME,CONS,PRODUCT,DEFUN" data-used-by="EXCLUSION-THM,SUM-RECOGNIZER-CONSTRUCTOR-THM,SUM-RECOGNIZER-CLAUSE,ACCESSOR-CONSTRUCTOR-THM,PRODUCT-TYPE-THMS,PRODUCT-RECOGNIZER-CONSTRUCTOR-THM" data-part-name="CONSTRUCTOR-CALL" data-part-args="PRODUCT" data-part-body="PRODUCT-COMPONENTS,COMPONENTS-NAMES,PRODUCT,PRODUCT-NAME,CONS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONSTRUCTOR-CALL">constructor-call</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-constructor-call" data-sym="CONSTRUCTOR-CALL" title="(defun constructor-call (product)
  (cons (product-name product) (components-names (product-components product))))">constructor-call</a>
  (product)
  (cons (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product)
    (<a class="sym-link external" href="types-misc.html#def-components-names" data-sym="COMPONENTS-NAMES">components-names</a> (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product))))</pre>
  </div>

<div class="form-block function" id="def-product-accessor-list" data-defines="PRODUCT-ACCESSOR-LIST" data-references="PRODUCT-COMPONENTS,ACCESSOR-LIST,PRODUCT,DEFUN" data-part-name="PRODUCT-ACCESSOR-LIST" data-part-args="PRODUCT" data-part-body="PRODUCT-COMPONENTS,PRODUCT,ACCESSOR-LIST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-ACCESSOR-LIST">product-accessor-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-accessor-list" data-sym="PRODUCT-ACCESSOR-LIST" title="(defun product-accessor-list (product)
  (accessor-list product (product-components product)))">product-accessor-list</a>
  (product)
  (<a class="sym-link external" href="types-misc.html#def-accessor-list" data-sym="ACCESSOR-LIST">accessor-list</a> product (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product)))</pre>
  </div>

<div class="form-block function" id="def-accessor-call-list" data-defines="ACCESSOR-CALL-LIST" data-references="CDR,X,QUASIQUOTE,CONS,CONSP,IF,COMPONENTS,PRODUCT,DEFUN" data-used-by="UPDATER-DEFUNS" data-part-name="ACCESSOR-CALL-LIST" data-part-args="COMPONENTS,PRODUCT" data-part-body="CDR,PRODUCT,ACCESSOR-CALL-LIST,X,QUASIQUOTE,CONS,COMPONENTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-CALL-LIST">accessor-call-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-call-list" data-sym="ACCESSOR-CALL-LIST" title="(defun accessor-call-list (product components)
  (if (consp components)
      (cons `(,(accessor-name product (car components)) x)
            (accessor-call-list product (cdr components)))
      nil))">accessor-call-list</a>
  (product components)
  (if (consp components)
    (cons `(,(ACCESSOR-NAME PRODUCT (CAR COMPONENTS)) x)
      (<a class="sym-link local-def" href="#def-accessor-call-list" data-sym="ACCESSOR-CALL-LIST" title="(defun accessor-call-list (product components)
  (if (consp components)
      (cons `(,(accessor-name product (car components)) x)
            (accessor-call-list product (cdr components)))
      nil))">accessor-call-list</a> product (cdr components)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-constructor-def" data-defines="CONSTRUCTOR-DEF" data-references="QUASIQUOTE,HONS,QUOTE,IF,CONS,PRODUCT-COMPONENTS,COMPONENTS-NAMES,ARGS,PRODUCT-NAME,CONSTR,LET*,COMPACT-OPT,HONS-OPT,GUARD-OPT,PRODUCT,DEFUN" data-used-by="PRODUCT-FUNCTION-DEFS" data-part-name="CONSTRUCTOR-DEF" data-part-args="COMPACT-OPT,HONS-OPT,GUARD-OPT,PRODUCT" data-part-body="DEFUN,QUASIQUOTE,HONS,QUOTE,HONS-OPT,IF,CONS,PRODUCT-COMPONENTS,COMPONENTS-NAMES,ARGS,PRODUCT,PRODUCT-NAME,CONSTR,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONSTRUCTOR-DEF">constructor-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-constructor-def" data-sym="CONSTRUCTOR-DEF" title="(defun constructor-def (product guard-opt hons-opt compact-opt)
  (let* ((constr (product-name product))
         (args (components-names (product-components product)))
         (cons
          (if hons-opt
...">constructor-def</a>
  (product guard-opt hons-opt compact-opt)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((constr (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product)) (<a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link external" href="types-misc.html#def-components-names" data-sym="COMPONENTS-NAMES">components-names</a> (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product)))
      (cons (if hons-opt
          'hons
          'cons)))
    `(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,CONSTR
      ,ARGS
      ,@(IF GUARD-OPT
      `((DECLARE (XARGS :GUARD T)))
      NIL)
      ,(IF COMPACT-OPT
     `(,CONS &#39;,CONSTR ,(ARGTREE CONS ARGS))
     `(,(IF HONS-OPT
            &#39;HONS-LIST
            &#39;LIST)
       &#39;,CONSTR ,@ARGS)))))</pre>
  </div>

<div class="form-block function" id="def-product-recognizer-def" data-defines="PRODUCT-RECOGNIZER-DEF" data-references="QUOTE,CAR,EQ,AND,T,XARGS,DECLARE,LENGTH,=,TRUE-LISTP,CDR,RECOG-CONSP-LIST,X,CONSP,QUASIQUOTE,CONS,IF,TESTS,PRODUCT-COMPONENTS,LEN,NARGS,LET*,COMPACT-OPT,PRODUCT,DEFUN" data-used-by="PRODUCT-FUNCTION-DEFS" data-part-name="PRODUCT-RECOGNIZER-DEF" data-part-args="COMPACT-OPT,PRODUCT" data-part-body="QUOTE,CAR,EQ,AND,T,XARGS,DECLARE,DEFUN,LENGTH,=,TRUE-LISTP,CDR,RECOG-CONSP-LIST,X,CONSP,QUASIQUOTE,CONS,COMPACT-OPT,IF,TESTS,PRODUCT,PRODUCT-COMPONENTS,LEN,NARGS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-RECOGNIZER-DEF">product-recognizer-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-recognizer-def" data-sym="PRODUCT-RECOGNIZER-DEF" title="(defun product-recognizer-def (product compact-opt)
  (let* ((nargs (len (product-components product)))
         (tests
          (if compact-opt
              (cons `(consp x) (recog-consp-list nargs `(cdr x)))
...">product-recognizer-def</a>
  (product compact-opt)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((nargs (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product))) (tests (if compact-opt
          (cons `(consp x) (<a class="sym-link external" href="types-misc.html#def-recog-consp-list" data-sym="RECOG-CONSP-LIST">recog-consp-list</a> nargs `(cdr x)))
          `((<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x) (<a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> x) ,(1+ NARGS))))))
    `(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,(PRODUCT-RECOGNIZER PRODUCT)
      (x)
      (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> ,@TESTS (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) ',(PRODUCT-NAME PRODUCT))))))</pre>
  </div>

<div class="form-block function" id="def-accessor-def" data-defines="ACCESSOR-DEF" data-references="NTH,X,CDR,QUASIQUOTE,TREE-ACCESSOR,IF,ACC,PRODUCT-RECOGNIZER,REC,LET,COMPACT-OPT,ACCESSOR-OPT,GUARD-OPT,N,NCOMPS,COMPONENT,PRODUCT,DEFUN" data-used-by="ACCESSORS-DEF" data-part-name="ACCESSOR-DEF" data-part-args="COMPACT-OPT,ACCESSOR-OPT,GUARD-OPT,N,NCOMPS,COMPONENT,PRODUCT" data-part-body="DEFUN,NTH,X,CDR,QUASIQUOTE,NCOMPS,N,TREE-ACCESSOR,COMPACT-OPT,IF,ACC,PRODUCT,PRODUCT-RECOGNIZER,REC,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-DEF">accessor-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-def" data-sym="ACCESSOR-DEF" title="(defun accessor-def
       (product component ncomps n guard-opt accessor-opt compact-opt)
  (let ((rec (product-recognizer product))
        (acc
         (if compact-opt
...">accessor-def</a>
  (product component
    ncomps
    n
    guard-opt
    accessor-opt
    compact-opt)
  (let ((rec (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product)) (acc (if compact-opt
          (<a class="sym-link external" href="types-misc.html#def-tree-accessor" data-sym="TREE-ACCESSOR">tree-accessor</a> n ncomps `(cdr x) nil)
          `(<a class="sym-link system" href="../../axioms.html#def-nth" data-sym="NTH">nth</a> ,N x))))
    `(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,(ACCESSOR-NAME PRODUCT COMPONENT)
      (x)
      ,@(IF GUARD-OPT
      `((DECLARE (XARGS :GUARD (,REC X))))
      NIL)
      ,@(IF (AND GUARD-OPT ACCESSOR-OPT)
      `((MBE :LOGIC (AND (,REC X) ,ACC) :EXEC ,ACC))
      (IF ACCESSOR-OPT
          `((AND (,REC X) ,ACC))
          `(,ACC))))))</pre>
  </div>

<div class="form-block function" id="def-accessors-def" data-defines="ACCESSORS-DEF" data-references="1+,CDR,CAR,ACCESSOR-DEF,CONS,CONSP,IF,COMPACT-OPT,ACCESSOR-OPT,GUARD-OPT,N,NCOMPS,COMPONENTS,PRODUCT,DEFUN" data-used-by="PRODUCT-FUNCTION-DEFS" data-part-name="ACCESSORS-DEF" data-part-args="COMPACT-OPT,ACCESSOR-OPT,GUARD-OPT,N,NCOMPS,COMPONENTS,PRODUCT" data-part-body="1+,CDR,ACCESSORS-DEF,COMPACT-OPT,ACCESSOR-OPT,GUARD-OPT,N,NCOMPS,CAR,PRODUCT,ACCESSOR-DEF,CONS,COMPONENTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSORS-DEF">accessors-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessors-def" data-sym="ACCESSORS-DEF" title="(defun accessors-def
       (product components ncomps n guard-opt accessor-opt compact-opt)
  (if (consp components)
      (cons
       (accessor-def product (car components) ncomps n guard-opt accessor-opt
...">accessors-def</a>
  (product components
    ncomps
    n
    guard-opt
    accessor-opt
    compact-opt)
  (if (consp components)
    (cons (<a class="sym-link local-def" href="#def-accessor-def" data-sym="ACCESSOR-DEF" title="(defun accessor-def
       (product component ncomps n guard-opt accessor-opt compact-opt)
  (let ((rec (product-recognizer product))
        (acc
         (if compact-opt
...">accessor-def</a> product
        (car components)
        ncomps
        n
        guard-opt
        accessor-opt
        compact-opt)
      (<a class="sym-link local-def" href="#def-accessors-def" data-sym="ACCESSORS-DEF" title="(defun accessors-def
       (product components ncomps n guard-opt accessor-opt compact-opt)
  (if (consp components)
      (cons
       (accessor-def product (car components) ncomps n guard-opt accessor-opt
...">accessors-def</a> product
        (cdr components)
        ncomps
        (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> n)
        guard-opt
        accessor-opt
        compact-opt))
    nil))</pre>
  </div>

<div class="form-block function" id="def-product-function-defs" data-defines="PRODUCT-FUNCTION-DEFS" data-references="LEN,PRODUCT-COMPONENTS,ACCESSORS-DEF,CONSTRUCTOR-DEF,CONS,PRODUCT-RECOGNIZER-DEF,LIST,OR,NOT,AND,APPEND,RECOG,KWASSOC,PREDEF,PRODUCT-KWALIST,KWALIST,LET*,ACCESSOR-OPT,COMPACT-OPT,HONS-OPT,GUARD-OPT,PRODUCT,DEFUN" data-used-by="BASIC-PRODUCT-DEFS" data-part-name="PRODUCT-FUNCTION-DEFS" data-part-args="ACCESSOR-OPT,COMPACT-OPT,HONS-OPT,GUARD-OPT,PRODUCT" data-part-body="ACCESSOR-OPT,LEN,PRODUCT-COMPONENTS,ACCESSORS-DEF,HONS-OPT,GUARD-OPT,CONSTRUCTOR-DEF,CONS,COMPACT-OPT,PRODUCT-RECOGNIZER-DEF,LIST,OR,NOT,AND,APPEND,RECOG,KWASSOC,PREDEF,PRODUCT,PRODUCT-KWALIST,KWALIST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-FUNCTION-DEFS">product-function-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-function-defs" data-sym="PRODUCT-FUNCTION-DEFS" title="(defun product-function-defs
       (product guard-opt hons-opt compact-opt accessor-opt)
  (let* ((kwalist (product-kwalist product))
         (predef (kwassoc :predef nil (product-kwalist product)))
         (recog (kwassoc :recognizer nil kwalist)))
...">product-function-defs</a>
  (product guard-opt hons-opt compact-opt accessor-opt)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((kwalist (<a class="sym-link external" href="types-misc.html#def-product-kwalist" data-sym="PRODUCT-KWALIST">product-kwalist</a> product)) (predef (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:predef</span> nil (<a class="sym-link external" href="types-misc.html#def-product-kwalist" data-sym="PRODUCT-KWALIST">product-kwalist</a> product)))
      (recog (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:recognizer</span> nil kwalist)))
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> recog predef))
        (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link local-def" href="#def-product-recognizer-def" data-sym="PRODUCT-RECOGNIZER-DEF" title="(defun product-recognizer-def (product compact-opt)
  (let* ((nargs (len (product-components product)))
         (tests
          (if compact-opt
              (cons `(consp x) (recog-consp-list nargs `(cdr x)))
...">product-recognizer-def</a> product compact-opt)))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> predef)
        (cons (<a class="sym-link local-def" href="#def-constructor-def" data-sym="CONSTRUCTOR-DEF" title="(defun constructor-def (product guard-opt hons-opt compact-opt)
  (let* ((constr (product-name product))
         (args (components-names (product-components product)))
         (cons
          (if hons-opt
...">constructor-def</a> product guard-opt hons-opt compact-opt)
          (<a class="sym-link local-def" href="#def-accessors-def" data-sym="ACCESSORS-DEF" title="(defun accessors-def
       (product components ncomps n guard-opt accessor-opt compact-opt)
  (if (consp components)
      (cons
       (accessor-def product (car components) ncomps n guard-opt accessor-opt
...">accessors-def</a> product
            (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product)
            (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product))
            <span class="number">1</span>
            guard-opt
            accessor-opt
            compact-opt))))))</pre>
  </div>

<div class="form-block function" id="def-product-pattern-matcher" data-defines="PRODUCT-PATTERN-MATCHER" data-references="DEF-PATTERN-MATCH-CONSTRUCTOR,QUASIQUOTE,GUARD-OPT,PRODUCT,DEFUN" data-used-by="BASIC-PRODUCT-DEFS" data-part-name="PRODUCT-PATTERN-MATCHER" data-part-args="GUARD-OPT,PRODUCT" data-part-body="DEF-PATTERN-MATCH-CONSTRUCTOR,QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-PATTERN-MATCHER">product-pattern-matcher</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-pattern-matcher" data-sym="PRODUCT-PATTERN-MATCHER" title="(defun product-pattern-matcher (product guard-opt)
  `(def-pattern-match-constructor
    ,(if (eq guard-opt :fast)
         (appsyms (list (product-name product) &#39;slow))
         (product-name product))">product-pattern-matcher</a>
  (product guard-opt)
  `(<a class="sym-link external" href="pattern-match.html#def-def-pattern-match-constructor" data-sym="DEF-PATTERN-MATCH-CONSTRUCTOR">def-pattern-match-constructor</a> ,(IF (EQ GUARD-OPT :FAST)
     (APPSYMS (LIST (PRODUCT-NAME PRODUCT) &#39;SLOW))
     (PRODUCT-NAME PRODUCT))
    ,(PRODUCT-RECOGNIZER PRODUCT)
    ,(PRODUCT-ACCESSOR-LIST PRODUCT)))</pre>
  </div>

<div class="form-block function" id="def-product-compound-rec-thm" data-defines="PRODUCT-COMPOUND-REC-THM" data-references="X,IMPLIES,DEFTHM,QUASIQUOTE,COMPACT-OPT,PRODUCT,DEFUN" data-part-name="PRODUCT-COMPOUND-REC-THM" data-part-args="COMPACT-OPT,PRODUCT" data-part-body="X,IMPLIES,DEFTHM,QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-COMPOUND-REC-THM">product-compound-rec-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-compound-rec-thm" data-sym="PRODUCT-COMPOUND-REC-THM" title="(defun product-compound-rec-thm (product compact-opt)
  `(defthm ,(appsyms (list (product-name product) &#39;p &#39;compound-recognizer))
           (implies (,(product-recognizer product) x)
                    ,(if compact-opt
                         `(consp x)
...">product-compound-rec-thm</a>
  (product compact-opt)
  `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST (PRODUCT-NAME PRODUCT) &#39;P &#39;COMPOUND-RECOGNIZER))
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,(PRODUCT-RECOGNIZER PRODUCT) x)
      ,(IF COMPACT-OPT
     `(CONSP X)
     `(AND (CONSP X) (TRUE-LISTP X))))
    <span class="keyword">:rule-classes</span> <span class="keyword">:compound-recognizer</span>))</pre>
  </div>

<div class="form-block function" id="def-function-call-list" data-defines="FUNCTION-CALL-LIST" data-references="CDR,CAR,APPEND,CONS,ATOM,IF,POSTARGS,LIST,FN-PREARGS,DEFUN" data-part-name="FUNCTION-CALL-LIST" data-part-args="POSTARGS,LIST,FN-PREARGS" data-part-body="CDR,FUNCTION-CALL-LIST,POSTARGS,CAR,FN-PREARGS,APPEND,CONS,LIST,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FUNCTION-CALL-LIST">function-call-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-function-call-list" data-sym="FUNCTION-CALL-LIST" title="(defun function-call-list (fn-preargs list postargs)
  (if (atom list)
      nil
      (cons (append fn-preargs (cons (car list) postargs))
            (function-call-list fn-preargs (cdr list) postargs))))">function-call-list</a>
  (fn-preargs <a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> postargs)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> <a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>)
    nil
    (cons (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> fn-preargs (cons (car <a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>) postargs))
      (<a class="sym-link local-def" href="#def-function-call-list" data-sym="FUNCTION-CALL-LIST" title="(defun function-call-list (fn-preargs list postargs)
  (if (atom list)
      nil
      (cons (append fn-preargs (cons (car list) postargs))
            (function-call-list fn-preargs (cdr list) postargs))))">function-call-list</a> fn-preargs (cdr <a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>) postargs))))</pre>
  </div>

<div class="form-block function" id="def-args-cons-count" data-defines="ARGS-CONS-COUNT" data-references="-,+,FLOOR,FLO,LET,=,ZP,OR,IF,NARGS,DEFUN" data-used-by="CONSTRUCTOR-ACL2-COUNT-THM" data-part-name="ARGS-CONS-COUNT" data-part-args="NARGS" data-part-body="-,ARGS-CONS-COUNT,+,FLOOR,FLO,LET,=,NARGS,ZP,OR,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ARGS-CONS-COUNT">args-cons-count</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-args-cons-count" data-sym="ARGS-CONS-COUNT" title="(defun args-cons-count (nargs)
  (if (or (zp nargs) (= nargs 1))
      0
      (let ((flo (floor nargs 2)))
        (+ 1 (args-cons-count flo) (args-cons-count (- nargs flo))))))">args-cons-count</a>
  (nargs)
  (if (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-zp" data-sym="ZP">zp</a> nargs) (<a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a> nargs <span class="number">1</span>))
    <span class="number">0</span>
    (let ((flo (floor nargs <span class="number">2</span>)))
      (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link local-def" href="#def-args-cons-count" data-sym="ARGS-CONS-COUNT" title="(defun args-cons-count (nargs)
  (if (or (zp nargs) (= nargs 1))
      0
      (let ((flo (floor nargs 2)))
        (+ 1 (args-cons-count flo) (args-cons-count (- nargs flo))))))">args-cons-count</a> flo) (<a class="sym-link local-def" href="#def-args-cons-count" data-sym="ARGS-CONS-COUNT" title="(defun args-cons-count (nargs)
  (if (or (zp nargs) (= nargs 1))
      0
      (let ((flo (floor nargs 2)))
        (+ 1 (args-cons-count flo) (args-cons-count (- nargs flo))))))">args-cons-count</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> nargs flo))))))</pre>
  </div>

<div class="form-block function" id="def-constructor-acl2-count-thm" data-defines="CONSTRUCTOR-ACL2-COUNT-THM" data-references="+,ACL2-COUNT,EQUAL,DEFTHM,QUASIQUOTE,ARGS-CONS-COUNT,1+,IF,CONSES,PRODUCT-COMPONENTS,LEN,NARGS,LET*,COMPACT-OPT,PRODUCT,DEFUN" data-part-name="CONSTRUCTOR-ACL2-COUNT-THM" data-part-args="COMPACT-OPT,PRODUCT" data-part-body="+,ACL2-COUNT,EQUAL,DEFTHM,QUASIQUOTE,ARGS-CONS-COUNT,1+,COMPACT-OPT,IF,CONSES,PRODUCT,PRODUCT-COMPONENTS,LEN,NARGS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONSTRUCTOR-ACL2-COUNT-THM">constructor-acl2-count-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-constructor-acl2-count-thm" data-sym="CONSTRUCTOR-ACL2-COUNT-THM" title="(defun constructor-acl2-count-thm (product compact-opt)
  (let* ((nargs (len (product-components product)))
         (conses
          (if compact-opt
              (1+ (args-cons-count nargs))
...">constructor-acl2-count-thm</a>
  (product compact-opt)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((nargs (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product))) (conses (if compact-opt
          (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> (<a class="sym-link local-def" href="#def-args-cons-count" data-sym="ARGS-CONS-COUNT" title="(defun args-cons-count (nargs)
  (if (or (zp nargs) (= nargs 1))
      0
      (let ((flo (floor nargs 2)))
        (+ 1 (args-cons-count flo) (args-cons-count (- nargs flo))))))">args-cons-count</a> nargs))
          (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> nargs))))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST (PRODUCT-NAME PRODUCT) &#39;ACL2-COUNT))
      (equal (<a class="sym-link system" href="../../axioms.html#def-acl2-count" data-sym="ACL2-COUNT">acl2-count</a> ,(CONSTRUCTOR-CALL PRODUCT))
        (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> ,CONSES
          ,@(FUNCTION-CALL-LIST &#39;(ACL2-COUNT)
   (COMPONENTS-NAMES (PRODUCT-COMPONENTS PRODUCT)) NIL))))))</pre>
  </div>

<div class="form-block function" id="def-accessor-short-circuit-thm" data-defines="ACCESSOR-SHORT-CIRCUIT-THM" data-references="EQUAL,X,NOT,IMPLIES,DEFTHM,QUASIQUOTE,PRODUCT-RECOGNIZER,REC,ACCESSOR-NAME,ACC,LET*,COMPONENT,PRODUCT,DEFUN" data-used-by="ACCESSOR-SHORT-CIRCUIT-THMS" data-part-name="ACCESSOR-SHORT-CIRCUIT-THM" data-part-args="COMPONENT,PRODUCT" data-part-body="EQUAL,X,NOT,IMPLIES,DEFTHM,QUASIQUOTE,PRODUCT-RECOGNIZER,REC,COMPONENT,PRODUCT,ACCESSOR-NAME,ACC,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-SHORT-CIRCUIT-THM">accessor-short-circuit-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-short-circuit-thm" data-sym="ACCESSOR-SHORT-CIRCUIT-THM" title="(defun accessor-short-circuit-thm (product component)
  (let* ((acc (accessor-name product component))
         (rec (product-recognizer product)))
    `(defthm ,(appsyms (list &#39;not rec acc))
             (implies (not (,rec x)) (equal (,acc x) nil)))))">accessor-short-circuit-thm</a>
  (product component)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((acc (<a class="sym-link external" href="types-misc.html#def-accessor-name" data-sym="ACCESSOR-NAME">accessor-name</a> product component)) (rec (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product)))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST &#39;NOT REC ACC))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (,REC x)) (equal (,ACC x) nil)))))</pre>
  </div>

<div class="form-block function" id="def-accessor-short-circuit-thms" data-defines="ACCESSOR-SHORT-CIRCUIT-THMS" data-references="CDR,CAR,ACCESSOR-SHORT-CIRCUIT-THM,CONS,CONSP,IF,COMPONENTS,PRODUCT,DEFUN" data-part-name="ACCESSOR-SHORT-CIRCUIT-THMS" data-part-args="COMPONENTS,PRODUCT" data-part-body="CDR,ACCESSOR-SHORT-CIRCUIT-THMS,CAR,PRODUCT,ACCESSOR-SHORT-CIRCUIT-THM,CONS,COMPONENTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-SHORT-CIRCUIT-THMS">accessor-short-circuit-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-short-circuit-thms" data-sym="ACCESSOR-SHORT-CIRCUIT-THMS" title="(defun accessor-short-circuit-thms (product components)
  (if (consp components)
      (cons (accessor-short-circuit-thm product (car components))
            (accessor-short-circuit-thms product (cdr components)))
      nil))">accessor-short-circuit-thms</a>
  (product components)
  (if (consp components)
    (cons (<a class="sym-link local-def" href="#def-accessor-short-circuit-thm" data-sym="ACCESSOR-SHORT-CIRCUIT-THM" title="(defun accessor-short-circuit-thm (product component)
  (let* ((acc (accessor-name product component))
         (rec (product-recognizer product)))
    `(defthm ,(appsyms (list &#39;not rec acc))
             (implies (not (,rec x)) (equal (,acc x) nil)))))">accessor-short-circuit-thm</a> product (car components))
      (<a class="sym-link local-def" href="#def-accessor-short-circuit-thms" data-sym="ACCESSOR-SHORT-CIRCUIT-THMS" title="(defun accessor-short-circuit-thms (product components)
  (if (consp components)
      (cons (accessor-short-circuit-thm product (car components))
            (accessor-short-circuit-thms product (cdr components)))
      nil))">accessor-short-circuit-thms</a> product (cdr components)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-accessor-acl2-count-thm" data-defines="ACCESSOR-ACL2-COUNT-THM" data-references="NTH,ACL2-COUNT-NTH-OF-LEN-2-OR-GREATER-LINEAR,ACL2-COUNT-CAR-CDR-OF-CONS-LINEAR,E/D,ACL2-COUNT,<,X,IMPLIES,DEFTHM,QUASIQUOTE,PRODUCT-RECOGNIZER,RECOGNIZER,ACCESSOR-NAME,ACC,LET,COMPONENT,PRODUCT,DEFUN" data-used-by="ACCESSOR-ACL2-COUNT-THMS" data-part-name="ACCESSOR-ACL2-COUNT-THM" data-part-args="COMPONENT,PRODUCT" data-part-body="NTH,ACL2-COUNT-NTH-OF-LEN-2-OR-GREATER-LINEAR,ACL2-COUNT-CAR-CDR-OF-CONS-LINEAR,E/D,ACL2-COUNT,<,X,IMPLIES,DEFTHM,QUASIQUOTE,PRODUCT-RECOGNIZER,RECOGNIZER,COMPONENT,PRODUCT,ACCESSOR-NAME,ACC,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-ACL2-COUNT-THM">accessor-acl2-count-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-acl2-count-thm" data-sym="ACCESSOR-ACL2-COUNT-THM" title="(defun accessor-acl2-count-thm (product component)
  (let ((acc (accessor-name product component))
        (recognizer (product-recognizer product)))
    `(defthm ,(appsyms (list acc &#39;acl2-count))
             (implies (,recognizer x) (&lt; (acl2-count (,acc x)) (acl2-count x)))
...">accessor-acl2-count-thm</a>
  (product component)
  (let ((acc (<a class="sym-link external" href="types-misc.html#def-accessor-name" data-sym="ACCESSOR-NAME">accessor-name</a> product component)) (recognizer (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product)))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST ACC &#39;ACL2-COUNT))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,RECOGNIZER x)
        (&lt; (<a class="sym-link system" href="../../axioms.html#def-acl2-count" data-sym="ACL2-COUNT">acl2-count</a> (,ACC x)) (<a class="sym-link system" href="../../axioms.html#def-acl2-count" data-sym="ACL2-COUNT">acl2-count</a> x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link external" href="types-misc.html#def-acl2-count-car-cdr-of-cons-linear" data-sym="ACL2-COUNT-CAR-CDR-OF-CONS-LINEAR">acl2-count-car-cdr-of-cons-linear</a> <a class="sym-link external" href="types-misc.html#def-acl2-count-nth-of-len-2-or-greater-linear" data-sym="ACL2-COUNT-NTH-OF-LEN-2-OR-GREATER-LINEAR">acl2-count-nth-of-len-2-or-greater-linear</a>)
           (<a class="sym-link system" href="../../axioms.html#def-nth" data-sym="NTH">nth</a> <a class="sym-link system" href="../../axioms.html#def-acl2-count" data-sym="ACL2-COUNT">acl2-count</a>))))
      <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:linear</span>))))</pre>
  </div>

<div class="form-block function" id="def-accessor-acl2-count-thms" data-defines="ACCESSOR-ACL2-COUNT-THMS" data-references="CDR,CAR,ACCESSOR-ACL2-COUNT-THM,CONS,CONSP,IF,COMPONENTS,PRODUCT,DEFUN" data-part-name="ACCESSOR-ACL2-COUNT-THMS" data-part-args="COMPONENTS,PRODUCT" data-part-body="CDR,ACCESSOR-ACL2-COUNT-THMS,CAR,PRODUCT,ACCESSOR-ACL2-COUNT-THM,CONS,COMPONENTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-ACL2-COUNT-THMS">accessor-acl2-count-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-acl2-count-thms" data-sym="ACCESSOR-ACL2-COUNT-THMS" title="(defun accessor-acl2-count-thms (product components)
  (if (consp components)
      (cons (accessor-acl2-count-thm product (car components))
            (accessor-acl2-count-thms product (cdr components)))
      nil))">accessor-acl2-count-thms</a>
  (product components)
  (if (consp components)
    (cons (<a class="sym-link local-def" href="#def-accessor-acl2-count-thm" data-sym="ACCESSOR-ACL2-COUNT-THM" title="(defun accessor-acl2-count-thm (product component)
  (let ((acc (accessor-name product component))
        (recognizer (product-recognizer product)))
    `(defthm ,(appsyms (list acc &#39;acl2-count))
             (implies (,recognizer x) (&lt; (acl2-count (,acc x)) (acl2-count x)))
...">accessor-acl2-count-thm</a> product (car components))
      (<a class="sym-link local-def" href="#def-accessor-acl2-count-thms" data-sym="ACCESSOR-ACL2-COUNT-THMS" title="(defun accessor-acl2-count-thms (product components)
  (if (consp components)
      (cons (accessor-acl2-count-thm product (car components))
            (accessor-acl2-count-thms product (cdr components)))
      nil))">accessor-acl2-count-thms</a> product (cdr components)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-product-recognizer-constructor-thm" data-defines="PRODUCT-RECOGNIZER-CONSTRUCTOR-THM" data-references="DEFTHM,QUASIQUOTE,PRODUCT-RECOGNIZER,RECOGNIZER,CONSTRUCTOR-CALL,CONSTR-CALL,PRODUCT-NAME,CONSTRUCTOR,LET,PRODUCT,DEFUN" data-part-name="PRODUCT-RECOGNIZER-CONSTRUCTOR-THM" data-part-args="PRODUCT" data-part-body="DEFTHM,QUASIQUOTE,PRODUCT-RECOGNIZER,RECOGNIZER,CONSTRUCTOR-CALL,CONSTR-CALL,PRODUCT,PRODUCT-NAME,CONSTRUCTOR,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-RECOGNIZER-CONSTRUCTOR-THM">product-recognizer-constructor-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-recognizer-constructor-thm" data-sym="PRODUCT-RECOGNIZER-CONSTRUCTOR-THM" title="(defun product-recognizer-constructor-thm (product)
  (let ((constructor (product-name product))
        (constr-call (constructor-call product))
        (recognizer (product-recognizer product)))
    `(defthm ,(appsyms (list recognizer constructor))">product-recognizer-constructor-thm</a>
  (product)
  (let ((constructor (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product)) (constr-call (<a class="sym-link local-def" href="#def-constructor-call" data-sym="CONSTRUCTOR-CALL" title="(defun constructor-call (product)
  (cons (product-name product) (components-names (product-components product))))">constructor-call</a> product))
      (recognizer (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product)))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST RECOGNIZER CONSTRUCTOR))
      (,RECOGNIZER ,CONSTR-CALL))))</pre>
  </div>

<div class="form-block function" id="def-product-elim-thm" data-defines="PRODUCT-ELIM-THM" data-references="EQUAL,X,IMPLIES,DEFTHM,QUASIQUOTE,CONSP,IF,PRODUCT-COMPONENTS,COMPONENTS,PRODUCT-NAME,NAME,PRODUCT-RECOGNIZER,RECOGNIZER,LET,COMPACT-OPT,PRODUCT,DEFUN" data-part-name="PRODUCT-ELIM-THM" data-part-args="COMPACT-OPT,PRODUCT" data-part-body="EQUAL,X,IMPLIES,DEFTHM,QUASIQUOTE,CONSP,IF,PRODUCT-COMPONENTS,COMPONENTS,PRODUCT-NAME,NAME,PRODUCT,PRODUCT-RECOGNIZER,RECOGNIZER,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-ELIM-THM">product-elim-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-elim-thm" data-sym="PRODUCT-ELIM-THM" title="(defun product-elim-thm (product compact-opt)
  (let ((recognizer (product-recognizer product))
        (name (product-name product))
        (components (product-components product)))
    (if (consp components)
...">product-elim-thm</a>
  (product compact-opt)
  (let ((recognizer (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product)) (name (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product))
      (components (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product)))
    (if (consp components)
      `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST NAME &#39;ELIM))
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,RECOGNIZER x)
          (equal (,NAME ,@(ACCESSOR-CALL-LIST PRODUCT COMPONENTS)) x))
        ,@(IF COMPACT-OPT
      NIL
      `(:HINTS ((&quot;Goal&quot; :IN-THEORY (ENABLE NTH-OPEN LEN-0-TRUE-LISTP-NOT-X)))))
        <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:elim</span>))
      `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST NAME &#39;UNIQUE))
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,RECOGNIZER x) (equal x (,NAME)))
        <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>))))</pre>
  </div>

<div class="form-block function" id="def-product-type-thms" data-defines="PRODUCT-TYPE-THMS" data-references="NOT,QUOTE,PRODUCT-TYPE,EQUAL,X,IMPLIES,DEFTHM,QUASIQUOTE,PRODUCT-COMPONENTS,COMPONENTS,CONSTRUCTOR-CALL,CALL,PRODUCT-NAME,NAME,PRODUCT-RECOGNIZER,RECOGNIZER,LET,PRODUCT,DEFUN" data-used-by="PRODUCTS-TYPE-THMS" data-part-name="PRODUCT-TYPE-THMS" data-part-args="PRODUCT" data-part-body="NOT,QUOTE,PRODUCT-TYPE,EQUAL,X,IMPLIES,DEFTHM,QUASIQUOTE,PRODUCT-COMPONENTS,COMPONENTS,CONSTRUCTOR-CALL,CALL,PRODUCT-NAME,NAME,PRODUCT,PRODUCT-RECOGNIZER,RECOGNIZER,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-TYPE-THMS">product-type-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-type-thms" data-sym="PRODUCT-TYPE-THMS" title="(defun product-type-thms (product)
  (let ((recognizer (product-recognizer product))
        (name (product-name product))
        (call (constructor-call product))
        (components (product-components product)))
...">product-type-thms</a>
  (product)
  (let ((recognizer (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product)) (name (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product))
      (call (<a class="sym-link local-def" href="#def-constructor-call" data-sym="CONSTRUCTOR-CALL" title="(defun constructor-call (product)
  (cons (product-name product) (components-names (product-components product))))">constructor-call</a> product))
      (components (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product)))
    `((<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST RECOGNIZER &#39;PRODUCT-TYPE))
       (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,RECOGNIZER x) (equal (<a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a> x) ',NAME))) (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST &#39;PRODUCT-TYPE RECOGNIZER))
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a> x) ',NAME))
          (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (,RECOGNIZER x))))
      (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST NAME &#39;PRODUCT-TYPE))
        (equal (<a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a> ,CALL) ',NAME))
      (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST NAME &#39;EQUAL-PRODUCT-TYPE))
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a> ,CALL) (<a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a> x)))
          (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal ,CALL x)))))))</pre>
  </div>

<div class="form-block function" id="def-accessor-constructor-thm" data-defines="ACCESSOR-CONSTRUCTOR-THM" data-references="EQUAL,DEFTHM,QUASIQUOTE,COMPONENT-NAME,ARG,CONSTRUCTOR-CALL,CONSTR-CALL,ACCESSOR-NAME,ACC,LET,COMPONENT,PRODUCT,DEFUN" data-part-name="ACCESSOR-CONSTRUCTOR-THM" data-part-args="COMPONENT,PRODUCT" data-part-body="EQUAL,DEFTHM,QUASIQUOTE,COMPONENT-NAME,ARG,CONSTRUCTOR-CALL,CONSTR-CALL,COMPONENT,PRODUCT,ACCESSOR-NAME,ACC,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-CONSTRUCTOR-THM">accessor-constructor-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-constructor-thm" data-sym="ACCESSOR-CONSTRUCTOR-THM" title="(defun accessor-constructor-thm (product component)
  (let ((acc (accessor-name product component))
        (constr-call (constructor-call product))
        (arg (component-name component)))
    `(defthm ,(appsyms (list acc (product-name product)))">accessor-constructor-thm</a>
  (product component)
  (let ((acc (<a class="sym-link external" href="types-misc.html#def-accessor-name" data-sym="ACCESSOR-NAME">accessor-name</a> product component)) (constr-call (<a class="sym-link local-def" href="#def-constructor-call" data-sym="CONSTRUCTOR-CALL" title="(defun constructor-call (product)
  (cons (product-name product) (components-names (product-components product))))">constructor-call</a> product))
      (arg (<a class="sym-link external" href="types-misc.html#def-component-name" data-sym="COMPONENT-NAME">component-name</a> component)))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST ACC (PRODUCT-NAME PRODUCT)))
      (equal (,ACC ,CONSTR-CALL) ,ARG))))</pre>
  </div>

<div class="form-block function" id="def-constructor-component-thm" data-defines="CONSTRUCTOR-COMPONENT-THM" data-references="EQUAL,NOT,DEFTHM,QUASIQUOTE,COMPONENT-NAME,ARG,PRODUCT-NAME,NAME,LET,COMPONENT,PRODUCT,DEFUN" data-part-name="CONSTRUCTOR-COMPONENT-THM" data-part-args="COMPONENT,PRODUCT" data-part-body="EQUAL,NOT,DEFTHM,QUASIQUOTE,COMPONENT,COMPONENT-NAME,ARG,PRODUCT,PRODUCT-NAME,NAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONSTRUCTOR-COMPONENT-THM">constructor-component-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-constructor-component-thm" data-sym="CONSTRUCTOR-COMPONENT-THM" title="(defun constructor-component-thm (product component)
  (let ((name (product-name product)) (arg (component-name component)))
    `(defthm ,(appsyms (list name &#39;not-equal arg))
             (not (equal ,(constructor-call product) ,arg)))))">constructor-component-thm</a>
  (product component)
  (let ((name (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product)) (arg (<a class="sym-link external" href="types-misc.html#def-component-name" data-sym="COMPONENT-NAME">component-name</a> component)))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST NAME &#39;NOT-EQUAL ARG))
      (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal ,(CONSTRUCTOR-CALL PRODUCT) ,ARG)))))</pre>
  </div>

<div class="form-block function" id="def-product-component-thm" data-defines="PRODUCT-COMPONENT-THM" data-references="DISABLE,EQUAL,NOT,X,IMPLIES,DEFTHM,QUASIQUOTE,PRODUCT-RECOGNIZER,RECOGNIZER,ACCESSOR-NAME,ACC,PRODUCT-NAME,NAME,LET*,COMPONENT,PRODUCT,DEFUN" data-part-name="PRODUCT-COMPONENT-THM" data-part-args="COMPONENT,PRODUCT" data-part-body="DISABLE,EQUAL,NOT,X,IMPLIES,DEFTHM,QUASIQUOTE,PRODUCT-RECOGNIZER,RECOGNIZER,COMPONENT,ACCESSOR-NAME,ACC,PRODUCT,PRODUCT-NAME,NAME,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-COMPONENT-THM">product-component-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-component-thm" data-sym="PRODUCT-COMPONENT-THM" title="(defun product-component-thm (product component)
  (let* ((name (product-name product))
         (acc (accessor-name product component))
         (recognizer (product-recognizer product)))
    `(defthm ,(appsyms (list name &#39;not-equal acc))
...">product-component-thm</a>
  (product component)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product)) (acc (<a class="sym-link external" href="types-misc.html#def-accessor-name" data-sym="ACCESSOR-NAME">accessor-name</a> product component))
      (recognizer (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product)))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST NAME &#39;NOT-EQUAL ACC))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,RECOGNIZER x) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal (,ACC x) x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ,(APPSYMS (LIST NAME &#39;ELIM))
         <span class="keyword">:in-theory</span> (disable ,NAME ,ACC ,RECOGNIZER))))))</pre>
  </div>

<div class="form-block function" id="def-arg-difference-thm" data-defines="ARG-DIFFERENCE-THM" data-references="X,EQUAL,NOT,IMPLIES,DEFTHM,QUASIQUOTE,ACCESSOR-NAME,ACC,PRODUCT-NAME,NAME,COMPONENT-NAME,ARG,LET,COMPONENT,PRODUCT,DEFUN" data-part-name="ARG-DIFFERENCE-THM" data-part-args="COMPONENT,PRODUCT" data-part-body="X,EQUAL,NOT,IMPLIES,DEFTHM,QUASIQUOTE,ACCESSOR-NAME,ACC,PRODUCT,PRODUCT-NAME,NAME,COMPONENT,COMPONENT-NAME,ARG,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ARG-DIFFERENCE-THM">arg-difference-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-arg-difference-thm" data-sym="ARG-DIFFERENCE-THM" title="(defun arg-difference-thm (product component)
  (let ((arg (component-name component))
        (name (product-name product))
        (acc (accessor-name product component)))
    `(defthm ,(appsyms (list &#39;difference arg name))
...">arg-difference-thm</a>
  (product component)
  (let ((arg (<a class="sym-link external" href="types-misc.html#def-component-name" data-sym="COMPONENT-NAME">component-name</a> component)) (name (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product))
      (acc (<a class="sym-link external" href="types-misc.html#def-accessor-name" data-sym="ACCESSOR-NAME">accessor-name</a> product component)))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST &#39;DIFFERENCE ARG NAME))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal ,ARG (,ACC x)))
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal ,(CONSTRUCTOR-CALL PRODUCT) x))))))</pre>
  </div>

<div class="form-block function" id="def-product-arg-thms" data-defines="PRODUCT-ARG-THMS" data-references="QUASIQUOTE,CONSP,IF,COMPONENTS,PRODUCT,DEFUN" data-part-name="PRODUCT-ARG-THMS" data-part-args="COMPONENTS,PRODUCT" data-part-body="QUASIQUOTE,COMPONENTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-ARG-THMS">product-arg-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-arg-thms" data-sym="PRODUCT-ARG-THMS" title="(defun product-arg-thms (product components)
  (if (consp components)
      `(,(accessor-constructor-thm product (car components))
        ,(constructor-component-thm product (car components))
        ,(product-component-thm product (car components))
...">product-arg-thms</a>
  (product components)
  (if (consp components)
    `(,(ACCESSOR-CONSTRUCTOR-THM PRODUCT (CAR COMPONENTS)) ,(CONSTRUCTOR-COMPONENT-THM PRODUCT (CAR COMPONENTS))
      ,(PRODUCT-COMPONENT-THM PRODUCT (CAR COMPONENTS))
      ,(ARG-DIFFERENCE-THM PRODUCT (CAR COMPONENTS))
      ,@(PRODUCT-ARG-THMS PRODUCT (CDR COMPONENTS)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-product-theorems" data-defines="PRODUCT-THEOREMS" data-references="QUASIQUOTE,PRODUCT-COMPONENTS,COMPONENTS,RECOG,KWASSOC,PREDEF,PRODUCT-KWALIST,KWALIST,LET*,COMPACT-OPT,ACCESSOR-OPT,PRODUCT,DEFUN" data-used-by="BASIC-PRODUCT-DEFS" data-part-name="PRODUCT-THEOREMS" data-part-args="COMPACT-OPT,ACCESSOR-OPT,PRODUCT" data-part-body="QUASIQUOTE,PRODUCT-COMPONENTS,COMPONENTS,RECOG,KWASSOC,PREDEF,PRODUCT,PRODUCT-KWALIST,KWALIST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-THEOREMS">product-theorems</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-theorems" data-sym="PRODUCT-THEOREMS" title="(defun product-theorems (product accessor-opt compact-opt)
  (let* ((kwalist (product-kwalist product))
         (predef (kwassoc :predef nil kwalist))
         (recog (kwassoc :recognizer nil kwalist))
         (components (product-components product)))
...">product-theorems</a>
  (product accessor-opt compact-opt)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((kwalist (<a class="sym-link external" href="types-misc.html#def-product-kwalist" data-sym="PRODUCT-KWALIST">product-kwalist</a> product)) (predef (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:predef</span> nil kwalist))
      (recog (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:recognizer</span> nil kwalist))
      (components (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product)))
    `(,@(AND (NOT PREDEF) (NOT RECOG)
       (LIST (PRODUCT-COMPOUND-REC-THM PRODUCT COMPACT-OPT))) ,@(AND (NOT PREDEF) (LIST (CONSTRUCTOR-ACL2-COUNT-THM PRODUCT COMPACT-OPT)))
      ,@(ACCESSOR-ACL2-COUNT-THMS PRODUCT COMPONENTS)
      ,@(IF ACCESSOR-OPT
      (ACCESSOR-SHORT-CIRCUIT-THMS PRODUCT COMPONENTS)
      NIL)
      ,(PRODUCT-RECOGNIZER-CONSTRUCTOR-THM PRODUCT)
      ,(PRODUCT-ELIM-THM PRODUCT COMPACT-OPT)
      ,@(PRODUCT-ARG-THMS PRODUCT COMPONENTS))))</pre>
  </div>

<div class="form-block function" id="def-basic-product-defs" data-defines="BASIC-PRODUCT-DEFS" data-references="PRODUCT-PATTERN-MATCHER,LIST,PRODUCT-THEOREMS,PRODUCT-FUNCTION-DEFS,APPEND,COMPACT-OPT,HONS-OPT,ACCESSOR-OPT,GUARD-OPT,PRODUCT,DEFUN" data-used-by="BASIC-PRODUCTS-DEFS" data-part-name="BASIC-PRODUCT-DEFS" data-part-args="COMPACT-OPT,HONS-OPT,ACCESSOR-OPT,GUARD-OPT,PRODUCT" data-part-body="PRODUCT-PATTERN-MATCHER,LIST,PRODUCT-THEOREMS,ACCESSOR-OPT,COMPACT-OPT,HONS-OPT,GUARD-OPT,PRODUCT,PRODUCT-FUNCTION-DEFS,APPEND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BASIC-PRODUCT-DEFS">basic-product-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-basic-product-defs" data-sym="BASIC-PRODUCT-DEFS" title="(defun basic-product-defs (product guard-opt accessor-opt hons-opt compact-opt)
  (append
   (product-function-defs product guard-opt hons-opt compact-opt accessor-opt)
   (product-theorems product accessor-opt compact-opt)
   (list (product-pattern-matcher product guard-opt))))">basic-product-defs</a>
  (product guard-opt accessor-opt hons-opt compact-opt)
  (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-product-function-defs" data-sym="PRODUCT-FUNCTION-DEFS" title="(defun product-function-defs
       (product guard-opt hons-opt compact-opt accessor-opt)
  (let* ((kwalist (product-kwalist product))
         (predef (kwassoc :predef nil (product-kwalist product)))
         (recog (kwassoc :recognizer nil kwalist)))
...">product-function-defs</a> product
      guard-opt
      hons-opt
      compact-opt
      accessor-opt)
    (<a class="sym-link local-def" href="#def-product-theorems" data-sym="PRODUCT-THEOREMS" title="(defun product-theorems (product accessor-opt compact-opt)
  (let* ((kwalist (product-kwalist product))
         (predef (kwassoc :predef nil kwalist))
         (recog (kwassoc :recognizer nil kwalist))
         (components (product-components product)))
...">product-theorems</a> product accessor-opt compact-opt)
    (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link local-def" href="#def-product-pattern-matcher" data-sym="PRODUCT-PATTERN-MATCHER" title="(defun product-pattern-matcher (product guard-opt)
  `(def-pattern-match-constructor
    ,(if (eq guard-opt :fast)
         (appsyms (list (product-name product) &#39;slow))
         (product-name product))">product-pattern-matcher</a> product guard-opt))))</pre>
  </div>

<div class="form-block macro" id="def-defproduct" data-defines="DEFPRODUCT" data-references="PROGN,QUASIQUOTE,DEFSUM-MUNGE-PRODUCT,LET,PRODUCT,&REST,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFPRODUCT">defproduct</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defproduct" data-sym="DEFPRODUCT" title="(defmacro defproduct (&amp;rest product)
  (let ((product (defsum-munge-product product)))
    `(progn
      ,@(basic-product-defs product
         (kwassoc :guard nil (product-kwalist product))
...">defproduct</a>
  (&amp;rest product)
  (let ((product (<a class="sym-link local-def" href="#def-defsum-munge-product" data-sym="DEFSUM-MUNGE-PRODUCT" title="(defun defsum-munge-product (product)
  (mv-let (product kwalist) (strip-keywords product)
          (cons (cons (car product) (munge-components (cdr product))) kwalist)))">defsum-munge-product</a> product)))
    `(<a class="sym-link system" href="../../axioms.html#def-progn" data-sym="PROGN">progn</a> ,@(BASIC-PRODUCT-DEFS PRODUCT (KWASSOC :GUARD NIL (PRODUCT-KWALIST PRODUCT))
   (KWASSOC :SHORT-ACCESSORS T (PRODUCT-KWALIST PRODUCT))
   (KWASSOC :HONS NIL (PRODUCT-KWALIST PRODUCT))
   (KWASSOC :COMPACT T (PRODUCT-KWALIST PRODUCT))))))</pre>
  </div>

<div class="form-block function" id="def-basic-products-defs" data-defines="BASIC-PRODUCTS-DEFS" data-references="CDR,CAR,BASIC-PRODUCT-DEFS,APPEND,ATOM,IF,COMPACT-OPT,HONS-OPT,ACCESSOR-OPT,GUARD-OPT,PRODUCTS,DEFUN" data-part-name="BASIC-PRODUCTS-DEFS" data-part-args="COMPACT-OPT,HONS-OPT,ACCESSOR-OPT,GUARD-OPT,PRODUCTS" data-part-body="CDR,BASIC-PRODUCTS-DEFS,COMPACT-OPT,HONS-OPT,ACCESSOR-OPT,GUARD-OPT,CAR,BASIC-PRODUCT-DEFS,APPEND,PRODUCTS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BASIC-PRODUCTS-DEFS">basic-products-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-basic-products-defs" data-sym="BASIC-PRODUCTS-DEFS" title="(defun basic-products-defs
       (products guard-opt accessor-opt hons-opt compact-opt)
  (if (atom products)
      nil
      (append
...">basic-products-defs</a>
  (products guard-opt accessor-opt hons-opt compact-opt)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> products)
    nil
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-basic-product-defs" data-sym="BASIC-PRODUCT-DEFS" title="(defun basic-product-defs (product guard-opt accessor-opt hons-opt compact-opt)
  (append
   (product-function-defs product guard-opt hons-opt compact-opt accessor-opt)
   (product-theorems product accessor-opt compact-opt)
   (list (product-pattern-matcher product guard-opt))))">basic-product-defs</a> (car products)
        guard-opt
        accessor-opt
        hons-opt
        compact-opt)
      (<a class="sym-link local-def" href="#def-basic-products-defs" data-sym="BASIC-PRODUCTS-DEFS" title="(defun basic-products-defs
       (products guard-opt accessor-opt hons-opt compact-opt)
  (if (atom products)
      nil
      (append
...">basic-products-defs</a> (cdr products)
        guard-opt
        accessor-opt
        hons-opt
        compact-opt))))</pre>
  </div>

<div class="form-block function" id="def-products-type-thms" data-defines="PRODUCTS-TYPE-THMS" data-references="CDR,CAR,PRODUCT-TYPE-THMS,APPEND,ENDP,IF,PRODUCTS,DEFUN" data-part-name="PRODUCTS-TYPE-THMS" data-part-args="PRODUCTS" data-part-body="CDR,PRODUCTS-TYPE-THMS,CAR,PRODUCT-TYPE-THMS,APPEND,PRODUCTS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCTS-TYPE-THMS">products-type-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-products-type-thms" data-sym="PRODUCTS-TYPE-THMS" title="(defun products-type-thms (products)
  (if (endp products)
      nil
      (append (product-type-thms (car products))
              (products-type-thms (cdr products)))))">products-type-thms</a>
  (products)
  (if (<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> products)
    nil
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-product-type-thms" data-sym="PRODUCT-TYPE-THMS" title="(defun product-type-thms (product)
  (let ((recognizer (product-recognizer product))
        (name (product-name product))
        (call (constructor-call product))
        (components (product-components product)))
...">product-type-thms</a> (car products))
      (<a class="sym-link local-def" href="#def-products-type-thms" data-sym="PRODUCTS-TYPE-THMS" title="(defun products-type-thms (products)
  (if (endp products)
      nil
      (append (product-type-thms (car products))
              (products-type-thms (cdr products)))))">products-type-thms</a> (cdr products)))))</pre>
  </div>

<div class="form-block function" id="def-type-checklist1" data-defines="TYPE-CHECKLIST1" data-references="CDR,LIST,CONS,COMPONENT-NAME,NAME,COMPONENT-TYPE,TYPE,CAR,COMPONENT,LET*,CONSP,IF,COMPONENTS,DEFUN" data-used-by="TYPE-CHECKLIST" data-part-name="TYPE-CHECKLIST1" data-part-args="COMPONENTS" data-part-body="CDR,TYPE-CHECKLIST1,LIST,CONS,COMPONENT-NAME,NAME,COMPONENT-TYPE,TYPE,CAR,COMPONENT,LET*,COMPONENTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TYPE-CHECKLIST1">type-checklist1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-type-checklist1" data-sym="TYPE-CHECKLIST1" title="(defun type-checklist1 (components)
  (if (consp components)
      (let* ((component (car components))
             (type (component-type component))
             (name (component-name component)))
...">type-checklist1</a>
  (components)
  (if (consp components)
    (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((component (car components)) (type (<a class="sym-link external" href="types-misc.html#def-component-type" data-sym="COMPONENT-TYPE">component-type</a> component))
        (name (<a class="sym-link external" href="types-misc.html#def-component-name" data-sym="COMPONENT-NAME">component-name</a> component)))
      (if type
        (cons (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> type name) (<a class="sym-link local-def" href="#def-type-checklist1" data-sym="TYPE-CHECKLIST1" title="(defun type-checklist1 (components)
  (if (consp components)
      (let* ((component (car components))
             (type (component-type component))
             (name (component-name component)))
...">type-checklist1</a> (cdr components)))
        (<a class="sym-link local-def" href="#def-type-checklist1" data-sym="TYPE-CHECKLIST1" title="(defun type-checklist1 (components)
  (if (consp components)
      (let* ((component (car components))
             (type (component-type component))
             (name (component-name component)))
...">type-checklist1</a> (cdr components))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-type-checklist" data-defines="TYPE-CHECKLIST" data-references="T,CAR,AND,QUASIQUOTE,CDR,CONSP,IF,TYPE-CHECKLIST1,CHECKLIST,LET,COMPONENTS,DEFUN" data-used-by="SUM-RECOGNIZER-CONSTRUCTOR-THM,SUM-RECOGNIZER-CLAUSE" data-part-name="TYPE-CHECKLIST" data-part-args="COMPONENTS" data-part-body="T,CAR,AND,QUASIQUOTE,CDR,CONSP,IF,COMPONENTS,TYPE-CHECKLIST1,CHECKLIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TYPE-CHECKLIST">type-checklist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-type-checklist" data-sym="TYPE-CHECKLIST" title="(defun type-checklist (components)
  (let ((checklist (type-checklist1 components)))
    (if checklist
        (if (consp (cdr checklist))
            `(and ,@checklist)
...">type-checklist</a>
  (components)
  (let ((checklist (<a class="sym-link local-def" href="#def-type-checklist1" data-sym="TYPE-CHECKLIST1" title="(defun type-checklist1 (components)
  (if (consp components)
      (let* ((component (car components))
             (type (component-type component))
             (name (component-name component)))
...">type-checklist1</a> components)))
    (if checklist
      (if (consp (cdr checklist))
        `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> ,@CHECKLIST)
        (car checklist))
      <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block function" id="def-sum-recognizer-clause" data-defines="SUM-RECOGNIZER-CLAUSE" data-references="CDR,SLOW,QUOTE,CAR,LIST,APPSYMS,CONS,EQ,IF,PATTERN,CONSTRUCTOR-CALL,CONSTR,PRODUCT-COMPONENTS,TYPE-CHECKLIST,LET*,GUARD-OPT,PRODUCT,DEFUN" data-used-by="SUM-RECOGNIZER-CLAUSES" data-part-name="SUM-RECOGNIZER-CLAUSE" data-part-args="GUARD-OPT,PRODUCT" data-part-body="CDR,SLOW,QUOTE,CAR,LIST,APPSYMS,CONS,GUARD-OPT,EQ,IF,PATTERN,CONSTRUCTOR-CALL,CONSTR,PRODUCT,PRODUCT-COMPONENTS,TYPE-CHECKLIST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-RECOGNIZER-CLAUSE">sum-recognizer-clause</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-recognizer-clause" data-sym="SUM-RECOGNIZER-CLAUSE" title="(defun sum-recognizer-clause (product guard-opt)
  (let* ((type-checklist (type-checklist (product-components product)))
         (constr (constructor-call product))
         (pattern
          (if (eq guard-opt :fast)
...">sum-recognizer-clause</a>
  (product guard-opt)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link local-def" href="#def-type-checklist" data-sym="TYPE-CHECKLIST" title="(defun type-checklist (components)
  (let ((checklist (type-checklist1 components)))
    (if checklist
        (if (consp (cdr checklist))
            `(and ,@checklist)
...">type-checklist</a> (<a class="sym-link local-def" href="#def-type-checklist" data-sym="TYPE-CHECKLIST" title="(defun type-checklist (components)
  (let ((checklist (type-checklist1 components)))
    (if checklist
        (if (consp (cdr checklist))
            `(and ,@checklist)
...">type-checklist</a> (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product))) (constr (<a class="sym-link local-def" href="#def-constructor-call" data-sym="CONSTRUCTOR-CALL" title="(defun constructor-call (product)
  (cons (product-name product) (components-names (product-components product))))">constructor-call</a> product))
      (pattern (if (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> guard-opt <span class="keyword">:fast</span>)
          (cons (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (car constr) 'slow)) (cdr constr))
          constr)))
    (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> pattern <a class="sym-link local-def" href="#def-type-checklist" data-sym="TYPE-CHECKLIST" title="(defun type-checklist (components)
  (let ((checklist (type-checklist1 components)))
    (if checklist
        (if (consp (cdr checklist))
            `(and ,@checklist)
...">type-checklist</a>)))</pre>
  </div>

<div class="form-block function" id="def-sum-recognizer-clauses" data-defines="SUM-RECOGNIZER-CLAUSES" data-references="CDR,CAR,SUM-RECOGNIZER-CLAUSE,CONS,CONSP,IF,GUARD-OPT,PRODUCTS,DEFUN" data-part-name="SUM-RECOGNIZER-CLAUSES" data-part-args="GUARD-OPT,PRODUCTS" data-part-body="CDR,SUM-RECOGNIZER-CLAUSES,GUARD-OPT,CAR,SUM-RECOGNIZER-CLAUSE,CONS,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-RECOGNIZER-CLAUSES">sum-recognizer-clauses</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-recognizer-clauses" data-sym="SUM-RECOGNIZER-CLAUSES" title="(defun sum-recognizer-clauses (products guard-opt)
  (if (consp products)
      (cons (sum-recognizer-clause (car products) guard-opt)
            (sum-recognizer-clauses (cdr products) guard-opt))
      nil))">sum-recognizer-clauses</a>
  (products guard-opt)
  (if (consp products)
    (cons (<a class="sym-link local-def" href="#def-sum-recognizer-clause" data-sym="SUM-RECOGNIZER-CLAUSE" title="(defun sum-recognizer-clause (product guard-opt)
  (let* ((type-checklist (type-checklist (product-components product)))
         (constr (constructor-call product))
         (pattern
          (if (eq guard-opt :fast)
...">sum-recognizer-clause</a> (car products) guard-opt)
      (<a class="sym-link local-def" href="#def-sum-recognizer-clauses" data-sym="SUM-RECOGNIZER-CLAUSES" title="(defun sum-recognizer-clauses (products guard-opt)
  (if (consp products)
      (cons (sum-recognizer-clause (car products) guard-opt)
            (sum-recognizer-clauses (cdr products) guard-opt))
      nil))">sum-recognizer-clauses</a> (cdr products) guard-opt))
    nil))</pre>
  </div>

<div class="form-block function" id="def-sum-recognizer-def" data-defines="SUM-RECOGNIZER-DEF" data-references="PATTERN-MATCH,ACL2-COUNT-NTH-OF-LEN-2-OR-GREATER-LINEAR,ENABLE,ACL2-COUNT,1+,XARGS,DECLARE,X,QUASIQUOTE,GUARD-OPT,SUM,DEFUN" data-used-by="SUM-RECOGNIZERS-DEF,SUM-RECOGNIZER-DEFS" data-part-name="SUM-RECOGNIZER-DEF" data-part-args="GUARD-OPT,SUM" data-part-body="PATTERN-MATCH,ACL2-COUNT-NTH-OF-LEN-2-OR-GREATER-LINEAR,ENABLE,ACL2-COUNT,1+,XARGS,DECLARE,X,DEFUN,QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-RECOGNIZER-DEF">sum-recognizer-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-recognizer-def" data-sym="SUM-RECOGNIZER-DEF" title="(defun sum-recognizer-def (sum guard-opt)
  `(defun ,(sum-recognizer sum) (x)
     (declare
      (xargs :measure (1+ (acl2-count x))
       ,@(if guard-opt
...">sum-recognizer-def</a>
  (sum guard-opt)
  `(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,(SUM-RECOGNIZER SUM)
    (x)
    (declare (xargs <span class="keyword">:measure</span> (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> (<a class="sym-link system" href="../../axioms.html#def-acl2-count" data-sym="ACL2-COUNT">acl2-count</a> x))
        ,@(IF GUARD-OPT
      `(:GUARD T)
      NIL)
        <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link external" href="types-misc.html#def-acl2-count-nth-of-len-2-or-greater-linear" data-sym="ACL2-COUNT-NTH-OF-LEN-2-OR-GREATER-LINEAR">acl2-count-nth-of-len-2-or-greater-linear</a>)))))
    (<a class="sym-link external" href="pattern-match.html#def-pattern-match" data-sym="PATTERN-MATCH">pattern-match</a> x
      ,@(SUM-RECOGNIZER-CLAUSES (SUM-PRODUCTS SUM) GUARD-OPT))))</pre>
  </div>

<div class="form-block function" id="def-sum-recognizer-defs" data-defines="SUM-RECOGNIZER-DEFS" data-references="CDR,CAR,SUM-RECOGNIZER-DEF,CONS,CONSP,IF,GUARD-OPT,SUMS,DEFUN" data-part-name="SUM-RECOGNIZER-DEFS" data-part-args="GUARD-OPT,SUMS" data-part-body="CDR,SUM-RECOGNIZER-DEFS,GUARD-OPT,CAR,SUM-RECOGNIZER-DEF,CONS,SUMS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-RECOGNIZER-DEFS">sum-recognizer-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-recognizer-defs" data-sym="SUM-RECOGNIZER-DEFS" title="(defun sum-recognizer-defs (sums guard-opt)
  (if (consp sums)
      (cons (sum-recognizer-def (car sums) guard-opt)
            (sum-recognizer-defs (cdr sums) guard-opt))
      nil))">sum-recognizer-defs</a>
  (sums guard-opt)
  (if (consp sums)
    (cons (<a class="sym-link local-def" href="#def-sum-recognizer-def" data-sym="SUM-RECOGNIZER-DEF" title="(defun sum-recognizer-def (sum guard-opt)
  `(defun ,(sum-recognizer sum) (x)
     (declare
      (xargs :measure (1+ (acl2-count x))
       ,@(if guard-opt
...">sum-recognizer-def</a> (car sums) guard-opt)
      (<a class="sym-link local-def" href="#def-sum-recognizer-defs" data-sym="SUM-RECOGNIZER-DEFS" title="(defun sum-recognizer-defs (sums guard-opt)
  (if (consp sums)
      (cons (sum-recognizer-def (car sums) guard-opt)
            (sum-recognizer-defs (cdr sums) guard-opt))
      nil))">sum-recognizer-defs</a> (cdr sums) guard-opt))
    nil))</pre>
  </div>

<div class="form-block function" id="def-sum-recognizers-def" data-defines="SUM-RECOGNIZERS-DEF" data-references="MUTUAL-RECURSION,QUASIQUOTE,CAR,SUM-RECOGNIZER-DEF,NOT,LEN,=,AND,IF,GUARD-OPT,EXTFNS,SUMS,DEFUN" data-part-name="SUM-RECOGNIZERS-DEF" data-part-args="GUARD-OPT,EXTFNS,SUMS" data-part-body="MUTUAL-RECURSION,QUASIQUOTE,GUARD-OPT,CAR,SUM-RECOGNIZER-DEF,EXTFNS,NOT,SUMS,LEN,=,AND,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-RECOGNIZERS-DEF">sum-recognizers-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-recognizers-def" data-sym="SUM-RECOGNIZERS-DEF" title="(defun sum-recognizers-def (sums extfns guard-opt)
  (if (and (= (len sums) 1) (not extfns))
      (sum-recognizer-def (car sums) guard-opt)
      `(mutual-recursion ,@(sum-recognizer-defs sums guard-opt) ,@extfns)))">sum-recognizers-def</a>
  (sums extfns guard-opt)
  (if (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> sums) <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> extfns))
    (<a class="sym-link local-def" href="#def-sum-recognizer-def" data-sym="SUM-RECOGNIZER-DEF" title="(defun sum-recognizer-def (sum guard-opt)
  `(defun ,(sum-recognizer sum) (x)
     (declare
      (xargs :measure (1+ (acl2-count x))
       ,@(if guard-opt
...">sum-recognizer-def</a> (car sums) guard-opt)
    `(<a class="sym-link system" href="../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> ,@(SUM-RECOGNIZER-DEFS SUMS GUARD-OPT)
      ,@EXTFNS)))</pre>
  </div>

<div class="form-block function" id="def-sum-compound-rec-thm" data-defines="SUM-COMPOUND-REC-THM" data-references="X,IMPLIES,DEFTHM,QUASIQUOTE,SUM-RECOGNIZER,RECOGNIZER,SUM-NAME,SUMNAME,LET,COMPACT-OPT,SUM,DEFUN" data-used-by="SUM-COMPOUND-REC-THMS" data-part-name="SUM-COMPOUND-REC-THM" data-part-args="COMPACT-OPT,SUM" data-part-body="X,IMPLIES,DEFTHM,QUASIQUOTE,SUM-RECOGNIZER,RECOGNIZER,SUM,SUM-NAME,SUMNAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-COMPOUND-REC-THM">sum-compound-rec-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-compound-rec-thm" data-sym="SUM-COMPOUND-REC-THM" title="(defun sum-compound-rec-thm (sum compact-opt)
  (let ((sumname (sum-name sum)) (recognizer (sum-recognizer sum)))
    `(defthm ,(appsyms (list sumname &#39;compound-recognizer))
             (implies (,recognizer x)
                      ,(if compact-opt
...">sum-compound-rec-thm</a>
  (sum compact-opt)
  (let ((sumname (<a class="sym-link local-def" href="#def-sum-name" data-sym="SUM-NAME" title="(defun sum-name (sum) (car sum))">sum-name</a> sum)) (recognizer (<a class="sym-link local-def" href="#def-sum-recognizer" data-sym="SUM-RECOGNIZER" title="(defun sum-recognizer (sum) (appsyms (list (sum-name sum) &#39;p)))">sum-recognizer</a> sum)))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST SUMNAME &#39;COMPOUND-RECOGNIZER))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,RECOGNIZER x)
        ,(IF COMPACT-OPT
     `(CONSP X)
     `(AND (CONSP X) (TRUE-LISTP X))))
      <span class="keyword">:rule-classes</span> <span class="keyword">:compound-recognizer</span>)))</pre>
  </div>

<div class="form-block function" id="def-sum-compound-rec-thms" data-defines="SUM-COMPOUND-REC-THMS" data-references="CDR,CAR,SUM-COMPOUND-REC-THM,CONS,CONSP,IF,COMPACT-OPT,SUMS,DEFUN" data-part-name="SUM-COMPOUND-REC-THMS" data-part-args="COMPACT-OPT,SUMS" data-part-body="CDR,SUM-COMPOUND-REC-THMS,COMPACT-OPT,CAR,SUM-COMPOUND-REC-THM,CONS,SUMS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-COMPOUND-REC-THMS">sum-compound-rec-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-compound-rec-thms" data-sym="SUM-COMPOUND-REC-THMS" title="(defun sum-compound-rec-thms (sums compact-opt)
  (if (consp sums)
      (cons (sum-compound-rec-thm (car sums) compact-opt)
            (sum-compound-rec-thms (cdr sums) compact-opt))
      nil))">sum-compound-rec-thms</a>
  (sums compact-opt)
  (if (consp sums)
    (cons (<a class="sym-link local-def" href="#def-sum-compound-rec-thm" data-sym="SUM-COMPOUND-REC-THM" title="(defun sum-compound-rec-thm (sum compact-opt)
  (let ((sumname (sum-name sum)) (recognizer (sum-recognizer sum)))
    `(defthm ,(appsyms (list sumname &#39;compound-recognizer))
             (implies (,recognizer x)
                      ,(if compact-opt
...">sum-compound-rec-thm</a> (car sums) compact-opt)
      (<a class="sym-link local-def" href="#def-sum-compound-rec-thms" data-sym="SUM-COMPOUND-REC-THMS" title="(defun sum-compound-rec-thms (sums compact-opt)
  (if (consp sums)
      (cons (sum-compound-rec-thm (car sums) compact-opt)
            (sum-compound-rec-thms (cdr sums) compact-opt))
      nil))">sum-compound-rec-thms</a> (cdr sums) compact-opt))
    nil))</pre>
  </div>

<div class="form-block function" id="def-recognizer-call-list" data-defines="RECOGNIZER-CALL-LIST" data-references="CDR,X,QUASIQUOTE,CONS,CONSP,IF,PRODUCTS,DEFUN" data-used-by="SUM-POSSIBILITY-THM" data-part-name="RECOGNIZER-CALL-LIST" data-part-args="PRODUCTS" data-part-body="CDR,RECOGNIZER-CALL-LIST,X,QUASIQUOTE,CONS,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RECOGNIZER-CALL-LIST">recognizer-call-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-recognizer-call-list" data-sym="RECOGNIZER-CALL-LIST" title="(defun recognizer-call-list (products)
  (if (consp products)
      (cons `(,(product-recognizer (car products)) x)
            (recognizer-call-list (cdr products)))
      nil))">recognizer-call-list</a>
  (products)
  (if (consp products)
    (cons `(,(PRODUCT-RECOGNIZER (CAR PRODUCTS)) x)
      (<a class="sym-link local-def" href="#def-recognizer-call-list" data-sym="RECOGNIZER-CALL-LIST" title="(defun recognizer-call-list (products)
  (if (consp products)
      (cons `(,(product-recognizer (car products)) x)
            (recognizer-call-list (cdr products)))
      nil))">recognizer-call-list</a> (cdr products)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-sum-possibility-thm" data-defines="SUM-POSSIBILITY-THM" data-references="X,IMPLIES,DEFTHM,QUASIQUOTE,SUM-RECOGNIZER,RECOGNIZER,SUM-NAME,NAME,SUM-PRODUCTS,RECOGNIZER-CALL-LIST,REC-LIST,LET,SUM,DEFUN" data-used-by="SUM-POSSIBILITY-THMS" data-part-name="SUM-POSSIBILITY-THM" data-part-args="SUM" data-part-body="X,IMPLIES,DEFTHM,QUASIQUOTE,SUM-RECOGNIZER,RECOGNIZER,SUM-NAME,NAME,SUM,SUM-PRODUCTS,RECOGNIZER-CALL-LIST,REC-LIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-POSSIBILITY-THM">sum-possibility-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-possibility-thm" data-sym="SUM-POSSIBILITY-THM" title="(defun sum-possibility-thm (sum)
  (let ((rec-list (recognizer-call-list (sum-products sum)))
        (name (sum-name sum))
        (recognizer (sum-recognizer sum)))
    `(defthm ,(appsyms (list name &#39;possibilities))
...">sum-possibility-thm</a>
  (sum)
  (let ((rec-list (<a class="sym-link local-def" href="#def-recognizer-call-list" data-sym="RECOGNIZER-CALL-LIST" title="(defun recognizer-call-list (products)
  (if (consp products)
      (cons `(,(product-recognizer (car products)) x)
            (recognizer-call-list (cdr products)))
      nil))">recognizer-call-list</a> (<a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> sum))) (name (<a class="sym-link local-def" href="#def-sum-name" data-sym="SUM-NAME" title="(defun sum-name (sum) (car sum))">sum-name</a> sum))
      (recognizer (<a class="sym-link local-def" href="#def-sum-recognizer" data-sym="SUM-RECOGNIZER" title="(defun sum-recognizer (sum) (appsyms (list (sum-name sum) &#39;p)))">sum-recognizer</a> sum)))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST NAME &#39;POSSIBILITIES))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,RECOGNIZER x)
        ,(IF (CONSP (CDR REC-LIST))
     `(OR ,@REC-LIST)
     (CAR REC-LIST)))
      <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>)))</pre>
  </div>

<div class="form-block function" id="def-sum-possibility-thms" data-defines="SUM-POSSIBILITY-THMS" data-references="CDR,CAR,SUM-POSSIBILITY-THM,CONS,CONSP,IF,SUMS,DEFUN" data-part-name="SUM-POSSIBILITY-THMS" data-part-args="SUMS" data-part-body="CDR,SUM-POSSIBILITY-THMS,CAR,SUM-POSSIBILITY-THM,CONS,SUMS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-POSSIBILITY-THMS">sum-possibility-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-possibility-thms" data-sym="SUM-POSSIBILITY-THMS" title="(defun sum-possibility-thms (sums)
  (if (consp sums)
      (cons (sum-possibility-thm (car sums)) (sum-possibility-thms (cdr sums)))
      nil))">sum-possibility-thms</a>
  (sums)
  (if (consp sums)
    (cons (<a class="sym-link local-def" href="#def-sum-possibility-thm" data-sym="SUM-POSSIBILITY-THM" title="(defun sum-possibility-thm (sum)
  (let ((rec-list (recognizer-call-list (sum-products sum)))
        (name (sum-name sum))
        (recognizer (sum-recognizer sum)))
    `(defthm ,(appsyms (list name &#39;possibilities))
...">sum-possibility-thm</a> (car sums))
      (<a class="sym-link local-def" href="#def-sum-possibility-thms" data-sym="SUM-POSSIBILITY-THMS" title="(defun sum-possibility-thms (sums)
  (if (consp sums)
      (cons (sum-possibility-thm (car sums)) (sum-possibility-thms (cdr sums)))
      nil))">sum-possibility-thms</a> (cdr sums)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-product-fast-recs" data-defines="PRODUCT-FAST-RECS" data-references="CDR,DEF-PATTERN-MATCH-CONSTRUCTOR,EQ,MBE,XARGS,DECLARE,X,QUASIQUOTE,APPEND,FAST,QUOTE,LIST,APPSYMS,PRFAST,PRODUCT-RECOGNIZER,PREC,PRODUCT-NAME,PNAME,CAR,PRODUCT,LET*,ATOM,IF,SUMREC,PRODUCTS,DEFUN" data-used-by="PRODUCT-FAST-RECS-SUMS" data-part-name="PRODUCT-FAST-RECS" data-part-args="SUMREC,PRODUCTS" data-part-body="SUMREC,CDR,PRODUCT-FAST-RECS,DEF-PATTERN-MATCH-CONSTRUCTOR,EQ,MBE,XARGS,DECLARE,X,DEFUN,QUASIQUOTE,APPEND,FAST,QUOTE,LIST,APPSYMS,PRFAST,PRODUCT-RECOGNIZER,PREC,PRODUCT-NAME,PNAME,CAR,PRODUCT,LET*,PRODUCTS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-FAST-RECS">product-fast-recs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-fast-recs" data-sym="PRODUCT-FAST-RECS" title="(defun product-fast-recs (products sumrec)
  (if (atom products)
      nil
      (let* ((product (car products))
             (pname (product-name product))
...">product-fast-recs</a>
  (products sumrec)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> products)
    nil
    (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((product (car products)) (pname (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product))
        (prec (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product))
        (prfast (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> prec 'fast))))
      (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> `((<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,PRFAST
           (x)
           (declare (xargs <span class="keyword">:guard</span> (,SUMREC x)))
           (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) ',PNAME) <span class="keyword">:logic</span> (,PREC x))) (<a class="sym-link external" href="pattern-match.html#def-def-pattern-match-constructor" data-sym="DEF-PATTERN-MATCH-CONSTRUCTOR">def-pattern-match-constructor</a> ,PNAME
            ,PRFAST
            ,(PRODUCT-ACCESSOR-LIST PRODUCT)))
        (<a class="sym-link local-def" href="#def-product-fast-recs" data-sym="PRODUCT-FAST-RECS" title="(defun product-fast-recs (products sumrec)
  (if (atom products)
      nil
      (let* ((product (car products))
             (pname (product-name product))
...">product-fast-recs</a> (cdr products) sumrec)))))</pre>
  </div>

<div class="form-block function" id="def-product-fast-recs-sums" data-defines="PRODUCT-FAST-RECS-SUMS" data-references="CDR,SUM-RECOGNIZER,CAR,SUM-PRODUCTS,PRODUCT-FAST-RECS,APPEND,ATOM,IF,SUMS,DEFUN" data-part-name="PRODUCT-FAST-RECS-SUMS" data-part-args="SUMS" data-part-body="CDR,PRODUCT-FAST-RECS-SUMS,SUM-RECOGNIZER,CAR,SUM-PRODUCTS,PRODUCT-FAST-RECS,APPEND,SUMS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-FAST-RECS-SUMS">product-fast-recs-sums</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-fast-recs-sums" data-sym="PRODUCT-FAST-RECS-SUMS" title="(defun product-fast-recs-sums (sums)
  (if (atom sums)
      nil
      (append
       (product-fast-recs (sum-products (car sums))
...">product-fast-recs-sums</a>
  (sums)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> sums)
    nil
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-product-fast-recs" data-sym="PRODUCT-FAST-RECS" title="(defun product-fast-recs (products sumrec)
  (if (atom products)
      nil
      (let* ((product (car products))
             (pname (product-name product))
...">product-fast-recs</a> (<a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> (car sums))
        (<a class="sym-link local-def" href="#def-sum-recognizer" data-sym="SUM-RECOGNIZER" title="(defun sum-recognizer (sum) (appsyms (list (sum-name sum) &#39;p)))">sum-recognizer</a> (car sums)))
      (<a class="sym-link local-def" href="#def-product-fast-recs-sums" data-sym="PRODUCT-FAST-RECS-SUMS" title="(defun product-fast-recs-sums (sums)
  (if (atom sums)
      nil
      (append
       (product-fast-recs (sum-products (car sums))
...">product-fast-recs-sums</a> (cdr sums)))))</pre>
  </div>

<div class="form-block function" id="def-accessor-type-checklist1" data-defines="ACCESSOR-TYPE-CHECKLIST1" data-references="CDR,X,QUASIQUOTE,CONS,ACCESSOR-NAME,ACC,PRODUCT-NAME,PRODNAME,CAR,COMPONENT-TYPE,CTYPE,LET,CONSP,IF,COMPONENTS,PRODUCT,DEFUN" data-used-by="NEGATED-ACCESSOR-TYPE-LIST,ACCESSOR-TYPE-CHECKLIST" data-part-name="ACCESSOR-TYPE-CHECKLIST1" data-part-args="COMPONENTS,PRODUCT" data-part-body="CDR,ACCESSOR-TYPE-CHECKLIST1,X,QUASIQUOTE,CONS,ACCESSOR-NAME,ACC,PRODUCT,PRODUCT-NAME,PRODNAME,CAR,COMPONENT-TYPE,CTYPE,LET,COMPONENTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-TYPE-CHECKLIST1">accessor-type-checklist1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-type-checklist1" data-sym="ACCESSOR-TYPE-CHECKLIST1" title="(defun accessor-type-checklist1 (product components)
  (if (consp components)
      (let ((ctype (component-type (car components)))
            (prodname (product-name product))
            (acc (accessor-name product (car components))))
...">accessor-type-checklist1</a>
  (product components)
  (if (consp components)
    (let ((ctype (<a class="sym-link external" href="types-misc.html#def-component-type" data-sym="COMPONENT-TYPE">component-type</a> (car components))) (prodname (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product))
        (acc (<a class="sym-link external" href="types-misc.html#def-accessor-name" data-sym="ACCESSOR-NAME">accessor-name</a> product (car components))))
      (if ctype
        (cons `(,CTYPE (,ACC x))
          (<a class="sym-link local-def" href="#def-accessor-type-checklist1" data-sym="ACCESSOR-TYPE-CHECKLIST1" title="(defun accessor-type-checklist1 (product components)
  (if (consp components)
      (let ((ctype (component-type (car components)))
            (prodname (product-name product))
            (acc (accessor-name product (car components))))
...">accessor-type-checklist1</a> product (cdr components)))
        (<a class="sym-link local-def" href="#def-accessor-type-checklist1" data-sym="ACCESSOR-TYPE-CHECKLIST1" title="(defun accessor-type-checklist1 (product components)
  (if (consp components)
      (let ((ctype (component-type (car components)))
            (prodname (product-name product))
            (acc (accessor-name product (car components))))
...">accessor-type-checklist1</a> product (cdr components))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-accessor-type-checklist" data-defines="ACCESSOR-TYPE-CHECKLIST" data-references="T,CAR,AND,QUASIQUOTE,CDR,CONSP,IF,PRODUCT-COMPONENTS,ACCESSOR-TYPE-CHECKLIST1,CHECKLIST,LET,PRODUCT,DEFUN" data-used-by="ACCESSOR-TYPE-THM" data-part-name="ACCESSOR-TYPE-CHECKLIST" data-part-args="PRODUCT" data-part-body="T,CAR,AND,QUASIQUOTE,CDR,CONSP,IF,PRODUCT-COMPONENTS,PRODUCT,ACCESSOR-TYPE-CHECKLIST1,CHECKLIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-TYPE-CHECKLIST">accessor-type-checklist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-type-checklist" data-sym="ACCESSOR-TYPE-CHECKLIST" title="(defun accessor-type-checklist (product)
  (let ((checklist
         (accessor-type-checklist1 product (product-components product))))
    (if (consp checklist)
        (if (consp (cdr checklist))
...">accessor-type-checklist</a>
  (product)
  (let ((checklist (<a class="sym-link local-def" href="#def-accessor-type-checklist1" data-sym="ACCESSOR-TYPE-CHECKLIST1" title="(defun accessor-type-checklist1 (product components)
  (if (consp components)
      (let ((ctype (component-type (car components)))
            (prodname (product-name product))
            (acc (accessor-name product (car components))))
...">accessor-type-checklist1</a> product
         (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product))))
    (if (consp checklist)
      (if (consp (cdr checklist))
        `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> ,@CHECKLIST)
        (car checklist))
      <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block function" id="def-strip-product-recognizers" data-defines="STRIP-PRODUCT-RECOGNIZERS" data-references="CDR,CAR,PRODUCT-RECOGNIZER,CONS,ATOM,IF,PRODUCTS,DEFUN" data-used-by="ACCESSOR-TYPE-THM" data-part-name="STRIP-PRODUCT-RECOGNIZERS" data-part-args="PRODUCTS" data-part-body="CDR,STRIP-PRODUCT-RECOGNIZERS,CAR,PRODUCT-RECOGNIZER,CONS,PRODUCTS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="STRIP-PRODUCT-RECOGNIZERS">strip-product-recognizers</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-strip-product-recognizers" data-sym="STRIP-PRODUCT-RECOGNIZERS" title="(defun strip-product-recognizers (products)
  (if (atom products)
      nil
      (cons (product-recognizer (car products))
            (strip-product-recognizers (cdr products)))))">strip-product-recognizers</a>
  (products)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> products)
    nil
    (cons (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> (car products))
      (<a class="sym-link local-def" href="#def-strip-product-recognizers" data-sym="STRIP-PRODUCT-RECOGNIZERS" title="(defun strip-product-recognizers (products)
  (if (atom products)
      nil
      (cons (product-recognizer (car products))
            (strip-product-recognizers (cdr products)))))">strip-product-recognizers</a> (cdr products)))))</pre>
  </div>

<div class="form-block function" id="def-accessor-type-thm" data-defines="ACCESSOR-TYPE-THM" data-references="DISABLE,X,AND,IMPLIES,DEFTHM,QUASIQUOTE,T,EQ,IF,PRODUCT-RECOGNIZER,PRECOG,SUM-PRODUCTS,STRIP-PRODUCT-RECOGNIZERS,RECOGS,SUM-NAME,SUMNAME,SUM-RECOGNIZER,SRECOG,PRODUCT-NAME,PRODNAME,ACCESSOR-TYPE-CHECKLIST,CHECKLIST,LET,PRODUCT,SUM,DEFUN" data-used-by="ACCESSOR-TYPE-THMS" data-part-name="ACCESSOR-TYPE-THM" data-part-args="PRODUCT,SUM" data-part-body="DISABLE,X,AND,IMPLIES,DEFTHM,QUASIQUOTE,T,EQ,IF,PRODUCT-RECOGNIZER,PRECOG,SUM-PRODUCTS,STRIP-PRODUCT-RECOGNIZERS,RECOGS,SUM-NAME,SUMNAME,SUM,SUM-RECOGNIZER,SRECOG,PRODUCT-NAME,PRODNAME,PRODUCT,ACCESSOR-TYPE-CHECKLIST,CHECKLIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-TYPE-THM">accessor-type-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-type-thm" data-sym="ACCESSOR-TYPE-THM" title="(defun accessor-type-thm (sum product)
  (let ((checklist (accessor-type-checklist product))
        (prodname (product-name product))
        (srecog (sum-recognizer sum))
        (sumname (sum-name sum))
...">accessor-type-thm</a>
  (sum product)
  (let ((checklist (<a class="sym-link local-def" href="#def-accessor-type-checklist" data-sym="ACCESSOR-TYPE-CHECKLIST" title="(defun accessor-type-checklist (product)
  (let ((checklist
         (accessor-type-checklist1 product (product-components product))))
    (if (consp checklist)
        (if (consp (cdr checklist))
...">accessor-type-checklist</a> product)) (prodname (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product))
      (srecog (<a class="sym-link local-def" href="#def-sum-recognizer" data-sym="SUM-RECOGNIZER" title="(defun sum-recognizer (sum) (appsyms (list (sum-name sum) &#39;p)))">sum-recognizer</a> sum))
      (sumname (<a class="sym-link local-def" href="#def-sum-name" data-sym="SUM-NAME" title="(defun sum-name (sum) (car sum))">sum-name</a> sum))
      (recogs (<a class="sym-link local-def" href="#def-strip-product-recognizers" data-sym="STRIP-PRODUCT-RECOGNIZERS" title="(defun strip-product-recognizers (products)
  (if (atom products)
      nil
      (cons (product-recognizer (car products))
            (strip-product-recognizers (cdr products)))))">strip-product-recognizers</a> (<a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> sum)))
      (precog (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product)))
    (if (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> checklist <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
      nil
      `((<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST SUMNAME PRODNAME &#39;ACCESSOR-TYPES))
         (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (,SRECOG x) (,PRECOG x)) ,CHECKLIST)
         <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable ,@RECOGS
              ,PRODNAME
              ,@(PRODUCT-ACCESSOR-LIST PRODUCT))
            <span class="keyword">:expand</span> ((,SRECOG x)))))))))</pre>
  </div>

<div class="form-block function" id="def-accessor-type-thms" data-defines="ACCESSOR-TYPE-THMS" data-references="CDR,CAR,ACCESSOR-TYPE-THM,APPEND,CONSP,IF,PRODUCTS,SUM,DEFUN" data-used-by="ALL-ACCESSOR-TYPE-THMS" data-part-name="ACCESSOR-TYPE-THMS" data-part-args="PRODUCTS,SUM" data-part-body="CDR,ACCESSOR-TYPE-THMS,CAR,SUM,ACCESSOR-TYPE-THM,APPEND,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACCESSOR-TYPE-THMS">accessor-type-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-accessor-type-thms" data-sym="ACCESSOR-TYPE-THMS" title="(defun accessor-type-thms (sum products)
  (if (consp products)
      (append (accessor-type-thm sum (car products))
              (accessor-type-thms sum (cdr products)))
      nil))">accessor-type-thms</a>
  (sum products)
  (if (consp products)
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-accessor-type-thm" data-sym="ACCESSOR-TYPE-THM" title="(defun accessor-type-thm (sum product)
  (let ((checklist (accessor-type-checklist product))
        (prodname (product-name product))
        (srecog (sum-recognizer sum))
        (sumname (sum-name sum))
...">accessor-type-thm</a> sum (car products))
      (<a class="sym-link local-def" href="#def-accessor-type-thms" data-sym="ACCESSOR-TYPE-THMS" title="(defun accessor-type-thms (sum products)
  (if (consp products)
      (append (accessor-type-thm sum (car products))
              (accessor-type-thms sum (cdr products)))
      nil))">accessor-type-thms</a> sum (cdr products)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-all-accessor-type-thms" data-defines="ALL-ACCESSOR-TYPE-THMS" data-references="CDR,SUM-PRODUCTS,CAR,ACCESSOR-TYPE-THMS,APPEND,CONSP,IF,SUMS,DEFUN" data-part-name="ALL-ACCESSOR-TYPE-THMS" data-part-args="SUMS" data-part-body="CDR,ALL-ACCESSOR-TYPE-THMS,SUM-PRODUCTS,CAR,ACCESSOR-TYPE-THMS,APPEND,SUMS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ALL-ACCESSOR-TYPE-THMS">all-accessor-type-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-all-accessor-type-thms" data-sym="ALL-ACCESSOR-TYPE-THMS" title="(defun all-accessor-type-thms (sums)
  (if (consp sums)
      (append (accessor-type-thms (car sums) (sum-products (car sums)))
              (all-accessor-type-thms (cdr sums)))
      nil))">all-accessor-type-thms</a>
  (sums)
  (if (consp sums)
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-accessor-type-thms" data-sym="ACCESSOR-TYPE-THMS" title="(defun accessor-type-thms (sum products)
  (if (consp products)
      (append (accessor-type-thm sum (car products))
              (accessor-type-thms sum (cdr products)))
      nil))">accessor-type-thms</a> (car sums) (<a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> (car sums)))
      (<a class="sym-link local-def" href="#def-all-accessor-type-thms" data-sym="ALL-ACCESSOR-TYPE-THMS" title="(defun all-accessor-type-thms (sums)
  (if (consp sums)
      (append (accessor-type-thms (car sums) (sum-products (car sums)))
              (all-accessor-type-thms (cdr sums)))
      nil))">all-accessor-type-thms</a> (cdr sums)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-negated-list" data-defines="NEGATED-LIST" data-references="CDR,CAR,NOT,QUOTE,CONS,ATOM,IF,LIST,DEFUN" data-used-by="NEGATED-ACCESSOR-TYPE-LIST" data-part-name="NEGATED-LIST" data-part-args="LIST" data-part-body="CDR,NEGATED-LIST,CAR,NOT,QUOTE,CONS,LIST,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEGATED-LIST">negated-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-negated-list" data-sym="NEGATED-LIST" title="(defun negated-list (list)
  (if (atom list)
      nil
      (cons (list &#39;not (car list)) (negated-list (cdr list)))))">negated-list</a>
  (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> <a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>)
    nil
    (cons (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (car <a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>)) (<a class="sym-link local-def" href="#def-negated-list" data-sym="NEGATED-LIST" title="(defun negated-list (list)
  (if (atom list)
      nil
      (cons (list &#39;not (car list)) (negated-list (cdr list)))))">negated-list</a> (cdr <a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>)))))</pre>
  </div>

<div class="form-block function" id="def-negated-accessor-type-list" data-defines="NEGATED-ACCESSOR-TYPE-LIST" data-references="OR,QUASIQUOTE,CAR,CDR,ATOM,IF,PRODUCT-COMPONENTS,ACCESSOR-TYPE-CHECKLIST1,NEGATED-LIST,NLIST,LET,PRODUCT,DEFUN" data-used-by="BAD-TYPING-THM" data-part-name="NEGATED-ACCESSOR-TYPE-LIST" data-part-args="PRODUCT" data-part-body="OR,QUASIQUOTE,CAR,CDR,ATOM,IF,PRODUCT-COMPONENTS,PRODUCT,ACCESSOR-TYPE-CHECKLIST1,NEGATED-LIST,NLIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEGATED-ACCESSOR-TYPE-LIST">negated-accessor-type-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-negated-accessor-type-list" data-sym="NEGATED-ACCESSOR-TYPE-LIST" title="(defun negated-accessor-type-list (product)
  (let ((nlist
         (negated-list
          (accessor-type-checklist1 product (product-components product)))))
    (if (atom nlist)
...">negated-accessor-type-list</a>
  (product)
  (let ((nlist (<a class="sym-link local-def" href="#def-negated-list" data-sym="NEGATED-LIST" title="(defun negated-list (list)
  (if (atom list)
      nil
      (cons (list &#39;not (car list)) (negated-list (cdr list)))))">negated-list</a> (<a class="sym-link local-def" href="#def-accessor-type-checklist1" data-sym="ACCESSOR-TYPE-CHECKLIST1" title="(defun accessor-type-checklist1 (product components)
  (if (consp components)
      (let ((ctype (component-type (car components)))
            (prodname (product-name product))
            (acc (accessor-name product (car components))))
...">accessor-type-checklist1</a> product
           (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product)))))
    (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> nlist)
      nil
      (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> (cdr nlist))
        (car nlist)
        `(<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> ,@NLIST)))))</pre>
  </div>

<div class="form-block function" id="def-bad-typing-thm" data-defines="BAD-TYPING-THM" data-references="DISABLE,NOT,X,AND,IMPLIES,DEFTHM,QUASIQUOTE,IF,PRODUCT-NAME,PNAME,SUM-NAME,SUMNAME,PRODUCT-RECOGNIZER,PRECOG,SUM-RECOGNIZER,SRECOG,NEGATED-ACCESSOR-TYPE-LIST,BADTYPES,LET,PRODUCT,SUM,DEFUN" data-used-by="SUM-BAD-TYPING-THMS" data-part-name="BAD-TYPING-THM" data-part-args="PRODUCT,SUM" data-part-body="DISABLE,NOT,X,AND,IMPLIES,DEFTHM,QUASIQUOTE,IF,PRODUCT-NAME,PNAME,SUM-NAME,SUMNAME,PRODUCT-RECOGNIZER,PRECOG,SUM,SUM-RECOGNIZER,SRECOG,PRODUCT,NEGATED-ACCESSOR-TYPE-LIST,BADTYPES,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BAD-TYPING-THM">bad-typing-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-bad-typing-thm" data-sym="BAD-TYPING-THM" title="(defun bad-typing-thm (sum product)
  (let ((badtypes (negated-accessor-type-list product))
        (srecog (sum-recognizer sum))
        (precog (product-recognizer product))
        (sumname (sum-name sum))
...">bad-typing-thm</a>
  (sum product)
  (let ((badtypes (<a class="sym-link local-def" href="#def-negated-accessor-type-list" data-sym="NEGATED-ACCESSOR-TYPE-LIST" title="(defun negated-accessor-type-list (product)
  (let ((nlist
         (negated-list
          (accessor-type-checklist1 product (product-components product)))))
    (if (atom nlist)
...">negated-accessor-type-list</a> product)) (srecog (<a class="sym-link local-def" href="#def-sum-recognizer" data-sym="SUM-RECOGNIZER" title="(defun sum-recognizer (sum) (appsyms (list (sum-name sum) &#39;p)))">sum-recognizer</a> sum))
      (precog (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product))
      (sumname (<a class="sym-link local-def" href="#def-sum-name" data-sym="SUM-NAME" title="(defun sum-name (sum) (car sum))">sum-name</a> sum))
      (pname (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product)))
    (if badtypes
      `((<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST PNAME &#39;NOT SUMNAME))
         (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (,PRECOG x) ,BADTYPES) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (,SRECOG x)))
         <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable ,PRECOG ,@(PRODUCT-ACCESSOR-LIST PRODUCT))))))
      nil)))</pre>
  </div>

<div class="form-block function" id="def-sum-bad-typing-thms" data-defines="SUM-BAD-TYPING-THMS" data-references="CDR,CAR,BAD-TYPING-THM,APPEND,CONSP,IF,PRODUCTS,SUM,DEFUN" data-used-by="ALL-BAD-TYPING-THMS" data-part-name="SUM-BAD-TYPING-THMS" data-part-args="PRODUCTS,SUM" data-part-body="CDR,SUM-BAD-TYPING-THMS,CAR,SUM,BAD-TYPING-THM,APPEND,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-BAD-TYPING-THMS">sum-bad-typing-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-bad-typing-thms" data-sym="SUM-BAD-TYPING-THMS" title="(defun sum-bad-typing-thms (sum products)
  (if (consp products)
      (append (bad-typing-thm sum (car products))
              (sum-bad-typing-thms sum (cdr products)))
      nil))">sum-bad-typing-thms</a>
  (sum products)
  (if (consp products)
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-bad-typing-thm" data-sym="BAD-TYPING-THM" title="(defun bad-typing-thm (sum product)
  (let ((badtypes (negated-accessor-type-list product))
        (srecog (sum-recognizer sum))
        (precog (product-recognizer product))
        (sumname (sum-name sum))
...">bad-typing-thm</a> sum (car products))
      (<a class="sym-link local-def" href="#def-sum-bad-typing-thms" data-sym="SUM-BAD-TYPING-THMS" title="(defun sum-bad-typing-thms (sum products)
  (if (consp products)
      (append (bad-typing-thm sum (car products))
              (sum-bad-typing-thms sum (cdr products)))
      nil))">sum-bad-typing-thms</a> sum (cdr products)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-all-bad-typing-thms" data-defines="ALL-BAD-TYPING-THMS" data-references="CDR,SUM-PRODUCTS,CAR,SUM-BAD-TYPING-THMS,APPEND,CONSP,IF,SUMS,DEFUN" data-part-name="ALL-BAD-TYPING-THMS" data-part-args="SUMS" data-part-body="CDR,ALL-BAD-TYPING-THMS,SUM-PRODUCTS,CAR,SUM-BAD-TYPING-THMS,APPEND,SUMS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ALL-BAD-TYPING-THMS">all-bad-typing-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-all-bad-typing-thms" data-sym="ALL-BAD-TYPING-THMS" title="(defun all-bad-typing-thms (sums)
  (if (consp sums)
      (append (sum-bad-typing-thms (car sums) (sum-products (car sums)))
              (all-bad-typing-thms (cdr sums)))
      nil))">all-bad-typing-thms</a>
  (sums)
  (if (consp sums)
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-sum-bad-typing-thms" data-sym="SUM-BAD-TYPING-THMS" title="(defun sum-bad-typing-thms (sum products)
  (if (consp products)
      (append (bad-typing-thm sum (car products))
              (sum-bad-typing-thms sum (cdr products)))
      nil))">sum-bad-typing-thms</a> (car sums) (<a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> (car sums)))
      (<a class="sym-link local-def" href="#def-all-bad-typing-thms" data-sym="ALL-BAD-TYPING-THMS" title="(defun all-bad-typing-thms (sums)
  (if (consp sums)
      (append (sum-bad-typing-thms (car sums) (sum-products (car sums)))
              (all-bad-typing-thms (cdr sums)))
      nil))">all-bad-typing-thms</a> (cdr sums)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-sum-recognizer-constructor-thm" data-defines="SUM-RECOGNIZER-CONSTRUCTOR-THM" data-references="DISABLE,DEFTHM,QUASIQUOTE,PRODUCT-COMPONENTS,TYPE-CHECKLIST,SUM-RECOGNIZER,RECOGNIZER,CONSTRUCTOR-CALL,CONSTR-CALL,PRODUCT-RECOGNIZER,PRECOG,PRODUCT-NAME,CONSTRUCTOR,LET,PRODUCT,SUM,DEFUN" data-part-name="SUM-RECOGNIZER-CONSTRUCTOR-THM" data-part-args="PRODUCT,SUM" data-part-body="DISABLE,DEFTHM,QUASIQUOTE,PRODUCT-COMPONENTS,TYPE-CHECKLIST,SUM,SUM-RECOGNIZER,RECOGNIZER,CONSTRUCTOR-CALL,CONSTR-CALL,PRODUCT-RECOGNIZER,PRECOG,PRODUCT,PRODUCT-NAME,CONSTRUCTOR,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-RECOGNIZER-CONSTRUCTOR-THM">sum-recognizer-constructor-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-recognizer-constructor-thm" data-sym="SUM-RECOGNIZER-CONSTRUCTOR-THM" title="(defun sum-recognizer-constructor-thm (sum product)
  (let ((constructor (product-name product))
        (precog (product-recognizer product))
        (constr-call (constructor-call product))
        (recognizer (sum-recognizer sum))
...">sum-recognizer-constructor-thm</a>
  (sum product)
  (let ((constructor (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product)) (precog (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product))
      (constr-call (<a class="sym-link local-def" href="#def-constructor-call" data-sym="CONSTRUCTOR-CALL" title="(defun constructor-call (product)
  (cons (product-name product) (components-names (product-components product))))">constructor-call</a> product))
      (recognizer (<a class="sym-link local-def" href="#def-sum-recognizer" data-sym="SUM-RECOGNIZER" title="(defun sum-recognizer (sum) (appsyms (list (sum-name sum) &#39;p)))">sum-recognizer</a> sum))
      (<a class="sym-link local-def" href="#def-type-checklist" data-sym="TYPE-CHECKLIST" title="(defun type-checklist (components)
  (let ((checklist (type-checklist1 components)))
    (if checklist
        (if (consp (cdr checklist))
            `(and ,@checklist)
...">type-checklist</a> (<a class="sym-link local-def" href="#def-type-checklist" data-sym="TYPE-CHECKLIST" title="(defun type-checklist (components)
  (let ((checklist (type-checklist1 components)))
    (if checklist
        (if (consp (cdr checklist))
            `(and ,@checklist)
...">type-checklist</a> (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> product))))
    `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST RECOGNIZER CONSTRUCTOR))
      ,(IF (EQ T TYPE-CHECKLIST)
     `(,RECOGNIZER ,CONSTR-CALL)
     `(IFF (,RECOGNIZER ,CONSTR-CALL) ,TYPE-CHECKLIST))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable ,PRECOG
           ,CONSTRUCTOR
           ,@(PRODUCT-ACCESSOR-LIST PRODUCT)))))))</pre>
  </div>

<div class="form-block function" id="def-sum-recognizer-constructor-thms" data-defines="SUM-RECOGNIZER-CONSTRUCTOR-THMS" data-references="QUASIQUOTE,CONSP,IF,PRODUCTS,SUM,DEFUN" data-used-by="ALL-POST-CONSTRUCTOR-THMS" data-part-name="SUM-RECOGNIZER-CONSTRUCTOR-THMS" data-part-args="PRODUCTS,SUM" data-part-body="QUASIQUOTE,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-RECOGNIZER-CONSTRUCTOR-THMS">sum-recognizer-constructor-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-recognizer-constructor-thms" data-sym="SUM-RECOGNIZER-CONSTRUCTOR-THMS" title="(defun sum-recognizer-constructor-thms (sum products)
  (if (consp products)
      `(,(sum-recognizer-constructor-thm sum (car products))
        ,@(sum-recognizer-constructor-thms sum (cdr products)))
      nil))">sum-recognizer-constructor-thms</a>
  (sum products)
  (if (consp products)
    `(,(SUM-RECOGNIZER-CONSTRUCTOR-THM SUM (CAR PRODUCTS)) ,@(SUM-RECOGNIZER-CONSTRUCTOR-THMS SUM (CDR PRODUCTS)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-all-post-constructor-thms" data-defines="ALL-POST-CONSTRUCTOR-THMS" data-references="CDR,SUM-PRODUCTS,CAR,SUM-RECOGNIZER-CONSTRUCTOR-THMS,APPEND,CONSP,IF,SUMS,DEFUN" data-part-name="ALL-POST-CONSTRUCTOR-THMS" data-part-args="SUMS" data-part-body="CDR,ALL-POST-CONSTRUCTOR-THMS,SUM-PRODUCTS,CAR,SUM-RECOGNIZER-CONSTRUCTOR-THMS,APPEND,SUMS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ALL-POST-CONSTRUCTOR-THMS">all-post-constructor-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-all-post-constructor-thms" data-sym="ALL-POST-CONSTRUCTOR-THMS" title="(defun all-post-constructor-thms (sums)
  (if (consp sums)
      (append
       (sum-recognizer-constructor-thms (car sums) (sum-products (car sums)))
       (all-post-constructor-thms (cdr sums)))">all-post-constructor-thms</a>
  (sums)
  (if (consp sums)
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-sum-recognizer-constructor-thms" data-sym="SUM-RECOGNIZER-CONSTRUCTOR-THMS" title="(defun sum-recognizer-constructor-thms (sum products)
  (if (consp products)
      `(,(sum-recognizer-constructor-thm sum (car products))
        ,@(sum-recognizer-constructor-thms sum (cdr products)))
      nil))">sum-recognizer-constructor-thms</a> (car sums)
        (<a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> (car sums)))
      (<a class="sym-link local-def" href="#def-all-post-constructor-thms" data-sym="ALL-POST-CONSTRUCTOR-THMS" title="(defun all-post-constructor-thms (sums)
  (if (consp sums)
      (append
       (sum-recognizer-constructor-thms (car sums) (sum-products (car sums)))
       (all-post-constructor-thms (cdr sums)))">all-post-constructor-thms</a> (cdr sums)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-recognizer-negate-list" data-defines="RECOGNIZER-NEGATE-LIST" data-references="CDR,NOT,QUASIQUOTE,CONS,CONSP,IF,ARG,PRODUCTS,DEFUN" data-used-by="EXCLUSION-THM" data-part-name="RECOGNIZER-NEGATE-LIST" data-part-args="ARG,PRODUCTS" data-part-body="ARG,CDR,RECOGNIZER-NEGATE-LIST,NOT,QUASIQUOTE,CONS,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RECOGNIZER-NEGATE-LIST">recognizer-negate-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-recognizer-negate-list" data-sym="RECOGNIZER-NEGATE-LIST" title="(defun recognizer-negate-list (products arg)
  (if (consp products)
      (cons `(not (,(product-recognizer (car products)) ,arg))
            (recognizer-negate-list (cdr products) arg))
      nil))">recognizer-negate-list</a>
  (products arg)
  (if (consp products)
    (cons `(<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (,(PRODUCT-RECOGNIZER (CAR PRODUCTS)) ,ARG))
      (<a class="sym-link local-def" href="#def-recognizer-negate-list" data-sym="RECOGNIZER-NEGATE-LIST" title="(defun recognizer-negate-list (products arg)
  (if (consp products)
      (cons `(not (,(product-recognizer (car products)) ,arg))
            (recognizer-negate-list (cdr products) arg))
      nil))">recognizer-negate-list</a> (cdr products) arg))
    nil))</pre>
  </div>

<div class="form-block function" id="def-not-equal-constructor-list" data-defines="NOT-EQUAL-CONSTRUCTOR-LIST" data-references="CDR,EQUAL,NOT,QUASIQUOTE,CONS,CONSP,IF,PRODUCTS,TERM,DEFUN" data-used-by="EXCLUSION-THM" data-part-name="NOT-EQUAL-CONSTRUCTOR-LIST" data-part-args="PRODUCTS,TERM" data-part-body="CDR,TERM,NOT-EQUAL-CONSTRUCTOR-LIST,EQUAL,NOT,QUASIQUOTE,CONS,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NOT-EQUAL-CONSTRUCTOR-LIST">not-equal-constructor-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-not-equal-constructor-list" data-sym="NOT-EQUAL-CONSTRUCTOR-LIST" title="(defun not-equal-constructor-list (term products)
  (if (consp products)
      (cons `(not (equal ,term ,(constructor-call (car products))))
            (not-equal-constructor-list term (cdr products)))
      nil))">not-equal-constructor-list</a>
  (term products)
  (if (consp products)
    (cons `(<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal ,TERM ,(CONSTRUCTOR-CALL (CAR PRODUCTS))))
      (<a class="sym-link local-def" href="#def-not-equal-constructor-list" data-sym="NOT-EQUAL-CONSTRUCTOR-LIST" title="(defun not-equal-constructor-list (term products)
  (if (consp products)
      (cons `(not (equal ,term ,(constructor-call (car products))))
            (not-equal-constructor-list term (cdr products)))
      nil))">not-equal-constructor-list</a> term (cdr products)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-exclusion-thm" data-defines="EXCLUSION-THM" data-references="IMPLIES,LEN,TRUE-LISTP,DISABLE,DEFTHM,QUASIQUOTE,IF,PRODUCT-RECOGNIZER,RECOGNIZER,PRODUCT-NAME,NAME,X,QUOTE,NOT-RECS,NOT-EQUAL-CONSTRUCTOR-LIST,NOT-EQUAL,CONSTRUCTOR-CALL,RECOGNIZER-NEGATE-LIST,NOT-PROD,REMOVE-EQUAL,REST,LET*,ALL-PRODUCTS,PRODUCT,DEFUN" data-used-by="EXCLUSION-THMS" data-part-name="EXCLUSION-THM" data-part-args="ALL-PRODUCTS,PRODUCT" data-part-body="IMPLIES,LEN,TRUE-LISTP,DISABLE,DEFTHM,QUASIQUOTE,IF,PRODUCT-RECOGNIZER,RECOGNIZER,PRODUCT-NAME,NAME,X,QUOTE,NOT-RECS,NOT-EQUAL-CONSTRUCTOR-LIST,NOT-EQUAL,CONSTRUCTOR-CALL,RECOGNIZER-NEGATE-LIST,NOT-PROD,ALL-PRODUCTS,PRODUCT,REMOVE-EQUAL,REST,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXCLUSION-THM">exclusion-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-exclusion-thm" data-sym="EXCLUSION-THM" title="(defun exclusion-thm (product all-products)
  (let* ((rest (remove-equal product all-products))
         (not-prod (recognizer-negate-list rest (constructor-call product)))
         (not-equal
          (not-equal-constructor-list (constructor-call product) rest))
...">exclusion-thm</a>
  (product all-products)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link system" href="../../axioms.html#def-remove-equal" data-sym="REMOVE-EQUAL">remove-equal</a> product all-products)) (not-prod (<a class="sym-link local-def" href="#def-recognizer-negate-list" data-sym="RECOGNIZER-NEGATE-LIST" title="(defun recognizer-negate-list (products arg)
  (if (consp products)
      (cons `(not (,(product-recognizer (car products)) ,arg))
            (recognizer-negate-list (cdr products) arg))
      nil))">recognizer-negate-list</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link local-def" href="#def-constructor-call" data-sym="CONSTRUCTOR-CALL" title="(defun constructor-call (product)
  (cons (product-name product) (components-names (product-components product))))">constructor-call</a> product)))
      (not-equal (<a class="sym-link local-def" href="#def-not-equal-constructor-list" data-sym="NOT-EQUAL-CONSTRUCTOR-LIST" title="(defun not-equal-constructor-list (term products)
  (if (consp products)
      (cons `(not (equal ,term ,(constructor-call (car products))))
            (not-equal-constructor-list term (cdr products)))
      nil))">not-equal-constructor-list</a> (<a class="sym-link local-def" href="#def-constructor-call" data-sym="CONSTRUCTOR-CALL" title="(defun constructor-call (product)
  (cons (product-name product) (components-names (product-components product))))">constructor-call</a> product) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>))
      (not-recs (<a class="sym-link local-def" href="#def-recognizer-negate-list" data-sym="RECOGNIZER-NEGATE-LIST" title="(defun recognizer-negate-list (products arg)
  (if (consp products)
      (cons `(not (,(product-recognizer (car products)) ,arg))
            (recognizer-negate-list (cdr products) arg))
      nil))">recognizer-negate-list</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a> 'x))
      (name (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> product))
      (recognizer (<a class="sym-link local-def" href="#def-product-recognizer" data-sym="PRODUCT-RECOGNIZER" title="(defun product-recognizer (product)
  (or (kwassoc :recognizer nil (product-kwalist product))
      (sym-recognizer (product-name product))))">product-recognizer</a> product)))
    (if not-prod
      `((<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST NAME &#39;NOT-OTHERS))
         ,(IF (= (LEN NOT-PROD) 1)
     (CAR NOT-PROD)
     `(AND ,@NOT-PROD))
         <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a>)))) (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST NAME &#39;NOT-OTHER-CONSTRUCTORS))
          ,(IF (= (LEN NOT-EQUAL) 1)
     (CAR NOT-EQUAL)
     `(AND ,@NOT-EQUAL)))
        (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST RECOGNIZER &#39;NOT-OTHERS))
          (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,RECOGNIZER x)
            ,(IF (= (LEN NOT-RECS) 1)
     (CAR NOT-RECS)
     `(AND ,@NOT-RECS)))
          <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a>)))
          <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>))
      nil)))</pre>
  </div>

<div class="form-block function" id="def-exclusion-thms" data-defines="EXCLUSION-THMS" data-references="CDR,CAR,EXCLUSION-THM,APPEND,CONSP,IF,ALL-PRODUCTS,PRODUCTS,DEFUN" data-part-name="EXCLUSION-THMS" data-part-args="ALL-PRODUCTS,PRODUCTS" data-part-body="CDR,EXCLUSION-THMS,ALL-PRODUCTS,CAR,EXCLUSION-THM,APPEND,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXCLUSION-THMS">exclusion-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-exclusion-thms" data-sym="EXCLUSION-THMS" title="(defun exclusion-thms (products all-products)
  (if (consp products)
      (append (exclusion-thm (car products) all-products)
              (exclusion-thms (cdr products) all-products))
      nil))">exclusion-thms</a>
  (products all-products)
  (if (consp products)
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-exclusion-thm" data-sym="EXCLUSION-THM" title="(defun exclusion-thm (product all-products)
  (let* ((rest (remove-equal product all-products))
         (not-prod (recognizer-negate-list rest (constructor-call product)))
         (not-equal
          (not-equal-constructor-list (constructor-call product) rest))
...">exclusion-thm</a> (car products) all-products)
      (<a class="sym-link local-def" href="#def-exclusion-thms" data-sym="EXCLUSION-THMS" title="(defun exclusion-thms (products all-products)
  (if (consp products)
      (append (exclusion-thm (car products) all-products)
              (exclusion-thms (cdr products) all-products))
      nil))">exclusion-thms</a> (cdr products) all-products))
    nil))</pre>
  </div>

<div class="form-block function" id="def-name-matching-recognizer" data-defines="NAME-MATCHING-RECOGNIZER" data-references="CDR,SUM-NAME,CAR,SUM-RECOGNIZER,EQ,ATOM,IF,PREDTYP,SUMS,DEFUN" data-used-by="FIELD-MEASURE-INEQS,RECURSIVE-ARG-AND-CALL-LIST" data-part-name="NAME-MATCHING-RECOGNIZER" data-part-args="PREDTYP,SUMS" data-part-body="CDR,NAME-MATCHING-RECOGNIZER,SUM-NAME,CAR,SUM-RECOGNIZER,PREDTYP,EQ,SUMS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NAME-MATCHING-RECOGNIZER">name-matching-recognizer</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-name-matching-recognizer" data-sym="NAME-MATCHING-RECOGNIZER" title="(defun name-matching-recognizer (sums predtyp)
  (if (atom sums)
      nil
      (if (eq predtyp (sum-recognizer (car sums)))
          (sum-name (car sums))">name-matching-recognizer</a>
  (sums predtyp)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> sums)
    nil
    (if (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> predtyp (<a class="sym-link local-def" href="#def-sum-recognizer" data-sym="SUM-RECOGNIZER" title="(defun sum-recognizer (sum) (appsyms (list (sum-name sum) &#39;p)))">sum-recognizer</a> (car sums)))
      (<a class="sym-link local-def" href="#def-sum-name" data-sym="SUM-NAME" title="(defun sum-name (sum) (car sum))">sum-name</a> (car sums))
      (<a class="sym-link local-def" href="#def-name-matching-recognizer" data-sym="NAME-MATCHING-RECOGNIZER" title="(defun name-matching-recognizer (sums predtyp)
  (if (atom sums)
      nil
      (if (eq predtyp (sum-recognizer (car sums)))
          (sum-name (car sums))">name-matching-recognizer</a> (cdr sums) predtyp))))</pre>
  </div>

<div class="form-block function" id="def-recursive-arg-and-call-list" data-defines="RECURSIVE-ARG-AND-CALL-LIST" data-references="&,QUOTE,QUASIQUOTE,CONS,MV,COMPONENT-NAME,ARGNAME,NAME-MATCHING-RECOGNIZER,TYPNAME,CDR,CALLS,ARGS,MV-LET,CAR,COMPONENT-TYPE,PREDTYP,LET,CONSP,IF,COMPONENTS,SUMS,DEFUN" data-used-by="MEASURE-CLAUSE-LIST" data-part-name="RECURSIVE-ARG-AND-CALL-LIST" data-part-args="COMPONENTS,SUMS" data-part-body="&,QUOTE,QUASIQUOTE,CONS,MV,COMPONENT-NAME,ARGNAME,NAME-MATCHING-RECOGNIZER,TYPNAME,CDR,SUMS,RECURSIVE-ARG-AND-CALL-LIST,CALLS,ARGS,MV-LET,CAR,COMPONENT-TYPE,PREDTYP,LET,COMPONENTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RECURSIVE-ARG-AND-CALL-LIST">recursive-arg-and-call-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-recursive-arg-and-call-list" data-sym="RECURSIVE-ARG-AND-CALL-LIST" title="(defun recursive-arg-and-call-list (sums components)
  (if (consp components)
      (let ((predtyp (component-type (car components))))
        (mv-let (args calls)
                (recursive-arg-and-call-list sums (cdr components))
...">recursive-arg-and-call-list</a>
  (sums components)
  (if (consp components)
    (let ((predtyp (<a class="sym-link external" href="types-misc.html#def-component-type" data-sym="COMPONENT-TYPE">component-type</a> (car components))))
      (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> calls)
        (<a class="sym-link local-def" href="#def-recursive-arg-and-call-list" data-sym="RECURSIVE-ARG-AND-CALL-LIST" title="(defun recursive-arg-and-call-list (sums components)
  (if (consp components)
      (let ((predtyp (component-type (car components))))
        (mv-let (args calls)
                (recursive-arg-and-call-list sums (cdr components))
...">recursive-arg-and-call-list</a> sums (cdr components))
        (if predtyp
          (let ((typname (<a class="sym-link local-def" href="#def-name-matching-recognizer" data-sym="NAME-MATCHING-RECOGNIZER" title="(defun name-matching-recognizer (sums predtyp)
  (if (atom sums)
      nil
      (if (eq predtyp (sum-recognizer (car sums)))
          (sum-name (car sums))">name-matching-recognizer</a> sums predtyp)) (argname (<a class="sym-link external" href="types-misc.html#def-component-name" data-sym="COMPONENT-NAME">component-name</a> (car components))))
            (if typname
              (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cons argname <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)
                (cons `(,(APPSYMS (LIST TYPNAME &#39;MEASURE)) ,ARGNAME) calls))
              (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cons '&amp; <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) calls)))
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cons '&amp; <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) calls))))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)))</pre>
  </div>

<div class="form-block function" id="def-measure-clause-list" data-defines="MEASURE-CLAUSE-LIST" data-references="&,QUOTE,+,QUASIQUOTE,CONS,CAR,PRODUCT-COMPONENTS,RECURSIVE-ARG-AND-CALL-LIST,CALLS,ARGS,MV-LET,CDR,REST,LET,CONSP,IF,PRODUCTS,SUMS,DEFUN" data-used-by="MEASURE-DEF" data-part-name="MEASURE-CLAUSE-LIST" data-part-args="PRODUCTS,SUMS" data-part-body="&,QUOTE,+,QUASIQUOTE,CONS,CAR,PRODUCT-COMPONENTS,RECURSIVE-ARG-AND-CALL-LIST,CALLS,ARGS,MV-LET,CDR,SUMS,MEASURE-CLAUSE-LIST,REST,LET,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEASURE-CLAUSE-LIST">measure-clause-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-measure-clause-list" data-sym="MEASURE-CLAUSE-LIST" title="(defun measure-clause-list (sums products)
  (if (consp products)
      (let ((rest (measure-clause-list sums (cdr products))))
        (mv-let (args calls)
                (recursive-arg-and-call-list sums
...">measure-clause-list</a>
  (sums products)
  (if (consp products)
    (let ((<a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link local-def" href="#def-measure-clause-list" data-sym="MEASURE-CLAUSE-LIST" title="(defun measure-clause-list (sums products)
  (if (consp products)
      (let ((rest (measure-clause-list sums (cdr products))))
        (mv-let (args calls)
                (recursive-arg-and-call-list sums
...">measure-clause-list</a> sums (cdr products))))
      (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> calls)
        (<a class="sym-link local-def" href="#def-recursive-arg-and-call-list" data-sym="RECURSIVE-ARG-AND-CALL-LIST" title="(defun recursive-arg-and-call-list (sums components)
  (if (consp components)
      (let ((predtyp (component-type (car components))))
        (mv-let (args calls)
                (recursive-arg-and-call-list sums (cdr components))
...">recursive-arg-and-call-list</a> sums
          (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> (car products)))
        (if (consp calls)
          (cons `((,(PRODUCT-NAME (CAR PRODUCTS)) ,@ARGS) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> ,@CALLS))
            <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
          <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)))
    '((&amp; <span class="number">1</span>))))</pre>
  </div>

<div class="form-block function" id="def-measure-def" data-defines="MEASURE-DEF" data-references="PATTERN-MATCH,ACL2-COUNT,XARGS,DECLARE,X,QUASIQUOTE,SUM-PRODUCTS,MEASURE-CLAUSE-LIST,CLAUSES,LET,GUARD-OPT,SUMS,SUM,DEFUN" data-used-by="MEASURE-DEFS" data-part-name="MEASURE-DEF" data-part-args="GUARD-OPT,SUMS,SUM" data-part-body="PATTERN-MATCH,ACL2-COUNT,XARGS,DECLARE,X,DEFUN,QUASIQUOTE,SUM,SUM-PRODUCTS,SUMS,MEASURE-CLAUSE-LIST,CLAUSES,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEASURE-DEF">measure-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-measure-def" data-sym="MEASURE-DEF" title="(defun measure-def (sum sums guard-opt)
  (let ((clauses (measure-clause-list sums (sum-products sum))))
    `(defun ,(appsyms (list (sum-name sum) &#39;measure)) (x)
       (declare
        (xargs :measure (acl2-count x)
...">measure-def</a>
  (sum sums guard-opt)
  (let ((clauses (<a class="sym-link local-def" href="#def-measure-clause-list" data-sym="MEASURE-CLAUSE-LIST" title="(defun measure-clause-list (sums products)
  (if (consp products)
      (let ((rest (measure-clause-list sums (cdr products))))
        (mv-let (args calls)
                (recursive-arg-and-call-list sums
...">measure-clause-list</a> sums (<a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> sum))))
    `(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,(APPSYMS (LIST (SUM-NAME SUM) &#39;MEASURE))
      (x)
      (declare (xargs <span class="keyword">:measure</span> (<a class="sym-link system" href="../../axioms.html#def-acl2-count" data-sym="ACL2-COUNT">acl2-count</a> x)
          ,@(CASE GUARD-OPT
    (:FAST `(:GUARD (,(SUM-RECOGNIZER SUM) X)))
    (() NIL)
    (OTHERWISE `(:GUARD T))))
        ,@(IF (= (LEN CLAUSES) 1)
      `((IGNORE X))
      NIL))
      (<a class="sym-link external" href="pattern-match.html#def-pattern-match" data-sym="PATTERN-MATCH">pattern-match</a> x ,@CLAUSES))))</pre>
  </div>

<div class="form-block function" id="def-measure-defs" data-defines="MEASURE-DEFS" data-references="CDR,CAR,MEASURE-DEF,CONS,CONSP,IF,GUARD-OPT,ALL-SUMS,SUMS,DEFUN" data-used-by="MEASURE-MREC" data-part-name="MEASURE-DEFS" data-part-args="GUARD-OPT,ALL-SUMS,SUMS" data-part-body="CDR,MEASURE-DEFS,GUARD-OPT,ALL-SUMS,CAR,MEASURE-DEF,CONS,SUMS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEASURE-DEFS">measure-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-measure-defs" data-sym="MEASURE-DEFS" title="(defun measure-defs (sums all-sums guard-opt)
  (if (consp sums)
      (cons (measure-def (car sums) all-sums guard-opt)
            (measure-defs (cdr sums) all-sums guard-opt))
      nil))">measure-defs</a>
  (sums all-sums guard-opt)
  (if (consp sums)
    (cons (<a class="sym-link local-def" href="#def-measure-def" data-sym="MEASURE-DEF" title="(defun measure-def (sum sums guard-opt)
  (let ((clauses (measure-clause-list sums (sum-products sum))))
    `(defun ,(appsyms (list (sum-name sum) &#39;measure)) (x)
       (declare
        (xargs :measure (acl2-count x)
...">measure-def</a> (car sums) all-sums guard-opt)
      (<a class="sym-link local-def" href="#def-measure-defs" data-sym="MEASURE-DEFS" title="(defun measure-defs (sums all-sums guard-opt)
  (if (consp sums)
      (cons (measure-def (car sums) all-sums guard-opt)
            (measure-defs (cdr sums) all-sums guard-opt))
      nil))">measure-defs</a> (cdr sums) all-sums guard-opt))
    nil))</pre>
  </div>

<div class="form-block function" id="def-measure-mrec" data-defines="MEASURE-MREC" data-references="MUTUAL-RECURSION,QUASIQUOTE,CAR,LEN,=,IF,MEASURE-DEFS,MDEFS,LET,GUARD-OPT,SUMS,DEFUN" data-part-name="MEASURE-MREC" data-part-args="GUARD-OPT,SUMS" data-part-body="MUTUAL-RECURSION,QUASIQUOTE,CAR,LEN,=,IF,GUARD-OPT,SUMS,MEASURE-DEFS,MDEFS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEASURE-MREC">measure-mrec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-measure-mrec" data-sym="MEASURE-MREC" title="(defun measure-mrec (sums guard-opt)
  (let ((mdefs (measure-defs sums sums guard-opt)))
    (if (= (len mdefs) 1)
        (car mdefs)
        `(mutual-recursion ,@mdefs))))">measure-mrec</a>
  (sums guard-opt)
  (let ((mdefs (<a class="sym-link local-def" href="#def-measure-defs" data-sym="MEASURE-DEFS" title="(defun measure-defs (sums all-sums guard-opt)
  (if (consp sums)
      (cons (measure-def (car sums) all-sums guard-opt)
            (measure-defs (cdr sums) all-sums guard-opt))
      nil))">measure-defs</a> sums sums guard-opt)))
    (if (<a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> mdefs) <span class="number">1</span>)
      (car mdefs)
      `(<a class="sym-link system" href="../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> ,@MDEFS))))</pre>
  </div>

<div class="form-block function" id="def-field-measure-ineqs" data-defines="FIELD-MEASURE-INEQS" data-references="CDR,X,<,QUASIQUOTE,CONS,ACC,QUOTE,LIST,APPSYMS,MEAS,NAME-MATCHING-RECOGNIZER,PRED,COMPONENT-NAME,ARG,CAR,COMPONENT-TYPE,PREDTYP,LET*,CONSP,IF,PRODARGS,PRODNAME,MEASURE,SUMS,DEFUN" data-used-by="FIELD-MEASURE-THMS" data-part-name="FIELD-MEASURE-INEQS" data-part-args="PRODARGS,PRODNAME,MEASURE,SUMS" data-part-body="CDR,FIELD-MEASURE-INEQS,X,<,QUASIQUOTE,CONS,PRODNAME,ACC,MEASURE,QUOTE,LIST,APPSYMS,MEAS,SUMS,NAME-MATCHING-RECOGNIZER,PRED,COMPONENT-NAME,ARG,CAR,COMPONENT-TYPE,PREDTYP,LET*,PRODARGS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIELD-MEASURE-INEQS">field-measure-ineqs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-field-measure-ineqs" data-sym="FIELD-MEASURE-INEQS" title="(defun field-measure-ineqs (sums measure prodname prodargs)
  (if (consp prodargs)
      (let* ((predtyp (component-type (car prodargs)))
             (arg (component-name (car prodargs)))
             (pred (name-matching-recognizer sums predtyp))
...">field-measure-ineqs</a>
  (sums measure prodname prodargs)
  (if (consp prodargs)
    (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((predtyp (<a class="sym-link external" href="types-misc.html#def-component-type" data-sym="COMPONENT-TYPE">component-type</a> (car prodargs))) (arg (<a class="sym-link external" href="types-misc.html#def-component-name" data-sym="COMPONENT-NAME">component-name</a> (car prodargs)))
        (pred (<a class="sym-link local-def" href="#def-name-matching-recognizer" data-sym="NAME-MATCHING-RECOGNIZER" title="(defun name-matching-recognizer (sums predtyp)
  (if (atom sums)
      nil
      (if (eq predtyp (sum-recognizer (car sums)))
          (sum-name (car sums))">name-matching-recognizer</a> sums predtyp))
        (meas (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> pred 'measure)))
        (acc (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> prodname arg))))
      (if pred
        (cons `(&lt; (,MEAS (,ACC x)) (,MEASURE x))
          (<a class="sym-link local-def" href="#def-field-measure-ineqs" data-sym="FIELD-MEASURE-INEQS" title="(defun field-measure-ineqs (sums measure prodname prodargs)
  (if (consp prodargs)
      (let* ((predtyp (component-type (car prodargs)))
             (arg (component-name (car prodargs)))
             (pred (name-matching-recognizer sums predtyp))
...">field-measure-ineqs</a> sums measure prodname (cdr prodargs)))
        (<a class="sym-link local-def" href="#def-field-measure-ineqs" data-sym="FIELD-MEASURE-INEQS" title="(defun field-measure-ineqs (sums measure prodname prodargs)
  (if (consp prodargs)
      (let* ((predtyp (component-type (car prodargs)))
             (arg (component-name (car prodargs)))
             (pred (name-matching-recognizer sums predtyp))
...">field-measure-ineqs</a> sums measure prodname (cdr prodargs))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-field-measure-thms" data-defines="FIELD-MEASURE-THMS" data-references="CDR,X,IMPLIES,DEFTHM,QUASIQUOTE,CONS,PRODUCT-COMPONENTS,CAR,PRODUCT-NAME,FIELD-MEASURE-INEQS,INEQS,LET,CONSP,IF,PRODUCTS,MEASURE,SUMS,DEFUN" data-used-by="SUM-MEASURE-THMS" data-part-name="FIELD-MEASURE-THMS" data-part-args="PRODUCTS,MEASURE,SUMS" data-part-body="CDR,FIELD-MEASURE-THMS,X,IMPLIES,DEFTHM,QUASIQUOTE,CONS,PRODUCT-COMPONENTS,CAR,PRODUCT-NAME,MEASURE,SUMS,FIELD-MEASURE-INEQS,INEQS,LET,PRODUCTS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIELD-MEASURE-THMS">field-measure-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-field-measure-thms" data-sym="FIELD-MEASURE-THMS" title="(defun field-measure-thms (sums measure products)
  (if (consp products)
      (let ((ineqs
             (field-measure-ineqs sums measure (product-name (car products))
              (product-components (car products)))))
...">field-measure-thms</a>
  (sums measure products)
  (if (consp products)
    (let ((ineqs (<a class="sym-link local-def" href="#def-field-measure-ineqs" data-sym="FIELD-MEASURE-INEQS" title="(defun field-measure-ineqs (sums measure prodname prodargs)
  (if (consp prodargs)
      (let* ((predtyp (component-type (car prodargs)))
             (arg (component-name (car prodargs)))
             (pred (name-matching-recognizer sums predtyp))
...">field-measure-ineqs</a> sums
           measure
           (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> (car products))
           (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> (car products)))))
      (if ineqs
        (cons `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(APPSYMS (LIST (PRODUCT-NAME (CAR PRODUCTS)) &#39;MEASURE-DECR))
            (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,(PRODUCT-RECOGNIZER (CAR PRODUCTS)) x)
              ,(IF (CONSP (CDR INEQS))
     `(AND ,@INEQS)
     (CAR INEQS))))
          (<a class="sym-link local-def" href="#def-field-measure-thms" data-sym="FIELD-MEASURE-THMS" title="(defun field-measure-thms (sums measure products)
  (if (consp products)
      (let ((ineqs
             (field-measure-ineqs sums measure (product-name (car products))
              (product-components (car products)))))
...">field-measure-thms</a> sums measure (cdr products)))
        (<a class="sym-link local-def" href="#def-field-measure-thms" data-sym="FIELD-MEASURE-THMS" title="(defun field-measure-thms (sums measure products)
  (if (consp products)
      (let ((ineqs
             (field-measure-ineqs sums measure (product-name (car products))
              (product-components (car products)))))
...">field-measure-thms</a> sums measure (cdr products))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-sum-measure-thms" data-defines="SUM-MEASURE-THMS" data-references="CDR,SUM-PRODUCTS,MEASURE,QUOTE,CAR,SUM-NAME,LIST,APPSYMS,FIELD-MEASURE-THMS,APPEND,CONSP,IF,ALL-SUMS,SUMS,DEFUN" data-part-name="SUM-MEASURE-THMS" data-part-args="ALL-SUMS,SUMS" data-part-body="CDR,SUM-MEASURE-THMS,SUM-PRODUCTS,MEASURE,QUOTE,CAR,SUM-NAME,LIST,APPSYMS,ALL-SUMS,FIELD-MEASURE-THMS,APPEND,SUMS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUM-MEASURE-THMS">sum-measure-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sum-measure-thms" data-sym="SUM-MEASURE-THMS" title="(defun sum-measure-thms (sums all-sums)
  (if (consp sums)
      (append
       (field-measure-thms all-sums
        (appsyms (list (sum-name (car sums)) &#39;measure))
...">sum-measure-thms</a>
  (sums all-sums)
  (if (consp sums)
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-field-measure-thms" data-sym="FIELD-MEASURE-THMS" title="(defun field-measure-thms (sums measure products)
  (if (consp products)
      (let ((ineqs
             (field-measure-ineqs sums measure (product-name (car products))
              (product-components (car products)))))
...">field-measure-thms</a> all-sums
        (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link local-def" href="#def-sum-name" data-sym="SUM-NAME" title="(defun sum-name (sum) (car sum))">sum-name</a> (car sums)) 'measure))
        (<a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> (car sums)))
      (<a class="sym-link local-def" href="#def-sum-measure-thms" data-sym="SUM-MEASURE-THMS" title="(defun sum-measure-thms (sums all-sums)
  (if (consp sums)
      (append
       (field-measure-thms all-sums
        (appsyms (list (sum-name (car sums)) &#39;measure))
...">sum-measure-thms</a> (cdr sums) all-sums))
    nil))</pre>
  </div>

<div class="form-block function" id="def-updater-defun" data-defines="UPDATER-DEFUN" data-references="UPDATE-NTH,MBE,X,NEW,QUASIQUOTE,1-,NTH,NAME,LET,GUARD-OPT,N,ACCS,ARGS,PRODNAME,DEFUN" data-used-by="PRODUCT-UPDATER-DEFUNS" data-part-name="UPDATER-DEFUN" data-part-args="GUARD-OPT,N,ACCS,ARGS,PRODNAME" data-part-body="UPDATE-NTH,MBE,X,NEW,DEFUN,QUASIQUOTE,ARGS,N,1-,NTH,NAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATER-DEFUN">updater-defun</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-updater-defun" data-sym="UPDATER-DEFUN" title="(defun updater-defun (prodname args accs n guard-opt)
  (let ((name (nth (1- n) args)))
    `(defun ,(appsyms (list &#39;update prodname name)) (new x)
       ,@(if guard-opt
             `((declare
...">updater-defun</a>
  (prodname <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> accs n guard-opt)
  (let ((name (<a class="sym-link system" href="../../axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> n) <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)))
    `(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,(APPSYMS (LIST &#39;UPDATE PRODNAME NAME))
      (new x)
      ,@(IF GUARD-OPT
      `((DECLARE
         (XARGS :GUARD (,(RECOGNIZER-NAME PRODNAME) X) :GUARD-HINTS
          ((&quot;Goal&quot; :IN-THEORY (ENABLE ,PRODNAME))))))
      NIL)
      (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> ,N new x)
        <span class="keyword">:logic</span> (,PRODNAME ,@(UPDATE-NTH (1- N) &#39;NEW ACCS))))))</pre>
  </div>

<div class="form-block function" id="def-product-updater-defuns" data-defines="PRODUCT-UPDATER-DEFUNS" data-references="1-,UPDATER-DEFUN,CONS,ZP,IF,GUARD-OPT,N,ACCS,ARGS,PRODNAME,DEFUN" data-used-by="UPDATER-DEFUNS" data-part-name="PRODUCT-UPDATER-DEFUNS" data-part-args="GUARD-OPT,N,ACCS,ARGS,PRODNAME" data-part-body="1-,PRODUCT-UPDATER-DEFUNS,GUARD-OPT,ACCS,ARGS,PRODNAME,UPDATER-DEFUN,CONS,N,ZP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRODUCT-UPDATER-DEFUNS">product-updater-defuns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-product-updater-defuns" data-sym="PRODUCT-UPDATER-DEFUNS" title="(defun product-updater-defuns (prodname args accs n guard-opt)
  (if (zp n)
      nil
      (cons (updater-defun prodname args accs n guard-opt)
            (product-updater-defuns prodname args accs (1- n) guard-opt))))">product-updater-defuns</a>
  (prodname <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> accs n guard-opt)
  (if (<a class="sym-link system" href="../../axioms.html#def-zp" data-sym="ZP">zp</a> n)
    nil
    (cons (<a class="sym-link local-def" href="#def-updater-defun" data-sym="UPDATER-DEFUN" title="(defun updater-defun (prodname args accs n guard-opt)
  (let ((name (nth (1- n) args)))
    `(defun ,(appsyms (list &#39;update prodname name)) (new x)
       ,@(if guard-opt
             `((declare
...">updater-defun</a> prodname <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> accs n guard-opt)
      (<a class="sym-link local-def" href="#def-product-updater-defuns" data-sym="PRODUCT-UPDATER-DEFUNS" title="(defun product-updater-defuns (prodname args accs n guard-opt)
  (if (zp n)
      nil
      (cons (updater-defun prodname args accs n guard-opt)
            (product-updater-defuns prodname args accs (1- n) guard-opt))))">product-updater-defuns</a> prodname <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> accs (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> n) guard-opt))))</pre>
  </div>

<div class="form-block function" id="def-updater-defuns" data-defines="UPDATER-DEFUNS" data-references="CDR,LEN,ACCESSOR-CALL-LIST,PRODUCT-UPDATER-DEFUNS,APPEND,COMPONENTS-NAMES,ARGLIST,PRODUCT-COMPONENTS,COMPONENTS,CAR,PRODUCT-NAME,PRODNAME,LET*,ATOM,IF,GUARD-OPT,PRODUCTS,DEFUN" data-part-name="UPDATER-DEFUNS" data-part-args="GUARD-OPT,PRODUCTS" data-part-body="CDR,UPDATER-DEFUNS,GUARD-OPT,LEN,ACCESSOR-CALL-LIST,PRODUCT-UPDATER-DEFUNS,APPEND,COMPONENTS-NAMES,ARGLIST,PRODUCT-COMPONENTS,COMPONENTS,CAR,PRODUCT-NAME,PRODNAME,LET*,PRODUCTS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATER-DEFUNS">updater-defuns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-updater-defuns" data-sym="UPDATER-DEFUNS" title="(defun updater-defuns (products guard-opt)
  (if (atom products)
      nil
      (let* ((prodname (product-name (car products)))
             (components (product-components (car products)))
...">updater-defuns</a>
  (products guard-opt)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> products)
    nil
    (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((prodname (<a class="sym-link external" href="types-misc.html#def-product-name" data-sym="PRODUCT-NAME">product-name</a> (car products))) (components (<a class="sym-link external" href="types-misc.html#def-product-components" data-sym="PRODUCT-COMPONENTS">product-components</a> (car products)))
        (arglist (<a class="sym-link external" href="types-misc.html#def-components-names" data-sym="COMPONENTS-NAMES">components-names</a> components)))
      (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-product-updater-defuns" data-sym="PRODUCT-UPDATER-DEFUNS" title="(defun product-updater-defuns (prodname args accs n guard-opt)
  (if (zp n)
      nil
      (cons (updater-defun prodname args accs n guard-opt)
            (product-updater-defuns prodname args accs (1- n) guard-opt))))">product-updater-defuns</a> prodname
          arglist
          (<a class="sym-link local-def" href="#def-accessor-call-list" data-sym="ACCESSOR-CALL-LIST" title="(defun accessor-call-list (product components)
  (if (consp components)
      (cons `(,(accessor-name product (car components)) x)
            (accessor-call-list product (cdr components)))
      nil))">accessor-call-list</a> (car products) components)
          (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> arglist)
          guard-opt)
        (<a class="sym-link local-def" href="#def-updater-defuns" data-sym="UPDATER-DEFUNS" title="(defun updater-defuns (products guard-opt)
  (if (atom products)
      nil
      (let* ((prodname (product-name (car products)))
             (components (product-components (car products)))
...">updater-defuns</a> (cdr products) guard-opt)))))</pre>
  </div>

<div class="form-block function" id="def-sums-products" data-defines="SUMS-PRODUCTS" data-references="CDR,CAR,SUM-PRODUCTS,APPEND,ATOM,IF,SUMS,DEFUN" data-used-by="DEFSUMS-FN" data-part-name="SUMS-PRODUCTS" data-part-args="SUMS" data-part-body="CDR,SUMS-PRODUCTS,CAR,SUM-PRODUCTS,APPEND,SUMS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUMS-PRODUCTS">sums-products</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sums-products" data-sym="SUMS-PRODUCTS" title="(defun sums-products (sums)
  (if (atom sums)
      nil
      (append (sum-products (car sums)) (sums-products (cdr sums)))))">sums-products</a>
  (sums)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> sums)
    nil
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-sum-products" data-sym="SUM-PRODUCTS" title="(defun sum-products (sum) (cdr sum))">sum-products</a> (car sums))
      (<a class="sym-link local-def" href="#def-sums-products" data-sym="SUMS-PRODUCTS" title="(defun sums-products (sums)
  (if (atom sums)
      nil
      (append (sum-products (car sums)) (sums-products (cdr sums)))))">sums-products</a> (cdr sums)))))</pre>
  </div>

<div class="form-block function" id="def-sums-names" data-defines="SUMS-NAMES" data-references="CDR,CAR,SUM-NAME,CONS,ATOM,IF,SUMS,DEFUN" data-used-by="DEFSUMS-FN" data-part-name="SUMS-NAMES" data-part-args="SUMS" data-part-body="CDR,SUMS-NAMES,CAR,SUM-NAME,CONS,SUMS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUMS-NAMES">sums-names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sums-names" data-sym="SUMS-NAMES" title="(defun sums-names (sums)
  (if (atom sums)
      nil
      (cons (sum-name (car sums)) (sums-names (cdr sums)))))">sums-names</a>
  (sums)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> sums)
    nil
    (cons (<a class="sym-link local-def" href="#def-sum-name" data-sym="SUM-NAME" title="(defun sum-name (sum) (car sum))">sum-name</a> (car sums)) (<a class="sym-link local-def" href="#def-sums-names" data-sym="SUMS-NAMES" title="(defun sums-names (sums)
  (if (atom sums)
      nil
      (cons (sum-name (car sums)) (sums-names (cdr sums)))))">sums-names</a> (cdr sums)))))</pre>
  </div>

<div class="form-block function" id="def-defsums-fn" data-defines="DEFSUMS-FN" data-references="UNIVERSAL-THEORY,DISABLE,THEORY,UNION-THEORIES,CURRENT-THEORY,SET-DIFFERENCE-THEORIES,RULES-OF-TYPE,DEFTHEORY,PRODUCT-TYPE,ENABLE,IN-THEORY,LOCAL,DEFLABEL,SET-BOGUS-MEASURE-OK,ENCAPSULATE,QUASIQUOTE,BEFORE,QUOTE,LIST,BEFORE-LABEL,SUMS-NAMES,APPSYMS,THEORY-NAME,ARITH-OPTION,UPDATE-OPTION,ACCESSOR-OPTION,COMPACT-OPT,HONS-OPT,T,KWASSOC,GUARD-OPTION,SUMS-PRODUCTS,PRODUCTS,LET*,EXTFNS,KWALIST,SUMS,DEFUN" data-used-by="DEFSUMS,DEFSUM" data-part-name="DEFSUMS-FN" data-part-args="EXTFNS,KWALIST,SUMS" data-part-body="UNIVERSAL-THEORY,DISABLE,THEORY,UNION-THEORIES,CURRENT-THEORY,SET-DIFFERENCE-THEORIES,RULES-OF-TYPE,DEFTHEORY,PRODUCT-TYPE,ENABLE,IN-THEORY,LOCAL,DEFLABEL,SET-BOGUS-MEASURE-OK,ENCAPSULATE,QUASIQUOTE,BEFORE,QUOTE,LIST,BEFORE-LABEL,SUMS-NAMES,APPSYMS,THEORY-NAME,ARITH-OPTION,UPDATE-OPTION,ACCESSOR-OPTION,COMPACT-OPT,HONS-OPT,KWALIST,T,KWASSOC,GUARD-OPTION,SUMS,SUMS-PRODUCTS,PRODUCTS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSUMS-FN">defsums-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defsums-fn" data-sym="DEFSUMS-FN" title="(defun defsums-fn (sums kwalist extfns)
  (let* ((products (sums-products sums))
         (guard-option (kwassoc :guard t kwalist))
         (hons-opt (kwassoc :hons nil kwalist))
         (compact-opt (kwassoc :compact t kwalist))
...">defsums-fn</a>
  (sums kwalist extfns)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((products (<a class="sym-link local-def" href="#def-sums-products" data-sym="SUMS-PRODUCTS" title="(defun sums-products (sums)
  (if (atom sums)
      nil
      (append (sum-products (car sums)) (sums-products (cdr sums)))))">sums-products</a> sums)) (guard-option (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:guard</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> kwalist))
      (hons-opt (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:hons</span> nil kwalist))
      (compact-opt (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:compact</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> kwalist))
      (accessor-option (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:short-accessors</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> kwalist))
      (update-option (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:updatable</span> nil kwalist))
      (arith-option (<a class="sym-link external" href="types-misc.html#def-kwassoc" data-sym="KWASSOC">kwassoc</a> <span class="keyword">:arithmetic</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> kwalist))
      (theory-name (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link local-def" href="#def-sums-names" data-sym="SUMS-NAMES" title="(defun sums-names (sums)
  (if (atom sums)
      nil
      (cons (sum-name (car sums)) (sums-names (cdr sums)))))">sums-names</a> sums)))
      (before-label (<a class="sym-link external" href="types-misc.html#def-appsyms" data-sym="APPSYMS">appsyms</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'before theory-name))))
    `(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
      (<a class="sym-link system" href="../../axioms.html#def-set-bogus-measure-ok" data-sym="SET-BOGUS-MEASURE-OK">set-bogus-measure-ok</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
      (<a class="sym-link system" href="../../axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a> ,BEFORE-LABEL)
      (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable <a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a> (<span class="keyword">:executable-counterpart</span> <a class="sym-link local-def" href="#def-product-type" data-sym="PRODUCT-TYPE" title="(defun product-type (x) (declare (xargs :guard (consp x))) (car x))">product-type</a>))))
      ,@(IF ARITH-OPTION
      `((LOCAL (INCLUDE-BOOK &quot;arithmetic/top-with-meta&quot; :DIR :SYSTEM)))
      NIL)
      ,@(BASIC-PRODUCTS-DEFS PRODUCTS GUARD-OPTION ACCESSOR-OPTION HONS-OPT
   COMPACT-OPT)
      ,(SUM-RECOGNIZERS-DEF SUMS EXTFNS GUARD-OPTION)
      ,@(SUM-COMPOUND-REC-THMS SUMS COMPACT-OPT)
      ,@(SUM-POSSIBILITY-THMS SUMS)
      ,@(EXCLUSION-THMS PRODUCTS PRODUCTS)
      ,@(ALL-ACCESSOR-TYPE-THMS SUMS)
      ,@(ALL-BAD-TYPING-THMS SUMS)
      ,@(ALL-POST-CONSTRUCTOR-THMS SUMS)
      (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> ,(APPSYMS (LIST THEORY-NAME &#39;FUNCTIONS))
        (rules-of-type <span class="keyword">:definition</span> (set-difference-theories (current-theory <span class="keyword">:here</span>)
            (current-theory ',BEFORE-LABEL))))
      ,@(IF (EQ GUARD-OPTION :FAST)
      (PRODUCT-FAST-RECS-SUMS SUMS)
      NIL)
      (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> ,(APPSYMS (LIST THEORY-NAME &#39;EXECUTABLE-COUNTERPARTS))
        (rules-of-type <span class="keyword">:executable-counterpart</span> (set-difference-theories (current-theory <span class="keyword">:here</span>)
            (current-theory ',BEFORE-LABEL))))
      (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> ,(APPSYMS (LIST THEORY-NAME &#39;INDUCTIONS))
        (rules-of-type <span class="keyword">:induction</span> (set-difference-theories (current-theory <span class="keyword">:here</span>)
            (current-theory ',BEFORE-LABEL))))
      (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> ,(APPSYMS (LIST THEORY-NAME &#39;THEOREMS))
        (set-difference-theories (set-difference-theories (current-theory <span class="keyword">:here</span>)
            (current-theory ',BEFORE-LABEL))
          (union-theories (theory ',(APPSYMS (LIST THEORY-NAME &#39;EXECUTABLE-COUNTERPARTS)))
            (union-theories (theory ',(APPSYMS (LIST THEORY-NAME &#39;FUNCTIONS)))
              (theory ',(APPSYMS (LIST THEORY-NAME &#39;INDUCTIONS)))))))
      ,@(PRODUCTS-TYPE-THMS PRODUCTS)
      (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> ,(APPSYMS (LIST THEORY-NAME &#39;PRODUCT-TYPE-THEOREMS))
        (set-difference-theories (current-theory <span class="keyword">:here</span>)
          (current-theory ',(APPSYMS (LIST THEORY-NAME &#39;THEOREMS)))))
      (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable ,(APPSYMS (LIST THEORY-NAME &#39;FUNCTIONS))
          ,(APPSYMS (LIST THEORY-NAME &#39;EXECUTABLE-COUNTERPARTS))
          ,(APPSYMS (LIST THEORY-NAME &#39;PRODUCT-TYPE-THEOREMS))))
      ,@(AND (NOT EXTFNS)
       `(,(MEASURE-MREC SUMS GUARD-OPTION) ,@(SUM-MEASURE-THMS SUMS SUMS)))
      ,@(IF UPDATE-OPTION
      (UPDATER-DEFUNS PRODUCTS GUARD-OPTION)
      NIL)
      (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> ,(APPSYMS (LIST THEORY-NAME &#39;ENTIRE-THEORY))
        (set-difference-theories (universal-theory <span class="keyword">:here</span>)
          (universal-theory ',BEFORE-LABEL))))))</pre>
  </div>

<div class="form-block other" id="form-99" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-defsum" data-sym="DEFSUM" title="(defmacro defsum (name &amp;rest defs)
  (mv-let (sum extfns kwalist) (defsum-munge-input name defs)
          (defsums-fn sum kwalist extfns)))">defsum</a>
  <span class="keyword">:parents</span> (miscellaneous)
  <span class="keyword">:short</span> <span class="string">"Define a recursive data type similar to a Haskell type definition."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

 @({
 (include-book &quot;tools/defsum&quot; :dir :system)
 (set-ignore-ok :warn)
 (defsum my-list
   (my-empty)
   (my-cons car (my-list-p cdr)))
 })

&lt;p&gt;This declaration says that an object is of the type @(&#39;my-list&#39;) if it
is either of the type @(&#39;my-empty&#39;) or @(&#39;my-cons&#39;), where @(&#39;my-empty&#39;)
is an empty structure and @(&#39;my-cons&#39;) is a structure with two fields:
the @(&#39;car&#39;), an arbitrary object; and the @(&#39;cdr&#39;) which is of type
@(&#39;my-list&#39;).  In this case, recognizers @(&#39;my-list-p&#39;), @(&#39;my-empty-p&#39;),
and @(&#39;my-cons-p&#39;) are defined along with constructors @(&#39;my-empty&#39;) and
@(&#39;my-cons&#39;) and destructors @(&#39;my-cons-car&#39;) and @(&#39;my-cons-cdr&#39;).  The
necessary macros are also defined to enable pattern-matching using the
constructors (see @(see pattern-match)).  For mutually-recursive data types
see @(see defsums).  It may also be informative to look at the translated
version of a defsum form using :trans1.&lt;/p&gt;

&lt;p&gt;Note that a defsum form produces several logic-mode events inside an
encapsulate.  Despite the author&#39;s best intentions, not every such
automatically-generated event will complete successfully.  If you
encounter a defsum form that fails, please email it to
sswords@cs.utexas.edu (with or without fixing the bug yourself.)&lt;/p&gt;

&lt;p&gt;Several theorems about the new type are defined so as to enable
reasoning based on their abstract model rather than their underlying
list representation. For most reasoning these theorems should be
sufficient without enabling the function definitions or
executable-counterparts.  In case these do need to be enabled,
theories named (for the above example) @(&#39;my-list-functions&#39;) and
@(&#39;my-list-executable-counterparts&#39;) are defined.&lt;/p&gt;

&lt;p&gt;In addition to the recognizer, constructor, and destructor functions,
a measure function is also defined which counts the number of nested
objects of the sum type.  In the example above, the measure function
is my-list-measure and the measure of an object is 1 if it is not a
my-cons, and 1 plus the measure of its my-cons-cdr if it is.&lt;/p&gt;

&lt;p&gt;Defsum accepts some keyword arguments.  Be aware that not all
combinations of these arguments have been tested extensively.  Again,
please send bug reports to sswords@cs.utexas.edu if you find a defsum
form that does not succeed.&lt;/p&gt;

&lt;p&gt;@(&#39;:arithmetic&#39;) - By default, each @(&#39;defsum&#39;) event expands to an
encapsulate which locally includes the book arithmetic/top-with-meta.
If an incompatible arithmetic book has already been included, this may
cause the defsum to fail.  But the other arithmetic book may also have
theorems that allow the defsum event to succeed if we don&#39;t attempt to
include the arithmetic book.  This can be done by setting
@(&#39;:arithmetic nil&#39;).&lt;/p&gt;

&lt;p&gt;@(&#39;:guard&#39;) - may be set to @(&#39;t&#39;), @(&#39;nil&#39;), or @(&#39;:fast&#39;).  By default
it is set to @(&#39;t&#39;), in which case minimal guards are set for all
functions.  If set to @(&#39;nil&#39;), guards will not be verified for any
functions; this is useful in case some field type recognizers don&#39;t
have their guards verified.  If set to @(&#39;:fast&#39;), an additional
recognizer for each product is defined named ``foo-p-fast&#39;&#39; if the
product is named foo.  This has a guard such that its argument must be
a valid sum object.  It is then logically equivalent to the other
recognizer, but in execution only checks that the symbol in the car of
the object matches the name of the product.  The pattern matcher for
each product then uses the fast recognizers.  Thus fast guards result
in a small (?) gain in performance in exchange for a (hopefully
trivial) degradation in logical complexity.&lt;/p&gt;

&lt;p&gt;@(&#39;:short-accessors&#39;) - @(&#39;t&#39;) by default; may be set to @(&#39;nil&#39;).  If
@(&#39;t&#39;), each field accessor first checks whether the object is of the
correct product type and returns nil if not.  This allows for an
additional theorem saying that if x is not of the correct product
type, then the accessor returns nil.  If @(&#39;nil&#39;), the nth accessor
returns @(&#39;(nth n x)&#39;) regardless of x&#39;s type.  When guards are turned
on, this is implemented with an @(&#39;mbe&#39;) so there should be no
performance difference between the two options.  When guards are off,
performance will be somewhat better if this feature is turned off.&lt;/p&gt;

&lt;p&gt;@(&#39;:compact&#39;) - By default, a defsum constructor makes a product
object by putting its components into a cons tree using n-1 conses,
but a prettier list representation is also supported which uses n
conses to store the elements in a flattened list which is easier to
read when printed.  Set @(&#39;:compact nil&#39;) if you prefer this
representation.&lt;/p&gt;

&lt;p&gt;@(&#39;:hons&#39;) - If HONS mode is in use, the flag @(&#39;:hons t&#39;) causes all
defsum forms to be built with HONSes rather than regular conses.  See
@(see hons-and-memoization).&lt;/p&gt;

&lt;p&gt;It may be necessary to include some function definition in a mutual
recursion with the sum recognizer function.  In this case simply put
the defun form inside the defsum form, i.e.&lt;/p&gt;

 @({
 (defsum lisp-term
   (lisp-atom val)
   (func-app (symbolp function) (lisp-term-listp args))
   (defun lisp-term-listp (args)
     (declare (xargs :guard t))
     (if (atom args)
         (null args)
       (and (lisp-term-p (car args))
            (lisp-term-listp (cdr args))))))
 })

&lt;p&gt;If such a function is included, however, no measure function will be
defined for the sum.&lt;/p&gt;

&lt;p&gt;Usually it is not necessary to specify a measure for such a function;
because there is currently no way of directly specifying the measure
for the sum&#39;s recognizer, specifying an exotic measure on such a
function is likely to fail.  If you come up against this limitation,
please send an example to sswords@cs.utexas.edu.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defsum" data-defines="DEFSUM" data-references="DEFSUMS-FN,DEFSUM-MUNGE-INPUT,KWALIST,EXTFNS,SUM,MV-LET,DEFS,&REST,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSUM">defsum</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defsum" data-sym="DEFSUM" title="(defmacro defsum (name &amp;rest defs)
  (mv-let (sum extfns kwalist) (defsum-munge-input name defs)
          (defsums-fn sum kwalist extfns)))">defsum</a>
  (name &amp;rest defs)
  (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (sum extfns kwalist)
    (<a class="sym-link local-def" href="#def-defsum-munge-input" data-sym="DEFSUM-MUNGE-INPUT" title="(defun defsum-munge-input (name rest)
  (mv-let (products kwalist) (strip-keywords rest)
          (mv-let (products extfns) (strip-extfns products)
                  (mv (list (cons name (defsum-munge-products products)))
                      extfns kwalist))))">defsum-munge-input</a> name defs)
    (<a class="sym-link local-def" href="#def-defsums-fn" data-sym="DEFSUMS-FN" title="(defun defsums-fn (sums kwalist extfns)
  (let* ((products (sums-products sums))
         (guard-option (kwassoc :guard t kwalist))
         (hons-opt (kwassoc :hons nil kwalist))
         (compact-opt (kwassoc :compact t kwalist))
...">defsums-fn</a> sum kwalist extfns)))</pre>
  </div>

<div class="form-block other" id="form-101" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-defsums" data-sym="DEFSUMS" title="(defmacro defsums (&amp;rest sums)
  (mv-let (sums extfns kwalist) (defsums-munge-input sums)
          (defsums-fn sums kwalist extfns)))">defsums</a>
  <span class="keyword">:parents</span> (miscellaneous)
  <span class="keyword">:short</span> <span class="string">"Define a set of mutually-recursive data types."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

 @({
 (defsums
   (my-term
    (my-atom val)
    (my-application (symbolp function) (my-term-list-p args)))
   (my-term-list
    (my-nil)
    (my-cons (my-term-p car) (my-term-list-p cdr))))
 })

&lt;p&gt;See @(see defsum).  This form is used when you want to define two or more
types which may be constructed from each other.  In the above example,
@(&#39;my-term&#39;) and @(&#39;my-term-list&#39;) could not be defined using independent
defsum forms; their recognizer functions need to be defined in a mutual
recursion.&lt;/p&gt;

&lt;p&gt;Defsums accepts the same keyword arguments as defsum.&lt;/p&gt;

&lt;p&gt;If you want some function to be defined inside the same mutual-recursion in
which the recognizers for each of the sums and products are defined, you may
insert the defun inside the def-mutual-sums form, i.e.&lt;/p&gt;

 @({
 (defsums
  (foo
   (bla (bar-p x))
   (ble (foo-p x) (bar-p y)))
  (bar
   (blu (integerp k))
   (blo (symbolp f) (foo-list-p a)))
  (defun foo-list-p (x)
    (declare (xargs :guard t))
    (if (atom x)
        (null x)
      (and (foo-p (car x))
           (foo-list-p (cdr x))))))
 })

&lt;p&gt;Usually it is not necessary to specify a measure for such a function;
because there is currently no way of directly specifying the measures on the
sums&#39; recognizers, specifying an exotic measure on such a function is likely to
fail.&lt;/p&gt;

&lt;p&gt;As with defsum, def-mutual-sums requires the (possibly local) inclusion of
the defsum-thms book.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defsums" data-defines="DEFSUMS" data-references="DEFSUMS-FN,DEFSUMS-MUNGE-INPUT,KWALIST,EXTFNS,MV-LET,SUMS,&REST,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSUMS">defsums</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defsums" data-sym="DEFSUMS" title="(defmacro defsums (&amp;rest sums)
  (mv-let (sums extfns kwalist) (defsums-munge-input sums)
          (defsums-fn sums kwalist extfns)))">defsums</a>
  (&amp;rest sums)
  (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (sums extfns kwalist)
    (<a class="sym-link local-def" href="#def-defsums-munge-input" data-sym="DEFSUMS-MUNGE-INPUT" title="(defun defsums-munge-input (args)
  (mv-let (sums kwalist) (strip-keywords args)
          (mv-let (sums extfns) (strip-extfns sums)
                  (mv (defsums-munge-sums sums) extfns kwalist))))">defsums-munge-input</a> sums)
    (<a class="sym-link local-def" href="#def-defsums-fn" data-sym="DEFSUMS-FN" title="(defun defsums-fn (sums kwalist extfns)
  (let* ((products (sums-products sums))
         (guard-option (kwassoc :guard t kwalist))
         (hons-opt (kwassoc :hons nil kwalist))
         (compact-opt (kwassoc :compact t kwalist))
...">defsums-fn</a> sums kwalist extfns)))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>