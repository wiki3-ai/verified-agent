<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>witness-cp - ACL2 Book</title>
  <meta property="name" content="witness-cp">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">witness-cp</h1>
    <div class="path"><a href="witness-cp.lisp" class="source-link">books/clause-processors/witness-cp</a></div>
  </div>
  
  <main property="text">
  <div class="includes-section">
    <h2>Included Books</h2>
    <div class="includes-list">
      <a class="include-link" href="use-by-hint.html" title="use-by-hint">use-by-hint</a>
      <a class="include-link" href="generalize.html" title="generalize">generalize</a>
      <a class="include-link" href="unify-subst.html" title="unify-subst">unify-subst</a>
      <a class="include-link" href="../std/util/bstar.html" title="std/util/bstar">bstar</a>
      <a class="include-link" href="ev-theoremp.html" title="ev-theoremp">ev-theoremp</a>
      <a class="include-link" href="../tools/def-functional-instance.html" title="tools/def-functional-instance">def-functional-instance</a>
      <a class="include-link" href="../data-structures/no-duplicates.html" title="data-structures/no-duplicates">no-duplicates</a>
      <a class="include-link" href="magic-ev.html" title="magic-ev">magic-ev</a>
      <a class="include-link" href="../std/util/defaggregate.html" title="std/util/defaggregate">defaggregate</a>
      <a class="include-link" href="../std/util/defines.html" title="std/util/defines">defines</a>
      <a class="include-link" href="meta-extract-user.html" title="meta-extract-user">meta-extract-user</a>
      <a class="include-link" href="../tools/easy-simplify.html" title="tools/easy-simplify">easy-simplify</a>
    </div>
  </div>

<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block include-book" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="use-by-hint.html" title="Open use-by-hint">"use-by-hint"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="generalize.html" title="Open generalize">"generalize"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="unify-subst.html" title="Open unify-subst">"unify-subst"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../std/util/bstar.html" title="Open std/util/bstar">"std/util/bstar"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="ev-theoremp.html" title="Open ev-theoremp">"ev-theoremp"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../tools/def-functional-instance.html" title="Open tools/def-functional-instance">"tools/def-functional-instance"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../data-structures/no-duplicates.html" title="Open data-structures/no-duplicates">"data-structures/no-duplicates"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="magic-ev.html" title="Open magic-ev">"magic-ev"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../std/util/defaggregate.html" title="Open std/util/defaggregate">"std/util/defaggregate"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../std/util/defines.html" title="Open std/util/defines">"std/util/defines"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="meta-extract-user.html" title="Open meta-extract-user">"meta-extract-user"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../tools/easy-simplify.html" title="Open tools/easy-simplify">"tools/easy-simplify"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-set-inhibit-warnings" data-sym="SET-INHIBIT-WARNINGS">set-inhibit-warnings</a> <span class="string">"theory"</span>)</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc witness-cp
  <span class="keyword">:parents</span> (proof-automation)
  <span class="keyword">:short</span> <span class="string">"Clause processor for quantifier-based reasoning."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;h3&gt;Introduction&lt;/h3&gt;

&lt;p&gt;&lt;b&gt;Witness-cp&lt;/b&gt; is an extensible @(see clause-processor) that can apply
user-supplied rules to carry out &lt;i&gt;witnessing transformations&lt;/i&gt; on
quantifier-like terms in ACL2 proof goals.&lt;/p&gt;

&lt;p&gt;Witness-cp is a general purpose tool that you can configure to work with any
kinds of quantifiers.  As a familiar example, consider set reasoning.  If we
encounter some proof goal with a hypothesis of the form:&lt;/p&gt;

@({
   (subsetp-equal x y)
})

&lt;p&gt;then we may want to use this hypothesis to draw specific conclusions, such
as:&lt;/p&gt;

@({
    (implies (member-equal k x)
             (member-equal k y))
})

&lt;p&gt;for various @(&#39;k&#39;).  Similarly if we have a hypothesis of the form:&lt;/p&gt;

@({
    (not (subsetp-equal y z))
})

&lt;p&gt;then we may wish to conclude facts such as:&lt;/p&gt;

@({
    (and (member-equal j y)
         (not (member-equal j z)))
})

&lt;p&gt;for various @(&#39;j&#39;).  Many theorems in set theory can be proven by choosing
suitable @(&#39;j&#39;) and @(&#39;k&#39;) and then carrying out membership reasoning.  The
@(&#39;witness-cp&#39;) clause processor can be configured to automatically try such
@(&#39;j&#39;) and @(&#39;k&#39;) in reasonably smart ways.&lt;/p&gt;

&lt;p&gt;More broadly, @(&#39;witness-cp&#39;) is a general purpose tool that can configured
to reason about arbitrary quantified formulas.  It knows nothing &lt;i&gt;a
priori&lt;/i&gt; about set theory or any other domain, but it can be told about what
predicates are to be taken as universal/existential quantifiers and how they
should be instantiated.&lt;/p&gt;


&lt;h3&gt;Usage&lt;/h3&gt;

&lt;p&gt;There are two steps to using @(&#39;witness-cp&#39;).  First, we must configure it
to understand the desired domain, e.g., for set theory, we would need to
explain that @(&#39;subsetp-equal&#39;) is the universal quantification of
@(&#39;member-equal&#39;).  Once the domain is configured, we can instruct ACL2 to
apply the @(&#39;witness-cp&#39;) clause processor to particular goals that we want to
solve; this is typically done with an explicit @(see witness) hint or via @(see
default-hints).&lt;/p&gt;

&lt;p&gt;At a high level, when @(&#39;witness-cp&#39;) transforms a proof goal, it carries
out the following steps, each of which need to be configured to understand your
domain:&lt;/p&gt;

&lt;ol&gt;

&lt;li&gt;&lt;b&gt;Witnessing&lt;/b&gt;.  Introduce witnesses for negative occurrences of
universally quantified predicates and positive occurrences of existentially
quantified ones.  Then, optionally, for better readability, generalize the
newly introduced witness terms into fresh variables.  These steps can be
controlled with @(see defwitness).&lt;/li&gt;

&lt;li&gt;&lt;b&gt;Gathering&lt;/b&gt;. Find the set of examples with which to instantiate
positive universally quantified and negative existentially quantified
predicates.  The predicates to target are controlled by @(see
definstantiate).&lt;/li&gt;

&lt;li&gt;&lt;b&gt;Instantiation&lt;/b&gt;.  Instantiate these predicates with these examples.
The examples are set up using @(see defexample).&lt;/li&gt;

&lt;/ol&gt;

&lt;p&gt;Note that witness introduction and instantiation may both be lossy, i.e.,
they may result in a formula that isn&#39;t a theorem even if the original formula
is one!&lt;/p&gt;


&lt;h3&gt;Extended Example: Set Theory&lt;/h3&gt;

&lt;p&gt;We now run through a typical example of setting up @(&#39;witness-cp&#39;) to
understand some functions from set theory.&lt;/p&gt;

&lt;h5&gt;Configuring Witnessing&lt;/h5&gt;

&lt;p&gt;To set up witnessing for @(&#39;(not (subsetp-equal a b))&#39;) hypotheses, we can
issue the following @(see defwitness) event.  We assume here that
@(&#39;(subsetp-equal-witness a b)&#39;) is a suitable ``badguy&#39;&#39; function that finds a
member of @(&#39;a&#39;) that is not in @(&#39;b&#39;), if one exists.&lt;/p&gt;

@({
    (defwitness subsetp-witnessing
      :predicate (not (subsetp-equal a b))
      :expr (and (member-equal (subsetp-equal-witness a b) a)
                 (not (member-equal (subsetp-equal-witness a b) b)))
      :generalize (((subsetp-equal-witness a b) . ssew))
      :hints (&#39;(:in-theory &#39;(subsetp-equal-witness-correct))))
})

&lt;p&gt;This instructs @(&#39;witness-cp&#39;), during the witnessing phase, to search for
hypotheses of the form @(&#39;(not (subsetp-equal a b))&#39;).  For any such matches,
@(&#39;witness-cp&#39;) will add the new hypothesis:&lt;/p&gt;

@({
   (and (member-equal (subsetp-equal-witness a b) a)
        (not (member-equal (subsetp-equal-witness a b) b)))
})

&lt;p&gt;and will then generalize away the term @(&#39;(subsetp-equal-witness a b)&#39;) to a
fresh variable with a name like @(&#39;SSEW0&#39;), @(&#39;SSEW1&#39;), etc.  After this
generalization we are left with two new hyps:&lt;/p&gt;

@({
     (member-equal ssew0 a)
     (not (member-equal ssew0 b))
})

&lt;p&gt;The net result of all of this is that we have replaced an existential
assumption with a fresh variable witnessing it.  We wrap @(&#39;(hide ...)&#39;) around
the original hypothesis to leave a trace of what we&#39;ve done.  (Otherwise, it
would likely be rewritten away, since the two new hyps imply it.)&lt;/p&gt;

&lt;p&gt;Why is it sound to add these new hypotheses to our main formula?  To justify
this step, the @(see defwitness) event requires us to prove the following
theorem, using the provided hints:&lt;/p&gt;

@({
   (implies (not (subsetp-equal a b))
            (and (member-equal (subsetp-equal-witness a b) a)
                 (not (member-equal (subsetp-equal-witness a b) b))))
})


&lt;h5&gt;Configuring Gathering&lt;/h5&gt;

&lt;p&gt;To set up instantiation of a @(&#39;(subsetp-equal a b)&#39;) hypotheses, we can
issue the following @(see definstantiate) event.&lt;/p&gt;

@({
    (definstantiate subsetp-equal-instancing
      :predicate (subsetp-equal a b)
      :vars (k)
      :expr (implies (member-equal k a)
                     (member-equal k b))
      :hints (&#39;(:in-theory &#39;(subsetp-member))))
})

&lt;p&gt;This will mean that, for each @(&#39;(subsetp-equal a b)&#39;) hypothesis we find,
we&#39;ll add hypotheses of the form:&lt;/p&gt;

@({
     (implies (member-equal k a)
              (member-equal k b))
})

&lt;p&gt;for each of (possibly) several @(&#39;k&#39;).  The terms we use to instantiate
@(&#39;k&#39;) are determined by @(see defexample); see below.&lt;/p&gt;

&lt;p&gt;To show that it sound to add these hypotheses, the @(see definstantiate)
event requires us to prove:&lt;/p&gt;

@({
    (implies (subsetp-equal a b)
             (implies (member-equal k a)
                      (member-equal k b)))
})

&lt;p&gt;This is a very easy proof: it is just the quantifier-based definition of
@(&#39;subsetp-equal&#39;).&lt;/p&gt;


&lt;h5&gt;Configuring Instantiation&lt;/h5&gt;

&lt;p&gt;The terms used to instantiate @(&#39;k&#39;) above are determined by @(see
defexample) rules, like the following:&lt;/p&gt;

@({
    (defexample subsetp-member-template
      :pattern (member-equal k a)
      :templates (k)
      :instance-rulename subsetp-equal-instancing)
})

&lt;p&gt;This rule means that, after the gathering phase, we&#39;ll look through the
clause for expressions @(&#39;(member-equal k a)&#39;) and, whenever we find one,
include @(&#39;k&#39;) in the list of examples to use for instantiating using the
@(&#39;subsetp-equal-instance&#39;) rule.&lt;/p&gt;

&lt;p&gt;@(&#39;Defexample&#39;) doesn&#39;t require any proof obligation; it&#39;s just a heuristic
that adds to the set of terms used to instantiate universal quantifiers.&lt;/p&gt;


&lt;h5&gt;Applying the Clause Processor&lt;/h5&gt;

&lt;p&gt;To use the scheme we&#39;ve introduced for reasoning about @(&#39;subsetp-equal&#39;),
we can introduce a &lt;b&gt;witness ruleset&lt;/b&gt;:&lt;/p&gt;

@({
   (def-witness-ruleset subsetp-witnessing-rules
     &#39;(subsetp-witnessing
       subsetp-equal-instancing
       subsetp-member-template))
})

&lt;p&gt;Then when we want to use this reasoning strategy, we can give a hint.  You
should not call @(&#39;witness-cp&#39;) directly, but rather using the @(see witness)
macro as a computed hint.  For example:&lt;/p&gt;

@({
    :hints ((witness :ruleset subsetp-witnessing-rules))
})

&lt;p&gt;This implicitly waits until the formula is @(see
stable-under-simplificationp) and then invokes the @(&#39;witness-cp&#39;) clause
processor, allowing it to use the witnessing/instancing/example rules
listed.&lt;/p&gt;

&lt;p&gt;You may find it useful to define a macro so that you don&#39;t have to remember
this syntax, for instance:&lt;/p&gt;

@({
   (defmacro subset-reasoning ()
     &#39;(witness :ruleset subsetp-witnessing-rules))

   (defthm foo
     ...
     :hints ((&quot;goal&quot; ...)
             (subset-reasoning)))
})


&lt;h3&gt;Further Resources&lt;/h3&gt;

&lt;p&gt;Additional documentation is available for @(see defwitness), @(see
definstantiate), and @(see defexample). Also see @(see defquantexpr), which is
a shortcut for the common pattern (as above) of doing both a defwitness and
definstantiate for a certain term, and @(see defquant), which defines a
quantified function (using @(see defun-sk)) and sets up
defwitness/definstantiate rules for it.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block local" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../axioms.html#def-state-p1-forward" data-sym="STATE-P1-FORWARD">state-p1-forward</a>)))</pre>
  </div>

<div class="form-block local" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a>
      <a class="sym-link system" href="../../axioms.html#def-default-car" data-sym="DEFAULT-CAR">default-car</a>
      <a class="sym-link system" href="../../axioms.html#def-default-cdr" data-sym="DEFAULT-CDR">default-cdr</a>
      <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>
      <a class="sym-link system" href="../../axioms.html#def-default-_2B-2" data-sym="DEFAULT-+-2">default-+-2</a>
      <a class="sym-link system" href="../../axioms.html#def-default-_2B-1" data-sym="DEFAULT-+-1">default-+-1</a>
      <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>
      pseudo-term-listp
      <a class="sym-link system" href="../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a>
      <a class="sym-link system" href="../../axioms.html#def-nth" data-sym="NTH">nth</a>
      <a class="sym-link external" href="../data-structures/no-duplicates.html#def-intersectp-equal-non-cons" data-sym="INTERSECTP-EQUAL-NON-CONS">intersectp-equal-non-cons</a>
      substitute-into-term
      <a class="sym-link system" href="../../axioms.html#def-state-p-implies-and-forward-to-state-p1" data-sym="STATE-P-IMPLIES-AND-FORWARD-TO-STATE-P1">state-p-implies-and-forward-to-state-p1</a>
      <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a>
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a>))))</pre>
  </div>

<div class="form-block local" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> alistp-append
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> a) (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> b)) (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> a b)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>)))))</pre>
  </div>

<div class="form-block local" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symbol-listp-of-append
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> x) (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> y))
      (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> x y)))))</pre>
  </div>

<div class="form-block local" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> strip-cdrs-of-append
    (equal (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
      (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> a) (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> b)))))</pre>
  </div>

<div class="form-block local" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> member-equal-of-append
    (<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a> (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> x (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> x a) (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> x b)))))</pre>
  </div>

<div class="form-block local" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-append
    (equal (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> a b)) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> a) (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> b)))))</pre>
  </div>

<div class="form-block local" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> strip-cdrs-pairlis$
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> a) (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> b)) (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> b))
      (equal (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> a b)) b))))</pre>
  </div>

<div class="form-block local" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-strip-cars (equal (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> x)) (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> x))))</pre>
  </div>

<div class="form-block local" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-strip-cdrs (equal (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> x)) (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> x))))</pre>
  </div>

<div class="form-block local" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> strip-cdrs-pairlis
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> a) (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> b)) (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> b))
      (equal (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> a b)) b))))</pre>
  </div>

<div class="form-block local" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> pseudo-term-listp-true-listp
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (pseudo-term-listp x) (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x))))</pre>
  </div>

<div class="form-block local" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> pseudo-term-list-listp-true-listp
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a> x) (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a>)))))</pre>
  </div>

<div class="form-block local" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> alistp-implies-true-listp
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> x) (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>)))))</pre>
  </div>

<div class="form-block local" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pseudo-term-list-listp-append
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a> a) (<a class="sym-link system" href="../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a> b))
      (<a class="sym-link system" href="../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> a b)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a>)))))</pre>
  </div>

<div class="form-block local" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> strip-cars-of-append
    (equal (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
      (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> a) (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> b)))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../defthm.html#def-defevaluator" data-sym="DEFEVALUATOR">defevaluator</a> witness-ev
  witness-ev-lst
  ((if a
     b
     c) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> a)
    (equal a b)
    (<a class="sym-link external" href="use-by-hint.html#def-use-these-hints" data-sym="USE-THESE-HINTS">use-these-hints</a> x)
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> a b)
    (<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> x)
    (cons a b)
    (binary-+ a b)
    (typespec-check ts x)
    (<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a> a b))
  <span class="keyword">:namedp</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="meta-extract-user.html#def-def-meta-extract" data-sym="DEF-META-EXTRACT">def-meta-extract</a> witness-ev witness-ev-lst)</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="ev-theoremp.html#def-def-ev-theoremp" data-sym="DEF-EV-THEOREMP">def-ev-theoremp</a> witness-ev)</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="unify-subst.html#def-def-unify" data-sym="DEF-UNIFY">def-unify</a> witness-ev witness-ev-alist)</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection dumb-negate-lit-lemmas
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> witness-ev-of-dumb-negate-lit
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> lit)
      (<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a> (witness-ev (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> lit) a)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev lit a))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pseudo-termp-dumb-negate-lit
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> lit)
      (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> lit)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> pseudo-term-listp))))
  (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a>)))</pre>
  </div>

<div class="form-block function" id="def-assert-msg" data-defines="ASSERT-MSG" data-references="CONS,CDR,CAR,ATOM,IF,ALIST,STR,MV,B*,T,XARGS,DECLARE,ARG,MSG,DEFUN" data-used-by="ASSERTS-MACRO" data-part-name="ASSERT-MSG" data-part-args="ARG,MSG" data-part-declare="T,XARGS,DECLARE" data-part-body="ARG,CONS,CDR,CAR,MSG,ATOM,IF,ALIST,STR,MV,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ASSERT-MSG">assert-msg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-assert-msg" data-sym="ASSERT-MSG" title="(defun assert-msg (msg arg)
  (declare (xargs :guard t))
  (b*
   (((mv str alist)
     (if (atom msg)
...">assert-msg</a>
  (<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> arg)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> str alist) (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> <a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a>)
         (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> nil)
         (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (car <a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a>) (cdr <a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a>)))))
    (cons str (cons (cons #\t arg) alist))))</pre>
  </div>

<div class="form-block function" id="def-asserts-macro" data-defines="ASSERTS-MACRO" data-references="QUOTE,ASSERT-MSG,CW,OR,AND,QUASIQUOTE,T,ATOM,IF,TERMS,MSG,DEFUN" data-part-name="ASSERTS-MACRO" data-part-args="TERMS,MSG" data-part-body="QUOTE,ASSERT-MSG,CW,OR,AND,QUASIQUOTE,T,TERMS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ASSERTS-MACRO">asserts-macro</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-asserts-macro" data-sym="ASSERTS-MACRO" title="(defun asserts-macro (msg terms)
  (if (atom terms)
      t
      `(and (or ,(car terms) (cw &quot;~@0~%&quot; (assert-msg ,msg &#39;,(car terms))))
            ,(asserts-macro msg (cdr terms)))))">asserts-macro</a>
  (<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> terms)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> terms)
    <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> ,(CAR TERMS)
        (<a class="sym-link system" href="../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"~@0~%"</span> (<a class="sym-link local-def" href="#def-assert-msg" data-sym="ASSERT-MSG" title="(defun assert-msg (msg arg)
  (declare (xargs :guard t))
  (b*
   (((mv str alist)
     (if (atom msg)
...">assert-msg</a> ,MSG ',(CAR TERMS))))
      ,(ASSERTS-MACRO MSG (CDR TERMS)))))</pre>
  </div>

<div class="form-block macro" id="def-asserts" data-defines="ASSERTS" data-references="LET,QUASIQUOTE,TERMS,&REST,MSG,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ASSERTS">asserts</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-asserts" data-sym="ASSERTS" title="(defmacro asserts (msg &amp;rest terms)
  `(let ((msg ,msg))
     ,(asserts-macro &#39;msg terms)))">asserts</a>
  (<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> &amp;rest terms)
  `(let ((<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> ,MSG))
    ,(ASSERTS-MACRO &#39;MSG TERMS)))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defaggregate wcp-witness-rule
  ((name symbolp) (enabledp)
    (term <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)
    (expr <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)
    restriction
    (theorem symbolp)
    (generalize (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> generalize)
        (pseudo-term-listp (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> generalize))
        (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> generalize))))))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defaggregate wcp-instance-rule
  ((name symbolp) (enabledp)
    (pred <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)
    (vars (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> vars)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-intersectp-equal" data-sym="INTERSECTP-EQUAL">intersectp-equal</a> vars (simple-term-vars pred)))))
    (expr <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)
    (restriction <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)
    (theorem symbolp)))</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-instance-rulesp
  (x)
  (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-instance-rule-p (car x))
      (wcp-instance-rulesp (cdr x))))
  ///
  (<a class="sym-link external" href="../tools/easy-simplify.html#def-defopen" data-sym="DEFOPEN">defopen</a> wcp-instance-rulesp-when-consp
    (wcp-instance-rulesp x)
    <span class="keyword">:hyp</span> (consp x)
    <span class="keyword">:hint</span> (<span class="keyword">:expand</span> ((wcp-instance-rulesp x)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:backchain-limit-lst</span> <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defaggregate wcp-template
  ((name symbolp) (enabledp)
    (pat <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)
    (templ pseudo-term-listp)
    (rulenames <a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>)
    (restriction <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)))</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-templatesp
  (templates)
  (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> templates)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-template-p (car templates))
      (wcp-templatesp (cdr templates))))
  ///
  (<a class="sym-link external" href="../tools/easy-simplify.html#def-defopen" data-sym="DEFOPEN">defopen</a> wcp-templatesp-when-consp
    (wcp-templatesp templates)
    <span class="keyword">:hyp</span> (consp templates)
    <span class="keyword">:hint</span> (<span class="keyword">:expand</span> ((wcp-templatesp templates)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:backchain-limit-lst</span> <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-44" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defaggregate wcp-example-app
  ((instrule wcp-instance-rule-p) (bindings (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (pseudo-term-listp bindings)
        (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> bindings)
          (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (wcp-instance-rule-&gt;vars instrule)))))))</pre>
  </div>

<div class="form-block other" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-witness-rulesp
  (x)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> x nil)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-witness-rule-p (car x))
      (wcp-witness-rulesp (cdr x))))
  ///
  (<a class="sym-link external" href="../tools/easy-simplify.html#def-defopen" data-sym="DEFOPEN">defopen</a> wcp-witness-rulesp-when-consp
    (wcp-witness-rulesp x)
    <span class="keyword">:hyp</span> (consp x)
    <span class="keyword">:hint</span> (<span class="keyword">:expand</span> ((wcp-witness-rulesp x)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:backchain-limit-lst</span> <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-example-appsp
  (x)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> x nil)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-example-app-p (car x))
      (wcp-example-appsp (cdr x))))
  ///
  (<a class="sym-link external" href="../tools/easy-simplify.html#def-defopen" data-sym="DEFOPEN">defopen</a> wcp-example-appsp-when-consp
    (wcp-example-appsp x)
    <span class="keyword">:hyp</span> (consp x)
    <span class="keyword">:hint</span> (<span class="keyword">:expand</span> ((wcp-example-appsp x)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:backchain-limit-lst</span> <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defaggregate wcp-lit-actions
  ((witnesses wcp-witness-rulesp) (examples wcp-example-appsp)))</pre>
  </div>

<div class="form-block other" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-lit-actions-listp
  (x)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> x nil)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-lit-actions-p (car x))
      (wcp-lit-actions-listp (cdr x))))
  ///
  (<a class="sym-link external" href="../tools/easy-simplify.html#def-defopen" data-sym="DEFOPEN">defopen</a> wcp-lit-actions-listp-when-consp
    (wcp-lit-actions-listp x)
    <span class="keyword">:hyp</span> (consp x)
    <span class="keyword">:hint</span> (<span class="keyword">:expand</span> ((wcp-lit-actions-listp x)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:backchain-limit-lst</span> <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-49" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-match-implication
  ((hyp <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (concl <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)
    (thmname symbolp)
    state)
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> ((<a class="sym-link system" href="../../history-management.html#def-formula" data-sym="FORMULA">formula</a> (meta-extract-formula thmname state)))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (consp <a class="sym-link system" href="../../history-management.html#def-formula" data-sym="FORMULA">formula</a>)
      (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="../../history-management.html#def-formula" data-sym="FORMULA">formula</a>)
      (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="../../history-management.html#def-formula" data-sym="FORMULA">formula</a>) '<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a>)
      (equal (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="../../history-management.html#def-formula" data-sym="FORMULA">formula</a>) hyp)
      (equal (<a class="sym-link system" href="../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> <a class="sym-link system" href="../../history-management.html#def-formula" data-sym="FORMULA">formula</a>) concl)))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> wcp-match-implication-implies
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-match-implication hyp concl thmname st)
        (witness-ev-meta-extract-global-facts)
        (equal (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> st) (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))
        (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> hyp)
        (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> concl)
        (witness-ev hyp a))
      (witness-ev concl a))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> witness-ev-meta-extract-formula (name thmname)))
       <span class="keyword">:in-theory</span> (disable witness-ev-meta-extract-formula))))
  (<a class="sym-link system" href="../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> wcp-match-implication-implies-inv
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-match-implication hyp concl thmname st)
        (witness-ev-meta-extract-global-facts)
        (equal (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> st) (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))
        (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> hyp)
        (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> concl)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev concl a)))
      (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev hyp a)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> witness-ev-meta-extract-formula (name thmname)))
       <span class="keyword">:in-theory</span> (disable witness-ev-meta-extract-formula)))))</pre>
  </div>

<div class="form-block other" id="form-50" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define witness-generalize-alist
  ((generalize-map <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>) (alist <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>))
  <span class="keyword">:guard</span> (pseudo-term-listp (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> generalize-map))
  (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (substitute-into-list (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> generalize-map) alist)
    (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> generalize-map))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> alistp-witness-generalize-alist
    (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (witness-generalize-alist generalize-map alist))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symbol-listp-cdrs-witness-generalize-alist
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> generalize-map))
      (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (witness-generalize-alist generalize-map alist)))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pseudo-term-listp-cars-of-witness-generalize-alist
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (pseudo-term-listp (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> generalize-map))
        (pseudo-term-substp alist))
      (pseudo-term-listp (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (witness-generalize-alist generalize-map alist))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable pseudo-term-listp)))))</pre>
  </div>

<div class="form-block other" id="form-51" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-lit-apply-witness
  ((lit <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (rule wcp-witness-rule-p) state)
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (new-lit pseudo-term-listp
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable pseudo-term-listp))))
    (genmap (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> genmap)
        (pseudo-term-listp (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> genmap))
        (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genmap)))))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((wcp-witness-rule rule) rule) ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-witness-rule-p rule) (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> lit))))) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> unify-ok alist) (simple-one-way-unify rule.term lit nil))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> unify-ok)) (raise <span class="string">"Witness rule ~x0 can&#39;t be applied to literal ~x1~%"</span>
          rule.name
          lit)
        (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
      ((unless (wcp-match-implication rule.expr
           rule.term
           rule.theorem
           state)) (raise <span class="string">"In witness rule ~x0, the theorem name ~x1 did not have the correct form!"</span>
          rule.name
          rule.theorem)
        (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
      (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-boundp-global" data-sym="BOUNDP-GLOBAL">boundp-global</a> <span class="keyword">:witness-cp-debug</span> state)
          (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> <span class="keyword">:witness-cp-debug</span>)
          (<a class="sym-link system" href="../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"Applying witness rule ~x0 to literal ~x1~%"</span>
            rule.name
            lit)))
      (genmap (witness-generalize-alist rule.generalize alist))
      (new-lit (substitute-into-term rule.expr alist)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> new-lit) genmap))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> wcp-lit-apply-witness-correct
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> newlits ?gen) (wcp-lit-apply-witness lit rule st)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev lit a))
          (witness-ev-meta-extract-global-facts)
          (equal (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> st) (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> newlits) a))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
       <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (wcp-match-implication-implies)
         (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> <a class="sym-link system" href="../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a>
           substitute-into-term
           pseudo-term-listp
           simple-one-way-unify
           simple-term-vars
           <a class="sym-link system" href="../../axioms.html#def-nth" data-sym="NTH">nth</a>))))
    <span class="keyword">:otf-flg</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block other" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-lit-apply-witnesses
  ((lit <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (rules wcp-witness-rulesp) state)
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (newlits pseudo-term-listp
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable pseudo-term-listp <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>))))
    (genmap (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> genmap)
        (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genmap))
        (pseudo-term-listp (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> genmap)))))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> rules)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)) ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> newlit1 genal1) (wcp-lit-apply-witness lit (car rules) state))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> newlits genalist) (wcp-lit-apply-witnesses lit (cdr rules) state)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> newlit1 newlits) (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> genal1 genalist)))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> wcp-lit-apply-witnesses-correct
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> newlits ?genmap) (wcp-lit-apply-witnesses lit rules st)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev lit a))
          (witness-ev-meta-extract-global-facts)
          (equal (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> st) (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> newlits) a))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:otf-flg</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block local" id="form-53" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> member-of-union
    (<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a> (<a class="sym-link system" href="../../axioms.html#def-member" data-sym="MEMBER">member</a> k (<a class="sym-link system" href="../../axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> x y))
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-member" data-sym="MEMBER">member</a> k x) (<a class="sym-link system" href="../../axioms.html#def-member" data-sym="MEMBER">member</a> k y)))))</pre>
  </div>

<div class="form-block local" id="form-54" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (defsection witness-ev-alist-lemmas
    (defthm-simple-term-vars-flag (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> witness-ev-remove-non-var
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> term)
            (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> var (simple-term-vars term))))
          (equal (witness-ev term (cons (cons var val) a))
            (witness-ev term a)))
        <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
           '(<span class="keyword">:expand</span> ((simple-term-vars term)))))
        <span class="keyword">:flag</span> simple-term-vars)
      (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> witness-ev-lst-remove-non-var
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (pseudo-term-listp term)
            (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> var (simple-term-vars-lst term))))
          (equal (witness-ev-lst term (cons (cons var val) a))
            (witness-ev-lst term a)))
        <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
           '(<span class="keyword">:expand</span> ((simple-term-vars-lst term)))))
        <span class="keyword">:flag</span> simple-term-vars-lst)
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (simple-term-vars-flag flag term)
         <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> pseudo-term-listp)) (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
          '(<span class="keyword">:in-theory</span> (enable witness-ev-of-fncall-args)))))
    (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> witness-ev-remove-non-vars
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> term)
          (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-intersectp-equal" data-sym="INTERSECTP-EQUAL">intersectp-equal</a> vars (simple-term-vars term))))
        (equal (witness-ev term (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> vars vals) a))
          (witness-ev term a))))
    (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> witness-ev-alist-append
      (equal (witness-ev-alist (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> al1 al2) a)
        (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (witness-ev-alist al1 a) (witness-ev-alist al2 a))))
    (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> witness-ev-alist-of-pairlis$
      (equal (witness-ev-alist (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> keys vals) a)
        (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> keys (witness-ev-lst vals a))))))</pre>
  </div>

<div class="form-block other" id="form-55" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-lit-apply-example
  ((lit <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (example wcp-example-app-p) state)
  <span class="keyword">:returns</span> (new-lit? pseudo-term-listp
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable pseudo-term-listp))))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((unless (<a class="sym-link system" href="../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-example-app-p example) (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> lit)))) nil) ((wcp-example-app ex) example)
      ((wcp-instance-rule inst) ex.instrule)
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> unify-ok alist) (simple-one-way-unify inst.pred lit nil))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> unify-ok)) (raise <span class="string">"Couldn&#39;t apply instance rule ~x0 to literal ~x1~%"</span>
          inst.name
          lit))
      ((unless (wcp-match-implication inst.expr
           inst.pred
           inst.theorem
           state)) (raise <span class="string">"In instancing rule ~x0, the theorem name ~x1 did not have the correct form!"</span>
          inst.name
          inst.theorem))
      (full-alist (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> inst.vars ex.bindings) alist))
      (new-lit (substitute-into-term inst.expr full-alist)))
    (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> new-lit))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> wcp-lit-apply-example-correct
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> ((new-lits (wcp-lit-apply-example lit example st)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev lit a))
          (witness-ev-meta-extract-global-facts)
          (equal (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> st) (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> new-lits) a))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable wcp-match-implication-implies-inv)))))</pre>
  </div>

<div class="form-block other" id="form-56" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-lit-apply-examples
  ((lit <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (examples wcp-example-appsp) state)
  <span class="keyword">:returns</span> (new-lits pseudo-term-listp
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable pseudo-term-listp))))
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> examples)
    nil
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (wcp-lit-apply-example lit (car examples) state)
      (wcp-lit-apply-examples lit (cdr examples) state)))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> wcp-lit-apply-examples-correct
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> ((new-lits (wcp-lit-apply-examples lit example st)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev lit a))
          (witness-ev-meta-extract-global-facts)
          (equal (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> st) (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> new-lits) a))))))</pre>
  </div>

<div class="form-block other" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-lit-apply-actions
  ((lit <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (actions wcp-lit-actions-p) state)
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (newlits pseudo-term-listp)
    (genmap (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> genmap)
        (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genmap))
        (pseudo-term-listp (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> genmap)))))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> wlits gen-alist) (wcp-lit-apply-witnesses lit
         (wcp-lit-actions-&gt;witnesses actions)
         state)) (elits (wcp-lit-apply-examples lit
          (wcp-lit-actions-&gt;examples actions)
          state)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> wlits elits) gen-alist))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> wcp-lit-apply-actions-correct
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> new-lits ?genalist) (wcp-lit-apply-actions lit actions st)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev lit a))
          (witness-ev-meta-extract-global-facts)
          (equal (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> st) (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> new-lits) a))))))</pre>
  </div>

<div class="form-block other" id="form-58" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-clause-apply-actions
  ((clause pseudo-term-listp) (actions wcp-lit-actions-listp)
    state)
  <span class="keyword">:guard</span> (equal (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> clause) (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> actions))
  <span class="keyword">:guard-hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable pseudo-term-listp <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)))
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (new-clause pseudo-term-listp
      <span class="keyword">:hyp</span> (pseudo-term-listp clause)
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable pseudo-term-listp <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>))))
    (genmap (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> genmap)
        (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genmap))
        (pseudo-term-listp (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> genmap)))))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> clause)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)) ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> first-newlits first-genalist) (wcp-lit-apply-actions (car clause) (car actions) state))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> rest-newclause rest-genalist) (wcp-clause-apply-actions (cdr clause) (cdr actions) state))
      (lit (if first-newlits
          `(<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> ,(CAR CLAUSE))
          (car clause))))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cons lit (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> first-newlits rest-newclause))
      (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> first-genalist rest-genalist)))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> wcp-clause-apply-actions-correct
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> new-clause ?genalist) (wcp-clause-apply-actions clause actions st)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> clause) a))
          (witness-ev-meta-extract-global-facts)
          (equal (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> st) (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> new-clause) a))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x) (<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> x)))))))</pre>
  </div>

<div class="form-block function" id="def-witness-ev-replace-alist-to-bindings" data-defines="WITNESS-EV-REPLACE-ALIST-TO-BINDINGS" data-references="CDR,CAAR,WITNESS-EV,CDAR,CONS,ATOM,IF,BINDINGS,ALIST,DEFUN" data-part-name="WITNESS-EV-REPLACE-ALIST-TO-BINDINGS" data-part-args="BINDINGS,ALIST" data-part-body="CDR,WITNESS-EV-REPLACE-ALIST-TO-BINDINGS,BINDINGS,CAAR,WITNESS-EV,CDAR,CONS,ALIST,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITNESS-EV-REPLACE-ALIST-TO-BINDINGS">witness-ev-replace-alist-to-bindings</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-witness-ev-replace-alist-to-bindings" data-sym="WITNESS-EV-REPLACE-ALIST-TO-BINDINGS" title="(defun witness-ev-replace-alist-to-bindings (alist bindings)
  (if (atom alist)
      nil
      (cons (cons (cdar alist) (witness-ev (caar alist) bindings))
            (witness-ev-replace-alist-to-bindings (cdr alist) bindings))))">witness-ev-replace-alist-to-bindings</a>
  (alist bindings)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> alist)
    nil
    (cons (cons (<a class="sym-link system" href="../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) (witness-ev (<a class="sym-link system" href="../../axioms.html#def-caar" data-sym="CAAR">caar</a> alist) bindings))
      (<a class="sym-link local-def" href="#def-witness-ev-replace-alist-to-bindings" data-sym="WITNESS-EV-REPLACE-ALIST-TO-BINDINGS" title="(defun witness-ev-replace-alist-to-bindings (alist bindings)
  (if (atom alist)
      nil
      (cons (cons (cdar alist) (witness-ev (caar alist) bindings))
            (witness-ev-replace-alist-to-bindings (cdr alist) bindings))))">witness-ev-replace-alist-to-bindings</a> (cdr alist) bindings))))</pre>
  </div>

<div class="form-block other" id="form-60" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../tools/def-functional-instance.html#def-def-functional-instance" data-sym="DEF-FUNCTIONAL-INSTANCE">def-functional-instance</a> witness-ev-disjoin-replace-subterms-list
  disjoin-replace-subterms-list
  ((replace-alist-to-bindings <a class="sym-link local-def" href="#def-witness-ev-replace-alist-to-bindings" data-sym="WITNESS-EV-REPLACE-ALIST-TO-BINDINGS" title="(defun witness-ev-replace-alist-to-bindings (alist bindings)
  (if (atom alist)
      nil
      (cons (cons (cdar alist) (witness-ev (caar alist) bindings))
            (witness-ev-replace-alist-to-bindings (cdr alist) bindings))))">witness-ev-replace-alist-to-bindings</a>) (gen-eval witness-ev)
    (gen-eval-lst witness-ev-lst))
  <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
     '(<span class="keyword">:in-theory</span> (enable witness-ev-of-fncall-args)))))</pre>
  </div>

<div class="form-block other" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define make-non-dup-vars
  ((x <a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>) (avoid <a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>))
  <span class="keyword">:returns</span> (vars <a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (let ((newvar (make-n-vars <span class="number">1</span>
           (if (<a class="sym-link system" href="../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (symbolp (car x)))
             (car x)
             'x)
           <span class="number">0</span>
           avoid)))
      (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> newvar
        (make-non-dup-vars (cdr x) (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> newvar avoid)))))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> make-non-dup-vars-not-nil
    (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> nil (make-non-dup-vars x avoid))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-make-non-dup-vars
    (equal (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (make-non-dup-vars x avoid)) (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> x)))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> no-intersect-make-non-dup-vars
    (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-intersectp-equal" data-sym="INTERSECTP-EQUAL">intersectp-equal</a> avoid (make-non-dup-vars x avoid)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (make-non-dup-vars x avoid)) (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:use</span> ((<span class="keyword">:instance</span> make-n-vars-not-in-avoid
             (n <span class="number">1</span>)
             (base (if (symbolp (car x))
                 (car x)
                 'x))
             (m <span class="number">0</span>)
             (avoid-lst avoid)))
          <span class="keyword">:in-theory</span> (disable make-n-vars-not-in-avoid)))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> no-duplicates-make-non-dup-vars
    (<a class="sym-link system" href="../../axioms.html#def-no-duplicatesp-equal" data-sym="NO-DUPLICATESP-EQUAL">no-duplicatesp-equal</a> (make-non-dup-vars x avoid))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:use</span> ((<span class="keyword">:instance</span> no-intersect-make-non-dup-vars
             (x (cdr x))
             (avoid (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (make-n-vars <span class="number">1</span>
                   (if (symbolp (car x))
                     (car x)
                     'x)
                   <span class="number">0</span>
                   avoid)
                 avoid))))
          <span class="keyword">:in-theory</span> (disable no-intersect-make-non-dup-vars))))))</pre>
  </div>

<div class="form-block local" id="form-62" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> alistp-pairlis$
    (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> a b))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>)))))</pre>
  </div>

<div class="form-block other" id="form-63" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-fix-generalize-alist
  ((alist (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> alist) (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> alist)))) (used-vars <a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>))
  <span class="keyword">:returns</span> (genalist (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> genalist)
      (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-intersectp-equal" data-sym="INTERSECTP-EQUAL">intersectp-equal</a> used-vars (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genalist)))
      (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genalist))
      (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> nil (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genalist)))
      (<a class="sym-link system" href="../../axioms.html#def-no-duplicatesp-equal" data-sym="NO-DUPLICATESP-EQUAL">no-duplicatesp-equal</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genalist)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>))))
  (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> alist)
    (make-non-dup-vars (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> alist) used-vars)))</pre>
  </div>

<div class="form-block local" id="form-64" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pseudo-term-val-alistp-when-symbol-listp-strip-cdrs
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> x) (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> x)))
      (pseudo-term-val-alistp x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable pseudo-term-val-alistp <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>)))))</pre>
  </div>

<div class="form-block other" id="form-65" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-generalize-clause
  ((genalist (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> genalist) (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genalist)))) (clause pseudo-term-listp))
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-make-non-dup-vars
       (equal (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (make-non-dup-vars x avoid)) <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))) (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pseudo-term-listp-when-symbol-listp
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> x) (pseudo-term-listp x))
        <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> x)
           <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> pseudo-term-listp <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>))))))
  <span class="keyword">:returns</span> (newclause pseudo-term-listp
    <span class="keyword">:hyp</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (pseudo-term-listp clause)
      (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> genalist)
      (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> genalist))))
  (replace-subterms-list clause
    (wcp-fix-generalize-alist genalist
      (simple-term-vars-lst clause)))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> wcp-generalize-clause-correct
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-bind-free" data-sym="BIND-FREE">bind-free</a> '((a . a)) (a))
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> clause) a))
        (pseudo-term-listp clause))
      (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (witness-ev-theoremp (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> (wcp-generalize-clause genalist clause)))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> nil
         (replace-subterms-list wcp-fix-generalize-alist
           simple-term-vars-lst))
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> witness-ev-falsify
          (x (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> (wcp-generalize-clause genalist clause)))
          (a (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-witness-ev-replace-alist-to-bindings" data-sym="WITNESS-EV-REPLACE-ALIST-TO-BINDINGS" title="(defun witness-ev-replace-alist-to-bindings (alist bindings)
  (if (atom alist)
      nil
      (cons (cons (cdar alist) (witness-ev (caar alist) bindings))
            (witness-ev-replace-alist-to-bindings (cdr alist) bindings))))">witness-ev-replace-alist-to-bindings</a> (wcp-fix-generalize-alist genalist
                  (simple-term-vars-lst clause))
                a)
              a))))))))</pre>
  </div>

<div class="form-block other" id="form-66" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define witness-cp
  ((clause pseudo-term-listp) hint state)
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err
    (new-clause <a class="sym-link system" href="../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a>
      <span class="keyword">:hyp</span> (pseudo-term-listp clause)
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a>)))))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((unless (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-lit-actions-listp hint)
          (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> hint) (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> clause)))) (raise <span class="string">"The hint to witness-cp must be a list of ~x0 objects of the ~
                same length as the clause, which the following hint is not: ~
                ~x1"</span>
         'wcp-lit-actions-p
         hint)
       (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> clause))) ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> new-clause1 gen-alist) (wcp-clause-apply-actions clause hint state)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil
      (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (wcp-generalize-clause gen-alist new-clause1))))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> witness-cp-correct
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (pseudo-term-listp clause)
        (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> a)
        (witness-ev-meta-extract-global-facts)
        (witness-ev (<a class="sym-link system" href="../../axioms.html#def-conjoin-clauses" data-sym="CONJOIN-CLAUSES">conjoin-clauses</a> (<a class="sym-link system" href="../../axioms.html#def-clauses-result" data-sym="CLAUSES-RESULT">clauses-result</a> (witness-cp clause hint state)))
          (witness-ev-falsify (<a class="sym-link system" href="../../axioms.html#def-conjoin-clauses" data-sym="CONJOIN-CLAUSES">conjoin-clauses</a> (<a class="sym-link system" href="../../axioms.html#def-clauses-result" data-sym="CLAUSES-RESULT">clauses-result</a> (witness-cp clause hint state))))))
      (witness-ev (<a class="sym-link system" href="../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> clause) a))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> witness-ev-falsify
          (x (<a class="sym-link system" href="../../axioms.html#def-conjoin-clauses" data-sym="CONJOIN-CLAUSES">conjoin-clauses</a> (<a class="sym-link system" href="../../axioms.html#def-clauses-result" data-sym="CLAUSES-RESULT">clauses-result</a> (witness-cp clause hint state))))
          (a a)))))
    <span class="keyword">:rule-classes</span> <span class="keyword">:clause-processor</span>))</pre>
  </div>

<div class="form-block encapsulate" id="form-67" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> (((witness-eval-restriction <a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> state) =&gt; (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a>)))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> witness-eval-restriction
      (term alist state)
      (declare (xargs <span class="keyword">:stobjs</span> state)
        (ignore term alist state))
      (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block function" id="def-witness-eval-restriction-default" data-defines="WITNESS-EVAL-RESTRICTION-DEFAULT" data-references="MV,T,W,WORLD,QUOTE,CONS,MAGIC-EV,SYMBOL-ALISTP,PSEUDO-TERMP,AND,IF,XARGS,DECLARE,STATE,ALIST,TERM,DEFUN" data-part-name="WITNESS-EVAL-RESTRICTION-DEFAULT" data-part-args="STATE,ALIST,TERM" data-part-declare="STATE,XARGS,DECLARE" data-part-body="MV,T,STATE,W,WORLD,QUOTE,CONS,MAGIC-EV,ALIST,SYMBOL-ALISTP,TERM,PSEUDO-TERMP,AND,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITNESS-EVAL-RESTRICTION-DEFAULT">witness-eval-restriction-default</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-witness-eval-restriction-default" data-sym="WITNESS-EVAL-RESTRICTION-DEFAULT" title="(defun witness-eval-restriction-default (term alist state)
  (declare (xargs :stobjs state))
  (if (and (pseudo-termp term) (symbol-alistp alist))
      (magic-ev term (cons (cons &#39;world (w state)) alist) state t t)
      (mv &quot;guards violated&quot; nil)))">witness-eval-restriction-default</a>
  (term alist state)
  (declare (xargs <span class="keyword">:stobjs</span> state))
  (if (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> term) (<a class="sym-link system" href="../../axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> alist))
    (<a class="sym-link external" href="magic-ev.html#def-magic-ev" data-sym="MAGIC-EV">magic-ev</a> term
      (cons (cons 'world (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)) alist)
      state
      <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
      <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"guards violated"</span> nil)))</pre>
  </div>

<div class="form-block other" id="form-69" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> witness-eval-restriction
  <a class="sym-link local-def" href="#def-witness-eval-restriction-default" data-sym="WITNESS-EVAL-RESTRICTION-DEFAULT" title="(defun witness-eval-restriction-default (term alist state)
  (declare (xargs :stobjs state))
  (if (and (pseudo-termp term) (symbol-alistp alist))
      (magic-ev term (cons (cons &#39;world (w state)) alist) state t t)
      (mv &quot;guards violated&quot; nil)))">witness-eval-restriction-default</a>)</pre>
  </div>

<div class="form-block other" id="form-70" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-witnesses-for-lit
  ((lit <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (witness-rules wcp-witness-rulesp)
    state)
  <span class="keyword">:returns</span> (rules wcp-witness-rulesp)
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> witness-rules)) nil) (<a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a> (wcp-witnesses-for-lit lit (cdr witness-rules) state))
      ((unless (<a class="sym-link system" href="../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (wcp-witness-rule-p (car witness-rules)))) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
      ((wcp-witness-rule rule) (car witness-rules))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> unify-ok alist) (simple-one-way-unify rule.term lit nil))
      ((unless unify-ok) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> erp val) (if (equal rule.restriction ''<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
          (witness-eval-restriction rule.restriction alist state)))
      ((when erp) (raise <span class="string">"Evaluation of the restriction term, ~x0, produced an error: ~@1~%"</span>
          rule.restriction
          erp)
        <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> val)) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>))
    (cons (car witness-rules) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)))</pre>
  </div>

<div class="form-block other" id="form-71" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-find-instance-rule
  ((name symbolp) (inst-rules wcp-instance-rulesp))
  <span class="keyword">:returns</span> (rule (<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a> (wcp-instance-rule-p rule) rule))
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> inst-rules)
    nil
    (if (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (wcp-instance-rule-p (car inst-rules)))
        (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (wcp-instance-rule-&gt;name (car inst-rules)) name))
      (car inst-rules)
      (wcp-find-instance-rule name (cdr inst-rules)))))</pre>
  </div>

<div class="form-block other" id="form-72" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-add-example-apps
  ((bindings pseudo-term-listp) (inst-rulenames <a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>)
    (inst-rules wcp-instance-rulesp)
    (acc wcp-example-appsp))
  <span class="keyword">:returns</span> (apps wcp-example-appsp <span class="keyword">:hyp</span> (wcp-example-appsp acc))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> inst-rulenames)) acc) (rule (wcp-find-instance-rule (car inst-rulenames) inst-rules))
      (<a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a> (wcp-add-example-apps bindings
          (cdr inst-rulenames)
          inst-rules
          acc))
      ((unless (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> rule
           (<a class="sym-link system" href="../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (pseudo-term-listp bindings))
           (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (wcp-instance-rule-&gt;vars rule)) (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> bindings)))) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>))
    (cons (make-wcp-example-app <span class="keyword">:instrule</span> rule <span class="keyword">:bindings</span> bindings)
      <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)))</pre>
  </div>

<div class="form-block other" id="form-73" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-examples-for-term
  ((term <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (templates wcp-templatesp)
    (inst-rules wcp-instance-rulesp)
    (acc wcp-example-appsp)
    state)
  <span class="keyword">:returns</span> (exalist wcp-example-appsp <span class="keyword">:hyp</span> (wcp-example-appsp acc))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> templates)) acc) ((unless (<a class="sym-link system" href="../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (wcp-template-p (car templates)) (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> term)))) (wcp-examples-for-term term
          (cdr templates)
          inst-rules
          acc
          state))
      ((wcp-template tmpl) (car templates))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> tmpl.enabledp)) (wcp-examples-for-term term
          (cdr templates)
          inst-rules
          acc
          state))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> unify-ok alist) (simple-one-way-unify tmpl.pat term nil))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> unify-ok)) (wcp-examples-for-term term
          (cdr templates)
          inst-rules
          acc
          state))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> erp val) (if (equal tmpl.restriction ''<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
          (witness-eval-restriction tmpl.restriction alist state)))
      ((when erp) (raise <span class="string">"Evaluation of the restriction term, ~x0, produced an error: ~@1~%"</span>
          tmpl.restriction
          erp)
        (wcp-examples-for-term term
          (cdr templates)
          inst-rules
          acc
          state))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> val)) (wcp-examples-for-term term
          (cdr templates)
          inst-rules
          acc
          state))
      (bindings (substitute-into-list tmpl.templ alist))
      (acc (wcp-add-example-apps bindings
          tmpl.rulenames
          inst-rules
          acc)))
    (wcp-examples-for-term term
      (cdr templates)
      inst-rules
      acc
      state)))</pre>
  </div>

<div class="form-block other" id="form-74" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defines.html#def-defines" data-sym="DEFINES">defines</a> wcp-beta-reduce
  <span class="keyword">:verify-guards</span> nil
  (define wcp-beta-reduce-term
    ((x <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>))
    <span class="keyword">:returns</span> (res <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>
      <span class="keyword">:hyp</span> (<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> x)
      <span class="keyword">:hints</span> ('(<span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>))))
    <span class="keyword">:flag</span> term
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'quote))) x) (f (car x))
        (<a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> (wcp-beta-reduce-list (cdr x)))
        ((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> f)) (cons f <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>))
        (vars (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> f))
        (<a class="sym-link system" href="../../basis-b.html#def-body" data-sym="BODY">body</a> (wcp-beta-reduce-term (<a class="sym-link system" href="../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> f))))
      (substitute-into-term <a class="sym-link system" href="../../basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> vars <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>))))
  (define wcp-beta-reduce-list
    ((x pseudo-term-listp))
    <span class="keyword">:returns</span> (res pseudo-term-listp
      <span class="keyword">:hyp</span> (pseudo-term-listp x)
      <span class="keyword">:hints</span> ('(<span class="keyword">:in-theory</span> (enable pseudo-term-listp))))
    <span class="keyword">:flag</span> <a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>
    (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
      nil
      (cons (wcp-beta-reduce-term (car x))
        (wcp-beta-reduce-list (cdr x)))))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> wcp-beta-reduce-term
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> pseudo-term-listp)))))</pre>
  </div>

<div class="form-block other" id="form-75" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-set-state-ok" data-sym="SET-STATE-OK">set-state-ok</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-76" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defines.html#def-defines" data-sym="DEFINES">defines</a> wcp-collect-examples
  <span class="keyword">:verify-guards</span> nil
  (define wcp-collect-examples-term
    ((x <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (templates wcp-templatesp)
      (inst-rules wcp-instance-rulesp)
      (acc wcp-example-appsp)
      state)
    <span class="keyword">:returns</span> (res wcp-example-appsp <span class="keyword">:hyp</span> (wcp-example-appsp acc))
    <span class="keyword">:flag</span> term
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)) acc) ((when (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'quote)) acc)
        (acc (wcp-collect-examples-list (cdr x)
            templates
            inst-rules
            acc
            state)))
      (wcp-examples-for-term x templates inst-rules acc state)))
  (define wcp-collect-examples-list
    ((x pseudo-term-listp) (templates wcp-templatesp)
      (inst-rules wcp-instance-rulesp)
      (acc wcp-example-appsp)
      state)
    <span class="keyword">:returns</span> (res wcp-example-appsp <span class="keyword">:hyp</span> (wcp-example-appsp acc))
    <span class="keyword">:flag</span> <a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)) acc) (acc (wcp-collect-examples-list (cdr x)
            templates
            inst-rules
            acc
            state)))
      (wcp-collect-examples-term (car x)
        templates
        inst-rules
        acc
        state)))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> wcp-collect-examples-term
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((<a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> x) (pseudo-term-listp x))))))</pre>
  </div>

<div class="form-block other" id="form-77" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-example-apps-for-lit
  ((lit <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (examples wcp-example-appsp) state)
  <span class="keyword">:returns</span> (apps wcp-example-appsp)
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> examples)) nil) (<a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a> (wcp-example-apps-for-lit lit (cdr examples) state))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (wcp-example-app-p (car examples))))) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
      ((wcp-example-app ex) (car examples))
      ((wcp-instance-rule rule) ex.instrule)
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> rule.enabledp)) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> unify-ok alist) (simple-one-way-unify rule.pred lit nil))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> unify-ok)) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> erp val) (if (equal rule.restriction ''<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
          (witness-eval-restriction rule.restriction alist state)))
      ((when erp) (raise <span class="string">"Evaluation of the restriction term, ~x0, produced an error: ~@1~%"</span>
          rule.restriction
          erp)
        <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> val)) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>))
    (cons (car examples) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)))</pre>
  </div>

<div class="form-block other" id="form-78" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-lit-actions-for-lit
  ((lit <a class="sym-link system" href="../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a>) (examples wcp-example-appsp)
    (witness-rules wcp-witness-rulesp)
    state)
  <span class="keyword">:returns</span> (actions wcp-lit-actions-p)
  (make-wcp-lit-actions <span class="keyword">:witnesses</span> (wcp-witnesses-for-lit lit witness-rules state)
    <span class="keyword">:examples</span> (wcp-example-apps-for-lit lit examples state)))</pre>
  </div>

<div class="form-block other" id="form-79" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-actions-for-lits
  ((lits pseudo-term-listp) (examples wcp-example-appsp)
    (witness-rules wcp-witness-rulesp)
    state)
  <span class="keyword">:guard-hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable pseudo-term-listp)))
  <span class="keyword">:returns</span> (actions wcp-lit-actions-listp)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> lits)
    nil
    (cons (wcp-lit-actions-for-lit (car lits)
        examples
        witness-rules
        state)
      (wcp-actions-for-lits (cdr lits)
        examples
        witness-rules
        state)))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-of-wcp-actions-for-lits
    (equal (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (wcp-actions-for-lits lits examples witness-rules state))
      (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> lits))))</pre>
  </div>

<div class="form-block other" id="form-80" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wcp-hint-for-clause
  ((clause pseudo-term-listp) (witness-rules wcp-witness-rulesp)
    (inst-rules wcp-instance-rulesp)
    (templates wcp-templatesp)
    state)
  <span class="keyword">:returns</span> (actions wcp-lit-actions-listp)
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> ((witness-only-actions (wcp-actions-for-lits clause nil witness-rules state)) ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> witness-extended-clause ?gen-alist) (wcp-clause-apply-actions clause witness-only-actions state))
      (examples (wcp-collect-examples-list (wcp-beta-reduce-list witness-extended-clause)
          templates
          inst-rules
          nil
          state)))
    (wcp-actions-for-lits clause examples witness-rules state))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-of-wcp-hint-for-clause
    (equal (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (wcp-hint-for-clause clause
          witness-rules
          inst-rules
          templates
          state))
      (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> clause))))</pre>
  </div>

<div class="form-block function" id="def-wcp-translate" data-defines="WCP-TRANSLATE" data-references="VALUE,REMOVE-GUARD-HOLDERS,W,T,TRANSLATE,ER,B*,XARGS,DECLARE,STATE,CTX,TERM,DEFUN" data-used-by="DEFEXAMPLE-FN,DEFINSTANTIATE-FN,DEFWITNESS-FN,WCP-TRANSLATE-LST" data-part-name="WCP-TRANSLATE" data-part-args="STATE,CTX,TERM" data-part-declare="XARGS,DECLARE" data-part-body="VALUE,REMOVE-GUARD-HOLDERS,STATE,W,CTX,T,TRANSLATE,TERM,ER,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WCP-TRANSLATE">wcp-translate</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a>
  (term ctx state)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> term) (translate term <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil ctx (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state) state)) (term (remove-guard-holders term (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))))
    (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> term)))</pre>
  </div>

<div class="form-block function" id="def-wcp-translate-lst" data-defines="WCP-TRANSLATE-LST" data-references="CONS,CAR,WCP-TRANSLATE,FIRST,CDR,REST,ER,B*,VALUE,ATOM,IF,XARGS,DECLARE,STATE,CTX,LST,DEFUN" data-used-by="DEFEXAMPLE-FN,DEFWITNESS-FN" data-part-name="WCP-TRANSLATE-LST" data-part-args="STATE,CTX,LST" data-part-declare="XARGS,DECLARE" data-part-body="CONS,CAR,WCP-TRANSLATE,FIRST,STATE,CTX,CDR,WCP-TRANSLATE-LST,REST,ER,B*,VALUE,LST,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WCP-TRANSLATE-LST">wcp-translate-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-wcp-translate-lst" data-sym="WCP-TRANSLATE-LST" title="(defun wcp-translate-lst (lst ctx state)
  (declare (xargs :mode :program))
  (if (atom lst)
      (value nil)
      (b*
...">wcp-translate-lst</a>
  (lst ctx state)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> lst)
    (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> nil)
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>) (<a class="sym-link local-def" href="#def-wcp-translate-lst" data-sym="WCP-TRANSLATE-LST" title="(defun wcp-translate-lst (lst ctx state)
  (declare (xargs :mode :program))
  (if (atom lst)
      (value nil)
      (b*
...">wcp-translate-lst</a> (cdr lst) ctx state)) ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> <a class="sym-link system" href="../../axioms.html#def-first" data-sym="FIRST">first</a>) (<a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a> (car lst) ctx state)))
      (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (cons <a class="sym-link system" href="../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)))))</pre>
  </div>

<div class="form-block function" id="def-defwitness-fn" data-defines="DEFWITNESS-FN" data-references="WITNESS-CP-WITNESS-RULES,TABLE,IMPLIES,DEFTHM,PROGN,QUASIQUOTE,VALUE,DUMB-NEGATE-LIT,T,MAKE-WCP-WITNESS-RULE,OBJ,SYMBOL-NAME,STRING,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,THMNAME,STRIP-CDRS,PAIRLIS$,STRIP-CARS,WCP-TRANSLATE-LST,GENERALIZE-TERMS,DEFWITNESS,QUOTE,WCP-TRANSLATE,ER,MV,NOT,WHEN,B*,XARGS,DECLARE,STATE,HINTS,GENERALIZE,RESTRICTION,EXPR,PREDICATE,NAME,DEFUN" data-used-by="DEFWITNESS" data-part-name="DEFWITNESS-FN" data-part-args="STATE,HINTS,GENERALIZE,RESTRICTION,EXPR,PREDICATE,NAME" data-part-declare="STATE,XARGS,DECLARE" data-part-body="WITNESS-CP-WITNESS-RULES,TABLE,IMPLIES,DEFTHM,PROGN,QUASIQUOTE,VALUE,DUMB-NEGATE-LIT,T,MAKE-WCP-WITNESS-RULE,OBJ,NAME,SYMBOL-NAME,STRING,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,THMNAME,STRIP-CDRS,PAIRLIS$,GENERALIZE,STRIP-CARS,WCP-TRANSLATE-LST,GENERALIZE-TERMS,RESTRICTION,DEFWITNESS,QUOTE,WCP-TRANSLATE,ER,EXPR,STATE,MV,PREDICATE,NOT,WHEN,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWITNESS-FN">defwitness-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defwitness-fn" data-sym="DEFWITNESS-FN" title="(defun defwitness-fn (name predicate expr restriction generalize hints state)
  (declare (xargs :mode :program :stobjs state))
  (b*
   (((when (not predicate))
     (mv &quot;DEFWITNESS: Must supply a :PREDICATE.~%&quot; nil state))
...">defwitness-fn</a>
  (name predicate expr restriction generalize hints state)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> predicate)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"DEFWITNESS: Must supply a :PREDICATE.~%"</span> nil state)) ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> expr)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"DEFWITNESS: Must supply an :EXPR.~%"</span> nil state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> predicate) (<a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a> predicate '<a class="sym-link local-def" href="#def-defwitness" data-sym="DEFWITNESS" title="(defmacro defwitness
          (name &amp;key predicate expr (restriction &#39;&#39;t) generalize hints)
  `(make-event
    (defwitness-fn &#39;,name &#39;,predicate &#39;,expr &#39;,restriction &#39;,generalize &#39;,hints
     state)))">defwitness</a> state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> expr) (<a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a> expr '<a class="sym-link local-def" href="#def-defwitness" data-sym="DEFWITNESS" title="(defmacro defwitness
          (name &amp;key predicate expr (restriction &#39;&#39;t) generalize hints)
  `(make-event
    (defwitness-fn &#39;,name &#39;,predicate &#39;,expr &#39;,restriction &#39;,generalize &#39;,hints
     state)))">defwitness</a> state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> restriction) (<a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a> restriction '<a class="sym-link local-def" href="#def-defwitness" data-sym="DEFWITNESS" title="(defmacro defwitness
          (name &amp;key predicate expr (restriction &#39;&#39;t) generalize hints)
  `(make-event
    (defwitness-fn &#39;,name &#39;,predicate &#39;,expr &#39;,restriction &#39;,generalize &#39;,hints
     state)))">defwitness</a> state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> generalize-terms) (<a class="sym-link local-def" href="#def-wcp-translate-lst" data-sym="WCP-TRANSLATE-LST" title="(defun wcp-translate-lst (lst ctx state)
  (declare (xargs :mode :program))
  (if (atom lst)
      (value nil)
      (b*
...">wcp-translate-lst</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> generalize)
          '<a class="sym-link local-def" href="#def-defwitness" data-sym="DEFWITNESS" title="(defmacro defwitness
          (name &amp;key predicate expr (restriction &#39;&#39;t) generalize hints)
  `(make-event
    (defwitness-fn &#39;,name &#39;,predicate &#39;,expr &#39;,restriction &#39;,generalize &#39;,hints
     state)))">defwitness</a>
          state))
      (generalize (<a class="sym-link system" href="../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> generalize-terms (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> generalize)))
      (thmname (intern-in-package-of-symbol (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
            (symbol-name name)
            <span class="string">"-WITNESS-RULE-CORRECT"</span>)
          name))
      (obj (make-wcp-witness-rule <span class="keyword">:name</span> name
          <span class="keyword">:enabledp</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
          <span class="keyword">:term</span> (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> predicate)
          <span class="keyword">:expr</span> (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> expr)
          <span class="keyword">:restriction</span> restriction
          <span class="keyword">:theorem</span> thmname
          <span class="keyword">:generalize</span> generalize)))
    (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> `(<a class="sym-link system" href="../../axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,THMNAME
          (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> ,(DUMB-NEGATE-LIT EXPR)
            ,(DUMB-NEGATE-LIT PREDICATE))
          <span class="keyword">:hints</span> ,HINTS
          <span class="keyword">:rule-classes</span> nil)
        (<a class="sym-link system" href="../../axioms.html#def-table" data-sym="TABLE">table</a> witness-cp-witness-rules ',NAME ',OBJ)))))</pre>
  </div>

<div class="form-block other" id="form-84" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-defwitness" data-sym="DEFWITNESS" title="(defmacro defwitness
          (name &amp;key predicate expr (restriction &#39;&#39;t) generalize hints)
  `(make-event
    (defwitness-fn &#39;,name &#39;,predicate &#39;,expr &#39;,restriction &#39;,generalize &#39;,hints
     state)))">defwitness</a>
  <span class="keyword">:parents</span> (witness-cp)
  <span class="keyword">:short</span> <span class="string">"Add a @(see witness-cp) rule providing a witness for an existential
quantifier hypothesis (or universal quantifier conclusion)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

@({
   (defwitness subsetp-witnessing
     :predicate (not (subsetp-equal a b))
     :expr (and (member-equal (subsetp-equal-witness a b) a)
                (not (member-equal (subsetp-equal-witness a b) b)))
     :generalize (((subsetp-equal-witness a b) . ssew))
     :hints (&#39;(:in-theory &#39;(subsetp-equal-witness-correct))))
})

&lt;p&gt;The above example tells @(&#39;witness-cp&#39;) to expand any hypothesis of the
form (not (subsetp-equal a b)) or, equivalently, any conclusion of the
form (subsetp-equal a b), by generating a fresh variable named SSEW or similar
that represents an object that proves that A is not a subset of B (because that
object is in A but not B.)&lt;/p&gt;

&lt;p&gt;General Form:&lt;/p&gt;

@({
    (defwitness name
      :predicate    predicate
      :expr         expr
      [:generalize  generalize]
      [:hints       hints]
      [:restriction restriction])
})

&lt;p&gt;The @(&#39;name&#39;) of the rule can be used in Witness Rulesets; see @(see
def-witness-ruleset).&lt;/p&gt;

&lt;p&gt;When @(see witness-cp) is given a Witness Ruleset that includes @(&#39;name&#39;),
it will look for literals in the clause that unify with the negation of
@(&#39;predicate&#39;).  It will replace these by a term generated from @(&#39;expr&#39;).  It
will then generalize away terms that are keys in @(&#39;generalize&#39;), replacing
them by fresh variables based on their corresponding values.  It will use
@(&#39;hints&#39;) to relieve the proof obligation that this replacement is sound,
which is also done when the @(&#39;defwitness&#39;) form is run.&lt;/p&gt;

&lt;h5&gt;Additional Arguments&lt;/h5&gt;

&lt;p&gt;You can syntactically restrict the application of a witness rule by giving a
@(&#39;restriction&#39;).  The @(&#39;restriction&#39;) term may have free variables that occur
also in the @(&#39;predicate&#39;) term, and may also use the variable @(&#39;acl2::world&#39;)
to stand for the ACL2 world.  If a @(&#39;restriction&#39;) is given, then this
replacement will only take place when it evaluates to a non-nil value.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defwitness" data-defines="DEFWITNESS" data-references="STATE,DEFWITNESS-FN,MAKE-EVENT,QUASIQUOTE,HINTS,GENERALIZE,T,QUOTE,RESTRICTION,EXPR,PREDICATE,&KEY,NAME,DEFMACRO" data-used-by="DEFQUANTEXPR-FN,DEFWITNESS-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWITNESS">defwitness</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defwitness" data-sym="DEFWITNESS" title="(defmacro defwitness
          (name &amp;key predicate expr (restriction &#39;&#39;t) generalize hints)
  `(make-event
    (defwitness-fn &#39;,name &#39;,predicate &#39;,expr &#39;,restriction &#39;,generalize &#39;,hints
     state)))">defwitness</a>
  (name &amp;key
    predicate
    expr
    (restriction ''<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    generalize
    hints)
  `(<a class="sym-link system" href="../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defwitness-fn" data-sym="DEFWITNESS-FN" title="(defun defwitness-fn (name predicate expr restriction generalize hints state)
  (declare (xargs :mode :program :stobjs state))
  (b*
   (((when (not predicate))
     (mv &quot;DEFWITNESS: Must supply a :PREDICATE.~%&quot; nil state))
...">defwitness-fn</a> ',NAME
      ',PREDICATE
      ',EXPR
      ',RESTRICTION
      ',GENERALIZE
      ',HINTS
      state)))</pre>
  </div>

<div class="form-block function" id="def-definstantiate-fn" data-defines="DEFINSTANTIATE-FN" data-references="WITNESS-CP-INSTANCE-RULES,TABLE,IMPLIES,DEFTHM,PROGN,QUASIQUOTE,VALUE,DUMB-NEGATE-LIT,T,MAKE-WCP-INSTANCE-RULE,OBJ,SYMBOL-NAME,STRING,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,THMNAME,DEFINSTANTIATE,QUOTE,WCP-TRANSLATE,ER,MV,NOT,WHEN,B*,XARGS,DECLARE,STATE,HINTS,RESTRICTION,EXPR,VARS,PREDICATE,NAME,DEFUN" data-used-by="DEFINSTANTIATE" data-part-name="DEFINSTANTIATE-FN" data-part-args="STATE,HINTS,RESTRICTION,EXPR,VARS,PREDICATE,NAME" data-part-declare="STATE,XARGS,DECLARE" data-part-body="WITNESS-CP-INSTANCE-RULES,TABLE,IMPLIES,DEFTHM,PROGN,QUASIQUOTE,VALUE,DUMB-NEGATE-LIT,T,MAKE-WCP-INSTANCE-RULE,OBJ,NAME,SYMBOL-NAME,STRING,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,THMNAME,RESTRICTION,DEFINSTANTIATE,QUOTE,WCP-TRANSLATE,ER,EXPR,VARS,STATE,MV,PREDICATE,NOT,WHEN,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINSTANTIATE-FN">definstantiate-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-definstantiate-fn" data-sym="DEFINSTANTIATE-FN" title="(defun definstantiate-fn (name predicate vars expr restriction hints state)
  (declare (xargs :mode :program :stobjs state))
  (b*
   (((when (not predicate))
     (mv &quot;DEFINSTANTIATE: Must supply a :PREDICATE.~%&quot; nil state))
...">definstantiate-fn</a>
  (name predicate vars expr restriction hints state)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> predicate)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"DEFINSTANTIATE: Must supply a :PREDICATE.~%"</span> nil state)) ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> vars)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"DEFINSTANTIATE: Must supply :VARS.~%"</span> nil state))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> expr)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"DEFINSTANTIATE: Must supply an :EXPR.~%"</span> nil state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> predicate) (<a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a> predicate '<a class="sym-link local-def" href="#def-definstantiate" data-sym="DEFINSTANTIATE" title="(defmacro definstantiate
          (name &amp;key predicate vars expr (restriction &#39;&#39;t) hints)
  `(make-event
    (definstantiate-fn &#39;,name &#39;,predicate &#39;,vars &#39;,expr &#39;,restriction &#39;,hints
     state)))">definstantiate</a> state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> expr) (<a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a> expr '<a class="sym-link local-def" href="#def-definstantiate" data-sym="DEFINSTANTIATE" title="(defmacro definstantiate
          (name &amp;key predicate vars expr (restriction &#39;&#39;t) hints)
  `(make-event
    (definstantiate-fn &#39;,name &#39;,predicate &#39;,vars &#39;,expr &#39;,restriction &#39;,hints
     state)))">definstantiate</a> state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> restriction) (<a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a> restriction '<a class="sym-link local-def" href="#def-definstantiate" data-sym="DEFINSTANTIATE" title="(defmacro definstantiate
          (name &amp;key predicate vars expr (restriction &#39;&#39;t) hints)
  `(make-event
    (definstantiate-fn &#39;,name &#39;,predicate &#39;,vars &#39;,expr &#39;,restriction &#39;,hints
     state)))">definstantiate</a> state))
      (thmname (intern-in-package-of-symbol (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
            (symbol-name name)
            <span class="string">"-INSTANCE-RULE-CORRECT"</span>)
          name))
      (obj (make-wcp-instance-rule <span class="keyword">:name</span> name
          <span class="keyword">:enabledp</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
          <span class="keyword">:pred</span> (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> predicate)
          <span class="keyword">:vars</span> vars
          <span class="keyword">:expr</span> (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> expr)
          <span class="keyword">:restriction</span> restriction
          <span class="keyword">:theorem</span> thmname)))
    (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> `(<a class="sym-link system" href="../../axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,THMNAME
          (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> ,(DUMB-NEGATE-LIT EXPR)
            ,(DUMB-NEGATE-LIT PREDICATE))
          <span class="keyword">:hints</span> ,HINTS
          <span class="keyword">:rule-classes</span> nil)
        (<a class="sym-link system" href="../../axioms.html#def-table" data-sym="TABLE">table</a> witness-cp-instance-rules ',NAME ',OBJ)))))</pre>
  </div>

<div class="form-block other" id="form-87" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-definstantiate" data-sym="DEFINSTANTIATE" title="(defmacro definstantiate
          (name &amp;key predicate vars expr (restriction &#39;&#39;t) hints)
  `(make-event
    (definstantiate-fn &#39;,name &#39;,predicate &#39;,vars &#39;,expr &#39;,restriction &#39;,hints
     state)))">definstantiate</a>
  <span class="keyword">:parents</span> (witness-cp)
  <span class="keyword">:short</span> <span class="string">"Add a @(see witness-cp) rule showing how to instantiate a universal
quantifier hypothesis (or an existential quantifier conclusion)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

@({
    (definstantiate subsetp-equal-instancing
      :predicate (subsetp-equal a b)
      :vars (k)
      :expr (implies (member-equal k a)
                     (member-equal k b))
      :hints (&#39;(:in-theory &#39;(subsetp-member))))
})

&lt;p&gt;The above example tells WITNESS-CP how to expand a hypothesis of the form
@(&#39;(subsetp-equal a b)&#39;) or, equivalently, a conclusion of the form
@(&#39;(not (subsetp-equal a b))&#39;), by introducing a term of the form:&lt;/p&gt;

@({
     (implies (member-equal k a)
              (member-equal k b))
})

&lt;p&gt;For each of some various @(&#39;k&#39;), as determined by @(see defexample) rules
and any user-provided examples from the call of @(see witness).&lt;/p&gt;

&lt;p&gt;General Form&lt;/p&gt;

@({
    (definstantiate name
      :predicate    predicate
      :vars         vars
      :expr         expr
      [:hints       hints]
      [:restriction restriction])
})

&lt;p&gt;The @(&#39;name&#39;) of the rule can be used in Witness Rulesets; see @(see
def-witness-ruleset).&lt;/p&gt;

&lt;p&gt;When @(see witness-cp) is given a Witness Ruleset that includes @(&#39;name&#39;),
it will look for literals in the clause that unify with @(&#39;predicate&#39;).  It
will replace these with a conjunction of several instantiations of @(&#39;expr&#39;),
with the free variables present in @(&#39;vars&#39;) replaced by either user-provided
terms or terms generated by a @(see defexample) rule.  It will use @(&#39;hints&#39;)
to relieve the proof obligation that this replacement is sound, which is also
done when the @(&#39;definstantiate&#39;) form is run.&lt;/p&gt;

&lt;p&gt;Additional arguments:&lt;/p&gt;

&lt;p&gt;You can syntactically restrict the application of an instantiation rule by
giving a @(&#39;restriction&#39;).  The @(&#39;restriction&#39;) may have free variables that
occur also in the @(&#39;predicate&#39;), term or the list of @(&#39;vars&#39;), as well as
@(&#39;acl2::world&#39;), standing for the ACL2 world.  If a @(&#39;restriction&#39;) is given,
then this replacement will only take place when it evaluates to a non-@(&#39;nil&#39;)
value.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-definstantiate" data-defines="DEFINSTANTIATE" data-references="STATE,DEFINSTANTIATE-FN,MAKE-EVENT,QUASIQUOTE,HINTS,T,QUOTE,RESTRICTION,EXPR,VARS,PREDICATE,&KEY,NAME,DEFMACRO" data-used-by="DEFQUANTEXPR-FN,DEFINSTANTIATE-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINSTANTIATE">definstantiate</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-definstantiate" data-sym="DEFINSTANTIATE" title="(defmacro definstantiate
          (name &amp;key predicate vars expr (restriction &#39;&#39;t) hints)
  `(make-event
    (definstantiate-fn &#39;,name &#39;,predicate &#39;,vars &#39;,expr &#39;,restriction &#39;,hints
     state)))">definstantiate</a>
  (name &amp;key predicate vars expr (restriction ''<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>) hints)
  `(<a class="sym-link system" href="../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-definstantiate-fn" data-sym="DEFINSTANTIATE-FN" title="(defun definstantiate-fn (name predicate vars expr restriction hints state)
  (declare (xargs :mode :program :stobjs state))
  (b*
   (((when (not predicate))
     (mv &quot;DEFINSTANTIATE: Must supply a :PREDICATE.~%&quot; nil state))
...">definstantiate-fn</a> ',NAME
      ',PREDICATE
      ',VARS
      ',EXPR
      ',RESTRICTION
      ',HINTS
      state)))</pre>
  </div>

<div class="form-block other" id="form-89" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define missing-instance-rules
  ((instance-rules <a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>) (alist <a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>))
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> instance-rules)
    nil
    (if (<a class="sym-link system" href="../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> (car instance-rules) alist)
      (missing-instance-rules (cdr instance-rules) alist)
      (cons (car instance-rules)
        (missing-instance-rules (cdr instance-rules) alist)))))</pre>
  </div>

<div class="form-block function" id="def-wrong-arity-instance-rules" data-defines="WRONG-ARITY-INSTANCE-RULES" data-references="CONS,CAR,ASSOC,CDR,WCP-INSTANCE-RULE->VARS,LEN,=,ATOM,IF,XARGS,DECLARE,ALIST,INSTANCE-RULES,ARITY,DEFUN" data-used-by="DEFEXAMPLE-FN" data-part-name="WRONG-ARITY-INSTANCE-RULES" data-part-args="ALIST,INSTANCE-RULES,ARITY" data-part-declare="XARGS,DECLARE" data-part-body="CONS,WRONG-ARITY-INSTANCE-RULES,ARITY,ALIST,CAR,ASSOC,CDR,WCP-INSTANCE-RULE->VARS,LEN,=,INSTANCE-RULES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRONG-ARITY-INSTANCE-RULES">wrong-arity-instance-rules</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-wrong-arity-instance-rules" data-sym="WRONG-ARITY-INSTANCE-RULES" title="(defun wrong-arity-instance-rules (arity instance-rules alist)
  (declare (xargs :mode :program))
  (if (atom instance-rules)
      nil
      (if (=
...">wrong-arity-instance-rules</a>
  (<a class="sym-link system" href="../../basis-b.html#def-arity" data-sym="ARITY">arity</a> instance-rules alist)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> instance-rules)
    nil
    (if (<a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> (wcp-instance-rule-&gt;vars (cdr (<a class="sym-link system" href="../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> (car instance-rules) alist))))
        <a class="sym-link system" href="../../basis-b.html#def-arity" data-sym="ARITY">arity</a>)
      (<a class="sym-link local-def" href="#def-wrong-arity-instance-rules" data-sym="WRONG-ARITY-INSTANCE-RULES" title="(defun wrong-arity-instance-rules (arity instance-rules alist)
  (declare (xargs :mode :program))
  (if (atom instance-rules)
      nil
      (if (=
...">wrong-arity-instance-rules</a> <a class="sym-link system" href="../../basis-b.html#def-arity" data-sym="ARITY">arity</a>
        (cdr instance-rules)
        alist)
      (cons (car instance-rules)
        (<a class="sym-link local-def" href="#def-wrong-arity-instance-rules" data-sym="WRONG-ARITY-INSTANCE-RULES" title="(defun wrong-arity-instance-rules (arity instance-rules alist)
  (declare (xargs :mode :program))
  (if (atom instance-rules)
      nil
      (if (=
...">wrong-arity-instance-rules</a> <a class="sym-link system" href="../../basis-b.html#def-arity" data-sym="ARITY">arity</a>
          (cdr instance-rules)
          alist)))))</pre>
  </div>

<div class="form-block function" id="def-defexample-fn" data-defines="DEFEXAMPLE-FN" data-references="WITNESS-CP-EXAMPLE-TEMPLATES,TABLE,QUASIQUOTE,VALUE,T,MAKE-WCP-TEMPLATE,OBJ,WCP-TRANSLATE-LST,DEFEXAMPLE,WCP-TRANSLATE,ER,WRONG-ARITY-INSTANCE-RULES,BAD-RULES,LEN,NVARS,MSG,MISSING-INSTANCE-RULES,MISSING-RULES,W,WITNESS-CP-INSTANCE-RULES,QUOTE,TABLE-ALIST,INSTANCE-RULE-ALIST,MV,NOT,WHEN,B*,XARGS,DECLARE,STATE,RESTRICTION,INSTANCE-RULES,TEMPLATES,PATTERN,NAME,DEFUN" data-used-by="DEFEXAMPLE" data-part-name="DEFEXAMPLE-FN" data-part-args="STATE,RESTRICTION,INSTANCE-RULES,TEMPLATES,PATTERN,NAME" data-part-declare="STATE,XARGS,DECLARE" data-part-body="WITNESS-CP-EXAMPLE-TEMPLATES,TABLE,QUASIQUOTE,VALUE,T,NAME,MAKE-WCP-TEMPLATE,OBJ,WCP-TRANSLATE-LST,RESTRICTION,DEFEXAMPLE,WCP-TRANSLATE,ER,WRONG-ARITY-INSTANCE-RULES,BAD-RULES,LEN,NVARS,MSG,MISSING-INSTANCE-RULES,MISSING-RULES,W,WITNESS-CP-INSTANCE-RULES,QUOTE,TABLE-ALIST,INSTANCE-RULE-ALIST,INSTANCE-RULES,TEMPLATES,STATE,MV,PATTERN,NOT,WHEN,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFEXAMPLE-FN">defexample-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defexample-fn" data-sym="DEFEXAMPLE-FN" title="(defun defexample-fn (name pattern templates instance-rules restriction state)
  (declare (xargs :mode :program :stobjs state))
  (b*
   (((when (not pattern))
     (mv &quot;DEFEXAMPLE: Must supply a :PATTERN.~%&quot; nil state))
...">defexample-fn</a>
  (name pattern templates instance-rules restriction state)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> pattern)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"DEFEXAMPLE: Must supply a :PATTERN.~%"</span> nil state)) ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> templates)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"DEFEXAMPLE: Must supply :TEMPLATES.~%"</span> nil state))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> instance-rules)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"DEFEXAMPLE: Must supply an :INSTANCE-RULENAME.~%"</span>
          nil
          state))
      (instance-rule-alist (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'witness-cp-instance-rules (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))
      (missing-rules (missing-instance-rules instance-rules instance-rule-alist))
      ((when missing-rules) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"DEFEXAMPLE: The following instance rules do not exist: ~x0~%"</span>
            missing-rules)
          nil
          state))
      (nvars (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> templates))
      (bad-rules (<a class="sym-link local-def" href="#def-wrong-arity-instance-rules" data-sym="WRONG-ARITY-INSTANCE-RULES" title="(defun wrong-arity-instance-rules (arity instance-rules alist)
  (declare (xargs :mode :program))
  (if (atom instance-rules)
      nil
      (if (=
...">wrong-arity-instance-rules</a> nvars
          instance-rules
          instance-rule-alist))
      ((when bad-rules) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"DEFEXAMPLE: The following instance rules do not have the
right number of free variables (~x0): ~x1~%"</span>
            nvars
            bad-rules)
          nil
          state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> pattern) (<a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a> pattern '<a class="sym-link local-def" href="#def-defexample" data-sym="DEFEXAMPLE" title="(defmacro defexample
          (name
           &amp;key pattern templates instance-rulename instance-rules
           (restriction &#39;&#39;t))
  `(make-event
...">defexample</a> state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> restriction) (<a class="sym-link local-def" href="#def-wcp-translate" data-sym="WCP-TRANSLATE" title="(defun wcp-translate (term ctx state)
  (declare (xargs :mode :program))
  (b*
   (((er term) (translate term t t nil ctx (w state) state))
    (term (remove-guard-holders term (w state))))">wcp-translate</a> restriction '<a class="sym-link local-def" href="#def-defexample" data-sym="DEFEXAMPLE" title="(defmacro defexample
          (name
           &amp;key pattern templates instance-rulename instance-rules
           (restriction &#39;&#39;t))
  `(make-event
...">defexample</a> state))
      ((<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> templates) (<a class="sym-link local-def" href="#def-wcp-translate-lst" data-sym="WCP-TRANSLATE-LST" title="(defun wcp-translate-lst (lst ctx state)
  (declare (xargs :mode :program))
  (if (atom lst)
      (value nil)
      (b*
...">wcp-translate-lst</a> templates '<a class="sym-link local-def" href="#def-defexample" data-sym="DEFEXAMPLE" title="(defmacro defexample
          (name
           &amp;key pattern templates instance-rulename instance-rules
           (restriction &#39;&#39;t))
  `(make-event
...">defexample</a> state))
      (obj (make-wcp-template <span class="keyword">:name</span> name
          <span class="keyword">:enabledp</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
          <span class="keyword">:pat</span> pattern
          <span class="keyword">:templ</span> templates
          <span class="keyword">:rulenames</span> instance-rules
          <span class="keyword">:restriction</span> restriction)))
    (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> `(<a class="sym-link system" href="../../axioms.html#def-table" data-sym="TABLE">table</a> witness-cp-example-templates ',NAME ',OBJ))))</pre>
  </div>

<div class="form-block other" id="form-92" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-defexample" data-sym="DEFEXAMPLE" title="(defmacro defexample
          (name
           &amp;key pattern templates instance-rulename instance-rules
           (restriction &#39;&#39;t))
  `(make-event
...">defexample</a>
  <span class="keyword">:parents</span> (witness-cp)
  <span class="keyword">:short</span> <span class="string">"Tell @(see witness-cp) how to instantiate the free variables of @(see
definstantiate) rules."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

@({
    (defexample set-reasoning-member-template
      :pattern (member-equal k y)
      :templates (k)
      :instance-rules (subsetp-equal-instancing
                       intersectp-equal-instancing
                       set-equiv-instancing
                       set-consp-instancing))
})

&lt;p&gt;Instructs @(&#39;witness-cp&#39;) to find terms of the form @(&#39;(member-equal k y)&#39;)
throughout the clause, and for each such @(&#39;k&#39;), for any match of one of the
instance-rules listed, add an instance using that @(&#39;k&#39;).&lt;/p&gt;

&lt;p&gt;For example, if we have a hypothesis @(&#39;(subsetp-equal a b)&#39;) and terms&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;@(&#39;(member-equal (foo x) (bar y))&#39;)&lt;/li&gt;
&lt;li&gt;@(&#39;(member-equal q a)&#39;)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;are present somewhere in the clause, then this rule, along with the
@(&#39;subsetp-equal-instancing&#39;) rule described in @(see definstantiate), will
cause the following hyps to be added:&lt;/p&gt;

@({
   (implies (member-equal (foo x) a)
            (member-equal (bar x) a))

   (implies (member-equal q a)
            (member-equal q b)).
})


&lt;p&gt;General form:&lt;/p&gt;

@({
     (defexample name
       :pattern            pattern
       :templates          templates
       [:instance-rulename instance-rulename]
       [:instance-rules    instance-rules]
       [:restriction       restriction])
})

&lt;p&gt;The name of the rule can be used in Witness Rulesets; see @(see
def-witness-ruleset).&lt;/p&gt;

&lt;p&gt;When @(see witness-cp) is given a Witness Ruleset that includes @(&#39;name&#39;),
and it has already found matches for one of these @(&#39;instance-rules&#39;), it then
it will look through the clause for terms matching @(&#39;pattern&#39;), and use the
corresponding @(&#39;pattern&#39;) in place of the @(&#39;vars&#39;) in the @(see
definstantiate) rules.&lt;/p&gt;

&lt;p&gt;Additional arguments:&lt;/p&gt;

&lt;p&gt;The @(&#39;instance-rulename&#39;) can be used, instead of @(&#39;instance-rules&#39;), when
there is only a single rule.  BOZO we should deprecate this.&lt;/p&gt;

&lt;p&gt;You can syntactically restrict the use of @(&#39;defexample&#39;) forms by giving a
@(&#39;restriction&#39;).  The @(&#39;restriction&#39;) may have free variables that occur also
in the @(&#39;pattern&#39;), as well as @(&#39;acl2::world&#39;), standing for the ACL2 world.
If a @(&#39;restriction&#39;) is given, then this example will only be used if it
evaluates to a non-@(&#39;nil&#39;) value.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defexample" data-defines="DEFEXAMPLE" data-references="STATE,DEFEXAMPLE-FN,MAKE-EVENT,QUASIQUOTE,T,QUOTE,RESTRICTION,INSTANCE-RULES,INSTANCE-RULENAME,TEMPLATES,PATTERN,&KEY,NAME,DEFMACRO" data-used-by="DEFEXAMPLE-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFEXAMPLE">defexample</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defexample" data-sym="DEFEXAMPLE" title="(defmacro defexample
          (name
           &amp;key pattern templates instance-rulename instance-rules
           (restriction &#39;&#39;t))
  `(make-event
...">defexample</a>
  (name &amp;key
    pattern
    templates
    instance-rulename
    instance-rules
    (restriction ''<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
  `(<a class="sym-link system" href="../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defexample-fn" data-sym="DEFEXAMPLE-FN" title="(defun defexample-fn (name pattern templates instance-rules restriction state)
  (declare (xargs :mode :program :stobjs state))
  (b*
   (((when (not pattern))
     (mv &quot;DEFEXAMPLE: Must supply a :PATTERN.~%&quot; nil state))
...">defexample-fn</a> ',NAME
      ',PATTERN
      ',TEMPLATES
      ',(IF INSTANCE-RULENAME
     (LIST INSTANCE-RULENAME)
     INSTANCE-RULES)
      ',RESTRICTION
      state)))</pre>
  </div>

<div class="form-block function" id="def-quantexpr-bindings-to-generalize" data-defines="QUANTEXPR-BINDINGS-TO-GENERALIZE" data-references="CDR,CONS,CAR,EXPR,VAR,LIST,ATOM,WHEN,B*,BINDINGS,DEFUN" data-used-by="DEFQUANTEXPR-FN" data-part-name="QUANTEXPR-BINDINGS-TO-GENERALIZE" data-part-args="BINDINGS" data-part-body="CDR,QUANTEXPR-BINDINGS-TO-GENERALIZE,CONS,CAR,EXPR,VAR,LIST,BINDINGS,ATOM,WHEN,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="QUANTEXPR-BINDINGS-TO-GENERALIZE">quantexpr-bindings-to-generalize</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-quantexpr-bindings-to-generalize" data-sym="QUANTEXPR-BINDINGS-TO-GENERALIZE" title="(defun quantexpr-bindings-to-generalize (bindings)
  (b* (((when (atom bindings)) nil) ((list var expr) (car bindings)))
   (cons (cons expr var) (quantexpr-bindings-to-generalize (cdr bindings)))))">quantexpr-bindings-to-generalize</a>
  (bindings)
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> bindings)) nil) ((<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> var expr) (car bindings)))
    (cons (cons expr var)
      (<a class="sym-link local-def" href="#def-quantexpr-bindings-to-generalize" data-sym="QUANTEXPR-BINDINGS-TO-GENERALIZE" title="(defun quantexpr-bindings-to-generalize (bindings)
  (b* (((when (atom bindings)) nil) ((list var expr) (car bindings)))
   (cons (cons expr var) (quantexpr-bindings-to-generalize (cdr bindings)))))">quantexpr-bindings-to-generalize</a> (cdr bindings)))))</pre>
  </div>

<div class="form-block function" id="def-defquantexpr-fn" data-defines="DEFQUANTEXPR-FN" data-references="DEFINSTANTIATE,DEFWITNESS,PROGN,QUANTEXPR-BINDINGS-TO-GENERALIZE,GENERALIZE-ALIST,LET,NOT,QUASIQUOTE,EQ,IF,INSTANCE-EXPR,WITNESS-EXPR,INSTANCE-PRED,WITNESS-PRED,MV,SYMBOL-NAME,STRING,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,DEFQUANTEXPR,HARD?,ER,QUOTE,MEMBER,UNLESS,OR,B*,IN-PACKAGE-OF,GENERALIZE,INSTANCE-RULENAME,WCP-WITNESS-RULENAME,WITNESS-HINTS,INSTANCE-HINTS,WITNESS-RESTRICTION,INSTANCE-RESTRICTION,WITNESSES,EXPR,QUANTIFIER,PREDICATE,NAME,DEFUN" data-used-by="DEFQUANTEXPR" data-part-name="DEFQUANTEXPR-FN" data-part-args="IN-PACKAGE-OF,GENERALIZE,INSTANCE-RULENAME,WCP-WITNESS-RULENAME,WITNESS-HINTS,INSTANCE-HINTS,WITNESS-RESTRICTION,INSTANCE-RESTRICTION,WITNESSES,EXPR,QUANTIFIER,PREDICATE,NAME" data-part-body="DEFINSTANTIATE,DEFWITNESS,PROGN,WITNESSES,QUANTEXPR-BINDINGS-TO-GENERALIZE,GENERALIZE-ALIST,EXPR,LET,PREDICATE,NOT,QUASIQUOTE,EQ,IF,INSTANCE-EXPR,WITNESS-EXPR,INSTANCE-PRED,WITNESS-PRED,MV,INSTANCE-RULENAME,SYMBOL-NAME,STRING,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,WCP-WITNESS-RULENAME,DEFQUANTEXPR,HARD?,ER,QUOTE,QUANTIFIER,MEMBER,UNLESS,NAME,OR,IN-PACKAGE-OF,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFQUANTEXPR-FN">defquantexpr-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defquantexpr-fn" data-sym="DEFQUANTEXPR-FN" title="(defun defquantexpr-fn
       (name predicate quantifier expr witnesses instance-restriction
        witness-restriction instance-hints witness-hints wcp-witness-rulename
        instance-rulename generalize in-package-of)
  (b*
...">defquantexpr-fn</a>
  (name predicate
    quantifier
    expr
    witnesses
    instance-restriction
    witness-restriction
    instance-hints
    witness-hints
    wcp-witness-rulename
    instance-rulename
    generalize
    in-package-of)
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> ((in-package-of (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> in-package-of name)) ((unless (<a class="sym-link system" href="../../axioms.html#def-member" data-sym="MEMBER">member</a> quantifier '(<span class="keyword">:forall</span> <span class="keyword">:exists</span>))) (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard?
          '<a class="sym-link local-def" href="#def-defquantexpr" data-sym="DEFQUANTEXPR" title="(defmacro defquantexpr
          (name
           &amp;key predicate (quantifier &#39;:forall) expr witnesses
           (instance-restriction &#39;&#39;t) (witness-restriction &#39;&#39;t) instance-hints
           witness-hints wcp-witness-rulename instance-rulename in-package-of
...">defquantexpr</a>
          <span class="string">"Quantifier argument must be either :FORALL or :EXISTS~%"</span>))
      (wcp-witness-rulename (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> wcp-witness-rulename
          (intern-in-package-of-symbol (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> (symbol-name name) <span class="string">"-WITNESSING"</span>)
            in-package-of)))
      (instance-rulename (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> instance-rulename
          (intern-in-package-of-symbol (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> (symbol-name name) <span class="string">"-INSTANCING"</span>)
            in-package-of)))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> witness-pred instance-pred witness-expr instance-expr) (if (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> quantifier <span class="keyword">:forall</span>)
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> `(<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> ,PREDICATE)
            predicate
            `(let ,WITNESSES
              (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> ,EXPR))
            expr)
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> predicate
            `(<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> ,PREDICATE)
            `(let ,WITNESSES
              ,EXPR)
            `(<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> ,EXPR))))
      (generalize-alist (<a class="sym-link local-def" href="#def-quantexpr-bindings-to-generalize" data-sym="QUANTEXPR-BINDINGS-TO-GENERALIZE" title="(defun quantexpr-bindings-to-generalize (bindings)
  (b* (((when (atom bindings)) nil) ((list var expr) (car bindings)))
   (cons (cons expr var) (quantexpr-bindings-to-generalize (cdr bindings)))))">quantexpr-bindings-to-generalize</a> witnesses)))
    `(<a class="sym-link system" href="../../axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link local-def" href="#def-defwitness" data-sym="DEFWITNESS" title="(defmacro defwitness
          (name &amp;key predicate expr (restriction &#39;&#39;t) generalize hints)
  `(make-event
    (defwitness-fn &#39;,name &#39;,predicate &#39;,expr &#39;,restriction &#39;,generalize &#39;,hints
     state)))">defwitness</a> ,WCP-WITNESS-RULENAME
        <span class="keyword">:predicate</span> ,WITNESS-PRED
        <span class="keyword">:expr</span> ,WITNESS-EXPR
        <span class="keyword">:hints</span> ,WITNESS-HINTS
        ,@(AND GENERALIZE `(:GENERALIZE ,GENERALIZE-ALIST))
        <span class="keyword">:restriction</span> ,WITNESS-RESTRICTION)
      (<a class="sym-link local-def" href="#def-definstantiate" data-sym="DEFINSTANTIATE" title="(defmacro definstantiate
          (name &amp;key predicate vars expr (restriction &#39;&#39;t) hints)
  `(make-event
    (definstantiate-fn &#39;,name &#39;,predicate &#39;,vars &#39;,expr &#39;,restriction &#39;,hints
     state)))">definstantiate</a> ,INSTANCE-RULENAME
        <span class="keyword">:predicate</span> ,INSTANCE-PRED
        <span class="keyword">:vars</span> ,(STRIP-CARS WITNESSES)
        <span class="keyword">:expr</span> ,INSTANCE-EXPR
        <span class="keyword">:hints</span> ,INSTANCE-HINTS
        <span class="keyword">:restriction</span> ,INSTANCE-RESTRICTION))))</pre>
  </div>

<div class="form-block other" id="form-96" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-defquantexpr" data-sym="DEFQUANTEXPR" title="(defmacro defquantexpr
          (name
           &amp;key predicate (quantifier &#39;:forall) expr witnesses
           (instance-restriction &#39;&#39;t) (witness-restriction &#39;&#39;t) instance-hints
           witness-hints wcp-witness-rulename instance-rulename in-package-of
...">defquantexpr</a>
  <span class="keyword">:parents</span> (witness-cp)
  <span class="keyword">:short</span> <span class="string">"Shortcut to perform both a @(see defwitness) and @(see
definstantiate)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

@({
   (defquantexpr subsetp-equal
     :predicate (subsetp-equal x y)
     :quantifier :forall
     :witnesses ((k (subsetp-equal-witness x y)))
     :expr (implies (member-equal k x)
                    (member-equal k y))
     :witness-hints (&#39;(:in-theory &#39;(subsetp-equal-witness-correct)))
     :instance-hints (&#39;(:in-theory &#39;(subsetp-member))))
})

&lt;p&gt;This expands to a @(see defwitness) and a @(see definstantiate) form.  The
names of the resulting rules are generated from the name (first argument) of
the @(&#39;defquantexpr&#39;) form; in this case they are @(&#39;subsetp-witnessing&#39;) and
@(&#39;subsetp-equal-instancing&#39;).&lt;/p&gt;

&lt;p&gt;Witness-hints and instance-hints are the hints passed to the two forms.&lt;/p&gt;

&lt;p&gt;Additional arguments:&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;instance-rulename&#39;), provide a custom name for the @(see definstantiate)
rule.&lt;/li&gt;

&lt;li&gt;@(&#39;instance-restriction&#39;), the :restriction argument passed to
definstantiate.&lt;/li&gt;

&lt;li&gt;@(&#39;wcp-witness-rulename&#39;), provide a custom name for the @(see defwitness)
rule.&lt;/li&gt;

&lt;li&gt;@(&#39;witness-restriction&#39;), the :restriction argument passed to defwitness&lt;/li&gt;

&lt;li&gt;@(&#39;generalize&#39;).  If nil, then the defwitness rule will not do
generalization; otherwise, it will use the keys of :witnesses as the variable
names.&lt;/li&gt;

&lt;/ul&gt;


&lt;p&gt;The meaning of this form is as follows:&lt;/p&gt;

@({
    &quot;:predicate holds iff (:quantifier) (keys of :witnesses), :expr.&quot;
})

&lt;p&gt;In our example above:&lt;/p&gt;

@({
    &quot;(subsetp-equal x y) iff for all k,
       (implies (member-equal k x)
                (member-equal k y)).&quot;
})

&lt;p&gt;An example of this with an existential quantifier:&lt;/p&gt;

@({
    (defquantexpr intersectp-equal
      :predicate (intersectp-equal x y)
      :quantifier :exists
      :witnesses ((k (intersectp-equal-witness x y)))
      :expr (and (member-equal k x)
                 (member-equal k y))
      :witness-hints (&#39;(:in-theory &#39;(intersectp-equal-witness-correct)))
      :instance-hints (&#39;(:in-theory &#39;(intersectp-equal-member))))
})

&lt;p&gt;meaning:&lt;/p&gt;

@({
    &quot;(intersectp-equal x y) iff there exists k such that
        (and (member-equal k x)
             (member-equal k y))&quot;.
})

&lt;p&gt;the values bound to each key in :witnesses should be witnesses for the
existential quantifier in the direction of the bi-implication that
involves (the forward direction for :exists and the backward for :forall):&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;for the first example,

@({
 &quot;(let ((k (subsetp-equal-witness x y)))
      (implies (member-equal k x)
               (member-equal k y)))
   ==&gt;
   (subsetp-equal x y).&quot;
})&lt;/li&gt;

&lt;li&gt;for the second example,
@({
 &quot;(intersectp-equal x y)
   ==&gt;
   (let ((k (intersectp-equal-witness x y)))
     (and (member-equal k x)
          (member-equal k y))).&quot;
})&lt;/li&gt;

&lt;/ul&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defquantexpr" data-defines="DEFQUANTEXPR" data-references="DEFQUANTEXPR-FN,GENERALIZE,IN-PACKAGE-OF,INSTANCE-RULENAME,WCP-WITNESS-RULENAME,WITNESS-HINTS,INSTANCE-HINTS,WITNESS-RESTRICTION,T,INSTANCE-RESTRICTION,WITNESSES,EXPR,QUOTE,QUANTIFIER,PREDICATE,&KEY,NAME,DEFMACRO" data-used-by="DEFQUANT-FN,DEFQUANTEXPR-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFQUANTEXPR">defquantexpr</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defquantexpr" data-sym="DEFQUANTEXPR" title="(defmacro defquantexpr
          (name
           &amp;key predicate (quantifier &#39;:forall) expr witnesses
           (instance-restriction &#39;&#39;t) (witness-restriction &#39;&#39;t) instance-hints
           witness-hints wcp-witness-rulename instance-rulename in-package-of
...">defquantexpr</a>
  (name &amp;key
    predicate
    (quantifier '<span class="keyword">:forall</span>)
    expr
    witnesses
    (instance-restriction ''<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (witness-restriction ''<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    instance-hints
    witness-hints
    wcp-witness-rulename
    instance-rulename
    in-package-of
    (generalize '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link local-def" href="#def-defquantexpr-fn" data-sym="DEFQUANTEXPR-FN" title="(defun defquantexpr-fn
       (name predicate quantifier expr witnesses instance-restriction
        witness-restriction instance-hints witness-hints wcp-witness-rulename
        instance-rulename generalize in-package-of)
  (b*
...">defquantexpr-fn</a> name
    predicate
    quantifier
    expr
    witnesses
    instance-restriction
    witness-restriction
    instance-hints
    witness-hints
    wcp-witness-rulename
    instance-rulename
    generalize
    in-package-of))</pre>
  </div>

<div class="form-block function" id="def-look-up-wcp-witness-rules" data-defines="LOOK-UP-WCP-WITNESS-RULES" data-references="CONS,CAR,ASSOC,LOOK,CDR,MISSING,REST,B*,MV,ATOM,IF,TABLE,RULES,DEFUN" data-used-by="WITNESS-EXPAND-RULESET" data-part-name="LOOK-UP-WCP-WITNESS-RULES" data-part-args="TABLE,RULES" data-part-body="CONS,CAR,ASSOC,LOOK,TABLE,CDR,LOOK-UP-WCP-WITNESS-RULES,MISSING,REST,B*,MV,RULES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LOOK-UP-WCP-WITNESS-RULES">look-up-wcp-witness-rules</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-look-up-wcp-witness-rules" data-sym="LOOK-UP-WCP-WITNESS-RULES" title="(defun look-up-wcp-witness-rules (rules table)
  (if (atom rules)
      (mv nil nil)
      (b*
       (((mv rest missing) (look-up-wcp-witness-rules (cdr rules) table))
...">look-up-wcp-witness-rules</a>
  (rules <a class="sym-link system" href="../../axioms.html#def-table" data-sym="TABLE">table</a>)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> rules)
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a> missing) (<a class="sym-link local-def" href="#def-look-up-wcp-witness-rules" data-sym="LOOK-UP-WCP-WITNESS-RULES" title="(defun look-up-wcp-witness-rules (rules table)
  (if (atom rules)
      (mv nil nil)
      (b*
       (((mv rest missing) (look-up-wcp-witness-rules (cdr rules) table))
...">look-up-wcp-witness-rules</a> (cdr rules) <a class="sym-link system" href="../../axioms.html#def-table" data-sym="TABLE">table</a>)) (look (<a class="sym-link system" href="../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> (car rules) <a class="sym-link system" href="../../axioms.html#def-table" data-sym="TABLE">table</a>)))
      (if look
        (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cons look <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>) missing)
        (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a> (cons (car rules) missing))))))</pre>
  </div>

<div class="form-block other" id="form-99" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-def-witness-ruleset" data-sym="DEF-WITNESS-RULESET" title="(defmacro def-witness-ruleset (name rules)
  `(table witness-cp-rulesets &#39;,name ,rules))">def-witness-ruleset</a>
  <span class="keyword">:parents</span> (witness-cp)
  <span class="keyword">:short</span> <span class="string">"Name a set of @(see witness-cp) rules."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The @(see witness) computed-hint macro takes a @(&#39;:ruleset&#39;)
argument that determines which witness-cp rules are allowed to fire.
@(&#39;def-witness-ruleset&#39;) allows one name to abbreviate several actual rules in
this context.&lt;/p&gt;

&lt;p&gt;Usage:&lt;/p&gt;
@({
    (def-witness-ruleset foo-rules
      &#39;(foo-instancing
        foo-witnessing
        bar-example-for-foo
        baz-example-for-foo))
})

&lt;p&gt;After submitting this form, the following invocations of WITNESS are
equivalent:&lt;/p&gt;

@({
    (witness :ruleset foo-rules)
    (witness :ruleset (foo-rules))
    (witness :ruleset (foo-instancing
                       foo-witnessing
                       bar-example-for-foo
                       baz-example-for-foo))
})

&lt;p&gt;These rulesets are defined using a table event.  If multiple different
definitions are given for the same ruleset name, the latest one is always in
effect.&lt;/p&gt;

&lt;p&gt;Rulesets can contain other rulesets.  These are expanded at the time the
@(see WITNESS) hint is run.  A ruleset can be expanded with&lt;/p&gt;

@({
   (witness-expand-ruleset names (w state))
})

&lt;p&gt;Witness rules can also be enabled/disabled using @(see witness-enable) and
@(see witness-disable); these settings take effect when WITNESS is called
without specifying a ruleset.  Ruleset names may be used in witness-enable and
witness-disable just as they are used in the ruleset argument of WITNESS.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-def-witness-ruleset" data-defines="DEF-WITNESS-RULESET" data-references="QUOTE,WITNESS-CP-RULESETS,TABLE,QUASIQUOTE,RULES,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEF-WITNESS-RULESET">def-witness-ruleset</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-def-witness-ruleset" data-sym="DEF-WITNESS-RULESET" title="(defmacro def-witness-ruleset (name rules)
  `(table witness-cp-rulesets &#39;,name ,rules))">def-witness-ruleset</a>
  (name rules)
  `(<a class="sym-link system" href="../../axioms.html#def-table" data-sym="TABLE">table</a> witness-cp-rulesets ',NAME ,RULES))</pre>
  </div>

<div class="form-block function" id="def-defquant-witnesses-mv" data-defines="DEFQUANT-WITNESSES-MV" data-references="CDR,1+,MV-NTH,QUASIQUOTE,CONS,ATOM,IF,WITNESS-CALL,VARS,N,DEFUN" data-used-by="DEFQUANT-WITNESSES" data-part-name="DEFQUANT-WITNESSES-MV" data-part-args="WITNESS-CALL,VARS,N" data-part-body="WITNESS-CALL,CDR,N,1+,DEFQUANT-WITNESSES-MV,MV-NTH,QUASIQUOTE,CONS,VARS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFQUANT-WITNESSES-MV">defquant-witnesses-mv</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defquant-witnesses-mv" data-sym="DEFQUANT-WITNESSES-MV" title="(defun defquant-witnesses-mv (n vars witness-call)
  (if (atom vars)
      nil
      (cons `(,(car vars) (mv-nth ,n ,witness-call))
            (defquant-witnesses-mv (1+ n) (cdr vars) witness-call))))">defquant-witnesses-mv</a>
  (n vars witness-call)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> vars)
    nil
    (cons `(,(CAR VARS) (<a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> ,N ,WITNESS-CALL))
      (<a class="sym-link local-def" href="#def-defquant-witnesses-mv" data-sym="DEFQUANT-WITNESSES-MV" title="(defun defquant-witnesses-mv (n vars witness-call)
  (if (atom vars)
      nil
      (cons `(,(car vars) (mv-nth ,n ,witness-call))
            (defquant-witnesses-mv (1+ n) (cdr vars) witness-call))))">defquant-witnesses-mv</a> (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> n) (cdr vars) witness-call))))</pre>
  </div>

<div class="form-block function" id="def-defquant-witnesses" data-defines="DEFQUANT-WITNESSES" data-references="DEFQUANT-WITNESSES-MV,T,QUASIQUOTE,CDR,ATOM,COND,WITNESS-CALL,VARS,DEFUN" data-part-name="DEFQUANT-WITNESSES" data-part-args="WITNESS-CALL,VARS" data-part-body="WITNESS-CALL,DEFQUANT-WITNESSES-MV,T,QUASIQUOTE,CDR,VARS,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFQUANT-WITNESSES">defquant-witnesses</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defquant-witnesses" data-sym="DEFQUANT-WITNESSES" title="(defun defquant-witnesses (vars witness-call)
  (cond ((atom vars) nil) ((atom (cdr vars)) `((,(car vars) ,witness-call)))
        (t (defquant-witnesses-mv 0 vars witness-call))))">defquant-witnesses</a>
  (vars witness-call)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> vars) nil)
    ((<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> (cdr vars)) `((,(CAR VARS) ,WITNESS-CALL)))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defquant-witnesses-mv" data-sym="DEFQUANT-WITNESSES-MV" title="(defun defquant-witnesses-mv (n vars witness-call)
  (if (atom vars)
      nil
      (cons `(,(car vars) (mv-nth ,n ,witness-call))
            (defquant-witnesses-mv (1+ n) (cdr vars) witness-call))))">defquant-witnesses-mv</a> <span class="number">0</span> vars witness-call))))</pre>
  </div>

<div class="form-block function" id="def-defquant-fn" data-defines="DEFQUANT-FN" data-references="DISABLE,IN-THEORY,DEFQUANTEXPR,PROGN,QUASIQUOTE,WITNESS-EXPR,STRING,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,QEXPR,LIST,ATOM,IF,NTH,QVARS,EQUAL,EXISTS-P,DEFQUANT,HARD?,ER,SYMBOL-LISTP,CADR,SYMBOLP,QUOTE,CAR,SYMBOL-NAME,MEMBER-EQUAL,LEN,EQL,AND,NOT,WHEN,CONS,QCALL,OR,B*,IN-PACKAGE-OF,WITNESS-DCLS,STRENGTHEN,REWRITE,THM-NAME,SKOLEM-NAME,QUANT-OK,INSTANCE-RULENAME,WCP-WITNESS-RULENAME,DEFINE,QUANT-EXPR,VARS,NAME,DEFUN" data-used-by="DEFQUANT" data-part-name="DEFQUANT-FN" data-part-args="IN-PACKAGE-OF,WITNESS-DCLS,STRENGTHEN,REWRITE,THM-NAME,SKOLEM-NAME,QUANT-OK,INSTANCE-RULENAME,WCP-WITNESS-RULENAME,DEFINE,QUANT-EXPR,VARS,NAME" data-part-body="DISABLE,IN-THEORY,DEFQUANTEXPR,PROGN,QUASIQUOTE,THM-NAME,WITNESS-EXPR,STRING,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,SKOLEM-NAME,QEXPR,LIST,ATOM,IF,NTH,QVARS,EQUAL,EXISTS-P,DEFQUANT,HARD?,ER,SYMBOL-LISTP,CADR,SYMBOLP,QUOTE,CAR,SYMBOL-NAME,MEMBER-EQUAL,QUANT-EXPR,LEN,EQL,AND,NOT,WHEN,VARS,CONS,QCALL,NAME,OR,IN-PACKAGE-OF,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFQUANT-FN">defquant-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defquant-fn" data-sym="DEFQUANT-FN" title="(defun defquant-fn
       (name vars quant-expr define wcp-witness-rulename instance-rulename
        quant-ok skolem-name thm-name rewrite strengthen witness-dcls
        in-package-of)
  (b*
...">defquant-fn</a>
  (name vars
    quant-expr
    define
    wcp-witness-rulename
    instance-rulename
    quant-ok
    skolem-name
    thm-name
    <a class="sym-link system" href="../../rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>
    strengthen
    witness-dcls
    in-package-of)
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> ((in-package-of (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> in-package-of name)) (qcall (cons name vars))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> quant-expr) <span class="number">3</span>)
             (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (symbol-name (car quant-expr))
               '(<span class="string">"FORALL"</span> <span class="string">"EXISTS"</span>))
             (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (symbolp (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> quant-expr))
               (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> quant-expr)))))) (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard?
          '<a class="sym-link local-def" href="#def-defquant" data-sym="DEFQUANT" title="(defmacro defquant
          (name vars quant-expr
           &amp;key (define &#39;t) wcp-witness-rulename instance-rulename quant-ok
           skolem-name thm-name rewrite strengthen in-package-of
           (witness-dcls &#39;((declare (xargs :non-executable t)))))
...">defquant</a>
          <span class="string">"Malformed quantifier expression: ~x0~%"</span>
          quant-expr))
      (exists-p (equal (symbol-name (car quant-expr)) <span class="string">"EXISTS"</span>))
      (qvars (<a class="sym-link system" href="../../axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> quant-expr))
      (qvars (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> qvars)
          (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> qvars)
          qvars))
      (qexpr (<a class="sym-link system" href="../../axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> quant-expr))
      (skolem-name (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> skolem-name
          (intern-in-package-of-symbol (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> (symbol-name name) <span class="string">"-WITNESS"</span>)
            in-package-of)))
      (witness-expr (cons skolem-name vars))
      (thm-name (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> thm-name
          (intern-in-package-of-symbol (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
              (symbol-name name)
              (if exists-p
                <span class="string">"-SUFF"</span>
                <span class="string">"-NECC"</span>))
            in-package-of))))
    `(<a class="sym-link system" href="../../axioms.html#def-progn" data-sym="PROGN">progn</a> ,@(AND DEFINE
       `((DEFUN-SK ,NAME ,VARS ,@WITNESS-DCLS ,QUANT-EXPR :QUANT-OK ,QUANT-OK
                   :SKOLEM-NAME ,SKOLEM-NAME :THM-NAME ,THM-NAME :REWRITE
                   ,REWRITE :STRENGTHEN ,STRENGTHEN)))
      (<a class="sym-link local-def" href="#def-defquantexpr" data-sym="DEFQUANTEXPR" title="(defmacro defquantexpr
          (name
           &amp;key predicate (quantifier &#39;:forall) expr witnesses
           (instance-restriction &#39;&#39;t) (witness-restriction &#39;&#39;t) instance-hints
           witness-hints wcp-witness-rulename instance-rulename in-package-of
...">defquantexpr</a> ,NAME
        <span class="keyword">:predicate</span> ,QCALL
        <span class="keyword">:quantifier</span> ,(IF EXISTS-P
     :EXISTS
     :FORALL)
        <span class="keyword">:witnesses</span> ,(DEFQUANT-WITNESSES QVARS WITNESS-EXPR)
        <span class="keyword">:expr</span> ,QEXPR
        <span class="keyword">:witness-hints</span> ('(<span class="keyword">:in-theory</span> '(,NAME)))
        <span class="keyword">:instance-hints</span> ('(<span class="keyword">:in-theory</span> nil <span class="keyword">:use</span> ,THM-NAME))
        <span class="keyword">:wcp-witness-rulename</span> ,WCP-WITNESS-RULENAME
        <span class="keyword">:instance-rulename</span> ,INSTANCE-RULENAME)
      (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable ,NAME ,THM-NAME)))))</pre>
  </div>

<div class="form-block other" id="form-104" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-defquant" data-sym="DEFQUANT" title="(defmacro defquant
          (name vars quant-expr
           &amp;key (define &#39;t) wcp-witness-rulename instance-rulename quant-ok
           skolem-name thm-name rewrite strengthen in-package-of
           (witness-dcls &#39;((declare (xargs :non-executable t)))))
...">defquant</a>
  <span class="keyword">:parents</span> (witness-cp)
  <span class="keyword">:short</span> <span class="string">"Define a quantified function and corresponding @(see witness-cp)
rules."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Defquant introduces a quantified function using @(see defun-sk) and
subsequently adds appropriate @(see defwitness) and @(see definstantiate) rules
for that function.  Note that no @(see defexample) rules are provided (we judge
these too hard to get right automatically).&lt;/p&gt;

&lt;p&gt;Usage: Defquant takes the same arguments as @(see defun-sk), plus the
following additional keywords:&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;:define&#39;) &amp;mdash; default t, use nil to skip the defun-sk step (useful
       if it has already been done)&lt;/li&gt;

&lt;li&gt;@(&#39;:wcp-witness-rulename&#39;) and @(&#39;:instance-rulename&#39;) &amp;mdash; name the
     generated witness and instance rules.  The defaults are name-witnessing
     and name-instancing.&lt;/li&gt;

&lt;/ul&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defquant" data-defines="DEFQUANT" data-references="DEFQUANT-FN,XARGS,DECLARE,WITNESS-DCLS,IN-PACKAGE-OF,STRENGTHEN,REWRITE,THM-NAME,SKOLEM-NAME,QUANT-OK,INSTANCE-RULENAME,WCP-WITNESS-RULENAME,T,QUOTE,DEFINE,&KEY,QUANT-EXPR,VARS,NAME,DEFMACRO" data-used-by="DEFQUANT-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFQUANT">defquant</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defquant" data-sym="DEFQUANT" title="(defmacro defquant
          (name vars quant-expr
           &amp;key (define &#39;t) wcp-witness-rulename instance-rulename quant-ok
           skolem-name thm-name rewrite strengthen in-package-of
           (witness-dcls &#39;((declare (xargs :non-executable t)))))
...">defquant</a>
  (name vars
    quant-expr
    &amp;key
    (define '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    wcp-witness-rulename
    instance-rulename
    quant-ok
    skolem-name
    thm-name
    <a class="sym-link system" href="../../rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>
    strengthen
    in-package-of
    (witness-dcls '((declare (xargs <span class="keyword">:non-executable</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)))))
  (<a class="sym-link local-def" href="#def-defquant-fn" data-sym="DEFQUANT-FN" title="(defun defquant-fn
       (name vars quant-expr define wcp-witness-rulename instance-rulename
        quant-ok skolem-name thm-name rewrite strengthen witness-dcls
        in-package-of)
  (b*
...">defquant-fn</a> name
    vars
    quant-expr
    define
    wcp-witness-rulename
    instance-rulename
    quant-ok
    skolem-name
    thm-name
    <a class="sym-link system" href="../../rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>
    strengthen
    witness-dcls
    in-package-of))</pre>
  </div>

<div class="form-block function" id="def-wcp-witness-rule-e_2Fd-event" data-defines="WCP-WITNESS-RULE-E/D-EVENT" data-references="QUOTE,TABLE,QUASIQUOTE,AND,ASSOC,LOOK,TABLE-ALIST,AL,B*,WORLD,ENABLEP,TABLENAME,RULENAME,DEFUN" data-used-by="WITNESS-E/D-EVENTS" data-part-name="WCP-WITNESS-RULE-E/D-EVENT" data-part-args="WORLD,ENABLEP,TABLENAME,RULENAME" data-part-body="QUOTE,TABLE,QUASIQUOTE,AND,RULENAME,ASSOC,LOOK,WORLD,TABLENAME,TABLE-ALIST,AL,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WCP-WITNESS-RULE-E/D-EVENT">wcp-witness-rule-e/d-event</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-wcp-witness-rule-e_2Fd-event" data-sym="WCP-WITNESS-RULE-E/D-EVENT" title="(defun wcp-witness-rule-e/d-event (rulename tablename enablep world)
  (b* ((al (table-alist tablename world)) (look (assoc rulename al)))
   (and look
        `((table ,tablename &#39;,rulename &#39;,(update-nth 0 enablep (cdr look)))))))">wcp-witness-rule-e/d-event</a>
  (rulename tablename enablep world)
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> ((al (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> tablename world)) (look (<a class="sym-link system" href="../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> rulename al)))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> look
      `((<a class="sym-link system" href="../../axioms.html#def-table" data-sym="TABLE">table</a> ,TABLENAME
         ',RULENAME
         ',(UPDATE-NTH 0 ENABLEP (CDR LOOK)))))))</pre>
  </div>

<div class="form-block function" id="def-union-assoc" data-defines="UNION-ASSOC" data-references="CAR,CONS,T,CDR,CAAR,ASSOC,ATOM,COND,B,A,DEFUN" data-used-by="WITNESS-EXPAND-RULESET" data-part-name="UNION-ASSOC" data-part-args="B,A" data-part-body="CAR,CONS,T,CDR,UNION-ASSOC,CAAR,ASSOC,B,A,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNION-ASSOC">union-assoc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a>
  (a b)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> a) b)
    ((<a class="sym-link system" href="../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> (<a class="sym-link system" href="../../axioms.html#def-caar" data-sym="CAAR">caar</a> a) b) (<a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a> (cdr a) b))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons (car a) (<a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a> (cdr a) b)))))</pre>
  </div>

<div class="form-block function" id="def-remove-dups-assoc" data-defines="REMOVE-DUPS-ASSOC" data-references="CAR,CONS,T,CDR,CAAR,ASSOC,ATOM,COND,A,DEFUN" data-used-by="WITNESS-EXPAND-RULESET" data-part-name="REMOVE-DUPS-ASSOC" data-part-args="A" data-part-body="CAR,CONS,T,REMOVE-DUPS-ASSOC,CDR,CAAR,ASSOC,A,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-DUPS-ASSOC">remove-dups-assoc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-dups-assoc" data-sym="REMOVE-DUPS-ASSOC" title="(defun remove-dups-assoc (a)
  (cond ((atom a) nil) ((assoc (caar a) (cdr a)) (remove-dups-assoc (cdr a)))
        (t (cons (car a) (remove-dups-assoc (cdr a))))))">remove-dups-assoc</a>
  (a)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> a) nil)
    ((<a class="sym-link system" href="../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> (<a class="sym-link system" href="../../axioms.html#def-caar" data-sym="CAAR">caar</a> a) (cdr a)) (<a class="sym-link local-def" href="#def-remove-dups-assoc" data-sym="REMOVE-DUPS-ASSOC" title="(defun remove-dups-assoc (a)
  (cond ((atom a) nil) ((assoc (caar a) (cdr a)) (remove-dups-assoc (cdr a)))
        (t (cons (car a) (remove-dups-assoc (cdr a))))))">remove-dups-assoc</a> (cdr a)))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons (car a) (<a class="sym-link local-def" href="#def-remove-dups-assoc" data-sym="REMOVE-DUPS-ASSOC" title="(defun remove-dups-assoc (a)
  (cond ((atom a) nil) ((assoc (caar a) (cdr a)) (remove-dups-assoc (cdr a)))
        (t (cons (car a) (remove-dups-assoc (cdr a))))))">remove-dups-assoc</a> (cdr a))))))</pre>
  </div>

<div class="form-block function" id="def-instance-rules-for-examples" data-defines="INSTANCE-RULES-FOR-EXAMPLES" data-references="CDR,CAR,WCP-TEMPLATE->RULENAMES,APPEND,ATOM,IF,EXAMPLE-TEMPLATES,DEFUN" data-used-by="WITNESS-EXPAND-RULESET" data-part-name="INSTANCE-RULES-FOR-EXAMPLES" data-part-args="EXAMPLE-TEMPLATES" data-part-body="CDR,INSTANCE-RULES-FOR-EXAMPLES,CAR,WCP-TEMPLATE->RULENAMES,APPEND,EXAMPLE-TEMPLATES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSTANCE-RULES-FOR-EXAMPLES">instance-rules-for-examples</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-instance-rules-for-examples" data-sym="INSTANCE-RULES-FOR-EXAMPLES" title="(defun instance-rules-for-examples (example-templates)
  (if (atom example-templates)
      nil
      (append (wcp-template-&gt;rulenames (car example-templates))
              (instance-rules-for-examples (cdr example-templates)))))">instance-rules-for-examples</a>
  (example-templates)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> example-templates)
    nil
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (wcp-template-&gt;rulenames (car example-templates))
      (<a class="sym-link local-def" href="#def-instance-rules-for-examples" data-sym="INSTANCE-RULES-FOR-EXAMPLES" title="(defun instance-rules-for-examples (example-templates)
  (if (atom example-templates)
      nil
      (append (wcp-template-&gt;rulenames (car example-templates))
              (instance-rules-for-examples (cdr example-templates)))))">instance-rules-for-examples</a> (cdr example-templates)))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-witness-expand-ruleset" data-defines="WITNESS-EXPAND-RULESET" data-references="CONS,NOT,WHEN,WITNESS-CP-RULESETS,CAR,ASSOC,RULESET-LOOK,CDR,ATOM,IF,UNION-ASSOC,INSTANCE-RULES2,WITNESS-CP-INSTANCE-RULES,STRIP-CDRS,INSTANCE-RULES-FOR-EXAMPLES,INSTANCE-RULES1,REMOVE-DUPS-ASSOC,WITNESS-CP-EXAMPLE-TEMPLATES,EXAMPLE-TEMPLATES1,WITNESS-CP-WITNESS-RULES,QUOTE,TABLE-ALIST,LOOK-UP-WCP-WITNESS-RULES,&,WCP-WITNESS-RULES1,WITNESS-EXPAND-RULESET-NAMES,REST,EXAMPLE-TEMPLATES,INSTANCE-RULES,WCP-WITNESS-RULES,MV,B*,XARGS,DECLARE,WORLD,NAMES,DEFUN,MUTUAL-RECURSION" data-used-by="WITNESS,WITNESS-E/D-RULESET-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITNESS-EXPAND-RULESET">witness-expand-ruleset</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-witness-expand-ruleset" data-sym="WITNESS-EXPAND-RULESET" title="(mutual-recursion
 (defun witness-expand-ruleset (names world)
   (declare (xargs :mode :program))
   (b*
    (((mv wcp-witness-rules instance-rules example-templates rest)
...">witness-expand-ruleset</a>
    (names world)
    (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> wcp-witness-rules instance-rules example-templates <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>) (witness-expand-ruleset-names names world)) ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> wcp-witness-rules1 &amp;) (<a class="sym-link local-def" href="#def-look-up-wcp-witness-rules" data-sym="LOOK-UP-WCP-WITNESS-RULES" title="(defun look-up-wcp-witness-rules (rules table)
  (if (atom rules)
      (mv nil nil)
      (b*
       (((mv rest missing) (look-up-wcp-witness-rules (cdr rules) table))
...">look-up-wcp-witness-rules</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>
            (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'witness-cp-witness-rules world)))
        ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> example-templates1 &amp;) (<a class="sym-link local-def" href="#def-look-up-wcp-witness-rules" data-sym="LOOK-UP-WCP-WITNESS-RULES" title="(defun look-up-wcp-witness-rules (rules table)
  (if (atom rules)
      (mv nil nil)
      (b*
       (((mv rest missing) (look-up-wcp-witness-rules (cdr rules) table))
...">look-up-wcp-witness-rules</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>
            (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'witness-cp-example-templates world)))
        (example-templates1 (<a class="sym-link local-def" href="#def-remove-dups-assoc" data-sym="REMOVE-DUPS-ASSOC" title="(defun remove-dups-assoc (a)
  (cond ((atom a) nil) ((assoc (caar a) (cdr a)) (remove-dups-assoc (cdr a)))
        (t (cons (car a) (remove-dups-assoc (cdr a))))))">remove-dups-assoc</a> example-templates1))
        ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> instance-rules1 &amp;) (<a class="sym-link local-def" href="#def-look-up-wcp-witness-rules" data-sym="LOOK-UP-WCP-WITNESS-RULES" title="(defun look-up-wcp-witness-rules (rules table)
  (if (atom rules)
      (mv nil nil)
      (b*
       (((mv rest missing) (look-up-wcp-witness-rules (cdr rules) table))
...">look-up-wcp-witness-rules</a> (<a class="sym-link local-def" href="#def-instance-rules-for-examples" data-sym="INSTANCE-RULES-FOR-EXAMPLES" title="(defun instance-rules-for-examples (example-templates)
  (if (atom example-templates)
      nil
      (append (wcp-template-&gt;rulenames (car example-templates))
              (instance-rules-for-examples (cdr example-templates)))))">instance-rules-for-examples</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> example-templates1))
            (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'witness-cp-instance-rules world)))
        ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> instance-rules2 &amp;) (<a class="sym-link local-def" href="#def-look-up-wcp-witness-rules" data-sym="LOOK-UP-WCP-WITNESS-RULES" title="(defun look-up-wcp-witness-rules (rules table)
  (if (atom rules)
      (mv nil nil)
      (b*
       (((mv rest missing) (look-up-wcp-witness-rules (cdr rules) table))
...">look-up-wcp-witness-rules</a> <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>
            (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'witness-cp-instance-rules world))))
      (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a> (<a class="sym-link local-def" href="#def-remove-dups-assoc" data-sym="REMOVE-DUPS-ASSOC" title="(defun remove-dups-assoc (a)
  (cond ((atom a) nil) ((assoc (caar a) (cdr a)) (remove-dups-assoc (cdr a)))
        (t (cons (car a) (remove-dups-assoc (cdr a))))))">remove-dups-assoc</a> wcp-witness-rules1)
          wcp-witness-rules)
        (<a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a> (<a class="sym-link local-def" href="#def-remove-dups-assoc" data-sym="REMOVE-DUPS-ASSOC" title="(defun remove-dups-assoc (a)
  (cond ((atom a) nil) ((assoc (caar a) (cdr a)) (remove-dups-assoc (cdr a)))
        (t (cons (car a) (remove-dups-assoc (cdr a))))))">remove-dups-assoc</a> instance-rules1)
          (<a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a> (<a class="sym-link local-def" href="#def-remove-dups-assoc" data-sym="REMOVE-DUPS-ASSOC" title="(defun remove-dups-assoc (a)
  (cond ((atom a) nil) ((assoc (caar a) (cdr a)) (remove-dups-assoc (cdr a)))
        (t (cons (car a) (remove-dups-assoc (cdr a))))))">remove-dups-assoc</a> instance-rules2)
            instance-rules))
        (<a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a> example-templates1 example-templates))))
  (<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> witness-expand-ruleset-names
    (names world)
    (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> names)
      (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil nil nil)
      (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> wcp-witness-rules instance-rules example-templates <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>) (witness-expand-ruleset-names (cdr names) world)) (ruleset-look (<a class="sym-link system" href="../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> (car names) (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'witness-cp-rulesets world)))
          ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> ruleset-look)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> wcp-witness-rules
              instance-rules
              example-templates
              (cons (car names) <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)))
          ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> wcp-witness-rules1 instance-rules1 example-templates1) (<a class="sym-link local-def" href="#def-witness-expand-ruleset" data-sym="WITNESS-EXPAND-RULESET" title="(mutual-recursion
 (defun witness-expand-ruleset (names world)
   (declare (xargs :mode :program))
   (b*
    (((mv wcp-witness-rules instance-rules example-templates rest)
...">witness-expand-ruleset</a> (cdr ruleset-look) world)))
        (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a> wcp-witness-rules1 wcp-witness-rules)
          (<a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a> instance-rules1 instance-rules)
          (<a class="sym-link local-def" href="#def-union-assoc" data-sym="UNION-ASSOC" title="(defun union-assoc (a b)
  (cond ((atom a) b) ((assoc (caar a) b) (union-assoc (cdr a) b))
        (t (cons (car a) (union-assoc (cdr a) b)))))">union-assoc</a> example-templates1 example-templates)
          <a class="sym-link system" href="../../axioms.html#def-rest" data-sym="REST">rest</a>)))))</pre>
  </div>

<div class="form-block function" id="def-witness-e_2Fd-events" data-defines="WITNESS-E/D-EVENTS" data-references="CDR,CAR,WCP-WITNESS-RULE-E/D-EVENT,APPEND,ATOM,IF,WORLD,ENABLEP,TABLENAME,NAMES,DEFUN" data-part-name="WITNESS-E/D-EVENTS" data-part-args="WORLD,ENABLEP,TABLENAME,NAMES" data-part-body="CDR,WITNESS-E/D-EVENTS,WORLD,ENABLEP,TABLENAME,CAR,WCP-WITNESS-RULE-E/D-EVENT,APPEND,NAMES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITNESS-E/D-EVENTS">witness-e/d-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-witness-e_2Fd-events" data-sym="WITNESS-E/D-EVENTS" title="(defun witness-e/d-events (names tablename enablep world)
  (if (atom names)
      nil
      (append (wcp-witness-rule-e/d-event (car names) tablename enablep world)
              (witness-e/d-events (cdr names) tablename enablep world))))">witness-e/d-events</a>
  (names tablename enablep world)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> names)
    nil
    (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-wcp-witness-rule-e_2Fd-event" data-sym="WCP-WITNESS-RULE-E/D-EVENT" title="(defun wcp-witness-rule-e/d-event (rulename tablename enablep world)
  (b* ((al (table-alist tablename world)) (look (assoc rulename al)))
   (and look
        `((table ,tablename &#39;,rulename &#39;,(update-nth 0 enablep (cdr look)))))))">wcp-witness-rule-e/d-event</a> (car names)
        tablename
        enablep
        world)
      (<a class="sym-link local-def" href="#def-witness-e_2Fd-events" data-sym="WITNESS-E/D-EVENTS" title="(defun witness-e/d-events (names tablename enablep world)
  (if (atom names)
      nil
      (append (wcp-witness-rule-e/d-event (car names) tablename enablep world)
              (witness-e/d-events (cdr names) tablename enablep world))))">witness-e/d-events</a> (cdr names) tablename enablep world))))</pre>
  </div>

<div class="form-block function" id="def-witness-e_2Fd-ruleset-fn" data-defines="WITNESS-E/D-RULESET-FN" data-references="PROGN,ERROR,WITH-OUTPUT,QUASIQUOTE,WITNESS-EXPAND-RULESET,E,I,W,MV,LIST,ATOM,IF,B*,XARGS,DECLARE,WORLD,ENABLEP,NAMES,DEFUN" data-part-name="WITNESS-E/D-RULESET-FN" data-part-args="WORLD,ENABLEP,NAMES" data-part-declare="XARGS,DECLARE" data-part-body="PROGN,ERROR,WITH-OUTPUT,QUASIQUOTE,WORLD,WITNESS-EXPAND-RULESET,E,I,W,MV,LIST,ATOM,IF,NAMES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITNESS-E/D-RULESET-FN">witness-e/d-ruleset-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-witness-e_2Fd-ruleset-fn" data-sym="WITNESS-E/D-RULESET-FN" title="(defun witness-e/d-ruleset-fn (names enablep world)
  (declare (xargs :mode :program))
  (b*
   ((names
     (if (atom names)
...">witness-e/d-ruleset-fn</a>
  (names enablep world)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> ((names (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> names)
         (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> names)
         names)) ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> i e) (<a class="sym-link local-def" href="#def-witness-expand-ruleset" data-sym="WITNESS-EXPAND-RULESET" title="(mutual-recursion
 (defun witness-expand-ruleset (names world)
   (declare (xargs :mode :program))
   (b*
    (((mv wcp-witness-rules instance-rules example-templates rest)
...">witness-expand-ruleset</a> names world)))
    `(<a class="sym-link system" href="../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> <span class="keyword">:all</span> <span class="keyword">:on</span> error
      (<a class="sym-link system" href="../../axioms.html#def-progn" data-sym="PROGN">progn</a> ,@(WITNESS-E/D-EVENTS (STRIP-CARS W) &#39;WITNESS-CP-WITNESS-RULES ENABLEP WORLD)
        ,@(WITNESS-E/D-EVENTS (STRIP-CARS I) &#39;WITNESS-CP-INSTANCE-RULES ENABLEP WORLD) . ,(WITNESS-E/D-EVENTS (STRIP-CARS E) &#39;WITNESS-CP-EXAMPLE-TEMPLATES ENABLEP WORLD)))))</pre>
  </div>

<div class="form-block other" id="form-113" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection witness-enable
  <span class="keyword">:parents</span> (<a class="sym-link local-def" href="#def-def-witness-ruleset" data-sym="DEF-WITNESS-RULESET" title="(defmacro def-witness-ruleset (name rules)
  `(table witness-cp-rulesets &#39;,name ,rules))">def-witness-ruleset</a>)
  <span class="keyword">:short</span> <span class="string">"Enable some rules for @(see witness-cp)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> witness-enable
    (&amp;rest names)
    `(<a class="sym-link system" href="../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-witness-e_2Fd-ruleset-fn" data-sym="WITNESS-E/D-RULESET-FN" title="(defun witness-e/d-ruleset-fn (names enablep world)
  (declare (xargs :mode :program))
  (b*
   ((names
     (if (atom names)
...">witness-e/d-ruleset-fn</a> ',NAMES <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))))</pre>
  </div>

<div class="form-block other" id="form-114" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection witness-disable
  <span class="keyword">:parents</span> (<a class="sym-link local-def" href="#def-def-witness-ruleset" data-sym="DEF-WITNESS-RULESET" title="(defmacro def-witness-ruleset (name rules)
  `(table witness-cp-rulesets &#39;,name ,rules))">def-witness-ruleset</a>)
  <span class="keyword">:short</span> <span class="string">"Disable some rules for @(see witness-cp)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> witness-disable
    (&amp;rest names)
    `(<a class="sym-link system" href="../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-witness-e_2Fd-ruleset-fn" data-sym="WITNESS-E/D-RULESET-FN" title="(defun witness-e/d-ruleset-fn (names enablep world)
  (declare (xargs :mode :program))
  (b*
   ((names
     (if (atom names)
...">witness-e/d-ruleset-fn</a> ',NAMES nil (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))))</pre>
  </div>

<div class="form-block other" id="form-115" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-witness" data-sym="WITNESS" title="(defmacro witness (&amp;key ruleset)
  `(and stable-under-simplificationp
        (b*
         ((ruleset &#39;,ruleset)
          ((mv w i e)
...">witness</a>
  <span class="keyword">:parents</span> (witness-cp)
  <span class="keyword">:short</span> <span class="string">"Computed hint for calling the @(see witness-cp) clause processor."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Usage:&lt;/p&gt;

@({
   (witness :ruleset (rule ruleset ...)
            :examples ((inst-rulename1 term1 term2 ...)
                       (inst-rulename2 term3 ...) ...)
            :generalize t)
})

&lt;p&gt;Calls the clause processor @(see WITNESS-CP).  If a ruleset is provided,
only those witness-cp rules will be available; otherwise, all rules that are
currently enabled (see @(see witness-enable) and @(see witness-disable)) are
used.&lt;/p&gt;

&lt;p&gt;The @(&#39;:generalize&#39;) argument is T by default; if set to NIL, the
generalization step is skipped; see @(see witness-cp).&lt;/p&gt;

&lt;p&gt;The @(&#39;:examples&#39;) argument is empty by default.  Usually, examples are
generated by @(see defexample) rules.  However, in some cases you might like to
instantiate universally quantified hyps in a particular way on a one-off basis;
this may be done using the @(&#39;:examples&#39;) field.  Within an example:&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;Each @(&#39;inst-rulename&#39;) must be the name of a @(see definstantiate) rule,
and&lt;/li&gt;

&lt;li&gt;The terms following it correspond to that rule&#39;s @(&#39;:vars&#39;).  In
particular, the list of terms must be the same length as the @(&#39;:vars&#39;) of the
rule.&lt;/li&gt;

&lt;/ul&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-witness" data-defines="WITNESS" data-references="WITNESS-CP,STATE,STRIP-CDRS,CLAUSE,WCP-HINT-FOR-CLAUSE,HINT,WITNESS-CP-EXAMPLE-TEMPLATES,WITNESS-CP-INSTANCE-RULES,WITNESS-CP-WITNESS-RULES,TABLE-ALIST,WORLD,LIST,ATOM,WITNESS-EXPAND-RULESET,IF,E,I,W,MV,QUOTE,B*,STABLE-UNDER-SIMPLIFICATIONP,AND,QUASIQUOTE,RULESET,&KEY,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WITNESS">witness</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-witness" data-sym="WITNESS" title="(defmacro witness (&amp;key ruleset)
  `(and stable-under-simplificationp
        (b*
         ((ruleset &#39;,ruleset)
          ((mv w i e)
...">witness</a>
  (&amp;key ruleset)
  `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
    (<a class="sym-link external" href="../std/util/bstar.html#def-b_2A" data-sym="B*">b*</a> ((ruleset ',RULESET) ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> i e) (if ruleset
            (<a class="sym-link local-def" href="#def-witness-expand-ruleset" data-sym="WITNESS-EXPAND-RULESET" title="(mutual-recursion
 (defun witness-expand-ruleset (names world)
   (declare (xargs :mode :program))
   (b*
    (((mv wcp-witness-rules instance-rules example-templates rest)
...">witness-expand-ruleset</a> (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> ruleset)
                (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> ruleset)
                ruleset)
              world)
            (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'witness-cp-witness-rules world)
              (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'witness-cp-instance-rules world)
              (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'witness-cp-example-templates world))))
        (hint (wcp-hint-for-clause clause
            (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a>)
            (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> i)
            (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> e)
            state)))
      `(<span class="keyword">:clause-processor</span> (witness-cp clause ',HINT state)))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>