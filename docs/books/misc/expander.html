<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>expander - ACL2 Book</title>
  <meta property="name" content="expander">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">expander</h1>
    <div class="path"><a href="expander.lisp" class="source-link">books/misc/expander</a></div>
  </div>
  
  <main property="text">
  <div class="includes-section">
    <h2>Included Books</h2>
    <div class="includes-list">
      <a class="include-link" href="../xdoc/top.html" title="xdoc/top">top</a>
    </div>
  </div>

<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block include-book" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../xdoc/top.html" title="Open xdoc/top">"xdoc/top"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc expander
  <span class="keyword">:parents</span> (miscellaneous)
  <span class="keyword">:short</span> <span class="string">"Routines for simplifying terms."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;NOTE: If you are looking for a simple interface to the ACL2
rewriter, see @(see rewrite$).&lt;/p&gt;

&lt;p&gt;The routines provided by the expander can be useful in generating
theorems and simplifying expressions, under given assumptions.&lt;/p&gt;

&lt;p&gt;They were developed rather in a hurry and should be used without expecting
the usual standards of care present in development of ACL2 code.  Once these
routines are used to generate theorems for you, you should check the theorems
directly with ACL2.&lt;/p&gt;

&lt;p&gt;To load the expander, run:&lt;/p&gt;

@({
   (include-book &quot;misc/expander&quot; :dir :system)
})"</span>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-set-state-ok" data-sym="SET-STATE-OK">set-state-ok</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block encapsulate" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> ((hidden-expander-function (x) <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../axioms.html#def-logic" data-sym="LOGIC">logic</a>)
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> hidden-expander-function (x) x)))</pre>
  </div>

<div class="form-block function" id="def-silly-rec-fn-for-rewrite_2A" data-defines="SILLY-REC-FN-FOR-REWRITE*" data-references="CDR,CONSP,IF,T,XARGS,DECLARE,X,DEFUN" data-used-by="REWRITE*" data-part-name="SILLY-REC-FN-FOR-REWRITE*" data-part-args="X" data-part-declare="T,XARGS,DECLARE" data-part-body="CDR,SILLY-REC-FN-FOR-REWRITE*,X,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SILLY-REC-FN-FOR-REWRITE*">silly-rec-fn-for-rewrite*</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-silly-rec-fn-for-rewrite_2A" data-sym="SILLY-REC-FN-FOR-REWRITE*" title="(defun silly-rec-fn-for-rewrite* (x)
  (declare (xargs :verify-guards t))
  (if (consp x)
      (silly-rec-fn-for-rewrite* (cdr x))
      x))">silly-rec-fn-for-rewrite*</a>
  (x)
  (declare (xargs <span class="keyword">:verify-guards</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
  (if (consp x)
    (<a class="sym-link local-def" href="#def-silly-rec-fn-for-rewrite_2A" data-sym="SILLY-REC-FN-FOR-REWRITE*" title="(defun silly-rec-fn-for-rewrite* (x)
  (declare (xargs :verify-guards t))
  (if (consp x)
      (silly-rec-fn-for-rewrite* (cdr x))
      x))">silly-rec-fn-for-rewrite*</a> (cdr x))
    x))</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block constant" id="def-_2Avalid-output-names-except-error_2A" data-defines="*VALID-OUTPUT-NAMES-EXCEPT-ERROR*" data-references="ERROR,QUOTE,*VALID-OUTPUT-NAMES*,SET-DIFFERENCE-EQ,DEFCONST" data-used-by="MAYBE-INHIBIT-OUTPUT-LST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*VALID-OUTPUT-NAMES-EXCEPT-ERROR*">*valid-output-names-except-error*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Avalid-output-names-except-error_2A" data-sym="*VALID-OUTPUT-NAMES-EXCEPT-ERROR*" title="(defconst *valid-output-names-except-error*
          (set-difference-eq *valid-output-names* &#39;(error)))">*valid-output-names-except-error*</a>
  (<a class="sym-link system" href="../../axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> <a class="sym-link system" href="../../axioms.html#def-_2Avalid-output-names_2A" data-sym="*VALID-OUTPUT-NAMES*">*valid-output-names*</a> '(error)))</pre>
  </div>

<div class="form-block macro" id="def-tool1" data-defines="TOOL1" data-references="VALUE,STATE,TOOL1-FN,ER-PROGN,QUASIQUOTE,INHIBIT-OUTPUT,T,QUOTE,PROVE-ASSUMPTIONS,HINTS,&KEY,HYPS,DEFMACRO" data-used-by="TOOL1-FN1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL1">tool1</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-tool1" data-sym="TOOL1" title="(defmacro tool1 (hyps &amp;key hints (prove-assumptions &#39;t) inhibit-output)
  `(er-progn
    (tool1-fn &#39;,hyps state &#39;,hints &#39;,prove-assumptions &#39;,inhibit-output t t)
    (value :invisible)))">tool1</a>
  (hyps &amp;key hints (prove-assumptions '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>) inhibit-output)
  `(<a class="sym-link system" href="../../axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-tool1-fn" data-sym="TOOL1-FN" title="(defun tool1-fn
       (hyps state hints prove-assumptions inhibit-output translate-flg
        print-flg)
  (state-global-let*
   ((ld-skip-proofsp nil)
...">tool1-fn</a> ',HYPS
      state
      ',HINTS
      ',PROVE-ASSUMPTIONS
      ',INHIBIT-OUTPUT
      <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
      <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))</pre>
  </div>

<div class="form-block function" id="def-pop-clauses" data-defines="POP-CLAUSES" data-references="APPEND,REST-CLAUSES,T,MV,LOSE,WIN,QUOTE,EQ,OR,COND,IGNORE,DECLARE,POP-CLAUSE1,NEW-POOL,POP-HISTORY,HINT-SETTINGS,CL-SET,POOL-LST,SIGNAL,MV-LET,POOL,DEFUN" data-used-by="PROVE-LOOP1-CLAUSES" data-part-name="POP-CLAUSES" data-part-args="POOL" data-part-body="APPEND,POP-CLAUSES,REST-CLAUSES,T,MV,LOSE,WIN,QUOTE,EQ,OR,COND,IGNORE,DECLARE,POOL,POP-CLAUSE1,NEW-POOL,POP-HISTORY,HINT-SETTINGS,CL-SET,POOL-LST,SIGNAL,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POP-CLAUSES">pop-clauses</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pop-clauses" data-sym="POP-CLAUSES" title="(defun pop-clauses (pool)
  (mv-let (signal pool-lst cl-set hint-settings pop-history new-pool)
          (pop-clause1 pool nil)
          (declare (ignore pool-lst hint-settings pop-history))
          (cond ((or (eq signal &#39;win) (eq signal &#39;lose)) (mv signal cl-set))
...">pop-clauses</a>
  (pool)
  (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (signal <a class="sym-link system" href="../../history-management.html#def-pool-lst" data-sym="POOL-LST">pool-lst</a> cl-set hint-settings pop-history new-pool)
    (<a class="sym-link system" href="../../prove.html#def-pop-clause1" data-sym="POP-CLAUSE1">pop-clause1</a> pool nil)
    (declare (ignore <a class="sym-link system" href="../../history-management.html#def-pool-lst" data-sym="POOL-LST">pool-lst</a> hint-settings pop-history))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> signal 'win) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> signal 'lose)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> signal cl-set))
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (signal rest-clauses)
          (<a class="sym-link local-def" href="#def-pop-clauses" data-sym="POP-CLAUSES" title="(defun pop-clauses (pool)
  (mv-let (signal pool-lst cl-set hint-settings pop-history new-pool)
          (pop-clause1 pool nil)
          (declare (ignore pool-lst hint-settings pop-history))
          (cond ((or (eq signal &#39;win) (eq signal &#39;lose)) (mv signal cl-set))
...">pop-clauses</a> new-pool)
          (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> signal 'win) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> 'win (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> cl-set rest-clauses)))
            (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> signal nil))))))))</pre>
  </div>

<div class="form-block function" id="def-prove-loop1-clauses" data-defines="PROVE-LOOP1-CLAUSES" data-references="NULL,ASSERT$,ACCUMULATE-TTREE-AND-STEP-LIMIT-INTO-STATE,TTREE,PROCESS-ASSUMPTIONS,NEW-PSPV,PAIRS,LOSE,QUOTE,EQ,PROVE-SPEC-VAR,ACCESS,POP-CLAUSES,NEW-CLAUSES,SIGNAL,MV-LET,T,STEP-LIMIT,MV,COND,IGNORE,DECLARE,INITIAL-STEP-LIMIT,WATERFALL,JPPL-FLG,ERP,SL-LET,STATE,CTX,WRLD,ENS,HINTS,PSPV,CLAUSES,POOL-LST,DEFUN" data-used-by="PROVE-LOOP-CLAUSES" data-part-name="PROVE-LOOP1-CLAUSES" data-part-args="STATE,CTX,WRLD,ENS,HINTS,PSPV,CLAUSES,POOL-LST" data-part-body="NULL,ASSERT$,ACCUMULATE-TTREE-AND-STEP-LIMIT-INTO-STATE,TTREE,PROCESS-ASSUMPTIONS,NEW-PSPV,PAIRS,LOSE,QUOTE,EQ,PROVE-SPEC-VAR,ACCESS,POP-CLAUSES,NEW-CLAUSES,SIGNAL,MV-LET,T,STEP-LIMIT,MV,COND,IGNORE,DECLARE,INITIAL-STEP-LIMIT,CTX,WRLD,ENS,HINTS,CLAUSES,POOL-LST,WATERFALL,STATE,JPPL-FLG,PSPV,ERP,SL-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROVE-LOOP1-CLAUSES">prove-loop1-clauses</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prove-loop1-clauses" data-sym="PROVE-LOOP1-CLAUSES" title="(defun prove-loop1-clauses (pool-lst clauses pspv hints ens wrld ctx state)
  (sl-let (erp pspv jppl-flg state)
          (waterfall 0 pool-lst clauses pspv hints ens wrld ctx state
                     (initial-step-limit wrld state))
          (declare (ignore jppl-flg))
...">prove-loop1-clauses</a>
  (<a class="sym-link system" href="../../history-management.html#def-pool-lst" data-sym="POOL-LST">pool-lst</a> clauses pspv hints ens wrld ctx state)
  (<a class="sym-link system" href="../../rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (erp pspv jppl-flg state)
    (<a class="sym-link system" href="../../prove.html#def-waterfall" data-sym="WATERFALL">waterfall</a> <span class="number">0</span>
      <a class="sym-link system" href="../../history-management.html#def-pool-lst" data-sym="POOL-LST">pool-lst</a>
      clauses
      pspv
      hints
      ens
      wrld
      ctx
      state
      (<a class="sym-link system" href="../../rewrite.html#def-initial-step-limit" data-sym="INITIAL-STEP-LIMIT">initial-step-limit</a> wrld state))
    (declare (ignore jppl-flg))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil nil nil nil state))
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (signal new-clauses)
          (<a class="sym-link local-def" href="#def-pop-clauses" data-sym="POP-CLAUSES" title="(defun pop-clauses (pool)
  (mv-let (signal pool-lst cl-set hint-settings pop-history new-pool)
          (pop-clause1 pool nil)
          (declare (ignore pool-lst hint-settings pop-history))
          (cond ((or (eq signal &#39;win) (eq signal &#39;lose)) (mv signal cl-set))
...">pop-clauses</a> (<a class="sym-link system" href="../../axioms.html#def-access" data-sym="ACCESS">access</a> prove-spec-var pspv <span class="keyword">:pool</span>))
          (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> signal 'lose) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil nil nil nil state))
            (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (pairs new-pspv state)
                (<a class="sym-link system" href="../../prove.html#def-process-assumptions" data-sym="PROCESS-ASSUMPTIONS">process-assumptions</a> <span class="number">0</span> pspv wrld state)
                (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp ttree state)
                  (accumulate-ttree-and-step-limit-into-state (<a class="sym-link system" href="../../axioms.html#def-access" data-sym="ACCESS">access</a> prove-spec-var new-pspv <span class="keyword">:tag-tree</span>)
                    step-limit
                    state)
                  (<a class="sym-link system" href="../../axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> erp)
                    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit nil ttree new-clauses pairs new-pspv state)))))))))))</pre>
  </div>

<div class="form-block function" id="def-prove-loop-clauses" data-defines="PROVE-LOOP-CLAUSES" data-references="T,STEP-LIMIT,MV,COND,PROVE-TIME,PROVE-LOOP1-CLAUSES,NEW-PSPV,PAIRS,NEW-CLAUSES,TTREE,ERP,SL-LET,OTHER-TIME,QUOTE,INCREMENT-TIMER,PPROGN,STATE,CTX,WRLD,ENS,HINTS,PSPV,CLAUSES,DEFUN" data-used-by="PROVE-CLAUSES" data-part-name="PROVE-LOOP-CLAUSES" data-part-args="STATE,CTX,WRLD,ENS,HINTS,PSPV,CLAUSES" data-part-body="T,STEP-LIMIT,MV,COND,PROVE-TIME,CTX,WRLD,ENS,HINTS,PSPV,CLAUSES,PROVE-LOOP1-CLAUSES,NEW-PSPV,PAIRS,NEW-CLAUSES,TTREE,ERP,SL-LET,STATE,OTHER-TIME,QUOTE,INCREMENT-TIMER,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROVE-LOOP-CLAUSES">prove-loop-clauses</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prove-loop-clauses" data-sym="PROVE-LOOP-CLAUSES" title="(defun prove-loop-clauses (clauses pspv hints ens wrld ctx state)
  (pprogn (increment-timer &#39;other-time state)
          (sl-let (erp ttree new-clauses pairs new-pspv state)
                  (prove-loop1-clauses nil clauses pspv hints ens wrld ctx
                   state)
...">prove-loop-clauses</a>
  (clauses pspv hints ens wrld ctx state)
  (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../axioms.html#def-increment-timer" data-sym="INCREMENT-TIMER">increment-timer</a> 'other-time state)
    (<a class="sym-link system" href="../../rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (erp ttree new-clauses pairs new-pspv state)
      (<a class="sym-link local-def" href="#def-prove-loop1-clauses" data-sym="PROVE-LOOP1-CLAUSES" title="(defun prove-loop1-clauses (pool-lst clauses pspv hints ens wrld ctx state)
  (sl-let (erp pspv jppl-flg state)
          (waterfall 0 pool-lst clauses pspv hints ens wrld ctx state
                     (initial-step-limit wrld state))
          (declare (ignore jppl-flg))
...">prove-loop1-clauses</a> nil
        clauses
        pspv
        hints
        ens
        wrld
        ctx
        state)
      (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../axioms.html#def-increment-timer" data-sym="INCREMENT-TIMER">increment-timer</a> 'prove-time state)
        (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit erp nil nil nil nil state))
          (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit nil ttree new-clauses pairs new-pspv state)))))))</pre>
  </div>

<div class="form-block function" id="def-prove-clauses" data-defines="PROVE-CLAUSES" data-references="PROOFS-CO,MAKE-DEFTHM-FORMS-FOR-BYES,CONS,FMS,PROVE,IO?,TAGGED-OBJECTS,BYES,LET,PPROGN,IGNORE,DECLARE,CHK-ASSUMPTION-FREE-TTREE,VAL,MV-LET,T,STEP-LIMIT,MV,COND,PROVE-SPEC-VAR,CHANGE,LIST,PROVE-LOOP-CLAUSES,NEW-PSPV,PAIRS,CLAUSES,TTREE1,ERP,SL-LET,SEMI-INITIALIZE-BRR-WORMHOLE,PROG2$,STATE,CTX,WRLD,ENS,HINTS,PSPV,TERM,DEFUN" data-used-by="TOOL1-FN1" data-part-name="PROVE-CLAUSES" data-part-args="STATE,CTX,WRLD,ENS,HINTS,PSPV,TERM" data-part-body="PROOFS-CO,MAKE-DEFTHM-FORMS-FOR-BYES,CONS,FMS,PROVE,IO?,TAGGED-OBJECTS,BYES,LET,PPROGN,IGNORE,DECLARE,CHK-ASSUMPTION-FREE-TTREE,VAL,MV-LET,T,STEP-LIMIT,MV,COND,CTX,WRLD,ENS,HINTS,PSPV,PROVE-SPEC-VAR,CHANGE,TERM,LIST,PROVE-LOOP-CLAUSES,NEW-PSPV,PAIRS,CLAUSES,TTREE1,ERP,SL-LET,STATE,SEMI-INITIALIZE-BRR-WORMHOLE,PROG2$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROVE-CLAUSES">prove-clauses</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prove-clauses" data-sym="PROVE-CLAUSES" title="(defun prove-clauses (term pspv hints ens wrld ctx state)
  (prog2$ (semi-initialize-brr-wormhole state)
          (sl-let (erp ttree1 clauses pairs new-pspv state)
                  (prove-loop-clauses (list (list term))
                   (change prove-spec-var pspv :user-supplied-term term
...">prove-clauses</a>
  (term pspv hints ens wrld ctx state)
  (<a class="sym-link system" href="../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="../../rewrite.html#def-semi-initialize-brr-wormhole" data-sym="SEMI-INITIALIZE-BRR-WORMHOLE">semi-initialize-brr-wormhole</a> state)
    (<a class="sym-link system" href="../../rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (erp ttree1 clauses pairs new-pspv state)
      (<a class="sym-link local-def" href="#def-prove-loop-clauses" data-sym="PROVE-LOOP-CLAUSES" title="(defun prove-loop-clauses (clauses pspv hints ens wrld ctx state)
  (pprogn (increment-timer &#39;other-time state)
          (sl-let (erp ttree new-clauses pairs new-pspv state)
                  (prove-loop1-clauses nil clauses pspv hints ens wrld ctx
                   state)
...">prove-loop-clauses</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> term))
        (<a class="sym-link system" href="../../basis-a.html#def-change" data-sym="CHANGE">change</a> prove-spec-var
          pspv
          <span class="keyword">:user-supplied-term</span> term
          <span class="keyword">:orig-hints</span> hints)
        hints
        ens
        wrld
        ctx
        state)
      (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil nil nil nil state))
        (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
            (<a class="sym-link system" href="../../prove.html#def-chk-assumption-free-ttree" data-sym="CHK-ASSUMPTION-FREE-TTREE">chk-assumption-free-ttree</a> ttree1 ctx state)
            (declare (ignore val))
            (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil nil nil nil state))
              (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (let ((byes (tagged-objects <span class="keyword">:bye</span> ttree1)))
                    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (byes (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../basis-a.html#def-io_3F" data-sym="IO?">io?</a> <a class="sym-link system" href="../../prove.html#def-prove" data-sym="PROVE">prove</a>
                            nil
                            state
                            (wrld byes)
                            (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"To complete this proof you should try to ~
                                   admit the following ~
                                   event~#0~[~/s~]~|~%~*1~%See the discussion ~
                                   of :by hints in :DOC hints regarding the ~
                                   name~#0~[~/s~] displayed above."</span>
                              (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 byes)
                                (cons #\1
                                  (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <span class="string">""</span>
                                    <span class="string">"~|~     ~y*."</span>
                                    <span class="string">"~|~     ~y*,~|and~|"</span>
                                    <span class="string">"~|~     ~y*,~|~%"</span>
                                    (<a class="sym-link system" href="../../prove.html#def-make-defthm-forms-for-byes" data-sym="MAKE-DEFTHM-FORMS-FOR-BYES">make-defthm-forms-for-byes</a> byes wrld))))
                              (<a class="sym-link system" href="../../basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                              state
                              nil))
                          state))
                      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> state)))
                  (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit
                    erp
                    ttree1
                    clauses
                    pairs
                    (<a class="sym-link system" href="../../basis-a.html#def-change" data-sym="CHANGE">change</a> prove-spec-var new-pspv <span class="keyword">:pool</span> nil)
                    state))))))))))</pre>
  </div>

<div class="form-block function" id="def-chk-for-hidden-expander-function1" data-defines="CHK-FOR-HIDDEN-EXPANDER-FUNCTION1" data-references="HARD,ER,T,&,HIDDEN-EXPANDER-FUNCTION,HIDE,QUOTE,CASE-MATCH,LAST,CAR,TERM,LET,CL,DEFUN" data-used-by="CHK-FOR-HIDDEN-EXPANDER-FUNCTION" data-part-name="CHK-FOR-HIDDEN-EXPANDER-FUNCTION1" data-part-args="CL" data-part-body="CHK-FOR-HIDDEN-EXPANDER-FUNCTION1,HARD,ER,T,&,HIDDEN-EXPANDER-FUNCTION,HIDE,QUOTE,CASE-MATCH,CL,LAST,CAR,TERM,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-FOR-HIDDEN-EXPANDER-FUNCTION1">chk-for-hidden-expander-function1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-for-hidden-expander-function1" data-sym="CHK-FOR-HIDDEN-EXPANDER-FUNCTION1" title="(defun chk-for-hidden-expander-function1 (cl)
  (let ((term (car (last cl))))
    (case-match term ((&#39;hide (&#39;hidden-expander-function &amp;)) term)
                (t
                 (er hard &#39;chk-for-hidden-expander-function1
...">chk-for-hidden-expander-function1</a>
  (cl)
  (let ((term (car (<a class="sym-link system" href="../../axioms.html#def-last" data-sym="LAST">last</a> cl))))
    (<a class="sym-link system" href="../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
      (('<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> ('hidden-expander-function &amp;)) term)
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-chk-for-hidden-expander-function1" data-sym="CHK-FOR-HIDDEN-EXPANDER-FUNCTION1" title="(defun chk-for-hidden-expander-function1 (cl)
  (let ((term (car (last cl))))
    (case-match term ((&#39;hide (&#39;hidden-expander-function &amp;)) term)
                (t
                 (er hard &#39;chk-for-hidden-expander-function1
...">chk-for-hidden-expander-function1</a>
          <span class="string">"Expected clause to end with hidden call of ~
                      HIDDEN-EXPANDER-FUNCTION, but instead clause is ~x0."</span>
          cl)))))</pre>
  </div>

<div class="form-block function" id="def-chk-for-hidden-expander-function" data-defines="CHK-FOR-HIDDEN-EXPANDER-FUNCTION" data-references="CDR,CAR,CHK-FOR-HIDDEN-EXPANDER-FUNCTION1,AND,T,NULL,COND,CLAUSES,DEFUN" data-used-by="TOOL1-FN1" data-part-name="CHK-FOR-HIDDEN-EXPANDER-FUNCTION" data-part-args="CLAUSES" data-part-body="CDR,CHK-FOR-HIDDEN-EXPANDER-FUNCTION,CAR,CHK-FOR-HIDDEN-EXPANDER-FUNCTION1,AND,T,CLAUSES,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-FOR-HIDDEN-EXPANDER-FUNCTION">chk-for-hidden-expander-function</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-for-hidden-expander-function" data-sym="CHK-FOR-HIDDEN-EXPANDER-FUNCTION" title="(defun chk-for-hidden-expander-function (clauses)
  (cond ((null clauses) nil)
        (t
         (and (chk-for-hidden-expander-function1 (car clauses))
              (chk-for-hidden-expander-function (cdr clauses))))))">chk-for-hidden-expander-function</a>
  (clauses)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> clauses) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-chk-for-hidden-expander-function1" data-sym="CHK-FOR-HIDDEN-EXPANDER-FUNCTION1" title="(defun chk-for-hidden-expander-function1 (cl)
  (let ((term (car (last cl))))
    (case-match term ((&#39;hide (&#39;hidden-expander-function &amp;)) term)
                (t
                 (er hard &#39;chk-for-hidden-expander-function1
...">chk-for-hidden-expander-function1</a> (car clauses))
        (<a class="sym-link local-def" href="#def-chk-for-hidden-expander-function" data-sym="CHK-FOR-HIDDEN-EXPANDER-FUNCTION" title="(defun chk-for-hidden-expander-function (clauses)
  (cond ((null clauses) nil)
        (t
         (and (chk-for-hidden-expander-function1 (car clauses))
              (chk-for-hidden-expander-function (cdr clauses))))))">chk-for-hidden-expander-function</a> (cdr clauses))))))</pre>
  </div>

<div class="form-block function" id="def-untranslate-clause-lst" data-defines="UNTRANSLATE-CLAUSE-LST" data-references="CDR,CAR,PRETTYIFY-CLAUSE1,CONS,T,NULL,COND,WRLD,CL-LST,DEFUN" data-used-by="TOOL1-PRINT" data-part-name="UNTRANSLATE-CLAUSE-LST" data-part-args="WRLD,CL-LST" data-part-body="CDR,UNTRANSLATE-CLAUSE-LST,WRLD,CAR,PRETTYIFY-CLAUSE1,CONS,T,CL-LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNTRANSLATE-CLAUSE-LST">untranslate-clause-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-untranslate-clause-lst" data-sym="UNTRANSLATE-CLAUSE-LST" title="(defun untranslate-clause-lst (cl-lst wrld)
  (cond ((null cl-lst) nil)
        (t
         (cons (prettyify-clause1 (car cl-lst) wrld)
               (untranslate-clause-lst (cdr cl-lst) wrld)))))">untranslate-clause-lst</a>
  (cl-lst wrld)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> cl-lst) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons (prettyify-clause1 (car cl-lst) wrld)
        (<a class="sym-link local-def" href="#def-untranslate-clause-lst" data-sym="UNTRANSLATE-CLAUSE-LST" title="(defun untranslate-clause-lst (cl-lst wrld)
  (cond ((null cl-lst) nil)
        (t
         (cons (prettyify-clause1 (car cl-lst) wrld)
               (untranslate-clause-lst (cdr cl-lst) wrld)))))">untranslate-clause-lst</a> (cdr cl-lst) wrld)))))</pre>
  </div>

<div class="form-block function" id="def-tool1-print" data-defines="TOOL1-PRINT" data-references="T,*STANDARD-CO*,W,UNTRANSLATE-CLAUSE-LST,CONS,LIST,FMS,COND,STATE,CLAUSES,RUNES,PRINT-FLG,DEFUN" data-used-by="TOOL1-FN1" data-part-name="TOOL1-PRINT" data-part-args="STATE,CLAUSES,RUNES,PRINT-FLG" data-part-body="T,*STANDARD-CO*,STATE,W,CLAUSES,UNTRANSLATE-CLAUSE-LST,RUNES,CONS,LIST,FMS,PRINT-FLG,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL1-PRINT">tool1-print</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool1-print" data-sym="TOOL1-PRINT" title="(defun tool1-print (print-flg runes clauses state)
  (cond
   (print-flg
    (fms &quot;~%***OUTPUT OF TOOL1***~%~%Tag tree:~%  ~x0~%~%List of simplified ~
          hypotheses:~%  ~x1~|~%&quot;
...">tool1-print</a>
  (print-flg runes clauses state)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (print-flg (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~%***OUTPUT OF TOOL1***~%~%Tag tree:~%  ~x0~%~%List of simplified ~
          hypotheses:~%  ~x1~|~%"</span>
        (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 runes)
          (cons #\1 (<a class="sym-link local-def" href="#def-untranslate-clause-lst" data-sym="UNTRANSLATE-CLAUSE-LST" title="(defun untranslate-clause-lst (cl-lst wrld)
  (cond ((null cl-lst) nil)
        (t
         (cons (prettyify-clause1 (car cl-lst) wrld)
               (untranslate-clause-lst (cdr cl-lst) wrld)))))">untranslate-clause-lst</a> clauses (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))))
        <a class="sym-link system" href="../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
        state
        nil))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> state)))</pre>
  </div>

<div class="form-block function" id="def-hide-special-hyps" data-defines="HIDE-SPECIAL-HYPS" data-references="CDR,&,CONS,SYNP,Y1,HIDE,LIST,VARIABLEP,IF,X1,Y,X,EQUAL,QUOTE,CASE-MATCH,NEW-HYP,CAR,HYP,LET,T,NULL,COND,LST,DEFUN" data-used-by="TOOL1-FN1" data-part-name="HIDE-SPECIAL-HYPS" data-part-args="LST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HIDE-SPECIAL-HYPS">hide-special-hyps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hide-special-hyps" data-sym="HIDE-SPECIAL-HYPS" title="(defun hide-special-hyps (lst)
  &quot;We do this stuff so that equalities and SYNP hyps won&#39;t be thrown out.
   Perhaps what we really need is a hyp simplifier with less aggressive
   heuristics.&quot;
  (cond ((null lst) nil)
...">hide-special-hyps</a>
  (lst)
  <span class="string">"We do this stuff so that equalities and SYNP hyps won&#39;t be thrown out.
   Perhaps what we really need is a hyp simplifier with less aggressive
   heuristics."</span>
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> lst) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((hyp (car lst)))
        (let ((new-hyp (<a class="sym-link system" href="../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> hyp
               (('equal x y) (let ((x1 (if (<a class="sym-link system" href="../../axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> x)
                        (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> x)
                        x)) (y1 (if (<a class="sym-link system" href="../../axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> y)
                         (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> y)
                         y)))
                   (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'equal x1 y1)))
               (('<a class="sym-link system" href="../../axioms.html#def-synp" data-sym="SYNP">synp</a> . x) (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> (cons '<a class="sym-link system" href="../../axioms.html#def-synp" data-sym="SYNP">synp</a> x)))
               (&amp; hyp))))
          (cons new-hyp (<a class="sym-link local-def" href="#def-hide-special-hyps" data-sym="HIDE-SPECIAL-HYPS" title="(defun hide-special-hyps (lst)
  &quot;We do this stuff so that equalities and SYNP hyps won&#39;t be thrown out.
   Perhaps what we really need is a hyp simplifier with less aggressive
   heuristics.&quot;
  (cond ((null lst) nil)
...">hide-special-hyps</a> (cdr lst))))))))</pre>
  </div>

<div class="form-block function" id="def-fix-special-hyps" data-defines="FIX-SPECIAL-HYPS" data-references="CDR,&,CONS,SYNP,LIST,Y,X,HIDE,EQUAL,NOT,QUOTE,CASE-MATCH,NEW-HYP,CAR,HYP,LET,T,NULL,COND,LST,DEFUN" data-used-by="REMOVE-HIDDEN-TERMS" data-part-name="FIX-SPECIAL-HYPS" data-part-args="LST" data-part-body="CDR,FIX-SPECIAL-HYPS,&,CONS,SYNP,LIST,Y,X,HIDE,EQUAL,NOT,QUOTE,CASE-MATCH,NEW-HYP,CAR,HYP,LET,T,LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-SPECIAL-HYPS">fix-special-hyps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-special-hyps" data-sym="FIX-SPECIAL-HYPS" title="(defun fix-special-hyps (lst)
  (cond ((null lst) nil)
        (t
         (let ((hyp (car lst)))
           (let ((new-hyp
...">fix-special-hyps</a>
  (lst)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> lst) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((hyp (car lst)))
        (let ((new-hyp (<a class="sym-link system" href="../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> hyp
               (('<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> ('equal ('<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> x) ('<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> y))) (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'equal x y)))
               (('<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> ('equal ('<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> x) y)) (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'equal x y)))
               (('<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> ('equal y ('<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> x))) (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'equal y x)))
               (('<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> ('<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> ('<a class="sym-link system" href="../../axioms.html#def-synp" data-sym="SYNP">synp</a> . x))) (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (cons '<a class="sym-link system" href="../../axioms.html#def-synp" data-sym="SYNP">synp</a> x)))
               (&amp; hyp))))
          (cons new-hyp (<a class="sym-link local-def" href="#def-fix-special-hyps" data-sym="FIX-SPECIAL-HYPS" title="(defun fix-special-hyps (lst)
  (cond ((null lst) nil)
        (t
         (let ((hyp (car lst)))
           (let ((new-hyp
...">fix-special-hyps</a> (cdr lst))))))))</pre>
  </div>

<div class="form-block function" id="def-remove-hidden-terms" data-defines="REMOVE-HIDDEN-TERMS" data-references="CDR,CAR,BUTLAST,FIX-SPECIAL-HYPS,CONS,T,NULL,COND,CL-SET,DEFUN" data-used-by="TOOL1-FN1" data-part-name="REMOVE-HIDDEN-TERMS" data-part-args="CL-SET" data-part-body="CDR,REMOVE-HIDDEN-TERMS,CAR,BUTLAST,FIX-SPECIAL-HYPS,CONS,T,CL-SET,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-HIDDEN-TERMS">remove-hidden-terms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-hidden-terms" data-sym="REMOVE-HIDDEN-TERMS" title="(defun remove-hidden-terms (cl-set)
  (cond ((null cl-set) nil)
        (t
         (cons (fix-special-hyps (butlast (car cl-set) 1))
               (remove-hidden-terms (cdr cl-set))))))">remove-hidden-terms</a>
  (cl-set)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> cl-set) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-fix-special-hyps" data-sym="FIX-SPECIAL-HYPS" title="(defun fix-special-hyps (lst)
  (cond ((null lst) nil)
        (t
         (let ((hyp (car lst)))
           (let ((new-hyp
...">fix-special-hyps</a> (<a class="sym-link system" href="../../axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> (car cl-set) <span class="number">1</span>))
        (<a class="sym-link local-def" href="#def-remove-hidden-terms" data-sym="REMOVE-HIDDEN-TERMS" title="(defun remove-hidden-terms (cl-set)
  (cond ((null cl-set) nil)
        (t
         (cons (fix-special-hyps (butlast (car cl-set) 1))
               (remove-hidden-terms (cdr cl-set))))))">remove-hidden-terms</a> (cdr cl-set))))))</pre>
  </div>

<div class="form-block function" id="def-add-key-val-pair-to-key-val-alist" data-defines="ADD-KEY-VAL-PAIR-TO-KEY-VAL-ALIST" data-references="CAR,T,CDR,CDAR,LIST*,CONS,CAAR,EQUAL,LIST,NULL,COND,ALIST,VAL,KEY1,KEY,DEFUN" data-used-by="TOOL1-FN1" data-part-name="ADD-KEY-VAL-PAIR-TO-KEY-VAL-ALIST" data-part-args="ALIST,VAL,KEY1,KEY" data-part-body="ADD-KEY-VAL-PAIR-TO-KEY-VAL-ALIST,CAR,T,CDR,CDAR,LIST*,CONS,CAAR,EQUAL,VAL,KEY1,KEY,LIST,ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADD-KEY-VAL-PAIR-TO-KEY-VAL-ALIST">add-key-val-pair-to-key-val-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-add-key-val-pair-to-key-val-alist" data-sym="ADD-KEY-VAL-PAIR-TO-KEY-VAL-ALIST" title="(defun add-key-val-pair-to-key-val-alist (key key1 val alist)
  (cond ((null alist) (list (list key key1 val)))
        ((equal key (caar alist))
         (cons (list* key key1 val (cdar alist)) (cdr alist)))
        (t
...">add-key-val-pair-to-key-val-alist</a>
  (key key1 val alist)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> alist) (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> key key1 val)))
    ((equal key (<a class="sym-link system" href="../../axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (cons (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> key key1 val (<a class="sym-link system" href="../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)) (cdr alist)))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons (car alist)
        (<a class="sym-link local-def" href="#def-add-key-val-pair-to-key-val-alist" data-sym="ADD-KEY-VAL-PAIR-TO-KEY-VAL-ALIST" title="(defun add-key-val-pair-to-key-val-alist (key key1 val alist)
  (cond ((null alist) (list (list key key1 val)))
        ((equal key (caar alist))
         (cons (list* key key1 val (cdar alist)) (cdr alist)))
        (t
...">add-key-val-pair-to-key-val-alist</a> key key1 val (cdr alist))))))</pre>
  </div>

<div class="form-block function" id="def-remove-hidden-expander-term-from-cl" data-defines="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL" data-references="CONS,CDR,&,HIDDEN-EXPANDER-FUNCTION,HIDE,QUOTE,CASE-MATCH,CAR,TERM,LET,T,ENDP,COND,CL,DEFUN" data-used-by="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST" data-part-name="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL" data-part-args="CL" data-part-body="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL,CONS,CDR,&,HIDDEN-EXPANDER-FUNCTION,HIDE,QUOTE,CASE-MATCH,CAR,TERM,LET,T,CL,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL">remove-hidden-expander-term-from-cl</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-hidden-expander-term-from-cl" data-sym="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL" title="(defun remove-hidden-expander-term-from-cl (cl)
  (cond ((endp cl) nil)
        (t
         (let ((term (car cl)))
           (case-match term ((&#39;hide (&#39;hidden-expander-function &amp;)) (cdr cl))
...">remove-hidden-expander-term-from-cl</a>
  (cl)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> cl) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((term (car cl)))
        (<a class="sym-link system" href="../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
          (('<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> ('hidden-expander-function &amp;)) (cdr cl))
          (&amp; (cons (car cl)
              (<a class="sym-link local-def" href="#def-remove-hidden-expander-term-from-cl" data-sym="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL" title="(defun remove-hidden-expander-term-from-cl (cl)
  (cond ((endp cl) nil)
        (t
         (let ((term (car cl)))
           (case-match term ((&#39;hide (&#39;hidden-expander-function &amp;)) (cdr cl))
...">remove-hidden-expander-term-from-cl</a> (cdr cl)))))))))</pre>
  </div>

<div class="form-block function" id="def-remove-hidden-expander-term-from-cl-list" data-defines="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST" data-references="CDR,CAR,REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL,CONS,T,ENDP,COND,CL-LIST,DEFUN" data-used-by="GET-ASSNS" data-part-name="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST" data-part-args="CL-LIST" data-part-body="CDR,REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST,CAR,REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL,CONS,T,CL-LIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST">remove-hidden-expander-term-from-cl-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-hidden-expander-term-from-cl-list" data-sym="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST" title="(defun remove-hidden-expander-term-from-cl-list (cl-list)
  (cond ((endp cl-list) nil)
        (t
         (cons (remove-hidden-expander-term-from-cl (car cl-list))
               (remove-hidden-expander-term-from-cl-list (cdr cl-list))))))">remove-hidden-expander-term-from-cl-list</a>
  (cl-list)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> cl-list) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-remove-hidden-expander-term-from-cl" data-sym="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL" title="(defun remove-hidden-expander-term-from-cl (cl)
  (cond ((endp cl) nil)
        (t
         (let ((term (car cl)))
           (case-match term ((&#39;hide (&#39;hidden-expander-function &amp;)) (cdr cl))
...">remove-hidden-expander-term-from-cl</a> (car cl-list))
        (<a class="sym-link local-def" href="#def-remove-hidden-expander-term-from-cl-list" data-sym="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST" title="(defun remove-hidden-expander-term-from-cl-list (cl-list)
  (cond ((endp cl-list) nil)
        (t
         (cons (remove-hidden-expander-term-from-cl (car cl-list))
               (remove-hidden-expander-term-from-cl-list (cdr cl-list))))))">remove-hidden-expander-term-from-cl-list</a> (cdr cl-list))))))</pre>
  </div>

<div class="form-block function" id="def-get-assns" data-defines="GET-ASSNS" data-references="T,TAGGED-OBJECTS,STRIP-CDRS,REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST,COND,REMOVE-HIDDEN,TTREE,DEFUN" data-used-by="TOOL2-FN1,TOOL1-FN1" data-part-name="GET-ASSNS" data-part-args="REMOVE-HIDDEN,TTREE" data-part-body="T,TTREE,TAGGED-OBJECTS,STRIP-CDRS,REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST,REMOVE-HIDDEN,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-ASSNS">get-assns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-assns" data-sym="GET-ASSNS" title="(defun get-assns (ttree remove-hidden)
  (cond
   (remove-hidden
    (remove-hidden-expander-term-from-cl-list
     (strip-cdrs (tagged-objects :bye ttree))))">get-assns</a>
  (ttree remove-hidden)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (remove-hidden (<a class="sym-link local-def" href="#def-remove-hidden-expander-term-from-cl-list" data-sym="REMOVE-HIDDEN-EXPANDER-TERM-FROM-CL-LIST" title="(defun remove-hidden-expander-term-from-cl-list (cl-list)
  (cond ((endp cl-list) nil)
        (t
         (cons (remove-hidden-expander-term-from-cl (car cl-list))
               (remove-hidden-expander-term-from-cl-list (cdr cl-list))))))">remove-hidden-expander-term-from-cl-list</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (tagged-objects <span class="keyword">:bye</span> ttree))))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (tagged-objects <span class="keyword">:bye</span> ttree)))))</pre>
  </div>

<div class="form-block function" id="def-tool1-fn1" data-defines="TOOL1-FN1" data-references="REMOVE-HIDDEN-TERMS,DUMB-NEGATE-LIT-LST-LST,LIST*,TOOL1-PRINT,PPROGN,GET-ASSNS,ASSUMPTIONS,ALL-RUNES-IN-TTREE,RUNES,LET,PROVE-LOOP1,NEW-TTREE,PROVE,REMOVE1-EQ,@,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,*BASH-SKIP-FORCING-ROUND-HINTS*,EQ,MV,COND,CHK-FOR-HIDDEN-EXPANDER-FUNCTION,PROG2$,UNTRANSLATE,MAKE-PSPV,PROVE-CLAUSES,NEW-PSPV,PAIRS,CLAUSES,TTREE,ERP,SL-LET,CONJOIN,IMPLICATE,TTERM,CONS,HIDDEN-EXPANDER-FUNCTION,HIDE,TRANSLATE,TCONC,ALL-VARS1-LST,VARS,HIDE-SPECIAL-HYPS,THYPS,T,TRANSLATE-TERM-LST,THYPS0,TOOL1,TRANSLATE-HINTS,THINTS,SOFT,ER,ELIMINATE-IRRELEVANCE,FERTILIZE,ELIMINATE-DESTRUCTORS,GENERALIZE,QUOTE,LIST,ADD-KEY-VAL-PAIR-TO-KEY-VAL-ALIST,VALUE,ALISTP,IF,ER-LET*,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,WRLD,ENS,CTX,HYPS,DEFUN" data-used-by="TOOL1-FN0,TOOL1-FN" data-part-name="TOOL1-FN1" data-part-args="PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,WRLD,ENS,CTX,HYPS" data-part-body="REMOVE-HIDDEN-TERMS,DUMB-NEGATE-LIT-LST-LST,LIST*,PRINT-FLG,TOOL1-PRINT,PPROGN,GET-ASSNS,ASSUMPTIONS,ALL-RUNES-IN-TTREE,RUNES,LET,PROVE-LOOP1,NEW-TTREE,PROVE,REMOVE1-EQ,INHIBIT-OUTPUT,@,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,*BASH-SKIP-FORCING-ROUND-HINTS*,EQ,PROVE-ASSUMPTIONS,MV,COND,CHK-FOR-HIDDEN-EXPANDER-FUNCTION,PROG2$,UNTRANSLATE,ENS,MAKE-PSPV,PROVE-CLAUSES,NEW-PSPV,PAIRS,CLAUSES,TTREE,ERP,SL-LET,CONJOIN,IMPLICATE,TTERM,CONS,HIDDEN-EXPANDER-FUNCTION,HIDE,TRANSLATE,TCONC,ALL-VARS1-LST,VARS,HIDE-SPECIAL-HYPS,THYPS,T,HYPS,TRANSLATE-TERM-LST,TRANSLATE-FLG,THYPS0,STATE,WRLD,TOOL1,TRANSLATE-HINTS,THINTS,CTX,SOFT,ER,ELIMINATE-IRRELEVANCE,FERTILIZE,ELIMINATE-DESTRUCTORS,GENERALIZE,QUOTE,LIST,ADD-KEY-VAL-PAIR-TO-KEY-VAL-ALIST,VALUE,ALISTP,IF,HINTS,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL1-FN1">tool1-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool1-fn1" data-sym="TOOL1-FN1" title="(defun tool1-fn1
       (hyps ctx ens wrld state hints prove-assumptions inhibit-output
        translate-flg print-flg)
  (er-let*
   ((hints
...">tool1-fn1</a>
  (hyps ctx
    ens
    wrld
    state
    hints
    prove-assumptions
    inhibit-output
    translate-flg
    print-flg)
  (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((hints (if (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> hints)
         (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-add-key-val-pair-to-key-val-alist" data-sym="ADD-KEY-VAL-PAIR-TO-KEY-VAL-ALIST" title="(defun add-key-val-pair-to-key-val-alist (key key1 val alist)
  (cond ((null alist) (list (list key key1 val)))
        ((equal key (caar alist))
         (cons (list* key key1 val (cdar alist)) (cdr alist)))
        (t
...">add-key-val-pair-to-key-val-alist</a> <span class="string">"Goal"</span>
             <span class="keyword">:do-not</span> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'quote
               '(generalize eliminate-destructors
                 fertilize
                 eliminate-irrelevance))
             hints))
         (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
           ctx
           <span class="string">"The hints must be an alist, but ~x0 is not."</span>
           hints))) (thints (translate-hints '<a class="sym-link local-def" href="#def-tool1" data-sym="TOOL1" title="(defmacro tool1 (hyps &amp;key hints (prove-assumptions &#39;t) inhibit-output)
  `(er-progn
    (tool1-fn &#39;,hyps state &#39;,hints &#39;,prove-assumptions &#39;,inhibit-output t t)
    (value :invisible)))">tool1</a> hints ctx wrld state))
      (thyps0 (if translate-flg
          (translate-term-lst hyps <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> ctx wrld state)
          (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> hyps)))
      (thyps (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-hide-special-hyps" data-sym="HIDE-SPECIAL-HYPS" title="(defun hide-special-hyps (lst)
  &quot;We do this stuff so that equalities and SYNP hyps won&#39;t be thrown out.
   Perhaps what we really need is a hyp simplifier with less aggressive
   heuristics.&quot;
  (cond ((null lst) nil)
...">hide-special-hyps</a> thyps0)))
      (vars (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (all-vars1-lst thyps nil)))
      (tconc (translate (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a>
            (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'hidden-expander-function (cons '<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> vars)))
          <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
          <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
          <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
          ctx
          wrld
          state))
      (tterm (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (implicate (<a class="sym-link system" href="../../axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> thyps) tconc))))
    (<a class="sym-link system" href="../../rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (erp ttree clauses pairs new-pspv state)
      (<a class="sym-link local-def" href="#def-prove-clauses" data-sym="PROVE-CLAUSES" title="(defun prove-clauses (term pspv hints ens wrld ctx state)
  (prog2$ (semi-initialize-brr-wormhole state)
          (sl-let (erp ttree1 clauses pairs new-pspv state)
                  (prove-loop-clauses (list (list term))
                   (change prove-spec-var pspv :user-supplied-term term
...">prove-clauses</a> tterm
        (<a class="sym-link system" href="../../prove.html#def-make-pspv" data-sym="MAKE-PSPV">make-pspv</a> ens
          wrld
          state
          <span class="keyword">:displayed-goal</span> (untranslate tterm <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> wrld)
          <span class="keyword">:otf-flg</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
        thints
        ens
        wrld
        ctx
        state)
      (<a class="sym-link system" href="../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link local-def" href="#def-chk-for-hidden-expander-function" data-sym="CHK-FOR-HIDDEN-EXPANDER-FUNCTION" title="(defun chk-for-hidden-expander-function (clauses)
  (cond ((null clauses) nil)
        (t
         (and (chk-for-hidden-expander-function1 (car clauses))
              (chk-for-hidden-expander-function (cdr clauses))))))">chk-for-hidden-expander-function</a> clauses)
        (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> erp nil state))
          (prove-assumptions (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((thints (if (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> prove-assumptions <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
                   (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> thints)
                   (translate-hints '<a class="sym-link local-def" href="#def-tool1" data-sym="TOOL1" title="(defmacro tool1 (hyps &amp;key hints (prove-assumptions &#39;t) inhibit-output)
  `(er-progn
    (tool1-fn &#39;,hyps state &#39;,hints &#39;,prove-assumptions &#39;,inhibit-output t t)
    (value :invisible)))">tool1</a>
                     *bash-skip-forcing-round-hints*
                     ctx
                     wrld
                     state))))
              (<a class="sym-link system" href="../../axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (if (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> prove-assumptions <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
                     (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst)
                     (if (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> inhibit-output <span class="keyword">:prove</span>)
                       (<a class="sym-link system" href="../../axioms.html#def-remove1-eq" data-sym="REMOVE1-EQ">remove1-eq</a> '<a class="sym-link system" href="../../prove.html#def-prove" data-sym="PROVE">prove</a> (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))
                       (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst)))))
                (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((new-ttree (<a class="sym-link system" href="../../prove.html#def-prove-loop1" data-sym="PROVE-LOOP1">prove-loop1</a> <span class="number">1</span> nil pairs new-pspv thints ens wrld ctx state)))
                  (let ((runes (all-runes-in-ttree new-ttree
                         (all-runes-in-ttree ttree nil))) (assumptions (<a class="sym-link local-def" href="#def-get-assns" data-sym="GET-ASSNS" title="(defun get-assns (ttree remove-hidden)
  (cond
   (remove-hidden
    (remove-hidden-expander-term-from-cl-list
     (strip-cdrs (tagged-objects :bye ttree))))">get-assns</a> new-ttree <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)))
                    (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-tool1-print" data-sym="TOOL1-PRINT" title="(defun tool1-print (print-flg runes clauses state)
  (cond
   (print-flg
    (fms &quot;~%***OUTPUT OF TOOL1***~%~%Tag tree:~%  ~x0~%~%List of simplified ~
          hypotheses:~%  ~x1~|~%&quot;
...">tool1-print</a> print-flg runes clauses state)
                      (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> runes
                          (dumb-negate-lit-lst-lst (<a class="sym-link local-def" href="#def-remove-hidden-terms" data-sym="REMOVE-HIDDEN-TERMS" title="(defun remove-hidden-terms (cl-set)
  (cond ((null cl-set) nil)
        (t
         (cons (fix-special-hyps (butlast (car cl-set) 1))
               (remove-hidden-terms (cdr cl-set))))))">remove-hidden-terms</a> clauses))
                          assumptions))))))))
          (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((runes (all-runes-in-ttree ttree nil)))
              (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-tool1-print" data-sym="TOOL1-PRINT" title="(defun tool1-print (print-flg runes clauses state)
  (cond
   (print-flg
    (fms &quot;~%***OUTPUT OF TOOL1***~%~%Tag tree:~%  ~x0~%~%List of simplified ~
          hypotheses:~%  ~x1~|~%&quot;
...">tool1-print</a> print-flg runes clauses state)
                (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> runes
                    (dumb-negate-lit-lst-lst (<a class="sym-link local-def" href="#def-remove-hidden-terms" data-sym="REMOVE-HIDDEN-TERMS" title="(defun remove-hidden-terms (cl-set)
  (cond ((null cl-set) nil)
        (t
         (cons (fix-special-hyps (butlast (car cl-set) 1))
               (remove-hidden-terms (cdr cl-set))))))">remove-hidden-terms</a> clauses))
                    nil))))))))))</pre>
  </div>

<div class="form-block function" id="def-maybe-inhibit-output-lst" data-defines="MAYBE-INHIBIT-OUTPUT-LST" data-references="T,*VALID-OUTPUT-NAMES-EXCEPT-ERROR*,*VALID-OUTPUT-NAMES*,INHIBIT-OUTPUT-LST,@,PROVE,PROOF-TREE,QUOTE,UNION-EQ,EQ,COND,STATE,INHIBIT-OUTPUT,DEFUN" data-used-by="TOOL2-FN0,TOOL1-FN0,TOOL1-FN" data-part-name="MAYBE-INHIBIT-OUTPUT-LST" data-part-args="STATE,INHIBIT-OUTPUT" data-part-body="T,*VALID-OUTPUT-NAMES-EXCEPT-ERROR*,*VALID-OUTPUT-NAMES*,INHIBIT-OUTPUT-LST,@,PROVE,PROOF-TREE,QUOTE,UNION-EQ,INHIBIT-OUTPUT,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-INHIBIT-OUTPUT-LST">maybe-inhibit-output-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-inhibit-output-lst" data-sym="MAYBE-INHIBIT-OUTPUT-LST" title="(defun maybe-inhibit-output-lst (inhibit-output state)
  (cond
   ((eq inhibit-output :prove)
    (union-eq &#39;(proof-tree prove) (@ inhibit-output-lst)))
   ((eq inhibit-output :all) *valid-output-names*)
...">maybe-inhibit-output-lst</a>
  (inhibit-output state)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> inhibit-output <span class="keyword">:prove</span>) (<a class="sym-link system" href="../../axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> '(proof-tree <a class="sym-link system" href="../../prove.html#def-prove" data-sym="PROVE">prove</a>) (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst)))
    ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> inhibit-output <span class="keyword">:all</span>) <a class="sym-link system" href="../../axioms.html#def-_2Avalid-output-names_2A" data-sym="*VALID-OUTPUT-NAMES*">*valid-output-names*</a>)
    (inhibit-output <a class="sym-link local-def" href="#def-_2Avalid-output-names-except-error_2A" data-sym="*VALID-OUTPUT-NAMES-EXCEPT-ERROR*" title="(defconst *valid-output-names-except-error*
          (set-difference-eq *valid-output-names* &#39;(error)))">*valid-output-names-except-error*</a>)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))))</pre>
  </div>

<div class="form-block function" id="def-tool1-fn" data-defines="TOOL1-FN" data-references="CTX,TOOL1-FN1,ENS,W,WRLD,LET,WITH-CTX-SUMMARIZED,MAYBE-INHIBIT-OUTPUT-LST,INHIBIT-OUTPUT-LST,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,HYPS,DEFUN" data-used-by="TOOL-FN,TOOL1" data-part-name="TOOL1-FN" data-part-args="PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,HYPS" data-part-body="PRINT-FLG,TRANSLATE-FLG,PROVE-ASSUMPTIONS,HINTS,CTX,HYPS,TOOL1-FN1,ENS,W,WRLD,LET,WITH-CTX-SUMMARIZED,STATE,INHIBIT-OUTPUT,MAYBE-INHIBIT-OUTPUT-LST,INHIBIT-OUTPUT-LST,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL1-FN">tool1-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool1-fn" data-sym="TOOL1-FN" title="(defun tool1-fn
       (hyps state hints prove-assumptions inhibit-output translate-flg
        print-flg)
  (state-global-let*
   ((ld-skip-proofsp nil)
...">tool1-fn</a>
  (hyps state
    hints
    prove-assumptions
    inhibit-output
    translate-flg
    print-flg)
  (<a class="sym-link system" href="../../axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="../../axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> nil) (inhibit-output-lst (<a class="sym-link local-def" href="#def-maybe-inhibit-output-lst" data-sym="MAYBE-INHIBIT-OUTPUT-LST" title="(defun maybe-inhibit-output-lst (inhibit-output state)
  (cond
   ((eq inhibit-output :prove)
    (union-eq &#39;(proof-tree prove) (@ inhibit-output-lst)))
   ((eq inhibit-output :all) *valid-output-names*)
...">maybe-inhibit-output-lst</a> inhibit-output state)))
    (<a class="sym-link system" href="../../history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> <span class="string">"( TOOL1 ...)"</span>
      (let ((wrld (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)) (ens (ens state)))
        (<a class="sym-link local-def" href="#def-tool1-fn1" data-sym="TOOL1-FN1" title="(defun tool1-fn1
       (hyps ctx ens wrld state hints prove-assumptions inhibit-output
        translate-flg print-flg)
  (er-let*
   ((hints
...">tool1-fn1</a> hyps
          ctx
          ens
          wrld
          state
          hints
          prove-assumptions
          inhibit-output
          translate-flg
          print-flg)))))</pre>
  </div>

<div class="form-block function" id="def-tool1-fn0" data-defines="TOOL1-FN0" data-references="TOOL1-FN1,MAYBE-INHIBIT-OUTPUT-LST,INHIBIT-OUTPUT-LST,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,WRLD,ENS,CTX,HYPS,DEFUN" data-part-name="TOOL1-FN0" data-part-args="PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,WRLD,ENS,CTX,HYPS" data-part-body="PRINT-FLG,TRANSLATE-FLG,PROVE-ASSUMPTIONS,HINTS,WRLD,ENS,CTX,HYPS,TOOL1-FN1,STATE,INHIBIT-OUTPUT,MAYBE-INHIBIT-OUTPUT-LST,INHIBIT-OUTPUT-LST,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL1-FN0">tool1-fn0</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool1-fn0" data-sym="TOOL1-FN0" title="(defun tool1-fn0
       (hyps ctx ens wrld state hints prove-assumptions inhibit-output
        translate-flg print-flg)
  (state-global-let*
   ((ld-skip-proofsp nil)
...">tool1-fn0</a>
  (hyps ctx
    ens
    wrld
    state
    hints
    prove-assumptions
    inhibit-output
    translate-flg
    print-flg)
  (<a class="sym-link system" href="../../axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="../../axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> nil) (inhibit-output-lst (<a class="sym-link local-def" href="#def-maybe-inhibit-output-lst" data-sym="MAYBE-INHIBIT-OUTPUT-LST" title="(defun maybe-inhibit-output-lst (inhibit-output state)
  (cond
   ((eq inhibit-output :prove)
    (union-eq &#39;(proof-tree prove) (@ inhibit-output-lst)))
   ((eq inhibit-output :all) *valid-output-names*)
...">maybe-inhibit-output-lst</a> inhibit-output state)))
    (<a class="sym-link local-def" href="#def-tool1-fn1" data-sym="TOOL1-FN1" title="(defun tool1-fn1
       (hyps ctx ens wrld state hints prove-assumptions inhibit-output
        translate-flg print-flg)
  (er-let*
   ((hints
...">tool1-fn1</a> hyps
      ctx
      ens
      wrld
      state
      hints
      prove-assumptions
      inhibit-output
      translate-flg
      print-flg)))</pre>
  </div>

<div class="form-block function" id="def-geneqv-from-g_3Fequiv" data-defines="GENEQV-FROM-G?EQUIV" data-references="CURRENT-ACL2-WORLD,CONGRUENCES,QUOTE,GETPROP,LAST,CAR,CADR,SYMBOLP,IF,WRLD,G?EQUIV,DEFUN" data-used-by="TOOL2-FN1" data-part-name="GENEQV-FROM-G?EQUIV" data-part-args="WRLD,G?EQUIV" data-part-body="WRLD,CURRENT-ACL2-WORLD,CONGRUENCES,QUOTE,GETPROP,LAST,CAR,CADR,G?EQUIV,SYMBOLP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GENEQV-FROM-G?EQUIV">geneqv-from-g?equiv</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-geneqv-from-g_3Fequiv" data-sym="GENEQV-FROM-G?EQUIV" title="(defun geneqv-from-g?equiv (g?equiv wrld)
  (if (symbolp g?equiv)
      (cadr
       (car
        (last (getprop g?equiv &#39;congruences nil &#39;current-acl2-world wrld))))">geneqv-from-g?equiv</a>
  (g?equiv wrld)
  (if (symbolp g?equiv)
    (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (car (<a class="sym-link system" href="../../axioms.html#def-last" data-sym="LAST">last</a> (<a class="sym-link system" href="../../axioms.html#def-getprop" data-sym="GETPROP">getprop</a> g?equiv 'congruences nil 'current-acl2-world wrld))))
    g?equiv))</pre>
  </div>

<div class="form-block macro" id="def-tool2" data-defines="TOOL2" data-references="STATE,TOOL2-FN,QUASIQUOTE,CTX,MUST-REWRITE-FLG,INHIBIT-OUTPUT,T,QUOTE,PROVE-ASSUMPTIONS,G?EQUIV,HINTS,&KEY,HYPS,TERM,DEFMACRO" data-used-by="TOOL2-FN0,TOOL2-FN1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL2">tool2</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-tool2" data-sym="TOOL2" title="(defmacro tool2
          (term hyps
           &amp;key hints g?equiv (prove-assumptions &#39;t) inhibit-output
           (must-rewrite-flg &#39;t) (ctx &#39;tool2))
  `(tool2-fn &#39;,term &#39;,hyps &#39;,g?equiv state &#39;,hints &#39;,prove-assumptions">tool2</a>
  (term hyps
    &amp;key
    hints
    g?equiv
    (prove-assumptions '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    inhibit-output
    (must-rewrite-flg '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (ctx '<a class="sym-link local-def" href="#def-tool2" data-sym="TOOL2" title="(defmacro tool2
          (term hyps
           &amp;key hints g?equiv (prove-assumptions &#39;t) inhibit-output
           (must-rewrite-flg &#39;t) (ctx &#39;tool2))
  `(tool2-fn &#39;,term &#39;,hyps &#39;,g?equiv state &#39;,hints &#39;,prove-assumptions">tool2</a>))
  `(<a class="sym-link local-def" href="#def-tool2-fn" data-sym="TOOL2-FN" title="(defun tool2-fn
       (term hyps g?equiv state hints prove-assumptions inhibit-output
        translate-flg print-flg must-rewrite-flg ctx)
  (let ((wrld (w state)) (ens (ens state)))
    (tool2-fn0 term hyps g?equiv ctx ens wrld state hints prove-assumptions">tool2-fn</a> ',TERM
    ',HYPS
    ',G?EQUIV
    state
    ',HINTS
    ',PROVE-ASSUMPTIONS
    ',INHIBIT-OUTPUT
    <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
    <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
    ,MUST-REWRITE-FLG
    ,CTX))</pre>
  </div>

<div class="form-block function" id="def-tool2-print" data-defines="TOOL2-PRINT" data-references="T,*STANDARD-CO*,W,UNTRANSLATE,CONS,LIST,FMS,COND,STATE,REWRITTEN-TERM,RUNES,PRINT-FLG,DEFUN" data-used-by="TOOL2-FN1" data-part-name="TOOL2-PRINT" data-part-args="STATE,REWRITTEN-TERM,RUNES,PRINT-FLG" data-part-body="T,*STANDARD-CO*,STATE,W,REWRITTEN-TERM,UNTRANSLATE,RUNES,CONS,LIST,FMS,PRINT-FLG,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL2-PRINT">tool2-print</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool2-print" data-sym="TOOL2-PRINT" title="(defun tool2-print (print-flg runes rewritten-term state)
  (cond
   (print-flg
    (fms &quot;~%***OUTPUT OF TOOL2***~%~%Tag tree:~%  ~x0~%~%Rewritten term:~% ~
          ~x1~|~%&quot;
...">tool2-print</a>
  (print-flg runes rewritten-term state)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (print-flg (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~%***OUTPUT OF TOOL2***~%~%Tag tree:~%  ~x0~%~%Rewritten term:~% ~
          ~x1~|~%"</span>
        (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 runes)
          (cons #\1 (untranslate rewritten-term nil (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))))
        <a class="sym-link system" href="../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
        state
        nil))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> state)))</pre>
  </div>

<div class="form-block function" id="def-expander-repeat-limit" data-defines="EXPANDER-REPEAT-LIMIT" data-references="F-GET-GLOBAL,QUOTE,F-BOUNDP-GLOBAL,IF,STATE,DEFUN" data-used-by="TOOL2-FN1" data-part-name="EXPANDER-REPEAT-LIMIT" data-part-args="STATE" data-part-body="F-GET-GLOBAL,STATE,EXPANDER-REPEAT-LIMIT,QUOTE,F-BOUNDP-GLOBAL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPANDER-REPEAT-LIMIT">expander-repeat-limit</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-expander-repeat-limit" data-sym="EXPANDER-REPEAT-LIMIT" title="(defun expander-repeat-limit (state)
  (if (f-boundp-global &#39;expander-repeat-limit state)
      (f-get-global &#39;expander-repeat-limit state)
      3))">expander-repeat-limit</a>
  (state)
  (if (<a class="sym-link system" href="../../axioms.html#def-f-boundp-global" data-sym="F-BOUNDP-GLOBAL">f-boundp-global</a> '<a class="sym-link local-def" href="#def-expander-repeat-limit" data-sym="EXPANDER-REPEAT-LIMIT" title="(defun expander-repeat-limit (state)
  (if (f-boundp-global &#39;expander-repeat-limit state)
      (f-get-global &#39;expander-repeat-limit state)
      3))">expander-repeat-limit</a> state)
    (<a class="sym-link system" href="../../axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link local-def" href="#def-expander-repeat-limit" data-sym="EXPANDER-REPEAT-LIMIT" title="(defun expander-repeat-limit (state)
  (if (f-boundp-global &#39;expander-repeat-limit state)
      (f-get-global &#39;expander-repeat-limit state)
      3))">expander-repeat-limit</a> state)
    <span class="number">3</span>))</pre>
  </div>

<div class="form-block function" id="def-rewrite_2A" data-defines="REWRITE*" data-references="1+,EQL,IF,*STANDARD-CO*,CONS,LIST,FMS,PROVE,IO?,PPROGN,=,UNTRANSLATE-LST,UNTRANSLATE,SOFT,ER,ERP,PREPEND-STEP-LIMIT,MV,T,EQ,NOT,OR,EQUAL,COND,REWRITE-STACK-LIMIT,SILLY-REC-FN-FOR-REWRITE*,?,QUOTE,REWRITE,REWRITE-ENTRY,NEW-TTREE,VAL,SL-LET,MUST-REWRITE-FLG,TTREE,GSTACK,RCNST,SIMPLIFY-CLAUSE-POT-LST,STEP-LIMIT,STATE,WRLD,GENEQV,TYPE-ALIST,COMPLETED-ITERATIONS,REPEAT-LIMIT,CTX,HYPS,TERM,DEFUN" data-used-by="TOOL2-FN1" data-part-name="REWRITE*" data-part-args="MUST-REWRITE-FLG,TTREE,GSTACK,RCNST,SIMPLIFY-CLAUSE-POT-LST,STEP-LIMIT,STATE,WRLD,GENEQV,TYPE-ALIST,COMPLETED-ITERATIONS,REPEAT-LIMIT,CTX,HYPS,TERM" data-part-body="GSTACK,RCNST,SIMPLIFY-CLAUSE-POT-LST,GENEQV,TYPE-ALIST,REWRITE*,1+,EQL,IF,*STANDARD-CO*,CONS,LIST,FMS,PROVE,IO?,PPROGN,COMPLETED-ITERATIONS,REPEAT-LIMIT,=,UNTRANSLATE-LST,UNTRANSLATE,CTX,SOFT,ER,ERP,PREPEND-STEP-LIMIT,STATE,TTREE,MV,T,HYPS,EQ,MUST-REWRITE-FLG,NOT,OR,EQUAL,COND,WRLD,REWRITE-STACK-LIMIT,STEP-LIMIT,SILLY-REC-FN-FOR-REWRITE*,?,QUOTE,TERM,REWRITE,REWRITE-ENTRY,NEW-TTREE,VAL,SL-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REWRITE*">rewrite*</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-rewrite_2A" data-sym="REWRITE*" title="(defun rewrite*
       (term hyps ctx repeat-limit completed-iterations type-alist geneqv wrld
        state step-limit simplify-clause-pot-lst rcnst gstack ttree
        must-rewrite-flg)
  (sl-let (val new-ttree)
...">rewrite*</a>
  (term hyps
    ctx
    repeat-limit
    completed-iterations
    type-alist
    geneqv
    wrld
    state
    step-limit
    simplify-clause-pot-lst
    rcnst
    gstack
    ttree
    must-rewrite-flg)
  (<a class="sym-link system" href="../../rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (val new-ttree)
    (<a class="sym-link system" href="../../rewrite.html#def-rewrite-entry" data-sym="REWRITE-ENTRY">rewrite-entry</a> (<a class="sym-link system" href="../../rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> term nil <span class="number">1</span>)
      <span class="keyword">:obj</span> '?
      <span class="keyword">:fnstack</span> '(<a class="sym-link local-def" href="#def-silly-rec-fn-for-rewrite_2A" data-sym="SILLY-REC-FN-FOR-REWRITE*" title="(defun silly-rec-fn-for-rewrite* (x)
  (declare (xargs :verify-guards t))
  (if (consp x)
      (silly-rec-fn-for-rewrite* (cdr x))
      x))">silly-rec-fn-for-rewrite*</a>)
      <span class="keyword">:pre-dwp</span> nil
      <span class="keyword">:ancestors</span> nil
      <span class="keyword">:backchain-limit</span> <span class="number">500</span>
      <span class="keyword">:step-limit</span> step-limit
      <span class="keyword">:rdepth</span> (<a class="sym-link system" href="../../axioms.html#def-rewrite-stack-limit" data-sym="REWRITE-STACK-LIMIT">rewrite-stack-limit</a> wrld)
      <span class="keyword">:pequiv-info</span> nil)
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((equal val term) (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> must-rewrite-flg) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> hyps <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit term ttree state))
          (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../rewrite.html#def-prepend-step-limit" data-sym="PREPEND-STEP-LIMIT">prepend-step-limit</a> (erp val state)
              (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The term~%  ~x0~%failed to rewrite to a new term under ~
                      hypotheses~%  ~x1."</span>
                (untranslate val nil wrld)
                (untranslate-lst hyps <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> wrld))))))
      ((<a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a> repeat-limit completed-iterations) (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../basis-a.html#def-io_3F" data-sym="IO?">io?</a> <a class="sym-link system" href="../../prove.html#def-prove" data-sym="PROVE">prove</a>
            nil
            state
            (completed-iterations)
            (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"OUT OF PATIENCE!  Completed ~n0 iterations."</span>
              (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> completed-iterations)))
              <a class="sym-link system" href="../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
              state
              nil))
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> step-limit val new-ttree state)))
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> completed-iterations <span class="number">0</span>)
            state
            (<a class="sym-link system" href="../../basis-a.html#def-io_3F" data-sym="IO?">io?</a> <a class="sym-link system" href="../../prove.html#def-prove" data-sym="PROVE">prove</a>
              nil
              state
              (completed-iterations)
              (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"NOTE:  Starting ~n0 repetition of rewrite.~%"</span>
                (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> completed-iterations))))
                <a class="sym-link system" href="../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
                state
                nil)))
          (<a class="sym-link local-def" href="#def-rewrite_2A" data-sym="REWRITE*" title="(defun rewrite*
       (term hyps ctx repeat-limit completed-iterations type-alist geneqv wrld
        state step-limit simplify-clause-pot-lst rcnst gstack ttree
        must-rewrite-flg)
  (sl-let (val new-ttree)
...">rewrite*</a> val
            <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
            ctx
            repeat-limit
            (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> completed-iterations)
            type-alist
            geneqv
            wrld
            state
            step-limit
            simplify-clause-pot-lst
            rcnst
            gstack
            new-ttree
            must-rewrite-flg))))))</pre>
  </div>

<div class="form-block function" id="def-tool2-fn1" data-defines="TOOL2-FN1" data-references="TOOL2-PRINT,LIST*,GET-ASSNS,BYES,ALL-RUNES-IN-TTREE,RUNES,PROVE-LOOP1,NEW-TTREE,PROVE,REMOVE1-EQ,@,OR,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,*BASH-SKIP-FORCING-ROUND-HINTS*,TOOL2,TRANSLATE-HINTS,EQ,ACCUMULATE-TTREE-AND-STEP-LIMIT-INTO-STATE,SET-CL-IDS-OF-ASSUMPTIONS,PROCESS-ASSUMPTIONS,PAIRS,REWRITTEN-TERM,RESUME-SUSPENDED-ASSUMPTION-REWRITING,BAD-ASS,EQUAL,STEP-LIMIT,GENEQV-FROM-G?EQUIV,EXPANDER-REPEAT-LIMIT,REWRITE*,TTREE,VAL,SIMPLIFY-CLAUSE,INITIAL-GSTACK,GSTACK,CURRENT-LITERAL,MAKE,LOCAL-RCNST,INITIAL-STEP-LIMIT,PTS-TO-TTREE-LST,SETUP-SIMPLIFY-CLAUSE-POT-LST,SIMPLIFY-CLAUSE-POT-LST,SL-LET,IGNORE,DECLARE,FORWARD-CHAIN,FC-PAIR-LST,TYPE-ALIST,CONTRADICTIONP,PTS,PROVE-SPEC-VAR,ACCESS,REWRITE-CONSTANT,CHANGE,RCNST,CURRENT-CLAUSE,CONJOIN,IMPLICATE,LIST,INITIALIZE-PROOF-TREE,PPROGN,SOFT,ER,STRIP-CARS,INTERSECTP-EQ,QUOTE,BAD-HINTS,LOAD-HINT-SETTINGS-INTO-PSPV,PSPV,THANKS-FOR-THE-HINT,MV,NULL,CDR,CAR,HINT-SETTINGS,LET,SILENT-ERROR,COND,DUMB-NEGATE-LIT-LST,ADD-LITERAL,*INITIAL-CLAUSE-ID*,FIND-APPLICABLE-HINT-SETTINGS,PAIR,ERP,MV-LET,TRANSLATE,TTERM,VALUE,T,TRANSLATE-TERM-LST,IF,THYPS,ER-LET*,MAKE-PSPV,SAVED-PSPV,LET*,MUST-REWRITE-FLG,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,THINTS,STATE,WRLD,ENS,CTX,G?EQUIV,HYPS,TERM,DEFUN" data-used-by="TOOL2-FN0" data-part-name="TOOL2-FN1" data-part-args="MUST-REWRITE-FLG,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,THINTS,STATE,WRLD,ENS,CTX,G?EQUIV,HYPS,TERM" data-part-body="PRINT-FLG,TOOL2-PRINT,LIST*,GET-ASSNS,BYES,ALL-RUNES-IN-TTREE,RUNES,PROVE-LOOP1,NEW-TTREE,PROVE,REMOVE1-EQ,@,INHIBIT-OUTPUT,OR,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,*BASH-SKIP-FORCING-ROUND-HINTS*,TOOL2,TRANSLATE-HINTS,EQ,ACCUMULATE-TTREE-AND-STEP-LIMIT-INTO-STATE,SET-CL-IDS-OF-ASSUMPTIONS,PROCESS-ASSUMPTIONS,PAIRS,PROVE-ASSUMPTIONS,REWRITTEN-TERM,RESUME-SUSPENDED-ASSUMPTION-REWRITING,BAD-ASS,EQUAL,MUST-REWRITE-FLG,STEP-LIMIT,G?EQUIV,GENEQV-FROM-G?EQUIV,EXPANDER-REPEAT-LIMIT,REWRITE*,TTREE,VAL,SIMPLIFY-CLAUSE,INITIAL-GSTACK,GSTACK,CURRENT-LITERAL,MAKE,LOCAL-RCNST,INITIAL-STEP-LIMIT,PTS-TO-TTREE-LST,SETUP-SIMPLIFY-CLAUSE-POT-LST,SIMPLIFY-CLAUSE-POT-LST,SL-LET,IGNORE,DECLARE,FORWARD-CHAIN,FC-PAIR-LST,TYPE-ALIST,CONTRADICTIONP,PTS,PROVE-SPEC-VAR,ACCESS,REWRITE-CONSTANT,CHANGE,RCNST,CURRENT-CLAUSE,CONJOIN,IMPLICATE,LIST,INITIALIZE-PROOF-TREE,PPROGN,SOFT,ER,STRIP-CARS,INTERSECTP-EQ,QUOTE,BAD-HINTS,LOAD-HINT-SETTINGS-INTO-PSPV,PSPV,THANKS-FOR-THE-HINT,MV,NULL,CDR,CAR,HINT-SETTINGS,LET,SILENT-ERROR,COND,DUMB-NEGATE-LIT-LST,ADD-LITERAL,*INITIAL-CLAUSE-ID*,FIND-APPLICABLE-HINT-SETTINGS,PAIR,ERP,MV-LET,TRANSLATE,TTERM,VALUE,CTX,T,HYPS,TRANSLATE-TERM-LST,TRANSLATE-FLG,IF,THYPS,ER-LET*,THINTS,TERM,STATE,WRLD,ENS,MAKE-PSPV,SAVED-PSPV,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL2-FN1">tool2-fn1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool2-fn1" data-sym="TOOL2-FN1" title="(defun tool2-fn1
       (term hyps g?equiv ctx ens wrld state thints prove-assumptions
        inhibit-output translate-flg print-flg must-rewrite-flg)
  (let* ((saved-pspv
          (make-pspv ens wrld state :displayed-goal term :user-supplied-term
...">tool2-fn1</a>
  (term hyps
    g?equiv
    ctx
    ens
    wrld
    state
    thints
    prove-assumptions
    inhibit-output
    translate-flg
    print-flg
    must-rewrite-flg)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((saved-pspv (<a class="sym-link system" href="../../prove.html#def-make-pspv" data-sym="MAKE-PSPV">make-pspv</a> ens
         wrld
         state
         <span class="keyword">:displayed-goal</span> term
         <span class="keyword">:user-supplied-term</span> term
         <span class="keyword">:orig-hints</span> thints)))
    (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((thyps (if translate-flg
           (translate-term-lst hyps <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> ctx wrld state)
           (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> hyps))) (tterm (if translate-flg
            (translate term <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> ctx wrld state)
            (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> term))))
      (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp pair state)
        (find-applicable-hint-settings *initial-clause-id*
          (add-literal tterm (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit-lst" data-sym="DUMB-NEGATE-LIT-LST">dumb-negate-lit-lst</a> thyps) <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
          nil
          saved-pspv
          ctx
          thints
          wrld
          nil
          state)
        (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (erp (silent-error state))
          (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((hint-settings (car pair)) (thints (if pair
                    (cdr pair)
                    thints)))
              (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (hint-settings state)
                (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> hint-settings) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil state))
                  (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (thanks-for-the-hint nil hint-settings nil state)))
                (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((pspv (load-hint-settings-into-pspv <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
                       hint-settings
                       saved-pspv
                       nil
                       wrld
                       ctx
                       state)))
                  (let ((bad-hints '(<span class="keyword">:do-not-induct</span> <span class="keyword">:do-not</span> <span class="keyword">:induct</span> <span class="keyword">:use</span> <span class="keyword">:cases</span> <span class="keyword">:by</span>)))
                    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-intersectp-eq" data-sym="INTERSECTP-EQ">intersectp-eq</a> bad-hints (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> hint-settings)) (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                          ctx
                          <span class="string">"It makes no sense in this context for hints at ~
                         &quot;Goal&quot; to include any of ~v0.  Such hints, whether ~
                         explicit or from default hints, are therefore ~
                         illegal."</span>
                          bad-hints))
                      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../history-management.html#def-initialize-proof-tree" data-sym="INITIALIZE-PROOF-TREE">initialize-proof-tree</a> *initial-clause-id*
                            (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (implicate (<a class="sym-link system" href="../../axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> thyps) tterm)))
                            ctx
                            state)
                          (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((current-clause (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit-lst" data-sym="DUMB-NEGATE-LIT-LST">dumb-negate-lit-lst</a> thyps)) (rcnst (<a class="sym-link system" href="../../basis-a.html#def-change" data-sym="CHANGE">change</a> rewrite-constant
                                  (<a class="sym-link system" href="../../axioms.html#def-access" data-sym="ACCESS">access</a> prove-spec-var pspv <span class="keyword">:rewrite-constant</span>)
                                  <span class="keyword">:current-clause</span> current-clause
                                  <span class="keyword">:force-info</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
                              (pts nil))
                            (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (contradictionp type-alist fc-pair-lst)
                              (forward-chain current-clause
                                pts
                                (<a class="sym-link system" href="../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-constant rcnst <span class="keyword">:force-info</span>)
                                nil
                                wrld
                                (<a class="sym-link system" href="../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-constant rcnst <span class="keyword">:current-enabled-structure</span>)
                                (<a class="sym-link system" href="../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-constant rcnst <span class="keyword">:oncep-override</span>)
                                state)
                              (declare (ignore fc-pair-lst))
                              (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (contradictionp (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                                    ctx
                                    <span class="string">"An attempt has been made to simplify the ~
                                following list of terms, perhaps to be used ~
                                as hypotheses for ~
                                simplification:~|~%~x0~|~%However, that list ~
                                is contradictory!  (Technical note: the ~
                                contradiction was found using type-set ~
                                reasoning.)"</span>
                                    hyps))
                                (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (contradictionp simplify-clause-pot-lst)
                                    (setup-simplify-clause-pot-lst current-clause
                                      (pts-to-ttree-lst pts)
                                      nil
                                      type-alist
                                      rcnst
                                      wrld
                                      state
                                      (<a class="sym-link system" href="../../rewrite.html#def-initial-step-limit" data-sym="INITIAL-STEP-LIMIT">initial-step-limit</a> wrld state))
                                    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (contradictionp (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                                          ctx
                                          <span class="string">"An attempt has been made to simplify the ~
                                   following list of terms, perhaps to be ~
                                   used as hypotheses for ~
                                   simplification:~|~%~x0~|~%However, that ~
                                   list is contradictory!  (Technical note: ~
                                   the contradiction was found using linear ~
                                   arithmetic reasoning.)"</span>
                                          hyps))
                                      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((local-rcnst (<a class="sym-link system" href="../../basis-a.html#def-change" data-sym="CHANGE">change</a> rewrite-constant
                                               rcnst
                                               <span class="keyword">:current-literal</span> (<a class="sym-link system" href="../../basis-a.html#def-make" data-sym="MAKE">make</a> current-literal <span class="keyword">:not-flg</span> nil <span class="keyword">:atm</span> tterm))) (gstack (<a class="sym-link system" href="../../rewrite.html#def-initial-gstack" data-sym="INITIAL-GSTACK">initial-gstack</a> 'simplify-clause nil current-clause)))
                                          (<a class="sym-link system" href="../../rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (val ttree state)
                                            (<a class="sym-link local-def" href="#def-rewrite_2A" data-sym="REWRITE*" title="(defun rewrite*
       (term hyps ctx repeat-limit completed-iterations type-alist geneqv wrld
        state step-limit simplify-clause-pot-lst rcnst gstack ttree
        must-rewrite-flg)
  (sl-let (val new-ttree)
...">rewrite*</a> tterm
                                              hyps
                                              ctx
                                              (<a class="sym-link local-def" href="#def-expander-repeat-limit" data-sym="EXPANDER-REPEAT-LIMIT" title="(defun expander-repeat-limit (state)
  (if (f-boundp-global &#39;expander-repeat-limit state)
      (f-get-global &#39;expander-repeat-limit state)
      3))">expander-repeat-limit</a> state)
                                              <span class="number">0</span>
                                              type-alist
                                              (<a class="sym-link local-def" href="#def-geneqv-from-g_3Fequiv" data-sym="GENEQV-FROM-G?EQUIV" title="(defun geneqv-from-g?equiv (g?equiv wrld)
  (if (symbolp g?equiv)
      (cadr
       (car
        (last (getprop g?equiv &#39;congruences nil &#39;current-acl2-world wrld))))">geneqv-from-g?equiv</a> g?equiv wrld)
                                              wrld
                                              state
                                              step-limit
                                              simplify-clause-pot-lst
                                              rcnst
                                              gstack
                                              nil
                                              must-rewrite-flg)
                                            (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((equal val <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil state))
                                              (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (bad-ass ttree)
                                                  (resume-suspended-assumption-rewriting ttree
                                                    nil
                                                    gstack
                                                    simplify-clause-pot-lst
                                                    local-rcnst
                                                    wrld
                                                    state
                                                    step-limit)
                                                  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (bad-ass (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                                                        ctx
                                                        <span class="string">"Generated false assumption, ~x0! ~ ~
                                           So, rewriting is aborted, just as ~
                                           it would be in the course of a ~
                                           regular Acl2 proof."</span>
                                                        bad-ass))
                                                    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((rewritten-term val))
                                                        (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (prove-assumptions (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (pairs pspv state)
                                                              (<a class="sym-link system" href="../../prove.html#def-process-assumptions" data-sym="PROCESS-ASSUMPTIONS">process-assumptions</a> <span class="number">0</span>
                                                                (<a class="sym-link system" href="../../basis-a.html#def-change" data-sym="CHANGE">change</a> prove-spec-var
                                                                  saved-pspv
                                                                  <span class="keyword">:tag-tree</span> (<a class="sym-link system" href="../../prove.html#def-set-cl-ids-of-assumptions" data-sym="SET-CL-IDS-OF-ASSUMPTIONS">set-cl-ids-of-assumptions</a> ttree *initial-clause-id*))
                                                                wrld
                                                                state)
                                                              (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ttree (accumulate-ttree-and-step-limit-into-state (<a class="sym-link system" href="../../axioms.html#def-access" data-sym="ACCESS">access</a> prove-spec-var pspv <span class="keyword">:tag-tree</span>)
                                                                     step-limit
                                                                     state)) (thints (if (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> prove-assumptions <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
                                                                      (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> thints)
                                                                      (translate-hints '<a class="sym-link local-def" href="#def-tool2" data-sym="TOOL2" title="(defmacro tool2
          (term hyps
           &amp;key hints g?equiv (prove-assumptions &#39;t) inhibit-output
           (must-rewrite-flg &#39;t) (ctx &#39;tool2))
  `(tool2-fn &#39;,term &#39;,hyps &#39;,g?equiv state &#39;,hints &#39;,prove-assumptions">tool2</a>
                                                                        *bash-skip-forcing-round-hints*
                                                                        ctx
                                                                        wrld
                                                                        state))))
                                                                (<a class="sym-link system" href="../../axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (if (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> prove-assumptions <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> inhibit-output <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
                                                                       (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst)
                                                                       (if (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> inhibit-output <span class="keyword">:prove</span>)
                                                                         (<a class="sym-link system" href="../../axioms.html#def-remove1-eq" data-sym="REMOVE1-EQ">remove1-eq</a> '<a class="sym-link system" href="../../prove.html#def-prove" data-sym="PROVE">prove</a> (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))
                                                                         (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst)))))
                                                                  (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((new-ttree (<a class="sym-link system" href="../../prove.html#def-prove-loop1" data-sym="PROVE-LOOP1">prove-loop1</a> <span class="number">1</span> nil pairs pspv thints ens wrld ctx state)))
                                                                    (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((runes (all-runes-in-ttree new-ttree
                                                                           (all-runes-in-ttree ttree nil))) (byes (<a class="sym-link local-def" href="#def-get-assns" data-sym="GET-ASSNS" title="(defun get-assns (ttree remove-hidden)
  (cond
   (remove-hidden
    (remove-hidden-expander-term-from-cl-list
     (strip-cdrs (tagged-objects :bye ttree))))">get-assns</a> new-ttree nil))
                                                                        (val (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> runes rewritten-term byes)))
                                                                      (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-tool2-print" data-sym="TOOL2-PRINT" title="(defun tool2-print (print-flg runes rewritten-term state)
  (cond
   (print-flg
    (fms &quot;~%***OUTPUT OF TOOL2***~%~%Tag tree:~%  ~x0~%~%Rewritten term:~% ~
          ~x1~|~%&quot;
...">tool2-print</a> print-flg runes rewritten-term state)
                                                                        (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> val))))))))
                                                          (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((runes (all-runes-in-ttree ttree nil)) (val (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> runes rewritten-term nil)))
                                                              (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-tool2-print" data-sym="TOOL2-PRINT" title="(defun tool2-print (print-flg runes rewritten-term state)
  (cond
   (print-flg
    (fms &quot;~%***OUTPUT OF TOOL2***~%~%Tag tree:~%  ~x0~%~%Rewritten term:~% ~
          ~x1~|~%&quot;
...">tool2-print</a> print-flg runes rewritten-term state)
                                                                (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> val)))))))))))))))))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-tool2-fn0" data-defines="TOOL2-FN0" data-references="TOOL2-FN1,TOOL2,QUOTE,TRANSLATE-HINTS,THINTS,ER-LET*,SEMI-INITIALIZE-BRR-WORMHOLE,PROG2$,MAYBE-INHIBIT-OUTPUT-LST,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,MUST-REWRITE-FLG,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,WRLD,ENS,CTX,G?EQUIV,HYPS,TERM,DEFUN" data-used-by="DEFSIMP-FN,SIMP-HYPS-AUX,TOOL2-FN" data-part-name="TOOL2-FN0" data-part-args="MUST-REWRITE-FLG,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,WRLD,ENS,CTX,G?EQUIV,HYPS,TERM" data-part-body="MUST-REWRITE-FLG,PRINT-FLG,TRANSLATE-FLG,PROVE-ASSUMPTIONS,ENS,G?EQUIV,HYPS,TERM,TOOL2-FN1,WRLD,CTX,HINTS,TOOL2,QUOTE,TRANSLATE-HINTS,THINTS,ER-LET*,SEMI-INITIALIZE-BRR-WORMHOLE,PROG2$,STATE,INHIBIT-OUTPUT,MAYBE-INHIBIT-OUTPUT-LST,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL2-FN0">tool2-fn0</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool2-fn0" data-sym="TOOL2-FN0" title="(defun tool2-fn0
       (term hyps g?equiv ctx ens wrld state hints prove-assumptions
        inhibit-output translate-flg print-flg must-rewrite-flg)
  (state-global-let*
   ((inhibit-output-lst (maybe-inhibit-output-lst inhibit-output state)))
...">tool2-fn0</a>
  (term hyps
    g?equiv
    ctx
    ens
    wrld
    state
    hints
    prove-assumptions
    inhibit-output
    translate-flg
    print-flg
    must-rewrite-flg)
  (<a class="sym-link system" href="../../axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (<a class="sym-link local-def" href="#def-maybe-inhibit-output-lst" data-sym="MAYBE-INHIBIT-OUTPUT-LST" title="(defun maybe-inhibit-output-lst (inhibit-output state)
  (cond
   ((eq inhibit-output :prove)
    (union-eq &#39;(proof-tree prove) (@ inhibit-output-lst)))
   ((eq inhibit-output :all) *valid-output-names*)
...">maybe-inhibit-output-lst</a> inhibit-output state)))
    (<a class="sym-link system" href="../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="../../rewrite.html#def-semi-initialize-brr-wormhole" data-sym="SEMI-INITIALIZE-BRR-WORMHOLE">semi-initialize-brr-wormhole</a> state)
      (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((thints (translate-hints '<a class="sym-link local-def" href="#def-tool2" data-sym="TOOL2" title="(defmacro tool2
          (term hyps
           &amp;key hints g?equiv (prove-assumptions &#39;t) inhibit-output
           (must-rewrite-flg &#39;t) (ctx &#39;tool2))
  `(tool2-fn &#39;,term &#39;,hyps &#39;,g?equiv state &#39;,hints &#39;,prove-assumptions">tool2</a> hints ctx wrld state)))
        (<a class="sym-link local-def" href="#def-tool2-fn1" data-sym="TOOL2-FN1" title="(defun tool2-fn1
       (term hyps g?equiv ctx ens wrld state thints prove-assumptions
        inhibit-output translate-flg print-flg must-rewrite-flg)
  (let* ((saved-pspv
          (make-pspv ens wrld state :displayed-goal term :user-supplied-term
...">tool2-fn1</a> term
          hyps
          g?equiv
          ctx
          ens
          wrld
          state
          thints
          prove-assumptions
          inhibit-output
          translate-flg
          print-flg
          must-rewrite-flg)))))</pre>
  </div>

<div class="form-block function" id="def-tool2-fn" data-defines="TOOL2-FN" data-references="TOOL2-FN0,ENS,W,WRLD,LET,CTX,MUST-REWRITE-FLG,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,HYPS,TERM,DEFUN" data-used-by="SIMPLIFY-HYPS,TOOL2-FN-LST,TOOL2" data-part-name="TOOL2-FN" data-part-args="CTX,MUST-REWRITE-FLG,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,HYPS,TERM" data-part-body="MUST-REWRITE-FLG,PRINT-FLG,TRANSLATE-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,CTX,G?EQUIV,HYPS,TERM,TOOL2-FN0,ENS,STATE,W,WRLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL2-FN">tool2-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool2-fn" data-sym="TOOL2-FN" title="(defun tool2-fn
       (term hyps g?equiv state hints prove-assumptions inhibit-output
        translate-flg print-flg must-rewrite-flg ctx)
  (let ((wrld (w state)) (ens (ens state)))
    (tool2-fn0 term hyps g?equiv ctx ens wrld state hints prove-assumptions">tool2-fn</a>
  (term hyps
    g?equiv
    state
    hints
    prove-assumptions
    inhibit-output
    translate-flg
    print-flg
    must-rewrite-flg
    ctx)
  (let ((wrld (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)) (ens (ens state)))
    (<a class="sym-link local-def" href="#def-tool2-fn0" data-sym="TOOL2-FN0" title="(defun tool2-fn0
       (term hyps g?equiv ctx ens wrld state hints prove-assumptions
        inhibit-output translate-flg print-flg must-rewrite-flg)
  (state-global-let*
   ((inhibit-output-lst (maybe-inhibit-output-lst inhibit-output state)))
...">tool2-fn0</a> term
      hyps
      g?equiv
      ctx
      ens
      wrld
      state
      hints
      prove-assumptions
      inhibit-output
      translate-flg
      print-flg
      must-rewrite-flg)))</pre>
  </div>

<div class="form-block function" id="def-tool2-fn-lst" data-defines="TOOL2-FN-LST" data-references="CDDR,CADR,UNION-EQUAL,LIST*,CONS,RST,ER-LET*,CDR,CAR,TOOL2-FN,X,ERP,MV-LET,T,VALUE,NULL,COND,CTX,MUST-REWRITE-FLG,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,ASSNS,HYPS-LST,RUNES,TERM,DEFUN" data-used-by="TOOL-FN" data-part-name="TOOL2-FN-LST" data-part-args="CTX,MUST-REWRITE-FLG,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,ASSNS,HYPS-LST,RUNES,TERM" data-part-body="CDDR,CADR,UNION-EQUAL,LIST*,CONS,RST,ER-LET*,ASSNS,CDR,RUNES,TOOL2-FN-LST,CTX,MUST-REWRITE-FLG,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,G?EQUIV,CAR,TERM,TOOL2-FN,STATE,X,ERP,MV-LET,T,VALUE,HYPS-LST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL2-FN-LST">tool2-fn-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool2-fn-lst" data-sym="TOOL2-FN-LST" title="(defun tool2-fn-lst
       (term runes hyps-lst assns g?equiv state hints prove-assumptions
        inhibit-output print-flg must-rewrite-flg ctx)
  (cond ((null hyps-lst) (value nil))
        (t
...">tool2-fn-lst</a>
  (term runes
    hyps-lst
    assns
    g?equiv
    state
    hints
    prove-assumptions
    inhibit-output
    print-flg
    must-rewrite-flg
    ctx)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> hyps-lst) (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp x state)
        (<a class="sym-link local-def" href="#def-tool2-fn" data-sym="TOOL2-FN" title="(defun tool2-fn
       (term hyps g?equiv state hints prove-assumptions inhibit-output
        translate-flg print-flg must-rewrite-flg ctx)
  (let ((wrld (w state)) (ens (ens state)))
    (tool2-fn0 term hyps g?equiv ctx ens wrld state hints prove-assumptions">tool2-fn</a> term
          (car hyps-lst)
          g?equiv
          state
          hints
          prove-assumptions
          inhibit-output
          nil
          print-flg
          must-rewrite-flg
          ctx)
        (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link local-def" href="#def-tool2-fn-lst" data-sym="TOOL2-FN-LST" title="(defun tool2-fn-lst
       (term runes hyps-lst assns g?equiv state hints prove-assumptions
        inhibit-output print-flg must-rewrite-flg ctx)
  (cond ((null hyps-lst) (value nil))
        (t
...">tool2-fn-lst</a> term
              runes
              (cdr hyps-lst)
              assns
              g?equiv
              state
              hints
              prove-assumptions
              inhibit-output
              print-flg
              must-rewrite-flg
              ctx))
          (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((rst (<a class="sym-link local-def" href="#def-tool2-fn-lst" data-sym="TOOL2-FN-LST" title="(defun tool2-fn-lst
       (term runes hyps-lst assns g?equiv state hints prove-assumptions
        inhibit-output print-flg must-rewrite-flg ctx)
  (cond ((null hyps-lst) (value nil))
        (t
...">tool2-fn-lst</a> term
                   runes
                   (cdr hyps-lst)
                   assns
                   g?equiv
                   state
                   hints
                   prove-assumptions
                   inhibit-output
                   print-flg
                   must-rewrite-flg
                   ctx)))
              (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (cons (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="../../axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> runes (car x))
                    (car hyps-lst)
                    (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x)
                    (<a class="sym-link system" href="../../axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> assns (<a class="sym-link system" href="../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> x)))
                  rst)))))))))</pre>
  </div>

<div class="form-block function" id="def-simplify-hyps" data-defines="SIMPLIFY-HYPS" data-references="CDDR,UNION-EQUAL,CADR,CONS,CDR,REVAPPEND,CAR,TOOL2-FN,X,ER-LET*,T,REVERSE,LIST,LIST*,VALUE,NULL,COND,CTX,MUST-REWRITE-FLG,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,ASSNS,RUNES,REWRITTEN-PREVIOUS-HYPS-REV,REMAINING-HYPS,DEFUN" data-used-by="TOOL-FN" data-part-name="SIMPLIFY-HYPS" data-part-args="CTX,MUST-REWRITE-FLG,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,ASSNS,RUNES,REWRITTEN-PREVIOUS-HYPS-REV,REMAINING-HYPS" data-part-body="CDDR,UNION-EQUAL,CADR,CONS,SIMPLIFY-HYPS,CTX,MUST-REWRITE-FLG,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,CDR,REVAPPEND,CAR,TOOL2-FN,X,ER-LET*,T,ASSNS,REWRITTEN-PREVIOUS-HYPS-REV,REVERSE,LIST,RUNES,LIST*,VALUE,REMAINING-HYPS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIMPLIFY-HYPS">simplify-hyps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-simplify-hyps" data-sym="SIMPLIFY-HYPS" title="(defun simplify-hyps
       (remaining-hyps rewritten-previous-hyps-rev runes assns g?equiv state
        hints prove-assumptions inhibit-output print-flg must-rewrite-flg ctx)
  (cond
   ((null remaining-hyps)
...">simplify-hyps</a>
  (remaining-hyps rewritten-previous-hyps-rev
    runes
    assns
    g?equiv
    state
    hints
    prove-assumptions
    inhibit-output
    print-flg
    must-rewrite-flg
    ctx)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> remaining-hyps) (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> runes
          (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> rewritten-previous-hyps-rev))
          assns)))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((x (<a class="sym-link local-def" href="#def-tool2-fn" data-sym="TOOL2-FN" title="(defun tool2-fn
       (term hyps g?equiv state hints prove-assumptions inhibit-output
        translate-flg print-flg must-rewrite-flg ctx)
  (let ((wrld (w state)) (ens (ens state)))
    (tool2-fn0 term hyps g?equiv ctx ens wrld state hints prove-assumptions">tool2-fn</a> (car remaining-hyps)
             (<a class="sym-link system" href="../../axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> rewritten-previous-hyps-rev (cdr remaining-hyps))
             g?equiv
             state
             hints
             prove-assumptions
             inhibit-output
             nil
             print-flg
             must-rewrite-flg
             ctx)))
        (<a class="sym-link local-def" href="#def-simplify-hyps" data-sym="SIMPLIFY-HYPS" title="(defun simplify-hyps
       (remaining-hyps rewritten-previous-hyps-rev runes assns g?equiv state
        hints prove-assumptions inhibit-output print-flg must-rewrite-flg ctx)
  (cond
   ((null remaining-hyps)
...">simplify-hyps</a> (cdr remaining-hyps)
          (cons (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x) rewritten-previous-hyps-rev)
          (<a class="sym-link system" href="../../axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> (car x) runes)
          (<a class="sym-link system" href="../../axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> (<a class="sym-link system" href="../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> x) assns)
          g?equiv
          state
          hints
          prove-assumptions
          inhibit-output
          print-flg
          must-rewrite-flg
          ctx)))))</pre>
  </div>

<div class="form-block function" id="def-tool-fn" data-defines="TOOL-FN" data-references="LENGTH,=,NOT,CDDR,CADR,CAR,TOOL2-FN-LST,X,*STANDARD-CO*,FMS,PPROGN,UNTRANSLATE-LST,W,UNTRANSLATE,SOFT,CDR,NULL,LIST*,LIST,QUOTE,HARD,ER,VALUE,TOOL1-FN,T,SIMPLIFY-HYPS,EQ,COND,RUNES-HYPS-ASSNS,ER-LET*,CTX,MUST-REWRITE-FLG,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,SIMPLIFY-HYPS-P,HYPS,TERM,DEFUN" data-used-by="SYMSIM-FN,DEFTHM?-FN-FORMS" data-part-name="TOOL-FN" data-part-args="CTX,MUST-REWRITE-FLG,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,SIMPLIFY-HYPS-P,HYPS,TERM" data-part-body="LENGTH,=,NOT,CDDR,CADR,CAR,TOOL2-FN-LST,X,*STANDARD-CO*,FMS,PPROGN,UNTRANSLATE-LST,W,TERM,UNTRANSLATE,SOFT,CDR,NULL,LIST*,LIST,TOOL-FN,QUOTE,HARD,ER,VALUE,TOOL1-FN,T,CTX,MUST-REWRITE-FLG,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,STATE,G?EQUIV,HYPS,SIMPLIFY-HYPS,SIMPLIFY-HYPS-P,EQ,COND,RUNES-HYPS-ASSNS,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOOL-FN">tool-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tool-fn" data-sym="TOOL-FN" title="(defun tool-fn
       (term hyps simplify-hyps-p g?equiv state hints prove-assumptions
        inhibit-output print-flg must-rewrite-flg ctx)
  (er-let*
   ((runes-hyps-assns
...">tool-fn</a>
  (term hyps
    simplify-hyps-p
    g?equiv
    state
    hints
    prove-assumptions
    inhibit-output
    print-flg
    must-rewrite-flg
    ctx)
  (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((runes-hyps-assns (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> simplify-hyps-p <span class="keyword">:no-split</span>) (<a class="sym-link local-def" href="#def-simplify-hyps" data-sym="SIMPLIFY-HYPS" title="(defun simplify-hyps
       (remaining-hyps rewritten-previous-hyps-rev runes assns g?equiv state
        hints prove-assumptions inhibit-output print-flg must-rewrite-flg ctx)
  (cond
   ((null remaining-hyps)
...">simplify-hyps</a> hyps
             nil
             nil
             nil
             g?equiv
             state
             hints
             prove-assumptions
             inhibit-output
             print-flg
             must-rewrite-flg
             ctx))
         ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> simplify-hyps-p <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-tool1-fn" data-sym="TOOL1-FN" title="(defun tool1-fn
       (hyps state hints prove-assumptions inhibit-output translate-flg
        print-flg)
  (state-global-let*
   ((ld-skip-proofsp nil)
...">tool1-fn</a> hyps
             state
             hints
             prove-assumptions
             inhibit-output
             nil
             print-flg))
         (simplify-hyps-p (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
               '<a class="sym-link local-def" href="#def-tool-fn" data-sym="TOOL-FN" title="(defun tool-fn
       (term hyps simplify-hyps-p g?equiv state hints prove-assumptions
        inhibit-output print-flg must-rewrite-flg ctx)
  (er-let*
   ((runes-hyps-assns
...">tool-fn</a>
               <span class="string">"Bad :simplify-hyps-p argument (should be ~v0): ~x1"</span>
               (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil <span class="keyword">:no-split</span>)
               simplify-hyps-p)))
         (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> nil (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> hyps) nil))))))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> (cdr runes-hyps-assns)) (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"It does not make sense to simplify the term ~x0, because the ~
                  hypothesis list ~x1 is contradictory."</span>
          (untranslate term nil (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))
          (untranslate-lst hyps <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))))
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (print-flg (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"***NOTE***:  Starting TOOL2.~%"</span>
                nil
                <a class="sym-link system" href="../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
                state
                nil))
            (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> state))
          (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((x (<a class="sym-link local-def" href="#def-tool2-fn-lst" data-sym="TOOL2-FN-LST" title="(defun tool2-fn-lst
       (term runes hyps-lst assns g?equiv state hints prove-assumptions
        inhibit-output print-flg must-rewrite-flg ctx)
  (cond ((null hyps-lst) (value nil))
        (t
...">tool2-fn-lst</a> term
                 (car runes-hyps-assns)
                 (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> runes-hyps-assns)
                 (<a class="sym-link system" href="../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> runes-hyps-assns)
                 g?equiv
                 state
                 hints
                 prove-assumptions
                 inhibit-output
                 print-flg
                 must-rewrite-flg
                 ctx)))
            (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> x) (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> runes-hyps-assns)))) (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"Unable to successfully simplify term~%  ~x0~%and ~
                      hypotheses~%  ~x1 in every case generated."</span>
                  (untranslate term nil (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))
                  (untranslate-lst hyps <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))))
              (x (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> x))
              (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"No theorems were suggested for term~%  ~x0~%and ~
                        hypotheses~%  ~x1."</span>
                  (untranslate term nil (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))
                  (untranslate-lst hyps <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))))))))))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-defthm_3F" data-sym="DEFTHM?" title="(defmacro defthm?
          (name term
           &amp;key hints (prove-assumptions &#39;t) (simplify-hyps-p &#39;t) print-flg)
  (let* ((form0
          `(defthm?-fn &#39;,name &#39;,term &#39;,simplify-hyps-p &#39;,hints
...">defthm?</a>
  <span class="keyword">:parents</span> (expander)
  <span class="keyword">:short</span> <span class="string">"Generate a theorem."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

@({
  (defthm? app-simplify
    (implies (true-listp x)
             (equal (append x y)
                    ?))
    :hints ((&quot;Goal&quot; :expand ((true-listp x)
                             (true-listp (cdr x))
                             (append x y))))
    ; show some output
    :print-flg t)
})

&lt;p&gt;General Forms:&lt;/p&gt;

@({
  (DEFTHM? name
    (IMPLIES hyps (equiv term ?))
    :hints             hints
    :prove-assumptions prove-flg ; t or nil, default t
    :print-flg         print-flg ; t or nil, default nil
    :simplify-hyps-p   flg       ; t, nil, or :no-split; default t
  )

  (DEFTHM? name
    (equiv term ?)
    :hints             hints
    :prove-assumptions prove-flg ; t or nil, default t
    :print-flg         print-flg ; t or nil, default nil
    :simplify-hyps-p   flg       ; t, nil, or :no-split; default t
  )
})

&lt;p&gt;where @(&#39;name&#39;) is a new symbolic name (see @(see name)), @(&#39;term&#39;) is a
term to be simplified assuming @(&#39;hyps&#39;) is true, and @(see hints) is as
described in its @(see documentation).  The four keyword arguments above are
all optional, and behave as you might expect.  In particular, set
@(&#39;:simplify-hyps-p&#39;) to @(&#39;nil&#39;) if you do not want the @(&#39;hyps&#39;) to be
simplified; otherwise, case splitting may occur in the course of their
simplification.&lt;/p&gt;

&lt;p&gt;If the given @(&#39;term&#39;) cannot be simplified, then the event fails.
Otherwise, the result is an @(see encapsulate) event with one or more @(see
defthm) events of the form of the theorem, except with @(&#39;hyps&#39;)
simplified (and even omitted if simplified to @(&#39;t&#39;)) and @(&#39;term&#39;) simplified
under the assumption that @(&#39;hyps&#39;) is true.  The reason that there can be more
than one @(see defthm) event is that @(&#39;hyps&#39;) may simplify to an expression
that generates a case split, for example if it simplifies to an @(see if)
expression that does not represent a conjunction.&lt;/p&gt;

&lt;p&gt;In general, simplification may generate assumptions because of @(see force).
By default, an attempt is made to prove these assumptions, which must succeed
or else this event fails.  However, if @(&#39;:prove-assumptions&#39;) is @(&#39;nil&#39;),
then roughly speaking, no proof of forced hypotheses is attempted until after
simplification is complete.  The documentation of :prove-assumptions is
admittedly weak here; feel free to experiment.&lt;/p&gt;

&lt;p&gt;See @(see rewrite$) for a flexible, convenient interface to the ACL2
rewriter that can be called programmatically.  Also see @(see symsim).&lt;/p&gt;

&lt;p&gt;Here are some examples, including the one above.  Try them out and see what
happens.&lt;/p&gt;

  @({

  ; Doesn&#39;t simplify, so fails:
  (defthm? app-simplify
    (implies (true-listp x)
             (equal (append x y)
                    ?))
    :hints ((&quot;Goal&quot; :expand (true-listp x))))

  :pbt 0

  ; The following creates one event, but maybe we&#39;d prefer cases to be
  ; broken out into separate events.  That comes next.
  (defthm? app-simplify
    (implies (true-listp x)
             (equal (append x y)
                    ?))
    :hints ((&quot;Goal&quot; :expand (append x y))))

  :pbt 0
  :pe :here
  :pe APP-SIMPLIFY
  :u

  (defthm? app-simplify
    (implies (true-listp x)
             (equal (append x y)
                    ?))
    :hints ((&quot;Goal&quot; :expand ((true-listp x)
                             (true-listp (cdr x))
                             (append x y))))
    ; show some extra output; this is optional
    :print-flg t)

  :pe :here
  :u
  })"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defthm_3F" data-defines="DEFTHM?" data-references="F-GET-GLOBAL,LD,ER-PROGN,STATE-GLOBAL-LET*,VALUE,DEFTHM?-RESULT,F-PUT-GLOBAL,PPROGN,VAL,ER-LET*,FORM,STATE,W,DEFTHM?-FN,QUASIQUOTE,FORM0,LET*,PRINT-FLG,SIMPLIFY-HYPS-P,T,QUOTE,PROVE-ASSUMPTIONS,HINTS,&KEY,TERM,NAME,DEFMACRO" data-used-by="DEFTHM?-FN-FORMS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTHM?">defthm?</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defthm_3F" data-sym="DEFTHM?" title="(defmacro defthm?
          (name term
           &amp;key hints (prove-assumptions &#39;t) (simplify-hyps-p &#39;t) print-flg)
  (let* ((form0
          `(defthm?-fn &#39;,name &#39;,term &#39;,simplify-hyps-p &#39;,hints
...">defthm?</a>
  (name term
    &amp;key
    hints
    (prove-assumptions '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (simplify-hyps-p '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    print-flg)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((form0 `(<a class="sym-link local-def" href="#def-defthm_3F-fn" data-sym="DEFTHM?-FN" title="(defun defthm?-fn
       (name term simplify-hyps-p hints prove-assumptions print-flg wrld state)
  (state-global-let*
   ((inhibit-output-lst
     (if (boundp-global &#39;defthm?-inhibit-output-lst state)
...">defthm?-fn</a> ',NAME
         ',TERM
         ',SIMPLIFY-HYPS-P
         ',HINTS
         ',PROVE-ASSUMPTIONS
         ',PRINT-FLG
         (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)
         state)) (form `(<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val ,FORM0))
          (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'defthm?-result val state)
            (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))))
    `(<a class="sym-link system" href="../../axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((defthm?-result nil))
      (<a class="sym-link system" href="../../axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (ld '(,FORM) <span class="keyword">:ld-pre-eval-print</span> nil <span class="keyword">:ld-prompt</span> nil)
        (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'defthm?-result state))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Aadjust-hints-exec-theory_2A" data-defines="*ADJUST-HINTS-EXEC-THEORY*" data-references="WORLD,T,*EXPANDABLE-BOOT-STRAP-NON-REC-FNS*,IFF,UNION-EQ,DEFINITION-RUNES,QUOTE,DEFCONST" data-used-by="ADJUST-HINTS-WITH-RUNES1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*ADJUST-HINTS-EXEC-THEORY*">*adjust-hints-exec-theory*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aadjust-hints-exec-theory_2A" data-sym="*ADJUST-HINTS-EXEC-THEORY*" title="(defconst *adjust-hints-exec-theory*
          &#39;(definition-runes
            (union-eq &#39;(iff) *expandable-boot-strap-non-rec-fns*) t world))">*adjust-hints-exec-theory*</a>
  '(definition-runes (<a class="sym-link system" href="../../axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> '(<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a>) <a class="sym-link system" href="../../axioms.html#def-_2Aexpandable-boot-strap-non-rec-fns_2A" data-sym="*EXPANDABLE-BOOT-STRAP-NON-REC-FNS*">*expandable-boot-strap-non-rec-fns*</a>)
    <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
    world))</pre>
  </div>

<div class="form-block function" id="def-adjust-hints-with-runes1" data-defines="ADJUST-HINTS-WITH-RUNES1" data-references="CADR,T,CDDR,INTERSECTION-THEORIES,QUASIQUOTE,LIST*,CAR,EQ,*ADJUST-HINTS-EXEC-THEORY*,UNION-THEORIES,QUOTE,LIST,NULL,COND,RUNES,HINT,DEFUN" data-used-by="ADJUST-HINTS-WITH-RUNES" data-part-name="ADJUST-HINTS-WITH-RUNES1" data-part-args="RUNES,HINT" data-part-body="ADJUST-HINTS-WITH-RUNES1,CADR,T,CDDR,INTERSECTION-THEORIES,QUASIQUOTE,LIST*,CAR,EQ,RUNES,*ADJUST-HINTS-EXEC-THEORY*,UNION-THEORIES,QUOTE,LIST,HINT,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADJUST-HINTS-WITH-RUNES1">adjust-hints-with-runes1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-adjust-hints-with-runes1" data-sym="ADJUST-HINTS-WITH-RUNES1" title="(defun adjust-hints-with-runes1 (hint runes)
  (cond
   ((null hint)
    (list :in-theory
          (list &#39;union-theories *adjust-hints-exec-theory*
...">adjust-hints-with-runes1</a>
  (hint runes)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> hint) (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'union-theories
          <a class="sym-link local-def" href="#def-_2Aadjust-hints-exec-theory_2A" data-sym="*ADJUST-HINTS-EXEC-THEORY*" title="(defconst *adjust-hints-exec-theory*
          &#39;(definition-runes
            (union-eq &#39;(iff) *expandable-boot-strap-non-rec-fns*) t world))">*adjust-hints-exec-theory*</a>
          (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'quote runes))))
    ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (car hint) <span class="keyword">:in-theory</span>) (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'union-theories
          <a class="sym-link local-def" href="#def-_2Aadjust-hints-exec-theory_2A" data-sym="*ADJUST-HINTS-EXEC-THEORY*" title="(defconst *adjust-hints-exec-theory*
          &#39;(definition-runes
            (union-eq &#39;(iff) *expandable-boot-strap-non-rec-fns*) t world))">*adjust-hints-exec-theory*</a>
          `(intersection-theories ',RUNES ,(CADR HINT)))
        (<a class="sym-link system" href="../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> hint)))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car hint)
        (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> hint)
        (<a class="sym-link local-def" href="#def-adjust-hints-with-runes1" data-sym="ADJUST-HINTS-WITH-RUNES1" title="(defun adjust-hints-with-runes1 (hint runes)
  (cond
   ((null hint)
    (list :in-theory
          (list &#39;union-theories *adjust-hints-exec-theory*
...">adjust-hints-with-runes1</a> (<a class="sym-link system" href="../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> hint) runes)))))</pre>
  </div>

<div class="form-block function" id="def-adjust-hints-with-runes" data-defines="ADJUST-HINTS-WITH-RUNES" data-references="EQUAL,OR,CDR,CDAR,ADJUST-HINTS-WITH-RUNES1,CAAR,CONS,T,QUOTE,UNION-THEORIES,QUASIQUOTE,IF,NULL,COND,TOP-GOAL-SEEN-P,RUNES,HINTS,DEFUN" data-part-name="ADJUST-HINTS-WITH-RUNES" data-part-args="TOP-GOAL-SEEN-P,RUNES,HINTS" data-part-body="EQUAL,OR,CDR,ADJUST-HINTS-WITH-RUNES,RUNES,CDAR,ADJUST-HINTS-WITH-RUNES1,CAAR,CONS,T,QUOTE,UNION-THEORIES,QUASIQUOTE,TOP-GOAL-SEEN-P,IF,HINTS,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADJUST-HINTS-WITH-RUNES">adjust-hints-with-runes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-adjust-hints-with-runes" data-sym="ADJUST-HINTS-WITH-RUNES" title="(defun adjust-hints-with-runes (hints runes top-goal-seen-p)
  (cond
   ((null hints)
    (if top-goal-seen-p
        nil
...">adjust-hints-with-runes</a>
  (hints runes top-goal-seen-p)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> hints) (if top-goal-seen-p
        nil
        `((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (union-theories ,*ADJUST-HINTS-EXEC-THEORY* ',RUNES)))))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons (cons (<a class="sym-link system" href="../../axioms.html#def-caar" data-sym="CAAR">caar</a> hints)
          (<a class="sym-link local-def" href="#def-adjust-hints-with-runes1" data-sym="ADJUST-HINTS-WITH-RUNES1" title="(defun adjust-hints-with-runes1 (hint runes)
  (cond
   ((null hint)
    (list :in-theory
          (list &#39;union-theories *adjust-hints-exec-theory*
...">adjust-hints-with-runes1</a> (<a class="sym-link system" href="../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> hints) runes))
        (<a class="sym-link local-def" href="#def-adjust-hints-with-runes" data-sym="ADJUST-HINTS-WITH-RUNES" title="(defun adjust-hints-with-runes (hints runes top-goal-seen-p)
  (cond
   ((null hints)
    (if top-goal-seen-p
        nil
...">adjust-hints-with-runes</a> (cdr hints)
          runes
          (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> top-goal-seen-p (equal (<a class="sym-link system" href="../../axioms.html#def-caar" data-sym="CAAR">caar</a> hints) <span class="string">"Goal"</span>)))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Afake-runes_2A" data-defines="*FAKE-RUNES*" data-references="*FAKE-RUNE-FOR-LINEAR*,*FAKE-RUNE-FOR-TYPE-SET*,*FAKE-RUNE-FOR-ANONYMOUS-ENABLED-RULE*,LIST,DEFCONST" data-used-by="DEFTHM-?-FN-FORMS1-LST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*FAKE-RUNES*">*fake-runes*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Afake-runes_2A" data-sym="*FAKE-RUNES*" title="(defconst *fake-runes*
          (list *fake-rune-for-anonymous-enabled-rule* *fake-rune-for-type-set*
                *fake-rune-for-linear*))">*fake-runes*</a>
  (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> *fake-rune-for-anonymous-enabled-rule*
    *fake-rune-for-type-set*
    <a class="sym-link system" href="../../rewrite.html#def-_2Afake-rune-for-linear_2A" data-sym="*FAKE-RUNE-FOR-LINEAR*">*fake-rune-for-linear*</a>))</pre>
  </div>

<div class="form-block function" id="def-defthm-_3F-fn-forms1-lst" data-defines="DEFTHM-?-FN-FORMS1-LST" data-references="CDR,1+,DEFTHM,QUASIQUOTE,CONS,CDDDR,ASSUMPTIONS,CADDR,RHS,CADR,HYPS,*FAKE-RUNES*,CAR,SET-DIFFERENCE-EQUAL,RUNES,LET,T,NULL,COND,WRLD,HINTS,LHS,EQUIV,X,INDEX,NAME,DEFUN" data-used-by="DEFTHM?-FN-FORMS" data-part-name="DEFTHM-?-FN-FORMS1-LST" data-part-args="WRLD,HINTS,LHS,EQUIV,X,INDEX,NAME" data-part-body="WRLD,HINTS,LHS,EQUIV,CDR,INDEX,1+,NAME,DEFTHM-?-FN-FORMS1-LST,DEFTHM,QUASIQUOTE,CONS,CDDDR,ASSUMPTIONS,CADDR,RHS,CADR,HYPS,*FAKE-RUNES*,CAR,SET-DIFFERENCE-EQUAL,RUNES,LET,T,X,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTHM-?-FN-FORMS1-LST">defthm-?-fn-forms1-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defthm-_3F-fn-forms1-lst" data-sym="DEFTHM-?-FN-FORMS1-LST" title="(defun defthm-?-fn-forms1-lst (name index x equiv lhs hints wrld)
  (cond ((null x) nil)
        (t
         (let ((runes (set-difference-equal (car (car x)) *fake-runes*))
               (hyps (cadr (car x)))
...">defthm-?-fn-forms1-lst</a>
  (name index x equiv lhs hints wrld)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> x) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((runes (<a class="sym-link system" href="../../axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> (car (car x)) <a class="sym-link local-def" href="#def-_2Afake-runes_2A" data-sym="*FAKE-RUNES*" title="(defconst *fake-runes*
          (list *fake-rune-for-anonymous-enabled-rule* *fake-rune-for-type-set*
                *fake-rune-for-linear*))">*fake-runes*</a>)) (hyps (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (car x)))
          (rhs (<a class="sym-link system" href="../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car x)))
          (assumptions (<a class="sym-link system" href="../../axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (car x))))
        (cons `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(IF (AND (ZEROP INDEX) (NULL (CDR X)))
     NAME
     (PACKN (LIST NAME &#39;$ INDEX)))
            ,(UNTRANSLATE
  (IMPLICATE (CONJOIN (APPEND ASSUMPTIONS HYPS)) (FCONS-TERM* EQUIV LHS RHS)) T
  WRLD)
            <span class="keyword">:hints</span> ,(ADJUST-HINTS-WITH-RUNES HINTS RUNES NIL))
          (<a class="sym-link local-def" href="#def-defthm-_3F-fn-forms1-lst" data-sym="DEFTHM-?-FN-FORMS1-LST" title="(defun defthm-?-fn-forms1-lst (name index x equiv lhs hints wrld)
  (cond ((null x) nil)
        (t
         (let ((runes (set-difference-equal (car (car x)) *fake-runes*))
               (hyps (cadr (car x)))
...">defthm-?-fn-forms1-lst</a> name
            (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> index)
            (cdr x)
            equiv
            lhs
            hints
            wrld))))))</pre>
  </div>

<div class="form-block function" id="def-defthm_3F-fn-forms" data-defines="DEFTHM?-FN-FORMS" data-references="VAR,LHS,EQUIV,IMPLIES,SOFT,ER,DEFTHM-?-FN-FORMS1-LST,VALUE,TOOL-FN,FFN-SYMB,EQUIVALENCE-RELATIONP,FARGN,FQUOTEP,VARIABLEP,NOT,NULL,AND,COND,CDR,CONCL,CAR,HYPS,UNPRETTYIFY,X,LET*,CTX,T,TRANSLATE,TFORM,ER-LET*,DEFTHM?,QUOTE,CONS,WITH-CTX-SUMMARIZED,STATE,WRLD,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,SIMPLIFY-HYPS-P,FORM,NAME,DEFUN" data-used-by="DEFTHM?-FN" data-part-name="DEFTHM?-FN-FORMS" data-part-args="STATE,WRLD,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,SIMPLIFY-HYPS-P,FORM,NAME" data-part-body="VAR,LHS,EQUIV,IMPLIES,SOFT,ER,DEFTHM-?-FN-FORMS1-LST,VALUE,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,SIMPLIFY-HYPS-P,TOOL-FN,FFN-SYMB,EQUIVALENCE-RELATIONP,FARGN,FQUOTEP,VARIABLEP,NOT,NULL,AND,COND,CDR,CONCL,CAR,HYPS,UNPRETTYIFY,X,LET*,STATE,WRLD,CTX,T,FORM,TRANSLATE,TFORM,ER-LET*,NAME,DEFTHM?,QUOTE,CONS,WITH-CTX-SUMMARIZED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTHM?-FN-FORMS">defthm?-fn-forms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defthm_3F-fn-forms" data-sym="DEFTHM?-FN-FORMS" title="(defun defthm?-fn-forms
       (name form simplify-hyps-p hints prove-assumptions inhibit-output
        print-flg wrld state)
  (with-ctx-summarized (cons &#39;defthm? name)
                       (er-let* ((tform (translate form t t t ctx wrld state)))
...">defthm?-fn-forms</a>
  (name form
    simplify-hyps-p
    hints
    prove-assumptions
    inhibit-output
    print-flg
    wrld
    state)
  (<a class="sym-link system" href="../../history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> (cons '<a class="sym-link local-def" href="#def-defthm_3F" data-sym="DEFTHM?" title="(defmacro defthm?
          (name term
           &amp;key hints (prove-assumptions &#39;t) (simplify-hyps-p &#39;t) print-flg)
  (let* ((form0
          `(defthm?-fn &#39;,name &#39;,term &#39;,simplify-hyps-p &#39;,hints
...">defthm?</a> name)
    (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tform (translate form <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> ctx wrld state)))
      (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((x (unprettyify tform)) (hyps (car (car x)))
          (concl (cdr (car x))))
        (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> (cdr x))
             (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> concl))
             (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> concl))
             (<a class="sym-link system" href="../../axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> concl <span class="number">2</span>))) (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../basis-b.html#def-equivalence-relationp" data-sym="EQUIVALENCE-RELATIONP">equivalence-relationp</a> (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> concl) wrld) (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((x (<a class="sym-link local-def" href="#def-tool-fn" data-sym="TOOL-FN" title="(defun tool-fn
       (term hyps simplify-hyps-p g?equiv state hints prove-assumptions
        inhibit-output print-flg must-rewrite-flg ctx)
  (er-let*
   ((runes-hyps-assns
...">tool-fn</a> (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> concl <span class="number">1</span>)
                       hyps
                       simplify-hyps-p
                       (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> concl)
                       state
                       hints
                       prove-assumptions
                       inhibit-output
                       print-flg
                       <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
                       ctx)))
                  (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-defthm-_3F-fn-forms1-lst" data-sym="DEFTHM-?-FN-FORMS1-LST" title="(defun defthm-?-fn-forms1-lst (name index x equiv lhs hints wrld)
  (cond ((null x) nil)
        (t
         (let ((runes (set-difference-equal (car (car x)) *fake-runes*))
               (hyps (cadr (car x)))
...">defthm-?-fn-forms1-lst</a> name
                      <span class="number">0</span>
                      x
                      (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> concl)
                      (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> concl <span class="number">1</span>)
                      hints
                      wrld))))
              (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"The form supplied to DEFTHM? must be of the form ~x0 or ~x1, ~
                 where equiv is an equivalence relation.  However, ~x2 is not ~
                 an equivalence relation in the current world."</span>
                  '(<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> hyps (equiv lhs var))
                  '(equiv lhs var)
                  (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> concl)))))
          (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The form supplied to DEFTHM? must be of the form ~x0 or ~x1,~
               where var is a variable.  But ~x2 is not of this form."</span>
              '(<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> hyps (equiv lhs var))
              '(equiv lhs var)
              form)))))))</pre>
  </div>

<div class="form-block function" id="def-defthm_3F-fn" data-defines="DEFTHM?-FN" data-references="ENCAPSULATE,LIST*,VALUE,LOGIC,CONS,ENCAPSULATE-FN,ER-PROGN,DEFTHM?-FN-FORMS,FORMS,ER-LET*,@,F-GET-GLOBAL,DEFTHM?-INHIBIT-OUTPUT-LST,QUOTE,BOUNDP-GLOBAL,IF,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*,STATE,WRLD,PRINT-FLG,PROVE-ASSUMPTIONS,HINTS,SIMPLIFY-HYPS-P,TERM,NAME,DEFUN" data-used-by="DEFTHM?" data-part-name="DEFTHM?-FN" data-part-args="STATE,WRLD,PRINT-FLG,PROVE-ASSUMPTIONS,HINTS,SIMPLIFY-HYPS-P,TERM,NAME" data-part-body="ENCAPSULATE,LIST*,VALUE,LOGIC,CONS,ENCAPSULATE-FN,ER-PROGN,WRLD,PRINT-FLG,PROVE-ASSUMPTIONS,HINTS,SIMPLIFY-HYPS-P,TERM,NAME,DEFTHM?-FN-FORMS,FORMS,ER-LET*,@,F-GET-GLOBAL,STATE,DEFTHM?-INHIBIT-OUTPUT-LST,QUOTE,BOUNDP-GLOBAL,IF,INHIBIT-OUTPUT-LST,STATE-GLOBAL-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTHM?-FN">defthm?-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defthm_3F-fn" data-sym="DEFTHM?-FN" title="(defun defthm?-fn
       (name term simplify-hyps-p hints prove-assumptions print-flg wrld state)
  (state-global-let*
   ((inhibit-output-lst
     (if (boundp-global &#39;defthm?-inhibit-output-lst state)
...">defthm?-fn</a>
  (name term
    simplify-hyps-p
    hints
    prove-assumptions
    print-flg
    wrld
    state)
  (<a class="sym-link system" href="../../axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst (if (<a class="sym-link system" href="../../axioms.html#def-boundp-global" data-sym="BOUNDP-GLOBAL">boundp-global</a> 'defthm?-inhibit-output-lst state)
         (<a class="sym-link system" href="../../axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'defthm?-inhibit-output-lst state)
         (<a class="sym-link system" href="../../axioms.html#def-_40" data-sym="@">@</a> inhibit-output-lst))))
    (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((forms (<a class="sym-link local-def" href="#def-defthm_3F-fn-forms" data-sym="DEFTHM?-FN-FORMS" title="(defun defthm?-fn-forms
       (name form simplify-hyps-p hints prove-assumptions inhibit-output
        print-flg wrld state)
  (with-ctx-summarized (cons &#39;defthm? name)
                       (er-let* ((tform (translate form t t t ctx wrld state)))
...">defthm?-fn-forms</a> name
           term
           simplify-hyps-p
           hints
           prove-assumptions
           nil
           print-flg
           wrld
           state)))
      (<a class="sym-link system" href="../../axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (encapsulate-fn nil (cons '(<a class="sym-link system" href="../../axioms.html#def-logic" data-sym="LOGIC">logic</a>) forms) state nil)
        (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil forms))))))</pre>
  </div>

<div class="form-block other" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-symsim" data-sym="SYMSIM" title="(defmacro symsim
          (term hyps
           &amp;key hints (prove-assumptions &#39;try) (inhibit-output &#39;t)
           (simplify-hyps-p &#39;t) print-flg)
  `(symsim-fn &#39;,term &#39;,hyps &#39;,simplify-hyps-p &#39;,hints &#39;,prove-assumptions">symsim</a>
  <span class="keyword">:parents</span> (expander)
  <span class="keyword">:short</span> <span class="string">"Simplify given term and hypotheses."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

@({
  (symsim (append x y)
          ((not (atom x)) (not (cdr x)))
          :hints ((&quot;Goal&quot; :expand
                   ((true-listp x)
                    (true-listp (cdr x))
                    (append x y)))))
})

&lt;p&gt;yields&lt;/p&gt;

@({
  Simplified term:
    (CONS (CAR X) Y)
  Simplified hyps:
   ((CONSP X) (NOT (CDR X)))~/

  General Form:
  (symsim term hyps
          :hints             hints
          :inhibit-output    inhibit-flg ; t, :prove, :all, or nil, default t
          :prove-assumptions prove-flg   ; t, nil, or (default) any other value
          :print-flg         print-flg   ; t or nil, default nil
          :simplify-hyps-p   flg         ; t, nil, or :no-split; default t
  )
})

&lt;p&gt;where @(&#39;term&#39;) is a term to be simplified assuming that each @(&#39;hyp&#39;) in
the list @(&#39;hyps&#39;) is true, and @(see hints) is as described in its @(see
documentation).  The keyword arguments above are all optional, and behave as
you might expect.  In particular, set @(&#39;:simplify-hyps-p&#39;) to @(&#39;nil&#39;) if you
do not want the @(&#39;hyps&#39;) to be simplified; otherwise, case splitting may occur
in the course of their simplification.&lt;/p&gt;

&lt;p&gt;Prover output is inhibited if @(&#39;:inhibit-output&#39;) is @(&#39;t&#39;) (the default).
Only proof output is inhibited if @(&#39;:inhibit-output&#39;) is @(&#39;:prove&#39;) (so for
example, summaries and warnings are printed), and all prover output is shown or
inhibited if @(&#39;:inhibit-output&#39;) is @(&#39;nil&#39;) or @(&#39;:all&#39;), respectively.&lt;/p&gt;

&lt;p&gt;See @(see rewrite$) for a flexible, convenient interface to the ACL2
rewriter that can be called programmatically.  Also see @(see defthm?), which
is related to @(&#39;symsim&#39;) and is a bit more thoroughly documented.  Here are
some examples that should help give an idea of how @(&#39;symsim&#39;) works.  (The
name, by the way, is short for &quot;symbolically simulate&quot;.)  Try these, as well
as the examples shown above.&lt;/p&gt;

  @({

  (symsim (append x y)
          nil
          :hints ((&quot;Goal&quot; :expand
                   ((true-listp x)
                    (append x y)
                    (append (cdr x) y)))))

  ; Generates three cases:
  (symsim (append x y)
          ((true-listp x))
          :hints ((&quot;Goal&quot; :expand
                   ((true-listp x)
                    (true-listp (cdr x))
                    (append x y)
                    (append (cdr x) y)))))

  ; Let&#39;s illustrate the role of FORCE.  The following rule
  ; forces append to open up, and comes into play below.
  (defthm true-listp-expand-append
    (implies (and (force (true-listp x))
                  x)
             (equal (append x y)
                    (cons (car x) (append (cdr x) y)))))

  ; Generates assumption forced by preceding rule.
  (symsim (append x y)
          ((not (atom x))))

  ; But now we fail; but why?  See next form.
  (symsim (append x y)
          ((consp x))
          :prove-assumptions t)

  ; Let&#39;s not inhibit output.  Then we can see the failed forcing round.
  (symsim (append x y)
          ((consp x))
          :prove-assumptions t
          :inhibit-output nil)

  ; As above, but doesn&#39;t deal with generated forced assumptions at all (just
  ; drops them on the floor).
  (symsim (append x y)
          ((consp x))
          :prove-assumptions nil)
  })"</span>)</pre>
  </div>

<div class="form-block macro" id="def-symsim" data-defines="SYMSIM" data-references="STATE,W,SYMSIM-FN,QUASIQUOTE,PRINT-FLG,SIMPLIFY-HYPS-P,T,INHIBIT-OUTPUT,TRY,QUOTE,PROVE-ASSUMPTIONS,HINTS,&KEY,HYPS,TERM,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYMSIM">symsim</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-symsim" data-sym="SYMSIM" title="(defmacro symsim
          (term hyps
           &amp;key hints (prove-assumptions &#39;try) (inhibit-output &#39;t)
           (simplify-hyps-p &#39;t) print-flg)
  `(symsim-fn &#39;,term &#39;,hyps &#39;,simplify-hyps-p &#39;,hints &#39;,prove-assumptions">symsim</a>
  (term hyps
    &amp;key
    hints
    (prove-assumptions 'try)
    (inhibit-output '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (simplify-hyps-p '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    print-flg)
  `(<a class="sym-link local-def" href="#def-symsim-fn" data-sym="SYMSIM-FN" title="(defun symsim-fn
       (term hyps simplify-hyps-p hints prove-assumptions inhibit-output
        print-flg wrld state)
  (er-let*
   ((tterm (translate term t t t &#39;top-level wrld state))
...">symsim-fn</a> ',TERM
    ',HYPS
    ',SIMPLIFY-HYPS-P
    ',HINTS
    ',PROVE-ASSUMPTIONS
    ',INHIBIT-OUTPUT
    ',PRINT-FLG
    (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)
    state))</pre>
  </div>

<div class="form-block function" id="def-symsim-fn-print-lst" data-defines="SYMSIM-FN-PRINT-LST" data-references="1+,CDR,LET*-ABSTRACTIONP,CDDDR,PRETTYIFY-CLAUSE-LST,CADDR,UNTRANSLATE,CADR,UNTRANSLATE-LST,CONS,LIST,PPROGN,CAR,TUPLE,LET,T,*STANDARD-CO*,FMS,NULL,COND,STATE,WRLD,TOTAL,N,TUPLES,DEFUN" data-used-by="SYMSIM-FN" data-part-name="SYMSIM-FN-PRINT-LST" data-part-args="STATE,WRLD,TOTAL,N,TUPLES" data-part-body="1+,CDR,SYMSIM-FN-PRINT-LST,LET*-ABSTRACTIONP,CDDDR,PRETTYIFY-CLAUSE-LST,CADDR,UNTRANSLATE,WRLD,CADR,UNTRANSLATE-LST,TOTAL,N,CONS,LIST,PPROGN,CAR,TUPLE,LET,T,STATE,*STANDARD-CO*,FMS,TUPLES,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYMSIM-FN-PRINT-LST">symsim-fn-print-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-symsim-fn-print-lst" data-sym="SYMSIM-FN-PRINT-LST" title="(defun symsim-fn-print-lst (tuples n total wrld state)
  (cond
   ((null tuples)
    (fms &quot;========================================~%~%&quot; nil *standard-co* state
         nil))
...">symsim-fn-print-lst</a>
  (tuples n total wrld state)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> tuples) (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"========================================~%~%"</span>
        nil
        <a class="sym-link system" href="../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
        state
        nil))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((tuple (car tuples)))
        (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"========== Generated case #~x0 of ~x1 ==========~%"</span>
            (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 n) (cons #\1 total))
            <a class="sym-link system" href="../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
            state
            nil)
          (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Runes:~%  ~x0~%Simplified hyps:~% ~x1~%Simplified term:~%  ~
                  ~x2~%Simplified assumptions:~% ~x3~%"</span>
            (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (car tuple))
              (cons #\1 (untranslate-lst (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple) <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> wrld))
              (cons #\2 (untranslate (<a class="sym-link system" href="../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> tuple) nil wrld))
              (cons #\3
                (prettyify-clause-lst (<a class="sym-link system" href="../../axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> tuple)
                  (<a class="sym-link system" href="../../axioms.html#def-let_2A-abstractionp" data-sym="LET*-ABSTRACTIONP">let*-abstractionp</a> state)
                  wrld)))
            <a class="sym-link system" href="../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
            state
            nil)
          (<a class="sym-link local-def" href="#def-symsim-fn-print-lst" data-sym="SYMSIM-FN-PRINT-LST" title="(defun symsim-fn-print-lst (tuples n total wrld state)
  (cond
   ((null tuples)
    (fms &quot;========================================~%~%&quot; nil *standard-co* state
         nil))
...">symsim-fn-print-lst</a> (cdr tuples) (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> n) total wrld state))))))</pre>
  </div>

<div class="form-block function" id="def-symsim-fn" data-defines="SYMSIM-FN" data-references="VALUE,LENGTH,SYMSIM-FN-PRINT-LST,IF,PPROGN,CONS,EQUAL,TOOL-FN,TUPLES-LST,TRANSLATE-TERM-LST,THYPS,TOP-LEVEL,QUOTE,T,TRANSLATE,TTERM,ER-LET*,STATE,WRLD,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,SIMPLIFY-HYPS-P,HYPS,TERM,DEFUN" data-used-by="SYMSIM" data-part-name="SYMSIM-FN" data-part-args="STATE,WRLD,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,SIMPLIFY-HYPS-P,HYPS,TERM" data-part-body="VALUE,LENGTH,SYMSIM-FN-PRINT-LST,IF,PPROGN,SYMSIM-FN,CONS,PRINT-FLG,INHIBIT-OUTPUT,PROVE-ASSUMPTIONS,HINTS,EQUAL,SIMPLIFY-HYPS-P,TOOL-FN,TUPLES-LST,HYPS,TRANSLATE-TERM-LST,THYPS,STATE,WRLD,TOP-LEVEL,QUOTE,T,TERM,TRANSLATE,TTERM,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYMSIM-FN">symsim-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-symsim-fn" data-sym="SYMSIM-FN" title="(defun symsim-fn
       (term hyps simplify-hyps-p hints prove-assumptions inhibit-output
        print-flg wrld state)
  (er-let*
   ((tterm (translate term t t t &#39;top-level wrld state))
...">symsim-fn</a>
  (term hyps
    simplify-hyps-p
    hints
    prove-assumptions
    inhibit-output
    print-flg
    wrld
    state)
  (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((tterm (translate term <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> 'top-level wrld state)) (thyps (translate-term-lst hyps <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> 'top-level wrld state))
      (tuples-lst (<a class="sym-link local-def" href="#def-tool-fn" data-sym="TOOL-FN" title="(defun tool-fn
       (term hyps simplify-hyps-p g?equiv state hints prove-assumptions
        inhibit-output print-flg must-rewrite-flg ctx)
  (er-let*
   ((runes-hyps-assns
...">tool-fn</a> tterm
          thyps
          simplify-hyps-p
          'equal
          state
          hints
          prove-assumptions
          inhibit-output
          print-flg
          <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
          (cons '<a class="sym-link local-def" href="#def-symsim-fn" data-sym="SYMSIM-FN" title="(defun symsim-fn
       (term hyps simplify-hyps-p hints prove-assumptions inhibit-output
        print-flg wrld state)
  (er-let*
   ((tterm (translate term t t t &#39;top-level wrld state))
...">symsim-fn</a> term))))
    (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if print-flg
        (<a class="sym-link local-def" href="#def-symsim-fn-print-lst" data-sym="SYMSIM-FN-PRINT-LST" title="(defun symsim-fn-print-lst (tuples n total wrld state)
  (cond
   ((null tuples)
    (fms &quot;========================================~%~%&quot; nil *standard-co* state
         nil))
...">symsim-fn-print-lst</a> tuples-lst
          <span class="number">1</span>
          (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> tuples-lst)
          wrld
          state)
        state)
      (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> tuples-lst))))</pre>
  </div>

<div class="form-block function" id="def-normalize-no-ttree" data-defines="NORMALIZE-NO-TTREE" data-references="IGNORE,DECLARE,BACKCHAIN-LIMIT,NORMALIZE,TTREE,X,MV-LET,WRLD,ENS,TYPE-ALIST,IFF-FLG,TERM,DEFUN" data-used-by="SIMP-HYPS-AUX" data-part-name="NORMALIZE-NO-TTREE" data-part-args="WRLD,ENS,TYPE-ALIST,IFF-FLG,TERM" data-part-body="IGNORE,DECLARE,BACKCHAIN-LIMIT,WRLD,ENS,TYPE-ALIST,IFF-FLG,TERM,NORMALIZE,TTREE,X,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NORMALIZE-NO-TTREE">normalize-no-ttree</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-normalize-no-ttree" data-sym="NORMALIZE-NO-TTREE" title="(defun normalize-no-ttree (term iff-flg type-alist ens wrld)
  (mv-let (x ttree)
          (normalize term iff-flg type-alist ens wrld nil
                     (backchain-limit wrld :ts))
          (declare (ignore ttree)) x))">normalize-no-ttree</a>
  (term iff-flg type-alist ens wrld)
  (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (x ttree)
    (normalize term
      iff-flg
      type-alist
      ens
      wrld
      nil
      (<a class="sym-link system" href="../../axioms.html#def-backchain-limit" data-sym="BACKCHAIN-LIMIT">backchain-limit</a> wrld <span class="keyword">:ts</span>))
    (declare (ignore ttree))
    x))</pre>
  </div>

<div class="form-block function" id="def-simp-hyps-aux" data-defines="SIMP-HYPS-AUX" data-references="CDR,NHYPS-RES,FLATTEN-ANDS-IN-LIT,APPEND,OR,NHYPS-INIT,NOT,AND,ALWAYS-SIMP?,TERM-ORDER,SIMPLIFIED?,SIMPLIFIED-TO-NIL?,EQUAL,SIMPLIFIED-TO-T?,CADR,IF,RES,IFF,QUOTE,TOOL2-FN0,X,ERP,MV-LET,REMOVE1-EQUAL,OTHER-HYPS,NORMALIZE-NO-TTREE,HYP,CAR,HYP0,LET*,T,REVERSE,VALUE,NULL,COND,SIMP-FLG,PRINT-FLG,INHIBIT-OUTPUT,HINTS,STATE,WRLD,ENS,CTX,HYPS-RES,HYPS-INIT,HYPS-REMAINING,DEFUN" data-used-by="SIMP-HYPS0" data-part-name="SIMP-HYPS-AUX" data-part-args="SIMP-FLG,PRINT-FLG,INHIBIT-OUTPUT,HINTS,STATE,WRLD,ENS,CTX,HYPS-RES,HYPS-INIT,HYPS-REMAINING" data-part-body="CDR,SIMP-HYPS-AUX,NHYPS-RES,FLATTEN-ANDS-IN-LIT,APPEND,OR,NHYPS-INIT,SIMP-FLG,NOT,AND,ALWAYS-SIMP?,TERM-ORDER,SIMPLIFIED?,SIMPLIFIED-TO-NIL?,EQUAL,SIMPLIFIED-TO-T?,CADR,IF,RES,PRINT-FLG,INHIBIT-OUTPUT,HINTS,CTX,IFF,QUOTE,TOOL2-FN0,STATE,X,ERP,MV-LET,HYPS-INIT,REMOVE1-EQUAL,OTHER-HYPS,WRLD,ENS,NORMALIZE-NO-TTREE,HYP,CAR,HYP0,LET*,T,HYPS-RES,REVERSE,VALUE,HYPS-REMAINING,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIMP-HYPS-AUX">simp-hyps-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-simp-hyps-aux" data-sym="SIMP-HYPS-AUX" title="(defun simp-hyps-aux
       (hyps-remaining hyps-init hyps-res ctx ens wrld state hints
        inhibit-output print-flg simp-flg)
  (cond ((null hyps-remaining) (value (reverse hyps-res)))
        (t
...">simp-hyps-aux</a>
  (hyps-remaining hyps-init
    hyps-res
    ctx
    ens
    wrld
    state
    hints
    inhibit-output
    print-flg
    simp-flg)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> hyps-remaining) (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> hyps-res)))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((hyp0 (car hyps-remaining)) (hyp (<a class="sym-link local-def" href="#def-normalize-no-ttree" data-sym="NORMALIZE-NO-TTREE" title="(defun normalize-no-ttree (term iff-flg type-alist ens wrld)
  (mv-let (x ttree)
          (normalize term iff-flg type-alist ens wrld nil
                     (backchain-limit wrld :ts))
          (declare (ignore ttree)) x))">normalize-no-ttree</a> hyp0 <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil ens wrld))
          (other-hyps (<a class="sym-link system" href="../../axioms.html#def-remove1-equal" data-sym="REMOVE1-EQUAL">remove1-equal</a> hyp0 hyps-init)))
        (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp x state)
          (<a class="sym-link local-def" href="#def-tool2-fn0" data-sym="TOOL2-FN0" title="(defun tool2-fn0
       (term hyps g?equiv ctx ens wrld state hints prove-assumptions
        inhibit-output translate-flg print-flg must-rewrite-flg)
  (state-global-let*
   ((inhibit-output-lst (maybe-inhibit-output-lst inhibit-output state)))
...">tool2-fn0</a> hyp
            other-hyps
            '<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a>
            ctx
            ens
            wrld
            state
            hints
            nil
            inhibit-output
            nil
            print-flg
            nil)
          (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((res (if erp
                 hyp
                 (<a class="sym-link local-def" href="#def-normalize-no-ttree" data-sym="NORMALIZE-NO-TTREE" title="(defun normalize-no-ttree (term iff-flg type-alist ens wrld)
  (mv-let (x ttree)
          (normalize term iff-flg type-alist ens wrld nil
                     (backchain-limit wrld :ts))
          (declare (ignore ttree)) x))">normalize-no-ttree</a> (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x) <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil ens wrld))) (simplified-to-t? (equal res ''<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
              (simplified-to-nil? (equal res ''nil))
              (simplified? (term-order res hyp))
              (always-simp? (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal simp-flg <span class="keyword">:t</span>))
                  (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal simp-flg <span class="keyword">:term-order</span>))))
              (nhyps-init (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (simplified-to-t? other-hyps)
                  ((<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> always-simp?
                     (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> simplified? (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal simp-flg <span class="keyword">:t</span>)))) (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (flatten-ands-in-lit res) other-hyps))
                  (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (flatten-ands-in-lit hyp) other-hyps))))
              (nhyps-res (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (simplified-to-t? hyps-res)
                  ((<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> always-simp?
                     (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> simplified? (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal simp-flg <span class="keyword">:t</span>)))) (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (flatten-ands-in-lit res) hyps-res))
                  (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> (flatten-ands-in-lit hyp) hyps-res)))))
            (if simplified-to-nil?
              (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> nil)
              (<a class="sym-link local-def" href="#def-simp-hyps-aux" data-sym="SIMP-HYPS-AUX" title="(defun simp-hyps-aux
       (hyps-remaining hyps-init hyps-res ctx ens wrld state hints
        inhibit-output print-flg simp-flg)
  (cond ((null hyps-remaining) (value (reverse hyps-res)))
        (t
...">simp-hyps-aux</a> (cdr hyps-remaining)
                nhyps-init
                nhyps-res
                ctx
                ens
                wrld
                state
                hints
                inhibit-output
                print-flg
                simp-flg))))))))</pre>
  </div>

<div class="form-block function" id="def-simp-hyps0" data-defines="SIMP-HYPS0" data-references="VALUE,EQUAL,IF,SIMP-HYPS-AUX,T-ND-HYPS,ER-LET*,REMOVE-DUPLICATES,ND-HYPS,LET,SIMP-FLG,PRINT-FLG,INHIBIT-OUTPUT,HINTS,STATE,WRLD,ENS,CTX,HYPS,DEFUN" data-used-by="SIMP-HYPS" data-part-name="SIMP-HYPS0" data-part-args="SIMP-FLG,PRINT-FLG,INHIBIT-OUTPUT,HINTS,STATE,WRLD,ENS,CTX,HYPS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIMP-HYPS0">simp-hyps0</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-simp-hyps0" data-sym="SIMP-HYPS0" title="(defun simp-hyps0
       (hyps ctx ens wrld state hints inhibit-output print-flg simp-flg)
  &quot;See the documentation for simp-hyps. This function has the same
   functionality, but requires the user to provide the ctx, ens, and wrld.&quot;
  (let ((nd-hyps (remove-duplicates hyps)))
...">simp-hyps0</a>
  (hyps ctx
    ens
    wrld
    state
    hints
    inhibit-output
    print-flg
    simp-flg)
  <span class="string">"See the documentation for simp-hyps. This function has the same
   functionality, but requires the user to provide the ctx, ens, and wrld."</span>
  (let ((nd-hyps (<a class="sym-link system" href="../../axioms.html#def-remove-duplicates" data-sym="REMOVE-DUPLICATES">remove-duplicates</a> hyps)))
    (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((t-nd-hyps (<a class="sym-link local-def" href="#def-simp-hyps-aux" data-sym="SIMP-HYPS-AUX" title="(defun simp-hyps-aux
       (hyps-remaining hyps-init hyps-res ctx ens wrld state hints
        inhibit-output print-flg simp-flg)
  (cond ((null hyps-remaining) (value (reverse hyps-res)))
        (t
...">simp-hyps-aux</a> nd-hyps
           nd-hyps
           nil
           ctx
           ens
           wrld
           state
           hints
           inhibit-output
           print-flg
           <span class="keyword">:t</span>)))
      (if (equal simp-flg <span class="keyword">:t</span>)
        (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> t-nd-hyps)
        (<a class="sym-link local-def" href="#def-simp-hyps-aux" data-sym="SIMP-HYPS-AUX" title="(defun simp-hyps-aux
       (hyps-remaining hyps-init hyps-res ctx ens wrld state hints
        inhibit-output print-flg simp-flg)
  (cond ((null hyps-remaining) (value (reverse hyps-res)))
        (t
...">simp-hyps-aux</a> t-nd-hyps
          t-nd-hyps
          nil
          ctx
          ens
          wrld
          state
          hints
          inhibit-output
          print-flg
          simp-flg)))))</pre>
  </div>

<div class="form-block function" id="def-simp-hyps" data-defines="SIMP-HYPS" data-references="W,ENS,QUOTE,SIMP-HYPS0,SIMP-FLG,PRINT-FLG,INHIBIT-OUTPUT,HINTS,STATE,HYPS,DEFUN" data-part-name="SIMP-HYPS" data-part-args="SIMP-FLG,PRINT-FLG,INHIBIT-OUTPUT,HINTS,STATE,HYPS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIMP-HYPS">simp-hyps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-simp-hyps" data-sym="SIMP-HYPS" title="(defun simp-hyps (hyps state hints inhibit-output print-flg simp-flg)
  &quot;Given a list of terms (hyps), return a list that is a subset
  of hyps. The conjunction of hyps should be equal to the
  conjuction of the returned list. If simp-flg is :t, all we do
  is to remove elements of hyps that can be proven to simplify to
...">simp-hyps</a>
  (hyps state hints inhibit-output print-flg simp-flg)
  <span class="string">"Given a list of terms (hyps), return a list that is a subset
  of hyps. The conjunction of hyps should be equal to the
  conjuction of the returned list. If simp-flg is :t, all we do
  is to remove elements of hyps that can be proven to simplify to
  t, assuming the rest of the elements in hyps hold. If simp-flg
  is :term-order, then we replace elements of hyps with what they
  simplify to (again, assuming the rest of the elements in hyps
  hold) if we wind up with a smaller term (as determined by the
  function term-order). Otherwise, we replace elements of hyps
  with whatever they simplify to (again, assuming the rest of the
  elements in hyps hold). Some care is taken to deal with
  duplicates, and the like. For example, we always try with
  simp-flg set to :t first since this tends to return results
  that depend less on the order of arguments. To see this, note
  that if you give ((natp x) (integerp x)) as input, you would get
  different results when you change the order of the hyps (if you
  didn&#39;t try :t first). "</span>
  (<a class="sym-link local-def" href="#def-simp-hyps0" data-sym="SIMP-HYPS0" title="(defun simp-hyps0
       (hyps ctx ens wrld state hints inhibit-output print-flg simp-flg)
  &quot;See the documentation for simp-hyps. This function has the same
   functionality, but requires the user to provide the ctx, ens, and wrld.&quot;
  (let ((nd-hyps (remove-duplicates hyps)))
...">simp-hyps0</a> hyps
    '<a class="sym-link local-def" href="#def-simp-hyps" data-sym="SIMP-HYPS" title="(defun simp-hyps (hyps state hints inhibit-output print-flg simp-flg)
  &quot;Given a list of terms (hyps), return a list that is a subset
  of hyps. The conjunction of hyps should be equal to the
  conjuction of the returned list. If simp-flg is :t, all we do
  is to remove elements of hyps that can be proven to simplify to
...">simp-hyps</a>
    (ens state)
    (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)
    state
    hints
    inhibit-output
    print-flg
    simp-flg))</pre>
  </div>

<div class="form-block function" id="def-defsimp-fn" data-defines="DEFSIMP-FN" data-references="VALUE,STANDARD-CO,FMS,EQ,PPROGN,DEFTHM,EVENT-FORM,MINIMAL-THEORY,THEORY,UNION-THEORIES,RUNES+,EQUAL,OR,AND,CONS,CDR,IMPLIES,LIST,IF,FORMULA,LET*,TRUE-LISTP,NOT,SOFT,ER,COND,CDDR,ASSUMPTIONS,CADR,NEW-TERM,CAR,RUNES,T,TOOL2-FN0,RUNES/NEW-TERM/ASSUMPTIONS,ER-LET*,QUASIQUOTE,HINTS,ENS,W,WRLD,DEFSIMP,QUOTE,CTX,LET,PRINT,RULE-CLASSES,DEFTHM-NAME,MUST-REWRITE-FLG,TRANSLATE-FLG,EXPAND,IN-THEORY,STATE,EQUIV,HYPS,TERM,DEFUN" data-used-by="DEFSIMP" data-part-name="DEFSIMP-FN" data-part-args="PRINT,RULE-CLASSES,DEFTHM-NAME,MUST-REWRITE-FLG,TRANSLATE-FLG,EXPAND,IN-THEORY,STATE,EQUIV,HYPS,TERM" data-part-body="VALUE,STANDARD-CO,FMS,PRINT,EQ,PPROGN,DEFTHM,EVENT-FORM,MINIMAL-THEORY,THEORY,UNION-THEORIES,RUNES+,EQUAL,OR,AND,CONS,CDR,IMPLIES,LIST,IF,FORMULA,LET*,TRUE-LISTP,NOT,SOFT,ER,COND,CDDR,ASSUMPTIONS,CADR,NEW-TERM,CAR,RUNES,MUST-REWRITE-FLG,TRANSLATE-FLG,T,EQUIV,HYPS,TERM,TOOL2-FN0,RUNES/NEW-TERM/ASSUMPTIONS,ER-LET*,QUASIQUOTE,HINTS,ENS,STATE,W,WRLD,DEFSIMP,QUOTE,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSIMP-FN">defsimp-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defsimp-fn" data-sym="DEFSIMP-FN" title="(defun defsimp-fn
       (term hyps equiv state in-theory expand translate-flg must-rewrite-flg
        defthm-name rule-classes print)
  (let ((ctx &#39;defsimp)
        (wrld (w state))
...">defsimp-fn</a>
  (term hyps
    equiv
    state
    <a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a>
    expand
    translate-flg
    must-rewrite-flg
    defthm-name
    rule-classes
    print)
  (let ((ctx '<a class="sym-link local-def" href="#def-defsimp" data-sym="DEFSIMP" title="(defmacro defsimp
          (term hyps defthm-name
           &amp;key (rule-classes &#39;:rewrite) (in-theory &#39;:none) expand equiv
           (translate-flg &#39;t) (must-rewrite-flg &#39;t) (print &#39;:all))
  (let ((form
...">defsimp</a>) (wrld (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))
      (ens (ens state))
      (hints `(,@(AND (NOT (EQ IN-THEORY :NONE)) `((:IN-THEORY ,IN-THEORY))) ,@(AND EXPAND `((:EXPAND ,EXPAND))))))
    (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((runes/new-term/assumptions (<a class="sym-link local-def" href="#def-tool2-fn0" data-sym="TOOL2-FN0" title="(defun tool2-fn0
       (term hyps g?equiv ctx ens wrld state hints prove-assumptions
        inhibit-output translate-flg print-flg must-rewrite-flg)
  (state-global-let*
   ((inhibit-output-lst (maybe-inhibit-output-lst inhibit-output state)))
...">tool2-fn0</a> term
           hyps
           equiv
           ctx
           ens
           wrld
           state
           hints
           <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
           <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
           translate-flg
           nil
           must-rewrite-flg)))
      (let ((runes (car runes/new-term/assumptions)) (new-term (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> runes/new-term/assumptions))
          (assumptions (<a class="sym-link system" href="../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> runes/new-term/assumptions)))
        (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (assumptions (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"Implementation error: assumptions were unexpectedly forced.  ~
               Please contact the maintainers of books/misc/expander.lisp"</span>))
          ((<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> hyps)) (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The given hypotheses must be a true list, but ~x0 is not."</span>
              hyps))
          (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="../../history-management.html#def-formula" data-sym="FORMULA">formula</a> (if hyps
                   (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a>
                     (if (cdr hyps)
                       (cons '<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> hyps)
                       (car hyps))
                     (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> equiv 'equal) term new-term))
                   (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> equiv 'equal) term new-term))) (runes+ `(union-theories (theory 'minimal-theory) ',RUNES))
                (event-form `(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,DEFTHM-NAME
                    ,FORMULA
                    <span class="keyword">:instructions</span> ((<span class="keyword">:in-theory</span> ,RUNES+) ,@(AND HYPS &#39;(:PROMOTE))
                      (<span class="keyword">:dive</span> <span class="number">1</span>)
                      (<span class="keyword">:then</span> (<span class="keyword">:s</span> <span class="keyword">:backchain-limit</span> <span class="number">500</span>)
                        (<span class="keyword">:prove</span> ,@(AND EXPAND `(:HINTS ((&quot;Goal&quot; :EXPAND ,EXPAND))))))
                      <span class="keyword">:up</span> <span class="keyword">:s-prop</span>)
                    ,@(AND (NOT (EQ RULE-CLASSES :REWRITE)) `(:RULE-CLASSES ,RULE-CLASSES)))))
              (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> print <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"New term:~|~x0~|~%"</span>
                      (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 new-term))
                      (<a class="sym-link system" href="../../basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                      state
                      nil))
                  ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> print <span class="keyword">:all</span>) (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~x0~|~%"</span>
                      (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 event-form))
                      (<a class="sym-link system" href="../../basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> state)
                      state
                      nil))
                  (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> state))
                (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> event-form)))))))))</pre>
  </div>

<div class="form-block macro" id="def-defsimp" data-defines="DEFSIMP" data-references="ERROR,WITH-OUTPUT,STATE,DEFSIMP-FN,QUASIQUOTE,FORM,LET,PRINT,MUST-REWRITE-FLG,T,TRANSLATE-FLG,EQUIV,EXPAND,IN-THEORY,QUOTE,RULE-CLASSES,&KEY,DEFTHM-NAME,HYPS,TERM,DEFMACRO" data-used-by="DEFSIMP-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSIMP">defsimp</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defsimp" data-sym="DEFSIMP" title="(defmacro defsimp
          (term hyps defthm-name
           &amp;key (rule-classes &#39;:rewrite) (in-theory &#39;:none) expand equiv
           (translate-flg &#39;t) (must-rewrite-flg &#39;t) (print &#39;:all))
  (let ((form
...">defsimp</a>
  (term hyps
    defthm-name
    &amp;key
    (rule-classes '<span class="keyword">:rewrite</span>)
    (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> '<span class="keyword">:none</span>)
    expand
    equiv
    (translate-flg '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (must-rewrite-flg '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (print '<span class="keyword">:all</span>))
  (let ((form `(<a class="sym-link local-def" href="#def-defsimp-fn" data-sym="DEFSIMP-FN" title="(defun defsimp-fn
       (term hyps equiv state in-theory expand translate-flg must-rewrite-flg
        defthm-name rule-classes print)
  (let ((ctx &#39;defsimp)
        (wrld (w state))
...">defsimp-fn</a> ',TERM
         ',HYPS
         ',EQUIV
         state
         ',IN-THEORY
         ',EXPAND
         ',TRANSLATE-FLG
         ,MUST-REWRITE-FLG
         ',DEFTHM-NAME
         ',RULE-CLASSES
         ',PRINT)))
    `(<a class="sym-link system" href="../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> <span class="keyword">:all</span> <span class="keyword">:on</span> error
      ,(IF (EQ PRINT :ONLY)
     `(MAKE-EVENT
       (ER-LET* ((FORM ,FORM))
                (VALUE (LIST &#39;VALUE-TRIPLE (LIST &#39;QUOTE FORM)))))
     `(MAKE-EVENT ,FORM)))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>