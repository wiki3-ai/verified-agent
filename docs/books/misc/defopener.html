<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>defopener - ACL2 Book</title>
  <meta property="name" content="defopener">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">defopener</h1>
    <div class="path"><a href="defopener.lisp" class="source-link">books/misc/defopener</a></div>
  </div>
  
  <main property="text">
  <div class="includes-section">
    <h2>Included Books</h2>
    <div class="includes-list">
      <a class="include-link" href="bash.html" title="bash">bash</a>
    </div>
  </div>

<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block include-book" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="bash.html" title="Open bash">"bash"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-set-state-ok" data-sym="SET-STATE-OK">set-state-ok</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-splitter1-p" data-defines="SPLITTER1-P" data-references="T,MEMBER-COMPLEMENT-TERM,CDR,CAR,MEMBER-TERM,NULL,COND,FOUND-NEGATION,HYPS-LIST,LIT,DEFUN" data-used-by="SPLITTER" data-part-name="SPLITTER1-P" data-part-args="FOUND-NEGATION,HYPS-LIST,LIT" data-part-body="T,MEMBER-COMPLEMENT-TERM,CDR,SPLITTER1-P,CAR,LIT,MEMBER-TERM,FOUND-NEGATION,HYPS-LIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPLITTER1-P">splitter1-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-splitter1-p" data-sym="SPLITTER1-P" title="(defun splitter1-p (lit hyps-list found-negation)
  (cond ((null hyps-list) found-negation)
        ((member-term lit (car hyps-list))
         (splitter1-p lit (cdr hyps-list) found-negation))
        ((member-complement-term lit (car hyps-list))
...">splitter1-p</a>
  (lit hyps-list found-negation)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> hyps-list) found-negation)
    ((<a class="sym-link system" href="../../rewrite.html#def-member-term" data-sym="MEMBER-TERM">member-term</a> lit (car hyps-list)) (<a class="sym-link local-def" href="#def-splitter1-p" data-sym="SPLITTER1-P" title="(defun splitter1-p (lit hyps-list found-negation)
  (cond ((null hyps-list) found-negation)
        ((member-term lit (car hyps-list))
         (splitter1-p lit (cdr hyps-list) found-negation))
        ((member-complement-term lit (car hyps-list))
...">splitter1-p</a> lit (cdr hyps-list) found-negation))
    ((member-complement-term lit (car hyps-list)) (<a class="sym-link local-def" href="#def-splitter1-p" data-sym="SPLITTER1-P" title="(defun splitter1-p (lit hyps-list found-negation)
  (cond ((null hyps-list) found-negation)
        ((member-term lit (car hyps-list))
         (splitter1-p lit (cdr hyps-list) found-negation))
        ((member-complement-term lit (car hyps-list))
...">splitter1-p</a> lit (cdr hyps-list) <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-splitter" data-defines="SPLITTER" data-references="CDR,T,CAR,SPLITTER1-P,ENDP,COND,HYPS-LIST,HYPS,DEFUN" data-used-by="SPLIT-CLAUSES-TO-TERM-REC,SPLIT-CL-LIST" data-part-name="SPLITTER" data-part-args="HYPS-LIST,HYPS" data-part-body="CDR,SPLITTER,T,HYPS-LIST,CAR,SPLITTER1-P,HYPS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPLITTER">splitter</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a>
  (hyps hyps-list)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> hyps) nil)
    ((<a class="sym-link local-def" href="#def-splitter1-p" data-sym="SPLITTER1-P" title="(defun splitter1-p (lit hyps-list found-negation)
  (cond ((null hyps-list) found-negation)
        ((member-term lit (car hyps-list))
         (splitter1-p lit (cdr hyps-list) found-negation))
        ((member-complement-term lit (car hyps-list))
...">splitter1-p</a> (car hyps) hyps-list nil) (car hyps))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> (cdr hyps) hyps-list))))</pre>
  </div>

<div class="form-block function" id="def-concl-as-equiv-and-lhs-1" data-defines="CONCL-AS-EQUIV-AND-LHS-1" data-references="MSG,NOT,QUOTE,CDR,&,!LHS,!EQUIV,CASE-MATCH,CAR,TERM,LET,T,ENDP,COND,CONCLS,LHS,EQUIV,DEFUN" data-used-by="CONCL-AS-EQUIV-AND-LHS" data-part-name="CONCL-AS-EQUIV-AND-LHS-1" data-part-args="CONCLS,LHS,EQUIV" data-part-body="MSG,NOT,QUOTE,CDR,LHS,EQUIV,CONCL-AS-EQUIV-AND-LHS-1,&,!LHS,!EQUIV,CASE-MATCH,CAR,TERM,LET,T,CONCLS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONCL-AS-EQUIV-AND-LHS-1">concl-as-equiv-and-lhs-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-concl-as-equiv-and-lhs-1" data-sym="CONCL-AS-EQUIV-AND-LHS-1" title="(defun concl-as-equiv-and-lhs-1 (equiv lhs concls)
  (cond ((endp concls) nil)
        (t
         (let ((term (car concls)))
           (case-match term
...">concl-as-equiv-and-lhs-1</a>
  (equiv lhs concls)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> concls) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((term (car concls)))
        (<a class="sym-link system" href="../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
          ((!equiv !lhs &amp;) (<a class="sym-link local-def" href="#def-concl-as-equiv-and-lhs-1" data-sym="CONCL-AS-EQUIV-AND-LHS-1" title="(defun concl-as-equiv-and-lhs-1 (equiv lhs concls)
  (cond ((endp concls) nil)
        (t
         (let ((term (car concls)))
           (case-match term
...">concl-as-equiv-and-lhs-1</a> equiv lhs (cdr concls)))
          (('<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> !lhs) (<a class="sym-link local-def" href="#def-concl-as-equiv-and-lhs-1" data-sym="CONCL-AS-EQUIV-AND-LHS-1" title="(defun concl-as-equiv-and-lhs-1 (equiv lhs concls)
  (cond ((endp concls) nil)
        (t
         (let ((term (car concls)))
           (case-match term
...">concl-as-equiv-and-lhs-1</a> equiv lhs (cdr concls)))
          (&amp; (<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The last literal of each clause generated is expected to ~
                   be of the form (equiv lhs rhs) for the same equiv and lhs. ~
                   The equiv for the last literal of the first clause is ~x0 ~
                   and its lhs is ~x1; but the last literal of one clause ~
                   generated is:~|~%~x2"</span>
              equiv
              lhs
              term)))))))</pre>
  </div>

<div class="form-block function" id="def-concl-as-equiv-and-lhs" data-defines="CONCL-AS-EQUIV-AND-LHS" data-references="NOT,QUOTE,T,MV,COND,CDR,CONCL-AS-EQUIV-AND-LHS-1,MSG,&,LHS,!EQUIV,CASE-MATCH,CAR,TERM,LET,ASSERT$,EQUIV,CONCLS,DEFUN" data-used-by="BASH-SIM-FN" data-part-name="CONCL-AS-EQUIV-AND-LHS" data-part-args="EQUIV,CONCLS" data-part-body="NOT,QUOTE,T,MV,COND,CDR,EQUIV,CONCL-AS-EQUIV-AND-LHS-1,MSG,&,LHS,!EQUIV,CASE-MATCH,CAR,TERM,LET,CONCLS,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONCL-AS-EQUIV-AND-LHS">concl-as-equiv-and-lhs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-concl-as-equiv-and-lhs" data-sym="CONCL-AS-EQUIV-AND-LHS" title="(defun concl-as-equiv-and-lhs (concls equiv)
  (assert$ concls
           (let ((term (car concls)))
             (case-match term
                         ((!equiv lhs &amp;)
...">concl-as-equiv-and-lhs</a>
  (concls equiv)
  (<a class="sym-link system" href="../../axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> concls
    (let ((term (car concls)))
      (<a class="sym-link system" href="../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
        ((!equiv lhs &amp;) (let ((<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link local-def" href="#def-concl-as-equiv-and-lhs-1" data-sym="CONCL-AS-EQUIV-AND-LHS-1" title="(defun concl-as-equiv-and-lhs-1 (equiv lhs concls)
  (cond ((endp concls) nil)
        (t
         (let ((term (car concls)))
           (case-match term
...">concl-as-equiv-and-lhs-1</a> equiv lhs (cdr concls))))
            (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a>)) (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> equiv lhs)))))
        (('<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> lhs) (let ((<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link local-def" href="#def-concl-as-equiv-and-lhs-1" data-sym="CONCL-AS-EQUIV-AND-LHS-1" title="(defun concl-as-equiv-and-lhs-1 (equiv lhs concls)
  (cond ((endp concls) nil)
        (t
         (let ((term (car concls)))
           (case-match term
...">concl-as-equiv-and-lhs-1</a> equiv lhs (cdr concls))))
            (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a>)) (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> equiv lhs)))))
        (&amp; (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil
            (<a class="sym-link system" href="../../axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The last literal of each clause generated is expected ~
                        to be of the form (equiv lhs rhs), the but last ~
                        literal of the first clause generated is:~|~%~x0"</span>
              term)))))))</pre>
  </div>

<div class="form-block function" id="def-remove-term" data-defines="REMOVE-TERM" data-references="NEW-ATM,LET*,NVARIABLEP,AND,ATM,NOT,T,ASSERT$,FARGN,FCONS-TERM*,NEW-LIT,LET,IFF,EQUAL,QUOTE,FFN-SYMB,EQ,OR,MEMBER-EQUAL,REMOVE1-EQUAL,FQUOTEP,REMOVE1-EQ,VARIABLEP,COND,CL,LIT,DEFUN" data-used-by="SPLIT-CL-LIST" data-part-name="REMOVE-TERM" data-part-args="CL,LIT" data-part-body="NEW-ATM,LET*,NVARIABLEP,AND,ATM,NOT,T,ASSERT$,FARGN,FCONS-TERM*,NEW-LIT,LET,IFF,EQUAL,QUOTE,FFN-SYMB,EQ,OR,MEMBER-EQUAL,REMOVE1-EQUAL,FQUOTEP,CL,REMOVE1-EQ,LIT,VARIABLEP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-TERM">remove-term</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-term" data-sym="REMOVE-TERM" title="(defun remove-term (lit cl)
  (cond ((variablep lit) (remove1-eq lit cl))
        ((fquotep lit) (remove1-equal lit cl))
        ((member-equal lit cl) (remove1-equal lit cl))
        ((or (eq (ffn-symb lit) &#39;equal) (eq (ffn-symb lit) &#39;iff))
...">remove-term</a>
  (lit cl)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> lit) (<a class="sym-link system" href="../../axioms.html#def-remove1-eq" data-sym="REMOVE1-EQ">remove1-eq</a> lit cl))
    ((<a class="sym-link system" href="../../axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> lit) (<a class="sym-link system" href="../../axioms.html#def-remove1-equal" data-sym="REMOVE1-EQUAL">remove1-equal</a> lit cl))
    ((<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> lit cl) (<a class="sym-link system" href="../../axioms.html#def-remove1-equal" data-sym="REMOVE1-EQUAL">remove1-equal</a> lit cl))
    ((<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> lit) 'equal) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> lit) '<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a>)) (let ((new-lit (<a class="sym-link system" href="../../axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> lit) (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> lit <span class="number">2</span>) (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> lit <span class="number">1</span>))))
        (<a class="sym-link system" href="../../axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> new-lit cl)
          (<a class="sym-link system" href="../../axioms.html#def-remove1-equal" data-sym="REMOVE1-EQUAL">remove1-equal</a> new-lit cl))))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> lit) '<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a>)
        (let ((atm (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> lit <span class="number">1</span>)))
          (<a class="sym-link system" href="../../axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-nvariablep" data-sym="NVARIABLEP">nvariablep</a> atm)
              (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> atm))
              (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> atm) 'equal) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> atm) '<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a>)))
            (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-atm (<a class="sym-link system" href="../../axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> (<a class="sym-link system" href="../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> atm) (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> atm <span class="number">2</span>) (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> atm <span class="number">1</span>))) (new-lit (<a class="sym-link system" href="../../axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> new-atm)))
              (<a class="sym-link system" href="../../axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> new-lit cl)
                (<a class="sym-link system" href="../../axioms.html#def-remove1-equal" data-sym="REMOVE1-EQUAL">remove1-equal</a> new-lit cl)))))))))</pre>
  </div>

<div class="form-block function" id="def-split-cl-list" data-defines="SPLIT-CL-LIST" data-references="DUMB-NEGATE-LIT,MEMBER-COMPLEMENT-TERM,ASSERT$,T,REMOVE-TERM,CONS,CDR,CAR,MEMBER-TERM,REVERSE,MV,ENDP,COND,NEG-CONCLS,NEG-HYPS-LIST,POS-CONCLS,POS-HYPS-LIST,CONCLS,HYPS-LIST,SPLITTER,DEFUN" data-used-by="SPLIT-CLAUSES-TO-TERM-REC" data-part-name="SPLIT-CL-LIST" data-part-args="NEG-CONCLS,NEG-HYPS-LIST,POS-CONCLS,POS-HYPS-LIST,CONCLS,HYPS-LIST,SPLITTER" data-part-body="DUMB-NEGATE-LIT,MEMBER-COMPLEMENT-TERM,ASSERT$,T,REMOVE-TERM,CONS,CONCLS,CDR,SPLIT-CL-LIST,CAR,SPLITTER,MEMBER-TERM,NEG-CONCLS,NEG-HYPS-LIST,POS-CONCLS,POS-HYPS-LIST,REVERSE,MV,HYPS-LIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPLIT-CL-LIST">split-cl-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-split-cl-list" data-sym="SPLIT-CL-LIST" title="(defun split-cl-list
       (splitter hyps-list concls pos-hyps-list pos-concls neg-hyps-list
        neg-concls)
  (cond
   ((endp hyps-list)
...">split-cl-list</a>
  (<a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> hyps-list
    concls
    pos-hyps-list
    pos-concls
    neg-hyps-list
    neg-concls)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> hyps-list) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> pos-hyps-list)
        (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> pos-concls)
        (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> neg-hyps-list)
        (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> neg-concls)))
    ((<a class="sym-link system" href="../../rewrite.html#def-member-term" data-sym="MEMBER-TERM">member-term</a> <a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> (car hyps-list)) (<a class="sym-link local-def" href="#def-split-cl-list" data-sym="SPLIT-CL-LIST" title="(defun split-cl-list
       (splitter hyps-list concls pos-hyps-list pos-concls neg-hyps-list
        neg-concls)
  (cond
   ((endp hyps-list)
...">split-cl-list</a> <a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a>
        (cdr hyps-list)
        (cdr concls)
        (cons (<a class="sym-link local-def" href="#def-remove-term" data-sym="REMOVE-TERM" title="(defun remove-term (lit cl)
  (cond ((variablep lit) (remove1-eq lit cl))
        ((fquotep lit) (remove1-equal lit cl))
        ((member-equal lit cl) (remove1-equal lit cl))
        ((or (eq (ffn-symb lit) &#39;equal) (eq (ffn-symb lit) &#39;iff))
...">remove-term</a> <a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> (car hyps-list)) pos-hyps-list)
        (cons (car concls) pos-concls)
        neg-hyps-list
        neg-concls))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (member-complement-term <a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> (car hyps-list))
        (<a class="sym-link local-def" href="#def-split-cl-list" data-sym="SPLIT-CL-LIST" title="(defun split-cl-list
       (splitter hyps-list concls pos-hyps-list pos-concls neg-hyps-list
        neg-concls)
  (cond
   ((endp hyps-list)
...">split-cl-list</a> <a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a>
          (cdr hyps-list)
          (cdr concls)
          pos-hyps-list
          pos-concls
          (cons (<a class="sym-link local-def" href="#def-remove-term" data-sym="REMOVE-TERM" title="(defun remove-term (lit cl)
  (cond ((variablep lit) (remove1-eq lit cl))
        ((fquotep lit) (remove1-equal lit cl))
        ((member-equal lit cl) (remove1-equal lit cl))
        ((or (eq (ffn-symb lit) &#39;equal) (eq (ffn-symb lit) &#39;iff))
...">remove-term</a> (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> <a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a>) (car hyps-list))
            neg-hyps-list)
          (cons (car concls) neg-concls))))))</pre>
  </div>

<div class="form-block function" id="def-index-of-shortest-rec" data-defines="INDEX-OF-SHORTEST-REC" data-references="1+,CDR,<,IF,CAR,LENGTH,NEW-LEN,LET,T,ENDP,COND,I,ANS,LEN,LST-LST,DEFUN" data-used-by="INDEX-OF-SHORTEST" data-part-name="INDEX-OF-SHORTEST-REC" data-part-args="I,ANS,LEN,LST-LST" data-part-body="1+,I,CDR,INDEX-OF-SHORTEST-REC,LEN,<,IF,CAR,LENGTH,NEW-LEN,LET,T,ANS,LST-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INDEX-OF-SHORTEST-REC">index-of-shortest-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-index-of-shortest-rec" data-sym="INDEX-OF-SHORTEST-REC" title="(defun index-of-shortest-rec (lst-lst len ans i)
  (cond ((endp lst-lst) ans)
        (t
         (let ((new-len (length (car lst-lst))))
           (if (&lt; new-len len)
...">index-of-shortest-rec</a>
  (lst-lst <a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> ans i)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> lst-lst) ans)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((new-len (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> (car lst-lst))))
        (if (&lt; new-len <a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a>)
          (<a class="sym-link local-def" href="#def-index-of-shortest-rec" data-sym="INDEX-OF-SHORTEST-REC" title="(defun index-of-shortest-rec (lst-lst len ans i)
  (cond ((endp lst-lst) ans)
        (t
         (let ((new-len (length (car lst-lst))))
           (if (&lt; new-len len)
...">index-of-shortest-rec</a> (cdr lst-lst) new-len i (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> i))
          (<a class="sym-link local-def" href="#def-index-of-shortest-rec" data-sym="INDEX-OF-SHORTEST-REC" title="(defun index-of-shortest-rec (lst-lst len ans i)
  (cond ((endp lst-lst) ans)
        (t
         (let ((new-len (length (car lst-lst))))
           (if (&lt; new-len len)
...">index-of-shortest-rec</a> (cdr lst-lst) <a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> ans (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> i)))))))</pre>
  </div>

<div class="form-block function" id="def-index-of-shortest" data-defines="INDEX-OF-SHORTEST" data-references="CAR,LENGTH,CDR,INDEX-OF-SHORTEST-REC,TRUE-LIST-LISTP,AND,XARGS,DECLARE,LST-LST,DEFUN" data-used-by="SPLIT-CLAUSES-TO-TERM-REC" data-part-name="INDEX-OF-SHORTEST" data-part-args="LST-LST" data-part-declare="LST-LST,TRUE-LIST-LISTP,AND,XARGS,DECLARE" data-part-body="CAR,LENGTH,LST-LST,CDR,INDEX-OF-SHORTEST-REC" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INDEX-OF-SHORTEST">index-of-shortest</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-index-of-shortest" data-sym="INDEX-OF-SHORTEST" title="(defun index-of-shortest (lst-lst)
  (declare (xargs :guard (and (true-list-listp lst-lst) lst-lst)))
  (index-of-shortest-rec (cdr lst-lst) (length (car lst-lst)) 0 1))">index-of-shortest</a>
  (lst-lst)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-true-list-listp" data-sym="TRUE-LIST-LISTP">true-list-listp</a> lst-lst) lst-lst)))
  (<a class="sym-link local-def" href="#def-index-of-shortest-rec" data-sym="INDEX-OF-SHORTEST-REC" title="(defun index-of-shortest-rec (lst-lst len ans i)
  (cond ((endp lst-lst) ans)
        (t
         (let ((new-len (length (car lst-lst))))
           (if (&lt; new-len len)
...">index-of-shortest-rec</a> (cdr lst-lst)
    (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> (car lst-lst))
    <span class="number">0</span>
    <span class="number">1</span>))</pre>
  </div>

<div class="form-block function" id="def-member-equal-all" data-defines="MEMBER-EQUAL-ALL" data-references="CDR,CAR,MEMBER-EQUAL,AND,T,ENDP,COND,LST-LST,X,DEFUN" data-used-by="INTERSECTION-EQUAL-WITH-ALL" data-part-name="MEMBER-EQUAL-ALL" data-part-args="LST-LST,X" data-part-body="CDR,MEMBER-EQUAL-ALL,CAR,X,MEMBER-EQUAL,AND,T,LST-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMBER-EQUAL-ALL">member-equal-all</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-member-equal-all" data-sym="MEMBER-EQUAL-ALL" title="(defun member-equal-all (x lst-lst)
  (cond ((endp lst-lst) t)
        (t
         (and (member-equal x (car lst-lst))
              (member-equal-all x (cdr lst-lst))))))">member-equal-all</a>
  (x lst-lst)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> lst-lst) <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> x (car lst-lst))
        (<a class="sym-link local-def" href="#def-member-equal-all" data-sym="MEMBER-EQUAL-ALL" title="(defun member-equal-all (x lst-lst)
  (cond ((endp lst-lst) t)
        (t
         (and (member-equal x (car lst-lst))
              (member-equal-all x (cdr lst-lst))))))">member-equal-all</a> x (cdr lst-lst))))))</pre>
  </div>

<div class="form-block function" id="def-intersection-equal-with-all" data-defines="INTERSECTION-EQUAL-WITH-ALL" data-references="T,CDR,CONS,CAR,MEMBER-EQUAL-ALL,ENDP,COND,LST-LST,LST,DEFUN" data-used-by="SPLIT-CLAUSES-TO-TERM-REC" data-part-name="INTERSECTION-EQUAL-WITH-ALL" data-part-args="LST-LST,LST" data-part-body="T,CDR,INTERSECTION-EQUAL-WITH-ALL,CONS,LST-LST,CAR,MEMBER-EQUAL-ALL,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTERSECTION-EQUAL-WITH-ALL">intersection-equal-with-all</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-intersection-equal-with-all" data-sym="INTERSECTION-EQUAL-WITH-ALL" title="(defun intersection-equal-with-all (lst lst-lst)
  (cond ((endp lst) nil)
        ((member-equal-all (car lst) lst-lst)
         (cons (car lst) (intersection-equal-with-all (cdr lst) lst-lst)))
        (t (intersection-equal-with-all (cdr lst) lst-lst))))">intersection-equal-with-all</a>
  (lst lst-lst)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> lst) nil)
    ((<a class="sym-link local-def" href="#def-member-equal-all" data-sym="MEMBER-EQUAL-ALL" title="(defun member-equal-all (x lst-lst)
  (cond ((endp lst-lst) t)
        (t
         (and (member-equal x (car lst-lst))
              (member-equal-all x (cdr lst-lst))))))">member-equal-all</a> (car lst) lst-lst) (cons (car lst)
        (<a class="sym-link local-def" href="#def-intersection-equal-with-all" data-sym="INTERSECTION-EQUAL-WITH-ALL" title="(defun intersection-equal-with-all (lst lst-lst)
  (cond ((endp lst) nil)
        ((member-equal-all (car lst) lst-lst)
         (cons (car lst) (intersection-equal-with-all (cdr lst) lst-lst)))
        (t (intersection-equal-with-all (cdr lst) lst-lst))))">intersection-equal-with-all</a> (cdr lst) lst-lst)))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-intersection-equal-with-all" data-sym="INTERSECTION-EQUAL-WITH-ALL" title="(defun intersection-equal-with-all (lst lst-lst)
  (cond ((endp lst) nil)
        ((member-equal-all (car lst) lst-lst)
         (cons (car lst) (intersection-equal-with-all (cdr lst) lst-lst)))
        (t (intersection-equal-with-all (cdr lst) lst-lst))))">intersection-equal-with-all</a> (cdr lst) lst-lst))))</pre>
  </div>

<div class="form-block function" id="def-all-set-difference-equal" data-defines="ALL-SET-DIFFERENCE-EQUAL" data-references="CDR,CAR,SET-DIFFERENCE-EQUAL,CONS,T,ENDP,COND,LST,LST-LST,DEFUN" data-used-by="SPLIT-CLAUSES-TO-TERM-REC" data-part-name="ALL-SET-DIFFERENCE-EQUAL" data-part-args="LST,LST-LST" data-part-body="CDR,ALL-SET-DIFFERENCE-EQUAL,LST,CAR,SET-DIFFERENCE-EQUAL,CONS,T,LST-LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ALL-SET-DIFFERENCE-EQUAL">all-set-difference-equal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-all-set-difference-equal" data-sym="ALL-SET-DIFFERENCE-EQUAL" title="(defun all-set-difference-equal (lst-lst lst)
  (cond ((endp lst-lst) nil)
        (t
         (cons (set-difference-equal (car lst-lst) lst)
               (all-set-difference-equal (cdr lst-lst) lst)))))">all-set-difference-equal</a>
  (lst-lst lst)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> lst-lst) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="../../axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> (car lst-lst) lst)
        (<a class="sym-link local-def" href="#def-all-set-difference-equal" data-sym="ALL-SET-DIFFERENCE-EQUAL" title="(defun all-set-difference-equal (lst-lst lst)
  (cond ((endp lst-lst) nil)
        (t
         (cons (set-difference-equal (car lst-lst) lst)
               (all-set-difference-equal (cdr lst-lst) lst)))))">all-set-difference-equal</a> (cdr lst-lst) lst)))))</pre>
  </div>

<div class="form-block function" id="def-defopener-remove1-by-position" data-defines="DEFOPENER-REMOVE1-BY-POSITION" data-references="1-,CAR,CONS,CDR,ZP,ENDP,IF,LST,INDEX,DEFUN" data-used-by="SPLIT-CLAUSES-TO-TERM-REC" data-part-name="DEFOPENER-REMOVE1-BY-POSITION" data-part-args="LST,INDEX" data-part-body="1-,DEFOPENER-REMOVE1-BY-POSITION,CAR,CONS,CDR,INDEX,ZP,LST,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFOPENER-REMOVE1-BY-POSITION">defopener-remove1-by-position</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defopener-remove1-by-position" data-sym="DEFOPENER-REMOVE1-BY-POSITION" title="(defun defopener-remove1-by-position (index lst)
  (if (endp lst)
      nil
      (if (zp index)
          (cdr lst)
...">defopener-remove1-by-position</a>
  (index lst)
  (if (<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> lst)
    nil
    (if (<a class="sym-link system" href="../../axioms.html#def-zp" data-sym="ZP">zp</a> index)
      (cdr lst)
      (cons (car lst)
        (<a class="sym-link local-def" href="#def-defopener-remove1-by-position" data-sym="DEFOPENER-REMOVE1-BY-POSITION" title="(defun defopener-remove1-by-position (index lst)
  (if (endp lst)
      nil
      (if (zp index)
          (cdr lst)
...">defopener-remove1-by-position</a> (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> index) (cdr lst))))))</pre>
  </div>

<div class="form-block function" id="def-split-clauses-to-term-rec" data-defines="SPLIT-CLAUSES-TO-TERM-REC" data-references="DUMB-NEGATE-LIT-LST,CONJOIN,IGNORE,DECLARE,FBR,FLG,TBR,SET-DIFFERENCE-EQUAL,ALL-SET-DIFFERENCE-EQUAL,INTERSECTION-EQUAL-WITH-ALL,COMMON-HYPS,DEFOPENER-REMOVE1-BY-POSITION,CONCL,NTH,HYPS,INDEX-OF-SHORTEST,I,T,FARGN,NULL,QUOTE,FCONS-TERM*,EQUAL,IF,OR,MV,POS,FLG2,NEG,FLG1,SPLIT-CL-LIST,NEG-CONCLS,NEG-HYPS-LIST,POS-CONCLS,POS-HYPS-LIST,MV-LET,COND,CDR,CAR,SPLITTER,LET*,CONCLS,HYPS-LIST,DEFUN" data-used-by="SPLIT-CLAUSES-TO-FLG-TERM-PAIR" data-part-name="SPLIT-CLAUSES-TO-TERM-REC" data-part-args="CONCLS,HYPS-LIST" data-part-body="DUMB-NEGATE-LIT-LST,CONJOIN,IGNORE,DECLARE,FBR,FLG,TBR,SET-DIFFERENCE-EQUAL,ALL-SET-DIFFERENCE-EQUAL,INTERSECTION-EQUAL-WITH-ALL,COMMON-HYPS,DEFOPENER-REMOVE1-BY-POSITION,CONCL,NTH,HYPS,INDEX-OF-SHORTEST,I,T,FARGN,NULL,QUOTE,FCONS-TERM*,EQUAL,IF,OR,MV,POS,FLG2,SPLIT-CLAUSES-TO-TERM-REC,NEG,FLG1,CONCLS,SPLIT-CL-LIST,NEG-CONCLS,NEG-HYPS-LIST,POS-CONCLS,POS-HYPS-LIST,MV-LET,COND,CDR,HYPS-LIST,CAR,SPLITTER,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPLIT-CLAUSES-TO-TERM-REC">split-clauses-to-term-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-split-clauses-to-term-rec" data-sym="SPLIT-CLAUSES-TO-TERM-REC" title="(defun split-clauses-to-term-rec (hyps-list concls)
  (let* ((splitter (splitter (car hyps-list) (cdr hyps-list))))
    (cond
     (splitter
      (mv-let (pos-hyps-list pos-concls neg-hyps-list neg-concls)
...">split-clauses-to-term-rec</a>
  (hyps-list concls)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> (<a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> (car hyps-list) (cdr hyps-list))))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (pos-hyps-list pos-concls neg-hyps-list neg-concls)
          (<a class="sym-link local-def" href="#def-split-cl-list" data-sym="SPLIT-CL-LIST" title="(defun split-cl-list
       (splitter hyps-list concls pos-hyps-list pos-concls neg-hyps-list
        neg-concls)
  (cond
   ((endp hyps-list)
...">split-cl-list</a> <a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> hyps-list concls nil nil nil nil)
          (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg1 neg)
            (<a class="sym-link local-def" href="#def-split-clauses-to-term-rec" data-sym="SPLIT-CLAUSES-TO-TERM-REC" title="(defun split-clauses-to-term-rec (hyps-list concls)
  (let* ((splitter (splitter (car hyps-list) (cdr hyps-list))))
    (cond
     (splitter
      (mv-let (pos-hyps-list pos-concls neg-hyps-list neg-concls)
...">split-clauses-to-term-rec</a> neg-hyps-list neg-concls)
            (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg2 pos)
              (<a class="sym-link local-def" href="#def-split-clauses-to-term-rec" data-sym="SPLIT-CLAUSES-TO-TERM-REC" title="(defun split-clauses-to-term-rec (hyps-list concls)
  (let* ((splitter (splitter (car hyps-list) (cdr hyps-list))))
    (cond
     (splitter
      (mv-let (pos-hyps-list pos-concls neg-hyps-list neg-concls)
...">split-clauses-to-term-rec</a> pos-hyps-list pos-concls)
              (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> flg1 flg2)
                (if (equal neg pos)
                  pos
                  (<a class="sym-link system" href="../../axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> 'if <a class="sym-link local-def" href="#def-splitter" data-sym="SPLITTER" title="(defun splitter (hyps hyps-list)
  (cond ((endp hyps) nil) ((splitter1-p (car hyps) hyps-list nil) (car hyps))
        (t (splitter (cdr hyps) hyps-list))))">splitter</a> neg pos)))))))
      ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> (cdr concls)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> (car concls) <span class="number">2</span>)))
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
          (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((i (<a class="sym-link local-def" href="#def-index-of-shortest" data-sym="INDEX-OF-SHORTEST" title="(defun index-of-shortest (lst-lst)
  (declare (xargs :guard (and (true-list-listp lst-lst) lst-lst)))
  (index-of-shortest-rec (cdr lst-lst) (length (car lst-lst)) 0 1))">index-of-shortest</a> hyps-list)) (hyps (<a class="sym-link system" href="../../axioms.html#def-nth" data-sym="NTH">nth</a> i hyps-list))
              (concl (<a class="sym-link system" href="../../axioms.html#def-nth" data-sym="NTH">nth</a> i concls))
              (hyps-list (<a class="sym-link local-def" href="#def-defopener-remove1-by-position" data-sym="DEFOPENER-REMOVE1-BY-POSITION" title="(defun defopener-remove1-by-position (index lst)
  (if (endp lst)
      nil
      (if (zp index)
          (cdr lst)
...">defopener-remove1-by-position</a> i hyps-list))
              (concls (<a class="sym-link local-def" href="#def-defopener-remove1-by-position" data-sym="DEFOPENER-REMOVE1-BY-POSITION" title="(defun defopener-remove1-by-position (index lst)
  (if (endp lst)
      nil
      (if (zp index)
          (cdr lst)
...">defopener-remove1-by-position</a> i concls))
              (common-hyps (<a class="sym-link local-def" href="#def-intersection-equal-with-all" data-sym="INTERSECTION-EQUAL-WITH-ALL" title="(defun intersection-equal-with-all (lst lst-lst)
  (cond ((endp lst) nil)
        ((member-equal-all (car lst) lst-lst)
         (cons (car lst) (intersection-equal-with-all (cdr lst) lst-lst)))
        (t (intersection-equal-with-all (cdr lst) lst-lst))))">intersection-equal-with-all</a> hyps hyps-list))
              (hyps-list (<a class="sym-link local-def" href="#def-all-set-difference-equal" data-sym="ALL-SET-DIFFERENCE-EQUAL" title="(defun all-set-difference-equal (lst-lst lst)
  (cond ((endp lst-lst) nil)
        (t
         (cons (set-difference-equal (car lst-lst) lst)
               (all-set-difference-equal (cdr lst-lst) lst)))))">all-set-difference-equal</a> hyps-list common-hyps))
              (hyps (<a class="sym-link system" href="../../axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> hyps common-hyps))
              (tbr (<a class="sym-link system" href="../../axioms.html#def-fargn" data-sym="FARGN">fargn</a> concl <span class="number">2</span>)))
            (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg fbr)
              (<a class="sym-link local-def" href="#def-split-clauses-to-term-rec" data-sym="SPLIT-CLAUSES-TO-TERM-REC" title="(defun split-clauses-to-term-rec (hyps-list concls)
  (let* ((splitter (splitter (car hyps-list) (cdr hyps-list))))
    (cond
     (splitter
      (mv-let (pos-hyps-list pos-concls neg-hyps-list neg-concls)
...">split-clauses-to-term-rec</a> hyps-list concls)
              (declare (ignore flg))
              (if (equal tbr fbr)
                tbr
                (<a class="sym-link system" href="../../axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> 'if
                  (<a class="sym-link system" href="../../axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> (<a class="sym-link system" href="../../basis-b.html#def-dumb-negate-lit-lst" data-sym="DUMB-NEGATE-LIT-LST">dumb-negate-lit-lst</a> hyps))
                  tbr
                  fbr)))))))))</pre>
  </div>

<div class="form-block function" id="def-split-clauses-to-flg-term-pair" data-defines="SPLIT-CLAUSES-TO-FLG-TERM-PAIR" data-references="CONS,SPLIT-CLAUSES-TO-TERM-REC,TERM,FLG,MV-LET,CONCLS,HYPS-LIST,DEFUN" data-used-by="BASH-SIM-FN" data-part-name="SPLIT-CLAUSES-TO-FLG-TERM-PAIR" data-part-args="CONCLS,HYPS-LIST" data-part-body="CONS,CONCLS,HYPS-LIST,SPLIT-CLAUSES-TO-TERM-REC,TERM,FLG,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPLIT-CLAUSES-TO-FLG-TERM-PAIR">split-clauses-to-flg-term-pair</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-split-clauses-to-flg-term-pair" data-sym="SPLIT-CLAUSES-TO-FLG-TERM-PAIR" title="(defun split-clauses-to-flg-term-pair (hyps-list concls)
  (mv-let (flg term) (split-clauses-to-term-rec hyps-list concls)
          (cons flg term)))">split-clauses-to-flg-term-pair</a>
  (hyps-list concls)
  (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg term)
    (<a class="sym-link local-def" href="#def-split-clauses-to-term-rec" data-sym="SPLIT-CLAUSES-TO-TERM-REC" title="(defun split-clauses-to-term-rec (hyps-list concls)
  (let* ((splitter (splitter (car hyps-list) (cdr hyps-list))))
    (cond
     (splitter
      (mv-let (pos-hyps-list pos-concls neg-hyps-list neg-concls)
...">split-clauses-to-term-rec</a> hyps-list concls)
    (cons flg term)))</pre>
  </div>

<div class="form-block function" id="def-split-out-concls" data-defines="SPLIT-OUT-CONCLS" data-references="LAST,CAR,BUTLAST,CONS,CDR,T,REVERSE,MV,ENDP,COND,CONCLS,HYPS-LIST,CL-LIST,DEFUN" data-used-by="BASH-SIM-FN" data-part-name="SPLIT-OUT-CONCLS" data-part-args="CONCLS,HYPS-LIST,CL-LIST" data-part-body="LAST,CAR,BUTLAST,CONS,CDR,SPLIT-OUT-CONCLS,T,CONCLS,HYPS-LIST,REVERSE,MV,CL-LIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPLIT-OUT-CONCLS">split-out-concls</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-split-out-concls" data-sym="SPLIT-OUT-CONCLS" title="(defun split-out-concls (cl-list hyps-list concls)
  (cond ((endp cl-list) (mv (reverse hyps-list) (reverse concls)))
        (t
         (split-out-concls (cdr cl-list)
          (cons (butlast (car cl-list) 1) hyps-list)">split-out-concls</a>
  (cl-list hyps-list concls)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> cl-list) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> hyps-list) (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> concls)))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-split-out-concls" data-sym="SPLIT-OUT-CONCLS" title="(defun split-out-concls (cl-list hyps-list concls)
  (cond ((endp cl-list) (mv (reverse hyps-list) (reverse concls)))
        (t
         (split-out-concls (cdr cl-list)
          (cons (butlast (car cl-list) 1) hyps-list)">split-out-concls</a> (cdr cl-list)
        (cons (<a class="sym-link system" href="../../axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> (car cl-list) <span class="number">1</span>) hyps-list)
        (cons (car (<a class="sym-link system" href="../../axioms.html#def-last" data-sym="LAST">last</a> (car cl-list))) concls)))))</pre>
  </div>

<div class="form-block function" id="def-flatten-ifs-to-cond" data-defines="FLATTEN-IFS-TO-COND" data-references="&,TBR,QUASIQUOTE,FBR,Z,Y,X,TST,IF,QUOTE,CASE-MATCH,TERM,DEFUN" data-used-by="DEFOPENER-BODIES" data-part-name="FLATTEN-IFS-TO-COND" data-part-args="TERM" data-part-body="&,TBR,QUASIQUOTE,FLATTEN-IFS-TO-COND,FBR,Z,Y,X,TST,IF,QUOTE,TERM,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLATTEN-IFS-TO-COND">flatten-ifs-to-cond</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flatten-ifs-to-cond" data-sym="FLATTEN-IFS-TO-COND" title="(defun flatten-ifs-to-cond (term)
  (case-match term
              ((&#39;if tst (&#39;if x y z) fbr)
               (flatten-ifs-to-cond
                `(if ,(conjoin2 tst x)
...">flatten-ifs-to-cond</a>
  (term)
  (<a class="sym-link system" href="../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
    (('if tst ('if x y z) fbr) (<a class="sym-link local-def" href="#def-flatten-ifs-to-cond" data-sym="FLATTEN-IFS-TO-COND" title="(defun flatten-ifs-to-cond (term)
  (case-match term
              ((&#39;if tst (&#39;if x y z) fbr)
               (flatten-ifs-to-cond
                `(if ,(conjoin2 tst x)
...">flatten-ifs-to-cond</a> `(if ,(CONJOIN2 TST X)
          ,Y
          (if ,(CONJOIN2 TST (DUMB-NEGATE-LIT X))
            ,Z
            ,FBR))))
    (('if tst tbr fbr) `(if ,(CONJOIN (FLATTEN-ANDS-IN-LIT TST))
        ,TBR
        ,(FLATTEN-IFS-TO-COND FBR)))
    (&amp; term)))</pre>
  </div>

<div class="form-block function" id="def-bash-sim-fn" data-defines="BASH-SIM-FN" data-references="SOFT,ER,T,SPLIT-CLAUSES-TO-FLG-TERM-PAIR,VALUE,COND,CONCL-AS-EQUIV-AND-LHS,LHS,SPLIT-OUT-CONCLS,CONCLS,HYPS-LIST,MV-LET,SIMPLIFY-WITH-PROVER,WITH-CTX-SUMMARIZED,CL-LIST,ER-LET*,STATE,CTX,EQUIV,HINTS,FORM,DEFUN" data-used-by="DEFOPENER-BODIES" data-part-name="BASH-SIM-FN" data-part-args="STATE,CTX,EQUIV,HINTS,FORM" data-part-body="SOFT,ER,T,SPLIT-CLAUSES-TO-FLG-TERM-PAIR,VALUE,COND,CONCL-AS-EQUIV-AND-LHS,LHS,EQUIV,SPLIT-OUT-CONCLS,CONCLS,HYPS-LIST,MV-LET,STATE,HINTS,FORM,SIMPLIFY-WITH-PROVER,CTX,WITH-CTX-SUMMARIZED,CL-LIST,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BASH-SIM-FN">bash-sim-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-bash-sim-fn" data-sym="BASH-SIM-FN" title="(defun bash-sim-fn (form hints equiv ctx state)
  (er-let*
   ((cl-list
     (with-ctx-summarized ctx (simplify-with-prover form hints ctx state))))
   (mv-let (hyps-list concls) (split-out-concls cl-list nil nil)
...">bash-sim-fn</a>
  (form hints equiv ctx state)
  (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((cl-list (<a class="sym-link system" href="../../history-management.html#def-with-ctx-summarized" data-sym="WITH-CTX-SUMMARIZED">with-ctx-summarized</a> ctx
         (<a class="sym-link external" href="bash.html#def-simplify-with-prover" data-sym="SIMPLIFY-WITH-PROVER">simplify-with-prover</a> form hints ctx state))))
    (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (hyps-list concls)
      (<a class="sym-link local-def" href="#def-split-out-concls" data-sym="SPLIT-OUT-CONCLS" title="(defun split-out-concls (cl-list hyps-list concls)
  (cond ((endp cl-list) (mv (reverse hyps-list) (reverse concls)))
        (t
         (split-out-concls (cdr cl-list)
          (cons (butlast (car cl-list) 1) hyps-list)">split-out-concls</a> cl-list nil nil)
      (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (equiv lhs)
        (<a class="sym-link local-def" href="#def-concl-as-equiv-and-lhs" data-sym="CONCL-AS-EQUIV-AND-LHS" title="(defun concl-as-equiv-and-lhs (concls equiv)
  (assert$ concls
           (let ((term (car concls)))
             (case-match term
                         ((!equiv lhs &amp;)
...">concl-as-equiv-and-lhs</a> concls equiv)
        (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> (equiv (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-split-clauses-to-flg-term-pair" data-sym="SPLIT-CLAUSES-TO-FLG-TERM-PAIR" title="(defun split-clauses-to-flg-term-pair (hyps-list concls)
  (mv-let (flg term) (split-clauses-to-term-rec hyps-list concls)
          (cons flg term)))">split-clauses-to-flg-term-pair</a> hyps-list concls)))
          (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"~@0"</span> lhs)))))))</pre>
  </div>

<div class="form-block function" id="def-defopener-bodies" data-defines="DEFOPENER-BODIES" data-references="VALUE,RHS,UNTRANSLATE,HIDDEN-RHS,FLATTEN-IFS-TO-COND,RHS1,CDR,RHS0,CAR,FLG,BASH-SIM-FN,FLG-RHS0-PAIR,ER-LET*,W,WRLD,IMPLIES,QUASIQUOTE,IF,FORM,HIDE,LIST,FORM0,EQUAL,QUOTE,OR,LET*,STATE,CTX,FLATTEN,HINTS,EQUIV,HYP,CALL,DEFUN" data-used-by="DEFOPENER" data-part-name="DEFOPENER-BODIES" data-part-args="STATE,CTX,FLATTEN,HINTS,EQUIV,HYP,CALL" data-part-body="VALUE,RHS,UNTRANSLATE,HIDDEN-RHS,FLATTEN-IFS-TO-COND,FLATTEN,RHS1,CDR,RHS0,CAR,FLG,CTX,HINTS,BASH-SIM-FN,FLG-RHS0-PAIR,ER-LET*,STATE,W,WRLD,IMPLIES,QUASIQUOTE,HYP,IF,FORM,CALL,HIDE,LIST,FORM0,EQUAL,QUOTE,OR,EQUIV,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFOPENER-BODIES">defopener-bodies</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defopener-bodies" data-sym="DEFOPENER-BODIES" title="(defun defopener-bodies (call hyp equiv hints flatten ctx state)
  (let* ((equiv (or equiv &#39;equal))
         (form0 (list equiv (list &#39;hide call) call))
         (form
          (if hyp
...">defopener-bodies</a>
  (call hyp equiv hints flatten ctx state)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((equiv (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> equiv 'equal)) (form0 (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> equiv (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> call) call))
      (form (if hyp
          `(<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> ,HYP ,FORM0)
          form0))
      (wrld (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state)))
    (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((flg-rhs0-pair (<a class="sym-link local-def" href="#def-bash-sim-fn" data-sym="BASH-SIM-FN" title="(defun bash-sim-fn (form hints equiv ctx state)
  (er-let*
   ((cl-list
     (with-ctx-summarized ctx (simplify-with-prover form hints ctx state))))
   (mv-let (hyps-list concls) (split-out-concls cl-list nil nil)
...">bash-sim-fn</a> form hints equiv ctx state)))
      (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((flg (car flg-rhs0-pair)) (rhs0 (cdr flg-rhs0-pair))
          (rhs1 (if flatten
              (<a class="sym-link local-def" href="#def-flatten-ifs-to-cond" data-sym="FLATTEN-IFS-TO-COND" title="(defun flatten-ifs-to-cond (term)
  (case-match term
              ((&#39;if tst (&#39;if x y z) fbr)
               (flatten-ifs-to-cond
                `(if ,(conjoin2 tst x)
...">flatten-ifs-to-cond</a> rhs0)
              rhs0))
          (hidden-rhs (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-hide" data-sym="HIDE">hide</a> (untranslate rhs1 nil wrld)))
          (rhs (untranslate rhs1 nil wrld)))
        (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> (if hyp
            `((<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> ,HYP (,EQUIV ,CALL ,HIDDEN-RHS)) (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> ,HYP (,EQUIV ,CALL ,RHS))
              ,HIDDEN-RHS . ,FLG)
            `((,EQUIV ,CALL ,HIDDEN-RHS) (,EQUIV ,CALL ,RHS)
              ,HIDDEN-RHS . ,FLG)))))))</pre>
  </div>

<div class="form-block function" id="def-defopener-hint-def" data-defines="DEFOPENER-HINT-DEF" data-references="LAST,CAR,TERM,LET,AND,IGNORE,DECLARE,STABLE-UNDER-SIMPLIFICATIONP,WORLD,CLAUSE,ID,DEFOPENER-HINT,QUASIQUOTE,FLATTEN-FAILED-FLG,DEFUN" data-part-name="DEFOPENER-HINT-DEF" data-part-args="FLATTEN-FAILED-FLG" data-part-body="LAST,CAR,TERM,LET,AND,IGNORE,DECLARE,STABLE-UNDER-SIMPLIFICATIONP,WORLD,CLAUSE,ID,DEFOPENER-HINT,DEFUN,QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFOPENER-HINT-DEF">defopener-hint-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defopener-hint-def" data-sym="DEFOPENER-HINT-DEF" title="(defun defopener-hint-def (flatten-failed-flg)
  `(defun defopener-hint (id clause world stable-under-simplificationp)
     (declare (ignore id world))
     (and stable-under-simplificationp
          (let ((term (car (last clause))))
...">defopener-hint-def</a>
  (flatten-failed-flg)
  `(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> defopener-hint
    (id clause world stable-under-simplificationp)
    (declare (ignore id world))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
      (let ((term (car (<a class="sym-link system" href="../../axioms.html#def-last" data-sym="LAST">last</a> clause))))
        ,(COND
  (FLATTEN-FAILED-FLG
   &#39;(CASE-MATCH TERM ((&amp; &amp; (&#39;HIDE X)) (LIST :EXPAND (LIST (LIST &#39;HIDE X))))
                ((&amp; (&#39;HIDE X) &amp;) (LIST :EXPAND (LIST (LIST &#39;HIDE X))))
                ((&#39;NOT (&#39;HIDE X)) (LIST :EXPAND (LIST (LIST &#39;HIDE X))))
                (&amp; NIL)))
  (T
   &#39;(CASE-MATCH TERM
                ((&amp; &amp; (&#39;HIDE X))
                 (LIST :EXPAND (LIST (LIST &#39;HIDE X)) :IN-THEORY
                       &#39;(THEORY &#39;MINIMAL-THEORY)))
                ((&amp; (&#39;HIDE X) &amp;)
                 (LIST :EXPAND (LIST (LIST &#39;HIDE X)) :IN-THEORY
                       &#39;(THEORY &#39;MINIMAL-THEORY)))
                ((&#39;NOT (&#39;HIDE X))
                 (LIST :EXPAND (LIST (LIST &#39;HIDE X)) :IN-THEORY
                       &#39;(THEORY &#39;MINIMAL-THEORY)))
                (&amp; NIL))))))))</pre>
  </div>

<div class="form-block macro" id="def-chk-name" data-defines="CHK-NAME" data-references="LD,WITH-OUTPUT,MV,IGNORE,DECLARE,SOFT,ER,VAL,ERP,MV-LET,T,VALUE-TRIPLE,VALUE,EQUAL,IF,STATE,W,DEFOPENER-TABLE,TABLE-ALIST,ASSOC-EQ,CDR,TABLE-VAL,MAKE-EVENT,QUASIQUOTE,DEFLABEL,QUOTE,LIST,DEFLABEL-FORM,LET,EV-FORM,CTX,NAME,DEFMACRO" data-used-by="DEFOPENER" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-NAME">chk-name</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-chk-name" data-sym="CHK-NAME" title="(defmacro chk-name (name ctx ev-form)
  (let ((deflabel-form (list &#39;deflabel name)))
    `(make-event
      (let ((table-val
             (cdr (assoc-eq &#39;,name (table-alist &#39;defopener-table (w state))))))
...">chk-name</a>
  (name ctx ev-form)
  (let ((deflabel-form (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a> name)))
    `(<a class="sym-link system" href="../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (let ((table-val (cdr (<a class="sym-link system" href="../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> ',NAME (<a class="sym-link system" href="../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'defopener-table (<a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> state))))))
        (if table-val
          (if (equal table-val ',EV-FORM)
            (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> '(<a class="sym-link system" href="../../axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
            (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
              (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                ',CTX
                <span class="string">"The name ~x0 was applied to an earlier, different ~
                           defopener event:~|~X12"</span>
                ',NAME
                table-val
                nil)
              (declare (ignore erp val))
              (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Name check failed (see error message above)."</span>
                nil
                state)))
          (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
            (<a class="sym-link system" href="../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:off</span> <span class="keyword">:all</span> (ld '(,DEFLABEL-FORM)
                <span class="keyword">:ld-error-action</span> <span class="keyword">:error</span> <span class="keyword">:ld-user-stobjs-modified-warning</span> <span class="keyword">:same</span>))
            (declare (ignore val))
            (if erp
              (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
                (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> soft
                  ',CTX
                  <span class="string">"The name ~x0 appears not to be new, as the form ~
                            ~x1 failed."</span>
                  ',NAME
                  ',DEFLABEL-FORM)
                (declare (ignore erp val))
                (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Name check failed (see error message above)."</span>
                  nil
                  state))
              (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> '(<a class="sym-link system" href="../../axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> nil <span class="keyword">:on-skip-proofs</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)))))))))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-defopener" data-sym="DEFOPENER" title="(defmacro defopener
          (&amp;whole ev-form name call
           &amp;key hyp equiv hints debug (flatten &#39;t) (evisc-tuple &#39;nil))
  (let* ((ctx (cons &#39;defopener name))
         (form
...">defopener</a>
  <span class="keyword">:parents</span> (miscellaneous)
  <span class="keyword">:short</span> <span class="string">"Create a defthm equating a call with its simplification."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;For a related tool, see @(see defopen).&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

@({
  (include-book &quot;misc/defopener&quot; :dir :system)
  (defopener append-open
    (append x y)
    :hyp (and (true-listp x) (true-listp (cdr x)))
    :hints ((&quot;Goal&quot; :expand ((append x y)))))
})

&lt;p&gt;The above example creates the following theorem.&lt;/p&gt;

@({
  (DEFTHM APPEND-OPEN
    (IMPLIES (AND (TRUE-LISTP X)
                  (TRUE-LISTP (CDR X)))
             (EQUAL (APPEND X Y)
                    (IF (NOT X)
                        Y
                        (CONS (CAR X) (APPEND (CDR X) Y))))))
})

&lt;p&gt;In general, the form&lt;/p&gt;

@({
  (defopener name
    term
    :hyp hyp
    ...)
})

&lt;p&gt;attempts to create a theorem of the form&lt;/p&gt;

@({
  (DEFTHM NAME
    (IMPLIES HYP
             (EQUAL TERM rhs)))
})

&lt;p&gt;where @(&#39;rhs&#39;) is generated by ACL2&#39;s simplification routines.  If @(&#39;:hyp&#39;) is
omitted, then of course the resulting form has the expected shape:&lt;/p&gt;

@({
  (DEFTHM NAME
    (EQUAL TERM rhs)).
})

&lt;p&gt;If an equivalence relation symbol is supplied for @(&#39;:equiv&#39;), then
@(&#39;EQUAL&#39;) above will be replaced by that symbol.&lt;/p&gt;

&lt;p&gt;The output can be rather verbose.  Once @(&#39;rhs&#39;) as above has been produced,
ACL2 will print out the theorem to be proved before starting its proof,
indicated as follows.&lt;/p&gt;

@({
  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

  &gt;&gt;&gt; STARTING PROOF OF:

  (DEFTHM NAME
          ...)

  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
})

&lt;p&gt;To abbreviate the above message, you can specify an @(tsee
evisc-tuple) using the @(&#39;:evisc-tuple&#39;) keyword of @(&#39;defopener&#39;),
which is @(&#39;nil&#39;) by default.&lt;/p&gt;

&lt;p&gt;The simplification that takes place uses a prover interface that is also
used in the distributed book @(&#39;misc/bash&#39;), in which the following hint is
automatically generated for @(&#39;&quot;Goal&quot;&#39;), though they can be overridden if
explicitly supplied in the @(&#39;defopener&#39;) form for @(&#39;&quot;Goal&quot;&#39;):&lt;/p&gt;

@({
  :do-not (generalize eliminate-destructors fertilize eliminate-irrelevance)
})

&lt;p&gt;A suitable @(&#39;:do-not-induct&#39;) hint is also generated, so that induction is
avoided during the simplification process.  This too can be overridden.&lt;/p&gt;

&lt;p&gt;If you only want to see the generated theorem, and not the attempted proof
of it, use @(&#39;:debug t&#39;).  Alternatively, you may want to run without that
addition and then submit @(&#39;:&#39;)@(see pcb!) to grab the generated @(see
encapsulate) form to put into the book that you are developing.  Otherwise, the
@(&#39;defopener&#39;) form will call the ACL2 simplifier twice each time you certify
your book: once to generate the theorem, and once to prove it.&lt;/p&gt;

&lt;p&gt;The @(&#39;:flatten&#39;) keyword is @(&#39;t&#39;) by default, and causes the result to be
of the form @(&#39;(cond (c1 v1) (c2 v2) ... (ck vk) (t v))&#39;).  That result is
actually produced from a more primitive tree-based result, of the form @(&#39;(if c
v1 v2)&#39;), where @(&#39;v1&#39;) and @(&#39;v2&#39;) can themselves be calls of @(&#39;if&#39;).  If you
prefer the more primitive form, use @(&#39;:flatten nil&#39;).&lt;/p&gt;

&lt;p&gt;None of the arguments of this macro is evaluated.&lt;/p&gt;

&lt;p&gt;This tool is heuristic in nature, and failures are possible.  The error
message might provide debugging clues.  Let us consider an example that
actually occurred that generated an error message of the following form.&lt;/p&gt;

@({
ACL2 Error in (DEFOPENER MY-DEFOPENER-RULE ...):  The last literal
of each clause generated is expected to be of the form (equiv lhs rhs)
for the same equiv and lhs. The equiv for the last literal of the first
clause is EQUAL and its lhs is (HIDE (FOO X Y)) but the last literal of
one clause generated is:

(MY-PREDICATE (HIDE (FOO X Y)))
})

&lt;p&gt;The message suggests that each goal (i.e., clause) after the first should be
of the form @(&#39;(implies ... (equal (HIDE (FOO X Y)) ...))&#39;) or simply
@(&#39;(equal (HIDE (FOO X Y)) ...)&#39;); but in this case, one goal was actually of
the form @(&#39;(IMPLIES ... (MY-PREDICATE (HIDE (FOO X Y))))&#39;).  After first
executing @(&#39;(set-gag-mode nil)&#39;) and then running @(&#39;defopener&#39;) again, the
proof log helped to discover a rewrite rule of the following form.&lt;/p&gt;

@({
(equal (equal (f1 a)
              b)
       (and (my-predicate b)
            ...))
})

&lt;p&gt;ACL2 was able to match the term @(&#39;(EQUAL (HIDE (FOO X Y)) (F1 A)&#39;)) with
the left-hand side of the above rule, thus rewriting it to a conjunction whose
first conjunct was @(&#39;(MY-PREDICATE (HIDE (FOO X Y)))&#39;).  The error disappeared
after that rule was disabled.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defopener" data-defines="DEFOPENER" data-references="MV,VAL,ERP,MV-LET,MAKE-EVENT,DEFOPENER-HINT,ADD-DEFAULT-HINTS,LOCAL,ENCAPSULATE,WARNING$,PROOFS-CO,FMS,PPROGN,DEFOPENER-TABLE,TABLE,TABLE-EV,MINIMAL-THEORY,THEORY,APPEND,DEFTHM-FORM,DEFTHM-FORM2,DEFOPENER-TEMP,DEFTHM,LIST,DEFTHM-FORM1,CDDDR,FLATTEN-FAILED-FLG,CADDR,HIDDEN-RHS,CADR,UNHIDDEN-BODY,CAR,HIDDEN-BODY,STATE,DEFOPENER-BODIES,_DEFOPENER-BODIES,VALUE-TRIPLE,VALUE,IF,CHK-NAME,NAME-CHK,ER-LET*,QUASIQUOTE,FORM,CONS,CTX,LET*,EVISC-TUPLE,T,QUOTE,FLATTEN,DEBUG,HINTS,EQUIV,HYP,&KEY,CALL,NAME,EV-FORM,&WHOLE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFOPENER">defopener</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defopener" data-sym="DEFOPENER" title="(defmacro defopener
          (&amp;whole ev-form name call
           &amp;key hyp equiv hints debug (flatten &#39;t) (evisc-tuple &#39;nil))
  (let* ((ctx (cons &#39;defopener name))
         (form
...">defopener</a>
  (&amp;whole ev-form
    name
    call
    &amp;key
    hyp
    equiv
    hints
    debug
    (flatten '<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="../../basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> 'nil))
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ctx (cons '<a class="sym-link local-def" href="#def-defopener" data-sym="DEFOPENER" title="(defmacro defopener
          (&amp;whole ev-form name call
           &amp;key hyp equiv hints debug (flatten &#39;t) (evisc-tuple &#39;nil))
  (let* ((ctx (cons &#39;defopener name))
         (form
...">defopener</a> name)) (form `(<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((name-chk (<a class="sym-link local-def" href="#def-chk-name" data-sym="CHK-NAME" title="(defmacro chk-name (name ctx ev-form)
  (let ((deflabel-form (list &#39;deflabel name)))
    `(make-event
      (let ((table-val
             (cdr (assoc-eq &#39;,name (table-alist &#39;defopener-table (w state))))))
...">chk-name</a> ,NAME ,CTX ,EV-FORM)))
          (if name-chk
            (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> '(<a class="sym-link system" href="../../axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> <span class="keyword">:redundant</span>))
            (<a class="sym-link system" href="../../basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((_defopener-bodies (<a class="sym-link local-def" href="#def-defopener-bodies" data-sym="DEFOPENER-BODIES" title="(defun defopener-bodies (call hyp equiv hints flatten ctx state)
  (let* ((equiv (or equiv &#39;equal))
         (form0 (list equiv (list &#39;hide call) call))
         (form
          (if hyp
...">defopener-bodies</a> ',CALL
                   ',HYP
                   ',EQUIV
                   ',HINTS
                   ',FLATTEN
                   ',CTX
                   state)))
              (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((hidden-body (car _defopener-bodies)) (unhidden-body (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> _defopener-bodies))
                  (hidden-rhs (<a class="sym-link system" href="../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> _defopener-bodies))
                  (flatten-failed-flg (<a class="sym-link system" href="../../axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> _defopener-bodies))
                  (defthm-form1 (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a>
                      'defopener-temp
                      hidden-body
                      ,@(AND HINTS `(:HINTS &#39;,HINTS))
                      <span class="keyword">:rule-classes</span> nil))
                  (defthm-form2 (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ',NAME unhidden-body))
                  (defthm-form (<a class="sym-link system" href="../../axioms.html#def-append" data-sym="APPEND">append</a> defthm-form2
                      (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:hints</span> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <span class="string">"Goal"</span>
                            <span class="keyword">:use</span> 'defopener-temp
                            <span class="keyword">:expand</span> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> hidden-rhs)
                            <span class="keyword">:in-theory</span> '(theory 'minimal-theory))))))
                  (table-ev '(<a class="sym-link system" href="../../axioms.html#def-table" data-sym="TABLE">table</a> defopener-table ',NAME ',EV-FORM)))
                (<a class="sym-link system" href="../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@~|~%"</span>
                    nil
                    (<a class="sym-link system" href="../../basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
                    state
                    ,EVISC-TUPLE)
                  (if flatten-failed-flg
                    (<a class="sym-link system" href="../../axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ',CTX
                      nil
                      <span class="string">"An incomplete case split for ~
                                      distinguishing hypothesis lists may ~
                                      lead to failure."</span>)
                    state)
                  ,(IF DEBUG
     &#39;STATE
     `(FMS &quot;&gt;&gt;&gt; STARTING PROOF ~
                                 OF:~|~%~x0~|~%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@~|~%&quot;
           (LIST (CONS #\0 DEFTHM-FORM2)) (PROOFS-CO STATE) STATE ,EVISC-TUPLE))
                  (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> `(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
                      ,TABLE-EV
                      (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
                          (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> ,(DEFOPENER-HINT-DEF FLATTEN-FAILED-FLG))
                          (<a class="sym-link system" href="../../axioms.html#def-add-default-hints" data-sym="ADD-DEFAULT-HINTS">add-default-hints</a> '(defopener-hint))
                          ,DEFTHM-FORM1))
                      ,DEFTHM-FORM)))))))))
    (if debug
      form
      `(<a class="sym-link system" href="../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          ,FORM
          (if erp
            (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Defopener failed.  Error messages above should ~
                         explain."</span>
              nil
              state)
            (<a class="sym-link system" href="../../axioms.html#def-value" data-sym="VALUE">value</a> val)))))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>