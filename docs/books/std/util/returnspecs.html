<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>returnspecs - ACL2 Book</title>
  <meta property="name" content="returnspecs">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">returnspecs</h1>
    <div class="path"><a href="returnspecs.lisp" class="source-link">books/std/util/returnspecs</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"STD"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="da-base.html" title="Open da-base">"da-base"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="look-up.html" title="Open look-up">"look-up"</a>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc returns-specifiers
  <span class="keyword">:parents</span> (std/util define)
  <span class="keyword">:short</span> <span class="string">"A concise way to name, document, and prove basic type-like theorems
about a function&#39;s return values."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The @(see define) macro and some other @(see std/util) macros
support a @(&#39;:returns&#39;) option.  This option provides a concise way to name,
document, and prove basic type-like theorems about the return values of your
functions.  Named return values also allow your function to be used with the
special &lt;see topic=&#39;@(url acl2::patbind-ret)&#39;&gt;ret&lt;/see&gt; binder for @(see
b*).&lt;/p&gt;

&lt;p&gt;The general form is:&lt;/p&gt;

@({
    :returns return-spec       ;; for single-value functions
 or :returns (mv return-spec*) ;; for multiple-valued functions
})

&lt;p&gt;There should be exactly one @(&#39;return-spec&#39;) per return value.  Each
return-spec has the form:&lt;/p&gt;

@({
     name               ;; just for naming return values
  or (name [option]*)   ;; for naming, documenting, and proving theorems
})

&lt;p&gt;where @(&#39;name&#39;) is a symbol and the options can come in any order.  To
distinguish between the two forms of @(&#39;:returns&#39;), it is not legal to use
@(&#39;mv&#39;) as the name of a return value.  The options are:&lt;/p&gt;

&lt;dl&gt;

&lt;dt&gt;@(&#39;&lt;xdoc&gt;&#39;), any string literal&lt;/dt&gt;

&lt;dd&gt;You can document each return value with a string literal.  The string may
make use of @(see xdoc::markup) and @(see xdoc::preprocessor) directives.
Typically these descriptions should be short and not include
document-structuring tags like @(&#39;&lt;p&gt;&#39;), @(&#39;&lt;ul&gt;&#39;), @(&#39;&lt;h3&gt;&#39;), and so forth.
See the section on xdoc integration, below, for more details.&lt;/dd&gt;

&lt;dt&gt;@(&#39;&lt;return-type&gt;&#39;), a symbol or term&lt;/dt&gt;

&lt;dd&gt;When provided, the return type is used to generate a basic type-like
theorems about the return values.  A default hint is provided if no @(&#39;:hints&#39;)
keyword is present; see the discussion of @(&#39;:hints&#39;) below.&lt;/dd&gt;

&lt;dd&gt;&lt;b&gt;Important Note&lt;/b&gt; in the multiple-valued case, this approach assumes
you are using the @(&#39;tools/mv-nth&#39;) book.  The theorems we prove target terms
like @(&#39;(mv-nth 0 (f ...))&#39;) and @(&#39;(mv-nth 1 (f ...))&#39;).  This will not work
well if @(see mv-nth) is enabled, especially about the 0th return value. For
your convenience, @(&#39;define&#39;) automatically includes the @(&#39;tools/mv-nth&#39;)
book.  You really should be using it, you know.&lt;/dd&gt;

&lt;dd&gt;As a convenient shorthand, you can use a single symbol like @(&#39;evenp&#39;).
The theorem to be proven in this case might be, e.g., @(&#39;(evenp (f x))&#39;) for a
single-valued function, or @(&#39;(evenp (mv-nth 3 (f x)))&#39;) if this is the
fourth (because of zero-indexing) return value of a multiply-valued function.
The symbol @(&#39;t&#39;) is explicitly allowed and results in no theorem.  The symbol
@(&#39;nil&#39;) and keyword symbols are explicitly invalid as return types.&lt;/dd&gt;

&lt;dd&gt;In certain cases, you may wish to prove a more complex theorem, e.g., say
we want to prove this return value is always greater than 5.  To support this,
you can write a return type like @(&#39;(&lt; 5 ans)&#39;), where @(&#39;ans&#39;) is the
@(&#39;name&#39;) of this return value.  You can also refer to the names of other
return values in this term.  To make it easy to distinguish return types from
other options, the return type term must be a cons and must not begin with
@(&#39;quote&#39;).&lt;/dd&gt;

&lt;dt&gt;@(&#39;:hyp hyp-term&#39;)&lt;/dt&gt;

&lt;dd&gt;This option only makes sense when there is a return-type term.  By default,
the return-type theorem is unconditional.  If the theorem needs a hypothesis,
you can put it here.&lt;/dd&gt;

&lt;dd&gt;Frequently, the hypothesis you want for a type-like theorem is for the
guards of the function to be met.  As a convenient shorthand, @(&#39;hyp-term&#39;) may
be:

&lt;ul&gt;
&lt;li&gt;@(&#39;:guard&#39;) -- use the function&#39;s guard as the hypothesis&lt;/li&gt;
&lt;li&gt;@(&#39;:fguard&#39;) -- like @(&#39;:guard&#39;), but @(see force) the entire guard&lt;/li&gt;
&lt;/ul&gt;

If neither of these is what you want, you can provide an arbitrary
@(&#39;hyp-term&#39;).  Typically this term should mention only the formals of your
function.  The return values of the theorem will not be bound in scope of the
hyp, so trying to refer to them in a hypothesis is generally an error.&lt;/dd&gt;

&lt;dt&gt;@(&#39;:hints hints-term&#39;)&lt;/dt&gt;

&lt;dd&gt;This option only makes sense when there is a return-type term; when
specified, the given hints are passed to the proof attempt for the associated
return-type.  When no @(&#39;:hints&#39;) keyword is present, a default hint is taken
from the @(&#39;std::returnspec&#39;) entry of the @(&#39;std::default-hints-table&#39;) table,
but this is overridden if the @(&#39;:hints&#39;) keyword is present, even for
@(&#39;:hints nil&#39;).  To change the default hints, you may use
@(&#39;set-returnspec-default-hints&#39;).  The setting for this provided in the
std/util books provides an induction and expand hint when the
function introduced is singly-recursive.&lt;/dd&gt;

&lt;dd&gt;A few special symbols (and even substrings of symbols) are substituted into
hints; see the section &quot;Substitutions&quot; below.&lt;/dd&gt;

&lt;dt&gt;@(&#39;:rule-classes classes&#39;)&lt;/dt&gt;

&lt;dd&gt;This option only makes sense when there is a return-type term.  By default,
the return-type theorem is added as a @(&#39;:rewrite&#39;) rule.  If you want to use
other @(see acl2::rule-classes), then you will want to override this default.&lt;/dd&gt;

&lt;dd&gt;A few special symbols (and even substrings of symbols) are substituted into
hints; see the section &quot;Substitutions&quot; below.&lt;/dd&gt;

&lt;dt&gt;@(&#39;:name name&#39;)&lt;/dt&gt;

&lt;dd&gt;This allows you to control the name of the associated theorem.&lt;/dd&gt;

&lt;dd&gt;The default value of @(&#39;name&#39;) is &lt;it&gt;type&lt;/it&gt;-of-&lt;it&gt;your-function&lt;/it&gt;.
For example, @(&#39;natp-of-foo&#39;).&lt;/dd&gt;

&lt;dt&gt;@(&#39;:hints-sub-returnnames&#39;)&lt;/dt&gt;

&lt;dd&gt;This option determines whether the
return-name substitution is applied to the hints. See &quot;Substitutions&quot;
below.&lt;/dd&gt;

&lt;/dl&gt;

&lt;h3&gt;Substitutions&lt;/h3&gt;

&lt;p&gt;Certain symbols and certain substrings of symbols are
replaced in the theorem body, hints, and rule-classes.&lt;/p&gt;

&lt;p&gt;The following substitutions replace any symbol matching the given name in
all three places (body, hints, and rule-classes):&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;@(&#39;&lt;CALL&gt;&#39;) is replaced by the function applied to the formals.&lt;/li&gt;
&lt;li&gt;@(&#39;&lt;FN&gt;&#39;) is replaced by the function&#39;s macro alias, if it has one, or else its name.  That is, for a form that introduces @(&#39;foo&#39;) with macro arguments, creating a function named @(&#39;foo-fn&#39;), this produces @(&#39;foo&#39;).&lt;/li&gt;
&lt;li&gt;@(&#39;&lt;FN!&gt;&#39;) is replaced by the functions name, strictly, i.e. @(&#39;foo-fn&#39;) in the example above.&lt;/li&gt;
&lt;li&gt;@(&#39;&lt;VALUES&gt;&#39;) is replaced by the list of return value names.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In the hints, the substrings @(&#39;&lt;FN&gt;&#39;) and @(&#39;&lt;FN!&gt;&#39;) of symbol names are
also substituted as above.  This allows hints to refer to @(see defret)-style
theorem names.&lt;/p&gt;

&lt;p&gt;In the rule-classes, the return value names are substituted for appropriate
terms; i.e., if the second return value of @(&#39;foo&#39;) is named @(&#39;bar&#39;), then
@(&#39;bar&#39;) becomes @(&#39;(mv-nth 1 (foo ...))&#39;).  This substitution may also
optionally be applied to the hints by setting the @(&#39;:hints-sub-returnnames&#39;) option.
This return name substitution is not applied to the theorem body, but the let-binding
of the return names to the function call has a similar effect.&lt;/p&gt;

&lt;h3&gt;Configuration Object&lt;/h3&gt;

&lt;p&gt;Similar to @(see define), a configuration object can be set up to set some
options globally (local to a book).  At the moment only the
@(&#39;:hints-sub-returnnames&#39;) option is read from this configuration object.  The
following form sets that option:&lt;/p&gt;

@({
 (make-returnspec-config :hints-sub-returnnames t)
 })

"</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-primitive-aggregate returnspec
  (name <a class="sym-link system" href="../../../history-management.html#def-doc" data-sym="DOC">doc</a>
    return-type
    hyp
    hints
    hintsp
    rule-classes
    thm-name
    opts)
  <span class="keyword">:tag</span> <span class="keyword">:return-spec</span>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *default-returnspec*
  (make-returnspec <span class="keyword">:name</span> 'ret
    <span class="keyword">:doc</span> <span class="string">""</span>
    <span class="keyword">:return-type</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:hyp</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:hints</span> nil
    <span class="keyword">:hintsp</span> nil
    <span class="keyword">:rule-classes</span> <span class="keyword">:rewrite</span> <span class="keyword">:thm-name</span> nil))</pre>
  </div>

<div class="form-block function" id="def-returnspeclist-p" data-defines="RETURNSPECLIST-P" data-references="CDR,CAR,RETURNSPEC-P,AND,ATOM,IF,T,XARGS,DECLARE,X,DEFUN" data-used-by="RETURNSPEC-THMS,RETURNSPEC-MULTI-THMS,ARITY-CHECK-RETURNS,RETURNSPECLIST->NAMES" data-part-name="RETURNSPECLIST-P" data-part-args="X" data-part-declare="T,XARGS,DECLARE" data-part-body="CDR,RETURNSPECLIST-P,CAR,RETURNSPEC-P,AND,T,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPECLIST-P">returnspeclist-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspeclist-p" data-sym="RETURNSPECLIST-P" title="(defun std::returnspeclist-p (std::x)
  (declare (std::xargs :guard t))
  (if (atom std::x)
      t
      (and (std::returnspec-p (car std::x))">returnspeclist-p</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (returnspec-p (car x))
      (<a class="sym-link local-def" href="#def-returnspeclist-p" data-sym="RETURNSPECLIST-P" title="(defun std::returnspeclist-p (std::x)
  (declare (std::xargs :guard t))
  (if (atom std::x)
      t
      (and (std::returnspec-p (car std::x))">returnspeclist-p</a> (cdr x)))))</pre>
  </div>

<div class="form-block function" id="def-returnspeclist-_3Enames" data-defines="RETURNSPECLIST->NAMES" data-references="CDR,CAR,RETURNSPEC->NAME,CONS,ATOM,IF,RETURNSPECLIST-P,XARGS,DECLARE,X,DEFUN" data-used-by="RETURNSPEC-THMS" data-part-name="RETURNSPECLIST->NAMES" data-part-args="X" data-part-declare="X,RETURNSPECLIST-P,XARGS,DECLARE" data-part-body="CDR,RETURNSPECLIST->NAMES,CAR,RETURNSPEC->NAME,CONS,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPECLIST->NAMES">returnspeclist-&gt;names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspeclist-_3Enames" data-sym="RETURNSPECLIST-&gt;NAMES" title="(defun std::returnspeclist-&gt;names (std::x)
  (declare (std::xargs :guard (std::returnspeclist-p std::x)))
  (if (atom std::x)
      nil
      (cons (std::returnspec-&gt;name (car std::x))">returnspeclist-&gt;names</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link local-def" href="#def-returnspeclist-p" data-sym="RETURNSPECLIST-P" title="(defun std::returnspeclist-p (std::x)
  (declare (std::xargs :guard t))
  (if (atom std::x)
      t
      (and (std::returnspec-p (car std::x))">returnspeclist-p</a> x)))
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (cons (returnspec-&gt;name (car x))
      (<a class="sym-link local-def" href="#def-returnspeclist-_3Enames" data-sym="RETURNSPECLIST-&gt;NAMES" title="(defun std::returnspeclist-&gt;names (std::x)
  (declare (std::xargs :guard (std::returnspeclist-p std::x)))
  (if (atom std::x)
      nil
      (cons (std::returnspec-&gt;name (car std::x))">returnspeclist-&gt;names</a> (cdr x)))))</pre>
  </div>

<div class="form-block function" id="def-parse-returnspec-item" data-defines="PARSE-RETURNSPEC-ITEM" data-references="STRINGP,CAR,NOT,CONSP,AND,QUASIQUOTE,SYMBOLP,RAISE,KEYWORDP,OR,CONS,MV,EQ,WHEN,QUOTE,__FUNCTION__,B*,T,XARGS,DECLARE,DOCS,TERMS,ITEM,VARNAME,FNNAME,DEFUN" data-used-by="PARSE-RETURNSPEC-ITEMS" data-part-name="PARSE-RETURNSPEC-ITEM" data-part-args="DOCS,TERMS,ITEM,VARNAME,FNNAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-RETURNSPEC-ITEM">parse-returnspec-item</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-returnspec-item" data-sym="PARSE-RETURNSPEC-ITEM" title="(defun std::parse-returnspec-item
       (std::fnname std::varname std::item std::terms std::docs)
  &quot;Returns (mv terms docs)&quot;
  (declare (std::xargs :guard t))
  (std::b*
...">parse-returnspec-item</a>
  (fnname varname item terms docs)
  <span class="string">"Returns (mv terms docs)"</span>
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (b* ((__function__ '<a class="sym-link local-def" href="#def-parse-returnspec-item" data-sym="PARSE-RETURNSPEC-ITEM" title="(defun std::parse-returnspec-item
       (std::fnname std::varname std::item std::terms std::docs)
  &quot;Returns (mv terms docs)&quot;
  (declare (std::xargs :guard t))
  (std::b*
...">parse-returnspec-item</a>) ((when (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> item <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (cons item terms) docs))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> item nil) (<a class="sym-link system" href="../../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> item))) (raise <span class="string">"Error in ~x0: return type for ~x1 is ~x2, which is not ~
                allowed."</span>
          fnname
          varname
          item)
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> terms docs))
      ((when (symbolp item)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (cons `(,STD::ITEM ,STD::VARNAME) terms)
          docs))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp item) (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car item) 'quote)))) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (cons item terms) docs))
      ((when (stringp item)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> terms (cons item docs))))
    (raise <span class="string">"Error in ~x0, return type for ~x1: expected return type terms or ~
            documentation strings, but found ~x2."</span>
      fnname
      varname
      item)
    (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> terms docs)))</pre>
  </div>

<div class="form-block function" id="def-parse-returnspec-items" data-defines="PARSE-RETURNSPEC-ITEMS" data-references="CDR,CAR,PARSE-RETURNSPEC-ITEM,RAISE,ATOM,MV,NOT,WHEN,QUOTE,__FUNCTION__,B*,T,XARGS,DECLARE,DOCS,TERMS,ITEMS,VARNAME,FNNAME,DEFUN" data-used-by="PARSE-RETURNSPEC" data-part-name="PARSE-RETURNSPEC-ITEMS" data-part-args="DOCS,TERMS,ITEMS,VARNAME,FNNAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-RETURNSPEC-ITEMS">parse-returnspec-items</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-returnspec-items" data-sym="PARSE-RETURNSPEC-ITEMS" title="(defun std::parse-returnspec-items
       (std::fnname std::varname std::items std::terms std::docs)
  &quot;Returns (mv terms docs)&quot;
  (declare (std::xargs :guard t))
  (std::b*
...">parse-returnspec-items</a>
  (fnname varname items terms docs)
  <span class="string">"Returns (mv terms docs)"</span>
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (b* ((__function__ '<a class="sym-link local-def" href="#def-parse-returnspec-items" data-sym="PARSE-RETURNSPEC-ITEMS" title="(defun std::parse-returnspec-items
       (std::fnname std::varname std::items std::terms std::docs)
  &quot;Returns (mv terms docs)&quot;
  (declare (std::xargs :guard t))
  (std::b*
...">parse-returnspec-items</a>) ((when (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> items)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> terms docs))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> items)) (raise <span class="string">"Error in ~x0: expected returnspec-items for ~x1 to be ~
                nil-terminated, but found ~x2 as the final cdr."</span>
          fnname
          varname
          items)
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> terms docs))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> terms docs) (<a class="sym-link local-def" href="#def-parse-returnspec-item" data-sym="PARSE-RETURNSPEC-ITEM" title="(defun std::parse-returnspec-item
       (std::fnname std::varname std::item std::terms std::docs)
  &quot;Returns (mv terms docs)&quot;
  (declare (std::xargs :guard t))
  (std::b*
...">parse-returnspec-item</a> fnname
          varname
          (car items)
          terms
          docs)))
    (<a class="sym-link local-def" href="#def-parse-returnspec-items" data-sym="PARSE-RETURNSPEC-ITEMS" title="(defun std::parse-returnspec-items
       (std::fnname std::varname std::items std::terms std::docs)
  &quot;Returns (mv terms docs)&quot;
  (declare (std::xargs :guard t))
  (std::b*
...">parse-returnspec-items</a> fnname
      varname
      (cdr items)
      terms
      docs)))</pre>
  </div>

<div class="form-block function" id="def-parse-returnspec" data-defines="PARSE-RETURNSPEC" data-references="PROGN$,XDOC,CAR,COND,RETURN-TYPE,PARSE-RETURNSPEC-ITEMS,DOCS,TERMS,THM-NAME,RULE-CLASSES,HINTSP,HINTS,NOT,KEYWORDP,AND,CDR,ASSOC,IF,HYP,EXTRACT-KEYWORDS,OTHER-OPTS,KWD-ALIST,OPTIONS,VARNAME,CONS,ATOM,MAKE-RETURNSPEC,T,LIST,UNLESS,CURRENT-ACL2-WORLD,FORMALS,GETPROP,LOOK,SYMBOLP,*DEFAULT-RETURNSPEC*,RAISE,MV,EQ,WHEN,QUOTE,__FUNCTION__,B*,PLIST-WORLDP,XARGS,DECLARE,WORLD,X,FNNAME,DEFUN" data-used-by="PARSE-RETURNSPECS-AUX" data-part-name="PARSE-RETURNSPEC" data-part-args="WORLD,X,FNNAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-RETURNSPEC">parse-returnspec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-returnspec" data-sym="PARSE-RETURNSPEC" title="(defun std::parse-returnspec (std::fnname std::x std::world)
  &quot;Returns a returnspec-p.&quot;
  (declare (std::xargs :guard (std::plist-worldp std::world)))
  (std::b*
   ((std::__function__ &#39;std::parse-returnspec)
...">parse-returnspec</a>
  (fnname x world)
  <span class="string">"Returns a returnspec-p."</span>
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> world)))
  (b* ((__function__ '<a class="sym-link local-def" href="#def-parse-returnspec" data-sym="PARSE-RETURNSPEC" title="(defun std::parse-returnspec (std::fnname std::x std::world)
  &quot;Returns a returnspec-p.&quot;
  (declare (std::xargs :guard (std::plist-worldp std::world)))
  (std::b*
   ((std::__function__ &#39;std::parse-returnspec)
...">parse-returnspec</a>) ((when (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> x '<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a>)) (raise <span class="string">"Error in ~x0: return values may not be named MV."</span>
          fnname)
        *default-returnspec*)
      ((when (symbolp x)) (b* ((look (<a class="sym-link system" href="../../../axioms.html#def-getprop" data-sym="GETPROP">getprop</a> x
               '<a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>
               <span class="keyword">:bad</span> 'current-acl2-world
               world)) ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> look <span class="keyword">:bad</span>)) (raise <span class="string">"Error in ~x0: you named a return value ~x1, which is ~
                      the name of a defined function, but you don&#39;t have any ~
                      return type associated with this value.  There&#39;s a good ~
                      chance this you meant this to be the return value&#39;s ~
                      type instead of its name.~%~%If you really want to name ~
                      this return value ~x1 and not prove anything about it, ~
                      you can use syntax like ~x2.~%"</span>
                fnname
                x
                (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
              *default-returnspec*))
          (make-returnspec <span class="keyword">:name</span> x
            <span class="keyword">:doc</span> <span class="string">""</span>
            <span class="keyword">:return-type</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
            <span class="keyword">:rule-classes</span> <span class="keyword">:rewrite</span> <span class="keyword">:hyp</span> nil
            <span class="keyword">:hints</span> nil
            <span class="keyword">:thm-name</span> nil)))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)) (raise <span class="string">"Error in ~x0: return specifiers must be symbols or lists, but ~
                found: ~x1"</span>
          fnname
          x)
        *default-returnspec*)
      ((cons varname options) x)
      ((unless (symbolp varname)) (raise <span class="string">"Error in ~x0: return specifiers must start with a symbol ~
                name, so this return specifier is not valid: ~x1"</span>
          fnname
          x)
        *default-returnspec*)
      ((when (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> varname '<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a>)) (raise <span class="string">"Error in ~x0: return values may not be named MV."</span>
          fnname)
        *default-returnspec*)
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> kwd-alist other-opts) (extract-keywords fnname
          '(<span class="keyword">:hyp</span> <span class="keyword">:hints</span> <span class="keyword">:rule-classes</span> <span class="keyword">:name</span> <span class="keyword">:props</span> <span class="keyword">:hints-sub-returnnames</span>)
          options
          nil))
      (hyp (if (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:hyp</span> kwd-alist)
          (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:hyp</span> kwd-alist))
          <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> hyp)
           (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> hyp <span class="keyword">:guard</span>))
           (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> hyp <span class="keyword">:fguard</span>)))) (raise <span class="string">"Error in ~x0: invalid keyword ~x1 used as a :hyp."</span>
          fnname
          hyp)
        *default-returnspec*)
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> hints hintsp) (if (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:hints</span> kwd-alist)
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:hints</span> kwd-alist)) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)))
      (rule-classes (if (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:rule-classes</span> kwd-alist)
          (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:rule-classes</span> kwd-alist))
          <span class="keyword">:rewrite</span>))
      (thm-name (if (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:name</span> kwd-alist)
          (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:name</span> kwd-alist))
          nil))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> terms docs) (<a class="sym-link local-def" href="#def-parse-returnspec-items" data-sym="PARSE-RETURNSPEC-ITEMS" title="(defun std::parse-returnspec-items
       (std::fnname std::varname std::items std::terms std::docs)
  &quot;Returns (mv terms docs)&quot;
  (declare (std::xargs :guard t))
  (std::b*
...">parse-returnspec-items</a> fnname
          varname
          other-opts
          nil
          nil))
      (return-type (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> terms) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
          ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (cdr terms)) (car terms))
          (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (raise <span class="string">"Error in ~x0: return specifier ~x1 has multiple return ~
                       type terms, but at most one is allowed: ~&amp;2"</span>
              fnname
              varname
              terms))))
      (xdoc (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> docs) <span class="string">""</span>)
          ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (cdr docs)) (car docs))
          (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../axioms.html#def-progn_24" data-sym="PROGN$">progn$</a> (raise <span class="string">"Error in ~x0: return specifier ~x1 has multiple xdoc ~
                        strings, but at most one is allowed: ~x2."</span>
                fnname
                varname
                terms)
              <span class="string">""</span>)))))
    (make-returnspec <span class="keyword">:name</span> varname
      <span class="keyword">:doc</span> xdoc
      <span class="keyword">:return-type</span> return-type
      <span class="keyword">:rule-classes</span> rule-classes
      <span class="keyword">:hyp</span> hyp
      <span class="keyword">:hints</span> hints
      <span class="keyword">:hintsp</span> hintsp
      <span class="keyword">:thm-name</span> thm-name
      <span class="keyword">:opts</span> kwd-alist)))</pre>
  </div>

<div class="form-block function" id="def-parse-returnspecs-aux" data-defines="PARSE-RETURNSPECS-AUX" data-references="CDR,CAR,PARSE-RETURNSPEC,CONS,ATOM,IF,PLIST-WORLDP,XARGS,DECLARE,WORLD,X,FNNAME,DEFUN" data-used-by="PARSE-RETURNSPECS" data-part-name="PARSE-RETURNSPECS-AUX" data-part-args="WORLD,X,FNNAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-RETURNSPECS-AUX">parse-returnspecs-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-returnspecs-aux" data-sym="PARSE-RETURNSPECS-AUX" title="(defun std::parse-returnspecs-aux (std::fnname std::x std::world)
  &quot;Returns a returnspeclist-p&quot;
  (declare (std::xargs :guard (std::plist-worldp std::world)))
  (if (atom std::x)
      nil
...">parse-returnspecs-aux</a>
  (fnname x world)
  <span class="string">"Returns a returnspeclist-p"</span>
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> world)))
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (cons (<a class="sym-link local-def" href="#def-parse-returnspec" data-sym="PARSE-RETURNSPEC" title="(defun std::parse-returnspec (std::fnname std::x std::world)
  &quot;Returns a returnspec-p.&quot;
  (declare (std::xargs :guard (std::plist-worldp std::world)))
  (std::b*
   ((std::__function__ &#39;std::parse-returnspec)
...">parse-returnspec</a> fnname (car x) world)
      (<a class="sym-link local-def" href="#def-parse-returnspecs-aux" data-sym="PARSE-RETURNSPECS-AUX" title="(defun std::parse-returnspecs-aux (std::fnname std::x std::world)
  &quot;Returns a returnspeclist-p&quot;
  (declare (std::xargs :guard (std::plist-worldp std::world)))
  (if (atom std::x)
      nil
...">parse-returnspecs-aux</a> fnname
        (cdr x)
        world))))</pre>
  </div>

<div class="form-block function" id="def-normalize-returnspecs" data-defines="NORMALIZE-RETURNSPECS" data-references="CDR,TRUE-LISTP,IF,CAR,ATOM,LIST,SYMBOLP,RAISE,MV,EQ,WHEN,UNLESS,QUOTE,__FUNCTION__,B*,T,XARGS,DECLARE,X,FNNAME,DEFUN" data-used-by="PARSE-RETURNSPECS" data-part-name="NORMALIZE-RETURNSPECS" data-part-args="X,FNNAME" data-part-declare="T,XARGS,DECLARE" data-part-body="CDR,TRUE-LISTP,IF,CAR,ATOM,LIST,SYMBOLP,FNNAME,RAISE,MV,EQ,WHEN,X,UNLESS,NORMALIZE-RETURNSPECS,QUOTE,__FUNCTION__,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NORMALIZE-RETURNSPECS">normalize-returnspecs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-normalize-returnspecs" data-sym="NORMALIZE-RETURNSPECS" title="(defun std::normalize-returnspecs (std::fnname std::x)
  (declare (std::xargs :guard t))
  (std::b*
   ((std::__function__ &#39;std::normalize-returnspecs) ((unless std::x) nil)
    ((when (eq std::x &#39;std::mv))
...">normalize-returnspecs</a>
  (fnname x)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (b* ((__function__ '<a class="sym-link local-def" href="#def-normalize-returnspecs" data-sym="NORMALIZE-RETURNSPECS" title="(defun std::normalize-returnspecs (std::fnname std::x)
  (declare (std::xargs :guard t))
  (std::b*
   ((std::__function__ &#39;std::normalize-returnspecs) ((unless std::x) nil)
    ((when (eq std::x &#39;std::mv))
...">normalize-returnspecs</a>) ((unless x) nil)
      ((when (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> x '<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a>)) (raise <span class="string">"Error in ~x0: :returns may not be just MV."</span>
          fnname))
      ((when (symbolp x)) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)) (raise <span class="string">"Error in ~x0: :returns may not be ~x1."</span>
          fnname
          x))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a>)) (if (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (cdr x))
          (cdr x)
          (raise <span class="string">"Error in ~x0: :returns must be nil-terminated, but ~x1 is not."</span>
            fnname
            x))))
    (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)))</pre>
  </div>

<div class="form-block function" id="def-parse-returnspecs" data-defines="PARSE-RETURNSPECS" data-references="NORMALIZE-RETURNSPECS,PARSE-RETURNSPECS-AUX,PLIST-WORLDP,XARGS,DECLARE,WORLD,X,FNNAME,DEFUN" data-part-name="PARSE-RETURNSPECS" data-part-args="WORLD,X,FNNAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-RETURNSPECS">parse-returnspecs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-returnspecs" data-sym="PARSE-RETURNSPECS" title="(defun std::parse-returnspecs (std::fnname std::x std::world)
  &quot;Returns a returnspeclist-p&quot;
  (declare (std::xargs :guard (std::plist-worldp std::world)))
  (std::parse-returnspecs-aux std::fnname
   (std::normalize-returnspecs std::fnname std::x) std::world))">parse-returnspecs</a>
  (fnname x world)
  <span class="string">"Returns a returnspeclist-p"</span>
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> world)))
  (<a class="sym-link local-def" href="#def-parse-returnspecs-aux" data-sym="PARSE-RETURNSPECS-AUX" title="(defun std::parse-returnspecs-aux (std::fnname std::x std::world)
  &quot;Returns a returnspeclist-p&quot;
  (declare (std::xargs :guard (std::plist-worldp std::world)))
  (if (atom std::x)
      nil
...">parse-returnspecs-aux</a> fnname
    (<a class="sym-link local-def" href="#def-normalize-returnspecs" data-sym="NORMALIZE-RETURNSPECS" title="(defun std::normalize-returnspecs (std::fnname std::x)
  (declare (std::xargs :guard t))
  (std::b*
   ((std::__function__ &#39;std::normalize-returnspecs) ((unless std::x) nil)
    ((when (eq std::x &#39;std::mv))
...">normalize-returnspecs</a> fnname x)
    world))</pre>
  </div>

<div class="form-block function" id="def-arity-check-returns" data-defines="ARITY-CHECK-RETURNS" data-references="HARD?,ER,CURRENT-ACL2-WORLD,NON-EXECUTABLEP,QUOTE,GETPROP,LEN,EQUAL,LOOK-UP-RETURN-VALS,STOBJS-OUT,T,ATOM,WHEN,B*,PLIST-WORLDP,RETURNSPECLIST-P,SYMBOLP,AND,XARGS,DECLARE,WORLD,SPECS,NAME-FN,NAME,DEFUN" data-used-by="RETURNSPEC-THMS" data-part-name="ARITY-CHECK-RETURNS" data-part-args="WORLD,SPECS,NAME-FN,NAME" data-part-declare="WORLD,PLIST-WORLDP,SPECS,RETURNSPECLIST-P,NAME-FN,NAME,SYMBOLP,AND,XARGS,DECLARE" data-part-body="NAME,ARITY-CHECK-RETURNS,HARD?,ER,CURRENT-ACL2-WORLD,NON-EXECUTABLEP,QUOTE,GETPROP,LEN,EQUAL,WORLD,NAME-FN,LOOK-UP-RETURN-VALS,STOBJS-OUT,T,SPECS,ATOM,WHEN,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ARITY-CHECK-RETURNS">arity-check-returns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-arity-check-returns" data-sym="ARITY-CHECK-RETURNS" title="(defun std::arity-check-returns (std::name std::name-fn std::specs std::world)
  (declare
   (std::xargs :guard
    (and (symbolp std::name) (symbolp std::name-fn)
         (std::returnspeclist-p std::specs) (std::plist-worldp std::world))))
...">arity-check-returns</a>
  (name name-fn specs world)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
        (symbolp name-fn)
        (<a class="sym-link local-def" href="#def-returnspeclist-p" data-sym="RETURNSPECLIST-P" title="(defun std::returnspeclist-p (std::x)
  (declare (std::xargs :guard t))
  (if (atom std::x)
      t
      (and (std::returnspec-p (car std::x))">returnspeclist-p</a> specs)
        (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> world))))
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> specs)) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="../../../axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (look-up-return-vals name-fn world))
      ((when (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> <a class="sym-link system" href="../../../axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> specs))) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      ((when (<a class="sym-link system" href="../../../axioms.html#def-getprop" data-sym="GETPROP">getprop</a> name-fn
           'non-executablep
           nil
           'current-acl2-world
           world)) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
      '<a class="sym-link local-def" href="#def-arity-check-returns" data-sym="ARITY-CHECK-RETURNS" title="(defun std::arity-check-returns (std::name std::name-fn std::specs std::world)
  (declare
   (std::xargs :guard
    (and (symbolp std::name) (symbolp std::name-fn)
         (std::returnspeclist-p std::specs) (std::plist-worldp std::world))))
...">arity-check-returns</a>
      <span class="string">"Error in ~x0: ACL2 thinks this function has ~x1 return ~
         values, but :returns has ~x2 entries!"</span>
      name
      (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> <a class="sym-link system" href="../../../axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
      (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> specs))))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection <a class="sym-link system" href="../../../basis-b.html#def-untranslate-and" data-sym="UNTRANSLATE-AND">untranslate-and</a>
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link system" href="../../../basis-b.html#def-untranslate-and" data-sym="UNTRANSLATE-AND">untranslate-and</a>
    (x)
    (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x))
      ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp x)
         (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a> x) 'if)
         (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) <span class="number">4</span>)
         (equal (<a class="sym-link system" href="../../../axioms.html#def-fourth" data-sym="FOURTH">fourth</a> x) ''nil)) (cons (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> x) (<a class="sym-link system" href="../../../basis-b.html#def-untranslate-and" data-sym="UNTRANSLATE-AND">untranslate-and</a> (<a class="sym-link system" href="../../../axioms.html#def-third" data-sym="THIRD">third</a> x))))
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)))))</pre>
  </div>

<div class="form-block function" id="def-force-each" data-defines="FORCE-EACH" data-references="CDR,FORCE,QUASIQUOTE,CONS,ATOM,IF,T,XARGS,DECLARE,X,DEFUN" data-used-by="FANCY-FORCE-HYP" data-part-name="FORCE-EACH" data-part-args="X" data-part-declare="T,XARGS,DECLARE" data-part-body="CDR,FORCE-EACH,FORCE,QUASIQUOTE,CONS,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FORCE-EACH">force-each</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-force-each" data-sym="FORCE-EACH" title="(defun std::force-each (std::x)
  (declare (std::xargs :guard t))
  (if (atom std::x)
      nil
      (cons `(std::force ,(car std::x)) (std::force-each (cdr std::x)))))">force-each</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (cons `(<a class="sym-link system" href="../../../axioms.html#def-force" data-sym="FORCE">force</a> ,(CAR STD::X))
      (<a class="sym-link local-def" href="#def-force-each" data-sym="FORCE-EACH" title="(defun std::force-each (std::x)
  (declare (std::xargs :guard t))
  (if (atom std::x)
      nil
      (cons `(std::force ,(car std::x)) (std::force-each (cdr std::x)))))">force-each</a> (cdr x)))))</pre>
  </div>

<div class="form-block function" id="def-fancy-force-hyp" data-defines="FANCY-FORCE-HYP" data-references="FORCE-EACH,AND,QUOTE,CONS,UNTRANSLATE-AND,HYP-LIST,B*,T,XARGS,DECLARE,X,DEFUN" data-used-by="RETURNSPEC-THM-BODY" data-part-name="FANCY-FORCE-HYP" data-part-args="X" data-part-declare="T,XARGS,DECLARE" data-part-body="FORCE-EACH,AND,QUOTE,CONS,X,UNTRANSLATE-AND,HYP-LIST,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FANCY-FORCE-HYP">fancy-force-hyp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fancy-force-hyp" data-sym="FANCY-FORCE-HYP" title="(defun std::fancy-force-hyp (std::x)
  (declare (std::xargs :guard t))
  (std::b* ((std::hyp-list (std::untranslate-and std::x)))
   (cons &#39;and (std::force-each std::hyp-list))))">fancy-force-hyp</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (b* ((hyp-list (<a class="sym-link system" href="../../../basis-b.html#def-untranslate-and" data-sym="UNTRANSLATE-AND">untranslate-and</a> x)))
    (cons '<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-force-each" data-sym="FORCE-EACH" title="(defun std::force-each (std::x)
  (declare (std::xargs :guard t))
  (if (atom std::x)
      nil
      (cons `(std::force ,(car std::x)) (std::force-each (cdr std::x)))))">force-each</a> hyp-list))))</pre>
  </div>

<div class="form-block function" id="def-fancy-hyp" data-defines="FANCY-HYP" data-references="AND,QUOTE,CONS,UNTRANSLATE-AND,HYP-LIST,B*,T,XARGS,DECLARE,X,DEFUN" data-used-by="RETURNSPEC-THM-BODY" data-part-name="FANCY-HYP" data-part-args="X" data-part-declare="T,XARGS,DECLARE" data-part-body="AND,QUOTE,CONS,X,UNTRANSLATE-AND,HYP-LIST,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FANCY-HYP">fancy-hyp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fancy-hyp" data-sym="FANCY-HYP" title="(defun std::fancy-hyp (std::x)
  (declare (std::xargs :guard t))
  (std::b* ((std::hyp-list (std::untranslate-and std::x)))
   (cons &#39;and std::hyp-list)))">fancy-hyp</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (b* ((hyp-list (<a class="sym-link system" href="../../../basis-b.html#def-untranslate-and" data-sym="UNTRANSLATE-AND">untranslate-and</a> x)))
    (cons '<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> hyp-list)))</pre>
  </div>

<div class="form-block function" id="def-returnspec-thm-body" data-defines="RETURNSPEC-THM-BODY" data-references="IMPLIES,IF,QUASIQUOTE,CONCL,FANCY-FORCE-HYP,LOOK-UP-GUARD,FANCY-HYP,X.HYP,EQ,COND,HYP,T,X.RETURN-TYPE,EQUAL,WHEN,RETURNSPEC,B*,PLIST-WORLDP,RETURNSPEC-P,SYMBOLP,AND,XARGS,DECLARE,WORLD,X,BINDS,FNNAME,DEFUN" data-used-by="RETURNSPEC-MULTI-THM,RETURNSPEC-SINGLE-THM" data-part-name="RETURNSPEC-THM-BODY" data-part-args="WORLD,X,BINDS,FNNAME" data-part-declare="WORLD,PLIST-WORLDP,X,RETURNSPEC-P,FNNAME,SYMBOLP,AND,XARGS,DECLARE" data-part-body="IMPLIES,IF,QUASIQUOTE,CONCL,FANCY-FORCE-HYP,WORLD,FNNAME,LOOK-UP-GUARD,FANCY-HYP,X.HYP,EQ,COND,HYP,T,X.RETURN-TYPE,EQUAL,WHEN,X,RETURNSPEC,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-THM-BODY">returnspec-thm-body</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-thm-body" data-sym="RETURNSPEC-THM-BODY" title="(defun std::returnspec-thm-body (std::fnname std::binds std::x std::world)
  (declare
   (std::xargs :guard
    (and (symbolp std::fnname) (std::returnspec-p std::x)
         (std::plist-worldp std::world))))
...">returnspec-thm-body</a>
  (fnname binds x world)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp fnname)
        (returnspec-p x)
        (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> world))))
  (b* (((returnspec x) x) ((when (equal x.return-type <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (hyp (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> x.hyp <span class="keyword">:guard</span>) (<a class="sym-link local-def" href="#def-fancy-hyp" data-sym="FANCY-HYP" title="(defun std::fancy-hyp (std::x)
  (declare (std::xargs :guard t))
  (std::b* ((std::hyp-list (std::untranslate-and std::x)))
   (cons &#39;and std::hyp-list)))">fancy-hyp</a> (look-up-guard fnname world)))
          ((<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> x.hyp <span class="keyword">:fguard</span>) (<a class="sym-link local-def" href="#def-fancy-force-hyp" data-sym="FANCY-FORCE-HYP" title="(defun std::fancy-force-hyp (std::x)
  (declare (std::xargs :guard t))
  (std::b* ((std::hyp-list (std::untranslate-and std::x)))
   (cons &#39;and (std::force-each std::hyp-list))))">fancy-force-hyp</a> (look-up-guard fnname world)))
          (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> x.hyp)))
      (concl `(b* (,STD::BINDS) ,STD::X.RETURN-TYPE)))
    (if (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> hyp <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      concl
      `(<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> ,STD::HYP ,STD::CONCL))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-generate-name" data-defines="RETURNSPEC-GENERATE-NAME" data-references="HARD?,ER,UNLESS,INTERN-IN-PACKAGE-OF-SYMBOL,SECOND,EQUAL,FIRST,SYMBOLP,X.RETURN-TYPE,TUPLEP,AND,X.NAME,SYMBOL-NAME,STRING,QUOTE,CONCATENATE,IF,MULTI-SUFFIX,X.THM-NAME,WHEN,RETURNSPEC,B*,BADNAME-OKP,SINGLEP,X,NAME,DEFUN" data-part-name="RETURNSPEC-GENERATE-NAME" data-part-args="BADNAME-OKP,SINGLEP,X,NAME" data-part-body="RETURNSPEC-GENERATE-NAME,HARD?,ER,BADNAME-OKP,UNLESS,NAME,INTERN-IN-PACKAGE-OF-SYMBOL,SECOND,EQUAL,FIRST,SYMBOLP,X.RETURN-TYPE,TUPLEP,AND,X.NAME,SYMBOL-NAME,STRING,QUOTE,CONCATENATE,SINGLEP,IF,MULTI-SUFFIX,X.THM-NAME,WHEN,X,RETURNSPEC,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-GENERATE-NAME">returnspec-generate-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-generate-name" data-sym="RETURNSPEC-GENERATE-NAME" title="(defun std::returnspec-generate-name
       (std::name std::x std::singlep std::badname-okp)
  (std::b*
   (((std::returnspec std::x) std::x) ((when std::x.thm-name) std::x.thm-name)
    (std::multi-suffix
...">returnspec-generate-name</a>
  (name x singlep badname-okp)
  (b* (((returnspec x) x) ((when x.thm-name) x.thm-name)
      (multi-suffix (if singlep
          <span class="string">""</span>
          (<a class="sym-link system" href="../../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../../axioms.html#def-string" data-sym="STRING">string</a> <span class="string">"."</span> (symbol-name x.name))))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (tuplep <span class="number">2</span> x.return-type)
           (symbolp (<a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a> x.return-type))
           (equal (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> x.return-type) x.name))) (intern-in-package-of-symbol (<a class="sym-link system" href="../../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../../axioms.html#def-string" data-sym="STRING">string</a>
            (symbol-name (<a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a> x.return-type))
            <span class="string">"-OF-"</span>
            (symbol-name name)
            multi-suffix)
          name))
      ((unless badname-okp) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          '<a class="sym-link local-def" href="#def-returnspec-generate-name" data-sym="RETURNSPEC-GENERATE-NAME" title="(defun std::returnspec-generate-name
       (std::name std::x std::singlep std::badname-okp)
  (std::b*
   (((std::returnspec std::x) std::x) ((when std::x.thm-name) std::x.thm-name)
    (std::multi-suffix
...">returnspec-generate-name</a>
          <span class="string">"Return spec for ~x0, ~x1, must be given an explicit name."</span>
          name
          x.return-type)))
    (intern-in-package-of-symbol (<a class="sym-link system" href="../../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../../axioms.html#def-string" data-sym="STRING">string</a>
        <span class="string">"RETURN-TYPE-OF-"</span>
        (symbol-name name)
        multi-suffix)
      name)))</pre>
  </div>

<div class="form-block function" id="def-returnspec-default-default-hint" data-defines="RETURNSPEC-DEFAULT-DEFAULT-HINT" data-references="EXPAND-CALLS,STABLE-UNDER-SIMPLIFICATIONP,QUOTE,EQUAL,DISABLE,QUASIQUOTE,LOOK-UP-FORMALS,FORMALS,LET,NOT,COND,CLAUSE-ID,ACCESS,POOL-LST,LET*,T,RECURSIVEP,LEN,EQL,AND,WORLD,ID,FNNAME,DEFUN" data-part-name="RETURNSPEC-DEFAULT-DEFAULT-HINT" data-part-args="WORLD,ID,FNNAME" data-part-body="EXPAND-CALLS,STABLE-UNDER-SIMPLIFICATIONP,QUOTE,EQUAL,DISABLE,QUASIQUOTE,LOOK-UP-FORMALS,FORMALS,LET,NOT,COND,ID,CLAUSE-ID,ACCESS,POOL-LST,LET*,WORLD,T,FNNAME,RECURSIVEP,LEN,EQL,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-DEFAULT-DEFAULT-HINT">returnspec-default-default-hint</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-default-default-hint" data-sym="RETURNSPEC-DEFAULT-DEFAULT-HINT" title="(defun std::returnspec-default-default-hint (std::fnname std::id std::world)
  (and (eql (std::len (recursivep std::fnname t std::world)) 1)
       (let* ((std::pool-lst (access clause-id std::id :pool-lst)))
         (and (eql 0 (access clause-id std::id :forcing-round))
              (cond
...">returnspec-default-default-hint</a>
  (fnname id world)
  (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (recursivep fnname <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> world)) <span class="number">1</span>)
    (<a class="sym-link system" href="../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="../../../history-management.html#def-pool-lst" data-sym="POOL-LST">pool-lst</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> clause-id id <span class="keyword">:pool-lst</span>)))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> clause-id id <span class="keyword">:forcing-round</span>))
        (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> <a class="sym-link system" href="../../../history-management.html#def-pool-lst" data-sym="POOL-LST">pool-lst</a>) (let ((<a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a> (look-up-formals fnname world)))
              `(<span class="keyword">:induct</span> (,STD::FNNAME . ,STD::FORMALS)
                <span class="keyword">:in-theory</span> (disable (<span class="keyword">:d</span> ,STD::FNNAME)))))
          ((equal <a class="sym-link system" href="../../../history-management.html#def-pool-lst" data-sym="POOL-LST">pool-lst</a> '(<span class="number">1</span>)) `(<span class="keyword">:computed-hint-replacement</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
                 (expand-calls ,STD::FNNAME)))
              <span class="keyword">:in-theory</span> (disable (<span class="keyword">:d</span> ,STD::FNNAME)))))))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-default-hints" data-defines="RETURNSPEC-DEFAULT-HINTS" data-references="SUBST,DEFAULT-HINTS-TABLE,TABLE-ALIST,RETURNSPEC,QUOTE,ASSOC,CDR,ENTRY,LET,WORLD,FNNAME,DEFUN" data-used-by="RETURNSPEC-MULTI-THM,RETURNSPEC-SINGLE-THM" data-part-name="RETURNSPEC-DEFAULT-HINTS" data-part-args="WORLD,FNNAME" data-part-body="FNNAME,SUBST,WORLD,DEFAULT-HINTS-TABLE,TABLE-ALIST,RETURNSPEC,QUOTE,ASSOC,CDR,ENTRY,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-DEFAULT-HINTS">returnspec-default-hints</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-default-hints" data-sym="RETURNSPEC-DEFAULT-HINTS" title="(defun std::returnspec-default-hints (std::fnname std::world)
  (let ((std::entry
         (cdr
          (assoc &#39;std::returnspec
                 (std::table-alist &#39;std::default-hints-table std::world)))))">returnspec-default-hints</a>
  (fnname world)
  (let ((entry (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> 'returnspec
           (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'default-hints-table world)))))
    (<a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a> fnname 'fnname entry)))</pre>
  </div>

<div class="form-block macro" id="def-set-returnspec-default-hints" data-defines="SET-RETURNSPEC-DEFAULT-HINTS" data-references="RETURNSPEC,QUOTE,DEFAULT-HINTS-TABLE,TABLE,QUASIQUOTE,HINT,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-RETURNSPEC-DEFAULT-HINTS">set-returnspec-default-hints</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-set-returnspec-default-hints" data-sym="SET-RETURNSPEC-DEFAULT-HINTS" title="(defmacro std::set-returnspec-default-hints (std::hint)
  `(std::table std::default-hints-table &#39;std::returnspec &#39;,std::hint))">set-returnspec-default-hints</a>
  (hint)
  `(<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> default-hints-table
    'returnspec
    ',STD::HINT))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-set-returnspec-default-hints" data-sym="SET-RETURNSPEC-DEFAULT-HINTS" title="(defmacro std::set-returnspec-default-hints (std::hint)
  `(std::table std::default-hints-table &#39;std::returnspec &#39;,std::hint))">set-returnspec-default-hints</a> ((<a class="sym-link local-def" href="#def-returnspec-default-default-hint" data-sym="RETURNSPEC-DEFAULT-DEFAULT-HINT" title="(defun std::returnspec-default-default-hint (std::fnname std::id std::world)
  (and (eql (std::len (recursivep std::fnname t std::world)) 1)
       (let* ((std::pool-lst (access clause-id std::id :pool-lst)))
         (and (eql 0 (access clause-id std::id :forcing-round))
              (cond
...">returnspec-default-default-hint</a> 'fnname
     id
     world)))</pre>
  </div>

<div class="form-block function" id="def-returnspec-sublis" data-defines="RETURNSPEC-SUBLIS" data-references="CAR,CONS-WITH-HINT,INTERN-IN-PACKAGE-OF-SYMBOL,EQUAL,DUMB-STR-SUBLIS,SYMBOL-NAME,CDR,ASSOC-EQUAL,LOOK,LET,SYMBOLP,ATOM,IF,X,STR-SUBST,SUBST,DEFUN" data-used-by="RETURNSPEC-MULTI-THM,RETURNSPEC-SINGLE-THM" data-part-name="RETURNSPEC-SUBLIS" data-part-args="X,STR-SUBST,SUBST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-SUBLIS">returnspec-sublis</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-sublis" data-sym="RETURNSPEC-SUBLIS" title="(defun std::returnspec-sublis (subst std::str-subst std::x)
  &quot;Like sublis, but only substitutes symbols, and looks them up both by value and by name.&quot;
  (if (atom std::x)
      (if (symbolp std::x)
          (let ((std::look (std::assoc-equal std::x subst)))
...">returnspec-sublis</a>
  (<a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a> str-subst x)
  <span class="string">"Like sublis, but only substitutes symbols, and looks them up both by value and by name."</span>
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (if (symbolp x)
      (let ((look (<a class="sym-link system" href="../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> x <a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a>)))
        (if look
          (cdr look)
          (let ((look (<a class="sym-link system" href="../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (symbol-name x) <a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a>)))
            (if look
              (cdr look)
              (let ((<a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a> (dumb-str-sublis str-subst (symbol-name x))))
                (if (equal <a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a> (symbol-name x))
                  x
                  (intern-in-package-of-symbol <a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a> x)))))))
      x)
    (<a class="sym-link system" href="../../../axioms.html#def-cons-with-hint" data-sym="CONS-WITH-HINT">cons-with-hint</a> (<a class="sym-link local-def" href="#def-returnspec-sublis" data-sym="RETURNSPEC-SUBLIS" title="(defun std::returnspec-sublis (subst std::str-subst std::x)
  &quot;Like sublis, but only substitutes symbols, and looks them up both by value and by name.&quot;
  (if (atom std::x)
      (if (symbolp std::x)
          (let ((std::look (std::assoc-equal std::x subst)))
...">returnspec-sublis</a> <a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a> str-subst (car x))
      (<a class="sym-link local-def" href="#def-returnspec-sublis" data-sym="RETURNSPEC-SUBLIS" title="(defun std::returnspec-sublis (subst std::str-subst std::x)
  &quot;Like sublis, but only substitutes symbols, and looks them up both by value and by name.&quot;
  (if (atom std::x)
      (if (symbolp std::x)
          (let ((std::look (std::assoc-equal std::x subst)))
...">returnspec-sublis</a> <a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a> str-subst (cdr x))
      x)))</pre>
  </div>

<div class="form-block function" id="def-returnspec-strsubst" data-defines="RETURNSPEC-STRSUBST" data-references="QUASIQUOTE,FNNAME-FN,FNNAME,DEFUN" data-used-by="RETURNSPEC-MULTI-THM,RETURNSPEC-SINGLE-THM" data-part-name="RETURNSPEC-STRSUBST" data-part-args="FNNAME-FN,FNNAME" data-part-body="QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-STRSUBST">returnspec-strsubst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-strsubst" data-sym="RETURNSPEC-STRSUBST" title="(defun std::returnspec-strsubst (std::fnname std::fnname-fn)
  `((&quot;&lt;FN&gt;&quot; . ,(symbol-name std::fnname))
    (&quot;&lt;FN!&gt;&quot; . ,(symbol-name std::fnname-fn))))">returnspec-strsubst</a>
  (fnname fnname-fn)
  `((<span class="string">"&lt;FN&gt;"</span> . ,(SYMBOL-NAME STD::FNNAME)) (<span class="string">"&lt;FN!&gt;"</span> . ,(SYMBOL-NAME STD::FNNAME-FN))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-single-thm" data-defines="RETURNSPEC-SINGLE-THM" data-references="DEFTHM,RETURNSPEC-DEFAULT-HINTS,X.HINTS,X.HINTSP,IF,HINTS,X.OPTS,GETARG,HINTS-SUB-RETURNNAMES,RETURNSPEC-STRSUBST,STRSUBST,T,EQ,WHEN,RETURNSPEC-THM-BODY,RETURNSPEC-SUBLIS,FORMULA,QUASIQUOTE,BINDS,LOOK-UP-FORMALS,FORMALS,RETURNSPEC,B*,PLIST-WORLDP,RETURNSPEC-P,SYMBOLP,AND,XARGS,DECLARE,WORLD,CONFIG,BADNAME-OKP,RULECLASS-SUBST,BODY-SUBST,X,NAME-FN,NAME,DEFUN" data-used-by="RETURNSPEC-THMS" data-part-name="RETURNSPEC-SINGLE-THM" data-part-args="WORLD,CONFIG,BADNAME-OKP,RULECLASS-SUBST,BODY-SUBST,X,NAME-FN,NAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-SINGLE-THM">returnspec-single-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-single-thm" data-sym="RETURNSPEC-SINGLE-THM" title="(defun std::returnspec-single-thm
       (std::name std::name-fn std::x std::body-subst std::ruleclass-subst
        std::badname-okp std::config std::world)
  &quot;Returns EVENTS&quot;
  (declare
...">returnspec-single-thm</a>
  (name name-fn
    x
    body-subst
    ruleclass-subst
    badname-okp
    config
    world)
  <span class="string">"Returns EVENTS"</span>
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
        (symbolp name-fn)
        (returnspec-p x)
        (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> world))))
  (b* (((returnspec x) x) (<a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a> (look-up-formals name-fn world))
      (binds `(,STD::X.NAME (,STD::NAME-FN . ,STD::FORMALS)))
      (<a class="sym-link system" href="../../../history-management.html#def-formula" data-sym="FORMULA">formula</a> (<a class="sym-link local-def" href="#def-returnspec-sublis" data-sym="RETURNSPEC-SUBLIS" title="(defun std::returnspec-sublis (subst std::str-subst std::x)
  &quot;Like sublis, but only substitutes symbols, and looks them up both by value and by name.&quot;
  (if (atom std::x)
      (if (symbolp std::x)
          (let ((std::look (std::assoc-equal std::x subst)))
...">returnspec-sublis</a> body-subst
          nil
          (<a class="sym-link local-def" href="#def-returnspec-thm-body" data-sym="RETURNSPEC-THM-BODY" title="(defun std::returnspec-thm-body (std::fnname std::binds std::x std::world)
  (declare
   (std::xargs :guard
    (and (symbolp std::fnname) (std::returnspec-p std::x)
         (std::plist-worldp std::world))))
...">returnspec-thm-body</a> name-fn
            binds
            x
            world)))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="../../../history-management.html#def-formula" data-sym="FORMULA">formula</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)) nil)
      (strsubst (<a class="sym-link local-def" href="#def-returnspec-strsubst" data-sym="RETURNSPEC-STRSUBST" title="(defun std::returnspec-strsubst (std::fnname std::fnname-fn)
  `((&quot;&lt;FN&gt;&quot; . ,(symbol-name std::fnname))
    (&quot;&lt;FN!&gt;&quot; . ,(symbol-name std::fnname-fn))))">returnspec-strsubst</a> name name-fn))
      (hints-sub-returnnames (getarg <span class="keyword">:hints-sub-returnnames</span> (getarg <span class="keyword">:hints-sub-returnnames</span> nil config)
          x.opts))
      (hints (if x.hintsp
          (<a class="sym-link local-def" href="#def-returnspec-sublis" data-sym="RETURNSPEC-SUBLIS" title="(defun std::returnspec-sublis (subst std::str-subst std::x)
  &quot;Like sublis, but only substitutes symbols, and looks them up both by value and by name.&quot;
  (if (atom std::x)
      (if (symbolp std::x)
          (let ((std::look (std::assoc-equal std::x subst)))
...">returnspec-sublis</a> (if hints-sub-returnnames
              ruleclass-subst
              body-subst)
            strsubst
            x.hints)
          (<a class="sym-link local-def" href="#def-returnspec-default-hints" data-sym="RETURNSPEC-DEFAULT-HINTS" title="(defun std::returnspec-default-hints (std::fnname std::world)
  (let ((std::entry
         (cdr
          (assoc &#39;std::returnspec
                 (std::table-alist &#39;std::default-hints-table std::world)))))">returnspec-default-hints</a> name-fn world))))
    `((<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(STD::RETURNSPEC-GENERATE-NAME STD::NAME STD::X T STD::BADNAME-OKP)
       ,STD::FORMULA
       <span class="keyword">:hints</span> ,STD::HINTS
       <span class="keyword">:rule-classes</span> ,(STD::RETURNSPEC-SUBLIS STD::RULECLASS-SUBST NIL STD::X.RULE-CLASSES)))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-multi-thm" data-defines="RETURNSPEC-MULTI-THM" data-references="DEFTHM,QUASIQUOTE,RETURNSPEC-DEFAULT-HINTS,X.HINTS,X.HINTSP,IF,HINTS,X.OPTS,GETARG,HINTS-SUB-RETURNNAMES,RETURNSPEC-STRSUBST,STRSUBST,T,EQUAL,WHEN,RETURNSPEC-THM-BODY,RETURNSPEC-SUBLIS,FORMULA,RETURNSPEC,B*,PLIST-WORLDP,SYMBOL-ALISTP,RETURNSPEC-P,SYMBOLP,AND,XARGS,DECLARE,WORLD,CONFIG,BADNAME-OKP,RULECLASS-SUBST,BODY-SUBST,X,BINDS,NAME-FN,NAME,DEFUN" data-used-by="RETURNSPEC-MULTI-THMS" data-part-name="RETURNSPEC-MULTI-THM" data-part-args="WORLD,CONFIG,BADNAME-OKP,RULECLASS-SUBST,BODY-SUBST,X,BINDS,NAME-FN,NAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-MULTI-THM">returnspec-multi-thm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-multi-thm" data-sym="RETURNSPEC-MULTI-THM" title="(defun std::returnspec-multi-thm
       (std::name std::name-fn std::binds std::x std::body-subst
        std::ruleclass-subst std::badname-okp std::config std::world)
  &quot;Returns EVENTS&quot;
  (declare
...">returnspec-multi-thm</a>
  (name name-fn
    binds
    x
    body-subst
    ruleclass-subst
    badname-okp
    config
    world)
  <span class="string">"Returns EVENTS"</span>
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
        (symbolp name-fn)
        (returnspec-p x)
        (<a class="sym-link system" href="../../../axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> config)
        (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> world))))
  (b* (((returnspec x) x) (<a class="sym-link system" href="../../../history-management.html#def-formula" data-sym="FORMULA">formula</a> (<a class="sym-link local-def" href="#def-returnspec-sublis" data-sym="RETURNSPEC-SUBLIS" title="(defun std::returnspec-sublis (subst std::str-subst std::x)
  &quot;Like sublis, but only substitutes symbols, and looks them up both by value and by name.&quot;
  (if (atom std::x)
      (if (symbolp std::x)
          (let ((std::look (std::assoc-equal std::x subst)))
...">returnspec-sublis</a> body-subst
          nil
          (<a class="sym-link local-def" href="#def-returnspec-thm-body" data-sym="RETURNSPEC-THM-BODY" title="(defun std::returnspec-thm-body (std::fnname std::binds std::x std::world)
  (declare
   (std::xargs :guard
    (and (symbolp std::fnname) (std::returnspec-p std::x)
         (std::plist-worldp std::world))))
...">returnspec-thm-body</a> name-fn
            binds
            x
            world)))
      ((when (equal <a class="sym-link system" href="../../../history-management.html#def-formula" data-sym="FORMULA">formula</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)) nil)
      (strsubst (<a class="sym-link local-def" href="#def-returnspec-strsubst" data-sym="RETURNSPEC-STRSUBST" title="(defun std::returnspec-strsubst (std::fnname std::fnname-fn)
  `((&quot;&lt;FN&gt;&quot; . ,(symbol-name std::fnname))
    (&quot;&lt;FN!&gt;&quot; . ,(symbol-name std::fnname-fn))))">returnspec-strsubst</a> name name-fn))
      (hints-sub-returnnames (getarg <span class="keyword">:hints-sub-returnnames</span> (getarg <span class="keyword">:hints-sub-returnnames</span> nil config)
          x.opts))
      (hints (if x.hintsp
          (<a class="sym-link local-def" href="#def-returnspec-sublis" data-sym="RETURNSPEC-SUBLIS" title="(defun std::returnspec-sublis (subst std::str-subst std::x)
  &quot;Like sublis, but only substitutes symbols, and looks them up both by value and by name.&quot;
  (if (atom std::x)
      (if (symbolp std::x)
          (let ((std::look (std::assoc-equal std::x subst)))
...">returnspec-sublis</a> (if hints-sub-returnnames
              ruleclass-subst
              body-subst)
            strsubst
            x.hints)
          (<a class="sym-link local-def" href="#def-returnspec-default-hints" data-sym="RETURNSPEC-DEFAULT-HINTS" title="(defun std::returnspec-default-hints (std::fnname std::world)
  (let ((std::entry
         (cdr
          (assoc &#39;std::returnspec
                 (std::table-alist &#39;std::default-hints-table std::world)))))">returnspec-default-hints</a> name-fn world))))
    `((<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(STD::RETURNSPEC-GENERATE-NAME STD::NAME STD::X NIL STD::BADNAME-OKP)
       ,STD::FORMULA
       <span class="keyword">:hints</span> ,STD::HINTS
       <span class="keyword">:rule-classes</span> ,(STD::RETURNSPEC-SUBLIS STD::RULECLASS-SUBST NIL STD::X.RULE-CLASSES)))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-multi-thms" data-defines="RETURNSPEC-MULTI-THMS" data-references="CDR,CAR,RETURNSPEC-MULTI-THM,APPEND,ATOM,IF,PLIST-WORLDP,SYMBOL-ALISTP,RETURNSPECLIST-P,SYMBOLP,AND,XARGS,DECLARE,WORLD,CONFIG,BADNAME-OKP,RULECLASS-SUBST,BODY-SUBST,X,BINDS,NAME-FN,NAME,DEFUN" data-used-by="RETURNSPEC-THMS" data-part-name="RETURNSPEC-MULTI-THMS" data-part-args="WORLD,CONFIG,BADNAME-OKP,RULECLASS-SUBST,BODY-SUBST,X,BINDS,NAME-FN,NAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-MULTI-THMS">returnspec-multi-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-multi-thms" data-sym="RETURNSPEC-MULTI-THMS" title="(defun std::returnspec-multi-thms
       (std::name std::name-fn std::binds std::x std::body-subst
        std::ruleclass-subst std::badname-okp std::config std::world)
  &quot;Returns EVENTS&quot;
  (declare
...">returnspec-multi-thms</a>
  (name name-fn
    binds
    x
    body-subst
    ruleclass-subst
    badname-okp
    config
    world)
  <span class="string">"Returns EVENTS"</span>
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
        (symbolp name-fn)
        (<a class="sym-link local-def" href="#def-returnspeclist-p" data-sym="RETURNSPECLIST-P" title="(defun std::returnspeclist-p (std::x)
  (declare (std::xargs :guard t))
  (if (atom std::x)
      t
      (and (std::returnspec-p (car std::x))">returnspeclist-p</a> x)
        (<a class="sym-link system" href="../../../axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> config)
        (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> world))))
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-returnspec-multi-thm" data-sym="RETURNSPEC-MULTI-THM" title="(defun std::returnspec-multi-thm
       (std::name std::name-fn std::binds std::x std::body-subst
        std::ruleclass-subst std::badname-okp std::config std::world)
  &quot;Returns EVENTS&quot;
  (declare
...">returnspec-multi-thm</a> name
        name-fn
        binds
        (car x)
        body-subst
        ruleclass-subst
        badname-okp
        config
        world)
      (<a class="sym-link local-def" href="#def-returnspec-multi-thms" data-sym="RETURNSPEC-MULTI-THMS" title="(defun std::returnspec-multi-thms
       (std::name std::name-fn std::binds std::x std::body-subst
        std::ruleclass-subst std::badname-okp std::config std::world)
  &quot;Returns EVENTS&quot;
  (declare
...">returnspec-multi-thms</a> name
        name-fn
        binds
        (cdr x)
        body-subst
        ruleclass-subst
        badname-okp
        config
        world))))</pre>
  </div>

<div class="form-block function" id="def-make-symbol-ignorable" data-defines="MAKE-SYMBOL-IGNORABLE" data-references="SYMBOL-NAME,STRING,QUOTE,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,SYMBOLP,XARGS,DECLARE,X,DEFUN" data-used-by="MAKE-SYMBOLS-IGNORABLE" data-part-name="MAKE-SYMBOL-IGNORABLE" data-part-args="X" data-part-declare="X,SYMBOLP,XARGS,DECLARE" data-part-body="X,SYMBOL-NAME,STRING,QUOTE,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-SYMBOL-IGNORABLE">make-symbol-ignorable</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-symbol-ignorable" data-sym="MAKE-SYMBOL-IGNORABLE" title="(defun std::make-symbol-ignorable (std::x)
  (declare (std::xargs :guard (symbolp std::x)))
  (std::intern-in-package-of-symbol
   (concatenate &#39;string &quot;?&quot; (symbol-name std::x)) std::x))">make-symbol-ignorable</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (symbolp x)))
  (intern-in-package-of-symbol (<a class="sym-link system" href="../../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../../axioms.html#def-string" data-sym="STRING">string</a> <span class="string">"?"</span> (symbol-name x))
    x))</pre>
  </div>

<div class="form-block function" id="def-make-symbols-ignorable" data-defines="MAKE-SYMBOLS-IGNORABLE" data-references="CDR,CAR,MAKE-SYMBOL-IGNORABLE,CONS,ATOM,IF,SYMBOL-LISTP,XARGS,DECLARE,X,DEFUN" data-used-by="RETURNSPEC-THMS" data-part-name="MAKE-SYMBOLS-IGNORABLE" data-part-args="X" data-part-declare="X,SYMBOL-LISTP,XARGS,DECLARE" data-part-body="CDR,MAKE-SYMBOLS-IGNORABLE,CAR,MAKE-SYMBOL-IGNORABLE,CONS,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-SYMBOLS-IGNORABLE">make-symbols-ignorable</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-symbols-ignorable" data-sym="MAKE-SYMBOLS-IGNORABLE" title="(defun std::make-symbols-ignorable (std::x)
  (declare (std::xargs :guard (std::symbol-listp std::x)))
  (if (atom std::x)
      nil
      (cons (std::make-symbol-ignorable (car std::x))">make-symbols-ignorable</a>
  (x)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> x)))
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (cons (<a class="sym-link local-def" href="#def-make-symbol-ignorable" data-sym="MAKE-SYMBOL-IGNORABLE" title="(defun std::make-symbol-ignorable (std::x)
  (declare (std::xargs :guard (symbolp std::x)))
  (std::intern-in-package-of-symbol
   (concatenate &#39;string &quot;?&quot; (symbol-name std::x)) std::x))">make-symbol-ignorable</a> (car x))
      (<a class="sym-link local-def" href="#def-make-symbols-ignorable" data-sym="MAKE-SYMBOLS-IGNORABLE" title="(defun std::make-symbols-ignorable (std::x)
  (declare (std::xargs :guard (std::symbol-listp std::x)))
  (if (atom std::x)
      nil
      (cons (std::make-symbol-ignorable (car std::x))">make-symbols-ignorable</a> (cdr x)))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-mv-nth-subst" data-defines="RETURNSPEC-MV-NTH-SUBST" data-references="1+,CDR,MV-NTH,QUASIQUOTE,CAR,CONS,ATOM,IF,CALL,IDX,NAMES,DEFUN" data-used-by="RETURNSPEC-RETURN-VALUE-SUBST" data-part-name="RETURNSPEC-MV-NTH-SUBST" data-part-args="CALL,IDX,NAMES" data-part-body="CALL,IDX,1+,CDR,RETURNSPEC-MV-NTH-SUBST,MV-NTH,QUASIQUOTE,CAR,CONS,NAMES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-MV-NTH-SUBST">returnspec-mv-nth-subst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-mv-nth-subst" data-sym="RETURNSPEC-MV-NTH-SUBST" title="(defun std::returnspec-mv-nth-subst (std::names std::idx std::call)
  (if (atom std::names)
      nil
      (cons (cons (car std::names) `(std::mv-nth ,std::idx ,std::call))
            (std::returnspec-mv-nth-subst (cdr std::names) (1+ std::idx)">returnspec-mv-nth-subst</a>
  (names idx call)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> names)
    nil
    (cons (cons (car names) `(<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> ,STD::IDX ,STD::CALL))
      (<a class="sym-link local-def" href="#def-returnspec-mv-nth-subst" data-sym="RETURNSPEC-MV-NTH-SUBST" title="(defun std::returnspec-mv-nth-subst (std::names std::idx std::call)
  (if (atom std::names)
      nil
      (cons (cons (car std::names) `(std::mv-nth ,std::idx ,std::call))
            (std::returnspec-mv-nth-subst (cdr std::names) (1+ std::idx)">returnspec-mv-nth-subst</a> (cdr names)
        (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> idx)
        call))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-symbol-packages" data-defines="RETURNSPEC-SYMBOL-PACKAGES" data-references="CDR,CAR,SYMBOL-PACKAGE-NAME,ADD-TO-SET-EQUAL,ATOM,IF,SYMS,DEFUN" data-part-name="RETURNSPEC-SYMBOL-PACKAGES" data-part-args="SYMS" data-part-body="CDR,RETURNSPEC-SYMBOL-PACKAGES,CAR,SYMBOL-PACKAGE-NAME,ADD-TO-SET-EQUAL,SYMS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-SYMBOL-PACKAGES">returnspec-symbol-packages</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-symbol-packages" data-sym="RETURNSPEC-SYMBOL-PACKAGES" title="(defun std::returnspec-symbol-packages (std::syms)
  (if (atom std::syms)
      nil
      (std::add-to-set-equal (std::symbol-package-name (car std::syms))
       (std::returnspec-symbol-packages (cdr std::syms)))))">returnspec-symbol-packages</a>
  (syms)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> syms)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-add-to-set-equal" data-sym="ADD-TO-SET-EQUAL">add-to-set-equal</a> (symbol-package-name (car syms))
      (<a class="sym-link local-def" href="#def-returnspec-symbol-packages" data-sym="RETURNSPEC-SYMBOL-PACKAGES" title="(defun std::returnspec-symbol-packages (std::syms)
  (if (atom std::syms)
      nil
      (std::add-to-set-equal (std::symbol-package-name (car std::syms))
       (std::returnspec-symbol-packages (cdr std::syms)))))">returnspec-symbol-packages</a> (cdr syms)))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-call-sym-pairs" data-defines="RETURNSPEC-CALL-SYM-PAIRS" data-references="CDR,CAR,INTERN$,CONS,ATOM,IF,CALL,PACKAGES,DEFUN" data-part-name="RETURNSPEC-CALL-SYM-PAIRS" data-part-args="CALL,PACKAGES" data-part-body="CDR,RETURNSPEC-CALL-SYM-PAIRS,CALL,CAR,INTERN$,CONS,PACKAGES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-CALL-SYM-PAIRS">returnspec-call-sym-pairs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-call-sym-pairs" data-sym="RETURNSPEC-CALL-SYM-PAIRS" title="(defun std::returnspec-call-sym-pairs (std::packages std::call)
  (if (atom std::packages)
      nil
      (cons (cons (std::intern$ &quot;&lt;CALL&gt;&quot; (car std::packages)) std::call)
            (std::returnspec-call-sym-pairs (cdr std::packages) std::call))))">returnspec-call-sym-pairs</a>
  (packages call)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> packages)
    nil
    (cons (cons (<a class="sym-link system" href="../../../axioms.html#def-intern_24" data-sym="INTERN$">intern$</a> <span class="string">"&lt;CALL&gt;"</span> (car packages)) call)
      (<a class="sym-link local-def" href="#def-returnspec-call-sym-pairs" data-sym="RETURNSPEC-CALL-SYM-PAIRS" title="(defun std::returnspec-call-sym-pairs (std::packages std::call)
  (if (atom std::packages)
      nil
      (cons (cons (std::intern$ &quot;&lt;CALL&gt;&quot; (car std::packages)) std::call)
            (std::returnspec-call-sym-pairs (cdr std::packages) std::call))))">returnspec-call-sym-pairs</a> (cdr packages)
        call))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-return-value-subst" data-defines="RETURNSPEC-RETURN-VALUE-SUBST" data-references="RETURNSPEC-MV-NTH-SUBST,APPEND,CAR,MV,LEN,EQL,WHEN,QUASIQUOTE,BOTH-SUBST,CONS,CALL,B*,SYMBOL-LISTP,SYMBOLP,AND,XARGS,DECLARE,NAMES,FORMALS,NAME-FN,NAME,DEFUN" data-used-by="RETURNSPEC-THMS" data-part-name="RETURNSPEC-RETURN-VALUE-SUBST" data-part-args="NAMES,FORMALS,NAME-FN,NAME" data-part-declare="NAMES,SYMBOL-LISTP,NAME,SYMBOLP,AND,XARGS,DECLARE" data-part-body="RETURNSPEC-MV-NTH-SUBST,APPEND,CAR,MV,NAMES,LEN,EQL,WHEN,QUASIQUOTE,BOTH-SUBST,FORMALS,NAME-FN,CONS,CALL,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-RETURN-VALUE-SUBST">returnspec-return-value-subst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-return-value-subst" data-sym="RETURNSPEC-RETURN-VALUE-SUBST" title="(defun std::returnspec-return-value-subst
       (std::name std::name-fn std::formals std::names)
  (declare
   (std::xargs :guard
    (and (symbolp std::name) (std::symbol-listp std::names))))
...">returnspec-return-value-subst</a>
  (name name-fn <a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a> names)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp name) (<a class="sym-link system" href="../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> names))))
  (b* ((call (cons name-fn <a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) (both-subst `((<span class="string">"&lt;CALL&gt;"</span> . ,STD::CALL) (<span class="string">"&lt;FN&gt;"</span> . ,STD::NAME)
          (<span class="string">"&lt;FN!&gt;"</span> . ,STD::NAME-FN)
          (<span class="string">"&lt;VALUES&gt;"</span> . ,STD::NAMES)))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> names) <span class="number">1</span>)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> both-subst
          (cons (cons (car names) call) both-subst))))
    (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> both-subst
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> both-subst
        (<a class="sym-link local-def" href="#def-returnspec-mv-nth-subst" data-sym="RETURNSPEC-MV-NTH-SUBST" title="(defun std::returnspec-mv-nth-subst (std::names std::idx std::call)
  (if (atom std::names)
      nil
      (cons (cons (car std::names) `(std::mv-nth ,std::idx ,std::call))
            (std::returnspec-mv-nth-subst (cdr std::names) (1+ std::idx)">returnspec-mv-nth-subst</a> names <span class="number">0</span> call)))))</pre>
  </div>

<div class="form-block function" id="def-returnspec-thms" data-defines="RETURNSPEC-THMS" data-references="RETURNSPEC-MULTI-THMS,QUASIQUOTE,BINDS,MAKE-SYMBOLS-IGNORABLE,IGNORABLE-NAMES,CAR,RETURNSPEC-SINGLE-THM,LEN,EQUAL,WHEN,RETURNSPEC-RETURN-VALUE-SUBST,RULECLASS-SUBST,BODY-SUBST,MV,DEFINE,TABLE-ALIST,RETURNSPEC-CONFIG,QUOTE,ASSOC,CDR,CONFIG,LOOK-UP-FORMALS,FORMALS,RETURNSPECLIST->NAMES,NAMES,T,BADNAME-OKP,UNLESS,ARITY-CHECK-RETURNS,-,B*,PLIST-WORLDP,RETURNSPECLIST-P,SYMBOLP,AND,XARGS,DECLARE,WORLD,SPECS,NAME-FN,NAME,DEFUN" data-part-name="RETURNSPEC-THMS" data-part-args="WORLD,SPECS,NAME-FN,NAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETURNSPEC-THMS">returnspec-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-returnspec-thms" data-sym="RETURNSPEC-THMS" title="(defun std::returnspec-thms (std::name std::name-fn std::specs std::world)
  &quot;Returns EVENTS&quot;
  (declare
   (std::xargs :guard
    (and (symbolp std::name) (symbolp std::name-fn)
...">returnspec-thms</a>
  (name name-fn specs world)
  <span class="string">"Returns EVENTS"</span>
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
        (symbolp name-fn)
        (<a class="sym-link local-def" href="#def-returnspeclist-p" data-sym="RETURNSPECLIST-P" title="(defun std::returnspeclist-p (std::x)
  (declare (std::xargs :guard t))
  (if (atom std::x)
      t
      (and (std::returnspec-p (car std::x))">returnspeclist-p</a> specs)
        (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> world))))
  (b* ((<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link local-def" href="#def-arity-check-returns" data-sym="ARITY-CHECK-RETURNS" title="(defun std::arity-check-returns (std::name std::name-fn std::specs std::world)
  (declare
   (std::xargs :guard
    (and (symbolp std::name) (symbolp std::name-fn)
         (std::returnspeclist-p std::specs) (std::plist-worldp std::world))))
...">arity-check-returns</a> name
         name-fn
         specs
         world)) ((unless specs) nil)
      (badname-okp <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (names (<a class="sym-link local-def" href="#def-returnspeclist-_3Enames" data-sym="RETURNSPECLIST-&gt;NAMES" title="(defun std::returnspeclist-&gt;names (std::x)
  (declare (std::xargs :guard (std::returnspeclist-p std::x)))
  (if (atom std::x)
      nil
      (cons (std::returnspec-&gt;name (car std::x))">returnspeclist-&gt;names</a> specs))
      (<a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a> (look-up-formals name-fn world))
      (config (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> 'returnspec-config
            (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'define world))))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> body-subst ruleclass-subst) (<a class="sym-link local-def" href="#def-returnspec-return-value-subst" data-sym="RETURNSPEC-RETURN-VALUE-SUBST" title="(defun std::returnspec-return-value-subst
       (std::name std::name-fn std::formals std::names)
  (declare
   (std::xargs :guard
    (and (symbolp std::name) (std::symbol-listp std::names))))
...">returnspec-return-value-subst</a> name
          name-fn
          <a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>
          names))
      ((when (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> specs) <span class="number">1</span>)) (<a class="sym-link local-def" href="#def-returnspec-single-thm" data-sym="RETURNSPEC-SINGLE-THM" title="(defun std::returnspec-single-thm
       (std::name std::name-fn std::x std::body-subst std::ruleclass-subst
        std::badname-okp std::config std::world)
  &quot;Returns EVENTS&quot;
  (declare
...">returnspec-single-thm</a> name
          name-fn
          (car specs)
          body-subst
          ruleclass-subst
          badname-okp
          config
          world))
      (ignorable-names (<a class="sym-link local-def" href="#def-make-symbols-ignorable" data-sym="MAKE-SYMBOLS-IGNORABLE" title="(defun std::make-symbols-ignorable (std::x)
  (declare (std::xargs :guard (std::symbol-listp std::x)))
  (if (atom std::x)
      nil
      (cons (std::make-symbol-ignorable (car std::x))">make-symbols-ignorable</a> names))
      (binds `((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> . ,STD::IGNORABLE-NAMES) (,STD::NAME-FN . ,STD::FORMALS))))
    (<a class="sym-link local-def" href="#def-returnspec-multi-thms" data-sym="RETURNSPEC-MULTI-THMS" title="(defun std::returnspec-multi-thms
       (std::name std::name-fn std::binds std::x std::body-subst
        std::ruleclass-subst std::badname-okp std::config std::world)
  &quot;Returns EVENTS&quot;
  (declare
...">returnspec-multi-thms</a> name
      name-fn
      binds
      specs
      body-subst
      ruleclass-subst
      badname-okp
      config
      world)))</pre>
  </div>

<div class="form-block function" id="def-keyval-list-to-kwd-alist" data-defines="KEYVAL-LIST-TO-KWD-ALIST" data-references="CDDR,SECOND,FIRST,CONS,ATOM,IF,ARGS,DEFUN" data-used-by="MAKE-RETURNSPEC-CONFIG" data-part-name="KEYVAL-LIST-TO-KWD-ALIST" data-part-args="ARGS" data-part-body="CDDR,KEYVAL-LIST-TO-KWD-ALIST,SECOND,FIRST,CONS,ARGS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="KEYVAL-LIST-TO-KWD-ALIST">keyval-list-to-kwd-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-keyval-list-to-kwd-alist" data-sym="KEYVAL-LIST-TO-KWD-ALIST" title="(defun std::keyval-list-to-kwd-alist (std::args)
  (if (atom std::args)
      nil
      (cons (cons (first std::args) (second std::args))
            (std::keyval-list-to-kwd-alist (cddr std::args)))))">keyval-list-to-kwd-alist</a>
  (<a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
    nil
    (cons (cons (<a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
      (<a class="sym-link local-def" href="#def-keyval-list-to-kwd-alist" data-sym="KEYVAL-LIST-TO-KWD-ALIST" title="(defun std::keyval-list-to-kwd-alist (std::args)
  (if (atom std::args)
      nil
      (cons (cons (first std::args) (second std::args))
            (std::keyval-list-to-kwd-alist (cddr std::args)))))">keyval-list-to-kwd-alist</a> (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)))))</pre>
  </div>

<div class="form-block macro" id="def-make-returnspec-config" data-defines="MAKE-RETURNSPEC-CONFIG" data-references="RETURNSPEC-CONFIG,DEFINE,TABLE,LOCAL,QUASIQUOTE,QUOTE,KEYVAL-LIST-TO-KWD-ALIST,STRIP-CARS,SUBSETP-EQ,XARGS,DECLARE,ARGS,&REST,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-RETURNSPEC-CONFIG">make-returnspec-config</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-make-returnspec-config" data-sym="MAKE-RETURNSPEC-CONFIG" title="(defmacro std::make-returnspec-config (&amp;rest std::args)
  (declare
   (std::xargs :guard
    (std::subsetp-eq
     (std::strip-cars (std::keyval-list-to-kwd-alist std::args))
...">make-returnspec-config</a>
  (&amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (<a class="sym-link local-def" href="#def-keyval-list-to-kwd-alist" data-sym="KEYVAL-LIST-TO-KWD-ALIST" title="(defun std::keyval-list-to-kwd-alist (std::args)
  (if (atom std::args)
      nil
      (cons (cons (first std::args) (second std::args))
            (std::keyval-list-to-kwd-alist (cddr std::args)))))">keyval-list-to-kwd-alist</a> <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
        '(<span class="keyword">:hints-sub-returnnames</span>))))
  `(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> define
      'returnspec-config
      (<a class="sym-link local-def" href="#def-keyval-list-to-kwd-alist" data-sym="KEYVAL-LIST-TO-KWD-ALIST" title="(defun std::keyval-list-to-kwd-alist (std::args)
  (if (atom std::args)
      nil
      (cons (cons (first std::args) (second std::args))
            (std::keyval-list-to-kwd-alist (cddr std::args)))))">keyval-list-to-kwd-alist</a> ',STD::ARGS))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>