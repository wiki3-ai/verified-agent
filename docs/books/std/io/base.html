<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>base - ACL2 Book</title>
  <meta property="name" content="base">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">base</h1>
    <div class="path"><a href="base.lisp" class="source-link">books/std/io/base</a></div>
  </div>
  
  <main property="text">
  <div class="includes-section">
    <h2>Included Books</h2>
    <div class="includes-list">
      <a class="include-link" href="../../xdoc/top.html" title="xdoc/top">top</a>
      <a class="include-link" href="../../system/f-put-global.html" title="system/f-put-global">f-put-global</a>
      <a class="include-link" href="../../std/lists/list-defuns.html" title="std/lists/list-defuns">list-defuns</a>
      <a class="include-link" href="../../std/basic/bytep.html" title="std/basic/bytep">bytep</a>
      <a class="include-link" href="file-measure.html" title="file-measure">file-measure</a>
      <a class="include-link local" href="../../std/lists/append.html" title="std/lists/append">append</a>
      <a class="include-link local" href="../../std/lists/revappend.html" title="std/lists/revappend">revappend</a>
      <a class="include-link local" href="../../std/lists/rev.html" title="std/lists/rev">rev</a>
      <a class="include-link local" href="../../std/strings/coerce.html" title="std/strings/coerce">coerce</a>
    </div>
  </div>

<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block include-book" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../xdoc/top.html" title="Open xdoc/top">"xdoc/top"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../system/f-put-global.html" title="Open system/f-put-global">"system/f-put-global"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/list-defuns.html" title="Open std/lists/list-defuns">"std/lists/list-defuns"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/basic/bytep.html" title="Open std/basic/bytep">"std/basic/bytep"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="file-measure.html" title="Open file-measure">"file-measure"</a>)</pre>
  </div>

<div class="form-block local" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/append.html" title="Open std/lists/append">"std/lists/append"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block local" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/revappend.html" title="Open std/lists/revappend">"std/lists/revappend"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block local" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/rev.html" title="Open std/lists/rev">"std/lists/rev"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block local" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/strings/coerce.html" title="Open std/strings/coerce">"std/strings/coerce"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block in-theory" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">in-theory</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable bytep))</pre>
  </div>

<div class="form-block local" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-open-channels-p" data-sym="OPEN-CHANNELS-P">open-channels-p</a>
      <a class="sym-link system" href="../../../axioms.html#def-ordered-symbol-alistp" data-sym="ORDERED-SYMBOL-ALISTP">ordered-symbol-alistp</a>
      <a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a>
      <a class="sym-link system" href="../../../axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a>
      <a class="sym-link system" href="../../../axioms.html#def-timer-alistp" data-sym="TIMER-ALISTP">timer-alistp</a>
      <a class="sym-link system" href="../../../axioms.html#def-known-package-alistp" data-sym="KNOWN-PACKAGE-ALISTP">known-package-alistp</a>
      <a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a>
      <a class="sym-link system" href="../../../axioms.html#def-integer-listp" data-sym="INTEGER-LISTP">integer-listp</a>
      <a class="sym-link system" href="../../../axioms.html#def-readable-files-p" data-sym="READABLE-FILES-P">readable-files-p</a>
      <a class="sym-link system" href="../../../axioms.html#def-written-files-p" data-sym="WRITTEN-FILES-P">written-files-p</a>
      <a class="sym-link system" href="../../../axioms.html#def-read-files-p" data-sym="READ-FILES-P">read-files-p</a>
      <a class="sym-link system" href="../../../axioms.html#def-writeable-files-p" data-sym="WRITEABLE-FILES-P">writeable-files-p</a>
      <a class="sym-link system" href="../../../axioms.html#def-true-list-listp" data-sym="TRUE-LIST-LISTP">true-list-listp</a>
      <a class="sym-link system" href="../../../axioms.html#def-all-boundp" data-sym="ALL-BOUNDP">all-boundp</a>
      <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>
      <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>)))</pre>
  </div>

<div class="form-block local" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> evisc-table
    (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> 'quote <a class="sym-link system" href="../../../axioms.html#def-_2Ainitial-global-table_2A" data-sym="*INITIAL-GLOBAL-TABLE*">*initial-global-table*</a>)
    <span class="string">"*INITIAL-GLOBAL-TABLE*"</span>))</pre>
  </div>

<div class="form-block theorem" id="def-open-channel-listp-of-add-pair" data-defines="OPEN-CHANNEL-LISTP-OF-ADD-PAIR" data-references="K,ADD-PAIR,X,OPEN-CHANNEL-LISTP,V,OPEN-CHANNEL1,AND,IMPLIES,DEFTHM" data-part-name="OPEN-CHANNEL-LISTP-OF-ADD-PAIR" data-part-term="K,ADD-PAIR,X,OPEN-CHANNEL-LISTP,V,OPEN-CHANNEL1,AND,IMPLIES" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-CHANNEL-LISTP-OF-ADD-PAIR">open-channel-listp-of-add-pair</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-open-channel-listp-of-add-pair" data-sym="OPEN-CHANNEL-LISTP-OF-ADD-PAIR" title="(defthm open-channel-listp-of-add-pair
        (implies (and (open-channel1 v) (open-channel-listp x))
                 (open-channel-listp (add-pair k v x))))">open-channel-listp-of-add-pair</a>
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> v) (<a class="sym-link system" href="../../../axioms.html#def-open-channel-listp" data-sym="OPEN-CHANNEL-LISTP">open-channel-listp</a> x))
    (<a class="sym-link system" href="../../../axioms.html#def-open-channel-listp" data-sym="OPEN-CHANNEL-LISTP">open-channel-listp</a> (<a class="sym-link system" href="../../../axioms.html#def-add-pair" data-sym="ADD-PAIR">add-pair</a> k v x))))</pre>
  </div>

<div class="form-block theorem" id="def-open-channels-p-of-add-pair" data-defines="OPEN-CHANNELS-P-OF-ADD-PAIR" data-references="ENABLE,ADD-PAIR,X,OPEN-CHANNELS-P,V,OPEN-CHANNEL1,K,SYMBOLP,AND,IMPLIES,DEFTHM" data-part-name="OPEN-CHANNELS-P-OF-ADD-PAIR" data-part-term="ADD-PAIR,X,OPEN-CHANNELS-P,V,OPEN-CHANNEL1,K,SYMBOLP,AND,IMPLIES" data-part-hints="OPEN-CHANNELS-P,ENABLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-CHANNELS-P-OF-ADD-PAIR">open-channels-p-of-add-pair</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button><button class="part-btn" data-part="hints">hints</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-open-channels-p-of-add-pair" data-sym="OPEN-CHANNELS-P-OF-ADD-PAIR" title="(defthm open-channels-p-of-add-pair
        (implies (and (symbolp k) (open-channel1 v) (open-channels-p x))
                 (open-channels-p (add-pair k v x)))
        :hints ((&quot;Goal&quot; :in-theory (enable open-channels-p))))">open-channels-p-of-add-pair</a>
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp k) (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> v) (<a class="sym-link system" href="../../../axioms.html#def-open-channels-p" data-sym="OPEN-CHANNELS-P">open-channels-p</a> x))
    (<a class="sym-link system" href="../../../axioms.html#def-open-channels-p" data-sym="OPEN-CHANNELS-P">open-channels-p</a> (<a class="sym-link system" href="../../../axioms.html#def-add-pair" data-sym="ADD-PAIR">add-pair</a> k v x)))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-open-channels-p" data-sym="OPEN-CHANNELS-P">open-channels-p</a>))))</pre>
  </div>

<div class="form-block theorem" id="def-open-channels-p-of-remove1-assoc-equal" data-defines="OPEN-CHANNELS-P-OF-REMOVE1-ASSOC-EQUAL" data-references="ORDERED-SYMBOL-ALISTP,OPEN-CHANNEL-LISTP,ENABLE,K,REMOVE1-ASSOC-EQUAL,X,OPEN-CHANNELS-P,IMPLIES,DEFTHM" data-part-name="OPEN-CHANNELS-P-OF-REMOVE1-ASSOC-EQUAL" data-part-term="K,REMOVE1-ASSOC-EQUAL,X,OPEN-CHANNELS-P,IMPLIES" data-part-hints="ORDERED-SYMBOL-ALISTP,OPEN-CHANNEL-LISTP,OPEN-CHANNELS-P,ENABLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-CHANNELS-P-OF-REMOVE1-ASSOC-EQUAL">open-channels-p-of-remove1-assoc-equal</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button><button class="part-btn" data-part="hints">hints</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-open-channels-p-of-remove1-assoc-equal" data-sym="OPEN-CHANNELS-P-OF-REMOVE1-ASSOC-EQUAL" title="(defthm open-channels-p-of-remove1-assoc-equal
        (implies (open-channels-p x)
                 (open-channels-p (remove1-assoc-equal k x)))
        :hints
        ((&quot;Goal&quot; :in-theory">open-channels-p-of-remove1-assoc-equal</a>
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channels-p" data-sym="OPEN-CHANNELS-P">open-channels-p</a> x)
    (<a class="sym-link system" href="../../../axioms.html#def-open-channels-p" data-sym="OPEN-CHANNELS-P">open-channels-p</a> (<a class="sym-link system" href="../../../axioms.html#def-remove1-assoc-equal" data-sym="REMOVE1-ASSOC-EQUAL">remove1-assoc-equal</a> k x)))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-open-channels-p" data-sym="OPEN-CHANNELS-P">open-channels-p</a>
       <a class="sym-link system" href="../../../axioms.html#def-open-channel-listp" data-sym="OPEN-CHANNEL-LISTP">open-channel-listp</a>
       <a class="sym-link system" href="../../../axioms.html#def-ordered-symbol-alistp" data-sym="ORDERED-SYMBOL-ALISTP">ordered-symbol-alistp</a>))))</pre>
  </div>

<div class="form-block theorem" id="def-lookup-in-readable-files-p" data-defines="LOOKUP-IN-READABLE-FILES-P" data-references="ENABLE,CDR,TYPED-IO-LISTP,CADR,TYPE,EQUAL,K,ASSOC-EQUAL,X,READABLE-FILES-P,AND,IMPLIES,DEFTHM" data-part-name="LOOKUP-IN-READABLE-FILES-P" data-part-term="CDR,TYPED-IO-LISTP,CADR,TYPE,EQUAL,K,ASSOC-EQUAL,X,READABLE-FILES-P,AND,IMPLIES" data-part-hints="READABLE-FILES-P,ENABLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LOOKUP-IN-READABLE-FILES-P">lookup-in-readable-files-p</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button><button class="part-btn" data-part="hints">hints</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-lookup-in-readable-files-p" data-sym="LOOKUP-IN-READABLE-FILES-P" title="(defthm lookup-in-readable-files-p
        (implies
         (and (readable-files-p x) (assoc-equal k x) (equal type (cadr k)))
         (typed-io-listp (cdr (assoc-equal k x)) type))
        :hints ((&quot;Goal&quot; :in-theory (enable readable-files-p))))">lookup-in-readable-files-p</a>
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-readable-files-p" data-sym="READABLE-FILES-P">readable-files-p</a> x)
      (<a class="sym-link system" href="../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> k x)
      (equal type (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> k)))
    (<a class="sym-link system" href="../../../axioms.html#def-typed-io-listp" data-sym="TYPED-IO-LISTP">typed-io-listp</a> (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> k x)) type))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-readable-files-p" data-sym="READABLE-FILES-P">readable-files-p</a>))))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link system" href="../../../axioms.html#def-_2Afile-types_2A" data-sym="*FILE-TYPES*">*file-types*</a>
  <span class="keyword">:parents</span> (std/io)
  <span class="keyword">:short</span> <span class="string">"Different ways to open files for reading and writing."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;See @(see io) for general discussion of file types.&lt;/p&gt;

@(def *file-types*)"</span>)</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/open-input-channel
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a>)
  <span class="keyword">:short</span> <span class="string">"Open an file for reading."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;&lt;b&gt;Signature:&lt;/b&gt; @(call open-input-channel) returns @(&#39;(mv channel
state)&#39;)&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;file-name&#39;) is a string that names the file to open.&lt;/li&gt;

&lt;li&gt;@(&#39;typ&#39;) is the type of input to be used and must be one of the valid @(see
*file-types*).&lt;/li&gt;

&lt;li&gt;@(&#39;state&#39;) is the ACL2 @(see state).&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;This is a @(see logic)-mode function, but its logical definition is tricky;
see @(see logical-story-of-io).  The main logical consequence is that (on
success) @(&#39;channel&#39;) will become an open input channel of the indicated type,
and hence can be read from or closed.&lt;/p&gt;

&lt;p&gt;Under the hood, we use Lisp&#39;s file operations to try to open the file.  On
success, @(&#39;channel&#39;) is a symbol in the @(&#39;ACL2-INPUT-CHANNEL&#39;) package.
Under the hood, this symbol will be associated with a raw Lisp file stream.
Note that to avoid resource leaks, you should eventually use @(see
close-input-channel) to free this stream.&lt;/p&gt;

&lt;p&gt;On failure, @(&#39;channel&#39;) is @(&#39;nil&#39;).  There are various reasons that
@(&#39;open-input-channel&#39;) can fail.  For example, this can happen if you try to
open a file that does not exist or for which you do not have permission.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-open-input-channel
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (stringp fname)
        (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> type <a class="sym-link system" href="../../../axioms.html#def-_2Afile-types_2A" data-sym="*FILE-TYPES*">*file-types*</a>))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> fname type state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symbolp-of-open-input-channel
    (symbolp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> fname type state)))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-input-channel-p1-of-open-input-channel
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (stringp fname)
        (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> type <a class="sym-link system" href="../../../axioms.html#def-_2Afile-types_2A" data-sym="*FILE-TYPES*">*file-types*</a>)
        (equal channel
          (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> fname type state)))
        channel)
      (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel
        type
        (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> fname type state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>)))))</pre>
  </div>

<div class="form-block local" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-in-open-channels-p
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channels-p" data-sym="OPEN-CHANNELS-P">open-channels-p</a> x) (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> k x))
      (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> k x))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-open-channels-p" data-sym="OPEN-CHANNELS-P">open-channels-p</a>
         <a class="sym-link system" href="../../../axioms.html#def-ordered-symbol-alistp" data-sym="ORDERED-SYMBOL-ALISTP">ordered-symbol-alistp</a>
         <a class="sym-link system" href="../../../axioms.html#def-open-channel-listp" data-sym="OPEN-CHANNEL-LISTP">open-channel-listp</a>)))))</pre>
  </div>

<div class="form-block local" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-channel1-of-read
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> x)
      (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> (cons (car x) (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> x))))))</pre>
  </div>

<div class="form-block local" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> read-file-listp1-from-open-channel1
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> x) (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> y))
      (<a class="sym-link system" href="../../../axioms.html#def-read-file-listp1" data-sym="READ-FILE-LISTP1">read-file-listp1</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-caddar" data-sym="CADDAR">caddar</a> x) (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> x) (<a class="sym-link system" href="../../../axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (car x)) y)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> <a class="sym-link system" href="../../../axioms.html#def-read-file-listp1" data-sym="READ-FILE-LISTP1">read-file-listp1</a>)))))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/close-input-channel
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a>)
  <span class="keyword">:short</span> <span class="string">"Close an input channel."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;&lt;b&gt;Signature&lt;/b&gt;: @(call close-input-channel) returns
@(&#39;state&#39;).&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;channel&#39;) is a symbol that must refer to a currently open input channel;
see @(see open-input-channel).&lt;/li&gt;

&lt;li&gt;@(&#39;state&#39;) is the ACL2 @(see state).&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;This is a @(see logic)-mode function, but its logical definition is tricky;
see @(see logical-story-of-io).  The main logical consequence is that
@(&#39;channel&#39;) will no longer be an open input channel, and hence can no longer
be read from or closed.&lt;/p&gt;

&lt;p&gt;Under the hood, we close the raw Lisp stream associated with @(&#39;channel&#39;).
It is generally necessary to close the input channels when you are done with
them to avoid resource leaks.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-close-input-channel-free
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel type state)
        (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> channel state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> <a class="sym-link system" href="../../../axioms.html#def-read-files-p" data-sym="READ-FILES-P">read-files-p</a>) (<a class="sym-link system" href="../../../axioms.html#def-read-file-listp1" data-sym="READ-FILE-LISTP1">read-file-listp1</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-close-input-channel-types
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state)
          (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:object</span> state)
          (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:character</span> state))
        (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> channel state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../../axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> <a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-close-input-channel-of-open
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> fname type state1))
          type
          state)
        (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> fname type state1))
          state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../../axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a>
         <a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a>
         <a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a>)))))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/read-char$
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a>)
  <span class="keyword">:short</span> <span class="string">"Read one character from an open @(&#39;:character&#39;) stream."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;NOTE: We generally prefer to avoid @(see read-char$).  It is easy
to use @(see read-byte$) instead, which is generally more efficient and avoids
certain character-encoding issues; see below for details.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Signature:&lt;/b&gt; @(call read-char$) returns @(&#39;(mv char/nil state)&#39;).&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;channel&#39;) is a symbol that must refer to an open @(&#39;:character&#39;) input
channel; see @(see open-input-channel).&lt;/li&gt;

&lt;li&gt;@(&#39;state&#39;) is the ACL2 @(see state).&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;This is a @(see logic)-mode function, but its logical definition is tricky;
see @(see logical-story-of-io).  The main logical consequence is the updating
of state.&lt;/p&gt;

&lt;p&gt;Under the hood, we read a &lt;see topic=&#39;@(url characters)&#39;&gt;character&lt;/see&gt;
from the Lisp input stream that is associated with @(&#39;channel&#39;).  If we reach
the end of the file, @(&#39;nil&#39;) is returned.&lt;/p&gt;

&lt;h3&gt;Character versus Byte Input&lt;/h3&gt;

&lt;p&gt;In some sense, it is redundant for ACL2 to have separate kinds of input
channels for characters and bytes.  After all, ACL2 has exactly 256 @(see
characters) corresponding to bytes 0-255, and provides functions like @(see
char-code) and @(see code-char) for converting between these characters and
bytes.  So, one could easily define @(&#39;read-char$&#39;) as a wrapper that calls
@(&#39;code-char&#39;) on @(&#39;read-byte$&#39;), or could define @(&#39;read-byte$&#39;) as a wrapper
for @(&#39;read-char$&#39;) that calls @(&#39;char-code&#39;).&lt;/p&gt;

&lt;p&gt;That being said, we generally prefer to use byte input.  Common Lisp
implementations have some freedom in how they implement characters.  Because of
this, and because different Lisps might try to use different encodings when
reading files, ACL2&#39;s @(&#39;read-char$&#39;) has some extra checks to make sure that
the characters being read in are legal.  At any rate, for a basic timing test
on CCL, we measured @(&#39;read-char$&#39;) at 12.5% slower than @(&#39;read-byte$&#39;) with
@(&#39;code-char&#39;).&lt;/p&gt;

&lt;p&gt;On the other hand, there is no equivalent of @(&#39;peek-char$&#39;) for @(&#39;:byte&#39;)
input streams.  So, that might be worth considering.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-read-char$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (symbolp channel)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:character</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> channel state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>) (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-input-channel-p1-of-read-char$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:character</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel
        <span class="keyword">:character</span> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> channel state)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> character-cadr-of-open-channel1
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> x) (equal (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> x) <span class="keyword">:character</span>) (cdr x))
        (characterp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> characterp-of-read-char$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> channel state))
        (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:character</span> state))
      (characterp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> channel state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>) (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a>))))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
            (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:character</span> state))
          (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (characterp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> channel state)))
            (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> channel state)))))))))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/peek-char$
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-peek-char_24" data-sym="PEEK-CHAR$">peek-char$</a>)
  <span class="keyword">:short</span> <span class="string">"Inspect the next character that will be read from an open
@(&#39;:character&#39;) input stream."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;&lt;b&gt;Signature:&lt;/b&gt; @(call peek-char$) returns @(&#39;char/nil&#39;).&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;channel&#39;) is a symbol that must refer to an open @(&#39;:character&#39;) input
channel; see @(see open-input-channel).&lt;/li&gt;

&lt;li&gt;@(&#39;state&#39;) is the ACL2 @(see state).&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;This is a @(see logic)-mode function, but its logical definition is tricky;
see @(see logical-story-of-io).&lt;/p&gt;

&lt;p&gt;Under the hood, this uses Lisp&#39;s I/O functions to say which character will
be retrieved next by @(see read-char$), without altering the contents of the
stream.  This provides only a single character of lookahead.&lt;/p&gt;

&lt;p&gt;You should typically never need to reason about @(&#39;peek-char$&#39;).  We prove
it returns the same thing as @(&#39;read-char$&#39;), so you should be able to just
reason about @(&#39;read-char$&#39;) instead.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> peek-char$-removal
    (equal (<a class="sym-link system" href="../../../axioms.html#def-peek-char_24" data-sym="PEEK-CHAR$">peek-char$</a> channel state)
      (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> channel state))))
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-peek-char_24" data-sym="PEEK-CHAR$">peek-char$</a>)))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/read-byte$
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a>)
  <span class="keyword">:short</span> <span class="string">"Read one byte from an open @(&#39;:byte&#39;) stream."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;&lt;b&gt;Signature:&lt;/b&gt; @(call read-byte$) returns @(&#39;(mv byte/nil
state)&#39;).&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;channel&#39;) is a symbol that must refer to an open @(&#39;:byte&#39;) input
channel; see @(see open-input-channel).&lt;/li&gt;

&lt;li&gt;@(&#39;state&#39;) is the ACL2 @(see state).&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;This is a @(see logic)-mode function, but its logical definition is tricky;
see @(see logical-story-of-io).  The main logical consequence is the updating
of state.&lt;/p&gt;

&lt;p&gt;Under the hood, we read a byte (i.e., a number between 0 and 255, inclusive)
from the Lisp input stream that is associated with @(&#39;channel&#39;).  If we reach
the end of the file, @(&#39;nil&#39;) is returned.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-read-byte$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (symbolp channel)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>) (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-input-channel-p1-of-read-byte$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel
        <span class="keyword">:byte</span> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bytep-cadr-of-open-channel1
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> x) (equal (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> x) <span class="keyword">:byte</span>) (cdr x))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (bytep (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x))
          (<a class="sym-link system" href="../../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> <span class="number">8</span> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x))
          (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x))
          (integerp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bytep-of-read-byte$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state)
        (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (bytep (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))
        (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))
        (integerp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))
        (<a class="sym-link system" href="../../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> <span class="number">8</span> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>) (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> bytep)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bytep-of-read-byte$-type
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))
        (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> bytep-of-read-byte$))
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bytep-of-read-byte$-linear
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)) <span class="number">256</span>)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> bytep-of-read-byte$))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> l1
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
          (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state))
        (<a class="sym-link system" href="../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((entry (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> channel (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> state)))) (<a class="sym-link system" href="../../../axioms.html#def-header" data-sym="HEADER">header</a> (car entry)))
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> entry) (equal (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> <a class="sym-link system" href="../../../axioms.html#def-header" data-sym="HEADER">header</a>) <span class="keyword">:byte</span>))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> l2
      (let ((<a class="sym-link system" href="../../../axioms.html#def-header" data-sym="HEADER">header</a> (car entry)) (stream (cdr entry)))
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> entry) (equal (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> <a class="sym-link system" href="../../../axioms.html#def-header" data-sym="HEADER">header</a>) <span class="keyword">:byte</span>))
          (<a class="sym-link system" href="../../../axioms.html#def-typed-io-listp" data-sym="TYPED-IO-LISTP">typed-io-listp</a> stream <span class="keyword">:byte</span>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> l3
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-typed-io-listp" data-sym="TYPED-IO-LISTP">typed-io-listp</a> <span class="keyword">:byte</span> x) (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (car x)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> l4
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
          (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state))
        (<a class="sym-link system" href="../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((entry (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> channel (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> state)))) (stream (cdr entry)))
          (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (car stream)) (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> stream)))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable l1 l2)
         <span class="keyword">:use</span> ((<span class="keyword">:instance</span> l1) (<span class="keyword">:instance</span> l2
             (entry (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> channel (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> state))))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> no-bytes-after-read-byte$-null
    (let ((byte1 (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state))) (state2 (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state))))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> byte1)
          (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
          (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state2)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a>)))))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/read-object
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a>)
  <span class="keyword">:short</span> <span class="string">"Read one object from an open @(&#39;:object&#39;) stream."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;&lt;b&gt;Signature:&lt;/b&gt; @(call read-object) returns @(&#39;(mv eofp obj
state)&#39;).&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;channel&#39;) is a symbol that must refer to an open @(&#39;:object&#39;) input
channel; see @(see open-input-channel).&lt;/li&gt;

&lt;li&gt;@(&#39;state&#39;) is the ACL2 @(see state).&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;This is a @(see logic)-mode function, but its logical definition is tricky;
see @(see logical-story-of-io).  The main logical consequence is the updating
of state.&lt;/p&gt;

&lt;p&gt;Under the hood, we use the Lisp reader to try to read an object from the
Lisp input stream that is associated with @(&#39;channel&#39;).&lt;/p&gt;

&lt;p&gt;Ideally, the input stream contains well-formed S-expressions that are free
of &quot;bad&quot; objects like @(&#39;0.75&#39;), symbols from packages that ACL2 doesn&#39;t know
about, etc; see @(see ACL2::|About Types|).  In this case, @(&#39;read-object&#39;)
reads the first S-expression in the file and returns it as @(&#39;obj&#39;), setting
@(&#39;eofp&#39;) to @(&#39;nil&#39;).  If there are no more S-expressions in the file,
@(&#39;eofp&#39;) is @(&#39;t&#39;) and @(&#39;obj&#39;) is @(&#39;nil&#39;).&lt;/p&gt;

&lt;p&gt;But the input stream can also be malformed.  For instance, we might
encounter malformed S-expressions without enough closing parens, or bad objects
like @(&#39;0.75&#39;).  These sorts of problems will cause hard errors or raw Lisp
errors!&lt;/p&gt;

&lt;p&gt;Note that if the input contains plain symbols without explicit package name
prefixes, e.g., @(&#39;foo&#39;) instead of @(&#39;acl2::foo&#39;), then these symbols will be
treated as coming from the current package.  If that isn&#39;t what you want, you
can explicily call @(see in-package) to switch into whatever package you want
to be the default.  For example, if the file @(&#39;temp&#39;) contains exactly:&lt;/p&gt;

@({
foo
})

&lt;p&gt;Then the following book:&lt;/p&gt;

@({
 (in-package &quot;ACL2&quot;)
 (include-book &quot;std/util/bstar&quot; :dir :system)
 (include-book &quot;centaur/vl/portcullis&quot; :dir :system)

 (make-event
  (b* (((mv ?err ?val state) (in-package &quot;VL&quot;))
       ((mv channel state)   (open-input-channel &quot;temp&quot; :object state))
       ((mv ?eofp obj state) (read-object channel state))
       (state                (close-input-channel channel state)))
    (value `(defconst *foo* &#39;,obj))))
})

&lt;p&gt;Defines @(&#39;*foo*&#39;) as the symbol @(&#39;vl::foo&#39;), instead of
@(&#39;acl2::foo&#39;).&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../kestrel/file-io-light/read-object.html" title="Open kestrel/file-io-light/read-object">"kestrel/file-io-light/read-object"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-read-object
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span> (<a class="sym-link system" href="../../../axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> channel state))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-input-channel-p1-of-read-object
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:object</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel
        <span class="keyword">:object</span> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span> (<a class="sym-link system" href="../../../axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> channel state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-put-global" data-sym="PUT-GLOBAL">put-global</a>
         <a class="sym-link system" href="../../../axioms.html#def-read-acl2-oracle" data-sym="READ-ACL2-ORACLE">read-acl2-oracle</a>
         <a class="sym-link system" href="../../../axioms.html#def-update-acl2-oracle" data-sym="UPDATE-ACL2-ORACLE">update-acl2-oracle</a>
         <a class="sym-link system" href="../../../axioms.html#def-iprint-oracle-updates" data-sym="IPRINT-ORACLE-UPDATES">iprint-oracle-updates</a>)))))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> state-preserved-after-eof
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lemma
      (equal (equal a (cons x y))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp a) (equal (car a) x) (equal (cdr a) y)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lemma2-char
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> foo)
          (equal (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> foo) <span class="keyword">:character</span>)
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> foo)))
        (equal (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> foo) (cdr foo)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lemma2-byte
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> foo)
          (equal (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> foo) <span class="keyword">:byte</span>)
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> foo)))
        (equal (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> foo) (cdr foo)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a>)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> update-nth-of-nth-same
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x))
        (equal (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> n (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x) x) x))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>)))))
  (<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> <a class="sym-link system" href="../../../axioms.html#def-char" data-sym="CHAR">char</a>
    <span class="keyword">:extension</span> std/io/read-char$
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-preserved-by-read-char$-when-eof
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> channel state)))
          (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
          (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:character</span> state))
        (equal (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> channel state)) state))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> <a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>))))))
  (<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> byte
    <span class="keyword">:extension</span> std/io/read-byte$
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-preserved-by-read-byte$-when-eof
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)))
          (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
          (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a> channel <span class="keyword">:byte</span> state))
        (equal (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> channel state)) state))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a> <a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>)))))))</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/read-file-into-string
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-read-file-into-string" data-sym="READ-FILE-INTO-STRING">read-file-into-string</a>)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;See @(see read-file-into-string).&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> <a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a>)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stringp-of-read-file-into-string1
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-file-into-string1" data-sym="READ-FILE-INTO-STRING1">read-file-into-string1</a> channel state ans bound))))
      (stringp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-file-into-string1" data-sym="READ-FILE-INTO-STRING1">read-file-into-string1</a> channel state ans bound))))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-file-into-string1" data-sym="READ-FILE-INTO-STRING1">read-file-into-string1</a> channel state ans bound)))
          (stringp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-read-file-into-string1" data-sym="READ-FILE-INTO-STRING1">read-file-into-string1</a> channel state ans bound)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-read-file-into-string1
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp channel)
        (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p" data-sym="OPEN-INPUT-CHANNEL-P">open-input-channel-p</a> channel <span class="keyword">:character</span> state)
        (<a class="sym-link system" href="../../../axioms.html#def-state-p" data-sym="STATE-P">state-p</a> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-read-file-into-string1" data-sym="READ-FILE-INTO-STRING1">read-file-into-string1</a> channel state ans bound))))))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/open-output-channel
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a>)
  <span class="keyword">:short</span> <span class="string">"Open a file for writing."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;&lt;b&gt;Signature:&lt;/b&gt; @(call open-output-channel) returns @(&#39;(mv
channel state)&#39;)&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;file-name&#39;) can be either @(&#39;:string&#39;) (to indicate that you want to
print to a string stream), or a string like @(&#39;&quot;temp.txt&quot;&#39;) that names the
file to write to.&lt;/li&gt;

&lt;li&gt;@(&#39;typ&#39;) is the type of input to be used and must be one of the valid @(see
*file-types*).&lt;/li&gt;

&lt;li&gt;@(&#39;state&#39;) is the ACL2 @(see state).&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;This is a @(see logic)-mode function, but its logical definition is tricky;
see @(see logical-story-of-io).  The main logical consequence is that (on
success) @(&#39;channel&#39;) will become an open output channel of the indicated type,
and hence can be written to or closed.&lt;/p&gt;

&lt;p&gt;Under the hood, we either create a new Lisp string stream in memory (when
@(&#39;file-name&#39;) is @(&#39;:string&#39;)) or we use Lisp&#39;s file operations to open
@(&#39;file-name&#39;) for writing.  Note that if @(&#39;file-name&#39;) refers to a file that
already exists, it will be overwritten (i.e., not appended to).&lt;/p&gt;

&lt;p&gt;On success, @(&#39;channel&#39;) is a symbol in the @(&#39;ACL2-OUTPUT-CHANNEL&#39;)
package.  Under the hood, this symbol will be associated with the Lisp stream.
Note that to avoid resource leaks, you should eventually use @(see
close-output-channel) to free this stream.&lt;/p&gt;

&lt;p&gt;On failure, @(&#39;channel&#39;) is @(&#39;nil&#39;).  There are various reasons that
@(&#39;open-output-channel&#39;) can fail.  For example, this can happen if you try to
write to a file in a directory that does not exist, and it may happen
(depending on your host Lisp) if you try to open a file for which you do not
have permission.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-open-output-channel
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (stringp fname)
        (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> type <a class="sym-link system" href="../../../axioms.html#def-_2Afile-types_2A" data-sym="*FILE-TYPES*">*file-types*</a>))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> fname type state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symbolp-of-open-output-channel
    (symbolp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> fname type state)))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-output-channel-p1-of-open-output-channel
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (stringp fname)
        (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> type <a class="sym-link system" href="../../../axioms.html#def-_2Afile-types_2A" data-sym="*FILE-TYPES*">*file-types*</a>)
        (equal channel
          (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> fname type state)))
        channel)
      (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel
        type
        (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> fname type state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-output-channel-p1-of-put-global
    (equal (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel
        type
        (<a class="sym-link system" href="../../../axioms.html#def-put-global" data-sym="PUT-GLOBAL">put-global</a> key val state))
      (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel type state))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> <a class="sym-link system" href="../../../axioms.html#def-put-global" data-sym="PUT-GLOBAL">put-global</a>)))))</pre>
  </div>

<div class="form-block local" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> written-file-from-open-channel1
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> x) (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> y))
      (<a class="sym-link system" href="../../../axioms.html#def-written-file" data-sym="WRITTEN-FILE">written-file</a> (cons (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-caddar" data-sym="CADDAR">caddar</a> x) (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> x) (<a class="sym-link system" href="../../../axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> (car x)) y)
          (cdr x))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> <a class="sym-link system" href="../../../axioms.html#def-written-file" data-sym="WRITTEN-FILE">written-file</a>)))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/close-output-channel
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a>)
  <span class="keyword">:short</span> <span class="string">"Close an output channel."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;&lt;b&gt;Signature&lt;/b&gt;: @(call close-output-channel) returns
@(&#39;state&#39;).&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;channel&#39;) is a symbol that must refer to a currently open output
channel; see @(see open-output-channel).&lt;/li&gt;

&lt;li&gt;@(&#39;state&#39;) is the ACL2 @(see state).&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;This is a @(see logic)-mode function, but its logical definition is tricky;
see @(see logical-story-of-io).  The main logical consequence is that
@(&#39;channel&#39;) will no longer be an open output channel, and hence can no longer
be written to or closed.&lt;/p&gt;

&lt;p&gt;Under the hood, we close the raw Lisp stream associated with @(&#39;channel&#39;).
This typically involves flushing the buffers associated with the file (i.e.,
actually writing your output to disk).  It is generally necessary to close
output channels when you are done with them to avoid resource leaks.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-close-output-channel-free
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel type state)
        (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> channel state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> <a class="sym-link system" href="../../../axioms.html#def-written-files-p" data-sym="WRITTEN-FILES-P">written-files-p</a>) (<a class="sym-link system" href="../../../axioms.html#def-written-file" data-sym="WRITTEN-FILE">written-file</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-close-output-channel-types
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:byte</span> state)
          (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:object</span> state)
          (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:character</span> state))
        (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> channel state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../../axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> <a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-close-output-channel-of-open
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> fname type state1))
          type
          state)
        (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> fname type state1))
          state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../../axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a>
         <a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a>
         <a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a>)))))</pre>
  </div>

<div class="form-block theorem" id="def-open-channel1-of-cons-byte" data-defines="OPEN-CHANNEL1-OF-CONS-BYTE" data-references="CDR,CAR,LIST*,<,Y,NATP,CADAR,EQUAL,X,OPEN-CHANNEL1,AND,IMPLIES,DEFTHM" data-part-name="OPEN-CHANNEL1-OF-CONS-BYTE" data-part-term="CDR,CAR,LIST*,<,Y,NATP,CADAR,EQUAL,X,OPEN-CHANNEL1,AND,IMPLIES" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-CHANNEL1-OF-CONS-BYTE">open-channel1-of-cons-byte</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-open-channel1-of-cons-byte" data-sym="OPEN-CHANNEL1-OF-CONS-BYTE" title="(defthm open-channel1-of-cons-byte
        (implies
         (and (open-channel1 x) (equal (cadar x) :byte) (natp y) (&lt; y 256))
         (open-channel1 (list* (car x) y (cdr x)))))">open-channel1-of-cons-byte</a>
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> x)
      (equal (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> x) <span class="keyword">:byte</span>)
      (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> y)
      (&lt; y <span class="number">256</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> (<a class="sym-link system" href="../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car x) y (cdr x)))))</pre>
  </div>

<div class="form-block theorem" id="def-open-channel1-of-cons-object" data-defines="OPEN-CHANNEL1-OF-CONS-OBJECT" data-references="CDR,Y,CAR,LIST*,CADAR,EQUAL,X,OPEN-CHANNEL1,AND,IMPLIES,DEFTHM" data-part-name="OPEN-CHANNEL1-OF-CONS-OBJECT" data-part-term="CDR,Y,CAR,LIST*,CADAR,EQUAL,X,OPEN-CHANNEL1,AND,IMPLIES" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-CHANNEL1-OF-CONS-OBJECT">open-channel1-of-cons-object</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-open-channel1-of-cons-object" data-sym="OPEN-CHANNEL1-OF-CONS-OBJECT" title="(defthm open-channel1-of-cons-object
        (implies (and (open-channel1 x) (equal (cadar x) :object))
                 (open-channel1 (list* (car x) y (cdr x)))))">open-channel1-of-cons-object</a>
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> x) (equal (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> x) <span class="keyword">:object</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> (<a class="sym-link system" href="../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car x) y (cdr x)))))</pre>
  </div>

<div class="form-block theorem" id="def-typed-io-listp-of-append" data-defines="TYPED-IO-LISTP-OF-APPEND" data-references="LIST-FIX,AND,TYPE,Y,X,APPEND,TYPED-IO-LISTP,EQUAL,DEFTHM" data-part-name="TYPED-IO-LISTP-OF-APPEND" data-part-term="LIST-FIX,AND,TYPE,Y,X,APPEND,TYPED-IO-LISTP,EQUAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TYPED-IO-LISTP-OF-APPEND">typed-io-listp-of-append</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-typed-io-listp-of-append" data-sym="TYPED-IO-LISTP-OF-APPEND" title="(defthm typed-io-listp-of-append
        (equal (typed-io-listp (append x y) type)
               (and (typed-io-listp (list-fix x) type)
                    (typed-io-listp y type))))">typed-io-listp-of-append</a>
  (equal (<a class="sym-link system" href="../../../axioms.html#def-typed-io-listp" data-sym="TYPED-IO-LISTP">typed-io-listp</a> (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> x y) type)
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-typed-io-listp" data-sym="TYPED-IO-LISTP">typed-io-listp</a> (<a class="sym-link external" href="../lists/list-defuns.html#def-list-fix" data-sym="LIST-FIX">list-fix</a> x) type)
      (<a class="sym-link system" href="../../../axioms.html#def-typed-io-listp" data-sym="TYPED-IO-LISTP">typed-io-listp</a> y type))))</pre>
  </div>

<div class="form-block theorem" id="def-typed-io-listp-of-rev" data-defines="TYPED-IO-LISTP-OF-REV" data-references="ENABLE,LIST-FIX,TYPE,X,REV,TYPED-IO-LISTP,EQUAL,DEFTHM" data-part-name="TYPED-IO-LISTP-OF-REV" data-part-term="LIST-FIX,TYPE,X,REV,TYPED-IO-LISTP,EQUAL" data-part-hints="REV,ENABLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TYPED-IO-LISTP-OF-REV">typed-io-listp-of-rev</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button><button class="part-btn" data-part="hints">hints</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-typed-io-listp-of-rev" data-sym="TYPED-IO-LISTP-OF-REV" title="(defthm typed-io-listp-of-rev
        (equal (typed-io-listp (rev x) type)
               (typed-io-listp (list-fix x) type))
        :hints ((&quot;Goal&quot; :in-theory (enable rev))))">typed-io-listp-of-rev</a>
  (equal (<a class="sym-link system" href="../../../axioms.html#def-typed-io-listp" data-sym="TYPED-IO-LISTP">typed-io-listp</a> (<a class="sym-link external" href="../lists/list-defuns.html#def-rev" data-sym="REV">rev</a> x) type)
    (<a class="sym-link system" href="../../../axioms.html#def-typed-io-listp" data-sym="TYPED-IO-LISTP">typed-io-listp</a> (<a class="sym-link external" href="../lists/list-defuns.html#def-list-fix" data-sym="LIST-FIX">list-fix</a> x) type))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link external" href="../lists/list-defuns.html#def-rev" data-sym="REV">rev</a>))))</pre>
  </div>

<div class="form-block theorem" id="def-open-channel1-of-revappend-charlist" data-defines="OPEN-CHANNEL1-OF-REVAPPEND-CHARLIST" data-references="CDR,REV,APPEND,CAR,CONS,Y,CHARACTER-LISTP,CADAR,EQUAL,X,OPEN-CHANNEL1,AND,IMPLIES,DEFTHM" data-part-name="OPEN-CHANNEL1-OF-REVAPPEND-CHARLIST" data-part-term="CDR,REV,APPEND,CAR,CONS,Y,CHARACTER-LISTP,CADAR,EQUAL,X,OPEN-CHANNEL1,AND,IMPLIES" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-CHANNEL1-OF-REVAPPEND-CHARLIST">open-channel1-of-revappend-charlist</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-open-channel1-of-revappend-charlist" data-sym="OPEN-CHANNEL1-OF-REVAPPEND-CHARLIST" title="(defthm open-channel1-of-revappend-charlist
        (implies
         (and (open-channel1 x) (equal (cadar x) :character)
              (character-listp y))
         (open-channel1 (cons (car x) (append (rev y) (cdr x))))))">open-channel1-of-revappend-charlist</a>
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> x)
      (equal (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> x) <span class="keyword">:character</span>)
      (<a class="sym-link system" href="../../../axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> y))
    (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> (cons (car x) (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link external" href="../lists/list-defuns.html#def-rev" data-sym="REV">rev</a> y) (cdr x))))))</pre>
  </div>

<div class="form-block other" id="form-37" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/princ$
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-princ_24" data-sym="PRINC$">princ$</a>)
  <span class="keyword">:short</span> <span class="string">"Print an atom to a @(&#39;:character&#39;) output stream."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;ACL2 has nice documentation for @(see princ$).  The @(see std/io)
library adds the following lemmas:&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/strings/explode-nonnegative-integer.html" title="Open std/strings/explode-nonnegative-integer">"std/strings/explode-nonnegative-integer"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/strings/explode-atom.html" title="Open std/strings/explode-atom">"std/strings/explode-atom"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-princ$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (symbolp channel)
        (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:character</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-princ_24" data-sym="PRINC$">princ$</a> x channel state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>) (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a> <a class="sym-link system" href="../../../axioms.html#def-explode-atom" data-sym="EXPLODE-ATOM">explode-atom</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-output-channel-p1-of-princ$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:character</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel
        <span class="keyword">:character</span> (<a class="sym-link system" href="../../../axioms.html#def-princ_24" data-sym="PRINC$">princ$</a> x channel state)))))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/write-byte$
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-write-byte_24" data-sym="WRITE-BYTE$">write-byte$</a>)
  <span class="keyword">:short</span> <span class="string">"Write one byte to an open @(&#39;:byte&#39;) output stream."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;&lt;b&gt;Signature:&lt;/b&gt; @(call write-byte$) returns @(&#39;state&#39;).&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;@(&#39;byte&#39;) must be a natural number with @(&#39;byte &lt; 256&#39;).&lt;/li&gt;

&lt;li&gt;@(&#39;channel&#39;) is a symbol that must refer to an open @(&#39;:byte&#39;) input
channel; see @(see open-input-channel).&lt;/li&gt;

&lt;li&gt;@(&#39;state&#39;) is the ACL2 @(see state).&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;This is a @(see logic)-mode function, but its logical definition is tricky;
see @(see logical-story-of-io).  The main logical consequence is the updating
of state.&lt;/p&gt;

&lt;p&gt;Under the hood, we write a byte to the Lisp output stream that is associated
with @(&#39;channel&#39;).&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-write-byte$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (symbolp channel)
        (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> byte)
        (&lt; byte <span class="number">256</span>)
        (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:byte</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-write-byte_24" data-sym="WRITE-BYTE$">write-byte$</a> byte channel state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>) (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-output-channel-p1-of-write-byte$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:byte</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel
        <span class="keyword">:byte</span> (<a class="sym-link system" href="../../../axioms.html#def-write-byte_24" data-sym="WRITE-BYTE$">write-byte$</a> byte channel state)))))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/print-object$
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a>)
  <span class="keyword">:short</span> <span class="string">"Print a Lisp object to an @(&#39;:object&#39;) output stream."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;BOZO document me.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-print-object$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (symbolp channel)
        (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:object</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> x channel state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>) (<a class="sym-link system" href="../../../axioms.html#def-open-channel1" data-sym="OPEN-CHANNEL1">open-channel1</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-output-channel-p1-of-print-object$
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:object</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel
        <span class="keyword">:object</span> (<a class="sym-link system" href="../../../basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> x channel state))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> get-serialize-character-of-print-object$
    (equal (<a class="sym-link system" href="../../../axioms.html#def-get-serialize-character" data-sym="GET-SERIALIZE-CHARACTER">get-serialize-character</a> (<a class="sym-link system" href="../../../basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> obj channel state))
      (<a class="sym-link system" href="../../../axioms.html#def-get-serialize-character" data-sym="GET-SERIALIZE-CHARACTER">get-serialize-character</a> state))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-get-serialize-character" data-sym="GET-SERIALIZE-CHARACTER">get-serialize-character</a> <a class="sym-link system" href="../../../axioms.html#def-get-global" data-sym="GET-GLOBAL">get-global</a>)))))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> serialize-characterp
  <span class="keyword">:parents</span> (std/io/set-serialize-character)
  <span class="keyword">:short</span> <span class="string">"Recognizer for valid serialize characters."</span>
  (defund serialize-characterp
    (c)
    (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> c) (equal c #\Z) (equal c #\Y))))</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> std/io/set-serialize-character
  <span class="keyword">:parents</span> (std/io <a class="sym-link system" href="../../../axioms.html#def-set-serialize-character" data-sym="SET-SERIALIZE-CHARACTER">set-serialize-character</a>)
  <span class="keyword">:short</span> <span class="string">"Control the use of @(see serialize) in @(see print-object$)."</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> state-p1-of-set-serialize-character
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
      (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> (<a class="sym-link system" href="../../../axioms.html#def-set-serialize-character" data-sym="SET-SERIALIZE-CHARACTER">set-serialize-character</a> c state))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-output-channel-p1-of-set-serialize-character
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel <span class="keyword">:object</span> state))
      (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a> channel
        <span class="keyword">:object</span> (<a class="sym-link system" href="../../../axioms.html#def-set-serialize-character" data-sym="SET-SERIALIZE-CHARACTER">set-serialize-character</a> c state)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-put-global" data-sym="PUT-GLOBAL">put-global</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> get-serialize-character-of-set-serialize-character
    (equal (<a class="sym-link system" href="../../../axioms.html#def-get-serialize-character" data-sym="GET-SERIALIZE-CHARACTER">get-serialize-character</a> (<a class="sym-link system" href="../../../axioms.html#def-set-serialize-character" data-sym="SET-SERIALIZE-CHARACTER">set-serialize-character</a> c state))
      (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> c) nil)
        ((serialize-characterp c) c)
        (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../axioms.html#def-get-serialize-character" data-sym="GET-SERIALIZE-CHARACTER">get-serialize-character</a> state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-get-serialize-character" data-sym="GET-SERIALIZE-CHARACTER">get-serialize-character</a>
         <a class="sym-link system" href="../../../axioms.html#def-set-serialize-character" data-sym="SET-SERIALIZE-CHARACTER">set-serialize-character</a>
         serialize-characterp))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> boundp-global1-of-set-serialize-character
    (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (<a class="sym-link system" href="../../../axioms.html#def-boundp-global1" data-sym="BOUNDP-GLOBAL1">boundp-global1</a> 'serialize-character
        (<a class="sym-link system" href="../../../axioms.html#def-set-serialize-character" data-sym="SET-SERIALIZE-CHARACTER">set-serialize-character</a> c state))
      (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> c) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
        ((serialize-characterp c) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
        (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../axioms.html#def-boundp-global1" data-sym="BOUNDP-GLOBAL1">boundp-global1</a> 'serialize-character state))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable serialize-characterp)))))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../../xdoc/top.html#def-defsection" data-sym="DEFSECTION">defsection</a> open-channels-distinct-from-standard-io
  <span class="keyword">:parents</span> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> <a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a>)
  <span class="keyword">:short</span> <span class="string">"Technical lemmas to show that opening input/output channels does not
produce a symbol like @(&#39;ACL2-OUTPUT-CHANNEL::STANDARD-CHARACTER-OUTPUT-0&#39;),
for the guards of @(see close-input-channel) and @(see close-output-channel)."</span>
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable floor mod <a class="sym-link system" href="../../../axioms.html#def-print-base-p" data-sym="PRINT-BASE-P">print-base-p</a>)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../ihs/quotient-remainder-lemmas.html" title="Open ihs/quotient-remainder-lemmas">"ihs/quotient-remainder-lemmas"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> print-base-p-implies-posp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-print-base-p" data-sym="PRINT-BASE-P">print-base-p</a> x) (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-print-base-p" data-sym="PRINT-BASE-P">print-base-p</a>)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> print-base-p-bound
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-print-base-p" data-sym="PRINT-BASE-P">print-base-p</a> x) (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">16</span>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-print-base-p" data-sym="PRINT-BASE-P">print-base-p</a>)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> explode-nonnegative-integer-length-incr
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> ans)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../../axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> n base ans)))
      <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> explode-nonnegative-integer-length-incr-strict
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> n) (<a class="sym-link system" href="../../../axioms.html#def-print-base-p" data-sym="PRINT-BASE-P">print-base-p</a> base))
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> ans) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../../axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> n base ans))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable mod)
         <span class="keyword">:induct</span> (<a class="sym-link system" href="../../../axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> n base ans)
         <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (base) (<a class="sym-link system" href="../../../axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> n base ans)))))
      <span class="keyword">:rule-classes</span> nil))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ans-not-zero-when-member-nonzero
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-bind-free" data-sym="BIND-FREE">bind-free</a> `((c car ,ANS)))
          (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> c) ans)
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> c) #\0)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> x base ans) '(#\0))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> posp-x/base
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (integerp x) (&lt; <span class="number">0</span> x) (<a class="sym-link system" href="../../../axioms.html#def-print-base-p" data-sym="PRINT-BASE-P">print-base-p</a> base))
        (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../../axioms.html#def-_2F" data-sym="/">/</a> base) x))) (&lt; <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../../axioms.html#def-_2F" data-sym="/">/</a> base) x))))
      <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> explode-nonnegative-integer-of-positive-is-not-zero-list
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> x) (<a class="sym-link system" href="../../../axioms.html#def-print-base-p" data-sym="PRINT-BASE-P">print-base-p</a> base))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> x base ans) '(#\0))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (base) (<a class="sym-link system" href="../../../axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> x base ans)))
         <span class="keyword">:use</span> ((<span class="keyword">:instance</span> explode-nonnegative-integer-length-incr-strict
            (n (<a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../../axioms.html#def-_2F" data-sym="/">/</a> base) x))
            (ans (cons #\0 ans))))
         <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
      <span class="keyword">:otf-flg</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> charlist-suffixp
      (x suff)
      (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (equal x suff)
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp x) (charlist-suffixp (cdr x) suff)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> symb-ends-in-dash-zero
      (x)
      (charlist-suffixp (explode (symbol-name x)) '(#\- #\0))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> suffixp-dash-zero-implies-member-dash
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> #\- x))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (charlist-suffixp x '(#\- #\0))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> explode-nonneg-no-dash
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> #\- ans))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> #\- (<a class="sym-link system" href="../../../axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> x base ans))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> character-listp-explode-nonneg
      (equal (<a class="sym-link system" href="../../../axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> (<a class="sym-link system" href="../../../axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> n base ans))
        (<a class="sym-link system" href="../../../axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> ans))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> charlist-suffixp-append-dash-x
      (equal (charlist-suffixp (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> x (cons #\- y)) '(#\- #\0))
        (charlist-suffixp (cons #\- y) '(#\- #\0)))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> x (cons #\- y))
         <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symb-ends-in-dash-zero-of-make-output-channel
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> clock)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (symb-ends-in-dash-zero (<a class="sym-link system" href="../../../axioms.html#def-make-output-channel" data-sym="MAKE-OUTPUT-CHANNEL">make-output-channel</a> str clock))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symb-ends-in-dash-zero-of-make-input-channel
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> clock)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (symb-ends-in-dash-zero (<a class="sym-link system" href="../../../axioms.html#def-make-input-channel" data-sym="MAKE-INPUT-CHANNEL">make-input-channel</a> str clock))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> make-output-channel-not-standard-co
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> clock)
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-make-output-channel" data-sym="MAKE-OUTPUT-CHANNEL">make-output-channel</a> str clock) <a class="sym-link system" href="../../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (disable symb-ends-in-dash-zero-of-make-output-channel
         <a class="sym-link system" href="../../../axioms.html#def-make-output-channel" data-sym="MAKE-OUTPUT-CHANNEL">make-output-channel</a>)
       <span class="keyword">:use</span> symb-ends-in-dash-zero-of-make-output-channel)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> make-input-channel-not-standard-ci
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> clock)
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-make-input-channel" data-sym="MAKE-INPUT-CHANNEL">make-input-channel</a> str clock) <a class="sym-link system" href="../../../axioms.html#def-_2Astandard-ci_2A" data-sym="*STANDARD-CI*">*standard-ci*</a>)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (disable symb-ends-in-dash-zero-of-make-input-channel
         <a class="sym-link system" href="../../../axioms.html#def-make-input-channel" data-sym="MAKE-INPUT-CHANNEL">make-input-channel</a>)
       <span class="keyword">:use</span> symb-ends-in-dash-zero-of-make-input-channel)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> make-input-channel-not-standard-oi
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> clock)
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-make-input-channel" data-sym="MAKE-INPUT-CHANNEL">make-input-channel</a> str clock) <a class="sym-link system" href="../../../axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (disable symb-ends-in-dash-zero-of-make-input-channel
         <a class="sym-link system" href="../../../axioms.html#def-make-input-channel" data-sym="MAKE-INPUT-CHANNEL">make-input-channel</a>)
       <span class="keyword">:use</span> symb-ends-in-dash-zero-of-make-input-channel)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-output-channel-is-not-standard-co
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> fname type state))
          <a class="sym-link system" href="../../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../../axioms.html#def-make-output-channel" data-sym="MAKE-OUTPUT-CHANNEL">make-output-channel</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-input-channel-is-not-standard-ci
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> fname type state))
          <a class="sym-link system" href="../../../axioms.html#def-_2Astandard-ci_2A" data-sym="*STANDARD-CI*">*standard-ci*</a>)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../../axioms.html#def-make-input-channel" data-sym="MAKE-INPUT-CHANNEL">make-input-channel</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> open-input-channel-is-not-standard-oi
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a> state)
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a> fname type state))
          <a class="sym-link system" href="../../../axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../../axioms.html#def-make-input-channel" data-sym="MAKE-INPUT-CHANNEL">make-input-channel</a>)))))</pre>
  </div>

<div class="form-block in-theory" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">in-theory</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-state-p1" data-sym="STATE-P1">state-p1</a>
    <a class="sym-link system" href="../../../axioms.html#def-open-input-channel-p1" data-sym="OPEN-INPUT-CHANNEL-P1">open-input-channel-p1</a>
    <a class="sym-link system" href="../../../axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a>
    <a class="sym-link system" href="../../../axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a>
    <a class="sym-link system" href="../../../axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a>
    <a class="sym-link system" href="../../../axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a>
    <a class="sym-link system" href="../../../axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a>
    <a class="sym-link system" href="../../../axioms.html#def-open-output-channel-p1" data-sym="OPEN-OUTPUT-CHANNEL-P1">open-output-channel-p1</a>
    <a class="sym-link system" href="../../../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a>
    <a class="sym-link system" href="../../../axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a>
    <a class="sym-link system" href="../../../axioms.html#def-princ_24" data-sym="PRINC$">princ$</a>
    <a class="sym-link system" href="../../../axioms.html#def-write-byte_24" data-sym="WRITE-BYTE$">write-byte$</a>
    <a class="sym-link system" href="../../../basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a>
    <a class="sym-link system" href="../../../axioms.html#def-set-serialize-character" data-sym="SET-SERIALIZE-CHARACTER">set-serialize-character</a>
    <a class="sym-link system" href="../../../axioms.html#def-get-serialize-character" data-sym="GET-SERIALIZE-CHARACTER">get-serialize-character</a>
    file-measure))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>