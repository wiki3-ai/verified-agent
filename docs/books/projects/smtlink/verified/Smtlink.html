<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smtlink - ACL2 Book</title>
  <meta property="name" content="Smtlink">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">Smtlink</h1>
    <div class="path"><a href="Smtlink.lisp" class="source-link">books/projects/smtlink/verified/Smtlink</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"SMT"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../../std/util/bstar.html" title="Open std/util/bstar">"std/util/bstar"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../../std/util/define.html" title="Open std/util/define">"std/util/define"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../../std/basic/inductions.html" title="Open std/basic/inductions">"std/basic/inductions"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../../std/basic/defs.html" title="Open std/basic/defs">"std/basic/defs"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../../centaur/fty/baselists.html" title="Open centaur/fty/baselists">"centaur/fty/baselists"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="hint-interface.html" title="Open hint-interface">"hint-interface"</a>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="hint-please.html" title="Open hint-please">"hint-please"</a>)</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../config.html" title="Open ../config">"../config"</a>)</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection smtlink-process-user-hint
  <span class="keyword">:parents</span> (verified)
  <span class="keyword">:short</span> <span class="string">"Functionalities for processing user hints given to Smtlink. User
  hints will be merged with (smt-hint)."</span>)</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection hints-syntax
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (define hints-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (hints-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recognizer for hints-syntax."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term))
  (define hints-syntax-fix
    ((term hints-syntax-p))
    <span class="keyword">:parents</span> (hints-syntax)
    <span class="keyword">:returns</span> (fixed-term hints-syntax-p)
    <span class="keyword">:short</span> <span class="string">"Fixing function for a hints-sytnax-p."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (hints-syntax-p term)
        term
        nil)
      <span class="keyword">:exec</span> term))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable hints-syntax-fix)))
    (deffixtype hints-syntax
      <span class="keyword">:pred</span> hints-syntax-p
      <span class="keyword">:fix</span> hints-syntax-fix
      <span class="keyword">:equiv</span> hints-syntax-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> hints-syntax-p)))</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection hypothesis-lst-syntax
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (define hypothesis-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (hypothesis-lst-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recognizer for hypothesis-syntax."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-atom" data-sym="ATOM">atom</a> term) (equal term nil))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)
        (car term)
        (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (cdr term))
        (<a class="sym-link system" href="../../../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> (car term)))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)
        (car term)
        (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)
        (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../../axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> term))
        (<a class="sym-link system" href="../../../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> (car term))
        (equal (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term) '<span class="keyword">:hints</span>)
        (hints-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> term))))
    ///
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-of-caddr
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (consp term)
          (consp (cdr term))
          (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term))
          (equal (<a class="sym-link system" href="../../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">2</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term))) <span class="number">3</span>)
          (<a class="sym-link system" href="../../../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> (car term))
          (equal (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term) <span class="keyword">:hints</span>)
          (hints-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> term)))
        (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="../../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> term)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hints-syntax-p)))))
  (define hypothesis-syntax-fix
    ((term hypothesis-syntax-p))
    <span class="keyword">:parents</span> (hypothesis-lst-syntax)
    <span class="keyword">:returns</span> (fixed-term hypothesis-syntax-p)
    <span class="keyword">:short</span> <span class="string">"Fixing function for a hypothesis-syntax-p."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (hypothesis-syntax-p term)
        term
        nil)
      <span class="keyword">:exec</span> term))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable hypothesis-syntax-fix)))
    (deffixtype hypothesis-syntax
      <span class="keyword">:pred</span> hypothesis-syntax-p
      <span class="keyword">:fix</span> hypothesis-syntax-fix
      <span class="keyword">:equiv</span> hypothesis-syntax-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> hypothesis-syntax-p))
  (define hypothesis-lst-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (hypothesis-lst-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recognizer for hypothesis-lst-syntax."</span>
    (b* (((if (<a class="sym-link system" href="../../../../axioms.html#def-atom" data-sym="ATOM">atom</a> term)) (equal term nil)) ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) term))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (hypothesis-syntax-p <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>)
        (hypothesis-lst-syntax-p <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
  (define hypothesis-lst-syntax-fix
    ((term hypothesis-lst-syntax-p))
    <span class="keyword">:parents</span> (hypothesis-lst-syntax)
    <span class="keyword">:returns</span> (fixed-term hypothesis-lst-syntax-p
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hypothesis-lst-syntax-p))))
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hypothesis-syntax-fix
         hypothesis-lst-syntax-p
         hypothesis-lst-syntax-fix)))
    <span class="keyword">:short</span> <span class="string">"Fixing function for a hypothesis-lst-syntax-p."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (consp term)
        (cons (hypothesis-syntax-fix (car term))
          (hypothesis-lst-syntax-fix (cdr term)))
        nil)
      <span class="keyword">:exec</span> term))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable hypothesis-lst-syntax-fix)))
    (deffixtype hypothesis-lst-syntax
      <span class="keyword">:pred</span> hypothesis-lst-syntax-p
      <span class="keyword">:fix</span> hypothesis-lst-syntax-fix
      <span class="keyword">:equiv</span> hypothesis-lst-syntax-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> hypothesis-lst-syntax-p)))</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection argument-lst-syntax
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (define smt-typep
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (argument-lst-syntax)
    <span class="keyword">:returns</span> (valid-type? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Types allowed in Smtlink."</span>
    (symbolp term))
  (define argument-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (argument-lst-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recognizer for argument-syntax."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-atom" data-sym="ATOM">atom</a> term) (equal term nil))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)
        (car term)
        (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (cdr term))
        (symbolp (car term)))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)
        (car term)
        (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)
        (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term))
        (symbolp (car term))
        (smt-typep (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)
        (car term)
        (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)
        (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../../axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> term))
        (symbolp (car term))
        (smt-typep (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))
        (equal '<span class="keyword">:hints</span> (<a class="sym-link system" href="../../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> term))
        (hints-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> term)))))
  (define argument-syntax-fix
    ((term argument-syntax-p))
    <span class="keyword">:parents</span> (argument-lst-syntax)
    <span class="keyword">:returns</span> (fixed-term argument-syntax-p)
    <span class="keyword">:short</span> <span class="string">"Fixing function for argument-syntax-p."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (argument-syntax-p term)
        term
        nil)
      <span class="keyword">:exec</span> term))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable argument-syntax-fix)))
    (deffixtype argument-syntax
      <span class="keyword">:pred</span> argument-syntax-p
      <span class="keyword">:fix</span> argument-syntax-fix
      <span class="keyword">:equiv</span> argument-syntax-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> argument-syntax-p))
  (define argument-lst-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (argument-lst-syntax)
    <span class="keyword">:short</span> <span class="string">"Recognizer for argument-lst-syntax."</span>
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    (b* (((if (<a class="sym-link system" href="../../../../axioms.html#def-atom" data-sym="ATOM">atom</a> term)) (equal term nil)) ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) term))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (argument-syntax-p <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>)
        (argument-lst-syntax-p <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
  (define argument-lst-syntax-fix
    ((term argument-lst-syntax-p))
    <span class="keyword">:parents</span> (argument-lst-syntax)
    <span class="keyword">:short</span> <span class="string">"Fixing function for argument-lst-syntax."</span>
    <span class="keyword">:returns</span> (fixed-term argument-lst-syntax-p
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable argument-lst-syntax-p))))
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable argument-lst-syntax-fix
         argument-syntax-fix
         argument-lst-syntax-p)))
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (consp term)
        (cons (argument-syntax-fix (car term))
          (argument-lst-syntax-fix (cdr term)))
        nil)
      <span class="keyword">:exec</span> term))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable argument-lst-syntax-fix)))
    (deffixtype argument-lst-syntax
      <span class="keyword">:pred</span> argument-lst-syntax-p
      <span class="keyword">:fix</span> argument-lst-syntax-fix
      <span class="keyword">:equiv</span> argument-lst-syntax-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> argument-lst-syntax-p)))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection true-set-equiv-relation
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (define true-set-equiv
    ((list1 <a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a>) (list2 <a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a>))
    <span class="keyword">:parents</span> (true-set-equiv-relation)
    <span class="keyword">:returns</span> (p <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    (if (equal (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> list1)
        (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> list2))
      (set-equiv list1 list2)
      nil)
    ///
    (more-returns (p (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> p (set-equiv list1 list2))
        <span class="keyword">:name</span> set-equiv-if-true-set-equiv)
      (p (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> p
          (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> list1 list2 <span class="keyword">:test</span> 'equal)
            (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> list2 list1 <span class="keyword">:test</span> 'equal)))
        <span class="keyword">:name</span> subsetp-if-true-set-equiv)
      (p (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> p
          (equal (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> list1)
            (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> list2)))
        <span class="keyword">:name</span> true-set-equiv-is-for-true-lists)))
  (<a class="sym-link system" href="../../../../defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> true-set-equiv
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable true-set-equiv))))
  (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable (<span class="keyword">:type-prescription</span> true-set-equiv))))</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection function-syntax
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (<a class="sym-link system" href="../../../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *function-options*
    '((<span class="keyword">:formals</span> . argument-lst-syntax-p) (<span class="keyword">:returns</span> . argument-lst-syntax-p)
      (<span class="keyword">:level</span> . <a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
      (<span class="keyword">:guard</span> . hypothesis-syntax-p)
      (<span class="keyword">:more-returns</span> . hypothesis-lst-syntax-p)))
  (<a class="sym-link system" href="../../../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *function-option-names*
    (<a class="sym-link system" href="../../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> *function-options*))
  (<a class="sym-link system" href="../../../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *function-option-types*
    (<a class="sym-link system" href="../../../../axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> (<a class="sym-link system" href="../../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> *function-options*)))
  (define function-option-type-p
    ((option-type <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recoginizer for function-option-type."</span>
    (if (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> option-type
        *function-option-types*)
      <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      nil))
  (define function-option-type-fix
    ((option-type function-option-type-p))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (fixed-option-type function-option-type-p
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-option-type-p))))
    <span class="keyword">:short</span> <span class="string">"Fixing function for function-option-type."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (function-option-type-p option-type)
        option-type
        '<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
      <span class="keyword">:exec</span> option-type))
  (defsection function-option-name-list
    <span class="keyword">:parents</span> (function-syntax)
    (define function-option-name-p
      ((option-name <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
      <span class="keyword">:parents</span> (function-option-name-list)
      <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
      <span class="keyword">:short</span> <span class="string">"Recoginizer for an function-option-name."</span>
      (if (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> option-name
          *function-option-names*)
        <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
        nil))
    (define function-option-name-fix
      ((option-name function-option-name-p))
      <span class="keyword">:parents</span> (function-option-name-list)
      <span class="keyword">:returns</span> (fixed-option-name function-option-name-p)
      <span class="keyword">:short</span> <span class="string">"Fixing function for option."</span>
      (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (function-option-name-p option-name)
          option-name
          '<span class="keyword">:formals</span>)
        <span class="keyword">:exec</span> option-name))
    (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
      (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable function-option-name-fix)))
      (deffixtype function-option-name
        <span class="keyword">:pred</span> function-option-name-p
        <span class="keyword">:fix</span> function-option-name-fix
        <span class="keyword">:equiv</span> function-option-name-equiv
        <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
        <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
        <span class="keyword">:topic</span> function-option-name-p)
      (deflist function-option-name-lst
        <span class="keyword">:elt-type</span> function-option-name
        <span class="keyword">:true-listp</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-name-fix-preserves-member
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-member" data-sym="MEMBER">member</a> x used <span class="keyword">:test</span> 'equal)
        (<a class="sym-link system" href="../../../../axioms.html#def-member" data-sym="MEMBER">member</a> (function-option-name-fix x)
          (function-option-name-lst-fix used)
          <span class="keyword">:test</span> 'equal)))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-name-lst-fix-preserves-subsetp
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used-2 <span class="keyword">:test</span> 'equal)
        (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (function-option-name-lst-fix used-1)
          (function-option-name-lst-fix used-2)
          <span class="keyword">:test</span> 'equal))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp-equal" data-sym="SUBSETP-EQUAL">subsetp-equal</a>)))))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-name-lst-fix-preserves-set-equiv
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (set-equiv used-1 used-2)
        (set-equiv (function-option-name-lst-fix used-1)
          (function-option-name-lst-fix used-2)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable set-equiv)))
      <span class="keyword">:rule-classes</span> (<span class="keyword">:congruence</span>))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-name-lst-p-and-member
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-member" data-sym="MEMBER">member</a> x used)
          (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (function-option-name-p x)))
        (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (function-option-name-lst-p used)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-option-name-lst-p))))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-name-lst-p--monotonicity
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> used-1)
            (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> used-2))
          (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used-2 <span class="keyword">:test</span> 'equal)
          (function-option-name-lst-p used-2))
        (function-option-name-lst-p used-1))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-option-name-lst-p))))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-name-lst-p--congruence
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (true-set-equiv used-1 used-2)
        (equal (function-option-name-lst-p used-1)
          (function-option-name-lst-p used-2)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:cases</span> ((function-option-name-lst-p used-1) (function-option-name-lst-p used-2))))
      <span class="keyword">:rule-classes</span> (<span class="keyword">:congruence</span>)))
  (define eval-function-option-type
    ((option-type function-option-type-p) (term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (type-correct? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Evaluating types for function option body."</span>
    (b* ((option-type (function-option-type-fix option-type)))
      (<a class="sym-link system" href="../../../../axioms.html#def-case" data-sym="CASE">case</a> option-type
        (argument-lst-syntax-p (argument-lst-syntax-p term))
        (<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a> term))
        (hypothesis-syntax-p (hypothesis-syntax-p term))
        (<a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a> (hypothesis-lst-syntax-p term)))))
  (define function-option-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (used function-option-name-lst-p))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-option-syntax-p
         function-option-name-p
         eval-function-option-type
         function-option-name-lst-p)))
    <span class="keyword">:returns</span> (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> (ok <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
      (new-used function-option-name-lst-p
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-option-name-lst-p
             function-option-name-p)))))
    <span class="keyword">:short</span> <span class="string">"Recoginizer for function-option-syntax."</span>
    (b* ((used (function-option-name-lst-fix used)) ((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)) (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> nil used))
        ((unless (consp term)) (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a> used))
        ((unless (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (car term) (cdr term) (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term)))) (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> nil used))
        ((cons option body-lst) term)
        ((unless (function-option-name-p option)) (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> nil used))
        (option-type (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> option *function-options*))))
      (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> option used))
          (eval-function-option-type option-type
            (car body-lst)))
        (cons option used)))
    ///
    (more-returns (ok (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used <span class="keyword">:test</span> 'equal) ok)
          (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
            (function-option-syntax-p term used-1)))
        <span class="keyword">:name</span> function-option-syntax-p--monotonicity.ok)
      (ok (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (set-equiv used-1 used)
          (equal (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
              (function-option-syntax-p term used-1))
            ok))
        <span class="keyword">:name</span> function-option-syntax-p--ok-congruence.ok
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable function-option-syntax-p
             function-option-syntax-p--monotonicity.ok
             booleanp-of-function-option-syntax-p.ok)
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> function-option-syntax-p--monotonicity.ok
              (used-1 used-1)
              (used used)
              (term term)) (<span class="keyword">:instance</span> function-option-syntax-p--monotonicity.ok
               (used-1 used)
               (used used-1)
               (term term))
             (<span class="keyword">:instance</span> booleanp-of-function-option-syntax-p.ok
               (used used-1)
               (term term))
             (<span class="keyword">:instance</span> booleanp-of-function-option-syntax-p.ok
               (used used)
               (term term)))))
        <span class="keyword">:rule-classes</span> (<span class="keyword">:congruence</span>))
      (new-used (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used <span class="keyword">:test</span> 'equal) ok)
          (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
              (function-option-syntax-p term used-1))
            new-used
            <span class="keyword">:test</span> 'equal))
        <span class="keyword">:name</span> function-option-syntax-p--monotonicity.new-used)
      (new-used (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> term ok)
          (equal new-used
            (cons (car term)
              (function-option-name-lst-fix used))))
        <span class="keyword">:name</span> function-option-syntax-p--new-used-when-ok)))
  (define function-option-lst-syntax-p-helper
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (used function-option-name-lst-p))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (ok <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Helper for function-option-lst-syntax-p."</span>
    (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)) nil) ((unless term) <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>)
        ((unless (cdr term)) nil)
        ((<a class="sym-link system" href="../../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) term)
        ((<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> res new-used) (function-option-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a>)
            used)))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> res
        (function-option-lst-syntax-p-helper <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>
          new-used)))
    ///
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-lst-syntax-p-helper--monotonicity
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used <span class="keyword">:test</span> 'equal)
          (function-option-lst-syntax-p-helper term
            used))
        (function-option-lst-syntax-p-helper term
          used-1)))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-lst-syntax-p-helper--congruence
      (b* ((ok (function-option-lst-syntax-p-helper term
             used)))
        (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (set-equiv used-1 used)
          (equal (function-option-lst-syntax-p-helper term
              used-1)
            ok)))
      <span class="keyword">:rule-classes</span> (<span class="keyword">:congruence</span>))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-lst-syntax-p-helper--head
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (function-option-lst-syntax-p-helper term
            used)
          term)
        (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">2</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> term))
          (function-option-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> (car term) (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))
            used))))
    (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
      (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lemma-16
          (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (function-option-name-lst-p used)
              (function-option-name-p new-opt)
              (function-option-lst-syntax-p-helper term
                (cons new-opt used)))
            (function-option-lst-syntax-p-helper term
              used))
          <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable function-option-lst-syntax-p-helper--monotonicity)
             <span class="keyword">:use</span> ((<span class="keyword">:instance</span> function-option-lst-syntax-p-helper--monotonicity
                (used-1 used)
                (used (cons new-opt used))
                (term term)))))))
      (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> function-option-lst-syntax-p-helper-preserve
        (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (function-option-lst-syntax-p-helper term nil)
            (consp term))
          (function-option-lst-syntax-p-helper (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term)
            nil))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable lemma-16)
           <span class="keyword">:expand</span> ((function-option-lst-syntax-p-helper term nil) (function-option-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> (car term) (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))
               nil))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> lemma-16
              (term (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term))
              (new-opt (car term))
              (used nil))))))))
  (define function-option-lst-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recogizer for function-option-lst-syntax"</span>
    (function-option-lst-syntax-p-helper term nil))
  (define function-option-lst-syntax-fix
    ((term function-option-lst-syntax-p))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (fixed-term function-option-lst-syntax-p)
    <span class="keyword">:short</span> <span class="string">"Recogizer for function-option-lst-syntax"</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (function-option-lst-syntax-p term)
        term
        nil)
      <span class="keyword">:exec</span> term)
    ///
    (more-returns (fixed-term (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (function-option-lst-syntax-p term)
          (equal fixed-term term))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> (function-option-lst-syntax-fix term)))
        <span class="keyword">:name</span> function-option-lst-syntax-fix-when-function-option-lst-syntaxp)))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable function-option-lst-syntax-fix)))
    (deffixtype function-option-lst-syntax
      <span class="keyword">:pred</span> function-option-lst-syntax-p
      <span class="keyword">:fix</span> function-option-lst-syntax-fix
      <span class="keyword">:equiv</span> function-option-lst-syntax-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> function-option-lst-syntax-p))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lemma1
        (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (function-option-lst-syntax-p term)
            term)
          (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
              (function-option-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> (car term) (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))
                nil))
            (consp (cdr term))
            (function-option-lst-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term))
            (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((function-option-lst-syntax-p term) (function-option-lst-syntax-p-helper term nil)
             (function-option-lst-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term)))))))
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> lemma2
        (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
              (function-option-syntax-p term nil))
            term)
          (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (car term)
              *function-option-names*)
            (<a class="sym-link system" href="../../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *function-options*))
                  'argument-lst-syntax-p)
                (argument-lst-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *function-options*))
                  '<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
                (<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *function-options*))
                  'hypothesis-syntax-p)
                (hypothesis-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *function-options*))
                  'hypothesis-lst-syntax-p)
                (hypothesis-lst-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))))))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((function-option-syntax-p term nil) (<span class="keyword">:free</span> (option-type)
               (eval-function-option-type option-type
                 (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
             (function-option-name-p (car term)))))))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> everything-about-function-option-lst-syntax-p
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (function-option-lst-syntax-p term)
          term)
        (<a class="sym-link system" href="../../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((opt (car term)) (val (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))
            (<a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term))
            (option-type (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> opt *function-options*))))
          (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)
            (consp (cdr term))
            (equal (function-option-lst-syntax-fix term)
              term)
            (function-option-lst-syntax-p <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>)
            (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> opt *function-option-names*)
            (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> option-type
              *function-option-types*)
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type 'argument-lst-syntax-p)
              (argument-lst-syntax-p val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type '<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (integerp val) (<a class="sym-link system" href="../../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> val)))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type 'hypothesis-syntax-p)
              (hypothesis-syntax-p val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type 'hypothesis-lst-syntax-p)
              (hypothesis-lst-syntax-p val)))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable lemma2)
         <span class="keyword">:use</span> ((<span class="keyword">:instance</span> lemma2
            (term (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> (car term) (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))))))))
  (define function-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recognizer for function-syntax."</span>
    (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)) nil) ((unless (consp term)) <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>)
        ((cons fname function-options) term))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp fname)
        (function-option-lst-syntax-p function-options))))
  (define function-syntax-fix
    ((term function-syntax-p))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (fixed-term function-syntax-p)
    <span class="keyword">:short</span> <span class="string">"Fixing function for function-syntax-p"</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (function-syntax-p term)
        term
        nil)
      <span class="keyword">:exec</span> term))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable function-syntax-fix)))
    (deffixtype function-syntax
      <span class="keyword">:pred</span> function-syntax-p
      <span class="keyword">:fix</span> function-syntax-fix
      <span class="keyword">:equiv</span> function-syntax-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> function-syntax-p))
  (define function-lst-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recognizer for function-lst-syntax"</span>
    (b* (((if (<a class="sym-link system" href="../../../../axioms.html#def-atom" data-sym="ATOM">atom</a> term)) (equal term nil)) ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) term))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (function-syntax-p <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>)
        (function-lst-syntax-p <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
  (define function-lst-syntax-fix
    ((term function-lst-syntax-p))
    <span class="keyword">:parents</span> (function-syntax)
    <span class="keyword">:returns</span> (fixed-term function-lst-syntax-p
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-lst-syntax-p))))
    <span class="keyword">:short</span> <span class="string">"Fixing function for function-lst-syntax-fix"</span>
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-lst-syntax-fix
         function-syntax-fix
         function-lst-syntax-p
         function-syntax-p)))
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (consp term)
        (cons (function-syntax-fix (car term))
          (function-lst-syntax-fix (cdr term)))
        nil)
      <span class="keyword">:exec</span> term))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable function-lst-syntax-fix)))
    (deffixtype function-lst-syntax
      <span class="keyword">:pred</span> function-lst-syntax-p
      <span class="keyword">:fix</span> function-lst-syntax-fix
      <span class="keyword">:equiv</span> function-lst-syntax-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> function-lst-syntax-p))
  (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable function-option-name-fix-preserves-member
      function-option-name-lst-fix-preserves-subsetp
      function-option-name-lst-fix-preserves-set-equiv
      function-option-name-lst-p-and-member
      function-option-name-lst-p--monotonicity
      function-option-name-lst-p--congruence
      function-option-syntax-p--monotonicity.ok
      function-option-syntax-p--ok-congruence.ok
      function-option-syntax-p--monotonicity.new-used
      function-option-syntax-p--new-used-when-ok
      function-option-lst-syntax-p-helper--monotonicity
      function-option-lst-syntax-p-helper--congruence
      function-option-lst-syntax-p-helper--head
      function-option-lst-syntax-p-helper-preserve
      function-option-lst-syntax-fix-when-function-option-lst-syntaxp)))</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection smt-solver-params
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (define smt-solver-params-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (smt-solver-params)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recognizer for smt-solver-params."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term))
  (define smt-solver-params-fix
    ((term smt-solver-params-p))
    <span class="keyword">:parents</span> (smt-solver-params)
    <span class="keyword">:returns</span> (fixed-term smt-solver-params-p
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable smt-solver-params-p))))
    <span class="keyword">:short</span> <span class="string">"Fixing function for smt-solver-params."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (smt-solver-params-p term)
        term
        (<a class="sym-link system" href="../../../../axioms.html#def-true-list-fix" data-sym="TRUE-LIST-FIX">true-list-fix</a> term))
      <span class="keyword">:exec</span> term))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable smt-solver-params-fix)))
    (deffixtype smt-solver-params
      <span class="keyword">:pred</span> smt-solver-params-p
      <span class="keyword">:fix</span> smt-solver-params-fix
      <span class="keyword">:equiv</span> smt-solver-params-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> smt-solver-params-p)))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection smtlink-hint-syntax
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (<a class="sym-link system" href="../../../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *smtlink-options*
    '((<span class="keyword">:functions</span> . function-lst-syntax-p) (<span class="keyword">:hypotheses</span> . hypothesis-lst-syntax-p)
      (<span class="keyword">:main-hint</span> . hints-syntax-p)
      (<span class="keyword">:abstract</span> . <a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>)
      (<span class="keyword">:fty</span> . <a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>)
      (<span class="keyword">:int-to-rat</span> . <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
      (<span class="keyword">:smt-fname</span> . stringp)
      (<span class="keyword">:smt-dir</span> . stringp)
      (<span class="keyword">:rm-file</span> . <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
      (<span class="keyword">:smt-solver-params</span> . smt-solver-params-p)
      (<span class="keyword">:custom-p</span> . <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
      (<span class="keyword">:wrld-len</span> . <a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a>)))
  (<a class="sym-link system" href="../../../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *smtlink-option-names*
    (<a class="sym-link system" href="../../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> *smtlink-options*))
  (<a class="sym-link system" href="../../../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *smtlink-option-types*
    (<a class="sym-link system" href="../../../../axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> (<a class="sym-link system" href="../../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> *smtlink-options*)))
  (define smtlink-option-type-p
    ((option-type <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (smtlink-hint-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recoginizer for smtlink-option-type."</span>
    (if (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> option-type
        *smtlink-option-types*)
      <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      nil))
  (define smtlink-option-type-fix
    ((opttype smtlink-option-type-p))
    <span class="keyword">:parents</span> (smtlink-hint-syntax)
    <span class="keyword">:returns</span> (fixed-opttype smtlink-option-type-p
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable smtlink-option-type-p))))
    <span class="keyword">:short</span> <span class="string">"Fixing function for smtlink-option-type."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (smtlink-option-type-p opttype)
        opttype
        'function-lst-syntax-p)
      <span class="keyword">:exec</span> opttype))
  (define smtlink-option-name-p
    ((option-name <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (smtlink-hint-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recoginizer for an smtlink-option-name."</span>
    (if (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> option-name
        *smtlink-option-names*)
      <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      nil))
  (define smtlink-option-name-fix
    ((option smtlink-option-name-p))
    <span class="keyword">:parents</span> (smtlink-hint-syntax)
    <span class="keyword">:returns</span> (fixed-smtlink-option-name smtlink-option-name-p)
    <span class="keyword">:short</span> <span class="string">"Fixing function for smtlink-option-name."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (smtlink-option-name-p option)
        option
        '<span class="keyword">:functions</span>)
      <span class="keyword">:exec</span> option))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable smtlink-option-name-fix)))
    (deffixtype smtlink-option-name
      <span class="keyword">:pred</span> smtlink-option-name-p
      <span class="keyword">:fix</span> smtlink-option-name-fix
      <span class="keyword">:equiv</span> smtlink-option-name-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> smtlink-option-name-p)
    (deflist smtlink-option-name-lst
      <span class="keyword">:parents</span> (smtlink-option-name-p)
      <span class="keyword">:elt-type</span> smtlink-option-name
      <span class="keyword">:true-listp</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> smtlink-option-name-fix-preserves-member
    (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-member" data-sym="MEMBER">member</a> x used <span class="keyword">:test</span> 'equal)
      (<a class="sym-link system" href="../../../../axioms.html#def-member" data-sym="MEMBER">member</a> (smtlink-option-name-fix x)
        (smtlink-option-name-lst-fix used)
        <span class="keyword">:test</span> 'equal)))
  (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> smtlink-option-name-lst-fix-preserves-subsetp
    (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used-2 <span class="keyword">:test</span> 'equal)
      (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (smtlink-option-name-lst-fix used-1)
        (smtlink-option-name-lst-fix used-2)
        <span class="keyword">:test</span> 'equal))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp-equal" data-sym="SUBSETP-EQUAL">subsetp-equal</a>)))))
  (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> smtlink-option-name-lst-fix-preserves-set-equiv
    (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (set-equiv used-1 used-2)
      (set-equiv (smtlink-option-name-lst-fix used-1)
        (smtlink-option-name-lst-fix used-2)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable set-equiv)))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:congruence</span>))
  (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> smtlink-option-name-lst-p-and-member
    (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-member" data-sym="MEMBER">member</a> x used)
        (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (smtlink-option-name-p x)))
      (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (smtlink-option-name-lst-p used)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable smtlink-option-name-lst-p))))
  (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> smtlink-option-name-lst-p--monotonicity
    (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> used-1)
          (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> used-2))
        (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used-2 <span class="keyword">:test</span> 'equal)
        (smtlink-option-name-lst-p used-2))
      (smtlink-option-name-lst-p used-1))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable smtlink-option-name-lst-p))))
  (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> smtlink-option-name-lst-p--congruence
    (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (true-set-equiv used-1 used-2)
      (equal (smtlink-option-name-lst-p used-1)
        (smtlink-option-name-lst-p used-2)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:cases</span> ((smtlink-option-name-lst-p used-1) (smtlink-option-name-lst-p used-2))))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:congruence</span>))
  (define eval-smtlink-option-type
    ((option-type smtlink-option-type-p) (term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (smtlink-hint-syntax)
    <span class="keyword">:returns</span> (type-correct? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Evaluating types for smtlink option body."</span>
    (<a class="sym-link system" href="../../../../axioms.html#def-case" data-sym="CASE">case</a> option-type
      (function-lst-syntax-p (function-lst-syntax-p term))
      (hypothesis-lst-syntax-p (hypothesis-lst-syntax-p term))
      (hints-syntax-p (hints-syntax-p term))
      (<a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> term))
      (<a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (<a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> term))
      (stringp (stringp term))
      (smt-solver-params-p (smt-solver-params-p term))
      (custom-p (<a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> term))
      (<a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a> term))))
  (define smtlink-option-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (used smtlink-option-name-lst-p))
    <span class="keyword">:parents</span> (smtlink-hint-syntax)
    <span class="keyword">:returns</span> (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> (ok <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
      (new-used smtlink-option-name-lst-p
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable smtlink-option-name-lst-p
             smtlink-option-name-p)))))
    <span class="keyword">:short</span> <span class="string">"Recoginizer for smtlink-option-syntax."</span>
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable smtlink-option-syntax-p
         smtlink-option-name-p
         eval-smtlink-option-type
         smtlink-option-name-lst-p)))
    (b* ((used (smtlink-option-name-lst-fix used)) ((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)) (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> nil used))
        ((if (equal term nil)) (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a> used))
        ((unless (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (car term) (cdr term) (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term)))) (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> nil used))
        ((cons option body-lst) term)
        ((unless (smtlink-option-name-p option)) (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> nil used))
        (option-type (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> option *smtlink-options*))))
      (<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> option used))
          (eval-smtlink-option-type option-type
            (car body-lst)))
        (cons option used)))
    ///
    (more-returns (ok (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used <span class="keyword">:test</span> 'equal) ok)
          (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
            (smtlink-option-syntax-p term used-1)))
        <span class="keyword">:name</span> smtlink-option-syntax-p--monotonicity.ok)
      (ok (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (set-equiv used-1 used)
          (equal (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
              (smtlink-option-syntax-p term used-1))
            ok))
        <span class="keyword">:name</span> smtlink-option-syntax-p--ok-congruence.ok
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable smtlink-option-syntax-p
             smtlink-option-syntax-p--monotonicity.ok
             booleanp-of-smtlink-option-syntax-p.ok)
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> smtlink-option-syntax-p--monotonicity.ok
              (used-1 used-1)
              (used used)
              (term term)) (<span class="keyword">:instance</span> smtlink-option-syntax-p--monotonicity.ok
               (used-1 used)
               (used used-1)
               (term term))
             (<span class="keyword">:instance</span> booleanp-of-smtlink-option-syntax-p.ok
               (used used-1)
               (term term))
             (<span class="keyword">:instance</span> booleanp-of-smtlink-option-syntax-p.ok
               (used used)
               (term term)))))
        <span class="keyword">:rule-classes</span> (<span class="keyword">:congruence</span>))
      (new-used (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used <span class="keyword">:test</span> 'equal) ok)
          (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
              (smtlink-option-syntax-p term used-1))
            new-used
            <span class="keyword">:test</span> 'equal))
        <span class="keyword">:name</span> smtlink-option-syntax-p--monotonicity.new-used)
      (new-used (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> term ok)
          (equal new-used
            (cons (car term)
              (smtlink-option-name-lst-fix used))))
        <span class="keyword">:name</span> smtlink-option-syntax-p--new-used-when-ok)))
  (define smtlink-hint-syntax-p-helper
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (used smtlink-option-name-lst-p))
    <span class="keyword">:parents</span> (smtlink-hint-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Helper function for smtlink-hint-syntax-p."</span>
    (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)) nil) ((if (<a class="sym-link system" href="../../../../axioms.html#def-atom" data-sym="ATOM">atom</a> term)) (equal term nil))
        ((unless (cdr term)) nil)
        ((<a class="sym-link system" href="../../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) term)
        ((<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> res new-used) (smtlink-option-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a>) used)))
      (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> res
        (smtlink-hint-syntax-p-helper <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> new-used)))
    ///
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> smtlink-hint-syntax-p-helper--monotonicity
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> used-1 used <span class="keyword">:test</span> 'equal)
          (smtlink-hint-syntax-p-helper term used))
        (smtlink-hint-syntax-p-helper term used-1)))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> smtlink-hint-syntax-p-helper--congruence
      (b* ((ok (smtlink-hint-syntax-p-helper term used)))
        (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (set-equiv used-1 used)
          (equal (smtlink-hint-syntax-p-helper term used-1)
            ok)))
      <span class="keyword">:rule-classes</span> (<span class="keyword">:congruence</span>))
    (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
      (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lemma-16
          (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (smtlink-option-name-lst-p used)
              (smtlink-option-name-p new-opt)
              (smtlink-hint-syntax-p-helper term
                (cons new-opt used)))
            (smtlink-hint-syntax-p-helper term used))
          <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable smtlink-hint-syntax-p-helper--monotonicity)
             <span class="keyword">:use</span> ((<span class="keyword">:instance</span> smtlink-hint-syntax-p-helper--monotonicity
                (used-1 used)
                (used (cons new-opt used))
                (term term)))))))
      (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> smtlink-hint-syntax-p-helper-preserve
        (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (smtlink-hint-syntax-p-helper term nil)
            (consp term))
          (smtlink-hint-syntax-p-helper (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term) nil))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable lemma-16)
           <span class="keyword">:expand</span> ((smtlink-hint-syntax-p-helper term nil) (smtlink-option-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> (car term) (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))
               nil))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> lemma-16
              (term (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term))
              (new-opt (car term))
              (used nil))))))))
  (define smtlink-hint-syntax-p
    ((term <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (smtlink-hint-syntax)
    <span class="keyword">:returns</span> (syntax-good? <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
    <span class="keyword">:short</span> <span class="string">"Recognizer for smtlink-hint-syntax."</span>
    (smtlink-hint-syntax-p-helper term nil))
  (define smtlink-hint-syntax-fix
    ((term smtlink-hint-syntax-p))
    <span class="keyword">:parents</span> (smtlink-hint-syntax)
    <span class="keyword">:short</span> <span class="string">"Fixing function for smtlink-hint-syntax."</span>
    <span class="keyword">:returns</span> (fixed-smtlink-hint-syntax smtlink-hint-syntax-p)
    (<a class="sym-link system" href="../../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (smtlink-hint-syntax-p term)
        term
        nil)
      <span class="keyword">:exec</span> term)
    ///
    (more-returns (fixed-smtlink-hint-syntax (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (smtlink-hint-syntax-p term)
          (equal fixed-smtlink-hint-syntax term))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> (smtlink-hint-syntax-p term)))
        <span class="keyword">:name</span> smtlink-hint-syntax-fix-when-smtlink-hint-syntax-p)))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lemma1
        (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (smtlink-hint-syntax-p term) term)
          (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
              (smtlink-option-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> (car term) (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))
                nil))
            (consp (cdr term))
            (smtlink-hint-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term))
            (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((smtlink-hint-syntax-p term) (smtlink-hint-syntax-p-helper term nil)
             (smtlink-hint-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term)))))))
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> lemma2
        (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (smtlink-option-syntax-p term nil))
            term)
          (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (car term)
              *smtlink-option-names*)
            (<a class="sym-link system" href="../../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *smtlink-options*))
                  'function-lst-syntax-p)
                (function-lst-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *smtlink-options*))
                  'hypothesis-lst-syntax-p)
                (hypothesis-lst-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *smtlink-options*))
                  '<a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>)
                (<a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *smtlink-options*))
                  'hints-syntax-p)
                (hints-syntax-p (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *smtlink-options*))
                  '<a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
                (<a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *smtlink-options*))
                  'stringp)
                (stringp (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *smtlink-options*))
                  'smt-solver-params-p)
                (smt-solver-params-p (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
              (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (equal (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car term) *smtlink-options*))
                  '<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
                (<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))))))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((smtlink-option-syntax-p term nil) (<span class="keyword">:free</span> (option-type)
               (eval-smtlink-option-type option-type
                 (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))
             (smtlink-option-name-p (car term)))))))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> everything-about-smtlink-syntax-p
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (smtlink-hint-syntax-p term) term)
        (<a class="sym-link system" href="../../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((opt (car term)) (val (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term))
            (<a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link system" href="../../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> term))
            (option-type (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> opt *smtlink-options*))))
          (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> term)
            (consp (cdr term))
            (equal (smtlink-hint-syntax-fix term) term)
            (smtlink-hint-syntax-p <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>)
            (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> opt *smtlink-option-names*)
            (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> option-type
              *smtlink-option-types*)
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type 'function-lst-syntax-p)
              (function-lst-syntax-p val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type 'hypothesis-lst-syntax-p)
              (hypothesis-lst-syntax-p val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type 'hints-syntax-p)
              (hints-syntax-p val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type '<a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>)
              (<a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type '<a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>)
              (<a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type 'stringp)
              (stringp val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type 'smt-solver-params-p)
              (smt-solver-params-p val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type 'custom-p)
              (<a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> val))
            (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal option-type '<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
              (<a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a> val)))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable lemma2)
         <span class="keyword">:use</span> ((<span class="keyword">:instance</span> lemma2
            (term (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> (car term) (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)))))))))
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable smtlink-hint-syntax-fix)))
    (deffixtype smtlink-hint-syntax
      <span class="keyword">:pred</span> smtlink-hint-syntax-p
      <span class="keyword">:fix</span> smtlink-hint-syntax-fix
      <span class="keyword">:equiv</span> smtlink-hint-syntax-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:topic</span> smtlink-hint-syntax-p))
  (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable smtlink-option-name-fix-preserves-member
      smtlink-option-name-lst-fix-preserves-subsetp
      smtlink-option-name-lst-fix-preserves-set-equiv
      smtlink-option-name-lst-p-and-member
      smtlink-option-name-lst-p--monotonicity
      smtlink-option-name-lst-p--congruence
      smtlink-option-syntax-p--monotonicity.ok
      smtlink-option-syntax-p--ok-congruence.ok
      smtlink-option-syntax-p--monotonicity.new-used
      smtlink-option-syntax-p--new-used-when-ok
      smtlink-hint-syntax-p-helper--monotonicity
      smtlink-hint-syntax-p-helper--congruence
      smtlink-hint-syntax-p-helper-preserve
      smtlink-hint-syntax-fix-when-smtlink-hint-syntax-p)))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection process-smtlink-hints
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (define make-merge-formals-helper
    ((content argument-lst-syntax-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (decls decl-listp)
    <span class="keyword">:short</span> <span class="string">"Adding user defined formals to overwrite what&#39;s already in smt-func."</span>
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> content)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable argument-lst-syntax-fix)))
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable argument-lst-syntax-fix
         argument-lst-syntax-p
         argument-syntax-fix
         argument-syntax-p
         smt-typep
         hints-syntax-p)))
    (b* ((content (argument-lst-syntax-fix content)) ((unless (consp content)) nil)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) content)
        ((<a class="sym-link system" href="../../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> argname type &amp; hints) <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>)
        (new-formal (make-decl <span class="keyword">:name</span> argname
            <span class="keyword">:type</span> (make-hint-pair <span class="keyword">:thm</span> type <span class="keyword">:hints</span> hints))))
      (cons new-formal (make-merge-formals-helper <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
  (define remove-duplicate-from-decl-list
    ((decls decl-listp) (seen <a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (simple-decls decl-listp)
    <span class="keyword">:short</span> <span class="string">"Remove shadowed decls from decl-list"</span>
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> decls)
    (b* ((decls (decl-list-fix decls)) ((unless (consp decls)) nil)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) decls)
        ((decl d) <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>)
        (seen? (<a class="sym-link system" href="../../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> d.name seen))
        ((if seen?) (remove-duplicate-from-decl-list <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> seen)))
      (cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>
        (remove-duplicate-from-decl-list <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>
          (cons d.name seen)))))
  (define make-merge-formals
    ((content argument-lst-syntax-p) (smt-func func-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (func func-p)
    <span class="keyword">:short</span> <span class="string">"Adding user defined formals to overwrite what&#39;s already in smt-func."</span>
    (b* ((new-formals (make-merge-formals-helper content)) ((func f) smt-func)
        (all-formals (remove-duplicate-from-decl-list (<a class="sym-link system" href="../../../../axioms.html#def-append" data-sym="APPEND">append</a> new-formals f.formals)
            nil)))
      (change-func f <span class="keyword">:formals</span> all-formals)))
  (define make-merge-returns-helper
    ((content argument-lst-syntax-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (decls decl-listp)
    <span class="keyword">:short</span> <span class="string">"Adding user defined returns to overwrite what&#39;s already in smt-func."</span>
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> content)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable argument-lst-syntax-fix)))
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable argument-lst-syntax-fix
         argument-lst-syntax-p
         argument-syntax-p
         argument-syntax-fix
         hints-syntax-p
         smt-typep)))
    (b* ((content (argument-lst-syntax-fix content)) ((unless (consp content)) nil)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) content)
        ((cons argname (cons type (cons &amp; hints))) <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>)
        (new-return (make-decl <span class="keyword">:name</span> argname
            <span class="keyword">:type</span> (make-hint-pair <span class="keyword">:thm</span> type <span class="keyword">:hints</span> (car hints)))))
      (cons new-return (make-merge-returns-helper <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
  (define make-merge-returns
    ((content argument-lst-syntax-p) (smt-func func-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (func func-p)
    <span class="keyword">:short</span> <span class="string">"Adding user defined returns to overwrite what&#39;s already in smt-func."</span>
    (b* ((new-return (make-merge-returns-helper content)) ((func f) smt-func)
        (all-returns (remove-duplicate-from-decl-list (<a class="sym-link system" href="../../../../axioms.html#def-append" data-sym="APPEND">append</a> new-return f.returns)
            nil)))
      (change-func f <span class="keyword">:returns</span> all-returns)))
  (define make-merge-guard
    ((content hypothesis-syntax-p) (smt-func func-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (func func-p)
    <span class="keyword">:short</span> <span class="string">"Adding user defined guard to smt-func."</span>
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hypothesis-syntax-fix
         hypothesis-syntax-p)))
    (b* ((content (hypothesis-syntax-fix content)) (smt-func (func-fix smt-func))
        ((cons <a class="sym-link system" href="../../../../defthm.html#def-thm" data-sym="THM">thm</a> (cons &amp; hints-lst)) content)
        (hints (car hints-lst))
        (new-guard (make-hint-pair <span class="keyword">:thm</span> <a class="sym-link system" href="../../../../defthm.html#def-thm" data-sym="THM">thm</a> <span class="keyword">:hints</span> hints)))
      (change-func smt-func <span class="keyword">:guard</span> new-guard)))
  (define make-merge-more-returns
    ((content hypothesis-lst-syntax-p) (smt-func func-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (func func-p)
    <span class="keyword">:short</span> <span class="string">"Adding user-defined more-return theorems."</span>
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> content)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hypothesis-lst-syntax-fix)))
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hypothesis-lst-syntax-p
         hypothesis-lst-syntax-fix
         hypothesis-syntax-p
         hypothesis-syntax-fix)))
    (b* ((content (hypothesis-lst-syntax-fix content)) (smt-func (func-fix smt-func))
        ((func f) smt-func)
        ((unless (consp content)) smt-func)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) content)
        ((cons <a class="sym-link system" href="../../../../defthm.html#def-thm" data-sym="THM">thm</a> (cons &amp; hints-lst)) <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>)
        (hints (car hints-lst))
        (new-more-return (make-hint-pair <span class="keyword">:thm</span> <a class="sym-link system" href="../../../../defthm.html#def-thm" data-sym="THM">thm</a> <span class="keyword">:hints</span> hints))
        (new-func (change-func smt-func
            <span class="keyword">:more-returns</span> (cons new-more-return f.more-returns))))
      (make-merge-more-returns <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> new-func)))
  (define make-merge-function-option-lst
    ((fun-opt-lst function-option-lst-syntax-p) (smt-func func-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (func func-p)
    <span class="keyword">:short</span> <span class="string">"Add option information into func."</span>
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> fun-opt-lst)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-option-lst-syntax-fix)))
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable everything-about-function-option-lst-syntax-p)
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> everything-about-function-option-lst-syntax-p
          (term fun-opt-lst)))))
    (b* ((fun-opt-lst (function-option-lst-syntax-fix fun-opt-lst)) (smt-func (func-fix smt-func))
        ((unless (consp fun-opt-lst)) smt-func)
        ((cons option (cons content <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>)) fun-opt-lst)
        (new-func (<a class="sym-link system" href="../../../../axioms.html#def-case" data-sym="CASE">case</a> option
            (<span class="keyword">:formals</span> (make-merge-formals content smt-func))
            (<span class="keyword">:returns</span> (make-merge-returns content smt-func))
            (<span class="keyword">:level</span> (change-func smt-func
                <span class="keyword">:expansion-depth</span> content))
            (<span class="keyword">:guard</span> (make-merge-guard content smt-func))
            (<span class="keyword">:more-returns</span> (make-merge-more-returns content smt-func)))))
      (make-merge-function-option-lst <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> new-func)))
  (define make-merge-function
    ((func function-syntax-p) (smt-func func-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (func func-p)
    <span class="keyword">:short</span> <span class="string">"Function for generating func-p of a single function hint."</span>
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-syntax-fix
         function-syntax-p)))
    (b* ((func (function-syntax-fix func)) ((cons fun-name fun-opt-lst) func)
        (name fun-name))
      (make-merge-function-option-lst fun-opt-lst
        (change-func smt-func <span class="keyword">:name</span> name))))
  (define merge-functions
    ((content function-lst-syntax-p) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Merging function hints into smt-hint."</span>
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> content)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-lst-syntax-fix)))
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable function-lst-syntax-fix
         function-lst-syntax-p
         function-syntax-p
         function-syntax-fix)))
    (b* ((hint (smtlink-hint-fix hint)) (content (function-lst-syntax-fix content))
        ((unless (consp content)) hint)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) content)
        (name (car <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>))
        ((smtlink-hint h) hint)
        (exist? (hons-get name h.fast-functions))
        (smt-func (if exist?
            (cdr exist?)
            (make-func)))
        (new-func-lst (cons (make-merge-function <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> smt-func)
            h.functions))
        (new-hint (change-smtlink-hint hint
            <span class="keyword">:functions</span> new-func-lst)))
      (merge-functions <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> new-hint)))
  (define make-merge-hypothesis
    ((hypo hypothesis-syntax-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (hp hint-pair-p)
    <span class="keyword">:short</span> <span class="string">"Generate a hint-pair for hypo"</span>
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hypothesis-syntax-p
         hypothesis-syntax-fix
         hints-syntax-p)))
    (b* ((hypo (hypothesis-syntax-fix hypo)) ((<a class="sym-link system" href="../../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> <a class="sym-link system" href="../../../../defthm.html#def-thm" data-sym="THM">thm</a> &amp; <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) hypo))
      (make-hint-pair <span class="keyword">:thm</span> <a class="sym-link system" href="../../../../defthm.html#def-thm" data-sym="THM">thm</a> <span class="keyword">:hints</span> (car <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
  (define merge-hypothesis
    ((content hypothesis-lst-syntax-p) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Merge hypothesis into hint"</span>
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> content)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hypothesis-lst-syntax-fix)))
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hypothesis-lst-syntax-p
         hypothesis-lst-syntax-fix)))
    (b* ((hint (smtlink-hint-fix hint)) (content (hypothesis-lst-syntax-fix content))
        ((unless (consp content)) hint)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) content)
        ((smtlink-hint h) hint)
        (new-hypo-lst (cons (make-merge-hypothesis <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>) h.hypotheses))
        (new-hint (change-smtlink-hint hint
            <span class="keyword">:hypotheses</span> new-hypo-lst)))
      (merge-hypothesis <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> new-hint)))
  (define merge-main-hint
    ((content hints-syntax-p) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Merge main-hint"</span>
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hints-syntax-p)))
    (b* ((hint (smtlink-hint-fix hint)) (content (hints-syntax-fix content))
        (new-hint (change-smtlink-hint hint <span class="keyword">:main-hint</span> content)))
      new-hint))
  (define set-abstract-types
    ((content <a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"set fty types"</span>
    (b* ((hint (smtlink-hint-fix hint)) (new-hint (change-smtlink-hint hint <span class="keyword">:abs</span> content)))
      new-hint))
  (define set-fty-types
    ((content <a class="sym-link system" href="../../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"set fty types"</span>
    (b* ((hint (smtlink-hint-fix hint)) (new-hint (change-smtlink-hint hint <span class="keyword">:fty</span> content)))
      new-hint))
  (define set-int-to-rat
    ((content <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Set :int-to-rat based on user hint."</span>
    (b* ((hint (smtlink-hint-fix hint)) (new-hint (change-smtlink-hint hint
            <span class="keyword">:int-to-rat</span> content)))
      new-hint))
  (define set-fname
    ((content stringp) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Set :smt-fname."</span>
    (b* ((hint (smtlink-hint-fix hint)) (new-hint (change-smtlink-hint hint <span class="keyword">:smt-fname</span> content)))
      new-hint))
  (define set-smt-dir
    ((content stringp) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Set :smt-dir"</span>
    (b* ((hint (smtlink-hint-fix hint)) (new-hint (change-smtlink-hint hint <span class="keyword">:smt-dir</span> content)))
      new-hint))
  (define set-rm-file
    ((content <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Set :rm-file"</span>
    (b* ((hint (smtlink-hint-fix hint)) (new-hint (change-smtlink-hint hint <span class="keyword">:rm-file</span> content)))
      new-hint))
  (define set-custom-p
    ((content <a class="sym-link system" href="../../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a>) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Set :custom-p"</span>
    (b* ((hint (smtlink-hint-fix hint)) (new-hint (change-smtlink-hint hint <span class="keyword">:custom-p</span> content)))
      new-hint))
  (define set-wrld-len
    ((content <a class="sym-link system" href="../../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Set :wrld-fn-len"</span>
    (b* ((hint (smtlink-hint-fix hint)) (new-hint (change-smtlink-hint hint
            <span class="keyword">:wrld-fn-len</span> content)))
      new-hint))
  (define set-smt-solver-params
    ((content smt-solver-params-p) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (new-hint smtlink-hint-p)
    <span class="keyword">:short</span> <span class="string">"Set :smt-params"</span>
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable smt-solver-params-p
         smt-solver-params-fix)))
    (b* ((hint (smtlink-hint-fix hint)) (content (smt-solver-params-fix content))
        (new-hint (change-smtlink-hint hint
            <span class="keyword">:smt-params</span> content)))
      new-hint))
  (define combine-hints
    ((user-hint smtlink-hint-syntax-p) (hint smtlink-hint-p))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (combined-hint smtlink-hint-p)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable smtlink-hint-syntax-fix)))
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> user-hint)
    <span class="keyword">:short</span> <span class="string">"Combining user-hints into smt-hint."</span>
    <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (smtlink-hint-syntax-fix smtlink-hint-syntax-p
           smtlink-hint-syntax-p-helper)
         (everything-about-smtlink-syntax-p smtlink-hint-syntax-p-helper-preserve))
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> everything-about-smtlink-syntax-p
          (term user-hint)) (<span class="keyword">:instance</span> smtlink-hint-syntax-p-helper-preserve))))
    (b* ((hint (smtlink-hint-fix hint)) (user-hint (smtlink-hint-syntax-fix user-hint))
        ((unless (consp user-hint)) hint)
        ((cons option (cons <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>)) user-hint)
        ((smtlink-hint h) hint)
        (fast-funcs (make-alist-fn-lst h.functions))
        (new-hint (<a class="sym-link system" href="../../../../axioms.html#def-case" data-sym="CASE">case</a> option
            (<span class="keyword">:functions</span> (with-fast-alist fast-funcs
                (merge-functions <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a>
                  (change-smtlink-hint hint
                    <span class="keyword">:fast-functions</span> fast-funcs))))
            (<span class="keyword">:hypotheses</span> (merge-hypothesis <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<span class="keyword">:main-hint</span> (merge-main-hint <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<span class="keyword">:abstract</span> (set-abstract-types <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<span class="keyword">:fty</span> (set-fty-types <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<span class="keyword">:int-to-rat</span> (set-int-to-rat <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<span class="keyword">:smt-fname</span> (set-fname <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<span class="keyword">:smt-dir</span> (set-smt-dir <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<span class="keyword">:rm-file</span> (set-rm-file <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<span class="keyword">:custom-p</span> (set-custom-p <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<span class="keyword">:smt-solver-params</span> (set-smt-solver-params <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint))
            (<a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a> (set-wrld-len <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> hint)))))
      (combine-hints <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> new-hint)))
  (define process-hint
    ((cl pseudo-term-listp) (user-hint <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:parents</span> (process-smtlink-hints)
    <span class="keyword">:returns</span> (subgoal-lst <a class="sym-link system" href="../../../../axioms.html#def-pseudo-term-list-listp" data-sym="PSEUDO-TERM-LIST-LISTP">pseudo-term-list-listp</a>)
    (b* ((cl (pseudo-term-list-fix cl)) ((unless (smtlink-hint-syntax-p user-hint)) (<a class="sym-link system" href="../../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="../../../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"User provided Smtlink hint can&#39;t be applied because of ~
    syntax error in the hints: ~q0Therefore proceed without Smtlink...~%"</span>
              user-hint)
            (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> cl)))
        (combined-hint (combine-hints user-hint (smt-hint)))
        (next-cp (cdr (<a class="sym-link system" href="../../../../axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> 'process-hint
              *smt-architecture*)))
        ((if (<a class="sym-link system" href="../../../../axioms.html#def-null" data-sym="NULL">null</a> next-cp)) (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> cl))
        (cp-hint `(<span class="keyword">:clause-processor</span> (,SMT::NEXT-CP clause ',SMT::COMBINED-HINT)))
        (subgoal-lst (cons `(hint-please ',SMT::CP-HINT) cl)))
      (<a class="sym-link system" href="../../../../axioms.html#def-list" data-sym="LIST">list</a> subgoal-lst))))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection translate-cmp-smtlink
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (define wrld-fn-len
    ((state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* ((world (<a class="sym-link system" href="../../../../axioms.html#def-w" data-sym="W">w</a> state)))
      (<a class="sym-link system" href="../../../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../../../axioms.html#def-remove-duplicates-eq" data-sym="REMOVE-DUPLICATES-EQ">remove-duplicates-eq</a> (<a class="sym-link system" href="../../../../axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> (universal-theory <span class="keyword">:here</span>))))))
  (define trans-hypothesis
    ((val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val) (car val))) val) ((<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> err term) (translate-cmp (car val)
            <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
            <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
            nil
            'smtlink-process-user-hint-&gt;trans-hypothesis
            (<a class="sym-link system" href="../../../../axioms.html#def-w" data-sym="W">w</a> state)
            (<a class="sym-link system" href="../../../../basis-a.html#def-default-state-vars" data-sym="DEFAULT-STATE-VARS">default-state-vars</a> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>)))
        ((when err) (<a class="sym-link system" href="../../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'smtlink-process-user-hint-&gt;trans-hypothesis
            <span class="string">"Error ~
    translating form: ~q0"</span>
            (car val))))
      `(,SMT::TERM ,@(CDR SMT::VAL))))
  (define trans-guard
    ((val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (trans-hypothesis val state))
  (define trans-more-returns
    ((val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val)) val) ((unless (consp val)) val)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) val)
        (new-first (trans-hypothesis <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> state)))
      (cons new-first
        (trans-more-returns <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> state))))
  (define trans-argument
    ((val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val)
            (car val)
            (<a class="sym-link system" href="../../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> val))) val) ((<a class="sym-link system" href="../../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> name type <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) val)
        (to-be-trans `(,TYPE ,SMT::NAME))
        ((<a class="sym-link system" href="../../../../axioms.html#def-mv" data-sym="MV">mv</a> err term) (translate-cmp to-be-trans
            <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
            <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>
            nil
            'smtlink-process-user-hint-&gt;trans-hypothesis
            (<a class="sym-link system" href="../../../../axioms.html#def-w" data-sym="W">w</a> state)
            (<a class="sym-link system" href="../../../../basis-a.html#def-default-state-vars" data-sym="DEFAULT-STATE-VARS">default-state-vars</a> <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>)))
        ((when err) (<a class="sym-link system" href="../../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'smtlink-process-user-hint-&gt;trans-argument
            <span class="string">"Error ~
    translating form: ~q0"</span>
            to-be-trans)))
      `(,SMT::NAME ,(CAR SMT::TERM) ,@REST)))
  (define trans-formals
    ((val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val)) val) ((unless (consp val)) val)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) val)
        (new-first (trans-argument <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> state)))
      (cons new-first (trans-formals <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> state))))
  (define trans-returns
    ((val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val)) val) ((unless (consp val)) val)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) val)
        (new-first (trans-argument <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> state)))
      (cons new-first (trans-formals <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> state))))
  (define trans-func-option
    ((opt <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (<a class="sym-link system" href="../../../../axioms.html#def-cond" data-sym="COND">cond</a> ((equal opt '<span class="keyword">:formals</span>) (trans-formals val state))
      ((equal opt '<span class="keyword">:returns</span>) (trans-returns val state))
      ((equal opt '<span class="keyword">:guard</span>) (trans-guard val state))
      ((equal opt '<span class="keyword">:more-returns</span>) (trans-more-returns val state))
      (<a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a> val)))
  (define trans-function
    ((val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val) (consp val))) val) ((<a class="sym-link system" href="../../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) val)
        (new-second (trans-func-option <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> state))
        (new-functions `(,FIRST ,SMT::NEW-SECOND
            ,@(SMT::TRANS-FUNCTION REST SMT::STATE))))
      new-functions))
  (define trans-functions
    ((val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val)) val) ((unless (consp val)) val)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) val)
        ((cons fname options) <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a>)
        (new-first `(,SMT::FNAME ,@(SMT::TRANS-FUNCTION SMT::OPTIONS SMT::STATE))))
      (cons new-first (trans-functions <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> state))))
  (define trans-hypotheses
    ((val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> val)) val) ((unless (consp val)) val)
        ((cons <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) val)
        (new-first (trans-hypothesis <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> state)))
      (cons new-first
        (trans-hypotheses <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a> state))))
  (define trans-hint-option
    ((opt <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (val <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (<a class="sym-link system" href="../../../../axioms.html#def-cond" data-sym="COND">cond</a> ((equal opt '<span class="keyword">:functions</span>) (trans-functions val state))
      ((equal opt '<span class="keyword">:hypotheses</span>) (trans-hypotheses val state))
      ((equal opt '<span class="keyword">:wrld-len</span>) (<a class="sym-link system" href="../../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          'smtlink-process-user-hint-&gt;trans-hint-option
          <span class="string">"User trying to access internal parameter ~
                wrld-len!"</span>))
      (<a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a> val)))
  (define trans-hint
    ((hint <a class="sym-link system" href="../../../../axioms.html#def-t" data-sym="T">t</a>) (state))
    <span class="keyword">:parents</span> (translate-cmp-smtlink)
    <span class="keyword">:mode</span> <span class="keyword">:program</span> (b* (((unless (<a class="sym-link system" href="../../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> hint)) hint) (wrld-len (wrld-fn-len state))
        ((if (<a class="sym-link system" href="../../../../axioms.html#def-atom" data-sym="ATOM">atom</a> hint)) `(<span class="keyword">:wrld-len</span> ,SMT::WRLD-LEN))
        ((unless (cdr hint)) hint)
        ((<a class="sym-link system" href="../../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> <a class="sym-link system" href="../../../../axioms.html#def-rest" data-sym="REST">rest</a>) hint)
        (new-second (trans-hint-option <a class="sym-link system" href="../../../../axioms.html#def-first" data-sym="FIRST">first</a> <a class="sym-link system" href="../../../../axioms.html#def-second" data-sym="SECOND">second</a> state))
        (new-hint `(,FIRST ,SMT::NEW-SECOND
            ,@(SMT::TRANS-HINT REST SMT::STATE))))
      new-hint)))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection process-hint-clause-processor
  <span class="keyword">:parents</span> (smtlink-process-user-hint)
  (<a class="sym-link system" href="../../../../defthm.html#def-defevaluator" data-sym="DEFEVALUATOR">defevaluator</a> ev-process-hint
    ev-lst-process-hint
    ((<a class="sym-link system" href="../../../../axioms.html#def-not" data-sym="NOT">not</a> x) (if x
        y
        z)
      (hint-please hint)))
  (def-join-thms ev-process-hint)
  (<a class="sym-link system" href="../../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable process-hint)))
    (<a class="sym-link system" href="../../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> correctness-of-process-hint
      (<a class="sym-link system" href="../../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../../axioms.html#def-and" data-sym="AND">and</a> (pseudo-term-listp cl)
          (<a class="sym-link system" href="../../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> b)
          (ev-process-hint (<a class="sym-link system" href="../../../../axioms.html#def-conjoin-clauses" data-sym="CONJOIN-CLAUSES">conjoin-clauses</a> (process-hint cl hint))
            b))
        (ev-process-hint (<a class="sym-link system" href="../../../../axioms.html#def-disjoin" data-sym="DISJOIN">disjoin</a> cl) b))
      <span class="keyword">:rule-classes</span> <span class="keyword">:clause-processor</span>))
  (<a class="sym-link system" href="../../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> smtlink
    (clause hint)
    `(process-hint ,SMT::CLAUSE
      (trans-hint ',SMT::HINT state)))
  (<a class="sym-link system" href="../../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> smtlink-custom
    (clause hint)
    `(process-hint ,SMT::CLAUSE
      (trans-hint ',(APPEND SMT::HINT &#39;(:CUSTOM-P T))
        state)))
  (<a class="sym-link system" href="../../../../axioms.html#def-add-custom-keyword-hint" data-sym="ADD-CUSTOM-KEYWORD-HINT">add-custom-keyword-hint</a> <span class="keyword">:smtlink</span> (<a class="sym-link system" href="../../../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~%Using clause-processor Smtlink~%"</span>
        nil
        <a class="sym-link system" href="../../../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
        state
        nil)
      (<a class="sym-link system" href="../../../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../../../axioms.html#def-splice-keyword-alist" data-sym="SPLICE-KEYWORD-ALIST">splice-keyword-alist</a> <span class="keyword">:smtlink</span> `(<span class="keyword">:clause-processor</span> (smtlink clause ,VAL))
          keyword-alist))))
  (<a class="sym-link system" href="../../../../axioms.html#def-add-custom-keyword-hint" data-sym="ADD-CUSTOM-KEYWORD-HINT">add-custom-keyword-hint</a> <span class="keyword">:smtlink-custom</span> (<a class="sym-link system" href="../../../../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../../../../basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~%Using clause-processor Smtlink (customized)~%"</span>
        nil
        <a class="sym-link system" href="../../../../axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
        state
        nil)
      (<a class="sym-link system" href="../../../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../../../axioms.html#def-splice-keyword-alist" data-sym="SPLICE-KEYWORD-ALIST">splice-keyword-alist</a> <span class="keyword">:smtlink-custom</span> `(<span class="keyword">:clause-processor</span> (smtlink-custom clause ,VAL))
          keyword-alist)))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>