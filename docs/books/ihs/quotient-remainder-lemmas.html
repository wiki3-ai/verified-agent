<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>quotient-remainder-lemmas - ACL2 Book</title>
  <meta property="name" content="quotient-remainder-lemmas">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">quotient-remainder-lemmas</h1>
    <div class="path"><a href="quotient-remainder-lemmas.lisp" class="source-link">books/ihs/quotient-remainder-lemmas</a></div>
  </div>
  
  <main property="text">
  <div class="includes-section">
    <h2>Included Books</h2>
    <div class="includes-list">
      <a class="include-link" href="ihs-init.html" title="ihs-init">ihs-init</a>
      <a class="include-link" href="ihs-theories.html" title="ihs-theories">ihs-theories</a>
      <a class="include-link" href="../std/util/defrule.html" title="std/util/defrule">defrule</a>
      <a class="include-link local" href="math-lemmas.html" title="math-lemmas">math-lemmas</a>
    </div>
  </div>

<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block include-book" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="ihs-init.html" title="Open ihs-init">"ihs-init"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="ihs-theories.html" title="Open ihs-theories">"ihs-theories"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../std/util/defrule.html" title="Open std/util/defrule">"std/util/defrule"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block local" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="math-lemmas.html" title="Open math-lemmas">"math-lemmas"</a>))</pre>
  </div>

<div class="form-block local" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> nil))</pre>
  </div>

<div class="form-block local" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable basic-boot-strap
      ihs-math
      rationalp-algebra
      <a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a>
      <a class="sym-link system" href="../../axioms.html#def-nfix" data-sym="NFIX">nfix</a>)))</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc ihs/quotient-remainder-lemmas
  <span class="keyword">:parents</span> (ihs)
  <span class="keyword">:short</span> <span class="string">"A book of facts about FLOOR, MOD, TRUNCATE and REM, and integer
  ratios.  Also enough of a theory of the Acl2 function @(see
  nonnegative-integer-quotient) to prove the rules."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Since @(see nonnegative-integer-quotient) is the only one of these
functions that is recursive, the others must be DISABLEd for this library to be
of any use.  This can easily be done by DISABLEing the
QUOTIENT-REMAINDER-FUNCTIONS theory (defined by this book):&lt;/p&gt;

@({
  (IN-THEORY (DISABLE QUOTIENT-REMAINDER-FUNCTIONS))
})

&lt;h3&gt;Introduction&lt;/h3&gt;

&lt;p&gt;Common Lisp defines the quotient/remainder functions FLOOR/MOD and
TRUNCATE/REM, which operate on any rational numbers (as long as the divisor is
non-zero).  Both (TRUNCATE x y) and (FLOOR x y) are integers, and specify the
`integer part&#39; of the rational number x/y; they differ in the direction of
rounding.&lt;/p&gt;

&lt;p&gt;TRUNCATE is the `FORTRAN-style&#39; quotient operation, rounding towards 0,
i.e., (TRUNCATE x y) = (TRUNCATE (ABS x) (ABS y)).  This book provides a
selected theory of TRUNCATE and REM.&lt;/p&gt;

&lt;p&gt;(FLOOR x y) is identical to TRUNCATE if x/y &amp;gt; 0 or x/y is an integer,
otherwise for negative non-integer ratios x/y, (FLOOR x y) = (TRUNCATE x y) -
1.  (FLOOR i (EXPT 2 j)) is the specification of an `arithmetic shift&#39; of the
integer i by -j bits.  Since FLOOR and MOD are the foundations for integer
descriptions of hardware, this book contains a very extensive theory of FLOOR
and MOD.&lt;/p&gt;

&lt;p&gt;The formal definitions of the Common Lisp functions are made in terms of the
Acl2 function NONNEGATIVE-INTEGER-QUOTIENT, which is simple recursive
specification of division of nonnegative integers by repeated subtraction.  We
provide only enough of a theory of NONNEGATIVE-INTEGER-QUOTIENT to prove the
desired properties of the Common Lisp functions.&lt;/p&gt;

&lt;h3&gt;Documentation&lt;/h3&gt;

&lt;p&gt;The documentation for this library is divided into a number of sections.
There is a section for the rules that apply to each function.  Some of the
rules will appear in more than 1 section.  If a rule is exported DISABLEd, then
you will see `(D)&#39; after the rule class in the `one-liner&#39; for the rule.  Note
that we often abbreviate NONNEGATIVE-INTEGER-QUOTIENT as NIQ.&lt;/p&gt;

&lt;h3&gt;Approach&lt;/h3&gt;

&lt;p&gt;We have tried to capture the properties of the quotient/remainder functions
with the smallest number of the most general rules possible.  This approach
takes advantage of Acl2 type reasoning, and the assumed existence of a basic
mathematics simplification library.  Several lemmas contain the
hypothesis (INTEGERP (/ x y)), which we consider to be the simplest statement
of the fact that @(&#39;(&lt;quotient&gt; x y)&#39;) = x/y, e.g.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;(INTEGERP (/ x y)) &amp;rarr; (FLOOR x y) = (/ x y),&lt;/li&gt;
&lt;li&gt;(INTEGERP (/ x y)) &amp;rarr; (MOD x y) = 0.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Thus, the first fact above obviates the need for a specials lemmas
like (FLOOR i 1) = i for integers i, since (/ i 1) = i by simplification.&lt;/p&gt;

&lt;p&gt;In general, at most 2 of the many possible commutative forms of the rules
are exported from this library.  If they aren&#39;t the ones you need, simply prove
the appropriate corollary, or :USE an :INSTANCE of the library rule.  Also,
lemmas are generally exported DISABLEd if they seemed to interfere with the
proofs of other lemmas, or could easily lead to infinite looping.  Be careful
when ENABLEing these lemmas.&lt;/p&gt;

&lt;p&gt;Questions, comments, and sugestions are welcome.  Contact
brock@cli.com.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection niq-lemmas
  <span class="keyword">:parents</span> (quotient-remainder-lemmas <a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a>)
  <span class="keyword">:short</span> <span class="string">"Lemmas about @(see nonnegative-integer-quotient) (abbreviated NIQ)."</span>)</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection floor-lemmas
  <span class="keyword">:parents</span> (quotient-remainder-lemmas floor)
  <span class="keyword">:short</span> <span class="string">"Lemmas about @(see FLOOR)."</span>)</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection truncate-lemmas
  <span class="keyword">:parents</span> (quotient-remainder-lemmas truncate)
  <span class="keyword">:short</span> <span class="string">"Lemmas about @(see TRUNCATE)."</span>)</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection mod-lemmas
  <span class="keyword">:parents</span> (quotient-remainder-lemmas mod)
  <span class="keyword">:short</span> <span class="string">"Lemmas about @(see MOD)."</span>)</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection rem-lemmas
  <span class="keyword">:parents</span> (quotient-remainder-lemmas rem)
  <span class="keyword">:short</span> <span class="string">"Lemmas about @(see REM)."</span>)</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection integer-ratio-lemmas
  <span class="keyword">:parents</span> (quotient-remainder-lemmas <a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a>)
  <span class="keyword">:short</span> <span class="string">"Lemmas about ratios @(&#39;x/y&#39;) that are known to be @(see integerp)."</span>)</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection qr-guard-macros
  <span class="keyword">:parents</span> (quotient-remainder-lemmas)
  <span class="keyword">:short</span> <span class="string">"Macro forms of the guards for the quotient/remainder functions."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Without these macros, fully 25% of the text of the
&quot;quotient-remainder-lemmas&quot; book is given over simply to expressing the
guards!&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection niq-guard
  <span class="keyword">:parents</span> (qr-guard-macros)
  <span class="keyword">:short</span> <span class="string">"Macro form of the guard for @(see nonnegative-integer-quotient) (forced)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> niq-guard
    (i j)
    (mlambda (i j)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp i))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i <span class="number">0</span>))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp j))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> j <span class="number">0</span>))))))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection qr-guard
  <span class="keyword">:parents</span> (qr-guard-macros)
  <span class="keyword">:short</span> <span class="string">"Quotient/Remainder @(see GUARD): Macro form of the guards for @(see
FLOOR), @(see MOD), @(see TRUNCATE), and @(see REM), or any ratio @(&#39;x/y&#39;) of
rationals (forced)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> qr-guard
    (x y)
    (mlambda (x y)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal <span class="number">0</span> y)))))))</pre>
  </div>

<div class="form-block local" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> cancel-&lt;-+-3
    (equal (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y z) y) (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x z) <span class="number">0</span>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link external" href="math-lemmas.html#def-rewrite-linear-equalities-to-iff" data-sym="REWRITE-LINEAR-EQUALITIES-TO-IFF">rewrite-linear-equalities-to-iff</a>)))))</pre>
  </div>

<div class="form-block local" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> cancel-equal-+-3
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (acl2-numberp y)
      (equal (equal (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y z) y) (equal (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> x) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> z))))))</pre>
  </div>

<div class="form-block local" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> cancel-equal-+-right
    (equal (equal (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> y x) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> z x)) (equal (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> y) (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> z)))))</pre>
  </div>

<div class="form-block local" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ratio-theory-of-1
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> x) (&lt; <span class="number">0</span> y) (&lt; x y))
        (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">1</span>))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> x) (&lt; <span class="number">0</span> y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y x))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> x) (&lt; y <span class="number">0</span>) (&lt; x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)))
        (&lt; <span class="number">-1</span> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> x) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y) x))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">-1</span>))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> x) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">-1</span> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; <span class="number">0</span> y) (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y))
        (&lt; <span class="number">-1</span> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; <span class="number">0</span> y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x)))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">-1</span>))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; <span class="number">0</span> y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">-1</span> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)))
        (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">1</span>))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x)))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable prefer-*-to-/ <a class="sym-link external" href="math-lemmas.html#def-rewrite-linear-equalities-to-iff" data-sym="REWRITE-LINEAR-EQUALITIES-TO-IFF">rewrite-linear-equalities-to-iff</a>)))))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a> begin-quotient-remainder-lemmas)</pre>
  </div>

<div class="form-block local" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> niq-bounds-help-1
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> i)
        (&lt; <span class="number">0</span> j)
        (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> j)
        (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
      (equal (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">-1</span> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> j))) x) (&lt; i (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> j (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> j x)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (set-difference-theories (enable <a class="sym-link external" href="math-lemmas.html#def-rewrite-linear-equalities-to-iff" data-sym="REWRITE-LINEAR-EQUALITIES-TO-IFF">rewrite-linear-equalities-to-iff</a>)
         '(&lt;-*-left-cancel))
       <span class="keyword">:use</span> (<span class="keyword">:instance</span> &lt;-*-left-cancel
         (z j)
         (y x)
         (x (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> j)) j)))))
    <span class="keyword">:rule-classes</span> nil))</pre>
  </div>

<div class="form-block theorem" id="def-niq-bounds" data-defines="NIQ-BOUNDS" data-references="+,X,NIQ-BOUNDS-HELP-1,RATIO-THEORY-OF-1,NFIX,IFIX,ENABLE,-,<,/,NONNEGATIVE-INTEGER-QUOTIENT,<=,AND,J,I,NIQ-GUARD,IMPLIES,NIQ-LEMMAS,DEFRULE" data-used-by="NIQ-TYPE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NIQ-BOUNDS">niq-bounds</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-niq-bounds" data-sym="NIQ-BOUNDS" title="(defrule niq-bounds :parents (niq-lemmas) :short
 &quot;Linear (D): @(&#39;i/j - 1 &lt; (NIQ i j) &lt;= i/j&#39;)&quot; :long
 &quot;&lt;p&gt;This lemma serves as a :LINEAR definition of @(see
NONNEGATIVE-INTEGER-QUOTIENT), and allows us to derive interesting properties
of @(see FLOOR) and @(see TRUNCATE) by linear arithmetic.&lt;/p&gt;
...">niq-bounds</a>
  <span class="keyword">:parents</span> (niq-lemmas)
  <span class="keyword">:short</span> <span class="string">"Linear (D): @(&#39;i/j - 1 &lt; (NIQ i j) &lt;= i/j&#39;)"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This lemma serves as a :LINEAR definition of @(see
NONNEGATIVE-INTEGER-QUOTIENT), and allows us to derive interesting properties
of @(see FLOOR) and @(see TRUNCATE) by linear arithmetic.&lt;/p&gt;

&lt;p&gt;This lemma is stored as a :LINEAR rule under NIQ since we think of this as a
property of NIQ, and not as a general property of (/ I J).&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (niq-guard i j)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> i j) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> i j))
      (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> i j) <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> i j))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> i j))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a>
       <a class="sym-link system" href="../../axioms.html#def-nfix" data-sym="NFIX">nfix</a>
       <a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a>
       ratio-theory-of-1)) (<span class="string">"Subgoal *1/2.2"</span> <span class="keyword">:use</span> (<span class="keyword">:instance</span> niq-bounds-help-1
        (i i)
        (j j)
        (x (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> j)) j))))))</pre>
  </div>

<div class="form-block theorem" id="def-niq-type" data-defines="NIQ-TYPE" data-references="<-*-/-LEFT,NIQ-BOUNDS,R,INTEGERP,/,>=,<,NONNEGATIVE-INTEGER-QUOTIENT,EQUAL,AND,J,I,NIQ-GUARD,IMPLIES,NIQ-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NIQ-TYPE">niq-type</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-niq-type" data-sym="NIQ-TYPE" title="(defrule niq-type :parents (niq-lemmas) :short
 &quot;Decide @(&#39;(NIQ i j) = 0&#39;), @(&#39;(NIQ i j) &gt; 0&#39;), and @(&#39;(NIQ i j) =
i/j&#39;) based on the inequalities of i and j, and the INTEGERP-ness of i/j.&quot;
 (implies (niq-guard i j)
          (and (equal (equal (nonnegative-integer-quotient i j) 0) (&lt; i j))
...">niq-type</a>
  <span class="keyword">:parents</span> (niq-lemmas)
  <span class="keyword">:short</span> <span class="string">"Decide @(&#39;(NIQ i j) = 0&#39;), @(&#39;(NIQ i j) &gt; 0&#39;), and @(&#39;(NIQ i j) =
i/j&#39;) based on the inequalities of i and j, and the INTEGERP-ness of i/j."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (niq-guard i j)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (equal (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> i j) <span class="number">0</span>) (&lt; i j))
      (equal (&lt; <span class="number">0</span> (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> i j)) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i j))
      (equal (equal (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> i j) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> i j))
        (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> i j)))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i j) (niq-guard i j))
        (&lt; <span class="number">0</span> (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> i j))))
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; i j) (niq-guard i j))
        (equal (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> i j) <span class="number">0</span>)))
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal r (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> i j)) (integerp r) (niq-guard i j))
        (equal (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> i j) r))))
  <span class="keyword">:disable</span> (<a class="sym-link local-def" href="#def-niq-bounds" data-sym="NIQ-BOUNDS" title="(defrule niq-bounds :parents (niq-lemmas) :short
 &quot;Linear (D): @(&#39;i/j - 1 &lt; (NIQ i j) &lt;= i/j&#39;)&quot; :long
 &quot;&lt;p&gt;This lemma serves as a :LINEAR definition of @(see
NONNEGATIVE-INTEGER-QUOTIENT), and allows us to derive interesting properties
of @(see FLOOR) and @(see TRUNCATE) by linear arithmetic.&lt;/p&gt;
...">niq-bounds</a> &lt;-*-/-left)
  <span class="keyword">:use</span> (<a class="sym-link local-def" href="#def-niq-bounds" data-sym="NIQ-BOUNDS" title="(defrule niq-bounds :parents (niq-lemmas) :short
 &quot;Linear (D): @(&#39;i/j - 1 &lt; (NIQ i j) &lt;= i/j&#39;)&quot; :long
 &quot;&lt;p&gt;This lemma serves as a :LINEAR definition of @(see
NONNEGATIVE-INTEGER-QUOTIENT), and allows us to derive interesting properties
of @(see FLOOR) and @(see TRUNCATE) by linear arithmetic.&lt;/p&gt;
...">niq-bounds</a>))</pre>
  </div>

<div class="form-block theorem" id="def-truncate-rem-elim" data-defines="TRUNCATE-REM-ELIM" data-references="TRUNCATE,*,REM,+,EQUAL,Y,X,REAL/RATIONALP,FORCE,AND,IMPLIES,TRUNCATE-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRUNCATE-REM-ELIM">truncate-rem-elim</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-truncate-rem-elim" data-sym="TRUNCATE-REM-ELIM" title="(defrule truncate-rem-elim :parents (truncate-lemmas) :short
 &quot;Rewrite: @(&#39;(+ (REM x y) (* y (TRUNCATE x y))) = x&#39;).&quot;
 (implies (and (force (real/rationalp x)) (force (real/rationalp y)))
          (equal (+ (rem x y) (* y (truncate x y))) x))
 :rule-classes (:rewrite :elim) :enable rem)">truncate-rem-elim</a>
  <span class="keyword">:parents</span> (truncate-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(+ (REM x y) (* y (TRUNCATE x y))) = x&#39;)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)) (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y)))
    (equal (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (rem x y) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y (truncate x y))) x))
  <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:elim</span>)
  <span class="keyword">:enable</span> rem)</pre>
  </div>

<div class="form-block theorem" id="def-truncate-_3D-x_2Fy" data-defines="TRUNCATE-=-X/Y" data-references="COMMUTATIVITY-OF-*,QUOTE,EQUAL-*-X-Y-X,ENABLE,SET-DIFFERENCE-THEORIES,R,AND,INTEGERP,/,TRUNCATE,EQUAL,Y,X,QR-GUARD,IMPLIES,TRUNCATE-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRUNCATE-=-X/Y">truncate-=-x/y</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-truncate-_3D-x_2Fy" data-sym="TRUNCATE-=-X/Y" title="(defrule truncate-=-x/y :parents (truncate-lemmas) :short
 &quot;Rewrite: @(&#39;(TRUNCATE x y) = x/y&#39;), when x/y is an integer.&quot; :long
 &quot;&lt;p&gt;This rule is a corollary of a more general equality, which is also
stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;&quot;
 (implies (qr-guard x y)
...">truncate-=-x/y</a>
  <span class="keyword">:parents</span> (truncate-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(TRUNCATE x y) = x/y&#39;), when x/y is an integer."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is a corollary of a more general equality, which is also
stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (equal (equal (truncate x y) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)) (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal r (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)) (integerp r) (qr-guard x y))
        (equal (truncate x y) r))))
  <span class="keyword">:in-theory</span> (set-difference-theories (enable truncate equal-*-x-y-x)
    '(<a class="sym-link system" href="../../axioms.html#def-commutativity-of-_2A" data-sym="COMMUTATIVITY-OF-*">commutativity-of-*</a>)))</pre>
  </div>

<div class="form-block theorem" id="def-truncate-bounds" data-defines="TRUNCATE-BOUNDS" data-references="<-*-/-RIGHT,<-*-/-LEFT,QUOTE,RATIONAL-IMPLIES2,ENABLE,SET-DIFFERENCE-THEORIES,+,<=,TRUNCATE,/,-,<,QR-GUARD,Y,>,X,>=,IMPLIES,AND,TRUNCATE-LEMMAS,DEFRULE" data-used-by="REM-BOUNDS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRUNCATE-BOUNDS">truncate-bounds</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-truncate-bounds" data-sym="TRUNCATE-BOUNDS" title="(defrule truncate-bounds :parents (truncate-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (TRUNCATE x y) &lt;= x/y&#39;), when @(&#39;x/y &gt;= 0&#39;);
 @(&#39;x/y &lt;= (TRUNCATE x y) &lt; x/y + 1&#39;), when @(&#39;x/y =&lt; 0&#39;).&quot;
 :long &quot;&lt;p&gt;This lemma `defines&#39; TRUNCATE as a set of inequalties.  Many of the
properties of TRUNCATE will be derived from this theorem.  Unfortunately, this
...">truncate-bounds</a>
  <span class="keyword">:parents</span> (truncate-lemmas)
  <span class="keyword">:short</span> <span class="string">"Linear (D) : @(&#39;x/y - 1 &lt; (TRUNCATE x y) &lt;= x/y&#39;), when @(&#39;x/y &gt;= 0&#39;);
 @(&#39;x/y &lt;= (TRUNCATE x y) &lt; x/y + 1&#39;), when @(&#39;x/y =&lt; 0&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This lemma `defines&#39; TRUNCATE as a set of inequalties.  Many of the
properties of TRUNCATE will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure unless the
inequalities of X and Y can be decided, so it may need to be DISABLEd at times.
This lemma is stored as a :LINEAR rule for TRUNCATE exclusively since we
consider it to be a property of TRUNCATE, and not a general property of (/ x
y).&lt;/p&gt;

&lt;p&gt;The statement of the hypotheses of this lemma is critical for its proper
application.  It is necessary for each inequality of x and y to stand alone in
order to be relieveable by linear arithmetic.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (qr-guard x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">1</span>) (truncate x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (truncate x y) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))))
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (qr-guard x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">1</span>) (truncate x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (truncate x y) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))))
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (qr-guard x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (truncate x y))
        (&lt; (truncate x y) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">1</span>))))
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (qr-guard x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (truncate x y))
        (&lt; (truncate x y) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">1</span>)))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((truncate x y))))
  <span class="keyword">:in-theory</span> (set-difference-theories (enable truncate <a class="sym-link system" href="../../axioms.html#def-rational-implies2" data-sym="RATIONAL-IMPLIES2">rational-implies2</a>)
    '(&lt;-*-/-left &lt;-*-/-right)))</pre>
  </div>

<div class="form-block theorem" id="def-truncate-type" data-defines="TRUNCATE-TYPE" data-references="ABS,>=,-,>,<=,OR,TRUNCATE,<,EQUAL,AND,Y,X,QR-GUARD,IMPLIES,TRUNCATE-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRUNCATE-TYPE">truncate-type</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-truncate-type" data-sym="TRUNCATE-TYPE" title="(defrule truncate-type :parents (truncate-lemmas) :short
 &quot;Decide @(&#39;(TRUNCATE x y) &lt; 0&#39;), @(&#39;(TRUNCATE x y) &gt; 0&#39;), and
@(&#39;(TRUNCATE x y) = 0&#39;) based on inequalities of x and y.&quot;
 :long &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
:TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we can
...">truncate-type</a>
  <span class="keyword">:parents</span> (truncate-lemmas)
  <span class="keyword">:short</span> <span class="string">"Decide @(&#39;(TRUNCATE x y) &lt; 0&#39;), @(&#39;(TRUNCATE x y) &gt; 0&#39;), and
@(&#39;(TRUNCATE x y) = 0&#39;) based on inequalities of x and y."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
:TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we can
decide the inequalities of X and Y the :LINEAR forms may thrash.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (&lt; (truncate x y) <span class="number">0</span>)
        (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x)))
          (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y) x))))
      (equal (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (truncate x y) <span class="number">0</span>)
        (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y x))
          (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> y x))))
      (equal (equal (truncate x y) <span class="number">0</span>) (&lt; (abs x) (abs y)))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x)) (qr-guard x y))
        (&lt; (truncate x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y) x) (qr-guard x y))
        (&lt; (truncate x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y x) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (truncate x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> y x) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (truncate x y) <span class="number">0</span>)))
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (abs x) (abs y)) (qr-guard x y))
        (equal (truncate x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (truncate x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (truncate x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (truncate x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (truncate x y) <span class="number">0</span>))))
  <span class="keyword">:cases</span> ((&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>)))</pre>
  </div>

<div class="form-block encapsulate" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (current-theory 'begin-quotient-remainder-lemmas)))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable truncate)))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> foo
      (equal (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x))
        (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (acl2-numberp x))))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> truncate-minus
    <span class="keyword">:parents</span> (truncate-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(TRUNCATE (- x) y) = (- (TRUNCATE x y))&#39;) and
@(&#39;(TRUNCATE x (- y)) = (- (TRUNCATE x y))&#39;)."</span>
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (truncate (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (truncate x y)))
      (equal (truncate x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (truncate x y))))
    <span class="keyword">:in-theory</span> (enable denominator-unary-minus)
    <span class="keyword">:expand</span> (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> <span class="number">0</span>
      (denominator (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y))))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> rewrite-truncate-x*y-z-left
    <span class="keyword">:parents</span> (truncate-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite (D): @(&#39;(TRUNCATE (* x y) z) = (TRUNCATE y (/ z x))&#39;), when x /= 0."</span>
    <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Since we don&#39;t presume any rewriting strategy for @(see /)
  vis-a-vis @(see *), this often useful rule is exported DISABLEd.&lt;/p&gt;"</span>
    (equal (truncate (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) z) (truncate y (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z x))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> rewrite-truncate-x*y-z-right
    <span class="keyword">:parents</span> (truncate-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite (D): @(&#39;(TRUNCATE (* x y) z) = (TRUNCATE x (/ z y))&#39;), when y /= 0."</span>
    <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Since we don&#39;t presume any rewriting strategy for / vis-a-vis *, this
  often useful rule is exported DISABLEd.&lt;/p&gt;"</span>
    (equal (truncate (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) z) (truncate x (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> truncate-cancel-*
    <span class="keyword">:parents</span> (truncate-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(TRUNCATE (* x y) y) = (TRUNCATE x 1)&#39;)."</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (truncate (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) y) (truncate x <span class="number">1</span>))
        (equal (truncate (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y x) y) (truncate x <span class="number">1</span>))))))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> integer-truncate-as-niq
  <span class="keyword">:parents</span> (truncate-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite (D) : @(&#39;(TRUNCATE i j) = (SIGNUM i) * (SIGNUM j) * (NIQ i
    j)&#39;), for integers i,j."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule shows that TRUNCATE is the &quot;usual&quot; (i.e., FORTRAN-style)
  integer quotient for both positive and negative integers.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (integerp j) (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal j <span class="number">0</span>))))
    (equal (truncate i j)
      (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> (signum i)
        (signum j)
        (<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> (abs i) (abs j)))))
  <span class="keyword">:in-theory</span> (disable <a class="sym-link local-def" href="#def-truncate-bounds" data-sym="TRUNCATE-BOUNDS" title="(defrule truncate-bounds :parents (truncate-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (TRUNCATE x y) &lt;= x/y&#39;), when @(&#39;x/y &gt;= 0&#39;);
 @(&#39;x/y &lt;= (TRUNCATE x y) &lt; x/y + 1&#39;), when @(&#39;x/y =&lt; 0&#39;).&quot;
 :long &quot;&lt;p&gt;This lemma `defines&#39; TRUNCATE as a set of inequalties.  Many of the
properties of TRUNCATE will be derived from this theorem.  Unfortunately, this
...">truncate-bounds</a>
    <a class="sym-link local-def" href="#def-niq-bounds" data-sym="NIQ-BOUNDS" title="(defrule niq-bounds :parents (niq-lemmas) :short
 &quot;Linear (D): @(&#39;i/j - 1 &lt; (NIQ i j) &lt;= i/j&#39;)&quot; :long
 &quot;&lt;p&gt;This lemma serves as a :LINEAR definition of @(see
NONNEGATIVE-INTEGER-QUOTIENT), and allows us to derive interesting properties
of @(see FLOOR) and @(see TRUNCATE) by linear arithmetic.&lt;/p&gt;
...">niq-bounds</a>
    &lt;-*-/-right
    &lt;-*-/-left
    <a class="sym-link local-def" href="#def-truncate-type" data-sym="TRUNCATE-TYPE" title="(defrule truncate-type :parents (truncate-lemmas) :short
 &quot;Decide @(&#39;(TRUNCATE x y) &lt; 0&#39;), @(&#39;(TRUNCATE x y) &gt; 0&#39;), and
@(&#39;(TRUNCATE x y) = 0&#39;) based on inequalities of x and y.&quot;
 :long &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
:TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we can
...">truncate-type</a>
    <a class="sym-link system" href="../../axioms.html#def-default-_3C-1" data-sym="DEFAULT-&lt;-1">default-&lt;-1</a>
    <a class="sym-link system" href="../../axioms.html#def-default-_3C-2" data-sym="DEFAULT-&lt;-2">default-&lt;-2</a>
    <a class="sym-link external" href="math-lemmas.html#def-integerp-_2B-minus-_2A" data-sym="INTEGERP-+-MINUS-*">integerp-+-minus-*</a>)
  <span class="keyword">:use</span> ((<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-truncate-bounds" data-sym="TRUNCATE-BOUNDS" title="(defrule truncate-bounds :parents (truncate-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (TRUNCATE x y) &lt;= x/y&#39;), when @(&#39;x/y &gt;= 0&#39;);
 @(&#39;x/y &lt;= (TRUNCATE x y) &lt; x/y + 1&#39;), when @(&#39;x/y =&lt; 0&#39;).&quot;
 :long &quot;&lt;p&gt;This lemma `defines&#39; TRUNCATE as a set of inequalties.  Many of the
properties of TRUNCATE will be derived from this theorem.  Unfortunately, this
...">truncate-bounds</a> (x i) (y j)) (<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-niq-bounds" data-sym="NIQ-BOUNDS" title="(defrule niq-bounds :parents (niq-lemmas) :short
 &quot;Linear (D): @(&#39;i/j - 1 &lt; (NIQ i j) &lt;= i/j&#39;)&quot; :long
 &quot;&lt;p&gt;This lemma serves as a :LINEAR definition of @(see
NONNEGATIVE-INTEGER-QUOTIENT), and allows us to derive interesting properties
of @(see FLOOR) and @(see TRUNCATE) by linear arithmetic.&lt;/p&gt;
...">niq-bounds</a> (i (abs i)) (j (abs j)))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> linearize-rem
  <span class="keyword">:parents</span> (rem-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite (D): Transform @(&#39;(REM x y) &lt; z&#39;), @(&#39;(REM x y) &gt; z&#39;), and
@(&#39;(REM x y) = z&#39;) into an equivalent @(see TRUNCATE) expression suitable for
reasoning about with @(see TRUNCATE-BOUNDS) and other @(see truncate-lemmas)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Since this lemma can be considered a &quot;definition&quot; of REM, it is
exported DISABLED.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z)))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (&lt; (rem x y) z)
        (if (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>)
          (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (truncate x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y))
          (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (truncate x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y))))
      (equal (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (rem x y) z)
        (if (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>)
          (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (truncate x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y))
          (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (truncate x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y))))
      (equal (equal (rem x y) z)
        (equal (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (truncate x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y)))))
  <span class="keyword">:enable</span> (rem prefer-*-to-/))</pre>
  </div>

<div class="form-block theorem" id="def-rem-_3D-0" data-defines="REM-=-0" data-references="LINEARIZE-REM,AND,/,INTEGERP,REM,EQUAL,Y,X,QR-GUARD,IMPLIES,REM-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REM-=-0">rem-=-0</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-rem-_3D-0" data-sym="REM-=-0" title="(defrule rem-=-0 :parents (rem-lemmas) :short
 &quot;Rewrite: @(&#39;(REM x y) = 0&#39;), when @(&#39;x/y&#39;) is an integer.&quot; :long
 &quot;&lt;p&gt;This rule is a corollary of a more general equality.  The equality
  is also stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;&quot;
 (implies (qr-guard x y) (equal (equal (rem x y) 0) (integerp (/ x y))))
...">rem-=-0</a>
  <span class="keyword">:parents</span> (rem-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(REM x y) = 0&#39;), when @(&#39;x/y&#39;) is an integer."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is a corollary of a more general equality.  The equality
  is also stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (equal (equal (rem x y) <span class="number">0</span>) (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)) (qr-guard x y))
        (equal (rem x y) <span class="number">0</span>))))
  <span class="keyword">:enable</span> (linearize-rem))</pre>
  </div>

<div class="form-block theorem" id="def-rem-x-y-_3D-x" data-defines="REM-X-Y-=-X" data-references="LINEARIZE-REM,AND,ABS,<,REM,EQUAL,Y,X,QR-GUARD,IMPLIES,REM-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REM-X-Y-=-X">rem-x-y-=-x</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-rem-x-y-_3D-x" data-sym="REM-X-Y-=-X" title="(defrule rem-x-y-=-x :parents (rem-lemmas) :short
 &quot;@(&#39;(REM x y) = x&#39;), when @(&#39;|x| &lt; |y|&#39;).&quot; :long
 &quot;&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;&quot;
 (implies (qr-guard x y) (equal (equal (rem x y) x) (&lt; (abs x) (abs y))))
...">rem-x-y-=-x</a>
  <span class="keyword">:parents</span> (rem-lemmas)
  <span class="keyword">:short</span> <span class="string">"@(&#39;(REM x y) = x&#39;), when @(&#39;|x| &lt; |y|&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (equal (equal (rem x y) x) (&lt; (abs x) (abs y))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (abs x) (abs y)) (qr-guard x y))
        (equal (rem x y) x))))
  <span class="keyword">:enable</span> (linearize-rem))</pre>
  </div>

<div class="form-block theorem" id="def-integerp-rem" data-defines="INTEGERP-REM" data-references="REM,EQUAL,NOT,FORCE,J,I,INTEGERP,AND,IMPLIES,REM-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTEGERP-REM">integerp-rem</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-integerp-rem" data-sym="INTEGERP-REM" title="(defrule integerp-rem :parents (rem-lemmas) :short
 &quot;Type-Prescription: (REM i j) is an integer, when i and j are integers.&quot;
 (implies (and (integerp i) (integerp j) (force (not (equal j 0))))
          (integerp (rem i j)))
 :rule-classes :type-prescription :enable rem)">integerp-rem</a>
  <span class="keyword">:parents</span> (rem-lemmas)
  <span class="keyword">:short</span> <span class="string">"Type-Prescription: (REM i j) is an integer, when i and j are integers."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (integerp j) (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal j <span class="number">0</span>))))
    (integerp (rem i j)))
  <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:enable</span> rem)</pre>
  </div>

<div class="form-block theorem" id="def-rem-bounds" data-defines="REM-BOUNDS" data-references="TRUNCATE-BOUNDS,LINEARIZE-REM,-,>,<=,ABS,REM,<,Y,QR-GUARD,X,>=,IMPLIES,AND,REM-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REM-BOUNDS">rem-bounds</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-rem-bounds" data-sym="REM-BOUNDS" title="(defrule rem-bounds :parents (rem-lemmas) :short
 &quot;Linear: Useful forms of the fact that @(&#39;(REM x y) &lt; |y|&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma is also stored as a :GENERALIZE rule.&lt;/p&gt;&quot;
 (and (implies (and (&gt;= x 0) (qr-guard x y)) (&lt; (rem x y) (abs y)))
      (implies (and (&lt;= x 0) (qr-guard x y)) (&gt; (rem x y) (- (abs y)))))
...">rem-bounds</a>
  <span class="keyword">:parents</span> (rem-lemmas)
  <span class="keyword">:short</span> <span class="string">"Linear: Useful forms of the fact that @(&#39;(REM x y) &lt; |y|&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This lemma is also stored as a :GENERALIZE rule.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (qr-guard x y))
      (&lt; (rem x y) (abs y)))
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (qr-guard x y))
      (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (rem x y) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (abs y)))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((rem x y))) (<span class="keyword">:generalize</span>))
  <span class="keyword">:enable</span> linearize-rem
  <span class="keyword">:disable</span> <a class="sym-link local-def" href="#def-truncate-bounds" data-sym="TRUNCATE-BOUNDS" title="(defrule truncate-bounds :parents (truncate-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (TRUNCATE x y) &lt;= x/y&#39;), when @(&#39;x/y &gt;= 0&#39;);
 @(&#39;x/y &lt;= (TRUNCATE x y) &lt; x/y + 1&#39;), when @(&#39;x/y =&lt; 0&#39;).&quot;
 :long &quot;&lt;p&gt;This lemma `defines&#39; TRUNCATE as a set of inequalties.  Many of the
properties of TRUNCATE will be derived from this theorem.  Unfortunately, this
...">truncate-bounds</a>
  <span class="keyword">:use</span> <a class="sym-link local-def" href="#def-truncate-bounds" data-sym="TRUNCATE-BOUNDS" title="(defrule truncate-bounds :parents (truncate-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (TRUNCATE x y) &lt;= x/y&#39;), when @(&#39;x/y &gt;= 0&#39;);
 @(&#39;x/y &lt;= (TRUNCATE x y) &lt; x/y + 1&#39;), when @(&#39;x/y =&lt; 0&#39;).&quot;
 :long &quot;&lt;p&gt;This lemma `defines&#39; TRUNCATE as a set of inequalties.  Many of the
properties of TRUNCATE will be derived from this theorem.  Unfortunately, this
...">truncate-bounds</a>)</pre>
  </div>

<div class="form-block theorem" id="def-rem-type" data-defines="REM-TYPE" data-references="<-*-/-LEFT,<-*-/-RIGHT,QUOTE,LINEARIZE-REM,ENABLE,SET-DIFFERENCE-THEORIES,>=,<=,>,/,INTEGERP,NOT,REM,<,EQUAL,AND,Y,X,QR-GUARD,IMPLIES,REM-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REM-TYPE">rem-type</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-rem-type" data-sym="REM-TYPE" title="(defrule rem-type :parents (rem-lemmas) :short
 &quot;Decide @(&#39;(REM x y) &lt; 0&#39;) and @(&#39;(REM x y) &gt; 0&#39;) based on the sign of
    x and the INTEGERP-ness of x/y.&quot;
 :long &quot;&lt;p&gt;This rule is stored as appropriate :REWRITE, :LINEAR, :GENERALIZE,
  and :TYPE-PRESCRIPTION rules.&lt;/p&gt;&quot;
...">rem-type</a>
  <span class="keyword">:parents</span> (rem-lemmas)
  <span class="keyword">:short</span> <span class="string">"Decide @(&#39;(REM x y) &lt; 0&#39;) and @(&#39;(REM x y) &gt; 0&#39;) based on the sign of
    x and the INTEGERP-ness of x/y."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is stored as appropriate :REWRITE, :LINEAR, :GENERALIZE,
  and :TYPE-PRESCRIPTION rules.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (&lt; (rem x y) <span class="number">0</span>)
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))))
      (equal (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (rem x y) <span class="number">0</span>)
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))) (qr-guard x y))
        (&lt; (rem x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (rem x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (qr-guard x y)) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (rem x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (qr-guard x y)) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (rem x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))) (qr-guard x y))
        (&lt; (rem x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (rem x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (qr-guard x y)) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (rem x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (qr-guard x y)) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (rem x y) <span class="number">0</span>))))
  <span class="keyword">:in-theory</span> (set-difference-theories (enable linearize-rem)
    '(&lt;-*-/-right &lt;-*-/-left)))</pre>
  </div>

<div class="form-block theorem" id="def-rem-minus" data-defines="REM-MINUS" data-references="LINEARIZE-REM,SIGNUM,*,-,REM,EQUAL,AND,Y,X,QR-GUARD,IMPLIES,REM-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REM-MINUS">rem-minus</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-rem-minus" data-sym="REM-MINUS" title="(defrule rem-minus :parents (rem-lemmas) :short
 &quot;Rewrite: @(&#39;(REM (- x) y) = (- (REM x y))&#39;);
   @(&#39;(REM x (- y)) = (SIGNUM x) * (SIGNUM y) * (REM x y)&#39;).&quot;
 (implies (qr-guard x y)
          (and (equal (rem (- x) y) (- (rem x y)))
...">rem-minus</a>
  <span class="keyword">:parents</span> (rem-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(REM (- x) y) = (- (REM x y))&#39;);
   @(&#39;(REM x (- y)) = (SIGNUM x) * (SIGNUM y) * (REM x y)&#39;)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (rem (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (rem x y)))
      (equal (rem x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> (signum y) (signum y) (rem x y)))))
  <span class="keyword">:enable</span> linearize-rem
  <span class="keyword">:expand</span> (rem x y))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> floor-as-truncate
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite (FLOOR x y) to a function of (TRUNCATE x y)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (equal (floor x y)
      (if (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">0</span>))
        (truncate x y)
        (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (truncate x y) <span class="number">1</span>))))
  <span class="keyword">:enable</span> (floor truncate))</pre>
  </div>

<div class="form-block theorem" id="def-floor-mod-elim" data-defines="FLOOR-MOD-ELIM" data-references="FLOOR,*,Y,MOD,+,EQUAL,X,ACL2-NUMBERP,IMPLIES,FLOOR-LEMMAS,DEFRULE" data-used-by="MOD-X-I*J-OF-POSITIVES" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLOOR-MOD-ELIM">floor-mod-elim</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-floor-mod-elim" data-sym="FLOOR-MOD-ELIM" title="(defrule floor-mod-elim :parents (floor-lemmas) :short
 &quot;Rewrite: @(&#39;(+ (MOD x y) (* y (FLOOR x y))) = x&#39;).&quot; :long
 &quot;&lt;p&gt;This rule is also stored as an :ELIM rule.&lt;/p&gt;&quot;
 (implies (acl2-numberp x) (equal (+ (mod x y) (* y (floor x y))) x))
 :rule-classes (:rewrite :elim) :enable mod)">floor-mod-elim</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(+ (MOD x y) (* y (FLOOR x y))) = x&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is also stored as an :ELIM rule.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (acl2-numberp x)
    (equal (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x y) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y (floor x y))) x))
  <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:elim</span>)
  <span class="keyword">:enable</span> mod)</pre>
  </div>

<div class="form-block theorem" id="def-floor-_3D-x_2Fy" data-defines="FLOOR-=-X/Y" data-references="COMMUTATIVITY-OF-*,QUOTE,EQUAL-*-X-Y-X,ENABLE,SET-DIFFERENCE-THEORIES,Z,*,R,AND,IMPLIES,INTEGERP,/,Y,X,FLOOR,EQUAL,FLOOR-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLOOR-=-X/Y">floor-=-x/y</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-floor-_3D-x_2Fy" data-sym="FLOOR-=-X/Y" title="(defrule floor-=-x/y :parents (floor-lemmas) :short
 &quot;Rewrite @(&#39;(FLOOR x y) = x/y&#39;), when x/y is an integer.&quot; :long
 &quot;&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;&quot;
 (equal (equal (floor x y) (/ x y)) (integerp (/ x y))) :rule-classes
...">floor-=-x/y</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite @(&#39;(FLOOR x y) = x/y&#39;), when x/y is an integer."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;"</span>
  (equal (equal (floor x y) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)) (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal r (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)) (integerp r))
        (equal (floor x y) r)))
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)) (equal (floor x y) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))))
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y)) z)
        (equal (equal (floor x y) z) (integerp z)))))
  <span class="keyword">:in-theory</span> (set-difference-theories (enable floor equal-*-x-y-x)
    '(<a class="sym-link system" href="../../axioms.html#def-commutativity-of-_2A" data-sym="COMMUTATIVITY-OF-*">commutativity-of-*</a>)))</pre>
  </div>

<div class="form-block theorem" id="def-floor-bounded-by-_2F" data-defines="FLOOR-BOUNDED-BY-/" data-references="<-*-/-RIGHT,<-*-/-LEFT,QUOTE,RATIONAL-IMPLIES2,ENABLE,SET-DIFFERENCE-THEORIES,<=,FLOOR,/,-,<,AND,Y,X,QR-GUARD,IMPLIES,FLOOR-LEMMAS,DEFRULE" data-used-by="MOD-X-I*J-OF-POSITIVES,MOD-TYPE,MOD-BOUNDED-BY-MODULUS,FLOOR-TYPE-4" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLOOR-BOUNDED-BY-/">floor-bounded-by-/</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This lemma &quot;defines&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
DISABLEd at times.  This lemmas is stored as a :LINEAR rule for FLOOR
exclusively since we consider it to be a property of FLOOR, and not a general
property of @(&#39;(/ x y)&#39;).&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">1</span>) (floor x y)) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (floor x y) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((floor x y))) (<span class="keyword">:generalize</span>))
  <span class="keyword">:in-theory</span> (set-difference-theories (enable floor <a class="sym-link system" href="../../axioms.html#def-rational-implies2" data-sym="RATIONAL-IMPLIES2">rational-implies2</a>)
    '(&lt;-*-/-left &lt;-*-/-right)))</pre>
  </div>

<div class="form-block theorem" id="def-floor-type-1" data-defines="FLOOR-TYPE-1" data-references="EQUAL,NORMALIZE-<-/-TO-*-3,ENABLE,/,>,AND,OR,FLOOR,<,IFF,Y,X,QR-GUARD,IMPLIES,FLOOR-LEMMAS,DEFRULE" data-used-by="MOD-X-I*J-OF-POSITIVES,MOD-TYPE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLOOR-TYPE-1">floor-type-1</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-floor-type-1" data-sym="FLOOR-TYPE-1" title="(defrule floor-type-1 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-1</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a> (&lt; (floor x y) <span class="number">0</span>)
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>)) (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>)))))
  <span class="keyword">:cases</span> ((&lt; (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">0</span>))
  <span class="keyword">:in-theory</span> (enable <a class="sym-link external" href="math-lemmas.html#def-normalize-_3C-_2F-to-_2A-3" data-sym="NORMALIZE-&lt;-/-TO-*-3">normalize-&lt;-/-to-*-3</a>)
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
       (equal (&lt; (floor x y) <span class="number">0</span>)
         (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>)) (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>)))))) (<span class="keyword">:generalize</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
        (equal (&lt; (floor x y) <span class="number">0</span>)
          (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>)) (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>))))))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (qr-guard x y))
        (&lt; (floor x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (qr-guard x y))
        (&lt; (floor x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (qr-guard x y))
        (&lt; (floor x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (qr-guard x y))
        (&lt; (floor x y) <span class="number">0</span>)))))</pre>
  </div>

<div class="form-block theorem" id="def-floor-type-2" data-defines="FLOOR-TYPE-2" data-references="<,<=,>=,AND,OR,FLOOR,>,EQUAL,Y,X,QR-GUARD,IMPLIES,FLOOR-LEMMAS,DEFRULE" data-used-by="MOD-X-I*J-OF-POSITIVES" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLOOR-TYPE-2">floor-type-2</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-floor-type-2" data-sym="FLOOR-TYPE-2" title="(defrule floor-type-2 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-2</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (equal (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (floor x y) <span class="number">0</span>)
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y x))
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> y x)))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y x) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (floor x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> y x) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (floor x y) <span class="number">0</span>))))
  <span class="keyword">:hints</span> ((<span class="string">"Subgoal 6"</span> <span class="keyword">:cases</span> ((<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> x))) (<span class="string">"Subgoal 2"</span> <span class="keyword">:cases</span> ((<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> x)))))</pre>
  </div>

<div class="form-block theorem" id="def-floor-type-3" data-defines="FLOOR-TYPE-3" data-references="/,<=,<,>,>=,AND,OR,FLOOR,EQUAL,Y,X,QR-GUARD,IMPLIES,FLOOR-LEMMAS,DEFRULE" data-used-by="MOD-X-I*J-OF-POSITIVES,MOD-TYPE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLOOR-TYPE-3">floor-type-3</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-floor-type-3" data-sym="FLOOR-TYPE-3" title="(defrule floor-type-3 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-3</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (equal (equal (floor x y) <span class="number">0</span>)
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (&lt; x y))
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x y)))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (&lt; x y) (qr-guard x y))
        (equal (floor x y) <span class="number">0</span>)))
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x y) (qr-guard x y))
        (equal (floor x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (floor x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (floor x y) <span class="number">0</span>))))
  <span class="keyword">:cases</span> ((&lt; (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">0</span>)))</pre>
  </div>

<div class="form-block theorem" id="def-floor-type-4" data-defines="FLOOR-TYPE-4" data-references="FLOOR-BOUNDED-BY-/,QUOTE,NORMALIZE-<-/-TO-*-3,<-+-NEGATIVE-0-2,<-+-NEGATIVE-0-1,ENABLE,SET-DIFFERENCE-THEORIES,/,-,<=,>,<,AND,OR,FLOOR,EQUAL,Y,X,QR-GUARD,IMPLIES,FLOOR-LEMMAS,DEFRULE" data-used-by="MOD-X-I*J-OF-POSITIVES" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLOOR-TYPE-4">floor-type-4</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-floor-type-4" data-sym="FLOOR-TYPE-4" title="(defrule floor-type-4 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) = -1&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-4</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Decide @(&#39;(FLOOR x y) = -1&#39;) based on inequalities of x and y."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (equal (equal (floor x y) <span class="number">-1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y))
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y))))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)) (qr-guard x y))
        (equal (floor x y) <span class="number">-1</span>)))
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y) (qr-guard x y))
        (equal (floor x y) <span class="number">-1</span>))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:cases</span> ((&lt; (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">0</span>))) (<span class="string">"Subgoal 2"</span> <span class="keyword">:in-theory</span> (set-difference-theories (enable &lt;-+-negative-0-1
          &lt;-+-negative-0-2
          <a class="sym-link external" href="math-lemmas.html#def-normalize-_3C-_2F-to-_2A-3" data-sym="NORMALIZE-&lt;-/-TO-*-3">normalize-&lt;-/-to-*-3</a>)
        '(<a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>))
      <span class="keyword">:use</span> (<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a> (x x) (y y)))))</pre>
  </div>

<div class="form-block other" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection floor-type-linear
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"A theory of the :LINEAR rules created by the lemmas FLOOR-TYPE-1 and
  FLOOR-TYPE-2."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;These rules are implicated in thrashing linear arithmetic, so we
  provide this theory which can be DISABLED if it becomes a problem.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> floor-type-linear
    '((<span class="keyword">:linear</span> <a class="sym-link local-def" href="#def-floor-type-1" data-sym="FLOOR-TYPE-1" title="(defrule floor-type-1 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-1</a> . <span class="number">1</span>) (<span class="keyword">:linear</span> <a class="sym-link local-def" href="#def-floor-type-1" data-sym="FLOOR-TYPE-1" title="(defrule floor-type-1 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-1</a> . <span class="number">2</span>)
      (<span class="keyword">:linear</span> <a class="sym-link local-def" href="#def-floor-type-2" data-sym="FLOOR-TYPE-2" title="(defrule floor-type-2 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-2</a> . <span class="number">1</span>)
      (<span class="keyword">:linear</span> <a class="sym-link local-def" href="#def-floor-type-2" data-sym="FLOOR-TYPE-2" title="(defrule floor-type-2 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-2</a> . <span class="number">2</span>))))</pre>
  </div>

<div class="form-block encapsulate" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (current-theory 'begin-quotient-remainder-lemmas)))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable floor)))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> floor-minus
    <span class="keyword">:parents</span> (floor-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite @(&#39;(FLOOR (- x) y)&#39;)."</span>
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
        (equal (floor (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y)
          (if (integerp (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y)))
            (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (floor x y))
            (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (floor x y)) <span class="number">1</span>))))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
        (equal (floor x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y))
          (if (integerp (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y)))
            (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (floor x y))
            (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (floor x y)) <span class="number">1</span>)))))
    <span class="keyword">:enable</span> denominator-unary-minus)
  (<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> rewrite-floor-x*y-z-left
    <span class="keyword">:parents</span> (floor-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite (D): @(&#39;(FLOOR (* x y) z) = (FLOOR y (/ z x))&#39;), when x /= 0."</span>
    <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Since we don&#39;t presume any rewriting strategy for / vis-a-vis *,
  this often useful rule is exported DISABLEd.&lt;/p&gt;"</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal x <span class="number">0</span>))
        (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y)
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>))))
      (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) z) (floor y (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z x)))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> rewrite-floor-x*y-z-right
    <span class="keyword">:parents</span> (floor-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(FLOOR (* x y) z) = (FLOOR x (/ z y))&#39;), when y /= 0."</span>
    <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Since we don&#39;t presume any rewriting strategy for / vis-a-vis *,
  this often useful rule is exported DISABLEd.&lt;/p&gt;"</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
        (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal y <span class="number">0</span>))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>))))
      (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) z) (floor x (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y)))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> floor-cancel-*
    <span class="keyword">:parents</span> (floor-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(FLOOR (* x y) y) = (FLOOR x 1)&#39;)."</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) y) (floor x <span class="number">1</span>))
        (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y x) y) (floor x <span class="number">1</span>)))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> floor-cancel-*-2
    <span class="keyword">:parents</span> (floor-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(FLOOR (* x y) (* x z)) = (FLOOR y z)&#39;)."</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal x <span class="number">0</span>))
        (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y)
        (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>)))
      (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z)) (floor y z)))
    <span class="keyword">:enable</span> rewrite-floor-x*y-z-left))</pre>
  </div>

<div class="form-block encapsulate" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> crock0
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; <span class="number">1</span> y) (&lt; <span class="number">0</span> x) (qr-guard x y)) (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) x))
      <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> crock1
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> <span class="number">1</span>) y) (&lt; x <span class="number">0</span>) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x x)))
      <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable &lt;-*-left-cancel (binary-+))
         <span class="keyword">:use</span> (<span class="keyword">:instance</span> &lt;-*-left-cancel (z x) (x <span class="number">2</span>) (y y))))))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> crock2
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">2</span> y) (&lt; x <span class="number">0</span>) (&lt; y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x)) (qr-guard x y))
        (&lt; x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">1</span>)))
      <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (prefer-*-to-/) (&lt;-*-left-cancel))
         <span class="keyword">:use</span> (<span class="keyword">:instance</span> &lt;-*-left-cancel (z y) (x x) (y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) <span class="number">1</span>)))))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> floor-recursion
    <span class="keyword">:parents</span> (floor-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(FLOOR x y) &lt; x&#39;), when @(&#39;x &gt; 0&#39;) and @(&#39;y &gt; 1&#39;);
           @(&#39;x &lt; (FLOOR x y)&#39;), when @(&#39;x &lt; -1&#39;) and @(&#39;y &gt;= 2&#39;)."</span>
    <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This theorem justifies recursion by FLOOR using the measure
  ACL2-COUNT, which for integers i is simply (ABS i).  Thus, this theorem won&#39;t
  justify a simple recursion by a negative y, since (FLOOR 1 y) = -1 for
  negative y, and (ABS -1) = (ABS 1).  For the most general case that includes
  negative y one would need to define a different measure that could handle
  this condition.&lt;/p&gt;"</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; <span class="number">0</span> x) (&lt; <span class="number">1</span> y)) (&lt; (floor x y) x))
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">-1</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">2</span> y)) (&lt; x (floor x y)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a> (x x) (y y)))) (<span class="string">"Goal&#39;"</span> <span class="keyword">:cases</span> ((&lt; <span class="number">0</span> x) (&lt; y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x)))))))</pre>
  </div>

<div class="form-block other" id="form-49" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> linearize-mod
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite (D): Transform @(&#39;(MOD x y) &lt; z&#39;), @(&#39;(MOD x y) &gt; z&#39;), and
  @(&#39;(MOD x y) = z&#39;) into an equivalent FLOOR expression suitable for reasoning
  about with FLOOR-BOUNDED-BY-/ and other theorems about FLOOR."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Since this lemma can be considered a `definition&#39; of MOD, it is
  exported DISABLED.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x y) (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z)))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (&lt; (mod x y) z)
        (if (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>)
          (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (floor x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y))
          (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (floor x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y))))
      (equal (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (mod x y) z)
        (if (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>)
          (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (floor x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y))
          (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (floor x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y))))
      (equal (equal (mod x y) z)
        (equal (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y) (floor x y)) (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z y)))))
  <span class="keyword">:enable</span> (mod prefer-*-to-/))</pre>
  </div>

<div class="form-block theorem" id="def-mod-_3D-0" data-defines="MOD-=-0" data-references="COMMUTATIVITY-OF-*,LINEARIZE-MOD,AND,/,INTEGERP,MOD,EQUAL,Y,X,QR-GUARD,IMPLIES,MOD-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MOD-=-0">mod-=-0</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-mod-_3D-0" data-sym="MOD-=-0" title="(defrule mod-=-0 :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD x y) = 0&#39;), when x/y is an integer.&quot; :long
 &quot;&lt;p&gt;This rule is a corollary of a more general equality.  The equality
  is also stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;&quot;
 (implies (qr-guard x y) (equal (equal (mod x y) 0) (integerp (/ x y))))
...">mod-=-0</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(MOD x y) = 0&#39;), when x/y is an integer."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is a corollary of a more general equality.  The equality
  is also stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (equal (equal (mod x y) <span class="number">0</span>) (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)) (qr-guard x y))
        (equal (mod x y) <span class="number">0</span>))))
  <span class="keyword">:enable</span> linearize-mod
  <span class="keyword">:disable</span> <a class="sym-link system" href="../../axioms.html#def-commutativity-of-_2A" data-sym="COMMUTATIVITY-OF-*">commutativity-of-*</a>)</pre>
  </div>

<div class="form-block theorem" id="def-mod-x-y-_3D-x-for-rationals" data-defines="MOD-X-Y-=-X-FOR-RATIONALS" data-references="LINEARIZE-MOD,<=,<,>,>=,AND,OR,MOD,EQUAL,Y,X,QR-GUARD,IMPLIES,MOD-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MOD-X-Y-=-X-FOR-RATIONALS">mod-x-y-=-x-for-rationals</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-mod-x-y-_3D-x-for-rationals" data-sym="MOD-X-Y-=-X-FOR-RATIONALS" title="(defrule mod-x-y-=-x-for-rationals :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD x y) = x&#39;), when @(&#39;|x| &lt;= |y|&#39;) and x and y have
  the same sign.&quot;
 :long &quot;&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as :REWRITE and :GENERALIZE rules.&lt;/p&gt;&quot;
...">mod-x-y-=-x-for-rationals</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(MOD x y) = x&#39;), when @(&#39;|x| &lt;= |y|&#39;) and x and y have
  the same sign."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as :REWRITE and :GENERALIZE rules.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (equal (equal (mod x y) x)
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (&lt; x y))
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x y)))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (&lt; x y) (qr-guard x y))
        (equal (mod x y) x)))
    (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x y) (qr-guard x y))
        (equal (mod x y) x))))
  <span class="keyword">:enable</span> linearize-mod)</pre>
  </div>

<div class="form-block encapsulate" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> another-crock (equal (equal (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) <span class="number">1</span>) (equal x <span class="number">-1</span>))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> mod-x-y-=-x+y-for-rationals
    <span class="keyword">:parents</span> (mod-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(MOD x y) = x + y&#39;), when @(&#39;|x| &lt;= |y|&#39;) and x and y
  have different signs and x /= 0."</span>
    <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This rule is a corollary of a more general equality which is
  also stored as :REWRITE and :GENERALIZE rules.&lt;/p&gt;"</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
      (equal (equal (mod x y) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y))
        (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)))
          (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y)))))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
      (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">0</span>) (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x y) (qr-guard x y))
          (equal (mod x y) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y))))
      (<span class="keyword">:rewrite</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y) (qr-guard x y))
          (equal (mod x y) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y)))))
    <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (linearize-mod) (<a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>))
    <span class="keyword">:use</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>))</pre>
  </div>

<div class="form-block theorem" id="def-integerp-mod" data-defines="INTEGERP-MOD" data-references="MOD,N,M,INTEGERP,AND,IMPLIES,MOD-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTEGERP-MOD">integerp-mod</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-integerp-mod" data-sym="INTEGERP-MOD" title="(defrule integerp-mod :parents (mod-lemmas) :short
 &quot;Type-Prescription: @(&#39;(MOD m n)&#39;) is an integer, when m and n are
  integers.&quot;
 (implies (and (integerp m) (integerp n)) (integerp (mod m n))) :enable mod
 :rule-classes (:rewrite :type-prescription))">integerp-mod</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Type-Prescription: @(&#39;(MOD m n)&#39;) is an integer, when m and n are
  integers."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp m) (integerp n))
    (integerp (mod m n)))
  <span class="keyword">:enable</span> mod
  <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>))</pre>
  </div>

<div class="form-block theorem" id="def-mod-bounded-by-modulus" data-defines="MOD-BOUNDED-BY-MODULUS" data-references="FLOOR-BOUNDED-BY-/,LINEARIZE-MOD,MOD,<,X,QR-GUARD,Y,>,IMPLIES,AND,MOD-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MOD-BOUNDED-BY-MODULUS">mod-bounded-by-modulus</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-mod-bounded-by-modulus" data-sym="MOD-BOUNDED-BY-MODULUS" title="(defrule mod-bounded-by-modulus :parents (mod-lemmas) :short
 &quot;Linear: Useful forms of the fact that @(&#39;|(MOD x y)| &lt; |y|&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma is also stored as a :GENERALIZE rule.&lt;/p&gt;&quot;
 (and (implies (and (&gt; y 0) (qr-guard x y)) (&lt; (mod x y) y))
      (implies (and (&lt; y 0) (qr-guard x y)) (&gt; (mod x y) y)))
...">mod-bounded-by-modulus</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Linear: Useful forms of the fact that @(&#39;|(MOD x y)| &lt; |y|&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This lemma is also stored as a :GENERALIZE rule.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (qr-guard x y)) (&lt; (mod x y) y))
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; y <span class="number">0</span>) (qr-guard x y)) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (mod x y) y)))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((mod x y))) (<span class="keyword">:generalize</span>))
  <span class="keyword">:enable</span> linearize-mod
  <span class="keyword">:disable</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>
  <span class="keyword">:use</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>)</pre>
  </div>

<div class="form-block theorem" id="def-mod-type" data-defines="MOD-TYPE" data-references="FLOOR-BOUNDED-BY-/,FLOOR,FLOOR-TYPE-1,FLOOR-TYPE-3,LINEARIZE-MOD,>=,<=,>,/,INTEGERP,NOT,MOD,<,EQUAL,AND,Y,X,QR-GUARD,IMPLIES,MOD-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MOD-TYPE">mod-type</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-mod-type" data-sym="MOD-TYPE" title="(defrule mod-type :parents (mod-lemmas) :short
 &quot;Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y.&quot;
 (implies (qr-guard x y)
          (and (equal (&lt; (mod x y) 0) (and (&lt; y 0) (not (integerp (/ x y)))))
...">mod-type</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (&lt; (mod x y) <span class="number">0</span>)
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))))
      (equal (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (mod x y) <span class="number">0</span>)
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y)))))))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span>)
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))) (qr-guard x y))
        (&lt; (mod x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (mod x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y <span class="number">0</span>) (qr-guard x y)) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (mod x y) <span class="number">0</span>)))
    (<span class="keyword">:linear</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> y <span class="number">0</span>) (qr-guard x y)) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (mod x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))) (qr-guard x y))
        (&lt; (mod x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))) (qr-guard x y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (mod x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> y <span class="number">0</span>) (qr-guard x y)) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (mod x y) <span class="number">0</span>)))
    (<span class="keyword">:type-prescription</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> y <span class="number">0</span>) (qr-guard x y)) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (mod x y) <span class="number">0</span>))))
  <span class="keyword">:enable</span> linearize-mod
  <span class="keyword">:disable</span> (<a class="sym-link local-def" href="#def-floor-type-3" data-sym="FLOOR-TYPE-3" title="(defrule floor-type-3 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-3</a> <a class="sym-link local-def" href="#def-floor-type-1" data-sym="FLOOR-TYPE-1" title="(defrule floor-type-1 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-1</a> (<span class="keyword">:type-prescription</span> floor))
  <span class="keyword">:use</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>)</pre>
  </div>

<div class="form-block other" id="form-56" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection mod-type-linear
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"A theory of the :LINEAR rules created by the lemma MOD-TYPE."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;These rules are implicated in thrashing linear arithmetic, so we
  provide this theory which can be DISABLED if it becomes a problem.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> mod-type-linear
    '((<span class="keyword">:linear</span> <a class="sym-link local-def" href="#def-mod-type" data-sym="MOD-TYPE" title="(defrule mod-type :parents (mod-lemmas) :short
 &quot;Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y.&quot;
 (implies (qr-guard x y)
          (and (equal (&lt; (mod x y) 0) (and (&lt; y 0) (not (integerp (/ x y)))))
...">mod-type</a> . <span class="number">1</span>) (<span class="keyword">:linear</span> <a class="sym-link local-def" href="#def-mod-type" data-sym="MOD-TYPE" title="(defrule mod-type :parents (mod-lemmas) :short
 &quot;Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y.&quot;
 (implies (qr-guard x y)
          (and (equal (&lt; (mod x y) 0) (and (&lt; y 0) (not (integerp (/ x y)))))
...">mod-type</a> . <span class="number">2</span>)
      (<span class="keyword">:linear</span> <a class="sym-link local-def" href="#def-mod-type" data-sym="MOD-TYPE" title="(defrule mod-type :parents (mod-lemmas) :short
 &quot;Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y.&quot;
 (implies (qr-guard x y)
          (and (equal (&lt; (mod x y) 0) (and (&lt; y 0) (not (integerp (/ x y)))))
...">mod-type</a> . <span class="number">3</span>)
      (<span class="keyword">:linear</span> <a class="sym-link local-def" href="#def-mod-type" data-sym="MOD-TYPE" title="(defrule mod-type :parents (mod-lemmas) :short
 &quot;Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y.&quot;
 (implies (qr-guard x y)
          (and (equal (&lt; (mod x y) 0) (and (&lt; y 0) (not (integerp (/ x y)))))
...">mod-type</a> . <span class="number">4</span>))))</pre>
  </div>

<div class="form-block theorem" id="def-mod-minus" data-defines="MOD-MINUS" data-references="LINEARIZE-MOD,/,INTEGERP,IF,-,MOD,EQUAL,AND,Y,X,QR-GUARD,IMPLIES,MOD-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MOD-MINUS">mod-minus</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-mod-minus" data-sym="MOD-MINUS" title="(defrule mod-minus :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD (- x) y)&#39;) and @(&#39;(MOD x (- y))&#39;).&quot;
 (implies (qr-guard x y)
          (and
           (equal (mod (- x) y)
...">mod-minus</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(MOD (- x) y)&#39;) and @(&#39;(MOD x (- y))&#39;)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (qr-guard x y)
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (mod (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) y)
        (if (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))
          <span class="number">0</span>
          (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y (mod x y))))
      (equal (mod x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y))
        (if (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x y))
          <span class="number">0</span>
          (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (mod x y) y)))))
  <span class="keyword">:enable</span> linearize-mod
  <span class="keyword">:expand</span> (mod x y))</pre>
  </div>

<div class="form-block encapsulate" id="def-simplify-mod-_2A" data-defines="SIMPLIFY-MOD-*" data-references="FLOOR-CANCEL-*-2,ENABLE,*,MOD,Z,Y,EQUAL,NOT,X,INTEGERP,AND,IMPLIES,DEFTHM,BEGIN-QUOTIENT-REMAINDER-LEMMAS,QUOTE,CURRENT-THEORY,IN-THEORY,LOCAL,ENCAPSULATE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIMPLIFY-MOD-*">simplify-mod-*</span><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (current-theory 'begin-quotient-remainder-lemmas)))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-simplify-mod-_2A" data-sym="SIMPLIFY-MOD-*" title="(encapsulate nil
             (local
              (in-theory (current-theory &#39;begin-quotient-remainder-lemmas)))
             (defthm simplify-mod-*
                     (implies
...">simplify-mod-*</a>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp x)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal x <span class="number">0</span>))
        (integerp y)
        (integerp z)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>)))
      (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z)) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x (mod y z))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable mod floor-cancel-*-2)))))</pre>
  </div>

<div class="form-block local" id="form-59" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>
      <a class="sym-link local-def" href="#def-floor-type-1" data-sym="FLOOR-TYPE-1" title="(defrule floor-type-1 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-1</a>
      <a class="sym-link local-def" href="#def-floor-type-2" data-sym="FLOOR-TYPE-2" title="(defrule floor-type-2 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-2</a>
      <a class="sym-link local-def" href="#def-floor-type-3" data-sym="FLOOR-TYPE-3" title="(defrule floor-type-3 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-3</a>
      <a class="sym-link local-def" href="#def-floor-type-4" data-sym="FLOOR-TYPE-4" title="(defrule floor-type-4 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) = -1&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-4</a>
      <a class="sym-link local-def" href="#def-mod-bounded-by-modulus" data-sym="MOD-BOUNDED-BY-MODULUS" title="(defrule mod-bounded-by-modulus :parents (mod-lemmas) :short
 &quot;Linear: Useful forms of the fact that @(&#39;|(MOD x y)| &lt; |y|&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma is also stored as a :GENERALIZE rule.&lt;/p&gt;&quot;
 (and (implies (and (&gt; y 0) (qr-guard x y)) (&lt; (mod x y) y))
      (implies (and (&lt; y 0) (qr-guard x y)) (&gt; (mod x y) y)))
...">mod-bounded-by-modulus</a>
      <a class="sym-link local-def" href="#def-mod-type" data-sym="MOD-TYPE" title="(defrule mod-type :parents (mod-lemmas) :short
 &quot;Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y.&quot;
 (implies (qr-guard x y)
          (and (equal (&lt; (mod x y) 0) (and (&lt; y 0) (not (integerp (/ x y)))))
...">mod-type</a>)))</pre>
  </div>

<div class="form-block local" id="form-60" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> floor-x+i*y-y
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (qr-guard x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i y)) y) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i (floor x y)))
        (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y i)) y) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i (floor x y)))
        (equal (floor (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i y)) y) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (floor x y) i))
        (equal (floor (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y i)) y) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (floor x y) i))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a> (x (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i y))) (y y)) (<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a> (x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i y))) (y y))
         (<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a> (x x) (y y)))))))</pre>
  </div>

<div class="form-block local" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> floor-x+y+i*z-z
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)) (qr-guard y z))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i z)) z) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z)))
        (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> z i)) z) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z)))
        (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> z i))) z)
          (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z) i))
        (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i z))) z)
          (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z) i))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable floor-x+i*y-y)
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> floor-x+i*y-y (x (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y)) (y z)))))))</pre>
  </div>

<div class="form-block local" id="form-62" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> mod-x+i*y-y
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (qr-guard x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i y)) y) (mod x y))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y i)) y) (mod x y))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i y))) y) (mod x y))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y i))) y) (mod x y))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable mod)))))</pre>
  </div>

<div class="form-block local" id="form-63" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> mod-x+y+i*z-z
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)) (qr-guard y z))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i z)) z) (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> z i)) z) (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i z))) z) (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> z i))) z) (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable mod-x+i*y-y)
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> mod-x+i*y-y (x (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y)) (y z)))))))</pre>
  </div>

<div class="form-block encapsulate" id="form-64" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> floor-+-crock
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
          (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y)
          (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z)
          (<a class="sym-link system" href="../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> x 'x) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> y 'y) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> z 'z))))
        (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z)
          (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x z) (mod y z))
              (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (floor x z) (floor y z)) z))
            z)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable mod-x-y-=-x+y-for-rationals
           <a class="sym-link local-def" href="#def-mod-x-y-_3D-x-for-rationals" data-sym="MOD-X-Y-=-X-FOR-RATIONALS" title="(defrule mod-x-y-=-x-for-rationals :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD x y) = x&#39;), when @(&#39;|x| &lt;= |y|&#39;) and x and y have
  the same sign.&quot;
 :long &quot;&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as :REWRITE and :GENERALIZE rules.&lt;/p&gt;&quot;
...">mod-x-y-=-x-for-rationals</a>)))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> floor-+
    <span class="keyword">:parents</span> (floor-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite (D): @(&#39;(FLOOR (+ x y) z)&#39;)."</span>
    <span class="keyword">:long</span> <span class="string">"&lt;p&gt;As this rule could easily loop it is exported DISABLEd.  Don&#39;t
   ENABLE this lemma unless you are sure that the FLOOR/MOD term will simplify,
   or else put SYNTAXP guards on the variables x, y, and/or z.&lt;/p&gt;"</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>))))
      (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z)
        (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x z) (mod y z)) z)
          (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (floor x z) (floor y z)))))
    <span class="keyword">:in-theory</span> (union-theories (disable <a class="sym-link system" href="../../axioms.html#def-associativity-of-_2B" data-sym="ASSOCIATIVITY-OF-+">associativity-of-+</a>
        <a class="sym-link system" href="../../axioms.html#def-commutativity-2-of-_2B" data-sym="COMMUTATIVITY-2-OF-+">commutativity-2-of-+</a>
        <a class="sym-link system" href="../../axioms.html#def-associativity-of-_2A" data-sym="ASSOCIATIVITY-OF-*">associativity-of-*</a>
        commutativity-2-of-*
        <a class="sym-link system" href="../../axioms.html#def-distributivity" data-sym="DISTRIBUTIVITY">distributivity</a>)
      '(<a class="sym-link system" href="../../axioms.html#def-rationalp-_2B" data-sym="RATIONALP-+">rationalp-+</a> mod))))</pre>
  </div>

<div class="form-block encapsulate" id="form-65" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> mod-+-crock
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
          (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y)
          (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z)
          (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>))
          (<a class="sym-link system" href="../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> x 'x) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> y 'y) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> z 'z))))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z)
          (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x z) (mod y z))
              (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (floor x z) (floor y z)) z))
            z)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable mod-x-y-=-x+y-for-rationals
           <a class="sym-link local-def" href="#def-mod-x-y-_3D-x-for-rationals" data-sym="MOD-X-Y-=-X-FOR-RATIONALS" title="(defrule mod-x-y-=-x-for-rationals :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD x y) = x&#39;), when @(&#39;|x| &lt;= |y|&#39;) and x and y have
  the same sign.&quot;
 :long &quot;&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as :REWRITE and :GENERALIZE rules.&lt;/p&gt;&quot;
...">mod-x-y-=-x-for-rationals</a>)))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defruled" data-sym="DEFRULED">defruled</a> mod-+
    <span class="keyword">:parents</span> (mod-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite (D): @(&#39;(MOD (+ x y) z)&#39;)."</span>
    <span class="keyword">:long</span> <span class="string">"&lt;p&gt;As this rule could easily loop it is exported DISABLEd.  Don&#39;t
   ENABLE this lemma unless you are sure that the MOD/MOD term will simplify,
   or else put SYNTAXP guards on the variables x, y, and/or z.&lt;/p&gt;"</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>))))
      (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z) (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x z) (mod y z)) z)))
    <span class="keyword">:in-theory</span> (union-theories (disable <a class="sym-link system" href="../../axioms.html#def-associativity-of-_2B" data-sym="ASSOCIATIVITY-OF-+">associativity-of-+</a>
        <a class="sym-link system" href="../../axioms.html#def-commutativity-2-of-_2B" data-sym="COMMUTATIVITY-2-OF-+">commutativity-2-of-+</a>
        <a class="sym-link system" href="../../axioms.html#def-associativity-of-_2A" data-sym="ASSOCIATIVITY-OF-*">associativity-of-*</a>
        commutativity-2-of-*
        <a class="sym-link system" href="../../axioms.html#def-distributivity" data-sym="DISTRIBUTIVITY">distributivity</a>)
      '(<a class="sym-link system" href="../../axioms.html#def-rationalp-_2B" data-sym="RATIONALP-+">rationalp-+</a> mod))))</pre>
  </div>

<div class="form-block encapsulate" id="form-66" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> crock0
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (integerp (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y)))
        (integerp (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y i)))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> rewrite-floor-mod
    <span class="keyword">:parents</span> (floor-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(FLOOR (MOD x y) z) = (FLOOR x z) - i*(FLOOR x y)&#39;),
    when i = y/z is an integer."</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal i (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y z))
        (integerp i)
        (qr-guard x y)
        (qr-guard x z))
      (equal (floor (mod x y) z)
        (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (floor x z) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i (floor x y)))))
    <span class="keyword">:enable</span> mod
    <span class="keyword">:use</span> ((<span class="keyword">:instance</span> floor-+ (x x) (y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y (floor x y)))) (z z))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> rewrite-mod-mod
    <span class="keyword">:parents</span> (mod-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: (MOD (MOD x y) z) = (MOD x z), when y/z is an integer."</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal i (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y z))
        (integerp i)
        (qr-guard x y)
        (qr-guard y z))
      (equal (mod (mod x y) z) (mod x z)))
    <span class="keyword">:expand</span> ((mod x y) (mod x z))
    <span class="keyword">:use</span> ((<span class="keyword">:instance</span> mod-+ (x x) (y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y (floor x y)))) (z z)))))</pre>
  </div>

<div class="form-block theorem" id="def-cancel-floor-_2B-basic" data-defines="CANCEL-FLOOR-+-BASIC" data-references="FLOOR-+,+,FLOOR,NOT,Y,REAL/RATIONALP,FORCE,INTEGERP,Z,X,/,I,EQUAL,AND,IMPLIES,FLOOR-LEMMAS,DEFRULE" data-used-by="CANCEL-FLOOR-+-3" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CANCEL-FLOOR-+-BASIC">cancel-floor-+-basic</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-cancel-floor-_2B-basic" data-sym="CANCEL-FLOOR-+-BASIC" title="(defrule cancel-floor-+-basic :parents (floor-lemmas) :short
 &quot;Rewrite: @(&#39;(FLOOR (+ x y) z) = x/z + (FLOOR y z)&#39;), when x/z is an
  integer; also the commutative form.&quot;
 (implies
  (and (equal i (/ x z)) (integerp i) (force (real/rationalp x))
...">cancel-floor-+-basic</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(FLOOR (+ x y) z) = x/z + (FLOOR y z)&#39;), when x/z is an
  integer; also the commutative form."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal i (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x z))
      (integerp i)
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>))))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i (floor y z)))
      (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> y x) z) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i (floor y z)))))
  <span class="keyword">:enable</span> floor-+)</pre>
  </div>

<div class="form-block theorem" id="def-cancel-floor-_2B-3" data-defines="CANCEL-FLOOR-+-3" data-references="CANCEL-FLOOR-+-BASIC,+,FLOOR,NOT,X,W,REAL/RATIONALP,FORCE,INTEGERP,Z,Y,/,I,EQUAL,AND,IMPLIES,FLOOR-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CANCEL-FLOOR-+-3">cancel-floor-+-3</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-cancel-floor-_2B-3" data-sym="CANCEL-FLOOR-+-3" title="(defrule cancel-floor-+-3 :parents (floor-lemmas) :short
 &quot;Rewrite: @(&#39;(FLOOR (+ w x y) z) = y/z + (FLOOR (+ w x) z)&#39;), when y/z
  is an integer.&quot;
 (implies
  (and (equal i (/ y z)) (integerp i) (force (real/rationalp w))
...">cancel-floor-+-3</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(FLOOR (+ w x y) z) = y/z + (FLOOR (+ w x) z)&#39;), when y/z
  is an integer."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal i (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y z))
      (integerp i)
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>))))
    (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x y) z) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x) z))))
  <span class="keyword">:disable</span> <a class="sym-link local-def" href="#def-cancel-floor-_2B-basic" data-sym="CANCEL-FLOOR-+-BASIC" title="(defrule cancel-floor-+-basic :parents (floor-lemmas) :short
 &quot;Rewrite: @(&#39;(FLOOR (+ x y) z) = x/z + (FLOOR y z)&#39;), when x/z is an
  integer; also the commutative form.&quot;
 (implies
  (and (equal i (/ x z)) (integerp i) (force (real/rationalp x))
...">cancel-floor-+-basic</a>
  <span class="keyword">:use</span> ((<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-cancel-floor-_2B-basic" data-sym="CANCEL-FLOOR-+-BASIC" title="(defrule cancel-floor-+-basic :parents (floor-lemmas) :short
 &quot;Rewrite: @(&#39;(FLOOR (+ x y) z) = x/z + (FLOOR y z)&#39;), when x/z is an
  integer; also the commutative form.&quot;
 (implies
  (and (equal i (/ x z)) (integerp i) (force (real/rationalp x))
...">cancel-floor-+-basic</a> (x y) (y (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x)) (z z))))</pre>
  </div>

<div class="form-block theorem" id="def-cancel-mod-_2B-basic" data-defines="CANCEL-MOD-+-BASIC" data-references="MOD-+,+,MOD,NOT,Y,REAL/RATIONALP,FORCE,INTEGERP,Z,X,/,I,EQUAL,AND,IMPLIES,MOD-LEMMAS,DEFRULE" data-used-by="CANCEL-MOD-+-3" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CANCEL-MOD-+-BASIC">cancel-mod-+-basic</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-cancel-mod-_2B-basic" data-sym="CANCEL-MOD-+-BASIC" title="(defrule cancel-mod-+-basic :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD (+ x y) z) = (MOD y z)&#39;), when x/z is an integer;
  also the commutative form.&quot;
 (implies
  (and (equal i (/ x z)) (integerp i) (force (real/rationalp x))
...">cancel-mod-+-basic</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(MOD (+ x y) z) = (MOD y z)&#39;), when x/z is an integer;
  also the commutative form."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal i (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x z))
      (integerp i)
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>))))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z) (mod y z))
      (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> y x) z) (mod y z))))
  <span class="keyword">:enable</span> mod-+)</pre>
  </div>

<div class="form-block theorem" id="def-cancel-mod-_2B-3" data-defines="CANCEL-MOD-+-3" data-references="CANCEL-MOD-+-BASIC,+,MOD,NOT,X,W,REAL/RATIONALP,FORCE,INTEGERP,Z,Y,/,I,EQUAL,AND,IMPLIES,MOD-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CANCEL-MOD-+-3">cancel-mod-+-3</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-cancel-mod-_2B-3" data-sym="CANCEL-MOD-+-3" title="(defrule cancel-mod-+-3 :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD (+ w x y) z) = (MOD (+ w x) z)&#39;), when y/z is an
  integer.&quot;
 (implies
  (and (equal i (/ y z)) (integerp i) (force (real/rationalp w))
...">cancel-mod-+-3</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(MOD (+ w x y) z) = (MOD (+ w x) z)&#39;), when y/z is an
  integer."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal i (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y z))
      (integerp i)
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>))))
    (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x y) z) (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x) z)))
  <span class="keyword">:disable</span> <a class="sym-link local-def" href="#def-cancel-mod-_2B-basic" data-sym="CANCEL-MOD-+-BASIC" title="(defrule cancel-mod-+-basic :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD (+ x y) z) = (MOD y z)&#39;), when x/z is an integer;
  also the commutative form.&quot;
 (implies
  (and (equal i (/ x z)) (integerp i) (force (real/rationalp x))
...">cancel-mod-+-basic</a>
  <span class="keyword">:use</span> ((<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-cancel-mod-_2B-basic" data-sym="CANCEL-MOD-+-BASIC" title="(defrule cancel-mod-+-basic :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD (+ x y) z) = (MOD y z)&#39;), when x/z is an integer;
  also the commutative form.&quot;
 (implies
  (and (equal i (/ x z)) (integerp i) (force (real/rationalp x))
...">cancel-mod-+-basic</a> (x y) (y (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x)) (z z))))</pre>
  </div>

<div class="form-block theorem" id="def-not-rationalp-rationalp-plus" data-defines="NOT-RATIONALP-RATIONALP-PLUS" data-references="-,RATIONALP-+,+,NOT,Y,RATIONALP,X,ACL2-NUMBERP,AND,IMPLIES,DEFTHM" data-part-name="NOT-RATIONALP-RATIONALP-PLUS" data-part-term="+,NOT,Y,RATIONALP,X,ACL2-NUMBERP,AND,IMPLIES" data-part-hints="-,Y,+,X,RATIONALP-+" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NOT-RATIONALP-RATIONALP-PLUS">not-rationalp-rationalp-plus</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button><button class="part-btn" data-part="hints">hints</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-not-rationalp-rationalp-plus" data-sym="NOT-RATIONALP-RATIONALP-PLUS" title="(defthm not-rationalp-rationalp-plus
        (implies (and (acl2-numberp x) (rationalp y) (not (rationalp x)))
                 (not (rationalp (+ x y))))
        :hints ((&quot;Goal&quot; :use ((:instance rationalp-+ (x (+ x y)) (y (- y)))))))">not-rationalp-rationalp-plus</a>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp x) (rationalp y) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (rationalp x)))
    (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (rationalp (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> <a class="sym-link system" href="../../axioms.html#def-rationalp-_2B" data-sym="RATIONALP-+">rationalp-+</a> (x (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y)) (y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)))))))</pre>
  </div>

<div class="form-block theorem" id="def-not-rationalp-rationalp-unary---plus" data-defines="NOT-RATIONALP-RATIONALP-UNARY---PLUS" data-references="RATIONALP-UNARY--,ENABLE,RATIONALP-+,+,-,NOT,Y,RATIONALP,X,ACL2-NUMBERP,AND,IMPLIES,DEFTHM" data-part-name="NOT-RATIONALP-RATIONALP-UNARY---PLUS" data-part-term="+,-,NOT,Y,RATIONALP,X,ACL2-NUMBERP,AND,IMPLIES" data-part-hints="RATIONALP-UNARY--,ENABLE,-,Y,+,X,RATIONALP-+" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NOT-RATIONALP-RATIONALP-UNARY---PLUS">not-rationalp-rationalp-unary---plus</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button><button class="part-btn" data-part="hints">hints</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-not-rationalp-rationalp-unary---plus" data-sym="NOT-RATIONALP-RATIONALP-UNARY---PLUS" title="(defthm not-rationalp-rationalp-unary---plus
        (implies (and (acl2-numberp x) (rationalp y) (not (rationalp (- x))))
                 (not (rationalp (+ x y))))
        :hints
        ((&quot;Goal&quot; :use ((:instance rationalp-+ (x (+ x y)) (y (- y))))">not-rationalp-rationalp-unary---plus</a>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp x) (rationalp y) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (rationalp (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x))))
    (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (rationalp (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> <a class="sym-link system" href="../../axioms.html#def-rationalp-_2B" data-sym="RATIONALP-+">rationalp-+</a> (x (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y)) (y (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y))))
     <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-rationalp-unary--" data-sym="RATIONALP-UNARY--">rationalp-unary--</a>))))</pre>
  </div>

<div class="form-block encapsulate" id="form-73" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> simplify-mod-+-mod-crock
      (equal (equal (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> a b) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> y z))
        (equal (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> z) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> a b) y)))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> simplify-mod-+-mod
    <span class="keyword">:parents</span> (mod-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite @(&#39;(MOD (+ w (MOD x y)) z)&#39;) and similar, where y/z is an integer."</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal i (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y z))
        (integerp i)
        (qr-guard x y)
        (qr-guard <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> z))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> (mod x y)) z) (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x) z))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x y) <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a>) z) (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x) z))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> (mod x y)) z) (mod (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x) z))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (mod x y) <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a>) z) (mod (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a>) z))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable mod-x-y-=-x+y-for-rationals
         <a class="sym-link local-def" href="#def-mod-x-y-_3D-x-for-rationals" data-sym="MOD-X-Y-=-X-FOR-RATIONALS" title="(defrule mod-x-y-=-x-for-rationals :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD x y) = x&#39;), when @(&#39;|x| &lt;= |y|&#39;) and x and y have
  the same sign.&quot;
 :long &quot;&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as :REWRITE and :GENERALIZE rules.&lt;/p&gt;&quot;
...">mod-x-y-=-x-for-rationals</a>
         <a class="sym-link local-def" href="#def-integerp-mod" data-sym="INTEGERP-MOD" title="(defrule integerp-mod :parents (mod-lemmas) :short
 &quot;Type-Prescription: @(&#39;(MOD m n)&#39;) is an integer, when m and n are
  integers.&quot;
 (implies (and (integerp m) (integerp n)) (integerp (mod m n))) :enable mod
 :rule-classes (:rewrite :type-prescription))">integerp-mod</a>
         <a class="sym-link external" href="math-lemmas.html#def-integerp-_2B-minus-_2A" data-sym="INTEGERP-+-MINUS-*">integerp-+-minus-*</a>
         <a class="sym-link local-def" href="#def-mod-_3D-0" data-sym="MOD-=-0" title="(defrule mod-=-0 :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD x y) = 0&#39;), when x/y is an integer.&quot; :long
 &quot;&lt;p&gt;This rule is a corollary of a more general equality.  The equality
  is also stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;&quot;
 (implies (qr-guard x y) (equal (equal (mod x y) 0) (integerp (/ x y))))
...">mod-=-0</a>)))))</pre>
  </div>

<div class="form-block theorem" id="def-mod-_2B-cancel-0" data-defines="MOD-+-CANCEL-0" data-references="FLOOR,*,/,EQUAL-*-/-2,LEFT-CANCELLATION-FOR-*,+,MOD,EQUAL,Y,Z,X,QR-GUARD,AND,IMPLIES,MOD-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MOD-+-CANCEL-0">mod-+-cancel-0</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-mod-_2B-cancel-0" data-sym="MOD-+-CANCEL-0" title="(defrule mod-+-cancel-0 :parents (mod-lemmas) :short
 &quot;Rewrite @(&#39;(equal (mod (+ x y) z) x)&#39;).&quot;
 (implies (and (qr-guard x z) (qr-guard y z))
          (equal (equal (mod (+ x y) z) x)
                 (and (equal (mod y z) 0) (equal (mod x z) x))))
...">mod-+-cancel-0</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite @(&#39;(equal (mod (+ x y) z) x)&#39;)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (qr-guard x z) (qr-guard y z))
    (equal (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z) x)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (mod y z) <span class="number">0</span>) (equal (mod x z) x))))
  <span class="keyword">:disable</span> (left-cancellation-for-* equal-*-/-2)
  <span class="keyword">:use</span> ((<span class="keyword">:instance</span> left-cancellation-for-*
     (z (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z))
     (x y)
     (y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> z (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z)))))
  <span class="keyword">:expand</span> ((mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) z)))</pre>
  </div>

<div class="form-block local" id="form-75" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable <a class="sym-link local-def" href="#def-floor-type-1" data-sym="FLOOR-TYPE-1" title="(defrule floor-type-1 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-1</a>
      <a class="sym-link local-def" href="#def-floor-type-2" data-sym="FLOOR-TYPE-2" title="(defrule floor-type-2 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-2</a>
      <a class="sym-link local-def" href="#def-floor-type-3" data-sym="FLOOR-TYPE-3" title="(defrule floor-type-3 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-3</a>
      <a class="sym-link local-def" href="#def-floor-type-4" data-sym="FLOOR-TYPE-4" title="(defrule floor-type-4 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) = -1&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-4</a>
      <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>
      <a class="sym-link local-def" href="#def-mod-type" data-sym="MOD-TYPE" title="(defrule mod-type :parents (mod-lemmas) :short
 &quot;Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y.&quot;
 (implies (qr-guard x y)
          (and (equal (&lt; (mod x y) 0) (and (&lt; y 0) (not (integerp (/ x y)))))
...">mod-type</a>
      <a class="sym-link local-def" href="#def-mod-bounded-by-modulus" data-sym="MOD-BOUNDED-BY-MODULUS" title="(defrule mod-bounded-by-modulus :parents (mod-lemmas) :short
 &quot;Linear: Useful forms of the fact that @(&#39;|(MOD x y)| &lt; |y|&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma is also stored as a :GENERALIZE rule.&lt;/p&gt;&quot;
 (and (implies (and (&gt; y 0) (qr-guard x y)) (&lt; (mod x y) y))
      (implies (and (&lt; y 0) (qr-guard x y)) (&gt; (mod x y) y)))
...">mod-bounded-by-modulus</a>)))</pre>
  </div>

<div class="form-block theorem" id="def-rationalp-mod" data-defines="RATIONALP-MOD" data-references="FLOOR,ENABLE,Y,MOD,X,RATIONALP,IMPLIES,DEFTHM" data-part-name="RATIONALP-MOD" data-part-term="Y,MOD,X,RATIONALP,IMPLIES" data-part-hints="FLOOR,MOD,ENABLE,Y,RATIONALP" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RATIONALP-MOD">rationalp-mod</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button><button class="part-btn" data-part="hints">hints</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-rationalp-mod" data-sym="RATIONALP-MOD" title="(defthm rationalp-mod (implies (rationalp x) (rationalp (mod x y)))
        :rule-classes (:rewrite :type-prescription) :hints
        ((&quot;Goal&quot; :cases ((rationalp y)) :in-theory (enable mod floor))))">rationalp-mod</a>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (rationalp x) (rationalp (mod x y)))
  <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:cases</span> ((rationalp y))
     <span class="keyword">:in-theory</span> (enable mod floor))))</pre>
  </div>

<div class="form-block encapsulate" id="form-77" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable rewrite-floor-mod rewrite-mod-mod)))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link local-def" href="#def-floor-type-1" data-sym="FLOOR-TYPE-1" title="(defrule floor-type-1 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-1</a>
        <a class="sym-link local-def" href="#def-floor-type-2" data-sym="FLOOR-TYPE-2" title="(defrule floor-type-2 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-2</a>
        <a class="sym-link local-def" href="#def-floor-type-3" data-sym="FLOOR-TYPE-3" title="(defrule floor-type-3 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-3</a>
        <a class="sym-link local-def" href="#def-floor-type-4" data-sym="FLOOR-TYPE-4" title="(defrule floor-type-4 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) = -1&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-4</a>
        <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>
        <a class="sym-link local-def" href="#def-mod-type" data-sym="MOD-TYPE" title="(defrule mod-type :parents (mod-lemmas) :short
 &quot;Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y.&quot;
 (implies (qr-guard x y)
          (and (equal (&lt; (mod x y) 0) (and (&lt; y 0) (not (integerp (/ x y)))))
...">mod-type</a>
        <a class="sym-link local-def" href="#def-mod-bounded-by-modulus" data-sym="MOD-BOUNDED-BY-MODULUS" title="(defrule mod-bounded-by-modulus :parents (mod-lemmas) :short
 &quot;Linear: Useful forms of the fact that @(&#39;|(MOD x y)| &lt; |y|&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma is also stored as a :GENERALIZE rule.&lt;/p&gt;&quot;
 (and (implies (and (&gt; y 0) (qr-guard x y)) (&lt; (mod x y) y))
      (implies (and (&lt; y 0) (qr-guard x y)) (&gt; (mod x y) y)))
...">mod-bounded-by-modulus</a>)))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> floor-floor-integer-crock0
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
          (rationalp i)
          (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal i <span class="number">0</span>))
          (rationalp j)
          (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal j <span class="number">0</span>))
          (<a class="sym-link system" href="../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> x 'x) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> i 'i) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> j 'j))))
        (equal (floor (floor x i) j)
          (floor (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j)) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j) (floor x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j)))) i)
            j)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../axioms.html#def-commutativity-2-of-_2B" data-sym="COMMUTATIVITY-2-OF-+">commutativity-2-of-+</a>
           commutativity-2-of-*
           <a class="sym-link system" href="../../axioms.html#def-associativity-of-_2A" data-sym="ASSOCIATIVITY-OF-*">associativity-of-*</a>)))))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> floor-floor-integer-crock1
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
          (rationalp i)
          (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal i <span class="number">0</span>))
          (integerp j)
          (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal j <span class="number">0</span>))
          (<a class="sym-link system" href="../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> x 'x) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> i 'i) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> j 'j))))
        (equal (floor (floor x i) j)
          (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (floor x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j)) (floor (floor (mod x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j)) i) j))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link local-def" href="#def-floor-mod-elim" data-sym="FLOOR-MOD-ELIM" title="(defrule floor-mod-elim :parents (floor-lemmas) :short
 &quot;Rewrite: @(&#39;(+ (MOD x y) (* y (FLOOR x y))) = x&#39;).&quot; :long
 &quot;&lt;p&gt;This rule is also stored as an :ELIM rule.&lt;/p&gt;&quot;
 (implies (acl2-numberp x) (equal (+ (mod x y) (* y (floor x y))) x))
 :rule-classes (:rewrite :elim) :enable mod)">floor-mod-elim</a>)))))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> floor-floor-integer-crock2
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
          (rationalp i)
          (&lt; <span class="number">0</span> i)
          (rationalp j)
          (&lt; <span class="number">0</span> j))
        (equal (floor (floor (mod x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j)) i) j) <span class="number">0</span>))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (set-difference-theories (enable <a class="sym-link local-def" href="#def-floor-type-1" data-sym="FLOOR-TYPE-1" title="(defrule floor-type-1 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-1</a> <a class="sym-link local-def" href="#def-floor-type-2" data-sym="FLOOR-TYPE-2" title="(defrule floor-type-2 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-2</a> <a class="sym-link local-def" href="#def-floor-type-3" data-sym="FLOOR-TYPE-3" title="(defrule floor-type-3 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-3</a> <a class="sym-link local-def" href="#def-mod-type" data-sym="MOD-TYPE" title="(defrule mod-type :parents (mod-lemmas) :short
 &quot;Decide @(&#39;(MOD x y) &lt; 0&#39;) and @(&#39;(MOD x y) &gt; 0&#39;) based on the sign of
  y and the INTEGERP-ness of x/y.&quot;
 (implies (qr-guard x y)
          (and (equal (&lt; (mod x y) 0) (and (&lt; y 0) (not (integerp (/ x y)))))
...">mod-type</a>)
           '(<a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a> <a class="sym-link local-def" href="#def-mod-bounded-by-modulus" data-sym="MOD-BOUNDED-BY-MODULUS" title="(defrule mod-bounded-by-modulus :parents (mod-lemmas) :short
 &quot;Linear: Useful forms of the fact that @(&#39;|(MOD x y)| &lt; |y|&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma is also stored as a :GENERALIZE rule.&lt;/p&gt;&quot;
 (and (implies (and (&gt; y 0) (qr-guard x y)) (&lt; (mod x y) y))
      (implies (and (&lt; y 0) (qr-guard x y)) (&gt; (mod x y) y)))
...">mod-bounded-by-modulus</a>
             &lt;-*-left-cancel
             &lt;-*-/-left-commuted))
         <span class="keyword">:use</span> ((<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a> (x (mod x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j))) (y i)) (<span class="keyword">:instance</span> <a class="sym-link local-def" href="#def-mod-bounded-by-modulus" data-sym="MOD-BOUNDED-BY-MODULUS" title="(defrule mod-bounded-by-modulus :parents (mod-lemmas) :short
 &quot;Linear: Useful forms of the fact that @(&#39;|(MOD x y)| &lt; |y|&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma is also stored as a :GENERALIZE rule.&lt;/p&gt;&quot;
 (and (implies (and (&gt; y 0) (qr-guard x y)) (&lt; (mod x y) y))
      (implies (and (&lt; y 0) (qr-guard x y)) (&gt; (mod x y) y)))
...">mod-bounded-by-modulus</a> (x x) (y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j)))
           (<span class="keyword">:instance</span> &lt;-*-left-cancel
             (z (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> i))
             (x (mod x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j)))
             (y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j))))))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> floor-floor-integer
    <span class="keyword">:parents</span> (floor-lemmas)
    <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(FLOOR (FLOOR x i) j) = (FLOOR x (* i j))&#39;) for integers i,j &amp;gt; 0."</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (rationalp i)
        (integerp j)
        (&lt; <span class="number">0</span> i)
        (&lt; <span class="number">0</span> j)
        (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
      (equal (floor (floor x i) j) (floor x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j))))))</pre>
  </div>

<div class="form-block theorem" id="def-floor-x_2Bi_2Ak-i_2Aj" data-defines="FLOOR-X+I*K-I*J" data-references="Z,Y,FLOOR-+,FLOOR-FLOOR-INTEGER,*,+,FLOOR,EQUAL,<=,<,K,J,INTEGERP,I,RATIONALP,X,REAL/RATIONALP,FORCE,AND,IMPLIES,FLOOR-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLOOR-X+I*K-I*J">floor-x+i*k-i*j</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-floor-x_2Bi_2Ak-i_2Aj" data-sym="FLOOR-X+I*K-I*J" title="(defrule floor-x+i*k-i*j :parents (floor-lemmas) :short
 &quot;Rewrite: @(&#39;(FLOOR (+ x (* i k)) (* i j)) = (FLOOR k j)&#39;), when
  i,j &amp;gt; 0 and 0 &amp;lt;= x &amp;lt; i.&quot;
 :long &quot;&lt;p&gt;This is a crucial lemma for certain kinds of reasoning about hardware
  specifications, and is used to prove @(see MOD-x+i*j-i*k).&lt;/p&gt;&quot;
...">floor-x+i*k-i*j</a>
  <span class="keyword">:parents</span> (floor-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(FLOOR (+ x (* i k)) (* i j)) = (FLOOR k j)&#39;), when
  i,j &amp;gt; 0 and 0 &amp;lt;= x &amp;lt; i."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is a crucial lemma for certain kinds of reasoning about hardware
  specifications, and is used to prove @(see MOD-x+i*j-i*k).&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (rationalp i))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp j))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp k))
      (&lt; <span class="number">0</span> i)
      (&lt; <span class="number">0</span> j)
      (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> x)
      (&lt; x i))
    (equal (floor (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i k)) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j)) (floor k j)))
  <span class="keyword">:disable</span> (floor-floor-integer floor-+)
  <span class="keyword">:use</span> ((<span class="keyword">:instance</span> floor-floor-integer
     (x (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i k)))
     (i i)
     (j j)) (<span class="keyword">:instance</span> floor-+ (x x) (y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i k)) (z i))))</pre>
  </div>

<div class="form-block theorem" id="def-mod-x_2Bi_2Ak-i_2Aj" data-defines="MOD-X+I*K-I*J" data-references="*,+,MOD,EQUAL,<=,<,K,J,INTEGERP,I,RATIONALP,X,REAL/RATIONALP,FORCE,AND,IMPLIES,MOD-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MOD-X+I*K-I*J">mod-x+i*k-i*j</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-mod-x_2Bi_2Ak-i_2Aj" data-sym="MOD-X+I*K-I*J" title="(defrule mod-x+i*k-i*j :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD (+ x (* i k)) (* i j)) = (+ x (* i (MOD k j)))&#39;),
  when i,j &amp;gt; 0 and 0 &amp;lt;= x &amp;lt; i.&quot;
 :long &quot;&lt;p&gt;This is a crucial lemma for certain kinds of
  reasoning about hardware specifications, for example, we can use this to
...">mod-x+i*k-i*j</a>
  <span class="keyword">:parents</span> (mod-lemmas)
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(MOD (+ x (* i k)) (* i j)) = (+ x (* i (MOD k j)))&#39;),
  when i,j &amp;gt; 0 and 0 &amp;lt;= x &amp;lt; i."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is a crucial lemma for certain kinds of
  reasoning about hardware specifications, for example, we can use this to
  prove that&lt;/p&gt;
  @({
       (MOD i (EXPT 2 n)) = (MOD i 2) + (MOD (FLOOR i 2) (EXPT 2 (1- n)))
  })
  &lt;p&gt;for @(&#39;n &gt; 0&#39;), which justifies a recursive specification of hardware
  operations.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (rationalp i))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp j))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp k))
      (&lt; <span class="number">0</span> i)
      (&lt; <span class="number">0</span> j)
      (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> x)
      (&lt; x i))
    (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i k)) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j)) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i (mod k j)))))
  <span class="keyword">:enable</span> mod)</pre>
  </div>

<div class="form-block encapsulate" id="def-mod-x-i_2Aj-of-positives" data-defines="MOD-X-I*J-OF-POSITIVES" data-references="FLOOR-MOD-ELIM,FLOOR,*,+,MOD,EQUAL,X,REAL/RATIONALP,INTEGERP,FORCE,J,I,>,AND,IMPLIES,MOD-X-I*J-CROCK,DEFTHM,FLOOR-BOUNDED-BY-/,FLOOR-TYPE-4,FLOOR-TYPE-3,FLOOR-TYPE-2,FLOOR-TYPE-1,DISABLE,IN-THEORY,LOCAL,ENCAPSULATE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MOD-X-I*J-OF-POSITIVES">mod-x-i*j-of-positives</span><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link local-def" href="#def-floor-type-1" data-sym="FLOOR-TYPE-1" title="(defrule floor-type-1 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &lt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-1</a>
        <a class="sym-link local-def" href="#def-floor-type-2" data-sym="FLOOR-TYPE-2" title="(defrule floor-type-2 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-2</a>
        <a class="sym-link local-def" href="#def-floor-type-3" data-sym="FLOOR-TYPE-3" title="(defrule floor-type-3 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) &gt; 0&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-3</a>
        <a class="sym-link local-def" href="#def-floor-type-4" data-sym="FLOOR-TYPE-4" title="(defrule floor-type-4 :parents (floor-lemmas) :short
 &quot;Decide @(&#39;(FLOOR x y) = -1&#39;) based on inequalities of x and y.&quot; :long
 &quot;&lt;p&gt;This rule is available in various forms: :REWRITE, :LINEAR,
  :TYPE-PRESCRIPTION, and :GENERALIZE as appropriate.  Note that unless we
  can decide the inequalities of x and y the :LINEAR forms may thrash.&lt;/p&gt;&quot;
...">floor-type-4</a>
        <a class="sym-link local-def" href="#def-floor-bounded-by-_2F" data-sym="FLOOR-BOUNDED-BY-/" title="(defrule floor-bounded-by-/ :parents (floor-lemmas) :short
 &quot;Linear (D) : @(&#39;x/y - 1 &lt; (FLOOR x y) &lt;= x/y&#39;).&quot; :long
 &quot;&lt;p&gt;This lemma \&quot;defines\&quot; FLOOR as a set of inequalties.  Many of the
properties of FLOOR will be derived from this theorem.  Unfortunately, this
lemma is implicated in thrashing in the linear arithmetic procedure and must be
...">floor-bounded-by-/</a>)))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> mod-x-i*j-crock
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> i <span class="number">0</span>)
          (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> j <span class="number">0</span>)
          (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp i))
          (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp j))
          (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)))
        (equal (mod (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x i) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i (floor x i))) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j))
          (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x i) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i (mod (floor x i) j)))))
      <span class="keyword">:rule-classes</span> nil
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link local-def" href="#def-floor-mod-elim" data-sym="FLOOR-MOD-ELIM" title="(defrule floor-mod-elim :parents (floor-lemmas) :short
 &quot;Rewrite: @(&#39;(+ (MOD x y) (* y (FLOOR x y))) = x&#39;).&quot; :long
 &quot;&lt;p&gt;This rule is also stored as an :ELIM rule.&lt;/p&gt;&quot;
 (implies (acl2-numberp x) (equal (+ (mod x y) (* y (floor x y))) x))
 :rule-classes (:rewrite :elim) :enable mod)">floor-mod-elim</a>)))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-mod-x-i_2Aj-of-positives" data-sym="MOD-X-I*J-OF-POSITIVES" title="(encapsulate nil
             (local
              (in-theory
               (disable floor-type-1 floor-type-2 floor-type-3 floor-type-4
                        floor-bounded-by-/)))
...">mod-x-i*j-of-positives</a>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> i <span class="number">0</span>)
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> j <span class="number">0</span>)
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp i))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp j))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)))
      (equal (mod x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j))
        (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (mod x i) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i (mod (floor x i) j)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> mod-x-i*j-crock))))</pre>
  </div>

<div class="form-block encapsulate" id="form-81" typeof="Code">
    <div class="form-header"><span class="form-type">encapsulate</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> crock0
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> i j))
          (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> i)
          (integerp j)
          (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal <span class="number">0</span> j)))
        (integerp (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> j (floor i j)) (mod i j))))
      <span class="keyword">:rule-classes</span> nil
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link local-def" href="#def-floor-_3D-x_2Fy" data-sym="FLOOR-=-X/Y" title="(defrule floor-=-x/y :parents (floor-lemmas) :short
 &quot;Rewrite @(&#39;(FLOOR x y) = x/y&#39;), when x/y is an integer.&quot; :long
 &quot;&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;&quot;
 (equal (equal (floor x y) (/ x y)) (integerp (/ x y))) :rule-classes
...">floor-=-x/y</a>)))))
  (<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> integerp-i/j-integerp-forward
    <span class="keyword">:parents</span> (integer-ratio-lemmas)
    <span class="keyword">:short</span> <span class="string">"Forward: If i/j is an integer and j is an integer, then i is an
    integer."</span>
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> i j))
        (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> i)
        (integerp j)
        (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (zerop j)))
      (integerp i))
    <span class="keyword">:use</span> ((<span class="keyword">:instance</span> crock0))
    <span class="keyword">:disable</span> (<a class="sym-link local-def" href="#def-mod-_3D-0" data-sym="MOD-=-0" title="(defrule mod-=-0 :parents (mod-lemmas) :short
 &quot;Rewrite: @(&#39;(MOD x y) = 0&#39;), when x/y is an integer.&quot; :long
 &quot;&lt;p&gt;This rule is a corollary of a more general equality.  The equality
  is also stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;&quot;
 (implies (qr-guard x y) (equal (equal (mod x y) 0) (integerp (/ x y))))
...">mod-=-0</a> <a class="sym-link local-def" href="#def-floor-_3D-x_2Fy" data-sym="FLOOR-=-X/Y" title="(defrule floor-=-x/y :parents (floor-lemmas) :short
 &quot;Rewrite @(&#39;(FLOOR x y) = x/y&#39;), when x/y is an integer.&quot; :long
 &quot;&lt;p&gt;This rule is a corollary of a more general equality which is also
  stored as a :REWRITE and :GENERALIZE rule.&lt;/p&gt;&quot;
 (equal (equal (floor x y) (/ x y)) (integerp (/ x y))) :rule-classes
...">floor-=-x/y</a>)
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> i j))
           (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> i))
           (integerp j)
           (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal <span class="number">0</span> j))))
         (integerp i))) (<span class="keyword">:forward-chaining</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> j) i))
            (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> i))
            (integerp j)
            (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal <span class="number">0</span> j))))
          (integerp i))))))</pre>
  </div>

<div class="form-block other" id="form-82" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc quotient-remainder-theories
  <span class="keyword">:parents</span> (quotient-remainder-lemmas)
  <span class="keyword">:short</span> <span class="string">"Logical theories supplied by the QUOTIENT-REMAINDER book."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The QUOTIENT-REMAINDER book exports 2 theories:
  QUOTIENT-REMAINDER-FUNCTIONS and QUOTIENT-REMAINDER-RULES.  The former is
  simply a theory of the functions characterized by the book.  Since these
  functions are all ENABLEd by default, and most are non-recursive, one should
  immediately:&lt;/p&gt;

  @({
     (in-theory (disable quotient-remainder-functions))
  })

  &lt;p&gt;upon loading this book, or the lemmas may never be applied.&lt;/p&gt;

  &lt;p&gt;QUOTIENT-REMAINDER-RULES is a theory of all of the lemmas exported by this
  book which are ENABLEd by default.  You can &quot;turn off&quot; this book after it
  is loaded by&lt;/p&gt;

  @({
      (in-theory (disable quotient-remainder-rules))
  })"</span>)</pre>
  </div>

<div class="form-block other" id="form-83" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection quotient-remainder-functions
  <span class="keyword">:parents</span> (quotient-remainder-theories)
  <span class="keyword">:short</span> <span class="string">"A theory of the function symbols characterized by
  &quot;quotient-remainder-lemmas&quot;."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;You should DISABLE this theory immediately after loading this
  book.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> quotient-remainder-functions
    '(<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> floor mod truncate rem)))</pre>
  </div>

<div class="form-block other" id="form-84" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection quotient-remainder-rules
  <span class="keyword">:parents</span> (quotient-remainder-theories)
  <span class="keyword">:short</span> <span class="string">"A theory of all rules exported ENABLEd by the
  &quot;quotient-remainder-lemmas&quot; book."</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> quotient-remainder-rules
    (union-theories (defun-type/exec-theory '(<a class="sym-link system" href="../../axioms.html#def-nonnegative-integer-quotient" data-sym="NONNEGATIVE-INTEGER-QUOTIENT">nonnegative-integer-quotient</a> floor mod truncate rem))
      (set-difference-theories (current-theory <span class="keyword">:here</span>)
        (current-theory 'begin-quotient-remainder-lemmas)))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>