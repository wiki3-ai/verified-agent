<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>math-lemmas - ACL2 Book</title>
  <meta property="name" content="math-lemmas">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">‚òÄÔ∏è</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">math-lemmas</h1>
    <div class="path"><a href="math-lemmas.lisp" class="source-link">books/ihs/math-lemmas</a></div>
  </div>
  
  <main property="text">
  <div class="includes-section">
    <h2>Included Books</h2>
    <div class="includes-list">
      <a class="include-link" href="../arithmetic/top.html" title="arithmetic/top">top</a>
      <a class="include-link" href="ihs-init.html" title="ihs-init">ihs-init</a>
      <a class="include-link" href="../std/util/defrule.html" title="std/util/defrule">defrule</a>
    </div>
  </div>

<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block include-book" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../arithmetic/top.html" title="Open arithmetic/top">"arithmetic/top"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="ihs-init.html" title="Open ihs-init">"ihs-init"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../std/util/defrule.html" title="Open std/util/defrule">"std/util/defrule"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc math-lemmas
  <span class="keyword">:parents</span> (ihs)
  <span class="keyword">:short</span> <span class="string">"A book of theories about +, -, *, /, and EXPT, built on the
  arithmetic package of Matt Kaufmann."</span>)</pre>
  </div>

<div class="form-block local" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (set-default-parents math-lemmas))</pre>
  </div>

<div class="form-block theorem" id="def-cancel-equal-_2B-_2A" data-defines="CANCEL-EQUAL-+-*" data-references="EQUAL-*-X-Y-X,OR,*,FIX,ACL2-NUMBERP,Y,X,+,EQUAL,AND,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CANCEL-EQUAL-+-*">cancel-equal-+-*</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-cancel-equal-_2B-_2A" data-sym="CANCEL-EQUAL-+-*" title="(defrule cancel-equal-+-* :short
 &quot;Rewrite: @(&#39;(equal (+ x y) x)&#39;) and @(&#39;(equal (* x y) x)&#39;);
          also commutative forms.&quot;
 (and (equal (equal (+ x y) x) (and (acl2-numberp x) (equal (fix y) 0)))
      (equal (equal (+ y x) x) (and (acl2-numberp x) (equal (fix y) 0)))
...">cancel-equal-+-*</a>
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(equal (+ x y) x)&#39;) and @(&#39;(equal (* x y) x)&#39;);
          also commutative forms."</span>
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (equal (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) x)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp x) (equal (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> y) <span class="number">0</span>)))
    (equal (equal (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> y x) x)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp x) (equal (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> y) <span class="number">0</span>)))
    (equal (equal (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) x)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp x) (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (equal x <span class="number">0</span>) (equal y <span class="number">1</span>))))
    (equal (equal (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) y)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp y) (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (equal y <span class="number">0</span>) (equal x <span class="number">1</span>)))))
  <span class="keyword">:enable</span> equal-*-x-y-x)</pre>
  </div>

<div class="form-block theorem" id="def-normalize-equal-0" data-defines="NORMALIZE-EQUAL-0" data-references="OR,*,Y,+,FIX,X,-,EQUAL,AND,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NORMALIZE-EQUAL-0">normalize-equal-0</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-normalize-equal-0" data-sym="NORMALIZE-EQUAL-0" title="(defrule normalize-equal-0 :short
 &quot;Rewrite @(&#39;(equal (- x) 0)&#39;), @(&#39;(equal (+ x y) 0)&#39;), and
@(&#39;(equal (* x y) 0)&#39;).&quot;
 (and (equal (equal (- x) 0) (equal (fix x) 0))
      (equal (equal (+ x y) 0) (equal (fix x) (- y)))">normalize-equal-0</a>
  <span class="keyword">:short</span> <span class="string">"Rewrite @(&#39;(equal (- x) 0)&#39;), @(&#39;(equal (+ x y) 0)&#39;), and
@(&#39;(equal (* x y) 0)&#39;)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (equal (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) <span class="number">0</span>) (equal (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> x) <span class="number">0</span>))
    (equal (equal (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> x y) <span class="number">0</span>) (equal (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> x) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)))
    (equal (equal (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) <span class="number">0</span>)
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (equal (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> x) <span class="number">0</span>) (equal (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> y) <span class="number">0</span>)))))</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection acl2-numberp-algebra
  <span class="keyword">:short</span> <span class="string">"A basic theory of algebra for all @(see acl2-numberp)s."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The ACL2-NUMBERP-ALGEBRA theory is designed to be a simple, compact basis
  for building other theories.  This theory contains a minimal set of rules
  for basic algebraic manipulation including associativity and commutativity,
  simplification, cancellation, and normalization.  It is extended by the
  theories RATIONALP-ALGEBRA and INTEGERP-ALGEBRA to include selected linear
  rules and rules for integers respectively.  This theory also contains the
  DEFUN-THEORY (which see) of all built-in function symbols that would
  normally occur during reasoning about the ACL2-NUMBERPs.&lt;/p&gt;

  &lt;p&gt;We used keep this theory (and book) separate but roughly equal to the
  books maintained by Matt K. in order to have a solid, simple, and predictable
  foundation on which to build the rest of the books in the IHS hierarchy.
  However it was decided that this was too much trouble and we just select the
  rules of Matt K. that we want.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> acl2-numberp-algebra
    (union-theories (defun-theory '(equal <a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a>
          <a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a>
          <a class="sym-link system" href="../../axioms.html#def-_2F_3D" data-sym="/=">/=</a>
          <a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a>
          <a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a>
          binary-+
          binary-*
          unary--
          unary-/
          acl2-numberp
          zerop
          <a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a>
          <a class="sym-link system" href="../../axioms.html#def-zp" data-sym="ZP">zp</a>
          <a class="sym-link system" href="../../axioms.html#def-zip" data-sym="ZIP">zip</a>))
      '(<a class="sym-link system" href="../../axioms.html#def-eqlablep-recog" data-sym="EQLABLEP-RECOG">eqlablep-recog</a> <a class="sym-link system" href="../../axioms.html#def-commutativity-of-_2B" data-sym="COMMUTATIVITY-OF-+">commutativity-of-+</a>
        <a class="sym-link system" href="../../axioms.html#def-commutativity-of-_2A" data-sym="COMMUTATIVITY-OF-*">commutativity-of-*</a>
        <a class="sym-link system" href="../../axioms.html#def-inverse-of-_2B" data-sym="INVERSE-OF-+">inverse-of-+</a>
        <a class="sym-link system" href="../../axioms.html#def-associativity-of-_2B" data-sym="ASSOCIATIVITY-OF-+">associativity-of-+</a>
        <a class="sym-link system" href="../../axioms.html#def-associativity-of-_2A" data-sym="ASSOCIATIVITY-OF-*">associativity-of-*</a>
        <a class="sym-link system" href="../../axioms.html#def-commutativity-2-of-_2B" data-sym="COMMUTATIVITY-2-OF-+">commutativity-2-of-+</a>
        commutativity-2-of-*
        <a class="sym-link system" href="../../axioms.html#def-unicity-of-0" data-sym="UNICITY-OF-0">unicity-of-0</a>
        functional-self-inversion-of-minus
        <a class="sym-link system" href="../../axioms.html#def-unicity-of-1" data-sym="UNICITY-OF-1">unicity-of-1</a>
        <a class="sym-link system" href="../../axioms.html#def-default-_2A-1" data-sym="DEFAULT-*-1">default-*-1</a>
        <a class="sym-link system" href="../../axioms.html#def-default-_2A-2" data-sym="DEFAULT-*-2">default-*-2</a>
        <a class="sym-link system" href="../../axioms.html#def-default-_3C-1" data-sym="DEFAULT-&lt;-1">default-&lt;-1</a>
        <a class="sym-link system" href="../../axioms.html#def-default-_3C-2" data-sym="DEFAULT-&lt;-2">default-&lt;-2</a>
        <a class="sym-link system" href="../../axioms.html#def-default-_2B-1" data-sym="DEFAULT-+-1">default-+-1</a>
        <a class="sym-link system" href="../../axioms.html#def-default-_2B-2" data-sym="DEFAULT-+-2">default-+-2</a>
        <a class="sym-link system" href="../../axioms.html#def-inverse-of-_2A" data-sym="INVERSE-OF-*">inverse-of-*</a>
        functional-self-inversion-of-/
        minus-cancellation-on-right
        minus-cancellation-on-left
        /-cancellation-on-left
        /-cancellation-on-right
        equal-*-x-y-y
        <a class="sym-link local-def" href="#def-cancel-equal-_2B-_2A" data-sym="CANCEL-EQUAL-+-*" title="(defrule cancel-equal-+-* :short
 &quot;Rewrite: @(&#39;(equal (+ x y) x)&#39;) and @(&#39;(equal (* x y) x)&#39;);
          also commutative forms.&quot;
 (and (equal (equal (+ x y) x) (and (acl2-numberp x) (equal (fix y) 0)))
      (equal (equal (+ y x) x) (and (acl2-numberp x) (equal (fix y) 0)))
...">cancel-equal-+-*</a>
        <a class="sym-link local-def" href="#def-normalize-equal-0" data-sym="NORMALIZE-EQUAL-0" title="(defrule normalize-equal-0 :short
 &quot;Rewrite @(&#39;(equal (- x) 0)&#39;), @(&#39;(equal (+ x y) 0)&#39;), and
@(&#39;(equal (* x y) 0)&#39;).&quot;
 (and (equal (equal (- x) 0) (equal (fix x) 0))
      (equal (equal (+ x y) 0) (equal (fix x) (- y)))">normalize-equal-0</a>
        left-cancellation-for-*
        left-cancellation-for-+
        equal-minus-0
        zero-is-only-zero-divisor
        equal-minus-minus
        equal-/-/
        <a class="sym-link system" href="../../axioms.html#def-default-unary-minus" data-sym="DEFAULT-UNARY-MINUS">default-unary-minus</a>
        equal-/
        equal-*-/-2
        functional-commutativity-of-minus-*-left
        functional-commutativity-of-minus-*-right
        reciprocal-minus
        equal-minus-minus
        distributivity-of-/-over-*
        <a class="sym-link system" href="../../axioms.html#def-distributivity" data-sym="DISTRIBUTIVITY">distributivity</a>
        distributivity-of-minus-over-+))))</pre>
  </div>

<div class="form-block theorem" id="def-rewrite-linear-equalities-to-iff" data-defines="REWRITE-LINEAR-EQUALITIES-TO-IFF" data-references="IFF,Z,Y,X,W,<,EQUAL,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REWRITE-LINEAR-EQUALITIES-TO-IFF">rewrite-linear-equalities-to-iff</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-rewrite-linear-equalities-to-iff" data-sym="REWRITE-LINEAR-EQUALITIES-TO-IFF" title="(defrule rewrite-linear-equalities-to-iff :short
 &quot;Rewrite: @(&#39;(EQUAL (&lt; w x) (&lt; y z))&#39;) &amp;rarr; @(&#39;(IFF (&lt; w x) (&lt; y z))&#39;).&quot;
 :long &quot;&lt;p&gt;Some proofs of linear equalities don&#39;t work when presented as
  equalities because they need to be proved by linear arithmetic, but linear
  arithmetic only works at the literal level.  This lemma allows you to state
...">rewrite-linear-equalities-to-iff</a>
  <span class="keyword">:short</span> <span class="string">"Rewrite: @(&#39;(EQUAL (&lt; w x) (&lt; y z))&#39;) &amp;rarr; @(&#39;(IFF (&lt; w x) (&lt; y z))&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Some proofs of linear equalities don&#39;t work when presented as
  equalities because they need to be proved by linear arithmetic, but linear
  arithmetic only works at the literal level.  This lemma allows you to state
  the equality as an equality rewrite rule, but breaks the equality into
  literals for the proof.&lt;/p&gt;"</span>
  (equal (equal (&lt; <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x) (&lt; y z)) (<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a> (&lt; <a class="sym-link system" href="../../axioms.html#def-w" data-sym="W">w</a> x) (&lt; y z))))</pre>
  </div>

<div class="form-block theorem" id="def-normalize-_3C-minus-_2F" data-defines="NORMALIZE-<-MINUS-/" data-references="/,REAL/RATIONALP,IMPLIES,>,Y,X,-,<,EQUAL,AND,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NORMALIZE-<-MINUS-/">normalize-&lt;-minus-/</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-normalize-_3C-minus-_2F" data-sym="NORMALIZE-&lt;-MINUS-/" title="(defrule normalize-&lt;-minus-/ :short
 &quot;Rewrite inequalities between 0 and negated or reciprocal terms, and
  @(&#39;(&lt; (- x) (- y))&#39;).&quot;
 (and (equal (&lt; (- x) 0) (&lt; 0 x)) (equal (&lt; 0 (- x)) (&lt; x 0))
      (equal (&lt; (- x) (- y)) (&gt; x y))
...">normalize-&lt;-minus-/</a>
  <span class="keyword">:short</span> <span class="string">"Rewrite inequalities between 0 and negated or reciprocal terms, and
  @(&#39;(&lt; (- x) (- y))&#39;)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) <span class="number">0</span>) (&lt; <span class="number">0</span> x))
    (equal (&lt; <span class="number">0</span> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x)) (&lt; x <span class="number">0</span>))
    (equal (&lt; (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> y)) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x y))
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (&lt; <span class="number">0</span> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x)) (&lt; <span class="number">0</span> x))
        (equal (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> x) <span class="number">0</span>) (&lt; x <span class="number">0</span>))))))</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection rationalp-algebra
  <span class="keyword">:short</span> <span class="string">"A basic theory of algebra for all @(see rationalp)s."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This theory includes the @(see acl2-numberp-algebra) theory along
with additional lemmas about the rationals.&lt;/p&gt;

&lt;p&gt;This theory extends ACL2-NUMBERP-ALGEBRA to include theorems about NUMERATOR
and DENOMINATOR, and simple cancellation and normalization theorems and other
simple theorems for inequalities.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> rationalp-algebra
    (union-theories (theory 'acl2-numberp-algebra)
      (union-theories (defun-theory '(numerator denominator
            &lt;
            abs
            plusp
            minusp
            min
            max
            signum
            <a class="sym-link system" href="../../axioms.html#def-rfix" data-sym="RFIX">rfix</a>))
        '(equal-*-/-1 *-r-denominator-r
          <a class="sym-link system" href="../../axioms.html#def-default-denominator" data-sym="DEFAULT-DENOMINATOR">default-denominator</a>
          numerator-minus
          equal-denominator-1
          numerator-when-integerp
          &lt;-y-*-y-x
          &lt;-*-y-x-y
          &lt;-*-/-right
          &lt;-*-/-right-commuted
          &lt;-*-/-left
          &lt;-*-/-left-commuted
          &lt;-*-left-cancel
          &lt;-0-minus
          /-preserves-positive
          /-preserves-negative
          <a class="sym-link local-def" href="#def-rewrite-linear-equalities-to-iff" data-sym="REWRITE-LINEAR-EQUALITIES-TO-IFF" title="(defrule rewrite-linear-equalities-to-iff :short
 &quot;Rewrite: @(&#39;(EQUAL (&lt; w x) (&lt; y z))&#39;) &amp;rarr; @(&#39;(IFF (&lt; w x) (&lt; y z))&#39;).&quot;
 :long &quot;&lt;p&gt;Some proofs of linear equalities don&#39;t work when presented as
  equalities because they need to be proved by linear arithmetic, but linear
  arithmetic only works at the literal level.  This lemma allows you to state
...">rewrite-linear-equalities-to-iff</a>
          <a class="sym-link local-def" href="#def-normalize-_3C-minus-_2F" data-sym="NORMALIZE-&lt;-MINUS-/" title="(defrule normalize-&lt;-minus-/ :short
 &quot;Rewrite inequalities between 0 and negated or reciprocal terms, and
  @(&#39;(&lt; (- x) (- y))&#39;).&quot;
 (and (equal (&lt; (- x) 0) (&lt; 0 x)) (equal (&lt; 0 (- x)) (&lt; x 0))
      (equal (&lt; (- x) (- y)) (&gt; x y))
...">normalize-&lt;-minus-/</a>
          &lt;-unary-/-negative-left
          &lt;-unary-/-negative-right
          &lt;-unary-/-positive-left
          &lt;-unary-/-positive-right)))))</pre>
  </div>

<div class="form-block theorem" id="def-normalize-_3C-_2F-to-_2A" data-defines="NORMALIZE-<-/-TO-*" data-references="*,IF,/,<,EQUAL,NOT,Y,X,REAL/RATIONALP,AND,IMPLIES,PREFER-*-TO-/,MATH-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NORMALIZE-<-/-TO-*">normalize-&lt;-/-to-*</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-normalize-_3C-_2F-to-_2A" data-sym="NORMALIZE-&lt;-/-TO-*" title="(defrule normalize-&lt;-/-to-* :parents (math-lemmas prefer-*-to-/) :short
 &quot;Rewrite: Replace @(&#39;x &lt; 1/y&#39;) with @(&#39;x*y &lt; 1&#39;) or @(&#39;x*y &gt; 1&#39;),
  based on the sign of y.&quot;
 (implies (and (real/rationalp x) (real/rationalp y) (not (equal y 0)))
          (and
...">normalize-&lt;-/-to-*</a>
  <span class="keyword">:parents</span> (math-lemmas prefer-*-to-/)
  <span class="keyword">:short</span> <span class="string">"Rewrite: Replace @(&#39;x &lt; 1/y&#39;) with @(&#39;x*y &lt; 1&#39;) or @(&#39;x*y &gt; 1&#39;),
  based on the sign of y."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
      (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y)
      (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal y <span class="number">0</span>)))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (&lt; x (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y))
        (if (&lt; y <span class="number">0</span>)
          (&lt; <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y))
          (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) <span class="number">1</span>)))
      (equal (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> y) x)
        (if (&lt; y <span class="number">0</span>)
          (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) <span class="number">1</span>)
          (&lt; <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y)))))))</pre>
  </div>

<div class="form-block theorem" id="def-normalize-_3C-_2F-to-_2A-3" data-defines="NORMALIZE-<-/-TO-*-3" data-references="<-*-RIGHT-CANCEL,<-UNARY-/-POSITIVE-LEFT,<-UNARY-/-NEGATIVE-RIGHT,<-UNARY-/-NEGATIVE-LEFT,IF,/,*,<,EQUAL,NOT,Z,Y,X,REAL/RATIONALP,AND,IMPLIES,PREFER-*-TO-/,MATH-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NORMALIZE-<-/-TO-*-3">normalize-&lt;-/-to-*-3</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-normalize-_3C-_2F-to-_2A-3" data-sym="NORMALIZE-&lt;-/-TO-*-3" title="(defrule normalize-&lt;-/-to-*-3 :parents (math-lemmas prefer-*-to-/) :short
 &quot;Rewrite: Replace @(&#39;x &lt; y/z&#39;) and @(&#39;x &gt; y/z&#39;) with @(&#39;x*z &lt; y&#39;) or
  @(&#39;x*z &gt; y&#39;), depending on the sign of z.&quot;
 (implies
  (and (real/rationalp x) (real/rationalp y) (real/rationalp z)
...">normalize-&lt;-/-to-*-3</a>
  <span class="keyword">:parents</span> (math-lemmas prefer-*-to-/)
  <span class="keyword">:short</span> <span class="string">"Rewrite: Replace @(&#39;x &lt; y/z&#39;) and @(&#39;x &gt; y/z&#39;) with @(&#39;x*z &lt; y&#39;) or
  @(&#39;x*z &gt; y&#39;), depending on the sign of z."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x)
      (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y)
      (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z)
      (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>)))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (&lt; x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z)))
        (if (&lt; z <span class="number">0</span>)
          (&lt; y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z))
          (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z) y)))
      (equal (&lt; x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z) y))
        (if (&lt; z <span class="number">0</span>)
          (&lt; y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z))
          (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z) y)))
      (equal (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z)) x)
        (if (&lt; z <span class="number">0</span>)
          (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z) y)
          (&lt; y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z))))
      (equal (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z) y) x)
        (if (&lt; z <span class="number">0</span>)
          (&lt; (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z) y)
          (&lt; y (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z))))))
  <span class="keyword">:disable</span> (&lt;-unary-/-negative-left &lt;-unary-/-negative-right
    &lt;-unary-/-positive-left
    &lt;-unary-/-positive-left
    &lt;-*-right-cancel)
  <span class="keyword">:use</span> (<span class="keyword">:instance</span> &lt;-*-right-cancel (x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z)) (y y) (z (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z))))</pre>
  </div>

<div class="form-block theorem" id="def-normalize-equal-_2F-to-_2A" data-defines="NORMALIZE-EQUAL-/-TO-*" data-references="FIX,/,Y,*,X,EQUAL,NOT,Z,ACL2-NUMBERP,AND,IMPLIES,PREFER-*-TO-/,MATH-LEMMAS,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NORMALIZE-EQUAL-/-TO-*">normalize-equal-/-to-*</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-normalize-equal-_2F-to-_2A" data-sym="NORMALIZE-EQUAL-/-TO-*" title="(defrule normalize-equal-/-to-* :parents (math-lemmas prefer-*-to-/) :short
 &quot;Rewrite: Replace @(&#39;x = y/z&#39;) with @(&#39;x*z = y&#39;).&quot;
 (implies (and (acl2-numberp z) (not (equal z 0)))
          (and
           (equal (equal x (* y (/ z)))
...">normalize-equal-/-to-*</a>
  <span class="keyword">:parents</span> (math-lemmas prefer-*-to-/)
  <span class="keyword">:short</span> <span class="string">"Rewrite: Replace @(&#39;x = y/z&#39;) with @(&#39;x*z = y&#39;)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp z) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal z <span class="number">0</span>)))
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (equal (equal x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z)))
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp x) (equal (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z) (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> y))))
      (equal (equal x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> (<a class="sym-link system" href="../../axioms.html#def-_2F" data-sym="/">/</a> z) y))
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp x) (equal (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x z) (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> y)))))))</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection prefer-*-to-/
  <span class="keyword">:short</span> <span class="string">"A small theory of lemmas that eliminate / in favor of *."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is a small theory of rules that eliminate / from equalites and
  inequalities in favor of *, e.g., @(&#39;x &lt; y/z&#39;) is rewritten to @(&#39;x*y &lt; z&#39;)
  for positive z.  This theory is compatible with the ALGEBRA theories, i.e.,
  it should not cause looping.&lt;/p&gt;

  &lt;p&gt;These rules are not included in @(see rationalp-algebra) because it is not
  clear that we should prefer @(&#39;x*y &lt; z&#39;) to @(&#39;x &lt; y/z&#39;), or @(&#39;x*y = z&#39;) to
  @(&#39;x = y/z&#39;). In the case of the lemma @(see normalize-equal-/-to-*), there
  is no reason to suspect that `y&#39; is a better term than `x&#39;; in fact, the
  whole point of the proofs using these libraries may have to do with a
  representation involving /.  So, unless someone provides a convincing reason
  to the contrary, these rules will remain separate from the @(see
  rationalp-algebra) theory.&lt;/p&gt;

  &lt;p&gt;Note, however, that in certain cases this theory is just the thing that
  needs to be ENABLEd to make the proofs work.  Keep it in mind.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> prefer-*-to-/
    '(<a class="sym-link local-def" href="#def-normalize-_3C-_2F-to-_2A" data-sym="NORMALIZE-&lt;-/-TO-*" title="(defrule normalize-&lt;-/-to-* :parents (math-lemmas prefer-*-to-/) :short
 &quot;Rewrite: Replace @(&#39;x &lt; 1/y&#39;) with @(&#39;x*y &lt; 1&#39;) or @(&#39;x*y &gt; 1&#39;),
  based on the sign of y.&quot;
 (implies (and (real/rationalp x) (real/rationalp y) (not (equal y 0)))
          (and
...">normalize-&lt;-/-to-*</a> <a class="sym-link local-def" href="#def-normalize-_3C-_2F-to-_2A-3" data-sym="NORMALIZE-&lt;-/-TO-*-3" title="(defrule normalize-&lt;-/-to-*-3 :parents (math-lemmas prefer-*-to-/) :short
 &quot;Rewrite: Replace @(&#39;x &lt; y/z&#39;) and @(&#39;x &gt; y/z&#39;) with @(&#39;x*z &lt; y&#39;) or
  @(&#39;x*z &gt; y&#39;), depending on the sign of z.&quot;
 (implies
  (and (real/rationalp x) (real/rationalp y) (real/rationalp z)
...">normalize-&lt;-/-to-*-3</a>
      <a class="sym-link local-def" href="#def-normalize-equal-_2F-to-_2A" data-sym="NORMALIZE-EQUAL-/-TO-*" title="(defrule normalize-equal-/-to-* :parents (math-lemmas prefer-*-to-/) :short
 &quot;Rewrite: Replace @(&#39;x = y/z&#39;) with @(&#39;x*z = y&#39;).&quot;
 (implies (and (acl2-numberp z) (not (equal z 0)))
          (and
           (equal (equal x (* y (/ z)))
...">normalize-equal-/-to-*</a>)))</pre>
  </div>

<div class="form-block in-theory" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">in-theory</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable prefer-*-to-/))</pre>
  </div>

<div class="form-block theorem" id="def-integerp-_2B-minus-_2A" data-defines="INTEGERP-+-MINUS-*" data-references="*,+,J,-,I,INTEGERP,IMPLIES,AND,DEFRULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INTEGERP-+-MINUS-*">integerp-+-minus-*</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defrule.html#def-defrule" data-sym="DEFRULE">defrule</a> <a class="sym-link local-def" href="#def-integerp-_2B-minus-_2A" data-sym="INTEGERP-+-MINUS-*" title="(defrule integerp-+-minus-* :short
 &quot;Rewrite: -i, i + j, i - j, and i * j are integers, when i and j are
  integers.&quot;
 :long &quot;&lt;p&gt;The system has powerful enough type reasoning to `get&#39; these facts
  automatically most of the time.  There are cases, however, where we need to
...">integerp-+-minus-*</a>
  <span class="keyword">:short</span> <span class="string">"Rewrite: -i, i + j, i - j, and i * j are integers, when i and j are
  integers."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The system has powerful enough type reasoning to `get&#39; these facts
  automatically most of the time.  There are cases, however, where we need to
  bring the full power of the rewriter to bear on the problem.  In general one
  would like to keep lemmas like this to a minimum so as to avoid swamping the
  rewriter.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (integerp i) (integerp (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> i)))
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (integerp j))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i j))
        (integerp (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> i j))
        (integerp (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i j))))))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection integerp-algebra
  <span class="keyword">:parents</span> (math-lemmas ihs-math)
  <span class="keyword">:short</span> <span class="string">"A basic theory of algebra for all INTEGERPs."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;this theory consists of the @(see acl2-numberp-algebra) and @(see
  rationalp-algebra) theories, along with additional lemmas about the
  integers.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> integerp-algebra
    (union-theories (theory 'rationalp-algebra)
      (union-theories (defun-theory '(integerp <a class="sym-link system" href="../../axioms.html#def-integer-abs" data-sym="INTEGER-ABS">integer-abs</a>))
        '(<a class="sym-link local-def" href="#def-integerp-_2B-minus-_2A" data-sym="INTEGERP-+-MINUS-*" title="(defrule integerp-+-minus-* :short
 &quot;Rewrite: -i, i + j, i - j, and i * j are integers, when i and j are
  integers.&quot;
 :long &quot;&lt;p&gt;The system has powerful enough type reasoning to `get&#39; these facts
  automatically most of the time.  There are cases, however, where we need to
...">integerp-+-minus-*</a> integerp==&gt;denominator=1
          &lt;-minus-zero
          natp-rw
          posp-rw)))))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection expt-algebra
  <span class="keyword">:parents</span> (math-lemmas ihs-math)
  <span class="keyword">:short</span> <span class="string">"A theory of EXPT which is compatible with the ALGEBRA theories."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This theory contains :TYPE-PRESCRIPTIONS, simpification,
  normalization and selected :LINEAR rules for @(tsee EXPT).  This theory will
  not be useful unless the @(see integerp-algebra) theory, or something similar
  is ENABLEd.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> expt-algebra
    '((expt) (<span class="keyword">:type-prescription</span> expt)
      expt-type-prescription-nonzero
      expt-type-prescription-positive
      expt-type-prescription-integerp
      right-unicity-of-1-for-expt
      functional-commutativity-of-expt-/-base
      expt-minus
      exponents-add
      exponents-multiply
      expt-&gt;-1
      expt-is-increasing-for-base&gt;1
      expt-is-decreasing-for-pos-base&lt;1
      expt-is-weakly-increasing-for-base&gt;1
      expt-is-weakly-decreasing-for-pos-base&lt;1)))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection ihs-math
  <span class="keyword">:short</span> <span class="string">"The default theory of +, -, *, /, and EXPT for the IHS library."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This theory simply consists of the theories @(see INTEGERP-ALGEBRA)
and @(see EXPT-ALGEBRA).&lt;/p&gt;

&lt;p&gt;This theory is the default theory exported by the @(&#39;ihs/math-lemmas&#39;) book.
This theory will normally be ENABLEd by every book in the IHS library.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> ihs-math
    (union-theories (theory 'integerp-algebra)
      (theory 'expt-algebra))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = 'üåô';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '‚òÄÔ∏è';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>