<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>basic-definitions - ACL2 Book</title>
  <meta property="name" content="basic-definitions">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">basic-definitions</h1>
    <div class="path"><a href="basic-definitions.lisp" class="source-link">books/ihs/basic-definitions</a></div>
  </div>
  
  <main property="text">
  <div class="includes-section">
    <h2>Included Books</h2>
    <div class="includes-list">
      <a class="include-link" href="../std/util/define.html" title="std/util/define">define</a>
      <a class="include-link" href="../std/basic/defs.html" title="std/basic/defs">defs</a>
      <a class="include-link local" href="math-lemmas.html" title="math-lemmas">math-lemmas</a>
      <a class="include-link local" href="quotient-remainder-lemmas.html" title="quotient-remainder-lemmas">quotient-remainder-lemmas</a>
    </div>
  </div>

<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block include-book" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../std/util/define.html" title="Open std/util/define">"std/util/define"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block include-book" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../std/basic/defs.html" title="Open std/basic/defs">"std/basic/defs"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block local" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="math-lemmas.html" title="Open math-lemmas">"math-lemmas"</a>))</pre>
  </div>

<div class="form-block local" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="quotient-remainder-lemmas.html" title="Open quotient-remainder-lemmas">"quotient-remainder-lemmas"</a>))</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc logops
  <span class="keyword">:parents</span> (ihs)
  <span class="keyword">:short</span> <span class="string">"Definitions and lemmas about logical operations on integers."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The books @(see logops-definitions) and @(see logops-lemmas)
contain a theory of the logical operations on numbers defined by CLTL (Section
12.7), and a portable implementation of the CLTL byte manipulation
functions (Section 12.8).  These books also extend the CLTL logical operations
and byte manipulation theory with a few new definitions, lemmas supporting
those definitions, and useful macros.&lt;/p&gt;

&lt;p&gt;These books were developed as a basis for the formal specification and
verification of hardware, where integers are used to represent binary signals
and busses.  These books should be general enough, however, to be used as a
basis for reasoning about packed data structures, bit-encoded sets, and other
applications of logical operations on integers.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc logops-definitions
  <span class="keyword">:parents</span> (ihs)
  <span class="keyword">:short</span> <span class="string">"A book a definitions of logical operations on numbers."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This book, along with @(see logops-lemmas), includes a theory of
the Common Lisp logical operations on numbers, a portable implementation of the
Common Lisp byte operations, extensions to those theories, and some useful
macros.&lt;/p&gt;

&lt;p&gt;This book contains only definitions, lemmas necessary to admit those
definitions, and selected type lemmas.  By &quot;type lemmas&quot; we mean any lemmas
about the logical operations that we have found necessary to verify the guards
of functions that use these operations.  We have separated these &quot;type
lemmas&quot; from the large body of other lemmas in @(see logops-lemmas) to allow a
user to use this book to define guard-verified functions without having to also
include the extensive theory in @(&#39;logops-lemmas&#39;).&lt;/p&gt;

&lt;p&gt;The standard Common Lisp logical operations on numbers are defined on the
signed integers, and return signed integers as appropriate.  This allows a high
level, signed interpretation of hardware operations if that is appropriate for
the specification at hand.  We also provide unsigned versions of several of the
standard logical operations for use in specifications where fixed-length
unsigned integers are used to model hardware registers and busses.  This view
of hardware is used, for example, in Yuan Yu&#39;s Nqthm specification of the
Motorola MC68020.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block local" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (set-default-parents logops-definitions))</pre>
  </div>

<div class="form-block local" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ash-1-n
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a> n) (equal (ash <span class="number">1</span> n) (expt <span class="number">2</span> n)))))</pre>
  </div>

<div class="form-block local" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> logand-1
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (integerp i) (equal (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> i <span class="number">1</span>) (mod i <span class="number">2</span>)))))</pre>
  </div>

<div class="form-block local" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ash-minus-1
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (integerp i) (equal (ash i <span class="number">-1</span>) (floor i <span class="number">2</span>)))))</pre>
  </div>

<div class="form-block local" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ash-plus-1
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (integerp i) (equal (ash i <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> <span class="number">2</span> i)))))</pre>
  </div>

<div class="form-block local" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ash-minus-n
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (<a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a> pos))
      (equal (ash i (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> pos)) (floor i (expt <span class="number">2</span> pos))))))</pre>
  </div>

<div class="form-block local" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ash-plus-n
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (<a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a> pos))
      (equal (ash i pos) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> i (expt <span class="number">2</span> pos))))))</pre>
  </div>

<div class="form-block local" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> logand-positive
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a> mask) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> i mask)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span>))))</pre>
  </div>

<div class="form-block local" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
    (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> my-induct
        (i size)
        (if (<a class="sym-link system" href="../../axioms.html#def-zp" data-sym="ZP">zp</a> size)
          (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> size i)
          (my-induct (ash i <span class="number">-1</span>) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> size <span class="number">1</span>)))))
    (<a class="sym-link system" href="../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> mod-of-expt-2-is-logand
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>) (integerp i))
        (equal (mod i (expt <span class="number">2</span> size)) (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> i (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> (ash <span class="number">1</span> size)))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:induct</span> (my-induct i size))))))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define zbp
  <span class="keyword">:parents</span> (logops-definitions <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>)
  <span class="keyword">:short</span> <span class="string">"Zero bit recognizer.  @(&#39;(zbp x)&#39;) tests for zero bits.  Any object
other than @(&#39;1&#39;) is considered to be a zero bit."</span>
  ((x <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> bool
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (equal (bfix x) <span class="number">0</span>)
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-_2F_3D" data-sym="/=">/=</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) x) <span class="number">1</span>)))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define ifloor
  <span class="keyword">:short</span> <span class="string">"@(&#39;(ifloor i j)&#39;) is the same as @(see floor), except that it coerces
  its arguments to integers."</span>
  ((i integerp) (j (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp j) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a> <span class="number">0</span> j)))))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> ifloor-type)
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (floor (<a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a> i) (<a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a> j)) <span class="keyword">:exec</span> (floor i j)))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define imod
  <span class="keyword">:short</span> <span class="string">"@(&#39;(imod i j)&#39;) is the same as @(see mod), except that it coerces its
  arguments to integers."</span>
  ((i integerp) (j (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp j) (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-_3D" data-sym="=">=</a> <span class="number">0</span> j)))))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> imod-type)
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (mod (<a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a> i) (<a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a> j)) <span class="keyword">:exec</span> (mod i j)))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define expt2
  <span class="keyword">:short</span> <span class="string">"@(&#39;(expt2 n)&#39;) is the same as @(&#39;(expt 2 n)&#39;), except that it coerces
  its argument to a natural."</span>
  ((n <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a>))
  <span class="keyword">:returns</span> (nat <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> expt2-type)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (expt <span class="number">2</span> (<a class="sym-link system" href="../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (ash <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte n)))))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define binary-minus-for-gl
  ((x acl2-numberp) (y acl2-numberp))
  <span class="keyword">:parents</span> (binary--)
  <span class="keyword">:short</span> <span class="string">"Hack for implementing @(see binary--).  Don&#39;t use this."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;You should never need to use this, call @(see binary--) instead.&lt;/p&gt;

&lt;p&gt;This is the logical definition for @(see binary--).  It has a custom GL
symbolic counterpart.  The only reason to make this a separate function,
instead of directly putting a symbolic counterpart on @(&#39;binary--&#39;) itself, is
to avoid infinite inlining problems when we define custom symbolic counterparts
for inlined functions on Lisps like SBCL.&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x y))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define binary--
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(&#39;(binary-- x y)&#39;) is the same as @(&#39;(- x y)&#39;), but may symbolically
simulate more efficiently in @(see gl)."</span>
  ((x acl2-numberp) (y acl2-numberp))
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is an alias for @(&#39;(- x y)&#39;).  It should always be left
enabled and you should never prove any theorems about it.&lt;/p&gt;

&lt;p&gt;In ACL2, @(see -) is a macro and @(&#39;(- x y)&#39;) expands to @(&#39;(+ x (unary--
y))&#39;).  This form is often not particularly good for symbolic simulation with
@(see gl): GL first has to negate @(&#39;y&#39;) and then carry out the addition.&lt;/p&gt;

&lt;p&gt;In contrast, @(&#39;binary--&#39;) has a custom symbolic counterpart that avoids
this intermediate negation.  This may result in fewer BDD computations or AIG
nodes.  In the context of @(see hardware-verification), it may also help your
spec functions to better match the real implementation of subtraction circuits
in the hardware being analyzed.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (binary-minus-for-gl x y) <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> x y)))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logcar
  <span class="keyword">:short</span> <span class="string">"Least significant bit of a number."</span>
  ((i integerp))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:type-prescription</span>) (<span class="keyword">:generalize</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (equal (logcar i) <span class="number">0</span>) (equal (logcar i) <span class="number">1</span>))))
    <span class="keyword">:name</span> logcar-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(&#39;(logcar i)&#39;) is the @(see car) of an integer conceptualized as a
bit-vector, where the least significant bit is at the head of the list.&lt;/p&gt;

&lt;p&gt;In languages like C, this might be written as @(&#39;i &amp; 1&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (imod i <span class="number">2</span>)
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> integer i) <span class="number">1</span>))))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logcdr
  <span class="keyword">:short</span> <span class="string">"All but the least significant bit of a number."</span>
  ((i integerp))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logcdr-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(&#39;(logcdr i)&#39;) is the @(see cdr) of an integer conceptualized as a
bit-vector, where the least significant bit is at the head of the list.&lt;/p&gt;

&lt;p&gt;In languages like C, this might be written as @(&#39;i &gt;&gt; 1&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (ifloor i <span class="number">2</span>)
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> integer (ash (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> integer i) <span class="number">-1</span>))))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logcons
  <span class="keyword">:short</span> <span class="string">"@(&#39;(logcons b i)&#39;) is the @(see cons) operation for integers,
conceptualized as bit-vectors, where the least significant bit is at the head
of the list."</span>
  ((b <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="string">"LSB of the result."</span>) (i integerp <span class="string">"All but the LSB of the result."</span>))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logcons-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;In languages like C, this might be written as @(&#39;(i &lt;&lt; 1) + b&#39;).&lt;/p&gt;

&lt;p&gt;See also @(see logcar) and @(see logcdr).&lt;/p&gt;"</span>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (let ((b (bfix b)) (i (<a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a> i)))
      (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> b (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> <span class="number">2</span> i)))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> integer
      (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) b) (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> integer (ash i <span class="number">1</span>))))))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logbit
  <span class="keyword">:parents</span> (logops-definitions logbitp)
  <span class="keyword">:short</span> <span class="string">"@(&#39;(logbit pos i)&#39;) returns the bit of @(&#39;i&#39;) at bit-position @(&#39;pos&#39;)
as a @(see bitp), 0 or 1."</span>
  ((pos <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a>) (i integerp))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logbit-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is just like the Common Lisp function @(&#39;(logbitp pos i)&#39;),
except that we return 1 or 0 (instead of t or nil).&lt;/p&gt;

&lt;p&gt;In languages like C, this might be written as @(&#39;(i &gt;&gt; pos) &amp; 1&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:no-function</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (if (logbitp pos i)
    <span class="number">1</span>
    <span class="number">0</span>)
  ///)</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logmask
  <span class="keyword">:short</span> <span class="string">"@(&#39;(logmask size)&#39;) creates a low-order, @(&#39;size&#39;)-bit mask."</span>
  ((size <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a>))
  <span class="keyword">:returns</span> (nat <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a>
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logmask-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;In languages like C, this might be written as @(&#39;(1 &lt;&lt; size) - 1&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (expt2 size) <span class="number">1</span>)
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (ash <span class="number">1</span> size))))))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logmaskp
  <span class="keyword">:short</span> <span class="string">"@(&#39;(logmaskp i)&#39;) recognizes positive bit-masks, i.e., numbers of the
form @($2^n - 1$)."</span>
  (i)
  <span class="keyword">:returns</span> bool
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Note that this function explicitly checks @(&#39;(integerp i)&#39;), which
means it doesn&#39;t satisfy an @(see int-equiv) congruence.  See also @(see
bitmaskp), which fixes its argument and may execute slightly faster.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i)
      (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i <span class="number">0</span>)
      (equal i (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (expt2 (<a class="sym-link system" href="../../axioms.html#def-integer-length" data-sym="INTEGER-LENGTH">integer-length</a> i)) <span class="number">1</span>)))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i)
      (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> i
        (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte
          (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (ash <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-integer-length" data-sym="INTEGER-LENGTH">integer-length</a> i))) <span class="number">1</span>))))))</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bitmaskp
  <span class="keyword">:short</span> <span class="string">"@(&#39;(bitmaskp i)&#39;) recognizes positive masks, i.e., numbers of the form
@($2^n - 1$).  It is like @(see logmaskp) but properly treats non-integers as 0."</span>
  ((i integerp))
  <span class="keyword">:returns</span> bool
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (logmaskp (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a> i) <span class="keyword">:exec</span> i))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> i
      (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte
        (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (ash <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-integer-length" data-sym="INTEGER-LENGTH">integer-length</a> i))) <span class="number">1</span>)))))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define loghead
  <span class="keyword">:short</span> <span class="string">"@(&#39;(loghead size i)&#39;) returns the @(&#39;size&#39;) low-order bits of @(&#39;i&#39;)."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> size)) <span class="keyword">:type</span> unsigned-byte) (i integerp))
  <span class="keyword">:returns</span> (nat <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a>
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> loghead-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;In languages like C, this might be written as @(&#39;i &amp; ((1 &lt;&lt; size) -
1)&#39;).&lt;/p&gt;

&lt;p&gt;By convention we define @(&#39;(loghead 0 i)&#39;) as 0.  This definition is a
bit arbitrary but generally leads to nice lemmas.&lt;/p&gt;"</span>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:split-types</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable mod-of-expt-2-is-logand)))
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (imod i (expt2 size))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte
      (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> i
        (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (ash <span class="number">1</span> size))))))))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logtail
  <span class="keyword">:short</span> <span class="string">"@(&#39;(logtail pos i)&#39;) returns the high-order part of @(&#39;i&#39;), starting
  at bit position @(&#39;pos&#39;)."</span>
  ((pos (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp pos) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> pos)) <span class="keyword">:type</span> unsigned-byte) (i integerp))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logtail-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;In languages like C, this might be written as @(&#39;i &gt;&gt; pos&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:split-types</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (ifloor i (expt2 pos))
    <span class="keyword">:exec</span> (ash i (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte pos)))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logapp
  <span class="keyword">:short</span> <span class="string">"@(&#39;(logapp size i j)&#39;) is a binary append of i to j, where i
  effectively becomes the &#39;low&#39; bits and j becomes the &#39;high&#39; bits."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> size)) <span class="keyword">:type</span> unsigned-byte) (i integerp)
    (j integerp))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logapp-type)
  <span class="keyword">:split-types</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(&#39;logapp&#39;) is a specification for merging integers.  Note that
@(&#39;i&#39;) is truncated to @(&#39;size&#39;) bits before merging with @(&#39;j&#39;), and that @(&#39;j&#39;)
is shifted to the left by @(&#39;size&#39;) bits before the merge.&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (let ((j (<a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a> j)))
      (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (loghead size i) (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> j (expt2 size))))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (loghead size i) (ash j size))))</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logappn
  <span class="keyword">:short</span> <span class="string">"N-ary version of @(tsee logapp)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;When passed an even number of arguments,&lt;/p&gt;
   &lt;code&gt;
   (logappn size1 int1 ... sizeN intN)
   &lt;/code&gt;
   &lt;p&gt;expands to a nest of @(tsee logapp)s ending with 0:&lt;/p&gt;
   &lt;code&gt;
   (logapp size1 int1 ... (logapp sizeN intN 0)...)
   &lt;/code&gt;
   &lt;p&gt;where the last @(tsee logapp) could be optimized
      as a @(tsee loghead) without 0,
      but the current form keeps the macro simple and uniform.&lt;/p&gt;
   &lt;p&gt;When passed an odd number of arguments,&lt;/p&gt;
   &lt;code&gt;
   (logappn size1 int1 ... sizeN intN last)
   &lt;/code&gt;
   &lt;p&gt;expands to a nest of @(tsee logapp)s ending with @(&#39;last&#39;):&lt;/p&gt;
   &lt;code&gt;
   (logapp size1 int1 ... (logapp sizeN intN last)...)
   &lt;/code&gt;
   &lt;p&gt;This macro supports the readable appending of bit chunks
      when passed an even number of arguments, e.g.&lt;/p&gt;
   &lt;code&gt;
   (logappn 32 base
            8 padding
            24 offset)
   &lt;/code&gt;
   &lt;p&gt;The ability to pass an odd number of arguments
      is in spirit with @(tsee logapp),
      whose @(&#39;j&#39;) argument does not have an associated size.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> logappn-fn
    (<a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) <span class="number">0</span>)
      ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)) (car <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>))
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> `(logapp ,(CAR ARGS) ,(CADR ARGS) ,(LOGAPPN-FN (CDDR ARGS))))))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> logappn (&amp;rest <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) (logappn-fn <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)))</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logrpl
  <span class="keyword">:short</span> <span class="string">"Logical replace.  @(&#39;(logrpl size i j)&#39;) replaces the @(&#39;size&#39;)
  low-order bits of @(&#39;j&#39;) with the @(&#39;size&#39;) low-order bits of @(&#39;i&#39;)."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> size))) (i integerp)
    (j integerp))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logrpl-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(&#39;logrpl&#39;) is a specification for the result of storing short
values into long words, i.e., the short value simply replaces the head of the
long word.&lt;/p&gt;

&lt;p&gt;This function is equivalent to @(&#39;(WRB i (BSP size 0) j)&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (logapp size i (logtail size j)))</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logext
  <span class="keyword">:short</span> <span class="string">"@(&#39;(logext size i)&#39;) sign-extends @(&#39;i&#39;) to a @(&#39;size&#39;)-bit signed
integer."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (&lt; <span class="number">0</span> size)) <span class="keyword">:type</span> unsigned-byte) (i integerp))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logext-type)
  <span class="keyword">:split-types</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(&#39;logext&#39;) interprets the least significant @(&#39;size&#39;) bits of
@(&#39;i&#39;) as a signed, 2&#39;s complement integer.&lt;/p&gt;

&lt;p&gt;Basic examples:&lt;/p&gt;

@({
    (logext 4 7)  --&gt; 7        Bottom four bits are 0111
                               Sign bit is 0
                               Sign extension creates {0000......0}111
                               2&#39;s complement interpretation: 7.

    (logext 3 7)  --&gt; -1       Bottom 3 bits are 111
                               Sign bit is 1
                               Sign extension creates {1111.....1}111
                               2&#39;s complement interpretation: -1.

    (logext 4 8)  --&gt; -8       Bottom 4 bits are 1000
                               Sign bit is 1
                               Sign extension creates {1111.....1}1000
                               2&#39;s complement interpretation: -8.
})

&lt;p&gt;This function returns a (possibly negative) integer.  For consistency with
@(see SIGNED-BYTE-P), @(&#39;size&#39;) must be strictly greater than 0.  In contrast,
the related function @(see logextu) carries out a sign-extension but only
returns the low @(&#39;size&#39;) bits, i.e., it always returns a natural number.&lt;/p&gt;

&lt;p&gt;We specify @(&#39;logext&#39;) in terms of the @(&#39;size&#39;) of the result instead of as
a bit position because we normally specify integer subranges by the number of
significant (including sign) bits.&lt;/p&gt;

&lt;p&gt;See also @(see bitops::bitops/fast-logext) for a logically identical
function that is optimized for better performance.&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((size-1 (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> size <span class="number">1</span>)))
    (declare (type unsigned-byte size-1))
    (logapp size-1
      i
      (if (logbitp size-1 i)
        <span class="number">-1</span>
        <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logrev1
  <span class="keyword">:parents</span> (logrev)
  <span class="keyword">:short</span> <span class="string">"Helper function for @(see logrev)."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> size))) (i integerp)
    (j integerp))
  <span class="keyword">:returns</span> (nat)
  <span class="keyword">:split-types</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (declare (type unsigned-byte size)
    (type integer i j))
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (if (<a class="sym-link system" href="../../axioms.html#def-zp" data-sym="ZP">zp</a> size)
    (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a> j) <span class="keyword">:exec</span> j)
    (logrev1 (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> size <span class="number">1</span>))
      (logcdr i)
      (logcons (logcar i) j))))</pre>
  </div>

<div class="form-block local" id="form-36" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> logrev1-type
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> j <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a> (logrev1 size i j)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable imod ifloor)))))</pre>
  </div>

<div class="form-block other" id="form-37" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logrev
  <span class="keyword">:short</span> <span class="string">"Logical reverse.  @(&#39;(logrev size i)&#39;) bit-reverses the @(&#39;size&#39;)
  low-order bits of @(&#39;i&#39;), discarding the high-order bits."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> size))) (i integerp))
  <span class="keyword">:returns</span> (nat <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a>
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logrev-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Normally we don&#39;t think of bit-reversing as a logical operation,
even though its hardware implementation is trivial: simply reverse the wires
leading from the source to the destination.&lt;/p&gt;

&lt;p&gt;@(&#39;logrev&#39;) is included as a logical operation to support the specification
of DSPs, which may provide bit-reversing in their address generators to improve
the performance of the FFT.&lt;/p&gt;

&lt;p&gt;@(&#39;logrev&#39;) entails a recursive definition of bit-reversing via the helper
function @(see logrev1).&lt;/p&gt;

&lt;p&gt;See also @(see bitops::bitops/fast-logrev) for some optimized definitions of
@(see logrev).&lt;/p&gt;"</span>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (logrev1 size i <span class="number">0</span>))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logsat
  <span class="keyword">:short</span> <span class="string">"Signed saturation.  @(&#39;(logsat size i)&#39;) coerces @(&#39;i&#39;) to a
  @(&#39;size&#39;)-bit signed integer by saturation."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (&lt; <span class="number">0</span> size)) <span class="keyword">:type</span> unsigned-byte) (i integerp))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logsat-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;If @(&#39;i&#39;) can be represented as a @(&#39;size&#39;)-bit signed integer,
then @(&#39;i&#39;) is returned unchanged.  Otherwise, @(&#39;(logsat size i)&#39;) returns
the @(&#39;size&#39;)-bit signed integer closest to @(&#39;i&#39;).  For positive i, this
will be @($2^{size-1} - 1$).  For negative @(&#39;i&#39;), this will be
@($-(2^{size-1}$).&lt;/p&gt;

&lt;p&gt;This function returns a (possibly negative) integer.  For consistency with
@(see signed-byte-p), size must be strictly greater than 0.  In contrast, the
related @(see bitops::bitops/saturate) functions always return @(&#39;size&#39;)-bit
natural numbers.&lt;/p&gt;"</span>
  <span class="keyword">:split-types</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((i (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../axioms.html#def-ifix" data-sym="IFIX">ifix</a> i) <span class="keyword">:exec</span> i)) (val (expt2 (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> size))))
      (maxval (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> unsigned-byte val))))
      (minval (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> val)))
    (declare (type unsigned-byte val maxval)
      (type integer i minval))
    (if (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i maxval)
      maxval
      (if (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> i minval)
        minval
        i))))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logextu
  <span class="keyword">:short</span> <span class="string">"Logical sign extension, unsigned version.  @(&#39;(logextu final-size
 ext-size i)&#39;) &quot;sign-extends&quot; i with @(&#39;(logext ext-size i)&#39;), then truncates
 the result to @(&#39;final-size&#39;) bits, creating an unsigned integer."</span>
  ((final-size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp final-size) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> final-size))) (ext-size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp ext-size) (&lt; <span class="number">0</span> ext-size)))
    (i integerp))
  <span class="keyword">:returns</span> (nat <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a>
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logextu-type)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (loghead final-size (logext ext-size i)))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define lognotu
  <span class="keyword">:short</span> <span class="string">"Logical negation, unsigned version.  @(&#39;(lognotu size i)&#39;) is an
 unsigned logical @(&#39;not&#39;).  It just truncates @(&#39;(lognot i)&#39;) to @(&#39;size&#39;)
 bits."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> size))) (i integerp))
  <span class="keyword">:returns</span> (nat <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a>
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> lognotu-type)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (loghead size (lognot i)))</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logsquash
  ((n <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a>) (i integerp))
  <span class="keyword">:short</span> <span class="string">"Squashes to 0 the lowest @(&#39;n&#39;) bits of @(&#39;i&#39;)."</span>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:returns</span> (val integerp <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> i (ash <span class="number">-1</span> (<a class="sym-link system" href="../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define ashu
  <span class="keyword">:short</span> <span class="string">"Arithmetic shift, unsigned version."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (&lt; <span class="number">0</span> size))) (i integerp)
    (cnt integerp))
  <span class="keyword">:returns</span> (nat <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> ashu-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(&#39;ashu&#39;) is a fixed-width version of @(see ash).  The integer
@(&#39;i&#39;) is first coerced to a @(&#39;size&#39;)-bit signed integer by sign-extension,
then shifted with @(&#39;ash&#39;), and finally truncated back to a @(&#39;size&#39;)-bit
unsigned integer.&lt;/p&gt;

&lt;p&gt;See also @(see lshu) for a logical (instead of arithmetic) shift.&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (loghead size (ash (logext size i) cnt)))</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define lshu
  <span class="keyword">:short</span> <span class="string">"Logical shift, unsigned version."</span>
  ((size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> size))) (i integerp)
    (cnt integerp))
  <span class="keyword">:returns</span> (nat <a class="sym-link system" href="../../axioms.html#def-natp" data-sym="NATP">natp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> lshu-type)
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(&#39;lshu&#39;) is a fixed-width logical shift.  It shifts @(&#39;i&#39;)
by @(&#39;cnt&#39;) bits by first coercing @(&#39;i&#39;) to an unsigned integer of @(&#39;size&#39;)
bits, performing the shift, and coercing the result to an @(&#39;size&#39;)-bit
unsigned integer.&lt;/p&gt;

&lt;p&gt;For @(&#39;cnt &gt;= 0&#39;), @(&#39;(lshu size i cnt) = (ashu size i cnt)&#39;).&lt;/p&gt;

&lt;p&gt;This is a model of a size-bit logical shift register.&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (loghead size (ash (loghead size i) cnt)))</pre>
  </div>

<div class="form-block other" id="form-44" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define logite
  <span class="keyword">:short</span> <span class="string">"Bitwise if-then-else among integers."</span>
  ((test <span class="keyword">:type</span> integer) (then <span class="keyword">:type</span> integer)
    (else <span class="keyword">:type</span> integer))
  <span class="keyword">:returns</span> (logite integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> logite-type)
  (<a class="sym-link system" href="../../axioms.html#def-logior" data-sym="LOGIOR">logior</a> (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> test then) (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> (lognot test) else)))</pre>
  </div>

<div class="form-block other" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc logops-bit-functions
  <span class="keyword">:parents</span> (logops-definitions <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>)
  <span class="keyword">:short</span> <span class="string">"Versions of the standard logical operations that operate on single bits."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;We provide versions of the non-trivial standard logical operations
that operate on single bits.&lt;/p&gt;

&lt;p&gt;One reason that it is useful to introduce these operations separately from
the standard operations is the fact that @(see lognot) applied to a @(see bitp)
object never returns a @(see bitp).&lt;/p&gt;

&lt;p&gt;All arguments to these functions must be @(see bitp), and we prove that
each returns a @(see bitp) integer, i.e., 0 or 1.  We define each function
explicitly in terms of 0 and 1 to simplify reasoning.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block local" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (set-default-parents logops-bit-functions))</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-not
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Negation for @(see bitp)s."</span>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      <span class="number">1</span>
      <span class="number">0</span>)
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i)))))</pre>
  </div>

<div class="form-block other" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-and
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Conjunction for @(see bitp)s."</span>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      <span class="number">0</span>
      (if (zbp j)
        <span class="number">0</span>
        <span class="number">1</span>))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i) (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))))</pre>
  </div>

<div class="form-block other" id="form-49" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-ior
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Inclusive or for @(see bitp)s."</span>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      (if (zbp j)
        <span class="number">0</span>
        <span class="number">1</span>)
      <span class="number">1</span>)
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logior" data-sym="LOGIOR">logior</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i) (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))))</pre>
  </div>

<div class="form-block other" id="form-50" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-xor
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Exclusive or for @(see bitp)s."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      (if (zbp j)
        <span class="number">0</span>
        <span class="number">1</span>)
      (if (zbp j)
        <span class="number">1</span>
        <span class="number">0</span>))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logxor" data-sym="LOGXOR">logxor</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i) (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))))</pre>
  </div>

<div class="form-block other" id="form-51" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-eqv
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Equivalence (a.k.a. if and only if, xnor) for @(see bitp)s."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      (if (zbp j)
        <span class="number">1</span>
        <span class="number">0</span>)
      (if (zbp j)
        <span class="number">0</span>
        <span class="number">1</span>))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logxor" data-sym="LOGXOR">logxor</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
          (<a class="sym-link system" href="../../axioms.html#def-logxor" data-sym="LOGXOR">logxor</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i) (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))
        <span class="number">1</span>))))</pre>
  </div>

<div class="form-block other" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-nand
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Negated and for @(see bitp)s."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      <span class="number">1</span>
      (if (zbp j)
        <span class="number">1</span>
        <span class="number">0</span>))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logxor" data-sym="LOGXOR">logxor</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
          (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i) (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))
        <span class="number">1</span>))))</pre>
  </div>

<div class="form-block other" id="form-53" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-nor
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Negated or for @(see bitp)s."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      (if (zbp j)
        <span class="number">1</span>
        <span class="number">0</span>)
      <span class="number">0</span>)
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logxor" data-sym="LOGXOR">logxor</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
          (<a class="sym-link system" href="../../axioms.html#def-logior" data-sym="LOGIOR">logior</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i) (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))
        <span class="number">1</span>))))</pre>
  </div>

<div class="form-block other" id="form-54" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-andc1
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"And of @(see bitp)s, complementing the first."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      (if (zbp j)
        <span class="number">0</span>
        <span class="number">1</span>)
      <span class="number">0</span>)
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logandc1" data-sym="LOGANDC1">logandc1</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i)
        (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))))</pre>
  </div>

<div class="form-block other" id="form-55" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-andc2
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"And of @(see bitp)s, complementing the second."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      <span class="number">0</span>
      (if (zbp j)
        <span class="number">1</span>
        <span class="number">0</span>))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logandc2" data-sym="LOGANDC2">logandc2</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i)
        (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))))</pre>
  </div>

<div class="form-block other" id="form-56" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-orc1
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Inclusive or of @(see bitp)s, complementing the first."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      <span class="number">1</span>
      (if (zbp j)
        <span class="number">0</span>
        <span class="number">1</span>))
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logior" data-sym="LOGIOR">logior</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def-logxor" data-sym="LOGXOR">logxor</a> <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i)))
        (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))))</pre>
  </div>

<div class="form-block other" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-orc2
  ((i <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (j <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Inclusive or of @(see bitp)s, complementing the second."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (zbp i)
      (if (zbp j)
        <span class="number">1</span>
        <span class="number">0</span>)
      <span class="number">1</span>)
    <span class="keyword">:exec</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>)
      (<a class="sym-link system" href="../../axioms.html#def-logior" data-sym="LOGIOR">logior</a> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) i)
        (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def-logxor" data-sym="LOGXOR">logxor</a> <span class="number">1</span> (<a class="sym-link system" href="../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">1</span>) j)))))))</pre>
  </div>

<div class="form-block other" id="form-58" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define b-ite
  ((test <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (then <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (else <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>))
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"If-then-else for @(see bitp)s."</span>
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (if (zbp test)
    (bfix else)
    (bfix then)))</pre>
  </div>

<div class="form-block macro" id="def-loglist_2A" data-defines="LOGLIST*" data-references="LOGCONS,QUOTE,XXXJOIN,ARGS,&REST,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="LOGLIST*">loglist*</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-loglist_2A" data-sym="LOGLIST*" title="(defmacro loglist* (&amp;rest args) (xxxjoin &#39;logcons args))">loglist*</a> (&amp;rest <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="../../axioms.html#def-xxxjoin" data-sym="XXXJOIN">xxxjoin</a> 'logcons <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>