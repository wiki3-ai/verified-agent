<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>logops-definitions - ACL2 Book</title>
  <meta property="name" content="logops-definitions">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">logops-definitions</h1>
    <div class="path"><a href="logops-definitions.lisp" class="source-link">books/ihs/logops-definitions</a></div>
  </div>
  
  <main property="text">
  <div class="includes-section">
    <h2>Included Books</h2>
    <div class="includes-list">
      <a class="include-link" href="ihs-init.html" title="ihs-init">ihs-init</a>
      <a class="include-link" href="ihs-theories.html" title="ihs-theories">ihs-theories</a>
      <a class="include-link" href="../std/util/defval.html" title="std/util/defval">defval</a>
      <a class="include-link local" href="math-lemmas.html" title="math-lemmas">math-lemmas</a>
      <a class="include-link local" href="quotient-remainder-lemmas.html" title="quotient-remainder-lemmas">quotient-remainder-lemmas</a>
      <a class="include-link" href="basic-definitions.html" title="basic-definitions">basic-definitions</a>
    </div>
  </div>

<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block include-book" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="ihs-init.html" title="Open ihs-init">"ihs-init"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="ihs-theories.html" title="Open ihs-theories">"ihs-theories"</a>)</pre>
  </div>

<div class="form-block include-book" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../std/util/defval.html" title="Open std/util/defval">"std/util/defval"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block local" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="math-lemmas.html" title="Open math-lemmas">"math-lemmas"</a>))</pre>
  </div>

<div class="form-block local" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="quotient-remainder-lemmas.html" title="Open quotient-remainder-lemmas">"quotient-remainder-lemmas"</a>))</pre>
  </div>

<div class="form-block local" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable basic-boot-strap)))</pre>
  </div>

<div class="form-block local" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable ihs-math)))</pre>
  </div>

<div class="form-block local" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable quotient-remainder-rules)))</pre>
  </div>

<div class="form-block local" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable floor mod)))</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a> begin-logops-definitions)</pre>
  </div>

<div class="form-block include-book" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">include-book</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="basic-definitions.html" title="Open basic-definitions">"basic-definitions"</a>)</pre>
  </div>

<div class="form-block local" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> x*y-&gt;-1
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
        (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> x <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> y <span class="number">1</span>)) (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> y <span class="number">1</span>))))
      (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) <span class="number">1</span>))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable x*y&gt;1-positive)
       <span class="keyword">:cases</span> ((equal y <span class="number">1</span>) (equal x <span class="number">1</span>))))))</pre>
  </div>

<div class="form-block local" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> x*y-&gt;=-1
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">1</span>)
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> y <span class="number">1</span>))
      (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> x y) <span class="number">1</span>))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable &lt;-*-left-cancel <a class="sym-link system" href="../../axioms.html#def-commutativity-of-_2A" data-sym="COMMUTATIVITY-OF-*">commutativity-of-*</a>)
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> &lt;-*-left-cancel (z y) (x <span class="number">1</span>) (y x)))))))</pre>
  </div>

<div class="form-block local" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> x-&lt;-y*z
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
        (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> y) (&lt; x y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">1</span> z))
          (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; <span class="number">0</span> y) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x y) (&lt; <span class="number">1</span> z))))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y z)) (&lt; x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> z y))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable &lt;-*-left-cancel &lt;-y-*-y-x)
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> &lt;-*-left-cancel (z y) (x <span class="number">1</span>) (y z)))))))</pre>
  </div>

<div class="form-block local" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> x-&lt;=-y*z
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> x))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> y))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-real_2Frationalp" data-sym="REAL/RATIONALP">real/rationalp</a> z))
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x y)
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> y)
        (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">1</span> z))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> y z)) (<a class="sym-link system" href="../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> z y))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable &lt;-*-left-cancel &lt;-y-*-y-x)
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> &lt;-*-left-cancel (z y) (x <span class="number">1</span>) (y z)))))))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection bitp-basics
  <span class="keyword">:parents</span> (<a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bitp-mod-2
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (integerp i) (<a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> (mod i <span class="number">2</span>)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span>) (<span class="keyword">:generalize</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (integerp i)
          (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (equal (mod i <span class="number">2</span>) <span class="number">0</span>) (equal (mod i <span class="number">2</span>) <span class="number">1</span>)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable linearize-mod)))))</pre>
  </div>

<div class="form-block local" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable <a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> <a class="sym-link system" href="../../axioms.html#def-signed-byte-p" data-sym="SIGNED-BYTE-P">signed-byte-p</a> <a class="sym-link system" href="../../axioms.html#def-integer-range-p" data-sym="INTEGER-RANGE-P">integer-range-p</a>)))</pre>
  </div>

<div class="form-block local" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>)))</pre>
  </div>

<div class="form-block local" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable bfix)))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection unsigned-byte-p-basics
  <span class="keyword">:parents</span> (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a>)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> unsigned-byte-p-forward
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> bits i)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i <span class="number">0</span>) (&lt; i (expt <span class="number">2</span> bits))))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>)
  (<a class="sym-link system" href="../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> unsigned-byte-p-unsigned-byte-p
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size i)
        (integerp size1)
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size1 size))
      (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size1 i))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable expt-is-weakly-increasing-for-base&gt;1)
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> expt-is-weakly-increasing-for-base&gt;1
          (r <span class="number">2</span>)
          (i size)
          (j size1)))))))</pre>
  </div>

<div class="form-block local" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a>)))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc unsigned-byte-p-discussion
  <span class="keyword">:parents</span> (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a>)
  <span class="keyword">:short</span> <span class="string">"Discussion on how to use unsigned-byte-p"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(csee unsigned-byte-p) (and @(see signed-byte-p) for that matter) are
  tricky enough that there is no one-size-fits-all solution that everyone
  should use to reason about them.  Depending on your problem you might try any
  of these strategies:&lt;/p&gt;

  &lt;ol&gt;

  &lt;li&gt;&lt;i&gt;Arithmetic&lt;/i&gt; -- Leave unsigned-byte-p&#39;s regular definition enabled
  and try to reason about the resulting inequalities.  This sometimes works and
  may be a good approach if you have goals involving &quot;non bit-vector
  functions&quot; like +, *, /, etc.  I usually don&#39;t use this approach but I
  haven&#39;t done a lot of proofs about true arithmetic functions.&lt;/li&gt;

  &lt;li&gt;&lt;i&gt;Induction&lt;/i&gt; -- Disable unsigned-byte-p&#39;s regular definition but
  instead enable an alternate definition, e.g., the
  centaur/bitops/ihsext-basics book has unsigned-byte-p**, which is a recursive
  version that works well for induction.  This definition is in the
  ihsext-recursive-redefs ruleset and also works well with other ** definitions
  like logand**.  This is often a good strategy when proving lemmas about
  unsigned-byte-p but is probably mainly useful when reasoning about new
  recursive functions.&lt;/li&gt;

  &lt;li&gt;&lt;i&gt;Vector&lt;/i&gt; -- Leave @(see unsigned-byte-p) disabled except to prove
  lemmas, and expect to reason about (unsigned-byte-p n x) via lemmas.  I think
  I usually prefer this strategy as it feels more reliable/less magical than
  reasoning about arithmetic inequalities.  Some useful books:

    &lt;ol&gt;

      &lt;li&gt;bitops/ihsext-basics proves the nice/obvious lemmas about
      signed/unsigned-byte-p on many bit-vector functions like logior,
      logand, etc.&lt;/li&gt;

      &lt;li&gt;bitops/signed-byte-p has lemmas about signed/unsigned-byte-p for
      some arithmetic functions (+, -, *) and also extended lemmas about
      bit-vector stuff.  It&#39;s often very handy for the kinds of guard
      obligations that arise from things like (the (unsigned-byte 32)
      x).&lt;/li&gt;

    &lt;/ol&gt;&lt;/li&gt;
  &lt;/ol&gt;

  &lt;p&gt;We have occasionally written wrapper functions like @(&#39;u32p&#39;), but, I
  think that perhaps the only reason we did this was for macros like @(see
  def-typed-record), where we needed a unary predicate to introduce a fancier
  data structure.  Once we had the typed records in place, we just enabled
  these wrappers and did all our reasoning about @(see unsigned-byte-p).
  (I don&#39;t think you&#39;d want to reason about a each various u32p, u64p, etc.,
  individually.)&lt;/p&gt;

  &lt;p&gt;In the context of FTY, I don&#39;t think you need wrappers, but if for some
  reason you do want to use them then that is probably basically fine.  Note
  here that you have some choice for your fixing function.  You can fix to 0 as
  you&#39;ve done in your examples, but you might instead prefer to fix to
  @(&#39;(loghead n x)&#39;).  Why?  When you use loghead, it preserves the lower @(&#39;N&#39;)
  bits, and this may interact much more nicely with rules about true bit-vector
  functions.  This approach is also good for GL, where loghead is supported in
  an especially good way.&lt;/p&gt;

  &lt;p&gt;That said, it should be possible to get by without wrappers; see for
  instance the definition of sizednum in centaur/fty/deftypes-tests.lisp, or
  the definition of vl-constint in centaur/vl/expr.lisp, both of which use a
  loghead-based approach to do the fixing.  (The vl-constint example has
  a :require that is an inequality instead of an unsigned-byte-p term, but I
  don&#39;t think there&#39;s any particular reason to do it this way instead of the
  other.)&lt;/p&gt;

  &lt;p&gt;In general there is good reason to expect it to sometimes be hard to work
  with unsigned-byte-p.  For instance, consider a theorem like the following,
  from @(&#39;centaur/bitops/signed-byte-p.lisp&#39;):&lt;/p&gt;

  @({
   (defthm lousy-unsigned-byte-p-of-*-mixed
     ;; Probably won&#39;t ever unify with anything.
     (implies (and (unsigned-byte-p n1 a)
                   (unsigned-byte-p n2 b))
              (unsigned-byte-p (+ n1 n2) (* a b)))
     :hints((&quot;Goal&quot; :use ((:instance upper-bound)))))
  })

  &lt;p&gt;This would be a good rule to try on goals like @(&#39;(unsigned-byte-p 10 (* a
  b))&#39;), but without some insight into @(&#39;a&#39;) and @(&#39;b&#39;) it&#39;s hard to know how
  to successfully instantiate @(&#39;N1/N2&#39;).  So you end up resorting to @(&#39;:use&#39;)
  hints, or special-case variants of this theorem (e.g., another theorem that
  says 7 bits * 3 bits --&amp;gt; 10 bits), or you do something more sophisticated
  with bind-free or similar.&lt;/p&gt;

  &lt;p&gt;If you find yourself going down this road, you might see in particular Dave
  Greve&#39;s &quot;Parameterized Congruences&quot; paper from the 2006 workshop, which is
  implemented in the coi/nary/nary.lisp book.  You could also look at Sol
  Swords&#39; book to do something similar, see @(see contextual-rewriting).&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection signed-byte-p-basics
  <span class="keyword">:parents</span> (<a class="sym-link system" href="../../axioms.html#def-signed-byte-p" data-sym="SIGNED-BYTE-P">signed-byte-p</a>)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> signed-byte-p-forward
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-signed-byte-p" data-sym="SIGNED-BYTE-P">signed-byte-p</a> bits i)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i)
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> i (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (expt <span class="number">2</span> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> bits <span class="number">1</span>))))
        (&lt; i (expt <span class="number">2</span> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> bits <span class="number">1</span>)))))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>))</pre>
  </div>

<div class="form-block local" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../axioms.html#def-signed-byte-p" data-sym="SIGNED-BYTE-P">signed-byte-p</a>)))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logbit-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call logbit-guard) is a macro form of the guards for @(see logbit)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> logbit-guard
    (pos i)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,POS))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,POS <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I)))))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logmask-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call logmask-guard) is a macro form of the guards for @(see logmask)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> logmask-guard
    (size)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,SIZE)) (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,SIZE <span class="number">0</span>)))))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection loghead-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call loghead-guard) is a macro form of the guards for @(see loghead)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> loghead-guard
    (size i)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I)))))</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logtail-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call logtail-guard) is a macro form of the guards for @(see logtail)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> logtail-guard
    (pos i)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,POS))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,POS <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I)))))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logapp-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call logapp-guard) is a macro form of the guards for @(see logapp)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> logapp-guard
    (size i j)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,J)))))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logrpl-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call logrpl-guard) is a macro form of the guards for @(see logrpl)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> logrpl-guard
    (size i j)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,J)))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logext-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call logext-guard) is a macro form of the guards for @(see logext)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> logext-guard
    (size i)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> ,SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I)))))</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logrev-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call logrev-guard) is a macro form of the guards for @(see logrev)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> logrev-guard
    (size i)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I)))))</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logextu-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call logextu-guard) is a macro form of the guards for @(see logextu)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> logextu-guard
    (final-size ext-size i)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,FINAL-SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,FINAL-SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,EXT-SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> ,EXT-SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I)))))</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection lognotu-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call lognotu-guard) is a macro form of the guards for @(see lognotu)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> lognotu-guard
    (size i)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I)))))</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection ashu-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call ashu-guard) is a macro form of the guards for @(see ashu)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> ashu-guard
    (size i cnt)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> ,SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,CNT)))))</pre>
  </div>

<div class="form-block other" id="form-36" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection lshu-guard
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"@(call lshu-guard) is a macro form of the guards for @(see lshu)."</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> lshu-guard
    (size i cnt)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,SIZE))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ,SIZE <span class="number">0</span>))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,CNT)))))</pre>
  </div>

<div class="form-block local" id="form-37" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logcar)))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logcdr-basics
  <span class="keyword">:parents</span> (logcdr)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> logcdr-&lt;-0
    (equal (&lt; (logcdr i) <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (&lt; i <span class="number">0</span>))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> justify-logcdr-induction
    (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> i <span class="number">0</span>) (&lt; (logcdr i) i))
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; i <span class="number">-1</span>) (&lt; i (logcdr i))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable logcdr)))))</pre>
  </div>

<div class="form-block local" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logcdr)))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logcons-basics
  <span class="keyword">:parents</span> (logcons)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> logcons-&lt;-0
    (equal (&lt; (logcons b i) <span class="number">0</span>) (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp i) (&lt; i <span class="number">0</span>)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfix)))))</pre>
  </div>

<div class="form-block local" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logcons)))</pre>
  </div>

<div class="form-block local" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logmaskp)))</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection loghead-basics
  <span class="keyword">:parents</span> (loghead)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> unsigned-byte-p-loghead
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size1 size)
        (integerp size)
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>)
        (integerp size1))
      (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size1 (loghead size i)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a>)
         (expt-is-weakly-increasing-for-base&gt;1))
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> expt-is-weakly-increasing-for-base&gt;1
          (r <span class="number">2</span>)
          (i size)
          (j size1))))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> loghead-upper-bound
    (&lt; (loghead size i) (expt <span class="number">2</span> size))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:linear</span> <span class="keyword">:rewrite</span>)))</pre>
  </div>

<div class="form-block macro" id="def-lloghead" data-defines="LLOGHEAD" data-references="LOGHEAD,MBE,QUASIQUOTE,X,N,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="LLOGHEAD">lloghead</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-lloghead" data-sym="LLOGHEAD" title="(defmacro lloghead (n x) `(mbe :logic (loghead ,n ,x) :exec ,x))">lloghead</a>
  (n x)
  `(<a class="sym-link system" href="../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (loghead ,N ,X) <span class="keyword">:exec</span> ,X))</pre>
  </div>

<div class="form-block local" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable loghead)))</pre>
  </div>

<div class="form-block local" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logtail)))</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logapp-basics
  <span class="keyword">:parents</span> (logapp)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> logapp-&lt;-0
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (logapp-guard size i j)
      (equal (&lt; (logapp size i j) <span class="number">0</span>) (&lt; j <span class="number">0</span>)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (loghead) (x-&lt;-y*z))
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> x-&lt;-y*z
          (x (mod i (expt <span class="number">2</span> size)))
          (y (expt <span class="number">2</span> size))
          (z (abs j))))))))</pre>
  </div>

<div class="form-block local" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logapp)))</pre>
  </div>

<div class="form-block local" id="form-49" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logrpl)))</pre>
  </div>

<div class="form-block theorem" id="def-expt-with-violated-guards" data-defines="EXPT-WITH-VIOLATED-GUARDS" data-references="ENABLE,ACL2-NUMBERP,R,EXPT,EQUAL,I,INTEGERP,NOT,IMPLIES,AND,DEFTHM" data-part-name="EXPT-WITH-VIOLATED-GUARDS" data-part-term="ACL2-NUMBERP,R,EXPT,EQUAL,I,INTEGERP,NOT,IMPLIES,AND" data-part-hints="EXPT,ENABLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPT-WITH-VIOLATED-GUARDS">expt-with-violated-guards</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button><button class="part-btn" data-part="hints">hints</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-expt-with-violated-guards" data-sym="EXPT-WITH-VIOLATED-GUARDS" title="(defthm expt-with-violated-guards
        (and (implies (not (integerp i)) (equal (expt r i) 1))
             (implies (not (acl2-numberp r)) (equal (expt r i) (expt 0 i))))
        :hints ((&quot;Goal&quot; :in-theory (enable expt))))">expt-with-violated-guards</a>
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (integerp i)) (equal (expt r i) <span class="number">1</span>))
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (acl2-numberp r))
      (equal (expt r i) (expt <span class="number">0</span> i))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable expt))))</pre>
  </div>

<div class="form-block theorem" id="def-reduce-integerp-_2B-constant" data-defines="REDUCE-INTEGERP-+-CONSTANT" data-references="FIX,J,+,IFF,INTEGERP,I,CONSTANT-SYNTAXP,SYNTAXP,AND,IMPLIES,DEFTHM" data-part-name="REDUCE-INTEGERP-+-CONSTANT" data-part-term="FIX,J,+,IFF,INTEGERP,I,CONSTANT-SYNTAXP,SYNTAXP,AND,IMPLIES" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REDUCE-INTEGERP-+-CONSTANT">reduce-integerp-+-constant</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-reduce-integerp-_2B-constant" data-sym="REDUCE-INTEGERP-+-CONSTANT" title="(defthm reduce-integerp-+-constant
        (implies (and (syntaxp (constant-syntaxp i)) (integerp i))
                 (iff (integerp (+ i j)) (integerp (fix j)))))">reduce-integerp-+-constant</a>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link external" href="ihs-init.html#def-constant-syntaxp" data-sym="CONSTANT-SYNTAXP">constant-syntaxp</a> i)) (integerp i))
    (<a class="sym-link system" href="../../axioms.html#def-iff" data-sym="IFF">iff</a> (integerp (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> i j)) (integerp (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> j)))))</pre>
  </div>

<div class="form-block theorem" id="def-how-could-this-have-been-left-out_3F_3F" data-defines="HOW-COULD-THIS-HAVE-BEEN-LEFT-OUT??" data-references="X,*,EQUAL,DEFTHM" data-part-name="HOW-COULD-THIS-HAVE-BEEN-LEFT-OUT??" data-part-term="X,*,EQUAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HOW-COULD-THIS-HAVE-BEEN-LEFT-OUT??">how-could-this-have-been-left-out??</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-how-could-this-have-been-left-out_3F_3F" data-sym="HOW-COULD-THIS-HAVE-BEEN-LEFT-OUT??" title="(defthm how-could-this-have-been-left-out?? (equal (* 0 x) 0))">how-could-this-have-been-left-out??</a>
  (equal (<a class="sym-link system" href="../../axioms.html#def-_2A" data-sym="*">*</a> <span class="number">0</span> x) <span class="number">0</span>))</pre>
  </div>

<div class="form-block theorem" id="def-this-needs-to-be-added-to-quotient-remainder-lemmas" data-defines="THIS-NEEDS-TO-BE-ADDED-TO-QUOTIENT-REMAINDER-LEMMAS" data-references="ENABLE,FIX,X,MOD,EQUAL,Y,ZEROP,IMPLIES,DEFTHM" data-part-name="THIS-NEEDS-TO-BE-ADDED-TO-QUOTIENT-REMAINDER-LEMMAS" data-part-term="FIX,X,MOD,EQUAL,Y,ZEROP,IMPLIES" data-part-hints="MOD,ENABLE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="THIS-NEEDS-TO-BE-ADDED-TO-QUOTIENT-REMAINDER-LEMMAS">this-needs-to-be-added-to-quotient-remainder-lemmas</span><span class="form-type">theorem</span></div>
    <div class="part-buttons"><button class="part-btn" data-part="term">term</button><button class="part-btn" data-part="hints">hints</button></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> <a class="sym-link local-def" href="#def-this-needs-to-be-added-to-quotient-remainder-lemmas" data-sym="THIS-NEEDS-TO-BE-ADDED-TO-QUOTIENT-REMAINDER-LEMMAS" title="(defthm this-needs-to-be-added-to-quotient-remainder-lemmas
        (implies (zerop y) (equal (mod x y) (fix x))) :hints
        ((&quot;Goal&quot; :in-theory (enable mod))))">this-needs-to-be-added-to-quotient-remainder-lemmas</a>
  (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (zerop y) (equal (mod x y) (<a class="sym-link system" href="../../axioms.html#def-fix" data-sym="FIX">fix</a> x)))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable mod))))</pre>
  </div>

<div class="form-block other" id="form-54" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logext-basics
  <span class="keyword">:parents</span> (logext)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> logext-bounds
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; <span class="number">0</span> size)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (logext size i) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (expt <span class="number">2</span> (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> size))))
        (&lt; (logext size i) (expt <span class="number">2</span> (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> size)))))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((logext size i))) (<span class="keyword">:rewrite</span>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (logapp loghead)
         (expt-is-increasing-for-base&gt;1 exponents-add))
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> expt-is-increasing-for-base&gt;1
          (r <span class="number">2</span>)
          (i (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> size))
          (j size))))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> signed-byte-p-logext
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size1 size)
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> size <span class="number">0</span>)
        (integerp size1)
        (integerp size))
      (<a class="sym-link system" href="../../axioms.html#def-signed-byte-p" data-sym="SIGNED-BYTE-P">signed-byte-p</a> size1 (logext size i)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../axioms.html#def-signed-byte-p" data-sym="SIGNED-BYTE-P">signed-byte-p</a> logapp loghead)
         (expt-is-weakly-increasing-for-base&gt;1 exponents-add))
       <span class="keyword">:do-not</span> '(eliminate-destructors)
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> expt-is-weakly-increasing-for-base&gt;1
          (r <span class="number">2</span>)
          (i (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> size))
          (j (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> size1))))))))</pre>
  </div>

<div class="form-block local" id="form-55" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logext)))</pre>
  </div>

<div class="form-block other" id="form-56" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logrev-basics
  <span class="keyword">:parents</span> (logrev)
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> crock-induction
      (size size1 i j)
      (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-zp" data-sym="ZP">zp</a> size) (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> size1 i j))
        (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (crock-induction (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> size)
            (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> size1)
            (logcdr i)
            (logcons (logcar i) j))))))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> unsigned-byte-p-logrev1
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size1 j) (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>))
        (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> size size1) (logrev1 size i j)))
      <span class="keyword">:rule-classes</span> nil
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (expt logcar logcons <a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a>) (exponents-add))
         <span class="keyword">:induct</span> (crock-induction size size1 i j)))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> unsigned-byte-p-logrev
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size1 size)
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>)
        (integerp size)
        (integerp size1))
      (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size1 (logrev size i)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> unsigned-byte-p-logrev1
          (size size)
          (size1 <span class="number">0</span>)
          (i i)
          (j <span class="number">0</span>)) (<span class="keyword">:instance</span> unsigned-byte-p-unsigned-byte-p
           (size size)
           (size1 size1)
           (i (logrev size i))))))))</pre>
  </div>

<div class="form-block local" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logrev)))</pre>
  </div>

<div class="form-block other" id="form-58" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logsat-basics
  <span class="keyword">:parents</span> (logsat)
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable exponents-add-unrestricted)))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> logsat-bounds
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; <span class="number">0</span> size)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (logsat size i) (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> (expt <span class="number">2</span> size)))
        (&lt; (logsat size i) (expt <span class="number">2</span> size))))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((logsat size i))) (<span class="keyword">:rewrite</span>)))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable exponents-add-unrestricted)))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> signed-byte-p-logsat
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size1 size)
        (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> size <span class="number">0</span>)
        (integerp size1)
        (integerp size))
      (<a class="sym-link system" href="../../axioms.html#def-signed-byte-p" data-sym="SIGNED-BYTE-P">signed-byte-p</a> size1 (logsat size i)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../axioms.html#def-signed-byte-p" data-sym="SIGNED-BYTE-P">signed-byte-p</a>)
         (expt-is-weakly-increasing-for-base&gt;1 exponents-add))
       <span class="keyword">:do-not</span> '(eliminate-destructors)
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> expt-is-weakly-increasing-for-base&gt;1
          (r <span class="number">2</span>)
          (i (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> size))
          (j (<a class="sym-link system" href="../../axioms.html#def-1-" data-sym="1-">1-</a> size1))))))))</pre>
  </div>

<div class="form-block local" id="form-59" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logsat)))</pre>
  </div>

<div class="form-block other" id="form-60" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logextu-basics
  <span class="keyword">:parents</span> (logextu)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> unsigned-byte-p-logextu
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size1 final-size)
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> final-size <span class="number">0</span>)
        (integerp final-size)
        (integerp size1))
      (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size1 (logextu final-size ext-size i)))))</pre>
  </div>

<div class="form-block local" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable logextu)))</pre>
  </div>

<div class="form-block other" id="form-62" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection lognotu-basics
  <span class="keyword">:parents</span> (lognotu)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> unsigned-byte-p-lognotu
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size1 size)
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>)
        (integerp size)
        (integerp size1))
      (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size1 (lognotu size i)))))</pre>
  </div>

<div class="form-block local" id="form-63" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable lognotu)))</pre>
  </div>

<div class="form-block other" id="form-64" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection ashu-basics
  <span class="keyword">:parents</span> (ashu)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> unsigned-byte-p-ashu
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size1 size)
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>)
        (integerp size)
        (integerp size1))
      (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size1 (ashu size i cnt)))))</pre>
  </div>

<div class="form-block local" id="form-65" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable ashu)))</pre>
  </div>

<div class="form-block other" id="form-66" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection lshu-basics
  <span class="keyword">:parents</span> (lshu)
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> unsigned-byte-p-lshu
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size1 size)
        (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>)
        (integerp size)
        (integerp size1))
      (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size1 (lshu size i cnt)))))</pre>
  </div>

<div class="form-block local" id="form-67" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable lshu)))</pre>
  </div>

<div class="form-block other" id="form-68" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc logops-byte-functions
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"A portable implementation and extension of Common Lisp byte
  functions."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The proposed Common Lisp standard [&lt;a
href=&#39;http://en.wikipedia.org/wiki/X3J13&#39;&gt;X3J13&lt;/a&gt; Draft 14.10] defines a
number of functions that operate on subfields of integers.  These subfields are
specified by @(&#39;(BYTE size position)&#39;), which &quot;indicates a byte of width size
and whose bits have weights @($2^{position+size-1}$) through @($2^{pos}$), and
whose representation is implementation dependent&quot;.  Unfortunately, the
standard does not specify what BYTE returns, only that whatever is returned is
understood by the byte manipulation functions LDB, DPB, etc.&lt;/p&gt;

&lt;p&gt;This lack of complete specification makes it impossible for ACL2 to specify
the byte manipulation functions of Common Lisp in a portable way.  For example
AKCL uses @(&#39;(cons size position)&#39;) as a byte specifier, whereas another
implementation might use a special data structure to represent @(&#39;(byte size
position)&#39;).  Since any theorem about the ACL2 built-ins is meant to be a
theorem for all Common Lisp implementations, ACL2 cannot define BYTE.&lt;/p&gt;

&lt;p&gt;Therefore, we have provided a portable implementation of the byte operations
specified by the draft standard.  This behavior of this implementation should
be consistent with every Common Lisp that provides the standard byte
operations.  Our byte specifier @(&#39;(bsp size pos)&#39;) is analogous to CLTL&#39;s
@(&#39;(byte size pos)&#39;), where size and pos are nonnegative integers.  Note that
the standard indicates that reading a byte of size 0 returns 0, and writing a
byte of size 0 leaves the destination unchanged.&lt;/p&gt;

&lt;p&gt;This table indicates the correspondance between the Common Lisp byte
operations and our portable implementation:&lt;/p&gt;

@({
  Common Lisp                               This Implementation
  ------ ----                               ---- --------------

  (BYTE size position)                      (BSP size position)
  (BYTE-SIZE bytespec)                      (BSP-SIZE bsp)
  (BYTE-POSITION bytespec)                  (BSP-POSITION bsp)
  (LDB bytespec integer)                    (RDB bsp integer)
  (DPB newbyte bytespec integer)            (WRB newbyte bsp integer)
  (LDB-TEST bytespec integer)               (RDB-TEST bsp integer)
  (MASK-FIELD bytespec integer)             (RDB-FIELD bsp integer)
  (DEPOSIT-FIELD newbyte bytespec integer)  (WRB-FIELD newbyte bsp integer)
})

&lt;p&gt;For more information, see the documentation for the functions listed above.
If you are concerned about the efficiency of this implementation, see the file
@(&#39;ihs/logops-efficiency-hack.lsp&#39;) for some notes.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block other" id="form-69" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection bsp
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(call bsp) returns a byte-specifier."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This specifier designates a byte whose width is size and whose bits have
weights 2^(pos) through 2^(pos+size-1). Both size and pos must be
nonnegative integers.&lt;/p&gt;

&lt;p&gt;BSP is mnemonic for Byte SPecifier or Byte Size and Position, and is
analogous to Common Lisp&#39;s @(&#39;(byte size position)&#39;).&lt;/p&gt;

&lt;p&gt;BSP is implemented as a macro for simplicity and convenience.  One should
always use BSP in preference to CONS, however, to ensure compatibility with
future releases.&lt;/p&gt;

@(def bsp)"</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> bsp (size pos) `(cons ,SIZE ,POS)))</pre>
  </div>

<div class="form-block other" id="form-70" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bspp
  (bsp)
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(call bspp) recognizes objects produced by @(see bsp)."</span>
  <span class="keyword">:returns</span> bool
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (consp bsp)
    (integerp (car bsp))
    (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (car bsp) <span class="number">0</span>)
    (integerp (cdr bsp))
    (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (cdr bsp) <span class="number">0</span>))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bspp-bsp
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>) (integerp pos) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> pos <span class="number">0</span>))
      (bspp (bsp size pos)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bspp)))))</pre>
  </div>

<div class="form-block other" id="form-71" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bsp-size
  ((bsp bspp))
  <span class="keyword">:returns</span> (size (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp size) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>))
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:hyp</span> (bspp bsp)
    <span class="keyword">:name</span> bsp-size-type)
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(&#39;(bsp-size (bsp size pos)) = size&#39;)"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is analogous to Common Lisp&#39;s @(&#39;(byte-size bytespec)&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (car bsp))</pre>
  </div>

<div class="form-block other" id="form-72" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bsp-position
  ((bsp bspp))
  <span class="keyword">:returns</span> (pos (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp pos) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> pos <span class="number">0</span>))
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:hyp</span> (bspp bsp)
    <span class="keyword">:name</span> bsp-position-type)
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(&#39;(bsp-position (bsp size pos)) = pos&#39;)"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is analogous to Common Lisp&#39;s @(&#39;(byte-position bytespec)&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (cdr bsp))</pre>
  </div>

<div class="form-block other" id="form-73" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define rdb
  ((bsp bspp) (i integerp))
  <span class="keyword">:returns</span> (nat (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (integerp nat) (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> nat <span class="number">0</span>))
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> rdb-type)
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(call rdb) returns the byte of @(&#39;i&#39;) specified by @(&#39;bsp&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is analogous to Common Lisp&#39;s @(&#39;(ldb bytespec integer)&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (loghead (bsp-size bsp) (logtail (bsp-position bsp) i))
  ///
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> unsigned-byte-p-rdb
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size (bsp-size bsp))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> size <span class="number">0</span>))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp size))
        (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (bspp bsp)))
      (<a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> size (rdb bsp i))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> rdb-upper-bound
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (bspp bsp))
      (&lt; (rdb bsp i) (expt <span class="number">2</span> (bsp-size bsp))))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:linear</span> <span class="keyword">:rewrite</span>))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bitp-rdb-bsp-1
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (bsp-size bsp) <span class="number">1</span>) (<a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> (rdb bsp i)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a> loghead)))))</pre>
  </div>

<div class="form-block other" id="form-74" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wrb
  ((i integerp) (bsp bspp) (j integerp))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> wrb-type)
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(call wrb) writes the @(&#39;(bsp-size bsp)&#39;) low-order bits of @(&#39;i&#39;)
into the byte of @(&#39;j&#39;) specified by @(&#39;bsp&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is analogous to Common Lisp&#39;s @(&#39;(dpb newbyte bytespec
integer)&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (logapp (bsp-position bsp)
    (loghead (bsp-position bsp) j)
    (logapp (bsp-size bsp)
      i
      (logtail (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> (bsp-size bsp) (bsp-position bsp)) j))))</pre>
  </div>

<div class="form-block other" id="form-75" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define rdb-test
  ((bsp bspp) (i integerp))
  <span class="keyword">:returns</span> bool
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(call rdb-test) is true iff the field of @(&#39;i&#39;) specified by
  @(&#39;bsp&#39;) is nonzero."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is analogous to Common Lisp&#39;s @(&#39;(ldb-test bytespec
  integer)&#39;).&lt;/p&gt;"</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (rdb bsp i) <span class="number">0</span>)))</pre>
  </div>

<div class="form-block other" id="form-76" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define rdb-field
  ((bsp bspp) (i integerp))
  <span class="keyword">:returns</span> nat
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(call rdb-field) is analogous to Common Lisp&#39;s @(&#39;(mask-field bytespec integer)&#39;)."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../axioms.html#def-logand" data-sym="LOGAND">logand</a> i (wrb <span class="number">-1</span> bsp <span class="number">0</span>)))</pre>
  </div>

<div class="form-block other" id="form-77" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define wrb-field
  ((i integerp) (bsp bspp) (j integerp))
  <span class="keyword">:returns</span> (int integerp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span> <span class="keyword">:name</span> wrb-field-type)
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(call wrb-field) is analogous to Common Lisp&#39;s @(&#39;(deposit-field
  newbyte bytespec integer)&#39;)."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>
  (wrb (rdb bsp i) bsp j))</pre>
  </div>

<div class="form-block other" id="form-78" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection rdb-guard
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(call rdb-guard) is a macro form of the guards for @(see rdb), @(see
  rdb-test), and @(see rdb-field)."</span>
  <span class="keyword">:long</span> <span class="string">"@(def rdb-guard)"</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> rdb-guard
    (bsp i)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (bspp ,BSP)) (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I)))))</pre>
  </div>

<div class="form-block other" id="form-79" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection wrb-guard
  <span class="keyword">:parents</span> (logops-byte-functions)
  <span class="keyword">:short</span> <span class="string">"@(call wrb-guard) is a macro form of the guards for @(see wrb) and @(see wrb-field)."</span>
  <span class="keyword">:long</span> <span class="string">"@(def wrb-guard)"</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> wrb-guard
    (i bsp j)
    `(<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,I))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (bspp ,BSP))
      (<a class="sym-link system" href="../../axioms.html#def-force" data-sym="FORCE">force</a> (integerp ,J)))))</pre>
  </div>

<div class="form-block local" id="form-80" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable bspp)))</pre>
  </div>

<div class="form-block local" id="form-81" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable bsp-size)))</pre>
  </div>

<div class="form-block local" id="form-82" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable bsp-position)))</pre>
  </div>

<div class="form-block local" id="form-83" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable rdb)))</pre>
  </div>

<div class="form-block local" id="form-84" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable wrb)))</pre>
  </div>

<div class="form-block local" id="form-85" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable rdb-test)))</pre>
  </div>

<div class="form-block local" id="form-86" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable rdb-field)))</pre>
  </div>

<div class="form-block local" id="form-87" typeof="Code">
    <div class="form-header"><span class="form-type">local</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable wrb-field)))</pre>
  </div>

<div class="form-block other" id="form-88" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link external" href="../std/util/defval.html#def-defval" data-sym="DEFVAL">defval</a> *logops-functions*
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"A list of all functions considered to be part of the theory of logical
          operations on numbers."</span>
  '(<a class="sym-link system" href="../../axioms.html#def-binary-logior" data-sym="BINARY-LOGIOR">binary-logior</a> <a class="sym-link system" href="../../axioms.html#def-binary-logxor" data-sym="BINARY-LOGXOR">binary-logxor</a>
    <a class="sym-link system" href="../../axioms.html#def-binary-logand" data-sym="BINARY-LOGAND">binary-logand</a>
    <a class="sym-link system" href="../../axioms.html#def-binary-logeqv" data-sym="BINARY-LOGEQV">binary-logeqv</a>
    <a class="sym-link system" href="../../axioms.html#def-lognand" data-sym="LOGNAND">lognand</a>
    <a class="sym-link system" href="../../axioms.html#def-lognor" data-sym="LOGNOR">lognor</a>
    <a class="sym-link system" href="../../axioms.html#def-logandc1" data-sym="LOGANDC1">logandc1</a>
    <a class="sym-link system" href="../../axioms.html#def-logandc2" data-sym="LOGANDC2">logandc2</a>
    <a class="sym-link system" href="../../axioms.html#def-logorc1" data-sym="LOGORC1">logorc1</a>
    <a class="sym-link system" href="../../axioms.html#def-logorc2" data-sym="LOGORC2">logorc2</a>
    lognot
    <a class="sym-link system" href="../../axioms.html#def-logtest" data-sym="LOGTEST">logtest</a>
    logbitp
    ash
    logcount
    <a class="sym-link system" href="../../axioms.html#def-integer-length" data-sym="INTEGER-LENGTH">integer-length</a>
    <a class="sym-link system" href="../../axioms.html#def-bitp" data-sym="BITP">bitp</a>
    <a class="sym-link system" href="../../axioms.html#def-signed-byte-p" data-sym="SIGNED-BYTE-P">signed-byte-p</a>
    <a class="sym-link system" href="../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a>
    logcar$inline
    logcdr$inline
    logcons$inline
    logbit$inline
    logmask$inline
    logmaskp
    loghead$inline
    logtail$inline
    logapp
    logrpl
    logext
    logrev1
    logrev$inline
    logsat
    lognotu$inline
    logextu$inline
    ashu
    lshu
    bspp
    bsp-size
    bsp-position
    rdb
    wrb
    rdb-test
    rdb-field
    wrb-field
    b-not$inline
    b-and$inline
    b-ior$inline
    b-xor$inline
    b-eqv$inline
    b-nand$inline
    b-nor$inline
    b-andc1$inline
    b-andc2$inline
    b-orc1$inline
    b-orc2$inline))</pre>
  </div>

<div class="form-block other" id="form-89" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logops-functions
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"A theory consisting of all function names of functions considered to
          be logical operations on numbers."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;If you are using the book @(&#39;logops-lemmas&#39;), you will need to
  DISABLE this theory in order to use the lemmas contained therein, as most of
  the logical operations on numbers are non-recursive.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> logops-functions *logops-functions*))</pre>
  </div>

<div class="form-block other" id="form-90" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection logops-definitions-theory
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"The &quot;minimal&quot; theory for the book &quot;logops-definitions&quot;."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This theory contains the DEFUN-TYPE/EXEC-THEORY (which see) of all
functions considered to be logical operations on numbers, and all
lemmas (predominately `type lemmas&#39;) proved in this book.  All functions in the
list *LOGOPS-FUNCTIONS* are DISABLEd.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> logops-definitions-theory
    (union-theories (set-difference-theories (set-difference-theories (universal-theory <span class="keyword">:here</span>)
          (universal-theory 'begin-logops-definitions))
        *logops-functions*)
      (defun-type/exec-theory *logops-functions*))))</pre>
  </div>

<div class="form-block other" id="form-91" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection <a class="sym-link local-def" href="#def-defbytetype" data-sym="DEFBYTETYPE" title="(defmacro defbytetype (name size s/u &amp;key saturating-coercion doc)
  (declare
   (xargs :guard
    (and (symbolp name) (or (eq s/u :signed) (eq s/u :unsigned))
         (implies saturating-coercion
...">defbytetype</a>
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"A macro for defining integer subrange types."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The &quot;byte types&quot; defined by DEFBYTETYPE correspond to the Common
Lisp concept of a &quot;byte&quot;, that is, an integer with a fixed number of bits.
We extend the Common Lisp concept to allow signed bytes.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

@({
    (DEFBYTETYPE WORD 32 :SIGNED)
})

&lt;p&gt;Defines a new integer type of 32-bit signed integers, recognized by
@(&#39;(WORD-P i)&#39;).&lt;/p&gt;

&lt;p&gt;General Form:&lt;/p&gt;

@({
   (DEFBYTETYPE name size s/u &amp;key saturating-coercion)
})

&lt;p&gt;The argument name should be a symbol, size should be a constant
expression (suitable for DEFCONST) for a positive integer, s/u is
either :SIGNED or :UNSIGNED, saturating-coercion should be a symbol (default
NIL).&lt;/p&gt;

&lt;p&gt;Each data type defined by DEFBYTETYPE produces a number of events:&lt;/p&gt;

&lt;ul&gt;

&lt;li&gt;A constant @(&#39;*&lt;name&gt;-MAX*&#39;), set to the maximum value of the type.&lt;/li&gt;

&lt;li&gt;A constant @(&#39;*&lt;name&gt;-MIN*&#39;), set to the minimum value of the type.&lt;/li&gt;

&lt;li&gt;A predicate, @(&#39;(&lt;pred&gt; x)&#39;), that recognizes either @(&#39;(UNSIGNED-BYTE-P
size x)&#39;) or @(&#39;(SIGNED-BYTE-P size x)&#39;), depending on whether s/u
was :UNSIGNED or :SIGNED respectively. This predicate is DISABLED.  The name of
the predicate will be @(&#39;&lt;name&gt;-p&#39;).&lt;/li&gt;

&lt;li&gt;A coercion function, @(&#39;(&lt;name&gt; i)&#39;), that coerces any object @(&#39;i&#39;) to the
correct type by LOGHEAD and LOGEXT for unsigned and signed integers
respectively.  This function is DISABLED.&lt;/li&gt;

&lt;li&gt;A lemma showing that the coercion function actually does the correct
coercion.&lt;/li&gt;

&lt;li&gt;A lemma that reduces calls of the coercion function when its argument
satisfies the predicate.&lt;/li&gt;

&lt;li&gt;A forward chaining lemma from the predicate to the appropriate type
information.&lt;/li&gt;

&lt;li&gt;If :SATURATING-COERCION is specified, the value of this keyword argument
should be a symbol.  A function of this name will be defined to provide a
saturating coercion.  `Saturation&#39; in this context means that values outside of
the legal range for the type are coerced to the type by setting them to the
nearest legal value, which will be either the minimum or maximum value of the
type. This function will be DISABLEd, and a lemma will be generated that proves
that this function returns the correct type.  Note that
the :SATURATING-COERCION option is only valid for :SIGNED types.&lt;/li&gt;

&lt;li&gt;A theory named @(&#39;&lt;name&gt;&#39;)-THEORY that includes the lemmas and the
DEFUN-TYPE/EXEC-THEORY of the functions.&lt;/li&gt;

&lt;/ul&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defbytetype" data-defines="DEFBYTETYPE" data-references="DEFUN-TYPE/EXEC-THEORY,UNION-THEORIES,DEFTHEORY,DISABLE,EQUAL,DEFTHM,INTEGERP,I,T,X,DEFUN,DEFCONST,LOGEXT-IDENTITY,LOGHEAD-IDENTITY,LOGOPS-DEFINITIONS-THEORY,ENABLE,BASIC-BOOT-STRAP,QUOTE,IN-THEORY,LOCAL,ENCAPSULATE,QUASIQUOTE,THEORY,SAT-LEMMA,FORWARD-LEMMA,COERCION-LEMMA,PREDICATE-LEMMA,PREDICATE,MIN-CONSTANT,PACK-INTERN,MAX-CONSTANT,LET*,STRINGP,IMPLIES,EQ,OR,SYMBOLP,AND,XARGS,DECLARE,DOC,SATURATING-COERCION,&KEY,S/U,SIZE,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFBYTETYPE">defbytetype</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defbytetype" data-sym="DEFBYTETYPE" title="(defmacro defbytetype (name size s/u &amp;key saturating-coercion doc)
  (declare
   (xargs :guard
    (and (symbolp name) (or (eq s/u :signed) (eq s/u :unsigned))
         (implies saturating-coercion
...">defbytetype</a>
  (name size s/u &amp;key saturating-coercion <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
        (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> s/u <span class="keyword">:signed</span>) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> s/u <span class="keyword">:unsigned</span>))
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> saturating-coercion
          (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (symbolp saturating-coercion) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> s/u <span class="keyword">:signed</span>)))
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a> (stringp <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>)))))
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((max-constant (pack-intern name <span class="string">"*"</span> name <span class="string">"-MAX*"</span>)) (min-constant (pack-intern name <span class="string">"*"</span> name <span class="string">"-MIN*"</span>))
      (predicate (pack-intern name name <span class="string">"-P"</span>))
      (predicate-lemma (pack-intern name predicate <span class="string">"-"</span> name))
      (coercion-lemma (pack-intern name <span class="string">"REDUCE-"</span> name))
      (forward-lemma (pack-intern predicate predicate <span class="string">"-FORWARD"</span>))
      (sat-lemma (pack-intern name predicate <span class="string">"-"</span> saturating-coercion))
      (theory (pack-intern name name <span class="string">"-THEORY"</span>)))
    `(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
      (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (theory 'basic-boot-strap)))
      (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable logops-definitions-theory)))
      (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable loghead-identity logext-identity)))
      (<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> ,MAX-CONSTANT
        ,(CASE S/U
   (:SIGNED `(- (EXPT2 (- ,SIZE 1)) 1))
   (:UNSIGNED `(- (EXPT2 ,SIZE) 1))))
      (<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> ,MIN-CONSTANT
        ,(CASE S/U (:SIGNED `(- (EXPT2 (- ,SIZE 1)))) (:UNSIGNED 0)))
      (<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,PREDICATE
        (x)
        (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>))
        ,(CASE S/U
   (:SIGNED `(SIGNED-BYTE-P ,SIZE X))
   (:UNSIGNED `(UNSIGNED-BYTE-P ,SIZE X))))
      (<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,NAME
        (i)
        ,@(WHEN$CL DOC (LIST DOC))
        (declare (xargs <span class="keyword">:guard</span> (integerp i)))
        ,(CASE S/U (:SIGNED `(LOGEXT ,SIZE I)) (:UNSIGNED `(LOGHEAD ,SIZE I))))
      (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,PREDICATE-LEMMA (,PREDICATE (,NAME i)))
      (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,COERCION-LEMMA
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,PREDICATE i) (equal (,NAME i) i)))
      (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,FORWARD-LEMMA
        (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,PREDICATE x)
          ,(CASE S/U (:SIGNED `(INTEGERP X)) (:UNSIGNED `(AND (INTEGERP X) (&gt;= X 0)))))
        <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>)
      ,@(WHEN$CL SATURATING-COERCION
   (LIST
    `(DEFUN ,SATURATING-COERCION (I)
       (DECLARE (XARGS :GUARD (INTEGERP I)))
       (LOGSAT ,SIZE I))
    `(DEFTHM ,SAT-LEMMA (,PREDICATE (,SATURATING-COERCION I)))))
      (<a class="sym-link system" href="../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable ,PREDICATE
          ,NAME
          ,@(WHEN$CL SATURATING-COERCION (LIST SATURATING-COERCION))))
      (<a class="sym-link system" href="../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> ,THEORY
        (union-theories (defun-type/exec-theory '(,PREDICATE ,NAME
              ,@(WHEN$CL SATURATING-COERCION (LIST SATURATING-COERCION))))
          '(,PREDICATE-LEMMA ,COERCION-LEMMA
            ,FORWARD-LEMMA
            ,@(WHEN$CL SATURATING-COERCION (LIST SAT-LEMMA))))))))</pre>
  </div>

<div class="form-block function" id="def-defword-tuple-p" data-defines="DEFWORD-TUPLE-P" data-references="DEFWORD,QUOTE,HARD,ER,STRINGP,FOURTH,IMPLIES,>=,THIRD,>,SECOND,INTEGERP,FIRST,SYMBOLP,LENGTH,EQUAL,TRUE-LISTP,AND,OR,TUPLE,DEFUN" data-used-by="DEFWORD-TUPLE-P-LISTP" data-part-name="DEFWORD-TUPLE-P" data-part-args="TUPLE" data-part-body="DEFWORD,QUOTE,HARD,ER,STRINGP,FOURTH,IMPLIES,>=,THIRD,>,SECOND,INTEGERP,FIRST,SYMBOLP,LENGTH,EQUAL,TUPLE,TRUE-LISTP,AND,OR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-TUPLE-P">defword-tuple-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-tuple-p" data-sym="DEFWORD-TUPLE-P" title="(defun defword-tuple-p (tuple)
  (or
   (and (true-listp tuple)
        (or (equal (length tuple) 3) (equal (length tuple) 4))
        (symbolp (first tuple)) (integerp (second tuple)) (&gt; (second tuple) 0)
...">defword-tuple-p</a>
  (tuple)
  (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> tuple)
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (equal (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> tuple) <span class="number">3</span>) (equal (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> tuple) <span class="number">4</span>))
      (symbolp (<a class="sym-link system" href="../../axioms.html#def-first" data-sym="FIRST">first</a> tuple))
      (integerp (<a class="sym-link system" href="../../axioms.html#def-second" data-sym="SECOND">second</a> tuple))
      (<a class="sym-link system" href="../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../axioms.html#def-second" data-sym="SECOND">second</a> tuple) <span class="number">0</span>)
      (integerp (<a class="sym-link system" href="../../axioms.html#def-third" data-sym="THIRD">third</a> tuple))
      (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (<a class="sym-link system" href="../../axioms.html#def-third" data-sym="THIRD">third</a> tuple) <span class="number">0</span>)
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-fourth" data-sym="FOURTH">fourth</a> tuple) (stringp (<a class="sym-link system" href="../../axioms.html#def-fourth" data-sym="FOURTH">fourth</a> tuple))))
    (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
      '<a class="sym-link local-def" href="#def-defword" data-sym="DEFWORD" title="(defmacro defword
          (name struct &amp;key conc-name set-conc-name keyword-updater doc)
  (cond
   ((not
     (defword-guards name struct conc-name set-conc-name keyword-updater doc)))
...">defword</a>
      <span class="string">"A field designator for DEFWORD must be a list, the first ~
             element of which is a symbol, the second a positive integer, ~
             and the third a non-negative integer.  If a fouth element is ~
             provided it must be a string.  This object violates these ~
             constraints: ~p0"</span>
      tuple)))</pre>
  </div>

<div class="form-block function" id="def-defword-tuple-p-listp" data-defines="DEFWORD-TUPLE-P-LISTP" data-references="CDR,CAR,DEFWORD-TUPLE-P,AND,T,NULL,COND,STRUCT,DEFUN" data-used-by="DEFWORD-STRUCT-P" data-part-name="DEFWORD-TUPLE-P-LISTP" data-part-args="STRUCT" data-part-body="CDR,DEFWORD-TUPLE-P-LISTP,CAR,DEFWORD-TUPLE-P,AND,T,STRUCT,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-TUPLE-P-LISTP">defword-tuple-p-listp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-tuple-p-listp" data-sym="DEFWORD-TUPLE-P-LISTP" title="(defun defword-tuple-p-listp (struct)
  (cond ((null struct) t)
        (t
         (and (defword-tuple-p (car struct))
              (defword-tuple-p-listp (cdr struct))))))">defword-tuple-p-listp</a>
  (struct)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-null" data-sym="NULL">null</a> struct) <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-defword-tuple-p" data-sym="DEFWORD-TUPLE-P" title="(defun defword-tuple-p (tuple)
  (or
   (and (true-listp tuple)
        (or (equal (length tuple) 3) (equal (length tuple) 4))
        (symbolp (first tuple)) (integerp (second tuple)) (&gt; (second tuple) 0)
...">defword-tuple-p</a> (car struct))
        (<a class="sym-link local-def" href="#def-defword-tuple-p-listp" data-sym="DEFWORD-TUPLE-P-LISTP" title="(defun defword-tuple-p-listp (struct)
  (cond ((null struct) t)
        (t
         (and (defword-tuple-p (car struct))
              (defword-tuple-p-listp (cdr struct))))))">defword-tuple-p-listp</a> (cdr struct))))))</pre>
  </div>

<div class="form-block function" id="def-defword-struct-p" data-defines="DEFWORD-STRUCT-P" data-references="DEFWORD,QUOTE,HARD,ER,T,DEFWORD-TUPLE-P-LISTP,TRUE-LISTP,COND,STRUCT,DEFUN" data-used-by="DEFWORD-GUARDS" data-part-name="DEFWORD-STRUCT-P" data-part-args="STRUCT" data-part-body="DEFWORD,QUOTE,HARD,ER,T,DEFWORD-TUPLE-P-LISTP,STRUCT,TRUE-LISTP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-STRUCT-P">defword-struct-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-struct-p" data-sym="DEFWORD-STRUCT-P" title="(defun defword-struct-p (struct)
  (cond ((true-listp struct) (defword-tuple-p-listp struct))
        (t
         (er hard &#39;defword
             &quot;The second argument of DEFWORD must be a true list. ~
...">defword-struct-p</a>
  (struct)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> struct) (<a class="sym-link local-def" href="#def-defword-tuple-p-listp" data-sym="DEFWORD-TUPLE-P-LISTP" title="(defun defword-tuple-p-listp (struct)
  (cond ((null struct) t)
        (t
         (and (defword-tuple-p (car struct))
              (defword-tuple-p-listp (cdr struct))))))">defword-tuple-p-listp</a> struct))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-defword" data-sym="DEFWORD" title="(defmacro defword
          (name struct &amp;key conc-name set-conc-name keyword-updater doc)
  (cond
   ((not
     (defword-guards name struct conc-name set-conc-name keyword-updater doc)))
...">defword</a>
        <span class="string">"The second argument of DEFWORD must be a true list. ~
           This object is not a true list: ~p0"</span>
        struct))))</pre>
  </div>

<div class="form-block function" id="def-defword-guards" data-defines="DEFWORD-GUARDS" data-references="STRINGP,IMPLIES,DEFWORD-STRUCT-P,DEFWORD,QUOTE,HARD,ER,SYMBOLP,OR,AND,DOC,KEYWORD-UPDATER,SET-CONC-NAME,CONC-NAME,STRUCT,NAME,DEFUN" data-used-by="DEFWORD" data-part-name="DEFWORD-GUARDS" data-part-args="DOC,KEYWORD-UPDATER,SET-CONC-NAME,CONC-NAME,STRUCT,NAME" data-part-body="STRINGP,DOC,IMPLIES,KEYWORD-UPDATER,SET-CONC-NAME,CONC-NAME,STRUCT,DEFWORD-STRUCT-P,DEFWORD,QUOTE,HARD,ER,NAME,SYMBOLP,OR,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-GUARDS">defword-guards</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-guards" data-sym="DEFWORD-GUARDS" title="(defun defword-guards (name struct conc-name set-conc-name keyword-updater doc)
  (and
   (or (symbolp name)
       (er hard &#39;defword
           &quot;The name must be a symbol.  This is not a symbol: ~p0&quot; name))
...">defword-guards</a>
  (name struct conc-name set-conc-name keyword-updater <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>)
  (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (symbolp name)
      (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-defword" data-sym="DEFWORD" title="(defmacro defword
          (name struct &amp;key conc-name set-conc-name keyword-updater doc)
  (cond
   ((not
     (defword-guards name struct conc-name set-conc-name keyword-updater doc)))
...">defword</a>
        <span class="string">"The name must be a symbol.  This is not a symbol: ~p0"</span>
        name))
    (<a class="sym-link local-def" href="#def-defword-struct-p" data-sym="DEFWORD-STRUCT-P" title="(defun defword-struct-p (struct)
  (cond ((true-listp struct) (defword-tuple-p-listp struct))
        (t
         (er hard &#39;defword
             &quot;The second argument of DEFWORD must be a true list. ~
...">defword-struct-p</a> struct)
    (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (symbolp conc-name)
      (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-defword" data-sym="DEFWORD" title="(defmacro defword
          (name struct &amp;key conc-name set-conc-name keyword-updater doc)
  (cond
   ((not
     (defword-guards name struct conc-name set-conc-name keyword-updater doc)))
...">defword</a>
        <span class="string">"The :CONC-NAME must be a symbol. This is not a symbol: ~
            ~p0"</span>
        conc-name))
    (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (symbolp set-conc-name)
      (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-defword" data-sym="DEFWORD" title="(defmacro defword
          (name struct &amp;key conc-name set-conc-name keyword-updater doc)
  (cond
   ((not
     (defword-guards name struct conc-name set-conc-name keyword-updater doc)))
...">defword</a>
        <span class="string">"The :SET-CONC-NAME must be a symbol. This is not a symbol: ~
            ~p0"</span>
        conc-name))
    (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (symbolp keyword-updater)
      (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-defword" data-sym="DEFWORD" title="(defmacro defword
          (name struct &amp;key conc-name set-conc-name keyword-updater doc)
  (cond
   ((not
     (defword-guards name struct conc-name set-conc-name keyword-updater doc)))
...">defword</a>
        <span class="string">"The :KEYWORD-UPDATER must be a symbol. This is not a symbol: ~
            ~p0"</span>
        conc-name))
    (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a> (stringp <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>))
      (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-defword" data-sym="DEFWORD" title="(defmacro defword
          (name struct &amp;key conc-name set-conc-name keyword-updater doc)
  (cond
   ((not
     (defword-guards name struct conc-name set-conc-name keyword-updater doc)))
...">defword</a>
        <span class="string">"The :DOC must be a string.  This is not a string: ~p0"</span>
        <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>))))</pre>
  </div>

<div class="form-block function" id="def-defword-accessor-name" data-defines="DEFWORD-ACCESSOR-NAME" data-references="PACK-INTERN,FIELD,CONC-NAME,NAME,DEFUN" data-used-by="DEFWORD-ACCESSOR-DEFINITIONS" data-part-name="DEFWORD-ACCESSOR-NAME" data-part-args="FIELD,CONC-NAME,NAME" data-part-body="FIELD,CONC-NAME,NAME,PACK-INTERN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-ACCESSOR-NAME">defword-accessor-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-accessor-name" data-sym="DEFWORD-ACCESSOR-NAME" title="(defun defword-accessor-name (name conc-name field)
  (pack-intern name conc-name field))">defword-accessor-name</a>
  (name conc-name field)
  (pack-intern name conc-name field))</pre>
  </div>

<div class="form-block function" id="def-defword-updater-name" data-defines="DEFWORD-UPDATER-NAME" data-references="PACK-INTERN,FIELD,SET-CONC-NAME,NAME,DEFUN" data-used-by="DEFWORD-UPDATER-DEFINITIONS" data-part-name="DEFWORD-UPDATER-NAME" data-part-args="FIELD,SET-CONC-NAME,NAME" data-part-body="FIELD,SET-CONC-NAME,NAME,PACK-INTERN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-UPDATER-NAME">defword-updater-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-updater-name" data-sym="DEFWORD-UPDATER-NAME" title="(defun defword-updater-name (name set-conc-name field)
  (pack-intern name set-conc-name field))">defword-updater-name</a>
  (name set-conc-name field)
  (pack-intern name set-conc-name field))</pre>
  </div>

<div class="form-block function" id="def-defword-accessor-definitions" data-defines="DEFWORD-ACCESSOR-DEFINITIONS" data-references="T,CDR,BSP,QUOTE,LIST,WORD,DEFMACRO,QUASIQUOTE,CONS,DEFWORD-ACCESSOR-NAME,ACCESSOR,FOURTH,DOC,THIRD,POS,SECOND,SIZE,FIRST,FIELD,CAR,TUPLE,LET*,CONSP,COND,TUPLES,CONC-NAME,NAME,RDB,DEFUN" data-used-by="DEFWORD" data-part-name="DEFWORD-ACCESSOR-DEFINITIONS" data-part-args="TUPLES,CONC-NAME,NAME,RDB" data-part-body="T,CDR,RDB,DEFWORD-ACCESSOR-DEFINITIONS,BSP,QUOTE,LIST,WORD,DEFMACRO,QUASIQUOTE,CONS,CONC-NAME,NAME,DEFWORD-ACCESSOR-NAME,ACCESSOR,FOURTH,DOC,THIRD,POS,SECOND,SIZE,FIRST,FIELD,CAR,TUPLE,LET*,TUPLES,CONSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-ACCESSOR-DEFINITIONS">defword-accessor-definitions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-accessor-definitions" data-sym="DEFWORD-ACCESSOR-DEFINITIONS" title="(defun defword-accessor-definitions (rdb name conc-name tuples)
  (cond
   ((consp tuples)
    (let* ((tuple (car tuples))
           (field (first tuple))
...">defword-accessor-definitions</a>
  (rdb name conc-name tuples)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((consp tuples) (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tuple (car tuples)) (field (<a class="sym-link system" href="../../axioms.html#def-first" data-sym="FIRST">first</a> tuple))
          (size (<a class="sym-link system" href="../../axioms.html#def-second" data-sym="SECOND">second</a> tuple))
          (pos (<a class="sym-link system" href="../../axioms.html#def-third" data-sym="THIRD">third</a> tuple))
          (<a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a> (<a class="sym-link system" href="../../axioms.html#def-fourth" data-sym="FOURTH">fourth</a> tuple))
          (accessor (<a class="sym-link local-def" href="#def-defword-accessor-name" data-sym="DEFWORD-ACCESSOR-NAME" title="(defun defword-accessor-name (name conc-name field)
  (pack-intern name conc-name field))">defword-accessor-name</a> name conc-name field)))
        (cons `(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> ,ACCESSOR
            (word)
            ,@(IF DOC
      (LIST DOC)
      NIL)
            (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> ',RDB (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'bsp ,SIZE ,POS) word))
          (<a class="sym-link local-def" href="#def-defword-accessor-definitions" data-sym="DEFWORD-ACCESSOR-DEFINITIONS" title="(defun defword-accessor-definitions (rdb name conc-name tuples)
  (cond
   ((consp tuples)
    (let* ((tuple (car tuples))
           (field (first tuple))
...">defword-accessor-definitions</a> rdb
            name
            conc-name
            (cdr tuples)))))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-defword-updater-definitions" data-defines="DEFWORD-UPDATER-DEFINITIONS" data-references="T,CDR,BSP,QUOTE,LIST,WORD,VAL,DEFMACRO,QUASIQUOTE,CONS,DEFWORD-UPDATER-NAME,UPDATER,THIRD,POS,SECOND,SIZE,FIRST,FIELD,CAR,TUPLE,LET*,CONSP,COND,TUPLES,SET-CONC-NAME,NAME,WRB,DEFUN" data-used-by="DEFWORD" data-part-name="DEFWORD-UPDATER-DEFINITIONS" data-part-args="TUPLES,SET-CONC-NAME,NAME,WRB" data-part-body="T,CDR,WRB,DEFWORD-UPDATER-DEFINITIONS,BSP,QUOTE,LIST,WORD,VAL,DEFMACRO,QUASIQUOTE,CONS,SET-CONC-NAME,NAME,DEFWORD-UPDATER-NAME,UPDATER,THIRD,POS,SECOND,SIZE,FIRST,FIELD,CAR,TUPLE,LET*,TUPLES,CONSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-UPDATER-DEFINITIONS">defword-updater-definitions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-updater-definitions" data-sym="DEFWORD-UPDATER-DEFINITIONS" title="(defun defword-updater-definitions (wrb name set-conc-name tuples)
  (cond
   ((consp tuples)
    (let* ((tuple (car tuples))
           (field (first tuple))
...">defword-updater-definitions</a>
  (wrb name set-conc-name tuples)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((consp tuples) (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tuple (car tuples)) (field (<a class="sym-link system" href="../../axioms.html#def-first" data-sym="FIRST">first</a> tuple))
          (size (<a class="sym-link system" href="../../axioms.html#def-second" data-sym="SECOND">second</a> tuple))
          (pos (<a class="sym-link system" href="../../axioms.html#def-third" data-sym="THIRD">third</a> tuple))
          (updater (<a class="sym-link local-def" href="#def-defword-updater-name" data-sym="DEFWORD-UPDATER-NAME" title="(defun defword-updater-name (name set-conc-name field)
  (pack-intern name set-conc-name field))">defword-updater-name</a> name set-conc-name field)))
        (cons `(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> ,UPDATER
            (val word)
            (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> ',WRB val (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'bsp ,SIZE ,POS) word))
          (<a class="sym-link local-def" href="#def-defword-updater-definitions" data-sym="DEFWORD-UPDATER-DEFINITIONS" title="(defun defword-updater-definitions (wrb name set-conc-name tuples)
  (cond
   ((consp tuples)
    (let* ((tuple (car tuples))
           (field (first tuple))
...">defword-updater-definitions</a> wrb
            name
            set-conc-name
            (cdr tuples)))))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block other" id="form-101" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop defword-keyword-field-alist
  (name set-conc-name field-names)
  (for ((field-name in field-names))
    (collect (cons (intern-in-package-of-symbol (<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> field-name) <span class="keyword">:keyword</span>)
        (<a class="sym-link local-def" href="#def-defword-updater-name" data-sym="DEFWORD-UPDATER-NAME" title="(defun defword-updater-name (name set-conc-name field)
  (pack-intern name set-conc-name field))">defword-updater-name</a> name set-conc-name field-name)))))</pre>
  </div>

<div class="form-block function" id="def-defword-keyword-updater-body" data-defines="DEFWORD-KEYWORD-UPDATER-BODY" data-references="QUASIQUOTE,T,ATOM,COND,KEYWORD-FIELD-ALIST,ARGS,VAL,DEFUN" data-used-by="DEFWORD-KEYWORD-UPDATER-FN" data-part-name="DEFWORD-KEYWORD-UPDATER-BODY" data-part-args="KEYWORD-FIELD-ALIST,ARGS,VAL" data-part-body="QUASIQUOTE,T,VAL,ARGS,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-KEYWORD-UPDATER-BODY">defword-keyword-updater-body</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-keyword-updater-body" data-sym="DEFWORD-KEYWORD-UPDATER-BODY" title="(defun defword-keyword-updater-body (val args keyword-field-alist)
  (cond ((atom args) val)
        (t
         `(,(cdr (assoc (car args) keyword-field-alist)) ,(cadr args)
           ,(defword-keyword-updater-body val (cddr args)">defword-keyword-updater-body</a>
  (val <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> keyword-field-alist)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) val)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> `(,(CDR (ASSOC (CAR ARGS) KEYWORD-FIELD-ALIST)) ,(CADR ARGS)
        ,(DEFWORD-KEYWORD-UPDATER-BODY VAL (CDDR ARGS) KEYWORD-FIELD-ALIST)))))</pre>
  </div>

<div class="form-block function" id="def-defword-keyword-updater-fn" data-defines="DEFWORD-KEYWORD-UPDATER-FN" data-references="DEFWORD-KEYWORD-UPDATER-BODY,T,SET-DIFFERENCE-EQUAL,EVENS,SUBSETP,REASON-FOR-NON-KEYWORD-VALUE-LISTP,HARD,ER,KEYWORD-VALUE-LISTP,NOT,COND,STRIP-CARS,KEYWORD-FIELD-NAMES,LET*,XARGS,DECLARE,KEYWORD-FIELD-ALIST,KEYWORD-UPDATER,ARGS,VAL,FORM,DEFUN" data-used-by="DEFWORD-KEYWORD-UPDATER" data-part-name="DEFWORD-KEYWORD-UPDATER-FN" data-part-args="KEYWORD-FIELD-ALIST,KEYWORD-UPDATER,ARGS,VAL,FORM" data-part-declare="XARGS,DECLARE" data-part-body="VAL,DEFWORD-KEYWORD-UPDATER-BODY,T,SET-DIFFERENCE-EQUAL,EVENS,SUBSETP,REASON-FOR-NON-KEYWORD-VALUE-LISTP,FORM,KEYWORD-UPDATER,HARD,ER,ARGS,KEYWORD-VALUE-LISTP,NOT,COND,KEYWORD-FIELD-ALIST,STRIP-CARS,KEYWORD-FIELD-NAMES,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-KEYWORD-UPDATER-FN">defword-keyword-updater-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-keyword-updater-fn" data-sym="DEFWORD-KEYWORD-UPDATER-FN" title="(defun defword-keyword-updater-fn
       (form val args keyword-updater keyword-field-alist)
  (declare (xargs :mode :program))
  (let* ((keyword-field-names (strip-cars keyword-field-alist)))
    (cond
...">defword-keyword-updater-fn</a>
  (form val <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> keyword-updater keyword-field-alist)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((keyword-field-names (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> keyword-field-alist)))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)) (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
          keyword-updater
          <span class="string">"The argument list in the macro invocation ~p0 ~
           does not match the syntax of a keyword argument ~
           list because ~@1."</span>
          form
          (<a class="sym-link system" href="../../defthm.html#def-reason-for-non-keyword-value-listp" data-sym="REASON-FOR-NON-KEYWORD-VALUE-LISTP">reason-for-non-keyword-value-listp</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)))
      ((<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (<a class="sym-link system" href="../../axioms.html#def-evens" data-sym="EVENS">evens</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) keyword-field-names)) (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
          keyword-updater
          <span class="string">"The argument list in the macro invocation ~p0 is not ~
           a valid keyword argument list because it contains the ~
           ~#1~[keyword~/keywords~] ~&amp;1, which ~#1~[is~/are~] ~
            not the keyword ~#1~[form~/forms~] of any of the ~
            field names ~&amp;2."</span>
          form
          (<a class="sym-link system" href="../../axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> (<a class="sym-link system" href="../../axioms.html#def-evens" data-sym="EVENS">evens</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) keyword-field-names)
          keyword-field-names))
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-defword-keyword-updater-body" data-sym="DEFWORD-KEYWORD-UPDATER-BODY" title="(defun defword-keyword-updater-body (val args keyword-field-alist)
  (cond ((atom args) val)
        (t
         `(,(cdr (assoc (car args) keyword-field-alist)) ,(cadr args)
           ,(defword-keyword-updater-body val (cddr args)">defword-keyword-updater-body</a> val <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> keyword-field-alist)))))</pre>
  </div>

<div class="form-block function" id="def-defword-keyword-updater" data-defines="DEFWORD-KEYWORD-UPDATER" data-references="QUOTE,DEFWORD-KEYWORD-UPDATER-FN,ARGS,&REST,VAL,FORM,&WHOLE,DEFMACRO,QUASIQUOTE,FIELD-NAMES,SET-CONC-NAME,KEYWORD-UPDATER,NAME,DEFUN" data-part-name="DEFWORD-KEYWORD-UPDATER" data-part-args="FIELD-NAMES,SET-CONC-NAME,KEYWORD-UPDATER,NAME" data-part-body="QUOTE,DEFWORD-KEYWORD-UPDATER-FN,ARGS,&REST,VAL,FORM,&WHOLE,DEFMACRO,QUASIQUOTE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD-KEYWORD-UPDATER">defword-keyword-updater</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defword-keyword-updater" data-sym="DEFWORD-KEYWORD-UPDATER" title="(defun defword-keyword-updater (name keyword-updater set-conc-name field-names)
  `(defmacro ,keyword-updater (&amp;whole form val &amp;rest args)
     (defword-keyword-updater-fn form val args &#39;,keyword-updater
      &#39;,(defword-keyword-field-alist name set-conc-name field-names))))">defword-keyword-updater</a>
  (name keyword-updater set-conc-name field-names)
  `(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> ,KEYWORD-UPDATER
    (&amp;whole form val &amp;rest <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)
    (<a class="sym-link local-def" href="#def-defword-keyword-updater-fn" data-sym="DEFWORD-KEYWORD-UPDATER-FN" title="(defun defword-keyword-updater-fn
       (form val args keyword-updater keyword-field-alist)
  (declare (xargs :mode :program))
  (let* ((keyword-field-names (strip-cars keyword-field-alist)))
    (cond
...">defword-keyword-updater-fn</a> form
      val
      <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>
      ',KEYWORD-UPDATER
      ',(DEFWORD-KEYWORD-FIELD-ALIST NAME SET-CONC-NAME FIELD-NAMES))))</pre>
  </div>

<div class="form-block other" id="form-105" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection <a class="sym-link local-def" href="#def-defword" data-sym="DEFWORD" title="(defmacro defword
          (name struct &amp;key conc-name set-conc-name keyword-updater doc)
  (cond
   ((not
     (defword-guards name struct conc-name set-conc-name keyword-updater doc)))
...">defword</a>
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"A macro to define packed integer data structures."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

@({
    (DEFWORD FM9001-INSTRUCTION-WORD
      ((RN-A 4 0) (MODE-A 2 4) (IMMEDIATE 9 0) (A-IMMEDIATE 1 9)
       (RN-B 4 10) (MODE-B 2 14)
       (SET-FLAGS 4 16) (STORE-CC 4 20) (OP-CODE 4 24))
      :CONC-NAME ||
      :SET-CONC-NAME SET-)
})

&lt;p&gt;The above example defines the instruction word layout for the FM9001.  The
macro defines accessing macros (RN-A i), ... ,(OP-CODE i), updating
macros (SET-RN-A val i), ... ,(SET-OP-CODE val i), and a keyword updating
macro @(&#39;(UPDATE-FM9001-INSTRUCTION-WORD val &amp;rest args)&#39;).&lt;/p&gt;

&lt;p&gt;General form:&lt;/p&gt;

@({
    (DEFWORD name struct &amp;key conc-name set-conc-name keyword-updater)
})

&lt;p&gt;The DEFWORD macro defines a packed integer data structure, for example an
instruction word for a programmable processor or a status word.  DEFWORD is a
simple macro that defines accessing and updating macros for the fields of the
data structure. The utility of DEFWORD is mainly to simplify the specification
of packed integer data structures, and to improve the readability of code
manipulating these data structures without affecting performance. As long as
the book &quot;logops-lemmas&quot; is loaded all of the important facts about the macro
expansions should be available to the theorem prover.&lt;/p&gt;

&lt;p&gt;Arguments&lt;/p&gt;

@({
  name:  The name of the data structure, a symbol.

  struct : The field structure of the word. The form of this argument is
  given by the following grammar:

  &lt;tuple&gt;  := (&lt;field&gt; &lt;size&gt; &lt;pos&gt; [ &lt;doc&gt; ])
  &lt;struct&gt; := () | (&lt;tuple&gt; . &lt;struct&gt;)

  where:

  (SYMBOLP &lt;field&gt;)
  (AND (INTEGERP &lt;size&gt;) (&gt; &lt;size&gt; 0))
  (AND (INTEGERP &lt;pos&gt;) (&gt;= &lt;pos&gt; 0))
  (STRINGP &lt;doc&gt;)
})

&lt;p&gt;In other words, a list of tuples, the first element being a symbol, the
second a positive integer, the third a nonnegative integer, and the optional
fourth a string.&lt;/p&gt;

&lt;p&gt;Note that there are few other requirements on the @(&#39;&lt;struct&gt;&#39;) other than
the syntactic ones above.  For example, the FM9001 DEFWORD shows that a word
may have more than one possible structure - the first 9 bits of the FM9001
instruction word are either an immediate value, or they include the RN-A and
MODE-A fields.&lt;/p&gt;

&lt;p&gt;conc-name, set-conc-name: These are symbols whose print names will be
concatenated with the field names to produce the name of the accessors and
updaters respectively.  The default is @(&#39;&lt;name&gt;&#39;)- and @(&#39;SET-&lt;name&gt;&#39;)-
respectively.  The access and update macro names will be interned in the
package of name.&lt;/p&gt;

&lt;p&gt;keyword-updater:  This is a symbol, and specifies the name of the keyword
updating macro (see below).  The default is @(&#39;UPDATE-&lt;name&gt;&#39;).&lt;/p&gt;


&lt;h3&gt;Interpretation&lt;/h3&gt;

&lt;p&gt;DEFWORD creates an ACL2 DEFLABEL event named @(&#39;&lt;name&gt;&#39;).&lt;/p&gt;

&lt;p&gt;Each tuple @(&#39;(&lt;field&gt; &lt;size&gt; &lt;pos&gt;)&#39;) represents a @(&#39;&lt;size&gt;&#39;)-bit field of
a word at the bit position indicated.  Each field tuple produces an accessor
macro&lt;/p&gt;

@({
  (&lt;accessor&gt; word)
})

&lt;p&gt;where @(&#39;&lt;accessor&gt;&#39;) is computed from the :conc-name (see above).  This
accessor will expand into:&lt;/p&gt;

@({
  (RDB (BSP &lt;size&gt; &lt;pos&gt;) word).
})

&lt;p&gt;DEFWORD also generates an updating macro&lt;/p&gt;

@({
  (&lt;updater&gt; val word)
})

&lt;p&gt;where @(&#39;&lt;updater&gt;&#39;) is computed from the :set-conc-name (see above).  This
macro will expand to&lt;/p&gt;

@({
     (WRB val (BSP &lt;size&gt; &lt;pos&gt;) word)
})

&lt;p&gt;The keyword updater&lt;/p&gt;

@({
  (&lt;keyword-updater&gt; word &amp;rest args)
})

&lt;p&gt;is equivalent to multiple nested calls of the updaters on the initial word.
 For example,&lt;/p&gt;

@({
  (UPDATE-FM9001-INSTRUCTION-WORD WORD :RN-A 10 :RN-B 12)
})

&lt;p&gt;is the same as @(&#39;(SET-RN-A 10 (SET-RN-B 12 WORD))&#39;).&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block macro" id="def-defword" data-defines="DEFWORD" data-references="DEFLABEL,ENCAPSULATE,QUASIQUOTE,STRIP-CARS,FIELD-NAMES,WRB,DEFWORD-UPDATER-DEFINITIONS,UPDATER-DEFINITIONS,RDB,QUOTE,DEFWORD-ACCESSOR-DEFINITIONS,ACCESSOR-DEFINITIONS,PACK-INTERN,IF,LET*,T,DEFWORD-GUARDS,NOT,COND,DOC,KEYWORD-UPDATER,SET-CONC-NAME,CONC-NAME,&KEY,STRUCT,NAME,DEFMACRO" data-used-by="DEFWORD-GUARDS,DEFWORD-STRUCT-P,DEFWORD-TUPLE-P" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFWORD">defword</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defword" data-sym="DEFWORD" title="(defmacro defword
          (name struct &amp;key conc-name set-conc-name keyword-updater doc)
  (cond
   ((not
     (defword-guards name struct conc-name set-conc-name keyword-updater doc)))
...">defword</a>
  (name struct
    &amp;key
    conc-name
    set-conc-name
    keyword-updater
    <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-defword-guards" data-sym="DEFWORD-GUARDS" title="(defun defword-guards (name struct conc-name set-conc-name keyword-updater doc)
  (and
   (or (symbolp name)
       (er hard &#39;defword
           &quot;The name must be a symbol.  This is not a symbol: ~p0&quot; name))
...">defword-guards</a> name
         struct
         conc-name
         set-conc-name
         keyword-updater
         <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>)))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((conc-name (if conc-name
             conc-name
             (pack-intern name name <span class="string">"-"</span>))) (set-conc-name (if set-conc-name
              set-conc-name
              (pack-intern name <span class="string">"SET-"</span> name <span class="string">"-"</span>)))
          (keyword-updater (if keyword-updater
              keyword-updater
              (pack-intern name <span class="string">"UPDATE-"</span> name)))
          (accessor-definitions (<a class="sym-link local-def" href="#def-defword-accessor-definitions" data-sym="DEFWORD-ACCESSOR-DEFINITIONS" title="(defun defword-accessor-definitions (rdb name conc-name tuples)
  (cond
   ((consp tuples)
    (let* ((tuple (car tuples))
           (field (first tuple))
...">defword-accessor-definitions</a> 'rdb name conc-name struct))
          (updater-definitions (<a class="sym-link local-def" href="#def-defword-updater-definitions" data-sym="DEFWORD-UPDATER-DEFINITIONS" title="(defun defword-updater-definitions (wrb name set-conc-name tuples)
  (cond
   ((consp tuples)
    (let* ((tuple (car tuples))
           (field (first tuple))
...">defword-updater-definitions</a> 'wrb name set-conc-name struct))
          (field-names (<a class="sym-link system" href="../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> struct)))
        `(<a class="sym-link system" href="../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
          (<a class="sym-link system" href="../../axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a> ,NAME
            ,@(IF DOC
      `(:DOC ,DOC)
      NIL))
          ,@ACCESSOR-DEFINITIONS
          ,@UPDATER-DEFINITIONS
          ,(DEFWORD-KEYWORD-UPDATER NAME KEYWORD-UPDATER SET-CONC-NAME FIELD-NAMES))))))</pre>
  </div>

<div class="form-block other" id="form-107" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc word/bit-macros
  <span class="keyword">:parents</span> (logops-definitions)
  <span class="keyword">:short</span> <span class="string">"Macros for manipulating integer words defined as contiguous bits."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;These macros were defined to support the functions produced by
  translating SPW .eqn files to ACL2 functions.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block function" id="def-bind-word-to-bits-fn" data-defines="BIND-WORD-TO-BITS-FN" data-references="1+,CDR,LOGBIT,QUASIQUOTE,CONS,T,ENDP,COND,WORD,N,BIT-NAMES,DEFUN" data-part-name="BIND-WORD-TO-BITS-FN" data-part-args="WORD,N,BIT-NAMES" data-part-body="WORD,N,1+,CDR,BIND-WORD-TO-BITS-FN,LOGBIT,QUASIQUOTE,CONS,T,BIT-NAMES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BIND-WORD-TO-BITS-FN">bind-word-to-bits-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-bind-word-to-bits-fn" data-sym="BIND-WORD-TO-BITS-FN" title="(defun bind-word-to-bits-fn (bit-names n word)
  (cond ((endp bit-names) nil)
        (t
         (cons `(,(car bit-names) (logbit ,n ,word))
               (bind-word-to-bits-fn (cdr bit-names) (1+ n) word)))))">bind-word-to-bits-fn</a>
  (bit-names n word)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> bit-names) nil)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons `(,(CAR BIT-NAMES) (logbit ,N ,WORD))
        (<a class="sym-link local-def" href="#def-bind-word-to-bits-fn" data-sym="BIND-WORD-TO-BITS-FN" title="(defun bind-word-to-bits-fn (bit-names n word)
  (cond ((endp bit-names) nil)
        (t
         (cons `(,(car bit-names) (logbit ,n ,word))
               (bind-word-to-bits-fn (cdr bit-names) (1+ n) word)))))">bind-word-to-bits-fn</a> (cdr bit-names) (<a class="sym-link system" href="../../axioms.html#def-1_2B" data-sym="1+">1+</a> n) word)))))</pre>
  </div>

<div class="form-block other" id="form-109" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection bind-word-to-bits
  <span class="keyword">:parents</span> (word/bit-macros)
  <span class="keyword">:short</span> <span class="string">"Bind variables to the contiguous low-order bits of word."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

@({
  (BIND-WORD-TO-BITS (A B C) I (B-AND A (B-IOR B C)))
})

&lt;p&gt;The above macro call will bind A, B, and C to the 0th, 1st, and 2nd bit of
I, and then evaluate the logical expression under those bindings.  The list of
bit names is always interpreted from low to high order.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> bind-word-to-bits
    (bit-names word &amp;rest forms)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> bit-names) (<a class="sym-link system" href="../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> bit-names))))
    `(let ,(BIND-WORD-TO-BITS-FN BIT-NAMES 0 WORD)
      ,@FORMS)))</pre>
  </div>

<div class="form-block other" id="form-110" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection make-word-from-bits
  <span class="keyword">:parents</span> (word/bit-macros)
  <span class="keyword">:short</span> <span class="string">"Update the low-order bits of word with the indicated values."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Example:&lt;/p&gt;

@({
    (MAKE-WORD-FROM-BITS A B C)
})

&lt;p&gt;The above macro call will build an unsigned integer from the bits A B, and
C.  The list of bits is always interpreted from low to high order. Note that
the expression generated by this macro will coerce the values to bits before
building the word.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> make-word-from-bits
    (&amp;rest bits)
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> bits) <span class="number">0</span>)
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> `(logapp <span class="number">1</span> ,(CAR BITS) (make-word-from-bits ,@(CDR BITS)))))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>