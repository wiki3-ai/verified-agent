<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>extra-doc - ACL2 Book</title>
  <meta property="name" content="extra-doc">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">extra-doc</h1>
    <div class="path"><a href="extra-doc.lisp" class="source-link">books/acl2s/extra-doc</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2S"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../xdoc/top.html" title="Open xdoc/top">"xdoc/top"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc acl2s-tutorial
  <span class="keyword">:parents</span> (acl2-sedan)
  <span class="keyword">:short</span> <span class="string">"A short ACL2s tutorial"</span>
  <span class="keyword">:long</span> <span class="string">"
&lt;h3&gt;Get Started&lt;/h3&gt;

&lt;p&gt;
Before starting this guide, follow the @(see acl2s-installation) guide to install ACL2s on your system.
&lt;/p&gt;

&lt;p&gt;
We will now guide you through the process of creating a new ACL2s/Lisp
file, typing definitions into that file, opening up an associated ACL2
session, sending definitions to the session, querying the session,
etc.
&lt;/p&gt;


&lt;h3&gt;Get Set...&lt;/h3&gt;
&lt;p&gt; The first time you run Eclipse, it will prompt you for a
&quot;workspace&quot; location. This is where Eclipse will save your
configuration and layout and is the default location for your ACL2s
projects and their associated files. Please &lt;b&gt;choose a fresh
workspace&lt;/b&gt; (e.g. /Users/yourname/acl2s-workspace) that is different
from the workspace you use for Java or other eclipse projects.
&lt;/p&gt;

&lt;p&gt;
If you get a welcome window, you can either click on &quot;Hide&quot; at the
top-right corner of the screen or click on the &quot;X&quot; button to the right
of the &quot;Welcome&quot; tab at the top of the screen.
&lt;/p&gt;

&lt;p&gt;To familiarize yourself with some Eclipse vocabulary and navigating
the workbench, we recommend going through
the &lt;a href=&quot;http://help.eclipse.org/2022-09/topic/org.eclipse.platform.doc.user/gettingStarted/qs-02a.htm&quot;&gt;Basic
Tutorial&lt;/a&gt; section of the Workbench User Guide.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;Create a project&lt;/b&gt;: Select &lt;b&gt;File&lt;/b&gt; | &lt;b&gt;New&lt;/b&gt;
| &lt;b&gt;Project...&lt;/b&gt;  and select &lt;b&gt;Project&lt;/b&gt; from the
group &lt;b&gt;General&lt;/b&gt;.  Give a name to the project that will contain
your ACL2 developments and click &lt;b&gt;Finish&lt;/b&gt;.
&lt;/p&gt;&lt;p&gt;
&lt;b&gt;Open the &quot;ACL2 Development&quot; perspective&lt;/b&gt;:  Select
&lt;b&gt;Window&lt;/b&gt; | &lt;b&gt;Perspective&lt;/b&gt; | &lt;b&gt;Open Perspective&lt;/b&gt; | &lt;b&gt;Other...&lt;/b&gt; and then select &lt;b&gt;ACL2 Development&lt;/b&gt; and then &lt;b&gt;Open&lt;/b&gt; in the window that appears.
You could have instead clicked on the
&lt;icon src=&quot;res/acl2s/new_persp.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt; icon in the top-right corner.
The new perspective will change the layout of your workbench.
&lt;/p&gt;

&lt;p&gt;
Note that, on macOS, depending on where the workspace and project
directories are located, you may get a popup asking you to give Eclipse
access to one of your folders (typically Documents or Desktop). You should
respond &quot;Yes&quot; if you&#39;re comfortable letting Eclipse access these folders
(so it can access your workspace and project folders), or respond &quot;No&quot; and
move your workspace somewhere that macOS does not require permission to
access (see &lt;a href=&quot;https://support.apple.com/guide/mac-help/control-access-to-files-and-folders-on-mac-mchld5a35146/mac&quot;&gt;this Apple help page&lt;/a&gt; for more information).
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;Create a new Lisp file&lt;/b&gt; for getting the feel of Eclipse and our
plugin.  Select &lt;b&gt;File&lt;/b&gt; | &lt;b&gt;New&lt;/b&gt; | &lt;b&gt;ACL2s/Lisp file&lt;/b&gt;.
The &quot;Directory&quot; should already indicate the project you just created.
If not, browse to the project you just created.  Pick a file name like
&quot;test.lisp&quot; or leave the default.  Use &quot;ACL2s&quot; for the session mode
and click &lt;b&gt;Finish&lt;/b&gt;.
&lt;/p&gt;

&lt;p&gt;
You can now type some ACL2 code in the editor.  Type in this
definition to get the feel of the auto-indenting, paren-matching, and
syntax-based coloring:

@({
; Computes the nth fibonacci number (maybe?)
(definec fib (n :nat) :nat
  (match n
    ((:or 0 1) (+ (fib (1- n)) (fib (- n 2))))
    (&amp; 1)))
})
&lt;/p&gt;

&lt;p&gt;
Upon creating the new file, an &lt;b&gt;editor&lt;/b&gt; has now opened in the
&lt;b&gt;editor area&lt;/b&gt; of the &lt;b&gt;workbench&lt;/b&gt;.
Around the editor area are &lt;b&gt;views&lt;/b&gt;,
such as the &lt;b&gt;Project Explorer&lt;/b&gt; view to the left and &lt;b&gt;Outline&lt;/b&gt; view
to the right.  From their title areas, these can be dragged around, tiled,
minimized, etc.  You probably also noticed that &lt;tt&gt;(definec fib (n :nat) :nat&lt;/tt&gt; showed up in
the Outline view, which you can use to navigate the top-level forms of your
file.
&lt;/p&gt;

&lt;p&gt;
In the Project Explorer view, which is a tree view of projects and
files, expand your project to reveal a few files:
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;tt&gt;.project&lt;/tt&gt; - a file used by Eclipse to store project-specific
settings.&lt;/li&gt;
&lt;li&gt;&lt;tt&gt;test.lisp&lt;/tt&gt; or whatever you called it.  This will contain ACL2
code your write.&lt;/li&gt;
&lt;li&gt;&lt;tt&gt;test.lisp.a2s&lt;/tt&gt; - a file created automatically when you opened
&lt;tt&gt;test.lisp&lt;/tt&gt;.  This file will store the history of ACL2 sessions
you open to develop &lt;tt&gt;test.lisp&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
&lt;b&gt;Open &lt;tt&gt;test.lisp.a2s&lt;/tt&gt;&lt;/b&gt; by double-clicking it in the
Project Explorer.  Alternatively, hit Ctrl+Shift+o
(Mac: &lt;icon src=&quot;res/acl2s/mac-command.gif&quot; width=&quot;14&quot; height=&quot;13&quot;
alt=&quot;Command&quot;/&gt;+Shift+o) in the editor for &lt;tt&gt;test.lisp&lt;/tt&gt;.  This is
the key sequence for switching between corresponding .lisp and
.lisp.a2s editors, opening the other if necessary.  You should now be
in an editor that has a little message &quot;No session running&quot; at the top
and won&#39;t let you type anything.  This editor is read-only when no
session is running.
&lt;/p&gt;

&lt;h3&gt;Go...&lt;/h3&gt;
&lt;p&gt;
&lt;b&gt;Start a session&lt;/b&gt; for testing our code in &lt;tt&gt;test.lisp&lt;/tt&gt; by
clicking the
&lt;icon src=&quot;res/acl2s/icons/acl2_restart.gif&quot; width=&quot;16&quot; height=&quot;16&quot; alt=&quot;restart session&quot;/&gt;
icon in the toolbar.
&lt;/p&gt;

&lt;p&gt;
ACL2 should start up, resulting in a .a2s file opening up and the &quot;&lt;tt&gt;ACL2S &amp;gt;&lt;/tt&gt;&quot; prompt
appearing after a few seconds.
&lt;/p&gt;


&lt;p&gt;
&lt;b&gt;Type an &quot;immediate command&quot; for ACL2&lt;/b&gt;, such as
@({(* 21 2)}) in the session editor (.a2s editor).  Notice
that the editor is read-only except for the part after the last prompt.
Hitting &lt;b&gt;Enter&lt;/b&gt; (&lt;b&gt;Return&lt;/b&gt;) at the end of this editor will submit
the typed
form to ACL2.  Actually, it will only submit &lt;b&gt;syntactically valid&lt;/b&gt;
commands to ACL2, so if one tries to trick it by hitting &lt;b&gt;Enter&lt;/b&gt;
after just @({(* 21}), the editor just goes to the next
line.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;Try submitting other types of input&lt;/b&gt; to ACL2.
@({(* 21 2)}) was classified by the plugin as &quot;VALUE&quot;
input, because it&#39;s just computation that returns a value.  Another
example is a &quot;QUERY&quot; such as @({:pe strip-cars}), which
prints out information about the current history or &quot;world&quot;, in this
case the definition of the function &quot;strip-cars&quot;.
@({(definec successor (x :int) :int (1+ x))}) is an &quot;EVENT&quot; because it
(potentially) changes the history.
See @(see acl2s-command-classifications) for more detail.
For &quot;EVENT&quot; inputs, ACL2s pops up a
dialog asking what to do about the fact that we did something logically
relevant from the command line rather than from our source code.  Read
the dialog and for now choose &quot;Insert&quot;.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;Try submitting something with an error&lt;/b&gt; such as
@({(successor 1 2)}) This has an error because the arity of the &lt;tt&gt;successor&lt;/tt&gt;
function we just defined is 1.  The red (maroon, I guess) output indicates
the command was not successful.  ACL2 is back in the state it was in before
you submitted the form that caused the error.
&lt;/p&gt;

&lt;h3&gt;Line action&lt;/h3&gt;

&lt;p&gt;
&lt;b&gt;Switch back to the .lisp editor&lt;/b&gt; where you will discover the
@({(definec successor (x :int) :int (1+ x))}) form we submitted in the
session editor has been &quot;inserted&quot; above what we had typed previously!
Also, that form is &quot;above the line&quot; and read-only.  This is
part of the intrinsic linkage between &lt;tt&gt;somename.lisp&lt;/tt&gt; and
&lt;tt&gt;somename.lisp.a2s&lt;/tt&gt;: the forms &quot;above the line&quot; in the .lisp
editor are those used to get the ACL2 session in the .lisp.a2s editor
in its current state.  To maintain this invariant, we have to do one of
two things in the case of executing something history-relevant in the
session editor: insert it at the line in the lisp editor or undo it.
These are the options the &quot;Relevant input at command line&quot; dialog gave us.
Note that &quot;QUERY&quot;s and &quot;VALUE&quot;s do not modify the
history, so we don&#39;t need to insert those above the line.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;Try moving the line&lt;/b&gt; past the definition we gave
for &lt;tt&gt;fib&lt;/tt&gt; by pressing the &quot;advance todo&quot; button on the toolbar
(&lt;icon src=&quot;res/acl2s/icons/advance.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt; or
Ctrl+Shift+I on PC or
&lt;icon src=&quot;res/acl2s/mac-command.gif&quot; width=&quot;14&quot; height=&quot;13&quot; alt=&quot;Command&quot;/&gt;+Shift+I
on Mac).
Watch carefully and you will see the definition for &lt;tt&gt;fib&lt;/tt&gt; flash green.
Because it did not turn from green to gray, our definition of &lt;tt&gt;fib&lt;/tt&gt; was
rejected by ACL2.  Also, if the &quot;Proof Tree&quot; view is open (probably
left), it might show some information about a failed termination
proof that caused ACL2 to reject the definition.
&lt;/p&gt;

&lt;box&gt;
&lt;h4&gt;More Details: Meaning of green and gray highlighting?&lt;/h4&gt;

    &lt;p&gt; The plugin models two &quot;lines&quot; in a .lisp file: the &quot;completed
      line&quot; and the &quot;todo line&quot;.  These &quot;lines&quot; are only visible as the
      boundary between regions with different highlighting.  The
      &quot;completed line&quot; is at the last point of gray (or blue)
      highlighting.  The &quot;todo line&quot; is at the last point of &lt;b&gt;any&lt;/b&gt;
      highlighting: gray, blue or green.
    &lt;/p&gt;

    &lt;p&gt; Above the &quot;completed line&quot; is the (potentially empty) &quot;completed
      region,&quot; which has forms that ACL2 has--get this--completed.
      Between the two lines are forms that we want ACL2 to work on
      completing (hence &quot;todo&quot;).  This (potentially empty) region, the
      &quot;todo region&quot;, has green highlighting.  We can call the rest of
      the buffer the &quot;working region&quot;, which is the freely editable
      part.
    &lt;/p&gt;
&lt;/box&gt;


&lt;p&gt;So what was the meaning of the flash of green highlighting?
Clicking &quot;advance todo&quot; moved the &quot;todo line&quot; from between
&lt;code&gt;(definec successor ...)&lt;/code&gt; and &lt;code&gt;(definec fib
...)&lt;/code&gt;  to after &lt;code&gt;(definec fib ...)&lt;/code&gt;.  With
at least one form in the &quot;todo region&quot;, the session started processing
the first (and only) one.  If you look at the session output, you see
that the attempt to admit our @(&#39;fib&#39;) function failed.  The
attempt to prove termination failed.  If the next &quot;todo&quot; form fails,
the plugin moves the todo line back to the point of the completed
line, &quot;cancelling&quot; the todo operations and prompting the user to fix
the rejected form.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;Fix our @(&#39;fib&#39;) definition&lt;/b&gt;: the previous one had
the bodies of the two match cases swapped.  ACL2 admits
this definition:
@({
; Computes the nth fibonacci number
(definec fib (n :nat) :nat
  (match n
    ((:or 0 1) 1)
    (&amp; (+ (fib (1- n)) (fib (- n 2))))))
})

Now clicking &quot;advance todo&quot; should result in the definition flashing
green while it is in the todo region and turning gray after being
accepted.
&lt;/p&gt;
"</span>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc acl2s-intro
  <span class="keyword">:parents</span> (acl2-sedan)
  <span class="keyword">:short</span> <span class="string">"A longer introduction to ACL2s"</span>
  <span class="keyword">:long</span> <span class="string">"
&lt;p&gt;
  The ACL2 Sedan theorem prover (&lt;b&gt;ACL2s&lt;/b&gt;) is an Eclipse plug-in
  that provides a modern integrated development environment, supports
  several modes of interaction, provides a powerful termination
  analysis engine, includes a rich support for &quot;types&quot; and
  seamlessly integrates semi-automated bug-finding methods with
  interactive theorem proving.
&lt;/p&gt;

  &lt;h2&gt;Introduction&lt;/h2&gt;
  &lt;p&gt;&lt;see topic=&quot;@(url acl2::acl2)&quot;&gt;ACL2&lt;/see&gt; is a powerful system for integrated
modeling, simulation, and inductive reasoning.  Under expert control,
it has been used to verify some of the most complex theorems to have
undergone mechanical verification.  In addition to its maturity and
stability, these qualifications make it a good platform for learning
about industrial-strength theorem proving.  Unfortunately, ACL2 has a
steep learning curve and with its traditional tool support is
analogous to a racecar: it is powerful, but it take expertise to
operate properly. &lt;/p&gt;

&lt;p&gt; We want to make tool support for the ACL2 platform that is more
analogous to a family sedan; hence, the &quot;ACL2s&quot; or &quot;ACL2 Sedan&quot; name.
With just a little training, a new user should be able to drive slowly
on paved streets without worrying about oversteer, tire temperature,
or even engine RPMs.
&lt;/p&gt;

&lt;p&gt;
Pushing aside the analogies, ACL2s includes powerful features that
provide users with more automation and support for specifying
conjectures and proving theorems. This includes &lt;see topic=&quot;@(url acl2::ccg)&quot;&gt;
CCG termination analysis&lt;/see&gt; and automated &lt;see topic=&quot;@(url acl2::cgen)&quot;&gt;
Counterexample generation&lt;/see&gt;. In addition, ACL2s is &quot;safer&quot; by constructing and
enforcing abstractions based on what is meaningful interaction with
ACL2. For example, unlike the traditional ACL2 development environment
(the command-line theorem prover and Emacs), pressing Return at the
command prompt in ACL2s does not send any input to ACL2 until a
single, well-formed input expression is completed.  Unlike Emacs,
ACL2s stops automatically sending input to ACL2 if something fails.
Undoing in ACL2s is simple and natural; in other ACL2 environments,
however, one has to figure out for oneself the command to undo to a
particular point, while watching for critical commands that evade the
traditional undo mechanism.
&lt;/p&gt;

&lt;p&gt;
We have implemented our tool as a plugin for the Eclipse development
environment (see &lt;i&gt;What is Eclipse?&lt;/i&gt; in the @(see acl2s-faq)).
In addition, the plugin requires some extra functionality from ACL2
that is not included in the main distribution.  This functionality is
largely hidden from the user and shouldn&#39;t alter ACL2&#39;s behavior for
all practical purposes.  To be sure, though, users can certify their
work in a clean ACL2 session.
&lt;/p&gt;

&lt;p&gt;
ACL2s is not completely mature in its capabilities, but industrial and
academic users alike should find it stable enough, intuitive enough,
and capable enough to meet their needs.  Ideally, the tool will become
even more intuitive, self-teaching, etc.  in the future.
&lt;/p&gt;

"</span>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc acl2s-faq
  <span class="keyword">:parents</span> (acl2-sedan)
  <span class="keyword">:short</span> <span class="string">"Frequently Asked Questions"</span>
  <span class="keyword">:long</span> <span class="string">"
&lt;div class=&quot;left-center&quot;&gt;
&lt;h3&gt;Eclipse-related&lt;/h3&gt;

&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;What is Eclipse?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;Eclipse is a highly modularized, extensible, free
development environment for a variety of programming languages.  See &lt;a
href=&quot;http://www.eclipse.org&quot;&gt;www.eclipse.org&lt;/a&gt;.  Eclipse is written
in Java and has an especially well developed development environment
for Java.&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;br/&gt;


&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;Where do I learn about all this Eclipse lingo?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;See the &lt;a href=&quot;http://help.eclipse.org/2022-06/topic/org.eclipse.platform.doc.user/gettingStarted/qs-02a.htm&quot;&gt;Basic
Tutorial section of the &lt;b&gt;Workbench User Guide&lt;/b&gt;&lt;/a&gt;.
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;br/&gt;



&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td &gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;How do I tell what Java version Eclipse is running under, and if its 64bit?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;Inside Eclipse, go to &lt;b&gt;Help&lt;/b&gt; | &lt;b&gt;About Eclipse SDK&lt;/b&gt; and
click &quot;Installation Details&quot;.  Under &quot;Configuration&quot; tab are the &quot;eclipse.commands&quot;
property and the &quot;java.runtime.*&quot; properties, you will find the relevant information. 
You can also find out under &quot;-arch&quot; your machine architecture, for
example, &quot;X86_64&quot; will indicate that you are running a 64bit Eclipse. 
&quot;java.vm.name&quot; will tell you if the Java being used is a 64bit JVM.
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;br/&gt;


&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;Where is Eclipse documentation?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;&lt;a href=&quot;http://www.eclipse.org/documentation/main.html&quot;&gt;http://www.eclipse.org/documentation/main.html&lt;/a&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;br/&gt;


&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td &gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt; Can I do a multi-user install of Eclipse?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td &gt;A:&lt;/td&gt;
     &lt;td&gt;&lt;p&gt;It is tricky to support a multi-user install of Eclipse.  The key
seems to be not running Eclipse at all in a way that would allow modification
of the files in that eclipse installation.  Once it has written some
configuration stuff to the installation directory, it bombs if you can&#39;t
write to that directory anymore.
&lt;/p&gt;&lt;p&gt;
This is why I discourage this unless you&#39;re truly in an environment that&#39;s
going to have many Eclipse users.  As awkward as it sounds, just install
Eclipse such that the user who will be running it can modify all of its
files, and life will be easier.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;div class=&quot;left-center&quot;&gt;
  &lt;h3&gt;ACL2-related&lt;/h3&gt;

&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;What is ACL2?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;ACL2 is a programming language, logic, and theorem
prover/checker based on Common Lisp.  See &lt;a
href=&quot;http://www.cs.utexas.edu/~moore/acl2/&quot;&gt;the ACL2 home page&lt;/a&gt; for more
information.&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;

&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;What is CAR?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;&lt;u&gt;CAR&lt;/u&gt; is an abbreviation we sometimes use to refer to this
(print) book:
&lt;blockquote&gt;
&lt;b&gt;Computer-Aided Reasoning: An Approach&lt;/b&gt;.&lt;br/&gt;
Matt Kaufmann, Panagiotis Manolios, and J Strother Moore.&lt;br/&gt;
Kluwer Academic Publishers, June, 2000. (ISBN 0-7923-7744-3)
&lt;/blockquote&gt;
See &lt;a href=&quot;http://www.cs.utexas.edu/users/moore/publications/acl2-books/car/index.html&quot;&gt;J
Moore&#39;s page about the book&lt;/a&gt; for description and &lt;b&gt;affordable&lt;/b&gt;
ordering information.
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td &gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;What is an ACL2 book?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td &gt;A:&lt;/td&gt;
     &lt;td&gt;Basically, an ACL2 book is a bunch of ACL2 definitions (functions,
theorems, proof rules, etc.) that can be easily imported into other ACL2
work.  See @(see acl2::books) for more information.&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;br/&gt;

&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
&lt;td&gt;&lt;b&gt;Can I use my own version of ACL2? i.e. Finding ACL2 on user&#39;s system:&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
&lt;td&gt;
&lt;p&gt;
This used to be a pain, but it&#39;s much simpler now.  First, we have a
preference in the Eclipse preferences (under &lt;b&gt;ACL2s&lt;/b&gt; &amp;gt; &lt;b&gt;ACL2&lt;/b&gt;)
that allows one to specify the directory that contains your ACL2 image,
whether it&#39;s &quot;saved_acl2&quot;, &quot;run_acl2&quot;, or &quot;bin/acl2.exe&quot; under that
directory.
&lt;/p&gt;
&lt;p&gt;

If you don&#39;t specify that preference, we check to
see if an &quot;ACL2 Image&quot; is installed in Eclipse, in which case we attempt
to use that.
&lt;/p&gt;
&lt;p&gt;
Next we check the environment variable ACL2_HOME for the directory.
Next the java property acl2.home.  Then if none of those is fruitful,
we just try executing &quot;acl2&quot; and see what happens.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;div class=&quot;left-center&quot;&gt;
&lt;h3&gt;Java-related&lt;/h3&gt;

&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;Do I already have Java?  What version?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;The simple answer is to type @({java -version}) at
your operating system&#39;s command prompt/terminal/shell.  You might
still have Java if the command is rejected.
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;


&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;Do I need the Java SDK or is the JRE fine?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;The SDK is only needed if you plan on ever doing any Java
development. The (smaller) JRE should be opted if there is a
choice. It is recommended to have separate eclipse installations
(directories) for Java development and ACL2 development.
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;br/&gt;


&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td &gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;Can I use another version of Java?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td &gt;A:&lt;/td&gt;
     &lt;td&gt;The ACL2s Eclipse plugin uses Java constructs from Java 11.
You are likely to encounter problems if you use a Java runtime that is
older than Java 11.  We recommend the use of JRE 17 or 18.
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;br/&gt;
&lt;/div&gt;

&lt;h3&gt;ACL2s-related&lt;/h3&gt;

&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;Why won&#39;t ACL2s let me do &amp;lt;blah&amp;gt; in a session?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;&lt;p&gt;In order for the plugin to follow what&#39;s going on in ACL2, we
must impose some small limitations.  One, for example, is that it will not let
you break into raw Lisp.  For those interested in this dangerous,
low-level form of interaction, however,
&lt;see topic=&quot;@(url acl2::set-raw-mode)&quot;&gt;raw
mode&lt;/see&gt; is supported (because it uses ACL2&#39;s reader).
&lt;/p&gt;&lt;p&gt;
Another subtle limitation is that--aside from
&lt;see topic=&quot;@(url acl2::wormhole)&quot;&gt;wormholes&lt;/see&gt;--@(see ld)
will only let you read from
&lt;see topic=&quot;@(url acl2::standard-oi)&quot;&gt;*standard-oi*&lt;/see&gt; at ld level 1.  The reason has to do with undoing and also @(see ld-error-action).  Another example is that
&lt;tt&gt;good-bye&lt;/tt&gt; and other exit commands are disabled to the user,
to encourage use of the user interface operation &quot;Stop session&quot; instead.
&lt;/p&gt;&lt;p&gt;
For more details, see &lt;b&gt;How/what ACL2 functionality is
modified for ACL2s&lt;/b&gt; in the @(see acl2s-implementation-notes).
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;br/&gt;

&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;Can I use ACL2s extensions to ACL2 in an Emacs development environment?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
     &lt;td&gt;

&lt;p&gt;Yes! One can reproduce inside Emacs, the theorem proving
     environment ACL2 Sedan provides (sans GUI) in the various session
     modes. To use just the CCG analysis and Counterexample generation
     features individually, see the next question. 
&lt;/p&gt;
&lt;p&gt;
  You first need to identify where your ACL2 systems book directory is.
  You can do this by running @({(assoc :system (project-dir-alist (w state)))}) inside of an Eclipse ACL2s-mode session.
  The output of that command will start with @(&#39;(:system . &#39;)) and will be followed by a path inside of a string.
  That path is your ACL2 system books directory, and we&#39;ll refer to it below as @(&#39;[books]&#39;).
&lt;/p&gt;
    &lt;ol&gt;
    &lt;li&gt;Open a shell in emacs, start the ACL2 session: @({[books]../saved_acl2})&lt;/li&gt;
    &lt;li&gt;In the ACL2 session, submit the following commands:
 @({
   (ld &quot;acl2s/acl2s-mode.lsp&quot; :dir :system)
   (reset-prehistory t)
   })
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
If you want finer control on what gets loaded, you can selectively copy and paste the forms in @(&#39;[books]/acl2s/acl2s-mode.lsp&#39;) that
you need, in the emacs session. For example, say you want a session without trust tags, then except
for the @(&#39;(include-book &quot;ccg&quot; ...)&#39;) form, submit the rest of the events in &lt;tt&gt;acl2s-mode.lsp&lt;/tt&gt;.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;


&lt;table class=&quot;rounded striped&quot;&gt;
&lt;tr&gt; &lt;td&gt;Q:&lt;/td&gt;
     &lt;td&gt;&lt;b&gt;Can I use CCG termination analysis and Counterexample
     generation in Emacs (ACL2 session)?&lt;/b&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;tr&gt; &lt;td&gt;A:&lt;/td&gt;
&lt;td&gt;
&lt;p&gt;To enable CCG termination analysis, submit the following two commands
  in your emacs ACL2 session.
@({
 (include-book &quot;acl2s/ccg/ccg&quot; :ttags ((:ccg)) :dir :system :load-compiled-file nil)
 (ld &quot;acl2s/ccg/ccg-settings.lsp&quot; :dir :system)
})
&lt;/p&gt;
&lt;p&gt;To enable automated counterexample generation, submit the
  following two commands in your emacs ACL2 session.
@({
 (include-book &quot;acl2s/cgen/top&quot; :dir :system :ttags :all)
 (acl2s-defaults :set testing-enabled T)
})
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;br/&gt;


&lt;h3&gt;Installation Issues&lt;/h3&gt;
See @(see acl2s-installation-faq) as well as the corresponding @(see acl2s-installation) page for your operating system for more information.
"</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc acl2s-user-guide
  <span class="keyword">:parents</span> (acl2-sedan)
  <span class="keyword">:short</span> <span class="string">"ACL2 Sedan User Guide"</span>
  <span class="keyword">:long</span> <span class="string">"
&lt;p&gt;
This guide showcases the important parts of the ACL2 Sedan user
experience. We assume you already have a running ACL2s session; if not
check out the @(see acl2s-tutorial).  The ACL2 tutorial (@(see
acl2::acl2-tutorial)) is a fine place to learn about the ACL2
language, logic and theorem proving system. For in-depth documentation
about ACL2 itself refer to @(see acl2::acl2).
&lt;/p&gt;

&lt;div class=&quot;left-center&quot;&gt;
  &lt;h2&gt;Cheat Sheet&lt;/h2&gt;
  A cheat sheet is available with a summary of key bindings and
  command types &lt;a href=&quot;res/acl2s/sheet.pdf&quot;&gt;here&lt;/a&gt;.
&lt;/div&gt;

&lt;div class=&quot;left-center&quot;&gt;
&lt;h2&gt;Customization&lt;/h2&gt;
&lt;h4&gt;Workspace Layout&lt;/h4&gt;
&lt;p&gt;
Getting your workspace laid out in a convenient way is important to using
ACL2s efficiently.  Here are some pointers:
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt;Editor split&lt;/b&gt;:  At this time, source code and sessions are in
editors--different editors.  To see both at one time, you need to split up
your editor area.  (Each workbench window has one rectangular &quot;editor area&quot;
in which all the open editors are tabbed and/or tiled.)  Click the title
area of an editor you would like to split away from the others and drag it
to any side of the others.  As you drag, a gray outline of the proposed
layout is shown.  Observe that you can also drag titles back together, and
you can relocate views around the editor area analogously.&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Open, close, many, one&lt;/b&gt;:  Through the &quot;Window&quot; menu, you can open
more than one workbench window, each of which has one rectangular editor area
and can have only one of any view open.  Also through the &quot;Window&quot; menu, you
can open another editor to the same file; all editors for the same file
keep their content in sync with each other.  Also through the &quot;Window&quot; menu,
you can reopen any views that may have accidentally been closed.&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Fast views&lt;/b&gt;:  If you don&#39;t want to dedicate long-term real estate
to views such as the Project Explorer, Outline, Proof Tree, and Console, you can
minimize them to make them available quickly.  If you click the icon for
the minimized view--rather than the restore icon--it pops up as a &quot;fast
view&quot; which is minimized again after you click outside it.
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Preferences&lt;/h4&gt;
&lt;p&gt;
Some ACL2s options are available for setup under &lt;b&gt;Window&lt;/b&gt; |
&lt;b&gt;Preferences...&lt;/b&gt; | &lt;b&gt;ACL2s&lt;/b&gt;, but these are easy to find and
should be self-documenting.  Here I&#39;ll point out ACL2s settings burried
(necessarily) elsewhere and other Eclipse-wide settings that affect ACL2s:
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt;Editor font&lt;/b&gt;: Open the preferences dialog and go to
&lt;b&gt;General&lt;/b&gt; | &lt;b&gt;Appearance&lt;/b&gt; | &lt;b&gt;Colors and Fonts&lt;/b&gt;.  Under &quot;Basic,&quot;
the &quot;Text Font&quot; is that used by the ACL2s editors.  Click &quot;Change...&quot; to
change it.&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Editor colors&lt;/b&gt;: To make the editor text darker in general,
go in the preferences dialog to &lt;b&gt;General&lt;/b&gt; | &lt;b&gt;Appearance&lt;/b&gt;
and select the &quot;Current theme&quot; &quot;High Contrast (ACL2s)&quot;.  This is good for
use on a projector, for example.  To manipulate the colors in detail,
go to &lt;b&gt;Colors and Fonts&lt;/b&gt; and open the ACL2s group.  &lt;i&gt;Note:
You will have to close and re-open editors for these color changes to
take effect.&lt;/i&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Session&lt;/h4&gt;
&lt;p&gt;
If you want to add some configuration input to be loaded with each interactive
session, use an
&lt;see topic=&quot;@(url acl2::acl2-customization)&quot;&gt;acl2-customization file&lt;/see&gt;.
This can include your own configuration to be done after the session mode is
loaded and configured.  This should not include events, which should be
specified or explicitly loaded in the source code.  In fact, we do not load
the acl2-customization for certification.  Also note that ACL2s does not
respect the environment variable for acl2-customization.  Also note that
acl2-customization is only loaded in some modes (see below), unless
overridden in the preferences.
&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;left-center&quot; data-target=&quot;guide_modes&quot;&gt;
&lt;h2&gt;Session Modes for ACL2 development&lt;/h2&gt;
&lt;p&gt;
Lisp files developed in our tool are configured to be in one of several
modes, choosable from the menu &lt;b&gt;ACL2&lt;/b&gt; | &lt;b&gt;Set ACL2 session
mode&lt;/b&gt;.  Modes cannot be changed while ACL2 is running, so selection must
be made while no associated session is running.
&lt;/p&gt;&lt;p&gt;
The current mode is displayed in the &lt;i&gt;content description line&lt;/i&gt; of the
lisp editor, just below the file name tab.  The mode is also displayed as
part of the startup output of a session, as below:
&lt;/p&gt;
@({
========================================================================
Executing /home/peterd/acl2s.exe
Starting ACL2 in mode &quot;ACL2s&quot;
})

&lt;h4&gt;Standard modes&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
  &lt;tr&gt;
    &lt;th&gt;Mode&lt;/th&gt;
    &lt;th&gt;Description&lt;/th&gt;
  &lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;&lt;b&gt;ACL2s&lt;/b&gt;&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
This mode is full-featured and places no restrictions on the theorem prover.
&lt;/p&gt;&lt;p&gt;
This is the recommended mode for a standard ACL2s user.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;b&gt;Compatible&lt;/b&gt;&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
In this mode, ACL2 is almost indistinguishable from what you would get
from executing it directly.  This mode is recommended for those
developing definitions and theorems to be used by ACL2 outside of ACL2s.
&lt;/p&gt;
&lt;p&gt;
Admissibility in this mode, however, does not *guarantee* admissibility
in ACL2 proper (and vice-versa).  For more details, see
the &lt;b&gt;How/what ACL2 functionality is modified for ACLs&lt;/b&gt; section of the @(see acl2s-implementation-notes).
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;b&gt;Additional advanced note:&lt;/b&gt;
Another feature of all these modes except &quot;Compatible&quot; is doing destructor
elimination before laying down a checkpoint.  Thus, the checkpoint summary
will show the formula after destructor elimination.  The downside is that the
variable names may appear cryptic and unfamiliar, but the upside is that
you get some generalization for free, usually resulting in smaller formulas.
&lt;/p&gt;&lt;p&gt;
Notes about how these modes are implemented are described in the &lt;b&gt;How modes are implemented&lt;/b&gt; section of the @(see acl2s-implementation-notes).
&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;left-center&quot;&gt;
&lt;h2&gt;Descriptions of UI Actions with key bindings&lt;/h2&gt;
&lt;p&gt;
The keyboard bindings for these actions
are user modifiable through Eclipse&#39;s preferences, which is under the
&lt;b&gt;Window&lt;/b&gt; menu or the &lt;b&gt;Eclipse&lt;/b&gt; menu depending on platform.
The settings are under
&lt;b&gt;General&lt;/b&gt; &amp;gt; &lt;b&gt;Keys&lt;/b&gt;, and show up beside their location in the
application menus (under &lt;b&gt;ACL2&lt;/b&gt; or &lt;b&gt;Navigate&lt;/b&gt;).
&lt;/p&gt;
&lt;p&gt;
&lt;b&gt;Mac OS X Note:&lt;/b&gt;
The keybindings below are for PC users.  The Mac equivalents (if available)
are the same except that Ctrl+Shift is replaced by
&lt;icon src=&quot;res/acl2s/mac-command.gif&quot; width=&quot;14&quot; height=&quot;13&quot; alt=&quot;Command&quot;/&gt;+Shift.  For
example, &lt;b&gt;Interrupt&lt;/b&gt; is still Ctrl+Break (if you have a Break key), but
switching editors is
&lt;icon src=&quot;res/acl2s/mac-command.gif&quot; width=&quot;14&quot; height=&quot;13&quot; alt=&quot;Command&quot;/&gt;+Shift+o.
&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;UI Action&lt;/th&gt;
      &lt;th&gt;Icon&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;&lt;/tr&gt;
  &lt;/thead&gt;

  &lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;&lt;b class=&quot;warning label&quot;&gt;Navigation&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;(appear under &quot;Navigate&quot; menu)&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Go To&quot; | &quot;Corresponding ...&quot;
&lt;/td&gt;&lt;td&gt;
&lt;/td&gt;&lt;td&gt;
This switches which editor has keyboard focus.  If you are in a .lisp file,
it switches to the corresponding .a2s editor, opening it if necessary.
Vice-versa if starting from an .a2s editor.  The keyboard shortcut is
Ctrl+Shift+o (since it is related to emacs&#39; C-x o).
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Go To&quot; | &quot;Matching Character&quot;
&lt;/td&gt;&lt;td&gt;
&lt;/td&gt;&lt;td&gt;
If the character behind the caret (cursor) is matched to another (such as
&lt;u&gt;&lt;color rgb=&quot;red&quot;&gt;(&lt;/color&gt;&lt;/u&gt; and &lt;u&gt;&lt;color rgb=&quot;red&quot;&gt;)&lt;/color&gt;&lt;/u&gt;,
or &lt;u&gt;&lt;color rgb=&quot;red&quot;&gt;&quot;&lt;/color&gt;&lt;/u&gt; and &lt;u&gt;&lt;color rgb=&quot;red&quot;&gt;&quot;&lt;/color&gt;&lt;/u&gt;),
then this action moves the cursor just beyond the match.  Invoking this action
twice in a row should have no net effect &lt;b&gt;except&lt;/b&gt; in the case of
going from a &lt;u&gt;&lt;color rgb=&quot;red&quot;&gt;,&lt;/color&gt;&lt;/u&gt; to its matching
&lt;u&gt;&lt;color rgb=&quot;red&quot;&gt;`&lt;/color&gt;&lt;/u&gt;, which could potentially have many commas
matching to it.  The keyboard shortcut is
Ctrl+Shift+P (as in Eclipse&#39;s Java Development Environment).
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Down/Up to Next/Previous Session Input&quot; (.a2s only)
&lt;/td&gt;&lt;td&gt;
&lt;/td&gt;&lt;td&gt;
These allow the user to navigate through the session history by moving to the
beginning of the next/previous command in the history.  If, for example, one
is at the bottom of a failed proof attempt, one can navigate to the beginning
of the command that initiated it with Ctrl+Shift+Up.  &quot;Next&quot; is bound to
Ctrl+Shift+Down.  One can go to the end of any buffer with Ctrl+End (Eclipse
binding).
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Down/Up to Next/Previous Checkpoint/Input&quot; (.a2s only)
&lt;/td&gt;&lt;td&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
These grant the user finer-grained navigation through the session history
than the above by also visiting checkpoints in proof attempts.  For a
description of checkpoints, see @(see acl2::the-method).
&lt;/p&gt;&lt;p&gt;
&quot;Next&quot; is bound to Ctrl+Shift+Right and &quot;Previous&quot; is bound to Ctrl+Shift+Left.
Thus, to go to the first checkpoint of the previous form&#39;s output, type
Ctrl+Shift+Up, Ctrl+Shift+Right.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Next/Previous/Last Command in History&quot; (.a2s only)
&lt;/td&gt;&lt;td&gt;
&lt;/td&gt;&lt;td&gt;
The .a2s editor keeps a history of acl2 forms that have been submitted as
&quot;immediates&quot; (typed in the .a2s editor).  One can navigate through this
history in much the same way one can navigate through a shell history, or a
history of ACL2 commands (assuming &lt;b&gt;readline&lt;/b&gt; support).  Previous:
Ctrl+Shift+, (comma);  Next: Ctrl+Shift+. (period);  Last/Current: Ctrl+Shift+/
(slash).
&lt;p&gt;
Actually, two orthogonal histories are maintained.  One for immediates
submitted as command forms and one for miscellaneous input, such as input to
the proof checker.  The command history for each is available only when the
session has prompted for that type of input.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;b class=&quot;warning label&quot;&gt;Session-related&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
Submit Immediate
&lt;/td&gt;&lt;td&gt;
&lt;/td&gt;&lt;td&gt;
When ACL2 is running and waiting for input, one can type input forms directly
into the .a2s buffer.  We call these &quot;immediates.&quot;  Whenever &lt;b&gt;Enter&lt;/b&gt;
(sometimes called &lt;b&gt;Return&lt;/b&gt;) is typed at the end of the .a2s buffer,
we check to see
if some prefix of the typed input is a valid, complete input form.  If so,
the &lt;b&gt;Enter&lt;/b&gt; is interpreted as submitting the form.  If not, the
&lt;b&gt;Enter&lt;/b&gt; is inserted, as in a traditional editor.  &lt;b&gt;Ctrl+Enter&lt;/b&gt;
ignores the location of the caret and will submit the first complete, valid
input form if there is one.
&lt;p&gt;
If the form submitted is relevant to the logical history, (i.e. not a
QUERY or VALUE), the user will be queried on whether to insert it at the
&quot;completed&quot; line point in the corresponding .lisp file or to immediately
undo it.  This is to maintain the invariant that the forms
above the &quot;completed&quot; line in the .lisp file comprise the logical history of
the session.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Clean Session&quot;
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/acl2_clean.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
Opens a dialog box with options to clear the session history, the typed
command history, and others.  Clearing the session history will stop the
associated ACL2 session (if running) and move the &quot;completed&quot; line in the
corresponding Lisp file to the top.  Forgetting REDO information is useful
for including updated versions of the same book.
Note that some of these actions are not readily reversible, if at all,
so use them cautiously.  Shortcut: Alt+Delete.
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;(Re)start Session&quot;
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/acl2_restart.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
Starts a fresh, new ACL2 session, with its output going to the current or
corresponding .a2s editor.  If an ACL2 session was already running in that
editor, it is stopped/killed.  Depending on user preferences, the dump of
previous sessions may or may not be cleared. Shortcut: Alt+Home.
&lt;/p&gt;&lt;p&gt;
In the corresponding Lisp file, the &quot;completed&quot; line is moved to the top.
The &quot;todo&quot; line is left where it is, meaning forms that were done or still
left &quot;todo&quot; in a previous session will start being read and loaded
automatically.  To avoid this, use &quot;Stop session&quot; (optional, but takes ACL2
interaction out of the operation) and &quot;Undo/cancel all forms&quot; before
&quot;(Re)start Session&quot;.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Stop Session&quot;
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/acl2_stop.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
If ACL2 is running in this (or the corresponding) .a2s editor, stop it cleanly
or kill it.  Regardless of the state it was in before, ACL2 is *not* running
in this editor after &quot;Stop Session&quot; is pressed.  Shortcut: Alt+End
&lt;/p&gt;&lt;p&gt;
In the corresponding Lisp file, the completed line is reset and the todo line
is left where it is.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Interrupt Session&quot;
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/acl2_interrupt.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
If ACL2 is processing a command form, this will break it back out to the
top-level prompt.  This is most commonly used to interrupt the execution of
some evaluation that will take too long, or to abort what seems to be a
divergent proof attempt.  As a nod to times passed, we bind this to Ctrl+Break.
&lt;/p&gt;&lt;p&gt;
&quot;Interrupt Session&quot; often has the same effect as &quot;Cancel all
&#39;todo&#39; forms,&quot; because if the form being processed by ACL2 is the next
&quot;todo&quot; form, either action will both interrupt ACL2 and (because an
interrupted form is not successful) move the &quot;todo&quot; line back to the &quot;done&quot;
line.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt; &lt;b class=&quot;warning label&quot;&gt;Line-related&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Undo/cancel all forms&quot;
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/clean.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
This moves both the &quot;completed&quot; line and the &quot;todo&quot; line to the top of the
.lisp file.  ACL2 need not be running, but if it is, this will cause
anything currently executing to be interrupted, and all completed forms
to be undone in LIFO (last-in, first-out) order.  (No default shortcut)
&lt;/p&gt;&lt;p&gt;
The large double arrows in the icon are intended to portray moving the line
all the way to the top.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Undo/cancel last form&quot;
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/retreat.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
If there are any &quot;todo&quot; forms, the last will be cancelled.  If it was
currently being executed by ACL2, it will be interrupted.
If there were no &quot;todo&quot; forms, both lines will be moved up one form, and if
that form was relevant to the logical history, it will be undone in the
ACL2 session.  ACL2 need not be running to use this action.
Shortcut: Ctrl+Shift+M
&lt;/p&gt;&lt;p&gt;
The small arrow in the icon is intended to indicate the undoing of a
single form.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Cancel all &quot;todo&quot; forms&quot;
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/cancel.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
The &quot;todo&quot; line is moved to be even with the &quot;completed&quot; line.  If the next
&quot;todo&quot; form was being processed by ACL2, it is interrupted.
(No default shortcut)
&lt;/p&gt;&lt;p&gt;
The large arrow next to green text in the icon is intended to indicate the
undoing of all &quot;todo&quot; forms.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Advance todo line&quot;
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/advance.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
The &quot;todo&quot; line is advanced by one command form.  This will often cause ACL2 to
start processing &quot;todo&quot; forms.  Many forms are completed by ACL2 so quickly,
that there is but a flicker before the &quot;completed&quot; line is moved as well.
ACL2 need not be running to use this action, but it won&#39;t trigger ACL2 to
start.  Shortcut: Ctrl+Shift+I
&lt;/p&gt;&lt;p&gt;
The small down arrow in the icon is intended to indicate the advancement of
the line by a single form.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;
&quot;Move todo up/down past cursor&quot; (.lisp only)
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/move.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
If the &quot;todo&quot; line is above the cursor, it is advanced until it reaches
(or passes) the cursor.  If the &quot;todo&quot; line is below the cursor, it is
retreated until it passes the cursor.  Note that invoking this action
repeatedly in the same spot will have a sort of &quot;toggle&quot; action on the
form under or immediately after the cursor. Shortcut: Ctrl+Shift+Enter
&lt;/p&gt;&lt;p&gt;
The up and down arrows in the icon are intended to indicate moving the line
in either direction to get to the current spot.
&lt;/p&gt;&lt;p&gt;
&lt;b&gt;This is the only line action valid in &quot;No Line&quot; mode&lt;/b&gt;, in which it has
a special (but obvious) meaning:  it submits the command form under or
following the cursor to the associated session (if exists, running, and ready)
and advances the cursor past the submitted form.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td&gt; &lt;b class=&quot;warning label&quot;&gt;Misc.&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td&gt;
Indent code
&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
In either the .lisp editor or the immediate area of the .a2s editor, the
Tab key indents lines spanned by the current selection (or just the line
containing the caret) according to some built-in rules.  Not all lines
will have their indention changed by this operation, such as lines whose
first non-whitespace characters are &quot;;;;&quot;.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td&gt;
Select s-exp
&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
In either the .lisp editor or the immediate area of the .a2s editor,
Ctrl+Shift+Space selects (highlights) s-expressions, to help with cutting
and pasting mostly.  If nothing is highlighted, the smallest s-exp &quot;under&quot;
(and to the right) of the cursor is selected.  Sometimes a single token that
is not itself an s-exp (such as &#39;)&#39;) is highlighted.  Hitting Ctrl+Shift+Space
with something already selected selects the next larger s-exp
that contains the selected region.  Thus, hitting this sequence repeatedly
selects larger and larger s-expressions until an entire top-level form is
selected.
&lt;/p&gt;&lt;p&gt;
Using this sequence to select a symbol causes all lines with occurrences of
that same symbol to be marked.  Selecting a non-symbol clears the markings.
This is helpful for finding definitions and uses of functions and variables.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td&gt;
Certify as book
&lt;/td&gt;&lt;td&gt;
&lt;icon src=&quot;res/acl2s/icons/acl2_book.gif&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
This will use &lt;see topic=&quot;@(url build::cert.pl)&quot;&gt;cert.pl&lt;/see&gt; to &lt;i&gt;certify&lt;/i&gt; the current book so that it can be quickly &lt;see topic=&quot;@(url acl2::include-book)&quot;&gt;included&lt;/see&gt; from another file. See @(see acl2::certificate) for more information. Shortcut: Alt+C
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;

&lt;tr&gt;&lt;td&gt;
Recertify ACL2s system books
&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;
&lt;p&gt;
This should only be needed if an ACL2 session fails to start up and
asks you to do this.  This could happen, for example, if you change the
version of ACL2 you are using with ACL2s.
&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;div class=&quot;left-center&quot; data-target=&quot;guide_ccg&quot;&gt;
&lt;h2&gt;CCG termination analysis&lt;/h2&gt;
&lt;h4&gt;Background&lt;/h4&gt;
&lt;p&gt;
The &quot;ACL2s,&quot; session mode
includes
improved termination analysis for ACL2 based on research by Pete Manolios
and Daron Vroon.  The analysis is based on &quot;context calling graphs,&quot; so
we refer to it as CCG termination analysis for short.
&lt;/p&gt;
&lt;p&gt;

Beginners can think of CCG termination analysis of as a black-box
analysis.  We say &quot;black-box&quot; because beginning users need not
concern themselves with the details of how CCG analysis works.
Of course, any termination analysis is necessarily incomplete and
eventually users may come across terminating functions that CCG
analysis cannot prove terminating.  When that happens, CCG
analysis will construct a function that is as simple as possible,
includes a subset of the looping behavior of the submitted
function, and which CCG analysis cannot prove terminating. This
function, along with several suggestions of how to help CCG
analysis prove termination, will be presented to the user.
&lt;/p&gt;
&lt;h4&gt;Settings&lt;/h4&gt;
&lt;p&gt;
CCG is configured by calling
&lt;b&gt;&lt;tt&gt;set-termination-method&lt;/tt&gt;&lt;/b&gt; with a single parameter,
which must be one of these:
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt;&lt;tt&gt;:ccg&lt;/tt&gt;&lt;/b&gt; - CCG analysis only (no measure-based proof
attempt)&lt;/li&gt;
&lt;li&gt;&lt;b&gt;&lt;tt&gt;:measure&lt;/tt&gt;&lt;/b&gt; - no CCG analysis (measure-based proofs
only)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
Regardless of this or other settings, ACL2&#39;s built-in
method will be used if an explicit measure is specified.
&lt;/p&gt;&lt;p&gt;
For advanced debugging purposes, &lt;tt&gt;:set-ccg-verbose t&lt;/tt&gt; causes the
analysis to show what it is doing.  This generates &lt;b&gt;lots&lt;/b&gt; of
output, however.
&lt;/p&gt;&lt;p&gt;
Finally, &quot;Compatible&quot; mode does not include CCG, and &quot;Programming&quot; mode
does not need CCG.  CCG is independent of the rest of ACL2s in the sense
that it is implemented as an ACL2 book in the acl2s-modes plugin.
&lt;/p&gt;

&lt;h4&gt;More Documentation&lt;/h4&gt;
&lt;p&gt;
Our CCG termination analysis is highly customizable and includes
many features not mentioned here. For detailed documentation
please refer to @(see acl2::ccg).
&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;left-center&quot; data-target=&quot;guide_datadef&quot;&gt;
&lt;h2&gt;Data Definitions&lt;/h2&gt;
&lt;h4&gt;Background&lt;/h4&gt;
&lt;p&gt;
Data definitions are an essential part of crafting programs and
modeling systems. Whereas most programming languages provide rich
mechanisms for defining datatypes, ACL2 only really provides a
limited collection of built-in types and @(&#39;cons&#39;).
&lt;/p&gt;

&lt;p&gt;
This state of affairs presented us with a challenge when we started
teaching undergraduates how to model, specify and reason about
computation, because even freshmen students have a type-centric view
of the world.
&lt;/p&gt;

&lt;p&gt;
We introduced the &lt;b&gt;defdata&lt;/b&gt; framework in ACL2s
in order to provide a convenient, intuitive way to specify data
definitions.  A version of @(&#39;defdata&#39;) has appeared in ACL2s
since at least August 2009 (in version 0.9.7), and we have been
extending and improving it since then.
&lt;/p&gt;


&lt;h4&gt;Documentation&lt;/h4&gt;
&lt;p&gt;
See @(see acl2::defdata) for defdata&#39;s documentation. In particular,
a readable and example-oriented description of defdata framework appears
in the ACL2 2014 Workshop paper linked at the bottom of that topic.
&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;left-center&quot; data-target=&quot;guide_RT&quot;&gt;
&lt;h2&gt;Counterexample Generation&lt;/h2&gt;
&lt;h4&gt;Background&lt;/h4&gt;
&lt;p&gt;
Counterexample generation framework seamlessly integrates (random)
testing and the full power of the theorem prover (ACL2) to provide an
automatic bug-finding capability that often finds counterexamples to
false conjectures.  This feature is especially effective when used in
conjunction with the data definition framework.  The counterexamples
allow users to quickly fix specification errors and to learn the
valuable skill of designing correct specifications. This feature is
enabled by default and requires no special syntax so that users get
the benefit of automated testing without any effort on their part.
The data definition framework supports the counterexample generation
framework in an important way . For example, we guarantee
that random testing will automatically generate examples that
satisfy any hypotheses restricting the (defdata) type of a variable.
&lt;/p&gt;
&lt;p&gt;
The ACL2 2011 workshop paper
&lt;a href=&quot;http://arxiv.org/pdf/1105.4394v2.pdf&quot;&gt;Integrating Testing and Interactive Theorem Proving&lt;/a&gt;
goes into the details of this feature, but is a very easy read. The reader is encouraged to go through it.
&lt;/p&gt;
&lt;p&gt;
All modes except &quot;Compatible&quot; have testing enabled by default.
&lt;/p&gt;

&lt;h4&gt;Documentation&lt;/h4&gt;
&lt;p&gt;
See @(see acl2::test?) and @(see acl2::cgen) for more documentation.
&lt;/p&gt;

&lt;/div&gt;
"</span>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc acl2s-command-classifications
  <span class="keyword">:parents</span> (acl2s-user-guide)
  <span class="keyword">:short</span> <span class="string">"Description of classifications for commands in ACL2s"</span>
  <span class="keyword">:long</span> <span class="string">"
&lt;h2&gt;Input Command Classifications&lt;/h2&gt;
&lt;p&gt;
Each input form submitted to ACL2 from the plugin is placed into
one of the following categories based on its purpose and potential
effect.  Basically, if you use RAW or ACTION input, we cannot guarantee
that the plugin will behave in a consistent way with respect to UNDOing,
etc., but the rest should behave as expected.  We present them in decreasing
order of commonness or importance to the user:
&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
  &lt;tr&gt;
    &lt;th&gt;Class&lt;/th&gt;
    &lt;th&gt;Description&lt;/th&gt;
  &lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;&lt;b&gt;EVENT&lt;/b&gt;&lt;/td&gt;&lt;td&gt;
These correspond to ACL2 &lt;see topic=&quot;@(url acl2::embedded-event-form)&quot;&gt;embedded event forms&lt;/see&gt;,
which are those forms that can appear in &lt;see topic=&quot;@(url acl2::books)&quot;&gt;ACL2 books&lt;/see&gt;.
Calls to &lt;tt&gt;defun&lt;/tt&gt;, &lt;tt&gt;defmacro&lt;/tt&gt;, and &lt;tt&gt;defthm&lt;/tt&gt; are examples
of embedded event forms and &lt;b&gt;EVENT&lt;/b&gt;s.
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;b&gt;VALUE&lt;/b&gt;&lt;/td&gt;&lt;td&gt;
Such forms are simple computations which return a value when (and if)
they terminate.
No &lt;b&gt;VALUE&lt;/b&gt; form can alter ACL2&#39;s state and, therefore, never
affects undoing or redoing.
&lt;br/&gt;&lt;br/&gt;
A precise definition is that if ACL2 permits &lt;tt&gt;(cons &lt;/tt&gt;
&lt;b&gt;&amp;lt;form&amp;gt;&lt;/b&gt; &lt;tt&gt;nil)&lt;/tt&gt;, then &lt;b&gt;&amp;lt;form&amp;gt;&lt;/b&gt; is a &lt;b&gt;VALUE&lt;/b&gt;.
&lt;br/&gt;&lt;br/&gt;
&lt;b&gt;Advanced Note&lt;/b&gt;: some &lt;b&gt;VALUE&lt;/b&gt; forms
have transient side effects, but they have no logical consequence (e.g.
&lt;see topic=&quot;@(url acl2::cw)&quot;&gt;CW&lt;/see&gt;
and
&lt;see topic=&quot;@(url acl2::wormhole)&quot;&gt;WORMHOLE&lt;/see&gt;).
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;b&gt;QUERY&lt;/b&gt;&lt;/td&gt;&lt;td&gt;
These are calls to some built-in ACL2 functions that report information about
the current state but are known not to modify state.  Examples include
@(&#39;(pe &#39;append)&#39;)
and
@(&#39;(pbt 0)&#39;).
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;b&gt;UNDO&lt;/b&gt;&lt;br/&gt;(internal initiation only)&lt;/td&gt;&lt;td&gt;
Various UI actions which have to do with &quot;undoing&quot; or &quot;moving the line up&quot;
can initiate the execution of an &lt;b&gt;UNDO&lt;/b&gt; in the session.  An ordinary
user need not concern him/herself with how this works
(See &lt;b&gt;How undo and redo are implemented&lt;/b&gt; in the &lt;see topic=&quot;@(url acl2s-implementation-notes)&quot;&gt;ACL2s implementation notes&lt;/see&gt;),
but should keep in mind that &lt;b&gt;UNDO&lt;/b&gt;ing an &lt;b&gt;ACTION&lt;/b&gt; or &lt;b&gt;RAW&lt;/b&gt;
form may not have the desired effect.
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;b&gt;REDO&lt;/b&gt;&lt;br/&gt;(internal initiation only)&lt;/td&gt;&lt;td&gt;
This is the counterpart of &lt;b&gt;UNDO&lt;/b&gt;.  It is used when resubmitting
something with the same abstract syntax and in the same environment as
something that was previously undone.
&lt;br/&gt;&lt;br/&gt;
&lt;b&gt;REDO&lt;/b&gt; enables one to (for example) edit comments above the line, by
retreating the line far enough to edit what one wants to change, and then
moving the &quot;todo&quot; line back to where it was.  If only comments were
changed, the session will accept the forms as &lt;b&gt;REDO&lt;/b&gt;s, which happen
almost instantaneously.
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;b&gt;BAD&lt;/b&gt;&lt;/td&gt;&lt;td&gt;
If the input is a parseable ACL2 object but is an ill-formed expression
according to the current history, we call it &quot;BAD&quot; input.  Examples of
violations that would cause input to be statically ill-formed are:
&lt;ul&gt;
&lt;li&gt;wrong number of parameters to a function/macro&lt;/li&gt;
&lt;li&gt;use of an undefined function/macro&lt;/li&gt;
&lt;li&gt;first element of an invocation list is not a symbol or lambda expression&lt;/li&gt;
&lt;li&gt;mismatch between expected and actual @(&#39;mv&#39;) shape&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;b&gt;COMMAND&lt;/b&gt;&lt;/td&gt;&lt;td&gt;
There are many forms that are illegal in books but we are able to undo the
effect of.  If we recognize a form as such, we call it a &lt;b&gt;COMMAND&lt;/b&gt;--
except for special case &lt;b&gt;IN-PACKAGE&lt;/b&gt;.  The
best example of a command is &quot;&lt;tt&gt;:set-guard-checking :none&lt;/tt&gt;&quot;.
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;b&gt;ACTION&lt;/b&gt;&lt;br/&gt;
&lt;color rgb=&quot;red&quot;&gt;(potentially dangerous!)&lt;/color&gt;&lt;/td&gt;&lt;td&gt;
This is the &quot;catch-all&quot; categorization for forms that may have effects
that we don&#39;t know how to properly undo or might even break or hang the
ACL2 session.  Users who use
&lt;see topic=&quot;@(url acl2::stobj)&quot;&gt;STOBJs&lt;/see&gt;
or other
&lt;see topic=&quot;@(url acl2::state)&quot;&gt;STATE&lt;/see&gt;
beyond the logical
&lt;see topic=&quot;@(url acl2::acl2)&quot;&gt;WORLD&lt;/see&gt;
will need to use &lt;b&gt;ACTION&lt;/b&gt;s heavily, but these are advanced uses of ACL2.
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;b&gt;EVENT/VALUE&lt;/b&gt;&lt;/td&gt;&lt;td&gt;
These are a special type of
&lt;see topic=&quot;@(url acl2::embedded-event-form)&quot;&gt;embedded event form&lt;/see&gt;
(&lt;tt&gt;value-triple&lt;/tt&gt;s) that have no logical consequence--except that they
could halt progress by generating a hard lisp error.
&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td valign=&quot;top&quot;&gt;&lt;b&gt;RAW&lt;/b&gt;&lt;br/&gt;
&lt;color rgb=&quot;red&quot;&gt;(potentially very dangerous!)&lt;/color&gt;&lt;/td&gt;&lt;td&gt;
Most users of ACL2 are familiar with breaking into &quot;raw lisp&quot; by typing
&quot;:q&quot; at the top-level prompt.  This is not supported in our plugin, but
&lt;see topic=&quot;@(url acl2::set-raw-mode)&quot;&gt;
&quot;raw mode&quot;&lt;/see&gt; is supported.  Most forms submitted under this mode are
classified as &lt;b&gt;RAW&lt;/b&gt; because they have no well-defined meaning from the
ACL2 view of things.  With raw mode, the user can easily break many things,
and it&#39;s only supported for the benefit of &lt;b&gt;experts&lt;/b&gt;.
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
"</span>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc acl2s-implementation-notes
  <span class="keyword">:parents</span> (acl2-sedan)
  <span class="keyword">:short</span> <span class="string">"Some details regarding how ACL2s is implemented"</span>
  <span class="keyword">:long</span> <span class="string">"
&lt;h2&gt;WARNING&lt;/h2&gt;
&lt;color rgb=&quot;red&quot;&gt;
Note that much of the information here is not up-to-date with the current implementation of ACL2s.
&lt;/color&gt;
We&#39;re in the process of going through this documentation and updating it, but we haven&#39;t finished updating
this file yet.
&lt;h2&gt;Wrapping the ACL2 process&lt;/h2&gt;
&lt;p&gt;
  To support interruption of the ACL2 process, we need more
  information/functionality than Java provides through its
  @(&#39;java.lang.Process&#39;) API.  Roughly, we execute ACL2 in a wrapper
  that outputs as its first line of text an ID number that can be used
  to interrupt the process.  All output after that is that of ACL2.
  The plugin captures that ID number and uses it when needed.
&lt;/p&gt;
&lt;p&gt;
  &lt;b&gt;On Unix variants&lt;/b&gt; (Linux, Mac OS X), the wrapper for an invocation of
  @(&#39;acl2&#39;) would look like this (4 arguments, each underlined):
&lt;/p&gt;
&lt;blockquote&gt;
  &lt;code&gt;&lt;u&gt;sh&lt;/u&gt; &lt;u&gt;-c&lt;/u&gt; &lt;u&gt;echo &quot;$$&quot;; exec &quot;$0&quot; &quot;$@&quot;&lt;/u&gt; &lt;u&gt;acl2&lt;/u&gt;&lt;/code&gt;
&lt;/blockquote&gt;
&lt;p&gt;
  Basically, this uses the standard Bourne shell to echo its process
  id and then execs (keeping the same pid) acl2--or any other command
  used there.  To interrupt or terminate acl2 (respectively), we
  execute one of these:
&lt;/p&gt;
&lt;blockquote&gt;
  &lt;code&gt;&lt;u&gt;kill&lt;/u&gt; &lt;u&gt;-INT&lt;/u&gt; &lt;u&gt;&lt;i&gt;pid&lt;/i&gt;&lt;/u&gt;&lt;/code&gt;
  &lt;code&gt;&lt;u&gt;kill&lt;/u&gt; &lt;u&gt;-TERM&lt;/u&gt; &lt;u&gt;&lt;i&gt;pid&lt;/i&gt;&lt;/u&gt;&lt;/code&gt;
&lt;/blockquote&gt;
&lt;p&gt;
  &lt;b&gt;On Windows machines&lt;/b&gt;, things are not this easy.  We use a
  wrapper called &lt;tt&gt;hiddencon&lt;/tt&gt;(&lt;tt&gt;.exe&lt;/tt&gt;) that opens a new
  console, immediately hides it (flicker; sorry), outputs an id
  number, and executes a program &quot;attached&quot; to that console.  Then
  we can invoke &lt;tt&gt;sendctrlc&lt;/tt&gt;(&lt;tt&gt;.exe&lt;/tt&gt;) with that id to
  asynchronously deliver a &quot;Ctrl+C&quot; equivalent to that console,
  interrupting the program.  &lt;tt&gt;sendbreak&lt;/tt&gt;(&lt;tt&gt;.exe&lt;/tt&gt;)
  likewise sends a &quot;Ctrl+Break&quot; equivalent, which causes the program
  to terminate.
&lt;/p&gt;
&lt;p&gt;
  These auxillary programs (hiddencon, sendctrlc, sendbreak) are included
  with the ACL2s plugin, so there&#39;s nothing extra to install.  It&#39;s a bit of
  a mess, but it seems to work reliably these days.
&lt;/p&gt;
&lt;p&gt;
  Some wacky details of hiddencon.exe:&lt;br/&gt; The stdin and stdout of
  the program are inherited from the wrapper--not connected to the
  console, so one might wonder what the console is for.  The answer:
  Windows has no &quot;interrupt&quot; signal.  When one types &quot;Ctrl+C&quot; in a
  console, the console takes care of notifying the process in some
  weird way.  Windows has a mechanism for programmatically initiating
  a &quot;Ctrl+C&quot; equivalent, but its really only practical from a
  process that is &quot;attached&quot; to that console.  With this in mind,
  the job of the wrapper is to enable any other process to initiate an
  &quot;interrupt&quot; on the console it created.  The wrapper has a thread
  that reads and processes events from its Windows event queue, and
  one type of event, which could be initiated by anyone who knows the
  thread id of that wrapper thread, causes the wrapper to send an
  &quot;interruption&quot; to the hidden console.
&lt;/p&gt;

&lt;h2&gt;Hooks: How/what ACL2 functionality is modified for ACL2s&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;i&gt;Here I discuss the stuff that is common to all modes, including
  &quot;Compatible&quot; mode.  See the @(see acl2s-user-guide) section on modes
  and &quot;How modes are implemented&quot; below.&lt;/i&gt;
&lt;/blockquote&gt;
&lt;p&gt;
  To support the kind of interaction ACL2s provides requires lots of
  cooperation and metadata from ACL2.  Thus when we run ACL2 for an
  interactive session, we install some changes that disallow some
  things (see &lt;b&gt;Why won&#39;t ACL2s let me do &amp;lt;blah&amp;gt; in a
  session?&lt;/b&gt; in the @(see acl2s-faq)), spit out metadata for some
  things, and provide some system-level extensions in functionality.
  All of these ACL2 modifications are implemented via books
  distributed with ACL2 (@(&#39;[books]/acl2s/distribution/acl2s-hooks&#39;)).
&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;b&gt;preinit.lsp&lt;/b&gt; - disables raw Lisp debugger, which must be
  disabled because we can&#39;t tell for sure when/what kind of input it
  is expecting.  This file often includes other version-specific
  tweaks and fixes.  (This file is loaded by raw Lisp.)&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;acl2s.lisp&lt;/b&gt; - the main &quot;hooks&quot; book, which includes the
  &quot;hacking&quot; books now distributed with ACL2 and the rest of the
  books listed below.&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;canonical-print.lisp&lt;/b&gt; - functions for printing
  things... in a canonical way! (for reading by the acl2s plugin)&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;categorize-input.lisp&lt;/b&gt; - functions for (you guessed it...)
  categorizing inputs to ACL2.  Note that categorizing inputs is an
  example of the plugin executing commands in ACL2 that are unseen to
  the user.&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;super-history.lisp&lt;/b&gt; - implements the &quot;super-history&quot;
  mechanism of UNDOing and REDOing.  See &quot;How undo and redo are
  implemented&quot; below.&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;protection-hooks.lisp&lt;/b&gt; - implements a protection mechanism
  by which only those with knowledge of a secret number (the plugin)
  can invoke certain actions, such as UNDOing, REDOing, quitting, or
  breaking into raw Lisp.  Only a hash of the secret number is stored
  in the ACL2 runtime.  You could defeat the protection with your own
  trust tag, but I challenge you defeat it without using trust
  tags!&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;interaction-hooks.lisp&lt;/b&gt; - this redefines internal ACL2
  functions to provide metadata output that is sucked up (hidden) by
  the plugin and used to inform it about interaction.  Most
  importantly, extra environment information is sent with the prompt,
  a special marker is sent in the case of a form being successful, and
  a special marker is sent whenever ACL2 is about to read another
  object from *standard-oi*.  The plugin is now also given all of the
  package definitions so that they can be used in determining whether
  abstract syntax is the same in checking whether REDO is
  allowed.&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;markup-hooks.lisp&lt;/b&gt; - the markups in this book are not
  critical to intelligent interaction with ACL2, but add some extra
  helpful info, such as the position of checkpoints in the output.
  Along these lines, somewhere in startup stuff we remove destructor
  elimination as a checkpoint-causing processor, since destructor
  elimination cannot reduce theorems to non-theorems (confirmed by
  Matt Kaufmann).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
  After these are included at startup, @(see acl2::reset-prehistory)
  is used to suggest to newbies that ACL2 is starting fresh, but
  @(&#39;(strip-cars (global-val &#39;known-package-alist (w state)))&#39;) should
  reveal the &quot;ACL2S&quot; package is defined, and @(&#39;:ttags-seen&#39;)
  accurately suggests how severely spoiled your session is.
&lt;/p&gt;
&lt;p&gt;
  A consequence of including the standard hacking books for this code
  is that if you want to include them in your code in ACL2s, it will
  appear redundant during interactive development but is needed for
  certification as a book, for which none of the above are
  required/included.
&lt;/p&gt;
&lt;p&gt;
  If you run into a case in which you really need to do something
  differently between interactive development and certification (like
  when I&#39;m doing interactive development on the hooks books--my head
  hurts!), you can use the feature-based reader macros
  &lt;tt&gt;#+acl2s&lt;/tt&gt; and &lt;tt&gt;#-acl2s&lt;/tt&gt;.  &lt;tt&gt;:acl2s&lt;/tt&gt; is added to
  *features* for interactive development only.  Please don&#39;t abuse. ;)
&lt;/p&gt;

&lt;h2&gt;How undo and redo are implemented&lt;/h2&gt;
&lt;p&gt;
  The &lt;b&gt;super-history&lt;/b&gt; book of the acl2s_hooks plugin implements a
  stack of old &quot;states&quot;.  Actually there are two stacks: an undo
  stack and a redo stack.  An undo pops the undo stack, pushes that
  &quot;state&quot; onto the redo stack, and then installs the &quot;state&quot; on
  the top of the undo stack.  A redo pops the redo stack, pushes that
  &quot;state&quot; onto the undo stack, and installs it as current.  Any
  other &quot;state&quot;-changing form empties the redo stack, and the
  resulting &quot;state&quot; is pushed onto the undo stack.
&lt;/p&gt;
&lt;p&gt;
  Now I&#39;ve put &quot;state&quot; in quotes and not called it &quot;the world&quot;
  because this notion of state is not that same as ACL2&#39;s &lt;see
  topic=&quot;@(url acl2::state)&quot;&gt;state stobj&lt;/see&gt; and is more than just
  ACL2&#39;s &lt;see topic=&quot;@(url acl2::acl2)&quot;&gt;WORLD&lt;/see&gt;.  Our
  super-history states are the world and a bunch of state-global
  variables that store things like the current package, guard-checking
  setting, and other things that affect whether things might pass or
  fail, and what they mean.  The complete list is
  @(&#39;ACL2S::*SETTINGS-GLOBALS*&#39;) in the &lt;b&gt;categorize-input&lt;/b&gt; book
  of the acl2s_hooks.  This is similar to--but not exactly--what is
  saved and restored by &lt;see topic=&quot;@(url acl2::make-event)&quot;&gt;make-event
  &lt;/see&gt; (Our undo/redo mechanism predates the release of make-event.)
&lt;/p&gt;

&lt;h2&gt;How modes are implemented&lt;/h2&gt;
&lt;p&gt;
  Since version 0.9.0, ACL2s&#39; session modes other than &quot;Compatible&quot;
  come from an independent plugin, acl2s_modes.  (Note that all three
  plugins &quot;acl2s,&quot; &quot;acl2s_hooks,&quot; and &quot;acl2s_modes&quot; are
  installed with the &lt;i&gt;feature&lt;/i&gt; &quot;acl2s.&quot;) Thus, third party
  Eclipse plugins can also add their own session modes to ACL2s.  To
  do so, they must extend the &quot;acl2s.modedir&quot; extension point, like
  in the plugin.xml for &lt;a href=&quot;bobs_mode.jar&quot;&gt;an example &quot;Bob&#39;s
  mode&quot;&lt;/a&gt;:
&lt;/p&gt;
&lt;blockquote&gt;
@({
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;?eclipse version=&quot;3.2&quot;?&gt;
&lt;plugin&gt;
   &lt;extension point=&quot;acl2s.modedir&quot;&gt;
      &lt;include-book-dir-entry keyword=&quot;:bobs-mode&quot;/&gt;
      &lt;dependency keyword=&quot;:acl2s-modes&quot;/&gt;
      &lt;mode
            name=&quot;Bob&amp;apos;s Mode&quot;
            short_desc=&quot;Favorite mode of some hypothetical person named Bob&quot;
            long_desc=&quot;this is an optional long description&quot;
            book_dev=&quot;true&quot;
            extra_imports=&quot;(defun-bob defmacro-bob)&quot;
            init_file=&quot;bobs-mode.lsp&quot;
            precedence=&quot;50&quot;
            ttags=&quot;((:ccg))&quot;&gt;
      &lt;/mode&gt;
      &lt;certify-order-element book=&quot;defun-bob&quot;/&gt;
      &lt;certify-order-element book=&quot;defmacro-bob&quot;/&gt;
   &lt;/extension&gt;
&lt;/plugin&gt;
})
&lt;/blockquote&gt;
&lt;p&gt;
  The plugin is a JAR file with such a plugin.xml file, a proper
  manifest file, and any books and supporting files needed for the
  mode.
&lt;/p&gt;
&lt;p&gt;
  All of the components shown above are optional, and all but the
  &lt;tt&gt;include-book-dir-entry&lt;/tt&gt; can have multiple instances.  ACL2
  will be given the root install directory of the plugin with
  add-include-book-dir and the keyword in
  &lt;tt&gt;include-book-dir-entry&lt;/tt&gt;.  In fact, ACL2s will create a
  &quot;dir.lsp&quot; file with that form whenever the plugin is used.
  Specifying an &lt;tt&gt;include-book-dir-entry&lt;/tt&gt; is required if the
  initialization of any modes need to refer to that directory for
  including books.  (The current directory will &lt;i&gt;not&lt;/i&gt; be set to
  the plugin directory.)
&lt;/p&gt;
&lt;p&gt;
  Each include-book keyword directory used in your mode initialization
  (other than yourself and &lt;tt&gt;:system&lt;/tt&gt;) should be listed as a
  &lt;tt&gt;dependency&lt;/tt&gt;.  Bob&#39;s mode uses &quot;ccg&quot; from
  &lt;tt&gt;:acl2s-modes&lt;/tt&gt;.
&lt;/p&gt;
&lt;p&gt;
  Technically, only the name and short_desc are required for a mode.
  The non-obvious parts:
&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;tt&gt;book_dev&lt;/tt&gt; - whether book development/certification
  should be allowed in this mode (default true)&lt;/li&gt;
  &lt;li&gt;&lt;tt&gt;extra_imports&lt;/tt&gt; - any extra symbols that are suggested to
  be imported into packages defined under this mode, aside from the
  ACL2 standard set&lt;/li&gt;
  &lt;li&gt;&lt;tt&gt;init_file&lt;/tt&gt; - the file with the forms to execute at
  startup to initialize the mode.  These should not refer to the
  current directory (instead use :dir :whatever).  If
  &lt;tt&gt;book_dev&lt;/tt&gt; is true, the forms should follow the guidelines
  for a .acl2 file, or commands that are okay prior to @(see
  acl2::certify-book).  We recommend the &lt;i&gt;whatever&lt;/i&gt;-mode.lsp
  naming convention.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
  Each &lt;tt&gt;certify-order-element&lt;/tt&gt; names a book to be certified
  with the ACL2s system books, in the order given.  You should name
  all the books in this mode directory your modes depend on.  Note
  that here, like in include-book and certify-book, &quot;.lisp&quot; is not
  included in the name.
&lt;/p&gt;
"</span>)</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>