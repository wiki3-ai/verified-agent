<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>defdata-core - ACL2 Book</title>
  <meta property="name" content="defdata-core">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">defdata-core</h1>
    <div class="path"><a href="defdata-core.lisp" class="source-link">books/acl2s/defdata/defdata-core</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"DEFDATA"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../acl2s/cgen/acl2s-parameter.html" title="Open acl2s/cgen/acl2s-parameter">"acl2s/cgen/acl2s-parameter"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../data-structures/utilities.html" title="Open data-structures/utilities">"data-structures/utilities"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../coi/symbol-fns/symbol-fns.html" title="Open coi/symbol-fns/symbol-fns">"coi/symbol-fns/symbol-fns"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../tools/templates.html" title="Open tools/templates">"tools/templates"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="defdata-util.html" title="Open defdata-util">"defdata-util"</a>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="builtin-combinators.html" title="Open builtin-combinators">"builtin-combinators"</a>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-set-state-ok" data-sym="SET-STATE-OK">set-state-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-apply-mget-to-var-lst" data-defines="APPLY-MGET-TO-VAR-LST" data-references="CDR,MGET,QUOTE,LIST,CONS,CAR,SYMBOL-NAME,INTERN,D-KEYWORD-NAME,LET,ENDP,IF,XVAR,FIELDS,DEFUN" data-part-name="APPLY-MGET-TO-VAR-LST" data-part-args="XVAR,FIELDS" data-part-body="CDR,APPLY-MGET-TO-VAR-LST,XVAR,MGET,QUOTE,LIST,CONS,CAR,SYMBOL-NAME,INTERN,D-KEYWORD-NAME,LET,FIELDS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="APPLY-MGET-TO-VAR-LST">apply-mget-to-var-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-apply-mget-to-var-lst" data-sym="APPLY-MGET-TO-VAR-LST" title="(defun defdata::apply-mget-to-var-lst (defdata::fields defdata::xvar)
  (if (endp defdata::fields)
      nil
      (let ((defdata::d-keyword-name
             (intern (symbol-name (car defdata::fields)) &quot;KEYWORD&quot;)))
...">apply-mget-to-var-lst</a>
  (fields xvar)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> fields)
    nil
    (let ((d-keyword-name (<a class="sym-link system" href="../../../axioms.html#def-intern" data-sym="INTERN">intern</a> (symbol-name (car fields)) <span class="string">"KEYWORD"</span>)))
      (cons (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> 'mget d-keyword-name xvar)
        (<a class="sym-link local-def" href="#def-apply-mget-to-var-lst" data-sym="APPLY-MGET-TO-VAR-LST" title="(defun defdata::apply-mget-to-var-lst (defdata::fields defdata::xvar)
  (if (endp defdata::fields)
      nil
      (let ((defdata::d-keyword-name
             (intern (symbol-name (car defdata::fields)) &quot;KEYWORD&quot;)))
...">apply-mget-to-var-lst</a> (cdr fields)
          xvar)))))</pre>
  </div>

<div class="form-block macro" id="def-tag_3D" data-defines="TAG=" data-references="MGET,EQUAL,CONSP,AND,QUASIQUOTE,TAG,X,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TAG=">tag=</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-tag_3D" data-sym="TAG=" title="(defmacro tag= (defdata::x defdata::tag)
  `(and (consp ,defdata::x) (equal (mget :0tag ,defdata::x) ,defdata::tag)))">tag=</a>
  (x tag)
  `(<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp ,DEFDATA::X)
    (equal (mget <span class="keyword">:0tag</span> ,DEFDATA::X) ,DEFDATA::TAG)))</pre>
  </div>

<div class="form-block macro" id="def-make-pred-i_2E_2E_2E" data-defines="MAKE-PRED-I..." data-references="WRLD,B,C,M,A,KWD-ALIST,MAKE-PRED-I,QUASIQUOTE,X,S,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-PRED-I...">make-pred-i...</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-make-pred-i_2E_2E_2E" data-sym="MAKE-PRED-I..." title="(defmacro defdata::make-pred-i... (defdata::s defdata::x)
  `(defdata::make-pred-i ,defdata::s ,defdata::x defdata::kwd-alist defdata::a
    defdata::m defdata::c defdata::b defdata::wrld))">make-pred-i...</a>
  (s x)
  `(make-pred-i ,DEFDATA::S
    ,DEFDATA::X
    kwd-alist
    a
    m
    c
    b
    wrld))</pre>
  </div>

<div class="form-block macro" id="def-make-pred-is_2E_2E_2E" data-defines="MAKE-PRED-IS..." data-references="WRLD,B,C,M,A,KWD-ALIST,MAKE-PRED-IS,QUASIQUOTE,XS,SS,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-PRED-IS...">make-pred-is...</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-make-pred-is_2E_2E_2E" data-sym="MAKE-PRED-IS..." title="(defmacro defdata::make-pred-is... (defdata::ss defdata::xs)
  `(defdata::make-pred-is ,defdata::ss ,defdata::xs defdata::kwd-alist
    defdata::a defdata::m defdata::c defdata::b defdata::wrld))">make-pred-is...</a>
  (ss xs)
  `(make-pred-is ,DEFDATA::SS
    ,DEFDATA::XS
    kwd-alist
    a
    m
    c
    b
    wrld))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> make-pred-i
    (s x
      kwd-alist
      a
      m
      c
      b
      wrld)
    <span class="string">"predicate interpretation/expression for core defdata exp s.
x is the name of the expr that currently names the argument under question/predication
kwd-alist gives some defaults.
M is type metadata table + some basic info for the clique of types being defined.
C is the constructor table + some basic info for new constructors.
B is the builtin combinator table."</span>
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((possible-constant-value-p s) `(equal ,DEFDATA::X ,DEFDATA::S))
      ((proper-symbolp s) (if (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> s m)
          `(,(DEFDATA::PREDICATE-NAME DEFDATA::S DEFDATA::A DEFDATA::M) ,DEFDATA::X)
          `(equal ,DEFDATA::X ,DEFDATA::S)))
      ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> s)) (<a class="sym-link local-def" href="#def-make-pred-i_2E_2E_2E" data-sym="MAKE-PRED-I..." title="(defmacro defdata::make-pred-i... (defdata::s defdata::x)
  `(defdata::make-pred-i ,defdata::s ,defdata::x defdata::kwd-alist defdata::a
    defdata::m defdata::c defdata::b defdata::wrld))">make-pred-i...</a> (cdr s) x))
      ((<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car s) b) (b* ((pred-i-fn (get2 (car s) <span class="keyword">:pred-i</span> b)))
          (if pred-i-fn
            (funcall-w pred-i-fn
              (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x s)
              'make-pred-i
              wrld)
            `(,(CAR DEFDATA::S) . ,(DEFDATA::MAKE-PRED-IS... (CDR DEFDATA::S)
  (MAKE-LIST (DEFDATA::LEN (CDR DEFDATA::S)) :INITIAL-ELEMENT DEFDATA::X))))))
      ((<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car s) c) (b* ((conx (car s)) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> recog dest-pred-alist) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (get2 conx <span class="keyword">:recog</span> c)
                (get2 conx <span class="keyword">:dest-pred-alist</span> c)))
            (dest-calls (list-up-lists (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> dest-pred-alist)
                (<a class="sym-link system" href="../../../axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (cdr s))
                  <span class="keyword">:initial-element</span> x)))
            (field-pred-alist (get2 conx <span class="keyword">:field-pred-alist</span> c))
            (mget-dex-calls (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> field-pred-alist
                (<a class="sym-link local-def" href="#def-apply-mget-to-var-lst" data-sym="APPLY-MGET-TO-VAR-LST" title="(defun defdata::apply-mget-to-var-lst (defdata::fields defdata::xvar)
  (if (endp defdata::fields)
      nil
      (let ((defdata::d-keyword-name
             (intern (symbol-name (car defdata::fields)) &quot;KEYWORD&quot;)))
...">apply-mget-to-var-lst</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> field-pred-alist)
                  x)))
            (dest-calls (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (get1 <span class="keyword">:recp</span> kwd-alist)
                  mget-dex-calls)
                dest-calls))
            (binding (bind-names-vals (cdr s)
                dest-calls))
            (call-exprs (replace-calls-with-names dest-calls
                (cdr s)))
            (rst (<a class="sym-link local-def" href="#def-make-pred-is_2E_2E_2E" data-sym="MAKE-PRED-IS..." title="(defmacro defdata::make-pred-is... (defdata::ss defdata::xs)
  `(defdata::make-pred-is ,defdata::ss ,defdata::xs defdata::kwd-alist
    defdata::a defdata::m defdata::c defdata::b defdata::wrld))">make-pred-is...</a> (cdr s)
                call-exprs))
            (recog-calls (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> recog x))))
          (if binding
            `(<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> ,@DEFDATA::RECOG-CALLS
              (let ,DEFDATA::BINDING
                (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> . ,DEFDATA::RST)))
            `(<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> ,@DEFDATA::RECOG-CALLS ,@DEFDATA::RST))))
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> `(,(CAR DEFDATA::S) . ,(DEFDATA::MAKE-PRED-IS... (CDR DEFDATA::S)
  (MAKE-LIST (DEFDATA::LEN (CDR DEFDATA::S)) :INITIAL-ELEMENT DEFDATA::X))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> make-pred-is
    (texps xs
      kwd-alist
      a
      m
      c
      b
      wrld)
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> texps)
      'nil
      (cons (<a class="sym-link local-def" href="#def-make-pred-i_2E_2E_2E" data-sym="MAKE-PRED-I..." title="(defmacro defdata::make-pred-i... (defdata::s defdata::x)
  `(defdata::make-pred-i ,defdata::s ,defdata::x defdata::kwd-alist defdata::a
    defdata::m defdata::c defdata::b defdata::wrld))">make-pred-i...</a> (car texps)
          (car xs))
        (<a class="sym-link local-def" href="#def-make-pred-is_2E_2E_2E" data-sym="MAKE-PRED-IS..." title="(defmacro defdata::make-pred-is... (defdata::ss defdata::xs)
  `(defdata::make-pred-is ,defdata::ss ,defdata::xs defdata::kwd-alist
    defdata::a defdata::m defdata::c defdata::b defdata::wrld))">make-pred-is...</a> (cdr texps)
          (cdr xs))))))</pre>
  </div>

<div class="form-block function" id="def-make-pred-declare-forms" data-defines="MAKE-PRED-DECLARE-FORMS" data-references="QUOTE,XARGS,DECLARE,QUASIQUOTE,IF,LIST,ACTUALS,GET1,GUARD-LAMBDA,B*,KWD-ALIST,XVAR,DEFUN" data-used-by="PRED-EVENT" data-part-name="MAKE-PRED-DECLARE-FORMS" data-part-args="KWD-ALIST,XVAR" data-part-body="QUOTE,XARGS,DECLARE,QUASIQUOTE,IF,XVAR,LIST,ACTUALS,KWD-ALIST,GET1,GUARD-LAMBDA,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-PRED-DECLARE-FORMS">make-pred-declare-forms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-pred-declare-forms" data-sym="MAKE-PRED-DECLARE-FORMS" title="(defun defdata::make-pred-declare-forms (defdata::xvar defdata::kwd-alist)
  (defdata::b*
   ((defdata::guard-lambda (defdata::get1 :pred-guard defdata::kwd-alist))
    (defdata::actuals (list defdata::xvar)))
   (if defdata::guard-lambda
...">make-pred-declare-forms</a>
  (xvar kwd-alist)
  (b* ((guard-lambda (get1 <span class="keyword">:pred-guard</span> kwd-alist)) (actuals (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> xvar)))
    (if guard-lambda
      `((declare (xargs <span class="keyword">:guard</span> ,(DEFDATA::EXPAND-LAMBDA (CONS DEFDATA::GUARD-LAMBDA DEFDATA::ACTUALS)))))
      'nil)))</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop funcalls-append
  (fs <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a> wrld)
  (for ((f in fs))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (funcall-w f
        <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>
        '<a class="sym-link local-def" href="#def-defdata-events" data-sym="DEFDATA-EVENTS" title="(defun defdata::defdata-events (defdata::a1 defdata::wrld)
  (defdata::b*
   (((list defdata::d defdata::kwd-alist) defdata::a1)
    (defdata::d-alist (cdar defdata::d))
    (defdata::name (defdata::get1 &#39;defdata::name defdata::d-alist))
...">defdata-events</a>
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-pred-event" data-defines="PRED-EVENT" data-references="QUASIQUOTE,DEFUND,DEF,PREDICATE-NAME,MAKE-PRED-DECLARE-FORMS,PRED-DECLS,MAKE-PRED-I,PRED-BODY,GENERATE-VARIABLE,MEMBER-EQ,IF,XVAR,N,STRIP-CARS,FORBIDDEN-NAMES,AVOID-LST,FIX-INTERN$,D,PKG,BUILTIN-COMBINATOR-TABLE,B,DATA-CONSTRUCTOR-TABLE,C,TYPE-ALIAS-TABLE,TYPE-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,NOT,AND,RECP,KWD-ALIST,NEW-TYPES,NEW-CONSTRUCTORS,?N,NDEF,ASSOCS,ALLOWS-ARITY,WHEN,MAKE-PREDICATE-SYMBOL,PRED-NAME,GET1,CURR-PKG,A,NAME,CONS,B*,WRLD,TOP-KWD-ALIST,P,DEFUN" data-part-name="PRED-EVENT" data-part-args="WRLD,TOP-KWD-ALIST,P" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRED-EVENT">pred-event</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pred-event" data-sym="PRED-EVENT" title="(defun defdata::pred-event (defdata::p defdata::top-kwd-alist defdata::wrld)
  &quot;make a predicate defun event.&quot;
  (defdata::b*
   (((cons defdata::name defdata::a) defdata::p)
    (defdata::curr-pkg (defdata::get1 :current-package defdata::top-kwd-alist))
...">pred-event</a>
  (p top-kwd-alist wrld)
  <span class="string">"make a predicate defun event."</span>
  (b* (((cons name a) p) (curr-pkg (get1 <span class="keyword">:current-package</span> top-kwd-alist))
      (pred-name (make-predicate-symbol name
          curr-pkg))
      ((when (allows-arity pred-name <span class="number">1</span> wrld)) nil)
      ((assocs ndef
         ?n
         new-constructors
         new-types
         kwd-alist) a)
      (recp (get1 <span class="keyword">:recp</span> kwd-alist))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> new-constructors (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> recp))) nil)
      (m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-types
          (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
            wrld)))
      (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (c (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-constructors
          (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'data-constructor-table
            wrld)))
      (b (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'builtin-combinator-table
          wrld))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> kwd-alist top-kwd-alist))
      (pkg (get1 <span class="keyword">:current-package</span> kwd-alist))
      (d (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> <span class="string">"D"</span> pkg))
      (avoid-lst (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (forbidden-names)
          (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> n)))
      (xvar (if (<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> d avoid-lst)
          d
          (generate-variable d
            avoid-lst
            nil
            nil
            wrld)))
      (pred-body (make-pred-i ndef
          xvar
          kwd-alist
          a
          m
          c
          b
          wrld))
      (pred-decls (<a class="sym-link local-def" href="#def-make-pred-declare-forms" data-sym="MAKE-PRED-DECLARE-FORMS" title="(defun defdata::make-pred-declare-forms (defdata::xvar defdata::kwd-alist)
  (defdata::b*
   ((defdata::guard-lambda (defdata::get1 :pred-guard defdata::kwd-alist))
    (defdata::actuals (list defdata::xvar)))
   (if defdata::guard-lambda
...">make-pred-declare-forms</a> xvar
          kwd-alist))
      (pred-name (predicate-name name
          a
          m))
      (def (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> recp)
            (get1 <span class="keyword">:disable-non-recursive-p</span> kwd-alist))
          'defund
          '<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a>)))
    `((,DEFDATA::DEF ,DEFDATA::PRED-NAME
       (,DEFDATA::XVAR)
       ,@DEFDATA::PRED-DECLS
       ,DEFDATA::PRED-BODY))))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop pred-events
  (ps kwd-alist wrld)
  (for ((p in ps))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-pred-event" data-sym="PRED-EVENT" title="(defun defdata::pred-event (defdata::p defdata::top-kwd-alist defdata::wrld)
  &quot;make a predicate defun event.&quot;
  (defdata::b*
   (((cons defdata::name defdata::a) defdata::p)
    (defdata::curr-pkg (defdata::get1 :current-package defdata::top-kwd-alist))
...">pred-event</a> p
        kwd-alist
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-already-defined-pred-defthm-event" data-defines="ALREADY-DEFINED-PRED-DEFTHM-EVENT" data-references="VERIFY-GUARDS,DEFTHM,S+,DEFTHM-NAME,EQUAL,QUASIQUOTE,DEFTHM-BODY,MAKE-PRED-I,PRED-BODY,GENERATE-VARIABLE,MEMBER-EQ,IF,XVAR,FIX-INTERN$,D,N,STRIP-CARS,FORBIDDEN-NAMES,AVOID-LST,BUILTIN-COMBINATOR-TABLE,B,TYPE-ALIAS-TABLE,TYPE-METADATA-TABLE,APPEND,M,DATA-CONSTRUCTOR-TABLE,QUOTE,TABLE-ALIST,C,KWD-ALIST,NEW-TYPES,?N,NDEF,ASSOCS,ALLOWS-ARITY,UNLESS,MAKE-PREDICATE-SYMBOL,PRED-NAME,GET1,CURR-PKG,A,NAME,CONS,B*,WRLD,TOP-KWD-ALIST,P,DEFUN" data-part-name="ALREADY-DEFINED-PRED-DEFTHM-EVENT" data-part-args="WRLD,TOP-KWD-ALIST,P" data-part-body="VERIFY-GUARDS,DEFTHM,S+,DEFTHM-NAME,EQUAL,QUASIQUOTE,DEFTHM-BODY,MAKE-PRED-I,PRED-BODY,GENERATE-VARIABLE,MEMBER-EQ,IF,XVAR,FIX-INTERN$,D,N,STRIP-CARS,FORBIDDEN-NAMES,AVOID-LST,BUILTIN-COMBINATOR-TABLE,B,TYPE-ALIAS-TABLE,TYPE-METADATA-TABLE,APPEND,M,DATA-CONSTRUCTOR-TABLE,QUOTE,TABLE-ALIST,C,KWD-ALIST,NEW-TYPES,?N,NDEF,ASSOCS,WRLD,ALLOWS-ARITY,UNLESS,MAKE-PREDICATE-SYMBOL,PRED-NAME,TOP-KWD-ALIST,GET1,CURR-PKG,P,A,NAME,CONS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ALREADY-DEFINED-PRED-DEFTHM-EVENT">already-defined-pred-defthm-event</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-already-defined-pred-defthm-event" data-sym="ALREADY-DEFINED-PRED-DEFTHM-EVENT" title="(defun defdata::already-defined-pred-defthm-event
       (defdata::p defdata::top-kwd-alist defdata::wrld)
  (defdata::b*
   (((cons defdata::name defdata::a) defdata::p)
    (defdata::curr-pkg (defdata::get1 :current-package defdata::top-kwd-alist))
...">already-defined-pred-defthm-event</a>
  (p top-kwd-alist wrld)
  (b* (((cons name a) p) (curr-pkg (get1 <span class="keyword">:current-package</span> top-kwd-alist))
      (pred-name (make-predicate-symbol name
          curr-pkg))
      ((unless (allows-arity pred-name <span class="number">1</span> wrld)) nil)
      ((assocs ndef
         ?n
         new-types
         kwd-alist) a)
      (c (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'data-constructor-table
          wrld))
      (m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-types
          (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
            wrld)))
      (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (b (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'builtin-combinator-table
          wrld))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> kwd-alist top-kwd-alist))
      (avoid-lst (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (forbidden-names)
          (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> n)))
      (d (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> <span class="string">"D"</span> curr-pkg))
      (xvar (if (<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> d avoid-lst)
          d
          (generate-variable d
            avoid-lst
            nil
            nil
            wrld)))
      (pred-body (make-pred-i ndef
          xvar
          kwd-alist
          a
          m
          c
          b
          wrld))
      (defthm-body `(equal (,DEFDATA::PRED-NAME ,DEFDATA::XVAR)
          ,DEFDATA::PRED-BODY))
      (defthm-name (s+ name
          <span class="string">"P-TESTTHM"</span>
          <span class="keyword">:pkg</span> curr-pkg)))
    `((<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,DEFDATA::DEFTHM-NAME
       ,DEFDATA::DEFTHM-BODY
       <span class="keyword">:rule-classes</span> nil
       <span class="keyword">:hints</span> ,(DEFDATA::GET1 :HINTS DEFDATA::KWD-ALIST)) (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> ,DEFDATA::DEFTHM-NAME))))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop already-defined-pred-defthm-events
  (ps kwd-alist wrld)
  (for ((p in ps))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-already-defined-pred-defthm-event" data-sym="ALREADY-DEFINED-PRED-DEFTHM-EVENT" title="(defun defdata::already-defined-pred-defthm-event
       (defdata::p defdata::top-kwd-alist defdata::wrld)
  (defdata::b*
   (((cons defdata::name defdata::a) defdata::p)
    (defdata::curr-pkg (defdata::get1 :current-package defdata::top-kwd-alist))
...">already-defined-pred-defthm-event</a> p
        kwd-alist
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-predicate-events1" data-defines="PREDICATE-EVENTS1" data-references="MUTUAL-RECURSION,QUASIQUOTE,CDR,CONSP,AND,IF,LIST,GET1,FUNCALLS-APPEND,APPEND,PRED-EVENTS,ALREADY-DEFINED-PRED-DEFTHM-EVENTS,B*,WRLD,KWD-ALIST,D,DEFUN" data-part-name="PREDICATE-EVENTS1" data-part-args="WRLD,KWD-ALIST,D" data-part-body="MUTUAL-RECURSION,QUASIQUOTE,CDR,CONSP,AND,IF,LIST,GET1,FUNCALLS-APPEND,APPEND,PRED-EVENTS,WRLD,KWD-ALIST,D,ALREADY-DEFINED-PRED-DEFTHM-EVENTS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PREDICATE-EVENTS1">predicate-events1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-predicate-events1" data-sym="PREDICATE-EVENTS1" title="(defun defdata::predicate-events1 (defdata::d defdata::kwd-alist defdata::wrld)
  (defdata::b*
   ((defdata::already-defined-pred-defthm-events
     (defdata::already-defined-pred-defthm-events defdata::d defdata::kwd-alist
      defdata::wrld))
...">predicate-events1</a>
  (d kwd-alist wrld)
  (b* ((already-defined-pred-defthm-events (already-defined-pred-defthm-events d
         kwd-alist
         wrld)) (pred-events (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (pred-events d
            kwd-alist
            wrld)
          (funcalls-append (get1 <span class="keyword">:in-pred-hook-fns</span> kwd-alist)
            (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> d kwd-alist wrld)
            wrld))))
    (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp pred-events)
        (consp (cdr pred-events)))
      `((<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> ,@DEFDATA::PRED-EVENTS))
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> already-defined-pred-defthm-events
        pred-events))))</pre>
  </div>

<div class="form-block function" id="def-collect-keyword-ev" data-defines="COLLECT-KEYWORD-EV" data-references="GET1,ALL-EV,KWD-ALIST,ASSOCS,A,&,CONS,B*,KEY,P,DEFUN" data-part-name="COLLECT-KEYWORD-EV" data-part-args="KEY,P" data-part-body="KEY,GET1,ALL-EV,KWD-ALIST,ASSOCS,P,A,&,CONS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-KEYWORD-EV">collect-keyword-ev</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-keyword-ev" data-sym="COLLECT-KEYWORD-EV" title="(defun defdata::collect-keyword-ev (defdata::p defdata::key)
  (defdata::b*
   (((cons defdata::&amp; defdata::a) defdata::p)
    ((assocs defdata::kwd-alist) defdata::a)
    (defdata::all-ev (defdata::get1 defdata::key defdata::kwd-alist)))">collect-keyword-ev</a>
  (p key)
  (b* (((cons &amp; a) p) ((assocs kwd-alist) a)
      (all-ev (get1 key kwd-alist)))
    all-ev))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop collect-events1
  (ps key)
  (for ((p in ps))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-collect-keyword-ev" data-sym="COLLECT-KEYWORD-EV" title="(defun defdata::collect-keyword-ev (defdata::p defdata::key)
  (defdata::b*
   (((cons defdata::&amp; defdata::a) defdata::p)
    ((assocs defdata::kwd-alist) defdata::a)
    (defdata::all-ev (defdata::get1 defdata::key defdata::kwd-alist)))">collect-keyword-ev</a> p key))))</pre>
  </div>

<div class="form-block function" id="def-collect-events" data-defines="COLLECT-EVENTS" data-references="COLLECT-EVENTS1,GET1,APPEND,KWD-ALIST,D,KEY,DEFUN" data-part-name="COLLECT-EVENTS" data-part-args="KWD-ALIST,D,KEY" data-part-body="D,COLLECT-EVENTS1,KWD-ALIST,KEY,GET1,APPEND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-EVENTS">collect-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-events" data-sym="COLLECT-EVENTS" title="(defun defdata::collect-events (defdata::key defdata::d defdata::kwd-alist)
  (append (defdata::get1 defdata::key defdata::kwd-alist)
          (defdata::collect-events1 defdata::d defdata::key)))">collect-events</a>
  (key d kwd-alist)
  (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (get1 key kwd-alist)
    (collect-events1 d key)))</pre>
  </div>

<div class="form-block function" id="def-pred-rule-disablep" data-defines="PRED-RULE-DISABLEP" data-references="EQUAL,CADR,SYMBOLP,WHEN,T,ABBREVIATION,QUOTE,REWRITE-RULE,ACCESS,EQ,UNLESS,B*,RULE,DEFUN" data-used-by="COLLECT-PRED-RUNES-TO-DISABLE" data-part-name="PRED-RULE-DISABLEP" data-part-args="RULE" data-part-body="EQUAL,CADR,SYMBOLP,WHEN,T,ABBREVIATION,QUOTE,RULE,REWRITE-RULE,ACCESS,EQ,UNLESS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRED-RULE-DISABLEP">pred-rule-disablep</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pred-rule-disablep" data-sym="PRED-RULE-DISABLEP" title="(defun defdata::pred-rule-disablep (defdata::rule)
  (defdata::b*
   (((unless (eq (access rewrite-rule defdata::rule :subclass) &#39;abbreviation))
     t)
    ((when (symbolp (cadr (access rewrite-rule defdata::rule :lhs)))) t)
...">pred-rule-disablep</a>
  (rule)
  (b* (((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:subclass</span>)
          'abbreviation)) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>) ((when (symbolp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:lhs</span>)))) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      ((unless (equal (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:rhs</span>) ''<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    nil))</pre>
  </div>

<div class="form-block function" id="def-collect-pred-runes-to-disable" data-defines="COLLECT-PRED-RUNES-TO-DISABLE" data-references="CDR,REWRITE-RULE,ACCESS,CONS,CAR,PRED-RULE-DISABLEP,ATOM,IF,RULES,DEFUN" data-part-name="COLLECT-PRED-RUNES-TO-DISABLE" data-part-args="RULES" data-part-body="CDR,COLLECT-PRED-RUNES-TO-DISABLE,REWRITE-RULE,ACCESS,CONS,CAR,PRED-RULE-DISABLEP,RULES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-PRED-RUNES-TO-DISABLE">collect-pred-runes-to-disable</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-pred-runes-to-disable" data-sym="COLLECT-PRED-RUNES-TO-DISABLE" title="(defun defdata::collect-pred-runes-to-disable (defdata::rules)
  (if (atom defdata::rules)
      nil
      (if (defdata::pred-rule-disablep (car defdata::rules))
          (cons (access rewrite-rule (car defdata::rules) :rune)
...">collect-pred-runes-to-disable</a>
  (rules)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> rules)
    nil
    (if (<a class="sym-link local-def" href="#def-pred-rule-disablep" data-sym="PRED-RULE-DISABLEP" title="(defun defdata::pred-rule-disablep (defdata::rule)
  (defdata::b*
   (((unless (eq (access rewrite-rule defdata::rule :subclass) &#39;abbreviation))
     t)
    ((when (symbolp (cadr (access rewrite-rule defdata::rule :lhs)))) t)
...">pred-rule-disablep</a> (car rules))
      (cons (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule (car rules) <span class="keyword">:rune</span>)
        (<a class="sym-link local-def" href="#def-collect-pred-runes-to-disable" data-sym="COLLECT-PRED-RUNES-TO-DISABLE" title="(defun defdata::collect-pred-runes-to-disable (defdata::rules)
  (if (atom defdata::rules)
      nil
      (if (defdata::pred-rule-disablep (car defdata::rules))
          (cons (access rewrite-rule (car defdata::rules) :rune)
...">collect-pred-runes-to-disable</a> (cdr rules)))
      (<a class="sym-link local-def" href="#def-collect-pred-runes-to-disable" data-sym="COLLECT-PRED-RUNES-TO-DISABLE" title="(defun defdata::collect-pred-runes-to-disable (defdata::rules)
  (if (atom defdata::rules)
      nil
      (if (defdata::pred-rule-disablep (car defdata::rules))
          (cons (access rewrite-rule (car defdata::rules) :rune)
...">collect-pred-runes-to-disable</a> (cdr rules)))))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop collect-disable-runes-preds
  (preds wrld)
  (for ((pred in preds))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-collect-pred-runes-to-disable" data-sym="COLLECT-PRED-RUNES-TO-DISABLE" title="(defun defdata::collect-pred-runes-to-disable (defdata::rules)
  (if (atom defdata::rules)
      nil
      (if (defdata::pred-rule-disablep (car defdata::rules))
          (cons (access rewrite-rule (car defdata::rules) :rune)
...">collect-pred-runes-to-disable</a> (acl2-getprop pred 'lemmas wrld)))))</pre>
  </div>

<div class="form-block function" id="def-collect-keyword-ev" data-defines="COLLECT-KEYWORD-EV" data-references="GET1,ALL-EV,KWD-ALIST,ASSOCS,A,&,CONS,B*,KEY,P,DEFUN" data-part-name="COLLECT-KEYWORD-EV" data-part-args="KEY,P" data-part-body="KEY,GET1,ALL-EV,KWD-ALIST,ASSOCS,P,A,&,CONS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-KEYWORD-EV">collect-keyword-ev</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-keyword-ev" data-sym="COLLECT-KEYWORD-EV" title="(defun defdata::collect-keyword-ev (defdata::p defdata::key)
  (defdata::b*
   (((cons defdata::&amp; defdata::a) defdata::p)
    ((assocs defdata::kwd-alist) defdata::a)
    (defdata::all-ev (defdata::get1 defdata::key defdata::kwd-alist)))">collect-keyword-ev</a>
  (p key)
  (b* (((cons &amp; a) p) ((assocs kwd-alist) a)
      (all-ev (get1 key kwd-alist)))
    all-ev))</pre>
  </div>

<div class="form-block function" id="def-predicate-events" data-defines="PREDICATE-EVENTS" data-references="ENABLE,DISABLE*,IN-THEORY,LOCAL,COMMENTARY,QUASIQUOTE,CONSTITUENT-TYPES,PREDICATE-NAMES,COLLECT-DISABLE-RUNES-PREDS,DISABLE-RULES,B*,WRLD,KWD-ALIST,D,DEFUN" data-part-name="PREDICATE-EVENTS" data-part-args="WRLD,KWD-ALIST,D" data-part-body="ENABLE,DISABLE*,IN-THEORY,LOCAL,COMMENTARY,QUASIQUOTE,WRLD,D,CONSTITUENT-TYPES,PREDICATE-NAMES,COLLECT-DISABLE-RUNES-PREDS,DISABLE-RULES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PREDICATE-EVENTS">predicate-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-predicate-events" data-sym="PREDICATE-EVENTS" title="(defun defdata::predicate-events (defdata::d defdata::kwd-alist defdata::wrld)
  (defdata::b*
   ((defdata::disable-rules
     (defdata::collect-disable-runes-preds
      (defdata::predicate-names
...">predicate-events</a>
  (d kwd-alist wrld)
  (b* ((disable-rules (collect-disable-runes-preds (predicate-names (constituent-types d wrld))
         wrld)))
    `(,@(DEFDATA::FUNCALLS-APPEND
   (DEFDATA::GET1 :PRE-PRED-HOOK-FNS DEFDATA::KWD-ALIST)
   (LIST DEFDATA::D DEFDATA::KWD-ALIST DEFDATA::WRLD) DEFDATA::WRLD) ,@(DEFDATA::COLLECT-EVENTS :PRE-PRED-EVENTS DEFDATA::D DEFDATA::KWD-ALIST)
      (commentary ,(DEFDATA::GET1 :PRINT-COMMENTARY DEFDATA::KWD-ALIST)
        <span class="string">"~| Predicate events...~%"</span>)
      ,@(DEFDATA::PREDICATE-EVENTS1 DEFDATA::D DEFDATA::KWD-ALIST DEFDATA::WRLD)
      (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable* . ,DEFDATA::DISABLE-RULES)))
      (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable ,@(DEFDATA::MAKE-PREDICATE-SYMBOL-LST (DEFDATA::STRIP-CARS DEFDATA::D)
   (DEFDATA::GET1 :CURRENT-PACKAGE DEFDATA::KWD-ALIST)))))
      ,@(DEFDATA::COLLECT-EVENTS :POST-PRED-EVENTS DEFDATA::D DEFDATA::KWD-ALIST)
      ,@(DEFDATA::FUNCALLS-APPEND
   (DEFDATA::GET1 :POST-PRED-HOOK-FNS DEFDATA::KWD-ALIST)
   (LIST DEFDATA::D DEFDATA::KWD-ALIST DEFDATA::WRLD) DEFDATA::WRLD))))</pre>
  </div>

<div class="form-block function" id="def-register-type-event" data-defines="REGISTER-TYPE-EVENT" data-references="REGISTER-TYPE,QUASIQUOTE,?KWD-ALIST,TYPE-ALIAS-TABLE,AT,TYPE-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,KWD-ALIST,NEW-TYPES,PDEF,ODEF,NDEF,ASSOCS,A,NAME,CONS,B*,IGNORABLE,DECLARE,WRLD,TOP-KWD-ALIST,P,DEFUN" data-part-name="REGISTER-TYPE-EVENT" data-part-args="WRLD,TOP-KWD-ALIST,P" data-part-declare="TOP-KWD-ALIST,IGNORABLE,DECLARE" data-part-body="REGISTER-TYPE,QUASIQUOTE,TOP-KWD-ALIST,?KWD-ALIST,TYPE-ALIAS-TABLE,AT,WRLD,TYPE-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,KWD-ALIST,NEW-TYPES,PDEF,ODEF,NDEF,ASSOCS,P,A,NAME,CONS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REGISTER-TYPE-EVENT">register-type-event</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-register-type-event" data-sym="REGISTER-TYPE-EVENT" title="(defun defdata::register-type-event
       (defdata::p defdata::top-kwd-alist defdata::wrld)
  (declare (ignorable defdata::top-kwd-alist))
  (defdata::b*
   (((cons defdata::name defdata::a) defdata::p)
...">register-type-event</a>
  (p top-kwd-alist wrld)
  (declare (ignorable top-kwd-alist))
  (b* (((cons name a) p) ((assocs ndef
         odef
         pdef
         new-types
         kwd-alist) a)
      (m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-types
          (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
            wrld)))
      (at (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (?kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> kwd-alist top-kwd-alist)))
    `(register-type ,DEFDATA::NAME
      <span class="keyword">:predicate</span> ,(DEFDATA::PREDICATE-NAME DEFDATA::NAME DEFDATA::AT DEFDATA::M)
      <span class="keyword">:enumerator</span> ,(DEFDATA::ENUMERATOR-NAME DEFDATA::NAME DEFDATA::AT DEFDATA::M)
      <span class="keyword">:enum/acc</span> ,(DEFDATA::GET2 DEFDATA::NAME :ENUM/ACC DEFDATA::M)
      <span class="keyword">:clique</span> ,(DEFDATA::STRIP-CARS DEFDATA::NEW-TYPES)
      <span class="keyword">:theory-name</span> ,(DEFDATA::GET1 :THEORY-NAME DEFDATA::KWD-ALIST)
      <span class="keyword">:def</span> ,DEFDATA::ODEF
      <span class="keyword">:normalized-def</span> ,DEFDATA::NDEF
      <span class="keyword">:prettyified-def</span> ,DEFDATA::PDEF
      <span class="keyword">:min-rec-depth</span> ,(DEFDATA::GET1 :MIN-REC-DEPTH DEFDATA::KWD-ALIST)
      <span class="keyword">:max-rec-depth</span> ,(DEFDATA::GET1 :MAX-REC-DEPTH DEFDATA::KWD-ALIST)
      <span class="keyword">:recp</span> ,(DEFDATA::GET1 :RECP DEFDATA::KWD-ALIST)
      <span class="keyword">:satisfies</span> ,(DEFDATA::GET1 :SATISFIES DEFDATA::KWD-ALIST)
      <span class="keyword">:satisfies-fixer</span> ,(DEFDATA::GET1 :SATISFIES-FIXER DEFDATA::KWD-ALIST))))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop register-type-events1
  (ps kwd-alist wrld)
  (for ((p in ps))
    (collect (<a class="sym-link local-def" href="#def-register-type-event" data-sym="REGISTER-TYPE-EVENT" title="(defun defdata::register-type-event
       (defdata::p defdata::top-kwd-alist defdata::wrld)
  (declare (ignorable defdata::top-kwd-alist))
  (defdata::b*
   (((cons defdata::name defdata::a) defdata::p)
...">register-type-event</a> p
        kwd-alist
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-register-type-events" data-defines="REGISTER-TYPE-EVENTS" data-references="REGISTER-TYPE-EVENTS1,COMMENTARY,QUASIQUOTE,CONS,WRLD,KWD-ALIST,PS,DEFUN" data-part-name="REGISTER-TYPE-EVENTS" data-part-args="WRLD,KWD-ALIST,PS" data-part-body="WRLD,KWD-ALIST,PS,REGISTER-TYPE-EVENTS1,COMMENTARY,QUASIQUOTE,CONS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REGISTER-TYPE-EVENTS">register-type-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-register-type-events" data-sym="REGISTER-TYPE-EVENTS" title="(defun defdata::register-type-events
       (defdata::ps defdata::kwd-alist defdata::wrld)
  (cons
   `(defdata::commentary ,(defdata::get1 :print-commentary defdata::kwd-alist)
     &quot;~| Registering type...~%&quot;)
...">register-type-events</a>
  (ps kwd-alist wrld)
  (cons `(commentary ,(DEFDATA::GET1 :PRINT-COMMENTARY DEFDATA::KWD-ALIST)
      <span class="string">"~| Registering type...~%"</span>)
    (register-type-events1 ps
      kwd-alist
      wrld)))</pre>
  </div>

<div class="form-block function" id="def-defdata-core-events" data-defines="DEFDATA-CORE-EVENTS" data-references="SET-IRRELEVANT-FORMALS-OK,SET-IGNORE-OK,T,SET-BOGUS-DEFUN-HINTS-OK,LOGIC,ENCAPSULATE,PROGN,TIME,FORM,OBSERVATION,EVENT,PROVE,COMMENT,ERROR,SUMMARY,WITH-OUTPUT,QUASIQUOTE,KWD-ALIST,D,LIST,B*,WRLD,A1,DEFUN" data-used-by="DEFDATA-EVENTS" data-part-name="DEFDATA-CORE-EVENTS" data-part-args="WRLD,A1" data-part-body="SET-IRRELEVANT-FORMALS-OK,SET-IGNORE-OK,T,SET-BOGUS-DEFUN-HINTS-OK,LOGIC,ENCAPSULATE,PROGN,TIME,FORM,OBSERVATION,EVENT,PROVE,COMMENT,ERROR,SUMMARY,WITH-OUTPUT,QUASIQUOTE,A1,KWD-ALIST,D,LIST,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATA-CORE-EVENTS">defdata-core-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defdata-core-events" data-sym="DEFDATA-CORE-EVENTS" title="(defun defdata::defdata-core-events (defdata::a1 defdata::wrld)
  (defdata::b* (((list defdata::d defdata::kwd-alist) defdata::a1))
   `(defdata::with-output :on (defdata::summary error defdata::comment) :off
     (defdata::prove defdata::event defdata::observation) :summary-off
     (:other-than form time)
...">defdata-core-events</a>
  (a1 wrld)
  (b* (((<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> d kwd-alist) a1))
    `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:on</span> (summary error <a class="sym-link system" href="../../../rewrite.html#def-comment" data-sym="COMMENT">comment</a>)
      <span class="keyword">:off</span> (<a class="sym-link system" href="../../../prove.html#def-prove" data-sym="PROVE">prove</a> event <a class="sym-link system" href="../../../basis-a.html#def-observation" data-sym="OBSERVATION">observation</a>)
      <span class="keyword">:summary-off</span> (<span class="keyword">:other-than</span> form time)
      (<a class="sym-link system" href="../../../axioms.html#def-progn" data-sym="PROGN">progn</a> ,@(DEFDATA::COLLECT-EVENTS :PRE-EVENTS DEFDATA::D DEFDATA::KWD-ALIST)
        ,@(DEFDATA::FUNCALLS-APPEND (DEFDATA::GET1 :PRE-HOOK-FNS DEFDATA::KWD-ALIST)
   (LIST DEFDATA::D DEFDATA::KWD-ALIST DEFDATA::WRLD) DEFDATA::WRLD)
        (<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
          (<a class="sym-link system" href="../../../axioms.html#def-logic" data-sym="LOGIC">logic</a>)
          (<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:summary-off</span> (<span class="keyword">:other-than</span> form)
            <span class="keyword">:on</span> (error)
            (<a class="sym-link system" href="../../../axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="../../../axioms.html#def-set-bogus-defun-hints-ok" data-sym="SET-BOGUS-DEFUN-HINTS-OK">set-bogus-defun-hints-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
              (<a class="sym-link system" href="../../../axioms.html#def-set-ignore-ok" data-sym="SET-IGNORE-OK">set-ignore-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
              (<a class="sym-link system" href="../../../axioms.html#def-set-irrelevant-formals-ok" data-sym="SET-IRRELEVANT-FORMALS-OK">set-irrelevant-formals-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
              ,@(DEFDATA::PREDICATE-EVENTS DEFDATA::D DEFDATA::KWD-ALIST DEFDATA::WRLD)
              ,@(DEFDATA::FUNCALLS-APPEND (DEFDATA::GET1 :CGEN-HOOK-FNS DEFDATA::KWD-ALIST)
   (LIST DEFDATA::D DEFDATA::KWD-ALIST DEFDATA::WRLD) DEFDATA::WRLD))))
        ,@(DEFDATA::REGISTER-TYPE-EVENTS DEFDATA::D DEFDATA::KWD-ALIST DEFDATA::WRLD)
        ,@(DEFDATA::FUNCALLS-APPEND (DEFDATA::GET1 :POST-HOOK-FNS DEFDATA::KWD-ALIST)
   (LIST DEFDATA::D DEFDATA::KWD-ALIST DEFDATA::WRLD) DEFDATA::WRLD)
        ,@(DEFDATA::COLLECT-EVENTS :POST-EVENTS DEFDATA::D DEFDATA::KWD-ALIST)))))</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-logic" data-sym="LOGIC">logic</a>)</pre>
  </div>

<div class="form-block function" id="def-substitute-sym" data-defines="SUBSTITUTE-SYM" data-references="CDR,CAR,CONS,QUOTEP,ATOM,T,EQ,COND,SYMBOLP,XARGS,DECLARE,FORM,OLD,NEW,DEFUN" data-used-by="MATCH-ALIST" data-part-name="SUBSTITUTE-SYM" data-part-args="FORM,OLD,NEW" data-part-declare="OLD,SYMBOLP,XARGS,DECLARE" data-part-body="CDR,CAR,SUBSTITUTE-SYM,CONS,QUOTEP,ATOM,T,NEW,OLD,EQ,FORM,SYMBOLP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUBSTITUTE-SYM">substitute-sym</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-substitute-sym" data-sym="SUBSTITUTE-SYM" title="(defun defdata::substitute-sym (defdata::new defdata::old defdata::form)
  (declare (defdata::xargs :guard (symbolp defdata::old)))
  (cond
   ((symbolp defdata::form)
    (cond ((eq defdata::form defdata::old) defdata::new) (t defdata::form)))
...">substitute-sym</a>
  (new old form)
  (declare (xargs <span class="keyword">:guard</span> (symbolp old)))
  (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp form) (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> form old) new)
        (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> form)))
    ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> form) form)
    ((<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> form) form)
    (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-substitute-sym" data-sym="SUBSTITUTE-SYM" title="(defun defdata::substitute-sym (defdata::new defdata::old defdata::form)
  (declare (defdata::xargs :guard (symbolp defdata::old)))
  (cond
   ((symbolp defdata::form)
    (cond ((eq defdata::form defdata::old) defdata::new) (t defdata::form)))
...">substitute-sym</a> new
          old
          (car form))
        (<a class="sym-link local-def" href="#def-substitute-sym" data-sym="SUBSTITUTE-SYM" title="(defun defdata::substitute-sym (defdata::new defdata::old defdata::form)
  (declare (defdata::xargs :guard (symbolp defdata::old)))
  (cond
   ((symbolp defdata::form)
    (cond ((eq defdata::form defdata::old) defdata::new) (t defdata::form)))
...">substitute-sym</a> new
          old
          (cdr form))))))</pre>
  </div>

<div class="form-block function" id="def-match-alist" data-defines="MATCH-ALIST" data-references="EQUAL,SUBSTITUTE-SYM,NVAL,CAAR,ANAME,AVAL,CDR,UNLESS,CDAR,ASSOC,LOOKUP,B*,ENDP,IF,EQLABLE-2-ALISTP,SYMBOLP,AND,XARGS,DECLARE,A,VAL,KEY,NAME,DEFUN" data-used-by="DEFDATA-EVENTS" data-part-name="MATCH-ALIST" data-part-args="A,VAL,KEY,NAME" data-part-declare="A,EQLABLE-2-ALISTP,NAME,SYMBOLP,AND,XARGS,DECLARE" data-part-body="EQUAL,SUBSTITUTE-SYM,SYMBOLP,NVAL,CAAR,ANAME,AVAL,CDR,VAL,NAME,MATCH-ALIST,UNLESS,CDAR,KEY,ASSOC,LOOKUP,B*,A,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MATCH-ALIST">match-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-match-alist" data-sym="MATCH-ALIST" title="(defun defdata::match-alist
       (defdata::name defdata::key defdata::val defdata::a)
  (declare
   (defdata::xargs :guard
    (and (symbolp defdata::name) (defdata::eqlable-2-alistp defdata::a))))
...">match-alist</a>
  (name key val a)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
        (eqlable-2-alistp a))))
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> a)
    nil
    (b* ((lookup (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> key (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> a))) ((unless lookup) (<a class="sym-link local-def" href="#def-match-alist" data-sym="MATCH-ALIST" title="(defun defdata::match-alist
       (defdata::name defdata::key defdata::val defdata::a)
  (declare
   (defdata::xargs :guard
    (and (symbolp defdata::name) (defdata::eqlable-2-alistp defdata::a))))
...">match-alist</a> name
            key
            val
            (cdr a)))
        (aval (cdr lookup))
        (aname (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> a))
        (nval (if (symbolp aname)
            (<a class="sym-link local-def" href="#def-substitute-sym" data-sym="SUBSTITUTE-SYM" title="(defun defdata::substitute-sym (defdata::new defdata::old defdata::form)
  (declare (defdata::xargs :guard (symbolp defdata::old)))
  (cond
   ((symbolp defdata::form)
    (cond ((eq defdata::form defdata::old) defdata::new) (t defdata::form)))
...">substitute-sym</a> aname
              name
              val)
            val)))
      (if (equal aval nval)
        aname
        (<a class="sym-link local-def" href="#def-match-alist" data-sym="MATCH-ALIST" title="(defun defdata::match-alist
       (defdata::name defdata::key defdata::val defdata::a)
  (declare
   (defdata::xargs :guard
    (and (symbolp defdata::name) (defdata::eqlable-2-alistp defdata::a))))
...">match-alist</a> name
          key
          val
          (cdr a))))))</pre>
  </div>

<div class="form-block other" id="form-36" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block function" id="def-defdata-events" data-defines="DEFDATA-EVENTS" data-references="DEFDATA-CORE-EVENTS,DEFDATA-ALIAS,QUASIQUOTE,IF,MATCH-ALIST,MATCH-DEF,TYPE-METADATA-TABLE,M,OR,DO-NOT-ALIAS?,GET-ACL2S-DEFAULTS,NOT,GLOBAL-ALIAS-OFF?,CAR,RECORD,EQUAL,CONSP,AND,RECORD?,NDEF,PDEF,ODEF,QUOTE,GET1,NAME,CDAR,D-ALIST,KWD-ALIST,D,LIST,B*,WRLD,A1,DEFUN" data-used-by="DEFDATA" data-part-name="DEFDATA-EVENTS" data-part-args="WRLD,A1" data-part-body="DEFDATA-CORE-EVENTS,DEFDATA-ALIAS,QUASIQUOTE,IF,MATCH-ALIST,MATCH-DEF,TYPE-METADATA-TABLE,M,OR,DO-NOT-ALIAS?,WRLD,GET-ACL2S-DEFAULTS,NOT,GLOBAL-ALIAS-OFF?,CAR,RECORD,EQUAL,CONSP,AND,RECORD?,NDEF,PDEF,ODEF,QUOTE,GET1,NAME,CDAR,D-ALIST,A1,KWD-ALIST,D,LIST,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATA-EVENTS">defdata-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defdata-events" data-sym="DEFDATA-EVENTS" title="(defun defdata::defdata-events (defdata::a1 defdata::wrld)
  (defdata::b*
   (((list defdata::d defdata::kwd-alist) defdata::a1)
    (defdata::d-alist (cdar defdata::d))
    (defdata::name (defdata::get1 &#39;defdata::name defdata::d-alist))
...">defdata-events</a>
  (a1 wrld)
  (b* (((<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> d kwd-alist) a1) (d-alist (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> d))
      (name (get1 'name d-alist))
      (odef (get1 'odef (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> d)))
      (pdef (get1 'pdef (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> d)))
      (ndef (get1 'ndef (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> d)))
      (record? (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp odef)
          (equal 'record (car odef))))
      (global-alias-off? (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (get-acl2s-defaults <span class="keyword">:defdata-aliasing-enabled</span> wrld)))
      (do-not-alias? (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> record?
          global-alias-off?
          (get1 <span class="keyword">:do-not-alias</span> kwd-alist)))
      (m (type-metadata-table wrld))
      (match-def (<a class="sym-link local-def" href="#def-match-alist" data-sym="MATCH-ALIST" title="(defun defdata::match-alist
       (defdata::name defdata::key defdata::val defdata::a)
  (declare
   (defdata::xargs :guard
    (and (symbolp defdata::name) (defdata::eqlable-2-alistp defdata::a))))
...">match-alist</a> name
          <span class="keyword">:def</span> odef
          m))
      (match-def (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> match-def
          (<a class="sym-link local-def" href="#def-match-alist" data-sym="MATCH-ALIST" title="(defun defdata::match-alist
       (defdata::name defdata::key defdata::val defdata::a)
  (declare
   (defdata::xargs :guard
    (and (symbolp defdata::name) (defdata::eqlable-2-alistp defdata::a))))
...">match-alist</a> name
            <span class="keyword">:prettyified-def</span> pdef
            m)))
      (match-def (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> match-def
          (<a class="sym-link local-def" href="#def-match-alist" data-sym="MATCH-ALIST" title="(defun defdata::match-alist
       (defdata::name defdata::key defdata::val defdata::a)
  (declare
   (defdata::xargs :guard
    (and (symbolp defdata::name) (defdata::eqlable-2-alistp defdata::a))))
...">match-alist</a> name
            <span class="keyword">:normalized-def</span> ndef
            m))))
    (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> match-def (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> do-not-alias?))
      `(defdata-alias ,DEFDATA::NAME ,DEFDATA::MATCH-DEF)
      (<a class="sym-link local-def" href="#def-defdata-core-events" data-sym="DEFDATA-CORE-EVENTS" title="(defun defdata::defdata-core-events (defdata::a1 defdata::wrld)
  (defdata::b* (((list defdata::d defdata::kwd-alist) defdata::a1))
   `(defdata::with-output :on (defdata::summary error defdata::comment) :off
     (defdata::prove defdata::event defdata::observation) :summary-off
     (:other-than form time)
...">defdata-core-events</a> a1 wrld))))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop deref-combinator-alias
  (comb <a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a>)
  (for ((entry in <a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a>))
    (when (<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> comb
        (get1 <span class="keyword">:aliases</span> (cdr entry)))
      (return (car entry)))))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> collect-names-texp
    (texp parent-comb
      ctx
      b
      wrld)
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((possible-constant-value-p texp) 'nil)
      ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> texp) 'nil)
      ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> texp)) (b* ((atbl (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
               wrld)) ((cons name <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>) texp)
            (<a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a> (base-alias-type <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a> atbl))
            ((unless (proper-symbolp name)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                ctx
                <span class="string">"~| Expecting ~x0 to be a name symbol.~%"</span>
                name))
            ((unless (proper-symbolp <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                ctx
                <span class="string">"~| Expecting ~x0 to be a (type) name symbol.~%"</span>
                <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>))
            ((when parent-comb) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                ctx
                <span class="string">"~| Name declaration not allowed under ~x0 scope.~%"</span>
                parent-comb)))
          (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> name <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a> 'nil)))
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (b* ((atbl (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
               wrld)) (comb (base-alias-type (car texp) atbl))
            ((unless (proper-symbolp comb)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                ctx
                <span class="string">"~| Expecting ~x0 to be a symbol.~%"</span>
                comb))
            (ccomb (deref-combinator-alias comb b))
            ((when (<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> ccomb '(range <a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a>))) 'nil))
          (collect-names-texps (cdr texp)
            ccomb
            ctx
            b
            wrld)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> collect-names-texps
    (texps parent-comb
      ctx
      b
      wrld)
    (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> texps)
      (if (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> texps)
        'nil
        (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| ~x0 is not null. Arguments of a combinator/constructor is expected to be a true-list.~%"</span>
          texps))
      (b* ((n1 (collect-names-texp (car texps)
             parent-comb
             ctx
             b
             wrld)) (n2 (collect-names-texps (cdr texps)
              parent-comb
              ctx
              b
              wrld))
          (non-unique-names (<a class="sym-link system" href="../../../axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> n1)
              (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> n2)))
          ((when (consp non-unique-names)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
              ctx
              <span class="string">"~| Names ~x0 being used more than once.~%"</span>
              non-unique-names)))
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> n1 n2)))))</pre>
  </div>

<div class="form-block function" id="def-get-arity" data-defines="GET-ARITY" data-references="DATA-CONSTRUCTOR-TABLE,USER-COMBINATOR-TABLE,U,DEREF-COMBINATOR-ALIAS,GET2,BUILTIN-COMBINATOR-TABLE,QUOTE,TABLE-ALIST,B,LET,OR,WRLD,COMB,DEFUN" data-part-name="GET-ARITY" data-part-args="WRLD,COMB" data-part-body="DATA-CONSTRUCTOR-TABLE,USER-COMBINATOR-TABLE,U,COMB,DEREF-COMBINATOR-ALIAS,GET2,WRLD,BUILTIN-COMBINATOR-TABLE,QUOTE,TABLE-ALIST,B,LET,OR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GET-ARITY">get-arity</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-get-arity" data-sym="GET-ARITY" title="(defun defdata::get-arity (defdata::comb defdata::wrld)
  (or
   (let ((defdata::b
          (defdata::table-alist &#39;defdata::builtin-combinator-table
           defdata::wrld)))
...">get-arity</a>
  (comb wrld)
  (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (let ((b (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'builtin-combinator-table
           wrld)))
      (get2 (deref-combinator-alias comb b)
        <span class="keyword">:arity</span> b))
    (let ((<a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'user-combinator-table
           wrld)))
      (get2 (deref-combinator-alias comb <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>)
        <span class="keyword">:arity</span> <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>))
    (get2 comb
      <span class="keyword">:arity</span> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'data-constructor-table
        wrld))))</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> check-syntax-texp
    (texp scope
      tnames
      ctx
      wrld)
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((possible-constant-value-p texp) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      ((proper-symbolp texp) (<a class="sym-link system" href="../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tbl (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
               wrld)) (atbl (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
                wrld))
            (texp (base-alias-type texp atbl)))
          (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> texp tnames)
            (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> texp tbl)
            (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> texp scope)
            (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
              ctx
              <span class="string">"~| ~x0 should be a recognized name.~%"</span>
              texp))))
      ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> texp) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| ~x0 should be a constant or a name symbol.~%"</span>
          texp))
      ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> texp)) (check-syntax-texp (cdr texp)
          scope
          tnames
          ctx
          wrld))
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (b* (((unless (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> texp)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
               ctx
               <span class="string">"~| ~x0 should be a true-list.~%"</span>
               texp)) (comb (car texp))
            (<a class="sym-link system" href="../../../basis-b.html#def-arity" data-sym="ARITY">arity</a> (<a class="sym-link local-def" href="#def-get-arity" data-sym="GET-ARITY" title="(defun defdata::get-arity (defdata::comb defdata::wrld)
  (or
   (let ((defdata::b
          (defdata::table-alist &#39;defdata::builtin-combinator-table
           defdata::wrld)))
...">get-arity</a> comb wrld))
            ((unless (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> <a class="sym-link system" href="../../../basis-b.html#def-arity" data-sym="ARITY">arity</a>))
                 (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (cdr texp)) <a class="sym-link system" href="../../../basis-b.html#def-arity" data-sym="ARITY">arity</a>))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                ctx
                <span class="string">"~| Arity mismatch! ~x0 expects ~x1 arguments but got ~x2.~%"</span>
                comb
                <a class="sym-link system" href="../../../basis-b.html#def-arity" data-sym="ARITY">arity</a>
                (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (cdr texp))))
            (b (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'builtin-combinator-table
                wrld))
            (bcomb (deref-combinator-alias comb b))
            ((when bcomb) (<a class="sym-link system" href="../../../axioms.html#def-case" data-sym="CASE">case</a> bcomb
                (range (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> texp)
                      '(integer rational))
                    (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                      ctx
                      <span class="string">"~| Range domain ~x0 should be one of integer or rational.~%"</span>
                      (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> texp))))
                (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
                (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (if (<a class="sym-link system" href="../../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../../axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> (cdr texp)))
                      <span class="number">1</span>)
                    (check-syntax-texps (cdr texp)
                      scope
                      tnames
                      ctx
                      wrld)
                    (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                      ctx
                      <span class="string">"~| ~x0 expects atleast 2 (distinct) arguments.~%"</span>
                      comb)))
                (otherwise (check-syntax-texps (cdr texp)
                    scope
                    tnames
                    ctx
                    wrld))))
            ((when (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car texp)
                 (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'data-constructor-table
                   wrld))) (check-syntax-texps (cdr texp)
                (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (collect-names-texps (cdr texp)
                    nil
                    ctx
                    b
                    wrld)
                  scope)
                tnames
                ctx
                wrld)))
          (check-syntax-texps (cdr texp)
            scope
            tnames
            ctx
            wrld)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> check-syntax-texps
    (texps scope
      tnames
      ctx
      wrld)
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> texps)
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (check-syntax-texp (car texps)
          scope
          tnames
          ctx
          wrld)
        (check-syntax-texps (cdr texps)
          scope
          tnames
          ctx
          wrld)))))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop find-recursive-texps
  (texps tnames wrld)
  (for ((texp in texps))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (is-recursive-type-exp texp
          tnames
          wrld)
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> texp)))))</pre>
  </div>

<div class="form-block function" id="def-normalize-union-texps" data-defines="NORMALIZE-UNION-TEXPS" data-references="APPEND,SET-DIFFERENCE-EQUAL,BASE-TEXPS,FIND-RECURSIVE-TEXPS,RECURSIVE-TEXPS,REMOVE-DUPLICATES-EQUAL,B*,WRLD,TNAMES,TEXPS,DEFUN" data-part-name="NORMALIZE-UNION-TEXPS" data-part-args="WRLD,TNAMES,TEXPS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NORMALIZE-UNION-TEXPS">normalize-union-texps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-normalize-union-texps" data-sym="NORMALIZE-UNION-TEXPS" title="(defun defdata::normalize-union-texps
       (defdata::texps defdata::tnames defdata::wrld)
  &quot;remove duplicates and put base cases before recursive texps&quot;
  (defdata::b*
   ((defdata::texps (defdata::remove-duplicates-equal defdata::texps))
...">normalize-union-texps</a>
  (texps tnames wrld)
  <span class="string">"remove duplicates and put base cases before recursive texps"</span>
  (b* ((texps (<a class="sym-link system" href="../../../axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> texps)) (recursive-texps (find-recursive-texps texps
          tnames
          wrld))
      (base-texps (<a class="sym-link system" href="../../../axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> texps
          recursive-texps)))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> base-texps recursive-texps)))</pre>
  </div>

<div class="form-block other" id="form-44" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> parse-texp
    (texp tnames ctx wrld)
    (b* ((texp (base-alias-type texp
           (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
             wrld))))
      (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((possible-constant-value-p texp) (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> texp)
              (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> texp))
                (characterp (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> texp))
                (stringp (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> texp))
                (acl2-numberp (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> texp))
                (<a class="sym-link system" href="../../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> texp))))
            (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> texp)
            texp))
        ((proper-symbolp texp) texp)
        ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> texp)) (cons (base-alias-type (car texp)
              (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
                wrld))
            (parse-texp (cdr texp)
              tnames
              ctx
              wrld)))
        (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (b* ((b (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'builtin-combinator-table
                 wrld)) (comb (base-alias-type (car texp)
                  (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
                    wrld)))
              (bcomb (deref-combinator-alias comb b))
              (c (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'data-constructor-table
                  wrld)))
            (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> (bcomb (<a class="sym-link system" href="../../../axioms.html#def-case" data-sym="CASE">case</a> bcomb
                  (range (parse-range-exp (<a class="sym-link system" href="../../../axioms.html#def-third" data-sym="THIRD">third</a> texp)
                      (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> texp)
                      ctx
                      wrld))
                  (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> (parse-enum-exp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> texp)
                      ctx
                      wrld))
                  (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (b* ((<a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link local-def" href="#def-normalize-union-texps" data-sym="NORMALIZE-UNION-TEXPS" title="(defun defdata::normalize-union-texps
       (defdata::texps defdata::tnames defdata::wrld)
  &quot;remove duplicates and put base cases before recursive texps&quot;
  (defdata::b*
   ((defdata::texps (defdata::remove-duplicates-equal defdata::texps))
...">normalize-union-texps</a> (parse-texps (cdr texp)
                             tnames
                             ctx
                             wrld)
                           tnames
                           wrld)))
                      (if (consp (cdr <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
                        (cons '<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)
                        (car <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
                  (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (cons bcomb
                      (parse-texps (cdr texp)
                        tnames
                        ctx
                        wrld)))))
              ((<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> comb c) (cons comb
                  (parse-texps (cdr texp)
                    tnames
                    ctx
                    wrld)))
              ((<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (acl2-getprop (car texp)
                   'macro-args
                   wrld
                   <span class="keyword">:default</span> <span class="keyword">:undefined</span>)) (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> erp ans) (macroexpand1-cmp (cons (base-alias-type (car texp)
                           (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
                             wrld))
                         (parse-texps (cdr texp)
                           tnames
                           ctx
                           wrld))
                       ctx
                       wrld
                       (<a class="sym-link system" href="../../../basis-a.html#def-make" data-sym="MAKE">make</a> state-vars))) ((when erp) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                        ctx
                        <span class="string">"~| Macroexpanding ~x0 failed!~%"</span>
                        texp)))
                  ans))
              (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (cons (base-alias-type (car texp)
                    (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
                      wrld))
                  (parse-texps (cdr texp)
                    tnames
                    ctx
                    wrld)))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> parse-texps
    (texps tnames ctx wrld)
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> texps)
      'nil
      (cons (parse-texp (car texps)
          tnames
          ctx
          wrld)
        (parse-texps (cdr texps)
          tnames
          ctx
          wrld)))))</pre>
  </div>

<div class="form-block function" id="def-parse-top-texp" data-defines="PARSE-TOP-TEXP" data-references="ACONS,TO-STRING1,MSG,X0-STR,HARD?,ER,TRANS-MY-EV-W,RESULT,ERP,MV,KWOTE,EXPAND-LAMBDA,EEXP,LIST,FUNCALL-W,OR,IF,PARSE-TEXPS,PARSED-ARGS,EXP-L,GET2,F,WHEN,DEREF-COMBINATOR-ALIAS,UCOMB,USER-COMBINATOR-TABLE,QUOTE,TABLE-ALIST,U,B*,T,CDR,CAR,CONS,TRUE-LISTP,NOT,PARSE-TEXP,ATOM,COND,WRLD,CTX,TNAMES,TEXP,NAME,DEFUN" data-used-by="PARSE-DATA-DEF" data-part-name="PARSE-TOP-TEXP" data-part-args="WRLD,CTX,TNAMES,TEXP,NAME" data-part-body="ACONS,TO-STRING1,MSG,X0-STR,HARD?,ER,TRANS-MY-EV-W,RESULT,ERP,MV,NAME,KWOTE,EXPAND-LAMBDA,EEXP,LIST,FUNCALL-W,OR,IF,PARSE-TEXPS,PARSED-ARGS,EXP-L,GET2,F,WHEN,DEREF-COMBINATOR-ALIAS,UCOMB,USER-COMBINATOR-TABLE,QUOTE,TABLE-ALIST,U,B*,T,CDR,CAR,CONS,TRUE-LISTP,NOT,WRLD,CTX,TNAMES,PARSE-TEXP,TEXP,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-TOP-TEXP">parse-top-texp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-top-texp" data-sym="PARSE-TOP-TEXP" title="(defun defdata::parse-top-texp
       (defdata::name defdata::texp defdata::tnames defdata::ctx defdata::wrld)
  (cond
   ((atom defdata::texp)
    (defdata::parse-texp defdata::texp defdata::tnames defdata::ctx
...">parse-top-texp</a>
  (name texp
    tnames
    ctx
    wrld)
  (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> texp) (parse-texp texp
        tnames
        ctx
        wrld))
    ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> texp)) (cons (car texp)
        (parse-texp (cdr texp)
          tnames
          ctx
          wrld)))
    (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (b* ((<a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'user-combinator-table
             wrld)) (ucomb (deref-combinator-alias (car texp)
              <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>))
          ((when ucomb) (b* ((f (get2 ucomb
                   <span class="keyword">:syntax-restriction-fn</span> <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>)) (exp-l (get2 ucomb <span class="keyword">:expansion</span> <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>))
                (parsed-args (parse-texps (cdr texp)
                    tnames
                    ctx
                    wrld)))
              (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> f)
                  (funcall-w f
                    (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (cdr texp))
                    ctx
                    wrld))
                (b* ((eexp (expand-lambda (cons exp-l
                         (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-kwote" data-sym="KWOTE">kwote</a> name)
                           (<a class="sym-link system" href="../../../axioms.html#def-kwote" data-sym="KWOTE">kwote</a> parsed-args))))) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> erp result) (trans-my-ev-w eexp
                        ctx
                        wrld
                        nil))
                    ((when erp) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                        ctx
                        <span class="string">"~| Eval failed in user-combinator expansion of ~x0.~%"</span>
                        texp)))
                  result)
                (b* ((x0-str (get2 ucomb
                       <span class="keyword">:syntax-restriction-msg</span> <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>)) (<a class="sym-link system" href="../../../axioms.html#def-msg" data-sym="MSG">msg</a> (to-string1 x0-str
                        (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> #\0 (cdr texp) 'nil))))
                  (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                    ctx
                    <span class="string">"~| ~s0 ~%"</span>
                    <a class="sym-link system" href="../../../axioms.html#def-msg" data-sym="MSG">msg</a>))))))
        (parse-texp texp
          tnames
          ctx
          wrld)))))</pre>
  </div>

<div class="form-block function" id="def-valid-record-field-p" data-defines="VALID-RECORD-FIELD-P" data-references="NOT,PROPER-SYMBOLP,CDR,TEXP,LET,ASSOC-EQ,AND,N,X,DEFUN" data-part-name="VALID-RECORD-FIELD-P" data-part-args="N,X" data-part-body="NOT,PROPER-SYMBOLP,CDR,TEXP,LET,N,X,ASSOC-EQ,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="VALID-RECORD-FIELD-P">valid-record-field-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-valid-record-field-p" data-sym="VALID-RECORD-FIELD-P" title="(defun defdata::valid-record-field-p (defdata::x defdata::n)
  (and (defdata::assoc-eq defdata::x defdata::n)
       (let ((defdata::texp (cdr (defdata::assoc-eq defdata::x defdata::n))))
         (and (defdata::proper-symbolp defdata::texp)
              (not (defdata::assoc-eq defdata::texp defdata::n))))))">valid-record-field-p</a>
  (x n)
  (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> x n)
    (let ((texp (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> x n))))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp texp)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> texp n))))))</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop valid-record-fields-p
  (xs n)
  (for ((x in xs))
    (always (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp x)
        (<a class="sym-link local-def" href="#def-valid-record-field-p" data-sym="VALID-RECORD-FIELD-P" title="(defun defdata::valid-record-field-p (defdata::x defdata::n)
  (and (defdata::assoc-eq defdata::x defdata::n)
       (let ((defdata::texp (cdr (defdata::assoc-eq defdata::x defdata::n))))
         (and (defdata::proper-symbolp defdata::texp)
              (not (defdata::assoc-eq defdata::texp defdata::n))))))">valid-record-field-p</a> (car x) n)))))</pre>
  </div>

<div class="form-block other" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> undefined-product-texp
    (texp ctx n wrld)
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((possible-constant-value-p texp) nil)
      ((proper-symbolp texp) nil)
      ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> texp)) nil)
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (b* ((comb (car texp)) (b (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'builtin-combinator-table
                wrld))
            (c (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'data-constructor-table
                wrld)))
          (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> comb b) (<a class="sym-link system" href="../../../axioms.html#def-case" data-sym="CASE">case</a> comb
                (range nil)
                (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> nil)
                (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (undefined-product-texps (cdr texp)
                    ctx
                    n
                    wrld))))
            ((<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> comb c) (undefined-product-texps (cdr texp)
                ctx
                (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (collect-names-texps (cdr texp)
                    nil
                    ctx
                    b
                    wrld)
                  n)
                wrld))
            (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (if (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../basis-b.html#def-new-namep" data-sym="NEW-NAMEP">new-namep</a> (car texp) wrld))
                (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                  ctx
                  <span class="string">"~| ~x0 should be a fresh logical name.~%"</span>
                  (car texp))
                (if (valid-record-fields-p (cdr texp)
                    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (collect-names-texps (cdr texp)
                        nil
                        ctx
                        b
                        wrld)
                      n))
                  (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> texp)
                  (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                    ctx
                    <span class="string">"~| Bad Syntax! Did you want to define a new record? Each record argument should be of form (field-name . type-name). There should be no name overlap among fields and types.~%"</span>)))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> undefined-product-texps
    (texps ctx n wrld)
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> texps)
      'nil
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (undefined-product-texp (car texps)
          ctx
          n
          wrld)
        (undefined-product-texps (cdr texps)
          ctx
          n
          wrld)))))</pre>
  </div>

<div class="form-block function" id="def-untrans-top-texp" data-defines="UNTRANS-TOP-TEXP" data-references="&,KWOTE,RANGE-EXP,DOM,RANGE,RECORD,ASSOC-EQ,IF,ARGS,X,LISTOF,MAP,MSET,CONS,ALISTOF,LIST,!TNAME,VAL,KEY,ACONS,OR,QUOTE,CASE-MATCH,TNAME,LET,CONX-ENTRIES,NBODY,NAME,DEFUN" data-used-by="PARSE-DATA-DEF" data-part-name="UNTRANS-TOP-TEXP" data-part-args="CONX-ENTRIES,NBODY,NAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNTRANS-TOP-TEXP">untrans-top-texp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-untrans-top-texp" data-sym="UNTRANS-TOP-TEXP" title="(defun defdata::untrans-top-texp
       (defdata::name defdata::nbody defdata::conx-entries)
  &quot;prettyify a normalized/core defdata top texp&quot;
  (let ((defdata::tname defdata::name))
    (defdata::case-match defdata::nbody
...">untrans-top-texp</a>
  (name nbody conx-entries)
  <span class="string">"prettyify a normalized/core defdata top texp"</span>
  (let ((tname name))
    (<a class="sym-link system" href="../../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> nbody
      (('<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> 'nil
         ('<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> key val !tname)) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> 'alistof key val))
      (('<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> 'nil
         ('cons ('cons key val) !tname)) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> 'alistof key val))
      (('<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> 'nil
         ('mset key val !tname)) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> 'map key val))
      (('listof ('cons key val)) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> 'alistof key val))
      (('<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> 'nil ('cons x !tname)) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> 'listof x))
      ((!tname . <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>) (if (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> name conx-entries)
          (cons 'record <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
          (cons name <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)))
      (('range dom range-exp) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> 'range
          dom
          (<a class="sym-link system" href="../../../axioms.html#def-kwote" data-sym="KWOTE">kwote</a> range-exp)))
      (&amp; nbody))))</pre>
  </div>

<div class="form-block function" id="def-data-constructor-basis" data-defines="DATA-CONSTRUCTOR-BASIS" data-references="QUOTE,LEN,ACONS,CONS,DEST-PRED-ALIST,MODIFY-SYMBOL-LST,SELECTOR-FN-NAMES,GET-DEST-PREFIX,PREFIX,PAIRLIS$,FNAME-PRED-ALIST,MAKE-PREDICATE-SYMBOL,RECOG,STRIP-CDRS,PREDICATE-NAMES,PREDS,STRIP-CARS,FNAMES,CDR,FNAME-TNAME-ALIST,CAR,CONX-NAME,B*,M,A,CURR-PKG,PROD,DEFUN" data-part-name="DATA-CONSTRUCTOR-BASIS" data-part-args="M,A,CURR-PKG,PROD" data-part-body="QUOTE,LEN,ACONS,CONS,DEST-PRED-ALIST,MODIFY-SYMBOL-LST,SELECTOR-FN-NAMES,GET-DEST-PREFIX,PREFIX,PAIRLIS$,FNAME-PRED-ALIST,CURR-PKG,MAKE-PREDICATE-SYMBOL,RECOG,M,A,STRIP-CDRS,PREDICATE-NAMES,PREDS,STRIP-CARS,FNAMES,CDR,FNAME-TNAME-ALIST,PROD,CAR,CONX-NAME,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DATA-CONSTRUCTOR-BASIS">data-constructor-basis</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-data-constructor-basis" data-sym="DATA-CONSTRUCTOR-BASIS" title="(defun defdata::data-constructor-basis
       (defdata::prod defdata::curr-pkg defdata::a defdata::m)
  (defdata::b*
   ((defdata::conx-name (car defdata::prod))
    (defdata::fname-tname-alist (cdr defdata::prod))
...">data-constructor-basis</a>
  (prod curr-pkg a m)
  (b* ((conx-name (car prod)) (fname-tname-alist (cdr prod))
      (fnames (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> fname-tname-alist))
      (preds (predicate-names (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> fname-tname-alist)
          a
          m))
      (recog (make-predicate-symbol conx-name
          curr-pkg))
      (fname-pred-alist (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> fnames preds))
      (prefix (get-dest-prefix conx-name))
      (selector-fn-names (modify-symbol-lst prefix
          fnames
          <span class="string">""</span>
          curr-pkg))
      (dest-pred-alist (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> selector-fn-names
          preds)))
    (cons conx-name
      (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:arity</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (cdr prod))
        (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:recog</span> recog
          (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:dest-pred-alist</span> dest-pred-alist
            (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:field-pred-alist</span> fname-pred-alist 'nil)))))))</pre>
  </div>

<div class="form-block other" id="form-51" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop data-constructor-bases
  (prods curr-pkg a m)
  (for ((prod in prods))
    (collect (<a class="sym-link local-def" href="#def-data-constructor-basis" data-sym="DATA-CONSTRUCTOR-BASIS" title="(defun defdata::data-constructor-basis
       (defdata::prod defdata::curr-pkg defdata::a defdata::m)
  (defdata::b*
   ((defdata::conx-name (car defdata::prod))
    (defdata::fname-tname-alist (cdr defdata::prod))
...">data-constructor-basis</a> prod
        curr-pkg
        a
        m))))</pre>
  </div>

<div class="form-block function" id="def-type-metadata-basis" data-defines="TYPE-METADATA-BASIS" data-references="PAIRLIS$,CONS,QUOTE,MINIMAL-KEYS,S+,MAKE-PREDICATE-SYMBOL,LIST,MINIMAL-VALS,B*,SYMBOLP,XARGS,DECLARE,CURR-PKG,TNAME,DEFUN" data-part-name="TYPE-METADATA-BASIS" data-part-args="CURR-PKG,TNAME" data-part-declare="TNAME,SYMBOLP,XARGS,DECLARE" data-part-body="PAIRLIS$,CONS,QUOTE,MINIMAL-KEYS,S+,CURR-PKG,TNAME,MAKE-PREDICATE-SYMBOL,LIST,MINIMAL-VALS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TYPE-METADATA-BASIS">type-metadata-basis</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-type-metadata-basis" data-sym="TYPE-METADATA-BASIS" title="(defun defdata::type-metadata-basis (defdata::tname defdata::curr-pkg)
  (declare (defdata::xargs :guard (symbolp defdata::tname)))
  (defdata::b*
   ((defdata::minimal-vals
     (list (defdata::make-predicate-symbol defdata::tname defdata::curr-pkg)
...">type-metadata-basis</a>
  (tname curr-pkg)
  (declare (xargs <span class="keyword">:guard</span> (symbolp tname)))
  (b* ((minimal-vals (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (make-predicate-symbol tname
           curr-pkg)
         (s+ <span class="string">"NTH-"</span>
           tname
           <span class="string">"-BUILTIN"</span>
           <span class="keyword">:pkg</span> curr-pkg)
         (s+ <span class="string">"NTH-"</span>
           tname
           <span class="string">"/ACC-BUILTIN"</span>
           <span class="keyword">:pkg</span> curr-pkg))) (minimal-keys '(<span class="keyword">:predicate</span> <span class="keyword">:enumerator</span> <span class="keyword">:enum/acc</span>)))
    (cons tname
      (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> minimal-keys
        minimal-vals))))</pre>
  </div>

<div class="form-block other" id="form-53" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop type-metadata-bases
  (tnames curr-pkg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> tnames)))
  (for ((tname in tnames))
    (collect (<a class="sym-link local-def" href="#def-type-metadata-basis" data-sym="TYPE-METADATA-BASIS" title="(defun defdata::type-metadata-basis (defdata::tname defdata::curr-pkg)
  (declare (defdata::xargs :guard (symbolp defdata::tname)))
  (defdata::b*
   ((defdata::minimal-vals
     (list (defdata::make-predicate-symbol defdata::tname defdata::curr-pkg)
...">type-metadata-basis</a> tname
        curr-pkg))))</pre>
  </div>

<div class="form-block other" id="form-54" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *per-def-keywords*
  '(<span class="keyword">:satisfies</span> <span class="keyword">:satisfies-fixer</span> <span class="keyword">:min-rec-depth</span> <span class="keyword">:max-rec-depth</span>))</pre>
  </div>

<div class="form-block function" id="def-parse-data-def" data-defines="PARSE-DATA-DEF" data-references="ODEF,PDEF,NDEF,NAME,LIST,CONS,PUT2-FN,UNTRANS-TOP-TEXP,PBODY,GET1,ALLP-ALIASES-TABLE,TABLE,QUASIQUOTE,IS-ALLP-ALIAS,PROPER-SYMBOLP,AND,ALLP-ALIAS-EVENTS,PUT-ASSOC-EQ,T,TEXP-CONSTITUENT-TYPES,FIND-RECURSIVE-RECORDS,OR,RECP,PREDICATE-NAMES,NEW-PREDS,DATA-CONSTRUCTOR-BASES,NEW-CONSTRUCTORS,TYPE-METADATA-BASES,NEW-TYPES,UNDEFINED-PRODUCT-TEXP,PRODS,PARSE-TOP-TEXP,NBODY,CHECK-SYNTAX-TEXP,-,FORBIDDEN-NAMES,FBD-NMS,WHEN,APPEND,STRIP-CARS,INTERSECTION-EQ,CMN-NMS,A,TYPE-METADATA-TABLE,M,BUILTIN-COMBINATOR-TABLE,TOP,COLLECT-NAMES-TEXP,N,*PER-DEF-KEYWORDS*,EXTRACT-KEYWORDS,?REST,KWD-ALIST,MV,SYMBOLP,KWD-VAL-LIST,BODY,TNAME,LIST*,HARD?,ER,CONSP,UNLESS,TYPE-ALIAS-TABLE,QUOTE,TABLE-ALIST,ATBL,B*,IGNORABLE,DECLARE,WRLD,CTX,CURR-PKG,ARGS,TNAMES,DEF,DEFUN" data-part-name="PARSE-DATA-DEF" data-part-args="WRLD,CTX,CURR-PKG,ARGS,TNAMES,DEF" data-part-declare="ARGS,IGNORABLE,DECLARE" data-part-body="ODEF,PDEF,NDEF,NAME,LIST,CONS,PUT2-FN,UNTRANS-TOP-TEXP,PBODY,GET1,ALLP-ALIASES-TABLE,TABLE,QUASIQUOTE,IS-ALLP-ALIAS,PROPER-SYMBOLP,AND,ALLP-ALIAS-EVENTS,PUT-ASSOC-EQ,T,TEXP-CONSTITUENT-TYPES,FIND-RECURSIVE-RECORDS,OR,RECP,PREDICATE-NAMES,NEW-PREDS,DATA-CONSTRUCTOR-BASES,NEW-CONSTRUCTORS,CURR-PKG,TYPE-METADATA-BASES,NEW-TYPES,UNDEFINED-PRODUCT-TEXP,PRODS,PARSE-TOP-TEXP,NBODY,TNAMES,CHECK-SYNTAX-TEXP,-,FORBIDDEN-NAMES,FBD-NMS,WHEN,APPEND,STRIP-CARS,INTERSECTION-EQ,CMN-NMS,A,TYPE-METADATA-TABLE,M,BUILTIN-COMBINATOR-TABLE,TOP,COLLECT-NAMES-TEXP,N,*PER-DEF-KEYWORDS*,EXTRACT-KEYWORDS,?REST,KWD-ALIST,MV,SYMBOLP,KWD-VAL-LIST,BODY,TNAME,LIST*,CTX,HARD?,ER,DEF,CONSP,UNLESS,WRLD,TYPE-ALIAS-TABLE,QUOTE,TABLE-ALIST,ATBL,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-DATA-DEF">parse-data-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-data-def" data-sym="PARSE-DATA-DEF" title="(defun defdata::parse-data-def
       (defdata::def defdata::tnames defdata::args defdata::curr-pkg
        defdata::ctx defdata::wrld)
  (declare (ignorable defdata::args))
  (defdata::b*
...">parse-data-def</a>
  (def tnames
    <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>
    curr-pkg
    ctx
    wrld)
  (declare (ignorable <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  (b* ((atbl (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
         wrld)) ((unless (consp def)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| def ~x0 is empty.~%"</span>
          def))
      ((<a class="sym-link system" href="../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> tname <a class="sym-link system" href="../../../basis-b.html#def-body" data-sym="BODY">body</a> kwd-val-list) def)
      ((unless (symbolp tname)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| name ~x0 should be a symbol.~%"</span>
          tname))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> kwd-alist ?rest) (extract-keywords ctx
          *per-def-keywords*
          kwd-val-list
          'nil
          nil))
      (n (collect-names-texp <a class="sym-link system" href="../../../basis-b.html#def-body" data-sym="BODY">body</a>
          'top
          ctx
          (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'builtin-combinator-table
            wrld)
          wrld))
      (m (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
          wrld))
      (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (cmn-nms (<a class="sym-link system" href="../../../axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> n)
          (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> m atbl))))
      ((when cmn-nms) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| Naming of defdata expressions should be disjoint from the type namespace (~x0 are types).~%"</span>
          cmn-nms))
      (fbd-nms (<a class="sym-link system" href="../../../axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> n)
          (forbidden-names)))
      ((when fbd-nms) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| These names (~x0) are not allowed. Please choose different names and try again.~%"</span>
          fbd-nms))
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (check-syntax-texp <a class="sym-link system" href="../../../basis-b.html#def-body" data-sym="BODY">body</a>
          'nil
          tnames
          ctx
          wrld))
      (nbody (<a class="sym-link local-def" href="#def-parse-top-texp" data-sym="PARSE-TOP-TEXP" title="(defun defdata::parse-top-texp
       (defdata::name defdata::texp defdata::tnames defdata::ctx defdata::wrld)
  (cond
   ((atom defdata::texp)
    (defdata::parse-texp defdata::texp defdata::tnames defdata::ctx
...">parse-top-texp</a> tname
          <a class="sym-link system" href="../../../basis-b.html#def-body" data-sym="BODY">body</a>
          tnames
          ctx
          wrld))
      (prods (undefined-product-texp nbody
          ctx
          'nil
          wrld))
      (new-types (type-metadata-bases tnames
          curr-pkg))
      (new-constructors (data-constructor-bases prods
          curr-pkg
          a
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-types m)))
      (new-preds (predicate-names tnames
          a
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-types m)))
      (recp (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (consp (find-recursive-records new-preds
              new-constructors))
          (<a class="sym-link system" href="../../../axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (texp-constituent-types nbody
              tnames
              wrld
              <span class="keyword">:include-recursive-references-p</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
            tnames)))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:recp</span> recp
          kwd-alist))
      (allp-alias-events (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp nbody)
          (is-allp-alias nbody wrld)
          `((<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> allp-aliases-table
             ',(DEFDATA::PREDICATE-NAME DEFDATA::TNAME DEFDATA::A DEFDATA::NEW-TYPES)
             ',DEFDATA::TNAME
             <span class="keyword">:put</span>))))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:post-pred-events</span> (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (get1 <span class="keyword">:post-pred-events</span> kwd-alist)
            allp-alias-events)
          kwd-alist))
      (pbody (<a class="sym-link local-def" href="#def-untrans-top-texp" data-sym="UNTRANS-TOP-TEXP" title="(defun defdata::untrans-top-texp
       (defdata::name defdata::nbody defdata::conx-entries)
  &quot;prettyify a normalized/core defdata top texp&quot;
  (let ((defdata::tname defdata::name))
    (defdata::case-match defdata::nbody
...">untrans-top-texp</a> tname
          nbody
          new-constructors))
      (new-types (put2-fn tname
          <span class="keyword">:prettyified-def</span> pbody
          new-types)))
    (cons tname
      (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (cons 'name tname)
        (cons 'ndef nbody)
        (cons 'n n)
        (cons 'pdef pbody)
        (cons 'odef <a class="sym-link system" href="../../../basis-b.html#def-body" data-sym="BODY">body</a>)
        (cons 'new-constructors new-constructors)
        (cons 'new-types new-types)
        (cons 'kwd-alist kwd-alist)))))</pre>
  </div>

<div class="form-block other" id="form-56" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop parse-data-defs
  (ds tnames
    kwd-args
    curr-pkg
    ctx
    wrld)
  (for ((d in ds))
    (collect (<a class="sym-link local-def" href="#def-parse-data-def" data-sym="PARSE-DATA-DEF" title="(defun defdata::parse-data-def
       (defdata::def defdata::tnames defdata::args defdata::curr-pkg
        defdata::ctx defdata::wrld)
  (declare (ignorable defdata::args))
  (defdata::b*
...">parse-data-def</a> d
        tnames
        kwd-args
        curr-pkg
        ctx
        wrld))))</pre>
  </div>

<div class="form-block other" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *defdata-keywords*
  (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> '(<span class="keyword">:pred-prefix</span> <span class="keyword">:theory-name</span> <span class="keyword">:debug</span> <span class="keyword">:print-commentary</span> <span class="keyword">:print-summary</span> <span class="keyword">:time-track</span> <span class="keyword">:testing-enabled</span> <span class="keyword">:do-not-alias</span>)
    '(<span class="keyword">:hints</span> <span class="keyword">:verbose</span>)
    *per-def-keywords*))</pre>
  </div>

<div class="form-block function" id="def-remove1-assoc-eq-lst" data-defines="REMOVE1-ASSOC-EQ-LST" data-references="CAR,REMOVE1-ASSOC-EQ,CDR,ENDP,IF,ALST,KEYS,DEFUN" data-used-by="PARSE-DEFDATA" data-part-name="REMOVE1-ASSOC-EQ-LST" data-part-args="ALST,KEYS" data-part-body="CAR,REMOVE1-ASSOC-EQ,CDR,REMOVE1-ASSOC-EQ-LST,ALST,KEYS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE1-ASSOC-EQ-LST">remove1-assoc-eq-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove1-assoc-eq-lst" data-sym="REMOVE1-ASSOC-EQ-LST" title="(defun defdata::remove1-assoc-eq-lst (defdata::keys defdata::alst)
  (if (endp defdata::keys)
      defdata::alst
      (defdata::remove1-assoc-eq-lst (cdr defdata::keys)
       (defdata::remove1-assoc-eq (car defdata::keys) defdata::alst))))">remove1-assoc-eq-lst</a>
  (keys alst)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> keys)
    alst
    (<a class="sym-link local-def" href="#def-remove1-assoc-eq-lst" data-sym="REMOVE1-ASSOC-EQ-LST" title="(defun defdata::remove1-assoc-eq-lst (defdata::keys defdata::alst)
  (if (endp defdata::keys)
      defdata::alst
      (defdata::remove1-assoc-eq-lst (cdr defdata::keys)
       (defdata::remove1-assoc-eq (car defdata::keys) defdata::alst))))">remove1-assoc-eq-lst</a> (cdr keys)
      (<a class="sym-link system" href="../../../axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> (car keys)
        alst))))</pre>
  </div>

<div class="form-block function" id="def-parse-defdata" data-defines="PARSE-DEFDATA" data-references="CDDR,NULL,LEN,>,D,PARSE-DATA-DEFS,CDR,NOT,WHEN,HARD?,ER,TRUE-LISTP,CONSP,AND,UNLESS,DEF-RULESET!,QUASIQUOTE,MAKE-PREDICATE-SYMBOL-LST,PREDS,S+,THEORY-NAME,STRIP-CARS,LIST,CAR,SYMBOLP,IF,TNAMES,PUT-ASSOC-EQ,ASSOC,CURRENT-TERMINATION-METHOD-ENTRY,ACL2-DEFAULTS-TABLE,ACL2-DEFAULTS-TBL,*DEFDATA-KEYWORDS*,EXTRACT-KEYWORDS,REST-ARGS,KWD-ALIST,EVENS,REMOVE1-ASSOC-EQ-LST,DEFDATA-DEFAULTS-TABLE,TABLE-ALIST,DEFAULTS-ALST,PARSE,CTX,QUOTE,SEPARATE-KWD-ARGS,KWD-VAL-LIST,DS,MV,B*,WRLD,CURR-PKG,ARGS,DEFUN" data-used-by="DEFDATA" data-part-name="PARSE-DEFDATA" data-part-args="WRLD,CURR-PKG,ARGS" data-part-body="CDDR,NULL,LEN,>,D,PARSE-DATA-DEFS,CDR,NOT,WHEN,HARD?,ER,TRUE-LISTP,CONSP,AND,UNLESS,DEF-RULESET!,QUASIQUOTE,MAKE-PREDICATE-SYMBOL-LST,PREDS,CURR-PKG,S+,THEORY-NAME,STRIP-CARS,LIST,CAR,SYMBOLP,IF,TNAMES,PUT-ASSOC-EQ,ASSOC,CURRENT-TERMINATION-METHOD-ENTRY,ACL2-DEFAULTS-TABLE,ACL2-DEFAULTS-TBL,*DEFDATA-KEYWORDS*,EXTRACT-KEYWORDS,REST-ARGS,KWD-ALIST,EVENS,REMOVE1-ASSOC-EQ-LST,WRLD,DEFDATA-DEFAULTS-TABLE,TABLE-ALIST,DEFAULTS-ALST,PARSE,CTX,QUOTE,ARGS,SEPARATE-KWD-ARGS,KWD-VAL-LIST,DS,MV,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-DEFDATA">parse-defdata</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-defdata" data-sym="PARSE-DEFDATA" title="(defun defdata::parse-defdata (defdata::args defdata::curr-pkg defdata::wrld)
  (defdata::b*
   (((defdata::mv defdata::ds defdata::kwd-val-list)
     (defdata::separate-kwd-args defdata::args &#39;nil))
    (defdata::ctx &#39;defdata::parse)
...">parse-defdata</a>
  (<a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a> curr-pkg wrld)
  (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ds kwd-val-list) (separate-kwd-args <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a> 'nil)) (ctx 'parse)
      (defaults-alst (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'defdata-defaults-table
          wrld))
      (defaults-alst (<a class="sym-link local-def" href="#def-remove1-assoc-eq-lst" data-sym="REMOVE1-ASSOC-EQ-LST" title="(defun defdata::remove1-assoc-eq-lst (defdata::keys defdata::alst)
  (if (endp defdata::keys)
      defdata::alst
      (defdata::remove1-assoc-eq-lst (cdr defdata::keys)
       (defdata::remove1-assoc-eq (car defdata::keys) defdata::alst))))">remove1-assoc-eq-lst</a> (<a class="sym-link system" href="../../../axioms.html#def-evens" data-sym="EVENS">evens</a> kwd-val-list)
          defaults-alst))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> kwd-alist rest-args) (extract-keywords ctx
          *defdata-keywords*
          kwd-val-list
          defaults-alst
          nil))
      (acl2-defaults-tbl (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld))
      (current-termination-method-entry (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:termination-method</span> acl2-defaults-tbl))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:termination-method</span> current-termination-method-entry
          kwd-alist))
      (tnames (if (symbolp (car ds))
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (car ds))
          (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> ds)))
      (theory-name (s+ (car tnames)
          <span class="string">"-THEORY"</span>
          <span class="keyword">:pkg</span> curr-pkg))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:theory-name</span> theory-name
          kwd-alist))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:clique</span> tnames
          kwd-alist))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:current-package</span> curr-pkg
          kwd-alist))
      (preds (make-predicate-symbol-lst tnames
          curr-pkg))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:post-pred-events</span> `((def-ruleset! ,DEFDATA::THEORY-NAME ',DEFDATA::PREDS))
          kwd-alist))
      ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp ds) (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> ds))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| Empty form not allowed.~%"</span>))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (symbolp (car ds)))
           (consp (cdr ds)))) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (parse-data-defs ds
            tnames
            rest-args
            curr-pkg
            ctx
            wrld)
          kwd-alist))
      (d (if (symbolp (car ds))
          ds
          (car ds)))
      ((unless (<a class="sym-link system" href="../../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> d) <span class="number">1</span>)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| Empty definition.~%"</span>))
      ((unless (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> d))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| Definitions that are not mutually-recursive should be ~
                      of form (defdata &lt;id&gt; &lt;type-exp&gt; [:hints &lt;hints&gt;
                     ...]).~%"</span>)))
    (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (parse-data-defs (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> d)
        tnames
        <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>
        curr-pkg
        ctx
        wrld)
      kwd-alist)))</pre>
  </div>

<div class="form-block macro" id="def-defdata" data-defines="DEFDATA" data-references="W,STATE,CURRENT-PACKAGE,QUOTE,PARSE-DEFDATA,DEFDATA-EVENTS,MAKE-EVENT,ENCAPSULATE,T,WITH-OUTPUT,QUASIQUOTE,CADR,AND,MEMBER,LST,LET,VERBOSEP,B*,ARGS,&REST,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATA">defdata</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdata" data-sym="DEFDATA" title="(defmacro defdata::defdata (&amp;rest defdata::args)
  (defdata::b*
   ((defdata::verbosep
     (let ((defdata::lst (member :verbose defdata::args)))
       (and defdata::lst (cadr defdata::lst)))))
...">defdata</a>
  (&amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (b* ((verbosep (let ((lst (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:verbose</span> <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)))
         (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> lst (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lst)))))
    `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT DEFDATA::VERBOSEP)
       &#39;(:OFF :ALL :ON (DEFDATA::SUMMARY ERROR) :SUMMARY-OFF
         (:OTHER-THAN FORM TIME)))
      <span class="keyword">:gag-mode</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:stack</span> <span class="keyword">:push</span> (<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
        (<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT DEFDATA::VERBOSEP) &#39;(:OFF :ALL :ON DEFDATA::COMMENT))
          <span class="keyword">:gag-mode</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
          <span class="keyword">:stack</span> <span class="keyword">:push</span> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defdata-events" data-sym="DEFDATA-EVENTS" title="(defun defdata::defdata-events (defdata::a1 defdata::wrld)
  (defdata::b*
   (((list defdata::d defdata::kwd-alist) defdata::a1)
    (defdata::d-alist (cdar defdata::d))
    (defdata::name (defdata::get1 &#39;defdata::name defdata::d-alist))
...">defdata-events</a> (<a class="sym-link local-def" href="#def-parse-defdata" data-sym="PARSE-DEFDATA" title="(defun defdata::parse-defdata (defdata::args defdata::curr-pkg defdata::wrld)
  (defdata::b*
   (((defdata::mv defdata::ds defdata::kwd-val-list)
     (defdata::separate-kwd-args defdata::args &#39;nil))
    (defdata::ctx &#39;defdata::parse)
...">parse-defdata</a> ',DEFDATA::ARGS
                (<a class="sym-link system" href="../../../axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
                (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))
              (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))))))</pre>
  </div>

<div class="form-block function" id="def-make-subsumes-relation-name" data-defines="MAKE-SUBSUMES-RELATION-NAME" data-references="FIX-INTERN$,STR,STRING-APPEND,STR11,STR2,SYMBOL-NAME,STR1,LET*,CURR-PKG,T2,T1,DEFUN" data-used-by="COMPUTE-DEFDATA-RELATION" data-part-name="MAKE-SUBSUMES-RELATION-NAME" data-part-args="CURR-PKG,T2,T1" data-part-body="CURR-PKG,FIX-INTERN$,STR,STRING-APPEND,STR11,T2,STR2,T1,SYMBOL-NAME,STR1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-SUBSUMES-RELATION-NAME">make-subsumes-relation-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-subsumes-relation-name" data-sym="MAKE-SUBSUMES-RELATION-NAME" title="(defun defdata::make-subsumes-relation-name
       (defdata::t1 defdata::t2 defdata::curr-pkg)
  (let* ((defdata::str1 (symbol-name defdata::t1))
         (defdata::str2 (symbol-name defdata::t2))
         (defdata::str11
...">make-subsumes-relation-name</a>
  (t1 t2 curr-pkg)
  (<a class="sym-link system" href="../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((str1 (symbol-name t1)) (str2 (symbol-name t2))
      (str11 (<a class="sym-link system" href="../../../axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> str1 <span class="string">"-IS-SUBTYPE-OF-"</span>))
      (str (<a class="sym-link system" href="../../../axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> str11 str2)))
    (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> str curr-pkg)))</pre>
  </div>

<div class="form-block function" id="def-make-disjoint-relation-name" data-defines="MAKE-DISJOINT-RELATION-NAME" data-references="FIX-INTERN$,STR,STRING-APPEND,STR11,STR2,SYMBOL-NAME,STR1,LET*,CURR-PKG,T2,T1,DEFUN" data-used-by="COMPUTE-DEFDATA-RELATION" data-part-name="MAKE-DISJOINT-RELATION-NAME" data-part-args="CURR-PKG,T2,T1" data-part-body="CURR-PKG,FIX-INTERN$,STR,STRING-APPEND,STR11,T2,STR2,T1,SYMBOL-NAME,STR1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-DISJOINT-RELATION-NAME">make-disjoint-relation-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-disjoint-relation-name" data-sym="MAKE-DISJOINT-RELATION-NAME" title="(defun defdata::make-disjoint-relation-name
       (defdata::t1 defdata::t2 defdata::curr-pkg)
  (let* ((defdata::str1 (symbol-name defdata::t1))
         (defdata::str2 (symbol-name defdata::t2))
         (defdata::str11
...">make-disjoint-relation-name</a>
  (t1 t2 curr-pkg)
  (<a class="sym-link system" href="../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((str1 (symbol-name t1)) (str2 (symbol-name t2))
      (str11 (<a class="sym-link system" href="../../../axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> str1 <span class="string">"-IS-DISJOINT-WITH-"</span>))
      (str (<a class="sym-link system" href="../../../axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> str11 str2)))
    (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> str curr-pkg)))</pre>
  </div>

<div class="form-block function" id="def-make-equal-relation-name" data-defines="MAKE-EQUAL-RELATION-NAME" data-references="FIX-INTERN$,STR,STRING-APPEND,STR11,STR2,SYMBOL-NAME,STR1,LET*,CURR-PKG,T2,T1,DEFUN" data-used-by="COMPUTE-DEFDATA-RELATION" data-part-name="MAKE-EQUAL-RELATION-NAME" data-part-args="CURR-PKG,T2,T1" data-part-body="CURR-PKG,FIX-INTERN$,STR,STRING-APPEND,STR11,T2,STR2,T1,SYMBOL-NAME,STR1,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-EQUAL-RELATION-NAME">make-equal-relation-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-equal-relation-name" data-sym="MAKE-EQUAL-RELATION-NAME" title="(defun defdata::make-equal-relation-name
       (defdata::t1 defdata::t2 defdata::curr-pkg)
  (let* ((defdata::str1 (symbol-name defdata::t1))
         (defdata::str2 (symbol-name defdata::t2))
         (defdata::str11
...">make-equal-relation-name</a>
  (t1 t2 curr-pkg)
  (<a class="sym-link system" href="../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((str1 (symbol-name t1)) (str2 (symbol-name t2))
      (str11 (<a class="sym-link system" href="../../../axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> str1 <span class="string">"-IS-EQUAL-TO-"</span>))
      (str (<a class="sym-link system" href="../../../axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> str11 str2)))
    (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> str curr-pkg)))</pre>
  </div>

<div class="form-block function" id="def-compute-defdata-relation" data-defines="COMPUTE-DEFDATA-RELATION" data-references="CW,-,VALUE-TRIPLE,MAKE-EVENT,ENCAPSULATE,IF,FINAL-FORM,FORM-TO-PRINT,DEFTHM,DEFTHM-FORM,MAKE-EQUAL-RELATION-NAME,MAKE-SUBSUMES-RELATION-NAME,MAKE-DISJOINT-RELATION-NAME,NM,DEFDATA-SUBTYPE,NOT,DEFDATA-DISJOINT,FORM,T,IMPLIES,QUASIQUOTE,DEFDATA-EQUAL,EQ,EQUAL,IS-ALLP-ALIAS,OR,COND,FIX-INTERN$,X,HARD,ER,ASSOC-EQ,AND,UNLESS,T2P,PREDICATE-NAME,T1P,BASE-ALIAS-TYPE,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,QUOTE,TABLE-ALIST,M,B*,WRLD,CURR-PKG,CTX,OTF-FLG,STRICTP,RULE-CLASSES,HINTS,T2,T1,DEFUN" data-used-by="DEFDATA-EQUAL,DEFDATA-DISJOINT,DEFDATA-SUBTYPE" data-part-name="COMPUTE-DEFDATA-RELATION" data-part-args="WRLD,CURR-PKG,CTX,OTF-FLG,STRICTP,RULE-CLASSES,HINTS,T2,T1" data-part-body="CW,-,VALUE-TRIPLE,MAKE-EVENT,ENCAPSULATE,STRICTP,IF,FINAL-FORM,FORM-TO-PRINT,DEFTHM,DEFTHM-FORM,MAKE-EQUAL-RELATION-NAME,MAKE-SUBSUMES-RELATION-NAME,MAKE-DISJOINT-RELATION-NAME,NM,DEFDATA-SUBTYPE,NOT,DEFDATA-DISJOINT,FORM,T,IMPLIES,QUASIQUOTE,DEFDATA-EQUAL,EQ,EQUAL,IS-ALLP-ALIAS,OR,COND,RULE-CLASSES,CURR-PKG,FIX-INTERN$,X,CTX,HARD,ER,ASSOC-EQ,AND,UNLESS,T2P,PREDICATE-NAME,T1P,T2,BASE-ALIAS-TYPE,T1,TYPE-ALIAS-TABLE,A,WRLD,TYPE-METADATA-TABLE,QUOTE,TABLE-ALIST,M,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPUTE-DEFDATA-RELATION">compute-defdata-relation</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-compute-defdata-relation" data-sym="COMPUTE-DEFDATA-RELATION" title="(defun defdata::compute-defdata-relation
       (defdata::t1 defdata::t2 defdata::hints defdata::rule-classes
        defdata::strictp defdata::otf-flg defdata::ctx defdata::curr-pkg
        defdata::wrld)
  (defdata::b*
...">compute-defdata-relation</a>
  (t1 t2
    hints
    rule-classes
    strictp
    otf-flg
    ctx
    curr-pkg
    wrld)
  (b* ((m (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
         wrld)) (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (t1 (base-alias-type t1 a))
      (t2 (base-alias-type t2 a))
      (t1p (predicate-name t1))
      (t2p (predicate-name t2))
      ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> t1 m)
           (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> t2 m))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard
          ctx
          <span class="string">"~|One of ~x0 and ~x1 is not a defined type!~%"</span>
          t1
          t2))
      (x (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> <span class="string">"X"</span> curr-pkg))
      (rule-classes (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (is-allp-alias t1p wrld)
             (is-allp-alias t2p wrld)
             (equal t1p t2p)) 'nil)
          ((<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> ctx '<a class="sym-link local-def" href="#def-defdata-equal" data-sym="DEFDATA-EQUAL" title="(defmacro defdata::defdata-equal
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system))) defdata::strictp
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-equal</a>) `((<span class="keyword">:rewrite</span>) (<span class="keyword">:tau-system</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,DEFDATA::T1P ,DEFDATA::X)
                  (,DEFDATA::T2P ,DEFDATA::X)))
              (<span class="keyword">:tau-system</span> <span class="keyword">:corollary</span> (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,DEFDATA::T2P ,DEFDATA::X)
                  (,DEFDATA::T1P ,DEFDATA::X)))))
          (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> rule-classes)))
      (form (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> ctx '<a class="sym-link local-def" href="#def-defdata-disjoint" data-sym="DEFDATA-DISJOINT" title="(defmacro defdata::defdata-disjoint
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-disjoint</a>) `(<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,DEFDATA::T1P ,DEFDATA::X)
              (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (,DEFDATA::T2P ,DEFDATA::X))))
          ((<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> ctx '<a class="sym-link local-def" href="#def-defdata-subtype" data-sym="DEFDATA-SUBTYPE" title="(defmacro defdata::defdata-subtype
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-subtype</a>) `(<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,DEFDATA::T1P ,DEFDATA::X)
              (,DEFDATA::T2P ,DEFDATA::X)))
          (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> `(equal (,DEFDATA::T1P ,DEFDATA::X)
              (,DEFDATA::T2P ,DEFDATA::X)))))
      (nm (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> ctx '<a class="sym-link local-def" href="#def-defdata-disjoint" data-sym="DEFDATA-DISJOINT" title="(defmacro defdata::defdata-disjoint
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-disjoint</a>) (<a class="sym-link local-def" href="#def-make-disjoint-relation-name" data-sym="MAKE-DISJOINT-RELATION-NAME" title="(defun defdata::make-disjoint-relation-name
       (defdata::t1 defdata::t2 defdata::curr-pkg)
  (let* ((defdata::str1 (symbol-name defdata::t1))
         (defdata::str2 (symbol-name defdata::t2))
         (defdata::str11
...">make-disjoint-relation-name</a> t1
              t2
              curr-pkg))
          ((<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> ctx '<a class="sym-link local-def" href="#def-defdata-subtype" data-sym="DEFDATA-SUBTYPE" title="(defmacro defdata::defdata-subtype
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-subtype</a>) (<a class="sym-link local-def" href="#def-make-subsumes-relation-name" data-sym="MAKE-SUBSUMES-RELATION-NAME" title="(defun defdata::make-subsumes-relation-name
       (defdata::t1 defdata::t2 defdata::curr-pkg)
  (let* ((defdata::str1 (symbol-name defdata::t1))
         (defdata::str2 (symbol-name defdata::t2))
         (defdata::str11
...">make-subsumes-relation-name</a> t1
              t2
              curr-pkg))
          (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-make-equal-relation-name" data-sym="MAKE-EQUAL-RELATION-NAME" title="(defun defdata::make-equal-relation-name
       (defdata::t1 defdata::t2 defdata::curr-pkg)
  (let* ((defdata::str1 (symbol-name defdata::t1))
         (defdata::str2 (symbol-name defdata::t2))
         (defdata::str11
...">make-equal-relation-name</a> t1
              t2
              curr-pkg))))
      (defthm-form `(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,DEFDATA::NM
          ,DEFDATA::FORM
          <span class="keyword">:hints</span> ,DEFDATA::HINTS
          <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
          <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG))
      (form-to-print `(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,DEFDATA::NM
          ,DEFDATA::FORM
          ,@(AND DEFDATA::HINTS `(:HINTS ,DEFDATA::HINTS))
          ,@(AND DEFDATA::RULE-CLASSES `(:RULE-CLASSES ,DEFDATA::RULE-CLASSES))
          ,@(AND DEFDATA::OTF-FLG `(:OTF-FLG ,DEFDATA::OTF-FLG))))
      (final-form (if strictp
          defthm-form
          `(<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
            (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> '(<span class="keyword">:or</span> ,DEFDATA::DEFTHM-FORM
                (<a class="sym-link system" href="../../../axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> <span class="keyword">:defdata-form-failed</span>))))))
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"~|Submitting ~x0~|"</span> form-to-print)))
    `,DEFDATA::FINAL-FORM))</pre>
  </div>

<div class="form-block macro" id="def-defdata-subtype" data-defines="DEFDATA-SUBTYPE" data-references="W,STATE,CURRENT-PACKAGE,COMPUTE-DEFDATA-RELATION,MAKE-EVENT,WITH-OUTPUT,QUASIQUOTE,PROPER-SYMBOLP,AND,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,STRICTP,QUOTE,RULE-CLASSES,&KEY,T2,T1,DEFMACRO" data-used-by="DEFDATAS-SUBTYPE-FN,DEFDATA-SUBTYPE-STRICT,COMPUTE-DEFDATA-RELATION" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATA-SUBTYPE">defdata-subtype</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdata-subtype" data-sym="DEFDATA-SUBTYPE" title="(defmacro defdata::defdata-subtype
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-subtype</a>
  (t1 t2
    &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    strictp
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp t1)
        (proper-symbolp t2))))
  `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT DEFDATA::VERBOSE)
       &#39;(:OFF
         (WARNING DEFDATA::WARNING! DEFDATA::OBSERVATION DEFDATA::PROVE
          DEFDATA::PROOF-BUILDER DEFDATA::EVENT DEFDATA::HISTORY
          DEFDATA::SUMMARY DEFDATA::PROOF-TREE)))
    <span class="keyword">:stack</span> <span class="keyword">:push</span> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-compute-defdata-relation" data-sym="COMPUTE-DEFDATA-RELATION" title="(defun defdata::compute-defdata-relation
       (defdata::t1 defdata::t2 defdata::hints defdata::rule-classes
        defdata::strictp defdata::otf-flg defdata::ctx defdata::curr-pkg
        defdata::wrld)
  (defdata::b*
...">compute-defdata-relation</a> ',DEFDATA::T1
        ',DEFDATA::T2
        ',DEFDATA::HINTS
        ',DEFDATA::RULE-CLASSES
        ',DEFDATA::STRICTP
        ',DEFDATA::OTF-FLG
        '<a class="sym-link local-def" href="#def-defdata-subtype" data-sym="DEFDATA-SUBTYPE" title="(defmacro defdata::defdata-subtype
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-subtype</a>
        (<a class="sym-link system" href="../../../axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state)))))</pre>
  </div>

<div class="form-block macro" id="def-defdata-disjoint" data-defines="DEFDATA-DISJOINT" data-references="W,STATE,CURRENT-PACKAGE,COMPUTE-DEFDATA-RELATION,MAKE-EVENT,WITH-OUTPUT,QUASIQUOTE,PROPER-SYMBOLP,AND,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,STRICTP,QUOTE,RULE-CLASSES,&KEY,T2,T1,DEFMACRO" data-used-by="DEFDATAS-DISJOINT-CAR-FN,DEFDATA-DISJOINT-STRICT,COMPUTE-DEFDATA-RELATION" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATA-DISJOINT">defdata-disjoint</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdata-disjoint" data-sym="DEFDATA-DISJOINT" title="(defmacro defdata::defdata-disjoint
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-disjoint</a>
  (t1 t2
    &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    strictp
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp t1)
        (proper-symbolp t2))))
  `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT DEFDATA::VERBOSE)
       &#39;(:OFF
         (WARNING DEFDATA::WARNING! DEFDATA::OBSERVATION DEFDATA::PROVE
          DEFDATA::PROOF-BUILDER DEFDATA::EVENT DEFDATA::HISTORY
          DEFDATA::SUMMARY DEFDATA::PROOF-TREE)))
    <span class="keyword">:stack</span> <span class="keyword">:push</span> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-compute-defdata-relation" data-sym="COMPUTE-DEFDATA-RELATION" title="(defun defdata::compute-defdata-relation
       (defdata::t1 defdata::t2 defdata::hints defdata::rule-classes
        defdata::strictp defdata::otf-flg defdata::ctx defdata::curr-pkg
        defdata::wrld)
  (defdata::b*
...">compute-defdata-relation</a> ',DEFDATA::T1
        ',DEFDATA::T2
        ',DEFDATA::HINTS
        ',DEFDATA::RULE-CLASSES
        ',DEFDATA::STRICTP
        ',DEFDATA::OTF-FLG
        '<a class="sym-link local-def" href="#def-defdata-disjoint" data-sym="DEFDATA-DISJOINT" title="(defmacro defdata::defdata-disjoint
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-disjoint</a>
        (<a class="sym-link system" href="../../../axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state)))))</pre>
  </div>

<div class="form-block macro" id="def-defdata-equal" data-defines="DEFDATA-EQUAL" data-references="W,STATE,CURRENT-PACKAGE,COMPUTE-DEFDATA-RELATION,MAKE-EVENT,WITH-OUTPUT,QUASIQUOTE,PROPER-SYMBOLP,AND,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,STRICTP,QUOTE,RULE-CLASSES,&KEY,T2,T1,DEFMACRO" data-used-by="DEFDATAS-EQUAL-FN,DEFDATA-EQUAL-STRICT,COMPUTE-DEFDATA-RELATION" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATA-EQUAL">defdata-equal</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdata-equal" data-sym="DEFDATA-EQUAL" title="(defmacro defdata::defdata-equal
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system))) defdata::strictp
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-equal</a>
  (t1 t2
    &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>)))
    strictp
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp t1)
        (proper-symbolp t2))))
  `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT DEFDATA::VERBOSE)
       &#39;(:OFF
         (WARNING DEFDATA::WARNING! DEFDATA::OBSERVATION DEFDATA::PROVE
          DEFDATA::PROOF-BUILDER DEFDATA::EVENT DEFDATA::HISTORY
          DEFDATA::SUMMARY DEFDATA::PROOF-TREE)))
    <span class="keyword">:stack</span> <span class="keyword">:push</span> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-compute-defdata-relation" data-sym="COMPUTE-DEFDATA-RELATION" title="(defun defdata::compute-defdata-relation
       (defdata::t1 defdata::t2 defdata::hints defdata::rule-classes
        defdata::strictp defdata::otf-flg defdata::ctx defdata::curr-pkg
        defdata::wrld)
  (defdata::b*
...">compute-defdata-relation</a> ',DEFDATA::T1
        ',DEFDATA::T2
        ',DEFDATA::HINTS
        ',DEFDATA::RULE-CLASSES
        ',DEFDATA::STRICTP
        ',DEFDATA::OTF-FLG
        '<a class="sym-link local-def" href="#def-defdata-equal" data-sym="DEFDATA-EQUAL" title="(defmacro defdata::defdata-equal
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system))) defdata::strictp
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-equal</a>
        (<a class="sym-link system" href="../../../axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
        (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state)))))</pre>
  </div>

<div class="form-block macro" id="def-defdata-subtype-strict" data-defines="DEFDATA-SUBTYPE-STRICT" data-references="T,DEFDATA-SUBTYPE,QUASIQUOTE,PROPER-SYMBOLP,AND,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,QUOTE,RULE-CLASSES,&KEY,T2,T1,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATA-SUBTYPE-STRICT">defdata-subtype-strict</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdata-subtype-strict" data-sym="DEFDATA-SUBTYPE-STRICT" title="(defmacro defdata::defdata-subtype-strict
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-subtype-strict</a>
  (t1 t2
    &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp t1)
        (proper-symbolp t2))))
  `(<a class="sym-link local-def" href="#def-defdata-subtype" data-sym="DEFDATA-SUBTYPE" title="(defmacro defdata::defdata-subtype
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-subtype</a> ,DEFDATA::T1
    ,DEFDATA::T2
    <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
    <span class="keyword">:strictp</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:verbose</span> ,DEFDATA::VERBOSE
    <span class="keyword">:hints</span> ,DEFDATA::HINTS
    <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG))</pre>
  </div>

<div class="form-block macro" id="def-defdata-disjoint-strict" data-defines="DEFDATA-DISJOINT-STRICT" data-references="T,DEFDATA-DISJOINT,QUASIQUOTE,PROPER-SYMBOLP,AND,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,QUOTE,RULE-CLASSES,&KEY,T2,T1,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATA-DISJOINT-STRICT">defdata-disjoint-strict</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdata-disjoint-strict" data-sym="DEFDATA-DISJOINT-STRICT" title="(defmacro defdata::defdata-disjoint-strict
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-disjoint-strict</a>
  (t1 t2
    &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp t1)
        (proper-symbolp t2))))
  `(<a class="sym-link local-def" href="#def-defdata-disjoint" data-sym="DEFDATA-DISJOINT" title="(defmacro defdata::defdata-disjoint
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-disjoint</a> ,DEFDATA::T1
    ,DEFDATA::T2
    <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
    <span class="keyword">:strictp</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:verbose</span> ,DEFDATA::VERBOSE
    <span class="keyword">:hints</span> ,DEFDATA::HINTS
    <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG))</pre>
  </div>

<div class="form-block macro" id="def-defdata-equal-strict" data-defines="DEFDATA-EQUAL-STRICT" data-references="T,DEFDATA-EQUAL,QUASIQUOTE,PROPER-SYMBOLP,AND,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,QUOTE,RULE-CLASSES,&KEY,T2,T1,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATA-EQUAL-STRICT">defdata-equal-strict</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdata-equal-strict" data-sym="DEFDATA-EQUAL-STRICT" title="(defmacro defdata::defdata-equal-strict
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system))) defdata::verbose
           defdata::hints defdata::otf-flg)
  (declare
...">defdata-equal-strict</a>
  (t1 t2
    &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>)))
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp t1)
        (proper-symbolp t2))))
  `(<a class="sym-link local-def" href="#def-defdata-equal" data-sym="DEFDATA-EQUAL" title="(defmacro defdata::defdata-equal
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system))) defdata::strictp
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-equal</a> ,DEFDATA::T1
    ,DEFDATA::T2
    <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
    <span class="keyword">:strictp</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:verbose</span> ,DEFDATA::VERBOSE
    <span class="keyword">:hints</span> ,DEFDATA::HINTS
    <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG))</pre>
  </div>

<div class="form-block function" id="def-defdatas-disjoint-car-fn" data-defines="DEFDATAS-DISJOINT-CAR-FN" data-references="CDDR,CAR,DEFDATA-DISJOINT,QUASIQUOTE,CONS,CDR,ENDP,IF,OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,L,DEFUN" data-used-by="DEFDATAS-DISJOINT-FN" data-part-name="DEFDATAS-DISJOINT-CAR-FN" data-part-args="OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,L" data-part-body="OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,CDDR,CAR,DEFDATAS-DISJOINT-CAR-FN,DEFDATA-DISJOINT,QUASIQUOTE,CONS,L,CDR,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-DISJOINT-CAR-FN">defdatas-disjoint-car-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defdatas-disjoint-car-fn" data-sym="DEFDATAS-DISJOINT-CAR-FN" title="(defun defdata::defdatas-disjoint-car-fn
       (defdata::l defdata::rule-classes defdata::strictp defdata::verbose
        defdata::hints defdata::otf-flg)
  (if (endp (cdr defdata::l))
      nil
...">defdatas-disjoint-car-fn</a>
  (l rule-classes
    strictp
    verbose
    hints
    otf-flg)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr l))
    nil
    (cons `(<a class="sym-link local-def" href="#def-defdata-disjoint" data-sym="DEFDATA-DISJOINT" title="(defmacro defdata::defdata-disjoint
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-disjoint</a> ,(CAR DEFDATA::L)
        ,(SECOND DEFDATA::L)
        <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
        <span class="keyword">:strictp</span> ,DEFDATA::STRICTP
        <span class="keyword">:verbose</span> ,DEFDATA::VERBOSE
        <span class="keyword">:hints</span> ,DEFDATA::HINTS
        <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG)
      (<a class="sym-link local-def" href="#def-defdatas-disjoint-car-fn" data-sym="DEFDATAS-DISJOINT-CAR-FN" title="(defun defdata::defdatas-disjoint-car-fn
       (defdata::l defdata::rule-classes defdata::strictp defdata::verbose
        defdata::hints defdata::otf-flg)
  (if (endp (cdr defdata::l))
      nil
...">defdatas-disjoint-car-fn</a> (cons (car l) (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> l))
        rule-classes
        strictp
        verbose
        hints
        otf-flg))))</pre>
  </div>

<div class="form-block function" id="def-defdatas-disjoint-fn" data-defines="DEFDATAS-DISJOINT-FN" data-references="DEFDATAS-DISJOINT-CAR-FN,APPEND,CDR,ENDP,IF,OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,L,DEFUN" data-part-name="DEFDATAS-DISJOINT-FN" data-part-args="OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,L" data-part-body="DEFDATAS-DISJOINT-FN,OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,DEFDATAS-DISJOINT-CAR-FN,APPEND,L,CDR,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-DISJOINT-FN">defdatas-disjoint-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defdatas-disjoint-fn" data-sym="DEFDATAS-DISJOINT-FN" title="(defun defdata::defdatas-disjoint-fn
       (defdata::l defdata::rule-classes defdata::strictp defdata::verbose
        defdata::hints defdata::otf-flg)
  (if (endp (cdr defdata::l))
      nil
...">defdatas-disjoint-fn</a>
  (l rule-classes
    strictp
    verbose
    hints
    otf-flg)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr l))
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-defdatas-disjoint-car-fn" data-sym="DEFDATAS-DISJOINT-CAR-FN" title="(defun defdata::defdatas-disjoint-car-fn
       (defdata::l defdata::rule-classes defdata::strictp defdata::verbose
        defdata::hints defdata::otf-flg)
  (if (endp (cdr defdata::l))
      nil
...">defdatas-disjoint-car-fn</a> l
        rule-classes
        strictp
        verbose
        hints
        otf-flg)
      (<a class="sym-link local-def" href="#def-defdatas-disjoint-fn" data-sym="DEFDATAS-DISJOINT-FN" title="(defun defdata::defdatas-disjoint-fn
       (defdata::l defdata::rule-classes defdata::strictp defdata::verbose
        defdata::hints defdata::otf-flg)
  (if (endp (cdr defdata::l))
      nil
...">defdatas-disjoint-fn</a> (cdr l)
        rule-classes
        strictp
        verbose
        hints
        otf-flg))))</pre>
  </div>

<div class="form-block macro" id="def-defdatas-disjoint" data-defines="DEFDATAS-DISJOINT" data-references="ENCAPSULATE,WITH-OUTPUT,QUASIQUOTE,PROPER-SYMBOL-LISTP,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,STRICTP,QUOTE,RULE-CLASSES,&KEY,L,DEFMACRO" data-used-by="DEFDATAS-DISJOINT-STRICT" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-DISJOINT">defdatas-disjoint</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdatas-disjoint" data-sym="DEFDATAS-DISJOINT" title="(defmacro defdata::defdatas-disjoint
          (defdata::l
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare (defdata::xargs :guard (defdata::proper-symbol-listp defdata::l)))
...">defdatas-disjoint</a>
  (l &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    strictp
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (proper-symbol-listp l)))
  `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT DEFDATA::VERBOSE)
       &#39;(:OFF
         (WARNING DEFDATA::WARNING! DEFDATA::OBSERVATION DEFDATA::PROVE
          DEFDATA::PROOF-BUILDER DEFDATA::EVENT DEFDATA::HISTORY
          DEFDATA::SUMMARY DEFDATA::PROOF-TREE)))
    <span class="keyword">:stack</span> <span class="keyword">:push</span> (<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
      ,@(DEFDATA::DEFDATAS-DISJOINT-FN DEFDATA::L DEFDATA::RULE-CLASSES
   DEFDATA::STRICTP DEFDATA::VERBOSE DEFDATA::HINTS DEFDATA::OTF-FLG))))</pre>
  </div>

<div class="form-block macro" id="def-defdatas-disjoint-strict" data-defines="DEFDATAS-DISJOINT-STRICT" data-references="T,DEFDATAS-DISJOINT,QUASIQUOTE,PROPER-SYMBOL-LISTP,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,QUOTE,RULE-CLASSES,&KEY,L,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-DISJOINT-STRICT">defdatas-disjoint-strict</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdatas-disjoint-strict" data-sym="DEFDATAS-DISJOINT-STRICT" title="(defmacro defdata::defdatas-disjoint-strict
          (defdata::l
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare (defdata::xargs :guard (defdata::proper-symbol-listp defdata::l)))
...">defdatas-disjoint-strict</a>
  (l &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (proper-symbol-listp l)))
  `(<a class="sym-link local-def" href="#def-defdatas-disjoint" data-sym="DEFDATAS-DISJOINT" title="(defmacro defdata::defdatas-disjoint
          (defdata::l
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare (defdata::xargs :guard (defdata::proper-symbol-listp defdata::l)))
...">defdatas-disjoint</a> ,DEFDATA::L
    <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
    <span class="keyword">:strictp</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:verbose</span> ,DEFDATA::VERBOSE
    <span class="keyword">:hints</span> ,DEFDATA::HINTS
    <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG))</pre>
  </div>

<div class="form-block function" id="def-defdatas-subtype-fn" data-defines="DEFDATAS-SUBTYPE-FN" data-references="DEFDATA-SUBTYPE,QUASIQUOTE,CONS,CDR,ENDP,IF,OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,L,DEFUN" data-part-name="DEFDATAS-SUBTYPE-FN" data-part-args="OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,L" data-part-body="OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,DEFDATAS-SUBTYPE-FN,DEFDATA-SUBTYPE,QUASIQUOTE,CONS,L,CDR,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-SUBTYPE-FN">defdatas-subtype-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defdatas-subtype-fn" data-sym="DEFDATAS-SUBTYPE-FN" title="(defun defdata::defdatas-subtype-fn
       (defdata::l defdata::rule-classes defdata::strictp defdata::verbose
        defdata::hints defdata::otf-flg)
  (if (endp (cdr defdata::l))
      nil
...">defdatas-subtype-fn</a>
  (l rule-classes
    strictp
    verbose
    hints
    otf-flg)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr l))
    nil
    (cons `(<a class="sym-link local-def" href="#def-defdata-subtype" data-sym="DEFDATA-SUBTYPE" title="(defmacro defdata::defdata-subtype
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-subtype</a> ,(CAR DEFDATA::L)
        ,(SECOND DEFDATA::L)
        <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
        <span class="keyword">:strictp</span> ,DEFDATA::STRICTP
        <span class="keyword">:verbose</span> ,DEFDATA::VERBOSE
        <span class="keyword">:hints</span> ,DEFDATA::HINTS
        <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG)
      (<a class="sym-link local-def" href="#def-defdatas-subtype-fn" data-sym="DEFDATAS-SUBTYPE-FN" title="(defun defdata::defdatas-subtype-fn
       (defdata::l defdata::rule-classes defdata::strictp defdata::verbose
        defdata::hints defdata::otf-flg)
  (if (endp (cdr defdata::l))
      nil
...">defdatas-subtype-fn</a> (cdr l)
        rule-classes
        strictp
        verbose
        hints
        otf-flg))))</pre>
  </div>

<div class="form-block macro" id="def-defdatas-subtype" data-defines="DEFDATAS-SUBTYPE" data-references="ENCAPSULATE,WITH-OUTPUT,QUASIQUOTE,PROPER-SYMBOL-LISTP,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,STRICTP,QUOTE,RULE-CLASSES,&KEY,L,DEFMACRO" data-used-by="DEFDATAS-SUBTYPE-STRICT" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-SUBTYPE">defdatas-subtype</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdatas-subtype" data-sym="DEFDATAS-SUBTYPE" title="(defmacro defdata::defdatas-subtype
          (defdata::l
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare (defdata::xargs :guard (defdata::proper-symbol-listp defdata::l)))
...">defdatas-subtype</a>
  (l &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    strictp
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (proper-symbol-listp l)))
  `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT DEFDATA::VERBOSE)
       &#39;(:OFF
         (WARNING DEFDATA::WARNING! DEFDATA::OBSERVATION DEFDATA::PROVE
          DEFDATA::PROOF-BUILDER DEFDATA::EVENT DEFDATA::HISTORY
          DEFDATA::SUMMARY DEFDATA::PROOF-TREE)))
    <span class="keyword">:stack</span> <span class="keyword">:push</span> (<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
      ,@(DEFDATA::DEFDATAS-SUBTYPE-FN DEFDATA::L DEFDATA::RULE-CLASSES
   DEFDATA::STRICTP DEFDATA::VERBOSE DEFDATA::HINTS DEFDATA::OTF-FLG))))</pre>
  </div>

<div class="form-block macro" id="def-defdatas-subtype-strict" data-defines="DEFDATAS-SUBTYPE-STRICT" data-references="T,DEFDATAS-SUBTYPE,QUASIQUOTE,PROPER-SYMBOL-LISTP,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,QUOTE,RULE-CLASSES,&KEY,L,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-SUBTYPE-STRICT">defdatas-subtype-strict</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdatas-subtype-strict" data-sym="DEFDATAS-SUBTYPE-STRICT" title="(defmacro defdata::defdatas-subtype-strict
          (defdata::l
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare (defdata::xargs :guard (defdata::proper-symbol-listp defdata::l)))
...">defdatas-subtype-strict</a>
  (l &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (proper-symbol-listp l)))
  `(<a class="sym-link local-def" href="#def-defdatas-subtype" data-sym="DEFDATAS-SUBTYPE" title="(defmacro defdata::defdatas-subtype
          (defdata::l
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare (defdata::xargs :guard (defdata::proper-symbol-listp defdata::l)))
...">defdatas-subtype</a> ,DEFDATA::L
    <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
    <span class="keyword">:strictp</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:verbose</span> ,DEFDATA::VERBOSE
    <span class="keyword">:hints</span> ,DEFDATA::HINTS
    <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG))</pre>
  </div>

<div class="form-block function" id="def-defdatas-equal-fn" data-defines="DEFDATAS-EQUAL-FN" data-references="DEFDATA-EQUAL,QUASIQUOTE,CONS,CDR,ENDP,IF,OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,L,DEFUN" data-part-name="DEFDATAS-EQUAL-FN" data-part-args="OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,L" data-part-body="OTF-FLG,HINTS,VERBOSE,STRICTP,RULE-CLASSES,DEFDATAS-EQUAL-FN,DEFDATA-EQUAL,QUASIQUOTE,CONS,L,CDR,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-EQUAL-FN">defdatas-equal-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defdatas-equal-fn" data-sym="DEFDATAS-EQUAL-FN" title="(defun defdata::defdatas-equal-fn
       (defdata::l defdata::rule-classes defdata::strictp defdata::verbose
        defdata::hints defdata::otf-flg)
  (if (endp (cdr defdata::l))
      nil
...">defdatas-equal-fn</a>
  (l rule-classes
    strictp
    verbose
    hints
    otf-flg)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr l))
    nil
    (cons `(<a class="sym-link local-def" href="#def-defdata-equal" data-sym="DEFDATA-EQUAL" title="(defmacro defdata::defdata-equal
          (defdata::t1 defdata::t2
           &amp;key (defdata::rule-classes &#39;((:tau-system))) defdata::strictp
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare
...">defdata-equal</a> ,(CAR DEFDATA::L)
        ,(SECOND DEFDATA::L)
        <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
        <span class="keyword">:strictp</span> ,DEFDATA::STRICTP
        <span class="keyword">:verbose</span> ,DEFDATA::VERBOSE
        <span class="keyword">:hints</span> ,DEFDATA::HINTS
        <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG)
      (<a class="sym-link local-def" href="#def-defdatas-equal-fn" data-sym="DEFDATAS-EQUAL-FN" title="(defun defdata::defdatas-equal-fn
       (defdata::l defdata::rule-classes defdata::strictp defdata::verbose
        defdata::hints defdata::otf-flg)
  (if (endp (cdr defdata::l))
      nil
...">defdatas-equal-fn</a> (cdr l)
        rule-classes
        strictp
        verbose
        hints
        otf-flg))))</pre>
  </div>

<div class="form-block macro" id="def-defdatas-equal" data-defines="DEFDATAS-EQUAL" data-references="ENCAPSULATE,WITH-OUTPUT,QUASIQUOTE,PROPER-SYMBOL-LISTP,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,STRICTP,QUOTE,RULE-CLASSES,&KEY,L,DEFMACRO" data-used-by="DEFDATAS-EQUAL-STRICT" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-EQUAL">defdatas-equal</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdatas-equal" data-sym="DEFDATAS-EQUAL" title="(defmacro defdata::defdatas-equal
          (defdata::l
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare (defdata::xargs :guard (defdata::proper-symbol-listp defdata::l)))
...">defdatas-equal</a>
  (l &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    strictp
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (proper-symbol-listp l)))
  `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT DEFDATA::VERBOSE)
       &#39;(:OFF
         (WARNING DEFDATA::WARNING! DEFDATA::OBSERVATION DEFDATA::PROVE
          DEFDATA::PROOF-BUILDER DEFDATA::EVENT DEFDATA::HISTORY
          DEFDATA::SUMMARY DEFDATA::PROOF-TREE)))
    <span class="keyword">:stack</span> <span class="keyword">:push</span> (<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
      ,@(DEFDATA::DEFDATAS-EQUAL-FN DEFDATA::L DEFDATA::RULE-CLASSES DEFDATA::STRICTP
   DEFDATA::VERBOSE DEFDATA::HINTS DEFDATA::OTF-FLG))))</pre>
  </div>

<div class="form-block macro" id="def-defdatas-equal-strict" data-defines="DEFDATAS-EQUAL-STRICT" data-references="T,DEFDATAS-EQUAL,QUASIQUOTE,PROPER-SYMBOL-LISTP,XARGS,DECLARE,OTF-FLG,HINTS,VERBOSE,QUOTE,RULE-CLASSES,&KEY,L,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFDATAS-EQUAL-STRICT">defdatas-equal-strict</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defdatas-equal-strict" data-sym="DEFDATAS-EQUAL-STRICT" title="(defmacro defdata::defdatas-equal-strict
          (defdata::l
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::verbose defdata::hints defdata::otf-flg)
  (declare (defdata::xargs :guard (defdata::proper-symbol-listp defdata::l)))
...">defdatas-equal-strict</a>
  (l &amp;key
    (rule-classes '((<span class="keyword">:tau-system</span>) (<span class="keyword">:forward-chaining</span>)))
    verbose
    hints
    otf-flg)
  (declare (xargs <span class="keyword">:guard</span> (proper-symbol-listp l)))
  `(<a class="sym-link local-def" href="#def-defdatas-equal" data-sym="DEFDATAS-EQUAL" title="(defmacro defdata::defdatas-equal
          (defdata::l
           &amp;key (defdata::rule-classes &#39;((:tau-system) (:forward-chaining)))
           defdata::strictp defdata::verbose defdata::hints defdata::otf-flg)
  (declare (defdata::xargs :guard (defdata::proper-symbol-listp defdata::l)))
...">defdatas-equal</a> ,DEFDATA::L
    <span class="keyword">:rule-classes</span> ,DEFDATA::RULE-CLASSES
    <span class="keyword">:strictp</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:verbose</span> ,DEFDATA::VERBOSE
    <span class="keyword">:hints</span> ,DEFDATA::HINTS
    <span class="keyword">:otf-flg</span> ,DEFDATA::OTF-FLG))</pre>
  </div>

<div class="form-block other" id="form-81" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-logic" data-sym="LOGIC">logic</a>)</pre>
  </div>

<div class="form-block function" id="def-is-datadef-type-predicate" data-defines="IS-DATADEF-TYPE-PREDICATE" data-references="ASSOC-EQ,CDR,EQ,CAR,AL,TYP,CONS,B*,ENDP,IF,SYMBOL-ALISTP,SYMBOLP,AND,XARGS,DECLARE,M,FN-NAME,DEFUN" data-used-by="IS-TYPE-PREDICATE-CURRENT" data-part-name="IS-DATADEF-TYPE-PREDICATE" data-part-args="M,FN-NAME" data-part-declare="M,SYMBOL-ALISTP,FN-NAME,SYMBOLP,AND,XARGS,DECLARE" data-part-body="IS-DATADEF-TYPE-PREDICATE,ASSOC-EQ,CDR,FN-NAME,EQ,CAR,AL,TYP,CONS,B*,M,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IS-DATADEF-TYPE-PREDICATE">is-datadef-type-predicate</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-is-datadef-type-predicate" data-sym="IS-DATADEF-TYPE-PREDICATE" title="(defun defdata::is-datadef-type-predicate (defdata::fn-name defdata::m)
  (declare
   (defdata::xargs :verify-guards nil :guard
    (and (symbolp defdata::fn-name) (defdata::symbol-alistp defdata::m))))
  (if (endp defdata::m)
...">is-datadef-type-predicate</a>
  (fn-name m)
  (declare (xargs <span class="keyword">:verify-guards</span> nil
      <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp fn-name)
        (<a class="sym-link system" href="../../../axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> m))))
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> m)
    nil
    (b* (((cons typ al) (car m)))
      (if (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> fn-name
          (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:predicate</span> al)))
        typ
        (<a class="sym-link local-def" href="#def-is-datadef-type-predicate" data-sym="IS-DATADEF-TYPE-PREDICATE" title="(defun defdata::is-datadef-type-predicate (defdata::fn-name defdata::m)
  (declare
   (defdata::xargs :verify-guards nil :guard
    (and (symbolp defdata::fn-name) (defdata::symbol-alistp defdata::m))))
  (if (endp defdata::m)
...">is-datadef-type-predicate</a> fn-name
          (cdr m))))))</pre>
  </div>

<div class="form-block function" id="def-is-type-predicate-current" data-defines="IS-TYPE-PREDICATE-CURRENT" data-references="TYPE-METADATA-TABLE,PRED-ALIAS-TABLE,TABLE-ALIST,BASE-ALIAS-PRED,IS-DATADEF-TYPE-PREDICATE,SYMBOLP,AND,Y,IGNORABLE,P,X,LAMBDA,QUOTE,CASE-MATCH,PRED,LET,PLIST-WORLDP,XARGS,DECLARE,WRLD,FN-NAME,DEFUN" data-used-by="IS-TYPE-PREDICATE-GV" data-part-name="IS-TYPE-PREDICATE-CURRENT" data-part-args="WRLD,FN-NAME" data-part-declare="WRLD,PLIST-WORLDP,XARGS,DECLARE" data-part-body="TYPE-METADATA-TABLE,WRLD,PRED-ALIAS-TABLE,TABLE-ALIST,BASE-ALIAS-PRED,IS-DATADEF-TYPE-PREDICATE,SYMBOLP,AND,Y,IGNORABLE,DECLARE,P,X,LAMBDA,QUOTE,FN-NAME,CASE-MATCH,PRED,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IS-TYPE-PREDICATE-CURRENT">is-type-predicate-current</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-is-type-predicate-current" data-sym="IS-TYPE-PREDICATE-CURRENT" title="(defun defdata::is-type-predicate-current (defdata::fn-name defdata::wrld)
  (declare
   (defdata::xargs :verify-guards nil :guard
    (defdata::plist-worldp defdata::wrld)))
  (let ((defdata::pred
...">is-type-predicate-current</a>
  (fn-name wrld)
  (declare (xargs <span class="keyword">:verify-guards</span> nil
      <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> wrld)))
  (let ((pred (<a class="sym-link system" href="../../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> fn-name
         (('lambda (x) (p x)) (declare (ignorable x))
           p)
         (y y))))
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp pred)
      (<a class="sym-link local-def" href="#def-is-datadef-type-predicate" data-sym="IS-DATADEF-TYPE-PREDICATE" title="(defun defdata::is-datadef-type-predicate (defdata::fn-name defdata::m)
  (declare
   (defdata::xargs :verify-guards nil :guard
    (and (symbolp defdata::fn-name) (defdata::symbol-alistp defdata::m))))
  (if (endp defdata::m)
...">is-datadef-type-predicate</a> (base-alias-pred pred
          (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'pred-alias-table
            wrld))
        (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
          wrld)))))</pre>
  </div>

<div class="form-block function" id="def-is-type-predicate-gv" data-defines="IS-TYPE-PREDICATE-GV" data-references="IS-TYPE-PREDICATE-CURRENT,EC-CALL,T,XARGS,DECLARE,W,FN,DEFUN" data-part-name="IS-TYPE-PREDICATE-GV" data-part-args="W,FN" data-part-declare="T,XARGS,DECLARE" data-part-body="W,FN,IS-TYPE-PREDICATE-CURRENT,EC-CALL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IS-TYPE-PREDICATE-GV">is-type-predicate-gv</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-is-type-predicate-gv" data-sym="IS-TYPE-PREDICATE-GV" title="(defun defdata::is-type-predicate-gv (defdata::fn defdata::w)
  (declare (defdata::xargs :guard t))
  (defdata::ec-call
   (defdata::is-type-predicate-current defdata::fn defdata::w)))">is-type-predicate-gv</a>
  (fn <a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a>)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-ec-call" data-sym="EC-CALL">ec-call</a> (<a class="sym-link local-def" href="#def-is-type-predicate-current" data-sym="IS-TYPE-PREDICATE-CURRENT" title="(defun defdata::is-type-predicate-current (defdata::fn-name defdata::wrld)
  (declare
   (defdata::xargs :verify-guards nil :guard
    (defdata::plist-worldp defdata::wrld)))
  (let ((defdata::pred
...">is-type-predicate-current</a> fn <a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a>)))</pre>
  </div>

<div class="form-block other" id="form-85" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> is-type-predicate
  <a class="sym-link local-def" href="#def-is-type-predicate-gv" data-sym="IS-TYPE-PREDICATE-GV" title="(defun defdata::is-type-predicate-gv (defdata::fn defdata::w)
  (declare (defdata::xargs :guard t))
  (defdata::ec-call
   (defdata::is-type-predicate-current defdata::fn defdata::w)))">is-type-predicate-gv</a>)</pre>
  </div>

<div class="form-block function" id="def-is-a-typename-current" data-defines="IS-A-TYPENAME-CURRENT" data-references="PREDICATE-NAME,XARGS,DECLARE,WRLD,TYPE,DEFUN" data-used-by="IS-A-TYPENAME-GV" data-part-name="IS-A-TYPENAME-CURRENT" data-part-args="WRLD,TYPE" data-part-declare="XARGS,DECLARE" data-part-body="TYPE,PREDICATE-NAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IS-A-TYPENAME-CURRENT">is-a-typename-current</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-is-a-typename-current" data-sym="IS-A-TYPENAME-CURRENT" title="(defun defdata::is-a-typename-current (type defdata::wrld)
  (declare (defdata::xargs :verify-guards nil))
  (defdata::predicate-name type))">is-a-typename-current</a>
  (type wrld)
  (declare (xargs <span class="keyword">:verify-guards</span> nil))
  (predicate-name type))</pre>
  </div>

<div class="form-block function" id="def-is-a-typename-gv" data-defines="IS-A-TYPENAME-GV" data-references="IS-A-TYPENAME-CURRENT,EC-CALL,T,XARGS,DECLARE,WRLD,TYPE,DEFUN" data-part-name="IS-A-TYPENAME-GV" data-part-args="WRLD,TYPE" data-part-declare="T,XARGS,DECLARE" data-part-body="WRLD,TYPE,IS-A-TYPENAME-CURRENT,EC-CALL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IS-A-TYPENAME-GV">is-a-typename-gv</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-is-a-typename-gv" data-sym="IS-A-TYPENAME-GV" title="(defun defdata::is-a-typename-gv (type defdata::wrld)
  (declare (defdata::xargs :guard t))
  (defdata::ec-call (defdata::is-a-typename-current type defdata::wrld)))">is-a-typename-gv</a>
  (type wrld)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-ec-call" data-sym="EC-CALL">ec-call</a> (<a class="sym-link local-def" href="#def-is-a-typename-current" data-sym="IS-A-TYPENAME-CURRENT" title="(defun defdata::is-a-typename-current (type defdata::wrld)
  (declare (defdata::xargs :verify-guards nil))
  (defdata::predicate-name type))">is-a-typename-current</a> type wrld)))</pre>
  </div>

<div class="form-block other" id="form-88" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> is-a-typename
  <a class="sym-link local-def" href="#def-is-a-typename-gv" data-sym="IS-A-TYPENAME-GV" title="(defun defdata::is-a-typename-gv (type defdata::wrld)
  (declare (defdata::xargs :guard t))
  (defdata::ec-call (defdata::is-a-typename-current type defdata::wrld)))">is-a-typename-gv</a>)</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>