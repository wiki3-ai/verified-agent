<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>sig - ACL2 Book</title>
  <meta property="name" content="sig">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">sig</h1>
    <div class="path"><a href="sig.lisp" class="source-link">books/acl2s/defdata/sig</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"DEFDATA"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="defdata-core.html" title="Open defdata-core">"defdata-core"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *allowed-type-vars*
  '(<span class="keyword">:a</span> <span class="keyword">:b</span> <span class="keyword">:c</span> <span class="keyword">:d</span> <span class="keyword">:a1</span> <span class="keyword">:b1</span> <span class="keyword">:c1</span> <span class="keyword">:d1</span> <span class="keyword">:a2</span> <span class="keyword">:b2</span> <span class="keyword">:c2</span> <span class="keyword">:d2</span>))</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *tvar-typename-alist*
  '((<span class="keyword">:a</span> . a) (<span class="keyword">:b</span> . b)
    (<span class="keyword">:c</span> . c)
    (<span class="keyword">:d</span> . d)
    (<span class="keyword">:a1</span> . a1)
    (<span class="keyword">:b1</span> . b1)
    (<span class="keyword">:c1</span> . c1)
    (<span class="keyword">:d1</span> . d1)
    (<span class="keyword">:a2</span> . a2)
    (<span class="keyword">:b2</span> . b2)
    (<span class="keyword">:c2</span> . c2)
    (<span class="keyword">:d2</span> . d2)))</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> psig-template-map nil)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../basis-b.html#def-defstub" data-sym="DEFSTUB">defstub</a> psig-templ-instantiation-ev
  (<a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
  =&gt;
  <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop psig-inst-templates
  (tname tvar-sigma
    templates
    new-types
    kwd-alist
    wrld)
  (for ((templ in templates))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (psig-templ-instantiation-ev tname
        tvar-sigma
        templ
        (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'derived-pred-&gt;poly-texp-map
          wrld)
        new-types
        kwd-alist
        wrld))))</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block function" id="def-one-way-unify" data-defines="ONE-WAY-UNIFY" data-references="MV,ONE-WAY-UNIFY,PSEUDO-TERMP,AND,IF,TERM,PAT,DEFUN" data-used-by="FIND-MATCH,POLYMORPHIC-INST-DEFDATA-EVENTS1,ONE-WAY-UNIFY" data-part-name="ONE-WAY-UNIFY" data-part-args="TERM,PAT" data-part-body="MV,ONE-WAY-UNIFY,TERM,PAT,PSEUDO-TERMP,AND,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ONE-WAY-UNIFY">one-way-unify</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun defdata::one-way-unify (defdata::pat defdata::term)
  (if (and (defdata::pseudo-termp defdata::pat)
           (defdata::pseudo-termp defdata::term))
      (one-way-unify defdata::pat defdata::term)
      (defdata::mv nil nil)))">one-way-unify</a>
  (pat term)
  (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> pat)
      (<a class="sym-link system" href="../../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> term))
    (<a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun defdata::one-way-unify (defdata::pat defdata::term)
  (if (and (defdata::pseudo-termp defdata::pat)
           (defdata::pseudo-termp defdata::term))
      (one-way-unify defdata::pat defdata::term)
      (defdata::mv nil nil)))">one-way-unify</a> pat term)
    (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)))</pre>
  </div>

<div class="form-block function" id="def-polymorphic-inst-defdata-events1" data-defines="POLYMORPHIC-INST-DEFDATA-EVENTS1" data-references="DERIVED-PRED->POLY-TEXP-MAP,PSIG-TEMPL-INSTANTIATION-EV,NOT,AND,CW?,-,T,VERBOSE,*TVAR-TYPENAME-ALIST*,SUBLIS-VAR,ONE-WAY-UNIFY,TVAR-SIGMA,YESP,MV,REMOVE-NAMES,NULL,WHEN,PTYPE,GET1,TEMPLATE,ASSOC-EQ,CDR,OR,META-KWD-ALIST,DATA-CONSTRUCTOR-TABLE,C,USER-COMBINATOR-TABLE,TABLE-ALIST,U,CAR,COMB,APPEND,QUOTE,CONSP,UNLESS,KWD-ALIST,NEW-TYPES,PDEF,ASSOCS,A,NAME,CONS,B*,WRLD,TOP-KWD-ALIST,P,DEFUN" data-part-name="POLYMORPHIC-INST-DEFDATA-EVENTS1" data-part-args="WRLD,TOP-KWD-ALIST,P" data-part-body="DERIVED-PRED->POLY-TEXP-MAP,PSIG-TEMPL-INSTANTIATION-EV,NOT,AND,CW?,-,T,VERBOSE,*TVAR-TYPENAME-ALIST*,SUBLIS-VAR,ONE-WAY-UNIFY,TVAR-SIGMA,YESP,MV,REMOVE-NAMES,NULL,WHEN,PTYPE,GET1,TEMPLATE,ASSOC-EQ,CDR,OR,META-KWD-ALIST,DATA-CONSTRUCTOR-TABLE,C,WRLD,USER-COMBINATOR-TABLE,TABLE-ALIST,U,CAR,COMB,TOP-KWD-ALIST,APPEND,QUOTE,CONSP,UNLESS,KWD-ALIST,NEW-TYPES,PDEF,ASSOCS,P,A,NAME,CONS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POLYMORPHIC-INST-DEFDATA-EVENTS1">polymorphic-inst-defdata-events1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-polymorphic-inst-defdata-events1" data-sym="POLYMORPHIC-INST-DEFDATA-EVENTS1" title="(defun defdata::polymorphic-inst-defdata-events1
       (defdata::p defdata::top-kwd-alist defdata::wrld)
  (defdata::b*
   (((cons defdata::name defdata::a) defdata::p)
    ((assocs defdata::pdef defdata::new-types defdata::kwd-alist) defdata::a)
...">polymorphic-inst-defdata-events1</a>
  (p top-kwd-alist wrld)
  (b* (((cons name a) p) ((assocs pdef new-types kwd-alist) a)
      ((unless (consp pdef)) 'nil)
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> kwd-alist top-kwd-alist))
      (comb (car pdef))
      (<a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'user-combinator-table
          wrld))
      (c (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'data-constructor-table
          wrld))
      (meta-kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> comb <a class="sym-link system" href="../../../history-management.html#def-u" data-sym="U">u</a>))
          (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> comb c))))
      (template (get1 <span class="keyword">:polymorphic-events</span> meta-kwd-alist))
      (ptype (get1 <span class="keyword">:polymorphic-type-form</span> meta-kwd-alist))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> ptype)) 'nil)
      (pdef (remove-names pdef))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> yesp tvar-sigma) (<a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun defdata::one-way-unify (defdata::pat defdata::term)
  (if (and (defdata::pseudo-termp defdata::pat)
           (defdata::pseudo-termp defdata::term))
      (one-way-unify defdata::pat defdata::term)
      (defdata::mv nil nil)))">one-way-unify</a> (<a class="sym-link system" href="../../../basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> *tvar-typename-alist* ptype)
          pdef))
      (verbose (get1 <span class="keyword">:verbose</span> kwd-alist <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> yesp) verbose)
          <span class="string">"~|Defdata/Note: Failed to unify ~x0 with ~x1. Skipping polymorphic instantiation events...~%"</span>
          ptype
          pdef))
      ((unless yesp) 'nil))
    (psig-templ-instantiation-ev name
      tvar-sigma
      template
      (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'derived-pred-&gt;poly-texp-map
        wrld)
      new-types
      kwd-alist
      wrld)))</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop polymorphic-inst-defdata-events0
  (ps kwd-alist wrld)
  (for ((p in ps))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-polymorphic-inst-defdata-events1" data-sym="POLYMORPHIC-INST-DEFDATA-EVENTS1" title="(defun defdata::polymorphic-inst-defdata-events1
       (defdata::p defdata::top-kwd-alist defdata::wrld)
  (defdata::b*
   (((cons defdata::name defdata::a) defdata::p)
    ((assocs defdata::pdef defdata::new-types defdata::kwd-alist) defdata::a)
...">polymorphic-inst-defdata-events1</a> p
        kwd-alist
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-try-admitting-events-fun" data-defines="TRY-ADMITTING-EVENTS-FUN" data-references="CDR,T,VALUE-TRIPLE,QUOTE,MAKE-EVENT,QUASIQUOTE,CONS,ENDP,IF,EVENTS,DEFUN" data-used-by="POLYMORPHIC-INST-DEFDATA-EVENTS" data-part-name="TRY-ADMITTING-EVENTS-FUN" data-part-args="EVENTS" data-part-body="CDR,TRY-ADMITTING-EVENTS-FUN,T,VALUE-TRIPLE,QUOTE,MAKE-EVENT,QUASIQUOTE,CONS,EVENTS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRY-ADMITTING-EVENTS-FUN">try-admitting-events-fun</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-try-admitting-events-fun" data-sym="TRY-ADMITTING-EVENTS-FUN" title="(defun defdata::try-admitting-events-fun (defdata::events)
  (if (endp defdata::events)
      nil
      (cons
       `(defdata::make-event
...">try-admitting-events-fun</a>
  (events)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> events)
    nil
    (cons `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> '(<span class="keyword">:or</span> ,(CAR DEFDATA::EVENTS) (<a class="sym-link system" href="../../../axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)))
      (<a class="sym-link local-def" href="#def-try-admitting-events-fun" data-sym="TRY-ADMITTING-EVENTS-FUN" title="(defun defdata::try-admitting-events-fun (defdata::events)
  (if (endp defdata::events)
      nil
      (cons
       `(defdata::make-event
...">try-admitting-events-fun</a> (cdr events)))))</pre>
  </div>

<div class="form-block function" id="def-polymorphic-inst-defdata-events" data-defines="POLYMORPHIC-INST-DEFDATA-EVENTS" data-references="TRY-ADMITTING-EVENTS-FUN,COMMENTARY,QUASIQUOTE,CONS,CONSP,AND,POLYMORPHIC-INST-DEFDATA-EVENTS0,EVENTS,B*,WRLD,KWD-ALIST,PS,DEFUN" data-part-name="POLYMORPHIC-INST-DEFDATA-EVENTS" data-part-args="WRLD,KWD-ALIST,PS" data-part-body="TRY-ADMITTING-EVENTS-FUN,COMMENTARY,QUASIQUOTE,CONS,CONSP,AND,WRLD,KWD-ALIST,PS,POLYMORPHIC-INST-DEFDATA-EVENTS0,EVENTS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POLYMORPHIC-INST-DEFDATA-EVENTS">polymorphic-inst-defdata-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-polymorphic-inst-defdata-events" data-sym="POLYMORPHIC-INST-DEFDATA-EVENTS" title="(defun defdata::polymorphic-inst-defdata-events
       (defdata::ps defdata::kwd-alist defdata::wrld)
  (defdata::b*
   ((defdata::events
     (defdata::polymorphic-inst-defdata-events0 defdata::ps defdata::kwd-alist
...">polymorphic-inst-defdata-events</a>
  (ps kwd-alist wrld)
  (b* ((events (polymorphic-inst-defdata-events0 ps
         kwd-alist
         wrld)))
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp events)
      (cons `(commentary ,(DEFDATA::GET1 :PRINT-COMMENTARY DEFDATA::KWD-ALIST)
          <span class="string">"~| Polymorphic sig instantiation events...~%"</span>)
        (<a class="sym-link local-def" href="#def-try-admitting-events-fun" data-sym="TRY-ADMITTING-EVENTS-FUN" title="(defun defdata::try-admitting-events-fun (defdata::events)
  (if (endp defdata::events)
      nil
      (cons
       `(defdata::make-event
...">try-admitting-events-fun</a> events)))))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(add-pre-post-hook defdata-defaults-table
  <span class="keyword">:post-pred-hook-fns</span> '(<a class="sym-link local-def" href="#def-polymorphic-inst-defdata-events" data-sym="POLYMORPHIC-INST-DEFDATA-EVENTS" title="(defun defdata::polymorphic-inst-defdata-events
       (defdata::ps defdata::kwd-alist defdata::wrld)
  (defdata::b*
   ((defdata::events
     (defdata::polymorphic-inst-defdata-events0 defdata::ps defdata::kwd-alist
...">polymorphic-inst-defdata-events</a>))</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-logic" data-sym="LOGIC">logic</a>)</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> (((ap <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) ((bp <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((cp <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((dp <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((a1p <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((b1p <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((c1p <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((d1p <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((a2p <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((b2p <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((c2p <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>)
    ((d2p <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) =&gt; <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ap
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> bp
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> cp
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> dp
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> a1p
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> b1p
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> c1p
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> d1p
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> a2p
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> b2p
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> c2p
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> d2p
      (v)
      (declare (ignore v))
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ap-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (ap x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bp-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (bp x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> cp-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (cp x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> dp-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (dp x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> a1p-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (a1p x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> b1p-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (b1p x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> c1p-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (c1p x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> d1p-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (d1p x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> a2p-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (a2p x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> b2p-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (b2p x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> c2p-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (c2p x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> d2p-is-predicate
    (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> (d2p x))))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *initial-tvar-m*
  (type-metadata-bases (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> *tvar-typename-alist*)
    <span class="string">"DEFDATA"</span>))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> tvar-metadata-table
  nil
  *initial-tvar-m*
  <span class="keyword">:clear</span>)</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> collect-type-vars-texp
    (texp ctx)
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> texp) 'nil)
      ((<a class="sym-link system" href="../../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> texp) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> texp))
      ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> texp) 'nil)
      ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> texp)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| ~x0 : Named type expressions not supported.~%"</span>
          texp))
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (collect-type-vars-texps (cdr texp)
          ctx))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> collect-type-vars-texps
    (texps ctx)
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> texps)
      'nil
      (<a class="sym-link system" href="../../../axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (collect-type-vars-texp (car texps)
          ctx)
        (collect-type-vars-texps (cdr texps)
          ctx)))))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> collect-undefined-typenames-texp
    (texp ctx wrld)
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> texp) 'nil)
      ((<a class="sym-link system" href="../../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> texp) 'nil)
      ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> texp) (if (predicate-name texp)
          'nil
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> texp)))
      ((<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> texp)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| ~x0 : Named type expressions not supported.~%"</span>
          texp))
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (collect-undefined-typenames-texps (cdr texp)
          ctx
          wrld))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> collect-undefined-typenames-texps
    (texps ctx wrld)
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> texps)
      'nil
      (<a class="sym-link system" href="../../../axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (collect-undefined-typenames-texp (car texps)
          ctx
          wrld)
        (collect-undefined-typenames-texps (cdr texps)
          ctx
          wrld)))))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *sig-keywords*
  '(<span class="keyword">:hints</span> <span class="keyword">:gen-rule-classes</span> <span class="keyword">:rule-classes</span> <span class="keyword">:verbose</span> <span class="keyword">:satisfies</span> <span class="keyword">:suffix</span>))</pre>
  </div>

<div class="form-block function" id="def-parse-sig" data-defines="PARSE-SIG" data-references="COLLECT-TYPE-VARS-TEXP,RETURN-TYPE-VARS,COLLECT-TYPE-VARS-TEXPS,ARG-TYPE-VARS,CONSP,WHEN,CONS,COLLECT-UNDEFINED-TYPENAMES-TEXPS,UNDEFINED-TYPENAMES,CHECK-SYNTAX-TEXPS,&,RETURN-TYPE,=>,ARG-TYPE-LIST,NAME,CASE-MATCH,PUT-ASSOC-EQ,PROPER-SYMBOLP,CDR,CAR,LIST,ATOM,EQUAL,T,EQ,OR,COND,DEP-HYPS,SUBSETP,ALL-VARS,AND,DEP-VARS,*ALLOWED-TYPE-VARS*,LEN,FIX-INTERN$,NUMBERED-VARS,X123VARS,SUFFIX,GET1,DEP-HYP,HARD?,ER,NULL,UNLESS,*SIG-KEYWORDS*,EXTRACT-KEYWORDS,REST,KWD-ALIST,QUOTE,SEPARATE-KWD-ARGS,KWD-VAL-LIST,SIG,MV,B*,IGNORABLE,DECLARE,WRLD,CTX,CURR-PKG,ARGS,DEFUN" data-used-by="SIG" data-part-name="PARSE-SIG" data-part-args="WRLD,CTX,CURR-PKG,ARGS" data-part-declare="WRLD,IGNORABLE,DECLARE" data-part-body="COLLECT-TYPE-VARS-TEXP,RETURN-TYPE-VARS,COLLECT-TYPE-VARS-TEXPS,ARG-TYPE-VARS,CONSP,WHEN,CONS,COLLECT-UNDEFINED-TYPENAMES-TEXPS,UNDEFINED-TYPENAMES,WRLD,CHECK-SYNTAX-TEXPS,&,RETURN-TYPE,=>,ARG-TYPE-LIST,NAME,CASE-MATCH,PUT-ASSOC-EQ,PROPER-SYMBOLP,CDR,CAR,LIST,ATOM,EQUAL,T,EQ,OR,COND,DEP-HYPS,SUBSETP,ALL-VARS,AND,DEP-VARS,*ALLOWED-TYPE-VARS*,LEN,CURR-PKG,FIX-INTERN$,NUMBERED-VARS,X123VARS,SUFFIX,GET1,DEP-HYP,HARD?,ER,NULL,UNLESS,*SIG-KEYWORDS*,CTX,EXTRACT-KEYWORDS,REST,KWD-ALIST,QUOTE,ARGS,SEPARATE-KWD-ARGS,KWD-VAL-LIST,SIG,MV,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-SIG">parse-sig</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-sig" data-sym="PARSE-SIG" title="(defun defdata::parse-sig
       (defdata::args defdata::curr-pkg defdata::ctx defdata::wrld)
  (declare (ignorable defdata::wrld))
  (defdata::b*
   (((defdata::mv defdata::sig defdata::kwd-val-list)
...">parse-sig</a>
  (<a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a> curr-pkg ctx wrld)
  (declare (ignorable wrld))
  (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link local-def" href="#def-sig" data-sym="SIG" title="(defmacro defdata::sig (&amp;rest defdata::args)
  (defdata::b*
   ((defdata::verbose
     (let ((defdata::lst (member :verbose defdata::args)))
       (and defdata::lst (cadr defdata::lst)))))
...">sig</a> kwd-val-list) (separate-kwd-args <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a> 'nil)) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> kwd-alist <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>) (extract-keywords ctx
          *sig-keywords*
          kwd-val-list
          'nil
          nil))
      ((unless (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| Extra args: ~x0~%"</span>
          <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
      (dep-hyp (get1 <span class="keyword">:satisfies</span> kwd-alist))
      (suffix (get1 <span class="keyword">:suffix</span> kwd-alist))
      (x123vars (numbered-vars (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> <span class="string">"X"</span> curr-pkg)
          (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> *allowed-type-vars*)))
      (dep-vars (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> dep-hyp (<a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> dep-hyp)))
      ((unless (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> dep-vars x123vars)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| Only variable arguments allowed in SATISFIES are ~x0; but given ~x1~%"</span>
          x123vars
          dep-vars))
      (dep-hyps (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> dep-hyp) nil)
          ((<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> dep-hyp '<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>) (equal dep-hyp ''<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)) nil)
          ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> dep-hyp) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> dep-hyp))
          ((<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car dep-hyp) '<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a>) (cdr dep-hyp))
          ((proper-symbolp (car dep-hyp)) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> dep-hyp))
          (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> dep-hyp)))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:satisfies</span> dep-hyps
          kwd-alist))
      (kwd-alist (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:current-package</span> curr-pkg
          kwd-alist)))
    (<a class="sym-link system" href="../../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> <a class="sym-link local-def" href="#def-sig" data-sym="SIG" title="(defmacro defdata::sig (&amp;rest defdata::args)
  (defdata::b*
   ((defdata::verbose
     (let ((defdata::lst (member :verbose defdata::args)))
       (and defdata::lst (cadr defdata::lst)))))
...">sig</a>
      ((name arg-type-list
         '=&gt;
         return-type) (b* (((unless (proper-symbolp name)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
               ctx
               <span class="string">"~| Name ~x0 should be a symbol.~%"</span>
               name)) (&amp; (check-syntax-texps arg-type-list
                'nil
                'nil
                ctx
                wrld))
            (undefined-typenames (collect-undefined-typenames-texps (cons return-type arg-type-list)
                ctx
                wrld))
            ((when (consp undefined-typenames)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                ctx
                <span class="string">"~| Undefined types: ~x0~%"</span>
                undefined-typenames))
            (arg-type-vars (collect-type-vars-texps arg-type-list
                ctx))
            (return-type-vars (collect-type-vars-texp return-type
                ctx))
            ((unless (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> return-type-vars arg-type-vars)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                ctx
                <span class="string">"~| Return type variables should be from ~x0.~%"</span>
                arg-type-vars))
            ((unless (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> arg-type-vars
                 *allowed-type-vars*)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                ctx
                <span class="string">"~| Sorry for the inconvenience, but could you please try again choosing type variables from ~x0.~%"</span>
                *allowed-type-vars*)))
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> name
            suffix
            arg-type-list
            return-type
            kwd-alist)))
      (&amp; (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          ctx
          <span class="string">"~| General form: (sig name arg-type-list =&gt; return-type).~%"</span>)))))</pre>
  </div>

<div class="form-block function" id="def-to-symbol" data-defines="TO-SYMBOL" data-references="FIX-INTERN$,QUOTE,ACONS,FMT1!-TO-STRING,STR,&,MV,B*,SYMBOLP,IF,PKGP,XARGS,DECLARE,PKG,OBJ,DEFUN" data-used-by="FIND/MAKE-TYPE-NAME" data-part-name="TO-SYMBOL" data-part-args="PKG,OBJ" data-part-declare="PKG,PKGP,XARGS,DECLARE" data-part-body="PKG,FIX-INTERN$,QUOTE,ACONS,FMT1!-TO-STRING,STR,&,MV,B*,OBJ,SYMBOLP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TO-SYMBOL">to-symbol</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-to-symbol" data-sym="TO-SYMBOL" title="(defun defdata::to-symbol (defdata::obj defdata::pkg)
  (declare (defdata::xargs :guard (defdata::pkgp defdata::pkg)))
  (if (symbolp defdata::obj)
      defdata::obj
      (defdata::b*
...">to-symbol</a>
  (obj pkg)
  (declare (xargs <span class="keyword">:guard</span> (pkgp pkg)))
  (if (symbolp obj)
    obj
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> &amp; str) (fmt1!-to-string <span class="string">"~x0"</span> (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> #\0 obj 'nil) <span class="number">0</span>)))
      (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> str pkg))))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop to-symbols
  (objs pkg)
  (declare (xargs <span class="keyword">:guard</span> (pkgp pkg)))
  (for ((o in objs))
    (collect (<a class="sym-link local-def" href="#def-to-symbol" data-sym="TO-SYMBOL" title="(defun defdata::to-symbol (defdata::obj defdata::pkg)
  (declare (defdata::xargs :guard (defdata::pkgp defdata::pkg)))
  (if (symbolp defdata::obj)
      defdata::obj
      (defdata::b*
...">to-symbol</a> o pkg))))</pre>
  </div>

<div class="form-block function" id="def-assoceqlst1" data-defines="ASSOCEQLST1" data-references="LIST,AND,ASSOC-EQ,ENTRY,LET,A,KEY,DEFUN" data-part-name="ASSOCEQLST1" data-part-args="A,KEY" data-part-body="LIST,AND,A,KEY,ASSOC-EQ,ENTRY,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ASSOCEQLST1">assoceqlst1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-assoceqlst1" data-sym="ASSOCEQLST1" title="(defun defdata::assoceqlst1 (defdata::key defdata::a)
  (let ((defdata::entry (defdata::assoc-eq defdata::key defdata::a)))
    (and defdata::entry (list defdata::entry))))">assoceqlst1</a>
  (key a)
  (let ((entry (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> key a)))
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> entry (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> entry))))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop assoc-eq-lst
  (keys a)
  (for ((key in keys))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-assoceqlst1" data-sym="ASSOCEQLST1" title="(defun defdata::assoceqlst1 (defdata::key defdata::a)
  (let ((defdata::entry (defdata::assoc-eq defdata::key defdata::a)))
    (and defdata::entry (list defdata::entry))))">assoceqlst1</a> key a))))</pre>
  </div>

<div class="form-block function" id="def-stitch-up-defuns" data-defines="STITCH-UP-DEFUNS" data-references="CDR,CAR,QUOTE,LIST,CONSP,CONS,ENDP,IF,BODIES,DECLS,PARAMS-LST,NAMES,DEFUN" data-used-by="MAKE-SIG-TVAR-SUPPORT-EVENTS" data-part-name="STITCH-UP-DEFUNS" data-part-args="BODIES,DECLS,PARAMS-LST,NAMES" data-part-body="CDR,STITCH-UP-DEFUNS,BODIES,PARAMS-LST,CAR,DEFUN,QUOTE,LIST,DECLS,CONSP,CONS,NAMES,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="STITCH-UP-DEFUNS">stitch-up-defuns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-stitch-up-defuns" data-sym="STITCH-UP-DEFUNS" title="(defun defdata::stitch-up-defuns
       (defdata::names defdata::params-lst defdata::decls defdata::bodies)
  (if (endp defdata::names)
      nil
      (cons
...">stitch-up-defuns</a>
  (names params-lst
    decls
    bodies)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> names)
    nil
    (cons (if (consp decls)
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a>
          (car names)
          (car params-lst)
          (car decls)
          (car bodies))
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a>
          (car names)
          (car params-lst)
          (car bodies)))
      (<a class="sym-link local-def" href="#def-stitch-up-defuns" data-sym="STITCH-UP-DEFUNS" title="(defun defdata::stitch-up-defuns
       (defdata::names defdata::params-lst defdata::decls defdata::bodies)
  (if (endp defdata::names)
      nil
      (cons
...">stitch-up-defuns</a> (cdr names)
        (cdr params-lst)
        (cdr decls)
        (cdr bodies)))))</pre>
  </div>

<div class="form-block function" id="def-make-derived-tvar-type-defthm" data-defines="MAKE-DERIVED-TVAR-TYPE-DEFTHM" data-references="ALISTP,ALISTOF,ENABLE,TRUE-LISTP,X,IMPLIES,DEFTHM,QUASIQUOTE,&,LISTOF,QUOTE,CASE-MATCH,PKG,TEXP,PRED,DEFUN" data-part-name="MAKE-DERIVED-TVAR-TYPE-DEFTHM" data-part-args="PKG,TEXP,PRED" data-part-body="ALISTP,ALISTOF,ENABLE,TRUE-LISTP,X,IMPLIES,DEFTHM,QUASIQUOTE,&,LISTOF,QUOTE,TEXP,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-DERIVED-TVAR-TYPE-DEFTHM">make-derived-tvar-type-defthm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-derived-tvar-type-defthm" data-sym="MAKE-DERIVED-TVAR-TYPE-DEFTHM" title="(defun defdata::make-derived-tvar-type-defthm
       (defdata::pred defdata::texp defdata::pkg)
  (defdata::case-match defdata::texp
   ((&#39;defdata::listof defdata::&amp;)
    `((defdata::defthm
...">make-derived-tvar-type-defthm</a>
  (pred texp pkg)
  (<a class="sym-link system" href="../../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> texp
    (('listof &amp;) `((<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(DEFDATA::S+ DEFDATA::PRED &#39;DEFDATA::-IMPLIES-TLP :PKG DEFDATA::PKG)
         (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,DEFDATA::PRED x)
           (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x))
         <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a>)))
         <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span>) (<span class="keyword">:compound-recognizer</span>)))))
    (('alistof &amp; &amp;) `((<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(DEFDATA::S+ DEFDATA::PRED &#39;DEFDATA::-IMPLIES-ALISTP :PKG DEFDATA::PKG)
         (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,DEFDATA::PRED x)
           (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> x))
         <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable ,DEFDATA::PRED <a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>)))
         <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span>)))))
    (&amp; 'nil)))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop make-derived-tvar-type-defthms
  (preds texps pkg)
  (for ((p in preds) (texp in texps))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-make-derived-tvar-type-defthm" data-sym="MAKE-DERIVED-TVAR-TYPE-DEFTHM" title="(defun defdata::make-derived-tvar-type-defthm
       (defdata::pred defdata::texp defdata::pkg)
  (defdata::case-match defdata::texp
   ((&#39;defdata::listof defdata::&amp;)
    `((defdata::defthm
...">make-derived-tvar-type-defthm</a> p
        texp
        pkg))))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop parse-top-texps
  (names texps ctx wrld)
  (for ((name in names) (texp in texps))
    (collect (parse-top-texp name
        texp
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> name)
        ctx
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-make-sig-tvar-support-events" data-defines="MAKE-SIG-TVAR-SUPPORT-EVENTS" data-references="MAKE-DERIVED-TVAR-TYPE-DEFTHMS,QUASIQUOTE,STITCH-UP-DEFUNS,MAKE-PREDICATE-SYMBOL-LST,UNDEF-PRED-NAMES,FIX-INTERN$,LEN,MAKE-LIST,MAKE-PRED-IS,UNDEF-PRED-BODIES,TYPE-ALIAS-TABLE,A,TYPE-METADATA-BASES,NEW-TYPES,BUILTIN-COMBINATOR-TABLE,B,DATA-CONSTRUCTOR-TABLE,C,PARSE-TOP-TEXPS,UNDEF-N-TYPES,STRIP-CDRS,UNDEF-TEXPS,MV,PAIRLIS$,UNDEF-NM-TEXP-ALST,ASSOC-EQ-LST,STRIP-CARS,SET-DIFFERENCE-EQ,UNDEF-TNAMES,TO-SYMBOLS,TNAMES,REMOVE-DUPLICATES-EQUAL,REMOVE-NAMES-LST,TYPE-METADATA-TABLE,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,B*,WRLD,PKG,CTX,TEXPS,DEFUN" data-part-name="MAKE-SIG-TVAR-SUPPORT-EVENTS" data-part-args="WRLD,PKG,CTX,TEXPS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-SIG-TVAR-SUPPORT-EVENTS">make-sig-tvar-support-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-sig-tvar-support-events" data-sym="MAKE-SIG-TVAR-SUPPORT-EVENTS" title="(defun defdata::make-sig-tvar-support-events
       (defdata::texps defdata::ctx defdata::pkg defdata::wrld)
  &quot;for each undefined tvar texp, define its predicate and if possible its type defthm&quot;
  (defdata::b*
   ((defdata::m
...">make-sig-tvar-support-events</a>
  (texps ctx pkg wrld)
  <span class="string">"for each undefined tvar texp, define its predicate and if possible its type defthm"</span>
  (b* ((m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'tvar-metadata-table
           wrld)
         (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
           wrld))) (texps (remove-names-lst (<a class="sym-link system" href="../../../axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> texps)))
      (tnames (to-symbols texps <span class="string">"DEFDATA"</span>))
      (undef-tnames (<a class="sym-link system" href="../../../axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> tnames
          (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (assoc-eq-lst tnames m))))
      (undef-nm-texp-alst (assoc-eq-lst undef-tnames
          (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> tnames texps)))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> undef-tnames undef-texps) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> undef-nm-texp-alst)
          (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> undef-nm-texp-alst)))
      (undef-n-types (parse-top-texps undef-tnames
          undef-texps
          ctx
          wrld))
      (c (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'data-constructor-table
          wrld))
      (b (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'builtin-combinator-table
          wrld))
      (new-types (type-metadata-bases undef-tnames
          <span class="string">"DEFDATA"</span>))
      (m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-types m))
      (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (undef-pred-bodies (make-pred-is undef-n-types
          (<a class="sym-link system" href="../../../axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> undef-n-types)
            <span class="keyword">:initial-element</span> (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> <span class="string">"X"</span> pkg))
          nil
          a
          m
          c
          b
          wrld))
      (undef-pred-names (make-predicate-symbol-lst undef-tnames
          <span class="string">"DEFDATA"</span>)))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-stitch-up-defuns" data-sym="STITCH-UP-DEFUNS" title="(defun defdata::stitch-up-defuns
       (defdata::names defdata::params-lst defdata::decls defdata::bodies)
  (if (endp defdata::names)
      nil
      (cons
...">stitch-up-defuns</a> undef-pred-names
        (<a class="sym-link system" href="../../../axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> undef-pred-names)
          <span class="keyword">:initial-element</span> `(,(ACL2S::FIX-INTERN$ &quot;X&quot; DEFDATA::PKG)))
        nil
        undef-pred-bodies)
      (make-derived-tvar-type-defthms undef-pred-names
        undef-texps
        pkg))))</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *poly-combinators*
  '(listof alistof map))</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> derived-pred-&gt;poly-texp-map nil)</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop table-put-events
  (tble-name keys vals)
  (for ((key in keys) (val in vals))
    (collect `(<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> ,DEFDATA::TBLE-NAME
        ',DEFDATA::KEY
        ',DEFDATA::VAL
        <span class="keyword">:put</span>))))</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *sig-singular-dominant-poly-comb-limitation-msg*
  <span class="string">"~| SIG: Limitation -- There should be one polymorphic combinator argument that dominates all other arguments. ~
But ~x0 does not have this property. Therefore we are unable to functionally instantiate this polymorphic signature. ~
Please send this example to the implementors for considering removal of this restriction.~%"</span>)</pre>
  </div>

<div class="form-block function" id="def-all-tvars" data-defines="ALL-TVARS" data-references="ALL-VARS,*TVAR-TYPENAME-ALIST*,STRIP-CDRS,INTERSECTION-EQ,TEXP,DEFUN" data-used-by="FILTER-TEXPS-WITH-VARS,PICK-DOMINANT-POLY-TYPE-EXPR1" data-part-name="ALL-TVARS" data-part-args="TEXP" data-part-body="TEXP,ALL-VARS,*TVAR-TYPENAME-ALIST*,STRIP-CDRS,INTERSECTION-EQ" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ALL-TVARS">all-tvars</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-all-tvars" data-sym="ALL-TVARS" title="(defun defdata::all-tvars (defdata::texp)
  (defdata::intersection-eq
   (defdata::strip-cdrs defdata::*tvar-typename-alist*)
   (defdata::all-vars defdata::texp)))">all-tvars</a>
  (texp)
  (<a class="sym-link system" href="../../../axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> *tvar-typename-alist*)
    (<a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> texp)))</pre>
  </div>

<div class="form-block function" id="def-all-tvars-lst" data-defines="ALL-TVARS-LST" data-references="QUOTE,ALL-VARS1-LST,*TVAR-TYPENAME-ALIST*,STRIP-CDRS,INTERSECTION-EQ,TEXPS,DEFUN" data-used-by="PICK-DOMINANT-POLY-TYPE-EXPR" data-part-name="ALL-TVARS-LST" data-part-args="TEXPS" data-part-body="QUOTE,TEXPS,ALL-VARS1-LST,*TVAR-TYPENAME-ALIST*,STRIP-CDRS,INTERSECTION-EQ" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ALL-TVARS-LST">all-tvars-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-all-tvars-lst" data-sym="ALL-TVARS-LST" title="(defun defdata::all-tvars-lst (defdata::texps)
  (defdata::intersection-eq
   (defdata::strip-cdrs defdata::*tvar-typename-alist*)
   (defdata::all-vars1-lst defdata::texps &#39;nil)))">all-tvars-lst</a>
  (texps)
  (<a class="sym-link system" href="../../../axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> *tvar-typename-alist*)
    (all-vars1-lst texps 'nil)))</pre>
  </div>

<div class="form-block function" id="def-poly-type-size" data-defines="POLY-TYPE-SIZE" data-references="T,MAP,THIRD,SECOND,ALISTOF,CADR,+,LISTOF,ANYOF,OR,ONEOF,CAR,CASE,ATOM,IF,PTYPE,DEFUN" data-used-by="CHOOSE-LARGEST-POLY-TYPE" data-part-name="POLY-TYPE-SIZE" data-part-args="PTYPE" data-part-body="T,MAP,THIRD,SECOND,ALISTOF,CADR,POLY-TYPE-SIZE,+,LISTOF,ANYOF,OR,ONEOF,CAR,CASE,PTYPE,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POLY-TYPE-SIZE">poly-type-size</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-poly-type-size" data-sym="POLY-TYPE-SIZE" title="(defun defdata::poly-type-size (defdata::ptype)
  (if (atom defdata::ptype)
      0
      (case (car defdata::ptype)
        ((defdata::oneof or defdata::anyof) 1)
...">poly-type-size</a>
  (ptype)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> ptype)
    <span class="number">0</span>
    (<a class="sym-link system" href="../../../axioms.html#def-case" data-sym="CASE">case</a> (car ptype)
      ((oneof <a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> anyof) <span class="number">1</span>)
      (listof (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">2</span> (<a class="sym-link local-def" href="#def-poly-type-size" data-sym="POLY-TYPE-SIZE" title="(defun defdata::poly-type-size (defdata::ptype)
  (if (atom defdata::ptype)
      0
      (case (car defdata::ptype)
        ((defdata::oneof or defdata::anyof) 1)
...">poly-type-size</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> ptype))))
      (alistof (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">3</span>
          (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link local-def" href="#def-poly-type-size" data-sym="POLY-TYPE-SIZE" title="(defun defdata::poly-type-size (defdata::ptype)
  (if (atom defdata::ptype)
      0
      (case (car defdata::ptype)
        ((defdata::oneof or defdata::anyof) 1)
...">poly-type-size</a> (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> ptype))
            (<a class="sym-link local-def" href="#def-poly-type-size" data-sym="POLY-TYPE-SIZE" title="(defun defdata::poly-type-size (defdata::ptype)
  (if (atom defdata::ptype)
      0
      (case (car defdata::ptype)
        ((defdata::oneof or defdata::anyof) 1)
...">poly-type-size</a> (<a class="sym-link system" href="../../../axioms.html#def-third" data-sym="THIRD">third</a> ptype)))))
      (map (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">4</span>
          (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link local-def" href="#def-poly-type-size" data-sym="POLY-TYPE-SIZE" title="(defun defdata::poly-type-size (defdata::ptype)
  (if (atom defdata::ptype)
      0
      (case (car defdata::ptype)
        ((defdata::oneof or defdata::anyof) 1)
...">poly-type-size</a> (<a class="sym-link system" href="../../../axioms.html#def-second" data-sym="SECOND">second</a> ptype))
            (<a class="sym-link local-def" href="#def-poly-type-size" data-sym="POLY-TYPE-SIZE" title="(defun defdata::poly-type-size (defdata::ptype)
  (if (atom defdata::ptype)
      0
      (case (car defdata::ptype)
        ((defdata::oneof or defdata::anyof) 1)
...">poly-type-size</a> (<a class="sym-link system" href="../../../axioms.html#def-third" data-sym="THIRD">third</a> ptype)))))
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> <span class="number">0</span>))))</pre>
  </div>

<div class="form-block function" id="def-choose-largest-poly-type" data-defines="CHOOSE-LARGEST-POLY-TYPE" data-references="CDR,CAR,POLY-TYPE-SIZE,>,ENDP,IF,ANS,PTYPES,DEFUN" data-used-by="PICK-DOMINANT-POLY-TYPE-EXPR1" data-part-name="CHOOSE-LARGEST-POLY-TYPE" data-part-args="ANS,PTYPES" data-part-body="CDR,CHOOSE-LARGEST-POLY-TYPE,CAR,POLY-TYPE-SIZE,>,ANS,PTYPES,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHOOSE-LARGEST-POLY-TYPE">choose-largest-poly-type</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-choose-largest-poly-type" data-sym="CHOOSE-LARGEST-POLY-TYPE" title="(defun defdata::choose-largest-poly-type (defdata::ptypes defdata::ans)
  (if (endp defdata::ptypes)
      defdata::ans
      (if (&gt; (defdata::poly-type-size (car defdata::ptypes))
             (defdata::poly-type-size defdata::ans))
...">choose-largest-poly-type</a>
  (ptypes ans)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> ptypes)
    ans
    (if (<a class="sym-link system" href="../../../axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (<a class="sym-link local-def" href="#def-poly-type-size" data-sym="POLY-TYPE-SIZE" title="(defun defdata::poly-type-size (defdata::ptype)
  (if (atom defdata::ptype)
      0
      (case (car defdata::ptype)
        ((defdata::oneof or defdata::anyof) 1)
...">poly-type-size</a> (car ptypes))
        (<a class="sym-link local-def" href="#def-poly-type-size" data-sym="POLY-TYPE-SIZE" title="(defun defdata::poly-type-size (defdata::ptype)
  (if (atom defdata::ptype)
      0
      (case (car defdata::ptype)
        ((defdata::oneof or defdata::anyof) 1)
...">poly-type-size</a> ans))
      (<a class="sym-link local-def" href="#def-choose-largest-poly-type" data-sym="CHOOSE-LARGEST-POLY-TYPE" title="(defun defdata::choose-largest-poly-type (defdata::ptypes defdata::ans)
  (if (endp defdata::ptypes)
      defdata::ans
      (if (&gt; (defdata::poly-type-size (car defdata::ptypes))
             (defdata::poly-type-size defdata::ans))
...">choose-largest-poly-type</a> (cdr ptypes)
        (car ptypes))
      (<a class="sym-link local-def" href="#def-choose-largest-poly-type" data-sym="CHOOSE-LARGEST-POLY-TYPE" title="(defun defdata::choose-largest-poly-type (defdata::ptypes defdata::ans)
  (if (endp defdata::ptypes)
      defdata::ans
      (if (&gt; (defdata::poly-type-size (car defdata::ptypes))
             (defdata::poly-type-size defdata::ans))
...">choose-largest-poly-type</a> (cdr ptypes)
        ans))))</pre>
  </div>

<div class="form-block function" id="def-pick-dominant-poly-type-expr1" data-defines="PICK-DOMINANT-POLY-TYPE-EXPR1" data-references="CONS,CDR,SUBSETP,CAR,CHOOSE-LARGEST-POLY-TYPE,ENDP,IF,ANSWERS,ALL-TVARS,PTYPES,DEFUN" data-used-by="PICK-DOMINANT-POLY-TYPE-EXPR" data-part-name="PICK-DOMINANT-POLY-TYPE-EXPR1" data-part-args="ANSWERS,ALL-TVARS,PTYPES" data-part-body="CONS,CDR,PICK-DOMINANT-POLY-TYPE-EXPR1,ALL-TVARS,SUBSETP,CAR,ANSWERS,CHOOSE-LARGEST-POLY-TYPE,PTYPES,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PICK-DOMINANT-POLY-TYPE-EXPR1">pick-dominant-poly-type-expr1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pick-dominant-poly-type-expr1" data-sym="PICK-DOMINANT-POLY-TYPE-EXPR1" title="(defun defdata::pick-dominant-poly-type-expr1
       (defdata::ptypes defdata::all-tvars defdata::answers)
  (if (endp defdata::ptypes)
      (defdata::choose-largest-poly-type defdata::answers
       (car defdata::answers))
...">pick-dominant-poly-type-expr1</a>
  (ptypes <a class="sym-link local-def" href="#def-all-tvars" data-sym="ALL-TVARS" title="(defun defdata::all-tvars (defdata::texp)
  (defdata::intersection-eq
   (defdata::strip-cdrs defdata::*tvar-typename-alist*)
   (defdata::all-vars defdata::texp)))">all-tvars</a> answers)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> ptypes)
    (<a class="sym-link local-def" href="#def-choose-largest-poly-type" data-sym="CHOOSE-LARGEST-POLY-TYPE" title="(defun defdata::choose-largest-poly-type (defdata::ptypes defdata::ans)
  (if (endp defdata::ptypes)
      defdata::ans
      (if (&gt; (defdata::poly-type-size (car defdata::ptypes))
             (defdata::poly-type-size defdata::ans))
...">choose-largest-poly-type</a> answers
      (car answers))
    (if (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> <a class="sym-link local-def" href="#def-all-tvars" data-sym="ALL-TVARS" title="(defun defdata::all-tvars (defdata::texp)
  (defdata::intersection-eq
   (defdata::strip-cdrs defdata::*tvar-typename-alist*)
   (defdata::all-vars defdata::texp)))">all-tvars</a>
        (<a class="sym-link local-def" href="#def-all-tvars" data-sym="ALL-TVARS" title="(defun defdata::all-tvars (defdata::texp)
  (defdata::intersection-eq
   (defdata::strip-cdrs defdata::*tvar-typename-alist*)
   (defdata::all-vars defdata::texp)))">all-tvars</a> (car ptypes)))
      (<a class="sym-link local-def" href="#def-pick-dominant-poly-type-expr1" data-sym="PICK-DOMINANT-POLY-TYPE-EXPR1" title="(defun defdata::pick-dominant-poly-type-expr1
       (defdata::ptypes defdata::all-tvars defdata::answers)
  (if (endp defdata::ptypes)
      (defdata::choose-largest-poly-type defdata::answers
       (car defdata::answers))
...">pick-dominant-poly-type-expr1</a> (cdr ptypes)
        <a class="sym-link local-def" href="#def-all-tvars" data-sym="ALL-TVARS" title="(defun defdata::all-tvars (defdata::texp)
  (defdata::intersection-eq
   (defdata::strip-cdrs defdata::*tvar-typename-alist*)
   (defdata::all-vars defdata::texp)))">all-tvars</a>
        (cons (car ptypes) answers))
      (<a class="sym-link local-def" href="#def-pick-dominant-poly-type-expr1" data-sym="PICK-DOMINANT-POLY-TYPE-EXPR1" title="(defun defdata::pick-dominant-poly-type-expr1
       (defdata::ptypes defdata::all-tvars defdata::answers)
  (if (endp defdata::ptypes)
      (defdata::choose-largest-poly-type defdata::answers
       (car defdata::answers))
...">pick-dominant-poly-type-expr1</a> (cdr ptypes)
        <a class="sym-link local-def" href="#def-all-tvars" data-sym="ALL-TVARS" title="(defun defdata::all-tvars (defdata::texp)
  (defdata::intersection-eq
   (defdata::strip-cdrs defdata::*tvar-typename-alist*)
   (defdata::all-vars defdata::texp)))">all-tvars</a>
        answers))))</pre>
  </div>

<div class="form-block function" id="def-pick-dominant-poly-type-expr" data-defines="PICK-DOMINANT-POLY-TYPE-EXPR" data-references="ALL-TVARS-LST,PICK-DOMINANT-POLY-TYPE-EXPR1,PTYPES,DEFUN" data-used-by="INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES,REGISTER-POLY-SIG-EVENTS" data-part-name="PICK-DOMINANT-POLY-TYPE-EXPR" data-part-args="PTYPES" data-part-body="ALL-TVARS-LST,PTYPES,PICK-DOMINANT-POLY-TYPE-EXPR1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PICK-DOMINANT-POLY-TYPE-EXPR">pick-dominant-poly-type-expr</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pick-dominant-poly-type-expr" data-sym="PICK-DOMINANT-POLY-TYPE-EXPR" title="(defun defdata::pick-dominant-poly-type-expr (defdata::ptypes)
  (defdata::pick-dominant-poly-type-expr1 defdata::ptypes
   (defdata::all-tvars-lst defdata::ptypes) nil))">pick-dominant-poly-type-expr</a>
  (ptypes)
  (<a class="sym-link local-def" href="#def-pick-dominant-poly-type-expr1" data-sym="PICK-DOMINANT-POLY-TYPE-EXPR1" title="(defun defdata::pick-dominant-poly-type-expr1
       (defdata::ptypes defdata::all-tvars defdata::answers)
  (if (endp defdata::ptypes)
      (defdata::choose-largest-poly-type defdata::answers
       (car defdata::answers))
...">pick-dominant-poly-type-expr1</a> ptypes
    (<a class="sym-link local-def" href="#def-all-tvars-lst" data-sym="ALL-TVARS-LST" title="(defun defdata::all-tvars-lst (defdata::texps)
  (defdata::intersection-eq
   (defdata::strip-cdrs defdata::*tvar-typename-alist*)
   (defdata::all-vars1-lst defdata::texps &#39;nil)))">all-tvars-lst</a> ptypes)
    nil))</pre>
  </div>

<div class="form-block function" id="def-make-table-append-event2" data-defines="MAKE-TABLE-APPEND-EVENT2" data-references="QUOTE,TABLE,QUASIQUOTE,PUT-ASSOC-EQ,NEW-ALST,APPEND,NEW-VAL,GET1,EXISTING-ALST,TABLE-ALIST,A,B*,WRLD,VAL,KEY2,KEY1,TBLE-NAME,DEFUN" data-part-name="MAKE-TABLE-APPEND-EVENT2" data-part-args="WRLD,VAL,KEY2,KEY1,TBLE-NAME" data-part-body="QUOTE,TABLE,QUASIQUOTE,PUT-ASSOC-EQ,NEW-ALST,VAL,KEY2,APPEND,NEW-VAL,KEY1,GET1,EXISTING-ALST,WRLD,TBLE-NAME,TABLE-ALIST,A,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-TABLE-APPEND-EVENT2">make-table-append-event2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-table-append-event2" data-sym="MAKE-TABLE-APPEND-EVENT2" title="(defun defdata::make-table-append-event2
       (defdata::tble-name defdata::key1 defdata::key2 defdata::val
        defdata::wrld)
  (defdata::b*
   ((defdata::a (defdata::table-alist defdata::tble-name defdata::wrld))
...">make-table-append-event2</a>
  (tble-name key1
    key2
    val
    wrld)
  (b* ((a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> tble-name wrld)) (existing-alst (get1 key1 a))
      (new-val (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (get1 key2 existing-alst)
          val))
      (new-alst (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> key2
          new-val
          existing-alst)))
    `(<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> ,DEFDATA::TBLE-NAME
      ',DEFDATA::KEY1
      ',DEFDATA::NEW-ALST
      <span class="keyword">:put</span>)))</pre>
  </div>

<div class="form-block function" id="def-filter-texps-with-vars" data-defines="FILTER-TEXPS-WITH-VARS" data-references="CDR,CONS,CAR,ALL-TVARS,CONSP,QUOTE,ENDP,IF,TEXPS,DEFUN" data-used-by="REGISTER-POLY-SIG-EVENTS" data-part-name="FILTER-TEXPS-WITH-VARS" data-part-args="TEXPS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FILTER-TEXPS-WITH-VARS">filter-texps-with-vars</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-filter-texps-with-vars" data-sym="FILTER-TEXPS-WITH-VARS" title="(defun defdata::filter-texps-with-vars (defdata::texps)
  &quot;Filter from normalized texps, the ones which have :a, :b, ... type vars&quot;
  (if (endp defdata::texps)
      &#39;nil
      (if (consp (defdata::all-tvars (car defdata::texps)))
...">filter-texps-with-vars</a>
  (texps)
  <span class="string">"Filter from normalized texps, the ones which have :a, :b, ... type vars"</span>
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> texps)
    'nil
    (if (consp (<a class="sym-link local-def" href="#def-all-tvars" data-sym="ALL-TVARS" title="(defun defdata::all-tvars (defdata::texp)
  (defdata::intersection-eq
   (defdata::strip-cdrs defdata::*tvar-typename-alist*)
   (defdata::all-vars defdata::texp)))">all-tvars</a> (car texps)))
      (cons (car texps)
        (<a class="sym-link local-def" href="#def-filter-texps-with-vars" data-sym="FILTER-TEXPS-WITH-VARS" title="(defun defdata::filter-texps-with-vars (defdata::texps)
  &quot;Filter from normalized texps, the ones which have :a, :b, ... type vars&quot;
  (if (endp defdata::texps)
      &#39;nil
      (if (consp (defdata::all-tvars (car defdata::texps)))
...">filter-texps-with-vars</a> (cdr texps)))
      (<a class="sym-link local-def" href="#def-filter-texps-with-vars" data-sym="FILTER-TEXPS-WITH-VARS" title="(defun defdata::filter-texps-with-vars (defdata::texps)
  &quot;Filter from normalized texps, the ones which have :a, :b, ... type vars&quot;
  (if (endp defdata::texps)
      &#39;nil
      (if (consp (defdata::all-tvars (car defdata::texps)))
...">filter-texps-with-vars</a> (cdr texps)))))</pre>
  </div>

<div class="form-block function" id="def-register-poly-sig-events" data-defines="REGISTER-POLY-SIG-EVENTS" data-references="QUASIQUOTE,MAKE-PREDICATE-SYMBOL-LST,VPREDS,TO-SYMBOLS,VTNAMES,REMOVE-DUPLICATES-EQUAL,FILTER-TEXPS-WITH-VARS,VTYPES,*POLY-COMBINATORS*,MEMBER-EQ,UNLESS,CAR,PCOMB,CONSP,AND,CONS,*SIG-SINGULAR-DOMINANT-POLY-COMB-LIMITATION-MSG*,CW,PROG2$,NULL,WHEN,CW?,-,LIST,APPEND,PICK-DOMINANT-POLY-TYPE-EXPR,DOM-TYPE,B*,WRLD,TEMPL,RTYPE,ATYPES,NM,DEFUN" data-part-name="REGISTER-POLY-SIG-EVENTS" data-part-args="WRLD,TEMPL,RTYPE,ATYPES,NM" data-part-body="QUASIQUOTE,MAKE-PREDICATE-SYMBOL-LST,VPREDS,TO-SYMBOLS,VTNAMES,REMOVE-DUPLICATES-EQUAL,FILTER-TEXPS-WITH-VARS,VTYPES,*POLY-COMBINATORS*,MEMBER-EQ,UNLESS,CAR,PCOMB,CONSP,AND,CONS,*SIG-SINGULAR-DOMINANT-POLY-COMB-LIMITATION-MSG*,CW,PROG2$,NULL,WHEN,NM,CW?,-,RTYPE,LIST,ATYPES,APPEND,PICK-DOMINANT-POLY-TYPE-EXPR,DOM-TYPE,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REGISTER-POLY-SIG-EVENTS">register-poly-sig-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-register-poly-sig-events" data-sym="REGISTER-POLY-SIG-EVENTS" title="(defun defdata::register-poly-sig-events
       (defdata::nm defdata::atypes defdata::rtype defdata::templ
        defdata::wrld)
  (defdata::b*
   ((defdata::dom-type
...">register-poly-sig-events</a>
  (nm atypes
    rtype
    templ
    wrld)
  (b* ((dom-type (<a class="sym-link local-def" href="#def-pick-dominant-poly-type-expr" data-sym="PICK-DOMINANT-POLY-TYPE-EXPR" title="(defun defdata::pick-dominant-poly-type-expr (defdata::ptypes)
  (defdata::pick-dominant-poly-type-expr1 defdata::ptypes
   (defdata::all-tvars-lst defdata::ptypes) nil))">pick-dominant-poly-type-expr</a> (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> atypes (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> rtype)))) (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? nil
          <span class="string">"dom-type: ~x0 nm: ~x1"</span>
          dom-type
          nm))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> dom-type)) (<a class="sym-link system" href="../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="../../../axioms.html#def-cw" data-sym="CW">cw</a> *sig-singular-dominant-poly-comb-limitation-msg*
            (cons rtype atypes))
          nil)))
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp dom-type)
      (b* ((pcomb (car dom-type)) ((unless (<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> pcomb
               *poly-combinators*)) (<a class="sym-link system" href="../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="../../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"~x0 currently does not have polymorphic support. Skipping..."</span>
                pcomb)
              nil))
          (vtypes (<a class="sym-link local-def" href="#def-filter-texps-with-vars" data-sym="FILTER-TEXPS-WITH-VARS" title="(defun defdata::filter-texps-with-vars (defdata::texps)
  &quot;Filter from normalized texps, the ones which have :a, :b, ... type vars&quot;
  (if (endp defdata::texps)
      &#39;nil
      (if (consp (defdata::all-tvars (car defdata::texps)))
...">filter-texps-with-vars</a> (<a class="sym-link system" href="../../../axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> (cons rtype atypes))))
          (vtnames (to-symbols vtypes <span class="string">"DEFDATA"</span>))
          (vpreds (make-predicate-symbol-lst vtnames
              <span class="string">"DEFDATA"</span>)))
        `(,@(DEFDATA::TABLE-PUT-EVENTS &#39;DEFDATA::DERIVED-PRED-&gt;POLY-TEXP-MAP
   DEFDATA::VPREDS DEFDATA::VTYPES) ,@(DEFDATA::TABLE-PUT-EVENTS &#39;DEFDATA::TVAR-METADATA-TABLE DEFDATA::VTNAMES
   (DEFDATA::STRIP-CDRS
    (DEFDATA::TYPE-METADATA-BASES DEFDATA::VTNAMES &quot;DEFDATA&quot;)))
          ,(DEFDATA::MAKE-TABLE-APPEND-EVENT2 &#39;DEFDATA::USER-COMBINATOR-TABLE
  DEFDATA::PCOMB :POLYMORPHIC-EVENTS DEFDATA::TEMPL DEFDATA::WRLD))))))</pre>
  </div>

<div class="form-block function" id="def-find-type-name" data-defines="FIND-TYPE-NAME" data-references="CDR,EQUAL,GET1,PDEF,CAR,AL,TNAME,CONS,B*,ENDP,IF,M,TEXP,DEFUN" data-part-name="FIND-TYPE-NAME" data-part-args="M,TEXP" data-part-body="CDR,FIND-TYPE-NAME,TEXP,EQUAL,GET1,PDEF,CAR,AL,TNAME,CONS,B*,M,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-TYPE-NAME">find-type-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-type-name" data-sym="FIND-TYPE-NAME" title="(defun defdata::find-type-name (defdata::texp defdata::m)
  (if (endp defdata::m)
      :undefined
      (defdata::b*
       (((cons defdata::tname defdata::al) (car defdata::m))
...">find-type-name</a>
  (texp m)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> m)
    <span class="keyword">:undefined</span> (b* (((cons tname al) (car m)) (pdef (get1 <span class="keyword">:prettyified-def</span> al)))
      (if (equal texp pdef)
        tname
        (<a class="sym-link local-def" href="#def-find-type-name" data-sym="FIND-TYPE-NAME" title="(defun defdata::find-type-name (defdata::texp defdata::m)
  (if (endp defdata::m)
      :undefined
      (defdata::b*
       (((cons defdata::tname defdata::al) (car defdata::m))
...">find-type-name</a> texp (cdr m))))))</pre>
  </div>

<div class="form-block other" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop find-type-names1
  (texps m)
  (for ((texp in texps))
    (collect (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp texp)
          (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> texp m))
        texp
        (<a class="sym-link local-def" href="#def-find-type-name" data-sym="FIND-TYPE-NAME" title="(defun defdata::find-type-name (defdata::texp defdata::m)
  (if (endp defdata::m)
      :undefined
      (defdata::b*
       (((cons defdata::tname defdata::al) (car defdata::m))
...">find-type-name</a> texp m)))))</pre>
  </div>

<div class="form-block function" id="def-remove-exprs-with-fns" data-defines="REMOVE-EXPRS-WITH-FNS" data-references="CONS,CDR,CAR,ALL-FNNAMES,INTERSECTION-EQ,QUOTE,ENDP,IF,FNS,PSIGS,DEFUN" data-used-by="PSIG-TEMPL-INSTANTIATION-EV-USER" data-part-name="REMOVE-EXPRS-WITH-FNS" data-part-args="FNS,PSIGS" data-part-body="CONS,CDR,REMOVE-EXPRS-WITH-FNS,FNS,CAR,ALL-FNNAMES,INTERSECTION-EQ,QUOTE,PSIGS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-EXPRS-WITH-FNS">remove-exprs-with-fns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-exprs-with-fns" data-sym="REMOVE-EXPRS-WITH-FNS" title="(defun defdata::remove-exprs-with-fns (defdata::psigs defdata::fns)
  (if (endp defdata::psigs)
      &#39;nil
      (if (defdata::intersection-eq (all-fnnames (car defdata::psigs))
           defdata::fns)
...">remove-exprs-with-fns</a>
  (psigs fns)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> psigs)
    'nil
    (if (<a class="sym-link system" href="../../../axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (all-fnnames (car psigs))
        fns)
      (<a class="sym-link local-def" href="#def-remove-exprs-with-fns" data-sym="REMOVE-EXPRS-WITH-FNS" title="(defun defdata::remove-exprs-with-fns (defdata::psigs defdata::fns)
  (if (endp defdata::psigs)
      &#39;nil
      (if (defdata::intersection-eq (all-fnnames (car defdata::psigs))
           defdata::fns)
...">remove-exprs-with-fns</a> (cdr psigs)
        fns)
      (cons (car psigs)
        (<a class="sym-link local-def" href="#def-remove-exprs-with-fns" data-sym="REMOVE-EXPRS-WITH-FNS" title="(defun defdata::remove-exprs-with-fns (defdata::psigs defdata::fns)
  (if (endp defdata::psigs)
      &#39;nil
      (if (defdata::intersection-eq (all-fnnames (car defdata::psigs))
           defdata::fns)
...">remove-exprs-with-fns</a> (cdr psigs)
          fns)))))</pre>
  </div>

<div class="form-block function" id="def-subst-vals" data-defines="SUBST-VALS" data-references="CDR,SUBLIS-VAR,VAL~,CAR,VAL,KEY,CONS,B*,QUOTE,ENDP,IF,SIGMA,MAP,DEFUN" data-used-by="POLYPRED-TYPENAME-MAP" data-part-name="SUBST-VALS" data-part-args="SIGMA,MAP" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUBST-VALS">subst-vals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-subst-vals" data-sym="SUBST-VALS" title="(defun defdata::subst-vals (map defdata::sigma)
  &quot;apply sigma to all values in map&quot;
  (if (endp map)
      &#39;nil
      (defdata::b*
...">subst-vals</a>
  (map sigma)
  <span class="string">"apply sigma to all values in map"</span>
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> map)
    'nil
    (b* (((cons key val) (car map)) (val~ (<a class="sym-link system" href="../../../basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> sigma val)))
      (cons (cons key val~)
        (<a class="sym-link local-def" href="#def-subst-vals" data-sym="SUBST-VALS" title="(defun defdata::subst-vals (map defdata::sigma)
  &quot;apply sigma to all values in map&quot;
  (if (endp map)
      &#39;nil
      (defdata::b*
...">subst-vals</a> (cdr map) sigma)))))</pre>
  </div>

<div class="form-block function" id="def-undefined-preds" data-defines="UNDEFINED-PREDS" data-references="CAAR,CONS,CAR,CDR,EQUAL,QUOTE,ENDP,IF,PRED->TNAME-MAP,DEFUN" data-used-by="PSIG-TEMPL-INSTANTIATION-EV-USER" data-part-name="UNDEFINED-PREDS" data-part-args="PRED->TNAME-MAP" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNDEFINED-PREDS">undefined-preds</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-undefined-preds" data-sym="UNDEFINED-PREDS" title="(defun defdata::undefined-preds (defdata::pred-&gt;tname-map)
  &quot;return all keys marked :undefined&quot;
  (if (endp defdata::pred-&gt;tname-map)
      &#39;nil
      (if (equal (cdr (car defdata::pred-&gt;tname-map)) :undefined)
...">undefined-preds</a>
  (pred-&gt;tname-map)
  <span class="string">"return all keys marked :undefined"</span>
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> pred-&gt;tname-map)
    'nil
    (if (equal (cdr (car pred-&gt;tname-map)) <span class="keyword">:undefined</span>)
      (cons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> pred-&gt;tname-map)
        (<a class="sym-link local-def" href="#def-undefined-preds" data-sym="UNDEFINED-PREDS" title="(defun defdata::undefined-preds (defdata::pred-&gt;tname-map)
  &quot;return all keys marked :undefined&quot;
  (if (endp defdata::pred-&gt;tname-map)
      &#39;nil
      (if (equal (cdr (car defdata::pred-&gt;tname-map)) :undefined)
...">undefined-preds</a> (cdr pred-&gt;tname-map)))
      (<a class="sym-link local-def" href="#def-undefined-preds" data-sym="UNDEFINED-PREDS" title="(defun defdata::undefined-preds (defdata::pred-&gt;tname-map)
  &quot;return all keys marked :undefined&quot;
  (if (endp defdata::pred-&gt;tname-map)
      &#39;nil
      (if (equal (cdr (car defdata::pred-&gt;tname-map)) :undefined)
...">undefined-preds</a> (cdr pred-&gt;tname-map)))))</pre>
  </div>

<div class="form-block function" id="def-remove-undefined" data-defines="REMOVE-UNDEFINED" data-references="CONS,CAR,CDR,EQUAL,QUOTE,ENDP,IF,MAP,DEFUN" data-used-by="PSIG-TEMPL-INSTANTIATION-EV-USER" data-part-name="REMOVE-UNDEFINED" data-part-args="MAP" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-UNDEFINED">remove-undefined</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-undefined" data-sym="REMOVE-UNDEFINED" title="(defun defdata::remove-undefined (map)
  &quot;remove all values marked :undefined&quot;
  (if (endp map)
      &#39;nil
      (if (equal (cdr (car map)) :undefined)
...">remove-undefined</a>
  (map)
  <span class="string">"remove all values marked :undefined"</span>
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> map)
    'nil
    (if (equal (cdr (car map)) <span class="keyword">:undefined</span>)
      (<a class="sym-link local-def" href="#def-remove-undefined" data-sym="REMOVE-UNDEFINED" title="(defun defdata::remove-undefined (map)
  &quot;remove all values marked :undefined&quot;
  (if (endp map)
      &#39;nil
      (if (equal (cdr (car map)) :undefined)
...">remove-undefined</a> (cdr map))
      (cons (car map) (<a class="sym-link local-def" href="#def-remove-undefined" data-sym="REMOVE-UNDEFINED" title="(defun defdata::remove-undefined (map)
  &quot;remove all values marked :undefined&quot;
  (if (endp map)
      &#39;nil
      (if (equal (cdr (car map)) :undefined)
...">remove-undefined</a> (cdr map))))))</pre>
  </div>

<div class="form-block function" id="def-predicate-name_2Flambda" data-defines="PREDICATE-NAME/LAMBDA" data-references="T,EQUAL,X,LAMBDA,QUASIQUOTE,PREDICATE-NAME,COND,SYMBOL-ALISTP,POSSIBLE-CONSTANT-VALUE-P,PROPER-SYMBOLP,OR,AND,XARGS,DECLARE,M,A,TYPE,DEFUN" data-part-name="PREDICATE-NAME/LAMBDA" data-part-args="M,A,TYPE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PREDICATE-NAME/LAMBDA">predicate-name/lambda</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-predicate-name_2Flambda" data-sym="PREDICATE-NAME/LAMBDA" title="(defun defdata::predicate-name/lambda (type defdata::a defdata::m)
  &quot;find predicate characterization for type (either a symbol or a quoted
constant). In the latter return a lambda expression&quot;
  (declare
   (defdata::xargs :guard
...">predicate-name/lambda</a>
  (type a m)
  <span class="string">"find predicate characterization for type (either a symbol or a quoted
constant). In the latter return a lambda expression"</span>
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (proper-symbolp type)
          (possible-constant-value-p type))
        (<a class="sym-link system" href="../../../axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> m))))
  (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((proper-symbolp type) (predicate-name type a m))
    ((possible-constant-value-p type) `(lambda (x) (equal x ,TYPE)))
    (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block other" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop predicate-names/lambdas
  (types a m)
  (for ((type in types))
    (collect (<a class="sym-link local-def" href="#def-predicate-name_2Flambda" data-sym="PREDICATE-NAME/LAMBDA" title="(defun defdata::predicate-name/lambda (type defdata::a defdata::m)
  &quot;find predicate characterization for type (either a symbol or a quoted
constant). In the latter return a lambda expression&quot;
  (declare
   (defdata::xargs :guard
...">predicate-name/lambda</a> type a m))))</pre>
  </div>

<div class="form-block function" id="def-dlistify" data-defines="DLISTIFY" data-references="STRIP-CDRS,STRIP-CARS,LIST-UP-LISTS,ALISTP,XARGS,DECLARE,ALIST,DEFUN" data-used-by="FUNCTIONAL-INSTANTIATION-LIST" data-part-name="DLISTIFY" data-part-args="ALIST" data-part-declare="ALIST,ALISTP,XARGS,DECLARE" data-part-body="STRIP-CDRS,ALIST,STRIP-CARS,LIST-UP-LISTS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DLISTIFY">dlistify</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dlistify" data-sym="DLISTIFY" title="(defun defdata::dlistify (defdata::alist)
  (declare (defdata::xargs :guard (defdata::alistp defdata::alist)))
  (defdata::list-up-lists (defdata::strip-cars defdata::alist)
   (defdata::strip-cdrs defdata::alist)))">dlistify</a>
  (alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> alist)))
  (list-up-lists (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> alist)
    (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> alist)))</pre>
  </div>

<div class="form-block function" id="def-polypred-instantiated-pred-alist" data-defines="POLYPRED-INSTANTIATED-PRED-ALIST" data-references="STRIP-CARS,PAIRLIS$,STRIP-CDRS,PREDICATE-NAMES,INST-PREDS,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,B*,WRLD,NEW-TYPES,PPRED->TNAME-MAP,DEFUN" data-used-by="PSIG-TEMPL-INSTANTIATION-EV-USER,FUNCTIONAL-INSTANTIATION-LIST" data-part-name="POLYPRED-INSTANTIATED-PRED-ALIST" data-part-args="WRLD,NEW-TYPES,PPRED->TNAME-MAP" data-part-body="STRIP-CARS,PAIRLIS$,PPRED->TNAME-MAP,STRIP-CDRS,PREDICATE-NAMES,INST-PREDS,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,NEW-TYPES,WRLD,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POLYPRED-INSTANTIATED-PRED-ALIST">polypred-instantiated-pred-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-polypred-instantiated-pred-alist" data-sym="POLYPRED-INSTANTIATED-PRED-ALIST" title="(defun defdata::polypred-instantiated-pred-alist
       (defdata::ppred-&gt;tname-map defdata::new-types defdata::wrld)
  (defdata::b*
   ((defdata::m
     (append (defdata::table-alist &#39;defdata::tvar-metadata-table defdata::wrld)
...">polypred-instantiated-pred-alist</a>
  (ppred-&gt;tname-map new-types wrld)
  (b* ((m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'tvar-metadata-table
           wrld)
         new-types
         (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
           wrld))) (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (inst-preds (predicate-names (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> ppred-&gt;tname-map)
          a
          m)))
    (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> ppred-&gt;tname-map)
      inst-preds)))</pre>
  </div>

<div class="form-block function" id="def-functional-instantiation-list" data-defines="FUNCTIONAL-INSTANTIATION-LIST" data-references="REMOVE-DUPLICATES-EQUAL,DLISTIFY,ALIST-EQUIV,NOT,GET1,T,OR,AND,CW?,-,FUNCTIONAL-INSTANTIATION-ALIST,CTX,UNION-ALIST2,ANS,POLYPRED-INSTANTIATED-PRED-ALIST,A2,STRIP-CDRS,STRIP-CARS,*TVAR-TYPENAME-ALIST*,SUBLIS-VAR-LST,PREDICATE-NAMES/LAMBDAS,PAIRLIS$,A1,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,B*,WRLD,KWD-ALIST,NEW-TYPES,TVAR-SIGMA,PPRED->TNAME-MAP,DEFUN" data-used-by="PSIG-TEMPL-INSTANTIATION-EV-USER" data-part-name="FUNCTIONAL-INSTANTIATION-LIST" data-part-args="WRLD,KWD-ALIST,NEW-TYPES,TVAR-SIGMA,PPRED->TNAME-MAP" data-part-body="REMOVE-DUPLICATES-EQUAL,DLISTIFY,ALIST-EQUIV,NOT,KWD-ALIST,GET1,T,OR,AND,CW?,-,FUNCTIONAL-INSTANTIATION-ALIST,CTX,UNION-ALIST2,ANS,PPRED->TNAME-MAP,POLYPRED-INSTANTIATED-PRED-ALIST,A2,STRIP-CDRS,TVAR-SIGMA,STRIP-CARS,*TVAR-TYPENAME-ALIST*,SUBLIS-VAR-LST,PREDICATE-NAMES/LAMBDAS,PAIRLIS$,A1,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,NEW-TYPES,WRLD,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FUNCTIONAL-INSTANTIATION-LIST">functional-instantiation-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-functional-instantiation-list" data-sym="FUNCTIONAL-INSTANTIATION-LIST" title="(defun defdata::functional-instantiation-list
       (defdata::ppred-&gt;tname-map defdata::tvar-sigma defdata::new-types
        defdata::kwd-alist defdata::wrld)
  (defdata::b*
   ((defdata::m
...">functional-instantiation-list</a>
  (ppred-&gt;tname-map tvar-sigma
    new-types
    kwd-alist
    wrld)
  (b* ((m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'tvar-metadata-table
           wrld)
         new-types
         (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
           wrld))) (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (a1 (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (predicate-names/lambdas (<a class="sym-link system" href="../../../basis-b.html#def-sublis-var-lst" data-sym="SUBLIS-VAR-LST">sublis-var-lst</a> *tvar-typename-alist*
              (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> tvar-sigma))
            a
            m)
          (predicate-names/lambdas (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> tvar-sigma)
            a
            m)))
      (a2 (<a class="sym-link local-def" href="#def-polypred-instantiated-pred-alist" data-sym="POLYPRED-INSTANTIATED-PRED-ALIST" title="(defun defdata::polypred-instantiated-pred-alist
       (defdata::ppred-&gt;tname-map defdata::new-types defdata::wrld)
  (defdata::b*
   ((defdata::m
     (append (defdata::table-alist &#39;defdata::tvar-metadata-table defdata::wrld)
...">polypred-instantiated-pred-alist</a> ppred-&gt;tname-map
          new-types
          wrld))
      (ans (union-alist2 a2 a1))
      (ctx 'functional-instantiation-alist)
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (get1 <span class="keyword">:verbose</span> kwd-alist <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (alist-equiv ans
                (union-alist2 a1 a2))))
          <span class="string">"~|Defdata/Warning:: ~x0 - tvar-sigma ~x1 entries differ from ppred-instpred-map ~x2"</span>
          ctx
          a1
          a2)))
    (<a class="sym-link local-def" href="#def-dlistify" data-sym="DLISTIFY" title="(defun defdata::dlistify (defdata::alist)
  (declare (defdata::xargs :guard (defdata::alistp defdata::alist)))
  (defdata::list-up-lists (defdata::strip-cars defdata::alist)
   (defdata::strip-cdrs defdata::alist)))">dlistify</a> (<a class="sym-link system" href="../../../axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> ans))))</pre>
  </div>

<div class="form-block function" id="def-polypred-typename-map" data-defines="POLYPRED-TYPENAME-MAP" data-references="STRIP-CDRS,FIND-TYPE-NAMES1,STRIP-CARS,PAIRLIS$,TYPE-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,SUBST-VALS,PPRED->TEXP-MAP,B*,WRLD,NEW-TYPES,DERIVED-PRED->POLY-TEXP-MAP,TVAR-SIGMA,DEFUN" data-used-by="PSIG-TEMPL-INSTANTIATION-EV-USER" data-part-name="POLYPRED-TYPENAME-MAP" data-part-args="WRLD,NEW-TYPES,DERIVED-PRED->POLY-TEXP-MAP,TVAR-SIGMA" data-part-body="STRIP-CDRS,FIND-TYPE-NAMES1,STRIP-CARS,PAIRLIS$,WRLD,TYPE-METADATA-TABLE,QUOTE,TABLE-ALIST,NEW-TYPES,APPEND,M,TVAR-SIGMA,DERIVED-PRED->POLY-TEXP-MAP,SUBST-VALS,PPRED->TEXP-MAP,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="POLYPRED-TYPENAME-MAP">polypred-typename-map</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-polypred-typename-map" data-sym="POLYPRED-TYPENAME-MAP" title="(defun defdata::polypred-typename-map
       (defdata::tvar-sigma defdata::derived-pred-&gt;poly-texp-map
        defdata::new-types defdata::wrld)
  (defdata::b*
   ((defdata::ppred-&gt;texp-map
...">polypred-typename-map</a>
  (tvar-sigma derived-pred-&gt;poly-texp-map
    new-types
    wrld)
  (b* ((ppred-&gt;texp-map (<a class="sym-link local-def" href="#def-subst-vals" data-sym="SUBST-VALS" title="(defun defdata::subst-vals (map defdata::sigma)
  &quot;apply sigma to all values in map&quot;
  (if (endp map)
      &#39;nil
      (defdata::b*
...">subst-vals</a> derived-pred-&gt;poly-texp-map
         tvar-sigma)) (m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-types
          (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
            wrld))))
    (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> ppred-&gt;texp-map)
      (find-type-names1 (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> ppred-&gt;texp-map)
        m))))</pre>
  </div>

<div class="form-block other" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop filter-proper-symbols
  (xs)
  (for ((x in xs))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp x) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)))))</pre>
  </div>

<div class="form-block other" id="form-58" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop filter-true-lists
  (xs wrld)
  (for ((x in xs))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (subtype-p x '<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> wrld)
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)))))</pre>
  </div>

<div class="form-block function" id="def-psig-templ-instantiation-ev-user" data-defines="PSIG-TEMPL-INSTANTIATION-EV-USER" data-references="FIX-INTERN$,TEMPLATE-SUBST,SYMBOL-NAME,STR-ALIST,_PRED_,ACONS,ATOM-ALIST,POLYPRED-INSTANTIATED-PRED-ALIST,PPRED-INST-PRED-ALIST,_FUN-INST-ALIST_,_DISABLED-RUNES_,_ENABLED-RUNES_,QUASIQUOTE,SPLICE-ALIST,LIST,AND,ENABLED,FILTER-TRUE-LISTS,SET-DIFFERENCE-EQ,GET1,STRIP-CADRS,FILTER-PROPER-SYMBOLS,UNION-EQ,REMOVE-EQ,DISABLED,TYPE-METADATA-TABLE,APPEND,PREDICATE-NAME,PRED,TYPE-ALIAS-TABLE,QUOTE,TABLE-ALIST,A,REMOVE-UNDEFINED,FUNCTIONAL-INSTANTIATION-LIST,FUN-INST-DLIST,UNDEFINED-PREDS,REMOVE-EXPRS-WITH-FNS,POLYPRED-TYPENAME-MAP,PPRED->TNAME-MAP,B*,WRLD,KWD-ALIST,NEW-TYPES,DERIVED-PRED->POLY-TEXP-MAP,TEMPL,TVAR-SIGMA,TNAME,DEFUN" data-part-name="PSIG-TEMPL-INSTANTIATION-EV-USER" data-part-args="WRLD,KWD-ALIST,NEW-TYPES,DERIVED-PRED->POLY-TEXP-MAP,TEMPL,TVAR-SIGMA,TNAME" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PSIG-TEMPL-INSTANTIATION-EV-USER">psig-templ-instantiation-ev-user</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-psig-templ-instantiation-ev-user" data-sym="PSIG-TEMPL-INSTANTIATION-EV-USER" title="(defun defdata::psig-templ-instantiation-ev-user
       (defdata::tname defdata::tvar-sigma defdata::templ
        defdata::derived-pred-&gt;poly-texp-map defdata::new-types
        defdata::kwd-alist defdata::wrld)
  &quot;For given tvar-sigma, find functional instantiation and return instantiated templ&quot;
...">psig-templ-instantiation-ev-user</a>
  (tname tvar-sigma
    templ
    derived-pred-&gt;poly-texp-map
    new-types
    kwd-alist
    wrld)
  <span class="string">"For given tvar-sigma, find functional instantiation and return instantiated templ"</span>
  (b* ((ppred-&gt;tname-map (<a class="sym-link local-def" href="#def-polypred-typename-map" data-sym="POLYPRED-TYPENAME-MAP" title="(defun defdata::polypred-typename-map
       (defdata::tvar-sigma defdata::derived-pred-&gt;poly-texp-map
        defdata::new-types defdata::wrld)
  (defdata::b*
   ((defdata::ppred-&gt;texp-map
...">polypred-typename-map</a> tvar-sigma
         derived-pred-&gt;poly-texp-map
         new-types
         wrld)) (templ (<a class="sym-link local-def" href="#def-remove-exprs-with-fns" data-sym="REMOVE-EXPRS-WITH-FNS" title="(defun defdata::remove-exprs-with-fns (defdata::psigs defdata::fns)
  (if (endp defdata::psigs)
      &#39;nil
      (if (defdata::intersection-eq (all-fnnames (car defdata::psigs))
           defdata::fns)
...">remove-exprs-with-fns</a> templ
          (<a class="sym-link local-def" href="#def-undefined-preds" data-sym="UNDEFINED-PREDS" title="(defun defdata::undefined-preds (defdata::pred-&gt;tname-map)
  &quot;return all keys marked :undefined&quot;
  (if (endp defdata::pred-&gt;tname-map)
      &#39;nil
      (if (equal (cdr (car defdata::pred-&gt;tname-map)) :undefined)
...">undefined-preds</a> ppred-&gt;tname-map)))
      (fun-inst-dlist (<a class="sym-link local-def" href="#def-functional-instantiation-list" data-sym="FUNCTIONAL-INSTANTIATION-LIST" title="(defun defdata::functional-instantiation-list
       (defdata::ppred-&gt;tname-map defdata::tvar-sigma defdata::new-types
        defdata::kwd-alist defdata::wrld)
  (defdata::b*
   ((defdata::m
...">functional-instantiation-list</a> (<a class="sym-link local-def" href="#def-remove-undefined" data-sym="REMOVE-UNDEFINED" title="(defun defdata::remove-undefined (map)
  &quot;remove all values marked :undefined&quot;
  (if (endp map)
      &#39;nil
      (if (equal (cdr (car map)) :undefined)
...">remove-undefined</a> ppred-&gt;tname-map)
          tvar-sigma
          new-types
          kwd-alist
          wrld))
      (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (pred (predicate-name tname
          a
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-types
            (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
              wrld))))
      (disabled (<a class="sym-link system" href="../../../axioms.html#def-remove-eq" data-sym="REMOVE-EQ">remove-eq</a> pred
          (<a class="sym-link system" href="../../../axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (filter-proper-symbols (<a class="sym-link system" href="../../../axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> fun-inst-dlist))
            (get1 <span class="keyword">:disabled</span> kwd-alist))))
      (disabled (<a class="sym-link system" href="../../../axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> disabled
          (filter-true-lists disabled wrld)))
      (enabled (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> pred (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> pred)))
      (splice-alist `((_enabled-runes_ . ,DEFDATA::ENABLED) (_disabled-runes_ . ,DEFDATA::DISABLED)
          (_fun-inst-alist_ . ,DEFDATA::FUN-INST-DLIST)))
      (ppred-inst-pred-alist (<a class="sym-link local-def" href="#def-polypred-instantiated-pred-alist" data-sym="POLYPRED-INSTANTIATED-PRED-ALIST" title="(defun defdata::polypred-instantiated-pred-alist
       (defdata::ppred-&gt;tname-map defdata::new-types defdata::wrld)
  (defdata::b*
   ((defdata::m
     (append (defdata::table-alist &#39;defdata::tvar-metadata-table defdata::wrld)
...">polypred-instantiated-pred-alist</a> ppred-&gt;tname-map
          new-types
          wrld))
      (atom-alist (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> '_pred_
          pred
          ppred-inst-pred-alist))
      (str-alist (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="string">"_PRED_"</span> (symbol-name pred) 'nil)))
    (template-subst templ
      <span class="keyword">:features</span> nil
      <span class="keyword">:splice-alist</span> splice-alist
      <span class="keyword">:atom-alist</span> atom-alist
      <span class="keyword">:str-alist</span> str-alist
      <span class="keyword">:pkg-sym</span> (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> <span class="string">"a"</span>
        (get1 <span class="keyword">:current-package</span> kwd-alist)))))</pre>
  </div>

<div class="form-block other" id="form-60" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defttag" data-sym="DEFTTAG">defttag</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a> (psig-templ-instantiation-ev <a class="sym-link local-def" href="#def-psig-templ-instantiation-ev-user" data-sym="PSIG-TEMPL-INSTANTIATION-EV-USER" title="(defun defdata::psig-templ-instantiation-ev-user
       (defdata::tname defdata::tvar-sigma defdata::templ
        defdata::derived-pred-&gt;poly-texp-map defdata::new-types
        defdata::kwd-alist defdata::wrld)
  &quot;For given tvar-sigma, find functional instantiation and return instantiated templ&quot;
...">psig-templ-instantiation-ev-user</a>)
  <span class="keyword">:skip-checks</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-62" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defttag" data-sym="DEFTTAG">defttag</a> nil)</pre>
  </div>

<div class="form-block other" id="form-63" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop psig-templ-instantiation-events
  (ps templ
    derived-pred-&gt;poly-texp-map
    new-types
    kwd-alist
    wrld)
  (for ((p in ps))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (psig-templ-instantiation-ev (car p)
        (cdr p)
        templ
        derived-pred-&gt;poly-texp-map
        new-types
        kwd-alist
        wrld))))</pre>
  </div>

<div class="form-block other" id="form-64" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *map-all-to-a*
  (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> *allowed-type-vars*
    (<a class="sym-link system" href="../../../axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> *allowed-type-vars*)
      <span class="keyword">:initial-element</span> '<span class="keyword">:a</span>)))</pre>
  </div>

<div class="form-block other" id="form-65" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> simplify-prop-comb-texp
    (pdef)
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> pdef) pdef)
      ((possible-constant-value-p pdef) pdef)
      ((<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car pdef)
         '(<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> oneof anyof)) (b* ((<a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link system" href="../../../axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> (simplify-prop-comb-texps (cdr pdef)))))
          (if (consp (cdr <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
            (cons '<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)
            (car <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (cons (car pdef)
          (simplify-prop-comb-texps (cdr pdef))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> simplify-prop-comb-texps
    (texps)
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> texps)
      'nil
      (cons (simplify-prop-comb-texp (car texps))
        (simplify-prop-comb-texps (cdr texps))))))</pre>
  </div>

<div class="form-block function" id="def-find-match" data-defines="FIND-MATCH" data-references="LEN,MAKE-LIST,PAIRLIS$,ALL-VARS,TVARS,CDR,VAL,UNLESS,*MAP-ALL-TO-A*,SUBLIS-VAR,SIMPLIFY-PROP-COMB-TEXP,LISTOF,QUOTE,CAR,EQ,IF,T,WHEN,ONE-WAY-UNIFY,SIGMA,YES,MV,REMOVE-NAMES,B*,PDEF,PTYPE,DEFUN" data-used-by="FIND-MATCHES1" data-part-name="FIND-MATCH" data-part-args="PDEF,PTYPE" data-part-body="LEN,MAKE-LIST,PAIRLIS$,ALL-VARS,TVARS,CDR,VAL,UNLESS,*MAP-ALL-TO-A*,SUBLIS-VAR,SIMPLIFY-PROP-COMB-TEXP,LISTOF,QUOTE,CAR,EQ,IF,T,WHEN,PTYPE,ONE-WAY-UNIFY,SIGMA,YES,MV,REMOVE-NAMES,PDEF,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-MATCH">find-match</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-match" data-sym="FIND-MATCH" title="(defun defdata::find-match (defdata::ptype defdata::pdef)
  (defdata::b*
   ((defdata::pdef (defdata::remove-names defdata::pdef))
    ((defdata::mv defdata::yes defdata::sigma)
     (defdata::one-way-unify defdata::ptype defdata::pdef))
...">find-match</a>
  (ptype pdef)
  (b* ((pdef (remove-names pdef)) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> yes sigma) (<a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun defdata::one-way-unify (defdata::pat defdata::term)
  (if (and (defdata::pseudo-termp defdata::pat)
           (defdata::pseudo-termp defdata::term))
      (one-way-unify defdata::pat defdata::term)
      (defdata::mv nil nil)))">one-way-unify</a> ptype pdef))
      ((when yes) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> sigma)))
    (if (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car ptype) 'listof)
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> yes sigma) (<a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun defdata::one-way-unify (defdata::pat defdata::term)
  (if (and (defdata::pseudo-termp defdata::pat)
           (defdata::pseudo-termp defdata::term))
      (one-way-unify defdata::pat defdata::term)
      (defdata::mv nil nil)))">one-way-unify</a> ptype
             (simplify-prop-comb-texp (<a class="sym-link system" href="../../../basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> *map-all-to-a* pdef)))) ((unless yes) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> yes sigma))
          (val (cdr (car sigma)))
          (tvars (<a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> pdef))
          (sigma (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> tvars
              (<a class="sym-link system" href="../../../axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> tvars)
                <span class="keyword">:initial-element</span> val))))
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> sigma))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil))))</pre>
  </div>

<div class="form-block function" id="def-find-matches1" data-defines="FIND-MATCHES1" data-references="FIND-MATCH,SIGMA,YES,MV,CDR,UNLESS,GET1,PDEF,CAR,AL,TNAME,CONS,B*,QUOTE,ENDP,IF,M,PTYPE,DEFUN" data-used-by="FIND-MATCHES" data-part-name="FIND-MATCHES1" data-part-args="M,PTYPE" data-part-body="FIND-MATCH,SIGMA,YES,MV,CDR,PTYPE,FIND-MATCHES1,UNLESS,GET1,PDEF,CAR,AL,TNAME,CONS,B*,QUOTE,M,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-MATCHES1">find-matches1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-matches1" data-sym="FIND-MATCHES1" title="(defun defdata::find-matches1 (defdata::ptype defdata::m)
  (if (endp defdata::m)
      &#39;nil
      (defdata::b*
       (((cons defdata::tname defdata::al) (car defdata::m))
...">find-matches1</a>
  (ptype m)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> m)
    'nil
    (b* (((cons tname al) (car m)) (pdef (get1 <span class="keyword">:prettyified-def</span> al))
        ((unless pdef) (<a class="sym-link local-def" href="#def-find-matches1" data-sym="FIND-MATCHES1" title="(defun defdata::find-matches1 (defdata::ptype defdata::m)
  (if (endp defdata::m)
      &#39;nil
      (defdata::b*
       (((cons defdata::tname defdata::al) (car defdata::m))
...">find-matches1</a> ptype (cdr m)))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> yes sigma) (<a class="sym-link local-def" href="#def-find-match" data-sym="FIND-MATCH" title="(defun defdata::find-match (defdata::ptype defdata::pdef)
  (defdata::b*
   ((defdata::pdef (defdata::remove-names defdata::pdef))
    ((defdata::mv defdata::yes defdata::sigma)
     (defdata::one-way-unify defdata::ptype defdata::pdef))
...">find-match</a> ptype pdef)))
      (if yes
        (cons (cons tname sigma)
          (<a class="sym-link local-def" href="#def-find-matches1" data-sym="FIND-MATCHES1" title="(defun defdata::find-matches1 (defdata::ptype defdata::m)
  (if (endp defdata::m)
      &#39;nil
      (defdata::b*
       (((cons defdata::tname defdata::al) (car defdata::m))
...">find-matches1</a> ptype (cdr m)))
        (<a class="sym-link local-def" href="#def-find-matches1" data-sym="FIND-MATCHES1" title="(defun defdata::find-matches1 (defdata::ptype defdata::m)
  (if (endp defdata::m)
      &#39;nil
      (defdata::b*
       (((cons defdata::tname defdata::al) (car defdata::m))
...">find-matches1</a> ptype (cdr m))))))</pre>
  </div>

<div class="form-block function" id="def-find-matches" data-defines="FIND-MATCHES" data-references="TYPE-METADATA-TABLE,QUOTE,TABLE-ALIST,FIND-MATCHES1,WRLD,PTYPE,DEFUN" data-used-by="INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES" data-part-name="FIND-MATCHES" data-part-args="WRLD,PTYPE" data-part-body="WRLD,TYPE-METADATA-TABLE,QUOTE,TABLE-ALIST,PTYPE,FIND-MATCHES1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-MATCHES">find-matches</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-matches" data-sym="FIND-MATCHES" title="(defun defdata::find-matches (defdata::ptype defdata::wrld)
  (defdata::find-matches1 defdata::ptype
   (defdata::table-alist &#39;defdata::type-metadata-table defdata::wrld)))">find-matches</a>
  (ptype wrld)
  (<a class="sym-link local-def" href="#def-find-matches1" data-sym="FIND-MATCHES1" title="(defun defdata::find-matches1 (defdata::ptype defdata::m)
  (if (endp defdata::m)
      &#39;nil
      (defdata::b*
       (((cons defdata::tname defdata::al) (car defdata::m))
...">find-matches1</a> ptype
    (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
      wrld)))</pre>
  </div>

<div class="form-block function" id="def-find_2Fmake-type-name" data-defines="FIND/MAKE-TYPE-NAME" data-references="TO-SYMBOL,ASSOC,PROPER-SYMBOLP,AND,IF,M,PTEXP,DEFUN" data-used-by="MAKE-SIG-DEFTHM-BODY,INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES" data-part-name="FIND/MAKE-TYPE-NAME" data-part-args="M,PTEXP" data-part-body="TO-SYMBOL,M,ASSOC,PTEXP,PROPER-SYMBOLP,AND,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND/MAKE-TYPE-NAME">find/make-type-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find_2Fmake-type-name" data-sym="FIND/MAKE-TYPE-NAME" title="(defun defdata::find/make-type-name (defdata::ptexp defdata::m)
  (if (and (defdata::proper-symbolp defdata::ptexp)
           (assoc defdata::ptexp defdata::m))
      defdata::ptexp
      (defdata::to-symbol defdata::ptexp &quot;DEFDATA&quot;)))">find/make-type-name</a>
  (ptexp m)
  (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (proper-symbolp ptexp)
      (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> ptexp m))
    ptexp
    (<a class="sym-link local-def" href="#def-to-symbol" data-sym="TO-SYMBOL" title="(defun defdata::to-symbol (defdata::obj defdata::pkg)
  (declare (defdata::xargs :guard (defdata::pkgp defdata::pkg)))
  (if (symbolp defdata::obj)
      defdata::obj
      (defdata::b*
...">to-symbol</a> ptexp <span class="string">"DEFDATA"</span>)))</pre>
  </div>

<div class="form-block other" id="form-70" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop find/make-type-names
  (ptexps m)
  (for ((ptexp in ptexps))
    (collect (<a class="sym-link local-def" href="#def-find_2Fmake-type-name" data-sym="FIND/MAKE-TYPE-NAME" title="(defun defdata::find/make-type-name (defdata::ptexp defdata::m)
  (if (and (defdata::proper-symbolp defdata::ptexp)
           (assoc defdata::ptexp defdata::m))
      defdata::ptexp
      (defdata::to-symbol defdata::ptexp &quot;DEFDATA&quot;)))">find/make-type-name</a> ptexp m))))</pre>
  </div>

<div class="form-block function" id="def-find_2Fmake-predicate-name" data-defines="FIND/MAKE-PREDICATE-NAME" data-references="SYMBOL-PACKAGE-NAME,MAKE-PREDICATE-SYMBOL,PREDICATE-NAME,OR,M,A,TNAME,DEFUN" data-used-by="MAKE-SIG-DEFTHM-BODY,INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES" data-part-name="FIND/MAKE-PREDICATE-NAME" data-part-args="M,A,TNAME" data-part-body="SYMBOL-PACKAGE-NAME,MAKE-PREDICATE-SYMBOL,M,A,TNAME,PREDICATE-NAME,OR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND/MAKE-PREDICATE-NAME">find/make-predicate-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find_2Fmake-predicate-name" data-sym="FIND/MAKE-PREDICATE-NAME" title="(defun defdata::find/make-predicate-name (defdata::tname defdata::a defdata::m)
  (or (defdata::predicate-name defdata::tname defdata::a defdata::m)
      (defdata::make-predicate-symbol defdata::tname
       (defdata::symbol-package-name defdata::tname))))">find/make-predicate-name</a>
  (tname a m)
  (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (predicate-name tname
      a
      m)
    (make-predicate-symbol tname
      (symbol-package-name tname))))</pre>
  </div>

<div class="form-block other" id="form-72" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop find/make-predicate-names
  (tnames a m)
  (for ((tname in tnames))
    (collect (<a class="sym-link local-def" href="#def-find_2Fmake-predicate-name" data-sym="FIND/MAKE-PREDICATE-NAME" title="(defun defdata::find/make-predicate-name (defdata::tname defdata::a defdata::m)
  (or (defdata::predicate-name defdata::tname defdata::a defdata::m)
      (defdata::make-predicate-symbol defdata::tname
       (defdata::symbol-package-name defdata::tname))))">find/make-predicate-name</a> tname
        a
        m))))</pre>
  </div>

<div class="form-block function" id="def-instantiate-poly-sig-events-for-current-types" data-defines="INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES" data-references="PSIG-TEMPL-INSTANTIATION-EVENTS,PAIRLIS$,CONS,DERIVED-PRED->POLY-TEXP-MAP,FIND/MAKE-PREDICATE-NAME,RET-PRED,REMOVE-NAMES,FIND/MAKE-TYPE-NAME,RET-TNAME,FIND/MAKE-PREDICATE-NAMES,ARG-PREDS,REMOVE-NAMES-LST,FIND/MAKE-TYPE-NAMES,ARG-TNAMES,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,M,FIND-MATCHES,TNAME-IA-ALST,SYMBOLP,NULL,WHEN,LIST,APPEND,PICK-DOMINANT-POLY-TYPE-EXPR,ATYPE,B*,IGNORABLE,DECLARE,WRLD,KWD-ALIST,TEMPL,RTYPE,AS,DEFUN" data-part-name="INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES" data-part-args="WRLD,KWD-ALIST,TEMPL,RTYPE,AS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES">instantiate-poly-sig-events-for-current-types</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-instantiate-poly-sig-events-for-current-types" data-sym="INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES" title="(defun defdata::instantiate-poly-sig-events-for-current-types
       (defdata::as defdata::rtype defdata::templ defdata::kwd-alist
        defdata::wrld)
  &quot;limited/linear instantiation of poly signatures for all current types of same shape&quot;
  (declare (ignorable defdata::rtype))
...">instantiate-poly-sig-events-for-current-types</a>
  (as rtype
    templ
    kwd-alist
    wrld)
  <span class="string">"limited/linear instantiation of poly signatures for all current types of same shape"</span>
  (declare (ignorable rtype))
  (b* ((atype (<a class="sym-link local-def" href="#def-pick-dominant-poly-type-expr" data-sym="PICK-DOMINANT-POLY-TYPE-EXPR" title="(defun defdata::pick-dominant-poly-type-expr (defdata::ptypes)
  (defdata::pick-dominant-poly-type-expr1 defdata::ptypes
   (defdata::all-tvars-lst defdata::ptypes) nil))">pick-dominant-poly-type-expr</a> (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> as (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> rtype)))) ((when (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> atype)) nil)
      ((when (symbolp atype)) nil)
      (tname-ia-alst (<a class="sym-link local-def" href="#def-find-matches" data-sym="FIND-MATCHES" title="(defun defdata::find-matches (defdata::ptype defdata::wrld)
  (defdata::find-matches1 defdata::ptype
   (defdata::table-alist &#39;defdata::type-metadata-table defdata::wrld)))">find-matches</a> atype wrld))
      (m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'tvar-metadata-table
            wrld)
          (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
            wrld)))
      (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (arg-tnames (find/make-type-names (remove-names-lst as)
          m))
      (arg-preds (find/make-predicate-names arg-tnames
          a
          m))
      (ret-tname (<a class="sym-link local-def" href="#def-find_2Fmake-type-name" data-sym="FIND/MAKE-TYPE-NAME" title="(defun defdata::find/make-type-name (defdata::ptexp defdata::m)
  (if (and (defdata::proper-symbolp defdata::ptexp)
           (assoc defdata::ptexp defdata::m))
      defdata::ptexp
      (defdata::to-symbol defdata::ptexp &quot;DEFDATA&quot;)))">find/make-type-name</a> (remove-names rtype)
          m))
      (ret-pred (<a class="sym-link local-def" href="#def-find_2Fmake-predicate-name" data-sym="FIND/MAKE-PREDICATE-NAME" title="(defun defdata::find/make-predicate-name (defdata::tname defdata::a defdata::m)
  (or (defdata::predicate-name defdata::tname defdata::a defdata::m)
      (defdata::make-predicate-symbol defdata::tname
       (defdata::symbol-package-name defdata::tname))))">find/make-predicate-name</a> ret-tname
          a
          m))
      (derived-pred-&gt;poly-texp-map (cons (cons ret-pred rtype)
          (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> arg-preds as))))
    (psig-templ-instantiation-events tname-ia-alst
      templ
      derived-pred-&gt;poly-texp-map
      'nil
      kwd-alist
      wrld)))</pre>
  </div>

<div class="form-block other" id="form-74" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop untrans-top-texps
  (nms nexps)
  (for ((nm in nms) (nexp in nexps))
    (collect (untrans-top-texp nm nexp 'nil))))</pre>
  </div>

<div class="form-block function" id="def-make-sig-defthm-body" data-defines="MAKE-SIG-DEFTHM-BODY" data-references="AND,IMPLIES,QUASIQUOTE,PSIG-DEFTHM-BODY,LIST-UP-LISTS,HYPS,DEPENDENT-HYPS,LEN,FIX-INTERN$,NUMBERED-VARS,X1--XK,GET1,PKG,FIND/MAKE-PREDICATE-NAME,RET-PRED,REMOVE-NAMES,FIND/MAKE-TYPE-NAME,RET-TNAME,FIND/MAKE-PREDICATE-NAMES,ARG-PREDS,REMOVE-NAMES-LST,FIND/MAKE-TYPE-NAMES,ARG-TNAMES,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,B*,WRLD,KWD-ALIST,RET-TYPE,ARG-TYPES,NAME,DEFUN" data-used-by="SIG-EVENTS1" data-part-name="MAKE-SIG-DEFTHM-BODY" data-part-args="WRLD,KWD-ALIST,RET-TYPE,ARG-TYPES,NAME" data-part-body="AND,IMPLIES,QUASIQUOTE,PSIG-DEFTHM-BODY,LIST-UP-LISTS,HYPS,DEPENDENT-HYPS,LEN,FIX-INTERN$,NUMBERED-VARS,X1--XK,KWD-ALIST,GET1,PKG,FIND/MAKE-PREDICATE-NAME,RET-PRED,RET-TYPE,REMOVE-NAMES,FIND/MAKE-TYPE-NAME,RET-TNAME,FIND/MAKE-PREDICATE-NAMES,ARG-PREDS,ARG-TYPES,REMOVE-NAMES-LST,FIND/MAKE-TYPE-NAMES,ARG-TNAMES,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,WRLD,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-SIG-DEFTHM-BODY">make-sig-defthm-body</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-sig-defthm-body" data-sym="MAKE-SIG-DEFTHM-BODY" title="(defun defdata::make-sig-defthm-body
       (defdata::name defdata::arg-types defdata::ret-type defdata::kwd-alist
        defdata::wrld)
  (defdata::b*
   ((defdata::m
...">make-sig-defthm-body</a>
  (name arg-types
    ret-type
    kwd-alist
    wrld)
  (b* ((m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'tvar-metadata-table
           wrld)
         (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
           wrld))) (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (arg-tnames (find/make-type-names (remove-names-lst arg-types)
          m))
      (arg-preds (find/make-predicate-names arg-tnames
          a
          m))
      (ret-tname (<a class="sym-link local-def" href="#def-find_2Fmake-type-name" data-sym="FIND/MAKE-TYPE-NAME" title="(defun defdata::find/make-type-name (defdata::ptexp defdata::m)
  (if (and (defdata::proper-symbolp defdata::ptexp)
           (assoc defdata::ptexp defdata::m))
      defdata::ptexp
      (defdata::to-symbol defdata::ptexp &quot;DEFDATA&quot;)))">find/make-type-name</a> (remove-names ret-type)
          m))
      (ret-pred (<a class="sym-link local-def" href="#def-find_2Fmake-predicate-name" data-sym="FIND/MAKE-PREDICATE-NAME" title="(defun defdata::find/make-predicate-name (defdata::tname defdata::a defdata::m)
  (or (defdata::predicate-name defdata::tname defdata::a defdata::m)
      (defdata::make-predicate-symbol defdata::tname
       (defdata::symbol-package-name defdata::tname))))">find/make-predicate-name</a> ret-tname
          a
          m))
      (pkg (get1 <span class="keyword">:current-package</span> kwd-alist))
      (x1--xk (numbered-vars (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> <span class="string">"X"</span> pkg)
          (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> arg-preds)))
      (dependent-hyps (get1 <span class="keyword">:satisfies</span> kwd-alist))
      (hyps (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (list-up-lists arg-preds x1--xk)
          dependent-hyps))
      (psig-defthm-body `(<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> . ,DEFDATA::HYPS)
          ,(LIST DEFDATA::RET-PRED (CONS DEFDATA::NAME DEFDATA::X1--XK)))))
    psig-defthm-body))</pre>
  </div>

<div class="form-block other" id="form-76" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> find-all-instances
    (pat term alists)
    (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (instancep alist)
      (<a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun defdata::one-way-unify (defdata::pat defdata::term)
  (if (and (defdata::pseudo-termp defdata::pat)
           (defdata::pseudo-termp defdata::term))
      (one-way-unify defdata::pat defdata::term)
      (defdata::mv nil nil)))">one-way-unify</a> pat term)
      (let ((alists (if instancep
             (<a class="sym-link system" href="../../../axioms.html#def-add-to-set-equal" data-sym="ADD-TO-SET-EQUAL">add-to-set-equal</a> alist alists)
             alists)))
        (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) alists)
          ((<a class="sym-link system" href="../../../axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term) alists)
          (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (find-all-instances-list pat
              (<a class="sym-link system" href="../../../axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)
              alists))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> find-all-instances-list
    (pat list-of-terms alists)
    (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> list-of-terms) alists)
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (find-all-instances pat
          (car list-of-terms)
          (find-all-instances-list pat
            (cdr list-of-terms)
            alists))))))</pre>
  </div>

<div class="form-block function" id="def-map-find-all-instances-list" data-defines="MAP-FIND-ALL-INSTANCES-LIST" data-references="CONS,CDR,CAR,FIND-ALL-INSTANCES-LIST,INSTANCES,LET,ENDP,IF,XARGS,DECLARE,ACC,LIST-OF-TERMS,PATS,DEFUN" data-used-by="MAKE-SIG-HINT-BODY" data-part-name="MAP-FIND-ALL-INSTANCES-LIST" data-part-args="ACC,LIST-OF-TERMS,PATS" data-part-declare="XARGS,DECLARE" data-part-body="CONS,CDR,MAP-FIND-ALL-INSTANCES-LIST,LIST-OF-TERMS,CAR,FIND-ALL-INSTANCES-LIST,INSTANCES,LET,ACC,PATS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAP-FIND-ALL-INSTANCES-LIST">map-find-all-instances-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-map-find-all-instances-list" data-sym="MAP-FIND-ALL-INSTANCES-LIST" title="(defun defdata::map-find-all-instances-list
       (defdata::pats defdata::list-of-terms defdata::acc)
  (declare (defdata::xargs :mode :program))
  (if (endp defdata::pats)
      defdata::acc
...">map-find-all-instances-list</a>
  (pats list-of-terms acc)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> pats)
    acc
    (let ((instances (find-all-instances-list (car pats)
           list-of-terms
           nil)))
      (if instances
        (<a class="sym-link local-def" href="#def-map-find-all-instances-list" data-sym="MAP-FIND-ALL-INSTANCES-LIST" title="(defun defdata::map-find-all-instances-list
       (defdata::pats defdata::list-of-terms defdata::acc)
  (declare (defdata::xargs :mode :program))
  (if (endp defdata::pats)
      defdata::acc
...">map-find-all-instances-list</a> (cdr pats)
          list-of-terms
          (cons instances acc))
        nil))))</pre>
  </div>

<div class="form-block function" id="def-common-instancesp" data-defines="COMMON-INSTANCESP" data-references="CDR,CAR,MEMBER-EQUAL,OR,CONSP,AND,Y,X,DEFUN" data-part-name="COMMON-INSTANCESP" data-part-args="Y,X" data-part-body="CDR,COMMON-INSTANCESP,Y,CAR,MEMBER-EQUAL,OR,X,CONSP,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMMON-INSTANCESP">common-instancesp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-common-instancesp" data-sym="COMMON-INSTANCESP" title="(defun defdata::common-instancesp (defdata::x defdata::y)
  (and (consp defdata::x)
       (or (defdata::member-equal (car defdata::x) defdata::y)
           (defdata::common-instancesp (cdr defdata::x) defdata::y))))">common-instancesp</a>
  (x y)
  (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp x)
    (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (car x) y)
      (<a class="sym-link local-def" href="#def-common-instancesp" data-sym="COMMON-INSTANCESP" title="(defun defdata::common-instancesp (defdata::x defdata::y)
  (and (consp defdata::x)
       (or (defdata::member-equal (car defdata::x) defdata::y)
           (defdata::common-instancesp (cdr defdata::x) defdata::y))))">common-instancesp</a> (cdr x) y))))</pre>
  </div>

<div class="form-block function" id="def-in-all" data-defines="IN-ALL" data-references="CDR,CAR,MEMBER-EQUAL,AND,ATOM,OR,L,A,DEFUN" data-used-by="COMMON-INSTANCES-LISTP" data-part-name="IN-ALL" data-part-args="L,A" data-part-body="CDR,IN-ALL,CAR,A,MEMBER-EQUAL,AND,L,ATOM,OR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IN-ALL">in-all</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-in-all" data-sym="IN-ALL" title="(defun defdata::in-all (defdata::a defdata::l)
  (or (atom defdata::l)
      (and (defdata::member-equal defdata::a (car defdata::l))
           (defdata::in-all defdata::a (cdr defdata::l)))))">in-all</a>
  (a l)
  (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> l)
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> a (car l))
      (<a class="sym-link local-def" href="#def-in-all" data-sym="IN-ALL" title="(defun defdata::in-all (defdata::a defdata::l)
  (or (atom defdata::l)
      (and (defdata::member-equal defdata::a (car defdata::l))
           (defdata::in-all defdata::a (cdr defdata::l)))))">in-all</a> a (cdr l)))))</pre>
  </div>

<div class="form-block function" id="def-common-instances-listp" data-defines="COMMON-INSTANCES-LISTP" data-references="CDAR,CONS,CAAR,IN-ALL,OR,T,CONSP,CDR,CAR,ATOM,COND,L,DEFUN" data-used-by="MAKE-SIG-HINT-BODY" data-part-name="COMMON-INSTANCES-LISTP" data-part-args="L" data-part-body="CDAR,CONS,COMMON-INSTANCES-LISTP,CAAR,IN-ALL,OR,T,CONSP,CDR,L,CAR,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMMON-INSTANCES-LISTP">common-instances-listp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-common-instances-listp" data-sym="COMMON-INSTANCES-LISTP" title="(defun defdata::common-instances-listp (defdata::l)
  (cond ((atom (car defdata::l)) nil)
        ((atom (cdr defdata::l)) (consp (car defdata::l)))
        (t
         (or (defdata::in-all (caar defdata::l) (cdr defdata::l))
...">common-instances-listp</a>
  (l)
  (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (car l)) nil)
    ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (cdr l)) (consp (car l)))
    (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link local-def" href="#def-in-all" data-sym="IN-ALL" title="(defun defdata::in-all (defdata::a defdata::l)
  (or (atom defdata::l)
      (and (defdata::member-equal defdata::a (car defdata::l))
           (defdata::in-all defdata::a (cdr defdata::l)))))">in-all</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> l) (cdr l))
        (<a class="sym-link local-def" href="#def-common-instances-listp" data-sym="COMMON-INSTANCES-LISTP" title="(defun defdata::common-instances-listp (defdata::l)
  (cond ((atom (car defdata::l)) nil)
        ((atom (cdr defdata::l)) (consp (car defdata::l)))
        (t
         (or (defdata::in-all (caar defdata::l) (cdr defdata::l))
...">common-instances-listp</a> (cons (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> l) (cdr l)))))))</pre>
  </div>

<div class="form-block function" id="def-make-sig-hint-body" data-defines="MAKE-SIG-HINT-BODY" data-references="CURRENT-THEORY,UNION-THEORIES,CONS,COMMON-INSTANCES-LISTP,COMMON-INSTS,MAP-FIND-ALL-INSTANCES-LIST,MAP-INSTANCES,UNLESS,CLAUSE,FIND-ALL-INSTANCES-LIST,INSTANCES-NAME,SIMPLIFY-CLAUSE,FERTILIZE-CLAUSE,HIST,CAR,HISTORY-ENTRY,ACCESS,MEMBER-EQ,STABLE-UNDER-SIMPLIFICATIONP,AND,IF,QUASIQUOTE,PSIG-HINT-BODY,LIST-UP-LISTS,HYPS,DEPENDENT-HYPS,LEN,FIX-INTERN$,NUMBERED-VARS,X1--XK,GET1,PKG,FIND/MAKE-PREDICATE-NAMES,ARG-PREDS,REMOVE-NAMES-LST,FIND/MAKE-TYPE-NAMES,ARG-TNAMES,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,B*,WRLD,KWD-ALIST,POLY-GEN-NAME,ARG-TYPES,NAME,DEFUN" data-used-by="SIG-EVENTS1" data-part-name="MAKE-SIG-HINT-BODY" data-part-args="WRLD,KWD-ALIST,POLY-GEN-NAME,ARG-TYPES,NAME" data-part-body="CURRENT-THEORY,UNION-THEORIES,CONS,COMMON-INSTANCES-LISTP,COMMON-INSTS,MAP-FIND-ALL-INSTANCES-LIST,MAP-INSTANCES,UNLESS,CLAUSE,FIND-ALL-INSTANCES-LIST,INSTANCES-NAME,SIMPLIFY-CLAUSE,FERTILIZE-CLAUSE,HIST,CAR,HISTORY-ENTRY,ACCESS,MEMBER-EQ,STABLE-UNDER-SIMPLIFICATIONP,AND,IF,QUASIQUOTE,PSIG-HINT-BODY,LIST-UP-LISTS,HYPS,DEPENDENT-HYPS,LEN,FIX-INTERN$,NUMBERED-VARS,X1--XK,KWD-ALIST,GET1,PKG,FIND/MAKE-PREDICATE-NAMES,ARG-PREDS,ARG-TYPES,REMOVE-NAMES-LST,FIND/MAKE-TYPE-NAMES,ARG-TNAMES,TYPE-ALIAS-TABLE,A,TYPE-METADATA-TABLE,WRLD,TVAR-METADATA-TABLE,QUOTE,TABLE-ALIST,APPEND,M,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-SIG-HINT-BODY">make-sig-hint-body</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-sig-hint-body" data-sym="MAKE-SIG-HINT-BODY" title="(defun defdata::make-sig-hint-body
       (defdata::name defdata::arg-types defdata::poly-gen-name
        defdata::kwd-alist defdata::wrld)
  (defdata::b*
   ((defdata::m
...">make-sig-hint-body</a>
  (name arg-types
    poly-gen-name
    kwd-alist
    wrld)
  (b* ((m (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'tvar-metadata-table
           wrld)
         (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table
           wrld))) (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table
          wrld))
      (arg-tnames (find/make-type-names (remove-names-lst arg-types)
          m))
      (arg-preds (find/make-predicate-names arg-tnames
          a
          m))
      (pkg (get1 <span class="keyword">:current-package</span> kwd-alist))
      (x1--xk (numbered-vars (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> <span class="string">"X"</span> pkg)
          (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> arg-preds)))
      (dependent-hyps (get1 <span class="keyword">:satisfies</span> kwd-alist))
      (hyps (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (list-up-lists arg-preds x1--xk)
          dependent-hyps))
      (psig-hint-body `(if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
            (<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> history-entry (car hist) <span class="keyword">:processor</span>)
              '(fertilize-clause simplify-clause))
            (b* ((instances-name (find-all-instances-list '(,DEFDATA::NAME ,@DEFDATA::X1--XK)
                   clause
                   nil)) ((unless instances-name) nil)
                (map-instances (<a class="sym-link local-def" href="#def-map-find-all-instances-list" data-sym="MAP-FIND-ALL-INSTANCES-LIST" title="(defun defdata::map-find-all-instances-list
       (defdata::pats defdata::list-of-terms defdata::acc)
  (declare (defdata::xargs :mode :program))
  (if (endp defdata::pats)
      defdata::acc
...">map-find-all-instances-list</a> ',DEFDATA::HYPS
                    clause
                    nil))
                ((unless map-instances) nil)
                (common-insts (<a class="sym-link local-def" href="#def-common-instances-listp" data-sym="COMMON-INSTANCES-LISTP" title="(defun defdata::common-instances-listp (defdata::l)
  (cond ((atom (car defdata::l)) nil)
        ((atom (cdr defdata::l)) (consp (car defdata::l)))
        (t
         (or (defdata::in-all (caar defdata::l) (cdr defdata::l))
...">common-instances-listp</a> (cons instances-name map-instances))))
              common-insts))
          '(<span class="keyword">:in-theory</span> (union-theories (current-theory <span class="keyword">:here</span>)
              '(,DEFDATA::POLY-GEN-NAME)))
          nil)))
    psig-hint-body))</pre>
  </div>

<div class="form-block function" id="def-sig-events1" data-defines="SIG-EVENTS1" data-references="ADD-DEFAULT-HINTS!,POLY-COMPUTED-HINTS,XARGS,IGNORABLE,DECLARE,PSPV,HIST,ID,STABLE-UNDER-SIMPLIFICATIONP,CLAUSE,POLY-HINTS-DEFUN,DEFTHMD,POLY-GEN-TEMPLATE,_FUN-INST-ALIST_,_DISABLED-RUNES_,_ENABLED-RUNES_,E/D,DEFTHM,QUASIQUOTE,POLY-INST-TEMPLATE,MAKE-SIG-HINT-BODY,PSIG-HINT-BODY,MAKE-SIG-DEFTHM-BODY,PSIG-DEFTHM-BODY,POLY-HINT-NAME,POLY-GEN-NAME,POLY-INST-NAME,PSIG-NAME,-,S+,IF,NAME-PRE,QUOTE,UNTRANS-TOP-TEXP,P-RET-TYPE,UNTRANS-TOP-TEXPS,P-ARG-TYPES,LIST,PARSE-TOP-TEXP,N-RET-TYPE,PARSE-TOP-TEXPS,N-ARG-TYPES,MAKE-LIST,STARS,FIX-INTERN$,STAR,GET1,PKG,LEN,ARITY,SUBLIS-VAR,RETURN-TYPE1,*TVAR-TYPENAME-ALIST*,SUBLIS-VAR-LST,ARG-TYPE-LIST1,B*,WRLD,CTX,KWD-ALIST,RET-TYPE,ARG-TYPES,SUFFIX,NAME,DEFUN" data-part-name="SIG-EVENTS1" data-part-args="WRLD,CTX,KWD-ALIST,RET-TYPE,ARG-TYPES,SUFFIX,NAME" data-part-body="ADD-DEFAULT-HINTS!,POLY-COMPUTED-HINTS,XARGS,IGNORABLE,DECLARE,PSPV,HIST,ID,STABLE-UNDER-SIMPLIFICATIONP,CLAUSE,DEFUN,POLY-HINTS-DEFUN,DEFTHMD,POLY-GEN-TEMPLATE,_FUN-INST-ALIST_,_DISABLED-RUNES_,_ENABLED-RUNES_,E/D,DEFTHM,QUASIQUOTE,POLY-INST-TEMPLATE,MAKE-SIG-HINT-BODY,PSIG-HINT-BODY,MAKE-SIG-DEFTHM-BODY,PSIG-DEFTHM-BODY,POLY-HINT-NAME,POLY-GEN-NAME,POLY-INST-NAME,PSIG-NAME,-,NAME,S+,SUFFIX,IF,NAME-PRE,QUOTE,UNTRANS-TOP-TEXP,P-RET-TYPE,UNTRANS-TOP-TEXPS,P-ARG-TYPES,LIST,PARSE-TOP-TEXP,N-RET-TYPE,WRLD,CTX,PARSE-TOP-TEXPS,N-ARG-TYPES,MAKE-LIST,STARS,FIX-INTERN$,STAR,KWD-ALIST,GET1,PKG,LEN,ARITY,RET-TYPE,SUBLIS-VAR,RETURN-TYPE1,ARG-TYPES,*TVAR-TYPENAME-ALIST*,SUBLIS-VAR-LST,ARG-TYPE-LIST1,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIG-EVENTS1">sig-events1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sig-events1" data-sym="SIG-EVENTS1" title="(defun defdata::sig-events1
       (defdata::name defdata::suffix defdata::arg-types defdata::ret-type
        defdata::kwd-alist defdata::ctx defdata::wrld)
  (defdata::b*
   ((defdata::arg-type-list1
...">sig-events1</a>
  (name suffix
    arg-types
    ret-type
    kwd-alist
    ctx
    wrld)
  (b* ((arg-type-list1 (<a class="sym-link system" href="../../../basis-b.html#def-sublis-var-lst" data-sym="SUBLIS-VAR-LST">sublis-var-lst</a> *tvar-typename-alist*
         arg-types)) (return-type1 (<a class="sym-link system" href="../../../basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> *tvar-typename-alist*
          ret-type))
      (<a class="sym-link system" href="../../../basis-b.html#def-arity" data-sym="ARITY">arity</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> arg-types))
      (pkg (get1 <span class="keyword">:current-package</span> kwd-alist))
      (star (<a class="sym-link system" href="../../../defthm.html#def-fix-intern_24" data-sym="FIX-INTERN$">fix-intern$</a> <span class="string">"*"</span> pkg))
      (stars (<a class="sym-link system" href="../../../axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> <a class="sym-link system" href="../../../basis-b.html#def-arity" data-sym="ARITY">arity</a> <span class="keyword">:initial-element</span> star))
      (n-arg-types (parse-top-texps stars
          arg-type-list1
          ctx
          wrld))
      (n-ret-type (parse-top-texp star
          return-type1
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> star)
          ctx
          wrld))
      (p-arg-types (untrans-top-texps stars
          n-arg-types))
      (p-ret-type (untrans-top-texp star
          n-ret-type
          'nil))
      (name-pre (if suffix
          (s+ name
            '<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a>
            suffix
            <span class="keyword">:pkg</span> pkg)
          name))
      (psig-name (s+ name-pre
          <span class="string">"-POLYMORPHIC-SIG"</span>
          <span class="keyword">:pkg</span> pkg))
      (poly-inst-name (s+ name-pre
          <span class="string">"-_PRED_-SIG"</span>
          <span class="keyword">:pkg</span> pkg))
      (poly-gen-name (s+ name-pre
          <span class="string">"-_PRED_-GENRULE-SIG"</span>
          <span class="keyword">:pkg</span> pkg))
      (poly-hint-name (s+ name-pre
          <span class="string">"-_PRED_-GENRULE-HINT-SIG"</span>
          <span class="keyword">:pkg</span> pkg))
      (psig-defthm-body (<a class="sym-link local-def" href="#def-make-sig-defthm-body" data-sym="MAKE-SIG-DEFTHM-BODY" title="(defun defdata::make-sig-defthm-body
       (defdata::name defdata::arg-types defdata::ret-type defdata::kwd-alist
        defdata::wrld)
  (defdata::b*
   ((defdata::m
...">make-sig-defthm-body</a> name
          p-arg-types
          p-ret-type
          kwd-alist
          wrld))
      (psig-hint-body (<a class="sym-link local-def" href="#def-make-sig-hint-body" data-sym="MAKE-SIG-HINT-BODY" title="(defun defdata::make-sig-hint-body
       (defdata::name defdata::arg-types defdata::poly-gen-name
        defdata::kwd-alist defdata::wrld)
  (defdata::b*
   ((defdata::m
...">make-sig-hint-body</a> name
          p-arg-types
          poly-gen-name
          kwd-alist
          wrld))
      (poly-inst-template `((<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,DEFDATA::POLY-INST-NAME
           ,DEFDATA::PSIG-DEFTHM-BODY
           <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (_enabled-runes_)
                (,DEFDATA::NAME _disabled-runes_))
              <span class="keyword">:use</span> ((<span class="keyword">:functional-instance</span> ,DEFDATA::PSIG-NAME
                 _fun-inst-alist_))))
           <span class="keyword">:rule-classes</span> ,(DEFDATA::GET1 :RULE-CLASSES DEFDATA::KWD-ALIST &#39;(:REWRITE)))))
      (poly-gen-template `((<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> ,DEFDATA::POLY-GEN-NAME
           ,DEFDATA::PSIG-DEFTHM-BODY
           <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:by</span> ,DEFDATA::POLY-INST-NAME))
           <span class="keyword">:rule-classes</span> <span class="keyword">:generalize</span>)))
      (poly-hints-defun `((<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ,DEFDATA::POLY-HINT-NAME
           (clause stable-under-simplificationp
             id
             hist
             pspv
             ctx)
           (declare (ignorable id
               hist
               pspv
               ctx))
           (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
           ,DEFDATA::PSIG-HINT-BODY)))
      (poly-computed-hints `((<a class="sym-link system" href="../../../axioms.html#def-add-default-hints_21" data-sym="ADD-DEFAULT-HINTS!">add-default-hints!</a> '((,DEFDATA::POLY-HINT-NAME clause
              stable-under-simplificationp
              id
              hist
              pspv
              ctx))))))
    `(,@(DEFDATA::MAKE-SIG-TVAR-SUPPORT-EVENTS
   (CONS DEFDATA::P-RET-TYPE DEFDATA::P-ARG-TYPES) DEFDATA::CTX DEFDATA::PKG
   DEFDATA::WRLD) (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,DEFDATA::PSIG-NAME
        ,DEFDATA::PSIG-DEFTHM-BODY
        <span class="keyword">:hints</span> ,(OR (DEFDATA::GET1 :HINTS DEFDATA::KWD-ALIST)
     `((&quot;Goal&quot; :IN-THEORY (DEFDATA::ENABLE ,DEFDATA::NAME))))
        <span class="keyword">:rule-classes</span> ,(DEFDATA::GET1 :GEN-RULE-CLASSES DEFDATA::KWD-ALIST &#39;(:REWRITE)))
      ,@(DEFDATA::REGISTER-POLY-SIG-EVENTS DEFDATA::NAME DEFDATA::P-ARG-TYPES
   DEFDATA::P-RET-TYPE DEFDATA::POLY-INST-TEMPLATE DEFDATA::WRLD)
      ,@(DEFDATA::INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES DEFDATA::P-ARG-TYPES
   DEFDATA::P-RET-TYPE DEFDATA::POLY-INST-TEMPLATE DEFDATA::KWD-ALIST
   DEFDATA::WRLD)
      ,@(DEFDATA::INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES DEFDATA::P-ARG-TYPES
   DEFDATA::P-RET-TYPE DEFDATA::POLY-GEN-TEMPLATE DEFDATA::KWD-ALIST
   DEFDATA::WRLD)
      ,@(DEFDATA::INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES DEFDATA::P-ARG-TYPES
   DEFDATA::P-RET-TYPE DEFDATA::POLY-HINTS-DEFUN DEFDATA::KWD-ALIST
   DEFDATA::WRLD)
      ,@(DEFDATA::INSTANTIATE-POLY-SIG-EVENTS-FOR-CURRENT-TYPES DEFDATA::P-ARG-TYPES
   DEFDATA::P-RET-TYPE DEFDATA::POLY-COMPUTED-HINTS DEFDATA::KWD-ALIST
   DEFDATA::WRLD))))</pre>
  </div>

<div class="form-block function" id="def-sig-events" data-defines="SIG-EVENTS" data-references="LOGIC,ENCAPSULATE,FORM,COMMENT,ERROR,SUMMARY,WITH-OUTPUT,QUASIQUOTE,TESTING-ENABLED,LOCAL,AND,LOCAL-TESTING-DOWNGRADED-FORM,ACL2S-DEFAULTS,QUOTE,LOGICAL-NAMEP,CGENP,KWD-ALIST,RET-TYPE,ARG-TYPES,SUFFIX,NAME,LIST,B*,WRLD,PARSED,DEFUN" data-used-by="SIG" data-part-name="SIG-EVENTS" data-part-args="WRLD,PARSED" data-part-body="LOGIC,ENCAPSULATE,FORM,COMMENT,ERROR,SUMMARY,WITH-OUTPUT,QUASIQUOTE,TESTING-ENABLED,LOCAL,AND,LOCAL-TESTING-DOWNGRADED-FORM,WRLD,ACL2S-DEFAULTS,QUOTE,LOGICAL-NAMEP,CGENP,PARSED,KWD-ALIST,RET-TYPE,ARG-TYPES,SUFFIX,NAME,LIST,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIG-EVENTS">sig-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sig-events" data-sym="SIG-EVENTS" title="(defun defdata::sig-events (defdata::parsed defdata::wrld)
  (defdata::b*
   (((list defdata::name defdata::suffix defdata::arg-types defdata::ret-type
           defdata::kwd-alist)
     defdata::parsed)
...">sig-events</a>
  (parsed wrld)
  (b* (((<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> name
        suffix
        arg-types
        ret-type
        kwd-alist) parsed) (cgenp (<a class="sym-link system" href="../../../history-management.html#def-logical-namep" data-sym="LOGICAL-NAMEP">logical-namep</a> 'acl2s-defaults wrld))
      (local-testing-downgraded-form (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> cgenp
          '((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (acl2s-defaults <span class="keyword">:set</span> testing-enabled nil))))))
    `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> <span class="keyword">:on</span> (summary error <a class="sym-link system" href="../../../rewrite.html#def-comment" data-sym="COMMENT">comment</a>)
      <span class="keyword">:summary-off</span> (<span class="keyword">:other-than</span> form)
      (<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
        (<a class="sym-link system" href="../../../axioms.html#def-logic" data-sym="LOGIC">logic</a>)
        ,@DEFDATA::LOCAL-TESTING-DOWNGRADED-FORM
        ,@(DEFDATA::SIG-EVENTS1 DEFDATA::NAME DEFDATA::SUFFIX DEFDATA::ARG-TYPES
   DEFDATA::RET-TYPE DEFDATA::KWD-ALIST &#39;DEFDATA::SIG DEFDATA::WRLD)))))</pre>
  </div>

<div class="form-block macro" id="def-sig" data-defines="SIG" data-references="W,STATE,CURRENT-PACKAGE,QUOTE,PARSE-SIG,SIG-EVENTS,MAKE-EVENT,T,WITH-OUTPUT,QUASIQUOTE,CADR,AND,MEMBER,LST,LET,VERBOSE,B*,ARGS,&REST,DEFMACRO" data-used-by="PARSE-SIG" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SIG">sig</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-sig" data-sym="SIG" title="(defmacro defdata::sig (&amp;rest defdata::args)
  (defdata::b*
   ((defdata::verbose
     (let ((defdata::lst (member :verbose defdata::args)))
       (and defdata::lst (cadr defdata::lst)))))
...">sig</a>
  (&amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (b* ((verbose (let ((lst (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:verbose</span> <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)))
         (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> lst (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lst)))))
    `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT DEFDATA::VERBOSE) &#39;(:OFF :ALL :ON DEFDATA::COMMENT))
      <span class="keyword">:gag-mode</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:stack</span> <span class="keyword">:push</span> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-sig-events" data-sym="SIG-EVENTS" title="(defun defdata::sig-events (defdata::parsed defdata::wrld)
  (defdata::b*
   (((list defdata::name defdata::suffix defdata::arg-types defdata::ret-type
           defdata::kwd-alist)
     defdata::parsed)
...">sig-events</a> (<a class="sym-link local-def" href="#def-parse-sig" data-sym="PARSE-SIG" title="(defun defdata::parse-sig
       (defdata::args defdata::curr-pkg defdata::ctx defdata::wrld)
  (declare (ignorable defdata::wrld))
  (defdata::b*
   (((defdata::mv defdata::sig defdata::kwd-val-list)
...">parse-sig</a> ',DEFDATA::ARGS
            (<a class="sym-link system" href="../../../axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
            '<a class="sym-link local-def" href="#def-sig" data-sym="SIG" title="(defmacro defdata::sig (&amp;rest defdata::args)
  (defdata::b*
   ((defdata::verbose
     (let ((defdata::lst (member :verbose defdata::args)))
       (and defdata::lst (cadr defdata::lst)))))
...">sig</a>
            (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))
          (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>