<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>infer-enum-shape - ACL2 Book</title>
  <meta property="name" content="infer-enum-shape">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">infer-enum-shape</h1>
    <div class="path"><a href="infer-enum-shape.lisp" class="source-link">books/acl2s/cgen/infer-enum-shape</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"CGEN"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="basis.html" title="Open basis">"basis"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="type.html" title="Open type">"type"</a>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="simple-graph-array.html" title="Open simple-graph-array">"simple-graph-array"</a>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="cgen-state.html" title="Open cgen-state">"cgen-state"</a>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../basis-a.html#def-defrec" data-sym="DEFREC">defrec</a> cs%
  (defdata-type spilled-types
    eq-constraint
    range
    member-constraint
    additional-constraints)
  nil)</pre>
  </div>

<div class="form-block function" id="def-cs_25-p" data-defines="CS%-P" data-references="PSEUDO-TERM-LISTP,TAU-INTERVALP,EMPTY-EQ-CONSTRAINT,EQ,PSEUDO-TERMP,OR,POSSIBLE-DEFDATA-TYPE-LIST-P,POSSIBLE-DEFDATA-TYPE-P,AND,AC,MEM,INT,EQC,ST,DT,CS%,QUOTE,CASE-MATCH,T,XARGS,DECLARE,V,DEFUN" data-used-by="is (symbol . cs%)" data-part-name="CS%-P" data-part-args="V" data-part-declare="T,XARGS,DECLARE" data-part-body="PSEUDO-TERM-LISTP,TAU-INTERVALP,EMPTY-EQ-CONSTRAINT,EQ,PSEUDO-TERMP,OR,POSSIBLE-DEFDATA-TYPE-LIST-P,POSSIBLE-DEFDATA-TYPE-P,AND,AC,MEM,INT,EQC,ST,DT,CS%,QUOTE,V,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CS%-P">cs%-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cs_25-p" data-sym="CS%-P" title="(defun cgen::cs%-p (cgen::v)
  (declare (cgen::xargs :guard t))
  (cgen::case-match cgen::v
   ((&#39;cgen::cs% cgen::dt cgen::st cgen::eqc cgen::int cgen::mem cgen::ac)
    (and (cgen::possible-defdata-type-p cgen::dt)
...">cs%-p</a>
  (v)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> v
    (('cs% dt
       st
       eqc
       int
       mem
       ac) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (possible-defdata-type-p dt)
        (possible-defdata-type-list-p st)
        (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> eqc)
          (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> 'empty-eq-constraint eqc))
        (<a class="sym-link system" href="../../../axioms.html#def-tau-intervalp" data-sym="TAU-INTERVALP">tau-intervalp</a> int)
        (<a class="sym-link system" href="../../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> mem)
        (pseudo-term-listp ac)))))</pre>
  </div>

<div class="form-block function" id="def-is_20_28symbol_20_2E_20cs_25_29" data-defines="is (symbol . cs%)" data-references="CS%-P,SYMBOLP,AND,Y,X,CASE-MATCH,T,XARGS,DECLARE,V,DEFUN" data-used-by="SYMBOL-CS%-ALISTP" data-part-name="is (symbol . cs%)" data-part-args="V" data-part-declare="T,XARGS,DECLARE" data-part-body="CS%-P,SYMBOLP,AND,Y,X,V,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="is (symbol . cs%)">|is (symbol . cs%)|</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-is_20_28symbol_20_2E_20cs_25_29" data-sym="is (symbol . cs%)" title="(defun cgen::|is (symbol . cs%)| (cgen::v)
  (declare (cgen::xargs :guard t))
  (cgen::case-match cgen::v
   ((cgen::x . cgen::y) (and (symbolp cgen::x) (cgen::cs%-p cgen::y)))))">|is (symbol . cs%)|</a>
  (v)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> v
    ((x . y) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (symbolp x) (<a class="sym-link local-def" href="#def-cs_25-p" data-sym="CS%-P" title="(defun cgen::cs%-p (cgen::v)
  (declare (cgen::xargs :guard t))
  (cgen::case-match cgen::v
   ((&#39;cgen::cs% cgen::dt cgen::st cgen::eqc cgen::int cgen::mem cgen::ac)
    (and (cgen::possible-defdata-type-p cgen::dt)
...">cs%-p</a> y)))))</pre>
  </div>

<div class="form-block function" id="def-symbol-cs_25-alistp" data-defines="SYMBOL-CS%-ALISTP" data-references="CDR,CAR,is (symbol . cs%),AND,CONSP,IF,T,XARGS,DECLARE,VS,DEFUN" data-part-name="SYMBOL-CS%-ALISTP" data-part-args="VS" data-part-declare="T,XARGS,DECLARE" data-part-body="CDR,SYMBOL-CS%-ALISTP,CAR,is (symbol . cs%),AND,VS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SYMBOL-CS%-ALISTP">symbol-cs%-alistp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-symbol-cs_25-alistp" data-sym="SYMBOL-CS%-ALISTP" title="(defun cgen::symbol-cs%-alistp (cgen::vs)
  (declare (cgen::xargs :guard t))
  (if (consp cgen::vs)
      (and (cgen::|is (symbol . cs%)| (car cgen::vs))
           (cgen::symbol-cs%-alistp (cdr cgen::vs)))">symbol-cs%-alistp</a>
  (vs)
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (if (consp vs)
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-is_20_28symbol_20_2E_20cs_25_29" data-sym="is (symbol . cs%)" title="(defun cgen::|is (symbol . cs%)| (cgen::v)
  (declare (cgen::xargs :guard t))
  (cgen::case-match cgen::v
   ((cgen::x . cgen::y) (and (symbolp cgen::x) (cgen::cs%-p cgen::y)))))">|is (symbol . cs%)|</a> (car vs))
      (<a class="sym-link local-def" href="#def-symbol-cs_25-alistp" data-sym="SYMBOL-CS%-ALISTP" title="(defun cgen::symbol-cs%-alistp (cgen::vs)
  (declare (cgen::xargs :guard t))
  (if (consp cgen::vs)
      (and (cgen::|is (symbol . cs%)| (car cgen::vs))
           (cgen::symbol-cs%-alistp (cdr cgen::vs)))">symbol-cs%-alistp</a> (cdr vs)))
    nil))</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def put-additional-constraints.
  (vs term v-cs%-alst.)
  (decl <span class="keyword">:sig</span> ((symbol-list pseudo-term symbol-cs%-alist) -&gt;
      symbol-cs%-alist)
    <span class="keyword">:doc</span> <span class="string">"put term in alist for all keys in vs"</span>)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> vs)
    v-cs%-alst.
    (b* (((cons v cs%) (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car vs) v-cs%-alst.)) (cs% (<a class="sym-link system" href="../../../basis-a.html#def-change" data-sym="CHANGE">change</a> cs%
            additional-constraints
            (cons term
              (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% additional-constraints)))))
      (put-additional-constraints. (cdr vs)
        term
        (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> v cs% v-cs%-alst.)))))</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def insert-before-key
  (key entry alist)
  (decl <span class="keyword">:sig</span> ((symbol entry symbol-alist) -&gt;
      symbol-alist)
    <span class="keyword">:doc</span> <span class="string">"insert entry before key in alist"</span>)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> alist)
    nil
    (if (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> key (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> alist))
      (cons entry alist)
      (cons (car alist)
        (insert-before-key key
          entry
          (cdr alist))))))</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def put-var-eq-constraint.
  (v1 v2 vl wrld v-cs%-alst.)
  (decl <span class="keyword">:sig</span> ((symbol symbol
       vl
       plist-world
       symbol-cs%-alist) -&gt;
      symbol-cs%-alist)
    <span class="keyword">:doc</span> <span class="string">"put variable equality constraint in alist for key v"</span>)
  (declare (xargs <span class="keyword">:verify-guards</span> nil))
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> v1 v2)) v-cs%-alst.) ((cons &amp; cs1%) (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> v1 v-cs%-alst.))
      ((cons &amp; cs2%) (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> v2 v-cs%-alst.))
      (dt1 (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% cs1% <span class="keyword">:defdata-type</span>))
      (dt2 (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% cs2% <span class="keyword">:defdata-type</span>))
      (m (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table wrld))
      (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table wrld))
      (p1 (predicate-name dt1 a m))
      (p2 (predicate-name dt2 a m))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> v other-v cs% other-cs%) (if (subtype-p p2 p1 wrld)
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> v1 v2 cs1% cs2%)
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> v2 v1 cs2% cs1%)))
      (eqc (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% cs% <span class="keyword">:eq-constraint</span>))
      (other-eqc (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% other-cs% <span class="keyword">:eq-constraint</span>))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> other-v eqc)) v-cs%-alst.)
      ((when (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> v other-eqc)) v-cs%-alst.)
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (verbose-stats-flag vl)
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> 'empty-eq-constraint eqc)))
          <span class="string">"CEgen/Note: Overwriting (variable) eq-constraint for ~x0 with ~x1~|"</span>
          v
          other-v))
      (cs% (<a class="sym-link system" href="../../../basis-a.html#def-change" data-sym="CHANGE">change</a> cs% eq-constraint other-v))
      (v-cs%-alst. (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> v cs% v-cs%-alst.)))
    (insert-before-key v
      (cons other-v other-cs%)
      (<a class="sym-link system" href="../../../axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> other-v v-cs%-alst.))))</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def put-eq-constraint.
  (v term vl v-cs%-alst.)
  (decl <span class="keyword">:sig</span> ((symbol pseudo-term vl symbol-cs%-alist) -&gt;
      symbol-cs%-alist)
    <span class="keyword">:doc</span> <span class="string">"put eq-constraint term in alist for key v"</span>)
  (b* (((cons &amp; cs%) (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> v v-cs%-alst.)) (eqc (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% eq-constraint))
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (verbose-stats-flag vl)
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> 'empty-eq-constraint eqc)))
          <span class="string">"CEgen/Note: Overwriting eq-constraint for ~x0 with ~x1~|"</span>
          v
          term))
      (cs% (<a class="sym-link system" href="../../../basis-a.html#def-change" data-sym="CHANGE">change</a> cs% eq-constraint term)))
    (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> v cs% v-cs%-alst.)))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def put-member-constraint.
  (v term vl v-cs%-alst.)
  (decl <span class="keyword">:sig</span> ((symbol pseudo-term vl symbol-cs%-alist) -&gt;
      symbol-cs%-alist)
    <span class="keyword">:doc</span> <span class="string">"put member-constraint term in alist for key v"</span>)
  (b* (((cons &amp; cs%) (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> v v-cs%-alst.)) (memc (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% member-constraint))
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (verbose-stats-flag vl)
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal 'empty-mem-constraint memc)))
          <span class="string">"CEgen/Note: Overwriting member-constraint for ~x0 with ~x1~|"</span>
          v
          term))
      (cs% (<a class="sym-link system" href="../../../basis-a.html#def-change" data-sym="CHANGE">change</a> cs% member-constraint term)))
    (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> v cs% v-cs%-alst.)))</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def put-defdata-type.
  (v typ vl v-cs%-alst.)
  (decl <span class="keyword">:sig</span> ((symbol possible-defdata-type-p
       fixnum
       symbol-cs%-alist) -&gt;
      symbol-cs%-alist)
    <span class="keyword">:doc</span> <span class="string">"put defdata type typ in alist for key v"</span>)
  (b* (((cons &amp; cs%) (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> v v-cs%-alst.)) (dt (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% defdata-type))
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (verbose-stats-flag vl)
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> 'all dt)))
          <span class="string">"CEgen/Note: Overwriting defdata type for ~x0. ~x1 -&gt; ~x2~|"</span>
          v
          dt
          typ))
      (cs% (<a class="sym-link system" href="../../../basis-a.html#def-change" data-sym="CHANGE">change</a> cs% defdata-type typ)))
    (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> v cs% v-cs%-alst.)))</pre>
  </div>

<div class="form-block function" id="def-process-return-last" data-defines="PROCESS-RETURN-LAST" data-references="&,LAST,CAR,X,RETURN-LAST,QUOTE,CASE-MATCH,PSEUDO-TERMP,XARGS,DECLARE,TERM,DEFUN" data-part-name="PROCESS-RETURN-LAST" data-part-args="TERM" data-part-declare="TERM,PSEUDO-TERMP,XARGS,DECLARE" data-part-body="&,LAST,CAR,PROCESS-RETURN-LAST,X,RETURN-LAST,QUOTE,TERM,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROCESS-RETURN-LAST">process-return-last</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-process-return-last" data-sym="PROCESS-RETURN-LAST" title="(defun cgen::process-return-last (cgen::term)
  (declare (cgen::xargs :mode :logic :guard (cgen::pseudo-termp cgen::term)))
  (cgen::case-match cgen::term
   ((&#39;cgen::return-last . cgen::x)
    (cgen::process-return-last (car (last cgen::x))))">process-return-last</a>
  (term)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:logic</span> <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-pseudo-termp" data-sym="PSEUDO-TERMP">pseudo-termp</a> term)))
  (<a class="sym-link system" href="../../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
    (('<a class="sym-link system" href="../../../axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a> . x) (<a class="sym-link local-def" href="#def-process-return-last" data-sym="PROCESS-RETURN-LAST" title="(defun cgen::process-return-last (cgen::term)
  (declare (cgen::xargs :mode :logic :guard (cgen::pseudo-termp cgen::term)))
  (cgen::case-match cgen::term
   ((&#39;cgen::return-last . cgen::x)
    (cgen::process-return-last (car (last cgen::x))))">process-return-last</a> (car (<a class="sym-link system" href="../../../axioms.html#def-last" data-sym="LAST">last</a> x))))
    (&amp; term)))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defs (v-cs%-alist-from-term. (term vl wrld ans.)
    (decl <span class="keyword">:sig</span> ((pseudo-term fixnum
         plist-world
         symbol-cs%-alist) -&gt;
        symbol-cs%-alist)
      <span class="keyword">:doc</span> <span class="string">"helper to collect-constraints"</span>)
    (declare (xargs <span class="keyword">:verify-guards</span> nil))
    (f* ((add-constraints... nil
         (put-additional-constraints. fvars
           term
           ans.)) (add-eq/mem-constraint... (t1)
          (if (membership-relationp r wrld)
            (put-member-constraint. x
              t1
              vl
              ans.)
            (add-eq-constraint... t1)))
        (add-eq-constraint... (t1)
          (if (<a class="sym-link system" href="../../../basis-b.html#def-equivalence-relationp" data-sym="EQUIVALENCE-RELATIONP">equivalence-relationp</a> r wrld)
            (if (symbolp t1)
              (put-var-eq-constraint. x
                t1
                vl
                wrld
                ans.)
              (put-eq-constraint. x
                t1
                vl
                ans.))
            (add-constraints...))))
      (b* ((fvars (<a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> term)))
        (<a class="sym-link system" href="../../../basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
          (('quote c) (declare (ignore c)) ans.)
          ((p (f . &amp;)) (declare (ignore p f))
            (add-constraints...))
          (('<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x) (put-eq-constraint. x ''nil vl ans.))
          ((p x) (declare (ignore p x))
            (b* ((term (expand-lambda term)) (term (remove-guard-holders-weak term <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
                ((<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> p x) term)
                (tname (is-type-predicate p wrld))
                ((cons &amp; cs%) (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> x ans.))
                (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (system-debug-flag vl)
                    <span class="string">"~| x: ~x0, ans.: ~x1, cs%: ~x2, P: ~x3, tname: ~x4~|"</span>
                    x
                    ans.
                    cs%
                    p
                    tname))
                (curr-typ (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% defdata-type))
                (smaller-typ (meet tname curr-typ vl wrld)))
              (if tname
                (if (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> smaller-typ curr-typ))
                  (put-defdata-type. x
                    smaller-typ
                    vl
                    ans.)
                  ans.)
                (add-constraints...))))
          ((r (f . &amp;) (g . &amp;)) (declare (ignore r f g))
            (add-constraints...))
          ((r x ('quote c)) (add-eq/mem-constraint... (<a class="sym-link system" href="../../../axioms.html#def-kwote" data-sym="KWOTE">kwote</a> c)))
          ((r ('quote c) x) (add-eq-constraint... (<a class="sym-link system" href="../../../axioms.html#def-kwote" data-sym="KWOTE">kwote</a> c)))
          ((r x (f . <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)) (add-eq/mem-constraint... (<a class="sym-link system" href="../../../basis-b.html#def-cons-term" data-sym="CONS-TERM">cons-term</a> f <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)))
          ((r (f . <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>) x) (add-eq-constraint... (<a class="sym-link system" href="../../../basis-b.html#def-cons-term" data-sym="CONS-TERM">cons-term</a> f <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)))
          ((r x y) (add-eq/mem-constraint... y))
          (&amp; (add-constraints...)))))))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def v-cs%-alist-from-terms.
  (terms vl wrld ans.)
  (decl <span class="keyword">:sig</span> ((pseudo-term-listp fixnum
       <a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a>
       symbol-cs%-alist) -&gt;
      symbol-cs%-alist)
    <span class="keyword">:doc</span> <span class="string">"helper to collect-constraints%"</span>)
  (declare (xargs <span class="keyword">:verify-guards</span> nil))
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> terms)
    ans.
    (v-cs%-alist-from-terms. (cdr terms)
      vl
      wrld
      (v-cs%-alist-from-term. (car terms)
        vl
        wrld
        ans.))))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def put-range-constraint.
  (v int v-cs%-alst.)
  (decl <span class="keyword">:sig</span> ((symbolp <a class="sym-link system" href="../../../axioms.html#def-tau-intervalp" data-sym="TAU-INTERVALP">tau-intervalp</a> <a class="sym-link local-def" href="#def-symbol-cs_25-alistp" data-sym="SYMBOL-CS%-ALISTP" title="(defun cgen::symbol-cs%-alistp (cgen::vs)
  (declare (cgen::xargs :guard t))
  (if (consp cgen::vs)
      (and (cgen::|is (symbol . cs%)| (car cgen::vs))
           (cgen::symbol-cs%-alistp (cdr cgen::vs)))">symbol-cs%-alistp</a>) -&gt;
      <a class="sym-link local-def" href="#def-symbol-cs_25-alistp" data-sym="SYMBOL-CS%-ALISTP" title="(defun cgen::symbol-cs%-alistp (cgen::vs)
  (declare (cgen::xargs :guard t))
  (if (consp cgen::vs)
      (and (cgen::|is (symbol . cs%)| (car cgen::vs))
           (cgen::symbol-cs%-alistp (cdr cgen::vs)))">symbol-cs%-alistp</a>)
    <span class="keyword">:doc</span> <span class="string">"put interval int in alist for key v"</span>)
  (b* (((cons &amp; cs%) (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> v v-cs%-alst.)) (cs% (<a class="sym-link system" href="../../../basis-a.html#def-change" data-sym="CHANGE">change</a> cs% range int)))
    (<a class="sym-link system" href="../../../axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> v cs% v-cs%-alst.)))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def range-is-alias-p
  (interval type wrld)
  (decl <span class="keyword">:sig</span> ((<a class="sym-link local-def" href="#def-non-empty-non-universal-interval-p" data-sym="NON-EMPTY-NON-UNIVERSAL-INTERVAL-P" title="(defun cgen::non-empty-non-universal-interval-p (cgen::interval)
  (and cgen::interval (tau-intervalp cgen::interval)
       (access tau-interval cgen::interval :domain)
       (or (rationalp (access tau-interval cgen::interval :lo))
           (rationalp (access tau-interval cgen::interval :hi)))
...">non-empty-non-universal-interval-p</a> symbolp
       <a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a>) -&gt;
      boolean)
    <span class="keyword">:doc</span> <span class="string">"is interval an alias of type?"</span>)
  (declare (xargs <span class="keyword">:verify-guards</span> nil))
  (b* ((lo (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:lo</span>)) (hi (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:hi</span>))
      (lo-rel (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:lo-rel</span>))
      (hi-rel (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:hi-rel</span>))
      (m (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table wrld))
      (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table wrld))
      (p (predicate-name type a m)))
    (<a class="sym-link system" href="../../../axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:domain</span>)
      (integerp (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (subtype-p p '<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> wrld)
            (equal lo <span class="number">0</span>)
            (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> hi))
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (subtype-p p '<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> wrld)
            (equal lo <span class="number">1</span>)
            (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> hi))
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (subtype-p p 'negp wrld)
            (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> lo)
            (equal hi <span class="number">-1</span>))))
      (otherwise (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (subtype-p p 'positive-rationalp wrld)
            lo-rel
            (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> hi)
            (equal lo <span class="number">0</span>))
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (subtype-p p 'negative-rationalp wrld)
            hi-rel
            (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> lo)
            (equal hi <span class="number">0</span>)))))))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-verify-termination" data-sym="VERIFY-TERMINATION">verify-termination</a> empty-tau-intervalp)</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-verify-termination" data-sym="VERIFY-TERMINATION">verify-termination</a> <a class="sym-link local-def" href="#def-singleton-tau-intervalp" data-sym="SINGLETON-TAU-INTERVALP" title="(defun cgen::singleton-tau-intervalp (cgen::interval)
  (cgen::b*
   ((cgen::lo (access tau-interval cgen::interval :lo))
    (cgen::hi (access tau-interval cgen::interval :hi))
    (cgen::lo-rel (access tau-interval cgen::interval :lo-rel))
...">singleton-tau-intervalp</a>)</pre>
  </div>

<div class="form-block function" id="def-singleton-tau-intervalp" data-defines="SINGLETON-TAU-INTERVALP" data-references="SINGLETON-TAU-INTERVALP,AND,HI-REL,LO-REL,HI,TAU-INTERVAL,ACCESS,LO,B*,INTERVAL,DEFUN" data-used-by="NON-EMPTY-NON-UNIVERSAL-INTERVAL-P,SINGLETON-TAU-INTERVALP" data-part-name="SINGLETON-TAU-INTERVALP" data-part-args="INTERVAL" data-part-body="SINGLETON-TAU-INTERVALP,AND,HI-REL,LO-REL,HI,INTERVAL,TAU-INTERVAL,ACCESS,LO,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SINGLETON-TAU-INTERVALP">singleton-tau-intervalp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-singleton-tau-intervalp" data-sym="SINGLETON-TAU-INTERVALP" title="(defun cgen::singleton-tau-intervalp (cgen::interval)
  (cgen::b*
   ((cgen::lo (access tau-interval cgen::interval :lo))
    (cgen::hi (access tau-interval cgen::interval :hi))
    (cgen::lo-rel (access tau-interval cgen::interval :lo-rel))
...">singleton-tau-intervalp</a>
  (interval)
  (b* ((lo (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:lo</span>)) (hi (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:hi</span>))
      (lo-rel (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:lo-rel</span>))
      (hi-rel (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:hi-rel</span>)))
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:domain</span>)
      (<a class="sym-link local-def" href="#def-singleton-tau-intervalp" data-sym="SINGLETON-TAU-INTERVALP" title="(defun cgen::singleton-tau-intervalp (cgen::interval)
  (cgen::b*
   ((cgen::lo (access tau-interval cgen::interval :lo))
    (cgen::hi (access tau-interval cgen::interval :hi))
    (cgen::lo-rel (access tau-interval cgen::interval :lo-rel))
...">singleton-tau-intervalp</a> lo-rel
        lo
        hi-rel
        hi))))</pre>
  </div>

<div class="form-block function" id="def-non-empty-non-universal-interval-p" data-defines="NON-EMPTY-NON-UNIVERSAL-INTERVAL-P" data-references="SINGLETON-TAU-INTERVALP,EMPTY-TAU-INTERVALP,NOT,HI-REL,LO-REL,HI,LO,B*,RATIONALP,OR,TAU-INTERVAL,ACCESS,TAU-INTERVALP,AND,INTERVAL,DEFUN" data-part-name="NON-EMPTY-NON-UNIVERSAL-INTERVAL-P" data-part-args="INTERVAL" data-part-body="SINGLETON-TAU-INTERVALP,EMPTY-TAU-INTERVALP,NOT,HI-REL,LO-REL,HI,LO,B*,RATIONALP,OR,TAU-INTERVAL,ACCESS,TAU-INTERVALP,INTERVAL,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NON-EMPTY-NON-UNIVERSAL-INTERVAL-P">non-empty-non-universal-interval-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-non-empty-non-universal-interval-p" data-sym="NON-EMPTY-NON-UNIVERSAL-INTERVAL-P" title="(defun cgen::non-empty-non-universal-interval-p (cgen::interval)
  (and cgen::interval (tau-intervalp cgen::interval)
       (access tau-interval cgen::interval :domain)
       (or (rationalp (access tau-interval cgen::interval :lo))
           (rationalp (access tau-interval cgen::interval :hi)))
...">non-empty-non-universal-interval-p</a>
  (interval)
  (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> interval
    (<a class="sym-link system" href="../../../axioms.html#def-tau-intervalp" data-sym="TAU-INTERVALP">tau-intervalp</a> interval)
    (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:domain</span>)
    (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (rationalp (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:lo</span>))
      (rationalp (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:hi</span>)))
    (b* ((lo (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:lo</span>)) (hi (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:hi</span>))
        (lo-rel (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:lo-rel</span>))
        (hi-rel (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval interval <span class="keyword">:hi-rel</span>)))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (empty-tau-intervalp lo-rel
            lo
            hi-rel
            hi))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-singleton-tau-intervalp" data-sym="SINGLETON-TAU-INTERVALP" title="(defun cgen::singleton-tau-intervalp (cgen::interval)
  (cgen::b*
   ((cgen::lo (access tau-interval cgen::interval :lo))
    (cgen::hi (access tau-interval cgen::interval :hi))
    (cgen::lo-rel (access tau-interval cgen::interval :lo-rel))
...">singleton-tau-intervalp</a> lo-rel
            lo
            hi-rel
            hi))))))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def assimilate-apriori-type-information
  (vs vt-dlist
    tau-interval-alist
    vl
    wrld
    ans.)
  (decl <span class="keyword">:sig</span> ((symbol-list symbol-doublet-list
       alist
       symbol-alist
       fixnum
       plist-world
       symbol-cs%-alist) -&gt;
      symbol-cs%-alist)
    <span class="keyword">:doc</span> <span class="string">"overwrite into v-cs%-alst. the type information in type-alist/tau-interval-alist.
Put defdata symbol types into defdata-type field, but put constants
into eq-constraint field and put interval into range constraint field"</span>)
  (declare (xargs <span class="keyword">:verify-guards</span> nil))
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> vs)
    ans.
    (b* ((x (car vs)) (prior-types-entry (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> x vt-dlist))
        (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (verbose-stats-flag vl)
              (consp prior-types-entry)
              (consp (cdr prior-types-entry))
              (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> prior-types-entry))))
            <span class="string">"~|CEgen/Warning: Ignoring rest of union types ~x0 ~|"</span>
            (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> prior-types-entry)))
        (typ-given (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp prior-types-entry)
              (consp (cdr prior-types-entry)))
            (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> prior-types-entry)
            'all))
        ((when (possible-constant-value-p typ-given)) (assimilate-apriori-type-information (cdr vs)
            vt-dlist
            tau-interval-alist
            vl
            wrld
            (put-eq-constraint. x
              typ-given
              vl
              ans.)))
        (int-entry (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> x tau-interval-alist))
        (int (cdr int-entry))
        ((when (<a class="sym-link local-def" href="#def-singleton-tau-intervalp" data-sym="SINGLETON-TAU-INTERVALP" title="(defun cgen::singleton-tau-intervalp (cgen::interval)
  (cgen::b*
   ((cgen::lo (access tau-interval cgen::interval :lo))
    (cgen::hi (access tau-interval cgen::interval :hi))
    (cgen::lo-rel (access tau-interval cgen::interval :lo-rel))
...">singleton-tau-intervalp</a> int)) (assimilate-apriori-type-information (cdr vs)
            vt-dlist
            tau-interval-alist
            vl
            wrld
            (put-eq-constraint. x
              (<a class="sym-link system" href="../../../axioms.html#def-kwote" data-sym="KWOTE">kwote</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> tau-interval int <span class="keyword">:lo</span>))
              vl
              ans.)))
        ((cons &amp; cs%) (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> x ans.))
        (curr-typ (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> cs% defdata-type))
        (final-typ (meet curr-typ
            typ-given
            vl
            wrld))
        (ans. (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-non-empty-non-universal-interval-p" data-sym="NON-EMPTY-NON-UNIVERSAL-INTERVAL-P" title="(defun cgen::non-empty-non-universal-interval-p (cgen::interval)
  (and cgen::interval (tau-intervalp cgen::interval)
       (access tau-interval cgen::interval :domain)
       (or (rationalp (access tau-interval cgen::interval :lo))
           (rationalp (access tau-interval cgen::interval :hi)))
...">non-empty-non-universal-interval-p</a> int)
              (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (range-is-alias-p int
                  final-typ
                  wrld)))
            (put-range-constraint. x int ans.)
            ans.)))
      (assimilate-apriori-type-information (cdr vs)
        vt-dlist
        tau-interval-alist
        vl
        wrld
        (put-defdata-type. x
          final-typ
          vl
          ans.)))))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def-const *empty-cs%*
  (<a class="sym-link system" href="../../../basis-a.html#def-make" data-sym="MAKE">make</a> cs%
    <span class="keyword">:defdata-type</span> 'all
    <span class="keyword">:spilled-types</span> 'nil
    <span class="keyword">:eq-constraint</span> 'empty-eq-constraint
    <span class="keyword">:range</span> (<a class="sym-link system" href="../../../axioms.html#def-make-tau-interval" data-sym="MAKE-TAU-INTERVAL">make-tau-interval</a> nil nil nil nil nil)
    <span class="keyword">:member-constraint</span> 'empty-mem-constraint
    <span class="keyword">:additional-constraints</span> 'nil))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(def collect-constraints%
  (hyps ordered-vars
    top-vt-dlist
    type-alist
    tau-interval-alist
    vl
    wrld)
  (decl <span class="keyword">:sig</span> ((pseudo-term-listp <a class="sym-link system" href="../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a>
       <a class="sym-link system" href="../../../axioms.html#def-symbol-doublet-listp" data-sym="SYMBOL-DOUBLET-LISTP">symbol-doublet-listp</a>
       <a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>
       <a class="sym-link system" href="../../../axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a>
       fixnum
       <a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a>) -&gt;
      symbol-cs%-alist)
    <span class="keyword">:doc</span> <span class="string">"
* Synopsis
  For each free variable compute/infer both the simple defdata types
  and additional constraints on it.

* Input
  hyps is a usually a list of hypotheses of the conjecture under query
  and is a term-listp. ordered-vars is the free variables of hyps, but in the
  variable dependency order as computed from the dependency graphs of hyps.
  type-alist is the ACL2 context.
  top-vt-dlist is meet of top-level dumb type inference and ACL2 type-alist info.
  tau-interval-alist is the range type information inferred by Tau.


* Output
  An alist mapping free variables to cs% record
"</span>)
  (declare (xargs <span class="keyword">:verify-guards</span> nil))
  (f* ((unconstrained-v-cs%-alst (xs)
       (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> xs
         (<a class="sym-link system" href="../../../axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> xs)
           <span class="keyword">:initial-element</span> *empty-cs%*))))
    (b* ((v-cs%-alst (unconstrained-v-cs%-alst ordered-vars)) (v-cs%-alst (assimilate-apriori-type-information ordered-vars
            top-vt-dlist
            tau-interval-alist
            vl
            wrld
            v-cs%-alst))
        (context-hyps (reify-type-alist-hyps type-alist))
        (hyps+ (filter-terms-with-vars (<a class="sym-link system" href="../../../axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> context-hyps hyps)
            ordered-vars)))
      (v-cs%-alist-from-terms. hyps+
        vl
        wrld
        v-cs%-alst))))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-set-state-ok" data-sym="SET-STATE-OK">set-state-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-set-ignore-ok" data-sym="SET-IGNORE-OK">set-ignore-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-one-way-unify" data-defines="ONE-WAY-UNIFY" data-references="LIST,GET1,EQ,UNLESS,ONE-WAY-UNIFY,ALIST,ANS,MV,B*,GIVEN-X,GIVEN,PATTERN-X,PAT,DEFUN" data-used-by="MATCH-CONSTRAINT1,ONE-WAY-UNIFY" data-part-name="ONE-WAY-UNIFY" data-part-args="GIVEN-X,GIVEN,PATTERN-X,PAT" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ONE-WAY-UNIFY">one-way-unify</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun cgen::one-way-unify
       (cgen::pat cgen::pattern-x cgen::given cgen::given-x)
  &quot;do match but make sure pattern-x is matched with given-x&quot;
  (cgen::b*
   (((cgen::mv cgen::ans cgen::alist) (one-way-unify cgen::pat cgen::given))
...">one-way-unify</a>
  (pat pattern-x given given-x)
  <span class="string">"do match but make sure pattern-x is matched with given-x"</span>
  (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ans alist) (<a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun cgen::one-way-unify
       (cgen::pat cgen::pattern-x cgen::given cgen::given-x)
  &quot;do match but make sure pattern-x is matched with given-x&quot;
  (cgen::b*
   (((cgen::mv cgen::ans cgen::alist) (one-way-unify cgen::pat cgen::given))
...">one-way-unify</a> pat given)) ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (get1 pattern-x alist) given-x)) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> nil nil)))
    (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> ans alist)))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> innermost-subterm-one-way-unify
    (pat pat-x term x acc)
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) acc)
      ((<a class="sym-link system" href="../../../axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term) acc)
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (b* (((<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> ans alist) (<a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun cgen::one-way-unify
       (cgen::pat cgen::pattern-x cgen::given cgen::given-x)
  &quot;do match but make sure pattern-x is matched with given-x&quot;
  (cgen::b*
   (((cgen::mv cgen::ans cgen::alist) (one-way-unify cgen::pat cgen::given))
...">one-way-unify</a> pat
               pat-x
               term
               x)))
          (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> (ans (innermost-subterm-one-way-unify-lst pat
                pat-x
                (<a class="sym-link system" href="../../../axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)
                x
                (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> ans alist)))
            (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (innermost-subterm-one-way-unify-lst pat
                pat-x
                (<a class="sym-link system" href="../../../axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)
                x
                acc)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> innermost-subterm-one-way-unify-lst
    (pat pat-x terms x acc)
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> terms) acc)
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (b* (((<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> ans alist) (innermost-subterm-one-way-unify pat
               pat-x
               (car terms)
               x
               acc)))
          (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> (ans (innermost-subterm-one-way-unify-lst pat
                pat-x
                (cdr terms)
                x
                (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> ans alist)))
            (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (innermost-subterm-one-way-unify-lst pat
                pat-x
                (cdr terms)
                x
                acc))))))))</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../tools/templates.html" title="Open tools/templates">"tools/templates"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block function" id="def-sublis-var" data-defines="SUBLIS-VAR" data-references="SUBLIS-VAR,TERM,SIGMA,DEFUN" data-used-by="MATCH-CONSTRAINT1,SUBLIS-VAR" data-part-name="SUBLIS-VAR" data-part-args="TERM,SIGMA" data-part-body="TERM,SIGMA,SUBLIS-VAR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SUBLIS-VAR">sublis-var</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sublis-var" data-sym="SUBLIS-VAR" title="(defun cgen::sublis-var (cgen::sigma cgen::term)
  (sublis-var cgen::sigma cgen::term))">sublis-var</a>
  (sigma term)
  (<a class="sym-link local-def" href="#def-sublis-var" data-sym="SUBLIS-VAR" title="(defun cgen::sublis-var (cgen::sigma cgen::term)
  (sublis-var cgen::sigma cgen::term))">sublis-var</a> sigma term))</pre>
  </div>

<div class="form-block function" id="def-filter-splice-entries" data-defines="FILTER-SPLICE-ENTRIES" data-references="CDR,SYMBOL-NAME,SUBSEQ,EQUAL,CAR,VAL,KEY,CONS,B*,QUOTE,ENDP,IF,REPLACE-ALIST,DEFUN" data-used-by="EVAL-META-REPLACE" data-part-name="FILTER-SPLICE-ENTRIES" data-part-args="REPLACE-ALIST" data-part-body="CDR,FILTER-SPLICE-ENTRIES,SYMBOL-NAME,SUBSEQ,EQUAL,CAR,VAL,KEY,CONS,B*,QUOTE,REPLACE-ALIST,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FILTER-SPLICE-ENTRIES">filter-splice-entries</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-filter-splice-entries" data-sym="FILTER-SPLICE-ENTRIES" title="(defun cgen::filter-splice-entries (cgen::replace-alist)
  (if (endp cgen::replace-alist)
      &#39;nil
      (cgen::b* (((cons cgen::key cgen::val) (car cgen::replace-alist)))
       (if (equal &quot;@&quot; (subseq (symbol-name cgen::key) 0 1))
...">filter-splice-entries</a>
  (replace-alist)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> replace-alist)
    'nil
    (b* (((cons key val) (car replace-alist)))
      (if (equal <span class="string">"@"</span> (<a class="sym-link system" href="../../../axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> (symbol-name key) <span class="number">0</span> <span class="number">1</span>))
        (cons (car replace-alist)
          (<a class="sym-link local-def" href="#def-filter-splice-entries" data-sym="FILTER-SPLICE-ENTRIES" title="(defun cgen::filter-splice-entries (cgen::replace-alist)
  (if (endp cgen::replace-alist)
      &#39;nil
      (cgen::b* (((cons cgen::key cgen::val) (car cgen::replace-alist)))
       (if (equal &quot;@&quot; (subseq (symbol-name cgen::key) 0 1))
...">filter-splice-entries</a> (cdr replace-alist)))
        (<a class="sym-link local-def" href="#def-filter-splice-entries" data-sym="FILTER-SPLICE-ENTRIES" title="(defun cgen::filter-splice-entries (cgen::replace-alist)
  (if (endp cgen::replace-alist)
      &#39;nil
      (cgen::b* (((cons cgen::key cgen::val) (car cgen::replace-alist)))
       (if (equal &quot;@&quot; (subseq (symbol-name cgen::key) 0 1))
...">filter-splice-entries</a> (cdr replace-alist))))))</pre>
  </div>

<div class="form-block function" id="def-remove1-assoc-eq-lst" data-defines="REMOVE1-ASSOC-EQ-LST" data-references="CAR,REMOVE1-ASSOC-EQ,CDR,ENDP,IF,ALIST,XS,DEFUN" data-used-by="EVAL-META-REPLACE" data-part-name="REMOVE1-ASSOC-EQ-LST" data-part-args="ALIST,XS" data-part-body="CAR,REMOVE1-ASSOC-EQ,CDR,REMOVE1-ASSOC-EQ-LST,ALIST,XS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE1-ASSOC-EQ-LST">remove1-assoc-eq-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove1-assoc-eq-lst" data-sym="REMOVE1-ASSOC-EQ-LST" title="(defun cgen::remove1-assoc-eq-lst (cgen::xs cgen::alist)
  (if (endp cgen::xs)
      cgen::alist
      (cgen::remove1-assoc-eq-lst (cdr cgen::xs)
       (cgen::remove1-assoc-eq (car cgen::xs) cgen::alist))))">remove1-assoc-eq-lst</a>
  (xs alist)
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> xs)
    alist
    (<a class="sym-link local-def" href="#def-remove1-assoc-eq-lst" data-sym="REMOVE1-ASSOC-EQ-LST" title="(defun cgen::remove1-assoc-eq-lst (cgen::xs cgen::alist)
  (if (endp cgen::xs)
      cgen::alist
      (cgen::remove1-assoc-eq-lst (cdr cgen::xs)
       (cgen::remove1-assoc-eq (car cgen::xs) cgen::alist))))">remove1-assoc-eq-lst</a> (cdr xs)
      (<a class="sym-link system" href="../../../axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> (car xs) alist))))</pre>
  </div>

<div class="form-block function" id="def-eval-meta-replace" data-defines="EVAL-META-REPLACE" data-references="DEBUG-FLAG,CW?,PROG2$,WHEN,REMOVE1-ASSOC-EQ-LST,ATOM-ALIST,FILTER-SPLICE-ENTRIES,SPLICE-ALIST,QUOTE,IGNORABLE,DECLARE,LET,QUASIQUOTE,TRANS-MY-EV-W,REPLACE-ALIST,ERP,VARS,STRIP-CADRS,SUBLIS-VAR-LST,STRIP-CARS,LISTLIS,MV,CONSP,UNLESS,B*,WRLD,VL,USIGMA,MC,DEFUN" data-used-by="MATCH-CONSTRAINT1" data-part-name="EVAL-META-REPLACE" data-part-args="WRLD,VL,USIGMA,MC" data-part-body="VL,DEBUG-FLAG,CW?,PROG2$,WHEN,REMOVE1-ASSOC-EQ-LST,ATOM-ALIST,FILTER-SPLICE-ENTRIES,SPLICE-ALIST,WRLD,EVAL-META-REPLACE,QUOTE,IGNORABLE,DECLARE,LET,QUASIQUOTE,TRANS-MY-EV-W,REPLACE-ALIST,ERP,VARS,STRIP-CADRS,USIGMA,SUBLIS-VAR-LST,STRIP-CARS,LISTLIS,MV,MC,CONSP,UNLESS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVAL-META-REPLACE">eval-meta-replace</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-eval-meta-replace" data-sym="EVAL-META-REPLACE" title="(defun cgen::eval-meta-replace (cgen::mc cgen::usigma cgen::vl cgen::wrld)
  (cgen::b*
   (((unless (consp cgen::mc)) (cgen::mv nil nil))
    (cgen::mc
     (listlis (cgen::strip-cars cgen::mc)
...">eval-meta-replace</a>
  (mc usigma vl wrld)
  (b* (((unless (consp mc)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)) (mc (listlis (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> mc)
          (<a class="sym-link system" href="../../../basis-b.html#def-sublis-var-lst" data-sym="SUBLIS-VAR-LST">sublis-var-lst</a> usigma (<a class="sym-link system" href="../../../axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> mc))))
      (vars (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> mc))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> erp replace-alist) (trans-my-ev-w `(let ,CGEN::MC
            (declare (ignorable ,@CGEN::VARS))
            ,(CGEN::MAKE-VAR-VALUE-CONS-BINDINGS CGEN::VARS &#39;NIL))
          '<a class="sym-link local-def" href="#def-eval-meta-replace" data-sym="EVAL-META-REPLACE" title="(defun cgen::eval-meta-replace (cgen::mc cgen::usigma cgen::vl cgen::wrld)
  (cgen::b*
   (((unless (consp cgen::mc)) (cgen::mv nil nil))
    (cgen::mc
     (listlis (cgen::strip-cars cgen::mc)
...">eval-meta-replace</a>
          wrld
          nil))
      (splice-alist (<a class="sym-link local-def" href="#def-filter-splice-entries" data-sym="FILTER-SPLICE-ENTRIES" title="(defun cgen::filter-splice-entries (cgen::replace-alist)
  (if (endp cgen::replace-alist)
      &#39;nil
      (cgen::b* (((cons cgen::key cgen::val) (car cgen::replace-alist)))
       (if (equal &quot;@&quot; (subseq (symbol-name cgen::key) 0 1))
...">filter-splice-entries</a> replace-alist))
      (atom-alist (<a class="sym-link local-def" href="#def-remove1-assoc-eq-lst" data-sym="REMOVE1-ASSOC-EQ-LST" title="(defun cgen::remove1-assoc-eq-lst (cgen::xs cgen::alist)
  (if (endp cgen::xs)
      cgen::alist
      (cgen::remove1-assoc-eq-lst (cdr cgen::xs)
       (cgen::remove1-assoc-eq (car cgen::xs) cgen::alist))))">remove1-assoc-eq-lst</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> splice-alist)
          replace-alist))
      ((when erp) (<a class="sym-link system" href="../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (cw? (debug-flag vl)
            <span class="string">"~| Error in evaluating meta-replace ~x0 given sigma ~x1~%"</span>
            mc
            usigma)
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil))))
    (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> atom-alist splice-alist)))</pre>
  </div>

<div class="form-block function" id="def-match-constraint1" data-defines="MATCH-CONSTRAINT1" data-references="TEMPLATE-SUBST,STR-ALIST,RULE-FORM-INSTANCE-RENAMED,EVAL-META-REPLACE,SPLICE-ALIST,ATOM-ALIST,MC,SUBLIS-VAR,RULE-FORM-INSTANCE,RULE-FORM,NOT,AND,QUOTE,LET,QUASIQUOTE,TRANS-MY-EV-W,OKP,ERP,MV,STRIP-CDRS,KWOTE-LST,LISTLIS,LETB,STRIP-CARS,VARS,META-PRECONDITION,DEBUG-FLAG,CW?,-,UNLESS,ONE-WAY-UNIFY,INNERMOST-SUBTERM-ONE-WAY-UNIFY,EQ,IF,USIGMA,YESP,LIST,PATTERN-X,GET1,PATTERN-C,B*,IGNORABLE,DECLARE,WRLD,VL,X,GIVEN-C,CONSTRAINT-RULE,DEFUN" data-part-name="MATCH-CONSTRAINT1" data-part-args="WRLD,VL,X,GIVEN-C,CONSTRAINT-RULE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MATCH-CONSTRAINT1">match-constraint1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-match-constraint1" data-sym="MATCH-CONSTRAINT1" title="(defun cgen::match-constraint1
       (cgen::constraint-rule cgen::given-c cgen::x cgen::vl cgen::wrld)
  &quot;does given-C match with this constraint-rule with a variable renaming for x&quot;
  (declare (ignorable cgen::vl))
  (cgen::b*
...">match-constraint1</a>
  (constraint-rule given-c
    x
    vl
    wrld)
  <span class="string">"does given-C match with this constraint-rule with a variable renaming for x"</span>
  (declare (ignorable vl))
  (b* ((pattern-c (get1 <span class="keyword">:constraint</span> constraint-rule)) (pattern-x (get1 <span class="keyword">:constraint-variable</span> constraint-rule))
      ((<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> yesp usigma) (if (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> <span class="keyword">:subterm-match</span> (get1 <span class="keyword">:match-type</span> constraint-rule))
          (innermost-subterm-one-way-unify pattern-c
            pattern-x
            given-c
            x
            (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> nil nil))
          (<a class="sym-link local-def" href="#def-one-way-unify" data-sym="ONE-WAY-UNIFY" title="(defun cgen::one-way-unify
       (cgen::pat cgen::pattern-x cgen::given cgen::given-x)
  &quot;do match but make sure pattern-x is matched with given-x&quot;
  (cgen::b*
   (((cgen::mv cgen::ans cgen::alist) (one-way-unify cgen::pat cgen::given))
...">one-way-unify</a> pattern-c
            pattern-x
            given-c
            x)))
      ((unless yesp) nil)
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (debug-flag vl)
          <span class="string">"~| Match successful: ~x0 ~%"</span>
          usigma))
      (meta-precondition (get1 <span class="keyword">:meta-precondition</span> constraint-rule))
      (vars (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> usigma))
      (letb (listlis vars
          (<a class="sym-link system" href="../../../axioms.html#def-kwote-lst" data-sym="KWOTE-LST">kwote-lst</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> usigma))))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> erp okp) (trans-my-ev-w `(let ,CGEN::LETB
            (declare (ignorable ,@CGEN::VARS))
            ,CGEN::META-PRECONDITION)
          '<a class="sym-link local-def" href="#def-match-constraint1" data-sym="MATCH-CONSTRAINT1" title="(defun cgen::match-constraint1
       (cgen::constraint-rule cgen::given-c cgen::x cgen::vl cgen::wrld)
  &quot;does given-C match with this constraint-rule with a variable renaming for x&quot;
  (declare (ignorable cgen::vl))
  (cgen::b*
...">match-constraint1</a>
          wrld
          nil))
      ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> erp) okp)) nil)
      (rule-form (get1 <span class="keyword">:rule</span> constraint-rule))
      (rule-form-instance (<a class="sym-link local-def" href="#def-sublis-var" data-sym="SUBLIS-VAR" title="(defun cgen::sublis-var (cgen::sigma cgen::term)
  (sublis-var cgen::sigma cgen::term))">sublis-var</a> usigma rule-form))
      (mc (get1 <span class="keyword">:meta-replace</span> constraint-rule))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> atom-alist splice-alist) (<a class="sym-link local-def" href="#def-eval-meta-replace" data-sym="EVAL-META-REPLACE" title="(defun cgen::eval-meta-replace (cgen::mc cgen::usigma cgen::vl cgen::wrld)
  (cgen::b*
   (((unless (consp cgen::mc)) (cgen::mv nil nil))
    (cgen::mc
     (listlis (cgen::strip-cars cgen::mc)
...">eval-meta-replace</a> mc
          usigma
          vl
          wrld))
      (rule-form-instance-renamed (let ((str-alist `((,(SYMBOL-NAME CGEN::PATTERN-X) . ,(SYMBOL-NAME CGEN::X)))))
          (template-subst rule-form-instance
            <span class="keyword">:str-alist</span> str-alist
            <span class="keyword">:atom-alist</span> atom-alist
            <span class="keyword">:splice-alist</span> splice-alist
            <span class="keyword">:pkg-sym</span> x))))
    rule-form-instance-renamed))</pre>
  </div>

<div class="form-block function" id="def-record-p" data-defines="RECORD-P" data-references="RECORD,QUOTE,CAR,EQUAL,CONSP,AND,PDEF,TYPE-METADATA-TABLE,GET1,TYPE-ENTRY,B*,WRLD,TYPE,DEFUN" data-part-name="RECORD-P" data-part-args="WRLD,TYPE" data-part-body="RECORD,QUOTE,CAR,EQUAL,CONSP,AND,PDEF,WRLD,TYPE-METADATA-TABLE,TYPE,GET1,TYPE-ENTRY,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RECORD-P">record-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-record-p" data-sym="RECORD-P" title="(defun cgen::record-p (type cgen::wrld)
  (cgen::b*
   ((cgen::type-entry
     (cgen::get1 type (defdata::type-metadata-table cgen::wrld)))
    (cgen::pdef (cgen::get1 :prettyified-def cgen::type-entry)))">record-p</a>
  (type wrld)
  (b* ((type-entry (get1 type (type-metadata-table wrld))) (pdef (get1 <span class="keyword">:prettyified-def</span> type-entry)))
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp pdef)
      (equal (car pdef) 'record))))</pre>
  </div>

<div class="form-block function" id="def-expand-record" data-defines="EXPAND-RECORD" data-references="CONS,MV,LISTLIS,PRED-CALLS,PREDICATE-NAMES,FPREDS,TYPE-ALIAS-TABLE,A,QUOTE,TABLE-ALIST,M,SYMBOL-PACKAGE-NAME,SYMBOL-NAME,STRING-APPEND,MODIFY-SYMBOL-LST,NEW-NAMES,STRIP-CDRS,FTYPES,CDR,STRIP-CARS,FIELDS,CAR,CONX,NDEF,TYPE-METADATA-TABLE,GET1,TYPE-ENTRY,B*,WRLD,TYPE,X,DEFUN" data-part-name="EXPAND-RECORD" data-part-args="WRLD,TYPE,X" data-part-body="CONS,MV,LISTLIS,PRED-CALLS,PREDICATE-NAMES,FPREDS,TYPE-ALIAS-TABLE,A,QUOTE,TABLE-ALIST,M,SYMBOL-PACKAGE-NAME,X,SYMBOL-NAME,STRING-APPEND,MODIFY-SYMBOL-LST,NEW-NAMES,STRIP-CDRS,FTYPES,CDR,STRIP-CARS,FIELDS,CAR,CONX,NDEF,WRLD,TYPE-METADATA-TABLE,TYPE,GET1,TYPE-ENTRY,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPAND-RECORD">expand-record</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-expand-record" data-sym="EXPAND-RECORD" title="(defun cgen::expand-record (cgen::x type cgen::wrld)
  (cgen::b*
   ((cgen::type-entry
     (cgen::get1 type (defdata::type-metadata-table cgen::wrld)))
    (cgen::ndef (cgen::get1 :normalized-def cgen::type-entry))
...">expand-record</a>
  (x type wrld)
  (b* ((type-entry (get1 type (type-metadata-table wrld))) (ndef (get1 <span class="keyword">:normalized-def</span> type-entry))
      (conx (car ndef))
      (fields (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (cdr ndef)))
      (ftypes (<a class="sym-link system" href="../../../axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (cdr ndef)))
      (new-names (modify-symbol-lst (<a class="sym-link system" href="../../../axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> (symbol-name x) <span class="string">"."</span>)
          fields
          <span class="string">""</span>
          (symbol-package-name x)))
      (m (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-metadata-table wrld))
      (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table wrld))
      (fpreds (predicate-names ftypes a m))
      (pred-calls (listlis fpreds new-names)))
    (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (cons conx new-names)
      pred-calls)))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop match-constraint/loop
  (constraint-rules c x vl wrld)
  <span class="string">"return first matched"</span>
  (for ((crule in constraint-rules))
    (thereis (<a class="sym-link local-def" href="#def-match-constraint1" data-sym="MATCH-CONSTRAINT1" title="(defun cgen::match-constraint1
       (cgen::constraint-rule cgen::given-c cgen::x cgen::vl cgen::wrld)
  &quot;does given-C match with this constraint-rule with a variable renaming for x&quot;
  (declare (ignorable cgen::vl))
  (cgen::b*
...">match-constraint1</a> crule
        c
        x
        vl
        wrld))))</pre>
  </div>

<div class="form-block function" id="def-match-constraint" data-defines="MATCH-CONSTRAINT" data-references="MATCH-CONSTRAINT/LOOP,GET2,CONSTRAINT-RULES,PREDICATE-NAME,UNLESS,TYPE-ALIAS-TABLE,QUOTE,TABLE-ALIST,A,TYPE-METADATA-TABLE,M,B*,WRLD,VL,C,TYPE,X,DEFUN" data-part-name="MATCH-CONSTRAINT" data-part-args="WRLD,VL,C,TYPE,X" data-part-body="VL,X,C,MATCH-CONSTRAINT/LOOP,GET2,CONSTRAINT-RULES,TYPE,PREDICATE-NAME,UNLESS,TYPE-ALIAS-TABLE,QUOTE,TABLE-ALIST,A,WRLD,TYPE-METADATA-TABLE,M,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MATCH-CONSTRAINT">match-constraint</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-match-constraint" data-sym="MATCH-CONSTRAINT" title="(defun cgen::match-constraint (cgen::x type cgen::c cgen::vl cgen::wrld)
  (cgen::b*
   ((cgen::m (defdata::type-metadata-table cgen::wrld))
    (cgen::a (cgen::table-alist &#39;defdata::type-alias-table cgen::wrld))
    ((unless (defdata::predicate-name type cgen::a cgen::m)) nil)
...">match-constraint</a>
  (x type c vl wrld)
  (b* ((m (type-metadata-table wrld)) (a (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'type-alias-table wrld))
      ((unless (predicate-name type a m)) nil)
      (constraint-rules (get2 type <span class="keyword">:constraint-rules</span> m)))
    (match-constraint/loop constraint-rules
      c
      x
      vl
      wrld)))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="propagate.html" title="Open propagate">"propagate"</a>)</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../misc/bash.html" title="Open misc/bash">"misc/bash"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-44" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> refine-enum-shape1
    (x type
      constraints
      vl
      state
      rtermb
      new-hyps)
    <span class="string">"Infer a more specialized ACL2 expression for x:type given additional
   constraints on x.

If no more constraints
   return rtermB, new-hyps
else pick c from constraints
  iterate over trigger-constraints t stored for type till one finds a &#39;match&#39;
  (i.e. c (subterm) matches t and satisfies the trigger&#39;s condition)
     from rule-action, get specialized exp for x and new-hyps on introduced variables
     store exp for x in rtermB, new-hyps++
     get type-bindings for all introduced variables
     constraints&#39; := simplify x=exp + new-hyps ++ constraints
     for each (x&#39; type&#39;) in type-bindings
         refine-enum-shape(x&#39;, type&#39;, constraints&#39; on x&#39;, rtermB, new-hyps)
"</span>
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> constraints)
      (<a class="sym-link system" href="../../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> rtermb new-hyps))
      (b* ((c (car constraints)) (rule (<a class="sym-link local-def" href="#def-match-constraint" data-sym="MATCH-CONSTRAINT" title="(defun cgen::match-constraint (cgen::x type cgen::c cgen::vl cgen::wrld)
  (cgen::b*
   ((cgen::m (defdata::type-metadata-table cgen::wrld))
    (cgen::a (cgen::table-alist &#39;defdata::type-alias-table cgen::wrld))
    ((unless (defdata::predicate-name type cgen::a cgen::m)) nil)
...">match-constraint</a> x
              type
              c
              vl
              (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state)))
          ((unless rule) (refine-enum-shape1 x
              type
              (cdr constraints)
              vl
              state
              rtermb
              new-hyps))
          (`(<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> ,CGEN::HYP
             (equal ,CGEN::VAR ,CGEN::REFINED-EXP)) rule)
          (rule-hyps (if (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car hyp) '<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a>)
              (cdr hyp)
              (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> hyp)))
          ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> var) (equal var x))) (<a class="sym-link system" href="../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (cw? (verbose-stats-flag vl)
                <span class="string">"Cgen/refine-enum-shape1:: Expected ~x0 to be an elim rule for var ~x1"</span>
                rule
                x)
              (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> rtermb new-hyps) state)))
          ((when (<a class="sym-link system" href="../../../axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
               (<a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> refined-exp))) (<a class="sym-link system" href="../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (cw? (verbose-stats-flag vl)
                <span class="string">"Cgen/refine-enum-shape1:: An Invariant broke!! ~x0 should not occur in ~x1."</span>
                x
                refined-exp)
              (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> rtermb new-hyps) state)))
          (new-hyps (<a class="sym-link system" href="../../../axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> rule-hyps new-hyps))
          (rtermb (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> x refined-exp rtermb))
          (var-type-dlist (dumb-type-alist-infer rule-hyps
              (all-vars-lst rule-hyps)
              vl
              (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state)))
          ((<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> constraints~) (simplify-term-lst (subst-var-lst refined-exp
                x
                (cdr constraints))
              rule-hyps
              'nil
              state)))
        (refine-enum-shapes1 var-type-dlist
          constraints~
          vl
          state
          rtermb
          new-hyps))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> refine-enum-shapes1
    (var-type-dlist constraints
      vl
      state
      rtermb
      new-hyps)
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> var-type-dlist)
      (<a class="sym-link system" href="../../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> rtermb new-hyps))
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x type) (car var-type-dlist)) ((<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> rtermb1 new-hyps1)) (if (<a class="sym-link local-def" href="#def-record-p" data-sym="RECORD-P" title="(defun cgen::record-p (type cgen::wrld)
  (cgen::b*
   ((cgen::type-entry
     (cgen::get1 type (defdata::type-metadata-table cgen::wrld)))
    (cgen::pdef (cgen::get1 :prettyified-def cgen::type-entry)))">record-p</a> type (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))
              (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> rec-expansion rec-field-hyps) (<a class="sym-link local-def" href="#def-expand-record" data-sym="EXPAND-RECORD" title="(defun cgen::expand-record (cgen::x type cgen::wrld)
  (cgen::b*
   ((cgen::type-entry
     (cgen::get1 type (defdata::type-metadata-table cgen::wrld)))
    (cgen::ndef (cgen::get1 :normalized-def cgen::type-entry))
...">expand-record</a> x type (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
                (<a class="sym-link system" href="../../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-acons" data-sym="ACONS">acons</a> x rec-expansion 'nil)
                    rec-field-hyps)))
              (refine-enum-shape1 x
                type
                constraints
                vl
                state
                'nil
                'nil)))
          (rtermb (<a class="sym-link system" href="../../../axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> rtermb1 rtermb))
          (new-hyps (<a class="sym-link system" href="../../../axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> new-hyps1 new-hyps)))
        (refine-enum-shapes1 (cdr var-type-dlist)
          constraints
          vl
          state
          rtermb
          new-hyps)))))</pre>
  </div>

<div class="form-block other" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> expand-term-under-bindings
    (term b)
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (if (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> term b)
          (expand-term-under-bindings (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> term b))
            (<a class="sym-link system" href="../../../axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> term b))
          term))
      ((<a class="sym-link system" href="../../../axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term) term)
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="../../../axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)
          (expand-terms-under-bindings (<a class="sym-link system" href="../../../axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)
            b)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> expand-terms-under-bindings
    (terms b)
    (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> terms)
      'nil
      (cons (expand-term-under-bindings (car terms) b)
        (expand-terms-under-bindings (cdr terms)
          b)))))</pre>
  </div>

<div class="form-block other" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop contains-var
  (x terms)
  <span class="string">"filter terms that contain variable x"</span>
  (for ((term in terms))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> x (<a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> term))
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> term)))))</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defloop remove-terms-with-vars
  (terms xs)
  <span class="string">"remove terms with variables in xs"</span>
  (for ((term in terms))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-intersection-eq" data-sym="INTERSECTION-EQ">intersection-eq</a> xs (<a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> term)))
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> term)))))</pre>
  </div>

<div class="form-block function" id="def-refine-enum-shape" data-defines="REFINE-ENUM-SHAPE" data-references="SUBSETP-EQ,ASSERT$,DEBUG-FLAG,CW?,-,ALL-VARS,VARS-IN-REFINED-TERM,ALL-VARS-LST,NEW-VARS,REMOVE-TERMS-WITH-VARS,STRIP-CARS,ELIMED-VARS,EXPAND-TERM-UNDER-BINDINGS,REFINED-TERM,VALUE,NULL,WHEN,ADDITIONAL-HYPS,RTERMB,LIST,QUOTE,REFINE-ENUM-SHAPE1,ANS,ER,B*,STATE,VL,CONSTRAINTS,TYPE,VAR,DEFUN" data-part-name="REFINE-ENUM-SHAPE" data-part-args="STATE,VL,CONSTRAINTS,TYPE,VAR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REFINE-ENUM-SHAPE">refine-enum-shape</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-refine-enum-shape" data-sym="REFINE-ENUM-SHAPE" title="(defun cgen::refine-enum-shape
       (cgen::var type cgen::constraints cgen::vl cgen::state)
  &quot;Infer a more specialized (refined) ACL2 expression for x:type given
   additional constraints on x.&quot;
  (cgen::b*
...">refine-enum-shape</a>
  (var type constraints vl state)
  <span class="string">"Infer a more specialized (refined) ACL2 expression for x:type given
   additional constraints on x."</span>
  (b* (((<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> ans) (refine-enum-shape1 var
         type
         constraints
         vl
         state
         'nil
         'nil)) ((<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> rtermb additional-hyps) ans)
      ((when (<a class="sym-link system" href="../../../axioms.html#def-null" data-sym="NULL">null</a> rtermb)) (<a class="sym-link system" href="../../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> 'nil 'nil)))
      (refined-term (expand-term-under-bindings var rtermb))
      (elimed-vars (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> rtermb))
      (additional-hyps (remove-terms-with-vars additional-hyps
          elimed-vars))
      (new-vars (all-vars-lst additional-hyps))
      (vars-in-refined-term (<a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> refined-term))
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (cw? (debug-flag vl)
          <span class="string">"vars-in-additional-hyps: ~x0 and vars-in-refined-term: ~x1"</span>
          new-vars
          vars-in-refined-term))
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="../../../axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> vars-in-refined-term new-vars)
          nil)))
    (<a class="sym-link system" href="../../../axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> refined-term additional-hyps))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>