<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>constructors - ACL2 Book</title>
  <meta property="name" content="constructors">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">constructors</h1>
    <div class="path"><a href="constructors.lisp" class="source-link">books/xdoc/constructors</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"XDOC"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="top.html" title="Open top">"top"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../tools/flag.html" title="Open tools/flag">"tools/flag"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-set-verify-guards-eagerness" data-sym="SET-VERIFY-GUARDS-EAGERNESS">set-verify-guards-eagerness</a> <span class="number">2</span>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc constructors
  <span class="keyword">:parents</span> (xdoc)
  <span class="keyword">:short</span> <span class="string">"Utilities to construct
          well-formed &lt;see topic=&#39;@(url xdoc)&#39;&gt;XDOC&lt;/see&gt; strings."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;XDOC strings use &lt;see topic=&#39;@(url markup)&#39;&gt;XML tags&lt;/see&gt;,
      which must be properly matched and nested.
      They also use
      &lt;see topic=&#39;@(url preprocessor)&#39;&gt;preprocessor directives&lt;/see&gt;,
      which can be regarded as ``tag&#39;&#39;-like constructs
      that must also be properly matched and nested.&lt;/p&gt;
   &lt;p&gt;Starting with @(tsee stringp) values as the basic building blocks,
      the XDOC constructors provided here build trees that correspond to
      the combined structure of XML tags and preprocessor directives;
      these trees are recognized by the predicate @(tsee treep).
      These trees also accommodate attributes of XML tags,
      whose values are subtrees, recursively.
      The function @(tsee topstring) turns these trees into strings,
      by recursively turning subtrees into strings,
      joining those strings,
      and adding XML tags and preprocessor directives
      at the roots of the trees.&lt;/p&gt;
   &lt;p&gt;With these XDOC constructors, one can write&lt;/p&gt;
   @({
   (xdoc::topstring
      (xdoc::p &quot;A paragraph.&quot;)
      (xdoc::ul
        (xdoc::li &quot;One.&quot;)
        (xdoc::li &quot;Two.&quot;)
        (xdoc::li &quot;Three.&quot;))
      (xdoc::p &quot;Another paragraph.&quot;)
      (xdoc::p &quot;See &quot;
               (xdoc::a :href &quot;https://www.wikipedia.org&quot; &quot;Wikipedia&quot;)
               &quot;.&quot;))
   })
   &lt;p&gt;instead of&lt;/p&gt;
   @({
     &quot;&lt;p&gt;A paragraph.&lt;/p&gt;
      &lt;ul&gt;
        &lt;li&gt;One.&lt;/li&gt;
        &lt;li&gt;Two.&lt;/li&gt;
        &lt;li&gt;Three.&lt;/li&gt;
      &lt;/ul&gt;
      &lt;p&gt;Another paragraph.&lt;/p&gt;
      &lt;p&gt;See &lt;a href=&quot;https://www.wikipedia.org&quot;&gt;Wikipedia&lt;/a&gt;.&lt;/p&gt;&quot;
   })
   &lt;p&gt;The main advantage is that the XML tags (and preprocessor directives)
      will be always properly matched and nested by construction.
      Furthermore, using XDOC constructors
      is probably more readable,
      facilitates the modular and hierarchical construction of XDOC strings
      (in particular, see the
      &lt;see topic=&#39;@(url composite-constructors)&#39;
      &gt;composite XDOC constructors&lt;/see&gt;),
      and allows the insertion of comments within the XDOC constructor forms
      (e.g. lines of semicolons to visually separate sections).&lt;/p&gt;
   &lt;p&gt;The strings at the leaves of a tree
      may well contain XML tags or preprocessor directives.
      For relatively short XML-tagged text or preprocessor directives,
      it may be better to use tags and directives within a string
      rather than the corresponding XDOC constructors,
      e.g.&lt;/p&gt;
   @({(xdoc::p &quot;This is in &lt;i&gt;italics&lt;/i&gt;.&quot;)})
   &lt;p&gt;rather than&lt;/p&gt;
   &lt;code&gt;(xdoc::p &quot;This is in &quot; (xdoc::i &quot;italics&quot;) &quot;.&quot;)&lt;/code&gt;
   &lt;p&gt;In other words,
      it is not necessary to use XDOC constructors for everything,
      but only where they are convenient.&lt;/p&gt;
   &lt;p&gt;The books included by these XDOC constructor utilities
      should be minimized,
      to keep these utilities lightweight and more widely usable.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(order-subtopics constructors nil <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc constructor-preliminaries
  <span class="keyword">:parents</span> (constructors)
  <span class="keyword">:short</span> <span class="string">"Some preliminary utilities used by the XDOC constructors."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;These are independent from the XDOC constructors,
      but we introduce them here
      to keep the XDOC constructor utilities self-contained.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(order-subtopics constructor-preliminaries
  nil
  <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection *newline*
  <span class="keyword">:parents</span> (constructor-preliminaries)
  <span class="keyword">:short</span> <span class="string">"The string consisting of exactly the newline character."</span>
  <span class="keyword">:long</span> <span class="string">"@(def *newline*)"</span>
  (<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *newline*
    (coerce (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> #\
) '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))
  (<a class="sym-link system" href="../../axioms.html#def-assert-event" data-sym="ASSERT-EVENT">assert-event</a> (stringp *newline*)))</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection string-downcase$
  <span class="keyword">:parents</span> (constructor-preliminaries)
  <span class="keyword">:short</span> <span class="string">"A variant of @(tsee acl2::string-downcase) applicable to any string."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The built-in @(tsee acl2::string-downcase) has a guard requiring
      all the characters in the string to be
      &lt;see topic=&#39;@(url standard-char-p)&#39;&gt;standard&lt;/see&gt;.
      This function ``totalizes&#39;&#39; @(tsee acl2::string-downcase) to all strings
      by checking whether all the characters in the string are standard,
      and by throwing a hard error if any of them is not.&lt;/p&gt;
   &lt;p&gt;This facilitates guard verification of code involving this function.
      The hard error seems appropriate for the envisioned usage of this function
      within the XDOC constructors,
      meant to be called to produce XDOC strings during book certification.&lt;/p&gt;"</span>
  (defund string-downcase$
    (<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)
    (declare (xargs <span class="keyword">:guard</span> (stringp <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)))
    (if (<a class="sym-link system" href="../../axioms.html#def-standard-char-listp" data-sym="STANDARD-CHAR-LISTP">standard-char-listp</a> (coerce <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> '<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>))
      (<a class="sym-link system" href="../../axioms.html#def-string-downcase" data-sym="STRING-DOWNCASE">string-downcase</a> <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)
      (<a class="sym-link system" href="../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard?
          'string-downcase$
          <span class="string">"Attempt to downcase non-standard string ~x0."</span>
          <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)
        <span class="string">""</span>)))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stringp-of-string-downcase$
    (stringp (string-downcase$ <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))))</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection string-escape
  <span class="keyword">:parents</span> (constructor-preliminaries)
  <span class="keyword">:short</span> <span class="string">"Escape certain characters in a string, using backslashes."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;We escape each single quote and backquote character
      that occurs in the string.&lt;/p&gt;
   &lt;p&gt;This is used in @(tsee generate-primitive-constructor-for-dir/&amp;&amp;),
      since some of the macros generated by that macro have names
      that include the characters escaped by this function.
      These characters would cause XDOC errors if not escaped.&lt;/p&gt;"</span>
  (defund chars-escape
    (chars)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> chars)))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> chars) nil)
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (if (<a class="sym-link system" href="../../axioms.html#def-member" data-sym="MEMBER">member</a> (car chars) '(#\&#39; #\`))
          (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> #\\ #\&#39; (chars-escape (cdr chars)))
          (cons (car chars)
            (chars-escape (cdr chars)))))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> character-listp-of-chars-escape
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> chars)
      (<a class="sym-link system" href="../../axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> (chars-escape chars)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable chars-escape))))
  (defund string-escape
    (<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)
    (declare (xargs <span class="keyword">:guard</span> (stringp <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)))
    (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((chars (coerce <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> '<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>)) (chars (chars-escape chars))
        (<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> (coerce chars '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)))
      <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stringp-of-string-escape
    (stringp (string-escape <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable string-escape)))))</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection partition-macro-args
  <span class="keyword">:parents</span> (constructor-preliminaries)
  <span class="keyword">:short</span> <span class="string">"Partition the arguments of a macro into a list and an alist."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The XDOC constructors are macros.
      Some of them take a varying number of ``regular&#39;&#39; arguments
      and a varying number of keyword arguments,
      but the keywords are not predefined
      and the two kinds of arguments may be intermixed.&lt;/p&gt;
   &lt;p&gt;This function partitions these intermixed arguments into
      a list of regular arguments and an alist of keyword arguments.
      Each keyword encountered in the input list
      is regarded as starting a keyword argument
      (unless it follows one already);
      if a keyword is not followed by a value,
      it is an error.
      This function does not check for duplicate keywords.
      The output list and alists are in the same order as in the input.&lt;/p&gt;"</span>
  (defund partition-macro-args
    (<a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> ctx)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
      ((<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)) (if (consp (cdr <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>))
          (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (rest-list rest-alist)
            (partition-macro-args (<a class="sym-link system" href="../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) ctx)
            (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> rest-list
              (<a class="sym-link system" href="../../axioms.html#def-acons" data-sym="ACONS">acons</a> (car <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="../../axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) rest-alist)))
          (<a class="sym-link system" href="../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard?
              ctx
              <span class="string">"Missing value for keyword ~x0."</span>
              (car <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>))
            (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil))))
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (rest-list rest-alist)
          (partition-macro-args (cdr <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) ctx)
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cons (car <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>) rest-list)
            rest-alist)))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-of-mv-nth-0-partition-macro-args
    (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
        (partition-macro-args <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> ctx)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable partition-macro-args))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> alistp-of-mv-nth-1-partition-macro-args
    (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (<a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
        (partition-macro-args <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> ctx)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable partition-macro-args)))))</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection keyword-macro-args-to-terms
  <span class="keyword">:parents</span> (constructor-preliminaries)
  <span class="keyword">:short</span> <span class="string">"Turn the keyword arguments of a macro into terms."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This complements @(tsee partition-macro-args),
      which extracts a list of regular arguments
      and an alist of keyword arguments.
      This alist has keys that are keywords
      but values that, in general, are terms that need to be evaluated
      to obtain the actual values of the keyword arguments;
      the terms are the ones supplied by the caller of the macro.
      This function turns that alist into
      a list of terms that, when put inside a @(tsee list),
      construct the alist with evaluated values:
      each term, when evaluated, returns a @(tsee cons) pair.&lt;/p&gt;"</span>
  (defund keyword-macro-args-to-terms
    (alist)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> alist)))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (cons `(cons ,(CAAR XDOC::ALIST) ,(CDAR XDOC::ALIST))
          (keyword-macro-args-to-terms (cdr alist))))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-of-keyword-macro-args-to-terms
    (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (keyword-macro-args-to-terms alist))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable keyword-macro-args-to-terms)))))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc trees
  <span class="keyword">:parents</span> (constructors)
  <span class="keyword">:short</span> <span class="string">"XDOC trees."</span>)</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(order-subtopics trees nil <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection treep
  <span class="keyword">:parents</span> (trees)
  <span class="keyword">:short</span> <span class="string">"Recognize XDOC trees."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;These are the trees produced by the XDOC constructors.&lt;/p&gt;
   &lt;p&gt;These trees have strings at the leaves.
      A non-leaf node consists of one of the following:&lt;/p&gt;
   &lt;ul&gt;
     &lt;li&gt;A single keyword.
         This represents either
         (i) a preprocessor directive
         or (ii) a concatenation of subtrees
         without a surrounding XML tag or preprocessor directive.
         Examples of (i) are @(&#39;:@def&#39;) and @(&#39;:@{}&#39;).
         The keyword @(&#39;:&amp;&amp;&#39;) is used for (ii).
         The latter is useful to treat sequences of trees as single trees.&lt;/li&gt;
     &lt;li&gt;A @(tsee cons) pair
         whose @(tsee car) is a keyword and
         whose @(tsee cdr) is an alist from keywords to subtrees.
         This represents an XML tag,
         identified by the keyword at the @(tsee car),
         with the attributes represented by the alist at the @(tsee cdr).
         Examples are @(&#39;(:p)&#39;) and @(&#39;(:img (:src ...))&#39;).
         The alist may often be @(&#39;nil&#39;).
         The values of the attributes are recursively represented as subtrees,
         but there may often be a single string subtree per attribute.&lt;/li&gt;
   &lt;/ul&gt;
   &lt;p&gt;In some sense,
      the semantics of XDOC trees is defined by their conversion to flat strings.
      See @(tsee tree-to-string).&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (defund treep
      (x)
      (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (stringp x)
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)
          (consp x)
          (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car x))
            (tree-tagp (car x)))
          (tree-listp (cdr x)))))
    (defund tree-listp
      (x)
      (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> x nil))
        (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (treep (car x))
            (tree-listp (cdr x))))))
    (defund tree-tagp
      (x)
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (consp x)
        (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car x))
        (keyword-tree-alistp (cdr x))))
    (defund keyword-tree-alistp
      (x)
      (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> x nil))
        (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (consp (car x))
            (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car (car x)))
            (treep (cdr (car x)))
            (keyword-tree-alistp (cdr x)))))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> treep-when-stringp
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (stringp x) (treep x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable treep))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> tree-listp-when-string-listp
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-string-listp" data-sym="STRING-LISTP">string-listp</a> x)
      (tree-listp x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable tree-listp))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-when-tree-listp
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (tree-listp x)
      (<a class="sym-link system" href="../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable tree-listp))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> treep-of-cons
    (equal (treep (cons x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> x) (tree-tagp x))
        (tree-listp y)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable treep))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> tree-listp-of-cons
    (equal (tree-listp (cons x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (treep x) (tree-listp y)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable tree-listp))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> tagp-of-cons
    (equal (tree-tagp (cons x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> x) (keyword-tree-alistp y)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable tree-tagp))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> keyword-tree-alistp-of-cons
    (equal (keyword-tree-alistp (cons x y))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (consp x)
        (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car x))
        (treep (cdr x))
        (keyword-tree-alistp y)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable keyword-tree-alistp)))))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection tree-to-string
  <span class="keyword">:parents</span> (trees)
  <span class="keyword">:short</span> <span class="string">"Turn a XDOC tree into the string it represents."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;An XDOC tree is turned into a string as follows.
      A leaf tree is already a string and is left unchanged.
      For a non-leaf tree, the subtrees are recursively turned into strings
      and concatenated;
      then the resulting string is surrounded by text
      determined by the root of the non-leaf tree.
      If the root represents a tree concatenation,
      no surrounding text is actually added.
      If the root represents a preprocessor directive,
      the surrounding text @(&#39;&quot;@(...)&quot;&#39;) creates the directive.
      If the root represents an XML tag,
      surrounding text @(&#39;&quot;&lt;tag ... attribute=\&quot;value\&quot; ...&gt;...&lt;/tag&gt;&quot;&#39;)
      creates the XML tag;
      the values of the tag&#39;s attributes (if present)
      are obtained by recursively turning
      the subtrees in the alist into strings.&lt;/p&gt;
   &lt;p&gt;As noted &lt;see topic=&#39;@(url str::concatenation)&#39;&gt;here&lt;/see&gt;,
      string concatenation is slow in ACL2 in general.
      The current implementation of this function
      uses straighforward string concatenation,
      but this could be optimized in the future,
      if concatenating strings turns out to be too slow
      in the actual usage of these XDOC constructors.&lt;/p&gt;
   &lt;p&gt;Note that the @(tsee symbol-name) of a keyword tag
      consists of uppercase letters.
      We use @(tsee string-downcase$)
      to produce lowercase tags and directives.
      We expect that this function will never throw an error
      with the tags and directives supported.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (defund tree-to-string
      (tree)
      (declare (xargs <span class="keyword">:guard</span> (treep tree)
          <span class="keyword">:verify-guards</span> nil))
      (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> tree) (if (<a class="sym-link system" href="../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (stringp tree))
            tree
            <span class="string">""</span>))
        (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (let ((subtrees-string (tree-list-to-string (cdr tree))))
            (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (left-string right-string)
              (keyword-or-tree-tag-to-strings (car tree))
              (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
                left-string
                subtrees-string
                right-string))))))
    (defund tree-list-to-string
      (trees)
      (declare (xargs <span class="keyword">:guard</span> (tree-listp trees)))
      (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> trees) <span class="string">""</span>)
        (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
            (tree-to-string (car trees))
            (tree-list-to-string (cdr trees))))))
    (defund keyword-or-tree-tag-to-strings
      (keyword/tag)
      (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> keyword/tag)
            (tree-tagp keyword/tag))))
      (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> keyword/tag <span class="keyword">:&amp;&amp;</span>) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">""</span> <span class="string">""</span>))
        ((<a class="sym-link system" href="../../axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> keyword/tag
           '(<span class="keyword">:|@&#39;&#39;|</span> <span class="keyword">:|@{}|</span> <span class="keyword">:|@``|</span> <span class="keyword">:@$$</span> <span class="keyword">:|@[]|</span>)) (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((left-char (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> (symbol-name keyword/tag) <span class="number">1</span>)) (right-char (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> (symbol-name keyword/tag) <span class="number">2</span>))
              (left-chars (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> #\@ #\( left-char))
              (right-chars (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> right-char #\)))
              (left-string (coerce left-chars '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))
              (right-string (coerce right-chars '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)))
            (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> left-string right-string)))
        ((<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> keyword/tag) (let ((keyword-chars (coerce (symbol-name keyword/tag) '<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>)))
            (if (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (consp keyword-chars)
                (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (car keyword-chars) #\@))
              (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((keyword-string (coerce (cdr keyword-chars) '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)) (keyword-string (string-downcase$ keyword-string))
                  (left-string (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> <span class="string">"@("</span> keyword-string <span class="string">" "</span>))
                  (right-string <span class="string">")"</span>))
                (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> left-string right-string))
              (<a class="sym-link system" href="../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard?
                  'tree-to-string
                  <span class="string">"Cannot process XDOC tree with root ~x0."</span>
                  keyword/tag)
                (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">""</span> <span class="string">""</span>)))))
        (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((keyword (car keyword/tag)) (keyword-chars (coerce (symbol-name keyword) '<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>))
              (keyword-string (coerce keyword-chars '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))
              (keyword-string (string-downcase$ keyword-string))
              (attributes (cdr keyword/tag))
              (attributes-string (keyword-tree-alist-to-string attributes))
              (left-string (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
                  <span class="string">"&lt;"</span>
                  keyword-string
                  attributes-string
                  <span class="string">"&gt;"</span>))
              (right-string (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> <span class="string">"&lt;/"</span> keyword-string <span class="string">"&gt;"</span>)))
            (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> left-string right-string)))))
    (defund keyword-tree-alist-to-string
      (attributes)
      (declare (xargs <span class="keyword">:guard</span> (keyword-tree-alistp attributes)))
      (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> attributes) <span class="string">""</span>)
        (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((attribute (car attributes)) (keyword (car attribute))
              (tree (cdr attribute))
              (keyword-chars (coerce (symbol-name keyword) '<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a>))
              (keyword-string (coerce keyword-chars '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))
              (keyword-string (string-downcase$ keyword-string))
              (tree-string (tree-to-string tree))
              (attribute-string (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
                  <span class="string">" "</span>
                  keyword-string
                  <span class="string">"=&quot;"</span>
                  tree-string
                  <span class="string">"&quot;"</span>))
              (rest-attributes (cdr attributes))
              (rest-attribute-string (keyword-tree-alist-to-string rest-attributes)))
            (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
              attribute-string
              rest-attribute-string))))))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (make-flag flag-xdoc-tree-to-string
      tree-to-string))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (defthm-flag-xdoc-tree-to-string (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> theorem-for-tree-to-string
        (stringp (tree-to-string tree))
        <span class="keyword">:flag</span> tree-to-string)
      (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> theorem-for-tree-list-to-string
        (stringp (tree-list-to-string trees))
        <span class="keyword">:flag</span> tree-list-to-string)
      (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> theorem-for-keyword-or-tree-tag-to-strings
        (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (stringp (<a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
              (keyword-or-tree-tag-to-strings keyword/tag)))
          (stringp (<a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
              (keyword-or-tree-tag-to-strings keyword/tag))))
        <span class="keyword">:flag</span> keyword-or-tree-tag-to-strings)
      (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> theorem-for-keyword-tree-alist-to-string
        (stringp (keyword-tree-alist-to-string attributes))
        <span class="keyword">:flag</span> keyword-tree-alist-to-string)
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable tree-to-string
           tree-list-to-string
           keyword-or-tree-tag-to-strings
           keyword-tree-alist-to-string
           treep)))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stringp-of-tree-to-string
    (stringp (tree-to-string tree)))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stringp-of-tree-list-to-string
    (stringp (tree-list-to-string trees)))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stringp-of-mv-nth-0-keyword-or-tree-tag-to-strings
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> keyword/tag)
        (tree-tagp keyword/tag))
      (stringp (<a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
          (keyword-or-tree-tag-to-strings keyword/tag))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a>))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stringp-of-mv-nth-1-keyword-or-tree-tag-to-strings
    (stringp (<a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
        (keyword-or-tree-tag-to-strings keyword/tag)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable <a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a>))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stringp-of-keyword-tree-alist-to-string
    (stringp (keyword-tree-alist-to-string attributes)))
  (<a class="sym-link system" href="../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> tree-to-string-verify-guards-lemma
      (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> x)
        (<a class="sym-link system" href="../../axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> (cdr x)))))
  (<a class="sym-link system" href="../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> tree-to-string
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (tree-tagp keyword-tree-alistp treep)
         (<a class="sym-link system" href="../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a>))))))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection make-tree-tag
  <span class="keyword">:parents</span> (trees)
  <span class="keyword">:short</span> <span class="string">"Construct a non-leaf XDOC tree with an XML tag at the root."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is for internal use of the XDOC constructor library.
      Users of this library should use
      constructors for specific tags, e.g. @(tsee p).&lt;/p&gt;
   &lt;p&gt;See also @(tsee make-tree-dir/&amp;&amp;).&lt;/p&gt;"</span>
  (defund make-tree-tag
    (tag attributes trees)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> tag)
          (keyword-tree-alistp attributes)
          (tree-listp trees))))
    (cons (cons tag attributes) trees))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> treep-of-make-tree-tag
    (equal (treep (make-tree-tag tag attributes trees))
      (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> tag)
        (keyword-tree-alistp attributes)
        (tree-listp trees)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable make-tree-tag)))))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection make-tree-dir/&amp;&amp;
  <span class="keyword">:parents</span> (trees)
  <span class="keyword">:short</span> <span class="string">"Construct a non-leaf XDOC tree
          with a preprocessor directive or a tree concatenation at the root."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is for internal use of the XDOC constructor library.
      Users of this library should use
      the constructor @(tsee &amp;&amp;) for concatenation
      or constructors for specific directives, e.g. @(tsee @def).&lt;/p&gt;
   &lt;p&gt;See also @(tsee make-tree-tag).&lt;/p&gt;"</span>
  (defund make-tree-dir/&amp;&amp;
    (dir/&amp;&amp; trees)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> dir/&amp;&amp;) (tree-listp trees))))
    (cons dir/&amp;&amp; trees))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> treep-of-make-tree-dir/&amp;&amp;
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> dir/&amp;&amp;)
      (equal (treep (make-tree-dir/&amp;&amp; dir/&amp;&amp; trees))
        (tree-listp trees)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable make-tree-dir/&amp;&amp;)))))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc primitive-constructors
  <span class="keyword">:parents</span> (constructors)
  <span class="keyword">:short</span> <span class="string">"Primitive XDOC constructors."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;These correspond to
      individual XML tags,
      individual preprocessor directives,
      and tree concatenation.
      In contrast, the
      &lt;see topic=&#39;@(url composite-constructors)&#39;&gt;composite
      XDOC constructors&lt;/see&gt;
      correspond to multiple tags, directives, and concatenations,
      or provide a more concise notation for common attributes.&lt;/p&gt;
   &lt;p&gt;These primitive constructors are
      macros with a variable number of arguments.
      Each argument must be a tree or a keyword,
      such that each keyword is immediately followed by a tree.
      Each keyword-tree pair forms an attribute of an XML tag,
      with the keyword naming the attribute
      and the immediately following tree providing the value of the attribute.
      Keyword-tree pairs can be used only in constructors for XML tags,
      not in constructors for preprocessor directives or tree concatenation.
      Keyword-tree pairs may occur anywhere in the argument list.
      See the &lt;see topic=&#39;@(url constructors)&#39;&gt;top-level topic&lt;/see&gt;
      for example calls of primitive constructors.&lt;/p&gt;
   &lt;p&gt;Since these primitive constructors have a very uniform structure,
      we introduce them via two event-generating macros,
      one for XML tags
      and one for preprocessor directives and tree concatenation.&lt;/p&gt;"</span>)</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(order-subtopics primitive-constructors nil <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection generate-primitive-constructor-for-tag
  <span class="keyword">:parents</span> (primitive-constructors)
  <span class="keyword">:short</span> <span class="string">"Generate a primitive constructor for an XML tag."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The arguments are a keyword for the tag (e.g. @(&#39;:p&#39;) for paragraphs)
      and a documentation string that describes the primitive constructor.
      This documentation string is used as the @(&#39;:short&#39;) string
      of the XDOC topic generated for the primitive constructor itself.&lt;/p&gt;
   &lt;p&gt;The generated XDOC constructor consists of a macro that calls a function
      (also generated),
      as often done with macros.
      We also generate a theorem about the return type of the constructor.&lt;/p&gt;
   &lt;p&gt;The generated macro accepts regular and keyword arguments in any order:
      the former are subtrees for the content between the XML tags;
      the latter are attributes of the XML tag.
      The macro uses @(tsee partition-macro-args) to divide them.&lt;/p&gt;
   &lt;p&gt;The name of the macro includes an added underscore at the end
      if the tag is @(&#39;:table&#39;), @(&#39;:u&#39;), or @(&#39;:see&#39;).
      That is, the generated macro names for these tags are
      @(&#39;table_&#39;), @(&#39;u_&#39;), and @(&#39;see_&#39;).
      The reason is that
      @(&#39;table&#39;) would conflict with the built-in @(tsee table),
      @(&#39;u&#39;) would conflict with the built-in @(tsee u),
      and @(&#39;see&#39;) would conflict with an existing function called @(&#39;see&#39;)
      in community book @(&#39;xdoc/names.lisp&#39;).&lt;/p&gt;
   &lt;p&gt;See also @(tsee generate-primitive-constructor-for-dir/&amp;&amp;).&lt;/p&gt;
   @(def generate-primitive-constructor-for-tag)"</span>
  (defund generate-primitive-constructor-for-tag-fn
    (tag <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> tag) (stringp <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>))))
    (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((macro-name (<a class="sym-link system" href="../../axioms.html#def-case" data-sym="CASE">case</a> tag
           (<span class="keyword">:table</span> 'table_)
           (<span class="keyword">:u</span> 'u_)
           (<span class="keyword">:see</span> 'see_)
           (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-intern_24" data-sym="INTERN$">intern$</a> (symbol-name tag) <span class="string">"XDOC"</span>)))) (fn-name (add-suffix-to-fn macro-name <span class="string">"-FN"</span>))
        (thm-name (<a class="sym-link system" href="../../basis-a.html#def-packn" data-sym="PACKN">packn</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'stringp-of- macro-name)))
        (long (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
            <span class="string">"&lt;p&gt;See the &lt;see topic=&#39;@(url primitive-constructors)&#39;
                   &gt;primitive constructors topic&lt;/see&gt;
                   for information about the kind of arguments
                   that must be passed to this constructor.&lt;/p&gt;"</span>
            <span class="string">"@(def "</span>
            (string-downcase$ (symbol-name macro-name))
            <span class="string">")"</span>)))
      `(defsection ,XDOC::MACRO-NAME
        <span class="keyword">:parents</span> (primitive-constructors)
        <span class="keyword">:short</span> ,XDOC::DOC
        <span class="keyword">:long</span> ,XDOC::LONG
        (defund ,XDOC::FN-NAME
          (attributes trees)
          (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (keyword-tree-alistp attributes)
                (tree-listp trees))))
          (make-tree-tag ,XDOC::TAG
            attributes
            trees))
        (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,XDOC::THM-NAME
          (equal (treep (,XDOC::FN-NAME attributes trees))
            (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (keyword-tree-alistp attributes)
              (tree-listp trees)))
          <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable ,XDOC::FN-NAME))))
        (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> ,XDOC::MACRO-NAME
          (&amp;rest <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a>)
          (<a class="sym-link system" href="../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (trees attributes)
            (partition-macro-args <a class="sym-link system" href="../../defuns.html#def-args" data-sym="ARGS">args</a> ',XDOC::MACRO-NAME)
            (let ((attributes (keyword-macro-args-to-terms attributes)))
              (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> ',XDOC::FN-NAME
                (cons '<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> attributes)
                (cons '<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> trees))))))))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> generate-primitive-constructor-for-tag
    (tag <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>)
    `(<a class="sym-link system" href="../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (generate-primitive-constructor-for-tag-fn ,XDOC::TAG
        ,XDOC::DOC))))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection generate-primitive-constructor-for-dir/&amp;&amp;
  <span class="keyword">:parents</span> (primitive-constructors)
  <span class="keyword">:short</span> <span class="string">"Generate a primitive constructor for
          a preprocessor directive or tree concatenation."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;The arguments are
      a keyword for the directive (e.g. @(&#39;:@def&#39;) for definitions)
      or for tree concatenation (i.e. @(&#39;:&amp;&amp;&#39;)),
      and a documentation string that describes the primitive constructor.
      This documentation string is used as the @(&#39;:short&#39;) string
      of the XDOC topic generated for the primitive constructor itself.&lt;/p&gt;
   &lt;p&gt;The generated XDOC constructor consists of a macro that calls a function
      (also generated),
      as often done with macros.
      We also generate a theorem about the return type of the constructor.&lt;/p&gt;
   &lt;p&gt;See also @(tsee generate-primitive-constructor-for-tag).&lt;/p&gt;
   @(def generate-primitive-constructor-for-dir/&amp;&amp;)"</span>
  (defund generate-primitive-constructor-for-dir/&amp;&amp;-fn
    (dir/&amp;&amp; <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> dir/&amp;&amp;) (stringp <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>))))
    (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((macro-name (add-suffix-to-fn ' (symbol-name dir/&amp;&amp;))) (fn-name (add-suffix-to-fn macro-name <span class="string">"-FN"</span>))
        (thm-name (<a class="sym-link system" href="../../basis-a.html#def-packn" data-sym="PACKN">packn</a> (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> 'stringp-of- macro-name))))
      `(defsection ,XDOC::MACRO-NAME
        <span class="keyword">:parents</span> (primitive-constructors)
        <span class="keyword">:short</span> ,XDOC::DOC
        <span class="keyword">:long</span> ,(CONCATENATE &#39;STRING &quot;@(def &quot;
              (XDOC::STRING-ESCAPE
               (XDOC::STRING-DOWNCASE$ (SYMBOL-NAME XDOC::MACRO-NAME)))
              &quot;)&quot;)
        (defund ,XDOC::FN-NAME
          (trees)
          (declare (xargs <span class="keyword">:guard</span> (tree-listp trees)))
          (make-tree-dir/&amp;&amp; ,XDOC::DIR/&amp;&amp; trees))
        (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,XDOC::THM-NAME
          (equal (treep (,XDOC::FN-NAME trees))
            (tree-listp trees))
          <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable ,XDOC::FN-NAME))))
        (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> ,XDOC::MACRO-NAME
          (&amp;rest trees)
          (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> ',XDOC::FN-NAME (cons '<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> trees))))))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> generate-primitive-constructor-for-dir/&amp;&amp;
    (dir/&amp;&amp; <a class="sym-link system" href="../../history-management.html#def-doc" data-sym="DOC">doc</a>)
    `(<a class="sym-link system" href="../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (generate-primitive-constructor-for-dir/&amp;&amp;-fn ,XDOC::DIR/&amp;&amp;
        ,XDOC::DOC))))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:h1</span> <span class="string">"Construct an XDOC tree for an HTML level-1 heading @(&#39;&lt;h1&gt;...&lt;/h1&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:h2</span> <span class="string">"Construct an XDOC tree for an HTML level-2 heading @(&#39;&lt;h2&gt;...&lt;/h2&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:h3</span> <span class="string">"Construct an XDOC tree for an HTML level-3 heading @(&#39;&lt;h3&gt;...&lt;/h3&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:h4</span> <span class="string">"Construct an XDOC tree for an HTML level-4 heading @(&#39;&lt;h4&gt;...&lt;/h4&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:h5</span> <span class="string">"Construct an XDOC tree for an HTML level-5 heading @(&#39;&lt;h5&gt;...&lt;/h5&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:p</span> <span class="string">"Construct an XDOC tree for an HTML paragraph @(&#39;&lt;p&gt;...&lt;/p&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:blockquote</span> <span class="string">"Construct an XDOC tree for
   an HTML quoted block @(&#39;&lt;blockquote&gt;...&lt;/blockquote&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:li</span> <span class="string">"Construct an XDOC tree for an HTML list item @(&#39;&lt;li&gt;...&lt;/li&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:ul</span> <span class="string">"Construct an XDOC tree for an HTML unordered (bulleted) list @(&#39;&lt;ul&gt;...&lt;/ul&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:ol</span> <span class="string">"Construct an XDOC tree for an HTML ordered (numbered) list @(&#39;&lt;ol&gt;...&lt;/ol&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:dt</span> <span class="string">"Construct an XDOC tree for an HTML term @(&#39;&lt;dt&gt;...&lt;/dt&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:dd</span> <span class="string">"Construct an XDOC tree for an HTML description @(&#39;&lt;dd&gt;...&lt;/dd&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:dl</span> <span class="string">"Construct an XDOC tree for an HTML description list @(&#39;&lt;dl&gt;...&lt;/dl&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-36" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:th</span> <span class="string">"Construct an XDOC tree for an HTML table header cell @(&#39;&lt;th&gt;...&lt;/th&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-37" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:td</span> <span class="string">"Construct an XDOC tree for an HTML table cell @(&#39;&lt;td&gt;...&lt;/td&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:tr</span> <span class="string">"Construct an XDOC tree for an HTML table row @(&#39;&lt;tr&gt;...&lt;/tr&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:table</span> <span class="string">"Construct an XDOC tree for an HTML table @(&#39;&lt;table&gt;...&lt;/table&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:box</span> <span class="string">"Construct an XDOC tree for an XDOC box @(&#39;&lt;box&gt;...&lt;/box&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:br</span> <span class="string">"Construct an XDOC tree for an HTML line break @(&#39;&lt;br&gt;...&lt;/br&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:img</span> <span class="string">"Construct an XDOC tree for an HTML image @(&#39;&lt;img&gt;...&lt;/img&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:b</span> <span class="string">"Construct an XDOC tree for HTML bold text @(&#39;&lt;b&gt;...&lt;/b&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-44" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:i</span> <span class="string">"Construct an XDOC tree for HTML italic text @(&#39;&lt;i&gt;...&lt;/i&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:u</span> <span class="string">"Construct an XDOC tree for HTML underlined text @(&#39;&lt;u&gt;...&lt;/u&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:color</span> <span class="string">"Construct an XDOC tree for HTML colored text @(&#39;&lt;color&gt;...&lt;/color&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:sf</span> <span class="string">"Construct an XDOC tree for HTML sans-serif text @(&#39;&lt;sf&gt;...&lt;/sf&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:tt</span> <span class="string">"Construct an XDOC tree for XDOC inline code @(&#39;&lt;tt&gt;...&lt;/tt&gt;&#39;)
   (which is not rendered using the homonymous HTML tags;
   see @(see markup))."</span>)</pre>
  </div>

<div class="form-block other" id="form-49" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:code</span> <span class="string">"Construct an XDOC tree for XDOC code block @(&#39;&lt;code&gt;...&lt;/code&gt;&#39;)
   (which is not rendered using the homonymous HTML tags;
   see @(see markup))."</span>)</pre>
  </div>

<div class="form-block other" id="form-50" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:a</span> <span class="string">"Construct an XDOC tree for an HTML hyperlink @(&#39;&lt;a&gt;...&lt;/a&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-51" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-tag <span class="keyword">:see</span> <span class="string">"Construct an XDOC tree for an XDOC hyperlink @(&#39;&lt;see&gt;...&lt;/see&gt;&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:&amp;&amp;</span> <span class="string">"Construct an XDOC tree for a concatenation."</span>)</pre>
  </div>

<div class="form-block other" id="form-53" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:|@&#39;&#39;|</span> <span class="string">"Construct an XDOC tree
   for a inline code directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(&#39;...&#39;)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-54" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:|@{}|</span> <span class="string">"Construct an XDOC tree
   for a code block directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;({...})&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-55" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:|@``|</span> <span class="string">"Construct an XDOC tree
   for an evaluation directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(`...`)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-56" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@$$</span> <span class="string">"Construct an XDOC tree
   for a short KaTeK directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;($...$)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:|@[]|</span> <span class="string">"Construct an XDOC tree
   for a long KaTeK directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;([...])&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-58" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@def</span> <span class="string">"Construct an XDOC tree
   for a definition directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(def ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-59" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@gdef</span> <span class="string">"Construct an XDOC tree
   for a generated definition directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(gdef ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-60" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@formals</span> <span class="string">"Construct an XDOC tree
   for a formals directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(formals ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@body</span> <span class="string">"Construct an XDOC tree
   for a body directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(body ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-62" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@measure</span> <span class="string">"Construct an XDOC tree
   for a measure directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(measure ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-63" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@call</span> <span class="string">"Construct an XDOC tree
   for a call directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(call ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-64" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@srclink</span> <span class="string">"Construct an XDOC tree
   for a source link directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(srclink ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-65" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@see</span> <span class="string">"Construct an XDOC tree
   for a topic link directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(see ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-66" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@csee</span> <span class="string">"Construct an XDOC tree
   for a capitalized topic link directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(csee ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-67" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@tsee</span> <span class="string">"Construct an XDOC tree
   for a typewriter topic link directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(tsee ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-68" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@see?</span> <span class="string">"Construct an XDOC tree
   for a conditional topic link directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(see? ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-69" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@url</span> <span class="string">"Construct an XDOC tree
   for a mangled topic link directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(url ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-70" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@sym</span> <span class="string">"Construct an XDOC tree
   for a printed topic link directive &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(sym ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-71" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(generate-primitive-constructor-for-dir/&amp;&amp; <span class="keyword">:@csym</span> <span class="string">"Construct an XDOC tree
   for a capitalized printed topic link directive
   &lt;tt&gt;@&lt;/tt&gt;&lt;tt&gt;(csym ...)&lt;/tt&gt;."</span>)</pre>
  </div>

<div class="form-block other" id="form-72" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc composite-constructors
  <span class="keyword">:parents</span> (constructors)
  <span class="keyword">:short</span> <span class="string">"Composite XDOC constructors."</span>
  <span class="keyword">:long</span> (tree-to-string (p <span class="string">"These correspond to multiple
     XML tags, preprocessor directives, and concatenations,
     or provide a more concise notation for common attributes.
     In contrast,
     the &lt;see topic=&#39;@(url primitive-constructors)&#39;&gt;primitive
     constructors&lt;/see&gt; correspond to single
     XML tags, preprocessor directives, and concatenations."</span>)))</pre>
  </div>

<div class="form-block other" id="form-73" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(order-subtopics composite-constructors nil <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-74" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc generic-composite-constructors
  <span class="keyword">:parents</span> (composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Generic composite XDOC constructors."</span>
  <span class="keyword">:long</span> (tree-to-string (p <span class="string">"These are composite XDOC constructors
     that should be generally useful.
     Other composite XDOC constructors are more specific."</span>)))</pre>
  </div>

<div class="form-block other" id="form-75" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(order-subtopics generic-composite-constructors
  nil
  <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-76" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection topstring
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct an XDOC string from a sequence of XDOC trees."</span>
  <span class="keyword">:long</span> (tree-to-string (&amp;&amp; (p <span class="string">"This can be used to construct XDOC strings at the ``top level&#39;&#39;,
      e.g. @(&#39;:short&#39;) and @(&#39;:long&#39;) documentation string."</span>)
      (@def <span class="string">"topstring"</span>)))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> topstring
    (&amp;rest trees)
    `(tree-to-string (&amp;&amp; ,@XDOC::TREES))))</pre>
  </div>

<div class="form-block other" id="form-77" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection topstring-p
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct an XDOC string with a single paragraph."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"This combines @(tsee topstring) with @(tsee p)."</span>)
    (@def <span class="string">"topstring-p"</span>))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> topstring-p
    (&amp;rest trees)
    `(topstring (p ,@XDOC::TREES))))</pre>
  </div>

<div class="form-block other" id="form-78" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection topstring-@def
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct an XDOC string with a single definition directive."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"This combines @(tsee topstring) with @(tsee @def)."</span>)
    (@def <span class="string">"topstring-@def"</span>))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> topstring-@def
    (&amp;rest trees)
    `(topstring (@def ,@XDOC::TREES))))</pre>
  </div>

<div class="form-block other" id="form-79" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection desc
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct an XDOC tree for a description."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"This consists of
     a paragraph that identifies the thing(s) being described
     followed by a quoted block of a sequence of trees
     that describe the thing(s)."</span>)
    (p <span class="string">"The first argument is either a string for a single thing being described
     or a list of strings for a multiple things being described.
     In the latter case, the strings are separated by line breaks
     in the generated paragraph."</span>)
    (p <span class="string">"An alternative to generating a paragrah followed by a quoted block,
     is to generate an HTML description list @(&#39;&lt;dl&gt;...&lt;/dl&gt;&#39;)
     with the thing(s) that are being described as term(s) @(&#39;&lt;dt&gt;...&lt;/dt&gt;&#39;)
     and with the description trees inside @(&#39;&lt;dd&gt;...&lt;/dd&gt;&#39;).
     However, the terms in a description list are rendered in bold,
     so it seems preferable to use a paragraph and a quoted block."</span>)
    (@def <span class="string">"desc"</span>))
  (defund desc-things-to-string
    (things)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-string-listp" data-sym="STRING-LISTP">string-listp</a> things)))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> things) <span class="string">""</span>)
      ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> (cdr things)) (car things))
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
          (car things)
          <span class="string">"&lt;br/&gt;"</span>
          (desc-things-to-string (cdr things))))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stringp-of-desc-things-to-string
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-string-listp" data-sym="STRING-LISTP">string-listp</a> things)
      (stringp (desc-things-to-string things)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable desc-things-to-string))))
  (defund desc-fn
    (thing/things description)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (stringp thing/things)
            (<a class="sym-link system" href="../../axioms.html#def-string-listp" data-sym="STRING-LISTP">string-listp</a> thing/things))
          (tree-listp description))
        <span class="keyword">:guard-hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable blockquote-fn p-fn)))))
    (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((things (if (stringp thing/things)
           (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> thing/things)
           thing/things)) (things-string (desc-things-to-string things))
        (things-tree (p things-string))
        (description-tree (blockquote-fn nil description)))
      (&amp;&amp; things-tree description-tree)))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> desc
    (thing/things &amp;rest description)
    `(desc-fn ,XDOC::THING/THINGS
      (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> ,@XDOC::DESCRIPTION))))</pre>
  </div>

<div class="form-block other" id="form-80" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection codeblock
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct an XDOC tree for a code block @(&#39;@({...})&#39;)
          from a sequence of strings."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"The arguments must evaluate to strings
     that are the lines of the code block,
     starting with spaces appropriate for the desired indentation
     and with no ending new line characters.
     New line characters are automatically added at the end of each line.
     A new line character is also automatically added before all the lines,
     to ensure the proper formatting in the final XDOC string."</span>)
    (p <span class="string">"Since the XDOC tree is constructed from a sequence of subtrees,
     the aforementioned newlines are not
     directly concatenated with the input strings.
     Instead, each input string is turned into two strings."</span>)
    (p <span class="string">"This XDOC constructor provides a possibly more convenient way
     to enter the lines that form the code block,
     compared to the bare @(tsee @{}) XDOC constructor."</span>)
    (@def <span class="string">"codeblock"</span>))
  (defund codeblock-terminate-lines
    (lines)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-string-listp" data-sym="STRING-LISTP">string-listp</a> lines)))
    (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> lines) nil)
      (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car lines)
          *newline*
          (codeblock-terminate-lines (cdr lines))))))
  (<a class="sym-link system" href="../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> string-listp-of-codeblock-terminate-lines
    (<a class="sym-link system" href="../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../axioms.html#def-string-listp" data-sym="STRING-LISTP">string-listp</a> lines)
      (<a class="sym-link system" href="../../axioms.html#def-string-listp" data-sym="STRING-LISTP">string-listp</a> (codeblock-terminate-lines lines)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable codeblock-terminate-lines))))
  (defund codeblock-fn
    (lines)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../axioms.html#def-string-listp" data-sym="STRING-LISTP">string-listp</a> lines)))
    (|@{}-FN| (cons *newline*
        (codeblock-terminate-lines lines))))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> codeblock
    (&amp;rest lines)
    `(codeblock-fn (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> ,@XDOC::LINES))))</pre>
  </div>

<div class="form-block other" id="form-81" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection ahref
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct an XDOC tree for a string of the form
          @(&#39;&lt;a href=&quot;...&quot;&gt;...&lt;/a&gt;&#39;)."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"This is a fairly common pattern.
     This XDOC constructor obviates the need to type @(&#39;:href&#39;),
     compared to the primitive constructor @(tsee a):
     the first argument is always the URL,
     and the remaining arguments form the text."</span>)
    (@def <span class="string">"ahref"</span>))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> ahref
    (href &amp;rest text)
    `(a <span class="keyword">:href</span> ,XDOC::HREF ,@XDOC::TEXT)))</pre>
  </div>

<div class="form-block other" id="form-82" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection seetopic
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct an XDOC tree for a string of the form
          @(&#39;&lt;see topic=&quot;@(url ...)&quot;&gt;...&lt;/see&gt;&#39;)."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"This is a fairly common pattern,
     with several opportunities for mistyping it.
     This XDOC constructor takes two strings as arguments,
     one for the topic and one for the hyperlinked text."</span>)
    (@def <span class="string">"seetopic"</span>))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> seetopic
    (topic text)
    `(see_ <span class="keyword">:topic</span> (@url ,XDOC::TOPIC) ,XDOC::TEXT)))</pre>
  </div>

<div class="form-block other" id="form-83" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection section
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct a section with a title and some content."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"This provides more abstraction and structure,
     compared to using a specific heading followed by the content."</span>)
    (p <span class="string">"This is currently producing a level-3 heading,
     which is often used for the top-level sectioning of XDOC pages.
     It could be made customizable in the future."</span>)
    (@def <span class="string">"section"</span>))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> section
    (title &amp;rest content)
    `(&amp;&amp; (h3 ,XDOC::TITLE) ,@XDOC::CONTENT)))</pre>
  </div>

<div class="form-block other" id="form-84" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection subsection
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct a subsection with a title and some content."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"This should be used inside a @(tsee section)."</span>)
    (p <span class="string">"Currently this produces a level-4 heading,
     which is adequate since @(tsee section) produces a level-3 heading.
     As mentioned in @(tsee section),
     the exact heading level could be made customizable;
     in order to enforce the right relationship
     between the levels of @(tsee section) and @(tsee subsection),
     this could be based on a changeable global setting (e.g. in a table)."</span>)
    (@def <span class="string">"subsection"</span>))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> subsection
    (title &amp;rest content)
    `(&amp;&amp; (h4 ,XDOC::TITLE) ,@XDOC::CONTENT)))</pre>
  </div>

<div class="form-block other" id="form-85" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection subsubsection
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct a subsubsection with a title and some content."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"This should be used inside a @(tsee subsection)."</span>)
    (p <span class="string">"Currently this produces a level-5 heading.
     See the discussion in @(tsee section) and @(tsee subsection)
     regarding possible future level customization."</span>))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> subsubsection
    (title &amp;rest content)
    `(&amp;&amp; (h5 ,XDOC::TITLE) ,@XDOC::CONTENT)))</pre>
  </div>

<div class="form-block other" id="form-86" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection subsubsubsection
  <span class="keyword">:parents</span> (generic-composite-constructors)
  <span class="keyword">:short</span> <span class="string">"Construct a subsubsubsection with a title and some content."</span>
  <span class="keyword">:long</span> (topstring (p <span class="string">"This should be used inside a @(tsee subsubsection)."</span>)
    (p <span class="string">"Currently this produces a level-6 heading.
     See the discussion in @(tsee section) and @(tsee subsection)
     regarding possible future level customization."</span>))
  (<a class="sym-link system" href="../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> subsubsubsection
    (title &amp;rest content)
    `(&amp;&amp; (h6 ,XDOC::TITLE) ,@XDOC::CONTENT)))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>