<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>parse-xml - ACL2 Book</title>
  <meta property="name" content="parse-xml">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">parse-xml</h1>
    <div class="path"><a href="parse-xml.lisp" class="source-link">books/xdoc/parse-xml</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"XDOC"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="autolink.html" title="Open autolink">"autolink"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-set-state-ok" data-sym="SET-STATE-OK">set-state-ok</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block function" id="def-opentok-p" data-defines="OPENTOK-P" data-references="FIRST,EQ,X,DEFUN" data-used-by="FIND-TAG-IMBALANCE,FLATTEN-TOKEN-FOR-ERRORMSG" data-part-name="OPENTOK-P" data-part-args="X" data-part-body="X,FIRST,EQ" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPENTOK-P">opentok-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-opentok-p" data-sym="OPENTOK-P" title="(defun xdoc::opentok-p (xdoc::x) (eq (first xdoc::x) :open))">opentok-p</a> (x) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-first" data-sym="FIRST">first</a> x) <span class="keyword">:open</span>))</pre>
  </div>

<div class="form-block function" id="def-opentok-name" data-defines="OPENTOK-NAME" data-references="SECOND,X,DEFUN" data-used-by="FIND-TAG-IMBALANCE,OPEN-TAG-BACKTRACE-ENTRY,FLATTEN-TOKEN-FOR-ERRORMSG" data-part-name="OPENTOK-NAME" data-part-args="X" data-part-body="X,SECOND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPENTOK-NAME">opentok-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-opentok-name" data-sym="OPENTOK-NAME" title="(defun xdoc::opentok-name (xdoc::x) (second xdoc::x))">opentok-name</a> (x) (<a class="sym-link system" href="../../axioms.html#def-second" data-sym="SECOND">second</a> x))</pre>
  </div>

<div class="form-block function" id="def-opentok-atts" data-defines="OPENTOK-ATTS" data-references="THIRD,X,DEFUN" data-used-by="FLATTEN-TOKEN-FOR-ERRORMSG" data-part-name="OPENTOK-ATTS" data-part-args="X" data-part-body="X,THIRD" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPENTOK-ATTS">opentok-atts</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-opentok-atts" data-sym="OPENTOK-ATTS" title="(defun xdoc::opentok-atts (xdoc::x) (third xdoc::x))">opentok-atts</a> (x) (<a class="sym-link system" href="../../axioms.html#def-third" data-sym="THIRD">third</a> x))</pre>
  </div>

<div class="form-block function" id="def-opentok-loc" data-defines="OPENTOK-LOC" data-references="FOURTH,X,DEFUN" data-used-by="OPEN-TAG-BACKTRACE-ENTRY" data-part-name="OPENTOK-LOC" data-part-args="X" data-part-body="X,FOURTH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPENTOK-LOC">opentok-loc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-opentok-loc" data-sym="OPENTOK-LOC" title="(defun xdoc::opentok-loc (xdoc::x) (fourth xdoc::x))">opentok-loc</a> (x) (<a class="sym-link system" href="../../axioms.html#def-fourth" data-sym="FOURTH">fourth</a> x))</pre>
  </div>

<div class="form-block function" id="def-closetok-p" data-defines="CLOSETOK-P" data-references="FIRST,EQ,X,DEFUN" data-used-by="FIND-TAG-IMBALANCE,FLATTEN-TOKEN-FOR-ERRORMSG" data-part-name="CLOSETOK-P" data-part-args="X" data-part-body="X,FIRST,EQ" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CLOSETOK-P">closetok-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-closetok-p" data-sym="CLOSETOK-P" title="(defun xdoc::closetok-p (xdoc::x) (eq (first xdoc::x) :close))">closetok-p</a>
  (x)
  (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-first" data-sym="FIRST">first</a> x) <span class="keyword">:close</span>))</pre>
  </div>

<div class="form-block function" id="def-closetok-name" data-defines="CLOSETOK-NAME" data-references="SECOND,X,DEFUN" data-used-by="FIND-TAG-IMBALANCE,FLATTEN-TOKEN-FOR-ERRORMSG" data-part-name="CLOSETOK-NAME" data-part-args="X" data-part-body="X,SECOND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CLOSETOK-NAME">closetok-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-closetok-name" data-sym="CLOSETOK-NAME" title="(defun xdoc::closetok-name (xdoc::x) (second xdoc::x))">closetok-name</a> (x) (<a class="sym-link system" href="../../axioms.html#def-second" data-sym="SECOND">second</a> x))</pre>
  </div>

<div class="form-block function" id="def-entitytok-p" data-defines="ENTITYTOK-P" data-references="FIRST,EQ,X,DEFUN" data-used-by="FLATTEN-TOKEN-FOR-ERRORMSG" data-part-name="ENTITYTOK-P" data-part-args="X" data-part-body="X,FIRST,EQ" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENTITYTOK-P">entitytok-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-entitytok-p" data-sym="ENTITYTOK-P" title="(defun xdoc::entitytok-p (xdoc::x) (eq (first xdoc::x) :entity))">entitytok-p</a>
  (x)
  (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-first" data-sym="FIRST">first</a> x) <span class="keyword">:entity</span>))</pre>
  </div>

<div class="form-block function" id="def-entitytok-type" data-defines="ENTITYTOK-TYPE" data-references="SECOND,X,DEFUN" data-used-by="ENTITYTOK-AS-PLAINTEXT,ENTITYTOK-AS-ENTITY" data-part-name="ENTITYTOK-TYPE" data-part-args="X" data-part-body="X,SECOND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENTITYTOK-TYPE">entitytok-type</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-entitytok-type" data-sym="ENTITYTOK-TYPE" title="(defun xdoc::entitytok-type (xdoc::x) (second xdoc::x))">entitytok-type</a> (x) (<a class="sym-link system" href="../../axioms.html#def-second" data-sym="SECOND">second</a> x))</pre>
  </div>

<div class="form-block function" id="def-texttok-p" data-defines="TEXTTOK-P" data-references="FIRST,EQ,X,DEFUN" data-used-by="FLATTEN-TOKEN-FOR-ERRORMSG" data-part-name="TEXTTOK-P" data-part-args="X" data-part-body="X,FIRST,EQ" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TEXTTOK-P">texttok-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-texttok-p" data-sym="TEXTTOK-P" title="(defun xdoc::texttok-p (xdoc::x) (eq (first xdoc::x) :text))">texttok-p</a> (x) (<a class="sym-link system" href="../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../axioms.html#def-first" data-sym="FIRST">first</a> x) <span class="keyword">:text</span>))</pre>
  </div>

<div class="form-block function" id="def-mcflatten" data-defines="MCFLATTEN" data-references="CDR,CAR,CONS,ATOM,IF,ACC,X,DEFUN" data-used-by="TEXTTOK-TEXT" data-part-name="MCFLATTEN" data-part-args="ACC,X" data-part-body="CDR,CAR,MCFLATTEN,ACC,CONS,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MCFLATTEN">mcflatten</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-mcflatten" data-sym="MCFLATTEN" title="(defun xdoc::mcflatten (xdoc::x xdoc::acc)
  (if (atom xdoc::x)
      (cons xdoc::x xdoc::acc)
      (xdoc::mcflatten (car xdoc::x)
       (xdoc::mcflatten (cdr xdoc::x) xdoc::acc))))">mcflatten</a>
  (x acc)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (cons x acc)
    (<a class="sym-link local-def" href="#def-mcflatten" data-sym="MCFLATTEN" title="(defun xdoc::mcflatten (xdoc::x xdoc::acc)
  (if (atom xdoc::x)
      (cons xdoc::x xdoc::acc)
      (xdoc::mcflatten (car xdoc::x)
       (xdoc::mcflatten (cdr xdoc::x) xdoc::acc))))">mcflatten</a> (car x)
      (<a class="sym-link local-def" href="#def-mcflatten" data-sym="MCFLATTEN" title="(defun xdoc::mcflatten (xdoc::x xdoc::acc)
  (if (atom xdoc::x)
      (cons xdoc::x xdoc::acc)
      (xdoc::mcflatten (car xdoc::x)
       (xdoc::mcflatten (cdr xdoc::x) xdoc::acc))))">mcflatten</a> (cdr x) acc))))</pre>
  </div>

<div class="form-block function" id="def-texttok-texttree" data-defines="TEXTTOK-TEXTTREE" data-references="SECOND,X,DEFUN" data-used-by="TEXTTOK-TEXT" data-part-name="TEXTTOK-TEXTTREE" data-part-args="X" data-part-body="X,SECOND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TEXTTOK-TEXTTREE">texttok-texttree</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-texttok-texttree" data-sym="TEXTTOK-TEXTTREE" title="(defun xdoc::texttok-texttree (xdoc::x) (second xdoc::x))">texttok-texttree</a> (x) (<a class="sym-link system" href="../../axioms.html#def-second" data-sym="SECOND">second</a> x))</pre>
  </div>

<div class="form-block function" id="def-texttok-text" data-defines="TEXTTOK-TEXT" data-references="MCFLATTEN,FAST-STRING-APPEND-LST,ATOM,IF,TEXTTOK-TEXTTREE,TREE,LET,X,DEFUN" data-used-by="FLATTEN-TOKEN-FOR-ERRORMSG" data-part-name="TEXTTOK-TEXT" data-part-args="X" data-part-body="MCFLATTEN,FAST-STRING-APPEND-LST,ATOM,IF,X,TEXTTOK-TEXTTREE,TREE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TEXTTOK-TEXT">texttok-text</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-texttok-text" data-sym="TEXTTOK-TEXT" title="(defun xdoc::texttok-text (xdoc::x)
  (let ((xdoc::tree (xdoc::texttok-texttree xdoc::x)))
    (if (atom xdoc::tree)
        xdoc::tree
        (str::fast-string-append-lst">texttok-text</a>
  (x)
  (let ((tree (<a class="sym-link local-def" href="#def-texttok-texttree" data-sym="TEXTTOK-TEXTTREE" title="(defun xdoc::texttok-texttree (xdoc::x) (second xdoc::x))">texttok-texttree</a> x)))
    (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> tree)
      tree
      (fast-string-append-lst (<a class="sym-link local-def" href="#def-mcflatten" data-sym="MCFLATTEN" title="(defun xdoc::mcflatten (xdoc::x xdoc::acc)
  (if (atom xdoc::x)
      (cons xdoc::x xdoc::acc)
      (xdoc::mcflatten (car xdoc::x)
       (xdoc::mcflatten (cdr xdoc::x) xdoc::acc))))">mcflatten</a> (<a class="sym-link local-def" href="#def-texttok-texttree" data-sym="TEXTTOK-TEXTTREE" title="(defun xdoc::texttok-texttree (xdoc::x) (second xdoc::x))">texttok-texttree</a> x) nil)))))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *nls*
  (coerce (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> #\
) '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))</pre>
  </div>

<div class="form-block function" id="def-read-until" data-defines="READ-UNTIL" data-references="CONS,+,T,MEMBER,CHAR,CHAR-N,MV,>=,WHEN,B*,ACC,STOP-CHARS,XL,N,X,DEFUN" data-used-by="PARSE-XML-AUX,READ-ENTITY,READ-ATTRVAL" data-part-name="READ-UNTIL" data-part-args="ACC,STOP-CHARS,XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-UNTIL">read-until</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-until" data-sym="READ-UNTIL" title="(defun xdoc::read-until (xdoc::x xdoc::n xdoc::xl xdoc::stop-chars xdoc::acc)
  &quot;Returns (MV FOUNDP N ACC)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::n xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">read-until</a>
  (x n xl stop-chars acc)
  <span class="string">"Returns (MV FOUNDP N ACC)"</span>
  (b* (((when (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> n xl)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil n acc)) (char-n (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n))
      ((when (<a class="sym-link system" href="../../axioms.html#def-member" data-sym="MEMBER">member</a> char-n stop-chars)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> n acc)))
    (<a class="sym-link local-def" href="#def-read-until" data-sym="READ-UNTIL" title="(defun xdoc::read-until (xdoc::x xdoc::n xdoc::xl xdoc::stop-chars xdoc::acc)
  &quot;Returns (MV FOUNDP N ACC)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::n xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">read-until</a> x
      (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n)
      xl
      stop-chars
      (cons char-n acc))))</pre>
  </div>

<div class="form-block function" id="def-read-name-aux" data-defines="READ-NAME-AUX" data-references="CONS,+,EQL,CHAR<=,AND,OR,CHAR,CHAR-N,MV,>=,WHEN,B*,ACC,XL,N,X,DEFUN" data-used-by="READ-NAME" data-part-name="READ-NAME-AUX" data-part-args="ACC,XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-NAME-AUX">read-name-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-name-aux" data-sym="READ-NAME-AUX" title="(defun xdoc::read-name-aux (xdoc::x xdoc::n xdoc::xl xdoc::acc)
  &quot;Returns (MV N ACC)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv xdoc::n xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">read-name-aux</a>
  (x n xl acc)
  <span class="string">"Returns (MV N ACC)"</span>
  (b* (((when (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> n xl)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> n acc)) (char-n (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n))
      ((when (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-char_3C_3D" data-sym="CHAR&lt;=">char&lt;=</a> #\a char-n) (<a class="sym-link system" href="../../axioms.html#def-char_3C_3D" data-sym="CHAR&lt;=">char&lt;=</a> char-n #\z))
           (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-char_3C_3D" data-sym="CHAR&lt;=">char&lt;=</a> #\Z char-n) (<a class="sym-link system" href="../../axioms.html#def-char_3C_3D" data-sym="CHAR&lt;=">char&lt;=</a> char-n #\Z))
           (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-char_3C_3D" data-sym="CHAR&lt;=">char&lt;=</a> #\0 char-n) (<a class="sym-link system" href="../../axioms.html#def-char_3C_3D" data-sym="CHAR&lt;=">char&lt;=</a> char-n #\9))
           (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> char-n #\_)
           (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> char-n #\-))) (<a class="sym-link local-def" href="#def-read-name-aux" data-sym="READ-NAME-AUX" title="(defun xdoc::read-name-aux (xdoc::x xdoc::n xdoc::xl xdoc::acc)
  &quot;Returns (MV N ACC)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv xdoc::n xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">read-name-aux</a> x
          (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n)
          xl
          (cons char-n acc))))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> n acc)))</pre>
  </div>

<div class="form-block function" id="def-read-name" data-defines="READ-NAME" data-references="RCHARS-TO-STRING,STR,ERROR-CONTEXT,*NLS*,STRING,QUOTE,CHAR,LIST,COERCE,CAT,CONSP,UNLESS,READ-NAME-AUX,RCHARS,MV,B*,XL,N,X,DEFUN" data-used-by="READ-TAG,READ-CLOSE-TAG,READ-TAG-ATTRIBUTES" data-part-name="READ-NAME" data-part-args="XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-NAME">read-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-name" data-sym="READ-NAME" title="(defun xdoc::read-name (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N NAME-STR)&quot;
  (xdoc::b*
   (((xdoc::mv xdoc::n xdoc::rchars)
     (xdoc::read-name-aux xdoc::x xdoc::n xdoc::xl nil))
...">read-name</a>
  (x n xl)
  <span class="string">"Returns (MV ERR N NAME-STR)"</span>
  (b* (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> n rchars) (<a class="sym-link local-def" href="#def-read-name-aux" data-sym="READ-NAME-AUX" title="(defun xdoc::read-name-aux (xdoc::x xdoc::n xdoc::xl xdoc::acc)
  &quot;Returns (MV N ACC)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv xdoc::n xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">read-name-aux</a> x n xl nil)) ((unless (consp rchars)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Expected a name, but found unexpected character "</span>
            (coerce (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n)) '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)
            *nls*
            <span class="string">"Nearby text: {"</span>
            (error-context x n xl)
            <span class="string">"}"</span>
            *nls*)
          n
          nil))
      (str (rchars-to-string rchars)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil n str)))</pre>
  </div>

<div class="form-block function" id="def-read-attrval" data-defines="READ-ATTRVAL" data-references="RCHARS-TO-STRING,VAL-STR,READ-UNTIL,CHARS,FOUND-ENDP,+,ERROR-CONTEXT,*NLS*,STRING,QUOTE,LIST,COERCE,CAT,MV,EQL,OR,UNLESS,CHAR,QUOTE-CHAR,SAVED-N,B*,XL,N,X,DEFUN" data-used-by="READ-TAG-ATTRIBUTES" data-part-name="READ-ATTRVAL" data-part-args="XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-ATTRVAL">read-attrval</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-attrval" data-sym="READ-ATTRVAL" title="(defun xdoc::read-attrval (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N VAL-STR)&quot;
  (xdoc::b*
   ((xdoc::saved-n xdoc::n) (xdoc::quote-char (char xdoc::x xdoc::n))
    ((unless (or (eql xdoc::quote-char #\&quot;) (eql xdoc::quote-char #\&#39;)))
...">read-attrval</a>
  (x n xl)
  <span class="string">"Returns (MV ERR N VAL-STR)"</span>
  (b* ((saved-n n) (quote-char (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n))
      ((unless (<a class="sym-link system" href="../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> quote-char #\&quot;) (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> quote-char #\&#39;))) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Expected value to start with a quote, but found "</span>
            (coerce (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n)) '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)
            *nls*
            <span class="string">"Nearby text: {"</span>
            (error-context x n xl)
            <span class="string">"}"</span>
            *nls*)
          n
          nil))
      (n (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> found-endp n chars) (<a class="sym-link local-def" href="#def-read-until" data-sym="READ-UNTIL" title="(defun xdoc::read-until (xdoc::x xdoc::n xdoc::xl xdoc::stop-chars xdoc::acc)
  &quot;Returns (MV FOUNDP N ACC)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::n xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">read-until</a> x
          n
          xl
          (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> quote-char)
          nil))
      ((unless found-endp) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Attribute value never ends."</span>
            *nls*
            <span class="string">"Nearby text: {"</span>
            (error-context x saved-n xl)
            <span class="string">"}"</span>
            *nls*)
          n
          nil))
      (n (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">1</span>))
      (val-str (rchars-to-string chars)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil n val-str)))</pre>
  </div>

<div class="form-block function" id="def-read-tag-attributes" data-defines="READ-TAG-ATTRIBUTES" data-references="READ-ATTRVAL,VAL1,ACONS,READ-NAME,KEY1,ERR,T,<,AND,UNLESS,+,CHAR,EQL,ERROR-CONTEXT,*NLS*,CAT,MV,>=,WHEN,SKIP-PAST-WS,B*,ATTS,TAG-START-N,XL,N,X,DEFUN" data-used-by="READ-TAG" data-part-name="READ-TAG-ATTRIBUTES" data-part-args="ATTS,TAG-START-N,XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-TAG-ATTRIBUTES">read-tag-attributes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-tag-attributes" data-sym="READ-TAG-ATTRIBUTES" title="(defun xdoc::read-tag-attributes
       (xdoc::x xdoc::n xdoc::xl xdoc::tag-start-n xdoc::atts)
  &quot;Returns (MV ERR N ATTS CLOSEP)&quot;
  (xdoc::b*
   ((xdoc::n (xdoc::skip-past-ws xdoc::x xdoc::n xdoc::xl))
...">read-tag-attributes</a>
  (x n xl tag-start-n atts)
  <span class="string">"Returns (MV ERR N ATTS CLOSEP)"</span>
  (b* ((n (skip-past-ws x n xl)) ((when (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> n xl)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Tag never closes."</span>
            *nls*
            <span class="string">"Nearby text: {"</span>
            (error-context x tag-start-n xl)
            <span class="string">"}"</span>
            *nls*)
          n
          nil
          nil))
      ((when (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\&gt;)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n) atts nil))
      ((when (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\/)) (b* ((n (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n)) ((unless (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; n xl) (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\&gt;))) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Stray / in tag."</span>
                  *nls*
                  <span class="string">"Nearby text: {"</span>
                  (error-context x tag-start-n xl)
                  <span class="string">"}"</span>
                  *nls*)
                n
                nil
                nil)))
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n) atts <a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a>)))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n key1) (<a class="sym-link local-def" href="#def-read-name" data-sym="READ-NAME" title="(defun xdoc::read-name (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N NAME-STR)&quot;
  (xdoc::b*
   (((xdoc::mv xdoc::n xdoc::rchars)
     (xdoc::read-name-aux xdoc::x xdoc::n xdoc::xl nil))
...">read-name</a> x n xl))
      ((when err) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n nil nil))
      (n (skip-past-ws x n xl))
      ((when (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> n xl)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Tag never closes."</span>
            *nls*
            <span class="string">"Nearby text: {"</span>
            (error-context x tag-start-n xl)
            <span class="string">"}"</span>
            *nls*)
          n
          nil
          nil))
      ((unless (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\=)) (<a class="sym-link local-def" href="#def-read-tag-attributes" data-sym="READ-TAG-ATTRIBUTES" title="(defun xdoc::read-tag-attributes
       (xdoc::x xdoc::n xdoc::xl xdoc::tag-start-n xdoc::atts)
  &quot;Returns (MV ERR N ATTS CLOSEP)&quot;
  (xdoc::b*
   ((xdoc::n (xdoc::skip-past-ws xdoc::x xdoc::n xdoc::xl))
...">read-tag-attributes</a> x
          n
          xl
          tag-start-n
          (<a class="sym-link system" href="../../axioms.html#def-acons" data-sym="ACONS">acons</a> key1 nil atts)))
      (n (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">1</span>))
      (n (skip-past-ws x n xl))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n val1) (<a class="sym-link local-def" href="#def-read-attrval" data-sym="READ-ATTRVAL" title="(defun xdoc::read-attrval (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N VAL-STR)&quot;
  (xdoc::b*
   ((xdoc::saved-n xdoc::n) (xdoc::quote-char (char xdoc::x xdoc::n))
    ((unless (or (eql xdoc::quote-char #\&quot;) (eql xdoc::quote-char #\&#39;)))
...">read-attrval</a> x n xl))
      ((when err) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n nil nil)))
    (<a class="sym-link local-def" href="#def-read-tag-attributes" data-sym="READ-TAG-ATTRIBUTES" title="(defun xdoc::read-tag-attributes
       (xdoc::x xdoc::n xdoc::xl xdoc::tag-start-n xdoc::atts)
  &quot;Returns (MV ERR N ATTS CLOSEP)&quot;
  (xdoc::b*
   ((xdoc::n (xdoc::skip-past-ws xdoc::x xdoc::n xdoc::xl))
...">read-tag-attributes</a> x
      n
      xl
      tag-start-n
      (<a class="sym-link system" href="../../axioms.html#def-acons" data-sym="ACONS">acons</a> key1 val1 atts))))</pre>
  </div>

<div class="form-block function" id="def-read-close-tag" data-defines="READ-CLOSE-TAG" data-references="LIST,CLOSE,+,ERROR-CONTEXT,*NLS*,CAT,CHAR,EQL,<,AND,UNLESS,WHEN,READ-NAME,NAME,ERR,MV,SKIP-PAST-WS,SAVED-N,B*,XL,N,X,DEFUN" data-used-by="READ-TAG" data-part-name="READ-CLOSE-TAG" data-part-args="XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-CLOSE-TAG">read-close-tag</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-close-tag" data-sym="READ-CLOSE-TAG" title="(defun xdoc::read-close-tag (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N TOKEN-LIST)&quot;
  (xdoc::b*
   ((xdoc::saved-n xdoc::n)
    (xdoc::n (xdoc::skip-past-ws xdoc::x xdoc::n xdoc::xl))
...">read-close-tag</a>
  (x n xl)
  <span class="string">"Returns (MV ERR N TOKEN-LIST)"</span>
  (b* ((saved-n n) (n (skip-past-ws x n xl))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n name) (<a class="sym-link local-def" href="#def-read-name" data-sym="READ-NAME" title="(defun xdoc::read-name (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N NAME-STR)&quot;
  (xdoc::b*
   (((xdoc::mv xdoc::n xdoc::rchars)
     (xdoc::read-name-aux xdoc::x xdoc::n xdoc::xl nil))
...">read-name</a> x n xl))
      ((when err) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n nil))
      (n (skip-past-ws x n xl))
      ((unless (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (&lt; n xl) (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\&gt;))) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Invalid closing tag."</span>
            *nls*
            <span class="string">"Nearby text: {"</span>
            (error-context x saved-n xl)
            <span class="string">"}"</span>
            *nls*)
          n
          nil))
      (n (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n))
      (close (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:close</span> name)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil n (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> close))))</pre>
  </div>

<div class="form-block function" id="def-skip-declaration" data-defines="SKIP-DECLARATION" data-references="CHAR,EQL,AND,UNLESS,ERROR-CONTEXT,*NLS*,CAT,MV,+,>=,WHEN,B*,START-N,XL,N,X,DEFUN" data-used-by="READ-TAG" data-part-name="SKIP-DECLARATION" data-part-args="START-N,XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SKIP-DECLARATION">skip-declaration</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-skip-declaration" data-sym="SKIP-DECLARATION" title="(defun xdoc::skip-declaration (xdoc::x xdoc::n xdoc::xl xdoc::start-n)
  &quot;Returns (MV ERR N NIL)&quot;
  (xdoc::b*
   (((when (&gt;= (+ 1 xdoc::n) xdoc::xl))
     (xdoc::mv
...">skip-declaration</a>
  (x n xl start-n)
  <span class="string">"Returns (MV ERR N NIL)"</span>
  (b* (((when (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n) xl)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"&lt;? ... ?&gt; declaration never closes."</span>
           *nls*
           <span class="string">"Nearby text: {"</span>
           (error-context x start-n xl)
           <span class="string">"}"</span>
           *nls*)
         n
         nil)) ((unless (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\?)
           (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">1</span>)) #\&gt;))) (<a class="sym-link local-def" href="#def-skip-declaration" data-sym="SKIP-DECLARATION" title="(defun xdoc::skip-declaration (xdoc::x xdoc::n xdoc::xl xdoc::start-n)
  &quot;Returns (MV ERR N NIL)&quot;
  (xdoc::b*
   (((when (&gt;= (+ 1 xdoc::n) xdoc::xl))
     (xdoc::mv
...">skip-declaration</a> x
          (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">1</span>)
          xl
          start-n)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">2</span>) nil)))</pre>
  </div>

<div class="form-block function" id="def-skip-entity-stuff" data-defines="SKIP-ENTITY-STUFF" data-references="CHAR,EQL,AND,UNLESS,ERROR-CONTEXT,*NLS*,CAT,MV,+,>=,WHEN,B*,START-N,XL,N,X,DEFUN" data-used-by="READ-TAG" data-part-name="SKIP-ENTITY-STUFF" data-part-args="START-N,XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SKIP-ENTITY-STUFF">skip-entity-stuff</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-skip-entity-stuff" data-sym="SKIP-ENTITY-STUFF" title="(defun xdoc::skip-entity-stuff (xdoc::x xdoc::n xdoc::xl xdoc::start-n)
  &quot;Returns (MV ERR N NIL)&quot;
  (xdoc::b*
   (((when (&gt;= (+ 1 xdoc::n) xdoc::xl))
     (xdoc::mv
...">skip-entity-stuff</a>
  (x n xl start-n)
  <span class="string">"Returns (MV ERR N NIL)"</span>
  (b* (((when (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n) xl)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"&lt;! ... ]&gt; declaration never closes."</span>
           *nls*
           <span class="string">"Nearby text: {"</span>
           (error-context x start-n xl)
           <span class="string">"}"</span>
           *nls*)
         n
         nil)) ((unless (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\])
           (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">1</span>)) #\&gt;))) (<a class="sym-link local-def" href="#def-skip-entity-stuff" data-sym="SKIP-ENTITY-STUFF" title="(defun xdoc::skip-entity-stuff (xdoc::x xdoc::n xdoc::xl xdoc::start-n)
  &quot;Returns (MV ERR N NIL)&quot;
  (xdoc::b*
   (((when (&gt;= (+ 1 xdoc::n) xdoc::xl))
     (xdoc::mv
...">skip-entity-stuff</a> x
          (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">1</span>)
          xl
          start-n)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> n <span class="number">2</span>) nil)))</pre>
  </div>

<div class="form-block function" id="def-read-tag" data-defines="READ-TAG" data-references="CLOSE,NOT,REVERSE,LIST,OPEN,READ-TAG-ATTRIBUTES,CLOSEP,ATTS,READ-NAME,NAME,ERR,READ-CLOSE-TAG,SKIP-ENTITY-STUFF,SKIP-DECLARATION,CHAR,EQL,ERROR-CONTEXT,*NLS*,CAT,MV,>=,WHEN,SKIP-PAST-WS,+,TAG-START-N,B*,XL,N,X,DEFUN" data-used-by="PARSE-XML-AUX" data-part-name="READ-TAG" data-part-args="XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-TAG">read-tag</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-tag" data-sym="READ-TAG" title="(defun xdoc::read-tag (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N TOKEN-LIST)&quot;
  (xdoc::b*
   ((xdoc::tag-start-n xdoc::n) (xdoc::n (+ 1 xdoc::n))
    (xdoc::n (xdoc::skip-past-ws xdoc::x xdoc::n xdoc::xl))
...">read-tag</a>
  (x n xl)
  <span class="string">"Returns (MV ERR N TOKEN-LIST)"</span>
  (b* ((tag-start-n n) (n (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n))
      (n (skip-past-ws x n xl))
      ((when (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> n xl)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Tag never closes."</span>
            *nls*
            <span class="string">"Nearby text: {"</span>
            (error-context x tag-start-n xl)
            <span class="string">"}"</span>
            *nls*)
          n
          nil))
      ((when (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\?)) (<a class="sym-link local-def" href="#def-skip-declaration" data-sym="SKIP-DECLARATION" title="(defun xdoc::skip-declaration (xdoc::x xdoc::n xdoc::xl xdoc::start-n)
  &quot;Returns (MV ERR N NIL)&quot;
  (xdoc::b*
   (((when (&gt;= (+ 1 xdoc::n) xdoc::xl))
     (xdoc::mv
...">skip-declaration</a> x
          n
          xl
          tag-start-n))
      ((when (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\!)) (<a class="sym-link local-def" href="#def-skip-entity-stuff" data-sym="SKIP-ENTITY-STUFF" title="(defun xdoc::skip-entity-stuff (xdoc::x xdoc::n xdoc::xl xdoc::start-n)
  &quot;Returns (MV ERR N NIL)&quot;
  (xdoc::b*
   (((when (&gt;= (+ 1 xdoc::n) xdoc::xl))
     (xdoc::mv
...">skip-entity-stuff</a> x
          n
          xl
          tag-start-n))
      ((when (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n) #\/)) (<a class="sym-link local-def" href="#def-read-close-tag" data-sym="READ-CLOSE-TAG" title="(defun xdoc::read-close-tag (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N TOKEN-LIST)&quot;
  (xdoc::b*
   ((xdoc::saved-n xdoc::n)
    (xdoc::n (xdoc::skip-past-ws xdoc::x xdoc::n xdoc::xl))
...">read-close-tag</a> x (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n) xl))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n name) (<a class="sym-link local-def" href="#def-read-name" data-sym="READ-NAME" title="(defun xdoc::read-name (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N NAME-STR)&quot;
  (xdoc::b*
   (((xdoc::mv xdoc::n xdoc::rchars)
     (xdoc::read-name-aux xdoc::x xdoc::n xdoc::xl nil))
...">read-name</a> x n xl))
      ((when err) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n nil))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n atts closep) (<a class="sym-link local-def" href="#def-read-tag-attributes" data-sym="READ-TAG-ATTRIBUTES" title="(defun xdoc::read-tag-attributes
       (xdoc::x xdoc::n xdoc::xl xdoc::tag-start-n xdoc::atts)
  &quot;Returns (MV ERR N ATTS CLOSEP)&quot;
  (xdoc::b*
   ((xdoc::n (xdoc::skip-past-ws xdoc::x xdoc::n xdoc::xl))
...">read-tag-attributes</a> x
          n
          xl
          tag-start-n
          nil))
      ((when err) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n nil))
      (open (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:open</span> name
          (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> atts)
          tag-start-n))
      ((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> closep)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil n (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> open)))
      (close (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:close</span> name)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil n (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> open close))))</pre>
  </div>

<div class="form-block function" id="def-keyword-from-entity-string" data-defines="KEYWORD-FROM-ENTITY-STRING" data-references="INTERN,STRING-UPCASE,CHAR,CHAR<=,EQUAL,NOT,AND,IF,NAME,LET,S,DEFUN" data-used-by="ENTITYTOK-AS-PLAINTEXT-FAL,ENTITY-KEYWORDS-TO-STRINGS-FAL,ENTITY-STRINGS-TO-TOKENS-FAL" data-part-name="KEYWORD-FROM-ENTITY-STRING" data-part-args="S" data-part-body="INTERN,STRING-UPCASE,CHAR,CHAR<=,S,EQUAL,NOT,AND,IF,NAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="KEYWORD-FROM-ENTITY-STRING">keyword-from-entity-string</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-keyword-from-entity-string" data-sym="KEYWORD-FROM-ENTITY-STRING" title="(defun xdoc::keyword-from-entity-string (xdoc::s)
  (let ((xdoc::name
         (if (and (not (equal xdoc::s &quot;&quot;)) (char&lt;= (char xdoc::s 0) #\Z))
             xdoc::s
             (string-upcase xdoc::s))))">keyword-from-entity-string</a>
  (s)
  (let ((name (if (<a class="sym-link system" href="../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> (equal s <span class="string">""</span>)) (<a class="sym-link system" href="../../axioms.html#def-char_3C_3D" data-sym="CHAR&lt;=">char&lt;=</a> (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> s <span class="number">0</span>) #\Z))
         s
         (<a class="sym-link system" href="../../axioms.html#def-string-upcase" data-sym="STRING-UPCASE">string-upcase</a> s))))
    (<a class="sym-link system" href="../../axioms.html#def-intern" data-sym="INTERN">intern</a> name <span class="string">"KEYWORD"</span>)))</pre>
  </div>

<div class="form-block function" id="def-entity-strings-to-tokens-fal" data-defines="ENTITY-STRINGS-TO-TOKENS-FAL" data-references="KEYWORD-FROM-ENTITY-STRING,LIST,HONS-ACONS,STRING,CAR,ENTRY,LET*,CDR,T,ENDP,COND,FAL,ENTITY-INFO,DEFUN" data-part-name="ENTITY-STRINGS-TO-TOKENS-FAL" data-part-args="FAL,ENTITY-INFO" data-part-body="KEYWORD-FROM-ENTITY-STRING,LIST,HONS-ACONS,STRING,CAR,ENTRY,LET*,CDR,ENTITY-STRINGS-TO-TOKENS-FAL,T,FAL,ENTITY-INFO,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENTITY-STRINGS-TO-TOKENS-FAL">entity-strings-to-tokens-fal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-entity-strings-to-tokens-fal" data-sym="ENTITY-STRINGS-TO-TOKENS-FAL" title="(defun xdoc::entity-strings-to-tokens-fal (xdoc::entity-info xdoc::fal)
  (cond ((endp xdoc::entity-info) xdoc::fal)
        (t
         (xdoc::entity-strings-to-tokens-fal (cdr xdoc::entity-info)
          (let* ((xdoc::entry (car xdoc::entity-info))
...">entity-strings-to-tokens-fal</a>
  (entity-info fal)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> entity-info) fal)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-entity-strings-to-tokens-fal" data-sym="ENTITY-STRINGS-TO-TOKENS-FAL" title="(defun xdoc::entity-strings-to-tokens-fal (xdoc::entity-info xdoc::fal)
  (cond ((endp xdoc::entity-info) xdoc::fal)
        (t
         (xdoc::entity-strings-to-tokens-fal (cdr xdoc::entity-info)
          (let* ((xdoc::entry (car xdoc::entity-info))
...">entity-strings-to-tokens-fal</a> (cdr entity-info)
        (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((entry (car entity-info)) (<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> (car entry)))
          (hons-acons <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>
            (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:entity</span> (<a class="sym-link local-def" href="#def-keyword-from-entity-string" data-sym="KEYWORD-FROM-ENTITY-STRING" title="(defun xdoc::keyword-from-entity-string (xdoc::s)
  (let ((xdoc::name
         (if (and (not (equal xdoc::s &quot;&quot;)) (char&lt;= (char xdoc::s 0) #\Z))
             xdoc::s
             (string-upcase xdoc::s))))">keyword-from-entity-string</a> <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))
            fal))))))</pre>
  </div>

<div class="form-block function" id="def-entity-keywords-to-strings-fal" data-defines="ENTITY-KEYWORDS-TO-STRINGS-FAL" data-references="QUOTE,CONCATENATE,KEYWORD-FROM-ENTITY-STRING,HONS-ACONS,STRING,CAR,ENTRY,LET*,CDR,T,ENDP,COND,FAL,ENTITY-INFO,DEFUN" data-part-name="ENTITY-KEYWORDS-TO-STRINGS-FAL" data-part-args="FAL,ENTITY-INFO" data-part-body="QUOTE,CONCATENATE,KEYWORD-FROM-ENTITY-STRING,HONS-ACONS,STRING,CAR,ENTRY,LET*,CDR,ENTITY-KEYWORDS-TO-STRINGS-FAL,T,FAL,ENTITY-INFO,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENTITY-KEYWORDS-TO-STRINGS-FAL">entity-keywords-to-strings-fal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-entity-keywords-to-strings-fal" data-sym="ENTITY-KEYWORDS-TO-STRINGS-FAL" title="(defun xdoc::entity-keywords-to-strings-fal (xdoc::entity-info xdoc::fal)
  (cond ((endp xdoc::entity-info) xdoc::fal)
        (t
         (xdoc::entity-keywords-to-strings-fal (cdr xdoc::entity-info)
          (let* ((xdoc::entry (car xdoc::entity-info))
...">entity-keywords-to-strings-fal</a>
  (entity-info fal)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> entity-info) fal)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-entity-keywords-to-strings-fal" data-sym="ENTITY-KEYWORDS-TO-STRINGS-FAL" title="(defun xdoc::entity-keywords-to-strings-fal (xdoc::entity-info xdoc::fal)
  (cond ((endp xdoc::entity-info) xdoc::fal)
        (t
         (xdoc::entity-keywords-to-strings-fal (cdr xdoc::entity-info)
          (let* ((xdoc::entry (car xdoc::entity-info))
...">entity-keywords-to-strings-fal</a> (cdr entity-info)
        (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((entry (car entity-info)) (<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> (car entry)))
          (hons-acons (<a class="sym-link local-def" href="#def-keyword-from-entity-string" data-sym="KEYWORD-FROM-ENTITY-STRING" title="(defun xdoc::keyword-from-entity-string (xdoc::s)
  (let ((xdoc::name
         (if (and (not (equal xdoc::s &quot;&quot;)) (char&lt;= (char xdoc::s 0) #\Z))
             xdoc::s
             (string-upcase xdoc::s))))">keyword-from-entity-string</a> <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)
            (<a class="sym-link system" href="../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> <span class="string">"&amp;"</span> <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> <span class="string">";"</span>)
            fal))))))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *entity-info*
  '((<span class="string">"amp"</span> <span class="string">"&amp;"</span> <span class="keyword">:built-in</span>) (<span class="string">"lt"</span> <span class="string">"&lt;"</span> <span class="keyword">:built-in</span>)
    (<span class="string">"gt"</span> <span class="string">"&gt;"</span> <span class="keyword">:built-in</span>)
    (<span class="string">"quot"</span> <span class="string">"&quot;"</span> <span class="keyword">:built-in</span>)
    (<span class="string">"apos"</span> <span class="string">"&#39;"</span> <span class="keyword">:built-in</span>)
    (<span class="string">"nbsp"</span> <span class="string">" "</span> <span class="number">160</span>)
    (<span class="string">"ndash"</span> <span class="string">"--"</span> <span class="number">8211</span>)
    (<span class="string">"mdash"</span> <span class="string">"---"</span> <span class="number">8212</span>)
    (<span class="string">"larr"</span> <span class="string">"&lt;--"</span> <span class="number">8592</span>)
    (<span class="string">"rarr"</span> <span class="string">"--&gt;"</span> <span class="number">8594</span>)
    (<span class="string">"harr"</span> <span class="string">"&lt;-&gt;"</span> <span class="number">8596</span>)
    (<span class="string">"lang"</span> <span class="string">"&lt;"</span> <span class="number">9001</span>)
    (<span class="string">"rang"</span> <span class="string">"&gt;"</span> <span class="number">9002</span>)
    (<span class="string">"hellip"</span> <span class="string">"..."</span> <span class="number">8230</span>)
    (<span class="string">"lsquo"</span> <span class="string">"`"</span> <span class="number">8216</span>)
    (<span class="string">"rsquo"</span> <span class="string">"&#39;"</span> <span class="number">8217</span>)
    (<span class="string">"ldquo"</span> <span class="string">"``"</span> <span class="number">8220</span>)
    (<span class="string">"rdquo"</span> <span class="string">"&#39;&#39;"</span> <span class="number">8221</span>)
    (<span class="string">"and"</span> <span class="string">"&amp;"</span> <span class="number">8743</span>)
    (<span class="string">"or"</span> <span class="string">"\/"</span> <span class="number">8744</span>)
    (<span class="string">"not"</span> <span class="string">"~"</span> <span class="number">172</span>)
    (<span class="string">"ne"</span> <span class="string">"!="</span> <span class="number">8800</span>)
    (<span class="string">"le"</span> <span class="string">"&lt;="</span> <span class="number">8804</span>)
    (<span class="string">"ge"</span> <span class="string">"&gt;="</span> <span class="number">8805</span>)
    (<span class="string">"mid"</span> <span class="string">"|"</span> <span class="number">8739</span>)
    (<span class="string">"times"</span> <span class="string">"\times"</span> <span class="number">215</span>)
    (<span class="string">"Alpha"</span> <span class="string">"\Alpha"</span> <span class="number">913</span>)
    (<span class="string">"Beta"</span> <span class="string">"\Beta"</span> <span class="number">914</span>)
    (<span class="string">"Gamma"</span> <span class="string">"\Gamma"</span> <span class="number">915</span>)
    (<span class="string">"Delta"</span> <span class="string">"\Delta"</span> <span class="number">916</span>)
    (<span class="string">"Epsilon"</span> <span class="string">"\Epsilon"</span> <span class="number">917</span>)
    (<span class="string">"Zeta"</span> <span class="string">"\Zeta"</span> <span class="number">918</span>)
    (<span class="string">"Eta"</span> <span class="string">"\Eta"</span> <span class="number">919</span>)
    (<span class="string">"Theta"</span> <span class="string">"\Theta"</span> <span class="number">920</span>)
    (<span class="string">"Iota"</span> <span class="string">"\Iota"</span> <span class="number">921</span>)
    (<span class="string">"Kappa"</span> <span class="string">"\Kappa"</span> <span class="number">922</span>)
    (<span class="string">"Lambda"</span> <span class="string">"\Lambda"</span> <span class="number">923</span>)
    (<span class="string">"Mu"</span> <span class="string">"\Mu"</span> <span class="number">924</span>)
    (<span class="string">"Nu"</span> <span class="string">"\Nu"</span> <span class="number">925</span>)
    (<span class="string">"Xi"</span> <span class="string">"\Xi"</span> <span class="number">926</span>)
    (<span class="string">"Omicron"</span> <span class="string">"\Omicron"</span> <span class="number">927</span>)
    (<span class="string">"Pi"</span> <span class="string">"\Pi"</span> <span class="number">928</span>)
    (<span class="string">"Rho"</span> <span class="string">"\Rho"</span> <span class="number">929</span>)
    (<span class="string">"Sigma"</span> <span class="string">"\Sigma"</span> <span class="number">931</span>)
    (<span class="string">"Tau"</span> <span class="string">"\Tau"</span> <span class="number">932</span>)
    (<span class="string">"Upsilon"</span> <span class="string">"\Upsilon"</span> <span class="number">933</span>)
    (<span class="string">"Phi"</span> <span class="string">"\Phi"</span> <span class="number">934</span>)
    (<span class="string">"Chi"</span> <span class="string">"\Chi"</span> <span class="number">935</span>)
    (<span class="string">"Psi"</span> <span class="string">"\Psi"</span> <span class="number">936</span>)
    (<span class="string">"Omega"</span> <span class="string">"\Omega"</span> <span class="number">937</span>)
    (<span class="string">"alpha"</span> <span class="string">"\alpha"</span> <span class="number">945</span>)
    (<span class="string">"beta"</span> <span class="string">"\beta"</span> <span class="number">946</span>)
    (<span class="string">"gamma"</span> <span class="string">"\gamma"</span> <span class="number">947</span>)
    (<span class="string">"delta"</span> <span class="string">"\delta"</span> <span class="number">948</span>)
    (<span class="string">"epsilon"</span> <span class="string">"\epsilon"</span> <span class="number">949</span>)
    (<span class="string">"zeta"</span> <span class="string">"\zeta"</span> <span class="number">950</span>)
    (<span class="string">"eta"</span> <span class="string">"\eta"</span> <span class="number">951</span>)
    (<span class="string">"theta"</span> <span class="string">"\theta"</span> <span class="number">952</span>)
    (<span class="string">"iota"</span> <span class="string">"\iota"</span> <span class="number">953</span>)
    (<span class="string">"kappa"</span> <span class="string">"\kappa"</span> <span class="number">954</span>)
    (<span class="string">"lambda"</span> <span class="string">"\lambda"</span> <span class="number">955</span>)
    (<span class="string">"mu"</span> <span class="string">"\mu"</span> <span class="number">956</span>)
    (<span class="string">"nu"</span> <span class="string">"\nu"</span> <span class="number">957</span>)
    (<span class="string">"xi"</span> <span class="string">"\xi"</span> <span class="number">958</span>)
    (<span class="string">"omicron"</span> <span class="string">"\omicron"</span> <span class="number">959</span>)
    (<span class="string">"pi"</span> <span class="string">"\pi"</span> <span class="number">960</span>)
    (<span class="string">"rho"</span> <span class="string">"\rho"</span> <span class="number">961</span>)
    (<span class="string">"sigma"</span> <span class="string">"\sigma"</span> <span class="number">963</span>)
    (<span class="string">"tau"</span> <span class="string">"\tau"</span> <span class="number">964</span>)
    (<span class="string">"upsilon"</span> <span class="string">"\upsilon"</span> <span class="number">965</span>)
    (<span class="string">"phi"</span> <span class="string">"\phi"</span> <span class="number">966</span>)
    (<span class="string">"chi"</span> <span class="string">"\chi"</span> <span class="number">967</span>)
    (<span class="string">"psi"</span> <span class="string">"\psi"</span> <span class="number">968</span>)
    (<span class="string">"omega"</span> <span class="string">"\omega"</span> <span class="number">969</span>)
    (<span class="string">"Ccedil"</span> <span class="string">"\Ccedil"</span> <span class="number">199</span>)
    (<span class="string">"Aacute"</span> <span class="string">"\Aacute"</span> <span class="number">193</span>)
    (<span class="string">"Agrave"</span> <span class="string">"\Agrave"</span> <span class="number">192</span>)
    (<span class="string">"Acirc"</span> <span class="string">"\Acirc"</span> <span class="number">194</span>)
    (<span class="string">"Atilde"</span> <span class="string">"\Atilde"</span> <span class="number">195</span>)
    (<span class="string">"Auml"</span> <span class="string">"\Auml"</span> <span class="number">196</span>)
    (<span class="string">"Aring"</span> <span class="string">"\Aring"</span> <span class="number">197</span>)
    (<span class="string">"Egrave"</span> <span class="string">"\Egrave"</span> <span class="number">200</span>)
    (<span class="string">"Eacute"</span> <span class="string">"\Eacute"</span> <span class="number">201</span>)
    (<span class="string">"Ecirc"</span> <span class="string">"\Ecirc"</span> <span class="number">202</span>)
    (<span class="string">"Euml"</span> <span class="string">"\Euml"</span> <span class="number">203</span>)
    (<span class="string">"Igrave"</span> <span class="string">"\Igrave"</span> <span class="number">204</span>)
    (<span class="string">"Iacute"</span> <span class="string">"\Iacute"</span> <span class="number">205</span>)
    (<span class="string">"Icirc"</span> <span class="string">"\Icirc"</span> <span class="number">206</span>)
    (<span class="string">"Iuml"</span> <span class="string">"\Iuml"</span> <span class="number">207</span>)
    (<span class="string">"Ntilde"</span> <span class="string">"\Ntilde"</span> <span class="number">209</span>)
    (<span class="string">"Ograve"</span> <span class="string">"\Ograve"</span> <span class="number">210</span>)
    (<span class="string">"Oacute"</span> <span class="string">"\Oacute"</span> <span class="number">211</span>)
    (<span class="string">"Ocirc"</span> <span class="string">"\Ocirc"</span> <span class="number">212</span>)
    (<span class="string">"Otilde"</span> <span class="string">"\Otilde"</span> <span class="number">213</span>)
    (<span class="string">"Ouml"</span> <span class="string">"\Ouml"</span> <span class="number">214</span>)
    (<span class="string">"Ugrave"</span> <span class="string">"\Ugrave"</span> <span class="number">217</span>)
    (<span class="string">"Uacute"</span> <span class="string">"\Uacute"</span> <span class="number">218</span>)
    (<span class="string">"Ucirc"</span> <span class="string">"\Ucirc"</span> <span class="number">219</span>)
    (<span class="string">"Uuml"</span> <span class="string">"\Uuml"</span> <span class="number">220</span>)
    (<span class="string">"Aogon"</span> <span class="string">"\Aogon"</span> <span class="number">260</span>)
    (<span class="string">"Eogon"</span> <span class="string">"\Eogon"</span> <span class="number">280</span>)
    (<span class="string">"Iogon"</span> <span class="string">"\Iogon"</span> <span class="number">302</span>)
    (<span class="string">"Uogon"</span> <span class="string">"\Uogon"</span> <span class="number">370</span>)
    (<span class="string">"Nacute"</span> <span class="string">"\Nacute"</span> <span class="number">323</span>)
    (<span class="string">"ccedil"</span> <span class="string">"\ccedil"</span> <span class="number">231</span>)
    (<span class="string">"aacute"</span> <span class="string">"\aacute"</span> <span class="number">225</span>)
    (<span class="string">"agrave"</span> <span class="string">"\agrave"</span> <span class="number">224</span>)
    (<span class="string">"acirc"</span> <span class="string">"\acirc"</span> <span class="number">226</span>)
    (<span class="string">"atilde"</span> <span class="string">"\atilde"</span> <span class="number">227</span>)
    (<span class="string">"auml"</span> <span class="string">"\auml"</span> <span class="number">228</span>)
    (<span class="string">"aring"</span> <span class="string">"\aring"</span> <span class="number">229</span>)
    (<span class="string">"egrave"</span> <span class="string">"\egrave"</span> <span class="number">232</span>)
    (<span class="string">"eacute"</span> <span class="string">"\eacute"</span> <span class="number">233</span>)
    (<span class="string">"ecirc"</span> <span class="string">"\ecirc"</span> <span class="number">234</span>)
    (<span class="string">"euml"</span> <span class="string">"\euml"</span> <span class="number">235</span>)
    (<span class="string">"igrave"</span> <span class="string">"\igrave"</span> <span class="number">236</span>)
    (<span class="string">"iacute"</span> <span class="string">"\iacute"</span> <span class="number">237</span>)
    (<span class="string">"icirc"</span> <span class="string">"\icirc"</span> <span class="number">238</span>)
    (<span class="string">"iuml"</span> <span class="string">"\iuml"</span> <span class="number">239</span>)
    (<span class="string">"ntilde"</span> <span class="string">"\ntilde"</span> <span class="number">241</span>)
    (<span class="string">"ograve"</span> <span class="string">"\ograve"</span> <span class="number">242</span>)
    (<span class="string">"oacute"</span> <span class="string">"\oacute"</span> <span class="number">243</span>)
    (<span class="string">"ocirc"</span> <span class="string">"\ocirc"</span> <span class="number">244</span>)
    (<span class="string">"otilde"</span> <span class="string">"\otilde"</span> <span class="number">245</span>)
    (<span class="string">"ouml"</span> <span class="string">"\ouml"</span> <span class="number">246</span>)
    (<span class="string">"ugrave"</span> <span class="string">"\ugrave"</span> <span class="number">249</span>)
    (<span class="string">"uacute"</span> <span class="string">"\uacute"</span> <span class="number">250</span>)
    (<span class="string">"ucirc"</span> <span class="string">"\ucirc"</span> <span class="number">251</span>)
    (<span class="string">"uuml"</span> <span class="string">"\uuml"</span> <span class="number">252</span>)
    (<span class="string">"aogon"</span> <span class="string">"\aogon"</span> <span class="number">261</span>)
    (<span class="string">"eogon"</span> <span class="string">"\eogon"</span> <span class="number">281</span>)
    (<span class="string">"iogon"</span> <span class="string">"\iogon"</span> <span class="number">303</span>)
    (<span class="string">"uogon"</span> <span class="string">"\uogon"</span> <span class="number">371</span>)
    (<span class="string">"nacute"</span> <span class="string">"\nacute"</span> <span class="number">324</span>)
    (<span class="string">"forall"</span> <span class="string">"\forall"</span> <span class="number">8704</span>)
    (<span class="string">"exist"</span> <span class="string">"\exist"</span> <span class="number">8707</span>)
    (<span class="string">"empty"</span> <span class="string">"\empty"</span> <span class="number">8709</span>)
    (<span class="string">"isin"</span> <span class="string">"\isin"</span> <span class="number">8712</span>)
    (<span class="string">"notin"</span> <span class="string">"\notin"</span> <span class="number">8713</span>)
    (<span class="string">"prod"</span> <span class="string">"\prod"</span> <span class="number">8719</span>)
    (<span class="string">"sum"</span> <span class="string">"\sum"</span> <span class="number">8721</span>)))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *entity-strings-to-tokens-fal*
  (<a class="sym-link local-def" href="#def-entity-strings-to-tokens-fal" data-sym="ENTITY-STRINGS-TO-TOKENS-FAL" title="(defun xdoc::entity-strings-to-tokens-fal (xdoc::entity-info xdoc::fal)
  (cond ((endp xdoc::entity-info) xdoc::fal)
        (t
         (xdoc::entity-strings-to-tokens-fal (cdr xdoc::entity-info)
          (let* ((xdoc::entry (car xdoc::entity-info))
...">entity-strings-to-tokens-fal</a> *entity-info* nil))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *entity-keywords-to-strings-fal*
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fal (<a class="sym-link local-def" href="#def-entity-keywords-to-strings-fal" data-sym="ENTITY-KEYWORDS-TO-STRINGS-FAL" title="(defun xdoc::entity-keywords-to-strings-fal (xdoc::entity-info xdoc::fal)
  (cond ((endp xdoc::entity-info) xdoc::fal)
        (t
         (xdoc::entity-keywords-to-strings-fal (cdr xdoc::entity-info)
          (let* ((xdoc::entry (car xdoc::entity-info))
...">entity-keywords-to-strings-fal</a> *entity-info*
         nil)) (dup (duplicate-keysp-eq fal)))
    (if dup
      (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard
        'top
        <span class="string">"Implementation error: Found duplicate keyword, ~x0!  See ~
             books/xdoc/parse-xml.lisp ."</span>
        dup)
      fal)))</pre>
  </div>

<div class="form-block function" id="def-read-entity" data-defines="READ-ENTITY" data-references="WHEN,*ENTITY-STRINGS-TO-TOKENS-FAL*,HONS-GET,CDR,DOUBLET,RCHARS-TO-STRING,STR,ERROR-CONTEXT,*NLS*,CAT,UNLESS,LIST,READ-UNTIL,RCHARS,FOUNDP,MV,+,SAVED-N,B*,XL,N,X,DEFUN" data-used-by="PARSE-XML-AUX" data-part-name="READ-ENTITY" data-part-args="XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="READ-ENTITY">read-entity</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-read-entity" data-sym="READ-ENTITY" title="(defun xdoc::read-entity (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N TOK)&quot;
  (xdoc::b*
   ((xdoc::saved-n xdoc::n) (xdoc::n (+ 1 xdoc::n))
    ((xdoc::mv xdoc::foundp xdoc::n xdoc::rchars)
...">read-entity</a>
  (x n xl)
  <span class="string">"Returns (MV ERR N TOK)"</span>
  (b* ((saved-n n) (n (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> foundp n rchars) (<a class="sym-link local-def" href="#def-read-until" data-sym="READ-UNTIL" title="(defun xdoc::read-until (xdoc::x xdoc::n xdoc::xl xdoc::stop-chars xdoc::acc)
  &quot;Returns (MV FOUNDP N ACC)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::n xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">read-until</a> x n xl (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> #\;) nil))
      ((unless foundp) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Entity does not have a closing semicolon."</span>
            *nls*
            <span class="string">"Nearby text: {"</span>
            (error-context x saved-n xl)
            <span class="string">"}"</span>
            *nls*)
          n
          nil))
      (n (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n))
      (str (rchars-to-string rchars))
      (doublet (cdr (hons-get str
            *entity-strings-to-tokens-fal*)))
      ((when doublet) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil n doublet)))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Unsupported entity: &amp;"</span>
        str
        <span class="string">";"</span>
        *nls*
        <span class="string">"Nearby text: {"</span>
        (error-context x saved-n xl)
        <span class="string">"}"</span>
        *nls*)
      n
      nil)))</pre>
  </div>

<div class="form-block function" id="def-parse-xml-aux" data-defines="PARSE-XML-AUX" data-references="RCHARS-TO-STRING,LIST,QUOTE,READ-UNTIL,RCHARS,?FOUNDP,ERROR-CONTEXT,*NLS*,CAT,CONS,READ-ENTITY,TOKEN,REVAPPEND,READ-TAG,TOKEN-LIST,ERR,EQL,CHAR,CHAR-N,MV,>=,WHEN,B*,ACC,XL,N,X,DEFUN" data-used-by="PARSE-XML" data-part-name="PARSE-XML-AUX" data-part-args="ACC,XL,N,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-XML-AUX">parse-xml-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-xml-aux" data-sym="PARSE-XML-AUX" title="(defun xdoc::parse-xml-aux (xdoc::x xdoc::n xdoc::xl xdoc::acc)
  &quot;Returns (MV ERR TOKENS)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">parse-xml-aux</a>
  (x n xl acc)
  <span class="string">"Returns (MV ERR TOKENS)"</span>
  (b* (((when (<a class="sym-link system" href="../../axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> n xl)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil acc)) (char-n (<a class="sym-link system" href="../../axioms.html#def-char" data-sym="CHAR">char</a> x n))
      ((when (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> char-n #\&lt;)) (b* (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n token-list) (<a class="sym-link local-def" href="#def-read-tag" data-sym="READ-TAG" title="(defun xdoc::read-tag (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N TOKEN-LIST)&quot;
  (xdoc::b*
   ((xdoc::tag-start-n xdoc::n) (xdoc::n (+ 1 xdoc::n))
    (xdoc::n (xdoc::skip-past-ws xdoc::x xdoc::n xdoc::xl))
...">read-tag</a> x n xl)) ((when err) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err nil))
            (acc (<a class="sym-link system" href="../../axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> token-list acc)))
          (<a class="sym-link local-def" href="#def-parse-xml-aux" data-sym="PARSE-XML-AUX" title="(defun xdoc::parse-xml-aux (xdoc::x xdoc::n xdoc::xl xdoc::acc)
  &quot;Returns (MV ERR TOKENS)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">parse-xml-aux</a> x n xl acc)))
      ((when (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> char-n #\&amp;)) (b* (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err n token) (<a class="sym-link local-def" href="#def-read-entity" data-sym="READ-ENTITY" title="(defun xdoc::read-entity (xdoc::x xdoc::n xdoc::xl)
  &quot;Returns (MV ERR N TOK)&quot;
  (xdoc::b*
   ((xdoc::saved-n xdoc::n) (xdoc::n (+ 1 xdoc::n))
    ((xdoc::mv xdoc::foundp xdoc::n xdoc::rchars)
...">read-entity</a> x n xl)) ((when err) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err nil)))
          (<a class="sym-link local-def" href="#def-parse-xml-aux" data-sym="PARSE-XML-AUX" title="(defun xdoc::parse-xml-aux (xdoc::x xdoc::n xdoc::xl xdoc::acc)
  &quot;Returns (MV ERR TOKENS)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">parse-xml-aux</a> x
            n
            xl
            (cons token acc))))
      ((when (<a class="sym-link system" href="../../axioms.html#def-eql" data-sym="EQL">eql</a> char-n #\&gt;)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Stray end-of-tag character &#39;&gt;&#39;"</span>
            *nls*
            <span class="string">"Nearby text: {"</span>
            (error-context x n xl)
            <span class="string">"}"</span>
            *nls*)
          nil))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> ?foundp n rchars) (<a class="sym-link local-def" href="#def-read-until" data-sym="READ-UNTIL" title="(defun xdoc::read-until (xdoc::x xdoc::n xdoc::xl xdoc::stop-chars xdoc::acc)
  &quot;Returns (MV FOUNDP N ACC)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::n xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">read-until</a> x
          n
          xl
          '(#\&lt; #\&amp; #\&gt;)
          nil))
      (token (<a class="sym-link system" href="../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:text</span> (rchars-to-string rchars))))
    (<a class="sym-link local-def" href="#def-parse-xml-aux" data-sym="PARSE-XML-AUX" title="(defun xdoc::parse-xml-aux (xdoc::x xdoc::n xdoc::xl xdoc::acc)
  &quot;Returns (MV ERR TOKENS)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">parse-xml-aux</a> x
      n
      xl
      (cons token acc))))</pre>
  </div>

<div class="form-block function" id="def-entitytok-as-entity" data-defines="ENTITYTOK-AS-ENTITY" data-references="*ENTITY-KEYWORDS-TO-STRINGS-FAL*,ENTITYTOK-TYPE,HONS-GET,CDR,X,DEFUN" data-used-by="FLATTEN-TOKEN-FOR-ERRORMSG" data-part-name="ENTITYTOK-AS-ENTITY" data-part-args="X" data-part-body="*ENTITY-KEYWORDS-TO-STRINGS-FAL*,X,ENTITYTOK-TYPE,HONS-GET,CDR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENTITYTOK-AS-ENTITY">entitytok-as-entity</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-entitytok-as-entity" data-sym="ENTITYTOK-AS-ENTITY" title="(defun xdoc::entitytok-as-entity (xdoc::x)
  (cdr
   (xdoc::hons-get (xdoc::entitytok-type xdoc::x)
    xdoc::*entity-keywords-to-strings-fal*)))">entitytok-as-entity</a>
  (x)
  (cdr (hons-get (<a class="sym-link local-def" href="#def-entitytok-type" data-sym="ENTITYTOK-TYPE" title="(defun xdoc::entitytok-type (xdoc::x) (second xdoc::x))">entitytok-type</a> x)
      *entity-keywords-to-strings-fal*)))</pre>
  </div>

<div class="form-block function" id="def-entitytok-as-plaintext-fal" data-defines="ENTITYTOK-AS-PLAINTEXT-FAL" data-references="KEYWORD-FROM-ENTITY-STRING,HONS-ACONS,SECOND,PLAINTEXT,STRING,CAR,ENTRY,LET*,CDR,T,ENDP,COND,FAL,ENTITY-INFO,DEFUN" data-part-name="ENTITYTOK-AS-PLAINTEXT-FAL" data-part-args="FAL,ENTITY-INFO" data-part-body="KEYWORD-FROM-ENTITY-STRING,HONS-ACONS,SECOND,PLAINTEXT,STRING,CAR,ENTRY,LET*,CDR,ENTITYTOK-AS-PLAINTEXT-FAL,T,FAL,ENTITY-INFO,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENTITYTOK-AS-PLAINTEXT-FAL">entitytok-as-plaintext-fal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-entitytok-as-plaintext-fal" data-sym="ENTITYTOK-AS-PLAINTEXT-FAL" title="(defun xdoc::entitytok-as-plaintext-fal (xdoc::entity-info xdoc::fal)
  (cond ((endp xdoc::entity-info) xdoc::fal)
        (t
         (xdoc::entitytok-as-plaintext-fal (cdr xdoc::entity-info)
          (let* ((xdoc::entry (car xdoc::entity-info))
...">entitytok-as-plaintext-fal</a>
  (entity-info fal)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../axioms.html#def-endp" data-sym="ENDP">endp</a> entity-info) fal)
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-entitytok-as-plaintext-fal" data-sym="ENTITYTOK-AS-PLAINTEXT-FAL" title="(defun xdoc::entitytok-as-plaintext-fal (xdoc::entity-info xdoc::fal)
  (cond ((endp xdoc::entity-info) xdoc::fal)
        (t
         (xdoc::entitytok-as-plaintext-fal (cdr xdoc::entity-info)
          (let* ((xdoc::entry (car xdoc::entity-info))
...">entitytok-as-plaintext-fal</a> (cdr entity-info)
        (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((entry (car entity-info)) (<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> (car entry))
            (plaintext (<a class="sym-link system" href="../../axioms.html#def-second" data-sym="SECOND">second</a> entry)))
          (hons-acons (<a class="sym-link local-def" href="#def-keyword-from-entity-string" data-sym="KEYWORD-FROM-ENTITY-STRING" title="(defun xdoc::keyword-from-entity-string (xdoc::s)
  (let ((xdoc::name
         (if (and (not (equal xdoc::s &quot;&quot;)) (char&lt;= (char xdoc::s 0) #\Z))
             xdoc::s
             (string-upcase xdoc::s))))">keyword-from-entity-string</a> <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>)
            plaintext
            fal))))))</pre>
  </div>

<div class="form-block other" id="form-36" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *entitytok-as-plaintext-fal*
  (<a class="sym-link local-def" href="#def-entitytok-as-plaintext-fal" data-sym="ENTITYTOK-AS-PLAINTEXT-FAL" title="(defun xdoc::entitytok-as-plaintext-fal (xdoc::entity-info xdoc::fal)
  (cond ((endp xdoc::entity-info) xdoc::fal)
        (t
         (xdoc::entitytok-as-plaintext-fal (cdr xdoc::entity-info)
          (let* ((xdoc::entry (car xdoc::entity-info))
...">entitytok-as-plaintext-fal</a> *entity-info* nil))</pre>
  </div>

<div class="form-block function" id="def-entitytok-as-plaintext" data-defines="ENTITYTOK-AS-PLAINTEXT" data-references="*ENTITYTOK-AS-PLAINTEXT-FAL*,ENTITYTOK-TYPE,HONS-GET,CDR,X,DEFUN" data-part-name="ENTITYTOK-AS-PLAINTEXT" data-part-args="X" data-part-body="*ENTITYTOK-AS-PLAINTEXT-FAL*,X,ENTITYTOK-TYPE,HONS-GET,CDR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENTITYTOK-AS-PLAINTEXT">entitytok-as-plaintext</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-entitytok-as-plaintext" data-sym="ENTITYTOK-AS-PLAINTEXT" title="(defun xdoc::entitytok-as-plaintext (xdoc::x)
  (cdr
   (xdoc::hons-get (xdoc::entitytok-type xdoc::x)
    xdoc::*entitytok-as-plaintext-fal*)))">entitytok-as-plaintext</a>
  (x)
  (cdr (hons-get (<a class="sym-link local-def" href="#def-entitytok-type" data-sym="ENTITYTOK-TYPE" title="(defun xdoc::entitytok-type (xdoc::x) (second xdoc::x))">entitytok-type</a> x)
      *entitytok-as-plaintext-fal*)))</pre>
  </div>

<div class="form-block function" id="def-flatten-token-for-errormsg" data-defines="FLATTEN-TOKEN-FOR-ERRORMSG" data-references="QUOTE,HARD?,ER,T,TEXTTOK-TEXT,TEXTTOK-P,ENTITYTOK-AS-ENTITY,ENTITYTOK-P,CLOSETOK-NAME,CLOSETOK-P,OPENTOK-ATTS,IF,OPENTOK-NAME,CAT,OPENTOK-P,COND,X,DEFUN" data-used-by="FLATTEN-TOKENS-FOR-ERRORMSG" data-part-name="FLATTEN-TOKEN-FOR-ERRORMSG" data-part-args="X" data-part-body="FLATTEN-TOKEN-FOR-ERRORMSG,QUOTE,HARD?,ER,T,TEXTTOK-TEXT,TEXTTOK-P,ENTITYTOK-AS-ENTITY,ENTITYTOK-P,CLOSETOK-NAME,CLOSETOK-P,OPENTOK-ATTS,IF,OPENTOK-NAME,CAT,X,OPENTOK-P,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLATTEN-TOKEN-FOR-ERRORMSG">flatten-token-for-errormsg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flatten-token-for-errormsg" data-sym="FLATTEN-TOKEN-FOR-ERRORMSG" title="(defun xdoc::flatten-token-for-errormsg (xdoc::x)
  (cond
   ((xdoc::opentok-p xdoc::x)
    (str::cat &quot;&lt;&quot; (xdoc::opentok-name xdoc::x)
     (if (xdoc::opentok-atts xdoc::x)
...">flatten-token-for-errormsg</a>
  (x)
  (<a class="sym-link system" href="../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-opentok-p" data-sym="OPENTOK-P" title="(defun xdoc::opentok-p (xdoc::x) (eq (first xdoc::x) :open))">opentok-p</a> x) (cat <span class="string">"&lt;"</span>
        (<a class="sym-link local-def" href="#def-opentok-name" data-sym="OPENTOK-NAME" title="(defun xdoc::opentok-name (xdoc::x) (second xdoc::x))">opentok-name</a> x)
        (if (<a class="sym-link local-def" href="#def-opentok-atts" data-sym="OPENTOK-ATTS" title="(defun xdoc::opentok-atts (xdoc::x) (third xdoc::x))">opentok-atts</a> x)
          <span class="string">" [...]&gt;"</span>
          <span class="string">"&gt;"</span>)))
    ((<a class="sym-link local-def" href="#def-closetok-p" data-sym="CLOSETOK-P" title="(defun xdoc::closetok-p (xdoc::x) (eq (first xdoc::x) :close))">closetok-p</a> x) (cat <span class="string">"&lt;/"</span> (<a class="sym-link local-def" href="#def-closetok-name" data-sym="CLOSETOK-NAME" title="(defun xdoc::closetok-name (xdoc::x) (second xdoc::x))">closetok-name</a> x) <span class="string">"&gt;"</span>))
    ((<a class="sym-link local-def" href="#def-entitytok-p" data-sym="ENTITYTOK-P" title="(defun xdoc::entitytok-p (xdoc::x) (eq (first xdoc::x) :entity))">entitytok-p</a> x) (<a class="sym-link local-def" href="#def-entitytok-as-entity" data-sym="ENTITYTOK-AS-ENTITY" title="(defun xdoc::entitytok-as-entity (xdoc::x)
  (cdr
   (xdoc::hons-get (xdoc::entitytok-type xdoc::x)
    xdoc::*entity-keywords-to-strings-fal*)))">entitytok-as-entity</a> x))
    ((<a class="sym-link local-def" href="#def-texttok-p" data-sym="TEXTTOK-P" title="(defun xdoc::texttok-p (xdoc::x) (eq (first xdoc::x) :text))">texttok-p</a> x) (<a class="sym-link local-def" href="#def-texttok-text" data-sym="TEXTTOK-TEXT" title="(defun xdoc::texttok-text (xdoc::x)
  (let ((xdoc::tree (xdoc::texttok-texttree xdoc::x)))
    (if (atom xdoc::tree)
        xdoc::tree
        (str::fast-string-append-lst">texttok-text</a> x))
    (<a class="sym-link system" href="../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../axioms.html#def-er" data-sym="ER">er</a> hard?
        '<a class="sym-link local-def" href="#def-flatten-token-for-errormsg" data-sym="FLATTEN-TOKEN-FOR-ERRORMSG" title="(defun xdoc::flatten-token-for-errormsg (xdoc::x)
  (cond
   ((xdoc::opentok-p xdoc::x)
    (str::cat &quot;&lt;&quot; (xdoc::opentok-name xdoc::x)
     (if (xdoc::opentok-atts xdoc::x)
...">flatten-token-for-errormsg</a>
        <span class="string">"Invalid token ~x0"</span>
        x))))</pre>
  </div>

<div class="form-block function" id="def-flatten-tokens-for-errormsg" data-defines="FLATTEN-TOKENS-FOR-ERRORMSG" data-references="CDR,CAR,FLATTEN-TOKEN-FOR-ERRORMSG,CAT,ATOM,IF,X,DEFUN" data-used-by="PARSE-XML" data-part-name="FLATTEN-TOKENS-FOR-ERRORMSG" data-part-args="X" data-part-body="CDR,FLATTEN-TOKENS-FOR-ERRORMSG,CAR,FLATTEN-TOKEN-FOR-ERRORMSG,CAT,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLATTEN-TOKENS-FOR-ERRORMSG">flatten-tokens-for-errormsg</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flatten-tokens-for-errormsg" data-sym="FLATTEN-TOKENS-FOR-ERRORMSG" title="(defun xdoc::flatten-tokens-for-errormsg (xdoc::x)
  (if (atom xdoc::x)
      &quot;&quot;
      (str::cat (xdoc::flatten-token-for-errormsg (car xdoc::x))
       (xdoc::flatten-tokens-for-errormsg (cdr xdoc::x)))))">flatten-tokens-for-errormsg</a>
  (x)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    <span class="string">""</span>
    (cat (<a class="sym-link local-def" href="#def-flatten-token-for-errormsg" data-sym="FLATTEN-TOKEN-FOR-ERRORMSG" title="(defun xdoc::flatten-token-for-errormsg (xdoc::x)
  (cond
   ((xdoc::opentok-p xdoc::x)
    (str::cat &quot;&lt;&quot; (xdoc::opentok-name xdoc::x)
     (if (xdoc::opentok-atts xdoc::x)
...">flatten-token-for-errormsg</a> (car x))
      (<a class="sym-link local-def" href="#def-flatten-tokens-for-errormsg" data-sym="FLATTEN-TOKENS-FOR-ERRORMSG" title="(defun xdoc::flatten-tokens-for-errormsg (xdoc::x)
  (if (atom xdoc::x)
      &quot;&quot;
      (str::cat (xdoc::flatten-token-for-errormsg (car xdoc::x))
       (xdoc::flatten-tokens-for-errormsg (cdr xdoc::x)))))">flatten-tokens-for-errormsg</a> (cdr x)))))</pre>
  </div>

<div class="form-block function" id="def-nearby-text" data-defines="NEARBY-TEXT" data-references="EQUAL,IF,SUBSEQ,SUBSTITUTE,CAT,+,MIN,STOP,START,LENGTH,STRLEN,LET*,STR,INDEX,DEFUN" data-used-by="OPEN-TAG-BACKTRACE-ENTRY" data-part-name="NEARBY-TEXT" data-part-args="STR,INDEX" data-part-body="EQUAL,IF,SUBSEQ,SUBSTITUTE,CAT,+,MIN,STOP,INDEX,START,STR,LENGTH,STRLEN,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NEARBY-TEXT">nearby-text</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-nearby-text" data-sym="NEARBY-TEXT" title="(defun xdoc::nearby-text (xdoc::index xdoc::str)
  (let* ((xdoc::strlen (length xdoc::str))
         (xdoc::start xdoc::index)
         (xdoc::stop (min xdoc::strlen (+ xdoc::index 60))))
    (str::cat
...">nearby-text</a>
  (index str)
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((strlen (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> str)) (start index)
      (stop (min strlen (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> index <span class="number">60</span>))))
    (cat (<a class="sym-link system" href="../../axioms.html#def-substitute" data-sym="SUBSTITUTE">substitute</a> #\ 
        #\

        (<a class="sym-link system" href="../../axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> str start stop))
      (if (equal stop strlen)
        <span class="string">""</span>
        <span class="string">"..."</span>))))</pre>
  </div>

<div class="form-block function" id="def-open-tag-backtrace-entry" data-defines="OPEN-TAG-BACKTRACE-ENTRY" data-references="*NLS*,CAT,NEARBY-TEXT,NEARBY,QUOTE,MAKE-LIST,COERCE,PAD,-,MAX,SPACES-LEN,LENGTH,NAME-LEN,OPENTOK-NAME,NAME,OPENTOK-LOC,N,LET*,STRING,TYPE,DECLARE,OPEN-TOK,ORIG-STR,DEFUN" data-used-by="OPEN-TAGS-BACKTRACE" data-part-name="OPEN-TAG-BACKTRACE-ENTRY" data-part-args="OPEN-TOK,ORIG-STR" data-part-declare="ORIG-STR,STRING,TYPE,DECLARE" data-part-body="*NLS*,CAT,ORIG-STR,NEARBY-TEXT,NEARBY,STRING,QUOTE,MAKE-LIST,COERCE,PAD,-,MAX,SPACES-LEN,LENGTH,NAME-LEN,OPENTOK-NAME,NAME,OPEN-TOK,OPENTOK-LOC,N,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-TAG-BACKTRACE-ENTRY">open-tag-backtrace-entry</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-open-tag-backtrace-entry" data-sym="OPEN-TAG-BACKTRACE-ENTRY" title="(defun xdoc::open-tag-backtrace-entry (xdoc::orig-str xdoc::open-tok)
  (declare (type string xdoc::orig-str))
  (let* ((xdoc::n (xdoc::opentok-loc xdoc::open-tok))
         (xdoc::name (xdoc::opentok-name xdoc::open-tok))
         (xdoc::name-len (length xdoc::name))
...">open-tag-backtrace-entry</a>
  (orig-str open-tok)
  (declare (type <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> orig-str))
  (<a class="sym-link system" href="../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((n (<a class="sym-link local-def" href="#def-opentok-loc" data-sym="OPENTOK-LOC" title="(defun xdoc::opentok-loc (xdoc::x) (fourth xdoc::x))">opentok-loc</a> open-tok)) (name (<a class="sym-link local-def" href="#def-opentok-name" data-sym="OPENTOK-NAME" title="(defun xdoc::opentok-name (xdoc::x) (second xdoc::x))">opentok-name</a> open-tok))
      (name-len (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> name))
      (spaces-len (max <span class="number">0</span> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> <span class="number">6</span> name-len)))
      (pad (coerce (<a class="sym-link system" href="../../axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> spaces-len <span class="keyword">:initial-element</span> #\ )
          '<a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a>))
      (nearby (<a class="sym-link local-def" href="#def-nearby-text" data-sym="NEARBY-TEXT" title="(defun xdoc::nearby-text (xdoc::index xdoc::str)
  (let* ((xdoc::strlen (length xdoc::str))
         (xdoc::start xdoc::index)
         (xdoc::stop (min xdoc::strlen (+ xdoc::index 60))))
    (str::cat
...">nearby-text</a> n orig-str)))
    (cat <span class="string">"   &lt;"</span>
      name
      <span class="string">"&gt; "</span>
      pad
      nearby
      *nls*)))</pre>
  </div>

<div class="form-block function" id="def-open-tags-backtrace" data-defines="OPEN-TAGS-BACKTRACE" data-references="CDR,CAR,OPEN-TAG-BACKTRACE-ENTRY,CAT,ATOM,IF,OPEN-TAGS,ORIG-STR,DEFUN" data-used-by="PARSE-XML" data-part-name="OPEN-TAGS-BACKTRACE" data-part-args="OPEN-TAGS,ORIG-STR" data-part-body="CDR,OPEN-TAGS-BACKTRACE,CAR,ORIG-STR,OPEN-TAG-BACKTRACE-ENTRY,CAT,OPEN-TAGS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OPEN-TAGS-BACKTRACE">open-tags-backtrace</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-open-tags-backtrace" data-sym="OPEN-TAGS-BACKTRACE" title="(defun xdoc::open-tags-backtrace (xdoc::orig-str xdoc::open-tags)
  (if (atom xdoc::open-tags)
      &quot;&quot;
      (str::cat
       (xdoc::open-tag-backtrace-entry xdoc::orig-str (car xdoc::open-tags))">open-tags-backtrace</a>
  (orig-str open-tags)
  (if (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> open-tags)
    <span class="string">""</span>
    (cat (<a class="sym-link local-def" href="#def-open-tag-backtrace-entry" data-sym="OPEN-TAG-BACKTRACE-ENTRY" title="(defun xdoc::open-tag-backtrace-entry (xdoc::orig-str xdoc::open-tok)
  (declare (type string xdoc::orig-str))
  (let* ((xdoc::n (xdoc::opentok-loc xdoc::open-tok))
         (xdoc::name (xdoc::opentok-name xdoc::open-tok))
         (xdoc::name-len (length xdoc::name))
...">open-tag-backtrace-entry</a> orig-str
        (car open-tags))
      (<a class="sym-link local-def" href="#def-open-tags-backtrace" data-sym="OPEN-TAGS-BACKTRACE" title="(defun xdoc::open-tags-backtrace (xdoc::orig-str xdoc::open-tags)
  (if (atom xdoc::open-tags)
      &quot;&quot;
      (str::cat
       (xdoc::open-tag-backtrace-entry xdoc::orig-str (car xdoc::open-tags))">open-tags-backtrace</a> orig-str
        (cdr open-tags)))))</pre>
  </div>

<div class="form-block function" id="def-find-tag-imbalance" data-defines="FIND-TAG-IMBALANCE" data-references="EQUAL,OPEN-NAME,CONSP,UNLESS,CLOSETOK-NAME,CLOSE-NAME,CLOSETOK-P,+,CONS,CDR,OPENTOK-P,CAR,OPENTOK-NAME,CAT,MV,IF,ATOM,WHEN,B*,LOC,OPEN-TAGS,X,DEFUN" data-used-by="PARSE-XML" data-part-name="FIND-TAG-IMBALANCE" data-part-args="LOC,OPEN-TAGS,X" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-TAG-IMBALANCE">find-tag-imbalance</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-tag-imbalance" data-sym="FIND-TAG-IMBALANCE" title="(defun xdoc::find-tag-imbalance (xdoc::x xdoc::open-tags xdoc::loc)
  &quot;Returns (MV ERROR/NIL LOC/NIL STILL-OPEN-TAGS/NIL)&quot;
  (xdoc::b*
   (((when (atom xdoc::x))
     (if xdoc::open-tags
...">find-tag-imbalance</a>
  (x open-tags loc)
  <span class="string">"Returns (MV ERROR/NIL LOC/NIL STILL-OPEN-TAGS/NIL)"</span>
  (b* (((when (<a class="sym-link system" href="../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)) (if open-tags
         (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat (<a class="sym-link local-def" href="#def-opentok-name" data-sym="OPENTOK-NAME" title="(defun xdoc::opentok-name (xdoc::x) (second xdoc::x))">opentok-name</a> (car open-tags))
             <span class="string">" tag is never closed."</span>)
           loc
           open-tags)
         (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil nil))) ((when (<a class="sym-link local-def" href="#def-opentok-p" data-sym="OPENTOK-P" title="(defun xdoc::opentok-p (xdoc::x) (eq (first xdoc::x) :open))">opentok-p</a> (car x))) (<a class="sym-link local-def" href="#def-find-tag-imbalance" data-sym="FIND-TAG-IMBALANCE" title="(defun xdoc::find-tag-imbalance (xdoc::x xdoc::open-tags xdoc::loc)
  &quot;Returns (MV ERROR/NIL LOC/NIL STILL-OPEN-TAGS/NIL)&quot;
  (xdoc::b*
   (((when (atom xdoc::x))
     (if xdoc::open-tags
...">find-tag-imbalance</a> (cdr x)
          (cons (car x) open-tags)
          (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> loc)))
      ((when (<a class="sym-link local-def" href="#def-closetok-p" data-sym="CLOSETOK-P" title="(defun xdoc::closetok-p (xdoc::x) (eq (first xdoc::x) :close))">closetok-p</a> (car x))) (b* ((close-name (<a class="sym-link local-def" href="#def-closetok-name" data-sym="CLOSETOK-NAME" title="(defun xdoc::closetok-name (xdoc::x) (second xdoc::x))">closetok-name</a> (car x))) ((unless (consp open-tags)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Found &lt;/"</span>
                  close-name
                  <span class="string">"&gt; with no matching opening tag."</span>)
                loc
                open-tags))
            (open-name (<a class="sym-link local-def" href="#def-opentok-name" data-sym="OPENTOK-NAME" title="(defun xdoc::opentok-name (xdoc::x) (second xdoc::x))">opentok-name</a> (car open-tags)))
            ((unless (equal close-name open-name)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat <span class="string">"Found &lt;"</span>
                  open-name
                  <span class="string">"&gt; with mismatched &lt;/"</span>
                  close-name
                  <span class="string">"&gt;."</span>)
                loc
                open-tags)))
          (<a class="sym-link local-def" href="#def-find-tag-imbalance" data-sym="FIND-TAG-IMBALANCE" title="(defun xdoc::find-tag-imbalance (xdoc::x xdoc::open-tags xdoc::loc)
  &quot;Returns (MV ERROR/NIL LOC/NIL STILL-OPEN-TAGS/NIL)&quot;
  (xdoc::b*
   (((when (atom xdoc::x))
     (if xdoc::open-tags
...">find-tag-imbalance</a> (cdr x)
            (cdr open-tags)
            (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> loc)))))
    (<a class="sym-link local-def" href="#def-find-tag-imbalance" data-sym="FIND-TAG-IMBALANCE" title="(defun xdoc::find-tag-imbalance (xdoc::x xdoc::open-tags xdoc::loc)
  &quot;Returns (MV ERROR/NIL LOC/NIL STILL-OPEN-TAGS/NIL)&quot;
  (xdoc::b*
   (((when (atom xdoc::x))
     (if xdoc::open-tags
...">find-tag-imbalance</a> (cdr x)
      open-tags
      (<a class="sym-link system" href="../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> loc))))</pre>
  </div>

<div class="form-block function" id="def-parse-xml" data-defines="PARSE-XML" data-references="OPEN-TAGS-BACKTRACE,IF,*NLS*,CAT,FLATTEN-TOKENS-FOR-ERRORMSG,NEARBY,LEN,MIN,TAKE,CONTEXT,NTHCDR,START-CTX,-,MAX,BACK-ONE,NOT,FIND-TAG-IMBALANCE,OPEN-TAGS,LOC,REVERSE,TOKENS,WHEN,LENGTH,PARSE-XML-AUX,RTOKENS,ERR,MV,B*,STRING,TYPE,DECLARE,X,DEFUN" data-part-name="PARSE-XML" data-part-args="X" data-part-declare="X,STRING,TYPE,DECLARE" data-part-body="OPEN-TAGS-BACKTRACE,IF,*NLS*,CAT,FLATTEN-TOKENS-FOR-ERRORMSG,NEARBY,LEN,MIN,TAKE,CONTEXT,NTHCDR,START-CTX,-,MAX,BACK-ONE,NOT,FIND-TAG-IMBALANCE,OPEN-TAGS,LOC,REVERSE,TOKENS,WHEN,LENGTH,X,PARSE-XML-AUX,RTOKENS,ERR,MV,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-XML">parse-xml</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-xml" data-sym="PARSE-XML" title="(defun xdoc::parse-xml (xdoc::x)
  (declare (type string xdoc::x))
  (xdoc::b*
   (((xdoc::mv xdoc::err xdoc::rtokens)
     (xdoc::parse-xml-aux xdoc::x 0 (length xdoc::x) nil))
...">parse-xml</a>
  (x)
  (declare (type <a class="sym-link system" href="../../axioms.html#def-string" data-sym="STRING">string</a> x))
  (b* (((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err rtokens) (<a class="sym-link local-def" href="#def-parse-xml-aux" data-sym="PARSE-XML-AUX" title="(defun xdoc::parse-xml-aux (xdoc::x xdoc::n xdoc::xl xdoc::acc)
  &quot;Returns (MV ERR TOKENS)&quot;
  (xdoc::b*
   (((when (&gt;= xdoc::n xdoc::xl)) (xdoc::mv nil xdoc::acc))
    (xdoc::char-n (char xdoc::x xdoc::n))
...">parse-xml-aux</a> x <span class="number">0</span> (<a class="sym-link system" href="../../axioms.html#def-length" data-sym="LENGTH">length</a> x) nil)) ((when err) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err nil))
      (tokens (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> rtokens))
      ((<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err loc open-tags) (<a class="sym-link local-def" href="#def-find-tag-imbalance" data-sym="FIND-TAG-IMBALANCE" title="(defun xdoc::find-tag-imbalance (xdoc::x xdoc::open-tags xdoc::loc)
  &quot;Returns (MV ERROR/NIL LOC/NIL STILL-OPEN-TAGS/NIL)&quot;
  (xdoc::b*
   (((when (atom xdoc::x))
     (if xdoc::open-tags
...">find-tag-imbalance</a> tokens nil <span class="number">0</span>))
      ((when err) (b* (((when (<a class="sym-link system" href="../../axioms.html#def-not" data-sym="NOT">not</a> loc)) (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err nil)) (back-one (max <span class="number">0</span> (<a class="sym-link system" href="../../axioms.html#def--" data-sym="-">-</a> loc <span class="number">4</span>)))
            (start-ctx (<a class="sym-link system" href="../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> back-one tokens))
            (context (<a class="sym-link system" href="../../axioms.html#def-take" data-sym="TAKE">take</a> (min <span class="number">8</span> (<a class="sym-link system" href="../../axioms.html#def-len" data-sym="LEN">len</a> start-ctx))
                start-ctx))
            (nearby (<a class="sym-link local-def" href="#def-flatten-tokens-for-errormsg" data-sym="FLATTEN-TOKENS-FOR-ERRORMSG" title="(defun xdoc::flatten-tokens-for-errormsg (xdoc::x)
  (if (atom xdoc::x)
      &quot;&quot;
      (str::cat (xdoc::flatten-token-for-errormsg (car xdoc::x))
       (xdoc::flatten-tokens-for-errormsg (cdr xdoc::x)))))">flatten-tokens-for-errormsg</a> context)))
          (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> (cat err
              *nls*
              <span class="string">"Nearby text: {"</span>
              nearby
              <span class="string">"}"</span>
              *nls*
              *nls*
              (if open-tags
                (cat <span class="string">"Open tags stack:"</span>
                  *nls*
                  (<a class="sym-link local-def" href="#def-open-tags-backtrace" data-sym="OPEN-TAGS-BACKTRACE" title="(defun xdoc::open-tags-backtrace (xdoc::orig-str xdoc::open-tags)
  (if (atom xdoc::open-tags)
      &quot;&quot;
      (str::cat
       (xdoc::open-tag-backtrace-entry xdoc::orig-str (car xdoc::open-tags))">open-tags-backtrace</a> x
                    (<a class="sym-link system" href="../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> open-tags)))
                <span class="string">""</span>))
            nil))))
    (<a class="sym-link system" href="../../axioms.html#def-mv" data-sym="MV">mv</a> err tokens)))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>