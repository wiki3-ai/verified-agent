<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>hyp-fix - ACL2 Book</title>
  <meta property="name" content="hyp-fix">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">hyp-fix</h1>
    <div class="path"><a href="hyp-fix.lisp" class="source-link">books/centaur/gl/hyp-fix</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"GL"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="bfr.html" title="Open bfr">"bfr"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="bfr-param.html" title="Open bfr-param">"bfr-param"</a>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="bfr-reasoning.html" title="Open bfr-reasoning">"bfr-reasoning"</a>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/stobjs/absstobjs.html" title="Open std/stobjs/absstobjs">"std/stobjs/absstobjs"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/stobjs/clone.html" title="Open std/stobjs/clone">"std/stobjs/clone"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/index-of.html" title="Open std/lists/index-of">"std/lists/index-of"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/aig/aig-vars.html" title="Open centaur/aig/aig-vars">"centaur/aig/aig-vars"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable equal-of-booleans-rewrite
      consp-of-car-when-alistp
      double-containment
      aig-eval
      <a class="sym-link system" href="../../../axioms.html#def-default-car" data-sym="DEFAULT-CAR">default-car</a>
      <a class="sym-link system" href="../../../axioms.html#def-default-cdr" data-sym="DEFAULT-CDR">default-cdr</a>)))</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define calist-lookup
  (x calist)
  <span class="keyword">:inline</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((res (cdr (hons-get x calist))))
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> res (bfix res)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> calist-lookup-of-cons
    (equal (calist-lookup k1 (cons pair calist))
      (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> pair) (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal k1 (car pair))))
        (calist-lookup k1 calist)
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (cdr pair) (bfix (cdr pair))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> calist-lookup-of-atom
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (consp x))
      (equal (calist-lookup k x) nil))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:backchain-limit-lst</span> <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define calist-remassocs
  (x seen)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (car x))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-ec-call" data-sym="EC-CALL">ec-call</a> (<a class="sym-link system" href="../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) seen))))
      (cons (car x)
        (calist-remassocs (cdr x) seen))
      (calist-remassocs (cdr x) seen)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-in-calist-remassocs
    (equal (calist-lookup k
        (calist-remassocs x seen))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k seen))
        (calist-lookup k x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-of-calist-remassocs
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (calist-remassocs x seen))
      (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> calist-remassocs-compose
    (equal (calist-remassocs (calist-remassocs x seen1)
        seen2)
      (calist-remassocs x (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> seen1 seen2))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> set-equiv
    equal
    (calist-remassocs x seen)
    <span class="number">2</span>
    <span class="keyword">:package</span> <span class="keyword">:legacy</span>))</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define shrink-constraint-alist-aux
  (x seen)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (<a class="sym-link system" href="../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (fast-alist-free seen) nil)
    (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (car x))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (hons-get (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) seen)))
      (if (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
        (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x)
          (bfix (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x))
          (shrink-constraint-alist-aux (cdr x)
            (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> seen)))
        (shrink-constraint-alist-aux (cdr x)
          (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> seen)))
      (shrink-constraint-alist-aux (cdr x) seen)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ind
      (x seen)
      (declare (xargs <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
      (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
        seen
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (ind (cdr x)
            (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> seen))
          (ind (cdr x) (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> nil))
          (ind (cdr x) seen)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> calist-remassocs-compose-strong
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal y (calist-remassocs x seen1))
        (equal (calist-remassocs y seen2)
          (calist-remassocs x (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> seen1 seen2))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-of-cons-redundant
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k x)
        (set-equiv (cons k x) x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> shrink-constraint-alist-aux-of-seen
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal seen ''nil)))
      (equal (shrink-constraint-alist-aux x seen)
        (calist-remassocs (shrink-constraint-alist-aux x nil)
          (alist-keys seen))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable calist-remassocs alist-keys)
       <span class="keyword">:expand</span> ((shrink-constraint-alist-aux x nil))
       <span class="keyword">:induct</span> (ind x seen)))))</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define shrink-constraint-alist
  (x)
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)
  <span class="keyword">:verify-guards</span> nil
  (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
      nil
      (if (consp (car x))
        (let ((<a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a> (calist-remassocs (shrink-constraint-alist (cdr x))
               (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x)))))
          (if (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) (bfix (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)) <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)
            <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (shrink-constraint-alist (cdr x))))
    <span class="keyword">:exec</span> (shrink-constraint-alist-aux x nil))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> shrink-constraint-alist-aux-redef
    (equal (shrink-constraint-alist-aux x nil)
      (shrink-constraint-alist x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable shrink-constraint-alist-aux
         calist-remassocs))))
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> shrink-constraint-alist)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-in-shrink-constraint-alist
    (equal (calist-lookup k
        (shrink-constraint-alist x))
      (calist-lookup k x)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-of-cons-redundant
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k seen)
        (set-equiv (cons k seen) seen))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-of-append-to-cons
      (set-equiv (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> seen (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> k))
        (cons k seen))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> shrink-constraint-alist-of-calist-remassocs
    (equal (shrink-constraint-alist (calist-remassocs x seen))
      (calist-remassocs (shrink-constraint-alist x)
        seen))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (shrink-constraint-alist x)
       <span class="keyword">:expand</span> ((calist-remassocs x seen) (calist-remassocs nil seen)
         (<span class="keyword">:free</span> (a b)
           (calist-remassocs (cons a b) seen))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> shrink-constraint-alist-idempotent
    (equal (shrink-constraint-alist (shrink-constraint-alist x))
      (shrink-constraint-alist x))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (shrink-constraint-alist x)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b)
          (shrink-constraint-alist (cons a b))))))))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define eval-constraint-alist-aux
  (x seen env)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (<a class="sym-link system" href="../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (fast-alist-free seen) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
    (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (car x)) (hons-get (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) seen))
      (eval-constraint-alist-aux (cdr x) seen env)
      (if (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) env)
            (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x) <span class="number">1</span>))
          (eval-constraint-alist-aux (cdr x)
            (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> seen)
            env))
        (eval-constraint-alist-aux (cdr x)
          (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> seen)
          env))))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ind
      (x seen)
      (declare (xargs <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
      (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
        seen
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (ind (cdr x) seen)
          (ind (cdr x)
            (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> seen))
          (ind (calist-remassocs (cdr x) (alist-keys seen))
            (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> nil))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-of-append-to-cons
      (set-equiv (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> seen (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> k))
        (cons k seen))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-constraint-alist-aux-of-seen
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal seen ''nil)))
      (equal (eval-constraint-alist-aux x seen env)
        (eval-constraint-alist-aux (calist-remassocs x (alist-keys seen))
          nil
          env)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (calist-remassocs))
       <span class="keyword">:induct</span> (ind x seen)))))</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define eval-constraint-alist
  (x env)
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)
  <span class="keyword">:verify-guards</span> nil
  (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
      (if (consp (car x))
        (let ((<a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a> (eval-constraint-alist (calist-remassocs (cdr x) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x)))
               env)))
          (if (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) env)
                (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x) <span class="number">1</span>))
              <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)
            <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (eval-constraint-alist (cdr x) env)))
    <span class="keyword">:exec</span> (eval-constraint-alist-aux x nil env))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-of-cons-redundant
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k x)
        (set-equiv (cons k x) x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-constraint-alist-aux-redef
    (equal (eval-constraint-alist-aux x nil env)
      (eval-constraint-alist x env))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable eval-constraint-alist-aux
         calist-remassocs))))
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> eval-constraint-alist)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-constraint-alist-of-shrink-constraint-alist
    (equal (eval-constraint-alist (shrink-constraint-alist x)
        env)
      (eval-constraint-alist x env))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable shrink-constraint-alist)
       <span class="keyword">:induct</span> (eval-constraint-alist x env)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b)
          (eval-constraint-alist (cons a b) env))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> equal-1-of-lookup-when-eval-constraint-alist
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (eval-constraint-alist calist env)
      (equal (equal <span class="number">1</span> (calist-lookup x calist))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (calist-lookup x calist)
          (aig-eval x env))))))</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable (<span class="keyword">:t</span> calist-lookup$inline))))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define eval-constraint-alist-witness
  (x env)
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    (if (consp (car x))
      (let ((<a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a> (eval-constraint-alist-witness (calist-remassocs (cdr x) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x)))
             env)))
        (if (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
          (if (<a class="sym-link system" href="../../../axioms.html#def-xor" data-sym="XOR">xor</a> (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) env)
              (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x) <span class="number">1</span>))
            (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x)
            <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)
          <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
      (eval-constraint-alist-witness (cdr x) env)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-constraint-alist-in-terms-of-witness
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (rewriting-positive-literal `(eval-constraint-alist ,GL::X ,GL::ENV))
      (equal (eval-constraint-alist x env)
        (b* ((k (eval-constraint-alist-witness x env)))
          (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (calist-lookup k x))
            (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (aig-eval k env)
              (equal (calist-lookup k x) <span class="number">1</span>))))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:induct</span> (eval-constraint-alist-witness x env)
       <span class="keyword">:expand</span> ((eval-constraint-alist x env) (eval-constraint-alist-witness x env))
       <span class="keyword">:in-theory</span> (disable (<span class="keyword">:d</span> eval-constraint-alist-witness))))))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define constraint-alist-&gt;aig-aux
  (x seen)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    (<a class="sym-link system" href="../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (fast-alist-free seen) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
    (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (car x))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (hons-get (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) seen)))
      (if (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
        (aig-and (aig-iff (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) (equal (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x) <span class="number">1</span>))
          (constraint-alist-&gt;aig-aux (cdr x)
            (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> seen)))
        (constraint-alist-&gt;aig-aux (cdr x)
          (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> seen)))
      (constraint-alist-&gt;aig-aux (cdr x) seen)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ind
      (x seen)
      (declare (xargs <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
      (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
        seen
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (ind (cdr x) seen)
          (ind (cdr x)
            (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> seen))
          (ind (calist-remassocs (cdr x) (alist-keys seen))
            (hons-acons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> nil))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-of-append-to-cons
      (set-equiv (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> seen (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> k))
        (cons k seen))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-&gt;aig-aux-of-seen
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal seen ''nil)))
      (equal (constraint-alist-&gt;aig-aux x seen)
        (constraint-alist-&gt;aig-aux (calist-remassocs x (alist-keys seen))
          nil)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (calist-remassocs))
       <span class="keyword">:induct</span> (ind x seen)))))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define constraint-alist-&gt;aig
  (x)
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)
  <span class="keyword">:verify-guards</span> nil
  (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
      (if (consp (car x))
        (let ((<a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a> (constraint-alist-&gt;aig (calist-remassocs (cdr x) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x))))))
          (if (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            (aig-and (aig-iff (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x) <span class="number">1</span>)) <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)
            <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (constraint-alist-&gt;aig (cdr x))))
    <span class="keyword">:exec</span> (constraint-alist-&gt;aig-aux x nil))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-&gt;aig-aux-redef
    (equal (constraint-alist-&gt;aig-aux x nil)
      (constraint-alist-&gt;aig x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable constraint-alist-&gt;aig-aux))))
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> constraint-alist-&gt;aig)
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-of-cons-redundant
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k x)
        (set-equiv (cons k x) x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-&gt;aig-of-shrink-constraint-alist
    (equal (constraint-alist-&gt;aig (shrink-constraint-alist x))
      (constraint-alist-&gt;aig x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable shrink-constraint-alist)
       <span class="keyword">:induct</span> (constraint-alist-&gt;aig x)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b)
          (constraint-alist-&gt;aig (cons a b)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-of-constraint-alist-&gt;aig
    (equal (aig-eval (constraint-alist-&gt;aig x) env)
      (eval-constraint-alist x env))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (eval-constraint-alist aig-eval)
         (eval-constraint-alist-in-terms-of-witness)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> sets-in-aig-vars-of-aig-iff
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (in v (aig-vars a)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (in v (aig-vars b))))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (in v (aig-vars (aig-iff a b)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-iff aig-or))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-&gt;aig-of-remove-none
    (equal (constraint-alist-&gt;aig (calist-remassocs x nil))
      (constraint-alist-&gt;aig x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable calist-remassocs)))))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define constr-alist-depends-on
  (v x)
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)
  <span class="keyword">:verify-guards</span> nil
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (if (consp (car x))
      (if (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
        (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (in (aig-var-fix v) (aig-vars (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x)))
          (constr-alist-depends-on v
            (calist-remassocs (cdr x) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x)))))
        (constr-alist-depends-on v
          (calist-remassocs (cdr x) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x)))))
      (constr-alist-depends-on v (cdr x))))
  ///
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> aig-var-equiv
    equal
    (constr-alist-depends-on v x)
    <span class="number">1</span>
    <span class="keyword">:package</span> <span class="keyword">:legacy</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-of-cons-redundant
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k x)
        (set-equiv (cons k x) x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constr-alist-depends-on-of-shrink-constraint-alist
    (equal (constr-alist-depends-on v
        (shrink-constraint-alist x))
      (constr-alist-depends-on v x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable shrink-constraint-alist)
       <span class="keyword">:induct</span> (constr-alist-depends-on v x)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b)
          (constr-alist-depends-on v (cons a b)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-eval-of-acons-when-var-not-present
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (in v (aig-vars x)))
        (equal (aig-eval x (cons (cons v y) env))
          (aig-eval x env)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-eval aig-vars)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constr-alist-depends-on-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (constr-alist-depends-on (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> v)
            x))
        (aig-var-p v))
      (equal (eval-constraint-alist x
          (cons (cons v val) env))
        (eval-constraint-alist x env)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable eval-constraint-alist))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> in-aig-vars-of-aig-iff
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (in v (aig-vars a)))
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (in v (aig-vars b))))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (in v (aig-vars (aig-iff a b)))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-iff aig-or)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> dependencies-of-constraint-alist-&gt;aig
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (constr-alist-depends-on (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> v)
            x))
        (aig-var-p v))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (in v (aig-vars (constraint-alist-&gt;aig x)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable constraint-alist-&gt;aig))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constr-alist-depends-on-of-remassocs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (constr-alist-depends-on k x))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (constr-alist-depends-on k
          (calist-remassocs x seen))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable calist-remassocs)))))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aig-under-constraint-alist
  (x calist)
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> x)) x) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> negp xabs) (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (aig-atom-p x)) (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (cdr x) nil))
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (car x))
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil x)))
      (look (calist-lookup xabs calist))
      ((when look) (<a class="sym-link system" href="../../../axioms.html#def-xor" data-sym="XOR">xor</a> (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> <span class="number">1</span> look) negp))
      ((when (aig-atom-p xabs)) x)
      ((when negp) x)
      (car (aig-under-constraint-alist (car xabs) calist))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> car nil)) nil)
      (cdr (aig-under-constraint-alist (cdr xabs) calist))
      (newx (aig-and-dumb car cdr))
      (look (calist-lookup newx calist))
      ((when look) (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> <span class="number">1</span> look)))
    newx)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-under-constraint-alist-of-shrink-constraint-alist
    (equal (aig-under-constraint-alist x
        (shrink-constraint-alist calist))
      (aig-under-constraint-alist x calist)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-under-constraint-alist-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (eval-constraint-alist calist env)
      (equal (aig-eval (aig-under-constraint-alist x calist)
          env)
        (aig-eval x env)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-under-constraint-alist aig-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-under-constraint-alist-bfr-depends
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (bfr-mode) (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-depends-on k x)))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-depends-on k
          (aig-under-constraint-alist x calist))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-depends-on))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-under-constraint-alist-pbfr-depends
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (bfr-mode)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k p x)))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k
          p
          (aig-under-constraint-alist x calist))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable pbfr-depends-on bfr-from-param-space))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-under-constraint-alist-idempotent
    (equal (aig-under-constraint-alist (aig-under-constraint-alist x calist)
        calist)
      (aig-under-constraint-alist x calist))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (aig-under-constraint-alist x calist)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (enable aig-and-dumb)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-under-constraint-alist-of-t-and-nil
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (aig-under-constraint-alist <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> calist) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (equal (aig-under-constraint-alist nil calist) nil))))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define constraint-alist-delete-keys
  (keys calist)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> keys)
    calist
    (hons-acons (car keys)
      nil
      (constraint-alist-delete-keys (cdr keys) calist)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> remassocs-of-shrink-when-no-keys
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (consp keys))
        (equal (calist-remassocs (shrink-constraint-alist x)
            keys)
          (shrink-constraint-alist x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable calist-remassocs
           shrink-constraint-alist)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> calist-remassocs-compose-strong
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal y (calist-remassocs x seen1))
        (equal (calist-remassocs y seen2)
          (calist-remassocs x (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> seen1 seen2))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> shrink-of-constraint-alist-delete-keys
    (equal (shrink-constraint-alist (constraint-alist-delete-keys keys calist))
      (calist-remassocs (shrink-constraint-alist calist)
        keys))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable shrink-constraint-alist
         calist-remassocs
         <a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a>)
       <span class="keyword">:expand</span> ((shrink-constraint-alist calist) (<span class="keyword">:free</span> (seen)
           (calist-remassocs calist seen))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-of-constraint-alist-delete-keys
    (equal (calist-lookup k
        (constraint-alist-delete-keys keys calist))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k keys))
        (calist-lookup k calist))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-delete-nil
    (equal (constraint-alist-delete-keys nil calist)
      calist)))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define constraint-alist-assume-aig
  (x calist keys-acc)
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contradictionp calist num-aconses)
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> x)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x) calist keys-acc)) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> negp xabs) (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (aig-atom-p x)) (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (cdr x) nil))
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (car x))
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil x)))
      (look (calist-lookup xabs calist))
      ((when look) (if (<a class="sym-link system" href="../../../axioms.html#def-xor" data-sym="XOR">xor</a> (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> <span class="number">1</span> look) negp)
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil calist keys-acc)
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> calist keys-acc)))
      ((when (aig-atom-p xabs)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil
          (hons-acons xabs
            (if negp
              <span class="number">0</span>
              <span class="number">1</span>)
            calist)
          (cons xabs keys-acc)))
      ((when negp) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil
          (hons-acons xabs <span class="number">0</span> calist)
          (cons xabs keys-acc)))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contradictionp1 calist keys-acc) (constraint-alist-assume-aig (car xabs)
          calist
          keys-acc))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contradictionp2 calist keys-acc) (constraint-alist-assume-aig (cdr xabs)
          calist
          keys-acc)))
    (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> contradictionp1 contradictionp2)
      calist
      keys-acc))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> shrink-ind
      (x calist keys-acc)
      (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> x)) keys-acc) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> negp xabs) (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (aig-atom-p x)) (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (cdr x) nil))
              (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (car x))
              (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil x)))
          (look (calist-lookup xabs calist))
          ((when look) keys-acc)
          ((when (aig-atom-p xabs)) keys-acc)
          ((when negp) keys-acc)
          (?ign (shrink-ind (car xabs) calist keys-acc))
          ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp1 scalist skeys-acc) (constraint-alist-assume-aig (car xabs)
              (shrink-constraint-alist calist)
              keys-acc))
          ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp1 calist keys-acc) (constraint-alist-assume-aig (car xabs)
              calist
              keys-acc))
          (?ign (shrink-ind (cdr xabs) calist keys-acc)))
        (shrink-ind (cdr xabs) scalist skeys-acc))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-switch
      (set-equiv (cons b (cons a lst))
        (cons a (cons b lst)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable set-unequal-witness-rw)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-assume-aig-of-shrink
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> scontra snew-calist skeys) (constraint-alist-assume-aig x
           (shrink-constraint-alist calist)
           keys-acc)) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contra new-calist keys) (constraint-alist-assume-aig x
            calist
            keys-acc)))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal scontra contra)
        (equal (shrink-constraint-alist snew-calist)
          (shrink-constraint-alist new-calist))
        (equal skeys keys)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (shrink-ind x calist keys-acc)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b)
          (shrink-constraint-alist (cons a b)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-of-calist-remassocs-when-not-present
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (calist-lookup k calist))
        (equal (eval-constraint-alist (calist-remassocs calist (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> k))
            env)
          (eval-constraint-alist calist env)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable eval-constraint-alist calist-remassocs)
         <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b)
            (eval-constraint-alist (cons a b) env)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-assume-aig-remains-false
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-calist ?keys-out) (constraint-alist-assume-aig x
           calist
           keys-in)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (eval-constraint-alist calist env))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (eval-constraint-alist new-calist env))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (eval-constraint-alist)
         (eval-constraint-alist-in-terms-of-witness))
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b)
          (eval-constraint-alist (cons a b) env)))
       <span class="keyword">:induct</span> (constraint-alist-assume-aig x
         calist
         keys-in))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-assume-aig-correct
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-calist ?keys-out) (constraint-alist-assume-aig x
           calist
           keys-in)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (eval-constraint-alist calist env)
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> contradictionp))
        (equal (eval-constraint-alist new-calist env)
          (aig-eval x env))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (eval-constraint-alist aig-eval)
         (eval-constraint-alist-in-terms-of-witness))
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b)
          (eval-constraint-alist (cons a b) env)))
       <span class="keyword">:induct</span> (constraint-alist-assume-aig x
         calist
         keys-in))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-assume-aig-contradictionp
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-calist ?keys-out) (constraint-alist-assume-aig x
           calist
           keys-in)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (eval-constraint-alist calist env)
          (aig-eval x env))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> contradictionp)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable aig-eval)
       <span class="keyword">:induct</span> (constraint-alist-assume-aig x
         calist
         keys-in))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> ind
      (calist lst)
      (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> calist)
        lst
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (ind (cdr calist) lst)
          (ind (cdr calist) (cons (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> calist) lst))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> set-equiv-of-cons-redundant
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k x)
        (set-equiv (cons k x) x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> remassocs-of-shrink-when-not-present
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (calist-lookup k calist))
      (equal (calist-remassocs (shrink-constraint-alist calist)
          (cons k lst))
        (calist-remassocs (shrink-constraint-alist calist)
          lst)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((shrink-constraint-alist calist) (<span class="keyword">:free</span> (a b lst)
           (calist-remassocs (cons a b) lst))
         (<span class="keyword">:free</span> (lst) (calist-remassocs nil lst)))
       <span class="keyword">:induct</span> (ind calist lst))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> constraint-alist-delete-keys-of-assume-aig
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-calist ?keys-out) (constraint-alist-assume-aig x
           calist
           keys-in)))
      (equal (calist-remassocs (shrink-constraint-alist new-calist)
          keys-out)
        (calist-remassocs (shrink-constraint-alist calist)
          keys-in)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable shrink-constraint-alist)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b lst)
          (calist-remassocs (cons a b) lst)))
       <span class="keyword">:induct</span> (constraint-alist-assume-aig x
         calist
         keys-in))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> dependencies-of-constraint-alist-assume-aig
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-calist ?keys-out) (constraint-alist-assume-aig x
           calist
           keys-in)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (in (aig-var-fix k) (aig-vars x)))
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (constr-alist-depends-on k calist)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (constr-alist-depends-on k new-calist))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> nil
         ((<span class="keyword">:d</span> constraint-alist-assume-aig) subsetp-car-member
           aig-vars
           in
           subset
           union))
       <span class="keyword">:induct</span> (constraint-alist-assume-aig x
         calist
         keys-in)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (a b)
          (constr-alist-depends-on k (cons a b))) (aig-vars x)
         (constraint-alist-assume-aig x
           calist
           keys-in))))))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define calist-equiv
  (x y)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (equal (shrink-constraint-alist x)
    (shrink-constraint-alist y))
  ///
  (<a class="sym-link system" href="../../../defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> calist-equiv)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> def-calist-equiv-cong
    (resequiv call)
    (let ((argnum (index-of 'x call)))
      `(<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
        (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> calist-cong-lemma
            (,GL::RESEQUIV ,(GL::UPDATE-NTH GL::ARGNUM `(GL::SHRINK-CONSTRAINT-ALIST GL::X) GL::CALL)
              ,GL::CALL)
            <span class="keyword">:rule-classes</span> nil))
        (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> '(calist-equiv)))
        (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> calist-equiv
          ,GL::RESEQUIV
          ,GL::CALL
          ,GL::ARGNUM
          <span class="keyword">:package</span> <span class="keyword">:legacy</span> <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> calist-cong-lemma) (<span class="keyword">:instance</span> calist-cong-lemma (x x-equiv)))))))))
  (def-calist-equiv-cong equal
    (calist-lookup k x))
  (def-calist-equiv-cong equal
    (shrink-constraint-alist x))
  (def-calist-equiv-cong calist-equiv
    (calist-remassocs x keys))
  (def-calist-equiv-cong equal
    (eval-constraint-alist x env))
  (def-calist-equiv-cong equal
    (constraint-alist-&gt;aig x))
  (def-calist-equiv-cong equal
    (aig-under-constraint-alist a x))
  (def-calist-equiv-cong calist-equiv
    (constraint-alist-delete-keys keys x)))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> hyp$c
  (hyp-calist <span class="keyword">:type</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  (calist-len <span class="keyword">:type</span> (integer <span class="number">0</span> <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) <span class="keyword">:initially</span> <span class="number">0</span>)
  (calist-nkeys <span class="keyword">:type</span> (integer <span class="number">0</span> <a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a>) <span class="keyword">:initially</span> <span class="number">0</span>)
  (hyp-bfr-mode <span class="keyword">:type</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  <span class="keyword">:renaming</span> ((calist-len calist-len1) (calist-nkeys calist-nkeys1)))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define calist-len
  (hyp$c)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (lnfix (calist-len1 hyp$c)))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define calist-nkeys
  (hyp$c)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (lnfix (calist-nkeys1 hyp$c)))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define maybe-shrink-hyp$c
  (hyp$c)
  (if (&lt; (<a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> <span class="number">2</span> (calist-nkeys hyp$c))
      (calist-len hyp$c))
    (b* ((hyp$c (update-hyp-calist (shrink-constraint-alist (hyp-calist hyp$c))
           hyp$c)))
      (update-calist-len (calist-nkeys hyp$c)
        hyp$c))
    hyp$c)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> maybe-shrink-hyp$c-preserves-calist-equiv
    (calist-equiv (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> (maybe-shrink-hyp$c hyp$c))
      (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">0</span> hyp$c))))</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-hyp-mode-equiv
  (hyp1 hyp2)
  <span class="keyword">:verify-guards</span> nil
  (bfr-case <span class="keyword">:bdd</span> (equal hyp1 hyp2)
    <span class="keyword">:aig</span> (calist-equiv hyp1 hyp2))
  ///
  (<a class="sym-link system" href="../../../defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> bfr-hyp-mode-equiv))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-hyp-mode-fix
  (hyp)
  (bfr-case <span class="keyword">:bdd</span> hyp
    <span class="keyword">:aig</span> (shrink-constraint-alist hyp))
  ///
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bfr-hyp-mode-equiv
    equal
    (bfr-hyp-mode-fix hyp)
    <span class="number">1</span>
    <span class="keyword">:package</span> <span class="keyword">:legacy</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-equiv))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-mode-equiv-of-bfr-hyp-mode-fix
    (bfr-hyp-mode-equiv (bfr-hyp-mode-fix hyp)
      hyp)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-equiv))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> bfr-hyp-mode-equiv-in-terms-of-bfr-hyp-mode-fix
    (equal (bfr-hyp-mode-equiv hyp1 hyp2)
      (equal (bfr-hyp-mode-fix hyp1)
        (bfr-hyp-mode-fix hyp2)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-equiv))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-mode-fix-idempotent
    (equal (bfr-hyp-mode-fix (bfr-hyp-mode-fix x))
      (bfr-hyp-mode-fix x))))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-hyp-mode-eval
  (hyp env)
  (bfr-case <span class="keyword">:bdd</span> (bfr-eval hyp env)
    <span class="keyword">:aig</span> (eval-constraint-alist hyp env))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-mode-eval-of-bfr-hyp-mode-fix
    (equal (bfr-hyp-mode-eval (bfr-hyp-mode-fix hyp)
        env)
      (bfr-hyp-mode-eval hyp env))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-fix))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bfr-hyp-mode-equiv
    equal
    (bfr-hyp-mode-eval hyp env)
    <span class="number">1</span>
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bfr-hyp-mode-equiv-in-terms-of-bfr-hyp-mode-fix)
         (bfr-hyp-mode-eval-of-bfr-hyp-mode-fix))
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> bfr-hyp-mode-eval-of-bfr-hyp-mode-fix) (<span class="keyword">:instance</span> bfr-hyp-mode-eval-of-bfr-hyp-mode-fix
           (hyp hyp-equiv)))))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-hyp-init$c
  (hyp$c)
  (bfr-case <span class="keyword">:bdd</span> (b* ((hyp$c (update-hyp-bfr-mode nil hyp$c)))
      (update-hyp-calist <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> hyp$c))
    <span class="keyword">:aig</span> (b* ((hyp$c (update-hyp-bfr-mode <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> hyp$c)) (hyp$c (update-hyp-calist nil hyp$c))
        (hyp$c (update-calist-len <span class="number">0</span> hyp$c)))
      (update-calist-nkeys <span class="number">0</span> hyp$c))))</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define maybe-bfr-hyp-init$c
  (hyp$c)
  (bfr-case <span class="keyword">:bdd</span> (if (hyp-bfr-mode hyp$c)
      (bfr-hyp-init$c hyp$c)
      hyp$c)
    <span class="keyword">:aig</span> (if (hyp-bfr-mode hyp$c)
      hyp$c
      (bfr-hyp-init$c hyp$c))))</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-constr-init
  nil
  (bfr-case <span class="keyword">:bdd</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:aig</span> nil)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable (bfr-constr-init)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-of-bfr-constr-init
    (equal (bfr-hyp-mode-eval (bfr-constr-init) env)
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-eval)))))</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defaggregate hyppair
  ((bfr-mode) (hyp))
  <span class="keyword">:layout</span> <span class="keyword">:list</span>)</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-hyp-fix
  ((h hyppair-p))
  <span class="keyword">:returns</span> (new-hyp hyppair-p <span class="keyword">:hyp</span> <span class="keyword">:guard</span>)
  (b* (((hyppair h)))
    (hyppair (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (bfr-mode) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (bfr-case <span class="keyword">:bdd</span> (if h.bfr-mode
          <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
          h.hyp)
        <span class="keyword">:aig</span> (if h.bfr-mode
          (shrink-constraint-alist h.hyp)
          nil))))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-fix-idempotent
    (equal (bfr-hyp-fix (bfr-hyp-fix x))
      (bfr-hyp-fix x))))</pre>
  </div>

<div class="form-block other" id="form-36" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-hyp-equiv
  ((h1 hyppair-p) (h2 hyppair-p))
  (equal (bfr-hyp-fix h1) (bfr-hyp-fix h2))
  ///
  (<a class="sym-link system" href="../../../defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> bfr-hyp-equiv)
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bfr-hyp-equiv
    equal
    (bfr-hyp-fix h)
    <span class="number">1</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-fix-under-bfr-hyp-equiv
    (bfr-hyp-equiv (bfr-hyp-fix h) h)))</pre>
  </div>

<div class="form-block function" id="def-hyp-congruences-fn" data-defines="HYP-CONGRUENCES-FN" data-references="BFR-HYP-EQUIV,DEFCONG,EQUAL,DEFTHM,PROGN,QUASIQUOTE,INDEX-OF,OR,OUT-IDX,PKG-WITNESS,-EQUIV,LIST,GEN-SYM-SYM,HYP-VAR-EQUIV,HYP-CONGRUENCES,HARD?,ER,T,H,CONSTR,HYP$A,PATHCOND,HYP,MEMBER,COND,HYP-VAR,HYP-FIX-THM,SYMBOL-NAME,STRING,QUOTE,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,PRESERVES-THM,STOBJS-OUT,FORMALS,B*,XARGS,DECLARE,WORLD,CURR-PKG,RETVAL,HYP-FIX-HINTS,PRES-HINTS,HINTS,FN,DEFUN" data-used-by="DEF-HYP-CONGRUENCE" data-part-name="HYP-CONGRUENCES-FN" data-part-args="WORLD,CURR-PKG,RETVAL,HYP-FIX-HINTS,PRES-HINTS,HINTS,FN" data-part-declare="XARGS,DECLARE" data-part-body="BFR-HYP-EQUIV,DEFCONG,EQUAL,DEFTHM,PROGN,QUASIQUOTE,INDEX-OF,RETVAL,OR,OUT-IDX,CURR-PKG,PKG-WITNESS,-EQUIV,LIST,GEN-SYM-SYM,HYP-VAR-EQUIV,HYP-CONGRUENCES,HARD?,ER,T,H,CONSTR,HYP$A,PATHCOND,HYP,MEMBER,COND,HYP-VAR,HYP-FIX-THM,SYMBOL-NAME,STRING,QUOTE,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,PRESERVES-THM,STOBJS-OUT,WORLD,FN,FORMALS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HYP-CONGRUENCES-FN">hyp-congruences-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hyp-congruences-fn" data-sym="HYP-CONGRUENCES-FN" title="(defun gl::hyp-congruences-fn
       (gl::fn gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval
        gl::curr-pkg gl::world)
  (declare (gl::xargs :mode :program))
  (gl::b*
...">hyp-congruences-fn</a>
  (fn hints
    pres-hints
    hyp-fix-hints
    retval
    curr-pkg
    world)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (b* ((<a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a> fn world)) (<a class="sym-link system" href="../../../axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="../../../axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> fn world))
      (preserves-thm (intern-in-package-of-symbol (<a class="sym-link system" href="../../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../../axioms.html#def-string" data-sym="STRING">string</a> (symbol-name fn) <span class="string">"-PRESERVES-HYP"</span>)
          fn))
      (hyp-fix-thm (intern-in-package-of-symbol (<a class="sym-link system" href="../../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../../axioms.html#def-string" data-sym="STRING">string</a> (symbol-name fn) <span class="string">"-OF-BFR-HYP-FIX"</span>)
          fn))
      (hyp-var (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> 'hyp <a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>) 'hyp)
          ((<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> 'pathcond <a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>) 'pathcond)
          ((<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> 'hyp$a <a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>) 'hyp$a)
          ((<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> 'constr <a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>) 'constr)
          ((<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> 'h <a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>) 'h)
          (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
              'hyp-congruences
              <span class="string">"~x0 does not appear to take a hyp as an argument~%"</span>
              fn))))
      (hyp-var-equiv (<a class="sym-link system" href="../../../defthm.html#def-gen-sym-sym" data-sym="GEN-SYM-SYM">gen-sym-sym</a> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> hyp-var '-equiv)
          (pkg-witness curr-pkg)))
      (out-idx (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> retval (index-of hyp-var <a class="sym-link system" href="../../../axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))))
    `(<a class="sym-link system" href="../../../axioms.html#def-progn" data-sym="PROGN">progn</a> ,@(AND GL::OUT-IDX
       `((GL::DEFTHM ,GL::PRESERVES-THM
          (EQUAL (GL::MV-NTH ,GL::OUT-IDX (,GL::FN . ,GL::FORMALS))
                 (GL::BFR-HYP-FIX ,GL::HYP-VAR))
          :HINTS ,(OR GL::PRES-HINTS GL::HINTS))))
      (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,GL::HYP-FIX-THM
        (equal (,GL::FN . ,(SUBST `(GL::BFR-HYP-FIX ,GL::HYP-VAR) GL::HYP-VAR GL::FORMALS))
          (,GL::FN . ,GL::FORMALS))
        <span class="keyword">:hints</span> ,(OR GL::HYP-FIX-HINTS GL::HINTS))
      (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bfr-hyp-equiv
        equal
        (,GL::FN . ,GL::FORMALS)
        ,(+ 1 (INDEX-OF GL::HYP-VAR GL::FORMALS))
        <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> '(bfr-hyp-equiv)
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> ,GL::HYP-FIX-THM) (<span class="keyword">:instance</span> ,GL::HYP-FIX-THM
               (,GL::HYP-VAR ,GL::HYP-VAR-EQUIV)))))))))</pre>
  </div>

<div class="form-block macro" id="def-def-hyp-congruence" data-defines="DEF-HYP-CONGRUENCE" data-references="W,STATE,CURRENT-PACKAGE,QUOTE,HYP-CONGRUENCES-FN,MAKE-EVENT,QUASIQUOTE,RETVAL,HYP-FIX-HINTS,PRES-HINTS,HINTS,&KEY,FN,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEF-HYP-CONGRUENCE">def-hyp-congruence</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a>
  (fn &amp;key
    hints
    pres-hints
    hyp-fix-hints
    retval)
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-hyp-congruences-fn" data-sym="HYP-CONGRUENCES-FN" title="(defun gl::hyp-congruences-fn
       (gl::fn gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval
        gl::curr-pkg gl::world)
  (declare (gl::xargs :mode :program))
  (gl::b*
...">hyp-congruences-fn</a> ',GL::FN
      ',GL::HINTS
      ',GL::PRES-HINTS
      ',GL::HYP-FIX-HINTS
      ',GL::RETVAL
      (<a class="sym-link system" href="../../../axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
      (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-hyp-eval
  ((h hyppair-p) env)
  (b* (((hyppair h)))
    (bfr-case <span class="keyword">:bdd</span> (if h.bfr-mode
        <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
        (bfr-eval h.hyp env))
      <span class="keyword">:aig</span> (if h.bfr-mode
        (eval-constraint-alist h.hyp env)
        <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)))
  ///
  (<a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a> bfr-hyp-eval
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-fix))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-eval-in-terms-of-bfr-hyp-mode-eval
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (bfr-mode) (hyppair-&gt;bfr-mode h))
      (equal (bfr-hyp-eval h env)
        (bfr-hyp-mode-eval (hyppair-&gt;hyp h) env)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-eval-when-bad-mode
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-xor" data-sym="XOR">xor</a> (bfr-mode) (hyppair-&gt;bfr-mode h))
      (equal (bfr-hyp-eval h env) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-eval-of-bfr-hyp-fix
    (equal (bfr-hyp-eval (bfr-hyp-fix h) env)
      (bfr-hyp-eval h env))
    <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
       '(<span class="keyword">:in-theory</span> (enable bfr-hyp-eval
           bfr-hyp-mode-eval
           bfr-hyp-fix)))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bfr-hyp-equiv
    equal
    (bfr-hyp-eval h env)
    <span class="number">1</span>
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bfr-hyp-equiv)
         (bfr-hyp-eval bfr-hyp-eval-of-bfr-hyp-fix))
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> bfr-hyp-eval-of-bfr-hyp-fix (h h)) (<span class="keyword">:instance</span> bfr-hyp-eval-of-bfr-hyp-fix
           (h h-equiv))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-mode-eval-of-bfr-hyp-fix
    (equal (bfr-hyp-mode-eval (hyppair-&gt;hyp (bfr-hyp-fix h))
        env)
      (bfr-hyp-eval h env))
    <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
       '(<span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bfr-hyp-eval bfr-hyp-mode-eval
             bfr-hyp-fix
             eval-constraint-alist)
           (eval-constraint-alist-in-terms-of-witness)))))))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-hyp-init$a
  (hyp$a)
  (declare (ignore hyp$a))
  <span class="keyword">:returns</span> (new-hyp hyppair-p)
  (bfr-case <span class="keyword">:bdd</span> (hyppair nil <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
    <span class="keyword">:aig</span> (hyppair <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (shrink-constraint-alist nil)))
  ///
  (<a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a> bfr-hyp-init$a
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-fix))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-init-norm
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal hyp$a ''nil)))
      (equal (bfr-hyp-init$a hyp$a)
        (bfr-hyp-init$a nil))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-of-bfr-hyp-init$a
    (equal (bfr-hyp-eval (bfr-hyp-init$a hyp$a) env)
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-eval bfr-hyp-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-hyp-mode-fix-of-bfr-hyp-init$a
    (equal (bfr-hyp-fix (bfr-hyp-init$a hyp$a))
      (bfr-hyp-init$a hyp$a))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bfr-hyp-fix) ((bfr-hyp-fix)))))))</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define hyp$ap
  (hyp$a)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (hyppair-p hyp$a))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-assume$c
  (x hyp$c)
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contradictionp new-hyp undo-info)
  (b* ((hyp$c (maybe-bfr-hyp-init$c hyp$c)))
    (bfr-case <span class="keyword">:bdd</span> (b* ((orig (hyp-calist hyp$c)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (q-and x orig))
          (hyp$c (update-hyp-calist <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> hyp$c)))
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a>) hyp$c orig))
      <span class="keyword">:aig</span> (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contra hyp keys) (constraint-alist-assume-aig x
             (hyp-calist hyp$c)
             nil)) (hyp$c (update-hyp-calist hyp hyp$c))
          (nkeys (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> keys))
          (hyp$c (update-calist-len (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> nkeys (calist-len hyp$c))
              hyp$c))
          (hyp$c (update-calist-nkeys (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> nkeys (calist-nkeys hyp$c))
              hyp$c))
          (hyp$c (maybe-shrink-hyp$c hyp$c)))
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contra hyp$c keys)))))</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-constr-assume
  (x constr)
  <span class="keyword">:guard-hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable bfr-binary-and)))
  (bfr-case <span class="keyword">:bdd</span> (b* ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (bfr-and x constr)
           <span class="keyword">:exec</span> (q-and x constr))))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a>) <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> constr))
    <span class="keyword">:aig</span> (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contra constr keys) (constraint-alist-assume-aig x constr nil)))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contra constr keys)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-assume-correct
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-hyp ?undo-info) (bfr-constr-assume x hyp)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (rewriting-negative-literal `(<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> '<span class="number">0</span> (bfr-constr-assume ,GL::X ,GL::HYP)))
          (bfr-hyp-mode-eval hyp env))
        (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> contradictionp
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-eval x env))
            (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> contradictionp)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-eval
         bfr-eval
         bfr-binary-and)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:use</span> ((<span class="keyword">:instance</span> eval-bdd-of-q-and
             (x hyp)
             (y x)
             (values env)))
          <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x) (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> x)))
          <span class="keyword">:in-theory</span> (disable eval-bdd-of-q-and)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-assume-&gt;hyp-correct
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-hyp ?undo-info) (bfr-constr-assume x hyp)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (bfr-hyp-mode-eval hyp env)
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> contradictionp))
        (equal (bfr-hyp-mode-eval new-hyp env)
          (bfr-eval x env))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-eval bfr-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-assume-false
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-hyp ?undo-info) (bfr-constr-assume x hyp)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (rewriting-positive-literal `(bfr-hyp-mode-eval (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> '<span class="number">1</span> (bfr-constr-assume ,GL::X ,GL::HYP))
              ,GL::ENV))
          (bfr-hyp-mode-eval hyp env))
        (equal (bfr-hyp-mode-eval new-hyp env)
          (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (bfr-eval x env)
            (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> (bfr-hyp-mode-eval new-hyp env))))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x) (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> x)))
       <span class="keyword">:in-theory</span> (disable bfr-constr-assume)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:expand</span> nil
          <span class="keyword">:cases</span> ((<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span> (bfr-constr-assume x hyp))))))))</pre>
  </div>

<div class="form-block other" id="form-44" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-assume$a
  (x hyp$a)
  <span class="keyword">:guard</span> (hyp$ap hyp$a)
  (b* ((hyp$a (bfr-hyp-fix hyp$a)) ((hyppair hyp$a))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contra constr undo) (bfr-constr-assume x hyp$a.hyp)))
    (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> contra
      (hyppair (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (bfr-mode) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
        (bfr-hyp-mode-fix constr))
      undo))
  ///
  (<a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a> bfr-assume$a
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-fix))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-assume-correct-bind
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-hyp ?undo-info) (bfr-constr-assume x hyp)))
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (rewriting-negative-literal `(<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> '<span class="number">0</span> (bfr-constr-assume ,GL::X ,GL::HYP)))
            (<a class="sym-link system" href="../../../axioms.html#def-bind-free" data-sym="BIND-FREE">bind-free</a> '((env . env)) (env))
            (bfr-hyp-mode-eval hyp env))
          (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> contradictionp
            (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-eval x env))
              (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> contradictionp)))))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> bfr-constr-assume-correct
         <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x) (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> x)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-assume-correct
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-hyp ?undo-info) (bfr-assume$a x hyp)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (rewriting-negative-literal `(<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> '<span class="number">0</span> (bfr-assume$a ,GL::X ,GL::HYP)))
          (bfr-hyp-eval hyp env))
        (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> contradictionp
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-eval x env))
            (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> contradictionp)))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x) (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> x))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-assume-&gt;hyp-correct
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-hyp ?undo-info) (bfr-assume$a x hyp)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (bfr-hyp-eval hyp env)
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> contradictionp))
        (equal (bfr-hyp-eval new-hyp env)
          (bfr-eval x env)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-assume-false
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-hyp ?undo-info) (bfr-assume$a x hyp)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (rewriting-positive-literal `(bfr-hyp-eval (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> '<span class="number">1</span> (bfr-assume$a ,GL::X ,GL::HYP))
              ,GL::ENV))
          (bfr-hyp-eval hyp env))
        (equal (bfr-hyp-eval new-hyp env)
          (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (bfr-eval x env)
            (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> (bfr-hyp-eval new-hyp env))))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x) (<a class="sym-link system" href="../../../axioms.html#def-hide" data-sym="HIDE">hide</a> x)))))))</pre>
  </div>

<div class="form-block other" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-unassume$c
  (hyp$c undo-info)
  (b* ((hyp$c (maybe-bfr-hyp-init$c hyp$c)))
    (bfr-case <span class="keyword">:bdd</span> (update-hyp-calist undo-info hyp$c)
      <span class="keyword">:aig</span> (b* ((hyp (hyp-calist hyp$c)) (new-hyp (constraint-alist-delete-keys undo-info hyp))
          (hyp$c (update-hyp-calist new-hyp hyp$c))
          (nkeys (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> undo-info))
          (hyp$c (update-calist-len (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> nkeys (calist-len hyp$c))
              hyp$c))
          (hyp$c (update-calist-nkeys (max <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (calist-nkeys hyp$c) nkeys))
              hyp$c)))
        (maybe-shrink-hyp$c hyp$c)))))</pre>
  </div>

<div class="form-block other" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-unassume$a
  (hyp$a undo-info)
  <span class="keyword">:guard</span> (hyp$ap hyp$a)
  (b* ((hyp$a (bfr-hyp-fix hyp$a)))
    (bfr-case <span class="keyword">:bdd</span> (hyppair nil undo-info)
      <span class="keyword">:aig</span> (hyppair <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
        (shrink-constraint-alist (constraint-alist-delete-keys undo-info
            (hyppair-&gt;hyp hyp$a))))))
  ///
  (<a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a> bfr-unassume$a
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-fix))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> calist-remassocs-nil-of-true-list
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> x)
        (equal (calist-remassocs x nil) x))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable calist-remassocs)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> alistp-of-calist-remassocs
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> x)
        (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (calist-remassocs x seen)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable calist-remassocs)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> alistp-of-shrink-constraint-alist
      (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (shrink-constraint-alist x))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable shrink-constraint-alist)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-unassume-of-assume
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?contradictionp ?new-hyp ?undo-info) (bfr-assume$a x hyp)))
      (equal (bfr-unassume$a new-hyp undo-info)
        (bfr-hyp-fix hyp)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-assume$a
         bfr-constr-assume
         bfr-hyp-fix
         bfr-hyp-mode-fix)))))</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define hyp-calist-corrected$c
  (hyp$c)
  (bfr-case <span class="keyword">:bdd</span> (if (hyp-bfr-mode hyp$c)
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
      (hyp-calist hyp$c))
    <span class="keyword">:aig</span> (if (hyp-bfr-mode hyp$c)
      (hyp-calist hyp$c)
      nil)))</pre>
  </div>

<div class="form-block other" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define hyp-fix$c
  (x hyp$c)
  (b* ((calist (hyp-calist-corrected$c hyp$c)))
    (bfr-case <span class="keyword">:bdd</span> (if (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> calist)
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> x <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
        (let ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (q-and x calist)))
          (if <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a>
            (if (hqual <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> calist)
              <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
              x)
            nil)))
      <span class="keyword">:aig</span> (aig-under-constraint-alist x calist))))</pre>
  </div>

<div class="form-block other" id="form-49" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-constr-mode-fix
  (x h)
  (bfr-case <span class="keyword">:bdd</span> (if (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> h)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> x <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (let ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (q-and x h)))
        (if <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a>
          (if (hqual <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> h)
            <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
            x)
          nil)))
    <span class="keyword">:aig</span> (aig-under-constraint-alist x h))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-mode-fix-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (bfr-hyp-mode-eval hyp env)
      (equal (bfr-eval (bfr-constr-mode-fix x hyp)
          env)
        (bfr-eval x env)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-fix
         bfr-hyp-mode-eval
         bfr-eval)
       <span class="keyword">:expand</span> ((eval-constraint-alist nil env))) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:use</span> ((<span class="keyword">:instance</span> eval-bdd-of-q-and
             (x (bfr-hyp-mode-fix hyp))
             (y x)
             (values env)))
          <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bfr-hyp-mode-fix) (eval-bdd-of-q-and))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-depends-on-of-bfr-constr-mode-fix
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-depends-on k x))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-depends-on k
          (bfr-constr-mode-fix x hyp$a)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pbfr-depends-on-of-bfr-constr-mode-fix
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k p x))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k
          p
          (bfr-constr-mode-fix x hyp$a)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-mode-fix-idempotent
    (equal (bfr-constr-mode-fix (bfr-constr-mode-fix x hyp)
        hyp)
      (bfr-constr-mode-fix x hyp)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-mode-fix-of-t-and-nil
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (bfr-constr-mode-fix <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> hyp) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (equal (bfr-constr-mode-fix nil hyp) nil))))</pre>
  </div>

<div class="form-block other" id="form-50" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-constr-fix
  (x hyp$a)
  <span class="keyword">:guard</span> (hyp$ap hyp$a)
  (b* ((h (hyppair-&gt;hyp (bfr-hyp-fix hyp$a))))
    (bfr-case <span class="keyword">:bdd</span> (if (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> h)
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> x <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
        (let ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (q-and x h)))
          (if <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a>
            (if (hqual <a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> h)
              <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
              x)
            nil)))
      <span class="keyword">:aig</span> (aig-under-constraint-alist x h)))
  ///
  (<a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a> bfr-constr-fix)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-fix-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (bfr-hyp-eval hyp env)
      (equal (bfr-eval (bfr-constr-fix x hyp) env)
        (bfr-eval x env)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-fix bfr-hyp-eval bfr-eval)
       <span class="keyword">:expand</span> ((eval-constraint-alist nil env))) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:use</span> ((<span class="keyword">:instance</span> eval-bdd-of-q-and
             (x (hyppair-&gt;hyp (bfr-hyp-fix hyp)))
             (y x)
             (values env)))
          <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bfr-hyp-fix) (eval-bdd-of-q-and))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-depends-on-of-bfr-constr-fix
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-depends-on k x))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-depends-on k
          (bfr-constr-fix x hyp$a)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pbfr-depends-on-of-bfr-constr-fix
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k p x))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k
          p
          (bfr-constr-fix x hyp$a)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-fix-idempotent
    (equal (bfr-constr-fix (bfr-constr-fix x hyp)
        hyp)
      (bfr-constr-fix x hyp)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-fix-of-t-and-nil
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (bfr-constr-fix <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> hyp) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (equal (bfr-constr-fix nil hyp) nil))))</pre>
  </div>

<div class="form-block other" id="form-51" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-hyp-&gt;bfr$c
  (hyp$c)
  (b* ((h (hyp-calist-corrected$c hyp$c)))
    (bfr-case <span class="keyword">:bdd</span> h
      <span class="keyword">:aig</span> (constraint-alist-&gt;aig h))))</pre>
  </div>

<div class="form-block other" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-constr-mode-&gt;bfr
  (h)
  (bfr-case <span class="keyword">:bdd</span> h
    <span class="keyword">:aig</span> (constraint-alist-&gt;aig h))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-eval-of-bfr-constr-mode-&gt;bfr
    (equal (bfr-eval (bfr-constr-mode-&gt;bfr hyp) env)
      (bfr-hyp-mode-eval hyp env))
    <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
       '(<span class="keyword">:in-theory</span> (enable bfr-eval
           bfr-hyp-mode-eval
           bfr-hyp-mode-fix))))))</pre>
  </div>

<div class="form-block other" id="form-53" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-constr-&gt;bfr
  (hyp$a)
  <span class="keyword">:guard</span> (hyp$ap hyp$a)
  (b* ((h (hyppair-&gt;hyp (bfr-hyp-fix hyp$a))))
    (bfr-case <span class="keyword">:bdd</span> h
      <span class="keyword">:aig</span> (constraint-alist-&gt;aig h)))
  ///
  (<a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a> bfr-constr-&gt;bfr)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-eval-of-bfr-constr-&gt;bfr
    (equal (bfr-eval (bfr-constr-&gt;bfr hyp) env)
      (bfr-hyp-eval hyp env))
    <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
       '(<span class="keyword">:in-theory</span> (enable bfr-eval bfr-hyp-eval bfr-hyp-fix))))))</pre>
  </div>

<div class="form-block other" id="form-54" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-constr-mode-depends-on
  (k p h)
  <span class="keyword">:verify-guards</span> nil
  (bfr-case <span class="keyword">:bdd</span> (pbfr-depends-on k p h)
    <span class="keyword">:aig</span> (constr-alist-depends-on k h))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-mode-depends-on-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-constr-mode-depends-on k p x))
        (bfr-eval p env)
        (bfr-eval p (bfr-set-var k v env)))
      (equal (bfr-hyp-mode-eval x
          (bfr-param-env p
            (bfr-set-var k v env)))
        (bfr-hyp-mode-eval x
          (bfr-param-env p env))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-eval bfr-hyp-mode-fix)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bfr-eval bfr-set-var
              bfr-param-env
              bfr-varname-fix
              bfr-hyp-mode-fix)
            (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a>))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-mode-depends-on-of-bfr-constr-assume
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-constr-mode-depends-on k p x))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k p a)))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-constr-mode-depends-on k
          p
          (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (bfr-constr-assume a x)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-constr-assume
         bfr-hyp-mode-fix
         bfr-constr-assume)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (enable pbfr-depends-on
            bfr-depends-on
            bfr-from-param-space
            bfr-varname-fix)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pbfr-depends-on-of-bfr-constr-mode-&gt;bfr
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-constr-mode-depends-on k p x))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k
          p
          (bfr-constr-mode-&gt;bfr x))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-constr-mode-&gt;bfr)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (pbfr-depends-on bfr-depends-on
              bfr-from-param-space
              bfr-varname-fix)
            (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a>))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-mode-depends-on-of-bfr-hyp-mode-fix
    (equal (bfr-constr-mode-depends-on k
        p
        (bfr-hyp-mode-fix x))
      (bfr-constr-mode-depends-on k p x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-mode-fix)))))</pre>
  </div>

<div class="form-block other" id="form-55" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bfr-constr-depends-on
  (k p (hyp$a hyp$ap))
  <span class="keyword">:verify-guards</span> nil
  (b* ((h (hyppair-&gt;hyp (bfr-hyp-fix hyp$a))))
    (bfr-case <span class="keyword">:bdd</span> (pbfr-depends-on k p h)
      <span class="keyword">:aig</span> (constr-alist-depends-on k h)))
  ///
  (<a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a> bfr-constr-depends-on)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-depends-on-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-constr-depends-on k p x))
        (bfr-eval p env)
        (bfr-eval p (bfr-set-var k v env)))
      (equal (bfr-hyp-eval x
          (bfr-param-env p
            (bfr-set-var k v env)))
        (bfr-hyp-eval x (bfr-param-env p env))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-hyp-eval bfr-hyp-fix)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bfr-eval bfr-set-var
              bfr-param-env
              bfr-varname-fix
              bfr-hyp-fix)
            (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a>))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bfr-constr-depends-on-of-bfr-constr-assume
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-constr-depends-on k p x))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k p a)))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-constr-depends-on k
          p
          (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span> (bfr-assume$a a x)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-assume$a
         bfr-hyp-fix
         bfr-hyp-mode-fix
         bfr-constr-assume)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (enable pbfr-depends-on
            bfr-depends-on
            bfr-from-param-space
            bfr-varname-fix)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pbfr-depends-on-of-bfr-constr-&gt;bfr
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-constr-depends-on k p x))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (pbfr-depends-on k
          p
          (bfr-constr-&gt;bfr x))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bfr-constr-&gt;bfr)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (pbfr-depends-on bfr-depends-on
              bfr-from-param-space
              bfr-varname-fix)
            (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a>)))))))</pre>
  </div>

<div class="form-block other" id="form-56" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define hyp-norm$a
  ((hyp$a hyp$ap))
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (bfr-hyp-fix hyp$a))</pre>
  </div>

<div class="form-block other" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define create-hyp$a
  nil
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (hyppair nil nil))</pre>
  </div>

<div class="form-block other" id="form-58" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun-nx" data-sym="DEFUN-NX">defun-nx</a> hyp-corr
  (hyp$c hyp$a)
  (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (hyp-bfr-mode hyp$c)
      (hyppair-&gt;bfr-mode hyp$a))
    (if (hyp-bfr-mode hyp$c)
      (equal (shrink-constraint-alist (hyp-calist hyp$c))
        (hyppair-&gt;hyp hyp$a))
      (equal (hyp-calist hyp$c)
        (hyppair-&gt;hyp hyp$a)))))</pre>
  </div>

<div class="form-block other" id="form-59" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bfr-hyp-mode-fix bfr-hyp-init$c
          bfr-assume$c
          bfr-assume$a
          bfr-binary-and
          bfr-constr-assume
          bfr-unassume$c
          bfr-unassume$a
          hyp$ap
          hyp-fix$c
          bfr-hyp-init$a
          bfr-constr-fix
          bfr-hyp-&gt;bfr$c
          bfr-constr-&gt;bfr
          bfr-hyp-fix
          maybe-bfr-hyp-init$c
          maybe-shrink-hyp$c
          hyp-calist-corrected$c)
        ((bfr-hyp-mode-fix) <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>))))
  (defabsstobj-events hyp
    <span class="keyword">:foundation</span> hyp$c
    <span class="keyword">:recognizer</span> (hyp-p <span class="keyword">:logic</span> hyp$ap <span class="keyword">:exec</span> hyp$cp)
    <span class="keyword">:creator</span> (create-hyp <span class="keyword">:logic</span> create-hyp$a
      <span class="keyword">:exec</span> create-hyp$c)
    <span class="keyword">:corr-fn</span> hyp-corr
    <span class="keyword">:corr-fn-exists</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:exports</span> ((bfr-hyp-init <span class="keyword">:logic</span> bfr-hyp-init$a
       <span class="keyword">:exec</span> bfr-hyp-init$c
       <span class="keyword">:protect</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>) (bfr-assume <span class="keyword">:logic</span> bfr-assume$a
        <span class="keyword">:exec</span> bfr-assume$c
        <span class="keyword">:protect</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (bfr-unassume <span class="keyword">:logic</span> bfr-unassume$a
        <span class="keyword">:exec</span> bfr-unassume$c
        <span class="keyword">:protect</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (hyp-fix <span class="keyword">:logic</span> bfr-constr-fix <span class="keyword">:exec</span> hyp-fix$c)
      (hyp-norm <span class="keyword">:logic</span> hyp-norm$a
        <span class="keyword">:exec</span> maybe-bfr-hyp-init$c
        <span class="keyword">:protect</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
      (bfr-hyp-&gt;bfr <span class="keyword">:logic</span> bfr-constr-&gt;bfr
        <span class="keyword">:exec</span> bfr-hyp-&gt;bfr$c))))</pre>
  </div>

<div class="form-block macro" id="def-lbfr-hyp-fix" data-defines="LBFR-HYP-FIX" data-references="HYP-NORM,QUASIQUOTE,HYP,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="LBFR-HYP-FIX">lbfr-hyp-fix</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-lbfr-hyp-fix" data-sym="LBFR-HYP-FIX" title="(defmacro gl::lbfr-hyp-fix (gl::hyp) `(gl::hyp-norm ,gl::hyp))">lbfr-hyp-fix</a>
  (hyp)
  `(hyp-norm ,GL::HYP))</pre>
  </div>

<div class="form-block other" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define hyp-fixedp
  (x hyp)
  (hqual (hyp-fix x hyp) x)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> hyp-fixedp-of-hyp-fix
    (hyp-fixedp (bfr-constr-fix x hyp) hyp)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hyp-fix))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> hyp-fix-of-hyp-fixedp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (hyp-fixedp x hyp)
      (equal (bfr-constr-fix x hyp) x))))</pre>
  </div>

<div class="form-block other" id="form-62" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define true-under-hyp
  (x hyp)
  (declare (ignorable hyp))
  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> x <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  ///
  (<a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a> true-under-hyp)
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> true-under-hyp-point
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (true-under-hyp x hyp)
        (hyp-fixedp x hyp)
        (bfr-hyp-eval hyp v))
      (bfr-eval x v))))</pre>
  </div>

<div class="form-block other" id="form-63" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define false-under-hyp
  (x hyp)
  (declare (ignorable hyp))
  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> x nil)
  ///
  (<a class="sym-link local-def" href="#def-def-hyp-congruence" data-sym="DEF-HYP-CONGRUENCE" title="(defmacro gl::def-hyp-congruence
          (gl::fn &amp;key gl::hints gl::pres-hints gl::hyp-fix-hints gl::retval)
  `(gl::make-event
    (gl::hyp-congruences-fn &#39;,gl::fn &#39;,gl::hints &#39;,gl::pres-hints
     &#39;,gl::hyp-fix-hints &#39;,gl::retval (gl::current-package gl::state)">def-hyp-congruence</a> false-under-hyp)
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> false-under-hyp-point
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (false-under-hyp x hyp)
        (hyp-fixedp x hyp)
        (bfr-hyp-eval hyp v))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (bfr-eval x v)))))</pre>
  </div>

<div class="form-block macro" id="def-hf" data-defines="HF" data-references="HYP,HYP-FIX,QUASIQUOTE,X,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="HF">hf</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-hf" data-sym="HF" title="(defmacro gl::hf (gl::x) `(gl::hyp-fix ,gl::x gl::hyp))">hf</a> (x) `(hyp-fix ,GL::X hyp))</pre>
  </div>

<div class="form-block macro" id="def-th" data-defines="TH" data-references="HYP,TRUE-UNDER-HYP,QUASIQUOTE,X,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TH">th</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-th" data-sym="TH" title="(defmacro gl::th (gl::x) `(gl::true-under-hyp ,gl::x gl::hyp))">th</a>
  (x)
  `(true-under-hyp ,GL::X hyp))</pre>
  </div>

<div class="form-block macro" id="def-fh" data-defines="FH" data-references="HYP,FALSE-UNDER-HYP,QUASIQUOTE,X,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="FH">fh</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-fh" data-sym="FH" title="(defmacro gl::fh (gl::x) `(gl::false-under-hyp ,gl::x gl::hyp))">fh</a>
  (x)
  `(false-under-hyp ,GL::X hyp))</pre>
  </div>

<div class="form-block other" id="form-67" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(add-untranslate-pattern (true-under-hyp ?x hyp)
  (<a class="sym-link local-def" href="#def-th" data-sym="TH" title="(defmacro gl::th (gl::x) `(gl::true-under-hyp ,gl::x gl::hyp))">th</a> ?x))</pre>
  </div>

<div class="form-block other" id="form-68" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(add-untranslate-pattern (false-under-hyp ?x hyp)
  (<a class="sym-link local-def" href="#def-fh" data-sym="FH" title="(defmacro gl::fh (gl::x) `(gl::false-under-hyp ,gl::x gl::hyp))">fh</a> ?x))</pre>
  </div>

<div class="form-block other" id="form-69" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(add-untranslate-pattern (hyp-fix ?x hyp)
  (<a class="sym-link local-def" href="#def-hf" data-sym="HF" title="(defmacro gl::hf (gl::x) `(gl::hyp-fix ,gl::x gl::hyp))">hf</a> ?x))</pre>
  </div>

<div class="form-block other" id="form-70" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defstobj-clone pathcond hyp <span class="keyword">:suffix</span> <span class="string">"-PATHCOND"</span>)</pre>
  </div>

<div class="form-block other" id="form-71" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(add-bfr-fn-pat bfr-constr-fix)</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>