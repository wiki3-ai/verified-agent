<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>deftypes - ACL2 Book</title>
  <meta property="name" content="deftypes">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">deftypes</h1>
    <div class="path"><a href="deftypes.lisp" class="source-link">books/centaur/fty/deftypes</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"FTY"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="database.html" title="Open database">"database"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="docgen.html" title="Open docgen">"docgen"</a>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="fixequiv.html" title="Open fixequiv">"fixequiv"</a>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="fty-sum.html" title="Open fty-sum">"fty-sum"</a>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="fty-alist.html" title="Open fty-alist">"fty-alist"</a>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="fty-list.html" title="Open fty-list">"fty-list"</a>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="fty-transsum.html" title="Open fty-transsum">"fty-transsum"</a>)</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../kestrel/fty/fty-set.html" title="Open kestrel/fty/fty-set">"kestrel/fty/fty-set"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../kestrel/fty/fty-omap.html" title="Open kestrel/fty/fty-omap">"kestrel/fty/fty-omap"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="fty-sugar.html" title="Open fty-sugar">"fty-sugar"</a>)</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/util/deflist-base.html" title="Open std/util/deflist-base">"std/util/deflist-base"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/util/defalist-base.html" title="Open std/util/defalist-base">"std/util/defalist-base"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/acl2-count.html" title="Open std/lists/acl2-count">"std/lists/acl2-count"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-set-state-ok" data-sym="SET-STATE-OK">set-state-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-set-compile-fns" data-sym="SET-COMPILE-FNS">set-compile-fns</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-of-strip-cars
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> y))
    (equal (equal (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> x) y)
      (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> y)
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> y) (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp x)
          (equal (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (cdr x)) (cdr y))
          (if (car y)
            (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (car x))
              (equal (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) (car y)))
            (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (car x)) (equal (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x) nil))))))))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> strip-cars-under-iff
  (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> x) (consp x)))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-of-plus-one
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> y))
    (equal (equal (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> x) y)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (acl2-numberp y)
        (equal (<a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> x) (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">-1</span> y))))))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> consp-when-tag
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (tag x) (consp x))
  <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:backchain-limit-lst</span> <span class="number">0</span>)))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> len-of-cons
  (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (cons a b))
    (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> b))))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-of-len
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> n))
    (equal (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) n)
      (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> n)
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal n <span class="number">0</span>) (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (consp x)))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp x)
          (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (cdr x)) (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">-1</span> n)))))))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> open-member-equal-on-list-of-tags
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> val)
        (<a class="sym-link system" href="../../../axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> (<a class="sym-link system" href="../../../axioms.html#def-unquote" data-sym="UNQUOTE">unquote</a> val))))
    (equal (<a class="sym-link system" href="../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> a val)
      (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> val) nil)
        ((equal a (car val)) val)
        (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> a (cdr val))))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a>))))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> alistp-compound-recognizer
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> x) (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x))
  <span class="keyword">:rule-classes</span> <span class="keyword">:compound-recognizer</span>)</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define equal-when-strip-cars
  ((x <a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>) y cars)
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> cars)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> cars)
    (equal y nil)
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp y)
      (consp (car y))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> y) (car cars))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> y) (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x))
      (equal-when-strip-cars (cdr x)
        (cdr y)
        (cdr cars))))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> equal-when-strip-cars-of-nil
    (equal (equal-when-strip-cars x y nil)
      (equal y nil)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-when-strip-cars-of-cons
    (equal (equal-when-strip-cars x
        (cons (cons key val) rest-y)
        (cons key rest-cars))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal val (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x))
        (equal-when-strip-cars (cdr x)
          rest-y
          rest-cars))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-cons-car-cdr" data-sym="CONS-CAR-CDR">cons-car-cdr</a>)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-of-strip-cars-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> x)
        (equal (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> x)
          (<a class="sym-link system" href="../../../axioms.html#def-true-list-fix" data-sym="TRUE-LIST-FIX">true-list-fix</a> cars)))
      (equal (equal-when-strip-cars x y cars)
        (equal x y)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:induct</span> (equal-when-strip-cars x y cars)
       <span class="keyword">:in-theory</span> (disable (<span class="keyword">:d</span> equal-when-strip-cars))
       <span class="keyword">:expand</span> ((equal-when-strip-cars x y cars) (equal-when-strip-cars nil nil cars)
         (equal-when-strip-cars nil y cars)
         (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> x)
         (<a class="sym-link system" href="../../../axioms.html#def-true-list-fix" data-sym="TRUE-LIST-FIX">true-list-fix</a> cars)
         (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-list-fix-of-strip-cars
      (equal (<a class="sym-link system" href="../../../axioms.html#def-true-list-fix" data-sym="TRUE-LIST-FIX">true-list-fix</a> (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> x))
        (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> x))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-true-list-fix" data-sym="TRUE-LIST-FIX">true-list-fix</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-of-cons-by-equal-of-strip-cars
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> x) cars)
        (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> cars))
        (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> cars)
        (<a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a> x))
      (equal (equal (cons (cons key1 val1) <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>) x)
        (equal-when-strip-cars x
          (cons (cons key1 val1) <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)
          cars)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (equal-of-strip-cars-correct <a class="sym-link system" href="../../../axioms.html#def-true-list-fix" data-sym="TRUE-LIST-FIX">true-list-fix</a>)
         (equal-when-strip-cars))
       <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> prove-equal-of-cons-when-first-quotep
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> car))
      (consp x)
      (equal (car x) car)
      (equal (cdr x) cdr))
    (equal (equal (cons car cdr) x) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> deftypes-theory
  '(prove-equal-of-cons-when-first-quotep equal-when-strip-cars-of-cons
    equal-when-strip-cars-of-nil
    equal-of-cons-by-equal-of-strip-cars
    <a class="sym-link system" href="../../../axioms.html#def-car-cons" data-sym="CAR-CONS">car-cons</a>
    <a class="sym-link system" href="../../../axioms.html#def-cdr-cons" data-sym="CDR-CONS">cdr-cons</a>
    <a class="sym-link system" href="../../../axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a>
    strip-cars-under-iff
    <a class="sym-link system" href="../../../axioms.html#def-eqlablep" data-sym="EQLABLEP">eqlablep</a>
    (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a>)
    len-of-cons
    equal-of-len
    (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a>)
    (<span class="keyword">:t</span> <a class="sym-link system" href="../../../axioms.html#def-acl2-count" data-sym="ACL2-COUNT">acl2-count</a>)
    acl2-count-of-car
    acl2-count-of-cdr
    acl2-count-of-consp-positive
    acl2-count-of-cons-greater
    <a class="sym-link system" href="../../../axioms.html#def-o_3C" data-sym="O&lt;">o&lt;</a>
    <a class="sym-link system" href="../../../axioms.html#def-o-finp" data-sym="O-FINP">o-finp</a>
    (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
    <a class="sym-link system" href="../../../axioms.html#def-natp-compound-recognizer" data-sym="NATP-COMPOUND-RECOGNIZER">natp-compound-recognizer</a>
    hons
    open-member-equal-on-list-of-tags
    alistp-compound-recognizer
    <a class="sym-link system" href="../../../axioms.html#def-alistp" data-sym="ALISTP">alistp</a>
    <a class="sym-link system" href="../../../axioms.html#def-identity" data-sym="IDENTITY">identity</a>
    prod-car
    prod-cdr
    prod-hons
    <a class="sym-link system" href="../../../axioms.html#def-cons-with-hint" data-sym="CONS-WITH-HINT">cons-with-hint</a>
    prod-cons-with-hint
    car-of-prod-cons
    cdr-of-prod-cons
    prod-cons-of-car/cdr
    acl2-count-of-prod-cons
    prod-cons-equal-cons
    prod-cons-when-either
    prod-consp-compound-recognizer
    prod-cons-not-consp-forward))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block function" id="def-parse-flextypelist" data-defines="PARSE-FLEXTYPELIST" data-references="CDR,*KNOWN-FLEXTYPE-GENERATORS*,QUOTE,HARD?,ER,OTHERWISE,PARSE-FLEXOMAP,DEFOMAP,PARSE-FLEXSET,DEFSET,CHANGE-FLEXALIST,AL,LET,DEFMAP,PARSE-FLEXALIST,DEFALIST,PARSE-FLEXLIST,DEFLIST,PARSE-TRANSSUM,DEFTRANSSUM,PARSE-OPTION,DEFOPTION,PARSE-TAGSUM,DEFTAGSUM,PARSE-DEFPROD,DEFPROD,CDAR,PARSE-FLEXSUM,DEFFLEXSUM,CAAR,CASE,CONS,ATOM,IF,STATE,FIXTYPES,OUR-FIXTYPES,XVAR,X,DEFUN" data-used-by="PARSE-FLEXTYPES" data-part-name="PARSE-FLEXTYPELIST" data-part-args="STATE,FIXTYPES,OUR-FIXTYPES,XVAR,X" data-part-body="CDR,*KNOWN-FLEXTYPE-GENERATORS*,PARSE-FLEXTYPELIST,QUOTE,HARD?,ER,OTHERWISE,PARSE-FLEXOMAP,DEFOMAP,PARSE-FLEXSET,DEFSET,CHANGE-FLEXALIST,AL,LET,DEFMAP,PARSE-FLEXALIST,DEFALIST,PARSE-FLEXLIST,DEFLIST,PARSE-TRANSSUM,DEFTRANSSUM,PARSE-OPTION,DEFOPTION,PARSE-TAGSUM,DEFTAGSUM,PARSE-DEFPROD,DEFPROD,STATE,FIXTYPES,OUR-FIXTYPES,XVAR,CDAR,PARSE-FLEXSUM,DEFFLEXSUM,CAAR,CASE,CONS,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-FLEXTYPELIST">parse-flextypelist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-flextypelist" data-sym="PARSE-FLEXTYPELIST" title="(defun fty::parse-flextypelist
       (fty::x fty::xvar fty::our-fixtypes fty::fixtypes fty::state)
  (if (atom fty::x)
      nil
      (cons
...">parse-flextypelist</a>
  (x xvar
    our-fixtypes
    fixtypes
    state)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (cons (<a class="sym-link system" href="../../../axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x)
        (<a class="sym-link local-def" href="#def-defflexsum" data-sym="DEFFLEXSUM" title="(defmacro fty::defflexsum (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defflexsum-fn &#39;,fty::form fty::state)))">defflexsum</a> (parse-flexsum (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            xvar
            our-fixtypes
            fixtypes
            state))
        (<a class="sym-link local-def" href="#def-defprod" data-sym="DEFPROD" title="(defmacro fty::defprod (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defprod-fn &#39;,fty::form fty::state)))">defprod</a> (parse-defprod (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            xvar
            our-fixtypes
            fixtypes
            state))
        (<a class="sym-link local-def" href="#def-deftagsum" data-sym="DEFTAGSUM" title="(defmacro fty::deftagsum (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::deftagsum-fn &#39;,fty::form fty::state)))">deftagsum</a> (parse-tagsum (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            xvar
            our-fixtypes
            fixtypes
            state))
        (<a class="sym-link local-def" href="#def-defoption" data-sym="DEFOPTION" title="(defmacro fty::defoption (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defoption-fn &#39;,fty::form fty::state)))">defoption</a> (parse-option (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            xvar
            our-fixtypes
            fixtypes
            state))
        (<a class="sym-link local-def" href="#def-deftranssum" data-sym="DEFTRANSSUM" title="(defmacro fty::deftranssum (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::deftranssum-fn &#39;,fty::form fty::state)))">deftranssum</a> (parse-transsum (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            xvar
            our-fixtypes
            fixtypes
            state))
        (<a class="sym-link local-def" href="#def-deflist" data-sym="DEFLIST" title="(defmacro fty::deflist (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::deflist-fn &#39;,fty::form fty::state)))">deflist</a> (parse-flexlist (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            xvar
            our-fixtypes
            fixtypes
            state))
        (<a class="sym-link local-def" href="#def-defalist" data-sym="DEFALIST" title="(defmacro fty::defalist (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defalist-fn &#39;,fty::form fty::state)))">defalist</a> (parse-flexalist (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            xvar
            our-fixtypes
            fixtypes
            state))
        (<a class="sym-link local-def" href="#def-defmap" data-sym="DEFMAP" title="(defmacro fty::defmap (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defmap-fn &#39;,fty::form fty::state)))">defmap</a> (let ((al (parse-flexalist (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
                 xvar
                 our-fixtypes
                 fixtypes
                 state)))
            (change-flexalist al <span class="keyword">:strategy</span> <span class="keyword">:drop-keys</span>)))
        (<a class="sym-link local-def" href="#def-defset" data-sym="DEFSET" title="(defmacro fty::defset (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defset-fn &#39;,fty::form fty::state)))">defset</a> (parse-flexset (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            xvar
            our-fixtypes
            fixtypes
            state))
        (<a class="sym-link local-def" href="#def-defomap" data-sym="DEFOMAP" title="(defmacro fty::defomap (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defomap-fn &#39;,fty::form fty::state)))">defomap</a> (parse-flexomap (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> x)
            xvar
            our-fixtypes
            fixtypes
            state))
        (otherwise (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            '<a class="sym-link local-def" href="#def-parse-flextypelist" data-sym="PARSE-FLEXTYPELIST" title="(defun fty::parse-flextypelist
       (fty::x fty::xvar fty::our-fixtypes fty::fixtypes fty::state)
  (if (atom fty::x)
      nil
      (cons
...">parse-flextypelist</a>
            <span class="string">"Recognized flextypes are ~x0, not ~x1~%"</span>
            *known-flextype-generators*
            (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> x))))
      (<a class="sym-link local-def" href="#def-parse-flextypelist" data-sym="PARSE-FLEXTYPELIST" title="(defun fty::parse-flextypelist
       (fty::x fty::xvar fty::our-fixtypes fty::fixtypes fty::state)
  (if (atom fty::x)
      nil
      (cons
...">parse-flextypelist</a> (cdr x)
        xvar
        our-fixtypes
        fixtypes
        state))))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *flextypes-keywords*
  '(<span class="keyword">:xvar</span> <span class="keyword">:no-count</span> <span class="keyword">:parents</span> <span class="keyword">:short</span> <span class="keyword">:long</span> <span class="keyword">:prepwork</span> <span class="keyword">:post-pred-events</span> <span class="keyword">:post-fix-events</span> <span class="keyword">:post-acc-events</span> <span class="keyword">:post-events</span> <span class="keyword">:enable-rules</span> <span class="keyword">:verbosep</span>))</pre>
  </div>

<div class="form-block function" id="def-flextypelist-check-bad-name" data-defines="FLEXTYPELIST-CHECK-BAD-NAME" data-references="CDR,QUOTE,HARD?,ER,X.NAME,SYMBOL-PACKAGE-NAME,EQUAL,AND,CAR,X,WITH-FLEXTYPE-BINDINGS,*MAIN-LISP-PACKAGE-NAME*,MAIN-LISP-PKG,B*,PROG2$,ATOM,IF,TYPES,DEFUN" data-used-by="DEFTYPES-EVENTS" data-part-name="FLEXTYPELIST-CHECK-BAD-NAME" data-part-args="TYPES" data-part-body="CDR,FLEXTYPELIST-CHECK-BAD-NAME,QUOTE,HARD?,ER,X.NAME,SYMBOL-PACKAGE-NAME,EQUAL,AND,CAR,X,WITH-FLEXTYPE-BINDINGS,*MAIN-LISP-PACKAGE-NAME*,MAIN-LISP-PKG,B*,PROG2$,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPELIST-CHECK-BAD-NAME">flextypelist-check-bad-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypelist-check-bad-name" data-sym="FLEXTYPELIST-CHECK-BAD-NAME" title="(defun fty::flextypelist-check-bad-name (fty::types)
  (if (atom fty::types)
      nil
      (fty::prog2$
       (fty::b* ((fty::main-lisp-pkg *main-lisp-package-name*))
...">flextypelist-check-bad-name</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (b* ((main-lisp-pkg <a class="sym-link system" href="../../../axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>))
        (with-flextype-bindings (x (car types))
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (symbol-package-name x.name)
              main-lisp-pkg)
            (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
              '<a class="sym-link local-def" href="#def-flextypelist-check-bad-name" data-sym="FLEXTYPELIST-CHECK-BAD-NAME" title="(defun fty::flextypelist-check-bad-name (fty::types)
  (if (atom fty::types)
      nil
      (fty::prog2$
       (fty::b* ((fty::main-lisp-pkg *main-lisp-package-name*))
...">flextypelist-check-bad-name</a>
              <span class="string">"Name must be a symbol not in the ~s0 package: ~x1~%"</span>
              main-lisp-pkg
              x.name))))
      (<a class="sym-link local-def" href="#def-flextypelist-check-bad-name" data-sym="FLEXTYPELIST-CHECK-BAD-NAME" title="(defun fty::flextypelist-check-bad-name (fty::types)
  (if (atom fty::types)
      nil
      (fty::prog2$
       (fty::b* ((fty::main-lisp-pkg *main-lisp-package-name*))
...">flextypelist-check-bad-name</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-parse-flextypes" data-defines="PARSE-FLEXTYPES" data-references="FLEXTYPELIST-RECP,IF,MAKE-FLEXTYPES,PARSE-FLEXTYPELIST,TYPES,NO-COUNT,GETARG,XVAR,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,FLEXTYPE-FORMS->FIXTYPES,OUR-FIXTYPES,*FLEXTYPES-KEYWORDS*,EXTRACT-KEYWORDS,TYPEDECLS,KWD-ALIST,PARSE-FLEXSUM,SPLIT-///,POST-///,PRE-///,MV,*MAIN-LISP-PACKAGE-NAME*,SYMBOL-PACKAGE-NAME,EQUAL,WHEN,QUOTE,HARD?,ER,SYMBOLP,UNLESS,NAME,CONS,B*,STATE,X,DEFUN" data-used-by="DEFTYPES-FN" data-part-name="PARSE-FLEXTYPES" data-part-args="STATE,X" data-part-body="FLEXTYPELIST-RECP,IF,MAKE-FLEXTYPES,PARSE-FLEXTYPELIST,TYPES,NO-COUNT,GETARG,XVAR,STATE,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,FLEXTYPE-FORMS->FIXTYPES,OUR-FIXTYPES,*FLEXTYPES-KEYWORDS*,EXTRACT-KEYWORDS,TYPEDECLS,KWD-ALIST,PARSE-FLEXSUM,SPLIT-///,POST-///,PRE-///,MV,*MAIN-LISP-PACKAGE-NAME*,SYMBOL-PACKAGE-NAME,EQUAL,WHEN,PARSE-FLEXTYPES,QUOTE,HARD?,ER,SYMBOLP,UNLESS,X,NAME,CONS,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PARSE-FLEXTYPES">parse-flextypes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-parse-flextypes" data-sym="PARSE-FLEXTYPES" title="(defun fty::parse-flextypes (fty::x fty::state)
  (fty::b*
   (((cons fty::name fty::x) fty::x)
    ((unless (symbolp fty::name))
     (fty::er fty::hard? &#39;fty::parse-flextypes
...">parse-flextypes</a>
  (x state)
  (b* (((cons name x) x) ((unless (symbolp name)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          '<a class="sym-link local-def" href="#def-parse-flextypes" data-sym="PARSE-FLEXTYPES" title="(defun fty::parse-flextypes (fty::x fty::state)
  (fty::b*
   (((cons fty::name fty::x) fty::x)
    ((unless (symbolp fty::name))
     (fty::er fty::hard? &#39;fty::parse-flextypes
...">parse-flextypes</a>
          <span class="string">"Malformed flextypes: name must be a symbol, but found ~x0"</span>
          name))
      ((when (equal (symbol-package-name name)
           <a class="sym-link system" href="../../../axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
          '<a class="sym-link local-def" href="#def-parse-flextypes" data-sym="PARSE-FLEXTYPES" title="(defun fty::parse-flextypes (fty::x fty::state)
  (fty::b*
   (((cons fty::name fty::x) fty::x)
    ((unless (symbolp fty::name))
     (fty::er fty::hard? &#39;fty::parse-flextypes
...">parse-flextypes</a>
          <span class="string">"Name must be a symbol not in the ~s0 package: ~x1~%"</span>
          <a class="sym-link system" href="../../../axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>
          name))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> pre-/// post-///) (split-/// 'parse-flexsum x))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> kwd-alist typedecls) (extract-keywords '<a class="sym-link local-def" href="#def-parse-flextypes" data-sym="PARSE-FLEXTYPES" title="(defun fty::parse-flextypes (fty::x fty::state)
  (fty::b*
   (((cons fty::name fty::x) fty::x)
    ((unless (symbolp fty::name))
     (fty::er fty::hard? &#39;fty::parse-flextypes
...">parse-flextypes</a>
          *flextypes-keywords*
          pre-///
          nil))
      (our-fixtypes (flextype-forms-&gt;fixtypes typedecls))
      (fixtype-al (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> our-fixtypes
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (xvar (getarg <span class="keyword">:xvar</span> nil kwd-alist))
      (no-count (getarg <span class="keyword">:no-count</span> nil kwd-alist))
      (types (<a class="sym-link local-def" href="#def-parse-flextypelist" data-sym="PARSE-FLEXTYPELIST" title="(defun fty::parse-flextypelist
       (fty::x fty::xvar fty::our-fixtypes fty::fixtypes fty::state)
  (if (atom fty::x)
      nil
      (cons
...">parse-flextypelist</a> typedecls
          xvar
          our-fixtypes
          fixtype-al
          state)))
    (make-flextypes <span class="keyword">:name</span> name
      <span class="keyword">:types</span> types
      <span class="keyword">:no-count</span> no-count
      <span class="keyword">:kwd-alist</span> (if post-///
        (cons (cons <span class="keyword">:///-events</span> post-///) kwd-alist)
        kwd-alist)
      <span class="keyword">:recp</span> (flextypelist-recp types))))</pre>
  </div>

<div class="form-block function" id="def-flextypelist-predicate-defs" data-defines="FLEXTYPELIST-PREDICATE-DEFS" data-references="CDR,FLEX*-PREDICATE-DEF,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,ATOM,IF,TYPES,DEFUN" data-used-by="FLEXTYPES-PREDICATE-DEF" data-part-name="FLEXTYPELIST-PREDICATE-DEFS" data-part-args="TYPES" data-part-body="CDR,FLEXTYPELIST-PREDICATE-DEFS,FLEX*-PREDICATE-DEF,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPELIST-PREDICATE-DEFS">flextypelist-predicate-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypelist-predicate-defs" data-sym="FLEXTYPELIST-PREDICATE-DEFS" title="(defun fty::flextypelist-predicate-defs (fty::types)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-predicate-defs</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (cons (with-flextype-bindings (x (car types))
        (flex*-predicate-def x))
      (<a class="sym-link local-def" href="#def-flextypelist-predicate-defs" data-sym="FLEXTYPELIST-PREDICATE-DEFS" title="(defun fty::flextypelist-predicate-defs (fty::types)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-predicate-defs</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-predicate-def" data-defines="FLEXTYPES-PREDICATE-DEF" data-references="T,DEFINES,DISABLE,IN-THEORY,LOCAL,QUASIQUOTE,CDR,ATOM,IF,X.TYPES,FLEXTYPELIST-PREDICATE-DEFS,DEFS,FLEXTYPES,B*,X,DEFUN" data-part-name="FLEXTYPES-PREDICATE-DEF" data-part-args="X" data-part-body="T,DEFINES,DISABLE,IN-THEORY,LOCAL,QUASIQUOTE,CDR,ATOM,IF,X.TYPES,FLEXTYPELIST-PREDICATE-DEFS,DEFS,X,FLEXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-PREDICATE-DEF">flextypes-predicate-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-predicate-def" data-sym="FLEXTYPES-PREDICATE-DEF" title="(defun fty::flextypes-predicate-def (fty::x)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (fty::defs (fty::flextypelist-predicate-defs fty::x.types)))
   (if (atom (cdr fty::x.types))
...">flextypes-predicate-def</a>
  (x)
  (b* (((flextypes x) x) (defs (<a class="sym-link local-def" href="#def-flextypelist-predicate-defs" data-sym="FLEXTYPELIST-PREDICATE-DEFS" title="(defun fty::flextypelist-predicate-defs (fty::types)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-predicate-defs</a> x.types)))
    (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (cdr x.types))
      `(,(CAR FTY::DEFS) (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable . ,(FTY::FLEXTYPELIST-PREDICATES FTY::X.TYPES)))))
      `((defines ,(FTY::INTERN-IN-PACKAGE-OF-SYMBOL (FTY::CAT (SYMBOL-NAME FTY::X.NAME) &quot;-P&quot;)
  FTY::X.NAME)
         <span class="keyword">:progn</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
         ,@FTY::DEFS) (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable . ,(FTY::FLEXTYPELIST-PREDICATES FTY::X.TYPES))))))))</pre>
  </div>

<div class="form-block function" id="def-flextypelist-fix-defs" data-defines="FLEXTYPELIST-FIX-DEFS" data-references="CDR,FLEX*-FIX-DEF,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,ATOM,IF,FLAGP,TYPES,DEFUN" data-used-by="FLEXTYPES-FIX-DEF" data-part-name="FLEXTYPELIST-FIX-DEFS" data-part-args="FLAGP,TYPES" data-part-body="CDR,FLEXTYPELIST-FIX-DEFS,FLAGP,FLEX*-FIX-DEF,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPELIST-FIX-DEFS">flextypelist-fix-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypelist-fix-defs" data-sym="FLEXTYPELIST-FIX-DEFS" title="(defun fty::flextypelist-fix-defs (fty::types fty::flagp)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fix-defs</a>
  (types flagp)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (cons (with-flextype-bindings (x (car types))
        (flex*-fix-def x flagp))
      (<a class="sym-link local-def" href="#def-flextypelist-fix-defs" data-sym="FLEXTYPELIST-FIX-DEFS" title="(defun fty::flextypelist-fix-defs (fty::types fty::flagp)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fix-defs</a> (cdr types) flagp))))</pre>
  </div>

<div class="form-block function" id="def-flextypelist-fix-postevents" data-defines="FLEXTYPELIST-FIX-POSTEVENTS" data-references="CDR,FLEX*-FIX-POSTEVENTS,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPELIST-FIX-POSTEVENTS" data-part-args="TYPES" data-part-body="CDR,FLEXTYPELIST-FIX-POSTEVENTS,FLEX*-FIX-POSTEVENTS,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPELIST-FIX-POSTEVENTS">flextypelist-fix-postevents</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypelist-fix-postevents" data-sym="FLEXTYPELIST-FIX-POSTEVENTS" title="(defun fty::flextypelist-fix-postevents (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fix-postevents</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car types))
        (flex*-fix-postevents x))
      (<a class="sym-link local-def" href="#def-flextypelist-fix-postevents" data-sym="FLEXTYPELIST-FIX-POSTEVENTS" title="(defun fty::flextypelist-fix-postevents (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fix-postevents</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypelist-fix-when-pred-thms" data-defines="FLEXTYPELIST-FIX-WHEN-PRED-THMS" data-references="CDR,FLEX*-FIX-WHEN-PRED-THM,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,ATOM,IF,FLAGP,TYPES,DEFUN" data-used-by="FLEXTYPES-FIX-DEF" data-part-name="FLEXTYPELIST-FIX-WHEN-PRED-THMS" data-part-args="FLAGP,TYPES" data-part-body="CDR,FLEXTYPELIST-FIX-WHEN-PRED-THMS,FLAGP,FLEX*-FIX-WHEN-PRED-THM,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPELIST-FIX-WHEN-PRED-THMS">flextypelist-fix-when-pred-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypelist-fix-when-pred-thms" data-sym="FLEXTYPELIST-FIX-WHEN-PRED-THMS" title="(defun fty::flextypelist-fix-when-pred-thms (fty::types fty::flagp)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fix-when-pred-thms</a>
  (types flagp)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (cons (with-flextype-bindings (x (car types))
        (flex*-fix-when-pred-thm x flagp))
      (<a class="sym-link local-def" href="#def-flextypelist-fix-when-pred-thms" data-sym="FLEXTYPELIST-FIX-WHEN-PRED-THMS" title="(defun fty::flextypelist-fix-when-pred-thms (fty::types fty::flagp)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fix-when-pred-thms</a> (cdr types)
        flagp))))</pre>
  </div>

<div class="form-block function" id="def-flextypelist-pred-calls" data-defines="FLEXTYPELIST-PRED-CALLS" data-references="CDR,X.XVAR,X.PRED,LIST,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPELIST-PRED-CALLS" data-part-args="TYPES" data-part-body="CDR,FLEXTYPELIST-PRED-CALLS,X.XVAR,X.PRED,LIST,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPELIST-PRED-CALLS">flextypelist-pred-calls</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypelist-pred-calls" data-sym="FLEXTYPELIST-PRED-CALLS" title="(defun fty::flextypelist-pred-calls (fty::types)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-pred-calls</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (cons (with-flextype-bindings (x (car types))
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x.pred x.xvar))
      (<a class="sym-link local-def" href="#def-flextypelist-pred-calls" data-sym="FLEXTYPELIST-PRED-CALLS" title="(defun fty::flextypelist-pred-calls (fty::types)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-pred-calls</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypelist-fixtypes" data-defines="FLEXTYPELIST-FIXTYPES" data-references="CDR,ENABLE,IN-THEORY,LOCAL,T,DEFFIXTYPE,DEFSECTION,QUASIQUOTE,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPELIST-FIXTYPES" data-part-args="TYPES" data-part-body="CDR,FLEXTYPELIST-FIXTYPES,ENABLE,IN-THEORY,LOCAL,T,DEFFIXTYPE,DEFSECTION,QUASIQUOTE,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPELIST-FIXTYPES">flextypelist-fixtypes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypelist-fixtypes" data-sym="FLEXTYPELIST-FIXTYPES" title="(defun fty::flextypelist-fixtypes (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fixtypes</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car types))
        `((defsection ,FTY::X.EQUIV
           <span class="keyword">:parents</span> (,FTY::X.NAME)
           <span class="keyword">:short</span> ,(FTY::CAT &quot;Basic equivalence relation for &quot; (XDOC::SEE FTY::X.NAME)
  &quot; structures.&quot;)
           (deffixtype ,FTY::X.NAME
             <span class="keyword">:pred</span> ,FTY::X.PRED
             <span class="keyword">:fix</span> ,FTY::X.FIX
             <span class="keyword">:equiv</span> ,FTY::X.EQUIV
             <span class="keyword">:define</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
             <span class="keyword">:forward</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable ,FTY::X.EQUIV)))))
      (<a class="sym-link local-def" href="#def-flextypelist-fixtypes" data-sym="FLEXTYPELIST-FIXTYPES" title="(defun fty::flextypelist-fixtypes (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fixtypes</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-form-append-hints" data-defines="FLEXTYPES-FORM-APPEND-HINTS" data-references="CDDR,CADR,CONS,LEN,-,TAKE,PREFIX,QUASIQUOTE,APPEND,UNLESS,MEMBER,MEM,B*,FORM,NEW-HINTS,DEFUN" data-part-name="FLEXTYPES-FORM-APPEND-HINTS" data-part-args="FORM,NEW-HINTS" data-part-body="CDDR,CADR,NEW-HINTS,CONS,LEN,-,TAKE,PREFIX,QUASIQUOTE,APPEND,UNLESS,FORM,MEMBER,MEM,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-FORM-APPEND-HINTS">flextypes-form-append-hints</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-form-append-hints" data-sym="FLEXTYPES-FORM-APPEND-HINTS" title="(defun fty::flextypes-form-append-hints (fty::new-hints fty::form)
  (fty::b*
   ((fty::mem (member :hints fty::form))
    ((unless fty::mem) (append fty::form `(:hints ,fty::new-hints)))
    (fty::prefix
...">flextypes-form-append-hints</a>
  (new-hints form)
  (b* ((mem (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:hints</span> form)) ((unless mem) (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> form `(<span class="keyword">:hints</span> ,FTY::NEW-HINTS)))
      (prefix (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> form) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> mem))
          form)))
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> prefix
      (cons <span class="keyword">:hints</span> (cons (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> new-hints (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> mem))
          (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> mem))))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-collect-sum-kind-calls" data-defines="FLEXTYPES-COLLECT-SUM-KIND-CALLS" data-references="CDR,OTHERWISE,QUASIQUOTE,LIST,SUM.KIND,SUM,FLEXSUM,B*,CAR,TAG,CASE,APPEND,ATOM,IF,TYPES,DEFUN" data-used-by="FLEXTYPES-FIX-DEF" data-part-name="FLEXTYPES-COLLECT-SUM-KIND-CALLS" data-part-args="TYPES" data-part-body="CDR,FLEXTYPES-COLLECT-SUM-KIND-CALLS,OTHERWISE,QUASIQUOTE,LIST,SUM.KIND,SUM,FLEXSUM,B*,CAR,TAG,CASE,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-COLLECT-SUM-KIND-CALLS">flextypes-collect-sum-kind-calls</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-collect-sum-kind-calls" data-sym="FLEXTYPES-COLLECT-SUM-KIND-CALLS" title="(defun fty::flextypes-collect-sum-kind-calls (fty::types)
  (if (atom fty::types)
      nil
      (append
       (case (fty::tag (car fty::types))
...">flextypes-collect-sum-kind-calls</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-case" data-sym="CASE">case</a> (tag (car types))
        (<span class="keyword">:sum</span> (b* (((flexsum sum) (car types)))
            (if sum.kind
              (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> `(,FTY::SUM.KIND ,FTY::SUM.XVAR))
              nil)))
        (otherwise nil))
      (<a class="sym-link local-def" href="#def-flextypes-collect-sum-kind-calls" data-sym="FLEXTYPES-COLLECT-SUM-KIND-CALLS" title="(defun fty::flextypes-collect-sum-kind-calls (fty::types)
  (if (atom fty::types)
      nil
      (append
       (case (fty::tag (car fty::types))
...">flextypes-collect-sum-kind-calls</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-fix-def" data-defines="FLEXTYPES-FIX-DEF" data-references="DISABLE,ENABLE,IN-THEORY,LOCAL,QUASIQUOTE,FLEXTYPES-COLLECT-SUM-KIND-CALLS,SUM-KIND-CALLS,FLEXTYPELIST-FIX-WHEN-PRED-THMS,FIX-WHEN-PRED-THMS,THM-MACRO-NAME,FLAG-DEFTHM-NAME,X.NAME,SYMBOL-NAME,CAT,INTERN-IN-PACKAGE-OF-SYMBOL,AND,FLAG-NAME,FLEXTYPELIST-FIX-DEFS,DEFS,X.TYPES,CDR,CONSP,FLAGP,FLEXTYPES,B*,X,DEFUN" data-part-name="FLEXTYPES-FIX-DEF" data-part-args="X" data-part-body="DISABLE,ENABLE,IN-THEORY,LOCAL,QUASIQUOTE,FLEXTYPES-COLLECT-SUM-KIND-CALLS,SUM-KIND-CALLS,FLEXTYPELIST-FIX-WHEN-PRED-THMS,FIX-WHEN-PRED-THMS,THM-MACRO-NAME,FLAG-DEFTHM-NAME,X.NAME,SYMBOL-NAME,CAT,INTERN-IN-PACKAGE-OF-SYMBOL,AND,FLAG-NAME,FLEXTYPELIST-FIX-DEFS,DEFS,X.TYPES,CDR,CONSP,FLAGP,X,FLEXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-FIX-DEF">flextypes-fix-def</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-fix-def" data-sym="FLEXTYPES-FIX-DEF" title="(defun fty::flextypes-fix-def (fty::x)
  (fty::b*
   (((fty::flextypes fty::x) fty::x) (fty::flagp (consp (cdr fty::x.types)))
    (fty::defs (fty::flextypelist-fix-defs fty::x.types fty::flagp))
    (fty::flag-name
...">flextypes-fix-def</a>
  (x)
  (b* (((flextypes x) x) (flagp (consp (cdr x.types)))
      (defs (<a class="sym-link local-def" href="#def-flextypelist-fix-defs" data-sym="FLEXTYPELIST-FIX-DEFS" title="(defun fty::flextypelist-fix-defs (fty::types fty::flagp)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fix-defs</a> x.types flagp))
      (flag-name (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> flagp
          (intern-in-package-of-symbol (cat (symbol-name x.name) <span class="string">"-FIX-FLAG"</span>)
            x.name)))
      (flag-defthm-name (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> flagp (thm-macro-name flag-name)))
      (fix-when-pred-thms (<a class="sym-link local-def" href="#def-flextypelist-fix-when-pred-thms" data-sym="FLEXTYPELIST-FIX-WHEN-PRED-THMS" title="(defun fty::flextypelist-fix-when-pred-thms (fty::types fty::flagp)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-fix-when-pred-thms</a> x.types
          flagp))
      (sum-kind-calls (<a class="sym-link local-def" href="#def-flextypes-collect-sum-kind-calls" data-sym="FLEXTYPES-COLLECT-SUM-KIND-CALLS" title="(defun fty::flextypes-collect-sum-kind-calls (fty::types)
  (if (atom fty::types)
      nil
      (append
       (case (fty::tag (car fty::types))
...">flextypes-collect-sum-kind-calls</a> x.types)))
    `(,(APPEND
  (IF FTY::FLAGP
      `(FTY::DEFINES
        ,(FTY::INTERN-IN-PACKAGE-OF-SYMBOL
          (FTY::CAT (SYMBOL-NAME FTY::X.NAME) &quot;-FIX&quot;) FTY::X.NAME)
        :FLAG ,FTY::FLAG-NAME :BOGUS-OK T :PROGN T
        ,@(AND FTY::SUM-KIND-CALLS
               `(:HINTS
                 ((AND FTY::STABLE-UNDER-SIMPLIFICATIONP
                       &#39;(:EXPAND ,FTY::SUM-KIND-CALLS)))))
        ,@FTY::DEFS ///)
      (CAR FTY::DEFS))
  `((FTY::LOCAL
     (FTY::IN-THEORY
      (FTY::DISABLE
       . ,(FTY::PAIRLIS$
           (MAKE-LIST (FTY::LEN FTY::X.TYPES) :INITIAL-ELEMENT :D)
           (FTY::PAIRLIS$ (FTY::FLEXTYPELIST-FIXES FTY::X.TYPES) NIL)))))
    ,(IF FTY::FLAGP
         `(,FTY::FLAG-DEFTHM-NAME . ,FTY::FIX-WHEN-PRED-THMS)
         (IF FTY::X.RECP
             (FTY::FLEXTYPES-FORM-APPEND-HINTS &#39;((&quot;goal&quot; :INDUCT T))
              (CAR FTY::FIX-WHEN-PRED-THMS))
             (CAR FTY::FIX-WHEN-PRED-THMS)))
    (FTY::VERIFY-GUARDS+
     ,(FTY::WITH-FLEXTYPE-BINDINGS (FTY::X (CAR FTY::X.TYPES)) FTY::X.FIX)
     :HINTS
     ((&quot;goal&quot; :EXPAND
       (,@(APPEND (FTY::FLEXTYPELIST-PRED-CALLS FTY::X.TYPES)
                  FTY::SUM-KIND-CALLS)))))
    ,@(FTY::FLEXTYPELIST-FIXTYPES FTY::X.TYPES)
    . ,(FTY::FLEXTYPELIST-FIX-POSTEVENTS FTY::X.TYPES))) (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable . ,(FTY::FLEXTYPELIST-EQUIVS FTY::X.TYPES))))
      (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable . ,(FTY::FLEXTYPELIST-FIXES FTY::X.TYPES)))))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-fns" data-defines="FLEXTYPES-FNS" data-references="CDR,FLEX*-FNS,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPES-FNS" data-part-args="TYPES" data-part-body="CDR,FLEXTYPES-FNS,FLEX*-FNS,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-FNS">flextypes-fns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-fns" data-sym="FLEXTYPES-FNS" title="(defun fty::flextypes-fns (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-fns</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car types))
        (flex*-fns x))
      (<a class="sym-link local-def" href="#def-flextypes-fns" data-sym="FLEXTYPES-FNS" title="(defun fty::flextypes-fns (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-fns</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-acc_2Fctors" data-defines="FLEXTYPES-ACC/CTORS" data-references="CDR,CAR,FLEXSUM->PRODS,FLEXSUM-PROD-FNS,CAAR,EQ,AND,APPEND,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPES-ACC/CTORS" data-part-args="TYPES" data-part-body="CDR,FLEXTYPES-ACC/CTORS,CAR,FLEXSUM->PRODS,FLEXSUM-PROD-FNS,CAAR,EQ,AND,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-ACC/CTORS">flextypes-acc/ctors</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-acc_2Fctors" data-sym="FLEXTYPES-ACC/CTORS" title="(defun fty::flextypes-acc/ctors (fty::types)
  (if (atom fty::types)
      nil
      (append
       (and (eq (caar fty::types) :sum)
...">flextypes-acc/ctors</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> types) <span class="keyword">:sum</span>)
        (flexsum-prod-fns (flexsum-&gt;prods (car types))))
      (<a class="sym-link local-def" href="#def-flextypes-acc_2Fctors" data-sym="FLEXTYPES-ACC/CTORS" title="(defun fty::flextypes-acc/ctors (fty::types)
  (if (atom fty::types)
      nil
      (append
       (and (eq (caar fty::types) :sum)
...">flextypes-acc/ctors</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-ctors" data-defines="FLEXTYPES-CTORS" data-references="CDR,CAR,FLEXSUM->PRODS,FLEXSUM-PROD-CTORS,CAAR,EQ,AND,APPEND,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPES-CTORS" data-part-args="TYPES" data-part-body="CDR,FLEXTYPES-CTORS,CAR,FLEXSUM->PRODS,FLEXSUM-PROD-CTORS,CAAR,EQ,AND,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-CTORS">flextypes-ctors</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-ctors" data-sym="FLEXTYPES-CTORS" title="(defun fty::flextypes-ctors (fty::types)
  (if (atom fty::types)
      nil
      (append
       (and (eq (caar fty::types) :sum)
...">flextypes-ctors</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> types) <span class="keyword">:sum</span>)
        (flexsum-prod-ctors (flexsum-&gt;prods (car types))))
      (<a class="sym-link local-def" href="#def-flextypes-ctors" data-sym="FLEXTYPES-CTORS" title="(defun fty::flextypes-ctors (fty::types)
  (if (atom fty::types)
      nil
      (append
       (and (eq (caar fty::types) :sum)
...">flextypes-ctors</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-count-defs" data-defines="FLEXTYPES-COUNT-DEFS" data-references="CDR,FLEX*-COUNT,CAR,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,ALLTYPES,X,DEFUN" data-used-by="FLEXTYPES-COUNT" data-part-name="FLEXTYPES-COUNT-DEFS" data-part-args="ALLTYPES,X" data-part-body="CDR,FLEXTYPES-COUNT-DEFS,ALLTYPES,FLEX*-COUNT,CAR,WITH-FLEXTYPE-BINDINGS,APPEND,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-COUNT-DEFS">flextypes-count-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-count-defs" data-sym="FLEXTYPES-COUNT-DEFS" title="(defun fty::flextypes-count-defs (fty::x fty::alltypes)
  (if (atom fty::x)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::x))
...">flextypes-count-defs</a>
  (x alltypes)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car x))
        (flex*-count x alltypes))
      (<a class="sym-link local-def" href="#def-flextypes-count-defs" data-sym="FLEXTYPES-COUNT-DEFS" title="(defun fty::flextypes-count-defs (fty::x fty::alltypes)
  (if (atom fty::x)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::x))
...">flextypes-count-defs</a> (cdr x) alltypes))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-count-expands" data-defines="FLEXTYPES-COUNT-EXPANDS" data-references="CDR,QUASIQUOTE,X.COUNT,AND,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPES-COUNT-EXPANDS" data-part-args="TYPES" data-part-body="CDR,FLEXTYPES-COUNT-EXPANDS,QUASIQUOTE,X.COUNT,AND,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-COUNT-EXPANDS">flextypes-count-expands</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-count-expands" data-sym="FLEXTYPES-COUNT-EXPANDS" title="(defun fty::flextypes-count-expands (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-count-expands</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car types))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> x.count
          `((,FTY::X.COUNT ,FTY::X.XVAR) (,FTY::X.COUNT (,FTY::X.FIX ,FTY::X.XVAR)))))
      (<a class="sym-link local-def" href="#def-flextypes-count-expands" data-sym="FLEXTYPES-COUNT-EXPANDS" title="(defun fty::flextypes-count-expands (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-count-expands</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-count-names" data-defines="FLEXTYPES-COUNT-NAMES" data-references="CDR,LIST,X.COUNT,AND,CAR,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,X,DEFUN" data-used-by="FLEXTYPES-COUNT" data-part-name="FLEXTYPES-COUNT-NAMES" data-part-args="X" data-part-body="CDR,FLEXTYPES-COUNT-NAMES,LIST,X.COUNT,AND,CAR,WITH-FLEXTYPE-BINDINGS,APPEND,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-COUNT-NAMES">flextypes-count-names</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-count-names" data-sym="FLEXTYPES-COUNT-NAMES" title="(defun fty::flextypes-count-names (fty::x)
  (if (atom fty::x)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::x))
...">flextypes-count-names</a>
  (x)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car x))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> x.count (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x.count)))
      (<a class="sym-link local-def" href="#def-flextypes-count-names" data-sym="FLEXTYPES-COUNT-NAMES" title="(defun fty::flextypes-count-names (fty::x)
  (if (atom fty::x)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::x))
...">flextypes-count-names</a> (cdr x)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-count-post-events" data-defines="FLEXTYPES-COUNT-POST-EVENTS" data-references="CDR,FLEX*-COUNT-POST-EVENTS,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,ALLTYPES,TYPES,DEFUN" data-part-name="FLEXTYPES-COUNT-POST-EVENTS" data-part-args="ALLTYPES,TYPES" data-part-body="CDR,FLEXTYPES-COUNT-POST-EVENTS,ALLTYPES,FLEX*-COUNT-POST-EVENTS,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-COUNT-POST-EVENTS">flextypes-count-post-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-count-post-events" data-sym="FLEXTYPES-COUNT-POST-EVENTS" title="(defun fty::flextypes-count-post-events (fty::types fty::alltypes)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-count-post-events</a>
  (types alltypes)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car types))
        (flex*-count-post-events x alltypes))
      (<a class="sym-link local-def" href="#def-flextypes-count-post-events" data-sym="FLEXTYPES-COUNT-POST-EVENTS" title="(defun fty::flextypes-count-post-events (fty::types fty::alltypes)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-count-post-events</a> (cdr types)
        alltypes))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-nokind-expand-fixes" data-defines="FLEXTYPES-NOKIND-EXPAND-FIXES" data-references="CDR,QUASIQUOTE,CONS,FLEXSUM->KIND,NOT,CAR,TAG,EQ,AND,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPES-NOKIND-EXPAND-FIXES" data-part-args="TYPES" data-part-body="CDR,FLEXTYPES-NOKIND-EXPAND-FIXES,QUASIQUOTE,CONS,FLEXSUM->KIND,NOT,CAR,TAG,EQ,AND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-NOKIND-EXPAND-FIXES">flextypes-nokind-expand-fixes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-nokind-expand-fixes" data-sym="FLEXTYPES-NOKIND-EXPAND-FIXES" title="(defun fty::flextypes-nokind-expand-fixes (fty::types)
  (if (atom fty::types)
      nil
      (if (and (eq (fty::tag (car fty::types)) :sum)
               (not (fty::flexsum-&gt;kind (car fty::types))))
...">flextypes-nokind-expand-fixes</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (tag (car types)) <span class="keyword">:sum</span>)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (flexsum-&gt;kind (car types))))
      (cons `(,(FTY::FLEXSUM-&gt;FIX (CAR FTY::TYPES)) ,(FTY::FLEXSUM-&gt;XVAR (CAR FTY::TYPES)))
        (<a class="sym-link local-def" href="#def-flextypes-nokind-expand-fixes" data-sym="FLEXTYPES-NOKIND-EXPAND-FIXES" title="(defun fty::flextypes-nokind-expand-fixes (fty::types)
  (if (atom fty::types)
      nil
      (if (and (eq (fty::tag (car fty::types)) :sum)
               (not (fty::flexsum-&gt;kind (car fty::types))))
...">flextypes-nokind-expand-fixes</a> (cdr types)))
      (<a class="sym-link local-def" href="#def-flextypes-nokind-expand-fixes" data-sym="FLEXTYPES-NOKIND-EXPAND-FIXES" title="(defun fty::flextypes-nokind-expand-fixes (fty::types)
  (if (atom fty::types)
      nil
      (if (and (eq (fty::tag (car fty::types)) :sum)
               (not (fty::flexsum-&gt;kind (car fty::types))))
...">flextypes-nokind-expand-fixes</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-expand-fixes" data-defines="FLEXTYPES-EXPAND-FIXES" data-references="CDR,QUASIQUOTE,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPES-EXPAND-FIXES" data-part-args="TYPES" data-part-body="CDR,FLEXTYPES-EXPAND-FIXES,QUASIQUOTE,CAR,X,WITH-FLEXTYPE-BINDINGS,CONS,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-EXPAND-FIXES">flextypes-expand-fixes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-expand-fixes" data-sym="FLEXTYPES-EXPAND-FIXES" title="(defun fty::flextypes-expand-fixes (fty::types)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-expand-fixes</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (cons (with-flextype-bindings (x (car types))
        `(,FTY::X.FIX ,FTY::X.XVAR))
      (<a class="sym-link local-def" href="#def-flextypes-expand-fixes" data-sym="FLEXTYPES-EXPAND-FIXES" title="(defun fty::flextypes-expand-fixes (fty::types)
  (if (atom fty::types)
      nil
      (cons
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-expand-fixes</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flexprods-ctor-of-fields-thms" data-defines="FLEXPRODS-CTOR-OF-FIELDS-THMS" data-references="CONS,FLEXPROD->CTOR-NAME,SYMBOL-NAME,CAT,INTERN-IN-PACKAGE-OF-SYMBOL,FOO-OF-FIELDS,CDR,CAR,FLEXPROD->FIELDS,CONSP,UNLESS,ATOM,WHEN,B*,PRODS,DEFUN" data-used-by="FLEXTYPES-CTOR-OF-FIELDS-THMS" data-part-name="FLEXPRODS-CTOR-OF-FIELDS-THMS" data-part-args="PRODS" data-part-body="CONS,FLEXPROD->CTOR-NAME,SYMBOL-NAME,CAT,INTERN-IN-PACKAGE-OF-SYMBOL,FOO-OF-FIELDS,CDR,FLEXPRODS-CTOR-OF-FIELDS-THMS,CAR,FLEXPROD->FIELDS,CONSP,UNLESS,PRODS,ATOM,WHEN,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXPRODS-CTOR-OF-FIELDS-THMS">flexprods-ctor-of-fields-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flexprods-ctor-of-fields-thms" data-sym="FLEXPRODS-CTOR-OF-FIELDS-THMS" title="(defun fty::flexprods-ctor-of-fields-thms (fty::prods)
  (fty::b*
   (((when (atom fty::prods)) nil)
    ((unless (consp (fty::flexprod-&gt;fields (car fty::prods))))
     (fty::flexprods-ctor-of-fields-thms (cdr fty::prods)))
...">flexprods-ctor-of-fields-thms</a>
  (prods)
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> prods)) nil) ((unless (consp (flexprod-&gt;fields (car prods)))) (<a class="sym-link local-def" href="#def-flexprods-ctor-of-fields-thms" data-sym="FLEXPRODS-CTOR-OF-FIELDS-THMS" title="(defun fty::flexprods-ctor-of-fields-thms (fty::prods)
  (fty::b*
   (((when (atom fty::prods)) nil)
    ((unless (consp (fty::flexprod-&gt;fields (car fty::prods))))
     (fty::flexprods-ctor-of-fields-thms (cdr fty::prods)))
...">flexprods-ctor-of-fields-thms</a> (cdr prods)))
      (foo-of-fields (intern-in-package-of-symbol (cat (symbol-name (flexprod-&gt;ctor-name (car prods)))
            <span class="string">"-OF-FIELDS"</span>)
          (flexprod-&gt;ctor-name (car prods)))))
    (cons foo-of-fields
      (<a class="sym-link local-def" href="#def-flexprods-ctor-of-fields-thms" data-sym="FLEXPRODS-CTOR-OF-FIELDS-THMS" title="(defun fty::flexprods-ctor-of-fields-thms (fty::prods)
  (fty::b*
   (((when (atom fty::prods)) nil)
    ((unless (consp (fty::flexprod-&gt;fields (car fty::prods))))
     (fty::flexprods-ctor-of-fields-thms (cdr fty::prods)))
...">flexprods-ctor-of-fields-thms</a> (cdr prods)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-ctor-of-fields-thms" data-defines="FLEXTYPES-CTOR-OF-FIELDS-THMS" data-references="CDR,CAR,FLEXSUM->PRODS,FLEXPRODS-CTOR-OF-FIELDS-THMS,CAAR,EQ,AND,APPEND,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPES-CTOR-OF-FIELDS-THMS" data-part-args="TYPES" data-part-body="CDR,FLEXTYPES-CTOR-OF-FIELDS-THMS,CAR,FLEXSUM->PRODS,FLEXPRODS-CTOR-OF-FIELDS-THMS,CAAR,EQ,AND,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-CTOR-OF-FIELDS-THMS">flextypes-ctor-of-fields-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-ctor-of-fields-thms" data-sym="FLEXTYPES-CTOR-OF-FIELDS-THMS" title="(defun fty::flextypes-ctor-of-fields-thms (fty::types)
  (if (atom fty::types)
      nil
      (append
       (and (eq (caar fty::types) :sum)
...">flextypes-ctor-of-fields-thms</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> types) <span class="keyword">:sum</span>)
        (<a class="sym-link local-def" href="#def-flexprods-ctor-of-fields-thms" data-sym="FLEXPRODS-CTOR-OF-FIELDS-THMS" title="(defun fty::flexprods-ctor-of-fields-thms (fty::prods)
  (fty::b*
   (((when (atom fty::prods)) nil)
    ((unless (consp (fty::flexprod-&gt;fields (car fty::prods))))
     (fty::flexprods-ctor-of-fields-thms (cdr fty::prods)))
...">flexprods-ctor-of-fields-thms</a> (flexsum-&gt;prods (car types))))
      (<a class="sym-link local-def" href="#def-flextypes-ctor-of-fields-thms" data-sym="FLEXTYPES-CTOR-OF-FIELDS-THMS" title="(defun fty::flextypes-ctor-of-fields-thms (fty::types)
  (if (atom fty::types)
      nil
      (append
       (and (eq (caar fty::types) :sum)
...">flextypes-ctor-of-fields-thms</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flexprods-fix-when-kind-thms" data-defines="FLEXPRODS-FIX-WHEN-KIND-THMS" data-references="CONS,FLEXPROD->KIND,FLEXSUM->FIX,SYMBOL-NAME,CAT,INTERN-IN-PACKAGE-OF-SYMBOL,FOO-FIX-WHEN-SUBFOO-KIND,CDR,CAR,FLEXPROD->FIELDS,CONSP,UNLESS,ATOM,WHEN,B*,SUM,PRODS,DEFUN" data-used-by="FLEXTYPES-FIX-WHEN-KIND-THMS" data-part-name="FLEXPRODS-FIX-WHEN-KIND-THMS" data-part-args="SUM,PRODS" data-part-body="CONS,FLEXPROD->KIND,FLEXSUM->FIX,SYMBOL-NAME,CAT,INTERN-IN-PACKAGE-OF-SYMBOL,FOO-FIX-WHEN-SUBFOO-KIND,SUM,CDR,FLEXPRODS-FIX-WHEN-KIND-THMS,CAR,FLEXPROD->FIELDS,CONSP,UNLESS,PRODS,ATOM,WHEN,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXPRODS-FIX-WHEN-KIND-THMS">flexprods-fix-when-kind-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flexprods-fix-when-kind-thms" data-sym="FLEXPRODS-FIX-WHEN-KIND-THMS" title="(defun fty::flexprods-fix-when-kind-thms (fty::prods fty::sum)
  (fty::b*
   (((when (atom fty::prods)) nil)
    ((unless (consp (fty::flexprod-&gt;fields (car fty::prods))))
     (fty::flexprods-fix-when-kind-thms (cdr fty::prods) fty::sum))
...">flexprods-fix-when-kind-thms</a>
  (prods sum)
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> prods)) nil) ((unless (consp (flexprod-&gt;fields (car prods)))) (<a class="sym-link local-def" href="#def-flexprods-fix-when-kind-thms" data-sym="FLEXPRODS-FIX-WHEN-KIND-THMS" title="(defun fty::flexprods-fix-when-kind-thms (fty::prods fty::sum)
  (fty::b*
   (((when (atom fty::prods)) nil)
    ((unless (consp (fty::flexprod-&gt;fields (car fty::prods))))
     (fty::flexprods-fix-when-kind-thms (cdr fty::prods) fty::sum))
...">flexprods-fix-when-kind-thms</a> (cdr prods)
          sum))
      (foo-fix-when-subfoo-kind (intern-in-package-of-symbol (cat (symbol-name (flexsum-&gt;fix sum))
            <span class="string">"-WHEN-"</span>
            (symbol-name (flexprod-&gt;kind (car prods))))
          (flexsum-&gt;fix sum))))
    (cons foo-fix-when-subfoo-kind
      (<a class="sym-link local-def" href="#def-flexprods-fix-when-kind-thms" data-sym="FLEXPRODS-FIX-WHEN-KIND-THMS" title="(defun fty::flexprods-fix-when-kind-thms (fty::prods fty::sum)
  (fty::b*
   (((when (atom fty::prods)) nil)
    ((unless (consp (fty::flexprod-&gt;fields (car fty::prods))))
     (fty::flexprods-fix-when-kind-thms (cdr fty::prods) fty::sum))
...">flexprods-fix-when-kind-thms</a> (cdr prods)
        sum))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-fix-when-kind-thms" data-defines="FLEXTYPES-FIX-WHEN-KIND-THMS" data-references="FLEXPRODS-FIX-WHEN-KIND-THMS,CAR,FLEXSUM->PRODS,CDR,CONSP,CAAR,EQ,AND,APPEND,ATOM,IF,TYPES,DEFUN" data-part-name="FLEXTYPES-FIX-WHEN-KIND-THMS" data-part-args="TYPES" data-part-body="FLEXTYPES-FIX-WHEN-KIND-THMS,FLEXPRODS-FIX-WHEN-KIND-THMS,CAR,FLEXSUM->PRODS,CDR,CONSP,CAAR,EQ,AND,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-FIX-WHEN-KIND-THMS">flextypes-fix-when-kind-thms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-fix-when-kind-thms" data-sym="FLEXTYPES-FIX-WHEN-KIND-THMS" title="(defun fty::flextypes-fix-when-kind-thms (fty::types)
  (if (atom fty::types)
      nil
      (append
       (and (eq (caar fty::types) :sum)
...">flextypes-fix-when-kind-thms</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> types) <span class="keyword">:sum</span>)
        (consp (cdr (flexsum-&gt;prods (car types))))
        (<a class="sym-link local-def" href="#def-flexprods-fix-when-kind-thms" data-sym="FLEXPRODS-FIX-WHEN-KIND-THMS" title="(defun fty::flexprods-fix-when-kind-thms (fty::prods fty::sum)
  (fty::b*
   (((when (atom fty::prods)) nil)
    ((unless (consp (fty::flexprod-&gt;fields (car fty::prods))))
     (fty::flexprods-fix-when-kind-thms (cdr fty::prods) fty::sum))
...">flexprods-fix-when-kind-thms</a> (flexsum-&gt;prods (car types))
          (car types)))
      (<a class="sym-link local-def" href="#def-flextypes-fix-when-kind-thms" data-sym="FLEXTYPES-FIX-WHEN-KIND-THMS" title="(defun fty::flextypes-fix-when-kind-thms (fty::types)
  (if (atom fty::types)
      nil
      (append
       (and (eq (caar fty::types) :sum)
...">flextypes-fix-when-kind-thms</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-count" data-defines="FLEXTYPES-COUNT" data-references="DEFFIXEQUIV,CADDR,LIST,MEMBER,CADR,APPEND,EXPANDS,EQUAL,EQ,CLAUSE,LAST,CAR,LIT,DEFFIXEQUIV-MUTUAL,VERIFY-GUARDS+,DISABLE,///,T,DEFINES,X.NAME,SYMBOL-NAME,CAT,INTERN-IN-PACKAGE-OF-SYMBOL,DEFINES-NAME,LET,IF,IN-THEORY,LOCAL,PREPWORK,E/D,QUOTE,STABLE-UNDER-SIMPLIFICATIONP,AND,QUASIQUOTE,MEASURE-HINTS,CDR,CONSP,FLAGP,NOT,FLEXTYPES-COUNT-NAMES,NAMES,X.TYPES,FLEXTYPES-COUNT-DEFS,DEFS,X.NO-COUNT,WHEN,FLEXTYPES,B*,X,DEFUN" data-part-name="FLEXTYPES-COUNT" data-part-args="X" data-part-body="DEFFIXEQUIV,CADDR,LIST,MEMBER,CADR,APPEND,EXPANDS,EQUAL,EQ,CLAUSE,LAST,CAR,LIT,DEFFIXEQUIV-MUTUAL,VERIFY-GUARDS+,DISABLE,///,T,DEFINES,X.NAME,SYMBOL-NAME,CAT,INTERN-IN-PACKAGE-OF-SYMBOL,DEFINES-NAME,LET,IF,IN-THEORY,LOCAL,PREPWORK,E/D,QUOTE,STABLE-UNDER-SIMPLIFICATIONP,AND,QUASIQUOTE,MEASURE-HINTS,CDR,CONSP,FLAGP,NOT,FLEXTYPES-COUNT-NAMES,NAMES,X.TYPES,FLEXTYPES-COUNT-DEFS,DEFS,X.NO-COUNT,WHEN,X,FLEXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-COUNT">flextypes-count</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-count" data-sym="FLEXTYPES-COUNT" title="(defun fty::flextypes-count (fty::x)
  (fty::b*
   (((fty::flextypes fty::x) fty::x) ((when fty::x.no-count) nil)
    (fty::defs (fty::flextypes-count-defs fty::x.types fty::x.types))
    (fty::names (fty::flextypes-count-names fty::x.types))
...">flextypes-count</a>
  (x)
  (b* (((flextypes x) x) ((when x.no-count) nil)
      (defs (<a class="sym-link local-def" href="#def-flextypes-count-defs" data-sym="FLEXTYPES-COUNT-DEFS" title="(defun fty::flextypes-count-defs (fty::x fty::alltypes)
  (if (atom fty::x)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::x))
...">flextypes-count-defs</a> x.types x.types))
      (names (<a class="sym-link local-def" href="#def-flextypes-count-names" data-sym="FLEXTYPES-COUNT-NAMES" title="(defun fty::flextypes-count-names (fty::x)
  (if (atom fty::x)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::x))
...">flextypes-count-names</a> x.types))
      ((when (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> defs)) nil)
      (flagp (consp (cdr defs)))
      (measure-hints `((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
           '(<span class="keyword">:expand</span> ,(FTY::FLEXTYPES-EXPAND-FIXES FTY::X.TYPES)
             <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> ,(FTY::FLEXTYPES-CTORS FTY::X.TYPES))))))
      (prepwork `((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> ,(FTY::FLEXTYPES-FIX-WHEN-KIND-THMS FTY::X.TYPES)
               ,(FTY::FLEXTYPES-CTOR-OF-FIELDS-THMS FTY::X.TYPES)))))))
    (if flagp
      (let ((defines-name (intern-in-package-of-symbol (cat (symbol-name x.name) <span class="string">"-COUNT"</span>)
             x.name)))
        `((defines ,FTY::DEFINES-NAME
           <span class="keyword">:hints</span> ,FTY::MEASURE-HINTS
           <span class="keyword">:prepwork</span> ,FTY::PREPWORK
           <span class="keyword">:progn</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
           ,@FTY::DEFS
           ///
           (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable . ,(FTY::FLEXTYPES-COUNT-NAMES FTY::X.TYPES))))
           (<a class="sym-link system" href="../../../axioms.html#def-verify-guards_2B" data-sym="VERIFY-GUARDS+">verify-guards+</a> ,(CADR (CAR FTY::DEFS)))
           (deffixequiv-mutual ,FTY::DEFINES-NAME
             <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
                (let ((lit (car (<a class="sym-link system" href="../../../axioms.html#def-last" data-sym="LAST">last</a> clause))))
                  (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car lit) 'equal)
                    (let ((expands (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lit))
                             (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> (car (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lit)) ',FTY::NAMES)
                             (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lit)))
                           (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> lit))
                             (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> (car (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> lit)) ',FTY::NAMES)
                             (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> lit))))))
                      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> expands `(<span class="keyword">:expand</span> ,FTY::EXPANDS)))))))) . ,(FTY::FLEXTYPES-COUNT-POST-EVENTS FTY::X.TYPES FTY::X.TYPES))))
      (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (car defs)
          `(<span class="keyword">:hints</span> ,FTY::MEASURE-HINTS
            <span class="keyword">:prepwork</span> ,FTY::PREPWORK
            ///
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable . ,(FTY::FLEXTYPES-COUNT-NAMES FTY::X.TYPES))))
            (<a class="sym-link system" href="../../../axioms.html#def-verify-guards_2B" data-sym="VERIFY-GUARDS+">verify-guards+</a> ,(CADR (CAR FTY::DEFS))
              <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
                 '(<span class="keyword">:expand</span> ,(FTY::FLEXTYPES-NOKIND-EXPAND-FIXES FTY::X.TYPES)))))
            (deffixequiv ,(CADR (CAR FTY::DEFS))
              <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ,(FTY::FLEXTYPES-COUNT-EXPANDS FTY::X.TYPES)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
                  '(<span class="keyword">:expand</span> ,(FTY::FLEXTYPES-NOKIND-EXPAND-FIXES FTY::X.TYPES))))) . ,(FTY::FLEXTYPES-COUNT-POST-EVENTS FTY::X.TYPES FTY::X.TYPES)))))))</pre>
  </div>

<div class="form-block function" id="def-find-fix-when-pred-thm-aux" data-defines="FIND-FIX-WHEN-PRED-THM-AUX" data-references="T,EQUIV,CAAR,CDR,NOT,CONSP,AND,HYPS,RHS,VAR,CADR,SYMBOLP,LHS,BACKCHAIN,EQ,UNLESS,REWRITE-RULE,ACCESS,SUBCLASS,CAR,RULE,B*,RUNE,DEFTYPES,HARD?,ER,VALUE-TRIPLE,DEFTHM,QUOTE,MAKE-EVENT,LOCAL,MV,EQUAL,X,IMPLIES,QUASIQUOTE,BODY,LET,ATOM,IF,FIX-RULES,PRED,FIX,DEFUN" data-used-by="COLLECT-FIX/PRED-ENABLE-RULES" data-part-name="FIND-FIX-WHEN-PRED-THM-AUX" data-part-args="FIX-RULES,PRED,FIX" data-part-body="FIX,FIND-FIX-WHEN-PRED-THM-AUX,T,EQUIV,CAAR,PRED,CDR,NOT,CONSP,AND,HYPS,RHS,VAR,CADR,SYMBOLP,LHS,BACKCHAIN,EQ,UNLESS,REWRITE-RULE,ACCESS,SUBCLASS,CAR,RULE,B*,RUNE,DEFTYPES,HARD?,ER,VALUE-TRIPLE,DEFTHM,QUOTE,MAKE-EVENT,LOCAL,MV,EQUAL,X,IMPLIES,QUASIQUOTE,BODY,LET,FIX-RULES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-FIX-WHEN-PRED-THM-AUX">find-fix-when-pred-thm-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-fix-when-pred-thm-aux" data-sym="FIND-FIX-WHEN-PRED-THM-AUX" title="(defun fty::find-fix-when-pred-thm-aux (fty::fix fty::pred fty::fix-rules)
  (if (atom fty::fix-rules)
      (let ((fty::body
             `(fty::implies (,fty::pred fty::x)
               (equal (,fty::fix fty::x) fty::x))))
...">find-fix-when-pred-thm-aux</a>
  (<a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> pred fix-rules)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> fix-rules)
    (let ((<a class="sym-link system" href="../../../basis-b.html#def-body" data-sym="BODY">body</a> `(<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (,FTY::PRED x)
           (equal (,FTY::FIX x) x))))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil
        `(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> '(<span class="keyword">:or</span> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(FTY::INTERN-IN-PACKAGE-OF-SYMBOL
  (FTY::CAT &quot;TMP-DEFTYPES-&quot; (SYMBOL-NAME FTY::FIX) &quot;-WHEN-&quot;
   (SYMBOL-NAME FTY::PRED))
  &#39;FTY::FTY)
                ,FTY::BODY)
              (<a class="sym-link system" href="../../../axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                  '<a class="sym-link local-def" href="#def-deftypes" data-sym="DEFTYPES" title="(defmacro fty::deftypes (&amp;rest fty::args)
  `(fty::make-event (fty::deftypes-fn &#39;,fty::args fty::state)))">deftypes</a>
                  <span class="string">"To use ~x0/~x1 as a fixing function/predicate, we must ~
                       be able to prove the following: ~x2.  But this proof ~
                       failed! Please try to prove this rule yourself."</span>
                  ',FTY::FIX
                  ',FTY::PRED
                  ',FTY::BODY)))))))
    (let ((rune (b* ((rule (car fix-rules)) (subclass (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:subclass</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> subclass 'backchain)) nil)
             (lhs (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:lhs</span>))
             ((unless (symbolp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs))) nil)
             (var (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs))
             (rhs (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:rhs</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> rhs var)) nil)
             (hyps (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:hyps</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp hyps)
                  (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (cdr hyps))
                  (consp (car hyps))
                  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> pred (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> hyps))
                  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> var (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (car hyps))))) nil)
             (equiv (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:equiv</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> equiv 'equal)) nil)
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:backchain-limit-lst</span>)
                  nil)) nil))
           (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:rune</span>))))
      (if rune
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> rune)
        (<a class="sym-link local-def" href="#def-find-fix-when-pred-thm-aux" data-sym="FIND-FIX-WHEN-PRED-THM-AUX" title="(defun fty::find-fix-when-pred-thm-aux (fty::fix fty::pred fty::fix-rules)
  (if (atom fty::fix-rules)
      (let ((fty::body
             `(fty::implies (,fty::pred fty::x)
               (equal (,fty::fix fty::x) fty::x))))
...">find-fix-when-pred-thm-aux</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
          pred
          (cdr fix-rules))))))</pre>
  </div>

<div class="form-block function" id="def-find-fix-when-unsigned-byte-p-pred-thm-aux" data-defines="FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX" data-references="T,EQUIV,CADDR,CADAR,CAAR,CDR,NOT,CONSP,AND,HYPS,RHS,VAR,CADR,SYMBOLP,LHS,BACKCHAIN,EQ,UNLESS,REWRITE-RULE,ACCESS,SUBCLASS,CAR,RULE,B*,RUNE,DEFTYPES,HARD?,ER,VALUE-TRIPLE,DEFTHM,MAKE-EVENT,LOCAL,MV,EQUAL,X,QUOTE,UNSIGNED-BYTE-P,IMPLIES,QUASIQUOTE,BODY,LET,ATOM,IF,FIX-RULES,SIZE,PRED,FIX,DEFUN" data-used-by="COLLECT-FIX/PRED-ENABLE-RULES" data-part-name="FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX" data-part-args="FIX-RULES,SIZE,PRED,FIX" data-part-body="PRED,FIX,FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX,T,EQUIV,CADDR,SIZE,CADAR,CAAR,CDR,NOT,CONSP,AND,HYPS,RHS,VAR,CADR,SYMBOLP,LHS,BACKCHAIN,EQ,UNLESS,REWRITE-RULE,ACCESS,SUBCLASS,CAR,RULE,B*,RUNE,DEFTYPES,HARD?,ER,VALUE-TRIPLE,DEFTHM,MAKE-EVENT,LOCAL,MV,EQUAL,X,QUOTE,UNSIGNED-BYTE-P,IMPLIES,QUASIQUOTE,BODY,LET,FIX-RULES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX">find-fix-when-unsigned-byte-p-pred-thm-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-fix-when-unsigned-byte-p-pred-thm-aux" data-sym="FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX" title="(defun fty::find-fix-when-unsigned-byte-p-pred-thm-aux
       (fty::fix fty::pred fty::size fty::fix-rules)
  (if (atom fty::fix-rules)
      (let ((fty::body
             `(fty::implies (unsigned-byte-p &#39;,fty::size fty::x)
...">find-fix-when-unsigned-byte-p-pred-thm-aux</a>
  (<a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> pred size fix-rules)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> fix-rules)
    (let ((<a class="sym-link system" href="../../../basis-b.html#def-body" data-sym="BODY">body</a> `(<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> ',FTY::SIZE x)
           (equal (,FTY::FIX x) x))))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil
        `(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> '(<span class="keyword">:or</span> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(FTY::INTERN-IN-PACKAGE-OF-SYMBOL
  (FTY::CAT &quot;TMP-DEFTYPES-&quot; (SYMBOL-NAME FTY::FIX) &quot;-WHEN-&quot;
   (SYMBOL-NAME FTY::PRED))
  &#39;FTY::FTY)
                ,FTY::BODY)
              (<a class="sym-link system" href="../../../axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                  '<a class="sym-link local-def" href="#def-deftypes" data-sym="DEFTYPES" title="(defmacro fty::deftypes (&amp;rest fty::args)
  `(fty::make-event (fty::deftypes-fn &#39;,fty::args fty::state)))">deftypes</a>
                  <span class="string">"To use ~x0/~x1 as a fixing function/predicate, we must ~
                       be able to prove the following: ~x2.  But this proof ~
                       failed! Please try to prove this rule yourself."</span>
                  ',FTY::FIX
                  ',FTY::PRED
                  ',FTY::BODY)))))))
    (let ((rune (b* ((rule (car fix-rules)) (subclass (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:subclass</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> subclass 'backchain)) nil)
             (lhs (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:lhs</span>))
             ((unless (symbolp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs))) nil)
             (var (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs))
             (rhs (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:rhs</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> rhs var)) nil)
             (hyps (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:hyps</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp hyps)
                  (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (cdr hyps))
                  (consp (car hyps))
                  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> '<a class="sym-link system" href="../../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> hyps))
                  (consp (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> hyps))
                  (equal 'quote (car (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> hyps)))
                  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> size (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../../../axioms.html#def-cadar" data-sym="CADAR">cadar</a> hyps)))
                  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> var (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (car hyps))))) nil)
             (equiv (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:equiv</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> equiv 'equal)) nil)
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:backchain-limit-lst</span>)
                  nil)) nil))
           (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:rune</span>))))
      (if rune
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> rune)
        (<a class="sym-link local-def" href="#def-find-fix-when-unsigned-byte-p-pred-thm-aux" data-sym="FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX" title="(defun fty::find-fix-when-unsigned-byte-p-pred-thm-aux
       (fty::fix fty::pred fty::size fty::fix-rules)
  (if (atom fty::fix-rules)
      (let ((fty::body
             `(fty::implies (unsigned-byte-p &#39;,fty::size fty::x)
...">find-fix-when-unsigned-byte-p-pred-thm-aux</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
          pred
          size
          (cdr fix-rules))))))</pre>
  </div>

<div class="form-block function" id="def-find-pred-of-fix-thm-aux" data-defines="FIND-PRED-OF-FIX-THM-AUX" data-references="CDR,IFF,MEMBER,EQUIV,HYPS,T,EQUAL,RHS,SYMBOLP,CADR,CONSP,AND,LHS,ABBREVIATION,EQ,UNLESS,REWRITE-RULE,ACCESS,SUBCLASS,CAR,RULE,B*,RUNE,DEFTYPES,HARD?,ER,VALUE-TRIPLE,DEFTHM,QUOTE,MAKE-EVENT,LOCAL,MV,X,QUASIQUOTE,BODY,LET,ATOM,IF,PRED-RULES,PRED,FIX,DEFUN" data-used-by="COLLECT-FIX/PRED-ENABLE-RULES" data-part-name="FIND-PRED-OF-FIX-THM-AUX" data-part-args="PRED-RULES,PRED,FIX" data-part-body="CDR,PRED,FIND-PRED-OF-FIX-THM-AUX,IFF,MEMBER,EQUIV,HYPS,T,EQUAL,RHS,SYMBOLP,FIX,CADR,CONSP,AND,LHS,ABBREVIATION,EQ,UNLESS,REWRITE-RULE,ACCESS,SUBCLASS,CAR,RULE,B*,RUNE,DEFTYPES,HARD?,ER,VALUE-TRIPLE,DEFTHM,QUOTE,MAKE-EVENT,LOCAL,MV,X,QUASIQUOTE,BODY,LET,PRED-RULES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-PRED-OF-FIX-THM-AUX">find-pred-of-fix-thm-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-pred-of-fix-thm-aux" data-sym="FIND-PRED-OF-FIX-THM-AUX" title="(defun fty::find-pred-of-fix-thm-aux (fty::fix fty::pred fty::pred-rules)
  (if (atom fty::pred-rules)
      (let ((fty::body `(,fty::pred (,fty::fix fty::x))))
        (fty::mv nil
         `(fty::local
...">find-pred-of-fix-thm-aux</a>
  (<a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> pred pred-rules)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> pred-rules)
    (let ((<a class="sym-link system" href="../../../basis-b.html#def-body" data-sym="BODY">body</a> `(,FTY::PRED (,FTY::FIX x))))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil
        `(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> '(<span class="keyword">:or</span> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(FTY::INTERN-IN-PACKAGE-OF-SYMBOL
  (FTY::CAT &quot;TMP-DEFTYPES-&quot; (SYMBOL-NAME FTY::PRED) &quot;-OF-&quot;
   (SYMBOL-NAME FTY::FIX))
  &#39;FTY::FTY)
                ,FTY::BODY)
              (<a class="sym-link system" href="../../../axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                  '<a class="sym-link local-def" href="#def-deftypes" data-sym="DEFTYPES" title="(defmacro fty::deftypes (&amp;rest fty::args)
  `(fty::make-event (fty::deftypes-fn &#39;,fty::args fty::state)))">deftypes</a>
                  <span class="string">"To use ~x0/~x1 as a fixing function/predicate, we must ~
                       be able to prove the following: ~x2.  But this proof ~
                       failed! Please try to prove this rule yourself."</span>
                  ',FTY::FIX
                  ',FTY::PRED
                  ',FTY::BODY)))))))
    (let ((rune (b* ((rule (car pred-rules)) (subclass (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:subclass</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> subclass 'abbreviation)) nil)
             (lhs (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:lhs</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs))
                  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> (car (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs)))
                  (symbolp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs))))) nil)
             (rhs (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:rhs</span>))
             ((unless (equal rhs ''<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)) nil)
             (hyps (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:hyps</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> hyps)) nil)
             (equiv (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:equiv</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> equiv '(equal <a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a>))) nil))
           (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:rune</span>))))
      (if rune
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> rune)
        (<a class="sym-link local-def" href="#def-find-pred-of-fix-thm-aux" data-sym="FIND-PRED-OF-FIX-THM-AUX" title="(defun fty::find-pred-of-fix-thm-aux (fty::fix fty::pred fty::pred-rules)
  (if (atom fty::pred-rules)
      (let ((fty::body `(,fty::pred (,fty::fix fty::x))))
        (fty::mv nil
         `(fty::local
...">find-pred-of-fix-thm-aux</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
          pred
          (cdr pred-rules))))))</pre>
  </div>

<div class="form-block function" id="def-find-unsigned-byte-p-pred-of-fix-thm-aux" data-defines="FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX" data-references="CDR,IFF,MEMBER,EQUIV,HYPS,T,EQUAL,RHS,SYMBOLP,CADDR,CADR,CONSP,AND,LHS,ABBREVIATION,EQ,UNLESS,REWRITE-RULE,ACCESS,SUBCLASS,CAR,RULE,B*,RUNE,DEFTYPES,HARD?,ER,VALUE-TRIPLE,DEFTHM,MAKE-EVENT,LOCAL,MV,X,QUOTE,UNSIGNED-BYTE-P,QUASIQUOTE,BODY,LET,ATOM,IF,PRED-RULES,SIZE,PRED,FIX,DEFUN" data-used-by="COLLECT-FIX/PRED-ENABLE-RULES" data-part-name="FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX" data-part-args="PRED-RULES,SIZE,PRED,FIX" data-part-body="CDR,PRED,FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX,IFF,MEMBER,EQUIV,HYPS,T,EQUAL,RHS,SYMBOLP,FIX,CADDR,SIZE,CADR,CONSP,AND,LHS,ABBREVIATION,EQ,UNLESS,REWRITE-RULE,ACCESS,SUBCLASS,CAR,RULE,B*,RUNE,DEFTYPES,HARD?,ER,VALUE-TRIPLE,DEFTHM,MAKE-EVENT,LOCAL,MV,X,QUOTE,UNSIGNED-BYTE-P,QUASIQUOTE,BODY,LET,PRED-RULES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX">find-unsigned-byte-p-pred-of-fix-thm-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-unsigned-byte-p-pred-of-fix-thm-aux" data-sym="FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX" title="(defun fty::find-unsigned-byte-p-pred-of-fix-thm-aux
       (fty::fix fty::pred fty::size fty::pred-rules)
  (if (atom fty::pred-rules)
      (let ((fty::body `(unsigned-byte-p &#39;,fty::size (,fty::fix fty::x))))
        (fty::mv nil
...">find-unsigned-byte-p-pred-of-fix-thm-aux</a>
  (<a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> pred size pred-rules)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> pred-rules)
    (let ((<a class="sym-link system" href="../../../basis-b.html#def-body" data-sym="BODY">body</a> `(<a class="sym-link system" href="../../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> ',FTY::SIZE (,FTY::FIX x))))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil
        `(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> '(<span class="keyword">:or</span> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,(FTY::INTERN-IN-PACKAGE-OF-SYMBOL
  (FTY::CAT &quot;TMP-DEFTYPES-&quot; (SYMBOL-NAME FTY::PRED) &quot;-OF-&quot;
   (SYMBOL-NAME FTY::FIX))
  &#39;FTY::FTY)
                ,FTY::BODY)
              (<a class="sym-link system" href="../../../axioms.html#def-value-triple" data-sym="VALUE-TRIPLE">value-triple</a> (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
                  '<a class="sym-link local-def" href="#def-deftypes" data-sym="DEFTYPES" title="(defmacro fty::deftypes (&amp;rest fty::args)
  `(fty::make-event (fty::deftypes-fn &#39;,fty::args fty::state)))">deftypes</a>
                  <span class="string">"To use ~x0/~x1 as a fixing function/predicate, we must ~
                       be able to prove the following: ~x2.  But this proof ~
                       failed! Please try to prove this rule yourself."</span>
                  ',FTY::FIX
                  ',FTY::PRED
                  ',FTY::BODY)))))))
    (let ((rune (b* ((rule (car pred-rules)) (subclass (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:subclass</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> subclass 'abbreviation)) nil)
             (lhs (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:lhs</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> '<a class="sym-link system" href="../../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a> (car lhs))
                  (consp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs))
                  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs)) 'quote)
                  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> size (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> lhs)))
                  (consp (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> lhs))
                  (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> (car (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> lhs)))
                  (symbolp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> lhs))))) nil)
             (rhs (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:rhs</span>))
             ((unless (equal rhs ''<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)) nil)
             (hyps (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:hyps</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> hyps)) nil)
             (equiv (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:equiv</span>))
             ((unless (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> equiv '(equal <a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a>))) nil))
           (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule rule <span class="keyword">:rune</span>))))
      (if rune
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> rune)
        (<a class="sym-link local-def" href="#def-find-unsigned-byte-p-pred-of-fix-thm-aux" data-sym="FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX" title="(defun fty::find-unsigned-byte-p-pred-of-fix-thm-aux
       (fty::fix fty::pred fty::size fty::pred-rules)
  (if (atom fty::pred-rules)
      (let ((fty::body `(unsigned-byte-p &#39;,fty::size (,fty::fix fty::x))))
        (fty::mv nil
...">find-unsigned-byte-p-pred-of-fix-thm-aux</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
          pred
          size
          (cdr pred-rules))))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-collect-fix_2Fpred-pairs-aux" data-defines="FLEXTYPES-COLLECT-FIX/PRED-PAIRS-AUX" data-references="CDR,FLEX*-COLLECT-FIX/PRED-PAIRS,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,TYPES,DEFUN" data-used-by="FLEXTYPES-COLLECT-FIX/PRED-PAIRS" data-part-name="FLEXTYPES-COLLECT-FIX/PRED-PAIRS-AUX" data-part-args="TYPES" data-part-body="CDR,FLEXTYPES-COLLECT-FIX/PRED-PAIRS-AUX,FLEX*-COLLECT-FIX/PRED-PAIRS,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-COLLECT-FIX/PRED-PAIRS-AUX">flextypes-collect-fix/pred-pairs-aux</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-collect-fix_2Fpred-pairs-aux" data-sym="FLEXTYPES-COLLECT-FIX/PRED-PAIRS-AUX" title="(defun fty::flextypes-collect-fix/pred-pairs-aux (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-collect-fix/pred-pairs-aux</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car types))
        (flex*-collect-fix/pred-pairs x))
      (<a class="sym-link local-def" href="#def-flextypes-collect-fix_2Fpred-pairs-aux" data-sym="FLEXTYPES-COLLECT-FIX/PRED-PAIRS-AUX" title="(defun fty::flextypes-collect-fix/pred-pairs-aux (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-collect-fix/pred-pairs-aux</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-collect-fix_2Fpred-pairs" data-defines="FLEXTYPES-COLLECT-FIX/PRED-PAIRS" data-references="FLEXTYPES-COLLECT-FIX/PRED-PAIRS-AUX,REMOVE-DUPLICATES-EQUAL,TYPES,DEFUN" data-used-by="DEFTYPES-EVENTS" data-part-name="FLEXTYPES-COLLECT-FIX/PRED-PAIRS" data-part-args="TYPES" data-part-body="TYPES,FLEXTYPES-COLLECT-FIX/PRED-PAIRS-AUX,REMOVE-DUPLICATES-EQUAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-COLLECT-FIX/PRED-PAIRS">flextypes-collect-fix/pred-pairs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-collect-fix_2Fpred-pairs" data-sym="FLEXTYPES-COLLECT-FIX/PRED-PAIRS" title="(defun fty::flextypes-collect-fix/pred-pairs (fty::types)
  (fty::remove-duplicates-equal
   (fty::flextypes-collect-fix/pred-pairs-aux fty::types)))">flextypes-collect-fix/pred-pairs</a>
  (types)
  (<a class="sym-link system" href="../../../axioms.html#def-remove-duplicates-equal" data-sym="REMOVE-DUPLICATES-EQUAL">remove-duplicates-equal</a> (<a class="sym-link local-def" href="#def-flextypes-collect-fix_2Fpred-pairs-aux" data-sym="FLEXTYPES-COLLECT-FIX/PRED-PAIRS-AUX" title="(defun fty::flextypes-collect-fix/pred-pairs-aux (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypes-collect-fix/pred-pairs-aux</a> types)))</pre>
  </div>

<div class="form-block function" id="def-collect-fix_2Fpred-enable-rules" data-defines="COLLECT-FIX/PRED-ENABLE-RULES" data-references="THMS,ENABLES,FIND-PRED-OF-FIX-THM-AUX,FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX,PRED-RULE,PRED-RULE-EXISTS,FIND-FIX-WHEN-PRED-THM-AUX,FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX,FIX-RULE,FIX-RULE-EXISTS,PRED-RULES,LEMMAS,FIX-RULES,CW,UNLESS,OR,PRED-EXISTS,CDDDR,CDDR,CDR,CDDADR,CADADR,NATP,CDADR,CAADR,CADDR,CONSP,UNSIGNED-BYTE-P,CADR,EQUAL,AND,UNSIGNED-BYTE-P-PRED-EXISTS,MACRO-BODY,PRED-MACRO-BODY,MACRO-ARGS,PRED-MACRO-ARGS,CURRENT-ACL2-WORLD,FORMALS,QUOTE,GETPROP,EQ,NOT,FIX-EXISTS,MACRO-ALIASES,DEREF-MACRO-NAME,CAR,PRED,FIX,CONS,B*,MV,ATOM,IF,WORLD,PAIRS,DEFUN" data-used-by="DEFTYPES-EVENTS" data-part-name="COLLECT-FIX/PRED-ENABLE-RULES" data-part-args="WORLD,PAIRS" data-part-body="THMS,ENABLES,FIND-PRED-OF-FIX-THM-AUX,FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX,PRED-RULE,PRED-RULE-EXISTS,FIND-FIX-WHEN-PRED-THM-AUX,FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX,FIX-RULE,FIX-RULE-EXISTS,PRED-RULES,LEMMAS,FIX-RULES,COLLECT-FIX/PRED-ENABLE-RULES,CW,UNLESS,OR,PRED-EXISTS,CDDDR,CDDR,CDR,CDDADR,CADADR,NATP,CDADR,CAADR,CADDR,CONSP,UNSIGNED-BYTE-P,CADR,EQUAL,AND,UNSIGNED-BYTE-P-PRED-EXISTS,MACRO-BODY,PRED-MACRO-BODY,MACRO-ARGS,PRED-MACRO-ARGS,CURRENT-ACL2-WORLD,FORMALS,QUOTE,GETPROP,EQ,NOT,FIX-EXISTS,WORLD,MACRO-ALIASES,DEREF-MACRO-NAME,CAR,PRED,FIX,CONS,B*,MV,PAIRS,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-FIX/PRED-ENABLE-RULES">collect-fix/pred-enable-rules</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-fix_2Fpred-enable-rules" data-sym="COLLECT-FIX/PRED-ENABLE-RULES" title="(defun fty::collect-fix/pred-enable-rules (fty::pairs fty::world)
  (if (atom fty::pairs)
      (fty::mv nil nil)
      (fty::b*
       (((cons fty::fix fty::pred) (car fty::pairs))
...">collect-fix/pred-enable-rules</a>
  (pairs world)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> pairs)
    (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)
    (b* (((cons <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> pred) (car pairs)) (<a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> (<a class="sym-link system" href="../../../axioms.html#def-deref-macro-name" data-sym="DEREF-MACRO-NAME">deref-macro-name</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> (<a class="sym-link system" href="../../../axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> world)))
        (pred (<a class="sym-link system" href="../../../axioms.html#def-deref-macro-name" data-sym="DEREF-MACRO-NAME">deref-macro-name</a> pred (<a class="sym-link system" href="../../../axioms.html#def-macro-aliases" data-sym="MACRO-ALIASES">macro-aliases</a> world)))
        (fix-exists (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> <span class="keyword">:none</span> (<a class="sym-link system" href="../../../axioms.html#def-getprop" data-sym="GETPROP">getprop</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
                '<a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                <span class="keyword">:none</span> 'current-acl2-world
                world))))
        (pred-macro-args (<a class="sym-link system" href="../../../axioms.html#def-getprop" data-sym="GETPROP">getprop</a> pred
            'macro-args
            <span class="keyword">:none</span> 'current-acl2-world
            world))
        (pred-macro-body (<a class="sym-link system" href="../../../axioms.html#def-getprop" data-sym="GETPROP">getprop</a> pred
            'macro-body
            nil
            'current-acl2-world
            world))
        (unsigned-byte-p-pred-exists (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> <span class="keyword">:none</span> pred-macro-args))
            (equal (car pred-macro-body) 'cons)
            (equal (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> pred-macro-body) ''<a class="sym-link system" href="../../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a>)
            (consp (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body))
            (equal (car (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body)) 'cons)
            (consp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body)))
            (equal (<a class="sym-link system" href="../../../axioms.html#def-caadr" data-sym="CAADR">caadr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body)) 'quote)
            (consp (<a class="sym-link system" href="../../../axioms.html#def-cdadr" data-sym="CDADR">cdadr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body)))
            (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="../../../axioms.html#def-cadadr" data-sym="CADADR">cadadr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body)))
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-cddadr" data-sym="CDDADR">cddadr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body)))
            (consp (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body)))
            (equal (car (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body))) 'cons)
            (consp (cdr (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body))))
            (equal (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body)))
              (car pred-macro-args))
            (consp (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body))))
            (equal (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body))) ''nil)
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body))))
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body)))
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> pred-macro-body))))
        (pred-exists (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> unsigned-byte-p-pred-exists
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> <span class="keyword">:none</span> (<a class="sym-link system" href="../../../axioms.html#def-getprop" data-sym="GETPROP">getprop</a> pred
                  '<a class="sym-link system" href="../../../basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                  <span class="keyword">:none</span> 'current-acl2-world
                  world)))))
        ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> fix-exists pred-exists)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> fix-exists pred-exists)
            (<a class="sym-link system" href="../../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"WARNING: ~x0 is defined but ~x1 is not"</span>
              (if fix-exists
                <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
                pred)
              (if fix-exists
                pred
                <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>)))
          (<a class="sym-link local-def" href="#def-collect-fix_2Fpred-enable-rules" data-sym="COLLECT-FIX/PRED-ENABLE-RULES" title="(defun fty::collect-fix/pred-enable-rules (fty::pairs fty::world)
  (if (atom fty::pairs)
      (fty::mv nil nil)
      (fty::b*
       (((cons fty::fix fty::pred) (car fty::pairs))
...">collect-fix/pred-enable-rules</a> (cdr pairs)
            world))
        (fix-rules (<a class="sym-link system" href="../../../axioms.html#def-getprop" data-sym="GETPROP">getprop</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
            'lemmas
            nil
            'current-acl2-world
            world))
        (pred-rules (<a class="sym-link system" href="../../../axioms.html#def-getprop" data-sym="GETPROP">getprop</a> (if unsigned-byte-p-pred-exists
              '<a class="sym-link system" href="../../../axioms.html#def-unsigned-byte-p" data-sym="UNSIGNED-BYTE-P">unsigned-byte-p</a>
              pred)
            'lemmas
            nil
            'current-acl2-world
            world))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> fix-rule-exists fix-rule) (if unsigned-byte-p-pred-exists
            (<a class="sym-link local-def" href="#def-find-fix-when-unsigned-byte-p-pred-thm-aux" data-sym="FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX" title="(defun fty::find-fix-when-unsigned-byte-p-pred-thm-aux
       (fty::fix fty::pred fty::size fty::fix-rules)
  (if (atom fty::fix-rules)
      (let ((fty::body
             `(fty::implies (unsigned-byte-p &#39;,fty::size fty::x)
...">find-fix-when-unsigned-byte-p-pred-thm-aux</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
              pred
              (<a class="sym-link system" href="../../../axioms.html#def-cadadr" data-sym="CADADR">cadadr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body))
              fix-rules)
            (<a class="sym-link local-def" href="#def-find-fix-when-pred-thm-aux" data-sym="FIND-FIX-WHEN-PRED-THM-AUX" title="(defun fty::find-fix-when-pred-thm-aux (fty::fix fty::pred fty::fix-rules)
  (if (atom fty::fix-rules)
      (let ((fty::body
             `(fty::implies (,fty::pred fty::x)
               (equal (,fty::fix fty::x) fty::x))))
...">find-fix-when-pred-thm-aux</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
              pred
              fix-rules)))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> pred-rule-exists pred-rule) (if unsigned-byte-p-pred-exists
            (<a class="sym-link local-def" href="#def-find-unsigned-byte-p-pred-of-fix-thm-aux" data-sym="FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX" title="(defun fty::find-unsigned-byte-p-pred-of-fix-thm-aux
       (fty::fix fty::pred fty::size fty::pred-rules)
  (if (atom fty::pred-rules)
      (let ((fty::body `(unsigned-byte-p &#39;,fty::size (,fty::fix fty::x))))
        (fty::mv nil
...">find-unsigned-byte-p-pred-of-fix-thm-aux</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
              pred
              (<a class="sym-link system" href="../../../axioms.html#def-cadadr" data-sym="CADADR">cadadr</a> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> pred-macro-body))
              pred-rules)
            (<a class="sym-link local-def" href="#def-find-pred-of-fix-thm-aux" data-sym="FIND-PRED-OF-FIX-THM-AUX" title="(defun fty::find-pred-of-fix-thm-aux (fty::fix fty::pred fty::pred-rules)
  (if (atom fty::pred-rules)
      (let ((fty::body `(,fty::pred (,fty::fix fty::x))))
        (fty::mv nil
         `(fty::local
...">find-pred-of-fix-thm-aux</a> <a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a>
              pred
              pred-rules)))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> enables thms) (<a class="sym-link local-def" href="#def-collect-fix_2Fpred-enable-rules" data-sym="COLLECT-FIX/PRED-ENABLE-RULES" title="(defun fty::collect-fix/pred-enable-rules (fty::pairs fty::world)
  (if (atom fty::pairs)
      (fty::mv nil nil)
      (fty::b*
       (((cons fty::fix fty::pred) (car fty::pairs))
...">collect-fix/pred-enable-rules</a> (cdr pairs)
            world))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> enables thms) (if fix-rule-exists
            (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (cons fix-rule enables) thms)
            (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> enables (cons fix-rule thms))))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> enables thms) (if pred-rule-exists
            (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (cons pred-rule enables) thms)
            (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> enables (cons pred-rule thms)))))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> enables thms))))</pre>
  </div>

<div class="form-block function" id="def-flextypelist-append-events" data-defines="FLEXTYPELIST-APPEND-EVENTS" data-references="X.KWD-ALIST,ASSOC,CDR,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,TYPES,KWD,DEFUN" data-used-by="FLEXTYPE-COLLECT-EVENTS" data-part-name="FLEXTYPELIST-APPEND-EVENTS" data-part-args="TYPES,KWD" data-part-body="FLEXTYPELIST-APPEND-EVENTS,X.KWD-ALIST,KWD,ASSOC,CDR,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPELIST-APPEND-EVENTS">flextypelist-append-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypelist-append-events" data-sym="FLEXTYPELIST-APPEND-EVENTS" title="(defun fty::flextypelist-append-events (fty::kwd fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-append-events</a>
  (kwd types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car types))
        (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> kwd x.kwd-alist)))
      (<a class="sym-link local-def" href="#def-flextypelist-append-events" data-sym="FLEXTYPELIST-APPEND-EVENTS" title="(defun fty::flextypelist-append-events (fty::kwd fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-append-events</a> kwd (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextype-collect-events" data-defines="FLEXTYPE-COLLECT-EVENTS" data-references="FLEXTYPELIST-APPEND-EVENTS,GETARG,APPEND,TYPES,KWD-ALIST,KWD,DEFUN" data-part-name="FLEXTYPE-COLLECT-EVENTS" data-part-args="TYPES,KWD-ALIST,KWD" data-part-body="TYPES,FLEXTYPELIST-APPEND-EVENTS,KWD-ALIST,KWD,GETARG,APPEND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPE-COLLECT-EVENTS">flextype-collect-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextype-collect-events" data-sym="FLEXTYPE-COLLECT-EVENTS" title="(defun fty::flextype-collect-events (fty::kwd fty::kwd-alist fty::types)
  (append (fty::getarg fty::kwd nil fty::kwd-alist)
          (fty::flextypelist-append-events fty::kwd fty::types)))">flextype-collect-events</a>
  (kwd kwd-alist types)
  (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (getarg kwd nil kwd-alist)
    (<a class="sym-link local-def" href="#def-flextypelist-append-events" data-sym="FLEXTYPELIST-APPEND-EVENTS" title="(defun fty::flextypelist-append-events (fty::kwd fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-append-events</a> kwd types)))</pre>
  </div>

<div class="form-block function" id="def-flextypelist-collect-enable-rules" data-defines="FLEXTYPELIST-COLLECT-ENABLE-RULES" data-references="X.KWD-ALIST,ASSOC,CDR,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,ATOM,IF,TYPES,DEFUN" data-used-by="FLEXTYPES-COLLECT-ENABLE-RULES" data-part-name="FLEXTYPELIST-COLLECT-ENABLE-RULES" data-part-args="TYPES" data-part-body="FLEXTYPELIST-COLLECT-ENABLE-RULES,X.KWD-ALIST,ASSOC,CDR,CAR,X,WITH-FLEXTYPE-BINDINGS,APPEND,TYPES,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPELIST-COLLECT-ENABLE-RULES">flextypelist-collect-enable-rules</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypelist-collect-enable-rules" data-sym="FLEXTYPELIST-COLLECT-ENABLE-RULES" title="(defun fty::flextypelist-collect-enable-rules (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-collect-enable-rules</a>
  (types)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> types)
    nil
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (with-flextype-bindings (x (car types))
        (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:enable-rules</span> x.kwd-alist)))
      (<a class="sym-link local-def" href="#def-flextypelist-collect-enable-rules" data-sym="FLEXTYPELIST-COLLECT-ENABLE-RULES" title="(defun fty::flextypelist-collect-enable-rules (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-collect-enable-rules</a> (cdr types)))))</pre>
  </div>

<div class="form-block function" id="def-flextypes-collect-enable-rules" data-defines="FLEXTYPES-COLLECT-ENABLE-RULES" data-references="FLEXTYPES->TYPES,FLEXTYPELIST-COLLECT-ENABLE-RULES,FLEXTYPES->KWD-ALIST,ASSOC,CDR,APPEND,X,DEFUN" data-part-name="FLEXTYPES-COLLECT-ENABLE-RULES" data-part-args="X" data-part-body="FLEXTYPES->TYPES,FLEXTYPELIST-COLLECT-ENABLE-RULES,X,FLEXTYPES->KWD-ALIST,ASSOC,CDR,APPEND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-COLLECT-ENABLE-RULES">flextypes-collect-enable-rules</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-collect-enable-rules" data-sym="FLEXTYPES-COLLECT-ENABLE-RULES" title="(defun fty::flextypes-collect-enable-rules (fty::x)
  (append (cdr (assoc :enable-rules (fty::flextypes-&gt;kwd-alist fty::x)))
          (fty::flextypelist-collect-enable-rules
           (fty::flextypes-&gt;types fty::x))))">flextypes-collect-enable-rules</a>
  (x)
  (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> <span class="keyword">:enable-rules</span> (flextypes-&gt;kwd-alist x)))
    (<a class="sym-link local-def" href="#def-flextypelist-collect-enable-rules" data-sym="FLEXTYPELIST-COLLECT-ENABLE-RULES" title="(defun fty::flextypelist-collect-enable-rules (fty::types)
  (if (atom fty::types)
      nil
      (append
       (fty::with-flextype-bindings (fty::x (car fty::types))
...">flextypelist-collect-enable-rules</a> (flextypes-&gt;types x))))</pre>
  </div>

<div class="form-block function" id="def-collect-uncond-type-prescriptions-from-list" data-defines="COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST" data-references="CDR,CONS,EQ,RUNE,LET,NOT,CAR,TYPE-PRESCRIPTION,ACCESS,ENABLED-NUMEP,AND,ATOM,IF,ENS,X,DEFUN" data-used-by="COLLECT-UNCOND-TYPE-PRESCRIPTIONS" data-part-name="COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST" data-part-args="ENS,X" data-part-body="CDR,COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST,CONS,EQ,RUNE,LET,NOT,ENS,CAR,TYPE-PRESCRIPTION,ACCESS,ENABLED-NUMEP,AND,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST">collect-uncond-type-prescriptions-from-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-uncond-type-prescriptions-from-list" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST" title="(defun fty::collect-uncond-type-prescriptions-from-list (fty::x fty::ens)
  (if (atom fty::x)
      nil
      (if (and
           (enabled-numep (access type-prescription (car fty::x) :nume)
...">collect-uncond-type-prescriptions-from-list</a>
  (x ens)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (enabled-numep (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription (car x) <span class="keyword">:nume</span>)
          ens)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription (car x) <span class="keyword">:hyps</span>)))
      (let ((rune (<a class="sym-link system" href="../../../axioms.html#def-access" data-sym="ACCESS">access</a> type-prescription (car x) <span class="keyword">:rune</span>)))
        (if (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car rune) <span class="keyword">:type-prescription</span>)
          (cons rune
            (<a class="sym-link local-def" href="#def-collect-uncond-type-prescriptions-from-list" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST" title="(defun fty::collect-uncond-type-prescriptions-from-list (fty::x fty::ens)
  (if (atom fty::x)
      nil
      (if (and
           (enabled-numep (access type-prescription (car fty::x) :nume)
...">collect-uncond-type-prescriptions-from-list</a> (cdr x)
              ens))
          (<a class="sym-link local-def" href="#def-collect-uncond-type-prescriptions-from-list" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST" title="(defun fty::collect-uncond-type-prescriptions-from-list (fty::x fty::ens)
  (if (atom fty::x)
      nil
      (if (and
           (enabled-numep (access type-prescription (car fty::x) :nume)
...">collect-uncond-type-prescriptions-from-list</a> (cdr x)
            ens)))
      (<a class="sym-link local-def" href="#def-collect-uncond-type-prescriptions-from-list" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST" title="(defun fty::collect-uncond-type-prescriptions-from-list (fty::x fty::ens)
  (if (atom fty::x)
      nil
      (if (and
           (enabled-numep (access type-prescription (car fty::x) :nume)
...">collect-uncond-type-prescriptions-from-list</a> (cdr x)
        ens))))</pre>
  </div>

<div class="form-block function" id="def-collect-uncond-type-prescriptions" data-defines="COLLECT-UNCOND-TYPE-PRESCRIPTIONS" data-references="T,HONS-ACONS,COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST,APPEND,HONS-GET,WHEN,CDR,TYPE-PRESCRIPTIONS,QUOTE,EQ,UNLESS,CAR,VAL,KEY,SYM,LIST*,B*,ATOM,IF,PLIST-WORLDP,XARGS,DECLARE,FNS-SEEN,ENS,WRLD,DEFUN" data-part-name="COLLECT-UNCOND-TYPE-PRESCRIPTIONS" data-part-args="FNS-SEEN,ENS,WRLD" data-part-declare="WRLD,PLIST-WORLDP,XARGS,DECLARE" data-part-body="T,HONS-ACONS,COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST,APPEND,HONS-GET,WHEN,FNS-SEEN,ENS,CDR,COLLECT-UNCOND-TYPE-PRESCRIPTIONS,TYPE-PRESCRIPTIONS,QUOTE,EQ,UNLESS,CAR,VAL,KEY,SYM,LIST*,B*,WRLD,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS">collect-uncond-type-prescriptions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-uncond-type-prescriptions" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS" title="(defun fty::collect-uncond-type-prescriptions
       (fty::wrld fty::ens fty::fns-seen)
  (declare (fty::xargs :guard (fty::plist-worldp fty::wrld)))
  (if (atom fty::wrld)
      nil
...">collect-uncond-type-prescriptions</a>
  (wrld ens fns-seen)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> wrld)))
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> wrld)
    nil
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> sym key val) (car wrld)) ((unless (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> key 'type-prescriptions)) (<a class="sym-link local-def" href="#def-collect-uncond-type-prescriptions" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS" title="(defun fty::collect-uncond-type-prescriptions
       (fty::wrld fty::ens fty::fns-seen)
  (declare (fty::xargs :guard (fty::plist-worldp fty::wrld)))
  (if (atom fty::wrld)
      nil
...">collect-uncond-type-prescriptions</a> (cdr wrld)
            ens
            fns-seen))
        ((when (hons-get sym fns-seen)) (<a class="sym-link local-def" href="#def-collect-uncond-type-prescriptions" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS" title="(defun fty::collect-uncond-type-prescriptions
       (fty::wrld fty::ens fty::fns-seen)
  (declare (fty::xargs :guard (fty::plist-worldp fty::wrld)))
  (if (atom fty::wrld)
      nil
...">collect-uncond-type-prescriptions</a> (cdr wrld)
            ens
            fns-seen)))
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link local-def" href="#def-collect-uncond-type-prescriptions-from-list" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS-FROM-LIST" title="(defun fty::collect-uncond-type-prescriptions-from-list (fty::x fty::ens)
  (if (atom fty::x)
      nil
      (if (and
           (enabled-numep (access type-prescription (car fty::x) :nume)
...">collect-uncond-type-prescriptions-from-list</a> val
          ens)
        (<a class="sym-link local-def" href="#def-collect-uncond-type-prescriptions" data-sym="COLLECT-UNCOND-TYPE-PRESCRIPTIONS" title="(defun fty::collect-uncond-type-prescriptions
       (fty::wrld fty::ens fty::fns-seen)
  (declare (fty::xargs :guard (fty::plist-worldp fty::wrld)))
  (if (atom fty::wrld)
      nil
...">collect-uncond-type-prescriptions</a> (cdr wrld)
          ens
          (hons-acons sym <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> fns-seen))))))</pre>
  </div>

<div class="form-block function" id="def-deftypes-events" data-defines="DEFTYPES-EVENTS" data-references="ADD-FLEXTYPE,REMOVE-DEFAULT-POST-DEFINE-HOOK,STABLE-UNDER-SIMPLIFICATIONP,AND,SET-DEFAULT-HINTS,DEFTYPES-THEORY,ENABLE*,DISABLE,SET-DIFFERENCE-THEORIES,DEFTYPES-TEMP-THMS,DEFTYPES-BEFORE-TEMP-THMS,DEFLABEL,IDENTITY,ENABLE,IN-THEORY,DEFTYPES-TYPE-THEORY,MAKE-EVENT,SET-IRRELEVANT-FORMALS-OK,SET-IGNORE-OK,T,SET-BOGUS-DEFUN-HINTS-OK,SET-INHIBIT-WARNINGS,CURRENT-THEORY,DEFTYPES-ORIG-THEORY,DEFTHEORY,SET-DEFFIXEQUIV-MUTUAL-DEFAULT-HINTS,SET-DEFFIXEQUIV-DEFAULT-HINTS,SET-RETURNSPEC-DEFAULT-HINTS,SET-RETURNSPEC-MREC-DEFAULT-HINTS,POST-DEFXDOC-EVENT,QUOTE,XDOC,TABLE,LOCAL,PROGN,ENCAPSULATE,WITH-OUTPUT,QUASIQUOTE,X.KWD-ALIST,GETARG,VERBOSEP,W,COLLECT-FIX/PRED-ENABLE-RULES,TEMP-THMS,ENABLE-RULES,MV,FLEXTYPES-COLLECT-FIX/PRED-PAIRS,FIX/PRED-PAIRS,X.TYPES,FLEXTYPELIST-CHECK-BAD-NAME,-,FLEXTYPES,B*,STATE,X,DEFUN" data-used-by="DEFOMAP-FN,DEFSET-FN,DEFPROD-FN,DEFTRANSSUM-FN,DEFOPTION-FN,DEFTAGSUM-FN,DEFMAP-FN,DEFALIST-FN,DEFLIST-FN,DEFFLEXSUM-FN,DEFTYPES-FN" data-part-name="DEFTYPES-EVENTS" data-part-args="STATE,X" data-part-body="ADD-FLEXTYPE,REMOVE-DEFAULT-POST-DEFINE-HOOK,STABLE-UNDER-SIMPLIFICATIONP,AND,SET-DEFAULT-HINTS,DEFTYPES-THEORY,ENABLE*,DISABLE,SET-DIFFERENCE-THEORIES,DEFTYPES-TEMP-THMS,DEFTYPES-BEFORE-TEMP-THMS,DEFLABEL,IDENTITY,ENABLE,IN-THEORY,DEFTYPES-TYPE-THEORY,MAKE-EVENT,SET-IRRELEVANT-FORMALS-OK,SET-IGNORE-OK,T,SET-BOGUS-DEFUN-HINTS-OK,SET-INHIBIT-WARNINGS,CURRENT-THEORY,DEFTYPES-ORIG-THEORY,DEFTHEORY,SET-DEFFIXEQUIV-MUTUAL-DEFAULT-HINTS,SET-DEFFIXEQUIV-DEFAULT-HINTS,SET-RETURNSPEC-DEFAULT-HINTS,SET-RETURNSPEC-MREC-DEFAULT-HINTS,POST-DEFXDOC-EVENT,QUOTE,XDOC,TABLE,LOCAL,PROGN,ENCAPSULATE,WITH-OUTPUT,QUASIQUOTE,X.KWD-ALIST,GETARG,VERBOSEP,STATE,W,COLLECT-FIX/PRED-ENABLE-RULES,TEMP-THMS,ENABLE-RULES,MV,FLEXTYPES-COLLECT-FIX/PRED-PAIRS,FIX/PRED-PAIRS,X.TYPES,FLEXTYPELIST-CHECK-BAD-NAME,-,X,FLEXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTYPES-EVENTS">deftypes-events</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a>
  (x state)
  (b* (((flextypes x) x) (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link local-def" href="#def-flextypelist-check-bad-name" data-sym="FLEXTYPELIST-CHECK-BAD-NAME" title="(defun fty::flextypelist-check-bad-name (fty::types)
  (if (atom fty::types)
      nil
      (fty::prog2$
       (fty::b* ((fty::main-lisp-pkg *main-lisp-package-name*))
...">flextypelist-check-bad-name</a> x.types))
      (fix/pred-pairs (<a class="sym-link local-def" href="#def-flextypes-collect-fix_2Fpred-pairs" data-sym="FLEXTYPES-COLLECT-FIX/PRED-PAIRS" title="(defun fty::flextypes-collect-fix/pred-pairs (fty::types)
  (fty::remove-duplicates-equal
   (fty::flextypes-collect-fix/pred-pairs-aux fty::types)))">flextypes-collect-fix/pred-pairs</a> x.types))
      ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> enable-rules temp-thms) (<a class="sym-link local-def" href="#def-collect-fix_2Fpred-enable-rules" data-sym="COLLECT-FIX/PRED-ENABLE-RULES" title="(defun fty::collect-fix/pred-enable-rules (fty::pairs fty::world)
  (if (atom fty::pairs)
      (fty::mv nil nil)
      (fty::b*
       (((cons fty::fix fty::pred) (car fty::pairs))
...">collect-fix/pred-enable-rules</a> fix/pred-pairs
          (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state)))
      (verbosep (getarg <span class="keyword">:verbosep</span> nil x.kwd-alist)))
    `(<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT FTY::VERBOSEP)
       `(:OFF (FTY::PROVE FTY::EVENT FTY::OBSERVATION) :SUMMARY-OFF
         (:OTHER-THAN FORM TIME)))
      (<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
        (<a class="sym-link system" href="../../../axioms.html#def-with-output" data-sym="WITH-OUTPUT">with-output</a> ,@(AND (NOT FTY::VERBOSEP) `(:SUMMARY-OFF (:OTHER-THAN FORM TIME)))
          (<a class="sym-link system" href="../../../axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> xdoc 'post-defxdoc-event nil))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (set-returnspec-mrec-default-hints nil))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (set-returnspec-default-hints nil))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (set-deffixequiv-default-hints nil))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (set-deffixequiv-mutual-default-hints nil))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> deftypes-orig-theory
                (current-theory <span class="keyword">:here</span>)))
            ,@(FTY::FLEXTYPE-COLLECT-EVENTS :PREPWORK FTY::X.KWD-ALIST FTY::X.TYPES)
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-set-inhibit-warnings" data-sym="SET-INHIBIT-WARNINGS">set-inhibit-warnings</a> <span class="string">"disable"</span>
                <span class="string">"subsume"</span>
                <span class="string">"non-rec"</span>
                <span class="string">"double-rewrite"</span>))
            (<a class="sym-link system" href="../../../axioms.html#def-set-bogus-defun-hints-ok" data-sym="SET-BOGUS-DEFUN-HINTS-OK">set-bogus-defun-hints-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="../../../axioms.html#def-set-ignore-ok" data-sym="SET-IGNORE-OK">set-ignore-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="../../../axioms.html#def-set-irrelevant-formals-ok" data-sym="SET-IRRELEVANT-FORMALS-OK">set-irrelevant-formals-ok</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> `(<a class="sym-link system" href="../../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> deftypes-type-theory
                  ',(FTY::COLLECT-UNCOND-TYPE-PRESCRIPTIONS (FTY::W FTY::STATE) (ENS FTY::STATE)
  NIL))))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable <a class="sym-link system" href="../../../axioms.html#def-identity" data-sym="IDENTITY">identity</a>)))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a> deftypes-before-temp-thms))
            (<a class="sym-link system" href="../../../axioms.html#def-progn" data-sym="PROGN">progn</a> . ,FTY::TEMP-THMS)
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a> deftypes-temp-thms
                (set-difference-theories (current-theory <span class="keyword">:here</span>)
                  (current-theory 'deftypes-before-temp-thms))))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable deftypes-orig-theory)))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable deftypes-type-theory)))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable* deftypes-theory
                  ,@(FTY::FLEXTYPES-COLLECT-ENABLE-RULES FTY::X) . ,FTY::ENABLE-RULES)))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-set-default-hints" data-sym="SET-DEFAULT-HINTS">set-default-hints</a> '((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
                   '(<span class="keyword">:in-theory</span> (enable deftypes-orig-theory))))))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (remove-default-post-define-hook <span class="keyword">:fix</span>))
            ,@(FTY::FLEXTYPES-PREDICATE-DEF FTY::X)
            ,@(FTY::FLEXTYPE-COLLECT-EVENTS :POST-PRED-EVENTS FTY::X.KWD-ALIST FTY::X.TYPES)
            ,@(FTY::FLEXTYPE-DEF-SUM-KINDS FTY::X.TYPES)
            ,@(FTY::FLEXTYPES-FIX-DEF FTY::X)
            ,@(FTY::FLEXTYPE-COLLECT-EVENTS :POST-FIX-EVENTS FTY::X.KWD-ALIST FTY::X.TYPES)
            ,@(FTY::FLEXTYPES-SUM-ACCESSOR/CONSTRUCTORS FTY::X.TYPES FTY::X.TYPES)
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable . ,(FTY::FLEXTYPES-FNS FTY::X.TYPES))))
            ,@(FTY::FLEXTYPE-COLLECT-EVENTS :POST-ACC-EVENTS FTY::X.KWD-ALIST FTY::X.TYPES)
            ,@(FTY::FLEXTYPES-COUNT FTY::X)
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable deftypes-orig-theory)))
            (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-set-default-hints" data-sym="SET-DEFAULT-HINTS">set-default-hints</a> nil))
            ,@(FTY::FLEXTYPE-COLLECT-EVENTS :POST-EVENTS FTY::X.KWD-ALIST FTY::X.TYPES)
            ,@(FTY::FLEXTYPE-COLLECT-EVENTS :///-EVENTS FTY::X.KWD-ALIST FTY::X.TYPES)
            (add-flextype ,FTY::X) . ,(FTY::FLEXTYPES-DEFXDOC FTY::X (FTY::W FTY::STATE))))))))</pre>
  </div>

<div class="form-block function" id="def-deftypes-fn" data-defines="DEFTYPES-FN" data-references="DEFTYPES-EVENTS,PARSE-FLEXTYPES,X,B*,STATE,ARGS,DEFUN" data-used-by="DEFTYPES" data-part-name="DEFTYPES-FN" data-part-args="STATE,ARGS" data-part-body="DEFTYPES-EVENTS,STATE,ARGS,PARSE-FLEXTYPES,X,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTYPES-FN">deftypes-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-deftypes-fn" data-sym="DEFTYPES-FN" title="(defun fty::deftypes-fn (fty::args fty::state)
  (fty::b* ((fty::x (fty::parse-flextypes fty::args fty::state)))
   (fty::deftypes-events fty::x fty::state)))">deftypes-fn</a>
  (<a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a> state)
  (b* ((x (<a class="sym-link local-def" href="#def-parse-flextypes" data-sym="PARSE-FLEXTYPES" title="(defun fty::parse-flextypes (fty::x fty::state)
  (fty::b*
   (((cons fty::name fty::x) fty::x)
    ((unless (symbolp fty::name))
     (fty::er fty::hard? &#39;fty::parse-flextypes
...">parse-flextypes</a> <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a> state)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> x state)))</pre>
  </div>

<div class="form-block macro" id="def-deftypes" data-defines="DEFTYPES" data-references="STATE,QUOTE,DEFTYPES-FN,MAKE-EVENT,QUASIQUOTE,ARGS,&REST,DEFMACRO" data-used-by="FIND-UNSIGNED-BYTE-P-PRED-OF-FIX-THM-AUX,FIND-PRED-OF-FIX-THM-AUX,FIND-FIX-WHEN-UNSIGNED-BYTE-P-PRED-THM-AUX,FIND-FIX-WHEN-PRED-THM-AUX" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTYPES">deftypes</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-deftypes" data-sym="DEFTYPES" title="(defmacro fty::deftypes (&amp;rest fty::args)
  `(fty::make-event (fty::deftypes-fn &#39;,fty::args fty::state)))">deftypes</a>
  (&amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-deftypes-fn" data-sym="DEFTYPES-FN" title="(defun fty::deftypes-fn (fty::args fty::state)
  (fty::b* ((fty::x (fty::parse-flextypes fty::args fty::state)))
   (fty::deftypes-events fty::x fty::state)))">deftypes-fn</a> ',FTY::ARGS state)))</pre>
  </div>

<div class="form-block function" id="def-flextypes-kwd-alist-from-specialized-kwd-alist" data-defines="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" data-references="T,QUOTE,GETARG,IF,KWD-ALIST,DEFUN" data-used-by="DEFOMAP-FN,DEFSET-FN,DEFPROD-FN,DEFTRANSSUM-FN,DEFOPTION-FN,DEFTAGSUM-FN,DEFMAP-FN,DEFALIST-FN,DEFLIST-FN,DEFFLEXSUM-FN" data-part-name="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" data-part-args="KWD-ALIST" data-part-body="T,QUOTE,KWD-ALIST,GETARG,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST">flextypes-kwd-alist-from-specialized-kwd-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a>
  (kwd-alist)
  (if (getarg <span class="keyword">:verbosep</span> nil kwd-alist)
    '((<span class="keyword">:verbosep</span> . <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    nil))</pre>
  </div>

<div class="form-block function" id="def-defflexsum-fn" data-defines="DEFFLEXSUM-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSUM,CHANGE-FLEXSUM,MEMBER,FLEXSUM->RECP,OR,IF,CDR,PARSE-FLEXSUM,X,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*,STATE,WHOLE,DEFUN" data-used-by="DEFFLEXSUM" data-part-name="DEFFLEXSUM-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSUM,CHANGE-FLEXSUM,MEMBER,FLEXSUM->RECP,OR,IF,CDR,PARSE-FLEXSUM,X,STATE,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFFLEXSUM-FN">defflexsum-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defflexsum-fn" data-sym="DEFFLEXSUM-FN" title="(defun fty::defflexsum-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defflexsum-fn</a>
  (whole state)
  (b* ((our-fixtypes (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (flextype-form-&gt;fixtype whole))) (fixtype-al (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> our-fixtypes
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-flexsum (cdr whole)
          nil
          our-fixtypes
          fixtype-al
          state))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (flexsum-&gt;recp x)
            (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole)))
          x
          (change-flexsum x <span class="keyword">:count</span> nil)))
      ((flexsum x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-defflexsum" data-defines="DEFFLEXSUM" data-references="STATE,QUOTE,DEFFLEXSUM-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFFLEXSUM">defflexsum</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defflexsum" data-sym="DEFFLEXSUM" title="(defmacro fty::defflexsum (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defflexsum-fn &#39;,fty::form fty::state)))">defflexsum</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defflexsum-fn" data-sym="DEFFLEXSUM-FN" title="(defun fty::defflexsum-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defflexsum-fn</a> ',FTY::FORM state)))</pre>
  </div>

<div class="form-block function" id="def-deflist-fn" data-defines="DEFLIST-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXLIST,CHANGE-FLEXLIST,MEMBER,FLEXLIST->RECP,OR,IF,CDR,PARSE-FLEXLIST,X,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*,STATE,WHOLE,DEFUN" data-used-by="DEFLIST" data-part-name="DEFLIST-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXLIST,CHANGE-FLEXLIST,MEMBER,FLEXLIST->RECP,OR,IF,CDR,PARSE-FLEXLIST,X,STATE,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFLIST-FN">deflist-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-deflist-fn" data-sym="DEFLIST-FN" title="(defun fty::deflist-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">deflist-fn</a>
  (whole state)
  (b* ((our-fixtypes (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (flextype-form-&gt;fixtype whole))) (fixtype-al (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> our-fixtypes
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-flexlist (cdr whole)
          nil
          our-fixtypes
          fixtype-al
          state))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (flexlist-&gt;recp x)
            (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole)))
          x
          (change-flexlist x <span class="keyword">:count</span> nil)))
      ((flexlist x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-deflist" data-defines="DEFLIST" data-references="STATE,QUOTE,DEFLIST-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFLIST">deflist</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-deflist" data-sym="DEFLIST" title="(defmacro fty::deflist (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::deflist-fn &#39;,fty::form fty::state)))">deflist</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-deflist-fn" data-sym="DEFLIST-FN" title="(defun fty::deflist-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">deflist-fn</a> ',FTY::FORM state)))</pre>
  </div>

<div class="form-block function" id="def-defalist-fn" data-defines="DEFALIST-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXALIST,CHANGE-FLEXALIST,MEMBER,FLEXALIST->RECP,OR,IF,CDR,PARSE-FLEXALIST,X,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*,STATE,WHOLE,DEFUN" data-used-by="DEFALIST" data-part-name="DEFALIST-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXALIST,CHANGE-FLEXALIST,MEMBER,FLEXALIST->RECP,OR,IF,CDR,PARSE-FLEXALIST,X,STATE,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFALIST-FN">defalist-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defalist-fn" data-sym="DEFALIST-FN" title="(defun fty::defalist-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defalist-fn</a>
  (whole state)
  (b* ((our-fixtypes (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (flextype-form-&gt;fixtype whole))) (fixtype-al (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> our-fixtypes
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-flexalist (cdr whole)
          nil
          our-fixtypes
          fixtype-al
          state))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (flexalist-&gt;recp x)
            (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole)))
          x
          (change-flexalist x <span class="keyword">:count</span> nil)))
      ((flexalist x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-defalist" data-defines="DEFALIST" data-references="STATE,QUOTE,DEFALIST-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFALIST">defalist</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defalist" data-sym="DEFALIST" title="(defmacro fty::defalist (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defalist-fn &#39;,fty::form fty::state)))">defalist</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defalist-fn" data-sym="DEFALIST-FN" title="(defun fty::defalist-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defalist-fn</a> ',FTY::FORM state)))</pre>
  </div>

<div class="form-block function" id="def-defmap-fn" data-defines="DEFMAP-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXALIST,MEMBER,FLEXALIST->RECP,OR,IF,CHANGE-FLEXALIST,CDR,PARSE-FLEXALIST,X,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*,STATE,WHOLE,DEFUN" data-used-by="DEFMAP" data-part-name="DEFMAP-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXALIST,MEMBER,FLEXALIST->RECP,OR,IF,CHANGE-FLEXALIST,CDR,PARSE-FLEXALIST,X,STATE,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFMAP-FN">defmap-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defmap-fn" data-sym="DEFMAP-FN" title="(defun fty::defmap-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defmap-fn</a>
  (whole state)
  (b* ((our-fixtypes (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (flextype-form-&gt;fixtype whole))) (fixtype-al (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> our-fixtypes
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-flexalist (cdr whole)
          nil
          our-fixtypes
          fixtype-al
          state))
      (x (change-flexalist x <span class="keyword">:strategy</span> <span class="keyword">:drop-keys</span>))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (flexalist-&gt;recp x)
            (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole)))
          x
          (change-flexalist x <span class="keyword">:count</span> nil)))
      ((flexalist x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-defmap" data-defines="DEFMAP" data-references="STATE,QUOTE,DEFMAP-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFMAP">defmap</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defmap" data-sym="DEFMAP" title="(defmacro fty::defmap (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defmap-fn &#39;,fty::form fty::state)))">defmap</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defmap-fn" data-sym="DEFMAP-FN" title="(defun fty::defmap-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defmap-fn</a> ',FTY::FORM state)))</pre>
  </div>

<div class="form-block function" id="def-deftagsum-fn" data-defines="DEFTAGSUM-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSUM,CHANGE-FLEXSUM,MEMBER,FLEXSUM->RECP,OR,IF,LIST,CDR,PARSE-TAGSUM,X,W,GET-FIXTYPES-ALIST,CONS,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,FIXTYPE,B*,STATE,WHOLE,DEFUN" data-used-by="DEFTAGSUM" data-part-name="DEFTAGSUM-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSUM,CHANGE-FLEXSUM,MEMBER,FLEXSUM->RECP,OR,IF,LIST,CDR,PARSE-TAGSUM,X,STATE,W,GET-FIXTYPES-ALIST,CONS,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,FIXTYPE,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTAGSUM-FN">deftagsum-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-deftagsum-fn" data-sym="DEFTAGSUM-FN" title="(defun fty::deftagsum-fn (fty::whole fty::state)
  (fty::b*
   ((fty::fixtype (fty::flextype-form-&gt;fixtype fty::whole))
    (fty::fixtype-al
     (cons fty::fixtype (fty::get-fixtypes-alist (fty::w fty::state))))
...">deftagsum-fn</a>
  (whole state)
  (b* ((fixtype (flextype-form-&gt;fixtype whole)) (fixtype-al (cons fixtype
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-tagsum (cdr whole)
          nil
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> fixtype)
          fixtype-al
          state))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (flexsum-&gt;recp x)
            (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole)))
          x
          (change-flexsum x <span class="keyword">:count</span> nil)))
      ((flexsum x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-deftagsum" data-defines="DEFTAGSUM" data-references="STATE,QUOTE,DEFTAGSUM-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTAGSUM">deftagsum</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-deftagsum" data-sym="DEFTAGSUM" title="(defmacro fty::deftagsum (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::deftagsum-fn &#39;,fty::form fty::state)))">deftagsum</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-deftagsum-fn" data-sym="DEFTAGSUM-FN" title="(defun fty::deftagsum-fn (fty::whole fty::state)
  (fty::b*
   ((fty::fixtype (fty::flextype-form-&gt;fixtype fty::whole))
    (fty::fixtype-al
     (cons fty::fixtype (fty::get-fixtypes-alist (fty::w fty::state))))
...">deftagsum-fn</a> ',FTY::FORM state)))</pre>
  </div>

<div class="form-block function" id="def-defoption-fn" data-defines="DEFOPTION-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSUM,CHANGE-FLEXSUM,MEMBER,FLEXSUM->RECP,OR,IF,LIST,CDR,PARSE-OPTION,X,W,GET-FIXTYPES-ALIST,CONS,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,FIXTYPE,B*,STATE,WHOLE,DEFUN" data-used-by="DEFOPTION" data-part-name="DEFOPTION-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSUM,CHANGE-FLEXSUM,MEMBER,FLEXSUM->RECP,OR,IF,LIST,CDR,PARSE-OPTION,X,STATE,W,GET-FIXTYPES-ALIST,CONS,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,FIXTYPE,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFOPTION-FN">defoption-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defoption-fn" data-sym="DEFOPTION-FN" title="(defun fty::defoption-fn (fty::whole fty::state)
  (fty::b*
   ((fty::fixtype (fty::flextype-form-&gt;fixtype fty::whole))
    (fty::fixtype-al
     (cons fty::fixtype (fty::get-fixtypes-alist (fty::w fty::state))))
...">defoption-fn</a>
  (whole state)
  (b* ((fixtype (flextype-form-&gt;fixtype whole)) (fixtype-al (cons fixtype
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-option (cdr whole)
          nil
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> fixtype)
          fixtype-al
          state))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (flexsum-&gt;recp x)
            (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole)))
          x
          (change-flexsum x <span class="keyword">:count</span> nil)))
      ((flexsum x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-defoption" data-defines="DEFOPTION" data-references="STATE,QUOTE,DEFOPTION-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFOPTION">defoption</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defoption" data-sym="DEFOPTION" title="(defmacro fty::defoption (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defoption-fn &#39;,fty::form fty::state)))">defoption</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defoption-fn" data-sym="DEFOPTION-FN" title="(defun fty::defoption-fn (fty::whole fty::state)
  (fty::b*
   ((fty::fixtype (fty::flextype-form-&gt;fixtype fty::whole))
    (fty::fixtype-al
     (cons fty::fixtype (fty::get-fixtypes-alist (fty::w fty::state))))
...">defoption-fn</a> ',FTY::FORM state)))</pre>
  </div>

<div class="form-block function" id="def-deftranssum-fn" data-defines="DEFTRANSSUM-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXTRANSSUM,CHANGE-FLEXTRANSSUM,MEMBER,FLEXTRANSSUM->RECP,OR,IF,LIST,CDR,PARSE-TRANSSUM,X,W,GET-FIXTYPES-ALIST,CONS,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,FIXTYPE,B*,STATE,WHOLE,DEFUN" data-used-by="DEFTRANSSUM" data-part-name="DEFTRANSSUM-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXTRANSSUM,CHANGE-FLEXTRANSSUM,MEMBER,FLEXTRANSSUM->RECP,OR,IF,LIST,CDR,PARSE-TRANSSUM,X,STATE,W,GET-FIXTYPES-ALIST,CONS,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,FIXTYPE,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTRANSSUM-FN">deftranssum-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-deftranssum-fn" data-sym="DEFTRANSSUM-FN" title="(defun fty::deftranssum-fn (fty::whole fty::state)
  (fty::b*
   ((fty::fixtype (fty::flextype-form-&gt;fixtype fty::whole))
    (fty::fixtype-al
     (cons fty::fixtype (fty::get-fixtypes-alist (fty::w fty::state))))
...">deftranssum-fn</a>
  (whole state)
  (b* ((fixtype (flextype-form-&gt;fixtype whole)) (fixtype-al (cons fixtype
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-transsum (cdr whole)
          nil
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> fixtype)
          fixtype-al
          state))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (flextranssum-&gt;recp x)
            (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole)))
          x
          (change-flextranssum x <span class="keyword">:count</span> nil)))
      ((flextranssum x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-deftranssum" data-defines="DEFTRANSSUM" data-references="STATE,QUOTE,DEFTRANSSUM-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFTRANSSUM">deftranssum</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-deftranssum" data-sym="DEFTRANSSUM" title="(defmacro fty::deftranssum (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::deftranssum-fn &#39;,fty::form fty::state)))">deftranssum</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-deftranssum-fn" data-sym="DEFTRANSSUM-FN" title="(defun fty::deftranssum-fn (fty::whole fty::state)
  (fty::b*
   ((fty::fixtype (fty::flextype-form-&gt;fixtype fty::whole))
    (fty::fixtype-al
     (cons fty::fixtype (fty::get-fixtypes-alist (fty::w fty::state))))
...">deftranssum-fn</a> ',FTY::FORM state)))</pre>
  </div>

<div class="form-block function" id="def-defprod-fn" data-defines="DEFPROD-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.COUNT,NOT,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSUM,CHANGE-FLEXSUM,MEMBER,IF,LIST,CDR,PARSE-DEFPROD,X,W,GET-FIXTYPES-ALIST,CONS,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,FIXTYPE,B*,STATE,WHOLE,DEFUN" data-used-by="DEFPROD" data-part-name="DEFPROD-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.COUNT,NOT,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSUM,CHANGE-FLEXSUM,MEMBER,IF,LIST,CDR,PARSE-DEFPROD,X,STATE,W,GET-FIXTYPES-ALIST,CONS,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,FIXTYPE,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFPROD-FN">defprod-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defprod-fn" data-sym="DEFPROD-FN" title="(defun fty::defprod-fn (fty::whole fty::state)
  (fty::b*
   ((fty::fixtype (fty::flextype-form-&gt;fixtype fty::whole))
    (fty::fixtype-al
     (cons fty::fixtype (fty::get-fixtypes-alist (fty::w fty::state))))
...">defprod-fn</a>
  (whole state)
  (b* ((fixtype (flextype-form-&gt;fixtype whole)) (fixtype-al (cons fixtype
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-defprod (cdr whole)
          nil
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> fixtype)
          fixtype-al
          state))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole))
          x
          (change-flexsum x <span class="keyword">:count</span> nil)))
      ((flexsum x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-defprod" data-defines="DEFPROD" data-references="STATE,QUOTE,DEFPROD-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFPROD">defprod</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defprod" data-sym="DEFPROD" title="(defmacro fty::defprod (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defprod-fn &#39;,fty::form fty::state)))">defprod</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defprod-fn" data-sym="DEFPROD-FN" title="(defun fty::defprod-fn (fty::whole fty::state)
  (fty::b*
   ((fty::fixtype (fty::flextype-form-&gt;fixtype fty::whole))
    (fty::fixtype-al
     (cons fty::fixtype (fty::get-fixtypes-alist (fty::w fty::state))))
...">defprod-fn</a> ',FTY::FORM state)))</pre>
  </div>

<div class="form-block function" id="def-defset-fn" data-defines="DEFSET-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSET,CHANGE-FLEXSET,MEMBER,IF,CDR,PARSE-FLEXSET,X,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*,STATE,WHOLE,DEFUN" data-used-by="DEFSET" data-part-name="DEFSET-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXSET,CHANGE-FLEXSET,MEMBER,IF,CDR,PARSE-FLEXSET,X,STATE,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSET-FN">defset-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defset-fn" data-sym="DEFSET-FN" title="(defun fty::defset-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defset-fn</a>
  (whole state)
  (b* ((our-fixtypes (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (flextype-form-&gt;fixtype whole))) (fixtype-al (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> our-fixtypes
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-flexset (cdr whole)
          nil
          our-fixtypes
          fixtype-al
          state))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole))
          x
          (change-flexset x <span class="keyword">:count</span> nil)))
      ((flexset x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-defset" data-defines="DEFSET" data-references="STATE,QUOTE,DEFSET-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFSET">defset</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defset" data-sym="DEFSET" title="(defmacro fty::defset (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defset-fn &#39;,fty::form fty::state)))">defset</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defset-fn" data-sym="DEFSET-FN" title="(defun fty::defset-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defset-fn</a> ',FTY::FORM state)))</pre>
  </div>

<div class="form-block function" id="def-defomap-fn" data-defines="DEFOMAP-FN" data-references="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXOMAP,CHANGE-FLEXOMAP,MEMBER,IF,CDR,PARSE-FLEXOMAP,X,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*,STATE,WHOLE,DEFUN" data-used-by="DEFOMAP" data-part-name="DEFOMAP-FN" data-part-args="STATE,WHOLE" data-part-body="DEFTYPES-EVENTS,X.RECP,X.KWD-ALIST,FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST,X.COUNT,NOT,X.NAME,MAKE-FLEXTYPES,FLEXTYPES,FLEXOMAP,CHANGE-FLEXOMAP,MEMBER,IF,CDR,PARSE-FLEXOMAP,X,STATE,W,GET-FIXTYPES-ALIST,APPEND,FIXTYPE-AL,WHOLE,FLEXTYPE-FORM->FIXTYPE,LIST,OUR-FIXTYPES,B*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFOMAP-FN">defomap-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-defomap-fn" data-sym="DEFOMAP-FN" title="(defun fty::defomap-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defomap-fn</a>
  (whole state)
  (b* ((our-fixtypes (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (flextype-form-&gt;fixtype whole))) (fixtype-al (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> our-fixtypes
          (get-fixtypes-alist (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
      (x (parse-flexomap (cdr whole)
          nil
          our-fixtypes
          fixtype-al
          state))
      (x (if (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:count</span> (cdr whole))
          x
          (change-flexomap x <span class="keyword">:count</span> nil)))
      ((flexomap x) x)
      (flextypes (make-flextypes <span class="keyword">:name</span> x.name
          <span class="keyword">:types</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> x)
          <span class="keyword">:no-count</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> x.count)
          <span class="keyword">:kwd-alist</span> (<a class="sym-link local-def" href="#def-flextypes-kwd-alist-from-specialized-kwd-alist" data-sym="FLEXTYPES-KWD-ALIST-FROM-SPECIALIZED-KWD-ALIST" title="(defun fty::flextypes-kwd-alist-from-specialized-kwd-alist (fty::kwd-alist)
  (if (fty::getarg :verbosep nil fty::kwd-alist)
      &#39;((:verbosep . t))
      nil))">flextypes-kwd-alist-from-specialized-kwd-alist</a> x.kwd-alist)
          <span class="keyword">:recp</span> x.recp)))
    (<a class="sym-link local-def" href="#def-deftypes-events" data-sym="DEFTYPES-EVENTS" title="(defun fty::deftypes-events (fty::x fty::state)
  (fty::b*
   (((fty::flextypes fty::x) fty::x)
    (- (fty::flextypelist-check-bad-name fty::x.types))
    (fty::fix/pred-pairs (fty::flextypes-collect-fix/pred-pairs fty::x.types))
...">deftypes-events</a> flextypes state)))</pre>
  </div>

<div class="form-block macro" id="def-defomap" data-defines="DEFOMAP" data-references="STATE,QUOTE,DEFOMAP-FN,MAKE-EVENT,QUASIQUOTE,IGNORE,DECLARE,ARGS,&REST,FORM,&WHOLE,DEFMACRO" data-used-by="PARSE-FLEXTYPELIST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFOMAP">defomap</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-defomap" data-sym="DEFOMAP" title="(defmacro fty::defomap (&amp;whole fty::form &amp;rest fty::args)
  (declare (ignore fty::args))
  `(fty::make-event (fty::defomap-fn &#39;,fty::form fty::state)))">defomap</a>
  (&amp;whole form &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))
  `(<a class="sym-link system" href="../../../axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a> (<a class="sym-link local-def" href="#def-defomap-fn" data-sym="DEFOMAP-FN" title="(defun fty::defomap-fn (fty::whole fty::state)
  (fty::b*
   ((fty::our-fixtypes (list (fty::flextype-form-&gt;fixtype fty::whole)))
    (fty::fixtype-al
     (append fty::our-fixtypes (fty::get-fixtypes-alist (fty::w fty::state))))
...">defomap-fn</a> ',FTY::FORM state)))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>