<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>aignet-logic - ACL2 Book</title>
  <meta property="name" content="aignet-logic">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">aignet-logic</h1>
    <div class="path"><a href="aignet-logic.lisp" class="source-link">books/centaur/aignet/aignet-logic</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"AIGNET"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="litp.html" title="Open litp">"litp"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/util/defmvtypes.html" title="Open std/util/defmvtypes">"std/util/defmvtypes"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/util/defprojection.html" title="Open std/util/defprojection">"std/util/defprojection"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/fty/deftypes.html" title="Open centaur/fty/deftypes">"centaur/fty/deftypes"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/util/defval.html" title="Open std/util/defval">"std/util/defval"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/util/defenum.html" title="Open std/util/defenum">"std/util/defenum"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/equiv.html" title="Open std/lists/equiv">"std/lists/equiv"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../tools/defmacfun.html" title="Open tools/defmacfun">"tools/defmacfun"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../arithmetic/nat-listp.html" title="Open arithmetic/nat-listp">"arithmetic/nat-listp"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/basic/arith-equivs.html" title="Open std/basic/arith-equivs">"std/basic/arith-equivs"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../tools/flag.html" title="Open tools/flag">"tools/flag"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/basic/two-nats-measure.html" title="Open std/basic/two-nats-measure">"std/basic/two-nats-measure"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../clause-processors/unify-subst.html" title="Open clause-processors/unify-subst">"clause-processors/unify-subst"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/misc/prev-stobj-binding.html" title="Open centaur/misc/prev-stobj-binding">"centaur/misc/prev-stobj-binding"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/misc/universal-equiv.html" title="Open centaur/misc/universal-equiv">"centaur/misc/universal-equiv"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../arithmetic/top-with-meta.html" title="Open arithmetic/top-with-meta">"arithmetic/top-with-meta"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/bitops/ihsext-basics.html" title="Open centaur/bitops/ihsext-basics">"centaur/bitops/ihsext-basics"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../data-structures/list-defthms.html" title="Open data-structures/list-defthms">"data-structures/list-defthms"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable* arith-equiv-forwarding)))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>
      <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>
      <a class="sym-link system" href="../../../axioms.html#def-resize-list" data-sym="RESIZE-LIST">resize-list</a>
      <a class="sym-link system" href="../../../axioms.html#def-make-list-ac" data-sym="MAKE-LIST-AC">make-list-ac</a>
      nfix-when-not-natp
      resize-list-when-empty
      make-list-ac-redef
      <a class="sym-link system" href="../../../axioms.html#def-true-listp-update-nth" data-sym="TRUE-LISTP-UPDATE-NTH">true-listp-update-nth</a>
      nth-with-large-index)))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (add-default-post-define-hook <span class="keyword">:fix</span>))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection sequential-type
  <span class="keyword">:parents</span> (stypep)
  <span class="keyword">:short</span> <span class="string">"See @(see stypep)."</span>
  (defenum stypep
    (<span class="keyword">:pi</span> <span class="keyword">:reg</span> <span class="keyword">:po</span> <span class="keyword">:nxst</span> <span class="keyword">:and</span> <span class="keyword">:xor</span> <span class="keyword">:const</span>)
    <span class="keyword">:fix</span> stype-fix
    <span class="keyword">:equiv</span> stype-equiv
    <span class="keyword">:parents</span> (representation)
    <span class="keyword">:short</span> <span class="string">"Sequential type of a logical AIG @(see node)."</span>
    <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Recall that AIG nodes are represented as lists like @(&#39;(:pi)&#39;),
@(&#39;(:gate fanin0 fanin1)&#39;), etc.&lt;/p&gt;

&lt;p&gt;The &lt;b&gt;sequential type&lt;/b&gt; of such a type is just its leading keyword.  The
valid sequential types are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;@(&#39;:const&#39;) for the special constant node&lt;/li&gt;
  &lt;li&gt;@(&#39;:and&#39;) for an AND gate node&lt;/li&gt;
  &lt;li&gt;@(&#39;:xor&#39;) for an XOR gate node&lt;/li&gt;
  &lt;li&gt;@(&#39;:pi&#39;) or @(&#39;:po&#39;) for primary input/output nodes&lt;/li&gt;
  &lt;li&gt;@(&#39;:reg&#39;) for register nodes (register outputs)&lt;/li&gt;
  &lt;li&gt;@(&#39;:nxst&#39;) for next state nodes (register inputs)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;See also @(see combinational-type) for a combinational (instead of
sequential) view of AIG node types.&lt;/p&gt;"</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> pi-stype nil <span class="keyword">:pi</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> reg-stype nil <span class="keyword">:reg</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> po-stype nil <span class="keyword">:po</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> nxst-stype nil <span class="keyword">:nxst</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> and-stype nil <span class="keyword">:and</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> xor-stype nil <span class="keyword">:xor</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> const-stype nil <span class="keyword">:const</span>))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defflexsum node
  <span class="keyword">:parents</span> (representation)
  <span class="keyword">:short</span> <span class="string">"Type of an AIG node in an aignet object, logically."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;See also @(see network) for network-related functions.&lt;/p&gt;"</span>
  <span class="keyword">:kind</span> stype
  <span class="keyword">:kind-body</span> (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    <span class="keyword">:const</span> (stype-fix (car x)))
  (<span class="keyword">:const</span> <span class="keyword">:cond</span> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (stypep (car x)))
      (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) <span class="keyword">:const</span>))
    <span class="keyword">:short</span> <span class="string">"A constant-0 node."</span>
    <span class="keyword">:shape</span> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> x nil)
    <span class="keyword">:ctor-body</span> nil
    <span class="keyword">:type-name</span> const-node
    <span class="keyword">:no-ctor-macros</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  (<span class="keyword">:pi</span> <span class="keyword">:cond</span> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) <span class="keyword">:pi</span>)
    <span class="keyword">:short</span> <span class="string">"A primary input node."</span>
    <span class="keyword">:type-name</span> pi-node
    <span class="keyword">:shape</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (cdr x))
    <span class="keyword">:ctor-body</span> '(<span class="keyword">:pi</span>)
    <span class="keyword">:no-ctor-macros</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  (<span class="keyword">:reg</span> <span class="keyword">:cond</span> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) <span class="keyword">:reg</span>)
    <span class="keyword">:short</span> <span class="string">"A register node."</span>
    <span class="keyword">:type-name</span> reg-node
    <span class="keyword">:shape</span> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (cdr x))
    <span class="keyword">:ctor-body</span> '(<span class="keyword">:reg</span>)
    <span class="keyword">:no-ctor-macros</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  (<span class="keyword">:and</span> <span class="keyword">:cond</span> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) <span class="keyword">:and</span>)
    <span class="keyword">:short</span> <span class="string">"An AND gate node."</span>
    <span class="keyword">:type-name</span> and-node
    <span class="keyword">:shape</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)
      (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) <span class="number">3</span>))
    <span class="keyword">:fields</span> ((fanin0 <span class="keyword">:type</span> litp
       <span class="keyword">:acc-body</span> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x)
       <span class="keyword">:doc</span> <span class="string">"First fanin @(see literal) of the AND gate"</span>
       <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>) (fanin1 <span class="keyword">:type</span> litp
        <span class="keyword">:acc-body</span> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> x)
        <span class="keyword">:doc</span> <span class="string">"Second fanin @(see literal) of the AND gate"</span>
        <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>))
    <span class="keyword">:ctor-body</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:and</span> fanin0 fanin1)
    <span class="keyword">:no-ctor-macros</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  (<span class="keyword">:xor</span> <span class="keyword">:cond</span> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) <span class="keyword">:xor</span>)
    <span class="keyword">:short</span> <span class="string">"An AND gate node."</span>
    <span class="keyword">:type-name</span> xor-node
    <span class="keyword">:shape</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)
      (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) <span class="number">3</span>))
    <span class="keyword">:fields</span> ((fanin0 <span class="keyword">:type</span> litp
       <span class="keyword">:acc-body</span> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x)
       <span class="keyword">:doc</span> <span class="string">"First fanin @(see literal) of the AND gate"</span>
       <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>) (fanin1 <span class="keyword">:type</span> litp
        <span class="keyword">:acc-body</span> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> x)
        <span class="keyword">:doc</span> <span class="string">"Second fanin @(see literal) of the AND gate"</span>
        <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>))
    <span class="keyword">:ctor-body</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:xor</span> fanin0 fanin1)
    <span class="keyword">:no-ctor-macros</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  (<span class="keyword">:po</span> <span class="keyword">:cond</span> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) <span class="keyword">:po</span>)
    <span class="keyword">:short</span> <span class="string">"A primary output node."</span>
    <span class="keyword">:type-name</span> po-node
    <span class="keyword">:shape</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)
      (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) <span class="number">2</span>))
    <span class="keyword">:fields</span> ((fanin <span class="keyword">:type</span> litp
       <span class="keyword">:acc-body</span> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x)
       <span class="keyword">:doc</span> <span class="string">"Literal giving the logical function of the output."</span>
       <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>))
    <span class="keyword">:ctor-body</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:po</span> fanin)
    <span class="keyword">:no-ctor-macros</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  (<span class="keyword">:nxst</span> <span class="keyword">:cond</span> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car x) <span class="keyword">:nxst</span>)
    <span class="keyword">:short</span> <span class="string">"A next-state node for a register."</span>
    <span class="keyword">:type-name</span> nxst-node
    <span class="keyword">:shape</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)
      (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) <span class="number">3</span>))
    <span class="keyword">:fields</span> ((fanin <span class="keyword">:type</span> litp
       <span class="keyword">:acc-body</span> (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> x)
       <span class="keyword">:doc</span> <span class="string">"Literal giving the logical function of the next state."</span>
       <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>) (reg <span class="keyword">:type</span> <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>
        <span class="keyword">:acc-body</span> (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> x)
        <span class="keyword">:doc</span> <span class="string">"Index (register number, not ID) of the register for which this is the next state."</span>
        <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>))
    <span class="keyword">:ctor-body</span> (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:nxst</span> fanin reg)
    <span class="keyword">:no-ctor-macros</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection stype
  <span class="keyword">:extension</span> stype
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stypep-of-stype
    (stypep (stype x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable stypep))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-not-const-implies-nonempty
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype (car x))
          (const-stype)))
      (consp x))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((stype (car x)))))))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define regp
  ((x stypep))
  <span class="keyword">:returns</span> (regp <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a>)
  <span class="keyword">:parents</span> (sequential-type)
  <span class="keyword">:short</span> <span class="string">"Correlates the @(see sequential-type) of a node with the @(&#39;regp&#39;)/@(&#39;xorp&#39;) of its bit encoding.
This bit is set for @(&#39;:reg&#39;), @(&#39;:nxst&#39;), and @(&#39;xor&#39;) nodes, so this returns 1 for those types and 0 for others."</span>
  (if (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> (stype-fix x) '(<span class="keyword">:reg</span> <span class="keyword">:nxst</span> <span class="keyword">:xor</span>))
    <span class="number">1</span>
    <span class="number">0</span>)
  ///
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> stype-equiv
    equal
    (regp x)
    <span class="number">1</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> regp-not-zero-implies-nonempty
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (regp (stype (car x))) <span class="number">0</span>))
      (consp x))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((regp (stype (car x))))))))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection combinational-type
  <span class="keyword">:parents</span> (representation)
  <span class="keyword">:short</span> <span class="string">"Combinational type of a logical AIG @(see node)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Recall that a sequential AIG can be viewed as a combinational AIG
  by ignoring the distinction between register and primary inputs/outputs.&lt;/p&gt;

  &lt;p&gt;We can implement the combinational view of AIG nodes by mapping the @(see
  sequential-type) of a node to a combinational type.  The valid combinational
  type keywords are:&lt;/p&gt;

  &lt;ul&gt;
  &lt;li&gt;@(&#39;:const&#39;) for the special constant node&lt;/li&gt;
  &lt;li&gt;@(&#39;:gate&#39;) for an AND or XOR gate node&lt;/li&gt;
  &lt;li&gt;@(&#39;:input&#39;) for a combinational input (primary input or register &lt;b&gt;output&lt;/b&gt;)&lt;/li&gt;
  &lt;li&gt;@(&#39;:output&#39;) for a combinational output (primary input or register &lt;b&gt;input&lt;/b&gt;)&lt;/li&gt;
  &lt;/ul&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> const-ctype nil <span class="keyword">:const</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> gate-ctype nil <span class="keyword">:gate</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> in-ctype nil <span class="keyword">:input</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> out-ctype nil <span class="keyword">:output</span>))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define ctypep
  (x)
  <span class="keyword">:parents</span> (combinational-type)
  <span class="keyword">:short</span> <span class="string">"Recognizer for valid @(see combinational-type) keywords."</span>
  <span class="keyword">:returns</span> bool
  (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> x
    (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (in-ctype)
      (out-ctype)
      (gate-ctype)
      (const-ctype))))</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define ctype-fix
  (x)
  <span class="keyword">:returns</span> (ctype ctypep)
  <span class="keyword">:parents</span> (combinational-type)
  <span class="keyword">:short</span> <span class="string">"Fixing function for @(see combinational-type) keywords."</span>
  (if (ctypep x)
    x
    (const-ctype))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-fix-when-ctypep
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (ctypep x)
      (equal (ctype-fix x) x))))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define ctype-equiv
  (x y)
  <span class="keyword">:parents</span> (combinational-type)
  <span class="keyword">:short</span> <span class="string">"Equivalence relation for @(see combinational-type) keywords."</span>
  <span class="keyword">:returns</span> bool
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (equal (ctype-fix x)
    (ctype-fix y))
  ///
  (<a class="sym-link system" href="../../../defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> ctype-equiv)
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> ctype-equiv
    equal
    (ctype-fix x)
    <span class="number">1</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-fix-under-ctype-equiv
    (ctype-equiv (ctype-fix x)
      x)))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defval *stype-ctype-map*
  <span class="keyword">:parents</span> (ctype)
  <span class="keyword">:showdef</span> nil
  <span class="keyword">:showval</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  `((,(AIGNET::CONST-STYPE) . ,(AIGNET::CONST-CTYPE)) (,(AIGNET::AND-STYPE) . ,(AIGNET::GATE-CTYPE))
    (,(AIGNET::XOR-STYPE) . ,(AIGNET::GATE-CTYPE))
    (,(AIGNET::NXST-STYPE) . ,(AIGNET::OUT-CTYPE))
    (,(AIGNET::REG-STYPE) . ,(AIGNET::IN-CTYPE))
    (,(AIGNET::PO-STYPE) . ,(AIGNET::OUT-CTYPE))
    (,(AIGNET::PI-STYPE) . ,(AIGNET::IN-CTYPE))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define ctype
  ((x stypep))
  <span class="keyword">:returns</span> (type ctypep)
  <span class="keyword">:parents</span> (combinational-type)
  <span class="keyword">:short</span> <span class="string">"Map a @(see sequential-type) keyword to its @(see combinational-type) keywords."</span>
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable stype-fix stypep))))
  (let ((x (stype-fix x)))
    (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> x *stype-ctype-map*)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-possibilities
    (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (equal (ctype x) (const-ctype))
      (equal (ctype x) (gate-ctype))
      (equal (ctype x) (in-ctype))
      (equal (ctype x) (out-ctype)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((ctype x))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable ctype ctypep))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> stype-equiv
    equal
    (ctype x)
    <span class="number">1</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-not-const-implies-nonempty
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype (stype (car x)))
          (const-ctype)))
      (consp x))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((ctype (stype (car x)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-by-ctype
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (equal (ctype (stype x))
          (const-ctype))
        (equal (stype x) (const-stype)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (regp (stype x)) <span class="number">1</span>)
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (equal (ctype (stype x))
              (in-ctype))
            (equal (stype x) (reg-stype)))
          (equal (equal (ctype (stype x))
              (out-ctype))
            (equal (stype x) (nxst-stype)))
          (equal (equal (ctype (stype x))
              (gate-ctype))
            (equal (stype x) (xor-stype)))))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (regp (stype x)) <span class="number">1</span>))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (equal (ctype (stype x))
              (in-ctype))
            (equal (stype x) (pi-stype)))
          (equal (equal (ctype (stype x))
              (out-ctype))
            (equal (stype x) (po-stype)))
          (equal (equal (ctype (stype x))
              (gate-ctype))
            (equal (stype x) (and-stype))))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable stype ctype regp))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-gate-fwd
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (ctype (stype x))
        (gate-ctype))
      (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (equal (stype x) (and-stype))
        (equal (stype x) (xor-stype))))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((equal (ctype (stype x))
          (gate-ctype)) (equal (gate-ctype)
           (ctype (stype x)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-not-gate-fwd
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype (stype x))
          (gate-ctype)))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype x) (and-stype)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype x) (xor-stype)))))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((equal (ctype (stype x))
          (gate-ctype)) (equal (gate-ctype)
           (ctype (stype x)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-in-fwd
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (ctype (stype x))
        (in-ctype))
      (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (equal (stype x) (pi-stype))
        (equal (stype x) (reg-stype))))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((equal (ctype (stype x))
          (in-ctype)) (equal (in-ctype)
           (ctype (stype x)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-not-in-fwd
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype (stype x))
          (in-ctype)))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype x) (pi-stype)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype x) (reg-stype)))))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((equal (ctype (stype x))
          (in-ctype)) (equal (in-ctype)
           (ctype (stype x)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-out-fwd
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (ctype (stype x))
        (out-ctype))
      (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (equal (stype x) (po-stype))
        (equal (stype x) (nxst-stype))))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((equal (ctype (stype x))
          (out-ctype)) (equal (out-ctype)
           (ctype (stype x)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ctype-not-out-fwd
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype (stype x))
          (out-ctype)))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype x) (po-stype)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype x) (nxst-stype)))))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((equal (ctype (stype x))
          (out-ctype)) (equal (out-ctype)
           (ctype (stype x))))))))</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define typecodep
  (x)
  <span class="keyword">:parents</span> (typecode)
  <span class="keyword">:short</span> <span class="string">"Recognizer for valid @(see typecode)s."</span>
  (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> x) (&lt; x <span class="number">4</span>)))</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define typecode-fix
  (x)
  <span class="keyword">:returns</span> (code typecodep)
  <span class="keyword">:parents</span> (typecode)
  <span class="keyword">:short</span> <span class="string">"Fixing function for @(see typecode)s."</span>
  (if (typecodep x)
    x
    <span class="number">0</span>)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable typecodep)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> typecode-fix-when-typecodep
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (typecodep x)
      (equal (typecode-fix x) x))))</pre>
  </div>

<div class="form-block macro" id="def-const-type" data-defines="CONST-TYPE" data-references="DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CONST-TYPE">const-type</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-const-type" data-sym="CONST-TYPE" title="(defmacro aignet::const-type () 0)">const-type</a> nil <span class="number">0</span>)</pre>
  </div>

<div class="form-block macro" id="def-gate-type" data-defines="GATE-TYPE" data-references="DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="GATE-TYPE">gate-type</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-gate-type" data-sym="GATE-TYPE" title="(defmacro aignet::gate-type () 1)">gate-type</a> nil <span class="number">1</span>)</pre>
  </div>

<div class="form-block macro" id="def-in-type" data-defines="IN-TYPE" data-references="DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="IN-TYPE">in-type</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-in-type" data-sym="IN-TYPE" title="(defmacro aignet::in-type () 2)">in-type</a> nil <span class="number">2</span>)</pre>
  </div>

<div class="form-block macro" id="def-out-type" data-defines="OUT-TYPE" data-references="DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="OUT-TYPE">out-type</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-out-type" data-sym="OUT-TYPE" title="(defmacro aignet::out-type () 3)">out-type</a> nil <span class="number">3</span>)</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defval *ctype-code-map*
  <span class="keyword">:parents</span> (typecode)
  <span class="keyword">:showdef</span> nil
  <span class="keyword">:showval</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  `((,(AIGNET::IN-CTYPE) . ,(AIGNET::IN-TYPE)) (,(AIGNET::OUT-CTYPE) . ,(AIGNET::OUT-TYPE))
    (,(AIGNET::GATE-CTYPE) . ,(AIGNET::GATE-TYPE))
    (,(AIGNET::CONST-CTYPE) . ,(AIGNET::CONST-TYPE))))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define typecode
  ((x ctypep))
  <span class="keyword">:parents</span> (representation)
  <span class="keyword">:returns</span> (code <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>))
  <span class="keyword">:short</span> <span class="string">"Numeric encoding of a @(see combinational-type) keyword."</span>
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable ctype-fix ctypep))))
  (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> (ctype-fix x)
      *ctype-code-map*))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> typecode-bound
    (&lt; (typecode x) <span class="number">4</span>)
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> typecodep-of-typecode
    (typecodep (typecode x))))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define code-&gt;ctype
  ((x typecodep))
  <span class="keyword">:returns</span> (ctype ctypep)
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable typecode-fix typecodep))))
  <span class="keyword">:parents</span> (typecode)
  <span class="keyword">:short</span> <span class="string">"Get the @(see combinational-type) keyword from its numeric encoding."</span>
  (car (<a class="sym-link system" href="../../../axioms.html#def-rassoc" data-sym="RASSOC">rassoc</a> (typecode-fix x)
      *ctype-code-map*))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable typecode
        ctype-fix
        ctypep)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> code-&gt;ctype-of-typecode
    (equal (code-&gt;ctype (typecode x))
      (ctype-fix x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable typecode))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> typecode-of-code-&gt;ctype
    (equal (typecode (code-&gt;ctype x))
      (typecode-fix x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> normalize-typecode-equivalence
    (equal (equal (typecode x) code)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (typecodep code)
        (equal (ctype-fix x)
          (code-&gt;ctype code))))))</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define node-&gt;type
  ((node node-p))
  <span class="keyword">:returns</span> (typecode <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:parents</span> (node typecode)
  <span class="keyword">:short</span> <span class="string">"Get the combinational @(see typecode) from a logical node."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (typecode (ctype (stype node))))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define node-&gt;regp
  ((node node-p))
  <span class="keyword">:short</span> <span class="string">"Get the @(&#39;regp&#39;)/@(&#39;xorp&#39;) bit of a node&#39;s encoding -- 1 if it is a
          @(&#39;:reg&#39;), @(&#39;:nxst&#39;), or @(&#39;:xor&#39;) node.  Note: returns a @(see
          bitp)."</span>
  <span class="keyword">:returns</span> (bit <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a>)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:parents</span> (node)
  (regp (stype node)))</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define proper-node-p
  (x)
  <span class="keyword">:short</span> <span class="string">"Recognizer for any node except for the special constant node."</span>
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:parents</span> (node)
  (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (node-p x)
    (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (stype x) <span class="keyword">:const</span>))))</pre>
  </div>

<div class="form-block other" id="form-44" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define co-node-&gt;fanin
  ((node node-p))
  <span class="keyword">:guard</span> (equal (node-&gt;type node) (<a class="sym-link local-def" href="#def-out-type" data-sym="OUT-TYPE" title="(defmacro aignet::out-type () 3)">out-type</a>))
  <span class="keyword">:returns</span> (lit litp <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Access the fanin @(see literal) from a combinational output node,
          i.e., from a primary output or a next-state (register input) node."</span>
  <span class="keyword">:parents</span> (node)
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (node-&gt;type node-&gt;regp)
         ((<a class="sym-link system" href="../../../axioms.html#def-force" data-sym="FORCE">force</a>))))))
  (lit-fix (if (equal (node-&gt;regp node) <span class="number">1</span>)
      (nxst-node-&gt;fanin node)
      (po-node-&gt;fanin node)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> co-node-&gt;fanin-of-po-node
    (equal (co-node-&gt;fanin (po-node f))
      (lit-fix f)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> co-node-&gt;fanin-of-nxst-node
    (equal (co-node-&gt;fanin (nxst-node f n))
      (lit-fix f))))</pre>
  </div>

<div class="form-block other" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define gate-node-&gt;fanin0
  ((node node-p))
  <span class="keyword">:guard</span> (equal (node-&gt;type node)
    (<a class="sym-link local-def" href="#def-gate-type" data-sym="GATE-TYPE" title="(defmacro aignet::gate-type () 1)">gate-type</a>))
  <span class="keyword">:returns</span> (lit litp <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Access the fanin 0 @(see literal) from a gate node,
          whether an AND or an XOR."</span>
  <span class="keyword">:parents</span> (node)
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (node-&gt;type node-&gt;regp)
         ((<a class="sym-link system" href="../../../axioms.html#def-force" data-sym="FORCE">force</a>))))))
  (lit-fix (if (equal (node-&gt;regp node) <span class="number">1</span>)
      (xor-node-&gt;fanin0 node)
      (and-node-&gt;fanin0 node)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> gate-node-&gt;fanin0-of-and-node
    (equal (gate-node-&gt;fanin0 (and-node f0 f1))
      (lit-fix f0)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> gate-node-&gt;fanin0-of-xor-node
    (equal (gate-node-&gt;fanin0 (xor-node f0 f1))
      (lit-fix f0))))</pre>
  </div>

<div class="form-block other" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define gate-node-&gt;fanin1
  ((node node-p))
  <span class="keyword">:guard</span> (equal (node-&gt;type node)
    (<a class="sym-link local-def" href="#def-gate-type" data-sym="GATE-TYPE" title="(defmacro aignet::gate-type () 1)">gate-type</a>))
  <span class="keyword">:returns</span> (lit litp <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Access the fanin 1 @(see literal) from a gate node,
          whether an AND or an XOR."</span>
  <span class="keyword">:parents</span> (node)
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (node-&gt;type node-&gt;regp)
         ((<a class="sym-link system" href="../../../axioms.html#def-force" data-sym="FORCE">force</a>))))))
  (lit-fix (if (equal (node-&gt;regp node) <span class="number">1</span>)
      (xor-node-&gt;fanin1 node)
      (and-node-&gt;fanin1 node)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> gate-node-&gt;fanin1-of-and-node
    (equal (gate-node-&gt;fanin1 (and-node f0 f1))
      (lit-fix f1)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> gate-node-&gt;fanin1-of-xor-node
    (equal (gate-node-&gt;fanin1 (xor-node f0 f1))
      (lit-fix f1))))</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection aignet-case
  <span class="keyword">:parents</span> (base-api)
  <span class="keyword">:short</span> <span class="string">"Macro for node type case splits."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Basic example:&lt;/p&gt;
  @({
      (aignet-case typecode reg-bit
        :pi ...
        :reg ...
        :and ...
        :xor ...
        :const ...)
  })

  &lt;p&gt;Where @(&#39;typecode&#39;) is the @(see typecode) for this node, i.e., it is a
  number, not a @(see sequential-type) keyword, and where @(&#39;reg-bit&#39;) is a
  @(see bitp) such as from @(see regp).&lt;/p&gt;

  &lt;p&gt;An @(&#39;:otherwise&#39;) keyword can be provided to cover all the cases not mentioned.&lt;/p&gt;

  &lt;p&gt;Alternately, you can combine:&lt;/p&gt;

  &lt;ul&gt;

  &lt;li&gt;The @(&#39;:pi&#39;) and @(&#39;:reg&#39;) (register output) cases into a
  @(&#39;:ci&#39;) (combinational input) or @(&#39;:in&#39;) case.&lt;/li&gt;

  &lt;li&gt;The @(&#39;:po&#39;) and @(&#39;:nxst&#39;) (register input) cases into a
  @(&#39;:co&#39;) (combinational output) or @(&#39;:out&#39;) case.&lt;/li&gt;

  &lt;li&gt;The @(&#39;:and&#39;) and @(&#39;:xor&#39;) cases into a @(&#39;:gate&#39;) case.&lt;/li&gt;

  &lt;/ul&gt;

  &lt;p&gt;If none of @(&#39;:pi&#39;), @(&#39;:reg&#39;), @(&#39;:po&#39;), @(&#39;:nxst&#39;), @(&#39;:and&#39;), or
  @(&#39;:xor&#39;) are used, then the @(&#39;reg-bit&#39;) argument may be skipped.  If it is
  provided anyway, it will be ignored in that case.&lt;/p&gt;

  &lt;p&gt;That is, using this combined syntax you can write:&lt;/p&gt;

  @({
      (aignet-case typecode
        :ci ...
        :gate ...
        :const ...)
  })"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> keyword-value-keys
    (x)
    (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> x)))
    (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
      nil
      (cons (car x)
        (keyword-value-keys (<a class="sym-link system" href="../../../axioms.html#def-cddr" data-sym="CDDR">cddr</a> x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> aignet-case
    (type &amp;rest <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)
    (b* ((reg-bit-skippedp (<a class="sym-link system" href="../../../axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))) (keyvals (if reg-bit-skippedp
            <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>
            (cdr <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>)))
        ((unless (<a class="sym-link system" href="../../../axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> keyvals)) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'aignet-case
            <span class="string">"Syntax error: arguments after typecode [ ~
                                  reg-bit ] must be a keyword value list."</span>))
        (keys (keyword-value-keys keyvals))
        (bad-keys (<a class="sym-link system" href="../../../axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> keys
            '(<span class="keyword">:pi</span> <span class="keyword">:reg</span> <span class="keyword">:nxst</span> <span class="keyword">:po</span> <span class="keyword">:and</span> <span class="keyword">:xor</span> <span class="keyword">:in</span> <span class="keyword">:ci</span> <span class="keyword">:out</span> <span class="keyword">:co</span> <span class="keyword">:gate</span> <span class="keyword">:const</span> <span class="keyword">:otherwise</span>)))
        ((when bad-keys) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'aignet-case
            <span class="string">"Unrecognized keys: ~x0"</span>
            bad-keys))
        ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> reg-bit-skippedp
             (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:pi</span> keys)
               (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:reg</span> keys)
               (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:nxst</span> keys)
               (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:po</span> keys)
               (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:and</span> keys)
               (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:xor</span> keys)))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'aignet-case
            <span class="string">"Syntax error: keys :pi, :reg, :po, :nxst, ~
                                  :and, or :xor require the reg-bit argument ~
                                  to be present."</span>))
        ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:ci</span> keys) (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:in</span> keys))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'aignet-case
            <span class="string">"Can&#39;t have both :ci and :in -- they are aliases"</span>))
        ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:co</span> keys) (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:out</span> keys))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'aignet-case
            <span class="string">"Can&#39;t have both :co and :out -- they are aliases"</span>))
        ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:ci</span> keys) (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:in</span> keys))
             (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:pi</span> keys) (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:reg</span> keys)))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'aignet-case
            <span class="string">"Can&#39;t have both a :ci and a :pi or :reg entry."</span>))
        ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:co</span> keys) (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:out</span> keys))
             (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:po</span> keys) (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:nxst</span> keys)))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'aignet-case
            <span class="string">"Cant have both a :co and a :po or :nxst entry."</span>))
        ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:gate</span> keys)
             (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:and</span> keys) (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:xor</span> keys)))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'aignet-case
            <span class="string">"Cant have both a :gate and an :and or :xor entry."</span>))
        (complete (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:gate</span> keys)
              (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:xor</span> keys) (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:and</span> keys)))
            (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:ci</span> keys)
              (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:in</span> keys)
              (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:pi</span> keys) (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:reg</span> keys)))
            (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:const</span> keys)))
        ((when (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> complete)
             (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> <span class="keyword">:otherwise</span> keys)))) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard?
            'aignet-case
            <span class="string">"Must at least have all fanout node types ~
                                  covered if there is no :otherwise case."</span>))
        (reg-bit (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> reg-bit-skippedp) (car <a class="sym-link system" href="../../../defuns.html#def-args" data-sym="ARGS">args</a>))))
      `(<a class="sym-link system" href="../../../axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link system" href="../../../axioms.html#def-the" data-sym="THE">the</a> (unsigned-byte <span class="number">2</span>) ,TYPE)
        ,@(AND
   (OR (NOT (MEMBER :OTHERWISE AIGNET::KEYS)) (MEMBER :GATE AIGNET::KEYS)
       (MEMBER :XOR AIGNET::KEYS) (MEMBER :AND AIGNET::KEYS))
   `((,(AIGNET::GATE-TYPE)
      ,(IF (MEMBER :GATE AIGNET::KEYVALS)
           (CADR (AIGNET::ASSOC-KEYWORD :GATE AIGNET::KEYVALS))
           `(IF (AIGNET::INT= 1 (THE BIT ,AIGNET::REG-BIT))
                ,(CADR (AIGNET::ASSOC-KEYWORD :XOR AIGNET::KEYVALS))
                ,(CADR (AIGNET::ASSOC-KEYWORD :AND AIGNET::KEYVALS)))))))
        ,@(AND
   (OR (NOT (MEMBER :OTHERWISE AIGNET::KEYS)) (MEMBER :CI AIGNET::KEYS)
       (MEMBER :IN AIGNET::KEYS) (MEMBER :REG AIGNET::KEYS))
   `((,(AIGNET::IN-TYPE)
      ,(IF (MEMBER :CI AIGNET::KEYS)
           (CADR (AIGNET::ASSOC-KEYWORD :CI AIGNET::KEYVALS))
           (IF (MEMBER :IN AIGNET::KEYS)
               (CADR (AIGNET::ASSOC-KEYWORD :IN AIGNET::KEYVALS))
               `(IF (AIGNET::INT= 1 (THE BIT ,AIGNET::REG-BIT))
                    ,(CADR (AIGNET::ASSOC-KEYWORD :REG AIGNET::KEYVALS))
                    ,(CADR (AIGNET::ASSOC-KEYWORD :PI AIGNET::KEYVALS))))))))
        ,@(AND
   (OR (MEMBER :CO AIGNET::KEYS) (MEMBER :OUT AIGNET::KEYS)
       (MEMBER :NXST AIGNET::KEYS) (MEMBER :PO AIGNET::KEYS))
   `((,(AIGNET::OUT-TYPE)
      ,(IF (AIGNET::ASSOC-KEYWORD :CO AIGNET::KEYVALS)
           (CADR (AIGNET::ASSOC-KEYWORD :CO AIGNET::KEYVALS))
           (IF (AIGNET::ASSOC-KEYWORD :OUT AIGNET::KEYVALS)
               (CADR (AIGNET::ASSOC-KEYWORD :OUT AIGNET::KEYVALS))
               `(IF (AIGNET::INT= 1 (THE BIT ,AIGNET::REG-BIT))
                    ,(CADR (AIGNET::ASSOC-KEYWORD :NXST AIGNET::KEYVALS))
                    ,(CADR (AIGNET::ASSOC-KEYWORD :PO AIGNET::KEYVALS))))))))
        ,@(AND (MEMBER :CONST AIGNET::KEYS)
       (IF AIGNET::COMPLETE
           `((OTHERWISE
              ,(CADR (AIGNET::ASSOC-KEYWORD :CONST AIGNET::KEYVALS))))
           `((,(AIGNET::CONST-TYPE)
              ,(CADR (AIGNET::ASSOC-KEYWORD :CONST AIGNET::KEYVALS))))))
        ,@(AND (MEMBER :OTHERWISE AIGNET::KEYS)
       `((OTHERWISE
          ,(CADR (AIGNET::ASSOC-KEYWORD :OTHERWISE AIGNET::KEYVALS)))))))))</pre>
  </div>

<div class="form-block other" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection network
  <span class="keyword">:parents</span> (representation)
  <span class="keyword">:short</span> <span class="string">"Reference guide for basic functions for working with the AIG network,
  i.e., a list of @(see node)s."</span>)</pre>
  </div>

<div class="form-block other" id="form-49" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (set-default-parents network))</pre>
  </div>

<div class="form-block other" id="form-50" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(deflist node-list
  <span class="keyword">:pred</span> node-listp
  <span class="keyword">:elt-type</span> node
  <span class="keyword">:true-listp</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:elementp-of-nil</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  ///
  (deffixcong node-list-equiv
    equal
    (consp x)
    x))</pre>
  </div>

<div class="form-block other" id="form-51" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(deflist proper-node-listp
  (x)
  (proper-node-p x)
  <span class="keyword">:true-listp</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> proper-node-listp-implies-node-listp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (proper-node-listp x)
      (node-listp x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable proper-node-listp
         node-listp)))))</pre>
  </div>

<div class="form-block other" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define fanin-node-p
  ((x node-p))
  (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype (stype x))
      (out-ctype)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-node-p-implies-not-output
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (fanin-node-p x)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype (stype x))
            (out-ctype)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype x) <span class="keyword">:po</span>))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype x) <span class="keyword">:nxst</span>))))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-node-p-by-ctype
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal ctype
          (ctype (stype x)))
        (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> ctype)))
      (equal (fanin-node-p x)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal ctype (out-ctype)))))))</pre>
  </div>

<div class="form-block other" id="form-53" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define fanin-count
  ((x node-listp))
  <span class="keyword">:short</span> <span class="string">"Number of fanin nodes in the list of nodes"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This gives the ID of the last fanin node in the list.&lt;/p&gt;"</span>
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    <span class="number">0</span>
    (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (if (fanin-node-p (car x))
        <span class="number">1</span>
        <span class="number">0</span>)
      (fanin-count (cdr x))))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-cons
    (equal (fanin-count (cons a x))
      (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (if (fanin-node-p a)
          <span class="number">1</span>
          <span class="number">0</span>)
        (fanin-count x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-atom
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (consp x))
      (equal (fanin-count x) <span class="number">0</span>))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:backchain-limit-lst</span> <span class="number">1</span>)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-cdr-strong
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp x)
        (fanin-node-p (car x)))
      (equal (fanin-count (cdr x))
        (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">-1</span> (fanin-count x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-cdr-weak
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count (cdr x))
      (fanin-count x))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (deffixcong node-list-equiv
    equal
    (fanin-count x)
    x))</pre>
  </div>

<div class="form-block other" id="form-54" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define stype-count
  ((type stypep) (x node-listp))
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../../axioms.html#def-count" data-sym="COUNT">count</a> <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"@(call stype-count) counts the number of @(see node)s whose
  @(see sequential-type) is @(&#39;type&#39;) in the node list @(&#39;x&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;This is a key function in the logical story of Aignet input,
  output, and register numbering.  See @(see representation) for more
  details.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x) <span class="number">0</span>)
    ((equal (stype-fix type)
       (stype (car x))) (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (stype-count type (cdr x))))
    (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (stype-count type (cdr x))))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-of-cons
    (equal (stype-count type (cons a b))
      (if (equal (stype-fix type) (stype a))
        (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (stype-count type b))
        (stype-count type b))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-of-atom
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (consp x))
      (equal (stype-count type x) <span class="number">0</span>))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:backchain-limit-lst</span> <span class="number">1</span>)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> positive-stype-count-implies-consp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; <span class="number">0</span> (stype-count stype x))
      (consp x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable stype-count)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>))</pre>
  </div>

<div class="form-block other" id="form-55" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-extension-p
  ((new node-listp
     <span class="string">"Perhaps an extension of @(&#39;old&#39;)."</span>) (old node-listp
      <span class="string">"Original @(&#39;aignet&#39;) that @(&#39;new&#39;) may extend."</span>))
  <span class="keyword">:returns</span> bool
  <span class="keyword">:parents</span> (network)
  <span class="keyword">:short</span> <span class="string">"@(call aignet-extension-p) determines if the aignet @(&#39;new&#39;) is the
result of building some new nodes onto another aignet @(&#39;old&#39;)."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Another way of looking at this is that the aignet @(&#39;new&#39;) is an
extension of @(&#39;old&#39;) if @(&#39;old&#39;) is some suffix of @(&#39;new&#39;).&lt;/p&gt;

&lt;p&gt;This is a transitive, reflexive relation. This is a useful concept because
every @(&#39;aignet&#39;)-modifying function that doesn&#39;t reinitialize the AIG produces
an extension of its input, and this relation implies many useful things.&lt;/p&gt;

&lt;p&gt;In particular, any ID of the original aignet is an ID of the new aignet, and
the node of that ID (and its entire suffix) is the same in both aignets.  This
implies, for example, that the evaluations of nodes existing in the first are
the same as their evaluations in the second.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (node-list-equiv old new)
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp new)
      (aignet-extension-p (cdr new) old)))
  ///
  (deffixequiv aignet-extension-p)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-when-aignet-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-p y x)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count x)
        (fanin-count y)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((fanin-count x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-when-aignet-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-p y x)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (stype-count k x)
        (stype-count k y)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((stype-count k x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-cdr-when-aignet-extension-strong
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p y x)
        (consp x)
        (fanin-node-p (car x)))
      (&lt; (fanin-count (cdr x))
        (fanin-count y)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((fanin-count (cdr x))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-cdr-when-aignet-extension-p
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p y x)
        (equal type (stype (car x)))
        (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix type) (const-stype)))
          (consp x)))
      (&lt; (stype-count type (cdr x))
        (stype-count type y)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((stype-count type (cdr x))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> aignet-extension-p-transitive
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p x y)
        (aignet-extension-p y z))
      (aignet-extension-p x z))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:rewrite</span> <span class="keyword">:match-free</span> <span class="keyword">:all</span>)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-p-self
    (aignet-extension-p x x))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-p-cons
    (aignet-extension-p (cons x y)
      y))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-p-cons-more
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-p y z)
      (aignet-extension-p (cons x y)
        z)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-p-cdr
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p y z)
        (consp z))
      (aignet-extension-p y (cdr z)))))</pre>
  </div>

<div class="form-block other" id="form-56" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection aignet-extension-bind-inverse
  <span class="keyword">:parents</span> (aignet-extension-p)
  <span class="keyword">:short</span> <span class="string">"Find an appropriate free variable binding that is an aignet-extension of a bound variable."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;An example rule using this utility:&lt;/p&gt;
@({
 (defthm lookup-id-in-extension-inverse
     (implies (and (aignet-extension-bind-inverse :orig orig :new new)
                   (&lt;= (nfix id) (fanin-count orig)))
              (equal (lookup-id id orig)
                     (lookup-id id new))))
 })

&lt;p&gt;Suppose this rule matches on the term @(&#39;(lookup-id id (lookup-reg-&gt;nxst n
aignet))&#39;).  Therefore, @(&#39;orig&#39;) is bound to @(&#39;(lookup-reg-&gt;nxst n aignet)&#39;).
The invocation of @(&#39;aignet-extension-bind-inverse&#39;) knows that the second
argument of @(&#39;lookup-reg-&gt;nxst&#39;) is an aignet that is (likely) an extension of
the lookup (because the lookup finds some suffix of that argument).  So it
binds @(&#39;new&#39;) to @(&#39;aignet&#39;), in this case.  Thus, this rule can be used
instead of a whole series of rules about individual functions that look up some
suffix of an aignet, such as:&lt;/p&gt;
@({
     (implies (&lt;= (nfix id) (fanin-count (lookup-reg-&gt;nxst n aignet))))
              (equal (lookup-id id (lookup-reg-&gt;nxst n aignet))
                     (lookup-id id aignet)))

     (implies (&lt;= (nfix id) (fanin-count (lookup-stype n stype aignet))))
              (equal (lookup-id id (lookup-stype n stype aignet))
                     (lookup-id id aignet)))
 })
&lt;p&gt;etc.&lt;/p&gt;

&lt;p&gt;See also @(see aignet-extension-binding) for a similar macro that finds a
binding for a suffix aignet from a term giving some extension.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> aignet-lookup-fns
    nil
    '(((cdr new) . new) ((lookup-id n new) . new)
      ((lookup-reg-&gt;nxst n new) . new)
      ((lookup-stype n stype new) . new)
      ((find-max-fanin new) . new))
    <span class="keyword">:clear</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> add-aignet-lookup-fn
    (term <a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a>)
    `(<a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a> aignet-lookup-fns
      ',AIGNET::TERM
      ',SUBST))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> aignet-extension-bind-scan-lookups
    (term var <a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a>)
    (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> <a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a>)) nil) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ok <a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a>) (simple-one-way-unify (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> <a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a>) term nil))
        ((unless ok) (aignet-extension-bind-scan-lookups term
            var
            (cdr <a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a>)))
        (new (substitute-into-term (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> <a class="sym-link system" href="../../../axioms.html#def-table" data-sym="TABLE">table</a>) <a class="sym-link system" href="../../../axioms.html#def-subst" data-sym="SUBST">subst</a>)))
      `((,AIGNET::VAR . ,AIGNET::NEW))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> aignet-extension-bind-inverse-fn
    (x var mfc state)
    (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state)
      (ignorable mfc))
    (aignet-extension-bind-scan-lookups x
      var
      (<a class="sym-link system" href="../../../axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'aignet-lookup-fns
        (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state))))
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> aignet-extension-bind-inverse
    (&amp;key (new 'new)
      (orig 'orig))
    `(<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-bind-free" data-sym="BIND-FREE">bind-free</a> (aignet-extension-bind-inverse-fn ,AIGNET::ORIG
          ',AIGNET::NEW
          mfc
          state)
        (,AIGNET::NEW))
      (aignet-extension-p ,AIGNET::NEW ,AIGNET::ORIG)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-when-aignet-extension-bind-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-bind-inverse <span class="keyword">:orig</span> x
        <span class="keyword">:new</span> y)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count x)
        (fanin-count y)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((fanin-count x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-when-aignet-extension-bind-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-bind-inverse <span class="keyword">:orig</span> x
        <span class="keyword">:new</span> y)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (stype-count k x)
        (stype-count k y)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((stype-count k x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-cdr-when-aignet-extension-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse <span class="keyword">:orig</span> x
          <span class="keyword">:new</span> y)
        (consp x)
        (fanin-node-p (car x)))
      (&lt; (fanin-count (cdr x))
        (fanin-count y)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((fanin-count (cdr x))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-cdr-when-aignet-extension-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse <span class="keyword">:orig</span> x
          <span class="keyword">:new</span> y)
        (equal type (stype (car x)))
        (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix type) (const-stype)))
          (consp x)))
      (&lt; (stype-count type (cdr x))
        (stype-count type y)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((stype-count type (cdr x)))))))</pre>
  </div>

<div class="form-block other" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection aignet-extension-binding
  <span class="keyword">:parents</span> (aignet-extension-p)
  <span class="keyword">:short</span> <span class="string">"A strategy for making use of @(see aignet-extension-p) in rewrite rules."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;Rewrite rules using @(see aignet-extension-p) are a little odd.
For example, suppose we want a rewrite rule just based on the definition,
e.g.,&lt;/p&gt;

@({
    (implies (and (aignet-extension-p new-aignet orig-aignet)
                  (aignet-idp id orig-aignet))
             (equal (lookup-id id new-aignet)
                    (lookup-id id orig-aignet)))
})

&lt;p&gt;This isn&#39;t a very good rewrite rule because it has to match the free
variable @(&#39;orig-aignet&#39;).  However, we can make it much better with a @(see
bind-free) strategy.  We&#39;ll check the syntax of new-aignet to see if it is a
call of a aignet-updating function.  Then, we&#39;ll use the @(&#39;aignet&#39;) input of
that function as the binding for @(&#39;orig-aignet&#39;) @(&#39;aignet-extension-binding&#39;)
is a macro that implements this binding strategy.  In this case, it can be used
as follows:&lt;/p&gt;

@({
 (implies (and (aignet-extension-binding :new new-aignet :orig orig-aignet)
               (aignet-idp id orig-aignet))
          (equal (lookup-id id new-aignet)
                 (lookup-id id orig-aignet)))
 })

&lt;p&gt;For a given invocation of @(&#39;aignet-extension-binding&#39;), it is assumed that
the @(&#39;new&#39;) argument is a currently bound variable and the @(&#39;orig&#39;) argument
is a variable that needs a binding.&lt;/p&gt;

&lt;p&gt;See also @(see aignet-extension-bind-inverse) for a similar macro that
instead binds a new aignet given an invocation of some function that finds a
suffix.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> simple-search-type-alist
    (term typ
      type-alist
      unify-subst)
    (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> type-alist) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil unify-subst))
      ((ts-subsetp (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (car type-alist)) typ) (<a class="sym-link system" href="../../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ans unify-subst)
          (one-way-unify1 term
            (car (car type-alist))
            unify-subst)
          (if ans
            (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> unify-subst)
            (simple-search-type-alist term
              typ
              (cdr type-alist)
              unify-subst))))
      (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (simple-search-type-alist term
          typ
          (cdr type-alist)
          unify-subst))))
  (<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> aignet-extension-binding
    (&amp;key (new 'new)
      (orig 'orig))
    `(<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-bind-free" data-sym="BIND-FREE">bind-free</a> (prev-stobj-binding ,AIGNET::NEW
          ',AIGNET::ORIG
          mfc
          state))
      (aignet-extension-p ,AIGNET::NEW ,AIGNET::ORIG)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-p-transitive-rw
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding <span class="keyword">:new</span> aignet3
          <span class="keyword">:orig</span> aignet2)
        (aignet-extension-p aignet2 aignet1))
      (aignet-extension-p aignet3 aignet1))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p-transitive))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-implies-fanin-count-gte
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-binding)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count orig)
        (fanin-count new)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((fanin-count new)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-implies-stype-count-gte
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-binding)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (stype-count stype orig)
        (stype-count stype new)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((stype-count stype new)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> aignet-extension-p-implies-consp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (consp orig))
      (consp new))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p)))))</pre>
  </div>

<div class="form-block other" id="form-58" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define lookup-id
  ((id <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (aignet node-listp))
  <span class="keyword">:returns</span> (suffix node-listp
    <span class="string">"Tail of the aignet up to (and including) the @(&#39;id&#39;)th
                    @(see node)."</span>)
  <span class="keyword">:short</span> <span class="string">"Core function for looking up an AIG node in the logical AIG network
  by its ID."</span>
  (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> aignet) (node-list-fix aignet))
    ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-node-p (car aignet))
       (equal (fanin-count aignet)
         (lnfix id))) (node-list-fix aignet))
    (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (lookup-id id (cdr aignet))))
  ///
  (deffixequiv lookup-id)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-lookup-id
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (fanin-count aignet))
      (equal (fanin-count (lookup-id n aignet))
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-cdr-lookup-id
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (consp (lookup-id n aignet))
      (equal (fanin-count (cdr (lookup-id n aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">-1</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> output-ctype-of-lookup-id
    (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype (stype (car (lookup-id id aignet))))
        (out-ctype))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> output-stype-of-lookup-id
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype (car (lookup-id id aignet)))
          <span class="keyword">:po</span>))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype (car (lookup-id id aignet)))
          <span class="keyword">:nxst</span>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-node-p-of-lookup-id
    (fanin-node-p (car (lookup-id id aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-0
    (equal (lookup-id <span class="number">0</span> aignet) nil))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> lookup-id-in-bounds
    (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (consp (lookup-id n aignet))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; <span class="number">0</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
          (fanin-count aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-in-bounds-when-positive
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> n)
      (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (consp (lookup-id n aignet))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
          (fanin-count aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-aignet-extension-p
    (aignet-extension-p aignet
      (lookup-id id aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-in-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p new orig)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)
          (fanin-count orig)))
      (equal (lookup-id id new)
        (lookup-id id orig)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-in-extension-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)
          (fanin-count orig)))
      (equal (lookup-id id orig)
        (lookup-id id new)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-cdr-lookup-bound-by-id
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (consp (lookup-id id aignet))
      (&lt; (fanin-count (cdr (lookup-id id aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-of-fanin-count-of-suffix
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p y x)
        (consp x)
        (fanin-node-p (car x)))
      (equal (lookup-id (fanin-count x)
          y)
        (node-list-fix x)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-id))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-lookup-id-of-node-listp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (node-listp aignet)
      (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (lookup-id id aignet)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-of-nil
    (equal (lookup-id x nil) nil))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-of-cons
    (equal (lookup-id id (cons node <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
      (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-node-p node)
          (equal (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)
            (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (fanin-count <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
        (cons (node-fix node)
          (node-list-fix <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (lookup-id id <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-of-fanin-count
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (fanin-node-p (car x))
      (equal (lookup-id (fanin-count x)
          x)
        (node-list-fix x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-lookup-id-when-consp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (consp (lookup-id id aignet))
      (equal (fanin-count (lookup-id id aignet))
        id)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> posp-when-consp-of-lookup-id
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (consp (lookup-id id aignet))
      (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> id))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-consp-forward-to-id-bound-nfix
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (lookup-id id aignet)))
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)
        (fanin-count aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-id-in-bounds)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-consp-forward-to-id-bound
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (lookup-id id aignet))
        (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> id))
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> id (fanin-count aignet)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:forward-chaining</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-out-of-bounds
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (fanin-count aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id))
      (equal (lookup-id id aignet) nil))))</pre>
  </div>

<div class="form-block other" id="form-59" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define lookup-stype
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (stype stypep)
    (aignet node-listp))
  <span class="keyword">:returns</span> (suffix node-listp)
  <span class="keyword">:short</span> <span class="string">"Core function for looking up an input, output, or register in the
  logical AIG network by its IO number."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;See @(see representation) to understand IO numbers and IO
  lookups.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> aignet) (node-list-fix aignet))
    ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype (car aignet))
         (stype-fix stype))
       (equal (stype-count stype (cdr aignet))
         (lnfix n))) (node-list-fix aignet))
    (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (lookup-stype n
        stype
        (cdr aignet))))
  ///
  (deffixequiv lookup-stype)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-of-cdr-lookup-stype
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (stype-count stype aignet))
      (equal (stype-count stype
          (cdr (lookup-stype n
              stype
              aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> car-of-lookup-stype
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (stype-count stype aignet))
      (equal (stype (car (lookup-stype n
              stype
              aignet)))
        (stype-fix stype))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-in-bounds
    (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (consp (lookup-stype n
          stype
          aignet))
      (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (stype-count stype aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-aignet-extension-p
    (aignet-extension-p aignet
      (lookup-stype n
        stype
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-of-stype-count
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p new orig)
        (equal (stype (car orig))
          (stype-fix stype))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix stype)
            (const-stype))))
      (equal (lookup-stype (stype-count stype (cdr orig))
          stype
          new)
        (node-list-fix orig)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p
         lookup-stype
         stype-count)
       <span class="keyword">:induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:cases</span> ((&lt; (stype-count stype (cdr new))
             (stype-count stype orig)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-in-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (consp (lookup-stype n stype orig)))
      (equal (lookup-stype n stype new)
        (lookup-stype n stype orig)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p
         lookup-stype-in-bounds))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-in-extension-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse)
        (consp (lookup-stype n stype orig)))
      (equal (lookup-stype n stype orig)
        (lookup-stype n stype new)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-of-lookup-stype
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (consp (lookup-stype n
          stype
          aignet))
      (equal (stype (car (lookup-stype n
              stype
              aignet)))
        (stype-fix stype))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> stype-of-lookup-stype-split
    (equal (stype (car (lookup-stype n
            stype
            aignet)))
      (if (consp (lookup-stype n
            stype
            aignet))
        (stype-fix stype)
        <span class="keyword">:const</span>)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-simplify-lookup-stype-when-counts-same
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (equal (stype-count stype new)
          (stype-count stype orig)))
      (equal (lookup-stype n stype new)
        (lookup-stype n stype orig)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p
         lookup-stype))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-simplify-lookup-stype-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse)
        (consp (lookup-stype n stype orig)))
      (equal (lookup-stype n stype orig)
        (lookup-stype n stype new))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-out-of-bounds
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (stype-count stype aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (lookup-stype n
          stype
          aignet)
        nil)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> consp-of-lookup-stype
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> n)
      (equal (consp (lookup-stype n
            stype
            aignet))
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
          (stype-count stype aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> stype-count-of-lookup-stype-split
    (equal (stype-count stype
        (lookup-stype n
          stype
          aignet))
      (if (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
          (stype-count stype aignet))
        (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
        <span class="number">0</span>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable stype-count))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-of-lookup-stype
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (stype-count stype aignet))
      (equal (stype-count stype
          (lookup-stype n
            stype
            aignet))
        (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable stype-count-of-lookup-stype-split)))))</pre>
  </div>

<div class="form-block other" id="form-60" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-idp
  ((id <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (aignet node-listp))
  <span class="keyword">:short</span> <span class="string">"Check whether a node ID is in bounds for this network."</span>
  (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (lnfix id)
    (fanin-count aignet))
  ///
  (deffixequiv aignet-idp)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bound-when-aignet-idp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-idp id aignet)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)
        (fanin-count aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> &lt;=-when-&lt;-+-1
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; x (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> y))
          (integerp x)
          (integerp y))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> x y))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-idp-in-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p aignet2 aignet)
        (aignet-idp id aignet))
      (aignet-idp id aignet2)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-implies-aignet-idp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (consp (lookup-id id aignet))
      (aignet-idp id aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-id))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-idp-of-fanin-count-of-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-p aignet prev)
      (aignet-idp (fanin-count prev)
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-idp-of-0
    (aignet-idp <span class="number">0</span> aignet)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-idp))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-simplify-lookup-id
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (aignet-idp id orig))
      (equal (lookup-id id new)
        (lookup-id id orig))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-simplify-aignet-idp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (aignet-idp id orig))
      (aignet-idp id new))))</pre>
  </div>

<div class="form-block other" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-id-fix
  ((id <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (aignet node-listp))
  <span class="keyword">:short</span> <span class="string">"Fix an ID so that it is valid for the aignet."</span>
  <span class="keyword">:returns</span> (new-id (aignet-idp new-id aignet))
  (if (aignet-idp id aignet)
    (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)
    <span class="number">0</span>)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-id-fix-when-aignet-idp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-idp id aignet)
      (equal (aignet-id-fix id aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-id-fix-id-val-linear
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (aignet-id-fix id aignet)
      (fanin-count aignet))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-id-fix-of-node-list-fix
    (equal (aignet-id-fix x
        (node-list-fix aignet))
      (aignet-id-fix x aignet))))</pre>
  </div>

<div class="form-block macro" id="def-aignet-litp" data-defines="AIGNET-LITP" data-references="LIT->VAR,AIGNET-IDP,QUASIQUOTE,AIGNET,X,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="AIGNET-LITP">aignet-litp</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a>
  (x aignet)
  `(aignet-idp (lit-&gt;var ,AIGNET::X)
    ,AIGNET::AIGNET))</pre>
  </div>

<div class="form-block other" id="form-63" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defxdoc <a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a>
  <span class="keyword">:short</span> <span class="string">"Abbreviation for @(&#39;(aignet-idp (lit-&gt;var x) aignet)&#39;)."</span>)</pre>
  </div>

<div class="form-block other" id="form-64" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-lit-fix
  ((x litp) (aignet node-listp))
  <span class="keyword">:short</span> <span class="string">"@(call aignet-lit-fix) fixes the @(see literal) @(&#39;x&#39;) to be a valid
  literal for this AIG network."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;If @(&#39;x&#39;) is a valid literal in the sense of @(see aignet-litp), it
  is returned unchanged:&lt;/p&gt;

  @(def aignet-lit-fix-when-aignet-litp)

  &lt;p&gt;Otherwise we adjust it to refer to the constant node, which is
  unconditionally valid.&lt;/p&gt;"</span>
  <span class="keyword">:verify-guards</span> nil
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../../axioms.html#def-fix" data-sym="FIX">fix</a> litp <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  (make-lit (aignet-id-fix (lit-&gt;var x)
      aignet)
    (lit-&gt;neg x))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> aignet-lit-fix)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-litp-of-aignet-lit-fix
    (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> (aignet-lit-fix x aignet)
      aignet))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-lit-fix-when-aignet-litp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> x aignet)
      (equal (aignet-lit-fix x aignet)
        (lit-fix x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-&gt;var-of-aignet-lit-fix
    (equal (lit-&gt;var (aignet-lit-fix x aignet))
      (aignet-id-fix (lit-&gt;var x)
        aignet)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-&gt;neg-of-aignet-lit-fix
    (equal (lit-&gt;neg (aignet-lit-fix x aignet))
      (lit-&gt;neg x))))</pre>
  </div>

<div class="form-block other" id="form-65" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define lookup-reg-&gt;nxst
  ((reg <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>
     <span class="string">"Register number for this register."</span>) (aignet node-listp))
  <span class="keyword">:returns</span> (nxst-lit litp
    <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"Look up the next-state node that corresponds to particular register
  node."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;&lt;b&gt;Note&lt;/b&gt;: This is different from the other lookups: it&#39;s by ID
  of the corresponding RO node, not IO number.  I think the asymmetry is worth
  it though.&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> aignet) <span class="number">0</span>)
    ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype (car aignet))
         (nxst-stype))
       (b* ((ro (nxst-node-&gt;reg (car aignet))))
         (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (nat-equiv reg ro)
           (&lt; ro (stype-count <span class="keyword">:reg</span> aignet))))) (aignet-lit-fix (nxst-node-&gt;fanin (car aignet))
        aignet))
    ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype (car aignet))
         (reg-stype))
       (nat-equiv (stype-count <span class="keyword">:reg</span> (cdr aignet))
         reg)) (make-lit (fanin-count aignet) <span class="number">0</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (lookup-reg-&gt;nxst reg (cdr aignet))))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-litp-of-lookup-reg-&gt;nxst
    (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> (lookup-reg-&gt;nxst reg aignet)
      aignet))
  (deffixequiv lookup-reg-&gt;nxst
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (lookup-reg-&gt;nxst reg aignet)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (reg)
          (lookup-reg-&gt;nxst reg aignet)) (lookup-reg-&gt;nxst reg
           (node-list-fix aignet))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-reg-&gt;nxst-id-bound
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (lit-&gt;var (lookup-reg-&gt;nxst n aignet))
      (fanin-count aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-reg-&gt;nxst)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> lookup-reg-&gt;nxst-out-of-bounds
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (stype-count <span class="keyword">:reg</span> aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (lookup-reg-&gt;nxst n aignet)
        <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-66" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-nodes-ok
  ((aignet node-listp))
  <span class="keyword">:short</span> <span class="string">"Basic well-formedness constraints for the AIG network."</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;We require that:&lt;/p&gt;

  &lt;ul&gt;

  &lt;li&gt;Each fanin is a well-formed in the sense of @(see aignet-litp), i.e., it
  exists somewhere ``earlier&#39;&#39; in the network (in the suffix of the list) so
  that the network is topologically ordered, and it is not a combinational
  output node.&lt;/li&gt;

  &lt;li&gt;Each next-state (register input) node must refer to a valid register that
  exists somewhere earlier in the network.&lt;/li&gt;

  &lt;/ul&gt;"</span>
  (if (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> aignet)
    <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-case (node-&gt;type (car aignet))
        (node-&gt;regp (car aignet))
        <span class="keyword">:ci</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
        <span class="keyword">:po</span> (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> (co-node-&gt;fanin (car aignet))
          (cdr aignet))
        <span class="keyword">:nxst</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> (co-node-&gt;fanin (car aignet))
            (cdr aignet))
          (&lt; (nxst-node-&gt;reg (car aignet))
            (stype-count <span class="keyword">:reg</span> (cdr aignet))))
        <span class="keyword">:gate</span> (let ((f0 (gate-node-&gt;fanin0 (car aignet))) (f1 (gate-node-&gt;fanin1 (car aignet))))
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> f0 (cdr aignet))
            (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> f1 (cdr aignet))))
        <span class="keyword">:otherwise</span> nil)
      (aignet-nodes-ok (cdr aignet))))
  ///
  (deffixequiv aignet-nodes-ok
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (aignet-nodes-ok aignet)
       <span class="keyword">:expand</span> ((aignet-nodes-ok aignet) (aignet-nodes-ok (node-list-fix aignet))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> proper-node-list-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (node-listp aignet))
      (proper-node-listp aignet)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> co-fanin-ordered-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (equal (node-&gt;type (car (lookup-id id aignet)))
          (<a class="sym-link local-def" href="#def-out-type" data-sym="OUT-TYPE" title="(defmacro aignet::out-type () 3)">out-type</a>)))
      (&lt; (lit-id (co-node-&gt;fanin (car (lookup-id id aignet))))
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (lookup-id id aignet)
       <span class="keyword">:in-theory</span> (enable lookup-id)))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> (<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((lit-id (co-node-&gt;fanin (car (lookup-id id aignet))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nxst-reg-ordered-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (equal (node-&gt;type (car (lookup-id id aignet)))
          (<a class="sym-link local-def" href="#def-out-type" data-sym="OUT-TYPE" title="(defmacro aignet::out-type () 3)">out-type</a>))
        (equal (node-&gt;regp (car (lookup-id id aignet)))
          <span class="number">1</span>))
      (&lt; (nxst-node-&gt;reg (car (lookup-id id aignet)))
        (stype-count <span class="keyword">:reg</span> (lookup-id id aignet))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (lookup-id id aignet)
       <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (lookup-id aignet-idp)
         ((<a class="sym-link system" href="../../../axioms.html#def-force" data-sym="FORCE">force</a>)))))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> (<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((nxst-node-&gt;reg (car (lookup-id id aignet)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> gate-fanin0-ordered-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (equal (node-&gt;type (car (lookup-id id aignet)))
          (<a class="sym-link local-def" href="#def-gate-type" data-sym="GATE-TYPE" title="(defmacro aignet::gate-type () 1)">gate-type</a>)))
      (&lt; (lit-id (gate-node-&gt;fanin0 (car (lookup-id id aignet))))
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (lookup-id id aignet)
       <span class="keyword">:in-theory</span> (enable lookup-id aignet-idp)
       <span class="keyword">:expand</span> ((aignet-nodes-ok aignet))))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> (<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((lit-id (gate-node-&gt;fanin0 (car (lookup-id id aignet))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> gate-fanin1-ordered-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (equal (node-&gt;type (car (lookup-id id aignet)))
          (<a class="sym-link local-def" href="#def-gate-type" data-sym="GATE-TYPE" title="(defmacro aignet::gate-type () 1)">gate-type</a>)))
      (&lt; (lit-id (gate-node-&gt;fanin1 (car (lookup-id id aignet))))
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (lookup-id id aignet)
       <span class="keyword">:in-theory</span> (enable lookup-id aignet-idp)
       <span class="keyword">:expand</span> ((aignet-nodes-ok aignet))))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> (<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((lit-id (gate-node-&gt;fanin1 (car (lookup-id id aignet))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-litp-in-extension-bind
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> lit orig)
          (aignet-extension-p new orig))
        (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> lit new))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> co-fanin-aignet-litp-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (equal (node-&gt;type (car (lookup-id id aignet)))
          (<a class="sym-link local-def" href="#def-out-type" data-sym="OUT-TYPE" title="(defmacro aignet::out-type () 3)">out-type</a>))
        (aignet-extension-p aignet2
          (cdr (lookup-id id aignet))))
      (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> (co-node-&gt;fanin (car (lookup-id id aignet)))
        aignet2))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (lookup-id id aignet)
       <span class="keyword">:in-theory</span> (enable lookup-id)
       <span class="keyword">:expand</span> ((aignet-nodes-ok aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> gate-fanin0-aignet-litp-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (equal (node-&gt;type (car (lookup-id id aignet)))
          (<a class="sym-link local-def" href="#def-gate-type" data-sym="GATE-TYPE" title="(defmacro aignet::gate-type () 1)">gate-type</a>))
        (aignet-extension-p aignet2
          (cdr (lookup-id id aignet))))
      (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> (gate-node-&gt;fanin0 (car (lookup-id id aignet)))
        aignet2))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (lookup-id id aignet)
       <span class="keyword">:in-theory</span> (enable lookup-id)
       <span class="keyword">:expand</span> ((aignet-nodes-ok aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> gate-fanin1-aignet-litp-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (equal (node-&gt;type (car (lookup-id id aignet)))
          (<a class="sym-link local-def" href="#def-gate-type" data-sym="GATE-TYPE" title="(defmacro aignet::gate-type () 1)">gate-type</a>))
        (aignet-extension-p aignet2
          (cdr (lookup-id id aignet))))
      (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> (gate-node-&gt;fanin1 (car (lookup-id id aignet)))
        aignet2))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (lookup-id id aignet)
       <span class="keyword">:in-theory</span> (enable lookup-id)
       <span class="keyword">:expand</span> ((aignet-nodes-ok aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-nodes-ok-of-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p y x)
        (aignet-nodes-ok y))
      (aignet-nodes-ok x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p
         aignet-nodes-ok)
       <span class="keyword">:induct</span> (aignet-nodes-ok y))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-nodes-ok-of-suffix-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse <span class="keyword">:orig</span> x
          <span class="keyword">:new</span> y)
        (aignet-nodes-ok y))
      (aignet-nodes-ok x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p
         aignet-nodes-ok)
       <span class="keyword">:induct</span> (aignet-nodes-ok y)))))</pre>
  </div>

<div class="form-block other" id="form-67" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define fanin
  ((which <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) (aignet node-listp))
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp aignet)
    (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (ctype (stype (car aignet)))
        <span class="keyword">:output</span>)
      (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (ctype (stype (car aignet)))
        <span class="keyword">:gate</span>)))
  <span class="keyword">:returns</span> (lit litp <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
  <span class="keyword">:short</span> <span class="string">"@(call fanin) gets the specified fanin from the first node of
          the input network and fixes it to be a valid fanin literal of the rest
          of the network."</span>
  (aignet-lit-fix (if (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (ctype (stype (car aignet)))
        <span class="keyword">:output</span>)
      (co-node-&gt;fanin (car aignet))
      (if (bit-&gt;bool which)
        (gate-node-&gt;fanin1 (car aignet))
        (gate-node-&gt;fanin0 (car aignet))))
    (cdr aignet))
  ///
  (defret fanin-id-lte-fanin-count
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (lit-id lit)
      (fanin-count (cdr aignet)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (defret fanin-id-lte-fanin-count-strong
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp aignet)
        (fanin-node-p (car aignet)))
      (&lt; (lit-id lit)
        (fanin-count aignet)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (defret aignet-litp-of-fanin
    (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> lit aignet))
  (defret aignet-litp-in-extension-of-fanin
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-p new aignet)
      (<a class="sym-link local-def" href="#def-aignet-litp" data-sym="AIGNET-LITP" title="(defmacro aignet::aignet-litp (aignet::x aignet::aignet)
  `(aignet::aignet-idp (aignet::lit-&gt;var ,aignet::x) ,aignet::aignet))">aignet-litp</a> lit new)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-of-cons
    (equal (fanin which
        (cons node aignet))
      (aignet-lit-fix (if (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (ctype (stype node)) <span class="keyword">:output</span>)
          (co-node-&gt;fanin node)
          (if (bit-&gt;bool which)
            (gate-node-&gt;fanin1 node)
            (gate-node-&gt;fanin0 node)))
        aignet))))</pre>
  </div>

<div class="form-block other" id="form-68" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-append
    (equal (fanin-count (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
      (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (fanin-count a)
        (fanin-count b)))))</pre>
  </div>

<div class="form-block other" id="form-69" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-of-append
    (equal (stype-count stype
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
      (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (stype-count stype a)
        (stype-count stype b)))))</pre>
  </div>

<div class="form-block other" id="form-70" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-of-append-non-fanins
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (fanin-count a) <span class="number">0</span>)
      (equal (lookup-id n (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
        (lookup-id n b)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-id)))))</pre>
  </div>

<div class="form-block other" id="form-71" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-of-append-non-stypes
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (stype-count stype a) <span class="number">0</span>)
      (equal (lookup-stype n
          stype
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
        (lookup-stype n stype b)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-stype)))))</pre>
  </div>

<div class="form-block other" id="form-72" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-of-append-stypes
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
          (stype-count stype a))
        (equal (stype-count stype b) <span class="number">0</span>))
      (equal (lookup-stype n
          stype
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (lookup-stype n stype a)
          (node-list-fix b))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-stype)))))</pre>
  </div>

<div class="form-block other" id="form-73" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-fanins
  ((aignet node-listp))
  <span class="keyword">:returns</span> (fanins node-listp)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> aignet)
    nil
    (if (fanin-node-p (car aignet))
      (cons (node-fix (car aignet))
        (aignet-fanins (cdr aignet)))
      (aignet-fanins (cdr aignet))))
  ///
  (defret fanin-count-of-aignet-fanins
    (equal (fanin-count fanins)
      (fanin-count aignet)))
  (defret lookup-id-of-aignet-fanins
    (equal (lookup-id n fanins)
      (aignet-fanins (lookup-id n aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-id))))
  (defret stype-count-of-aignet-fanins
    (equal (stype-count stype fanins)
      (if (equal (ctype stype) (out-ctype))
        <span class="number">0</span>
        (stype-count stype aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable stype-count fanin-node-p))))
  (deffixequiv aignet-fanins)
  (defret lookup-stype-of-aignet-fanins
    (equal (lookup-stype n
        stype
        fanins)
      (if (equal (ctype stype) (out-ctype))
        nil
        (aignet-fanins (lookup-stype n
            stype
            aignet))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-stype fanin-node-p))))
  (defret car-of-aignet-fanins
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (fanin-node-p (car aignet))
      (equal (car fanins)
        (node-fix (car aignet)))))
  (defret cdr-of-aignet-fanins
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (fanin-node-p (car aignet))
      (equal (cdr fanins)
        (aignet-fanins (cdr aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-fanins-of-append-non-fanins
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (fanin-count <a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a>) <span class="number">0</span>)
      (equal (aignet-fanins (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a> x))
        (aignet-fanins x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-fanins-idempotent
    (equal (aignet-fanins (aignet-fanins x))
      (aignet-fanins x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-of-aignet-fanins
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (fanin-node-p (car aignet))
      (equal (fanin ftype (aignet-fanins aignet))
        (fanin ftype aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable fanin
         aignet-lit-fix
         aignet-id-fix
         aignet-idp))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-fanins-of-cons
    (equal (aignet-fanins (cons node x))
      (if (fanin-node-p node)
        (cons (node-fix node)
          (aignet-fanins x))
        (aignet-fanins x)))))</pre>
  </div>

<div class="form-block other" id="form-74" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-outputs-aux
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (aignet node-listp))
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> n (stype-count <span class="keyword">:po</span> aignet))
  <span class="keyword">:returns</span> (outputs node-listp)
  (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> n)
    nil
    (cons (po-node (fanin <span class="number">0</span>
          (lookup-stype (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> n) <span class="keyword">:po</span> aignet)))
      (aignet-outputs-aux (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> n) aignet)))
  ///
  (defret fanin-count-of-aignet-outputs-aux
    (equal (fanin-count outputs) <span class="number">0</span>))
  (defret lookup-id-of-aignet-outputs-aux
    (equal (lookup-id k outputs) nil)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-id)
       <span class="keyword">:induct</span> &lt;call&gt;)))
  (defret stype-count-of-aignet-outputs-aux
    (equal (stype-count stype outputs)
      (if (equal (stype-fix stype) <span class="keyword">:po</span>)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        <span class="number">0</span>)))
  (deffixequiv aignet-outputs-aux)
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-of-lookup-stype
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k))
          (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k)
            (stype-count stype aignet)))
        (equal (lookup-stype n
            stype
            (lookup-stype k
              stype
              aignet))
          (lookup-stype n
            stype
            aignet)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-stype stype-count)))))
  (defret aignet-outputs-aux-of-lookup-po
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k)))
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k)
          (stype-count <span class="keyword">:po</span> aignet)))
      (equal (aignet-outputs-aux n
          (lookup-stype k <span class="keyword">:po</span> aignet))
        (aignet-outputs-aux n aignet))))
  (defret lookup-stype-of-aignet-outputs-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (stype-count <span class="keyword">:po</span> aignet))
      (equal (lookup-stype k
          stype
          outputs)
        (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype-fix stype) <span class="keyword">:po</span>)
            (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))
          (aignet-outputs-aux (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k))
            (lookup-stype k <span class="keyword">:po</span> aignet))
          nil)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-stype)
       <span class="keyword">:induct</span> &lt;call&gt;)))
  (defret lookup-reg-&gt;nxst-of-append-aignet-outputs-aux
    (equal (lookup-reg-&gt;nxst k
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> outputs <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
      (lookup-reg-&gt;nxst k <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-reg-&gt;nxst))))
  (defret car-of-aignet-outputs-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> n)
      (equal (car outputs)
        (po-node (fanin <span class="number">0</span>
            (lookup-stype (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
              <span class="keyword">:po</span> aignet))))))
  (defret consp-of-aignet-outputs-aux
    (equal (consp outputs) (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> n)))
  (defret aignet-outputs-aux-of-append-aignet-outputs-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype-count <span class="keyword">:po</span> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>) <span class="number">0</span>)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m)
          (stype-count <span class="keyword">:po</span> x))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count x)
          (fanin-count <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)))
      (equal (aignet-outputs-aux n
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (aignet-outputs-aux m x)
            <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (aignet-outputs-aux n x)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-lit-fix
         aignet-id-fix
         aignet-idp))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-outputs-aux-of-append-non-outputs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (stype-count <span class="keyword">:po</span> <a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a>) <span class="number">0</span>)
      (equal (aignet-outputs-aux n
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a> x))
        (aignet-outputs-aux n x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-outputs-aux-of-cons
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (stype-count <span class="keyword">:po</span> x))
      (equal (aignet-outputs-aux n
          (cons node x))
        (aignet-outputs-aux n x)))))</pre>
  </div>

<div class="form-block other" id="form-75" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-outputs
  ((aignet node-listp))
  <span class="keyword">:returns</span> (outputs node-listp)
  (aignet-outputs-aux (stype-count <span class="keyword">:po</span> aignet)
    aignet)
  ///
  (defret fanin-count-of-aignet-outputs
    (equal (fanin-count outputs) <span class="number">0</span>))
  (defret lookup-id-of-aignet-outputs
    (equal (lookup-id k outputs) nil))
  (defret stype-count-of-aignet-outputs
    (equal (stype-count stype outputs)
      (if (equal (stype-fix stype) <span class="keyword">:po</span>)
        (stype-count <span class="keyword">:po</span> aignet)
        <span class="number">0</span>)))
  (deffixequiv aignet-outputs)
  (defret lookup-stype-of-aignet-outputs
    (equal (lookup-stype k
        stype
        outputs)
      (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype-fix stype) <span class="keyword">:po</span>)
          (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k)
            (stype-count <span class="keyword">:po</span> aignet)))
        (aignet-outputs (lookup-stype k <span class="keyword">:po</span> aignet))
        nil)))
  (defret lookup-reg-&gt;nxst-of-append-aignet-outputs
    (equal (lookup-reg-&gt;nxst k
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> outputs <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
      (lookup-reg-&gt;nxst k <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)))
  (defret car-of-aignet-outputs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> (stype-count <span class="keyword">:po</span> aignet))
      (equal (car outputs)
        (po-node (fanin <span class="number">0</span>
            (lookup-stype (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> (stype-count <span class="keyword">:po</span> aignet))
              <span class="keyword">:po</span> aignet))))))
  (defret consp-of-aignet-outputs
    (equal (consp outputs)
      (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> (stype-count <span class="keyword">:po</span> aignet))))
  (defret aignet-outputs-of-append-aignet-outputs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype-count <span class="keyword">:po</span> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>) <span class="number">0</span>)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count x)
          (fanin-count <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)))
      (equal (aignet-outputs (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (aignet-outputs x) <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (aignet-outputs x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-outputs-of-append-non-outputs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (stype-count <span class="keyword">:po</span> <a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a>) <span class="number">0</span>)
      (equal (aignet-outputs (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link system" href="../../../axioms.html#def-first" data-sym="FIRST">first</a> x))
        (aignet-outputs x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-outputs-of-cons
    (equal (aignet-outputs (cons node x))
      (if (equal (stype node) <span class="keyword">:po</span>)
        (cons (po-node (aignet-lit-fix (po-node-&gt;fanin node)
              x))
          (aignet-outputs x))
        (aignet-outputs x)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-outputs-aux
         fanin
         lookup-stype
         co-node-&gt;fanin)))))</pre>
  </div>

<div class="form-block other" id="form-76" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-nxsts-aux
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (aignet node-listp))
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> n (stype-count <span class="keyword">:reg</span> aignet))
  <span class="keyword">:returns</span> (nxsts node-listp)
  (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> n)
    nil
    (cons (nxst-node (lookup-reg-&gt;nxst (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> n) aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> n))
      (aignet-nxsts-aux (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> n) aignet)))
  ///
  (defret fanin-count-of-aignet-nxsts-aux
    (equal (fanin-count nxsts) <span class="number">0</span>))
  (defret lookup-id-of-aignet-nxsts-aux
    (equal (lookup-id k nxsts) nil)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-id)
       <span class="keyword">:induct</span> &lt;call&gt;)))
  (defret stype-count-of-aignet-nxsts-aux
    (equal (stype-count stype nxsts)
      (if (equal (stype-fix stype) <span class="keyword">:nxst</span>)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        <span class="number">0</span>)))
  (deffixequiv aignet-nxsts-aux)
  (defret lookup-stype-of-aignet-nxsts-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix stype) <span class="keyword">:nxst</span>))
      (equal (lookup-stype k stype nxsts)
        nil))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-stype)
       <span class="keyword">:induct</span> &lt;call&gt;)))
  (defret lookup-reg-&gt;nxst-of-aignet-nxsts-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count aignet)
        (fanin-count <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
      (equal (lookup-reg-&gt;nxst k
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> nxsts <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
            (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k) (stype-count <span class="keyword">:reg</span> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)))
          (lookup-reg-&gt;nxst k aignet)
          (lookup-reg-&gt;nxst k <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-reg-&gt;nxst
         aignet-lit-fix
         aignet-id-fix
         aignet-idp)
       <span class="keyword">:induct</span> &lt;call&gt;)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-nxsts-aux-of-append-aignet-nxsts-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
          (stype-count <span class="keyword">:reg</span> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count x)
          (fanin-count <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m)))
      (equal (aignet-nxsts-aux n
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (aignet-nxsts-aux m x) <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (aignet-nxsts-aux n x))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> foo
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> a b) c)
        (equal (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> a b (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> c)) <span class="number">0</span>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-nxsts-aux-of-cons
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (stype-count <span class="keyword">:reg</span> x))
      (equal (aignet-nxsts-aux n
          (cons node x))
        (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype node) <span class="keyword">:nxst</span>)
            (&lt; (nxst-node-&gt;reg node)
              (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))
          (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
              (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (nxst-node-&gt;reg node)))
            (nxst-node (aignet-lit-fix (nxst-node-&gt;fanin node)
                x)
              (nxst-node-&gt;reg node))
            (aignet-nxsts-aux n x))
          (aignet-nxsts-aux n x))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-reg-&gt;nxst
         <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>
         aignet-lit-fix
         aignet-id-fix
         aignet-idp)))))</pre>
  </div>

<div class="form-block other" id="form-77" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-nxsts
  ((aignet node-listp))
  <span class="keyword">:returns</span> (nxsts node-listp)
  (aignet-nxsts-aux (stype-count <span class="keyword">:reg</span> aignet)
    aignet)
  ///
  (defret fanin-count-of-aignet-nxsts
    (equal (fanin-count nxsts) <span class="number">0</span>))
  (defret lookup-id-of-aignet-nxsts
    (equal (lookup-id k nxsts) nil))
  (defret stype-count-of-aignet-nxsts
    (equal (stype-count stype nxsts)
      (if (equal (stype-fix stype) <span class="keyword">:nxst</span>)
        (stype-count <span class="keyword">:reg</span> aignet)
        <span class="number">0</span>)))
  (deffixequiv aignet-nxsts)
  (defret lookup-stype-of-aignet-nxsts
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix stype) <span class="keyword">:nxst</span>))
      (equal (lookup-stype k stype nxsts)
        nil)))
  (defret lookup-reg-&gt;nxst-of-aignet-nxsts
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count aignet)
          (fanin-count <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (stype-count <span class="keyword">:reg</span> aignet)
          (stype-count <span class="keyword">:reg</span> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)))
      (equal (lookup-reg-&gt;nxst k
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> nxsts <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (if (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k)
            (stype-count <span class="keyword">:reg</span> aignet))
          (lookup-reg-&gt;nxst k aignet)
          (lookup-reg-&gt;nxst k <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-nxsts-of-append-aignet-nxsts
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype-count <span class="keyword">:reg</span> x)
          (stype-count <span class="keyword">:reg</span> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count x)
          (fanin-count <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)))
      (equal (aignet-nxsts (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (aignet-nxsts x) <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>))
        (aignet-nxsts x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-nxsts-of-cons
    (equal (aignet-nxsts (cons node x))
      (<a class="sym-link system" href="../../../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (stype node) <span class="keyword">:nxst</span>)
           (&lt; (nxst-node-&gt;reg node)
             (stype-count <span class="keyword">:reg</span> x))) (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (stype-count <span class="keyword">:reg</span> x)
              (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (nxst-node-&gt;reg node)))
            (nxst-node (aignet-lit-fix (nxst-node-&gt;fanin node)
                x)
              (nxst-node-&gt;reg node))
            (aignet-nxsts x)))
        ((equal (stype node) <span class="keyword">:reg</span>) (cons (nxst-node (make-lit (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (fanin-count x)) <span class="number">0</span>)
              (stype-count <span class="keyword">:reg</span> x))
            (aignet-nxsts x)))
        (<a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> (aignet-nxsts x))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-nxsts-aux
         lookup-reg-&gt;nxst)))))</pre>
  </div>

<div class="form-block other" id="form-78" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-norm
  ((aignet node-listp))
  <span class="keyword">:returns</span> (norm node-listp)
  (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (aignet-nxsts aignet)
    (aignet-outputs aignet)
    (aignet-fanins aignet))
  ///
  (defret fanin-count-of-aignet-norm
    (equal (fanin-count norm)
      (fanin-count aignet)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (deffixtype stypep
      <span class="keyword">:pred</span> stypep
      <span class="keyword">:fix</span> stype-fix
      <span class="keyword">:equiv</span> stype-equiv
      <span class="keyword">:define</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:forward</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (defret stype-count-of-aignet-norm
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix stype) <span class="keyword">:nxst</span>))
      (equal (stype-count stype norm)
        (stype-count stype aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:cases</span> ((equal (stype-fix stype) <span class="keyword">:const</span>) (equal (stype-fix stype) <span class="keyword">:xor</span>)
         (equal (stype-fix stype) <span class="keyword">:and</span>)
         (equal (stype-fix stype) <span class="keyword">:pi</span>)
         (equal (stype-fix stype) <span class="keyword">:reg</span>)
         (equal (stype-fix stype) <span class="keyword">:po</span>))
       <span class="keyword">:in-theory</span> (enable ctype))))
  (defret lookup-id-of-aignet-norm
    (equal (lookup-id n norm)
      (aignet-fanins (lookup-id n aignet))))
  (defret lookup-reg-of-aignet-norm
    (equal (lookup-stype n <span class="keyword">:reg</span> norm)
      (aignet-fanins (lookup-stype n <span class="keyword">:reg</span> aignet))))
  (defret lookup-pi-of-aignet-norm
    (equal (lookup-stype n <span class="keyword">:pi</span> norm)
      (aignet-fanins (lookup-stype n <span class="keyword">:pi</span> aignet))))
  (defret po-fanin-of-aignet-norm
    (equal (fanin <span class="number">0</span>
        (lookup-stype n <span class="keyword">:po</span> norm))
      (fanin <span class="number">0</span>
        (lookup-stype n <span class="keyword">:po</span> aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:cases</span> ((&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
          (stype-count <span class="keyword">:po</span> aignet)))
       <span class="keyword">:in-theory</span> (enable fanin
         aignet-lit-fix
         aignet-id-fix
         aignet-idp))))
  (defret lookup-reg-&gt;nxst-of-aignet-norm
    (equal (lookup-reg-&gt;nxst n norm)
      (lookup-reg-&gt;nxst n aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-reg-&gt;nxst-out-of-bounds))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-norm-idempotent
    (equal (aignet-norm (aignet-norm x))
      (aignet-norm x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-norm-of-cons
    (equal (aignet-norm (cons node (aignet-norm x)))
      (aignet-norm (cons node x)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-lit-fix
         aignet-id-fix
         aignet-idp)))))</pre>
  </div>

<div class="form-block other" id="form-79" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-norm-p
  (x)
  (equal (<a class="sym-link system" href="../../../axioms.html#def-ec-call" data-sym="EC-CALL">ec-call</a> (aignet-norm x))
    x)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-norm-p-of-aignet-norm
    (aignet-norm-p (aignet-norm x)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> aignet-norm-when-aignet-norm-p
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-norm-p x)
      (equal (aignet-norm x) x)))
  (deffixtype aignet-norm
    <span class="keyword">:pred</span> aignet-norm-p
    <span class="keyword">:fix</span> aignet-norm
    <span class="keyword">:equiv</span> aignet-equiv
    <span class="keyword">:define</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:forward</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  (<a class="sym-link system" href="../../../defthm.html#def-defrefinement" data-sym="DEFREFINEMENT">defrefinement</a> node-list-equiv
    aignet-equiv))</pre>
  </div>

<div class="form-block other" id="form-80" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection aignet-equiv
  (deffixcong aignet-equiv
    equal
    (fanin-count x)
    x)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:po</span> x)
    x
    <span class="keyword">:basename</span> po-count)
  (deffixcong aignet-equiv
    equal
    (car (lookup-id n x))
    x
    <span class="keyword">:basename</span> car-lookup-id)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:pi</span> (lookup-id n x))
    x
    <span class="keyword">:basename</span> pi-count-of-lookup-id)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:reg</span> (lookup-id n x))
    x
    <span class="keyword">:basename</span> reg-count-of-lookup-id)
  (deffixcong aignet-equiv
    equal
    (lookup-reg-&gt;nxst n x)
    x)
  (deffixcong aignet-equiv
    equal
    (fanin <span class="number">0</span>
      (lookup-stype n <span class="keyword">:po</span> x))
    x
    <span class="keyword">:basename</span> po-fanin)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:reg</span> x)
    x
    <span class="keyword">:basename</span> reg-count)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:pi</span> x)
    x
    <span class="keyword">:basename</span> pi-count)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:and</span> x)
    x
    <span class="keyword">:basename</span> and-count)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:xor</span> x)
    x
    <span class="keyword">:basename</span> xor-count)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:const</span> x)
    x
    <span class="keyword">:basename</span> const-count)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:pi</span> (cdr (lookup-id n x)))
    x
    <span class="keyword">:basename</span> pi-number)
  (deffixcong aignet-equiv
    equal
    (stype-count <span class="keyword">:reg</span> (cdr (lookup-id n x)))
    x
    <span class="keyword">:basename</span> reg-number)
  (deffixcong aignet-equiv
    equal
    (fanin-count (lookup-stype n <span class="keyword">:reg</span> x))
    x
    <span class="keyword">:basename</span> reg-id)
  (deffixcong aignet-equiv
    equal
    (fanin-count (lookup-stype n <span class="keyword">:pi</span> x))
    x
    <span class="keyword">:basename</span> pi-id))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>