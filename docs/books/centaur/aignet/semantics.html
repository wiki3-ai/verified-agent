<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>semantics - ACL2 Book</title>
  <meta property="name" content="semantics">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">semantics</h1>
    <div class="path"><a href="semantics.lisp" class="source-link">books/centaur/aignet/semantics</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"AIGNET"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="arrays.html" title="Open arrays">"arrays"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="aignet-absstobj.html" title="Open aignet-absstobj">"aignet-absstobj"</a>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../add-ons/hash-stobjs.html" title="Open add-ons/hash-stobjs">"add-ons/hash-stobjs"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/stobjs/2d-arr.html" title="Open std/stobjs/2d-arr">"std/stobjs/2d-arr"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/misc/iter.html" title="Open centaur/misc/iter">"centaur/misc/iter"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/stobjs/natarr.html" title="Open std/stobjs/natarr">"std/stobjs/natarr"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/misc/nth-equiv.html" title="Open centaur/misc/nth-equiv">"centaur/misc/nth-equiv"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../clause-processors/stobj-preservation.html" title="Open clause-processors/stobj-preservation">"clause-processors/stobj-preservation"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../clause-processors/generalize.html" title="Open clause-processors/generalize">"clause-processors/generalize"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../clause-processors/find-subterms.html" title="Open clause-processors/find-subterms">"clause-processors/find-subterms"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../arithmetic/top-with-meta.html" title="Open arithmetic/top-with-meta">"arithmetic/top-with-meta"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/bitops/ihsext-basics.html" title="Open centaur/bitops/ihsext-basics">"centaur/bitops/ihsext-basics"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/nth.html" title="Open std/lists/nth">"std/lists/nth"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/take.html" title="Open std/lists/take">"std/lists/take"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable* arith-equiv-forwarding)))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>
      <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>
      <a class="sym-link system" href="../../../axioms.html#def-resize-list" data-sym="RESIZE-LIST">resize-list</a>
      <a class="sym-link system" href="../../../axioms.html#def-make-list-ac" data-sym="MAKE-LIST-AC">make-list-ac</a>
      <a class="sym-link system" href="../../../axioms.html#def-true-listp-update-nth" data-sym="TRUE-LISTP-UPDATE-NTH">true-listp-update-nth</a>
      nfix-when-not-natp
      nth-when-zp)))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (add-default-post-define-hook <span class="keyword">:fix</span>))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-1-to-bitp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal x <span class="number">0</span>)) (<a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> x))
      (equal (equal x <span class="number">1</span>) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a>)))))</pre>
  </div>

<div class="form-block macro" id="def-mksym" data-defines="MKSYM" data-references="STRING,QUOTE,CONCATENATE,INTERN-IN-PACKAGE-OF-SYMBOL,QUASIQUOTE,CONCATS,&REST,PKG,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MKSYM">mksym</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-mksym" data-sym="MKSYM" title="(defmacro aignet::mksym (aignet::pkg &amp;rest aignet::concats)
  `(aignet::intern-in-package-of-symbol
    (concatenate &#39;string . ,aignet::concats) ,aignet::pkg))">mksym</a>
  (pkg &amp;rest concats)
  `(intern-in-package-of-symbol (<a class="sym-link system" href="../../../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../../../axioms.html#def-string" data-sym="STRING">string</a> . ,AIGNET::CONCATS)
    ,AIGNET::PKG))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> redundant-update-nth
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x))
      (equal v (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x)))
    (equal (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> n v x)
      x))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>))))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../defthm.html#def-defrefinement" data-sym="DEFREFINEMENT">defrefinement</a> nth-equiv
  bits-equiv
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bits-equiv))))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> subtermp
    (x y)
    (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (equal x y)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp y)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-eq" data-sym="EQ">eq</a> (car y) 'quote))
        (subtermp-list x (cdr y)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> subtermp-list
    (x y)
    (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> y)
      nil
      (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (subtermp x (car y))
        (subtermp-list x (cdr y))))))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection misc
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> equiv-search-type-alist
    (type-alist goaltype
      equiv
      lhs
      rhs
      unify-subst
      wrld)
    (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span>))
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-endp" data-sym="ENDP">endp</a> type-alist)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)) ((<a class="sym-link system" href="../../../axioms.html#def-list_2A" data-sym="LIST*">list*</a> term type ?ttree) (car type-alist))
        ((unless (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (ts-subsetp type goaltype)
             (consp term)
             (symbolp (car term))
             (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> equiv
               (<a class="sym-link system" href="../../../axioms.html#def-fgetprop" data-sym="FGETPROP">fgetprop</a> (car term)
                 'coarsenings
                 nil
                 wrld)))) (equiv-search-type-alist (cdr type-alist)
            goaltype
            equiv
            lhs
            rhs
            unify-subst
            wrld))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ans new-unify-subst) (one-way-unify1 lhs
            (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)
            unify-subst))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ans new-unify-subst) (if ans
            (one-way-unify1 rhs
              (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> term)
              new-unify-subst)
            (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)))
        ((when ans) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> new-unify-subst))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ans new-unify-subst) (one-way-unify1 lhs
            (<a class="sym-link system" href="../../../axioms.html#def-caddr" data-sym="CADDR">caddr</a> term)
            unify-subst))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ans new-unify-subst) (if ans
            (one-way-unify1 rhs
              (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> term)
              new-unify-subst)
            (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil nil)))
        ((when ans) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> new-unify-subst)))
      (equiv-search-type-alist (cdr type-alist)
        goaltype
        equiv
        lhs
        rhs
        unify-subst
        wrld)))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> match-equiv-or-refinement
    (equiv var
      binding-term
      mfc
      state)
    (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state))
    (b* ((unify-subst (<a class="sym-link system" href="../../../axioms.html#def-mfc-unify-subst" data-sym="MFC-UNIFY-SUBST">mfc-unify-subst</a> mfc)) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> erp tbind) (translate-cmp binding-term
            <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
            <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
            nil
            'match-equiv-or-refinement
            (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state)
            (<a class="sym-link system" href="../../../basis-a.html#def-default-state-vars" data-sym="DEFAULT-STATE-VARS">default-state-vars</a> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)))
        ((when erp) (<a class="sym-link system" href="../../../axioms.html#def-er" data-sym="ER">er</a> hard? erp <span class="string">"~@0"</span> tbind))
        (type-alist (<a class="sym-link system" href="../../../axioms.html#def-mfc-type-alist" data-sym="MFC-TYPE-ALIST">mfc-type-alist</a> mfc))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ok new-unify-subst) (one-way-unify1 tbind
            (cdr (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> var unify-subst))
            unify-subst))
        ((when ok) (<a class="sym-link system" href="../../../axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> new-unify-subst
            (<a class="sym-link system" href="../../../axioms.html#def-length" data-sym="LENGTH">length</a> unify-subst)))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ok new-unify-subst) (equiv-search-type-alist type-alist
            *ts-non-nil*
            equiv
            var
            tbind
            unify-subst
            (<a class="sym-link system" href="../../../axioms.html#def-w" data-sym="W">w</a> state)))
        ((unless ok) nil))
      (<a class="sym-link system" href="../../../axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> new-unify-subst
        (<a class="sym-link system" href="../../../axioms.html#def-length" data-sym="LENGTH">length</a> unify-subst))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> match-equiv-or-refinement-lst
    (equiv var
      terms
      mfc
      state)
    (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state))
    (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> terms)
      nil
      (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (match-equiv-or-refinement equiv
          var
          (car terms)
          mfc
          state)
        (match-equiv-or-refinement-lst equiv
          var
          (cdr terms)
          mfc
          state))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-of-fanin-count-bind
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-bind-free" data-sym="BIND-FREE">bind-free</a> (match-equiv-or-refinement-lst 'nat-equiv$inline
            'id
            '((fanin-count x) (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (fanin-count (cdr x))))
            mfc
            state)
          (x))
        (<a class="sym-link system" href="../../../axioms.html#def-syntaxp" data-sym="SYNTAXP">syntaxp</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (subtermp `(lookup-id ,AIGNET::ID ,AIGNET::Y)
              x)))
        (nat-equiv id
          (fanin-count x))
        (fanin-node-p (car x))
        (aignet-extension-p y x))
      (equal (lookup-id id y)
        (node-list-fix x)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> nil (nat-equiv))))))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-uniqueness
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse <span class="keyword">:orig</span> orig1)
      (aignet-extension-p new orig2)
      (fanin-node-p (car orig1))
      (fanin-node-p (car orig2)))
    (equal (equal (fanin-count orig1)
        (fanin-count orig2))
      (node-list-equiv orig1 orig2)))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p
       fanin-count))))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection ionum-uniqueness
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable lookup-id-in-bounds))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-id-by-stype
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype (car (lookup-id id aignet)))
          (const-stype)))
      (lookup-id id aignet)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-counts-unique
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal type
          (stype (car (lookup-id id1 aignet))))
        (equal type
          (stype (car (lookup-id id2 aignet))))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal type (const-stype))))
      (equal (equal (stype-count type
            (cdr (lookup-id id1 aignet)))
          (stype-count type
            (cdr (lookup-id id2 aignet))))
        (nat-equiv id1 id2)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-id
         stype-count
         aignet-idp)))
    <span class="keyword">:otf-flg</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-count-of-lookup-stype
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (fanin-count (lookup-stype n
          stype
          aignet))
      (fanin-count aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-stype)))
    <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> aignet-extension-p-implies-len
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-p x y)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> y) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-extension-p)
         <span class="keyword">:induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
          '(<span class="keyword">:use</span> ((<span class="keyword">:instance</span> len-of-node-list-fix
               (x x)) (<span class="keyword">:instance</span> len-of-node-list-fix
                (x y)))
            <span class="keyword">:in-theory</span> (disable len-of-node-list-fix))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> aignet-extension-p-when-same-len
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> y))
        (equal (aignet-extension-p x y)
          (node-list-equiv x y)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((aignet-extension-p x y))
         <span class="keyword">:use</span> ((<span class="keyword">:instance</span> aignet-extension-p-implies-len
            (x (cdr x))))
         <span class="keyword">:in-theory</span> (disable aignet-extension-p-implies-len)
         <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> aignet-extension-p-antisymm
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p x y)
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (node-list-fix x)
              (node-list-fix y))))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (aignet-extension-p y x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> aignet-extension-p-implies-len) (<span class="keyword">:instance</span> aignet-extension-p-implies-len
             (y x)
             (x y)))
         <span class="keyword">:in-theory</span> (enable aignet-extension-p-when-same-len)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-of-lookup-stype
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (lookup-stype n stype x))
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-stype)))
      <span class="keyword">:rule-classes</span> <span class="keyword">:linear</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> hack1
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p y x)
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (node-list-fix y)
              (node-list-fix x))))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (node-list-fix y)
            (lookup-stype n stype x))))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> aignet-extension-p-implies-len
            (x y)
            (y x)) (<span class="keyword">:instance</span> aignet-extension-p-when-same-len
             (x y)
             (y x))
           (<span class="keyword">:instance</span> len-of-node-list-fix
             (x y)))
         <span class="keyword">:in-theory</span> (disable len-of-node-list-fix)
         <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> hack
      (equal (equal (node-list-fix aignet)
          (lookup-stype n
            stype
            (cdr aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> aignet))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> hack1
            (y aignet)
            (x (cdr aignet))))))
      <span class="keyword">:otf-flg</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-ids-unique
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n1)
          (stype-count stype aignet))
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n2)
          (stype-count stype aignet)))
      (equal (equal (lookup-stype n1
            stype
            aignet)
          (lookup-stype n2
            stype
            aignet))
        (nat-equiv n1 n2)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (stype-count stype aignet)
       <span class="keyword">:expand</span> ((lookup-stype n1
          stype
          aignet) (lookup-stype n2
           stype
           aignet))
       <span class="keyword">:in-theory</span> (enable stype-count))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> fanin-node-p-of-lookup-stype
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (stype-count stype aignet))
      (equal (fanin-node-p (car (lookup-stype n
              stype
              aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype stype) <span class="keyword">:output</span>))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable fanin-node-p))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-ids-unique-fanin-count
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n1)
            (stype-count stype aignet))
          (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n2)
            (stype-count stype aignet))
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype stype) (out-ctype))))
        (equal (equal (fanin-count (lookup-stype n1
                stype
                aignet))
            (fanin-count (lookup-stype n2
                stype
                aignet)))
          (nat-equiv n1 n2)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (fanin-count-uniqueness)
           (lookup-stype stype-count))
         <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-ids-unique-cdr
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n1)
          (stype-count stype aignet))
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n2)
          (stype-count stype aignet))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (ctype stype) (out-ctype))))
      (equal (equal (fanin-count (cdr (lookup-stype n1
                stype
                aignet)))
          (fanin-count (cdr (lookup-stype n2
                stype
                aignet))))
        (nat-equiv n1 n2)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (lookup-stype-in-bounds fanin-count)
         (stype-ids-unique-fanin-count fanin-count-uniqueness))
       <span class="keyword">:use</span> ((<span class="keyword">:instance</span> stype-ids-unique-fanin-count)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-reg-&gt;nxsts-unique-fanin-count
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (lookup-reg-&gt;nxst n1 aignet))
          (consp (lookup-reg-&gt;nxst n2 aignet)))
        (equal (equal (fanin-count (lookup-reg-&gt;nxst n1 aignet))
            (fanin-count (lookup-reg-&gt;nxst n2 aignet)))
          (nat-equiv n1 n2)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (lookup-reg-&gt;nxst)
           (fanin-count-uniqueness))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-reg-&gt;nxsts-unique
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp (lookup-reg-&gt;nxst n1 aignet))
        (consp (lookup-reg-&gt;nxst n2 aignet)))
      (equal (equal (lookup-reg-&gt;nxst n1 aignet)
          (lookup-reg-&gt;nxst n2 aignet))
        (nat-equiv n1 n2)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable lookup-reg-&gt;nxsts-unique-fanin-count)
       <span class="keyword">:use</span> lookup-reg-&gt;nxsts-unique-fanin-count)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-stype-of-stype-count-match
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-bind-free" data-sym="BIND-FREE">bind-free</a> (match-equiv-or-refinement 'nat-equiv$inline
            '<a class="sym-link system" href="../../../axioms.html#def-count" data-sym="COUNT">count</a>
            '(stype-count stype (cdr orig))
            mfc
            state)
          (orig))
        (nat-equiv <a class="sym-link system" href="../../../axioms.html#def-count" data-sym="COUNT">count</a>
          (stype-count stype (cdr orig)))
        (aignet-extension-p new orig)
        (equal (stype (car orig))
          (stype-fix stype))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix stype)
            (const-stype))))
      (equal (lookup-stype <a class="sym-link system" href="../../../axioms.html#def-count" data-sym="COUNT">count</a> stype new)
        (node-list-fix orig)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable nat-equiv)))))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-lit-listp
  ((x lit-listp) aignet)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-litp (car x) aignet)
      (aignet-lit-listp (cdr x) aignet)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-implies-aignet-lit-listp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (aignet-lit-listp lits orig))
      (aignet-lit-listp lits new))))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-id-listp
  ((x <a class="sym-link system" href="../../../axioms.html#def-nat-listp" data-sym="NAT-LISTP">nat-listp</a>) aignet)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (id-existsp (car x) aignet)
      (aignet-id-listp (cdr x) aignet)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-extension-implies-aignet-id-listp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (aignet-id-listp ids orig))
      (aignet-id-listp ids new))))</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection preservation-thms
  (def-stobj-preservation-macros <span class="keyword">:name</span> aignet
    <span class="keyword">:default-stobjname</span> aignet
    <span class="keyword">:templates</span> aignet-preservation-templates
    <span class="keyword">:history</span> aignet-preservation-history)
  (add-aignet-preservation-thm aignet-extension-p
    <span class="keyword">:body</span> `(aignet-extension-p ,AIGNET::NEW-STOBJ
      ,AIGNET::ORIG-STOBJ)
    <span class="keyword">:hints</span> `(,@AIGNET::EXPAND/INDUCT-HINTS)))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> car-nonnil-forward-to-consp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (car x) nil))
      (consp x))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((car x))))))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection invals
  <span class="keyword">:parents</span> (semantics)
  <span class="keyword">:short</span> <span class="string">"Bit array for the primary inputs to an aignet."</span>
  (defstobj-clone invals
    bitarr
    <span class="keyword">:strsubst</span> ((<span class="string">"BIT"</span> . <span class="string">"AIGNET-INVAL"</span>))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defstobj-clone regvals
  bitarr
  <span class="keyword">:strsubst</span> ((<span class="string">"BIT"</span> . <span class="string">"AIGNET-REGVAL"</span>)))</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defines id-eval
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable lookup-id-in-bounds-when-positive
         lookup-id-out-of-bounds))))
  <span class="keyword">:flag-local</span> nil
  (define lit-eval
    ((lit litp) invals
      regvals
      aignet)
    <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-litp lit aignet)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
        (bits-length invals))
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
        (bits-length regvals)))
    <span class="keyword">:measure</span> (two-nats-measure (lit-id lit) <span class="number">1</span>)
    <span class="keyword">:verify-guards</span> nil
    <span class="keyword">:returns</span> (val <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
    (b-xor (id-eval (lit-id lit)
        invals
        regvals
        aignet)
      (lit-neg lit)))
  (define eval-and-of-lits
    ((lit1 litp) (lit2 litp)
      invals
      regvals
      aignet)
    <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-litp lit1 aignet)
      (fanin-litp lit2 aignet)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
        (bits-length invals))
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
        (bits-length regvals)))
    <span class="keyword">:measure</span> (two-nats-measure (max (lit-id lit1)
        (lit-id lit2))
      <span class="number">2</span>)
    <span class="keyword">:returns</span> (val <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
    (b-and (lit-eval lit1
        invals
        regvals
        aignet)
      (lit-eval lit2
        invals
        regvals
        aignet)))
  (define eval-xor-of-lits
    ((lit1 litp) (lit2 litp)
      invals
      regvals
      aignet)
    <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-litp lit1 aignet)
      (fanin-litp lit2 aignet)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
        (bits-length invals))
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
        (bits-length regvals)))
    <span class="keyword">:measure</span> (two-nats-measure (max (lit-id lit1)
        (lit-id lit2))
      <span class="number">2</span>)
    <span class="keyword">:returns</span> (val <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
    (b-xor (lit-eval lit1
        invals
        regvals
        aignet)
      (lit-eval lit2
        invals
        regvals
        aignet)))
  (define id-eval
    ((id <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) invals
      regvals
      aignet)
    <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (id-existsp id aignet)
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
        (bits-length invals))
      (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
        (bits-length regvals)))
    <span class="keyword">:measure</span> (two-nats-measure id <span class="number">0</span>)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-idp)))
    <span class="keyword">:returns</span> (val <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> <span class="keyword">:rule-classes</span> <span class="keyword">:type-prescription</span>)
    (b* (((unless (<a class="sym-link system" href="../../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (id-existsp id aignet))) <span class="number">0</span>) (type (id-&gt;type id aignet)))
      (aignet-case type
        <span class="keyword">:gate</span> (b* ((f0 (gate-id-&gt;fanin0 id aignet)) (f1 (gate-id-&gt;fanin1 id aignet)))
          (if (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (id-&gt;regp id aignet)
              <span class="number">1</span>)
            (eval-xor-of-lits f0
              f1
              invals
              regvals
              aignet)
            (eval-and-of-lits f0
              f1
              invals
              regvals
              aignet)))
        <span class="keyword">:in</span> (if (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (id-&gt;regp id aignet)
            <span class="number">1</span>)
          (get-bit (ci-id-&gt;ionum id aignet)
            regvals)
          (get-bit (ci-id-&gt;ionum id aignet)
            invals))
        <span class="keyword">:const</span> <span class="number">0</span>)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable id-eval
      lit-eval
      eval-and-of-lits
      eval-xor-of-lits))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable id-eval
        lit-eval
        eval-and-of-lits
        eval-xor-of-lits)))
  (<a class="sym-link system" href="../../../axioms.html#def-defun-nx" data-sym="DEFUN-NX">defun-nx</a> id-eval-ind
    (id aignet)
    (declare (xargs <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id)
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-idp)))))
    (b* (((unless (<a class="sym-link system" href="../../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (aignet-idp id aignet))) <span class="number">0</span>) (type (id-&gt;type id aignet)))
      (aignet-case type
        <span class="keyword">:gate</span> (b* ((f0 (gate-id-&gt;fanin0 id aignet)) (f1 (gate-id-&gt;fanin1 id aignet)))
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (id-eval-ind (lit-id f0)
              aignet)
            (id-eval-ind (lit-id f1)
              aignet)))
        <span class="keyword">:in</span> nil
        <span class="keyword">:const</span> <span class="number">0</span>)))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> nat-equiv
    equal
    (id-eval id
      invals
      regvals
      aignet)
    <span class="number">1</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((id-eval id
          invals
          regvals
          aignet) (id-eval nat-equiv
           invals
           regvals
           aignet)))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (id-eval id
      invals
      regvals
      aignet)
    <span class="number">2</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-ind id aignet)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (id-eval id
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (id-eval id
      invals
      regvals
      aignet)
    <span class="number">3</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-ind id aignet)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (id-eval id
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> list-equiv
    equal
    (id-eval id
      invals
      regvals
      aignet)
    <span class="number">4</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-ind id aignet)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
          (id-eval id
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (lit-eval lit
      invals
      regvals
      aignet)
    <span class="number">2</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (lit-eval lit
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (lit-eval lit
      invals
      regvals
      aignet)
    <span class="number">3</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (lit-eval lit
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
    equal
    (lit-eval lit
      invals
      regvals
      aignet)
    <span class="number">1</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((lit-eval lit
          invals
          regvals
          aignet) (lit-eval lit-equiv
           invals
           regvals
           aignet)))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> list-equiv
    equal
    (lit-eval lit
      invals
      regvals
      aignet)
    <span class="number">4</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
          (lit-eval lit
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (eval-and-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">3</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (eval-and-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (eval-and-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">4</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (eval-and-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
    equal
    (eval-and-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">1</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (lit1)
          (eval-and-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
    equal
    (eval-and-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">2</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (lit2)
          (eval-and-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> list-equiv
    equal
    (eval-and-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">5</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
          (eval-and-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (eval-xor-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">3</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (eval-xor-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (eval-xor-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">4</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (eval-xor-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
    equal
    (eval-xor-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">1</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (lit1)
          (eval-xor-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
    equal
    (eval-xor-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">2</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (lit2)
          (eval-xor-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> list-equiv
    equal
    (eval-xor-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    <span class="number">5</span>
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
          (eval-xor-of-lits lit1
            lit2
            invals
            regvals
            aignet))))))
  (defret-mutual &lt;fn&gt;-preserved-by-extension
    (defret &lt;fn&gt;-preserved-by-extension
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding <span class="keyword">:orig</span> aignet)
          (aignet-idp id aignet))
        (equal (id-eval id
            invals
            regvals
            new)
          val))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         '(<span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
              (id-eval id
                invals
                regvals
                aignet))))))
      <span class="keyword">:fn</span> id-eval)
    (defret &lt;fn&gt;-preserved-by-extension
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding <span class="keyword">:orig</span> aignet)
          (aignet-idp (lit-id lit)
            aignet))
        (equal (lit-eval lit
            invals
            regvals
            new)
          val))
      <span class="keyword">:fn</span> lit-eval)
    (defret &lt;fn&gt;-preserved-by-extension
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding <span class="keyword">:orig</span> aignet)
          (aignet-idp (lit-id lit1)
            aignet)
          (aignet-idp (lit-id lit2)
            aignet))
        (equal (eval-and-of-lits lit1
            lit2
            invals
            regvals
            new)
          val))
      <span class="keyword">:fn</span> eval-and-of-lits)
    (defret &lt;fn&gt;-preserved-by-extension
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding <span class="keyword">:orig</span> aignet)
          (aignet-idp (lit-id lit1)
            aignet)
          (aignet-idp (lit-id lit2)
            aignet))
        (equal (eval-xor-of-lits lit1
            lit2
            invals
            regvals
            new)
          val))
      <span class="keyword">:fn</span> eval-xor-of-lits))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-preserved-by-extension-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse <span class="keyword">:orig</span> aignet)
        (aignet-idp id aignet))
      (equal (id-eval id
          invals
          regvals
          aignet)
        (id-eval id
          invals
          regvals
          new)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> id-eval-preserved-by-extension)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-preserved-by-extension-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse)
        (aignet-idp (lit-id lit)
          orig))
      (equal (lit-eval lit
          invals
          regvals
          orig)
        (lit-eval lit
          invals
          regvals
          new))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-and-preserved-by-extension-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse)
        (aignet-idp (lit-id lit1)
          orig)
        (aignet-idp (lit-id lit2)
          orig))
      (equal (eval-and-of-lits lit1
          lit2
          invals
          regvals
          orig)
        (eval-and-of-lits lit1
          lit2
          invals
          regvals
          new))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-xor-preserved-by-extension-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse)
        (aignet-idp (lit-id lit1)
          orig)
        (aignet-idp (lit-id lit2)
          orig))
      (equal (eval-xor-of-lits lit1
          lit2
          invals
          regvals
          orig)
        (eval-xor-of-lits lit1
          lit2
          invals
          regvals
          new))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-idp-of-co-node-&gt;fanin-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (equal (id-&gt;type id aignet)
          (out-type))
        (aignet-extension-p aignet2
          (cdr (lookup-id id aignet))))
      (aignet-idp (lit-id (co-node-&gt;fanin (car (lookup-id id aignet))))
        aignet2))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-nodes-ok lookup-id))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-idp-of-gate-node-&gt;fanins-when-aignet-nodes-ok
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-nodes-ok aignet)
        (equal (id-&gt;type id aignet)
          (gate-type))
        (aignet-extension-p aignet2
          (cdr (lookup-id id aignet))))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-idp (lit-id (gate-node-&gt;fanin0 (car (lookup-id id aignet))))
          aignet2)
        (aignet-idp (lit-id (gate-node-&gt;fanin1 (car (lookup-id id aignet))))
          aignet2)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-nodes-ok lookup-id))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/aignet/bit-lemmas.html" title="Open centaur/aignet/bit-lemmas">"centaur/aignet/bit-lemmas"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-mk-lit-of-lit-id
    (equal (lit-eval (mk-lit (lit-id x) neg)
        invals
        regvals
        aignet)
      (b-xor (b-xor neg (lit-neg x))
        (lit-eval x
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-mk-lit-0
      (equal (lit-eval (mk-lit <span class="number">0</span> neg)
          invals
          regvals
          aignet)
        (bfix neg))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-lit-negate
    (equal (lit-eval (lit-negate lit)
        invals
        regvals
        aignet)
      (b-not (lit-eval lit
          invals
          regvals
          aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lit-eval lit-negate))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-lit-negate-cond
    (equal (lit-eval (lit-negate-cond lit neg)
        invals
        regvals
        aignet)
      (b-xor neg
        (lit-eval lit
          invals
          regvals
          aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lit-eval lit-negate-cond))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-of-aignet-id-fix
    (equal (id-eval (aignet-id-fix x aignet)
        invals
        regvals
        aignet)
      (id-eval x
        invals
        regvals
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((aignet-id-fix x aignet) (id-eval x
           invals
           regvals
           aignet)
         (id-eval <span class="number">0</span>
           invals
           regvals
           aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-aignet-lit-fix
    (equal (lit-eval (aignet-lit-fix x aignet)
        invals
        regvals
        aignet)
      (lit-eval x
        invals
        regvals
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (aignet-lit-fix) (lit-eval))
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x)
          (lit-eval x
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-aignet-lit-fix-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-p aignet2 aignet)
      (equal (lit-eval (aignet-lit-fix x aignet)
          invals
          regvals
          aignet2)
        (lit-eval x
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-of-aignet-lit-fix
    (equal (id-eval (lit-id (aignet-lit-fix x aignet))
        invals
        regvals
        aignet)
      (b-xor (b-xor (lit-neg x)
          (lit-neg (aignet-lit-fix x aignet)))
        (id-eval (lit-id x)
          invals
          regvals
          aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> lit-eval-of-aignet-lit-fix
       <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (lit-eval b-xor)
         (lit-eval-of-aignet-lit-fix lit-eval-of-aignet-lit-fix-extension
           id-eval)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-and-of-lits-of-aignet-lit-fix-1
    (equal (eval-and-of-lits (aignet-lit-fix x aignet)
        y
        invals
        regvals
        aignet)
      (eval-and-of-lits x
        y
        invals
        regvals
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable lit-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-and-of-lits-of-aignet-lit-fix-1-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p aignet2 aignet)
        (aignet-idp (lit-id y)
          aignet))
      (equal (eval-and-of-lits (aignet-lit-fix x aignet)
          y
          invals
          regvals
          aignet2)
        (eval-and-of-lits x
          y
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-and-of-lits-of-aignet-lit-fix-2
    (equal (eval-and-of-lits y
        (aignet-lit-fix x aignet)
        invals
        regvals
        aignet)
      (eval-and-of-lits y
        x
        invals
        regvals
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable lit-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-and-of-lits-of-aignet-lit-fix-2-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p aignet2 aignet)
        (aignet-idp (lit-id y)
          aignet))
      (equal (eval-and-of-lits y
          (aignet-lit-fix x aignet)
          invals
          regvals
          aignet2)
        (eval-and-of-lits y
          x
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-xor-of-lits-of-aignet-lit-fix-1
    (equal (eval-xor-of-lits (aignet-lit-fix x aignet)
        y
        invals
        regvals
        aignet)
      (eval-xor-of-lits x
        y
        invals
        regvals
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable lit-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-xor-of-lits-of-aignet-lit-fix-1-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p aignet2 aignet)
        (aignet-idp (lit-id y)
          aignet))
      (equal (eval-xor-of-lits (aignet-lit-fix x aignet)
          y
          invals
          regvals
          aignet2)
        (eval-xor-of-lits x
          y
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-xor-of-lits-of-aignet-lit-fix-2
    (equal (eval-xor-of-lits y
        (aignet-lit-fix x aignet)
        invals
        regvals
        aignet)
      (eval-xor-of-lits y
        x
        invals
        regvals
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable lit-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> eval-xor-of-lits-of-aignet-lit-fix-2-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-p aignet2 aignet)
        (aignet-idp (lit-id y)
          aignet))
      (equal (eval-xor-of-lits y
          (aignet-lit-fix x aignet)
          invals
          regvals
          aignet2)
        (eval-xor-of-lits y
          x
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable eval-and-of-lits-of-aignet-lit-fix-1
      eval-and-of-lits-of-aignet-lit-fix-1-extension
      eval-and-of-lits-of-aignet-lit-fix-2
      eval-and-of-lits-of-aignet-lit-fix-2-extension
      eval-xor-of-lits-of-aignet-lit-fix-1
      eval-xor-of-lits-of-aignet-lit-fix-1-extension
      eval-xor-of-lits-of-aignet-lit-fix-2
      eval-xor-of-lits-of-aignet-lit-fix-2-extension))
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> lit-eval)
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> lit-eval-list
    (x invals regvals aignet)
    (declare (xargs <span class="keyword">:stobjs</span> (aignet invals regvals)
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (lit-listp x)
          (aignet-lit-listp x aignet)
          (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
            (bits-length invals))
          (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
            (bits-length regvals)))))
    (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
      nil
      (cons (lit-eval (car x)
          invals
          regvals
          aignet)
        (lit-eval-list (cdr x)
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-list-preserved-by-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (aignet-lit-listp lits orig))
      (equal (lit-eval-list lits
          invals
          regvals
          new)
        (lit-eval-list lits
          invals
          regvals
          orig))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-list-preserved-by-extension-inverse
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse)
        (aignet-lit-listp lits orig))
      (equal (lit-eval-list lits
          invals
          regvals
          orig)
        (lit-eval-list lits
          invals
          regvals
          new))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-of-aignet-add-and-new
    (b* ((new-id (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (fanin-count aignet))) (aignet1 (cons (and-node f0 f1)
            aignet)))
      (equal (id-eval new-id
          invals
          regvals
          aignet1)
        (eval-and-of-lits f0
          f1
          invals
          regvals
          aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (id aignet1)
          (id-eval id
            invals
            regvals
            aignet1)))
       <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
       <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (aignet-idp eval-and-of-lits-of-aignet-lit-fix-1
           eval-and-of-lits-of-aignet-lit-fix-2-extension)
         (eval-and-of-lits)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-of-aignet-add-xor-new
    (b* ((new-id (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (fanin-count aignet))) (aignet1 (cons (xor-node f0 f1)
            aignet)))
      (equal (id-eval new-id
          invals
          regvals
          aignet1)
        (eval-xor-of-lits f0
          f1
          invals
          regvals
          aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (id aignet1)
          (id-eval id
            invals
            regvals
            aignet1)))
       <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
       <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (aignet-idp eval-xor-of-lits-of-aignet-lit-fix-1
           eval-xor-of-lits-of-aignet-lit-fix-2-extension)
         (eval-xor-of-lits)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-of-0
    (equal (id-eval <span class="number">0</span>
        invals
        regvals
        aignet)
      <span class="number">0</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-0-and-1
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (lit-eval <span class="number">0</span>
          invals
          regvals
          aignet)
        <span class="number">0</span>)
      (equal (lit-eval <span class="number">1</span>
          invals
          regvals
          aignet)
        <span class="number">1</span>)))
  (deffixequiv-mutual id-eval)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-of-input-index
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (num-ins aignet))
      (equal (id-eval (fanin-count (lookup-stype n
              (pi-stype)
              aignet))
          invals
          regvals
          aignet)
        (bfix (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n invals))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable* id-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-of-reg-index
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (num-regs aignet))
      (equal (id-eval (fanin-count (lookup-stype n <span class="keyword">:reg</span> aignet))
          invals
          regvals
          aignet)
        (bfix (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n regvals))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable* id-eval regnum-&gt;id))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-of-take-num-ins
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (id-eval id
          (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n invals)
          regvals
          aignet)
        (id-eval id
          invals
          regvals
          aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-ind id aignet)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (id-eval id
            invals
            regvals
            aignet)))
       <span class="keyword">:in-theory</span> (enable lit-eval
         eval-and-of-lits
         eval-xor-of-lits)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (enable nth-when-too-large)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-take-num-ins
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (lit-eval lit
          (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n invals)
          regvals
          aignet)
        (lit-eval lit
          invals
          regvals
          aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (lit-eval lit
            invals
            regvals
            aignet))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-of-take-num-regs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (id-eval id
          invals
          (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n regvals)
          aignet)
        (id-eval id
          invals
          regvals
          aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-ind id aignet)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (id-eval id
            invals
            regvals
            aignet)))
       <span class="keyword">:in-theory</span> (enable lit-eval
         eval-and-of-lits
         eval-xor-of-lits)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (enable nth-when-too-large)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-take-num-regs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (lit-eval lit
          invals
          (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n regvals)
          aignet)
        (lit-eval lit
          invals
          regvals
          aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (invals regvals)
          (lit-eval lit
            invals
            regvals
            aignet)))))))</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-eval-conjunction
  ((lits lit-listp) invals
    regvals
    aignet)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-lit-listp lits aignet)
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
      (bits-length invals))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
      (bits-length regvals)))
  <span class="keyword">:returns</span> (res <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a>)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> lits)
    <span class="number">1</span>
    (b-and (lit-eval (car lits)
        invals
        regvals
        aignet)
      (aignet-eval-conjunction (cdr lits)
        invals
        regvals
        aignet)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-eval-conjunction-preserved-by-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding <span class="keyword">:orig</span> aignet)
        (aignet-lit-listp lits aignet))
      (equal (aignet-eval-conjunction lits
          invals
          regvals
          new)
        (aignet-eval-conjunction lits
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-eval-conjunction-of-take-num-ins
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (aignet-eval-conjunction lits
          (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n invals)
          regvals
          aignet)
        (aignet-eval-conjunction lits
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-eval-conjunction-of-take-num-regs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (aignet-eval-conjunction lits
          invals
          (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n regvals)
          aignet)
        (aignet-eval-conjunction lits
          invals
          regvals
          aignet))))
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (aignet-eval-conjunction lits
      invals
      regvals
      aignet)
    <span class="number">2</span>)
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
    equal
    (aignet-eval-conjunction lits
      invals
      regvals
      aignet)
    <span class="number">3</span>))</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define output-eval
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) invals
    regvals
    aignet)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; n (num-outs aignet))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
      (bits-length invals))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
      (bits-length regvals)))
  (lit-eval (outnum-&gt;fanin n aignet)
    invals
    regvals
    aignet)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> output-eval-out-of-bounds
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (stype-count <span class="keyword">:po</span> aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (output-eval n
          invals
          regvals
          aignet)
        <span class="number">0</span>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable output-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> output-eval-of-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (num-outs orig)))
      (equal (output-eval n
          in-vals
          reg-vals
          new)
        (output-eval n
          in-vals
          reg-vals
          orig)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable output-eval
         lookup-stype-in-bounds)))))</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define nxst-eval
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) invals
    regvals
    aignet)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; n (num-regs aignet))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
      (bits-length invals))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
      (bits-length regvals)))
  (lit-eval (regnum-&gt;nxst n aignet)
    invals
    regvals
    aignet)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> lookup-reg-&gt;nxst-out-of-bounds
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (stype-count <span class="keyword">:reg</span> aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (lookup-reg-&gt;nxst n aignet)
        <span class="number">0</span>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-reg-&gt;nxst
         stype-count))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable lookup-reg-&gt;nxst-out-of-bounds)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nxst-eval-out-of-bounds
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (stype-count <span class="keyword">:reg</span> aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
      (equal (nxst-eval n
          in-vals
          reg-vals
          aignet)
        <span class="number">0</span>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable nxst-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-reg-&gt;nxst-of-extension-when-no-new-nxsts
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (equal (stype-count <span class="keyword">:nxst</span> new)
          (stype-count <span class="keyword">:nxst</span> orig))
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (num-regs orig)))
      (equal (lookup-reg-&gt;nxst n new)
        (lookup-reg-&gt;nxst n orig)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lookup-reg-&gt;nxst
         stype-count
         aignet-extension-p))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nxst-eval-of-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (num-regs orig))
        (equal (num-nxsts new)
          (num-nxsts orig)))
      (equal (nxst-eval n
          in-vals
          reg-vals
          new)
        (nxst-eval n
          in-vals
          reg-vals
          orig)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable nxst-eval
         lookup-stype-in-bounds)))))</pre>
  </div>

<div class="form-block other" id="form-36" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable lookup-id-in-bounds-when-positive
        lookup-id-out-of-bounds
        lookup-reg-&gt;nxst-out-of-bounds)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable bfix-when-not-1 nfix-when-not-natp)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable <a class="sym-link system" href="../../../axioms.html#def-resize-list" data-sym="RESIZE-LIST">resize-list</a>)))
  (def-2d-arr frames
    <span class="keyword">:prefix</span> frames
    <span class="keyword">:pred</span> <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a>
    <span class="keyword">:type-decl</span> bit
    <span class="keyword">:default-val</span> <span class="number">0</span>
    <span class="keyword">:fix</span> bfix)
  (defstobj-clone initsts
    bitarr
    <span class="keyword">:strsubst</span> ((<span class="string">"BIT"</span> . <span class="string">"INITSTS"</span>)))
  (def-universal-equiv frames-equiv
    <span class="keyword">:qvars</span> (i j)
    <span class="keyword">:equiv-terms</span> ((bit-equiv (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> i
         (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> j (2darr-&gt;rows x))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> frames-equiv-bit-equiv-congruence
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (frames-equiv x y)
      (bit-equiv (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> i
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> j (2darr-&gt;rows x)))
        (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> i
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> j (2darr-&gt;rows y)))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> frames-equiv-necc (y y)))))
    <span class="keyword">:rule-classes</span> <span class="keyword">:congruence</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> frames-equiv-bfix-congruence
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (frames-equiv x y)
      (equal (bfix (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> i
            (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> j (2darr-&gt;rows x))))
        (bfix (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> i
            (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> j (2darr-&gt;rows y))))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> frames-equiv-necc (y y)))))
    <span class="keyword">:rule-classes</span> <span class="keyword">:congruence</span>)
  (defines id-eval-seq
    (define lit-eval-seq
      ((k <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (lit litp)
        frames
        initsts
        aignet)
      <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-litp lit aignet)
        (&lt; k (frames-nrows frames))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
          (frames-ncols frames))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
          (bits-length initsts)))
      <span class="keyword">:measure</span> (nat-list-measure (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> k (lit-id lit) <span class="number">1</span>))
      <span class="keyword">:verify-guards</span> nil
      (b-xor (id-eval-seq k
          (lit-id lit)
          frames
          initsts
          aignet)
        (lit-neg lit)))
    (define eval-and-of-lits-seq
      ((k <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (lit1 litp)
        (lit2 litp)
        frames
        initsts
        aignet)
      <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-litp lit1 aignet)
        (fanin-litp lit2 aignet)
        (&lt; k (frames-nrows frames))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
          (frames-ncols frames))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
          (bits-length initsts)))
      <span class="keyword">:measure</span> (nat-list-measure (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> k
          (max (lit-id lit1)
            (lit-id lit2))
          <span class="number">2</span>))
      <span class="keyword">:verify-guards</span> nil
      (b-and (lit-eval-seq k
          lit1
          frames
          initsts
          aignet)
        (lit-eval-seq k
          lit2
          frames
          initsts
          aignet)))
    (define eval-xor-of-lits-seq
      ((k <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (lit1 litp)
        (lit2 litp)
        frames
        initsts
        aignet)
      <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-litp lit1 aignet)
        (fanin-litp lit2 aignet)
        (&lt; k (frames-nrows frames))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
          (frames-ncols frames))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
          (bits-length initsts)))
      <span class="keyword">:measure</span> (nat-list-measure (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> k
          (max (lit-id lit1)
            (lit-id lit2))
          <span class="number">2</span>))
      <span class="keyword">:verify-guards</span> nil
      (b-xor (lit-eval-seq k
          lit1
          frames
          initsts
          aignet)
        (lit-eval-seq k
          lit2
          frames
          initsts
          aignet)))
    (define id-eval-seq
      ((k <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (id <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
        frames
        initsts
        aignet)
      <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (id-existsp id aignet)
        (&lt; k (frames-nrows frames))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
          (frames-ncols frames))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
          (bits-length initsts)))
      <span class="keyword">:measure</span> (nat-list-measure (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> k id <span class="number">0</span>))
      (b* (((unless (<a class="sym-link system" href="../../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (id-existsp id aignet))) <span class="number">0</span>) (type (id-&gt;type id aignet)))
        (aignet-case type
          <span class="keyword">:gate</span> (b* ((f0 (gate-id-&gt;fanin0 id aignet)) (f1 (gate-id-&gt;fanin1 id aignet)))
            (if (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> <span class="number">1</span> (id-&gt;regp id aignet))
              (eval-xor-of-lits-seq k
                f0
                f1
                frames
                initsts
                aignet)
              (eval-and-of-lits-seq k
                f0
                f1
                frames
                initsts
                aignet)))
          <span class="keyword">:in</span> (let ((ionum (ci-id-&gt;ionum id aignet)))
            (if (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (id-&gt;regp id aignet)
                <span class="number">1</span>)
              (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
                (get-bit ionum initsts)
                (lit-eval-seq (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
                  (regnum-&gt;nxst ionum aignet)
                  frames
                  initsts
                  aignet))
              (frames-get2 k ionum frames)))
          <span class="keyword">:const</span> <span class="number">0</span>)))
    ///
    (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable id-eval-seq
        lit-eval-seq
        eval-and-of-lits-seq
        eval-xor-of-lits-seq))
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable id-eval-seq
          lit-eval-seq
          eval-and-of-lits-seq
          eval-xor-of-lits-seq)))
    (<a class="sym-link system" href="../../../axioms.html#def-defun-nx" data-sym="DEFUN-NX">defun-nx</a> id-eval-seq-ind
      (k id aignet)
      (declare (xargs <span class="keyword">:measure</span> (two-nats-measure k id)))
      (b* (((unless (<a class="sym-link system" href="../../../axioms.html#def-mbt" data-sym="MBT">mbt</a> (aignet-idp id aignet))) <span class="number">0</span>) (type (id-&gt;type id aignet)))
        (aignet-case type
          <span class="keyword">:gate</span> (b* ((f0 (gate-id-&gt;fanin0 id aignet)) (f1 (gate-id-&gt;fanin1 id aignet)))
            (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (id-eval-seq-ind k
                (lit-id f0)
                aignet)
              (id-eval-seq-ind k
                (lit-id f1)
                aignet)))
          <span class="keyword">:in</span> (if (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (id-&gt;regp id aignet)
              <span class="number">1</span>)
            (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
              <span class="number">0</span>
              (id-eval-seq-ind (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
                (lit-&gt;var (regnum-&gt;nxst (ci-id-&gt;ionum id aignet)
                    aignet))
                aignet))
            <span class="number">0</span>)
          <span class="keyword">:const</span> <span class="number">0</span>)))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> nat-equiv
      equal
      (id-eval-seq k
        id
        frames
        initvals
        aignet)
      <span class="number">1</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-seq-ind k
           id
           aignet))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
      equal
      (id-eval-seq k
        id
        frames
        initvals
        aignet)
      <span class="number">4</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-seq-ind k
           id
           aignet))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> nat-equiv
      equal
      (id-eval-seq k
        id
        frames
        initvals
        aignet)
      <span class="number">2</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-seq-ind k
           id
           aignet)
         <span class="keyword">:expand</span> ((id-eval-seq k
            id
            frames
            initvals
            aignet) (id-eval-seq k
             nat-equiv
             frames
             initvals
             aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> frames-equiv
      equal
      (id-eval-seq k
        id
        frames
        initvals
        aignet)
      <span class="number">3</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-seq-ind k
           id
           aignet)
         <span class="keyword">:expand</span> ((id-eval-seq k
            id
            frames
            initvals
            aignet) (id-eval-seq k
             nat-equiv
             frames
             initvals
             aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> list-equiv
      equal
      (id-eval-seq k
        id
        frames
        initvals
        aignet)
      <span class="number">5</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-seq-ind k
           id
           aignet)
         <span class="keyword">:in-theory</span> (disable id-eval-seq lit-eval-seq)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
          '(<span class="keyword">:expand</span> ((<span class="keyword">:free</span> (k aignet)
               (id-eval-seq k
                 id
                 frames
                 initvals
                 aignet)) (<span class="keyword">:free</span> (k lit aignet)
                (lit-eval-seq k
                  lit
                  frames
                  initvals
                  aignet)))))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> nat-equiv
      equal
      (lit-eval-seq k
        lit
        frames
        initvals
        aignet)
      <span class="number">1</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((lit-eval-seq k
            lit
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
      equal
      (lit-eval-seq k
        lit
        frames
        initvals
        aignet)
      <span class="number">4</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((lit-eval-seq k
            lit
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
      equal
      (lit-eval-seq k
        lit
        frames
        initvals
        aignet)
      <span class="number">2</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((lit-eval-seq k
            lit
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> list-equiv
      equal
      (lit-eval-seq k
        lit
        frames
        initvals
        aignet)
      <span class="number">5</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
            (lit-eval-seq k
              lit
              frames
              initvals
              aignet))))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> nat-equiv
      equal
      (eval-and-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">1</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((eval-and-of-lits-seq k
            lit1
            lit2
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
      equal
      (eval-and-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">5</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((eval-and-of-lits-seq k
            lit1
            lit2
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
      equal
      (eval-and-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">2</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((eval-and-of-lits-seq k
            lit1
            lit2
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
      equal
      (eval-and-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">3</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((eval-and-of-lits-seq k
            lit1
            lit2
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> list-equiv
      equal
      (eval-and-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">6</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
            (eval-and-of-lits-seq k
              lit1
              lit2
              frames
              initvals
              aignet))))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> nat-equiv
      equal
      (eval-xor-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">1</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((eval-xor-of-lits-seq k
            lit1
            lit2
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> bits-equiv
      equal
      (eval-xor-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">5</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((eval-xor-of-lits-seq k
            lit1
            lit2
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
      equal
      (eval-xor-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">2</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((eval-xor-of-lits-seq k
            lit1
            lit2
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> lit-equiv
      equal
      (eval-xor-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">3</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((eval-xor-of-lits-seq k
            lit1
            lit2
            frames
            initvals
            aignet)))))
    (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> list-equiv
      equal
      (eval-xor-of-lits-seq k
        lit1
        lit2
        frames
        initvals
        aignet)
      <span class="number">6</span>
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
            (eval-xor-of-lits-seq k
              lit1
              lit2
              frames
              initvals
              aignet))))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bitp-of-lit-eval-seq
      (<a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> (lit-eval-seq k
          lit
          frames
          initsts
          aignet))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> (lit-eval-seq k
           lit
           frames
           initsts
           aignet))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bitp-of-eval-and-of-lits-seq
      (<a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> (eval-and-of-lits-seq k
          lit1
          lit2
          frames
          initsts
          aignet))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> (eval-and-of-lits-seq k
           lit1
           lit2
           frames
           initsts
           aignet))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bitp-of-eval-xor-of-lits-seq
      (<a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> (eval-xor-of-lits-seq k
          lit1
          lit2
          frames
          initsts
          aignet))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> (eval-xor-of-lits-seq k
           lit1
           lit2
           frames
           initsts
           aignet))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bitp-of-id-eval-seq
      (<a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> (id-eval-seq k
          id
          frames
          initsts
          aignet))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-seq-ind k
           id
           aignet)
         <span class="keyword">:expand</span> ((id-eval-seq k
            id
            frames
            initsts
            aignet) (<span class="keyword">:free</span> (id)
             (id-eval-seq (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">-1</span> k)
               id
               frames
               initsts
               aignet))))))
    (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> id-eval-seq)
    (deffixequiv-mutual id-eval-seq)))</pre>
  </div>

<div class="form-block other" id="form-37" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define output-eval-seq
  ((k <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
    frames
    initsts
    aignet)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; n (num-outs aignet))
    (&lt; k (frames-nrows frames))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
      (frames-ncols frames))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
      (bits-length initsts)))
  (lit-eval-seq k
    (outnum-&gt;fanin n aignet)
    frames
    initsts
    aignet))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define reg-eval-seq
  ((k <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
    frames
    initsts
    aignet)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; n (num-regs aignet))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> k (frames-nrows frames))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
      (frames-ncols frames))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
      (bits-length initsts)))
  (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
    (get-bit n initsts)
    (lit-eval-seq (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
      (regnum-&gt;nxst n aignet)
      frames
      initsts
      aignet)))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection frame-regvals
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable lookup-id-in-bounds-when-positive
        lookup-reg-&gt;nxst-out-of-bounds)))
  (def-list-constructor frame-regvals
    (k frames initsts aignet)
    (declare (xargs <span class="keyword">:stobjs</span> (frames initsts aignet)
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> k)
          (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> k (frames-nrows frames))
          (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-ins aignet)
            (frames-ncols frames))
          (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
            (bits-length initsts)))))
    (reg-eval-seq k
      n
      frames
      initsts
      aignet)
    <span class="keyword">:length</span> (num-regs aignet))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> id-eval-seq-in-terms-of-id-eval
    (equal (id-eval-seq k
        id
        frames
        initsts
        aignet)
      (id-eval id
        (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> k (2darr-&gt;rows frames))
        (frame-regvals k
          frames
          initsts
          aignet)
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-ind id aignet)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (k)
          (id-eval-seq k
            id
            frames
            initsts
            aignet)) (<span class="keyword">:free</span> (invals regvals)
           (id-eval id
             invals
             regvals
             aignet))
         (<span class="keyword">:free</span> (k lit)
           (lit-eval-seq k
             lit
             frames
             initsts
             aignet))
         (<span class="keyword">:free</span> (k lit1 lit2)
           (eval-and-of-lits-seq k
             lit1
             lit2
             frames
             initsts
             aignet))
         (<span class="keyword">:free</span> (k lit1 lit2)
           (eval-xor-of-lits-seq k
             lit1
             lit2
             frames
             initsts
             aignet)))
       <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (lit-eval eval-xor-of-lits
           eval-and-of-lits
           reg-eval-seq)
         (id-eval-seq id-eval)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> lit-eval-seq-in-terms-of-lit-eval
    (equal (lit-eval-seq k
        lit
        frames
        initsts
        aignet)
      (lit-eval lit
        (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> k (2darr-&gt;rows frames))
        (frame-regvals k
          frames
          initsts
          aignet)
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:expand</span> ((lit-eval-seq k
          lit
          frames
          initsts
          aignet))
       <span class="keyword">:in-theory</span> (enable id-eval-seq-in-terms-of-id-eval
         lit-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-seq-of-non-reg/nxst-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (equal (stype-count <span class="keyword">:reg</span> new)
          (stype-count <span class="keyword">:reg</span> orig))
        (equal (stype-count <span class="keyword">:nxst</span> new)
          (stype-count <span class="keyword">:nxst</span> orig))
        (aignet-idp id orig))
      (equal (id-eval-seq k
          id
          frames
          initvals
          new)
        (id-eval-seq k
          id
          frames
          initvals
          orig)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-seq-ind k id new)
       <span class="keyword">:expand</span> ((id-eval-seq k
          id
          frames
          initvals
          new) (id-eval-seq k
           id
           frames
           initvals
           orig)
         (id-eval-seq <span class="number">0</span>
           id
           frames
           initvals
           new)
         (id-eval-seq <span class="number">0</span>
           id
           frames
           initvals
           orig))
       <span class="keyword">:in-theory</span> (enable lit-eval-seq
         eval-and-of-lits-seq
         eval-xor-of-lits-seq))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-seq-of-non-reg/nxst-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (equal (stype-count <span class="keyword">:reg</span> new)
          (stype-count <span class="keyword">:reg</span> orig))
        (equal (stype-count <span class="keyword">:nxst</span> new)
          (stype-count <span class="keyword">:nxst</span> orig))
        (aignet-litp lit orig))
      (equal (lit-eval-seq k
          lit
          frames
          initvals
          new)
        (lit-eval-seq k
          lit
          frames
          initvals
          orig)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
          (lit-eval-seq k
            lit
            frames
            initvals
            aignet))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> frame-regvals-of-non-reg/nxst-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (equal (stype-count <span class="keyword">:reg</span> new)
          (stype-count <span class="keyword">:reg</span> orig))
        (equal (stype-count <span class="keyword">:nxst</span> new)
          (stype-count <span class="keyword">:nxst</span> orig))
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (num-regs orig)))
      (equal (frame-regvals k
          frames
          initvals
          new)
        (frame-regvals k
          frames
          initvals
          orig)))
    <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
       (equal-by-nths-hint)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (enable reg-eval-seq)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> frame-regvals-when-zp
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
      (bits-equiv (frame-regvals k
          frames
          initvals
          aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> (num-regs aignet)
          initvals)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable bits-equiv
         reg-eval-seq
         nth-of-frame-regvals-split)))))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection outs-comb-equiv
  <span class="keyword">:parents</span> (semantics)
  <span class="keyword">:short</span> <span class="string">"Combinational equivalence of aignets, considering only primary outputs"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(&#39;outs-comb-equiv&#39;) says that two aignets&#39; outputs are
combinationally equivalent, that is, corresponding outputs evaluate to the same
value under the same input/register assignment.&lt;/p&gt;"</span>
  (defun-sk outs-comb-equiv
    (aignet aignet2)
    (forall (n invals regvals)
      (equal (equal (output-eval n
            invals
            regvals
            aignet)
          (output-eval n
            invals
            regvals
            aignet2))
        <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:rewrite</span> <span class="keyword">:direct</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable outs-comb-equiv
      outs-comb-equiv-necc))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> outs-comb-equiv-implies-lit-eval-of-fanin
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (outs-comb-equiv aignet aignet2)
      (equal (equal (lit-eval (fanin <span class="number">0</span>
              (lookup-stype n <span class="keyword">:po</span> aignet))
            invals
            regvals
            aignet)
          (lit-eval (fanin <span class="number">0</span>
              (lookup-stype n <span class="keyword">:po</span> aignet2))
            invals
            regvals
            aignet2))
        <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> outs-comb-equiv-necc
       <span class="keyword">:in-theory</span> (enable output-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> refl
      (outs-comb-equiv x x)
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable outs-comb-equiv)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symm
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (outs-comb-equiv aignet aignet2)
        (outs-comb-equiv aignet2 aignet))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> outs-comb-equiv-necc
              (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                  (outs-comb-equiv-witness aignet2
                    aignet)))
              (invals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                  (outs-comb-equiv-witness aignet2
                    aignet)))
              (regvals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                  (outs-comb-equiv-witness aignet2
                    aignet))))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> trans-lemma
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (outs-comb-equiv aignet aignet2)
          (outs-comb-equiv aignet2 aignet3))
        (outs-comb-equiv aignet aignet3))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> outs-comb-equiv-necc
              (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                  (outs-comb-equiv-witness aignet
                    aignet3)))
              (invals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                  (outs-comb-equiv-witness aignet
                    aignet3)))
              (regvals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                  (outs-comb-equiv-witness aignet
                    aignet3)))) (<span class="keyword">:instance</span> outs-comb-equiv-necc
               (aignet aignet2)
               (aignet2 aignet3)
               (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                   (outs-comb-equiv-witness aignet
                     aignet3)))
               (invals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                   (outs-comb-equiv-witness aignet
                     aignet3)))
               (regvals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                   (outs-comb-equiv-witness aignet
                     aignet3))))))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> outs-comb-equiv)
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> outs-comb-equiv
    equal
    (output-eval n
      invals
      regvals
      aignet)
    <span class="number">4</span>
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable outs-comb-equiv-necc
         output-eval))))
  (deffixequiv outs-comb-equiv
    <span class="keyword">:args</span> ((aignet aignet) (aignet2 aignet2))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable outs-comb-equiv)
       <span class="keyword">:cases</span> ((outs-comb-equiv aignet aignet2))) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        (b* ((lit (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> 'outs-comb-equiv clause)) (other (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> '<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> clause))))
          `(<span class="keyword">:expand</span> (,AIGNET::LIT)
            <span class="keyword">:in-theory</span> (disable outs-comb-equiv-necc)
            <span class="keyword">:use</span> ((<span class="keyword">:instance</span> outs-comb-equiv-necc
               (aignet ,(CADR AIGNET::OTHER))
               (aignet2 ,(CADDR AIGNET::OTHER))
               (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                   (outs-comb-equiv-witness . ,(CDR AIGNET::LIT))))
               (invals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                   (outs-comb-equiv-witness . ,(CDR AIGNET::LIT))))
               (regvals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                   (outs-comb-equiv-witness . ,(CDR AIGNET::LIT))))))))))))</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection nxsts-comb-equiv
  <span class="keyword">:parents</span> (semantics)
  <span class="keyword">:short</span> <span class="string">"Combinational equivalence of aignets, considering only next-states"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;@(&#39;outs-comb-equiv&#39;) says that two aignets&#39; next-states are
combinationally equivalent, that is, the next-states of corresponding registers
evaluate to the same value under the same input/register assignment.&lt;/p&gt;"</span>
  (defun-sk nxsts-comb-equiv
    (aignet aignet2)
    (forall (n invals regvals)
      (equal (equal (nxst-eval n
            invals
            regvals
            aignet)
          (nxst-eval n
            invals
            regvals
            aignet2))
        <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:rewrite</span> <span class="keyword">:direct</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable nxsts-comb-equiv
      nxsts-comb-equiv-necc))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nxsts-comb-equiv-implies-lit-eval-of-nxst
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (nxsts-comb-equiv aignet aignet2)
      (equal (equal (lit-eval (lookup-reg-&gt;nxst n aignet)
            invals
            regvals
            aignet)
          (lit-eval (lookup-reg-&gt;nxst n aignet2)
            invals
            regvals
            aignet2))
        <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> nxsts-comb-equiv-necc
       <span class="keyword">:in-theory</span> (enable nxst-eval))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> refl
      (nxsts-comb-equiv x x)
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable nxsts-comb-equiv)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symm
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (nxsts-comb-equiv aignet aignet2)
        (nxsts-comb-equiv aignet2 aignet))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> nxsts-comb-equiv-necc
              (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                  (nxsts-comb-equiv-witness aignet2
                    aignet)))
              (invals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                  (nxsts-comb-equiv-witness aignet2
                    aignet)))
              (regvals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                  (nxsts-comb-equiv-witness aignet2
                    aignet))))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> trans-lemma
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (nxsts-comb-equiv aignet aignet2)
          (nxsts-comb-equiv aignet2 aignet3))
        (nxsts-comb-equiv aignet aignet3))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> nxsts-comb-equiv-necc
              (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                  (nxsts-comb-equiv-witness aignet
                    aignet3)))
              (invals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                  (nxsts-comb-equiv-witness aignet
                    aignet3)))
              (regvals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                  (nxsts-comb-equiv-witness aignet
                    aignet3)))) (<span class="keyword">:instance</span> nxsts-comb-equiv-necc
               (aignet aignet2)
               (aignet2 aignet3)
               (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                   (nxsts-comb-equiv-witness aignet
                     aignet3)))
               (invals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                   (nxsts-comb-equiv-witness aignet
                     aignet3)))
               (regvals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                   (nxsts-comb-equiv-witness aignet
                     aignet3))))))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> nxsts-comb-equiv)
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> nxsts-comb-equiv
    equal
    (nxst-eval n
      invals
      regvals
      aignet)
    <span class="number">4</span>
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable nxsts-comb-equiv-necc
         nxst-eval))))
  (deffixequiv nxsts-comb-equiv
    <span class="keyword">:args</span> ((aignet aignet) (aignet2 aignet2))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable nxsts-comb-equiv)
       <span class="keyword">:cases</span> ((nxsts-comb-equiv aignet aignet2))) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        (b* ((lit (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> 'nxsts-comb-equiv clause)) (other (<a class="sym-link system" href="../../../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../../../axioms.html#def-assoc" data-sym="ASSOC">assoc</a> '<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> clause))))
          `(<span class="keyword">:expand</span> (,AIGNET::LIT)
            <span class="keyword">:in-theory</span> (disable nxsts-comb-equiv-necc)
            <span class="keyword">:use</span> ((<span class="keyword">:instance</span> nxsts-comb-equiv-necc
               (aignet ,(CADR AIGNET::OTHER))
               (aignet2 ,(CADDR AIGNET::OTHER))
               (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                   (nxsts-comb-equiv-witness . ,(CDR AIGNET::LIT))))
               (invals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                   (nxsts-comb-equiv-witness . ,(CDR AIGNET::LIT))))
               (regvals (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                   (nxsts-comb-equiv-witness . ,(CDR AIGNET::LIT))))))))))))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define comb-equiv
  (aignet aignet2)
  <span class="keyword">:parents</span> (semantics)
  <span class="keyword">:short</span> <span class="string">"Combinational equivalence of aignets"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;We consider two aignets to be combinationally equivalent if:
&lt;ul&gt;
&lt;li&gt;corresponding outputs evaluate to the same value under the same input/register
assignment&lt;/li&gt;
&lt;li&gt;next-states of corresponding registers evaluate to the same value under the
same input/register assignment.&lt;/li&gt;&lt;/ul&gt;
&lt;/p&gt;"</span>
  (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-ec-call" data-sym="EC-CALL">ec-call</a> (outs-comb-equiv aignet aignet2))
    (<a class="sym-link system" href="../../../axioms.html#def-ec-call" data-sym="EC-CALL">ec-call</a> (nxsts-comb-equiv aignet aignet2)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> comb-equiv-necc
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (comb-equiv aignet aignet2)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (equal (output-eval n
              invals
              regvals
              aignet)
            (output-eval n
              invals
              regvals
              aignet2))
          <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
        (equal (equal (nxst-eval n
              invals
              regvals
              aignet)
            (nxst-eval n
              invals
              regvals
              aignet2))
          <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable outs-comb-equiv-necc
         nxsts-comb-equiv-necc))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> comb-equiv-necc-lit-eval
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (comb-equiv aignet aignet2)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (equal (lit-eval (fanin <span class="number">0</span>
                (lookup-stype n
                  (po-stype)
                  aignet))
              invals
              regvals
              aignet)
            (lit-eval (fanin <span class="number">0</span>
                (lookup-stype n
                  (po-stype)
                  aignet2))
              invals
              regvals
              aignet2))
          <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
        (equal (equal (lit-eval (lookup-reg-&gt;nxst n aignet)
              invals
              regvals
              aignet)
            (lit-eval (lookup-reg-&gt;nxst n aignet2)
              invals
              regvals
              aignet2))
          <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (output-eval nxst-eval)
         (comb-equiv-necc))
       <span class="keyword">:use</span> comb-equiv-necc)))
  (<a class="sym-link system" href="../../../defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> comb-equiv)
  (<a class="sym-link system" href="../../../defthm.html#def-defrefinement" data-sym="DEFREFINEMENT">defrefinement</a> comb-equiv
    outs-comb-equiv)
  (<a class="sym-link system" href="../../../defthm.html#def-defrefinement" data-sym="DEFREFINEMENT">defrefinement</a> comb-equiv
    nxsts-comb-equiv)
  (deffixcong aignet-equiv
    equal
    (id-eval id
      invals
      regvals
      aignet)
    aignet
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (id-eval-ind id aignet)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
          (id-eval id
            invals
            regvals
            aignet)))
       <span class="keyword">:in-theory</span> (enable lit-eval
         eval-and-of-lits
         eval-xor-of-lits
         aignet-idp))))
  (deffixcong aignet-equiv
    equal
    (lit-eval lit
      invals
      regvals
      aignet)
    aignet
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet)
          (lit-eval lit
            invals
            regvals
            aignet))))))
  (deffixcong aignet-equiv
    equal
    (eval-and-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    aignet
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable eval-and-of-lits))))
  (deffixcong aignet-equiv
    equal
    (eval-xor-of-lits lit1
      lit2
      invals
      regvals
      aignet)
    aignet
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable eval-xor-of-lits))))
  (deffixcong aignet-equiv
    equal
    (output-eval n
      invals
      regvals
      aignet)
    aignet
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable output-eval))))
  (deffixcong aignet-equiv
    equal
    (nxst-eval n
      invals
      regvals
      aignet)
    aignet
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable nxst-eval))))
  (<a class="sym-link system" href="../../../defthm.html#def-defrefinement" data-sym="DEFREFINEMENT">defrefinement</a> aignet-equiv
    outs-comb-equiv
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable outs-comb-equiv))))
  (<a class="sym-link system" href="../../../defthm.html#def-defrefinement" data-sym="DEFREFINEMENT">defrefinement</a> aignet-equiv
    nxsts-comb-equiv
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable nxsts-comb-equiv))))
  (<a class="sym-link system" href="../../../defthm.html#def-defrefinement" data-sym="DEFREFINEMENT">defrefinement</a> aignet-equiv
    comb-equiv
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable comb-equiv)))))</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection seq-equiv
  <span class="keyword">:parents</span> (semantics)
  <span class="keyword">:short</span> <span class="string">"Sequential equivalence of aignets"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;We consider two aignets to be sequentially equivalent if:
&lt;ul&gt;
&lt;li&gt;they have the same number of primary outputs&lt;/li&gt;
&lt;li&gt;corresponding outputs sequentially evaluate to the same value under the
same series of primary input assignments and the all-0 initial register assignment.
&lt;/li&gt;&lt;/ul&gt;
&lt;/p&gt;

&lt;p&gt;This is a weaker condition than combinational equivalence: combinational
equivalence implies sequential equivalence, but not vice versa.&lt;/p&gt;

&lt;p&gt;This particular formulation of sequential equivalence assumes that
evaluations of both networks start in the all-0 state.  Why?  Sequential
equivalence should allow differences in the the state encoding of the two
circuits, so we can&#39;t just universally quantify the initial register
assignment.  We could take the initial register assignments as two additional
inputs, but then this wouldn&#39;t truly be an equivalence relation.  We could
existentially quantify over the initial register assignments, i.e.

&lt;blockquote&gt; there exist initial states for aignets A and B such that for all
input sequences, the outputs of A and B have the same values on each
frame&lt;/blockquote&gt;

but this isn&#39;t really what we want either.  It might instead be something like:

&lt;blockquote&gt; for each initial state of aignet A, there exists an initial state
for aignet B such that for all input sequences, the outputs of A and B have the
same values on each frame&lt;/blockquote&gt;

but this isn&#39;t even an equivalence relation!  Instead we&#39;re going to fix an
initial state for each aignet, choosing the all-0 state as a simple
convention.  One can fix an FSM with a different initial state to one
with the all-0 initial state using @(see aignet-copy-init).&lt;/p&gt;
"</span>
  (defun-sk seq-equiv
    (aignet aignet2)
    (forall (k n inframes)
      (equal (equal (output-eval-seq k
            n
            inframes
            nil
            aignet)
          (output-eval-seq k
            n
            inframes
            nil
            aignet2))
        <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:rewrite</span> <span class="keyword">:direct</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable seq-equiv seq-equiv-necc))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> refl
      (seq-equiv x x)
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable seq-equiv)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symm
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (seq-equiv aignet aignet2)
        (seq-equiv aignet2 aignet))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> seq-equiv-necc
              (k (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                  (seq-equiv-witness aignet2 aignet)))
              (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                  (seq-equiv-witness aignet2 aignet)))
              (inframes (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                  (seq-equiv-witness aignet2 aignet))))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> trans-lemma
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (seq-equiv aignet aignet2)
          (seq-equiv aignet2 aignet3))
        (seq-equiv aignet aignet3))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> seq-equiv-necc
              (k (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                  (seq-equiv-witness aignet aignet3)))
              (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                  (seq-equiv-witness aignet aignet3)))
              (inframes (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                  (seq-equiv-witness aignet aignet3)))) (<span class="keyword">:instance</span> seq-equiv-necc
               (aignet aignet2)
               (aignet2 aignet3)
               (k (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                   (seq-equiv-witness aignet aignet3)))
               (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                   (seq-equiv-witness aignet aignet3)))
               (inframes (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                   (seq-equiv-witness aignet aignet3))))))))))
  (<a class="sym-link system" href="../../../defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a> seq-equiv)
  (<a class="sym-link system" href="../../../defthm.html#def-defcong" data-sym="DEFCONG">defcong</a> seq-equiv
    equal
    (output-eval-seq k
      n
      frames
      nil
      aignet)
    <span class="number">5</span>
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable seq-equiv-necc))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> count-down
      (k)
      (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
        k
        (count-down (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> comb-equiv-implies-same-frame-regvals
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (comb-equiv aignet aignet2)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
          (num-regs aignet2)))
      (bits-equiv (frame-regvals k
          frames
          initsts
          aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> (num-regs aignet)
          (frame-regvals k
            frames
            initsts
            aignet2))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (count-down k)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
          <span class="keyword">:in-theory</span> (enable nth-of-frame-regvals-split
            reg-eval-seq
            lit-eval-seq-in-terms-of-lit-eval
            comb-equiv-necc-lit-eval)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> comb-equiv-implies-seq-equiv
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (comb-equiv aignet aignet2)
      (seq-equiv aignet aignet2))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable seq-equiv
         comb-equiv-necc-lit-eval
         output-eval-seq
         comb-equiv-implies-same-frame-regvals
         lit-eval-seq-in-terms-of-lit-eval)
       <span class="keyword">:cases</span> ((<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
          (num-regs aignet2)))))))</pre>
  </div>

<div class="form-block other" id="form-44" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection seq-equiv-init
  <span class="keyword">:parents</span> (semantics)
  <span class="keyword">:short</span> <span class="string">"Sequential equivalence of aignets on a particular initial state"</span>
  <span class="keyword">:long</span> <span class="string">"&lt;p&gt;See @(see seq-equiv).  This variant additionally takes the initial
state of each aignet as an argument, and requires that they always produce the
same outputs when run starting at that initial state.&lt;/p&gt;"</span>
  (defstobj-clone initsts2
    bitarr
    <span class="keyword">:strsubst</span> ((<span class="string">"BIT"</span> . <span class="string">"INITSTS2"</span>)))
  (defun-sk seq-equiv-init
    (aignet initsts
      aignet2
      initsts2)
    (forall (k n inframes)
      (equal (equal (output-eval-seq k
            n
            inframes
            initsts
            aignet)
          (output-eval-seq k
            n
            inframes
            initsts2
            aignet2))
        <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:rewrite</span> <span class="keyword">:direct</span>)
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable seq-equiv-init
      seq-equiv-init-necc))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> refl
      (seq-equiv-init x
        initsts
        x
        initsts)
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable seq-equiv-init)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> symm
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (seq-equiv-init aignet
          initsts
          aignet2
          initsts2)
        (seq-equiv-init aignet2
          initsts2
          aignet
          initsts))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> seq-equiv-init-necc
              (k (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                  (seq-equiv-init-witness aignet2
                    initsts2
                    aignet
                    initsts)))
              (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                  (seq-equiv-init-witness aignet2
                    initsts2
                    aignet
                    initsts)))
              (inframes (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                  (seq-equiv-init-witness aignet2
                    initsts2
                    aignet
                    initsts))))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> trans-lemma
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (seq-equiv-init aignet
            initsts
            aignet2
            initsts2)
          (seq-equiv-init aignet2
            initsts2
            aignet3
            initsts3))
        (seq-equiv-init aignet
          initsts
          aignet3
          initsts3))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
           <span class="keyword">:use</span> ((<span class="keyword">:instance</span> seq-equiv-init-necc
              (k (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                  (seq-equiv-init-witness aignet
                    initsts
                    aignet3
                    initsts3)))
              (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                  (seq-equiv-init-witness aignet
                    initsts
                    aignet3
                    initsts3)))
              (inframes (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                  (seq-equiv-init-witness aignet
                    initsts
                    aignet3
                    initsts3)))) (<span class="keyword">:instance</span> seq-equiv-init-necc
               (aignet aignet2)
               (aignet2 aignet3)
               (initsts initsts2)
               (initsts2 initsts3)
               (k (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
                   (seq-equiv-init-witness aignet
                     initsts
                     aignet3
                     initsts3)))
               (n (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
                   (seq-equiv-init-witness aignet
                     initsts
                     aignet3
                     initsts3)))
               (inframes (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
                   (seq-equiv-init-witness aignet
                     initsts
                     aignet3
                     initsts3))))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> comb-equiv-implies-seq-equiv-init
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (comb-equiv aignet aignet2)
      (seq-equiv-init aignet
        initvals
        aignet2
        initvals))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable seq-equiv-init
         comb-equiv-necc-lit-eval
         comb-equiv-implies-same-frame-regvals
         output-eval-seq
         lit-eval-seq-in-terms-of-lit-eval)
       <span class="keyword">:cases</span> ((<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (num-regs aignet)
          (num-regs aignet2)))))))</pre>
  </div>

<div class="form-block other" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection aignet-print
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a>)))
  (defund aignet-print-lit
    (lit aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (litp lit)
          (fanin-litp lit aignet))))
    (b* ((id (lit-id lit)) (type (id-&gt;type id aignet))
        ((when (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> type (const-type))) (if (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (lit-neg lit) <span class="number">1</span>)
            <span class="string">"1"</span>
            <span class="string">"0"</span>)))
      (<a class="sym-link system" href="../../../axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~s0~s1~x2"</span>
        (if (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (lit-neg lit) <span class="number">1</span>)
          <span class="string">"~"</span>
          <span class="string">""</span>)
        (if (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> type (in-type))
          (if (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (id-&gt;regp id aignet)
              <span class="number">1</span>)
            <span class="string">"r"</span>
            <span class="string">"i"</span>)
          <span class="string">"g"</span>)
        (if (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> type (in-type))
          (ci-id-&gt;ionum id aignet)
          id))))
  (defund aignet-print-gate
    (n aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> n)
          (id-existsp n aignet)
          (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (id-&gt;type n aignet)
            (gate-type)))))
    (b* ((f0 (gate-id-&gt;fanin0 n aignet)) (f1 (gate-id-&gt;fanin1 n aignet)))
      (<a class="sym-link system" href="../../../axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"g~x0 = ~@1 ~s2 ~@3"</span>
        n
        (aignet-print-lit f0 aignet)
        (if (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> <span class="number">1</span> (id-&gt;regp n aignet))
          <span class="string">"XOR"</span>
          <span class="string">"AND"</span>)
        (aignet-print-lit f1 aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-set-default-hints" data-sym="SET-DEFAULT-HINTS">set-default-hints</a> nil))
  (defund aignet-print-gates
    (n aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> n)
          (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> n (num-fanins aignet)))
        <span class="keyword">:guard-hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable aignet-idp)))
        <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (num-fanins aignet))
            (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))))
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (num-fanins aignet))
                (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))
            <span class="keyword">:exec</span> (<a class="sym-link system" href="../../../axioms.html#def-_3D" data-sym="=">=</a> (num-fanins aignet) n))) nil) ((unless (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (id-&gt;type n aignet)
             (gate-type))) (aignet-print-gates (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix n))
            aignet))
        (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"~@0~%"</span>
            (aignet-print-gate n aignet))))
      (aignet-print-gates (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix n))
        aignet)))
  (defund aignet-print-outs
    (n aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> n)
          (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> n (num-outs aignet)))
        <span class="keyword">:guard-hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (lookup-stype-in-bounds))))
        <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (num-outs aignet))
            (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))))
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (num-outs aignet))
                (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))
            <span class="keyword">:exec</span> (<a class="sym-link system" href="../../../axioms.html#def-_3D" data-sym="=">=</a> (num-outs aignet) n))) nil) (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"o~x0 = ~@1~%"</span>
            n
            (aignet-print-lit (outnum-&gt;fanin n aignet)
              aignet))))
      (aignet-print-outs (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix n))
        aignet)))
  (defund aignet-print-regs
    (n aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> n)
          (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> n (num-regs aignet)))
        <span class="keyword">:guard-hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (lookup-stype-in-bounds))))
        <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (num-regs aignet))
            (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))))
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (num-regs aignet))
                (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))
            <span class="keyword">:exec</span> (<a class="sym-link system" href="../../../axioms.html#def-_3D" data-sym="=">=</a> (num-regs aignet) n))) nil) (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"r~x0 = ~@1~%"</span>
            n
            (aignet-print-lit (regnum-&gt;nxst n aignet)
              aignet))))
      (aignet-print-regs (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix n))
        aignet)))
  (defund aignet-print
    (aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet))
    (<a class="sym-link system" href="../../../axioms.html#def-progn_24" data-sym="PROGN$">progn$</a> (aignet-print-gates <span class="number">0</span> aignet)
      (aignet-print-outs <span class="number">0</span> aignet)
      (aignet-print-regs <span class="number">0</span> aignet)))
  (define aignet-print-dfs
    ((id <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) bitarr aignet)
    <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (id-existsp id aignet)
      (&lt; id (bits-length bitarr)))
    <span class="keyword">:verify-guards</span> nil
    <span class="keyword">:returns</span> (new-bitarr)
    (b* ((type (id-&gt;type id aignet)) ((unless (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> type (gate-type))) bitarr)
        ((when (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (get-bit id bitarr) <span class="number">1</span>)) bitarr)
        (bitarr (set-bit id <span class="number">1</span> bitarr))
        (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"~@0~%"</span>
            (aignet-print-gate id aignet)))
        (bitarr (aignet-print-dfs (lit-id (gate-id-&gt;fanin0 id aignet))
            bitarr
            aignet)))
      (aignet-print-dfs (lit-id (gate-id-&gt;fanin1 id aignet))
        bitarr
        aignet))
    ///
    (defret &lt;fn&gt;-bitarr-len
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> id) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> bitarr))
        (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> new-bitarr)
          (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> bitarr))))
    (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> aignet-print-dfs)))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>