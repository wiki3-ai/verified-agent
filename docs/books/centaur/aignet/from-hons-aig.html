<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>from-hons-aig - ACL2 Book</title>
  <meta property="name" content="from-hons-aig">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">from-hons-aig</h1>
    <div class="path"><a href="from-hons-aig.lisp" class="source-link">books/centaur/aignet/from-hons-aig</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"AIGNET"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="construction.html" title="Open construction">"construction"</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../misc/hons-help.html" title="Open misc/hons-help">"misc/hons-help"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-3" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/aig/aig-vars-fast.html" title="Open centaur/aig/aig-vars-fast">"centaur/aig/aig-vars-fast"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/aig/aig-base.html" title="Open centaur/aig/aig-base">"centaur/aig/aig-base"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-5" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/aig/aig-vars.html" title="Open centaur/aig/aig-vars">"centaur/aig/aig-vars"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/index-of.html" title="Open std/lists/index-of">"std/lists/index-of"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../arithmetic/top-with-meta.html" title="Open arithmetic/top-with-meta">"arithmetic/top-with-meta"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/nthcdr.html" title="Open std/lists/nthcdr">"std/lists/nthcdr"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/resize-list.html" title="Open std/lists/resize-list">"std/lists/resize-list"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/take.html" title="Open std/lists/take">"std/lists/take"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/nth.html" title="Open std/lists/nth">"std/lists/nth"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../std/lists/update-nth.html" title="Open std/lists/update-nth">"std/lists/update-nth"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a> <a class="include-path" href="../../../centaur/aig/accumulate-nodes-vars.html" title="Open centaur/aig/accumulate-nodes-vars">"centaur/aig/accumulate-nodes-vars"</a> <span class="keyword">:dir</span> <span class="keyword">:system</span>))</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>
      <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>
      nfix-when-not-natp
      <a class="sym-link system" href="../../../axioms.html#def-resize-list" data-sym="RESIZE-LIST">resize-list</a>
      nthcdr-of-cdr
      nth-when-zp
      double-containment
      sets-are-true-lists
      <a class="sym-link system" href="../../../axioms.html#def-make-list-ac" data-sym="MAKE-LIST-AC">make-list-ac</a>)))</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable <a class="sym-link system" href="../../../axioms.html#def-true-listp-update-nth" data-sym="TRUE-LISTP-UPDATE-NTH">true-listp-update-nth</a>
      aig-env-lookup)))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define env-to-bitarr
  (vars env)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> vars)
    nil
    (cons (if (aig-env-lookup (car vars) env)
        <span class="number">1</span>
        <span class="number">0</span>)
      (env-to-bitarr (cdr vars) env)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nth-in-env-to-bitarr
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n
          (env-to-bitarr vars env))
        (if (aig-env-lookup (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n vars) env)
          <span class="number">1</span>
          <span class="number">0</span>)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> env-to-bitarr)))))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define env-update-bitarr-aux
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) vars
    env
    bitarr)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars))
    (bits-length bitarr))
  <span class="keyword">:returns</span> (new-bitarr)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> vars)
    bitarr
    (b* ((bitarr (set-bit n
           (bool-&gt;bit (aig-env-lookup (car vars) env))
           bitarr)))
      (env-update-bitarr-aux (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix n))
        (cdr vars)
        env
        bitarr)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> take-n-plus-one
      (equal (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)) x)
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x)
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> repeat)
           (take-of-too-many take-of-1 take-of-zero))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> take-of-update-nth
      (equal (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n
          (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> n val x))
        (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nthcdr-of-update-nth
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n
          (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> m v x))
        (if (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m))
          (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
            v
            (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n x))
          (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>)))))
  (defret env-update-bitarr-aux-elim
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars))
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> bitarr))
      (equal new-bitarr
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n bitarr)
          (env-to-bitarr vars env)
          (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars))
            bitarr))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (env-to-bitarr)
         (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> <a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> (<a class="sym-link system" href="../../../axioms.html#def-force" data-sym="FORCE">force</a>)))))))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nthcdr-of-length
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n x) nil))))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define env-update-bitarr
  (vars env bitarr)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> (env-to-bitarr vars env))
    <span class="keyword">:exec</span> (b* ((bitarr (resize-bits (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
           bitarr)))
      (env-update-bitarr-aux <span class="number">0</span>
        vars
        env
        bitarr))))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> hons-assoc-equal-in-pairlis
    (equal (hons-assoc-equal v
        (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> vars vals))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v vars)
        (cons v
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (index-of v vars) vals))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> index-of <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>)))))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bits-to-bools-aux
  ((i <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) bitarr)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> i (bits-length bitarr))
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (bits-length bitarr)
      (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> i)))
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (bits-length bitarr)
              (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> i)))
          <span class="keyword">:exec</span> (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (bits-length bitarr) i))) nil))
    (cons (equal (get-bit i bitarr) <span class="number">1</span>)
      (bits-to-bools-aux (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix i))
        bitarr))))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define bits-to-bools
  (bitarr)
  <span class="keyword">:verify-guards</span> nil
  (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> (let ((x bitarr))
        (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
          nil
          (cons (if (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (bfix (car x)) <span class="number">1</span>)
              <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
              nil)
            (bits-to-bools (cdr x))))))
    <span class="keyword">:exec</span> (bits-to-bools-aux <span class="number">0</span> bitarr))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nth-of-bits-to-bools
    (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (bits-to-bools x))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x) <span class="number">1</span>))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bits-to-bools-aux-is-bits-to-bools
      (equal (bits-to-bools-aux i bitarr)
        (bits-to-bools (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> i bitarr)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bits-to-bools-aux <a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> nthcdr-of-cdr))
         <span class="keyword">:induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
         <span class="keyword">:expand</span> (bits-to-bools (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> i bitarr))))))
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> bits-to-bools
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable (bits-to-bools))))))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-bitarr-to-aig-env
  ((vars <a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a>) bitarr)
  <span class="keyword">:returns</span> (env)
  (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> vars
    (bits-to-bools bitarr))
  ///
  (defret hons-assoc-equal-in-aignet-bitarr-to-aig-env
    (equal (hons-assoc-equal v env)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v vars)
        (cons v
          (equal <span class="number">1</span>
            (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (index-of v vars) bitarr))))))
  (defret aig-env-lookup-in-aignet-bitarr-to-aig-env
    (equal (aig-env-lookup v env)
      (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v vars))
        (equal <span class="number">1</span>
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (index-of v vars) bitarr))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-env-lookup)))))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define frame-to-bools-aux
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (i <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
    frames)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; n (frames-nrows frames))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> i (frames-ncols frames)))
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (2darr-&gt;rows frames)))
      (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> i)))
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (2darr-&gt;rows frames)))
                (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> i))))
          <span class="keyword">:exec</span> (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (frames-ncols frames) i))) nil))
    (cons (equal (frames-get2 n i frames)
        <span class="number">1</span>)
      (frame-to-bools-aux n
        (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix i))
        frames))))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define frame-to-bools
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) frames)
  <span class="keyword">:verify-guards</span> nil
  <span class="keyword">:guard</span> (&lt; n (frames-nrows frames))
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> (bits-to-bools (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (2darr-&gt;rows frames))))
    <span class="keyword">:exec</span> (frame-to-bools-aux n <span class="number">0</span> frames))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> frame-to-bools-aux-is-frame-to-bools
      (equal (frame-to-bools-aux n
          i
          frames)
        (bits-to-bools (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> i
            (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (2darr-&gt;rows frames)))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable frame-to-bools-aux
           <a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a>
           nthcdr-of-cdr)
         <span class="keyword">:induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
         <span class="keyword">:expand</span> ((bits-to-bools (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> i
              (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (2darr-&gt;rows frames)))))))))
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> frame-to-bools
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (disable (frame-to-bools))))))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-frames-to-aig-envs-aux
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) frames
    (invars <a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a>))
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> n (frames-nrows frames))
    (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> invars)
      (frames-ncols frames)))
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (frames-nrows frames)
      (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (frames-nrows frames)
              (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))
          <span class="keyword">:exec</span> (<a class="sym-link system" href="../../../axioms.html#def-eql" data-sym="EQL">eql</a> (frames-nrows frames) n))) nil))
    (cons (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> invars
        (frame-to-bools n frames))
      (aignet-frames-to-aig-envs-aux (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix n))
        frames
        invars))))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-frame-array-to-aig-envs
  (frame-arr (invars <a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a>))
  <span class="keyword">:non-executable</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:verify-guards</span> nil
  <span class="keyword">:returns</span> (envs)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> frame-arr)
    nil
    (cons (aignet-bitarr-to-aig-env invars
        (car frame-arr))
      (aignet-frame-array-to-aig-envs (cdr frame-arr)
        invars)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-in-aignet-frame-array-to-aig-envs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> frame-arr))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n
          (aignet-frame-array-to-aig-envs frame-arr
            invars))
        (aignet-bitarr-to-aig-env invars
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n frame-arr))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>))))
  (defret len-of-aignet-frame-array-to-aig-envs
    (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> envs)
      (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> frame-arr)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-frames-to-aig-envs-aux-in-terms-of-aignet-frame-array-to-aig-envs
    (equal (aignet-frames-to-aig-envs-aux n
        frames
        invars)
      (aignet-frame-array-to-aig-envs (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n (2darr-&gt;rows frames))
        invars))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-frames-to-aig-envs-aux
         aignet-bitarr-to-aig-env)
       <span class="keyword">:induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
       <span class="keyword">:expand</span> ((aignet-frame-array-to-aig-envs (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n (2darr-&gt;rows frames))
          invars))))))</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aignet-frames-to-aig-envs
  (frames (invars <a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a>))
  <span class="keyword">:returns</span> (envs)
  <span class="keyword">:guard</span> (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> invars)
    (frames-ncols frames))
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> (aignet-frame-array-to-aig-envs (2darr-&gt;rows frames)
        invars))
    <span class="keyword">:exec</span> (aignet-frames-to-aig-envs-aux <span class="number">0</span>
      frames
      invars))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> aignet-frames-to-aig-envs))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection xmemo-well-formedp
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> xmemo-well-formedp
    (xmemo aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet))
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> xmemo)) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>) ((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (car xmemo))) (xmemo-well-formedp (cdr xmemo)
            aignet))
        (val (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> xmemo)))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (litp val)
        (fanin-litp val aignet)
        (xmemo-well-formedp (cdr xmemo)
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> xmemo-well-formedp-lookup
    (let ((look (hons-assoc-equal aig xmemo)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> look
          (xmemo-well-formedp xmemo aignet))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-litp (cdr look) aignet)
          (litp (cdr look)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hons-assoc-equal))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> xmemo-well-formedp-of-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (xmemo-well-formedp xmemo orig))
      (xmemo-well-formedp xmemo new))))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection good-varmap-p
  (defund good-varmap-p
    (varmap aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet))
    (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> varmap)
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (car varmap))
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aig-var-p (<a class="sym-link system" href="../../../axioms.html#def-caar" data-sym="CAAR">caar</a> varmap))
            (litp (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> varmap))
            (fanin-litp (<a class="sym-link system" href="../../../axioms.html#def-cdar" data-sym="CDAR">cdar</a> varmap) aignet)))
        (good-varmap-p (cdr varmap) aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable good-varmap-p)))
  (deffixequiv good-varmap-p
    <span class="keyword">:args</span> ((aignet aignet)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-when-good-varmap-p
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap aignet)
        (hons-assoc-equal var varmap))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-litp (cdr (hons-assoc-equal var varmap))
          aignet)
        (litp (cdr (hons-assoc-equal var varmap)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hons-assoc-equal))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> good-varmap-p-of-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (good-varmap-p varmap orig))
      (good-varmap-p varmap new))))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aig-to-aignet
  ((x <span class="string">"hons aig"</span>) (xmemo <span class="string">"memo table (fast alist)"</span>)
    (varmap <span class="string">"input variable mapping"</span>)
    (gatesimp gatesimp-p)
    strash
    aignet)
  <span class="keyword">:returns</span> (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (lit litp
      <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>))
    xmemo
    strash
    aignet)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap aignet)
    (xmemo-well-formedp xmemo aignet))
  <span class="keyword">:verify-guards</span> nil
  (aig-cases x
    <span class="keyword">:true</span> (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="number">1</span> xmemo strash aignet)
    <span class="keyword">:false</span> (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="number">0</span> xmemo strash aignet)
    <span class="keyword">:var</span> (b* ((look (hons-get x varmap)))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (if look
          (lit-fix (cdr look))
          <span class="number">1</span>)
        xmemo
        strash
        aignet))
    <span class="keyword">:inv</span> (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lit
          xmemo
          strash
          aignet) (aig-to-aignet (car x)
           xmemo
           varmap
           gatesimp
           strash
           aignet)))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (lit-negate lit)
        xmemo
        strash
        aignet))
    <span class="keyword">:and</span> (b* ((look (hons-get x xmemo)) ((when look) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (lit-fix (cdr look))
            xmemo
            strash
            aignet))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lit1
           xmemo
           strash
           aignet) (aig-to-aignet (car x)
            xmemo
            varmap
            gatesimp
            strash
            aignet))
        ((when (<a class="sym-link system" href="../../../axioms.html#def-int_3D" data-sym="INT=">int=</a> (lit-fix lit1) <span class="number">0</span>)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <span class="number">0</span>
            (hons-acons x <span class="number">0</span> xmemo)
            strash
            aignet))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lit2
           xmemo
           strash
           aignet) (aig-to-aignet (cdr x)
            xmemo
            varmap
            gatesimp
            strash
            aignet))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lit strash aignet) (aignet-hash-and lit1
            lit2
            gatesimp
            strash
            aignet))
        (xmemo (hons-acons x lit xmemo)))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lit
        xmemo
        strash
        aignet)))
  ///
  (def-aignet-preservation-thms aig-to-aignet)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-to-aignet-well-formed
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet))
        (xmemo-well-formedp xmemo
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet)))
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lit
            xmemo
            ?strash
            aignet) (aig-to-aignet x
             xmemo
             varmap
             gatesimp
             strash
             aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-litp lit aignet)
          (xmemo-well-formedp xmemo aignet))))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (aig-to-aignet x
         xmemo
         varmap
         gatesimp
         strash
         aignet)
       <span class="keyword">:expand</span> ((aig-to-aignet x
          xmemo
          varmap
          gatesimp
          strash
          aignet) (aig-to-aignet nil
           xmemo
           varmap
           gatesimp
           strash
           aignet)
         (aig-to-aignet <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
           xmemo
           varmap
           gatesimp
           strash
           aignet))
       <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> nil ((<span class="keyword">:definition</span> aig-to-aignet))))))
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> aig-to-aignet)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-of-aig-to-aignet
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix stype)
            (and-stype)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix stype)
            (xor-stype))))
      (equal (stype-count stype
          (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">3</span>
            (aig-to-aignet x
              xmemo
              varmap
              gatesimp
              strash
              aignet)))
        (stype-count stype aignet)))
    <span class="keyword">:hints</span> ((just-induct-and-expand (aig-to-aignet x
         xmemo
         varmap
         gatesimp
         strash
         aignet)))))</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection xmemo-ok
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable id-eval)))
  (<a class="sym-link system" href="../../../axioms.html#def-defun-nx" data-sym="DEFUN-NX">defun-nx</a> aignet-eval-to-env
    (varmap in-vals
      reg-vals
      aignet)
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> varmap)) nil) ((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (car varmap))) (aignet-eval-to-env (cdr varmap)
            in-vals
            reg-vals
            aignet))
        ((cons aig-var lit) (car varmap))
        (val (<a class="sym-link system" href="../../../axioms.html#def-_3D" data-sym="=">=</a> <span class="number">1</span>
            (lit-eval lit
              in-vals
              reg-vals
              aignet))))
      (cons (cons aig-var val)
        (aignet-eval-to-env (cdr varmap)
          in-vals
          reg-vals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-eval-to-env-of-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (good-varmap-p varmap orig))
      (equal (aignet-eval-to-env varmap
          invals
          regvals
          new)
        (aignet-eval-to-env varmap
          invals
          regvals
          orig)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable good-varmap-p))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> present-in-aignet-eval-to-env
    (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (hons-assoc-equal x
        (aignet-eval-to-env varmap
          in-vals
          reg-vals
          aignet))
      (hons-assoc-equal x varmap)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> not-present-in-aignet-eval-to-env
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (hons-assoc-equal x varmap))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (hons-assoc-equal x
          (aignet-eval-to-env varmap
            in-vals
            reg-vals
            aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-in-aignet-eval-to-env
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (hons-assoc-equal x varmap)
      (equal (cdr (hons-assoc-equal x
            (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-_3D" data-sym="=">=</a> <span class="number">1</span>
          (lit-eval (cdr (hons-assoc-equal x varmap))
            in-vals
            reg-vals
            aignet))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:induct</span> (aignet-eval-to-env varmap
         in-vals
         reg-vals
         aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-env-lookup-of-aignet-eval-to-env
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (hons-assoc-equal v varmap)
      (equal (aig-env-lookup v
          (aignet-eval-to-env varmap
            in-vals
            reg-vals
            aignet))
        (<a class="sym-link system" href="../../../axioms.html#def-_3D" data-sym="=">=</a> <span class="number">1</span>
          (lit-eval (cdr (hons-assoc-equal v varmap))
            in-vals
            reg-vals
            aignet))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-eval-to-env aig-env-lookup))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun-nx" data-sym="DEFUN-NX">defun-nx</a> xmemo-ok
    (xmemo varmap
      in-vals
      reg-vals
      aignet)
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> xmemo)) <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>) ((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (car xmemo))) (xmemo-ok (cdr xmemo)
            varmap
            in-vals
            reg-vals
            aignet))
        ((cons aig lit) (car xmemo))
        (env (aignet-eval-to-env varmap
            in-vals
            reg-vals
            aignet)))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (aig-eval aig env)
          (<a class="sym-link system" href="../../../axioms.html#def-_3D" data-sym="=">=</a> <span class="number">1</span>
            (lit-eval lit
              in-vals
              reg-vals
              aignet)))
        (xmemo-ok (cdr xmemo)
          varmap
          in-vals
          reg-vals
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable xmemo-ok))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable xmemo-ok)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-1-to-bitp
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal x <span class="number">0</span>))
        (equal (equal x <span class="number">1</span>) (<a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a> x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> xmemo-ok-lookup
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (xmemo-ok xmemo
          varmap
          in-vals
          reg-vals
          aignet)
        (hons-assoc-equal aig xmemo))
      (equal (lit-eval (cdr (hons-assoc-equal aig xmemo))
          in-vals
          reg-vals
          aignet)
        (bool-&gt;bit (aig-eval aig
            (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable equal-1-to-bitp))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> xmemo-ok-lookup-bind-free
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-bind-free" data-sym="BIND-FREE">bind-free</a> '((varmap . varmap)))
        (xmemo-ok xmemo
          varmap
          in-vals
          reg-vals
          aignet)
        (hons-assoc-equal aig xmemo))
      (equal (lit-eval (cdr (hons-assoc-equal aig xmemo))
          in-vals
          reg-vals
          aignet)
        (bool-&gt;bit (aig-eval aig
            (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> xmemo-ok-of-acons
    (equal (xmemo-ok (cons (cons aig lit) xmemo)
        varmap
        in-vals
        reg-vals
        aignet)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (xmemo-ok xmemo
          varmap
          in-vals
          reg-vals
          aignet)
        (equal (lit-eval lit
            in-vals
            reg-vals
            aignet)
          (bool-&gt;bit (aig-eval aig
              (aignet-eval-to-env varmap
                in-vals
                reg-vals
                aignet))))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable equal-1-to-bitp))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> xmemo-ok-of-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-binding)
        (good-varmap-p varmap orig)
        (xmemo-well-formedp xmemo orig))
      (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (xmemo-ok xmemo
          varmap
          invals
          regvals
          new)
        (xmemo-ok xmemo
          varmap
          invals
          regvals
          orig))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> xmemo-ok-of-nil
    (xmemo-ok nil
      varmap
      in-vals
      reg-vals
      aignet)
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable xmemo-ok)))))</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection aig-to-aignet-correct
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable aignet-add-in)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> id-eval-1
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (id-eval n
              in-vals
              reg-vals
              aignet)
            <span class="number">0</span>))
        (equal (id-eval n
            in-vals
            reg-vals
            aignet)
          <span class="number">1</span>))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> (<span class="keyword">:type-prescription</span> id-eval)))
         <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-bitp" data-sym="BITP">bitp</a>) ((<span class="keyword">:t</span> id-eval)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-to-aignet-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet))
        (xmemo-well-formedp xmemo1
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet))
        (xmemo-ok xmemo1
          varmap
          in-vals
          reg-vals
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet)))
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lit
            xmemo
            ?strash
            aignet1) (aig-to-aignet x
             xmemo1
             varmap
             strash1
             gatesimp
             aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (xmemo-ok xmemo
            varmap
            in-vals
            reg-vals
            aignet1)
          (equal (lit-eval lit
              in-vals
              reg-vals
              aignet1)
            (bool-&gt;bit (aig-eval x
                (aignet-eval-to-env varmap
                  in-vals
                  reg-vals
                  aignet))))
          (equal (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet1)
            (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> ((<span class="keyword">:induction</span> aig-to-aignet) aignet-eval-to-env
           eval-and-of-lits
           aig-env-lookup)
         (aig-eval xmemo-ok
           xmemo-well-formedp
           aignet-eval-to-env
           id-eval
           id-eval-1
           <a class="sym-link system" href="../../../axioms.html#def-default-car" data-sym="DEFAULT-CAR">default-car</a>
           <a class="sym-link system" href="../../../axioms.html#def-default-cdr" data-sym="DEFAULT-CDR">default-cdr</a>
           b-xor))
       <span class="keyword">:induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
       <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
       <span class="keyword">:do-not</span> '(generalize fertilize
         eliminate-destructors)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (env)
          (aig-eval x env)) (<span class="keyword">:free</span> (env) (aig-eval nil env))
         (<span class="keyword">:free</span> (env) (aig-eval <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a> env))
         (aig-to-aignet x
           xmemo1
           varmap
           strash1
           gatesimp
           aignet)
         (aig-to-aignet nil
           xmemo1
           varmap
           strash1
           gatesimp
           aignet)
         (aig-to-aignet <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
           xmemo1
           varmap
           strash1
           gatesimp
           aignet))) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (id-eval-1) nil))))
    <span class="keyword">:otf-flg</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection aiglist-to-aignet
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable id-eval double-containment)))
  (defund aiglist-to-aignet-aux
    (x xmemo
      varmap
      gatesimp
      strash
      aignet
      lits)
    (declare (xargs <span class="keyword">:stobjs</span> (aignet strash)
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (gatesimp-p gatesimp)
          (good-varmap-p varmap aignet)
          (xmemo-well-formedp xmemo aignet)
          (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lits))
        <span class="keyword">:verify-guards</span> nil))
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../../axioms.html#def-reverse" data-sym="REVERSE">reverse</a> lits)
           xmemo
           strash
           aignet)) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lit
           xmemo
           strash
           aignet) (aig-to-aignet (car x)
            xmemo
            varmap
            gatesimp
            strash
            aignet)))
      (aiglist-to-aignet-aux (cdr x)
        xmemo
        varmap
        gatesimp
        strash
        aignet
        (cons lit lits))))
  (defund aiglist-to-aignet
    (x xmemo
      varmap
      gatesimp
      strash
      aignet)
    (declare (xargs <span class="keyword">:stobjs</span> (aignet strash)
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (gatesimp-p gatesimp)
          (good-varmap-p varmap aignet)
          (xmemo-well-formedp xmemo aignet))
        <span class="keyword">:verify-guards</span> nil))
    (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> nil xmemo strash aignet)) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lit
             xmemo
             strash
             aignet) (aig-to-aignet (car x)
              xmemo
              varmap
              gatesimp
              strash
              aignet))
          ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>
             xmemo
             strash
             aignet) (aiglist-to-aignet (cdr x)
              xmemo
              varmap
              gatesimp
              strash
              aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (cons lit <a class="sym-link system" href="../../../axioms.html#def-rest" data-sym="REST">rest</a>)
          xmemo
          strash
          aignet))
      <span class="keyword">:exec</span> (aiglist-to-aignet-aux x
        xmemo
        varmap
        gatesimp
        strash
        aignet
        nil)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable aiglist-to-aignet
        aiglist-to-aignet-aux)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aiglist-to-aignet-aux-elim
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lits)
      (equal (aiglist-to-aignet-aux x
          xmemo
          varmap
          gatesimp
          strash
          aignet
          lits)
        (<a class="sym-link system" href="../../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (rest-lits xmemo
            strash
            aignet)
          (aiglist-to-aignet x
            xmemo
            varmap
            gatesimp
            strash
            aignet)
          (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="../../../axioms.html#def-revappend" data-sym="REVAPPEND">revappend</a> lits rest-lits)
            xmemo
            strash
            aignet)))))
  (def-aignet-preservation-thms aiglist-to-aignet)
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-listp-aiglist-to-aignet-lits
    (lit-listp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
        (aiglist-to-aignet x
          xmemo
          varmap
          gatesimp
          strash
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aiglist-to-aignet-well-formed
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet))
        (xmemo-well-formedp xmemo
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet)))
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lits
            xmemo
            ?strash
            aignet) (aiglist-to-aignet x
             xmemo
             varmap
             gatesimp
             strash
             aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-lit-listp lits aignet)
          (xmemo-well-formedp xmemo aignet)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-lits-of-aiglist-to-aignet
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lits
          ?xmemo
          ?strash
          ?aignet) (aiglist-to-aignet x
           xmemo
           varmap
           gatesimp
           strash
           aignet)))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> lits) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-litp-nth-of-aignet-lit-list
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-lit-listp lits aignet)
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> lits)))
      (aignet-litp (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n lits)
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-litp-nth-of-aiglist-to-aignet
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet))
        (xmemo-well-formedp xmemo
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet))
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lits
            ?xmemo
            ?strash
            aignet) (aiglist-to-aignet x
             xmemo
             varmap
             gatesimp
             strash
             aignet)))
        (aignet-litp (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n lits)
          aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-litp-nth-of-aiglist-to-aignet-ext
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet))
        (xmemo-well-formedp xmemo
          (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> aignet))
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lits
            ?xmemo
            ?strash
            new-aignet) (aiglist-to-aignet x
             xmemo
             varmap
             gatesimp
             strash
             aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-extension-p aignet-ext
            new-aignet)
          (aignet-litp (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n lits)
            aignet-ext)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> bools-&gt;bits
    (x)
    (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> x)
      nil
      (cons (bool-&gt;bit (car x))
        (bools-&gt;bits (cdr x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aiglist-to-aignet-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap aignet)
        (xmemo-well-formedp xmemo1 aignet)
        (xmemo-ok xmemo1
          varmap
          in-vals
          reg-vals
          aignet))
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lits
            xmemo
            ?strash
            aignet1) (aiglist-to-aignet x
             xmemo1
             varmap
             strash1
             gatesimp
             aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (xmemo-ok xmemo
            varmap
            in-vals
            reg-vals
            aignet1)
          (equal (lit-eval-list lits
              in-vals
              reg-vals
              aignet1)
            (bools-&gt;bits (aig-eval-list x
                (aignet-eval-to-env varmap
                  in-vals
                  reg-vals
                  aignet))))
          (equal (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet1)
            (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-nth-in-terms-of-lit-eval-list
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> lst))
        (equal (lit-eval (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n lst)
            in-vals
            reg-vals
            aignet)
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n
            (lit-eval-list lst
              in-vals
              reg-vals
              aignet))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> lit-eval-list)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nth-of-bools-&gt;bits
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (bools-&gt;bits x))
        (bool-&gt;bit (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nth-of-aig-eval-list
    (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (aig-eval-list x env))
      (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x) env))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aiglist-to-aignet-nth-correct
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap aignet)
        (xmemo-well-formedp xmemo1 aignet)
        (xmemo-ok xmemo1
          varmap
          in-vals
          reg-vals
          aignet)
        (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lits
            ?xmemo
            ?strash
            aignet1) (aiglist-to-aignet x
             xmemo1
             varmap
             strash1
             gatesimp
             aignet)))
        (equal (lit-eval (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n lits)
            in-vals
            reg-vals
            aignet1)
          (bool-&gt;bit (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x)
              (aignet-eval-to-env varmap
                in-vals
                reg-vals
                aignet)))))))
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> aiglist-to-aignet-aux)
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> aiglist-to-aignet)
  (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> aiglist-to-aignet-top
    (x varmap
      gatesimp
      strash
      aignet)
    (declare (xargs <span class="keyword">:stobjs</span> (aignet strash)
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (gatesimp-p gatesimp)
          (good-varmap-p varmap aignet))))
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lits
          xmemo
          strash
          aignet) (aiglist-to-aignet x
           nil
           varmap
           gatesimp
           strash
           aignet)))
      (fast-alist-free xmemo)
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lits strash aignet)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-aiglist-to-aignet
    (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
          (aiglist-to-aignet x
            xmemo
            varmap
            gmemo
            gatesimp
            aignet)))
      (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aiglist-to-aignet))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-of-aiglist-to-aignet
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix stype)
            (and-stype)))
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (stype-fix stype)
            (xor-stype))))
      (equal (stype-count stype
          (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">3</span>
            (aiglist-to-aignet x
              xmemo
              varmap
              gatesimp
              strash
              aignet)))
        (stype-count stype aignet)))
    <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable (<span class="keyword">:i</span> aiglist-to-aignet))
       <span class="keyword">:induct</span> (aiglist-to-aignet x
         xmemo
         varmap
         gatesimp
         strash
         aignet)
       <span class="keyword">:expand</span> ((aiglist-to-aignet x
          xmemo
          varmap
          gatesimp
          strash
          aignet))))))</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection keys-bound
  (defund keys-bound
    (keys al)
    (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> keys)
      <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (hons-get (car keys) al)
        (keys-bound (cdr keys) al))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable keys-bound accumulate-aig-vars)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> keys-bound-of-add-extra
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (keys-bound keys al)
      (keys-bound keys
        (cons x al)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hons-assoc-equal))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> keys-bound-of-add
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (keys-bound keys al)
      (keys-bound (cons x keys)
        (cons (cons x y) al)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hons-assoc-equal))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> member-when-keys-bound
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (keys-bound keys al)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (hons-assoc-equal x al)))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> x keys))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> keys-bound-of-accumulate-aig-vars
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (keys-bound acc nodetable)
      (<a class="sym-link system" href="../../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (nodetable acc)
        (accumulate-aig-vars x
          nodetable
          acc)
        (keys-bound acc nodetable))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> no-duplicatesp-of-accumulate-aig-vars
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> acc)
        (keys-bound acc nodetable))
      (<a class="sym-link system" href="../../../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (nodetable acc)
        (accumulate-aig-vars x
          nodetable
          acc)
        (declare (ignore nodetable))
        (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> acc)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable member-when-keys-bound)))))</pre>
  </div>

<div class="form-block other" id="form-36" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define fanin-id-range-p
  ((start <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
    aignet)
  <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
  (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> n)
    <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (fanin-litp (mk-lit start <span class="number">0</span>)
        aignet)
      (fanin-id-range-p (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (lnfix start))
        (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> n)
        aignet)))
  ///
  (set-define-current-function aignet-add-ins)
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (defret fanin-id-range-p-of-aignet-add-ins-lemma
      (fanin-id-range-p (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (fanin-count aignet))
        n
        new-aignet)
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-add-ins)))))
  (defret fanin-id-range-p-of-aignet-add-ins
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal id
        (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (fanin-count aignet)))
      (fanin-id-range-p id
        n
        new-aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-add-ins))))
  (defret aignet-add-ins-preserves-fanin-id-range-p
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (fanin-id-range-p id <a class="sym-link system" href="../../../axioms.html#def-count" data-sym="COUNT">count</a> aignet)
      (fanin-id-range-p id
        <a class="sym-link system" href="../../../axioms.html#def-count" data-sym="COUNT">count</a>
        new-aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-add-ins))))
  (set-define-current-function aignet-add-regs)
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (defret fanin-id-range-p-of-aignet-add-regs-lemma
      (fanin-id-range-p (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (fanin-count aignet))
        n
        new-aignet)
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-add-regs)))))
  (defret fanin-id-range-p-of-aignet-add-regs
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal id
        (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (fanin-count aignet)))
      (fanin-id-range-p id
        n
        new-aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-add-regs))))
  (defret aignet-add-regs-preserves-fanin-id-range-p
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (fanin-id-range-p id <a class="sym-link system" href="../../../axioms.html#def-count" data-sym="COUNT">count</a> aignet)
      (fanin-id-range-p id
        <a class="sym-link system" href="../../../axioms.html#def-count" data-sym="COUNT">count</a>
        new-aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-add-regs)))))</pre>
  </div>

<div class="form-block other" id="form-37" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define consecutive-vars-to-varmap
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) vars varmap)
  <span class="keyword">:returns</span> (new-varmap)
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> vars)) varmap) (varmap (hons-acons (car vars)
          (mk-lit n <span class="number">0</span>)
          varmap)))
    (consecutive-vars-to-varmap (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix n))
      (cdr vars)
      varmap))
  ///
  (defret lookup-in-consecutive-vars-to-varmap-under-iff
    (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (hons-assoc-equal v new-varmap)
      (<a class="sym-link system" href="../../../axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v vars)
        (hons-assoc-equal v varmap))))
  (defret lookup-in-consecutive-vars-to-varmap-when-not-var
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v vars)))
      (equal (hons-assoc-equal v new-varmap)
        (hons-assoc-equal v varmap))))
  (defret lookup-in-consecutive-vars-to-varmap-when-var
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v vars))
        (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> vars))
      (equal (hons-assoc-equal v new-varmap)
        (cons v
          (mk-lit (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
              (index-of v vars))
            <span class="number">0</span>))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable index-of))))
  (defret good-varmap-p-of-consecutive-vars-to-varmap
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (good-varmap-p varmap aignet)
        (aig-var-listp vars)
        (fanin-id-range-p n
          (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
          aignet))
      (good-varmap-p new-varmap aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable fanin-id-range-p
         good-varmap-p)))))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> member-implies-natp-index-of-strong
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k x))
      (<a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a> (index-of k x)))))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> member-implies-index-of-less-strong
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> k x))
      (&lt; (index-of k x) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
    <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:linear</span>)))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection aig-fsm-prepare-aignet/varmap
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable <a class="sym-link system" href="../../../axioms.html#def-length" data-sym="LENGTH">length</a>)))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aiglist-vars-of-append
    (equal (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
      (union (aiglist-vars a) (aiglist-vars b)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aiglist-vars))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> no-duplicatesp-of-set-diff
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> x)
        (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (<a class="sym-link system" href="../../../axioms.html#def-set-difference_24" data-sym="SET-DIFFERENCE$">set-difference$</a> x y)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-set-difference_24" data-sym="SET-DIFFERENCE$">set-difference$</a>)))))
  (define aig-fsm-prepare-aignet/varmap
    (reg-alist out-list
      max-nodes
      aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> max-nodes)
        <span class="keyword">:guard-debug</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>))
    <span class="keyword">:returns</span> (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> varmap
      input-vars
      reg-vars
      new-aignet)
    (b* ((reg-aigs (alist-vals reg-alist)) (<a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> (aig-vars-unordered-list (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> reg-aigs out-list)))
        (reg-vars (alist-keys reg-alist))
        (in-vars (hons-set-diff <a class="sym-link system" href="../../../axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> reg-vars))
        (nregs (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> reg-vars))
        (nins (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> in-vars))
        (nouts (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> out-list))
        (max-nodes (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (if (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> max-nodes)
              max-nodes
              <span class="number">1000</span>)
            <span class="keyword">:exec</span> max-nodes))
        (aignet (aignet-init nouts
            nregs
            nins
            max-nodes
            aignet))
        (aignet (aignet-add-ins nins aignet))
        (aignet (aignet-add-regs nregs aignet))
        (varmap (consecutive-vars-to-varmap <span class="number">1</span> in-vars nil))
        (varmap (consecutive-vars-to-varmap (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> nins)
            reg-vars
            varmap)))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> varmap
        in-vars
        reg-vars
        aignet))
    ///
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable aig-fsm-prepare-aignet/varmap)))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-of-aig-fsm-prepare-aignet/varmap-invars
      (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
          (aig-fsm-prepare-aignet/varmap reg-alist
            out-list
            max-gates
            aignet)))
      <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-of-aig-fsm-prepare-aignet/varmap-regvars
      (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
          (aig-fsm-prepare-aignet/varmap reg-alist
            out-list
            max-gates
            aignet)))
      <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>))
    (defret num-outs-of-aig-fsm-prepare-aignet/varmap
      (equal (stype-count <span class="keyword">:po</span> new-aignet) <span class="number">0</span>))
    (defret num-nxsts-of-aig-fsm-prepare-aignet/varmap
      (equal (stype-count <span class="keyword">:nxst</span> new-aignet) <span class="number">0</span>))
    (defret num-ins-of-aig-fsm-prepare-aignet/varmap
      (equal (stype-count <span class="keyword">:pi</span> new-aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> input-vars)))
    (defret num-regs-of-aig-fsm-prepare-aignet/varmap
      (equal (stype-count <span class="keyword">:reg</span> new-aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (alist-keys reg-alist))))
    (defret reg-vars-of-aig-fsm-prepare-aignet/varmap
      (equal reg-vars
        (alist-keys reg-alist)))
    (defret in-vars-of-aig-fsm-prepare-aignet/varmap
      (set-equiv input-vars
        (<a class="sym-link system" href="../../../axioms.html#def-set-difference_24" data-sym="SET-DIFFERENCE$">set-difference$</a> (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (alist-vals reg-alist)
              out-list))
          (alist-keys reg-alist))))
    (defret aig-fsm-prepare-input-varmap-lookup
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v
            (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (alist-vals reg-alist)
                out-list)))
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (hons-assoc-equal v reg-alist)))
        (b* ((index (index-of v input-vars)) (input-id (fanin-count (lookup-stype index <span class="keyword">:pi</span> new-aignet))))
          (equal (hons-assoc-equal v varmap)
            (cons v (mk-lit input-id <span class="number">0</span>))))))
    (defret aig-fsm-prepare-reg-varmap-lookup
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v
            (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (alist-vals reg-alist)
                out-list)))
          (hons-assoc-equal v reg-alist)
          (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (alist-keys reg-alist)))
        (b* ((index (index-of v (alist-keys reg-alist))) (reg-id (fanin-count (lookup-stype index <span class="keyword">:reg</span> new-aignet))))
          (equal (hons-assoc-equal v varmap)
            (cons v (mk-lit reg-id <span class="number">0</span>))))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-var-listp-of-accumulate-aig-vars
      (equal (aig-var-listp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
            (accumulate-aig-vars x
              nodetable
              acc)))
        (aig-var-listp acc))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable accumulate-aig-vars))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-var-listp-of-set-difference
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aig-var-listp x)
        (aig-var-listp (<a class="sym-link system" href="../../../axioms.html#def-set-difference_24" data-sym="SET-DIFFERENCE$">set-difference$</a> x y)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-set-difference_24" data-sym="SET-DIFFERENCE$">set-difference$</a>))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-var-listp-of-accumulate-aig-vars-list
      (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (aig-var-listp (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
            (accumulate-aig-vars-list x
              nodetable
              acc)))
        (aig-var-listp acc))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable accumulate-aig-vars-list))))
    (defret good-varmap-p-of-aig-fsm-prepare-aignet/varmap
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aig-var-listp (alist-keys reg-alist))
        (good-varmap-p varmap new-aignet)))))</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-listp-of-take
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (lit-listp x)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
      (lit-listp (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x)))))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-listp-of-nthcdr
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (lit-listp x)
      (lit-listp (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n x)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a>)))))</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-alist-vals
    (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (alist-vals x))
      (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (alist-keys x)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable alist-keys alist-vals)))))</pre>
  </div>

<div class="form-block other" id="form-44" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-lit-listp-of-take
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-lit-listp x aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))
      (aignet-lit-listp (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x)
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-lit-listp)))))</pre>
  </div>

<div class="form-block other" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-lit-listp-of-nthcdr
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aignet-lit-listp x aignet)
      (aignet-lit-listp (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n x)
        aignet))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-lit-listp <a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a>)))))</pre>
  </div>

<div class="form-block other" id="form-46" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-list-of-take
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x))
    (equal (lit-eval-list (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x)
        in-vals
        reg-vals
        aignet)
      (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n
        (lit-eval-list x
          in-vals
          reg-vals
          aignet))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a>))))</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-eval-list-of-append
  (equal (aig-eval-list (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> a b) env)
    (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (aig-eval-list a env)
      (aig-eval-list b env))))</pre>
  </div>

<div class="form-block other" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nthcdr-nil
    (equal (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n nil) nil)))</pre>
  </div>

<div class="form-block other" id="form-49" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-list-of-nthcdr
  (equal (lit-eval-list (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n x)
      in-vals
      reg-vals
      aignet)
    (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n
      (lit-eval-list x
        in-vals
        reg-vals
        aignet)))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a>))))</pre>
  </div>

<div class="form-block other" id="form-50" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nthcdr-of-append
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> a))
    (equal (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
      b))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a>)
     <span class="keyword">:induct</span> (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n a))))</pre>
  </div>

<div class="form-block other" id="form-51" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> nil
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nthcdr-empty
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lst)
            (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> lst) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)))
          (equal (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n lst) nil))))))</pre>
  </div>

<div class="form-block other" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defsection aig-fsm-to-aignet
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable alist-keys aignet-lit-listp)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable good-varmap-p)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> litp-integerp
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (litp lit)
        (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (integerp lit) (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> lit)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> car-nonnil-forward
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (car x) nil))
      (consp x))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:forward-chaining</span> <span class="keyword">:trigger-terms</span> ((car x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> stype-count-of-cdr-extension
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aignet-extension-bind-inverse)
        (consp orig)
        (equal (stype (car orig))
          (stype-fix stype)))
      (&lt; (stype-count stype (cdr orig))
        (stype-count stype new)))
    <span class="keyword">:rule-classes</span> ((<span class="keyword">:linear</span> <span class="keyword">:trigger-terms</span> ((stype-count stype (cdr orig))))))
  (defsection aignet-add-outs
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable aignet-add-outs)))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> good-varmap-p-of-aignet-add-outs
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (good-varmap-p varmap aignet)
        (good-varmap-p varmap
          (aignet-add-outs out-lits aignet)))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (aignet-add-outs out-lits aignet)))))
  (define aig-fsm-to-aignet
    (reg-alist out-list
      max-nodes
      gatesimp
      aignet)
    (declare (xargs <span class="keyword">:stobjs</span> aignet
        <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-posp" data-sym="POSP">posp</a> max-nodes)
          (gatesimp-p gatesimp)
          (aig-var-listp (alist-keys reg-alist)))
        <span class="keyword">:verify-guards</span> nil))
    <span class="keyword">:returns</span> (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> (new-aignet)
      (varmap)
      (invars)
      (regvars))
    (b* (((local-stobjs strash) (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
           varmap
           invars
           regvars
           strash)) (reg-aigs (alist-vals reg-alist))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> varmap
           invars
           regvars
           aignet) (aig-fsm-prepare-aignet/varmap reg-alist
            out-list
            max-nodes
            aignet))
        (strash (if (gatesimp-&gt;hashp gatesimp)
            (strashtab-init max-nodes
              nil
              nil
              strash)
            strash))
        ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> lits strash aignet) (cwtime (aiglist-to-aignet-top (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> reg-aigs out-list)
              varmap
              gatesimp
              strash
              aignet)))
        (nregs (<a class="sym-link system" href="../../../axioms.html#def-length" data-sym="LENGTH">length</a> reg-aigs))
        (out-lits (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> nregs lits))
        (reg-lits (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> nregs lits))
        (aignet (aignet-set-nxsts <span class="number">0</span> reg-lits aignet))
        (aignet (aignet-add-outs out-lits aignet)))
      (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
        varmap
        invars
        regvars
        strash))
    ///
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable aig-fsm-to-aignet)))
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-when-lit-listp-rw
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (lit-listp x)
          (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> x))))
    (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> aig-fsm-to-aignet
      <span class="keyword">:guard-debug</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-aig-fsm-to-aignet-invars
      (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">2</span>
          (aig-fsm-to-aignet regs
            outs
            max-gates
            gatesimp
            aignet)))
      <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> true-listp-aig-fsm-to-aignet-regvars
      (<a class="sym-link system" href="../../../axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">3</span>
          (aig-fsm-to-aignet regs
            outs
            max-gates
            gatesimp
            aignet)))
      <span class="keyword">:rule-classes</span> (<span class="keyword">:rewrite</span> <span class="keyword">:type-prescription</span>))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-to-aignet-output-correct
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
            varmap
            ?invars
            ?regvars) (aig-fsm-to-aignet reg-alist
             out-list
             max-gates
             gatesimp
             aignet)) (env (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aig-var-listp (alist-keys reg-alist))
            (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> out-list)))
          (equal (lit-eval (fanin <span class="number">0</span>
                (lookup-stype n
                  (po-stype)
                  aignet))
              in-vals
              reg-vals
              aignet)
            (bool-&gt;bit (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n out-list)
                env)))))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
         <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (aignet1 aignet2)
            (id-eval (fanin-count (lookup-stype n
                  (po-stype)
                  aignet1))
              in-vals
              reg-vals
              aignet2))))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-to-aignet-nxst-correct
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
            varmap
            ?invars
            ?regvars) (aig-fsm-to-aignet reg-alist
             out-list
             max-gates
             gatesimp
             aignet)) (env (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aig-var-listp (alist-keys reg-alist))
            (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
              (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (alist-keys reg-alist))))
          (equal (lit-eval (lookup-reg-&gt;nxst n aignet)
              in-vals
              reg-vals
              aignet)
            (bool-&gt;bit (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (alist-vals reg-alist))
                env)))))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)))
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> alist-keys-of-aignet-eval-to-env
        (equal (alist-keys (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet))
          (alist-keys varmap))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-eval-to-env)))))
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> alist-keys-of-consecutive-vars-to-varmap
        (equal (alist-keys (consecutive-vars-to-varmap n
              vars
              varmap))
          (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (rev (list-fix vars))
            (alist-keys varmap)))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable consecutive-vars-to-varmap
             alist-keys)))))
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> acl2-numberp-of-index-of-when-member
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> x lst))
          (acl2-numberp (index-of x lst)))))
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> no-duplicatesp-of-set-diff
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> a)
          (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (<a class="sym-link system" href="../../../axioms.html#def-set-difference_24" data-sym="SET-DIFFERENCE$">set-difference$</a> a b)))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-set-difference_24" data-sym="SET-DIFFERENCE$">set-difference$</a>)))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-eval-to-env-of-varmap-lookup
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?aignet
            varmap
            invars
            regvars) (aig-fsm-to-aignet reg-alist
             out-list
             max-gates
             gatesimp
             aignet)) (env (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (alist-keys reg-alist))
            (aig-var-listp (alist-keys reg-alist)))
          (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (hons-assoc-equal var env)
              (hons-assoc-equal var
                (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (aignet-bitarr-to-aig-env regvars
                    reg-vals)
                  (aignet-bitarr-to-aig-env invars
                    in-vals))))
            (equal (cdr (hons-assoc-equal var env))
              (cdr (hons-assoc-equal var
                  (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (aignet-bitarr-to-aig-env regvars
                      reg-vals)
                    (aignet-bitarr-to-aig-env invars
                      in-vals))))))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (aignet-eval-to-env aignet-bitarr-to-aig-env
             aig-fsm-prepare-aignet/varmap
             aignet-idp
             hons-assoc-equal-iff-member-alist-keys)
           (alist-keys-member-hons-assoc-equal))
         <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
         <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (n aignet)
            (lit-eval (make-lit (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n) <span class="number">0</span>)
              in-vals
              reg-vals
              aignet)) (<span class="keyword">:free</span> (n aignet)
             (id-eval (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> n)
               in-vals
               reg-vals
               aignet))))))
    (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-of-hons-assoc-equal
        (equal (equal (hons-assoc-equal k x)
            y)
          (if (hons-assoc-equal k x)
            (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp y)
              (equal (car y) k)
              (equal (cdr y)
                (cdr (hons-assoc-equal k x))))
            (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> y)))
        <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hons-assoc-equal)))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-eval-to-env-of-varmap-lookup-alist-equiv
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> ?aignet
            varmap
            invars
            regvars) (aig-fsm-to-aignet reg-alist
             out-list
             max-gates
             gatesimp
             aignet)) (env (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet)))
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (alist-keys reg-alist))
            (aig-var-listp (alist-keys reg-alist)))
          (alist-equiv env
            (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (aignet-bitarr-to-aig-env regvars
                reg-vals)
              (aignet-bitarr-to-aig-env invars
                in-vals)))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (alist-equiv-iff-agree-on-bad-guy equal-of-hons-assoc-equal)
           (aig-fsm-to-aignet)))))
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> good-varmap-p-of-aig-fsm-to-aignet
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (aig-var-listp (alist-keys regs))
        (good-varmap-p (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">1</span>
            (aig-fsm-to-aignet regs
              outs
              max-gates
              gatesimp
              aignet))
          (<a class="sym-link system" href="../../../axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a> <span class="number">0</span>
            (aig-fsm-to-aignet regs
              outs
              max-gates
              gatesimp
              aignet))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (e/d* nil
           (aiglist-to-aignet lit-eval-list
             aig-eval-list
             aignet-eval-to-env
             aig-vars
             hons-sd1
             <a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a>
             <a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a>
             hons-assoc-equal
             make-fal
             double-containment
             <a class="sym-link system" href="../../../axioms.html#def-resize-list" data-sym="RESIZE-LIST">resize-list</a>))
         <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)))
    (defret outputs-of-aig-fsm-to-aignet
      (equal (stype-count <span class="keyword">:po</span> new-aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> out-list)))
    (defret inputs-of-aig-fsm-to-aignet
      (equal (stype-count <span class="keyword">:pi</span> new-aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> invars)))
    (defret aig-fsm-to-aignet-input-varmap-lookup
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v
            (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (alist-vals reg-alist)
                out-list)))
          (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (hons-assoc-equal v reg-alist)))
        (b* ((index (index-of v invars)) (input-id (fanin-count (lookup-stype index <span class="keyword">:pi</span> new-aignet))))
          (equal (hons-assoc-equal v varmap)
            (cons v (mk-lit input-id <span class="number">0</span>))))))
    (defret aig-fsm-to-aignet-reg-varmap-lookup
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v
            (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (alist-vals reg-alist)
                out-list)))
          (hons-assoc-equal v reg-alist)
          (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (alist-keys reg-alist)))
        (b* ((index (index-of v (alist-keys reg-alist))) (reg-id (fanin-count (lookup-stype index <span class="keyword">:reg</span> new-aignet))))
          (equal (hons-assoc-equal v varmap)
            (cons v (mk-lit reg-id <span class="number">0</span>))))))
    (defret in-vars-of-aig-fsm-to-aignet
      (set-equiv invars
        (<a class="sym-link system" href="../../../axioms.html#def-set-difference_24" data-sym="SET-DIFFERENCE$">set-difference$</a> (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (alist-vals reg-alist)
              out-list))
          (alist-keys reg-alist))))
    (defret reg-vars-of-aig-fsm-to-aignet
      (equal regvars
        (alist-keys reg-alist)))
    (defret reg-count-of-aig-fsm-to-aignet
      (equal (stype-count <span class="keyword">:reg</span> new-aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (alist-keys reg-alist))))
    (defret in-count-of-aig-fsm-to-aignet
      (equal (stype-count <span class="keyword">:pi</span> new-aignet)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> invars)))))</pre>
  </div>

<div class="form-block other" id="form-53" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aig-fsm-frame-env
  ((regs <span class="string">"alist"</span>) (curr-st <span class="string">"bindings to t/nil"</span>)
    (in <span class="string">"bindings to t/nil"</span>))
  (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (fast-alist-free (with-fast-alist curr-st
        (aig-env-extract (alist-keys regs)
          curr-st)))
    in)
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lookup-in-aig-fsm-frame-env
    (equal (aig-env-lookup v
        (aig-fsm-frame-env regs
          curr-st
          in))
      (if (hons-assoc-equal v regs)
        (aig-env-lookup v curr-st)
        (aig-env-lookup v in)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-env-lookup))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> hons-assoc-equal-in-aig-fsm-frame-env
    (equal (hons-assoc-equal v
        (aig-fsm-frame-env regs
          curr-st
          in))
      (if (hons-assoc-equal v regs)
        (cons v (aig-env-lookup v curr-st))
        (hons-assoc-equal v in)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-env-lookup)))))</pre>
  </div>

<div class="form-block other" id="form-54" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aig-fsm-frame-outs
  ((outputs <span class="string">"aig list"</span>) (regs <span class="string">"alist"</span>)
    (curr-st <span class="string">"bindings to t/nil"</span>)
    (in <span class="string">"bindings to t/nil"</span>))
  (b* ((env (aig-fsm-frame-env regs
         curr-st
         in)))
    (aig-eval-list outputs env))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nth-of-aig-fsm-frame-outs
    (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n
        (aig-fsm-frame-outs outputs
          regs
          curr-st
          in))
      (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n outputs)
        (aig-fsm-frame-env regs
          curr-st
          in)))))</pre>
  </div>

<div class="form-block other" id="form-55" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aig-fsm-frame-nextst
  ((regs <span class="string">"alist"</span>) (curr-st <span class="string">"bindings to t/nil"</span>)
    (in <span class="string">"bindings to t/nil"</span>))
  <span class="keyword">:returns</span> (nextst)
  (b* ((env (aig-fsm-frame-env regs
         curr-st
         in)))
    (aig-eval-alist regs env))
  ///
  (defret aig-env-lookup-in-aig-fsm-frame-nextst
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (hons-assoc-equal v regs)
      (equal (aig-env-lookup v nextst)
        (aig-eval (cdr (hons-assoc-equal v regs))
          (aig-fsm-frame-env regs
            curr-st
            in))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-env-lookup)))))</pre>
  </div>

<div class="form-block other" id="form-56" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aig-fsm-run
  ((outputs <span class="string">"aig list"</span>) (regs <span class="string">"alist"</span>)
    (curr-st <span class="string">"bindings to t/nil"</span>)
    (ins <span class="string">"list of bindings to t/nil"</span>))
  <span class="keyword">:returns</span> (result-list <span class="string">"list of bool lists"</span>)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> ins)
    nil
    (b* ((env (aig-fsm-frame-env regs
           curr-st
           (car ins))))
      (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (b* ((outs (aig-eval-list outputs env)) (next-st (aig-eval-alist regs env)))
          (cons outs
            (aig-fsm-run outputs
              regs
              next-st
              (cdr ins))))
        <span class="keyword">:exec</span> (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> (cdr ins))
          (with-fast-alist env
            (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (aig-eval-list outputs env)))
          (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> outs next-st) (with-fast-alist env
                 (b* ((outs (aig-eval-list outputs env)) (next-st (aig-eval-alist regs env)))
                   (<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> outs next-st)))))
            (cons outs
              (aig-fsm-run outputs
                regs
                next-st
                (cdr ins))))))))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-run-of-cons
    (equal (aig-fsm-run outputs
        regs
        curr-st
        (cons in1 rest-ins))
      (cons (aig-fsm-frame-outs outputs
          regs
          curr-st
          in1)
        (aig-fsm-run outputs
          regs
          (aig-fsm-frame-nextst regs
            curr-st
            in1)
          rest-ins)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-fsm-frame-outs
         aig-fsm-frame-nextst))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> car-of-aig-fsm-run
    (equal (car (aig-fsm-run outputs
          regs
          curr-st
          ins))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp ins)
        (aig-fsm-frame-outs outputs
          regs
          curr-st
          (car ins)))))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> cdr-of-aig-fsm-run
    (equal (cdr (aig-fsm-run outputs
          regs
          curr-st
          ins))
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (consp ins)
        (aig-fsm-run outputs
          regs
          (aig-fsm-frame-nextst regs
            curr-st
            (car ins))
          (cdr ins))))))</pre>
  </div>

<div class="form-block other" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aig-fsm-states
  ((regs <span class="string">"alist"</span>) (curr-st <span class="string">"bindings to t/nil"</span>)
    (ins <span class="string">"list of bindings to t/nil"</span>))
  (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> ins)) nil) (next-st (aig-fsm-frame-nextst regs
          curr-st
          (car ins))))
    (cons next-st
      (aig-fsm-states regs
        next-st
        (cdr ins))))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nth-of-aig-fsm-run
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> ins))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n
          (aig-fsm-run outputs
            regs
            curr-st
            ins))
        (aig-fsm-frame-outs outputs
          regs
          (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> n)
            curr-st
            (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> n)
              (aig-fsm-states regs
                curr-st
                ins)))
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n ins))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-fsm-states <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>)))))</pre>
  </div>

<div class="form-block other" id="form-58" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-run-in-terms-of-aig-eval
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> ins))
    (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n
        (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> k
          (aig-fsm-run outputs
            regs
            curr-st
            ins)))
      (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n outputs)
        (aig-fsm-frame-env regs
          (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
            curr-st
            (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
              (aig-fsm-states regs
                curr-st
                ins)))
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> k ins))))))</pre>
  </div>

<div class="form-block other" id="form-59" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> aig-fsm-state-ind
    (k regs curr-st ins)
    (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
      (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> regs curr-st ins)
      (aig-fsm-state-ind (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
        regs
        (aig-fsm-frame-nextst regs
          curr-st
          (car ins))
        (cdr ins)))))</pre>
  </div>

<div class="form-block other" id="form-60" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-state-in-terms-of-aig-eval
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (hons-assoc-equal v regs)
      (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> ins)))
    (equal (aig-env-lookup v
        (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> k
          (aig-fsm-states regs
            curr-st
            ins)))
      (aig-eval (cdr (hons-assoc-equal v regs))
        (aig-fsm-frame-env regs
          (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
            curr-st
            (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
              (aig-fsm-states regs
                curr-st
                ins)))
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> k ins)))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (aig-fsm-states <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>) (aig-env-lookup))
     <span class="keyword">:induct</span> (aig-fsm-state-ind k
       regs
       curr-st
       ins)
     <span class="keyword">:expand</span> ((aig-fsm-states regs
        curr-st
        ins)))))</pre>
  </div>

<div class="form-block other" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-sk reg-vals-equivalent
  (regs aignet-frame aig-currst)
  (forall v
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (hons-assoc-equal v regs)
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (index-of v (alist-keys regs))
          aignet-frame)
        (bool-&gt;bit (aig-env-lookup v aig-currst)))))
  <span class="keyword">:rewrite</span> <span class="keyword">:direct</span>)</pre>
  </div>

<div class="form-block other" id="form-62" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable reg-vals-equivalent))</pre>
  </div>

<div class="form-block other" id="form-63" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-sk aig-envs-agree
  (vars x y)
  (forall v
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v vars)
      (equal (aig-env-lookup v x)
        (aig-env-lookup v y))))
  <span class="keyword">:rewrite</span> <span class="keyword">:direct</span>)</pre>
  </div>

<div class="form-block other" id="form-64" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable aig-envs-agree))</pre>
  </div>

<div class="form-block other" id="form-65" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-of-aig-env-extract-when-aig-envs-agree
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (aig-envs-agree vars1 x y)
        (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> vars vars1))
      (equal (aig-env-extract vars x)
        (aig-env-extract vars y)))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-env-extract)))))</pre>
  </div>

<div class="form-block other" id="form-66" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> not-equal-of-aig-env-extract-when-witness
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v vars)
        (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (aig-env-lookup v x)
            (aig-env-lookup v y))))
      (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (equal (aig-env-extract vars x)
          (aig-env-extract vars y))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-env-extract)))))</pre>
  </div>

<div class="form-block other" id="form-67" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a> equal-of-aig-env-extract-by-aig-envs-agree
    (<a class="sym-link system" href="../../../axioms.html#def-iff" data-sym="IFF">iff</a> (equal (aig-env-extract vars x)
        (aig-env-extract vars y))
      (aig-envs-agree vars x y))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable equal-of-aig-env-extract-when-aig-envs-agree)) (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
        '(<span class="keyword">:in-theory</span> (enable aig-envs-agree
            not-equal-of-aig-env-extract-when-witness))))))</pre>
  </div>

<div class="form-block other" id="form-68" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> reg-vals-equivalent-implies-rewrite-aig-fsm-frame-env
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (reg-vals-equivalent regs
      aignet-frame
      aig-currst)
    (equal (aig-fsm-frame-env regs
        (aignet-bitarr-to-aig-env (alist-keys regs)
          aignet-frame)
        ins)
      (aig-fsm-frame-env regs
        aig-currst
        ins)))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (aig-fsm-frame-env aig-env-extract
         alist-keys
         equal-of-aig-env-extract-by-aig-envs-agree
         aig-envs-agree)
       (aig-env-lookup))
     <span class="keyword">:do-not-induct</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block other" id="form-69" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-aignet-input
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
      (stype-count <span class="keyword">:pi</span> aignet))
    (equal (lit-eval (mk-lit (fanin-count (lookup-stype n <span class="keyword">:pi</span> aignet))
          neg)
        in-vals
        reg-vals
        aignet)
      (b-xor neg (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n in-vals))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lit-eval id-eval))))</pre>
  </div>

<div class="form-block other" id="form-70" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> lit-eval-of-aignet-reg
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
      (stype-count <span class="keyword">:reg</span> aignet))
    (equal (lit-eval (mk-lit (fanin-count (lookup-stype n <span class="keyword">:reg</span> aignet))
          neg)
        in-vals
        reg-vals
        aignet)
      (b-xor neg (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n reg-vals))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable lit-eval id-eval))))</pre>
  </div>

<div class="form-block other" id="form-71" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> index-of-less-than-len
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-double-rewrite" data-sym="DOUBLE-REWRITE">double-rewrite</a> (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v x))
      (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> (index-of v x))
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x)))))</pre>
  </div>

<div class="form-block other" id="form-72" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-env-lookup-of-aignet-eval-to-env-of-aig-fsm-to-aignet
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
          ?varmap
          ?invars
          ?regvars) (aig-fsm-to-aignet regs
           outs
           max-gates
           gatesimp
           aignet)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (alist-keys regs))
          (<a class="sym-link system" href="../../../axioms.html#def-member" data-sym="MEMBER">member</a> v
            (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (alist-vals regs) outs))))
        (equal (aig-env-lookup v
            (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet))
          (if (hons-assoc-equal v regs)
            (equal <span class="number">1</span>
              (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (index-of v regvars) reg-vals))
            (equal <span class="number">1</span>
              (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (index-of v invars) in-vals))))))))</pre>
  </div>

<div class="form-block other" id="form-73" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-eval-of-aignet-eval-to-env-of-aig-fsm-to-aignet
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
          ?varmap
          ?invars
          ?regvars) (aig-fsm-to-aignet regs
           outs
           max-gates
           gatesimp
           aignet)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-subsetp-equal" data-sym="SUBSETP-EQUAL">subsetp-equal</a> (aig-vars x)
            (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (alist-vals regs) outs)))
          (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (alist-keys regs)))
        (equal (aig-eval x
            (aignet-eval-to-env varmap
              in-vals
              reg-vals
              aignet))
          (aig-eval x
            (aig-fsm-frame-env regs
              (aignet-bitarr-to-aig-env (alist-keys regs)
                reg-vals)
              (aignet-bitarr-to-aig-env invars
                in-vals))))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (aig-eval) (aig-env-lookup))
       <span class="keyword">:induct</span> (aig-vars x)))))</pre>
  </div>

<div class="form-block other" id="form-74" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defines reg-eval-of-aig-fsm-to-aignet-ind
  <span class="keyword">:verify-guards</span> nil
  (define frame-regvals-of-aig-fsm-to-aignet-ind
    (k regs
      outs
      max-gates
      gatesimp
      aignet0
      frames
      initsts)
    <span class="keyword">:non-executable</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> <span class="number">2</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k))
    (b* (((when (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)) (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> regs
           outs
           max-gates
           gatesimp
           aignet0
           frames
           initsts)) ((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
           ?varmap
           ?invars
           ?regvars) (aig-fsm-to-aignet regs
            outs
            max-gates
            gatesimp
            aignet0))
        (regvals (frame-regvals k
            frames
            initsts
            aignet))
        (frame-st (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
            (aig-fsm-states regs
              (aignet-bitarr-to-aig-env (alist-keys regs)
                initsts)
              (aignet-frames-to-aig-envs frames
                invars))))
        (reg-name (reg-vals-equivalent-witness regs
            regvals
            frame-st))
        (regnum (index-of reg-name
            (alist-keys regs))))
      (reg-eval-of-aig-fsm-to-aignet-ind regnum
        (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
        regs
        outs
        max-gates
        gatesimp
        aignet0
        frames
        initsts)))
  (define reg-eval-of-aig-fsm-to-aignet-ind
    (n k
      regs
      outs
      max-gates
      gatesimp
      aignet0
      frames
      initsts)
    <span class="keyword">:non-executable</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
    <span class="keyword">:measure</span> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-_2A" data-sym="*">*</a> <span class="number">2</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k)))
    (frame-regvals-of-aig-fsm-to-aignet-ind k
      regs
      outs
      max-gates
      gatesimp
      aignet0
      frames
      initsts))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (enable lit-eval-seq-in-terms-of-lit-eval)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> subsetp-vars-of-nth-reg
      (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aig-vars (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n regvals))
        (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> regvals outs)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> aig-vars aiglist-vars)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable aig-env-lookup)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nth-index-of-alist-keys-in-alist-vals
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (hons-assoc-equal v x)
        (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (index-of v (alist-keys x))
            (alist-vals x))
          (cdr (hons-assoc-equal v x))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable hons-assoc-equal
           <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>
           index-of
           alist-keys
           alist-vals)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> subsetp-vars-of-nth
      (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aig-vars (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x))
        (aiglist-vars x))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-vars <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> aiglist-vars)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> subsetp-vars-of-nth-out
      (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aig-vars (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n outs))
        (aiglist-vars (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> regvals outs)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-vars <a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> aiglist-vars)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> bits-to-bools-of-take
      (equal (bits-to-bools (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x))
        (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n (bits-to-bools x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (bits-to-bools (<span class="keyword">:i</span> <a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a>))
           (take-of-too-many take-when-atom))
         <span class="keyword">:induct</span> (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n x)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> pairlis$-of-take-len
      (equal (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> x
          (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) y))
        (<a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> x y))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-bitarr-to-aig-env-of-take
      (equal (aignet-bitarr-to-aig-env vars
          (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars) bitarr))
        (aignet-bitarr-to-aig-env vars
          bitarr))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-bitarr-to-aig-env)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aignet-eval-to-env-of-take-num-regs
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
          (num-regs aignet))
        (equal (aignet-eval-to-env varmap
            invals
            (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n regvals)
            aignet)
          (aignet-eval-to-env varmap
            invals
            regvals
            aignet)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aignet-eval-to-env)
         <span class="keyword">:induct</span> (aignet-eval-to-env varmap
           invals
           regvals
           aignet)))))
  (defthm-reg-eval-of-aig-fsm-to-aignet-ind-flag (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> frame-regvals-of-aig-fsm-to-aignet
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
            ?varmap
            ?invars
            ?regvars) (aig-fsm-to-aignet regs
             outs
             max-gates
             gatesimp
             aignet0)) (aig-ins (aignet-frames-to-aig-envs frames
              invars))
          (aig-initst (aignet-bitarr-to-aig-env (alist-keys regs)
              initsts)))
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k)
              (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))
            (aig-var-listp (alist-keys regs))
            (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (alist-keys regs)))
          (reg-vals-equivalent regs
            (frame-regvals k
              frames
              initsts
              aignet)
            (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
              aig-initst
              (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
                (aig-fsm-states regs
                  aig-initst
                  aig-ins))))))
      <span class="keyword">:hints</span> ((<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> stable-under-simplificationp
         `(<span class="keyword">:expand</span> (,(CAR (LAST AIGNET::CLAUSE)))
           <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (reg-eval-seq aig-env-lookup)))))
      <span class="keyword">:flag</span> frame-regvals-of-aig-fsm-to-aignet-ind)
    (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> reg-eval-of-aig-fsm-to-aignet
      (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
            ?varmap
            ?invars
            ?regvars) (aig-fsm-to-aignet regs
             outs
             max-gates
             gatesimp
             aignet0)) (aig-ins (aignet-frames-to-aig-envs frames
              invars))
          (aig-initst (aignet-bitarr-to-aig-env (alist-keys regs)
              initsts)))
        (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
              (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (alist-keys regs)))
            (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k)
              (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))
            (aig-var-listp (alist-keys regs))
            (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (alist-keys regs)))
          (equal (lit-eval-seq k
              (lookup-reg-&gt;nxst n aignet)
              frames
              initsts
              aignet)
            (bool-&gt;bit (aig-eval (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (alist-vals regs))
                (aig-fsm-frame-env regs
                  (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> k)
                    aig-initst
                    (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> k)
                      (aig-fsm-states regs
                        aig-initst
                        aig-ins)))
                  (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> k aig-ins)))))))
      <span class="keyword">:flag</span> reg-eval-of-aig-fsm-to-aignet-ind))
  (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> out-eval-of-aig-fsm-to-aignet
    (b* (((<a class="sym-link system" href="../../../axioms.html#def-mv" data-sym="MV">mv</a> aignet
          ?varmap
          ?invars
          ?regvars) (aig-fsm-to-aignet regs
           outs
           max-gates
           gatesimp
           aignet0)) (aig-ins (aignet-frames-to-aig-envs frames
            invars))
        (aig-initst (aignet-bitarr-to-aig-env (alist-keys regs)
            initsts)))
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> outs))
          (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> k)
            (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))
          (aig-var-listp (alist-keys regs))
          (<a class="sym-link system" href="../../../axioms.html#def-no-duplicatesp" data-sym="NO-DUPLICATESP">no-duplicatesp</a> (alist-keys regs)))
        (equal (lit-eval-seq k
            (fanin <span class="number">0</span>
              (lookup-stype n <span class="keyword">:po</span> aignet))
            frames
            initsts
            aignet)
          (bool-&gt;bit (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n
              (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> k
                (aig-fsm-run outs
                  regs
                  aig-initst
                  aig-ins)))))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ((<span class="keyword">:instance</span> frame-regvals-of-aig-fsm-to-aignet))
       <span class="keyword">:in-theory</span> (disable frame-regvals-of-aig-fsm-to-aignet)))))</pre>
  </div>

<div class="form-block other" id="form-75" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define frames-row-fix
  ((ncols <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (row))
  <span class="keyword">:verify-guards</span> nil
  <span class="keyword">:returns</span> (new-row (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (framese-datap new-row)
      (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> new-row)
        (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> ncols))))
  (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> ncols)
    nil
    (cons (bfix (car row))
      (frames-row-fix (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> ncols)
        (cdr row))))
  ///
  (defret frames-row-fix-when-framese-datap
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (framese-datap row)
        (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> row)
          (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> ncols)))
      (equal new-row row)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defun" data-sym="DEFUN">defun</a> nth-of-frames-row-fix-ind
      (n ncols row)
      (if (<a class="sym-link system" href="../../../axioms.html#def-zp" data-sym="ZP">zp</a> ncols)
        (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> n row)
        (nth-of-frames-row-fix-ind (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
          (<a class="sym-link system" href="../../../axioms.html#def-1-" data-sym="1-">1-</a> ncols)
          (cdr row)))))
  (defret nth-of-frames-row-fix
    (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n new-row)
      (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> ncols))
        (bfix (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n row))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>)
       <span class="keyword">:induct</span> (nth-of-frames-row-fix-ind n
         ncols
         row)
       <span class="keyword">:expand</span> ((<span class="keyword">:free</span> (x) (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x)))))))</pre>
  </div>

<div class="form-block other" id="form-76" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define frames-fix-row
  ((row <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) frames)
  <span class="keyword">:guard</span> (&lt; row (frames-nrows frames))
  <span class="keyword">:returns</span> (new-frames 2darr-p
    <span class="keyword">:hyp</span> (2darr-p frames))
  <span class="keyword">:guard-hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable redundant-update-nth)))
  (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> (b* ((rows (2darr-&gt;rows frames)) (ncols (2darr-&gt;ncols frames))
          (nth-row (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> row rows))
          (new-rows (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> row
              (frames-row-fix ncols nth-row)
              rows)))
        (2darr ncols new-rows)))
    <span class="keyword">:exec</span> frames)
  ///
  (defret ncols-of-frames-fix-row
    (equal (2darr-&gt;ncols new-frames)
      (2darr-&gt;ncols frames)))
  (defret nth-of-frames-fix-row
    (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (2darr-&gt;rows new-frames))
      (if (equal (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> row))
        (frames-row-fix (2darr-&gt;ncols frames)
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> row (2darr-&gt;rows frames)))
        (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (2darr-&gt;rows frames)))))
  (defret nrows-of-frames-fix-row
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> row)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows new-frames))
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))))
  (deffixcong nat-equiv
    equal
    (frames-fix-row row frames)
    row))</pre>
  </div>

<div class="form-block other" id="form-77" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define env-to-frame-aux
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) (i <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>)
    vars
    env
    frames)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; n (frames-nrows frames))
    (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> i (frames-ncols frames))
    (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
      (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (frames-ncols frames) i)))
  <span class="keyword">:returns</span> (new-frames 2darr-p
    <span class="keyword">:hyp</span> (2darr-p frames))
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> vars)
    (frames-fix-row n frames)
    (b* ((val (bool-&gt;bit (aig-env-lookup (car vars) env))) (frames (frames-set2 n
            i
            val
            frames)))
      (env-to-frame-aux n
        (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix i))
        (cdr vars)
        env
        frames)))
  ///
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a> (disable aig-env-lookup)))
  (defret env-to-frame-aux-preserves-ncols
    (equal (2darr-&gt;ncols new-frames)
      (2darr-&gt;ncols frames)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> frames-row-fix-of-append-when-first-len
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> a) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
        (equal (frames-row-fix n
            (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> a b))
          (frames-row-fix n a)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable frames-row-fix)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> frames-row-fix-of-take-n
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> i) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
        (equal (frames-row-fix n
            (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> i x))
          (frames-row-fix n x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable frames-row-fix)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> take-n-plus-one
      (equal (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)) x)
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x)
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> repeat)
           (take-of-too-many take-of-1 take-of-zero))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> take-of-update-nth
      (equal (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n
          (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> n val x))
        (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>)))))
  (defretd env-to-frame-aux-is-update-nth
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
        (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (frames-ncols frames)
          (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> i)))
      (equal (2darr-&gt;rows new-frames)
        (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> n
          (frames-row-fix (frames-ncols frames)
            (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> i
                (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (2darr-&gt;rows frames)))
              (env-to-bitarr vars env)))
          (2darr-&gt;rows frames))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable frames-fix-row
         env-to-bitarr))))
  (defret nth-of-env-to-frame-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
        (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (frames-ncols frames)
          (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> i)))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> m (2darr-&gt;rows new-frames))
        (if (equal (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m))
          (frames-row-fix (frames-ncols frames)
            (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> i
                (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n (2darr-&gt;rows frames)))
              (env-to-bitarr vars env)))
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> m (2darr-&gt;rows frames)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (env-to-frame-aux-is-update-nth)
         (env-to-frame-aux)))))
  (defret len-rows-of-env-to-frame-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows new-frames))
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))))
  (deffixcong nat-equiv
    equal
    (env-to-frame-aux n
      i
      vars
      env
      frames)
    n))</pre>
  </div>

<div class="form-block other" id="form-78" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define env-to-frame
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) vars
    env
    frames)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (&lt; n (frames-nrows frames))
    (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
      (frames-ncols frames)))
  <span class="keyword">:returns</span> (new-frames 2darr-p
    <span class="keyword">:hyp</span> (2darr-p frames))
  (env-to-frame-aux n
    <span class="number">0</span>
    vars
    env
    frames)
  ///
  (defret env-to-frame-preserves-ncols
    (equal (2darr-&gt;ncols new-frames)
      (2darr-&gt;ncols frames)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> frames-row-fix-of-env-to-bitarr
      (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal n (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars))
        (equal (frames-row-fix n
            (env-to-bitarr vars env))
          (env-to-bitarr vars env)))
      <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:induct</span> (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n vars)
         <span class="keyword">:in-theory</span> (enable env-to-bitarr
           frames-row-fix)))))
  (defret env-to-frame-is-update-nth
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
        (frames-ncols frames))
      (equal (2darr-&gt;rows new-frames)
        (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> n
          (env-to-bitarr vars env)
          (2darr-&gt;rows frames))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable env-to-frame-aux-is-update-nth))))
  (defretd nth-of-env-to-frame
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
        (frames-ncols frames))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> m (2darr-&gt;rows new-frames))
        (if (equal (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m))
          (env-to-bitarr vars env)
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> m (2darr-&gt;rows frames)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (env-to-frame-is-update-nth)
         (env-to-frame)))))
  (defret len-rows-of-env-to-frame
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows new-frames))
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))))
  (deffixcong nat-equiv
    equal
    (env-to-frame n
      vars
      env
      frames)
    n))</pre>
  </div>

<div class="form-block other" id="form-79" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define envs-to-bitarrs
  (vars envs)
  <span class="keyword">:returns</span> (bitarrs)
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> envs)
    nil
    (cons (env-to-bitarr vars (car envs))
      (envs-to-bitarrs vars (cdr envs))))
  ///
  (defret len-of-envs-to-bitarrs
    (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> bitarrs)
      (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> envs)))
  (defret consp-of-envs-to-bitarrs
    (equal (consp bitarrs) (consp envs))))</pre>
  </div>

<div class="form-block other" id="form-80" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aig-envs-to-aignet-frames-aux
  ((n <a class="sym-link system" href="../../../axioms.html#def-natp" data-sym="NATP">natp</a>) vars
    envs
    frames)
  <span class="keyword">:guard</span> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> n (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> envs))
      (frames-nrows frames))
    (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
      (frames-ncols frames)))
  <span class="keyword">:returns</span> (new-frames 2darr-p
    <span class="keyword">:hyp</span> (2darr-p frames))
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> len-equal-0
       (equal (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> x) <span class="number">0</span>)
         (<a class="sym-link system" href="../../../axioms.html#def-not" data-sym="NOT">not</a> (consp x))))))
  <span class="keyword">:verify-guards</span> nil
  (if (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> envs)
    frames
    (b* ((frames (env-to-frame n
           vars
           (car envs)
           frames)))
      (aig-envs-to-aignet-frames-aux (<a class="sym-link system" href="../../../axioms.html#def-1_2B" data-sym="1+">1+</a> (lnfix n))
        vars
        (cdr envs)
        frames)))
  ///
  (defret aig-envs-to-aignet-frames-aux-preserves-ncols
    (equal (2darr-&gt;ncols new-frames)
      (2darr-&gt;ncols frames)))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> take-n-plus-one
      (equal (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1</span> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n)) x)
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x)
          (<a class="sym-link system" href="../../../axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> n x))))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> repeat)
           (take-of-too-many take-of-1 take-of-zero))))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> take-of-update-nth
      (equal (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n
          (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> n val x))
        (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n x))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>)))))
  (<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> nthcdr-of-update-nth
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n
          (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> m v x))
        (if (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m))
          (<a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
            v
            (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n x))
          (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> n x)))
      <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-update-nth" data-sym="UPDATE-NTH">update-nth</a>)))))
  (defretd rows-of-aig-envs-to-aignet-frames-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
          (frames-ncols frames))
        (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> envs))
          (frames-nrows frames)))
      (equal (2darr-&gt;rows new-frames)
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> n
            (2darr-&gt;rows frames))
          (envs-to-bitarrs vars envs)
          (<a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> envs))
            (2darr-&gt;rows frames)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (envs-to-bitarrs env-to-frame-is-update-nth)
         (<a class="sym-link system" href="../../../axioms.html#def-take" data-sym="TAKE">take</a> <a class="sym-link system" href="../../../axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> (<a class="sym-link system" href="../../../axioms.html#def-force" data-sym="FORCE">force</a>))))))
  (defret aig-envs-to-aignet-frames-aux-lookup
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
        (frames-ncols frames))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> m (2darr-&gt;rows new-frames))
        (if (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m))
            (&lt; (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m)
              (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> envs))))
          (env-to-bitarr vars
            (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="../../../axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> m) (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n))
              envs))
          (<a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a> m (2darr-&gt;rows frames)))))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable <a class="sym-link system" href="../../../axioms.html#def-nth" data-sym="NTH">nth</a>))))
  (defret len-rows-of-aig-envs-to-aignet-frames-aux
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="../../../axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> n) (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> envs))
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))
      (equal (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows new-frames))
        (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> (2darr-&gt;rows frames)))))
  (deffixcong nat-equiv
    equal
    (aig-envs-to-aignet-frames-aux n
      vars
      env
      frames)
    n)
  (<a class="sym-link system" href="../../../axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a> aig-envs-to-aignet-frames-aux))</pre>
  </div>

<div class="form-block other" id="form-81" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(define aig-envs-to-aignet-frames
  (vars envs frames)
  <span class="keyword">:enabled</span> <a class="sym-link system" href="../../../axioms.html#def-t" data-sym="T">t</a>
  <span class="keyword">:prepwork</span> ((<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> equal-of-2darr
       (equal (equal (2darr a b) c)
         (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (2darr-p c)
           (equal (<a class="sym-link system" href="../../../axioms.html#def-nfix" data-sym="NFIX">nfix</a> a)
             (2darr-&gt;ncols c))
           (equal (list-fix b) (2darr-&gt;rows c))))
       <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable 2darr
            2darr-p
            2darr-&gt;ncols
            2darr-&gt;rows))))))
  <span class="keyword">:guard-hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (enable rows-of-aig-envs-to-aignet-frames-aux)))
  (<a class="sym-link system" href="../../../axioms.html#def-mbe" data-sym="MBE">mbe</a> <span class="keyword">:logic</span> (<a class="sym-link system" href="../../../axioms.html#def-non-exec" data-sym="NON-EXEC">non-exec</a> (2darr (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
        (envs-to-bitarrs vars envs)))
    <span class="keyword">:exec</span> (b* ((frames (frames-resize-rows <span class="number">0</span> frames)) (frames (frames-resize-cols (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> vars)
            frames))
        (frames (frames-resize-rows (<a class="sym-link system" href="../../../axioms.html#def-len" data-sym="LEN">len</a> envs)
            frames)))
      (aig-envs-to-aignet-frames-aux <span class="number">0</span>
        vars
        envs
        frames))))</pre>
  </div>

<div class="form-block other" id="form-82" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-eval-of-aig-fsm-frame-env-of-bitarr-to-aig-env-of-env-to-bitarr
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aig-vars x)
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> vars (alist-keys regs)))
    (equal (aig-eval x
        (aig-fsm-frame-env regs
          curr-st
          (aignet-bitarr-to-aig-env vars
            (env-to-bitarr vars ins))))
      (aig-eval x
        (aig-fsm-frame-env regs
          curr-st
          ins))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-fsm-frame-env
       aig-eval
       aig-env-lookup))))</pre>
  </div>

<div class="form-block other" id="form-83" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-eval-list-of-aig-fsm-frame-env-of-bitarr-to-aig-env-of-env-to-bitarr
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aiglist-vars x)
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> vars (alist-keys regs)))
    (equal (aig-eval-list x
        (aig-fsm-frame-env regs
          curr-st
          (aignet-bitarr-to-aig-env vars
            (env-to-bitarr vars ins))))
      (aig-eval-list x
        (aig-fsm-frame-env regs
          curr-st
          ins))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-eval-list aiglist-vars))))</pre>
  </div>

<div class="form-block other" id="form-84" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-eval-alist-of-aig-fsm-frame-env-of-bitarr-to-aig-env-of-env-to-bitarr
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aiglist-vars (alist-vals x))
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> vars (alist-keys regs)))
    (equal (aig-eval-alist x
        (aig-fsm-frame-env regs
          curr-st
          (aignet-bitarr-to-aig-env vars
            (env-to-bitarr vars ins))))
      (aig-eval-alist x
        (aig-fsm-frame-env regs
          curr-st
          ins))))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-eval-alist aiglist-vars))))</pre>
  </div>

<div class="form-block other" id="form-85" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-frame-outs-of-bitarr-to-aig-env-of-env-to-bitarr
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aiglist-vars outputs)
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> vars (alist-keys regs)))
    (equal (aig-fsm-frame-outs outputs
        regs
        curr-st
        (aignet-bitarr-to-aig-env vars
          (env-to-bitarr vars ins)))
      (aig-fsm-frame-outs outputs
        regs
        curr-st
        ins)))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-fsm-frame-outs))))</pre>
  </div>

<div class="form-block other" id="form-86" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-frame-nextst-of-bitarr-to-aig-env-of-env-to-bitarr
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aiglist-vars (alist-vals regs))
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> vars (alist-keys regs)))
    (equal (aig-fsm-frame-nextst regs
        curr-st
        (aignet-bitarr-to-aig-env vars
          (env-to-bitarr vars ins)))
      (aig-fsm-frame-nextst regs
        curr-st
        ins)))
  <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-fsm-frame-nextst))))</pre>
  </div>

<div class="form-block other" id="form-87" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-local" data-sym="LOCAL">local</a> (<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-run-of-atom
    (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-atom" data-sym="ATOM">atom</a> ins)
      (equal (aig-fsm-run outputs
          regs
          curr-st
          ins)
        nil))
    <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:in-theory</span> (enable aig-fsm-run)))))</pre>
  </div>

<div class="form-block other" id="form-88" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-run-of-frames-to-envs-of-envs-to-frames
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aiglist-vars outputs)
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> vars (alist-keys regs)))
      (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aiglist-vars (alist-vals regs))
        (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> vars (alist-keys regs))))
    (equal (aig-fsm-run outputs
        regs
        curr-st
        (aignet-frame-array-to-aig-envs (envs-to-bitarrs vars ins)
          vars))
      (aig-fsm-run outputs
        regs
        curr-st
        ins)))
  <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (envs-to-bitarrs aignet-frame-array-to-aig-envs
         (<span class="keyword">:i</span> aig-fsm-states)))
     <span class="keyword">:induct</span> (aig-fsm-states regs
       curr-st
       ins))))</pre>
  </div>

<div class="form-block other" id="form-89" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../../../axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> aig-fsm-states-of-frames-to-envs-of-envs-to-frames
  (<a class="sym-link system" href="../../../axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="../../../axioms.html#def-subsetp" data-sym="SUBSETP">subsetp</a> (aiglist-vars (alist-vals regs))
      (<a class="sym-link system" href="../../../axioms.html#def-append" data-sym="APPEND">append</a> vars (alist-keys regs)))
    (equal (aig-fsm-states regs
        curr-st
        (aignet-frame-array-to-aig-envs (envs-to-bitarrs vars ins)
          vars))
      (aig-fsm-states regs
        curr-st
        ins)))
  <span class="keyword">:hints</span> ((<span class="string">"goal"</span> <span class="keyword">:in-theory</span> (<a class="sym-link system" href="../../../axioms.html#def-e_2Fd" data-sym="E/D">e/d</a> (envs-to-bitarrs aignet-frame-array-to-aig-envs
         aig-fsm-states))
     <span class="keyword">:induct</span> (aig-fsm-states regs
       curr-st
       ins))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>