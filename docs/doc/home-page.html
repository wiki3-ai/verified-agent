<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>home-page - ACL2 Book</title>
  <meta property="name" content="home-page">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">‚òÄÔ∏è</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">home-page</h1>
    <div class="path"><a href="home-page.lisp" class="source-link">doc/home-page</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block other" id="form-1" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-set-state-ok" data-sym="SET-STATE-OK">set-state-ok</a> <a class="sym-link system" href="../axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-2" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-program" data-sym="PROGRAM">program</a>)</pre>
  </div>

<div class="form-block function" id="def-topic-to-url-list" data-defines="TOPIC-TO-URL-LIST" data-references="CDR,SYMBOL-NAME,SYMBOL-PACKAGE-NAME,STRING,QUOTE,CONCATENATE,CAR,CONS,T,ENDP,COND,NAMES,CHARS,URL,DEFUN" data-used-by="WRITE-HOME-PAGE" data-part-name="TOPIC-TO-URL-LIST" data-part-args="NAMES,CHARS,URL" data-part-body="CDR,TOPIC-TO-URL-LIST,SYMBOL-NAME,SYMBOL-PACKAGE-NAME,URL,STRING,QUOTE,CONCATENATE,CHARS,CAR,CONS,T,NAMES,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOPIC-TO-URL-LIST">topic-to-url-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-topic-to-url-list" data-sym="TOPIC-TO-URL-LIST" title="(defun topic-to-url-list (url chars names)
  (cond ((endp names) nil)
        (t
         (cons
          (cons (car chars)
...">topic-to-url-list</a>
  (url chars names)
  (<a class="sym-link system" href="../axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="../axioms.html#def-endp" data-sym="ENDP">endp</a> names) nil)
    (<a class="sym-link system" href="../axioms.html#def-t" data-sym="T">t</a> (cons (cons (car chars)
          (<a class="sym-link system" href="../axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="../axioms.html#def-string" data-sym="STRING">string</a>
            url
            <span class="string">"index.html?topic="</span>
            (symbol-package-name (car names))
            <span class="string">"____"</span>
            (symbol-name (car names))))
        (<a class="sym-link local-def" href="#def-topic-to-url-list" data-sym="TOPIC-TO-URL-LIST" title="(defun topic-to-url-list (url chars names)
  (cond ((endp names) nil)
        (t
         (cons
          (cons (car chars)
...">topic-to-url-list</a> url (cdr chars) (cdr names))))))</pre>
  </div>

<div class="form-block constant" id="def-_2Acombined-manual_2A" data-defines="*COMBINED-MANUAL*" data-references="DEFCONST" data-used-by="WRITE-HOME-PAGE-TOP,WRITE-HOME-PAGE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*COMBINED-MANUAL*">*combined-manual*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Acombined-manual_2A" data-sym="*COMBINED-MANUAL*" title="(defconst *combined-manual*
          &quot;https://www.cs.utexas.edu/users/moore/acl2/v8-6/combined-manual/&quot;)">*combined-manual*</a>
  <span class="string">"https://www.cs.utexas.edu/users/moore/acl2/v8-6/combined-manual/"</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Ableeding-edge-manual_2A" data-defines="*BLEEDING-EDGE-MANUAL*" data-references="DEFCONST" data-used-by="WRITE-HOME-PAGE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*BLEEDING-EDGE-MANUAL*">*bleeding-edge-manual*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ableeding-edge-manual_2A" data-sym="*BLEEDING-EDGE-MANUAL*" title="(defconst *bleeding-edge-manual* &quot;https://acl2.org/doc/&quot;)">*bleeding-edge-manual*</a> <span class="string">"https://acl2.org/doc/"</span>)</pre>
  </div>

<div class="form-block constant" id="def-_2Ahome-page-references_2A" data-defines="*HOME-PAGE-REFERENCES*" data-references="INSTALLATION,MAILING-LISTS,PUBLICATIONS,START-HERE,TALKS,COPYRIGHT,DOCUMENTATION,DOC,A_02Tiny_02Warning_02Sign,ACL2,ACL2-DOC,PARALLELISM,HONS-ENABLED,REAL,ACKNOWLEDGMENTS,INTERESTING-APPLICATIONS,GIT-QUICK-START,THE-METHOD,NOTE-8-6,BOOKS,COURSE-MATERIALS,WORKSHOPS,RELEASES,ACL2-TUTORIAL,TOURS,QUOTE,DEFCONST" data-used-by="WRITE-HOME-PAGE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*HOME-PAGE-REFERENCES*">*home-page-references*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ahome-page-references_2A" data-sym="*HOME-PAGE-REFERENCES*" title="(defconst *home-page-references*
          &#39;(tours acl2-tutorial releases workshops course-materials books
            note-8-6 the-method git-quick-start interesting-applications
            acknowledgments real hons-enabled parallelism acl2-doc acl2
            |A_02Tiny_02Warning_02Sign| doc documentation copyright
...">*home-page-references*</a>
  '(tours acl2-tutorial
    releases
    workshops
    course-materials
    books
    note-8-6
    the-method
    git-quick-start
    interesting-applications
    acknowledgments
    real
    hons-enabled
    parallelism
    acl2-doc
    acl2
    |A_02Tiny_02Warning_02Sign|
    <a class="sym-link system" href="../history-management.html#def-doc" data-sym="DOC">doc</a>
    documentation
    copyright
    git-quick-start
    talks
    start-here
    publications
    mailing-lists
    installation))</pre>
  </div>

<div class="form-block constant" id="def-_2Ahome-page_2A" data-defines="*HOME-PAGE*" data-references="DEFCONST" data-used-by="WRITE-HOME-PAGE" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*HOME-PAGE*">*home-page*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Ahome-page_2A" data-sym="*HOME-PAGE*" title="(defconst *home-page*
          &quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//W3C//DTD HTML 4.01 Transitional//EN\&quot; \&quot;http://www.w3.org/TR/html4/loose.dtd\&quot;&gt;

&lt;html&gt;

...">*home-page*</a>
  <span class="string">"&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;

&lt;html&gt;

&lt;head&gt;
    &lt;title&gt;~s0&lt;/title&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;
&lt;/head&gt;

&lt;body text=&quot;#000000&quot; bgcolor=&quot;#FFFFFF&quot; style=&quot;font-family:&#39;Verdana&#39;&quot;&gt;

&lt;table&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;img src=&quot;HTML/acl2-logo-200-134.gif&quot; align=left alt=&quot;ACL2 logo&quot;&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;center&gt;&lt;h1&gt;~s0&lt;/h1&gt;&lt;/center&gt;

ACL2 is a logic and programming language in which you can model
computer systems, together with a tool to help you prove properties
of those models.  &quot;ACL2&quot; denotes
&quot;&lt;b&gt;A&lt;/b&gt; &lt;b&gt;C&lt;/b&gt;omputational &lt;b&gt;L&lt;/b&gt;ogic for &lt;b&gt;A&lt;/b&gt;pplicative
&lt;b&gt;C&lt;/b&gt;ommon &lt;b&gt;L&lt;/b&gt;isp&quot;.&lt;p&gt;

ACL2 is part of the Boyer-Moore family of provers, for which its authors have
received the 2005 &lt;a href=&quot;http://awards.acm.org/software_system/&quot;&gt;ACM
Software System Award&lt;/a&gt;.&lt;p&gt;

&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;hr&gt;

&lt;table CELLPADDING=3 align=&quot;center&quot;&gt;

&lt;tr&gt;
&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;~sw&quot;&gt;Start Here&lt;/a&gt; (including &lt;a href=&quot;~sj&quot;&gt;applications&lt;/a&gt;, &lt;a href=&quot;~sv&quot;&gt;talks&lt;/a&gt;, &lt;a href=&quot;~sa&quot;&gt;tours&lt;/a&gt;, and &lt;a href=&quot;~sb&quot;&gt;tutorials/demos&lt;/a&gt;)
&lt;/td&gt;

&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;~sd&quot;&gt;ACL2
Workshops&lt;/a&gt;, &lt;a
href=&quot;http://www.cs.utexas.edu/users/moore/acl2/seminar/index.html&quot;&gt;UT Seminar&lt;/a&gt;,
and &lt;a href=&quot;~se&quot;&gt;Course Materials&lt;/a&gt;
&lt;/td&gt;
&lt;!--

The Workshops entry was added in place of the FAQ entry.

The FAQ was added in place of the one removed by this comment.

At one time we had a link to the tutorials.  But after the publication
of the first book, we decided that we should encourage people to read the
book rather than do the tutorials, which are not elementary enough.
I think we should write some appropriate tutorials.  Meanwhile, this
entry is left blank.

&lt;td align=center valign=MIDDLE&gt;
&lt;a href=&quot;~sb&quot;&gt;&lt;img src=&quot;HTML/teacher2.gif&quot; alt=&quot;teacher icon&quot; border=0&gt;&lt;/a&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;~sb&quot;&gt;Tutorials (for those who have taken the tours)&lt;/a&gt;
&lt;/td&gt;
--&gt;

&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;~sx&quot;&gt;
Publications about ACL2 and Its Applications&lt;/a&gt;
&lt;/td&gt;

&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;#User&#39;s-Manual&quot;&gt;The User&#39;s Manual&lt;/a&gt;
and &lt;a href=&quot;http://www.cs.utexas.edu/users/moore/publications/hyper-card.html&quot;&gt;Hyper-Card&lt;/a&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;#Tools&quot;&gt;Community Books: Lemma Libraries and Utilities&lt;/a&gt;
&lt;/td&gt;

&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;~sy&quot;&gt;Mailing Lists&lt;/a&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;HTML/new.html&quot;&gt;
Recent changes to this page&lt;/a&gt;
&lt;/td&gt;
&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;~sz&quot;&gt;Obtaining, Installing, and License&lt;/a&gt;
&lt;/td&gt;

&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;~sg&quot;&gt;Differences from Version 8.5&lt;/a&gt;&lt;a href=&quot;~sq&quot;&gt; &lt;img
src=&quot;HTML/twarning.gif&quot; alt=&quot;tiny warning icon&quot;&gt;&lt;/a&gt;
&lt;/td&gt;
&lt;td&gt;&amp;bull;&lt;/td&gt;
&lt;td&gt;
&lt;a href=&quot;~sc&quot;&gt;
Other Releases&lt;/a&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;/table&gt;

&lt;br&gt;
&lt;center&gt;
&lt;b&gt;&lt;a href=&quot;mailto:kaufmann@cs.utexas.edu&quot;&gt;Matt Kaufmann&lt;/a&gt; and &lt;a href=&quot;mailto:moore@cs.utexas.edu&quot;&gt;J Strother Moore&lt;/a&gt;&lt;/b&gt;&lt;br&gt;
&lt;a href=&quot;http://www.utexas.edu&quot;&gt;University of Texas at Austin&lt;/a&gt;&lt;br&gt;
~s4 ~f5, ~f6
&lt;/center&gt;

&lt;p&gt;

&lt;hr&gt;

&lt;p&gt;

Welcome to the ACL2 home page!  We highlight a few aspects of ACL2:

&lt;ul&gt;

&lt;li&gt;&lt;b&gt;Libraries (Books).&lt;/b&gt;&lt;br&gt;Libraries of &lt;i&gt;books&lt;/i&gt; (files containing
definitions and theorems) extend the code that we have written.  In particular,
the distribution tarball includes the &lt;i&gt;community books&lt;/i&gt;, which are
contributed and maintained by the members of the ACL2 community.&lt;/li&gt;

&lt;li&gt;&lt;b&gt;&lt;a NAME=&quot;documentation&quot;&gt;Documentation&lt;/a&gt;.&lt;/b&gt;&lt;br&gt;There is an
extensive user&#39;s manual that documents the ACL2 system and many community books.
See &lt;a href=&quot;#User&#39;s-Manual&quot;&gt;below&lt;/a&gt; to learn more.&lt;/li&gt;

&lt;li&gt;&lt;b&gt;License and Copyright.&lt;/b&gt;&lt;br&gt;ACL2 is freely available under the terms
of the &lt;a href=&quot;HTML/LICENSE&quot;&gt;LICENSE&lt;/a&gt; file distributed with ACL2.  &lt;a
href=&quot;~st&quot;&gt;License, copyright, and
authorship&lt;/a&gt; information is available from the ACL2 &lt;a
href=&quot;#documentation&quot;&gt;documentation&lt;/a&gt;.&lt;/li&gt;

&lt;li&gt;&lt;b&gt;Extensions.&lt;/b&gt;&lt;br&gt;The ACL2 distribution includes the following
extensions, which were developed by the individuals shown.

  &lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;~sl&quot;&gt;ACL2(r)&lt;/a&gt;&lt;br&gt;
  Support for the real numbers by way of non-standard analysis&lt;br&gt;
  Ruben Gamboa&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;~sn&quot;&gt;ACL2(p)&lt;/a&gt;&lt;br&gt;
  Support for parallel evaluation&lt;br&gt;
  David L. Rager&lt;/li&gt;
  &lt;/ul&gt;

Another extension of ACL2 is the Eclipse-based &lt;a
href=&quot;http://acl2s.ccs.neu.edu/acl2s/doc/&quot;&gt;ACL2 Sedan&lt;/a&gt; (ACL2s).  Unlike
the systems above, ACL2s is distributed and maintained by Pete Manolios and his
research group.  ACL2s comes with a standard executable ACL2 image for Windows,
but it also comes with pre-certified community books and an extension of ACL2
with additional features, including extra automation for termination proofs as
well as counterexample generation.

&lt;/ul&gt;

&lt;hr&gt;

&lt;br&gt;
We gratefully acknowledge substantial support from the sources listed in
the &lt;a href=&quot;~sk&quot;&gt;ACL2 acknowledgments page&lt;/a&gt;.

&lt;hr&gt;

&lt;H2&gt;&lt;a NAME=&quot;User&#39;s-Manual&quot;&gt;The User&#39;s Manual&lt;/a&gt;&lt;/H2&gt;

The &lt;i&gt;ACL2+Books User&#39;s Manual&lt;/i&gt; is a vast hypertext document.  If you are a
newcomer to ACL2, we do &lt;EM&gt;not&lt;/EM&gt; recommend that you wander off into the
full documentation.  Instead start with the &lt;a href=&quot;~sw&quot;&gt;START-HERE&lt;/a&gt;
documentation topic.  Experienced users tend mostly to use the manual as a
reference manual, to look up concepts mentioned in error messages or vaguely
remembered from their past experiences with ACL2.

&lt;p&gt;

That manual not only includes documentation for the ACL2 system, but also
documents many of the &lt;a href=&quot;#Tools&quot;&gt;community books&lt;/a&gt; (libraries).  This
manual, which is written by many authors, is thus more extensive than the ACL2
system, and is thus potentially more useful.  With the exception of the first
bulleted link below, links to the manual on this page will all take you to the
ACL2+Books Manual.

&lt;p&gt;

The following links take you to versions of the manual, which can be
read not only in a Web browser, but also in the &lt;a href=&quot;~so&quot;&gt;ACL2-Doc Emacs
browser&lt;/a&gt; or by using the ACL2 &lt;CODE&gt;&lt;a href=&quot;~sr&quot;&gt;:DOC&lt;/a&gt;&lt;/CODE&gt; command
at the terminal.  See the documentation topic, &lt;CODE&gt;&lt;a
href=&quot;~ss&quot;&gt;DOCUMENTATION&lt;/a&gt;&lt;/CODE&gt;.

&lt;ul&gt;

&lt;li&gt;&lt;a href=&quot;~s2&quot;&gt;ACL2+Books Manual&lt;/a&gt; (Version 8.6)&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;~s3&quot;&gt;ACL2+Books Manual&lt;/a&gt; (for
&lt;a href=&quot;~si&quot;&gt;GitHub&lt;/a&gt; distributions)&lt;/li&gt;

&lt;/ul&gt;

&lt;p&gt;

You can build the ACL2+Books Manual locally, as follows, though this will
likely take several minutes or even considerably longer, depending on which
books you have already certified).

&lt;pre&gt;
    cd acl2-sources/books
    # The following uses ccl by default; sbcl is also acceptable.
    make manual ACL2=&amp;lt;path_to_your_ACL2&amp;gt;
&lt;/pre&gt;

The resulting ACL2+Books Manual may be accessed by pointing your browser to the
file &lt;code&gt;books/doc/manual/index.html&lt;/code&gt; under your ACL2 sources directory.

&lt;p&gt;

&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;H2&gt;&lt;a NAME=&quot;Tools&quot;&gt;Community Books: Lemma Libraries and Utilities, and How to Contribute&lt;/a&gt;&lt;/H2&gt;

A companion to ACL2 is the library of &lt;em&gt;community books&lt;/em&gt;, which have been
developed by many users over the years.  These books contain definitions and
theorems that you might find useful in your models and proofs.  In addition,
some books contain ACL2 tools built by users to help with reasoning,
programming, interfaces, debugging, and testing; see &lt;a
href=&#39;http://www.cs.utexas.edu/users/moore/acl2/v8-6/combined-manual/index.html&#39;&gt;
the documentation&lt;/a&gt;.  Some relevant papers may be found by following links in
the pages on &lt;a href=&#39;~sx&#39;&gt; Books and Papers about ACL2 and Its
Applications&lt;/a&gt; and the &lt;a href=&#39;~sd&#39;&gt;ACL2 Workshops Series&lt;/a&gt;.  The &lt;a
href=&quot;~sz&quot;&gt;installation instructions&lt;/a&gt; explain how to download and install
the community books.

&lt;p&gt;

We strongly encourage users to submit additional books and to improve existing
books.  If you have interest in contributing, there is a &lt;a
href=&quot;~su&quot;&gt;documentation topic to get you started&lt;/a&gt;.  You can also visit
the &lt;code&gt;&lt;a href=&quot;https://github.com/acl2/acl2&quot;&gt;ACL2 System and
Books&lt;/a&gt;&lt;/code&gt; project page on github (just move past the big list of files
to find descriptive text).  Project members are welcome to edit community
books.  In particular, the community book
&lt;code&gt;books/system/doc/acl2-doc.lisp&lt;/code&gt; contains the ACL2 system
documentation, and project members are welcome to improve it.

&lt;p&gt;

(Prior to ACL2 Version 7.0 (January, 2015) books were &lt;a
href=&#39;http://acl2.org/books-pre-7.0/&#39;&gt;distributed through a different
mechanism&lt;/a&gt;.)

&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;H2&gt;&lt;a NAME=&quot;search&quot;&gt;Searching documentation&lt;/a&gt;&lt;/H2&gt;

The web views of the &lt;a
href=&quot;http://www.cs.utexas.edu/users/moore/acl2/current/combined-manual/&quot;&gt;ACL2+Books
Manual&lt;/a&gt; allow you to search the short strings of the documentation (which
are typically summaries of a line or so).  To search the full content for a
string or regular expression, you may use the Emacs-based &lt;a
href=&quot;~so&quot;&gt;ACL2-Doc browser&lt;/a&gt;.

&lt;br&gt;&lt;br&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;https://validator.w3.org/check?uri=referer&quot;&gt;&lt;img src=&quot;https://www.w3.org/Icons/valid-html401&quot; alt=&quot;Valid HTML 4.01 Transitional&quot; HEIGHT=&quot;31&quot; WIDTH=&quot;88&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;/body&gt;
&lt;/html&gt;
"</span>)</pre>
  </div>

<div class="form-block function" id="def-write-home-page" data-defines="WRITE-HOME-PAGE" data-references="NEWLINE,*HOME-PAGE-REFERENCES*,TOPIC-TO-URL-LIST,*BLEEDING-EDGE-MANUAL*,*COMBINED-MANUAL*,ACL2-VERSION,F-GET-GLOBAL,CONS,LIST,APPEND,*HOME-PAGE*,FMS,PPROGN,CADR,+,YR,QUOTE,CDDDDR,CAR,1-,NTH,MONTH,CADDDR,DAY,DECODE-IDATE,DATE-LIST,LET*,READ-IDATE,N,MV-LET,URL,STATE,CHANNEL,DEFUN" data-used-by="WRITE-HOME-PAGE-TOP" data-part-name="WRITE-HOME-PAGE" data-part-args="URL,STATE,CHANNEL" data-part-body="NEWLINE,CHANNEL,*HOME-PAGE-REFERENCES*,URL,TOPIC-TO-URL-LIST,*BLEEDING-EDGE-MANUAL*,*COMBINED-MANUAL*,ACL2-VERSION,F-GET-GLOBAL,CONS,LIST,APPEND,*HOME-PAGE*,FMS,PPROGN,CADR,+,YR,QUOTE,CDDDDR,CAR,1-,NTH,MONTH,CADDDR,DAY,DECODE-IDATE,DATE-LIST,LET*,READ-IDATE,STATE,N,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRITE-HOME-PAGE">write-home-page</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-write-home-page" data-sym="WRITE-HOME-PAGE" title="(defun write-home-page (channel state url)
  (mv-let (n state) (read-idate state)
          (let* ((date-list (decode-idate n))
                 (day (cadddr date-list))
                 (month
...">write-home-page</a>
  (channel state url)
  (<a class="sym-link system" href="../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (n state)
    (<a class="sym-link system" href="../axioms.html#def-read-idate" data-sym="READ-IDATE">read-idate</a> state)
    (<a class="sym-link system" href="../axioms.html#def-let_2A" data-sym="LET*">let*</a> ((date-list (<a class="sym-link system" href="../basis-a.html#def-decode-idate" data-sym="DECODE-IDATE">decode-idate</a> n)) (day (<a class="sym-link system" href="../axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> date-list))
        (month (<a class="sym-link system" href="../axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="../axioms.html#def-1-" data-sym="1-">1-</a> (car (<a class="sym-link system" href="../axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> date-list)))
            '(<span class="string">"January"</span> <span class="string">"February"</span>
              <span class="string">"March"</span>
              <span class="string">"April"</span>
              <span class="string">"May"</span>
              <span class="string">"June"</span>
              <span class="string">"July"</span>
              <span class="string">"August"</span>
              <span class="string">"September"</span>
              <span class="string">"October"</span>
              <span class="string">"November"</span>
              <span class="string">"December"</span>)))
        (yr (<a class="sym-link system" href="../axioms.html#def-_2B" data-sym="+">+</a> <span class="number">1900</span> (<a class="sym-link system" href="../axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="../axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> date-list)))))
      (<a class="sym-link system" href="../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../basis-a.html#def-fms" data-sym="FMS">fms</a> <a class="sym-link local-def" href="#def-_2Ahome-page_2A" data-sym="*HOME-PAGE*" title="(defconst *home-page*
          &quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//W3C//DTD HTML 4.01 Transitional//EN\&quot; \&quot;http://www.w3.org/TR/html4/loose.dtd\&quot;&gt;

&lt;html&gt;

...">*home-page*</a>
          (<a class="sym-link system" href="../axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="../axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="../axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'acl2-version state))
              (cons #\2 <a class="sym-link local-def" href="#def-_2Acombined-manual_2A" data-sym="*COMBINED-MANUAL*" title="(defconst *combined-manual*
          &quot;https://www.cs.utexas.edu/users/moore/acl2/v8-6/combined-manual/&quot;)">*combined-manual*</a>)
              (cons #\3 <a class="sym-link local-def" href="#def-_2Ableeding-edge-manual_2A" data-sym="*BLEEDING-EDGE-MANUAL*" title="(defconst *bleeding-edge-manual* &quot;https://acl2.org/doc/&quot;)">*bleeding-edge-manual*</a>)
              (cons #\4 month)
              (cons #\5 day)
              (cons #\6 yr))
            (<a class="sym-link local-def" href="#def-topic-to-url-list" data-sym="TOPIC-TO-URL-LIST" title="(defun topic-to-url-list (url chars names)
  (cond ((endp names) nil)
        (t
         (cons
          (cons (car chars)
...">topic-to-url-list</a> url
              '(#\a #\b
                #\c
                #\d
                #\e
                #\f
                #\g
                #\h
                #\i
                #\j
                #\k
                #\l
                #\m
                #\n
                #\o
                #\p
                #\q
                #\r
                #\s
                #\t
                #\u
                #\v
                #\w
                #\x
                #\y
                #\z
                #\A
                #\B
                #\C
                #\D
                #\E
                #\F
                #\G
                #\H
                #\I
                #\J
                #\K
                #\L
                #\M
                #\N
                #\O
                #\P
                #\Q
                #\R
                #\S
                #\T
                #\U
                #\V
                #\W
                #\X
                #\Y
                #\Z)
              <a class="sym-link local-def" href="#def-_2Ahome-page-references_2A" data-sym="*HOME-PAGE-REFERENCES*" title="(defconst *home-page-references*
          &#39;(tours acl2-tutorial releases workshops course-materials books
            note-8-6 the-method git-quick-start interesting-applications
            acknowledgments real hons-enabled parallelism acl2-doc acl2
            |A_02Tiny_02Warning_02Sign| doc documentation copyright
...">*home-page-references*</a>))
          channel
          state
          nil)
        (<a class="sym-link system" href="../basis-a.html#def-newline" data-sym="NEWLINE">newline</a> channel state)))))</pre>
  </div>

<div class="form-block macro" id="def-write-home-page-top" data-defines="WRITE-HOME-PAGE-TOP" data-references="CLOSE-OUTPUT-CHANNEL,*COMBINED-MANUAL*,WRITE-HOME-PAGE,TOP-LEVEL,OBSERVATION,SET-FMT-SOFT-RIGHT-MARGIN,SET-FMT-HARD-RIGHT-MARGIN,PPROGN,OPEN-OUTPUT-CHANNEL,STATE,CHANNEL,MV-LET,QUOTE,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRITE-HOME-PAGE-TOP">write-home-page-top</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="../axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-write-home-page-top" data-sym="WRITE-HOME-PAGE-TOP" title="(defmacro write-home-page-top ()
  &#39;(mv-let (channel state)
           (open-output-channel &quot;home-page.html&quot; :character state)
           (pprogn (set-fmt-hard-right-margin 10000 state)
                   (set-fmt-soft-right-margin 10000 state)
...">write-home-page-top</a>
  nil
  '(<a class="sym-link system" href="../axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (channel state)
    (<a class="sym-link system" href="../axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a> <span class="string">"home-page.html"</span> <span class="keyword">:character</span> state)
    (<a class="sym-link system" href="../axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="../basis-a.html#def-set-fmt-hard-right-margin" data-sym="SET-FMT-HARD-RIGHT-MARGIN">set-fmt-hard-right-margin</a> <span class="number">10000</span> state)
      (<a class="sym-link system" href="../basis-a.html#def-set-fmt-soft-right-margin" data-sym="SET-FMT-SOFT-RIGHT-MARGIN">set-fmt-soft-right-margin</a> <span class="number">10000</span> state)
      (<a class="sym-link system" href="../basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> 'top-level <span class="string">"Writing home-page.html."</span>)
      (<a class="sym-link local-def" href="#def-write-home-page" data-sym="WRITE-HOME-PAGE" title="(defun write-home-page (channel state url)
  (mv-let (n state) (read-idate state)
          (let* ((date-list (decode-idate n))
                 (day (cadddr date-list))
                 (month
...">write-home-page</a> channel state <a class="sym-link local-def" href="#def-_2Acombined-manual_2A" data-sym="*COMBINED-MANUAL*" title="(defconst *combined-manual*
          &quot;https://www.cs.utexas.edu/users/moore/acl2/v8-6/combined-manual/&quot;)">*combined-manual*</a>)
      (<a class="sym-link system" href="../axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> channel state))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = 'üåô';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '‚òÄÔ∏è';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>