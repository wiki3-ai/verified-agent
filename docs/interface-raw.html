<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>interface-raw - ACL2 Book</title>
  <meta property="name" content="interface-raw">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">interface-raw</h1>
    <div class="path"><a href="interface-raw.lisp" class="source-link">interface-raw</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block macro" id="def-sharp-atsign-read-er" data-defines="SHARP-ATSIGN-READ-ER" data-references="STRING,QUOTE,CONCATENATE,ERROR,RETURN,T,STREAM,READ-CHAR-NO-HANG,NULL,WHEN,LOOP,PROGN,QUASIQUOTE,FORMAT-ARGS,&REST,STR,DEFMACRO" data-used-by="SHARP-ATSIGN-READ" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHARP-ATSIGN-READ-ER">sharp-atsign-read-er</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-sharp-atsign-read-er" data-sym="SHARP-ATSIGN-READ-ER" title="(defmacro sharp-atsign-read-er (str &amp;rest format-args)
  `(progn
    (loop (when (null (read-char-no-hang stream nil nil t)) (return)))
    (error (concatenate &#39;string ,str &quot;.  See :DOC set-iprint.&quot;) ,@format-args)))">sharp-atsign-read-er</a>
  (str &amp;rest format-args)
  `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (loop (when (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (read-char-no-hang stream nil nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (return)))
    (error (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> ,STR <span class="string">".  See :DOC set-iprint."</span>)
      ,@FORMAT-ARGS)))</pre>
  </div>

<div class="form-block function" id="def-sharp-atsign-read" data-defines="SHARP-ATSIGN-READ" data-references="CAR,VALUES,INDEX-AFTER,INDEX-BEFORE,MULTIPLE-VALUE-BIND,CDR,CONS,<=,IF,NEW-READ-STATE-ORDER,IPRINT-AR-AREF1,EQ,*IPRINT-READ-STATE*,OLD-READ-STATE,IPRINT-AR-ILLEGAL-INDEX,CERTIFY-BOOK-INFO,QUOTE,F-GET-GLOBAL,SHARP-ATSIGN-READ-ER,*,+,NOT,>,<,OR,COND,-,DIGIT,RETURN,T,READ-CHAR,SETQ,EQL,WHEN,LOOP,IPRINT-LAST-INDEX,INDEX,CHAR-CODE,ZERO-CODE,BAD-CH,CH,LET,IGNORE,DECLARE,*THE-LIVE-STATE*,STATE,&AUX,N,CHAR,STREAM,DEFUN" data-used-by="DEFINE-SHARP-ATSIGN" data-part-name="SHARP-ATSIGN-READ" data-part-args="*THE-LIVE-STATE*,STATE,&AUX,N,CHAR,STREAM" data-part-declare="N,CHAR,IGNORE,DECLARE" data-part-body="CAR,VALUES,INDEX-AFTER,INDEX-BEFORE,MULTIPLE-VALUE-BIND,CDR,CONS,<=,IF,NEW-READ-STATE-ORDER,IPRINT-AR-AREF1,EQ,*IPRINT-READ-STATE*,OLD-READ-STATE,IPRINT-AR-ILLEGAL-INDEX,CERTIFY-BOOK-INFO,QUOTE,F-GET-GLOBAL,SHARP-ATSIGN-READ-ER,*,+,NOT,>,<,OR,COND,-,DIGIT,RETURN,T,STREAM,READ-CHAR,SETQ,EQL,WHEN,LOOP,STATE,IPRINT-LAST-INDEX,INDEX,CHAR-CODE,ZERO-CODE,BAD-CH,CH,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHARP-ATSIGN-READ">sharp-atsign-read</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-sharp-atsign-read" data-sym="SHARP-ATSIGN-READ" title="(defun sharp-atsign-read (stream char n &amp;aux (state *the-live-state*))
  (declare (ignore char n))
  (let (ch
        bad-ch
        (zero-code (char-code #\0))
...">sharp-atsign-read</a>
  (stream <a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> n &amp;aux (state *the-live-state*))
  (declare (ignore <a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> n))
  (let (ch bad-ch
      (zero-code (char-code #\0))
      (index <span class="number">0</span>)
      (<a class="sym-link system" href="basis-a.html#def-iprint-last-index" data-sym="IPRINT-LAST-INDEX">iprint-last-index</a> (<a class="sym-link system" href="basis-a.html#def-iprint-last-index" data-sym="IPRINT-LAST-INDEX">iprint-last-index</a> state)))
    (loop (when (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (setq ch (read-char stream <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) #\#)
        (return))
      (let ((digit (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (char-code ch) zero-code)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (&lt; digit <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> digit <span class="number">9</span>)) (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> bad-ch) (setq bad-ch ch))
            (return))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setq index (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> digit (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <span class="number">10</span> index)))))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (bad-ch (<a class="sym-link local-def" href="#def-sharp-atsign-read-er" data-sym="SHARP-ATSIGN-READ-ER" title="(defmacro sharp-atsign-read-er (str &amp;rest format-args)
  `(progn
    (loop (when (null (read-char-no-hang stream nil nil t)) (return)))
    (error (concatenate &#39;string ,str &quot;.  See :DOC set-iprint.&quot;) ,@format-args)))">sharp-atsign-read-er</a> <span class="string">"Non-digit character ~s following #@~s"</span>
          bad-ch
          index))
      ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'certify-book-info state) (<a class="sym-link local-def" href="#def-sharp-atsign-read-er" data-sym="SHARP-ATSIGN-READ-ER" title="(defmacro sharp-atsign-read-er (str &amp;rest format-args)
  `(progn
    (loop (when (null (read-char-no-hang stream nil nil t)) (return)))
    (error (concatenate &#39;string ,str &quot;.  See :DOC set-iprint.&quot;) ,@format-args)))">sharp-atsign-read-er</a> <span class="string">"Illegal use of #@ reader macro during certify-book, #@~s#"</span>
          index))
      ((<a class="sym-link system" href="basis-a.html#def-iprint-ar-illegal-index" data-sym="IPRINT-AR-ILLEGAL-INDEX">iprint-ar-illegal-index</a> index state) (<a class="sym-link local-def" href="#def-sharp-atsign-read-er" data-sym="SHARP-ATSIGN-READ-ER" title="(defmacro sharp-atsign-read-er (str &amp;rest format-args)
  `(progn
    (loop (when (null (read-char-no-hang stream nil nil t)) (return)))
    (error (concatenate &#39;string ,str &quot;.  See :DOC set-iprint.&quot;) ,@format-args)))">sharp-atsign-read-er</a> <span class="string">"Out-of-bounds index in #@~s#"</span> index))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((old-read-state *iprint-read-state*))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> old-read-state nil) (<a class="sym-link system" href="basis-a.html#def-iprint-ar-aref1" data-sym="IPRINT-AR-AREF1">iprint-ar-aref1</a> index state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((new-read-state-order (if (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> index <a class="sym-link system" href="basis-a.html#def-iprint-last-index" data-sym="IPRINT-LAST-INDEX">iprint-last-index</a>)
                     '<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a>
                     '<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a>)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> old-read-state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (setq *iprint-read-state* (cons index new-read-state-order))
                    (<a class="sym-link system" href="basis-a.html#def-iprint-ar-aref1" data-sym="IPRINT-AR-AREF1">iprint-ar-aref1</a> index state))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr old-read-state) new-read-state-order) (<a class="sym-link system" href="basis-a.html#def-iprint-ar-aref1" data-sym="IPRINT-AR-AREF1">iprint-ar-aref1</a> index state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (multiple-value-bind (index-before index-after)
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr old-read-state) '<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a>) (values index (car old-read-state)))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (values (car old-read-state) index)))
                      (<a class="sym-link local-def" href="#def-sharp-atsign-read-er" data-sym="SHARP-ATSIGN-READ-ER" title="(defmacro sharp-atsign-read-er (str &amp;rest format-args)
  `(progn
    (loop (when (null (read-char-no-hang stream nil nil t)) (return)))
    (error (concatenate &#39;string ,str &quot;.  See :DOC set-iprint.&quot;) ,@format-args)))">sharp-atsign-read-er</a> <span class="string">"Attempt to read a form containing both an index~%~
                 created before the most recent rollover (#@~s#) and~%~
                 an index created after that rollover (#@~s#)"</span>
                        index-before
                        index-after))))))))))))</pre>
  </div>

<div class="form-block function" id="def-define-sharp-atsign" data-defines="DEFINE-SHARP-ATSIGN" data-references="SHARP-ATSIGN-READ,FUNCTION,SET-NEW-DISPATCH-MACRO-CHARACTER,DEFUN" data-part-name="DEFINE-SHARP-ATSIGN" data-part-body="SHARP-ATSIGN-READ,FUNCTION,SET-NEW-DISPATCH-MACRO-CHARACTER" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINE-SHARP-ATSIGN">define-sharp-atsign</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-define-sharp-atsign" data-sym="DEFINE-SHARP-ATSIGN" title="(defun define-sharp-atsign ()
  (set-new-dispatch-macro-character #\# #\@ #&#39;sharp-atsign-read))">define-sharp-atsign</a>
  nil
  (set-new-dispatch-macro-character #\#
    #\@
    (function <a class="sym-link local-def" href="#def-sharp-atsign-read" data-sym="SHARP-ATSIGN-READ" title="(defun sharp-atsign-read (stream char n &amp;aux (state *the-live-state*))
  (declare (ignore char n))
  (let (ch
        bad-ch
        (zero-code (char-code #\0))
...">sharp-atsign-read</a>)))</pre>
  </div>

<div class="form-block other" id="form-4" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(eval-when (<span class="keyword">:load-toplevel</span> <span class="keyword">:execute</span>)
  (when (compiled-function-p! '<a class="sym-link local-def" href="#def-sharp-atsign-read" data-sym="SHARP-ATSIGN-READ" title="(defun sharp-atsign-read (stream char n &amp;aux (state *the-live-state*))
  (declare (ignore char n))
  (let (ch
        bad-ch
        (zero-code (char-code #\0))
...">sharp-atsign-read</a>)
    (let ((*readtable* *acl2-readtable*))
      (<a class="sym-link local-def" href="#def-define-sharp-atsign" data-sym="DEFINE-SHARP-ATSIGN" title="(defun define-sharp-atsign ()
  (set-new-dispatch-macro-character #\# #\@ #&#39;sharp-atsign-read))">define-sharp-atsign</a>))))</pre>
  </div>

<div class="form-block macro" id="def-gv" data-defines="GV" data-references="STOBJS-IN,W,GUARD-RAW,EV-FNCALL-GUARD-ER,LIST,THROW-RAW-EV-FNCALL,SAFE-MODE,QUOTE,F-GET-GLOBAL,OR,IF,*THE-LIVE-STATE*,GC-OFF,NOT,GC-ON,LET,FUNNY-ARGS,FUNNY-FN,QUASIQUOTE,SUBLIS,VAL,ARGS,FN,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="GV">gv</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a>
  (fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> val)
  (<a class="sym-link system" href="axioms.html#def-sublis" data-sym="SUBLIS">sublis</a> `((funny-fn . ,FN) (funny-args . ,ARGS))
    `(let ((gc-on (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (gc-off *the-live-state*))))
      (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> gc-on (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'safe-mode *the-live-state*))
        (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'ev-fncall-guard-er
            'funny-fn
            ,(CONS &#39;LIST &#39;FUNNY-ARGS)
            (guard-raw 'funny-fn (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
            (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> 'funny-fn (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> gc-on)))
        ,VAL))))</pre>
  </div>

<div class="form-block other" id="form-6" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* <a class="sym-link system" href="axioms.html#def-mv-list" data-sym="MV-LIST">mv-list</a>
  (input-arity x)
  (declare (ignore input-arity))
  x)</pre>
  </div>

<div class="form-block other" id="form-7" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* <a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a>
  (fn x y)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal fn 'mbe1-raw)
       (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'safe-mode *the-live-state*)) (if (equal x y)
        y
        (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> <a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a> (fn x y) y)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> y)))</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* <a class="sym-link system" href="basis-a.html#def-wormhole-eval" data-sym="WORMHOLE-EVAL">wormhole-eval</a>
  (qname qlambda free-vars)
  (declare (ignore qname qlambda free-vars))
  nil)</pre>
  </div>

<div class="form-block other" id="form-9" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* acl2-numberp (x) (numberp x))</pre>
  </div>

<div class="form-block other" id="form-10" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* binary-*
  (x y)
  (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> number
    (if (numberp x)
      (if (numberp y)
        (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> x y)
        (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> binary-* (x y) <span class="number">0</span>))
      (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> binary-* (x y) <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* binary-+
  (x y)
  (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> number
    (if (numberp x)
      (if (numberp y)
        (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> number x) (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> number y))
        (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> binary-+ (x y) x))
      (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> binary-+
        (x y)
        (if (numberp y)
          y
          <span class="number">0</span>)))))</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* unary--
  (x)
  (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> number
    (if (numberp x)
      (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> x)
      (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> unary-- (x) <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* unary-/
  (x)
  (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> number
    (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (numberp x) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> x <span class="number">0</span>)))
      (<a class="sym-link system" href="axioms.html#def-_2F" data-sym="/">/</a> x)
      (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> unary-/ (x) <span class="number">0</span>))))</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* &lt;
  (x y)
  (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp x) (rationalp y))
    (&lt; (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> rational x) (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> rational y))
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> &lt;
      (x y)
      (let ((x1 (if (numberp x)
             x
             <span class="number">0</span>)) (y1 (if (numberp y)
              y
              <span class="number">0</span>)))
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (&lt; (realpart x1) (realpart y1))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (realpart x1) (realpart y1))
            (&lt; (imagpart x1) (imagpart y1))))))))</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* apply
  (x y)
  (error <span class="string">"We have called apply on ~s and ~s, but we thought we were rid of apply."</span>
    x
    y))</pre>
  </div>

<div class="form-block other" id="form-16" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* bad-atom&lt;=
  (x y)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-bad-atom" data-sym="BAD-ATOM">bad-atom</a> x) (<a class="sym-link system" href="axioms.html#def-bad-atom" data-sym="BAD-ATOM">bad-atom</a> y)) (error <span class="string">"We have called (the executable-counterpart of) bad-atom&lt;= on ~
                 ~s and ~s, but bad-atom&lt;= has no Common Lisp definition."</span>
        x
        y))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> bad-atom&lt;= (x y) nil))))</pre>
  </div>

<div class="form-block other" id="form-17" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* car
  (x)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp x) (car x))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> car (x) nil))))</pre>
  </div>

<div class="form-block other" id="form-18" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* cdr
  (x)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((consp x) (cdr x))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> cdr (x) nil))))</pre>
  </div>

<div class="form-block other" id="form-19" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* char-code
  (x)
  (if (characterp x)
    (char-code x)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> char-code (x) <span class="number">0</span>)))</pre>
  </div>

<div class="form-block other" id="form-20" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* characterp (x) (characterp x))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* code-char
  (x)
  (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp x) (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>) (&lt; x <span class="number">256</span>))
    (code-char x)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> code-char (x) <a class="sym-link system" href="axioms.html#def-_2Anull-char_2A" data-sym="*NULL-CHAR*">*null-char*</a>)))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* complex
  (x y)
  (complex (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> rational
      (if (rationalp x)
        x
        (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> complex (x y) <span class="number">0</span>)))
    (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> rational
      (if (rationalp y)
        y
        (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> complex (x y) <span class="number">0</span>)))))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* complex-rationalp (x) (complexp x))</pre>
  </div>

<div class="form-block other" id="form-24" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* coerce
  (x y)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal y '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>) (if (stringp x)
        (coerce x '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)
        (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> coerce (x y) nil)))
    ((<a class="sym-link system" href="axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> x) (if (equal y '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>)
        (coerce x '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>)
        (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> coerce (x y) (coerce x '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> coerce (x y) (coerce (<a class="sym-link system" href="axioms.html#def-make-character-list" data-sym="MAKE-CHARACTER-LIST">make-character-list</a> x) '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>)))))</pre>
  </div>

<div class="form-block other" id="form-25" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* cons (x y) (cons x y))</pre>
  </div>

<div class="form-block other" id="form-26" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* consp (x) (consp x))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* denominator
  (x)
  (if (rationalp x)
    (denominator x)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> denominator (x) <span class="number">1</span>)))</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* equal (x y) (equal x y))</pre>
  </div>

<div class="form-block other" id="form-29" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* if
  (x y z)
  (error <span class="string">"We just can&#39;t stand having a non-lazy IF around.  But we attempted ~%~
          to call the executable-counterpart of IF on argument list ~s."</span>
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> x y z)))</pre>
  </div>

<div class="form-block other" id="form-30" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* imagpart
  (x)
  (if (numberp x)
    (imagpart x)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> imagpart (x) <span class="number">0</span>)))</pre>
  </div>

<div class="form-block other" id="form-31" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* integerp (x) (integerp x))</pre>
  </div>

<div class="form-block other" id="form-32" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* intern-in-package-of-symbol
  (x y)
  (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp x) (symbolp y))
    (intern-in-package-of-symbol x y)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> intern-in-package-of-symbol (x y) nil)))</pre>
  </div>

<div class="form-block other" id="form-33" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* pkg-imports
  (pkg)
  (if (stringp pkg)
    (pkg-imports pkg)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> pkg-imports (pkg) nil)))</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* pkg-witness
  (pkg)
  (if (stringp pkg)
    (pkg-witness pkg)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> pkg-witness (pkg) (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> <a class="sym-link system" href="axioms.html#def-_2Apkg-witness-name_2A" data-sym="*PKG-WITNESS-NAME*">*pkg-witness-name*</a> <span class="string">"ACL2"</span>))))</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* numerator
  (x)
  (if (rationalp x)
    (numerator x)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> numerator (x) <span class="number">0</span>)))</pre>
  </div>

<div class="form-block other" id="form-36" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* rationalp (x) (rationalp x))</pre>
  </div>

<div class="form-block other" id="form-37" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* realpart
  (x)
  (if (numberp x)
    (realpart x)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> realpart (x) <span class="number">0</span>)))</pre>
  </div>

<div class="form-block other" id="form-38" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* stringp (x) (stringp x))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* symbol-name
  (x)
  (if (symbolp x)
    (symbol-name x)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> symbol-name (x) <span class="string">""</span>)))</pre>
  </div>

<div class="form-block other" id="form-40" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* symbol-package-name
  (x)
  (if (symbolp x)
    (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (chk-bad-lisp-object x) (symbol-package-name x))
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> symbol-package-name (x) <span class="string">""</span>)))</pre>
  </div>

<div class="form-block other" id="form-41" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* symbolp (x) (symbolp x))</pre>
  </div>

<div class="form-block other" id="form-42" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-*1* apply$-lambda
  (fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ftype (function (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (values <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) ev$))
  (if (apply$-lambda-guard fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
    (apply$-lambda fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
    (<a class="sym-link local-def" href="#def-gv" data-sym="GV" title="(defmacro gv (fn args val)
  (sublis `((funny-fn . ,fn) (funny-args . ,args))
          `(let ((gc-on (not (gc-off *the-live-state*))))
             (if (or gc-on (f-get-global &#39;safe-mode *the-live-state*))
                 (throw-raw-ev-fncall
...">gv</a> apply$-lambda (fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (apply$-lambda-logical fn <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))</pre>
  </div>

<div class="form-block other" id="form-43" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output macroexpand1!
  (x)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
    (macroexpand1 x 'oneify *the-live-state*)
    (declare (ignore erp state))
    val))</pre>
  </div>

<div class="form-block function" id="def-oneified-stobj-let-actuals" data-defines="ONEIFIED-STOBJ-LET-ACTUALS" data-references="CDR,ONEIFY,HARD,ER,&,OR,QUASIQUOTE,CREATE-ST,PARENT,ST,QUOTE,TBL-GET,CASE-MATCH,ACTUAL,LET,CAR,CONS,T,ENDP,COND,PROGRAM-P,W,FNS,CREATORS,ACTUALS,DEFUN" data-used-by="STOBJ-LET-FN-ONEIFY" data-part-name="ONEIFIED-STOBJ-LET-ACTUALS" data-part-args="PROGRAM-P,W,FNS,CREATORS,ACTUALS" data-part-body="CDR,PROGRAM-P,W,FNS,ONEIFY,ONEIFIED-STOBJ-LET-ACTUALS,HARD,ER,&,OR,QUASIQUOTE,CREATE-ST,PARENT,ST,QUOTE,TBL-GET,CASE-MATCH,ACTUAL,LET,CREATORS,CAR,CONS,T,ACTUALS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ONEIFIED-STOBJ-LET-ACTUALS">oneified-stobj-let-actuals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-oneified-stobj-let-actuals" data-sym="ONEIFIED-STOBJ-LET-ACTUALS" title="(defun oneified-stobj-let-actuals (actuals creators fns w program-p)
  (cond ((endp actuals) nil)
        (t
         (cons
          (cond
...">oneified-stobj-let-actuals</a>
  (actuals creators fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> actuals) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((car creators) (let ((actual (car actuals)))
              (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> actual
                ((tbl-get ('quote st) parent (create-st)) `(<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> ,(ONEIFY `(,TBL-GET &#39;,ST ,PARENT NIL) FNS W PROGRAM-P)
                    (,CREATE-ST)))
                (&amp; (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                    '<a class="sym-link local-def" href="#def-oneified-stobj-let-actuals" data-sym="ONEIFIED-STOBJ-LET-ACTUALS" title="(defun oneified-stobj-let-actuals (actuals creators fns w program-p)
  (cond ((endp actuals) nil)
        (t
         (cons
          (cond
...">oneified-stobj-let-actuals</a>
                    <span class="string">"Implementation error: unexpected stobj-let ~
                               actual, ~x0.  Please contact the ACL2 ~
                               implementors."</span>
                    actual)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (oneify (car actuals) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))
        (<a class="sym-link local-def" href="#def-oneified-stobj-let-actuals" data-sym="ONEIFIED-STOBJ-LET-ACTUALS" title="(defun oneified-stobj-let-actuals (actuals creators fns w program-p)
  (cond ((endp actuals) nil)
        (t
         (cons
          (cond
...">oneified-stobj-let-actuals</a> (cdr actuals)
          (cdr creators)
          fns
          <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
          program-p)))))</pre>
  </div>

<div class="form-block function" id="def-stobj-let-fn-oneify" data-defines="STOBJ-LET-FN-ONEIFY" data-references="IGNORABLE,LET,FORM,ONEIFIED-STOBJ-LET-ACTUALS,ONEIFIED-ACTUALS,QUASIQUOTE,UPDATED-ONEIFIED-CONSUMER,ONEIFY-LST,ONEIFIED-UPDATERS,ONEIFIED-CONSUMER,ONEIFY,ONEIFIED-PRODUCER,LET*,T,STOBJ-LET,QUOTE,HARD,ER,MV,COND,IGNORE,DECLARE,PARSE-STOBJ-LET,CONSUMER,BINDINGS,UPDATERS,PRODUCER,PRODUCER-VARS,STOBJ,CREATORS,ACTUALS,BOUND-VARS,MSG,MV-LET,PROGRAM-P,W,FNS,X,DEFUN" data-used-by="ONEIFY-FLET-BINDINGS" data-part-name="STOBJ-LET-FN-ONEIFY" data-part-args="PROGRAM-P,W,FNS,X" data-part-body="IGNORABLE,LET,FORM,ONEIFIED-STOBJ-LET-ACTUALS,ONEIFIED-ACTUALS,QUASIQUOTE,UPDATED-ONEIFIED-CONSUMER,ONEIFY-LST,ONEIFIED-UPDATERS,ONEIFIED-CONSUMER,PROGRAM-P,W,FNS,ONEIFY,ONEIFIED-PRODUCER,LET*,T,STOBJ-LET,QUOTE,HARD,ER,MV,COND,IGNORE,DECLARE,X,PARSE-STOBJ-LET,CONSUMER,BINDINGS,UPDATERS,PRODUCER,PRODUCER-VARS,STOBJ,CREATORS,ACTUALS,BOUND-VARS,MSG,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="STOBJ-LET-FN-ONEIFY">stobj-let-fn-oneify</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-stobj-let-fn-oneify" data-sym="STOBJ-LET-FN-ONEIFY" title="(defun stobj-let-fn-oneify (x fns w program-p)
  (mv-let
   (msg bound-vars actuals creators stobj producer-vars producer updaters
        bindings consumer)
   (parse-stobj-let x) (declare (ignore bindings))
...">stobj-let-fn-oneify</a>
  (x fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>
      actuals
      creators
      stobj
      producer-vars
      producer
      updaters
      bindings
      consumer)
    (parse-stobj-let x)
    (declare (ignore bindings))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard 'stobj-let <span class="string">"~@0"</span> <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>) nil nil nil nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((oneified-producer (oneify producer fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)) (oneified-consumer (oneify consumer fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p))
            (oneified-updaters (oneify-lst updaters fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p))
            (updated-oneified-consumer `(<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ,(PAIRLIS-X1 STOBJ (PAIRLIS$ ONEIFIED-UPDATERS NIL))
                ,ONEIFIED-CONSUMER))
            (oneified-actuals (<a class="sym-link local-def" href="#def-oneified-stobj-let-actuals" data-sym="ONEIFIED-STOBJ-LET-ACTUALS" title="(defun oneified-stobj-let-actuals (actuals creators fns w program-p)
  (cond ((endp actuals) nil)
        (t
         (cons
          (cond
...">oneified-stobj-let-actuals</a> actuals
                creators
                fns
                <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                program-p))
            (form `(let (,@(PAIRLIS$ BOUND-VARS (PAIRLIS$ ONEIFIED-ACTUALS NIL)))
                (declare (ignorable ,@BOUND-VARS))
                ,(COND
  ((CDR PRODUCER-VARS)
   `(MV-LET ,PRODUCER-VARS ,ONEIFIED-PRODUCER ,UPDATED-ONEIFIED-CONSUMER))
  (T
   `(LET ((,(CAR PRODUCER-VARS) ,ONEIFIED-PRODUCER))
      ,UPDATED-ONEIFIED-CONSUMER))))))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> form <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> actuals creators producer-vars stobj <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-oneify-flet-bindings" data-defines="ONEIFY-FLET-BINDINGS" data-references="Y,LST,TO-DF,ARG,SETQ,STOBJS-IN,ARG-FORMS,*NIL*,FQUOTEP,VARIABLEP,FORMALS,QLAMBDA,QNAME,WORMHOLE-EVAL,MACROEXPAND1!,MACRO-BODY,GETPROPC,THROW-OR-ATTACH,STRIP-CADRS,VALUE-FORMS,POST-BINDINGS,X2,X1,CHK-NO-STOBJ-INDEX-ALIASING,PROG2$,NO-DUPLICATE-INDICES-CHECKS-FOR-STOBJ-LET-ACTUALS,DUPS-CHECK,STOBJ-LET-FN-ONEIFY,STOBJ,PRODUCER-VARS,CREATORS,ACTUALS,BOUND-VARS,TEMP,STOBJ-LET,OTHERWISE,CASE,LENGTH,LEN,WITH-GLOBAL-STOBJ,MV-LET-FOR-WITH-LOCAL-STOBJ,PARSE-WITH-LOCAL-STOBJ,CREATOR,MV-LET-FORM,ST,WITH-LOCAL-STOBJ,TRANSLATE-AND-TEST,TUPLE,MACROLET,STRIP-CARS,PAIRLIS$,BODY-FORM,PROGN$,NEW-BODY,VALUE-FORM,CDDDR,ONEIFY-LST,*MACROS-FOR-NONEXPANSION-IN-RAW-LISP*,*ONEIFY-PRIMITIVES*,MEMBER-EQ,*THE-LIVE-STATE*,SAFE-MODE,F-GET-GLOBAL,FLET,LOGIC-BODY,EXEC-FN,ACL2-GENTEMP,LOGIC-FN,ONEIFIED-EXEC-BODY,CADDDR,ONEIFIED-LOGIC-BODY,MBE1-RAW,APPLY,**1*-AS-RAW*,FORM,INVARIANT-RISK,RETURN-LAST-ARG2,EC-CALL1-RAW,ARG2,FN,RETURN-LAST-FN,QFN,RETURN-LAST,EVAL,EXPANSION,ERROR,BIND-MACRO-ARGS,CADDR,BODY,ARGS,PAIR,LISTLIS,NOT,VALUES-LIST,LOOP$-STOBJS-OUT,STOBJS-OUT,TMP,TRANSLATE11-LOOP$,LOOP$,TRANSLATE11-LAMBDA-OBJECT,BINDINGS,TX,FLG,LAMBDA$,INTERFACE-ER,HONS-COPY-LAMBDA-OBJECT?,VAL,ERP,MV-LET,LAMBDA,SYMBOLP,KWOTE,KEYWORDP,ATOM,MULTIPLE-VALUE-BIND,PACKN,FROM,I,S,XS,RATIONAL,DOUBLE-FLOAT,TYPEP,X,NULL,CHECK,*1*BODY,STOBJS-OUT-WITH-DFS,REMOVE-DOUBLE-FLOATS,DEFAULT-STATE-VARS,*TOUCHABLE-STATE-VARS*,DEFCONST,THE-FOR-*1*,TYPE-TO-VAR-ALIST,ALIST-TO-THE-FOR-*1*-LST,VALUES,PUSH,V,&,OR,CASE-MATCH,TP,D,DCL2-BODY,LET,ASSOC-EQ,CONSP,AND,ASSERT$,DCL2,AS,NEW-DCLS,REMOVE-TYPE-DCLS,DEFUN,CDR,IGNORE,DECLARE,LIST,*1*-SYMBOL,LIST*,PROGN,IF,ONEIFIED-BODY,LAST,ONEIFIED-BODY0,THE,QUASIQUOTE,ONEIFY,COLLECT,VAR,CADR,=,PRED,WITH,APPEND,TYPE,QUOTE,EQ,WHEN,IN,DCL,FOR,LOOP,CONJOIN-UNTRANSLATED-TERMS,GUARDIAN,IGNORE-VARS,CDDR,BUTLAST,REMOVE-STRINGS,STRIP-CDRS,APPEND-LST,DCLS,CAR,DEF,LET*,CONS,T,ENDP,COND,PROGRAM-P,W,FNS,ALIST,DEFUN-ONE-OUTPUT,MUTUAL-RECURSION" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ONEIFY-FLET-BINDINGS">oneify-flet-bindings</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (defun-one-output <a class="sym-link local-def" href="#def-oneify-flet-bindings" data-sym="ONEIFY-FLET-BINDINGS" title="(mutual-recursion
 (defun-one-output oneify-flet-bindings (alist fns w program-p)
                   (cond ((endp alist) nil)
                         (t
                          (cons
...">oneify-flet-bindings</a>
    (alist fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((def (car alist)) (dcls (<a class="sym-link system" href="axioms.html#def-append-lst" data-sym="APPEND-LST">append-lst</a> (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (<a class="sym-link system" href="axioms.html#def-remove-strings" data-sym="REMOVE-STRINGS">remove-strings</a> (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> def) <span class="number">1</span>)))))
              (ignore-vars (ignore-vars dcls))
              (guardian (<a class="sym-link system" href="axioms.html#def-conjoin-untranslated-terms" data-sym="CONJOIN-UNTRANSLATED-TERMS">conjoin-untranslated-terms</a> (loop for
                    dcl
                    in
                    dcls
                    when
                    (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car dcl) 'type)
                    <a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a>
                    (loop with
                      pred
                      <a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a>
                      (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> dcl)
                      for
                      var
                      in
                      (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> dcl)
                      collect
                      (oneify `(<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> ,PRED ,VAR) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))))
              (oneified-body0 (oneify (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> def)) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p))
              (oneified-body (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> guardian <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                  oneified-body0
                  `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> ,GUARDIAN ,ONEIFIED-BODY0))))
            (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (*1*-symbol (car def))
              (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def)
              (if ignore-vars
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> `(declare (ignore ,@IGNORE-VARS)) oneified-body)
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> oneified-body))))
          (<a class="sym-link local-def" href="#def-oneify-flet-bindings" data-sym="ONEIFY-FLET-BINDINGS" title="(mutual-recursion
 (defun-one-output oneify-flet-bindings (alist fns w program-p)
                   (cond ((endp alist) nil)
                         (t
                          (cons
...">oneify-flet-bindings</a> (cdr alist) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> remove-type-dcls
    (dcls)
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((alist nil) (new-dcls (loop for
            dcl
            in
            dcls
            as
            dcl2
            <a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a>
            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp dcl) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car dcl) 'declare))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> 'type (cdr dcl)) (let ((dcl2-body (loop for
                         d
                         in
                         (cdr dcl)
                         when
                         (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car d) 'type) (let ((tp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> d)))
                               (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> tp
                                 (('<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> '<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> . &amp;) nil)
                                 (&amp; (loop for
                                     v
                                     in
                                     (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> d)
                                     collect
                                     (push `(,TP . ,V) alist)))))
                             nil)
                           (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                         collect
                         d)))
                    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dcl2-body (cons 'declare dcl2-body))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> dcl)))
            when
            dcl2
            collect
            dcl2)))
      (values new-dcls alist)))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> alist-to-the-for-*1*-lst
    (type-to-var-alist)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> type-to-var-alist) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons `(<a class="sym-link system" href="axioms.html#def-the-for-_2A1_2A" data-sym="THE-FOR-*1*">the-for-*1*</a> ,(CAAR TYPE-TO-VAR-ALIST)
            ,(CDAR TYPE-TO-VAR-ALIST))
          (alist-to-the-for-*1*-lst (cdr type-to-var-alist))))))
  (<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *touchable-state-vars*
    (<a class="sym-link system" href="basis-a.html#def-default-state-vars" data-sym="DEFAULT-STATE-VARS">default-state-vars</a> nil
      <span class="keyword">:temp-touchable-vars</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:temp-touchable-fns</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> remove-double-floats
    (stobjs-out-with-dfs *1*body check)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr stobjs-out-with-dfs)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (check `(let ((x ,*1*BODY))
              (if (typep x 'double-float)
                (rational x)
                x)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(rational ,*1*BODY))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((xs (loop for
               s
               in
               stobjs-out-with-dfs
               as
               i
               from
               <span class="number">0</span>
               collect
               (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> s (<a class="sym-link system" href="basis-a.html#def-packn" data-sym="PACKN">packn</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'x i))))))
          `(multiple-value-bind ,XS
            ,*1*BODY
            (values ,@(COND
   (CHECK
    (LOOP FOR S IN STOBJS-OUT-WITH-DFS AS X IN XS
          COLLECT (IF (EQ S :DF)
                      `(IF (TYPEP ,X &#39;DOUBLE-FLOAT)
                           (RATIONAL ,X)
                           ,X)
                      X)))
   (T
    (LOOP FOR S IN STOBJS-OUT-WITH-DFS AS X IN XS
          COLLECT (IF (EQ S :DF)
                      `(RATIONAL ,X)
                      X))))))))))
  (defun-one-output oneify
    (x fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> x) (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> x))
          ((symbolp x) x)
          ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x) (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> x))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> x)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'quote) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x)) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x)) 'lambda)) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val)
              (hons-copy-lambda-object? x)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (interface-er <span class="string">"~@0"</span> val)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> val))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> x)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'lambda$) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg tx bindings)
          (translate11-lambda-object x
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            nil
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            nil
            x
            'oneify
            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
            *touchable-state-vars*
            nil)
          (declare (ignore bindings))
          (if flg
            (interface-er <span class="string">"Implementation error: Translate11-lambda-object in ~
                         oneify encountered an untranslatable LAMBDA$, ~x0, ~
                         even though it was supposedly translated ~
                         successfully earlier.  Please contact the ACL2 ~
                         implementors."</span>
              x)
            tx)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'loop$) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg tx bindings)
          (translate11-loop$ x
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            nil
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            nil
            nil
            x
            'oneify
            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
            *touchable-state-vars*)
          (declare (ignore bindings))
          (if flg
            `(interface-er <span class="string">"Implementation error: translate11-loop$ in oneify ~
                          encountered an untranslatable LOOP$, ~x0.  We ~
                          thought that this could only happen under a call of ~
                          non-exec, in which case we should never be ~
                          executing this code!  Please contact the ACL2 ~
                          implementors."</span>
              ',X)
            (let ((tmp (oneify tx fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)) (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (loop$-stobjs-out x tx)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((cdr <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) `(values-list ,TMP)) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> tmp))))))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp (car x))) (oneify (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> 'let (listlis (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car x)) (cdr x)) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (car x)))
          fns
          <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
          program-p))
      ((let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car x) fns)))
         (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (cdr pair)
           (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> pair)) (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> pair))
               (alist (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp alist)
                   (bind-macro-args <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> x <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *touchable-state-vars*)
                   (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (error <span class="string">"Implementation error: Unexpected error in ~
                                    oneify:~%x = ~s~%fns = ~s"</span>
                         x
                         fns))
                     (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> alist))))
               (expansion (eval `(let ,(LOOP FOR PAIR IN ALIST
       COLLECT (LIST (CAR PAIR) (KWOTE (CDR PAIR))))
                     ,BODY))))
             (oneify expansion fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a>) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((qfn (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr x)) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x))) (<a class="sym-link system" href="axioms.html#def-return-last-fn" data-sym="RETURN-LAST-FN">return-last-fn</a> (<a class="sym-link system" href="axioms.html#def-return-last-fn" data-sym="RETURN-LAST-FN">return-last-fn</a> qfn))
            (fn (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="axioms.html#def-return-last-fn" data-sym="RETURN-LAST-FN">return-last-fn</a> '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>))
            (arg2 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn 'ec-call1-raw))
                (return-last-arg2 <a class="sym-link system" href="axioms.html#def-return-last-fn" data-sym="RETURN-LAST-FN">return-last-fn</a>
                  (oneify (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> x) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn 'ec-call1-raw) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> program-p 'invariant-risk)) (oneify (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> x)) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((form (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> x))))
                    `(<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ,@(ONEIFY-LST (CDR FORM) FNS W PROGRAM-P))) (**1*-as-raw* nil))
                      (apply ',(IF (FUNCTION-SYMBOLP (CAR FORM) W)
     (*1*-SYMBOL (CAR FORM))
     (ASSERT$ (GETPROPC (CAR FORM) &#39;MACRO-BODY NIL W)
              (*1*-SYMBOL (ADD-SUFFIX (CAR FORM) *INLINE-SUFFIX*))))
                        <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))))
            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn 'mbe1-raw) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((oneified-logic-body (oneify (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> x) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)) (oneified-exec-body arg2)
                  (logic-fn (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> program-p) (acl2-gentemp <span class="string">"ONEIFY"</span>)))
                  (exec-fn (acl2-gentemp <span class="string">"ONEIFY"</span>))
                  (logic-body (if program-p
                      oneified-logic-body
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> logic-fn))))
                `(flet (,@(AND (NOT PROGRAM-P) `((,LOGIC-FN NIL ,ONEIFIED-LOGIC-BODY))) (,EXEC-FN nil ,ONEIFIED-EXEC-BODY))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'safe-mode *the-live-state*) (,(*1*-SYMBOL &#39;RETURN-LAST) ,QFN (,EXEC-FN) ,LOGIC-BODY))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ,(IF PROGRAM-P
     `(,EXEC-FN)
     `(IF **1*-AS-RAW*
          (,EXEC-FN)
          ,LOGIC-BODY)))))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> fn arg2 (oneify (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> x) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p))))))
      ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x) *oneify-primitives*)
         (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x) *macros-for-nonexpansion-in-raw-lisp*)) (let ((<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (oneify-lst (cdr x) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))
          (cons (car x) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a>) (multiple-value-bind (dcls alist)
          (remove-type-dcls (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> x) <span class="number">1</span>))
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((value-form (oneify (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> x) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)) (new-body (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (alist `(<a class="sym-link system" href="axioms.html#def-progn_24" data-sym="PROGN$">progn$</a> ,@(ALIST-TO-THE-FOR-*1*-LST ALIST) ,(CAR (LAST X))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> x)))))
              (body-form (oneify new-body fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))
            `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> ,(CADR X) ,VALUE-FORM ,@DCLS ,BODY-FORM))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'flet) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'flet
          (<a class="sym-link local-def" href="#def-oneify-flet-bindings" data-sym="ONEIFY-FLET-BINDINGS" title="(mutual-recursion
 (defun-one-output oneify-flet-bindings (alist fns w program-p)
                   (cond ((endp alist) nil)
                         (t
                          (cons
...">oneify-flet-bindings</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)
          (oneify (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> x))
            (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-pairlis_24" data-sym="PAIRLIS$">pairlis$</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x)) nil) fns)
            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
            program-p)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'macrolet) (oneify (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> x))
          (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (loop for
              tuple
              in
              (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x)
              collect
              (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car tuple) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple) (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> tuple)))
            fns)
          <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
          program-p))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="axioms.html#def-translate-and-test" data-sym="TRANSLATE-AND-TEST">translate-and-test</a>) (oneify (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> x) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'with-local-stobj) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp st mv-let-form creator)
          (<a class="sym-link system" href="basis-a.html#def-parse-with-local-stobj" data-sym="PARSE-WITH-LOCAL-STOBJ">parse-with-local-stobj</a> (cdr x))
          (declare (ignore erp))
          (mv-let-for-with-local-stobj mv-let-form
            st
            creator
            fns
            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
            program-p)))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'with-global-stobj) (let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> x)))
          (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>
            (<span class="number">3</span> `(with-global-stobj ,(CADR X)
                ,(ONEIFY (CADDR X) FNS W PROGRAM-P)))
            (<span class="number">4</span> `(with-global-stobj ,(CADR X)
                ,(CADDR X)
                ,(ONEIFY (CADDDR X) FNS W PROGRAM-P)))
            (otherwise (error <span class="string">"Unexpected case for with-global-stobj,~|~x0"</span> x)))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'stobj-let) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (temp <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a> actuals creators producer-vars stobj)
          (<a class="sym-link local-def" href="#def-stobj-let-fn-oneify" data-sym="STOBJ-LET-FN-ONEIFY" title="(defun stobj-let-fn-oneify (x fns w program-p)
  (mv-let
   (msg bound-vars actuals creators stobj producer-vars producer updaters
        bindings consumer)
   (parse-stobj-let x) (declare (ignore bindings))
...">stobj-let-fn-oneify</a> x fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)
          (let ((dups-check (no-duplicate-indices-checks-for-stobj-let-actuals <a class="sym-link system" href="history-management.html#def-bound-vars" data-sym="BOUND-VARS">bound-vars</a>
                 actuals
                 creators
                 producer-vars
                 stobj
                 <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (dups-check `(<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (flet ((<a class="sym-link system" href="axioms.html#def-chk-no-stobj-index-aliasing" data-sym="CHK-NO-STOBJ-INDEX-ALIASING">chk-no-stobj-index-aliasing</a> (x1 x2)
                       (,(*1*-SYMBOL &#39;CHK-NO-STOBJ-INDEX-ALIASING) x1 x2)))
                    ,DUPS-CHECK)
                  temp))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> temp)))))
      ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x) '(let)) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (cdr x)) (bindings (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
            (post-bindings (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
          (multiple-value-bind (dcls alist)
            (remove-type-dcls (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> post-bindings <span class="number">1</span>))
            (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((value-forms (oneify-lst (<a class="sym-link system" href="axioms.html#def-strip-cadrs" data-sym="STRIP-CADRS">strip-cadrs</a> bindings) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)) (new-body (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (alist `(<a class="sym-link system" href="axioms.html#def-progn_24" data-sym="PROGN$">progn$</a> ,@(ALIST-TO-THE-FOR-*1*-LST ALIST)
                        ,(CAR (LAST POST-BINDINGS))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> post-bindings)))))
                (body-form (oneify new-body fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))
              `(,(CAR X) ,(LISTLIS (STRIP-CARS BINDINGS) VALUE-FORMS)
                ,@DCLS
                ,BODY-FORM)))))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'throw-or-attach) (interface-er <span class="string">"Implementation error: Unexpected call of throw-or-attach in oneify:~%~x0"</span>
          x))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car x) 'macro-body nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car x) fns))) (oneify (macroexpand1! x) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="basis-a.html#def-wormhole-eval" data-sym="WORMHOLE-EVAL">wormhole-eval</a>) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((qname (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x)) (qlambda (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> x))
            (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> qlambda)))
            (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> qlambda))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> qname) (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> qname))) (interface-er <span class="string">"We thought that the name argument of every call of wormhole-eval in ~
          the ACL2 source code was either a variable symbol or a quoted ~
          constant.  But oneify has encountered a call of wormhole-eval with ~
          the term ~x0 in the wormhole name position.  Out of sheer laziness, ~
          oneify is not prepared to deal with such a call of wormhole-eval!  ~
          Please inform the ACL2 developers of this error and we&#39;ll fix it!"</span>
                qname))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="basis-a.html#def-wormhole-eval" data-sym="WORMHOLE-EVAL">wormhole-eval</a>
                qname
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'lambda <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (oneify <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))
                <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a>)))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((arg-forms (oneify-lst (cdr x) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> program-p 'invariant-risk)
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car x) 'invariant-risk nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))) (let ((<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car x) '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
                (when (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:df</span> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>)
                  (setq arg-forms
                    (loop for
                      arg
                      in
                      arg-forms
                      as
                      s
                      in
                      <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
                      collect
                      (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> s <span class="keyword">:df</span>)
                        `(to-df ,ARG)
                        arg)))))
              (let ((<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car x) '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
                (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:df</span> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
                  (remove-double-floats <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
                    (cons (car x) arg-forms)
                    nil)
                  (cons (car x) arg-forms))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (*1*-symbol (car x)) arg-forms)))))))
  (defun-one-output oneify-lst
    (lst fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> lst) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((x (oneify (car lst) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)) (y (oneify-lst (cdr lst) fns <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> program-p)))
          (cons x y))))))</pre>
  </div>

<div class="form-block other" id="form-47" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output select-stobj
  (name stobjs terms)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> stobjs) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name (car stobjs)) (car terms))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (select-stobj name (cdr stobjs) (cdr terms)))))</pre>
  </div>

<div class="form-block other" id="form-48" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output super-defstobj-wart-stobjs-in
  (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> stobj-flag)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) stobj-flag) (cons stobj-flag
        (super-defstobj-wart-stobjs-in (cdr <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) stobj-flag)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons nil
        (super-defstobj-wart-stobjs-in (cdr <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>) stobj-flag)))))</pre>
  </div>

<div class="form-block other" id="form-49" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output oneify-fail-form
  (er-type fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> super-stobjs-in wrld extra)
  `(throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ',ER-TYPE
      ',FN
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ,@FORMALS)
      ',GUARD
      ',(OR SUPER-STOBJS-IN (STOBJS-IN FN WRLD)
     (IF FORMALS
         (ER HARD &#39;ONEIFY-CLTL-CODE
             &quot;I didn&#39;t think this could happen, but for fn = ~x0 ~
                         stobjs-in is nil and formals isn&#39;t.&quot;
             FN)
         NIL))
      ,EXTRA)))</pre>
  </div>

<div class="form-block other" id="form-50" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output get-declared-stobjs
  (edcls)
  (if (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> edcls)
    nil
    (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> edcls) 'xargs)
        (let ((stobjs (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:stobjs</span> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> edcls)))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> stobjs) stobjs)
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> stobjs (symbolp stobjs)) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> stobjs))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))
      (get-declared-stobjs (cdr edcls)))))</pre>
  </div>

<div class="form-block function" id="def-maybe-warn-for-guard-body" data-defines="MAYBE-WARN-FOR-GUARD-BODY" data-references="TOP-LEVEL,WARNING$,F-PUT-GLOBAL,PPROGN,RAW-GUARD-WARNINGP,QUOTE,F-GET-GLOBAL,ASSERT$,STATE,FN,DEFUN" data-used-by="ONEIFY-CLTL-CODE-1" data-part-name="MAYBE-WARN-FOR-GUARD-BODY" data-part-args="STATE,FN" data-part-body="FN,TOP-LEVEL,WARNING$,F-PUT-GLOBAL,PPROGN,STATE,RAW-GUARD-WARNINGP,QUOTE,F-GET-GLOBAL,ASSERT$" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-WARN-FOR-GUARD-BODY">maybe-warn-for-guard-body</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-warn-for-guard-body" data-sym="MAYBE-WARN-FOR-GUARD-BODY" title="(defun maybe-warn-for-guard-body (fn state)
  (assert$ (f-get-global &#39;raw-guard-warningp state)
           (pprogn (f-put-global &#39;raw-guard-warningp nil state)
                   (warning$ &#39;top-level &quot;Guards&quot;
                             &quot;Guard-checking will be inhibited for some ~
...">maybe-warn-for-guard-body</a>
  (fn state)
  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-guard-warningp state)
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'raw-guard-warningp nil state)
      (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> 'top-level
        <span class="string">"Guards"</span>
        <span class="string">"Guard-checking will be inhibited for some ~
                              recursive calls, including ~x0; see :DOC ~
                              guard-checking-inhibited."</span>
        fn))))</pre>
  </div>

<div class="form-block other" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output create-live-user-stobjp-test
  (stobjs)
  (if (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> stobjs)
    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((stj (car stobjs)) (rst (create-live-user-stobjp-test (cdr stobjs)))
        (tst `(<a class="sym-link system" href="axioms.html#def-live-stobjp" data-sym="LIVE-STOBJP">live-stobjp</a> ,STJ)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> stj 'state) rst)
        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> rst <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) tst)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ,TST ,RST))))))</pre>
  </div>

<div class="form-block function" id="def-labels-form-for-_2A1_2A" data-defines="LABELS-FORM-FOR-*1*" data-references="LABELS,QUASIQUOTE,*1*FN-BINDING,LET,WRLD,GUARD,SUPER-STOBJS-CHK,SUPER-STOBJS-IN,IGNORABLE-VARS,IGNORE-VARS,*1*BODY,FORMALS,*1*FN,FN,DEFUN" data-used-by="ONEIFY-CLTL-CODE-1" data-part-name="LABELS-FORM-FOR-*1*" data-part-args="WRLD,GUARD,SUPER-STOBJS-CHK,SUPER-STOBJS-IN,IGNORABLE-VARS,IGNORE-VARS,*1*BODY,FORMALS,*1*FN,FN" data-part-body="LABELS,QUASIQUOTE,*1*FN-BINDING,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LABELS-FORM-FOR-*1*">labels-form-for-*1*</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-labels-form-for-_2A1_2A" data-sym="LABELS-FORM-FOR-*1*" title="(defun labels-form-for-*1*
       (fn *1*fn formals *1*body ignore-vars ignorable-vars super-stobjs-in
        super-stobjs-chk guard wrld)
  (let ((*1*fn-binding
         `(,*1*fn ,formals
...">labels-form-for-*1*</a>
  (fn *1*fn
    <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
    *1*body
    ignore-vars
    ignorable-vars
    super-stobjs-in
    super-stobjs-chk
    <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
    wrld)
  (let ((*1*fn-binding `(,*1*FN ,FORMALS
         ,@(AND IGNORE-VARS `((DECLARE (IGNORE ,@IGNORE-VARS))))
         ,@(AND IGNORABLE-VARS `((DECLARE (IGNORABLE ,@IGNORABLE-VARS))))
         ,@(AND SUPER-STOBJS-IN
       `((WHEN ,SUPER-STOBJS-CHK
           ,(ONEIFY-FAIL-FORM &#39;EV-FNCALL-GUARD-ER FN FORMALS GUARD
                              SUPER-STOBJS-IN WRLD :LIVE-STOBJ))))
         ,*1*BODY)))
    `(labels (,*1*FN-BINDING)
      (,*1*FN ,@FORMALS))))</pre>
  </div>

<div class="form-block function" id="def-df-call" data-defines="DF-CALL" data-references="TO-DF,QUASIQUOTE,EQ,IF,COLLECT,S,AS,IN,F,FOR,LOOP,CONS,*THE-LIVE-STATE*,W,STOBJS-IN,LET,FORMALS,FN,DEFUN" data-part-name="DF-CALL" data-part-args="FORMALS,FN" data-part-body="TO-DF,QUASIQUOTE,EQ,IF,COLLECT,S,AS,FORMALS,IN,F,FOR,LOOP,CONS,*THE-LIVE-STATE*,W,FN,STOBJS-IN,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DF-CALL">df-call</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-df-call" data-sym="DF-CALL" title="(defun df-call (fn formals)
  (let ((stobjs-in (stobjs-in fn (w *the-live-state*))))
    (cons fn
          (loop for f in formals as s in stobjs-in
                collect (if (eq s :df)
...">df-call</a>
  (fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)
  (let ((<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> fn (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))))
    (cons fn
      (loop for
        f
        in
        <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
        as
        s
        in
        <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
        collect
        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> s <span class="keyword">:df</span>)
          `(to-df ,F)
          f)))))</pre>
  </div>

<div class="form-block function" id="def-oneify-cltl-code-1" data-defines="ONEIFY-CLTL-CODE-1" data-references="LABELS-FORM-FOR-*1*,WARNING$,WITH-LIVE-STATE,SETQ,CERROR,DEBUGGER-ENABLE,STATE-FREE-GLOBAL-LET*,GET-CHECK-INVARIANT-RISK,CONT-P,GENTEMP,CHECK-INVARIANT-RISK-SYM,*1*-BODY-FORMS,MAYBE-WARN-FOR-GUARD-BODY,RAW-GUARD-WARNINGP,WORMHOLE-ER,*WORMHOLEP*,STATE,SET-DIFFERENCE-EQ,APPEND,MAIN-BODY-BEFORE-FINAL-CALL,**1*-AS-RAW*,EARLY-EXIT-CODE,CONS,COND-CLAUSES,CL-COMPLIANT-CODE-GUARD-NOT-T,GUARD0,ASSERT$,*1*GUARD,DF-INPUTS-P,EARLY-EXIT-CODE-MAIN,PROGRAM-ONLY-ER-MSG,HARD!,ER,W,STOBJS-IN,SAVE-EV-FNCALL-GUARD-ER,PROGN,FAIL_PROGRAM-ONLY,PROGRAM-FNS-WITH-RAW-CODE,PROGRAM-ONLY,LABELS-CAN-MISS-GUARD,FFNNAMEP-MOD-MBE,LOGIC-RECURSIVE-P,SYMBOL-PACKAGE-NAME,MEMBER-EQUAL,GUARDED-PRIMITIVE-P,LIVE-STATE-P,LIVE-STOBJP,FIRST-NON-NIL,SUPER-STOBJS-CHK,SAFE-MODE,SAFE-FORM,FAIL_SAFE,EV-FNCALL-GUARD-ER,ONEIFY-FAIL-FORM,FAIL_GUARD,GUARD-CHECKING-IS-REALLY-ON-FORM,THE-CHECK,SKIP-EARLY-EXIT-CODE-WHEN-NONE,GC-OFF1,GUARD-CHECKING-ON,GUARD-CHECKING-ON-FORM,ONEIFY,*1*BODY,LAST,BODY,CREATE-LIVE-USER-STOBJP-TEST,LIVE-STOBJP-TEST,GET-DECLARED-STOBJS,DECLARED-STOBJS,STOBJS-OUT,IGNORABLE-VARS,IGNORE-VARS,*SUPER-DEFUN-WART-STOBJS-IN-ALIST*,ASSOC-EQ,FIND-FIRST-NON-NIL,SUPER-DEFSTOBJ-WART-STOBJS-IN,TEMP,LET,SUPER-STOBJS-IN,INVARIANT-RISK,PROGRAM-P,*AVOID-ONEIFY-FNS*,MEMBER-EQ,*THE-LIVE-STATE*,BOOT-STRAP-FLG,F-GET-GLOBAL,BOOT-STRAP-P,PUSH,OPTIMIZE,IN,PAIR,CONSP,REVERSE,RETURN,CDR,IF,DO,CDDR,ON,TAIL,FOR,=,TMP,WITH,LOOP,OPTIMIZE-DCLS,SYMBOL-CLASS,CL-COMPLIANT-P-OPTIMIZATION,*1*-SYMBOL,*1*FN,CAR,ABSSTOBJ-INFO,GETPROPC,NOT,*T*,EQUAL,EQ,OR,AND,GUARD-IS-T,LET*,DCLS-GUARD-RAW-FROM-DEF,DCLS,MV-LET,INTERFACE-ER,&,THROW-WITHOUT-ATTACH,PROG2$,GUARD,T,THROW-OR-ATTACH,XARGS,DECLARE,FORMALS,FN,CASE-MATCH,EV-FNCALL-CREATOR-ER,QUOTE,LIST,THROW-RAW-EV-FNCALL,QUASIQUOTE,RETURN-FROM,CADR,NULL,COND,WHEN,TRACE-REC-FOR-NONE,WRLD,STOBJ-FLAG,DEF,DEFUN-MODE,DEFUN" data-used-by="ONEIFY-CLTL-CODE" data-part-name="ONEIFY-CLTL-CODE-1" data-part-args="TRACE-REC-FOR-NONE,WRLD,STOBJ-FLAG,DEF,DEFUN-MODE" data-part-body="EV-FNCALL-CREATOR-ER,QUOTE,LIST,THROW-RAW-EV-FNCALL,QUASIQUOTE,ONEIFY-CLTL-CODE-1,RETURN-FROM,DEF,CADR,NULL,COND,STOBJ-FLAG,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ONEIFY-CLTL-CODE-1">oneify-cltl-code-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-oneify-cltl-code-1" data-sym="ONEIFY-CLTL-CODE-1" title="(defun oneify-cltl-code-1 (defun-mode def stobj-flag wrld trace-rec-for-none)
  (when stobj-flag
    (cond
     ((null (cadr def))
      (return-from oneify-cltl-code-1
...">oneify-cltl-code-1</a>
  (<a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> def stobj-flag wrld trace-rec-for-none)
  (when stobj-flag
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def)) (return-from <a class="sym-link local-def" href="#def-oneify-cltl-code-1" data-sym="ONEIFY-CLTL-CODE-1" title="(defun oneify-cltl-code-1 (defun-mode def stobj-flag wrld trace-rec-for-none)
  (when stobj-flag
    (cond
     ((null (cadr def))
      (return-from oneify-cltl-code-1
...">oneify-cltl-code-1</a>
          `(,(*1*-SYMBOL (CAR DEF)) nil
            (throw-raw-ev-fncall (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'ev-fncall-creator-er ',(CAR DEF))))))))
  (when (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a>)
    (return-from <a class="sym-link local-def" href="#def-oneify-cltl-code-1" data-sym="ONEIFY-CLTL-CODE-1" title="(defun oneify-cltl-code-1 (defun-mode def stobj-flag wrld trace-rec-for-none)
  (when stobj-flag
    (cond
     ((null (cadr def))
      (return-from oneify-cltl-code-1
...">oneify-cltl-code-1</a>
      (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> def
        ((fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
           ('declare ('xargs '<span class="keyword">:non-executable</span> '<span class="keyword">:program</span>))
           ('throw-or-attach fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) `(,(*1*-SYMBOL FN) ,FORMALS (throw-or-attach ,FN ,FORMALS <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
        ((fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
           ('declare ('xargs '<span class="keyword">:guard</span> <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>))
           ('throw-or-attach fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) `(,(*1*-SYMBOL FN) ,FORMALS
            ,(COND ((OR (EQ GUARD T) (EQUAL GUARD *T*)) (CAR (LAST DEF)))
       (T `(THROW-OR-ATTACH ,FN ,FORMALS T)))))
        ((fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> ('throw-or-attach fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> `(,(*1*-SYMBOL FN) ,@(CDR DEF))))
        ((fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> ('throw-without-attach 'nil fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)) (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> `(,(*1*-SYMBOL FN) ,@(CDR DEF))))
        (&amp; (interface-er <span class="string">"Implementation error: Oneify-cltl-code encountered ~
                        non-executable definition, ~x0, that was not what we ~
                        would expect to be generated by intro-udf-lst2."</span>
            def)))))
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (dcls <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>)
    (dcls-guard-raw-from-def def wrld)
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((guard-is-t (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (equal <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>))
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> stobj-flag
               (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> stobj-flag 'absstobj-info nil wrld))))) (fn (car def))
        (*1*fn (*1*-symbol fn))
        (cl-compliant-p-optimization (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> <span class="keyword">:logic</span>)
            (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> fn wrld) <span class="keyword">:common-lisp-compliant</span>)))
        (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def))
        (optimize-dcls (loop with
            tmp
            <a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a>
            nil
            for
            tail
            on
            (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> def)
            do
            (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr tail))
              (return (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> tmp))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car tail))
                (loop for
                  pair
                  in
                  (cdr (car tail))
                  when
                  (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) 'optimize)
                  do
                  (push pair tmp))))))
        (boot-strap-p (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg *the-live-state*)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> guard-is-t cl-compliant-p-optimization)
           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> boot-strap-p (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn <a class="sym-link system" href="defuns.html#def-_2Aavoid-oneify-fns_2A" data-sym="*AVOID-ONEIFY-FNS*">*avoid-oneify-fns*</a>))) `(,*1*FN ,FORMALS ,(CONS FN FORMALS)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((program-p (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> <span class="keyword">:program</span>)) (invariant-risk (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> program-p (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'invariant-risk nil wrld)))
              (super-stobjs-in (if stobj-flag
                  (let ((temp (super-defstobj-wart-stobjs-in <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> stobj-flag)))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((find-first-non-nil temp) temp) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
                  (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> fn <a class="sym-link system" href="defuns.html#def-_2Asuper-defun-wart-stobjs-in-alist_2A" data-sym="*SUPER-DEFUN-WART-STOBJS-IN-ALIST*">*super-defun-wart-stobjs-in-alist*</a>))))
              (ignore-vars (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> super-stobjs-in) (ignore-vars dcls)))
              (ignorable-vars (ignorable-vars dcls))
              (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> nil wrld))
              (declared-stobjs (if stobj-flag
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> stobj-flag)
                  (get-declared-stobjs dcls)))
              (live-stobjp-test (create-live-user-stobjp-test declared-stobjs))
              (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> def)))
              (*1*body (oneify <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> nil wrld program-p))
              (guard-checking-on-form (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (super-stobjs-in '(let ((temp (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on *the-live-state*)))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((gc-off1 temp) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> temp))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> '(<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on *the-live-state*))))
              (skip-early-exit-code-when-none (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> <span class="keyword">:logic</span>)
                  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> boot-strap-p) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn '<a class="sym-link system" href="axioms.html#def-the-check" data-sym="THE-CHECK">the-check</a>))))
              (guard-checking-is-really-on-form (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (super-stobjs-in <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                  (skip-early-exit-code-when-none guard-checking-on-form)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (gc-off1 ,GUARD-CHECKING-ON-FORM)))))
              (fail_guard (oneify-fail-form 'ev-fncall-guard-er
                  fn
                  <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                  <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                  super-stobjs-in
                  wrld
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> super-stobjs-in
                    '(<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((gc-off1 (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'guard-checking-on *the-live-state*)) <span class="keyword">:live-stobj</span>)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:live-stobj-gc-on</span>)))))
              (fail_safe (oneify-fail-form 'ev-fncall-guard-er
                  fn
                  <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                  <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                  super-stobjs-in
                  wrld
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
              (safe-form '(<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'safe-mode *the-live-state*))
              (super-stobjs-chk (if stobj-flag
                  (let ((first-non-nil (find-first-non-nil super-stobjs-in)))
                    `(<a class="sym-link system" href="axioms.html#def-live-stobjp" data-sym="LIVE-STOBJP">live-stobjp</a> ,FIRST-NON-NIL))
                  `(live-state-p ,(SELECT-STOBJ &#39;STATE SUPER-STOBJS-IN FORMALS))))
              (guarded-primitive-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> guard-is-t)
                  boot-strap-p
                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (symbol-package-name fn) '(<span class="string">"ACL2"</span> <span class="string">"ACL2-PC"</span>)))))
              (logic-recursive-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> <span class="keyword">:logic</span>)
                  (<a class="sym-link system" href="defuns.html#def-ffnnamep-mod-mbe" data-sym="FFNNAMEP-MOD-MBE">ffnnamep-mod-mbe</a> fn (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> fn nil wrld))))
              (labels-can-miss-guard (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> logic-recursive-p
                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> cl-compliant-p-optimization)
                  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> guard-is-t)))
              (trace-rec-for-none (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> trace-rec-for-none
                  logic-recursive-p
                  (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> <span class="keyword">:logic</span>)))
              (program-only (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> program-p
                  (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn
                    (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'program-fns-with-raw-code *the-live-state*))))
              (fail_program-only `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (save-ev-fncall-guard-er ',FN
                    ',GUARD
                    (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> ',FN (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ,@FORMALS)
                    (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
                  (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard!
                    'program-only
                    <span class="string">"~@0"</span>
                    (program-only-er-msg ',FN (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ,@FORMALS) ,SAFE-FORM))))
              (early-exit-code-main (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((df-inputs-p (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:df</span> (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> fn (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)))) (*1*guard (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cl-compliant-p-optimization
                           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> live-stobjp-test)
                           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> df-inputs-p)) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> guard-is-t) <span class="keyword">:unused</span>))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (oneify <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> nil wrld program-p))))
                    (guard0 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (df-inputs-p *1*guard) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>)))
                    (cl-compliant-code-guard-not-t (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> program-only)
                        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> guard-is-t)
                        (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> <span class="keyword">:logic</span>)
                        `(<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ,(COND
  ((EQ LIVE-STOBJP-TEST T)
   `(,GUARD0 (RETURN-FROM ,*1*FN ,(DF-CALL FN FORMALS))))
  (T
   `((IF ,LIVE-STOBJP-TEST
         ,(IF STOBJ-FLAG
              (COND ((AND STOBJS-OUT (ALL-NILS-OR-DFS STOBJS-OUT)) GUARD0)
                    (T
                     `(LET ((*AOKP* NIL))
                        ,GUARD0)))
              GUARD0)
         ,*1*GUARD)
     ,(ASSERT$ (NOT GUARDED-PRIMITIVE-P)
               `(COND
                 (,LIVE-STOBJP-TEST
                  (RETURN-FROM ,*1*FN ,(DF-CALL FN FORMALS))))))))
                          ,@(COND (SUPER-STOBJS-IN `((T ,FAIL_GUARD)))
        (GUARDED-PRIMITIVE-P
         `((,SAFE-FORM ,FAIL_SAFE)
           (,GUARD-CHECKING-IS-REALLY-ON-FORM ,FAIL_GUARD)))
        (T `((,GUARD-CHECKING-IS-REALLY-ON-FORM ,FAIL_GUARD))))))))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (cl-compliant-p-optimization (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> guard-is-t)
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> cl-compliant-code-guard-not-t)))
                    (program-only (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> `(when (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> ,SAFE-FORM ,@(AND (NOT GUARD-IS-T) `((NOT ,*1*GUARD))))
                          ,FAIL_PROGRAM-ONLY)))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((cond-clauses `(,@(AND (EQ DEFUN-MODE :LOGIC) (NOT GUARD-IS-T)
       `(((EQ (SYMBOL-CLASS &#39;,FN (W *THE-LIVE-STATE*)) :COMMON-LISP-COMPLIANT)
          ,CL-COMPLIANT-CODE-GUARD-NOT-T))) ,@(AND (NOT GUARD-IS-T)
       (COND (SUPER-STOBJS-IN `(((NOT ,*1*GUARD) ,FAIL_GUARD)))
             (GUARDED-PRIMITIVE-P
              `(((AND (OR ,SAFE-FORM ,GUARD-CHECKING-IS-REALLY-ON-FORM)
                      (NOT ,*1*GUARD))
                 (IF ,SAFE-FORM
                     ,FAIL_SAFE
                     ,FAIL_GUARD))))
             (T
              `(((AND ,GUARD-CHECKING-IS-REALLY-ON-FORM (NOT ,*1*GUARD))
                 ,FAIL_GUARD)))))
                             ,@(AND PROGRAM-P
       (COND
        (BOOT-STRAP-P
         `((,SAFE-FORM (RETURN-FROM ,*1*FN ,*1*BODY))
           ,@(AND INVARIANT-RISK `((T (RETURN-FROM ,*1*FN ,*1*BODY))))))
        (T
         `(((OR (MEMBER-EQ ,GUARD-CHECKING-ON-FORM &#39;(:NONE :ALL)) ,SAFE-FORM)
            (RETURN-FROM ,*1*FN ,*1*BODY)))))))))
                        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cond-clauses (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons '<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> cond-clauses))))))))
              (early-exit-code (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> early-exit-code-main
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> invariant-risk (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> super-stobjs-in)) `((when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> **1*-as-raw*) ,@EARLY-EXIT-CODE-MAIN)))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> early-exit-code-main))))
              (main-body-before-final-call (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> '(nil <span class="keyword">:df</span> state))
                    `((when *wormholep* (wormhole-er ',FN (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ,@FORMALS)))))
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> <span class="keyword">:logic</span>)
                    guard-is-t
                    (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> cl-compliant-p-optimization)
                      `((when (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> ',FN (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
                           <span class="keyword">:common-lisp-compliant</span>)
                         (return-from ,*1*FN ,(DF-CALL FN FORMALS))))))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> skip-early-exit-code-when-none early-exit-code) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (super-stobjs-in early-exit-code)
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `((when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,GUARD-CHECKING-ON-FORM <span class="keyword">:none</span>))
                             ,@EARLY-EXIT-CODE)))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> early-exit-code))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (trace-rec-for-none `((return-from ,*1*FN ,*1*BODY)))
                    (labels-can-miss-guard `((when (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,GUARD-CHECKING-ON-FORM <span class="keyword">:all</span>)
                         (return-from ,*1*FN ,*1*BODY)))))
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> labels-can-miss-guard (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> trace-rec-for-none))
                    `((when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'raw-guard-warningp *the-live-state*)
                         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,GUARD-CHECKING-ON-FORM <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                       (<a class="sym-link local-def" href="#def-maybe-warn-for-guard-body" data-sym="MAYBE-WARN-FOR-GUARD-BODY" title="(defun maybe-warn-for-guard-body (fn state)
  (assert$ (f-get-global &#39;raw-guard-warningp state)
           (pprogn (f-put-global &#39;raw-guard-warningp nil state)
                   (warning$ &#39;top-level &quot;Guards&quot;
                             &quot;Guard-checking will be inhibited for some ~
...">maybe-warn-for-guard-body</a> ',FN *the-live-state*))))))
              (*1*-body-forms (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> <span class="keyword">:program</span>) (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> main-body-before-final-call
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (invariant-risk (let ((check-invariant-risk-sym (gentemp)) (cont-p (gentemp)))
                            `((let ((,CHECK-INVARIANT-RISK-SYM (get-check-invariant-risk *the-live-state*)) (,CONT-P nil))
                               (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ,CHECK-INVARIANT-RISK-SYM
                                    (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg *the-live-state*))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,CHECK-INVARIANT-RISK-SYM <span class="keyword">:error</span>) (state-free-global-let* ((<a class="sym-link system" href="axioms.html#def-debugger-enable" data-sym="DEBUGGER-ENABLE">debugger-enable</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                                         (cerror <span class="string">"~%     Continue with invariant-risk ~
                                      mode of T~%     (that is, with state ~
                                      global &#39;check-invariant-risk bound to ~
                                      T)~%     to complete the current call ~
                                      of ~s.~%     See :DOC invariant-risk."</span>
                                           <span class="string">"Invariant-risk has been detected for a ~
                                      call of function ~s~%(as possibly ~
                                      leading to an ill-guarded call of ~
                                      ~s);~%see :DOC invariant-risk."</span>
                                           ',FN
                                           ',INVARIANT-RISK))
                                       (setq ,CONT-P <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                                     ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,CHECK-INVARIANT-RISK-SYM <span class="keyword">:warning</span>) (with-live-state (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ',FN
                                           <span class="string">"Invariant-risk"</span>
                                           <span class="string">"Invariant-risk has been ~
                                               detected for a call of ~
                                               function ~x0 (as possibly ~
                                               leading to an ill-guarded call ~
                                               of ~x1); see :DOC ~
                                               invariant-risk."</span>
                                           ',FN
                                           ',INVARIANT-RISK))
                                       (setq ,CONT-P <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                                     (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                                   (let ((**1*-as-raw* <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                                     ,(LET ((LABELS-FORM
        (LABELS-FORM-FOR-*1* FN *1*FN FORMALS
                             (ONEIFY BODY NIL WRLD &#39;INVARIANT-RISK) IGNORE-VARS
                             IGNORABLE-VARS SUPER-STOBJS-IN SUPER-STOBJS-CHK
                             GUARD WRLD)))
   `(IF ,CONT-P
        (STATE-FREE-GLOBAL-LET* ((CHECK-INVARIANT-RISK T)) ,LABELS-FORM)
        ,LABELS-FORM))))
                                 (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ,(DF-CALL FN FORMALS)))))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> `(,(DF-CALL FN FORMALS))))))
                  (trace-rec-for-none main-body-before-final-call)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> main-body-before-final-call
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link local-def" href="#def-labels-form-for-_2A1_2A" data-sym="LABELS-FORM-FOR-*1*" title="(defun labels-form-for-*1*
       (fn *1*fn formals *1*body ignore-vars ignorable-vars super-stobjs-in
        super-stobjs-chk guard wrld)
  (let ((*1*fn-binding
         `(,*1*fn ,formals
...">labels-form-for-*1*</a> fn
                          *1*fn
                          <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
                          *1*body
                          ignore-vars
                          ignorable-vars
                          super-stobjs-in
                          super-stobjs-chk
                          <a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a>
                          wrld)))))))
            `(,*1*FN ,FORMALS
              ,@(AND OPTIMIZE-DCLS `((DECLARE ,@OPTIMIZE-DCLS)))
              ,@*1*-BODY-FORMS)))))))</pre>
  </div>

<div class="form-block function" id="def-oneify-cltl-code" data-defines="ONEIFY-CLTL-CODE" data-references="BLOCK,SETQ,FINALLY,DCLS,INTO,DECLARE,CAAR,CONSP,STRINGP,WHILE,CDDR,ON,TAIL,*1*DCLS/STRINGS,*1*BODY,DOUBLE-FLOAT,QUOTE,TYPEP,ASSERT,QUASIQUOTE,COLLECT,EQ,S,AS,IN,F,FOR,LOOP,FORMALS-CHECKS,CADR,FORMALS,*1*FN,NEW-DEF,ONEIFY-CLTL-CODE-1,RETURN-FROM,OR,WHEN,STOBJS-OUT-DF,STOBJS-IN-DF,STOBJS-IN,NOT,AND,STOBJS-OUT,FN,*STOBJS-OUT-INVALID*,CAR,MEMBER-EQ,STOBJS-OUT-INVALID,LET*,TRACE-REC-FOR-NONE,&OPTIONAL,WRLD,STOBJ-FLAG,DEF,DEFUN-MODE,DEFUN" data-used-by="COMPILE-UNCOMPILED-*1*-DEFUNS,HCOMP-BUILD-FROM-STATE-RAW,INSTALL-DEFS-FOR-ADD-TRIP" data-part-name="ONEIFY-CLTL-CODE" data-part-args="TRACE-REC-FOR-NONE,&OPTIONAL,WRLD,STOBJ-FLAG,DEF,DEFUN-MODE" data-part-body="BLOCK,SETQ,FINALLY,DCLS,INTO,DECLARE,CAAR,CONSP,STRINGP,WHILE,CDDR,ON,TAIL,*1*DCLS/STRINGS,*1*BODY,DOUBLE-FLOAT,QUOTE,TYPEP,ASSERT,QUASIQUOTE,COLLECT,EQ,S,AS,IN,F,FOR,LOOP,FORMALS-CHECKS,CADR,FORMALS,*1*FN,NEW-DEF,TRACE-REC-FOR-NONE,STOBJ-FLAG,DEFUN-MODE,ONEIFY-CLTL-CODE-1,ONEIFY-CLTL-CODE,RETURN-FROM,OR,WHEN,STOBJS-OUT-DF,STOBJS-IN-DF,STOBJS-IN,WRLD,NOT,AND,STOBJS-OUT,FN,*STOBJS-OUT-INVALID*,DEF,CAR,MEMBER-EQ,STOBJS-OUT-INVALID,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ONEIFY-CLTL-CODE">oneify-cltl-code</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a>
  (<a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> def
    stobj-flag
    wrld
    &amp;optional
    trace-rec-for-none)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((stobjs-out-invalid (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car def) <a class="sym-link system" href="axioms.html#def-_2Astobjs-out-invalid_2A" data-sym="*STOBJS-OUT-INVALID*">*stobjs-out-invalid*</a>)) (fn (car def))
      (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> stobjs-out-invalid) (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> fn wrld)))
      (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> fn wrld))
      (stobjs-in-df (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:df</span> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>))
      (stobjs-out-df (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:df</span> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)))
    (when (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> stobjs-out-invalid
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> stobjs-in-df) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> stobjs-out-df)))
      (return-from <a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a>
        (<a class="sym-link local-def" href="#def-oneify-cltl-code-1" data-sym="ONEIFY-CLTL-CODE-1" title="(defun oneify-cltl-code-1 (defun-mode def stobj-flag wrld trace-rec-for-none)
  (when stobj-flag
    (cond
     ((null (cadr def))
      (return-from oneify-cltl-code-1
...">oneify-cltl-code-1</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a>
          def
          stobj-flag
          wrld
          trace-rec-for-none)))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-def (<a class="sym-link local-def" href="#def-oneify-cltl-code-1" data-sym="ONEIFY-CLTL-CODE-1" title="(defun oneify-cltl-code-1 (defun-mode def stobj-flag wrld trace-rec-for-none)
  (when stobj-flag
    (cond
     ((null (cadr def))
      (return-from oneify-cltl-code-1
...">oneify-cltl-code-1</a> <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a>
           def
           stobj-flag
           wrld
           trace-rec-for-none)) (*1*fn (car new-def))
        (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> new-def))
        (formals-checks (loop for
            f
            in
            <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
            as
            s
            in
            <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>
            when
            (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> s <span class="keyword">:df</span>)
            collect
            `(assert (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (typep ,F 'double-float)))))
        *1*body
        *1*dcls/strings)
      (loop for
        tail
        on
        (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> new-def)
        while
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (stringp (car tail))
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car tail)) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> tail) 'declare)))
        collect
        (car tail)
        into
        dcls
        finally
        (setq *1*dcls/strings
          dcls
          *1*body
          `(block ,*1*FN ,@TAIL)))
      `(,*1*FN ,FORMALS
        ,@*1*DCLS/STRINGS
        ,@FORMALS-CHECKS
        ,(IF STOBJS-OUT-DF
     (REMOVE-DOUBLE-FLOATS STOBJS-OUT *1*BODY T)
     *1*BODY)))))</pre>
  </div>

<div class="form-block other" id="form-57" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *saved-raw-prompt* nil)</pre>
  </div>

<div class="form-block other" id="form-58" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *saved-raw-prompt-p* nil)</pre>
  </div>

<div class="form-block other" id="form-59" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (defun-one-output install-new-raw-prompt nil nil)
  (defun-one-output install-old-raw-prompt nil nil))</pre>
  </div>

<div class="form-block other" id="form-60" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *dmr-interval* <span class="number">1000</span>)</pre>
  </div>

<div class="form-block other" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *dmr-interval-acl2-par-hack* <span class="number">300000</span>)</pre>
  </div>

<div class="form-block other" id="form-62" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *dmr-interval-used*)</pre>
  </div>

<div class="form-block other" id="form-63" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *dmr-indent-max* <span class="number">20</span>)</pre>
  </div>

<div class="form-block other" id="form-64" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *dmr-file-name*)</pre>
  </div>

<div class="form-block function" id="def-dmr-file-name" data-defines="DMR-FILE-NAME" data-references="STRING,QUOTE,CONCATENATE,T,FORMAT,PROGN,GETENV$-RAW,OR,USER,LET,DEFUN" data-used-by="DMR-START-FN-RAW" data-part-name="DMR-FILE-NAME" data-part-body="STRING,QUOTE,CONCATENATE,T,FORMAT,PROGN,GETENV$-RAW,OR,USER,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-FILE-NAME">dmr-file-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-file-name" data-sym="DMR-FILE-NAME" title="(defun dmr-file-name ()
  (let ((user
         (or (getenv$-raw &quot;USER&quot;)
             (progn
              (format t &quot;Warning: Unable to determine USER ~
...">dmr-file-name</a>
  nil
  (let ((user (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (getenv$-raw <span class="string">"USER"</span>)
         (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
             <span class="string">"Warning: Unable to determine USER ~
                                    environment variable for ~
                                    dmr-file-name.~%Will treat USER as ~
                                    SOME-USER.  In emacs, evaluate:~%(setq ~
                                    *dmr-file-name* ~
                                    &quot;/tmp/acl2-dmr-SOME-USER&quot;)~%"</span>)
           <span class="string">"SOME-USER"</span>))))
    (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> <span class="string">"/tmp/acl2-dmr-"</span> user)))</pre>
  </div>

<div class="form-block other" id="form-66" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defg *dmr-stream* nil)</pre>
  </div>

<div class="form-block other" id="form-67" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defg *dmr-counter* <span class="number">0</span>)</pre>
  </div>

<div class="form-block function" id="def-dmr-stop-fn-raw" data-defines="DMR-STOP-FN-RAW" data-references="CLOSE,SETQ,STR,LET,*DMR-STREAM*,WHEN,DEFUN" data-part-name="DMR-STOP-FN-RAW" data-part-body="CLOSE,SETQ,STR,LET,*DMR-STREAM*,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-STOP-FN-RAW">dmr-stop-fn-raw</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-stop-fn-raw" data-sym="DMR-STOP-FN-RAW" title="(defun dmr-stop-fn-raw ()
  (when *dmr-stream*
    (let ((str *dmr-stream*))
      (setq *dmr-stream* nil)
      (close str))))">dmr-stop-fn-raw</a>
  nil
  (when *dmr-stream*
    (let ((str *dmr-stream*))
      (setq *dmr-stream* nil)
      (close str))))</pre>
  </div>

<div class="form-block function" id="def-initialize-dmr-interval-used" data-defines="INITIALIZE-DMR-INTERVAL-USED" data-references="*DMR-INTERVAL*,*DMR-INTERVAL-USED*,SETQ,DEFUN" data-used-by="DMR-START-FN-RAW" data-part-name="INITIALIZE-DMR-INTERVAL-USED" data-part-body="*DMR-INTERVAL*,*DMR-INTERVAL-USED*,SETQ" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INITIALIZE-DMR-INTERVAL-USED">initialize-dmr-interval-used</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-initialize-dmr-interval-used" data-sym="INITIALIZE-DMR-INTERVAL-USED" title="(defun initialize-dmr-interval-used ()
  (setq *dmr-interval-used* *dmr-interval*))">initialize-dmr-interval-used</a>
  nil
  (setq *dmr-interval-used* *dmr-interval*))</pre>
  </div>

<div class="form-block function" id="def-dmr-start-fn-raw" data-defines="DMR-START-FN-RAW" data-references="OPEN,*DMR-STREAM*,DMR-FILE-NAME,SETQ,*DMR-FILE-NAME*,QUOTE,BOUNDP,OR,INITIALIZE-DMR-INTERVAL-USED,STATE,DEFUN" data-part-name="DMR-START-FN-RAW" data-part-args="STATE" data-part-body="INITIALIZE-DMR-INTERVAL-USED" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-START-FN-RAW">dmr-start-fn-raw</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-start-fn-raw" data-sym="DMR-START-FN-RAW" title="(defun dmr-start-fn-raw (state)
  (initialize-dmr-interval-used)
  (or (boundp &#39;*dmr-file-name*) (setq *dmr-file-name* (dmr-file-name)))
  (setq *dmr-stream*
          (open *dmr-file-name* :if-exists :supersede :direction :output))">dmr-start-fn-raw</a>
  (state)
  (<a class="sym-link local-def" href="#def-initialize-dmr-interval-used" data-sym="INITIALIZE-DMR-INTERVAL-USED" title="(defun initialize-dmr-interval-used ()
  (setq *dmr-interval-used* *dmr-interval*))">initialize-dmr-interval-used</a>)
  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (boundp '*dmr-file-name*)
    (setq *dmr-file-name* (<a class="sym-link local-def" href="#def-dmr-file-name" data-sym="DMR-FILE-NAME" title="(defun dmr-file-name ()
  (let ((user
         (or (getenv$-raw &quot;USER&quot;)
             (progn
              (format t &quot;Warning: Unable to determine USER ~
...">dmr-file-name</a>)))
  (setq *dmr-stream*
    (open *dmr-file-name*
      <span class="keyword">:if-exists</span> <span class="keyword">:supersede</span> <span class="keyword">:direction</span> <span class="keyword">:output</span>))
  state)</pre>
  </div>

<div class="form-block other" id="form-71" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defv *dmr-array* (make-array <span class="number">10000</span>))</pre>
  </div>

<div class="form-block function" id="def-reverse-into-dmr-array" data-defines="REVERSE-INTO-DMR-ARRAY" data-references="CAR,AREF,SETF,DO,ON,TAIL,AS,DOWNTO,FROM,I,FOR,LOOP,*,MAKE-ARRAY,SETQ,*DMR-ARRAY*,<,WHEN,LENGTH,1-,LEN-1,LET,LST,DEFUN" data-used-by="DMR-STRING" data-part-name="REVERSE-INTO-DMR-ARRAY" data-part-args="LST" data-part-body="CAR,AREF,SETF,DO,ON,TAIL,AS,DOWNTO,FROM,I,FOR,LOOP,*,MAKE-ARRAY,SETQ,*DMR-ARRAY*,<,WHEN,LST,LENGTH,1-,LEN-1,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REVERSE-INTO-DMR-ARRAY">reverse-into-dmr-array</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-reverse-into-dmr-array" data-sym="REVERSE-INTO-DMR-ARRAY" title="(defun reverse-into-dmr-array (lst)
  (let ((len-1 (1- (length lst))))
    (when (&lt; (length *dmr-array*) len-1)
      (setq *dmr-array* (make-array (* 2 len-1))))
    (loop for i from len-1 downto 0 as tail on lst
...">reverse-into-dmr-array</a>
  (lst)
  (let ((len-1 (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> lst))))
    (when (&lt; (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> *dmr-array*) len-1)
      (setq *dmr-array* (make-array (<a class="sym-link system" href="axioms.html#def-_2A" data-sym="*">*</a> <span class="number">2</span> len-1))))
    (loop for
      i
      from
      len-1
      downto
      <span class="number">0</span>
      as
      tail
      on
      lst
      do
      (setf (aref *dmr-array* i) (car tail)))
    len-1))</pre>
  </div>

<div class="form-block other" id="form-73" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defparameter *dmr-reusable-string*
  (make-array '(<span class="number">0</span>)
    <span class="keyword">:element-type</span> 'character
    <span class="keyword">:fill-pointer</span> <span class="number">0</span>
    <span class="keyword">:adjustable</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block other" id="form-74" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *dmr-indent*)</pre>
  </div>

<div class="form-block macro" id="def-dmr-increment-indent" data-defines="DMR-INCREMENT-INDENT" data-references="+,*DMR-INDENT*,SETQ,QUOTE,DEFMACRO" data-used-by="DMR-STRING,DMR-INTERP,TILDE-@-BKPTR-STRING" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-INCREMENT-INDENT">dmr-increment-indent</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-dmr-increment-indent" data-sym="DMR-INCREMENT-INDENT" title="(defmacro dmr-increment-indent () &#39;(setq *dmr-indent* (+ 2 *dmr-indent*)))">dmr-increment-indent</a>
  nil
  '(setq *dmr-indent* (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">2</span> *dmr-indent*)))</pre>
  </div>

<div class="form-block function" id="def-tilde-_40-bkptr-string" data-defines="TILDE-@-BKPTR-STRING" data-references="SYNP,NON-LINEAR-ARITHMETIC,ADD-TERMS-AND-LEMMAS,SETUP-SIMPLIFY-CLAUSE-POT-LST,HARD,ER,OTHERWISE,PROOF-BUILDER,FORCED-ASSUMPTION,MULTIPLY-ALISTS2,NTH-UPDATE,META,RHS,EQUAL-CONSP-HACK-CDR,EQUAL-CONSP-HACK-CAR,EXPANSION,REWRITTEN-BODY,LAMBDA-OBJECT-BODY,LAMBDA-BODY,BODY,GUARD,SYMBOLP,CDR,RHS2,CAR,IF,CONSP,T,SIMPLIFY-CLAUSE,EQ,FORMAT,DMR-INCREMENT-INDENT,ADD-LINEAR-LEMMA,REWRITE-QUOTED-CONSTANT-WITH-LEMMA,REWRITE-WITH-LEMMA,QUOTE,MEMBER-EQ,INTEGERP,COND,REWRITE,CASE,BKPTR,CALLED-SYS-FN,CALLING-SYS-FN,DEFUN" data-used-by="DMR-INTERP" data-part-name="TILDE-@-BKPTR-STRING" data-part-args="BKPTR,CALLED-SYS-FN,CALLING-SYS-FN" data-part-body="SYNP,NON-LINEAR-ARITHMETIC,ADD-TERMS-AND-LEMMAS,SETUP-SIMPLIFY-CLAUSE-POT-LST,TILDE-@-BKPTR-STRING,HARD,ER,OTHERWISE,PROOF-BUILDER,FORCED-ASSUMPTION,MULTIPLY-ALISTS2,NTH-UPDATE,META,RHS,EQUAL-CONSP-HACK-CDR,EQUAL-CONSP-HACK-CAR,EXPANSION,REWRITTEN-BODY,LAMBDA-OBJECT-BODY,LAMBDA-BODY,BODY,GUARD,SYMBOLP,CDR,RHS2,CAR,IF,CONSP,T,SIMPLIFY-CLAUSE,EQ,FORMAT,DMR-INCREMENT-INDENT,ADD-LINEAR-LEMMA,REWRITE-QUOTED-CONSTANT-WITH-LEMMA,REWRITE-WITH-LEMMA,QUOTE,CALLING-SYS-FN,MEMBER-EQ,BKPTR,INTEGERP,COND,REWRITE,CALLED-SYS-FN,CASE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TILDE-@-BKPTR-STRING">tilde-@-bkptr-string</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-tilde-_40-bkptr-string" data-sym="TILDE-@-BKPTR-STRING" title="(defun tilde-@-bkptr-string (calling-sys-fn called-sys-fn bkptr)
  (case called-sys-fn
    (rewrite
     (cond
      ((integerp bkptr)
...">tilde-@-bkptr-string</a>
  (calling-sys-fn called-sys-fn bkptr)
  (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> called-sys-fn
    (<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((integerp bkptr) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> calling-sys-fn
               '(rewrite-with-lemma rewrite-quoted-constant-with-lemma
                 add-linear-lemma)) (<a class="sym-link local-def" href="#def-dmr-increment-indent" data-sym="DMR-INCREMENT-INDENT" title="(defmacro dmr-increment-indent () &#39;(setq *dmr-indent* (+ 2 *dmr-indent*)))">dmr-increment-indent</a>)
              (format nil <span class="string">" the atom of hypothesis ~s"</span> bkptr))
            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> calling-sys-fn 'simplify-clause) (format nil <span class="string">" the atom of literal ~s"</span> bkptr))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (format nil <span class="string">" argument ~s"</span> bkptr))))
        ((consp bkptr) (<a class="sym-link local-def" href="#def-dmr-increment-indent" data-sym="DMR-INCREMENT-INDENT" title="(defmacro dmr-increment-indent () &#39;(setq *dmr-indent* (+ 2 *dmr-indent*)))">dmr-increment-indent</a>)
          (format nil
            <span class="string">" the ~arhs of hypothesis ~s"</span>
            (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car bkptr) 'rhs2)
              <span class="string">"rewritten "</span>
              <span class="string">""</span>)
            (cdr bkptr)))
        ((symbolp bkptr) (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> bkptr
            (<a class="sym-link system" href="basis-b.html#def-guard" data-sym="GUARD">guard</a> <span class="string">" the guard"</span>)
            (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> <span class="string">" the body"</span>)
            (<a class="sym-link system" href="basis-b.html#def-lambda-body" data-sym="LAMBDA-BODY">lambda-body</a> <span class="string">" the lambda body"</span>)
            (<a class="sym-link system" href="axioms.html#def-lambda-object-body" data-sym="LAMBDA-OBJECT-BODY">lambda-object-body</a> <span class="string">" the body of the lambda object"</span>)
            (rewritten-body <span class="string">" the rewritten body"</span>)
            (expansion <span class="string">" the expansion"</span>)
            (equal-consp-hack-car <span class="string">" the equality of the cars"</span>)
            (equal-consp-hack-cdr <span class="string">" the equality of the cdrs"</span>)
            (rhs <span class="string">" the rhs of the conclusion"</span>)
            (meta <span class="string">" the result of the metafunction"</span>)
            (nth-update <span class="string">" the result of the nth/update rewriter"</span>)
            (multiply-alists2 <span class="string">" the product of two polys"</span>)
            (forced-assumption <span class="string">" a forced assumption"</span>)
            (proof-builder <span class="string">" proof-builder top level"</span>)
            (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                '<a class="sym-link local-def" href="#def-tilde-_40-bkptr-string" data-sym="TILDE-@-BKPTR-STRING" title="(defun tilde-@-bkptr-string (calling-sys-fn called-sys-fn bkptr)
  (case called-sys-fn
    (rewrite
     (cond
      ((integerp bkptr)
...">tilde-@-bkptr-string</a>
                <span class="string">"When ~x0 calls ~x1 we get an unrecognized ~
                                      bkptr, ~x2."</span>
                calling-sys-fn
                called-sys-fn
                bkptr))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            '<a class="sym-link local-def" href="#def-tilde-_40-bkptr-string" data-sym="TILDE-@-BKPTR-STRING" title="(defun tilde-@-bkptr-string (calling-sys-fn called-sys-fn bkptr)
  (case called-sys-fn
    (rewrite
     (cond
      ((integerp bkptr)
...">tilde-@-bkptr-string</a>
            <span class="string">"When ~x0 calls ~x1 we get an unrecognized bkptr, ~x2."</span>
            calling-sys-fn
            called-sys-fn
            bkptr))))
    ((rewrite-with-lemma setup-simplify-clause-pot-lst
       simplify-clause
       add-terms-and-lemmas
       add-linear-lemma
       non-linear-arithmetic
       <a class="sym-link system" href="axioms.html#def-synp" data-sym="SYNP">synp</a>) <span class="string">""</span>)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-tilde-_40-bkptr-string" data-sym="TILDE-@-BKPTR-STRING" title="(defun tilde-@-bkptr-string (calling-sys-fn called-sys-fn bkptr)
  (case called-sys-fn
    (rewrite
     (cond
      ((integerp bkptr)
...">tilde-@-bkptr-string</a>
        <span class="string">"When ~x0 calls ~x1 we get an unrecognized bkptr, ~x2."</span>
        calling-sys-fn
        called-sys-fn
        bkptr))))</pre>
  </div>

<div class="form-block other" id="form-77" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *dmr-interp-state* <span class="number">0</span>)</pre>
  </div>

<div class="form-block function" id="def-dmr-interp-fresh-rewrite-p" data-defines="DMR-INTERP-FRESH-REWRITE-P" data-references="GFRAME,ACCESS,INTEGERP,REWRITE,QUOTE,EQ,AND,NOT,FRAME,CALLING-SYS-FN,DEFUN" data-used-by="DMR-STRING,DMR-INTERP" data-part-name="DMR-INTERP-FRESH-REWRITE-P" data-part-args="FRAME,CALLING-SYS-FN" data-part-body="FRAME,GFRAME,ACCESS,INTEGERP,REWRITE,QUOTE,CALLING-SYS-FN,EQ,AND,NOT" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-INTERP-FRESH-REWRITE-P">dmr-interp-fresh-rewrite-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-interp-fresh-rewrite-p" data-sym="DMR-INTERP-FRESH-REWRITE-P" title="(defun dmr-interp-fresh-rewrite-p (calling-sys-fn frame)
  (not
   (and (eq calling-sys-fn &#39;rewrite) (integerp (access gframe frame :bkptr)))))">dmr-interp-fresh-rewrite-p</a>
  (calling-sys-fn frame)
  (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> calling-sys-fn '<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>)
      (integerp (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:bkptr</span>)))))</pre>
  </div>

<div class="form-block function" id="def-dmr-prefix" data-defines="DMR-PREFIX" data-references="FORMAT,*ACL2-BUILT-IN-SPACES-ARRAY*,ACL2-BUILT-IN-SPACES-ARRAY,AREF1,STRING,QUOTE,CONCATENATE,*DMR-INDENT-MAX*,*DMR-INDENT*,>,IF,DEFUN" data-used-by="DMR-STRING,DMR-INTERP" data-part-name="DMR-PREFIX" data-part-body="FORMAT,*ACL2-BUILT-IN-SPACES-ARRAY*,ACL2-BUILT-IN-SPACES-ARRAY,AREF1,STRING,QUOTE,CONCATENATE,*DMR-INDENT-MAX*,*DMR-INDENT*,>,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-PREFIX">dmr-prefix</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>
  nil
  (if (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> *dmr-indent* *dmr-indent-max*)
    (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
      (<a class="sym-link system" href="axioms.html#def-aref1" data-sym="AREF1">aref1</a> 'acl2-built-in-spaces-array
        <a class="sym-link system" href="basis-a.html#def-_2Aacl2-built-in-spaces-array_2A" data-sym="*ACL2-BUILT-IN-SPACES-ARRAY*">*acl2-built-in-spaces-array*</a>
        *dmr-indent-max*)
      (format nil <span class="string">"{~s} "</span> *dmr-indent*))
    (<a class="sym-link system" href="axioms.html#def-aref1" data-sym="AREF1">aref1</a> 'acl2-built-in-spaces-array
      <a class="sym-link system" href="basis-a.html#def-_2Aacl2-built-in-spaces-array_2A" data-sym="*ACL2-BUILT-IN-SPACES-ARRAY*">*acl2-built-in-spaces-array*</a>
      *dmr-indent*)))</pre>
  </div>

<div class="form-block function" id="def-dmr-interp" data-defines="DMR-INTERP" data-references="HARD,ER,OTHERWISE,SETUP-SIMPLIFY-CLAUSE-POT-LST,DMR-INCREMENT-INDENT,SYNP-FN,SYNP,NON-LINEAR-ARITHMETIC,EQL,IF,?,CAR,LENGTH,LEN,ADD-TERMS-AND-LEMMAS,CDR,GET-RULE-FIELD,REWRITE-QUOTED-CONSTANT-WITH-LEMMA,ADD-LINEAR-LEMMA,REWRITE-WITH-LEMMA,T,EQ,CDDR,OBJ,DMR-PREFIX,FORMAT,QUOTE,TILDE-@-BKPTR-STRING,BKPTR-STRING,*DMR-INTERP-STATE*,SETQ,DMR-INTERP-FRESH-REWRITE-P,COND,REWRITE,CASE,GFRAME,ACCESS,SYS-FN,LET,FRAME,CALLING-SYS-FN,I,DEFUN" data-used-by="DMR-STRING" data-part-name="DMR-INTERP" data-part-args="FRAME,CALLING-SYS-FN,I" data-part-body="DMR-INTERP,HARD,ER,OTHERWISE,SETUP-SIMPLIFY-CLAUSE-POT-LST,DMR-INCREMENT-INDENT,SYNP-FN,SYNP,NON-LINEAR-ARITHMETIC,EQL,IF,?,CAR,LENGTH,LEN,ADD-TERMS-AND-LEMMAS,CDR,GET-RULE-FIELD,REWRITE-QUOTED-CONSTANT-WITH-LEMMA,ADD-LINEAR-LEMMA,REWRITE-WITH-LEMMA,T,EQ,CDDR,OBJ,I,DMR-PREFIX,FORMAT,QUOTE,TILDE-@-BKPTR-STRING,BKPTR-STRING,*DMR-INTERP-STATE*,SETQ,CALLING-SYS-FN,DMR-INTERP-FRESH-REWRITE-P,COND,REWRITE,CASE,FRAME,GFRAME,ACCESS,SYS-FN,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-INTERP">dmr-interp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-interp" data-sym="DMR-INTERP" title="(defun dmr-interp (i calling-sys-fn frame)
  (let ((sys-fn (access gframe frame :sys-fn)))
    (case sys-fn
      (rewrite
       (cond
...">dmr-interp</a>
  (i calling-sys-fn frame)
  (let ((sys-fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:sys-fn</span>)))
    (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> sys-fn
      (<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-dmr-interp-fresh-rewrite-p" data-sym="DMR-INTERP-FRESH-REWRITE-P" title="(defun dmr-interp-fresh-rewrite-p (calling-sys-fn frame)
  (not
   (and (eq calling-sys-fn &#39;rewrite) (integerp (access gframe frame :bkptr)))))">dmr-interp-fresh-rewrite-p</a> calling-sys-fn frame) (setq *dmr-interp-state* <span class="number">0</span>)
            (let ((bkptr-string (<a class="sym-link local-def" href="#def-tilde-_40-bkptr-string" data-sym="TILDE-@-BKPTR-STRING" title="(defun tilde-@-bkptr-string (calling-sys-fn called-sys-fn bkptr)
  (case called-sys-fn
    (rewrite
     (cond
      ((integerp bkptr)
...">tilde-@-bkptr-string</a> calling-sys-fn
                   '<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>
                   (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:bkptr</span>))))
              (format nil
                <span class="string">"~a~s. Rewriting (to ~a)~a"</span>
                (<a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>)
                i
                (let ((obj (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:args</span>))))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> obj nil) <span class="string">"falsify"</span>)
                    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> obj <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <span class="string">"establish"</span>)
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"simplify"</span>)))
                bkptr-string)))
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> *dmr-interp-state* <span class="number">0</span>) (setq *dmr-interp-state* <span class="number">1</span>)
            (format nil <span class="string">"; argument(s) ~s"</span> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:bkptr</span>)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (format nil <span class="string">"|~s"</span> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:bkptr</span>)))))
      ((rewrite-with-lemma add-linear-lemma
         rewrite-quoted-constant-with-lemma) (format nil
          <span class="string">"~a~s. Applying ~s~%"</span>
          (<a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>)
          i
          (<a class="sym-link system" href="rewrite.html#def-get-rule-field" data-sym="GET-RULE-FIELD">get-rule-field</a> (cdr (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:args</span>)) <span class="keyword">:rune</span>)))
      (add-terms-and-lemmas (let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (car (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:args</span>)))) (obj (cdr (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:args</span>))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> obj '?) (format nil
                <span class="string">"~a~s. Applying linear arithmetic to a clause with ~s term~a~%"</span>
                (<a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>)
                i
                <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>
                (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <span class="number">1</span>)
                  <span class="string">""</span>
                  <span class="string">"s"</span>)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (format nil
                <span class="string">"~a~s. Applying linear arithmetic to ~a ~s term~a~%"</span>
                (<a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>)
                i
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> obj nil) <span class="string">"falsify"</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"establish"</span>))
                <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>
                (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <span class="number">1</span>)
                  <span class="string">""</span>
                  <span class="string">"s"</span>))))))
      (non-linear-arithmetic (let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:args</span>))))
          (format nil
            <span class="string">"~a~s. Applying non-linear arithmetic to ~s var~a~%"</span>
            (<a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>)
            i
            <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>
            (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <span class="number">1</span>)
              <span class="string">""</span>
              <span class="string">"s"</span>))))
      (<a class="sym-link system" href="axioms.html#def-synp" data-sym="SYNP">synp</a> (let ((synp-fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:args</span>)))
          (<a class="sym-link local-def" href="#def-dmr-increment-indent" data-sym="DMR-INCREMENT-INDENT" title="(defmacro dmr-increment-indent () &#39;(setq *dmr-indent* (+ 2 *dmr-indent*)))">dmr-increment-indent</a>)
          (format nil
            <span class="string">"~a~s. Entering ~s for hypothesis ~s~%"</span>
            (<a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>)
            i
            synp-fn
            (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:bkptr</span>))))
      (setup-simplify-clause-pot-lst (format nil
          <span class="string">"~a~s. Setting up the linear pot list~%"</span>
          (<a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>)
          i))
      (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-dmr-interp" data-sym="DMR-INTERP" title="(defun dmr-interp (i calling-sys-fn frame)
  (let ((sys-fn (access gframe frame :sys-fn)))
    (case sys-fn
      (rewrite
       (cond
...">dmr-interp</a>
          <span class="string">"Unrecognized sys-fn, ~x0"</span>
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:sys-fn</span>))))))</pre>
  </div>

<div class="form-block other" id="form-81" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *dmr-delete-string*
  <span class="string">"delete-from-here-to-end-of-buffer"</span>)</pre>
  </div>

<div class="form-block function" id="def-dmr-string" data-defines="DMR-STRING" data-references="*ADD-POLYS-COUNTER*,DMR-PREFIX,ADD-POLYNOMIAL-INEQUALITIES,IF,EV-FNCALL-META,DMR-INCREMENT-INDENT,DMR-INTERP,TERPRI,DMR-INTERP-FRESH-REWRITE-P,OR,AND,REWRITE,SIMPLIFY-CLAUSE,NOT,GFRAME,ACCESS,SYS-FN,*DMR-ARRAY*,AREF,FRAME,TO,FROM,I,INCF,FORMAT,PRINC,SETUP-SIMPLIFY-CLAUSE-POT-LST,REWRITE-ATM,MEMBER-EQ,CDR,PROGN,TOKEN,S,WITH-OUTPUT-TO-STRING,NO-NEWLINE-LAST-TIME,*DMR-INDENT*,COUNTER,*PRINT-PRETTY*,START,CALLING-SYS-FN,REVERSE-INTO-DMR-ARRAY,LEN-1,PSTK-TOKENS-TAIL,RETURN,FINALLY,T,CADR,LIST,EV-FNCALL,NTHCDR,WATERFALL,QUOTE,CAR,EQ,COND,PUSH,DO,IN,X,FOR,=,RESULT,WITH,LOOP,PSTK-TOKENS,LET*,*DMR-REUSABLE-STRING*,FILL-POINTER,SETF,*DMR-DELETE-STRING*,RETURN-FROM,*DEEP-GSTACK*,*DMR-INTERVAL-USED*,*DMR-COUNTER*,SETQ,*PSTK-STACK*,NULL,WHEN,DEFUN" data-used-by="CW-GSTACK-SHORT,DMR-FLUSH1" data-part-name="DMR-STRING" data-part-body="*DMR-DELETE-STRING*,DMR-STRING,RETURN-FROM,*DEEP-GSTACK*,*DMR-INTERVAL-USED*,*DMR-COUNTER*,SETQ,*PSTK-STACK*,NULL,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-STRING">dmr-string</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-string" data-sym="DMR-STRING" title="(defun dmr-string ()
  (when (null *pstk-stack*)
    (setq *dmr-counter* *dmr-interval-used*)
    (setq *deep-gstack* nil)
    (return-from dmr-string *dmr-delete-string*))
...">dmr-string</a>
  nil
  (when (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *pstk-stack*)
    (setq *dmr-counter* *dmr-interval-used*)
    (setq *deep-gstack* nil)
    (return-from <a class="sym-link local-def" href="#def-dmr-string" data-sym="DMR-STRING" title="(defun dmr-string ()
  (when (null *pstk-stack*)
    (setq *dmr-counter* *dmr-interval-used*)
    (setq *deep-gstack* nil)
    (return-from dmr-string *dmr-delete-string*))
...">dmr-string</a> *dmr-delete-string*))
  (setf (fill-pointer *dmr-reusable-string*) <span class="number">0</span>)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((pstk-tokens (loop with
         result
         <a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a>
         nil
         for
         x
         in
         *pstk-stack*
         do
         (push (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link system" href="prove.html#def-waterfall" data-sym="WATERFALL">waterfall</a>) (car (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> <span class="number">8</span> x)))
             ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) 'ev-fncall) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car x) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x)))
             (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (car x)))
           result)
         finally
         (return result))) (pstk-tokens-tail pstk-tokens)
      (len-1 (<a class="sym-link local-def" href="#def-reverse-into-dmr-array" data-sym="REVERSE-INTO-DMR-ARRAY" title="(defun reverse-into-dmr-array (lst)
  (let ((len-1 (1- (length lst))))
    (when (&lt; (length *dmr-array*) len-1)
      (setq *dmr-array* (make-array (* 2 len-1))))
    (loop for i from len-1 downto 0 as tail on lst
...">reverse-into-dmr-array</a> *deep-gstack*))
      (calling-sys-fn 'start)
      (*print-pretty* nil)
      (counter <span class="number">0</span>)
      (*dmr-indent* <span class="number">3</span>)
      (no-newline-last-time nil))
    (with-output-to-string (s *dmr-reusable-string*)
      (loop for
        token
        in
        pstk-tokens
        do
        (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (setq pstk-tokens-tail (cdr pstk-tokens-tail))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> token
               '(rewrite-atm setup-simplify-clause-pot-lst)) (return))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (princ (format nil <span class="string">" ~s. ~s~%"</span> counter token) s)
              (incf counter)))))
      (loop for
        i
        from
        <span class="number">0</span>
        to
        len-1
        do
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((frame (aref *dmr-array* i)) (sys-fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:sys-fn</span>)))
          (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> sys-fn 'simplify-clause))
            (setq no-newline-last-time (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> calling-sys-fn '<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>))
            (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> no-newline-last-time
                (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> sys-fn '<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>))
                  (<a class="sym-link local-def" href="#def-dmr-interp-fresh-rewrite-p" data-sym="DMR-INTERP-FRESH-REWRITE-P" title="(defun dmr-interp-fresh-rewrite-p (calling-sys-fn frame)
  (not
   (and (eq calling-sys-fn &#39;rewrite) (integerp (access gframe frame :bkptr)))))">dmr-interp-fresh-rewrite-p</a> calling-sys-fn frame)))
              (terpri s))
            (princ (<a class="sym-link local-def" href="#def-dmr-interp" data-sym="DMR-INTERP" title="(defun dmr-interp (i calling-sys-fn frame)
  (let ((sys-fn (access gframe frame :sys-fn)))
    (case sys-fn
      (rewrite
       (cond
...">dmr-interp</a> counter calling-sys-fn frame) s)
            (incf counter))
          (setq calling-sys-fn (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> gframe frame <span class="keyword">:sys-fn</span>))))
      (when (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> calling-sys-fn '<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>) (terpri s))
      (<a class="sym-link local-def" href="#def-dmr-increment-indent" data-sym="DMR-INCREMENT-INDENT" title="(defmacro dmr-increment-indent () &#39;(setq *dmr-indent* (+ 2 *dmr-indent*)))">dmr-increment-indent</a>)
      (loop for
        token
        in
        pstk-tokens-tail
        when
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> token '<a class="sym-link system" href="rewrite.html#def-ev-fncall-meta" data-sym="EV-FNCALL-META">ev-fncall-meta</a>))
        do
        (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (princ (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> token 'add-polynomial-inequalities)
              (format nil
                <span class="string">"~a~s. ~s: ~s calls~%"</span>
                (<a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>)
                counter
                token
                *add-polys-counter*)
              (format nil <span class="string">"~a~s. ~s~%"</span> (<a class="sym-link local-def" href="#def-dmr-prefix" data-sym="DMR-PREFIX" title="(defun dmr-prefix ()
  (if (&gt; *dmr-indent* *dmr-indent-max*)
      (concatenate &#39;string
                   (aref1 &#39;acl2-built-in-spaces-array
                          *acl2-built-in-spaces-array* *dmr-indent-max*)
...">dmr-prefix</a>) counter token))
            s)
          (incf counter)))
      (princ *dmr-delete-string* s)))
  *dmr-reusable-string*)</pre>
  </div>

<div class="form-block function" id="def-dmr-flush1" data-defines="DMR-FLUSH1" data-references="T,*DMR-COUNTER*,SETQ,WHEN,FORCE-OUTPUT,WITHOUT-INTERRUPTS,DMR-STRING,PRINC,*DMR-STREAM*,FILE-POSITION,RESET-COUNTER,&OPTIONAL,DEFUN" data-used-by="DMR-DISPLAY,DMR-FLUSH" data-part-name="DMR-FLUSH1" data-part-args="RESET-COUNTER,&OPTIONAL" data-part-body="*DMR-STREAM*,FILE-POSITION" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-FLUSH1">dmr-flush1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-flush1" data-sym="DMR-FLUSH1" title="(defun dmr-flush1 (&amp;optional reset-counter)
  (file-position *dmr-stream* :start)
  (princ (dmr-string) *dmr-stream*)
  (without-interrupts (force-output *dmr-stream*))
  (when reset-counter (setq *dmr-counter* 0))">dmr-flush1</a>
  (&amp;optional reset-counter)
  (file-position *dmr-stream* <span class="keyword">:start</span>)
  (princ (<a class="sym-link local-def" href="#def-dmr-string" data-sym="DMR-STRING" title="(defun dmr-string ()
  (when (null *pstk-stack*)
    (setq *dmr-counter* *dmr-interval-used*)
    (setq *deep-gstack* nil)
    (return-from dmr-string *dmr-delete-string*))
...">dmr-string</a>) *dmr-stream*)
  (without-interrupts (force-output *dmr-stream*))
  (when reset-counter (setq *dmr-counter* <span class="number">0</span>))
  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block other" id="form-84" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(declaim (inline <a class="sym-link local-def" href="#def-dmr-flush" data-sym="DMR-FLUSH" title="(defun dmr-flush (&amp;optional reset-counter)
  (when *dmr-stream* (cond (t (dmr-flush1 reset-counter)))))">dmr-flush</a>))</pre>
  </div>

<div class="form-block function" id="def-dmr-flush" data-defines="DMR-FLUSH" data-references="DMR-FLUSH1,T,COND,*DMR-STREAM*,WHEN,RESET-COUNTER,&OPTIONAL,DEFUN" data-part-name="DMR-FLUSH" data-part-args="RESET-COUNTER,&OPTIONAL" data-part-body="RESET-COUNTER,DMR-FLUSH1,T,COND,*DMR-STREAM*,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-FLUSH">dmr-flush</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-flush" data-sym="DMR-FLUSH" title="(defun dmr-flush (&amp;optional reset-counter)
  (when *dmr-stream* (cond (t (dmr-flush1 reset-counter)))))">dmr-flush</a>
  (&amp;optional reset-counter)
  (when *dmr-stream* (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-dmr-flush1" data-sym="DMR-FLUSH1" title="(defun dmr-flush1 (&amp;optional reset-counter)
  (file-position *dmr-stream* :start)
  (princ (dmr-string) *dmr-stream*)
  (without-interrupts (force-output *dmr-stream*))
  (when reset-counter (setq *dmr-counter* 0))">dmr-flush1</a> reset-counter)))))</pre>
  </div>

<div class="form-block other" id="form-86" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(declaim (inline <a class="sym-link local-def" href="#def-dmr-display" data-sym="DMR-DISPLAY" title="(defun dmr-display ()
  (when *dmr-stream*
    (cond
     ((&gt; *dmr-counter* *dmr-interval-used*) (setq *dmr-counter* 0)
      (cond (t (dmr-flush1))))">dmr-display</a>))</pre>
  </div>

<div class="form-block function" id="def-dmr-display" data-defines="DMR-DISPLAY" data-references="1+,DMR-FLUSH1,T,SETQ,*DMR-INTERVAL-USED*,*DMR-COUNTER*,>,COND,*DMR-STREAM*,WHEN,DEFUN" data-part-name="DMR-DISPLAY" data-part-body="1+,DMR-FLUSH1,T,SETQ,*DMR-INTERVAL-USED*,*DMR-COUNTER*,>,COND,*DMR-STREAM*,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DMR-DISPLAY">dmr-display</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dmr-display" data-sym="DMR-DISPLAY" title="(defun dmr-display ()
  (when *dmr-stream*
    (cond
     ((&gt; *dmr-counter* *dmr-interval-used*) (setq *dmr-counter* 0)
      (cond (t (dmr-flush1))))">dmr-display</a>
  nil
  (when *dmr-stream*
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> *dmr-counter* *dmr-interval-used*) (setq *dmr-counter* <span class="number">0</span>)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-dmr-flush1" data-sym="DMR-FLUSH1" title="(defun dmr-flush1 (&amp;optional reset-counter)
  (file-position *dmr-stream* :start)
  (princ (dmr-string) *dmr-stream*)
  (without-interrupts (force-output *dmr-stream*))
  (when reset-counter (setq *dmr-counter* 0))">dmr-flush1</a>))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setq *dmr-counter* (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> *dmr-counter*))))))</pre>
  </div>

<div class="form-block function" id="def-cw-gstack-short" data-defines="CW-GSTACK-SHORT" data-references="*TERMINAL-IO*,SUBSEQ,IF,PRINC,*DMR-DELETE-STRING*,SEARCH,POS,DMR-STRING,STR,LET*,DEFUN" data-part-name="CW-GSTACK-SHORT" data-part-body="*TERMINAL-IO*,SUBSEQ,IF,PRINC,*DMR-DELETE-STRING*,SEARCH,POS,DMR-STRING,STR,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CW-GSTACK-SHORT">cw-gstack-short</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-cw-gstack-short" data-sym="CW-GSTACK-SHORT" title="(defun cw-gstack-short ()
  (let* ((str (dmr-string)) (pos (search *dmr-delete-string* str)))
    (princ
     (if pos
         (subseq str 0 pos)
...">cw-gstack-short</a>
  nil
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((str (<a class="sym-link local-def" href="#def-dmr-string" data-sym="DMR-STRING" title="(defun dmr-string ()
  (when (null *pstk-stack*)
    (setq *dmr-counter* *dmr-interval-used*)
    (setq *deep-gstack* nil)
    (return-from dmr-string *dmr-delete-string*))
...">dmr-string</a>)) (pos (<a class="sym-link system" href="axioms.html#def-search" data-sym="SEARCH">search</a> *dmr-delete-string* str)))
    (princ (if pos
        (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> str <span class="number">0</span> pos)
        str)
      *terminal-io*)))</pre>
  </div>

<div class="form-block other" id="form-89" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(eval-when (<span class="keyword">:load-toplevel</span> <span class="keyword">:execute</span>)
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'current-acl2-world nil *the-live-state*)
  (setf (get 'current-acl2-world 'acl2-world-pair)
    (cons nil *current-acl2-world-key*)))</pre>
  </div>

<div class="form-block other" id="form-90" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output fmakunbound!
  (name)
  (fmakunbound name)
  (when (macro-function name)
    (error <span class="string">"This Common Lisp implementation seems unable to unbind ~~%
            macro-functions.  Please let the ACL2 implementors know about ~%~
            this problem."</span>)))</pre>
  </div>

<div class="form-block other" id="form-91" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output maybe-push-undo-stack
  (fn name &amp;optional extra)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
       (fboundp name)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn 'attachment))) (maybe-untrace! name <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
  (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> fn
    ((<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((fboundp name) (let ((oneified-name (*1*-symbol name)) (macro-p (macro-function name)))
            (push `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> ,@(AND (NOT MACRO-P) `((MAYBE-UNTRACE! &#39;,NAME) (MAYBE-UNMEMOIZE &#39;,NAME)))
                ,@(IF (EQ EXTRA &#39;RECLASSIFYING)
      (ASSERT$ (NOT MACRO-P)
               `((SETF (SYMBOL-FUNCTION &#39;,ONEIFIED-NAME)
                         &#39;,(SYMBOL-FUNCTION ONEIFIED-NAME))))
      `(,@(IF (NOT (IFF (EQ FN &#39;DEFMACRO) MACRO-P))
              `((FMAKUNBOUND! &#39;,NAME)))
        ,(COND
          (MACRO-P `(SETF (MACRO-FUNCTION &#39;,NAME) &#39;,(MACRO-FUNCTION NAME)))
          (T `(SETF (SYMBOL-FUNCTION &#39;,NAME) &#39;,(SYMBOL-FUNCTION NAME))))
        ,(COND
          ((FBOUNDP ONEIFIED-NAME)
           `(SETF (SYMBOL-FUNCTION &#39;,ONEIFIED-NAME)
                    &#39;,(SYMBOL-FUNCTION ONEIFIED-NAME)))
          (T `(FMAKUNBOUND! &#39;,ONEIFIED-NAME))))))
              (get name '*undo-stack*))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (push `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (maybe-untrace! ',NAME)
              (maybe-unmemoize ',NAME)
              (fmakunbound! ',NAME)
              (fmakunbound! ',(*1*-SYMBOL NAME)))
            (get name '*undo-stack*)))))
    (<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((boundp name) (push `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (setf (symbol-value ',NAME) ',(SYMBOL-VALUE NAME))
              (setf (get ',NAME 'redundant-raw-lisp-discriminator)
                ',(GET NAME &#39;REDUNDANT-RAW-LISP-DISCRIMINATOR)))
            (get name '*undo-stack*)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (push `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (makunbound ',NAME)
              (remprop ',NAME 'redundant-raw-lisp-discriminator))
            (get name '*undo-stack*)))))
    ((<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> defabsstobj) (push `(remhash ',NAME (<a class="sym-link system" href="axioms.html#def-the" data-sym="THE">the</a> hash-table *current-stobj-gensym-ht*))
        (get name '*undo-stack*)))
    (<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> (let ((temp (<a class="sym-link system" href="axioms.html#def-find-non-hidden-package-entry" data-sym="FIND-NON-HIDDEN-PACKAGE-ENTRY">find-non-hidden-package-entry</a> name
             (<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> *the-live-state*))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (temp (push `(<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> ,NAME ',(PACKAGE-ENTRY-IMPORTS TEMP))
              (get (<a class="sym-link system" href="basis-a.html#def-packn" data-sym="PACKN">packn</a> (cons name '(<span class="string">"-PACKAGE"</span>))) '*undo-stack*))))))
    (attachment (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name *special-cltl-cmd-attachment-mark-name*) (push `(unless (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ',NAME (car *defattach-fns*))
              (push ',NAME *defattach-fns*))
            (get name '*undo-stack*)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (push `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (push ',NAME *defattach-fns*)
              ,(SET-ATTACHMENT-SYMBOL-FORM NAME (SYMBOL-VALUE (ATTACHMENT-SYMBOL NAME))))
            (get name '*undo-stack*)))))
    (memoize (push `(when (memoizedp-raw ',NAME) (unmemoize-fn ',NAME))
        (get name '*undo-stack*)))
    (unmemoize (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((entry (gethash name *memoize-info-ht*)) (condition (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> memoize-info-ht-entry entry <span class="keyword">:condition</span>))
          (inline (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> memoize-info-ht-entry entry <span class="keyword">:inline</span>))
          (commutative (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> memoize-info-ht-entry entry <span class="keyword">:commutative</span>))
          (forget (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> memoize-info-ht-entry entry <span class="keyword">:forget</span>))
          (memo-table-init-size (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> memoize-info-ht-entry entry <span class="keyword">:memo-table-init-size</span>))
          (aokp (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> memoize-info-ht-entry entry <span class="keyword">:ext-anc-attachments</span>)
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (cl-defun (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> memoize-info-ht-entry entry <span class="keyword">:cl-defun</span>))
          (invoke (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> memoize-info-ht-entry entry <span class="keyword">:invoke</span>)))
        (push `(memoize-fn ',NAME
            <span class="keyword">:condition</span> ',CONDITION
            <span class="keyword">:inline</span> ',INLINE
            ,@(AND COMMUTATIVE `(:COMMUTATIVE T))
            ,@(AND FORGET `(:FORGET T))
            ,@(AND MEMO-TABLE-INIT-SIZE `(:MEMO-TABLE-INIT-SIZE &#39;,MEMO-TABLE-INIT-SIZE))
            ,@(AND AOKP `(:AOKP &#39;,AOKP))
            ,@(AND CL-DEFUN `(:CL-DEFUN &#39;,CL-DEFUN))
            ,@(AND INVOKE `(:INVOKE &#39;,INVOKE)))
          (get name '*undo-stack*))))
    (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        'maybe-push-undo-stack
        <span class="string">"Unrecognized CLTL-COMMAND spawn ~x0"</span>
        fn))))</pre>
  </div>

<div class="form-block other" id="form-92" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output maybe-pop-undo-stack
  (name)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name (if (symbolp name)
         name
         (<a class="sym-link system" href="basis-a.html#def-packn" data-sym="PACKN">packn</a> (cons name '(<span class="string">"-PACKAGE"</span>))))) (stk (get name '*undo-stack*)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> stk) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (eval (car stk))
        (setf (get name '*undo-stack*) (cdr stk))))))</pre>
  </div>

<div class="form-block other" id="form-93" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defparameter *current-acl2-world-key-ordering*
  '(coarsenings global-value
    recognizer-alist
    runic-mapping-pairs
    def-bodies
    <a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a>
    <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>
    type-prescriptions
    <a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a>
    lemmas
    congruences
    pequivs
    macro-body
    <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>))</pre>
  </div>

<div class="form-block other" id="form-94" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output key-lesseqp
  (key1 key2 ordering)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ordering) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key1 (car ordering)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key2 (car ordering)) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (key-lesseqp key1 key2 (cdr ordering)))))</pre>
  </div>

<div class="form-block other" id="form-95" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output merge-into-alist
  (key val alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> alist) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons key val)))
    ((key-lesseqp key
       (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)
       *current-acl2-world-key-ordering*) (cons (cons key val) alist))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car alist) (merge-into-alist key val (cdr alist))))))</pre>
  </div>

<div class="form-block other" id="form-96" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output destructive-push-assoc
  (key <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> alist world-key)
  (let ((temp (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> key alist <span class="keyword">:test</span> (function <a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (temp (setf (cdr temp) (cons <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cdr temp))) alist)
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> world-key *current-acl2-world-key*) (merge-into-alist key (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a>) alist))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (cons key (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a>)) alist)))))</pre>
  </div>

<div class="form-block other" id="form-97" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output destructive-pop-assoc
  (key alist)
  (let ((temp (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> key alist <span class="keyword">:test</span> (function <a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (temp (setf (cdr temp) (cdr (cdr temp))) alist)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> alist))))</pre>
  </div>

<div class="form-block other" id="form-98" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output remove-current-acl2-world-key
  (plist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> plist) plist)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car plist) *current-acl2-world-key*) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> plist))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car plist)
        (cons (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> plist)
          (remove-current-acl2-world-key (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> plist)))))))</pre>
  </div>

<div class="form-block function" id="def-hcomp-init" data-defines="HCOMP-INIT" data-references="*HCOMP-CTX*,INCLUDE-BOOK-RAW,*HCOMP-FULL-BOOK-NAME*,*HCOMP-DIRECTORY-NAME*,CHK-CERTIFICATE-FILE,*HCOMP-FULL-BOOK-STRING*,*LOAD-COMPILED-STACK*,SYMBOL-FUNCTION,FUNCTION,FBOUNDP,MACRO,QUOTE,CONS,MACRO-FUNCTION,MAC,LET,APPEND,*HCOMP-FN-MACRO-RESTORE-HT*,*HCOMP-MACRO-ALIST*,*HCOMP-FAKE-VALUE*,T,SYMBOL-VALUE,BOUNDP,COND,NOT,IGNORE,DECLARE,PRESENT-P,OLD,MULTIPLE-VALUE-BIND,*HCOMP-CONST-RESTORE-HT*,*HCOMP-CONST-ALIST*,CAR,GETHASH,SETF,CDR,*HCOMP-FN-ALIST*,PAIR,DOLIST,RETURN-FROM,*HCOMP-MACRO-HT*,*HCOMP-CONST-HT*,AND,ASSERT,*HCOMP-FN-HT*,NULL,RAW-MODE-P,OR,WHEN,*THE-LIVE-STATE*,STATE,&AUX,DEFUN" data-part-name="HCOMP-INIT" data-part-args="*THE-LIVE-STATE*,STATE,&AUX" data-part-body="HCOMP-INIT,RETURN-FROM,*HCOMP-MACRO-HT*,*HCOMP-CONST-HT*,AND,ASSERT,*HCOMP-FN-HT*,NULL,STATE,RAW-MODE-P,OR,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-INIT">hcomp-init</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-init" data-sym="HCOMP-INIT" title="(defun hcomp-init (&amp;aux (state *the-live-state*))
  (when (or (raw-mode-p state) (null *hcomp-fn-ht*))
    (assert (and (null *hcomp-const-ht*) (null *hcomp-macro-ht*)))
    (return-from hcomp-init nil))
  (dolist (pair *hcomp-fn-alist*)
...">hcomp-init</a>
  (&amp;aux (state *the-live-state*))
  (when (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *hcomp-fn-ht*))
    (assert (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *hcomp-const-ht*) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *hcomp-macro-ht*)))
    (return-from <a class="sym-link local-def" href="#def-hcomp-init" data-sym="HCOMP-INIT" title="(defun hcomp-init (&amp;aux (state *the-live-state*))
  (when (or (raw-mode-p state) (null *hcomp-fn-ht*))
    (assert (and (null *hcomp-const-ht*) (null *hcomp-macro-ht*)))
    (return-from hcomp-init nil))
  (dolist (pair *hcomp-fn-alist*)
...">hcomp-init</a> nil))
  (dolist (pair *hcomp-fn-alist*)
    (when (cdr pair)
      (setf (gethash (car pair) *hcomp-fn-ht*) (cdr pair))))
  (dolist (pair *hcomp-const-alist*)
    (when (cdr pair)
      (setf (gethash (car pair) *hcomp-const-ht*) (cdr pair)))
    (when *hcomp-const-restore-ht*
      (multiple-value-bind (old present-p)
        (gethash (car pair) *hcomp-const-restore-ht*)
        (declare (ignore old))
        (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> present-p)
          (setf (gethash (car pair) *hcomp-const-restore-ht*)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((boundp (car pair)) (symbol-value (car pair)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> *hcomp-fake-value*)))))))
  (dolist (pair *hcomp-macro-alist*)
    (when (cdr pair)
      (setf (gethash (car pair) *hcomp-macro-ht*) (cdr pair))))
  (when *hcomp-fn-macro-restore-ht*
    (dolist (pair (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> *hcomp-macro-alist* *hcomp-fn-alist*))
      (multiple-value-bind (old present-p)
        (gethash (car pair) *hcomp-fn-macro-restore-ht*)
        (declare (ignore old))
        (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> present-p)
          (setf (gethash (car pair) *hcomp-fn-macro-restore-ht*)
            (let ((mac (macro-function (car pair))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (mac (cons 'macro mac))
                ((fboundp (car pair)) (cons 'function (symbol-function (car pair))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> *hcomp-fake-value*))))))))
  (when *load-compiled-stack*
    (assert (boundp '*hcomp-full-book-string*))
    (chk-certificate-file *hcomp-full-book-string*
      *hcomp-directory-name*
      *hcomp-full-book-name*
      '<a class="sym-link local-def" href="#def-include-book-raw" data-sym="INCLUDE-BOOK-RAW" title="(defun include-book-raw
       (book-string book-name directory-name load-compiled-file dir ctx state)
  (when (not (member-eq load-compiled-file *load-compiled-file-values*))
    (er hard ctx
        &quot;The only legal values for the :LOAD-COMPILED-FILE keyword argument ~
...">include-book-raw</a>
      *hcomp-ctx*
      state
      nil
      nil))
  nil)</pre>
  </div>

<div class="form-block other" id="def-reclassifying-value-p" data-defines="RECLASSIFYING-VALUE-P" data-references="*HCOMP-FAKE-VALUE*,CAR,EQ,CONSP,AND,X,DEFABBREV" data-used-by="HCOMP-ALISTS-FROM-HTS,INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK,INSTALL-FOR-ADD-TRIP-HCOMP-BUILD" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="RECLASSIFYING-VALUE-P">reclassifying-value-p</span><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-a.html#def-defabbrev" data-sym="DEFABBREV">defabbrev</a> <a class="sym-link local-def" href="#def-reclassifying-value-p" data-sym="RECLASSIFYING-VALUE-P" title="(defabbrev reclassifying-value-p (x)
           (and (consp x) (eq (car x) *hcomp-fake-value*)))">reclassifying-value-p</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp x) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) *hcomp-fake-value*)))</pre>
  </div>

<div class="form-block macro" id="def-make-reclassifying-value" data-defines="MAKE-RECLASSIFYING-VALUE" data-references="*HCOMP-FAKE-VALUE*,CONS,QUASIQUOTE,X,DEFMACRO" data-used-by="INSTALL-FOR-ADD-TRIP-HCOMP-BUILD,HCOMP-TRANSFER-TO-HASH-TABLES" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-RECLASSIFYING-VALUE">make-reclassifying-value</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-make-reclassifying-value" data-sym="MAKE-RECLASSIFYING-VALUE" title="(defmacro make-reclassifying-value (x) `(cons *hcomp-fake-value* ,x))">make-reclassifying-value</a>
  (x)
  `(cons *hcomp-fake-value* ,X))</pre>
  </div>

<div class="form-block macro" id="def-unmake-reclassifying-value" data-defines="UNMAKE-RECLASSIFYING-VALUE" data-references="CDR,QUASIQUOTE,X,DEFMACRO" data-used-by="HCOMP-ALISTS-FROM-HTS,INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNMAKE-RECLASSIFYING-VALUE">unmake-reclassifying-value</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-unmake-reclassifying-value" data-sym="UNMAKE-RECLASSIFYING-VALUE" title="(defmacro unmake-reclassifying-value (x) `(cdr ,x))">unmake-reclassifying-value</a> (x) `(cdr ,X))</pre>
  </div>

<div class="form-block function" id="def-hcomp-transfer-to-hash-tables" data-defines="HCOMP-TRANSFER-TO-HASH-TABLES" data-references="MACRO-FUNCTION,*HCOMP-MACRO-HT*,*HCOMP-MACRO-ALIST*,SYMBOL-VALUE,BOUNDP,*HCOMP-CONST-HT*,*HCOMP-CONST-ALIST*,REMHASH,MAKE-RECLASSIFYING-VALUE,SEMI,QUOTE,ASSERT$,SYMBOL-FUNCTION,T,EQ,SETF,FBOUNDP,AND,COND,*HCOMP-FN-HT*,CAR,GETHASH,QUALIFIED,LET,*HCOMP-FN-ALIST*,PAIR,DOLIST,DEFUN" data-used-by="LOAD-COMPILED-BOOK" data-part-name="HCOMP-TRANSFER-TO-HASH-TABLES" data-part-body="REMHASH,MAKE-RECLASSIFYING-VALUE,SEMI,QUOTE,ASSERT$,SYMBOL-FUNCTION,T,EQ,SETF,FBOUNDP,AND,COND,*HCOMP-FN-HT*,CAR,GETHASH,QUALIFIED,LET,*HCOMP-FN-ALIST*,PAIR,DOLIST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-TRANSFER-TO-HASH-TABLES">hcomp-transfer-to-hash-tables</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-transfer-to-hash-tables" data-sym="HCOMP-TRANSFER-TO-HASH-TABLES" title="(defun hcomp-transfer-to-hash-tables ()
  (dolist (pair *hcomp-fn-alist*)
    (let ((qualified (gethash (car pair) *hcomp-fn-ht*)))
      (cond
       ((and qualified (fboundp (car pair)))
...">hcomp-transfer-to-hash-tables</a>
  nil
  (dolist (pair *hcomp-fn-alist*)
    (let ((qualified (gethash (car pair) *hcomp-fn-ht*)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> qualified (fboundp (car pair))) (setf (gethash (car pair) *hcomp-fn-ht*)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> qualified <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (symbol-function (car pair)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> qualified 'semi)
                  (<a class="sym-link local-def" href="#def-make-reclassifying-value" data-sym="MAKE-RECLASSIFYING-VALUE" title="(defmacro make-reclassifying-value (x) `(cons *hcomp-fake-value* ,x))">make-reclassifying-value</a> (symbol-function (car pair))))))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (remhash (car pair) *hcomp-fn-ht*)))))
  (dolist (pair *hcomp-const-alist*)
    (let ((qualified (gethash (car pair) *hcomp-const-ht*)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> qualified (boundp (car pair))) (setf (gethash (car pair) *hcomp-const-ht*)
            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> qualified <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (symbol-value (car pair)))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (remhash (car pair) *hcomp-const-ht*)))))
  (dolist (pair *hcomp-macro-alist*)
    (let ((qualified (gethash (car pair) *hcomp-macro-ht*)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> qualified (macro-function (car pair))) (setf (gethash (car pair) *hcomp-macro-ht*)
            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> qualified <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (macro-function (car pair)))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (remhash (car pair) *hcomp-macro-ht*))))))</pre>
  </div>

<div class="form-block other" id="form-104" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *saved-hcomp-restore-hts* nil)</pre>
  </div>

<div class="form-block function" id="def-hcomp-restore-defs" data-defines="HCOMP-RESTORE-DEFS" data-references="SYMBOL-VALUE,MAKUNBOUND,REDUNDANT-RAW-LISP-DISCRIMINATOR,REMPROP,SYMBOL-FUNCTION,T,MACRO-FUNCTION,SETF,MACRO,FMAKUNBOUND!,*HCOMP-FAKE-VALUE*,EQ,COND,VAL,K,LAMBDA,MAPHASH,CDR,CONST-RESTORE-HT,CAR,FN-MACRO-RESTORE-HT,LET,QUOTE,HARD,ER,*SAVED-HCOMP-RESTORE-HTS*,NULL,WHEN,DEFUN" data-used-by="INCLUDE-BOOK-RAW-TOP" data-part-name="HCOMP-RESTORE-DEFS" data-part-body="HCOMP-RESTORE-DEFS,QUOTE,HARD,ER,*SAVED-HCOMP-RESTORE-HTS*,NULL,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-RESTORE-DEFS">hcomp-restore-defs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-restore-defs" data-sym="HCOMP-RESTORE-DEFS" title="(defun hcomp-restore-defs ()
  (when (null *saved-hcomp-restore-hts*)
    (er hard &#39;hcomp-restore-defs
        &quot;Apparently an interrupt has occurred at exactly the right time to ~
         thwart ACL2&#39;s attempt to clean up by removing certain definitions in ~
...">hcomp-restore-defs</a>
  nil
  (when (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *saved-hcomp-restore-hts*)
    (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
      '<a class="sym-link local-def" href="#def-hcomp-restore-defs" data-sym="HCOMP-RESTORE-DEFS" title="(defun hcomp-restore-defs ()
  (when (null *saved-hcomp-restore-hts*)
    (er hard &#39;hcomp-restore-defs
        &quot;Apparently an interrupt has occurred at exactly the right time to ~
         thwart ACL2&#39;s attempt to clean up by removing certain definitions in ~
...">hcomp-restore-defs</a>
      <span class="string">"Apparently an interrupt has occurred at exactly the right time to ~
         thwart ACL2&#39;s attempt to clean up by removing certain definitions in ~
         raw Lisp.  You are strongly advised to restart ACL2.  You could ~
         instead try to continue, but you might well encounter errors ~
         regarding having definitions in raw Common Lisp."</span>))
  (let ((fn-macro-restore-ht (car *saved-hcomp-restore-hts*)) (const-restore-ht (cdr *saved-hcomp-restore-hts*)))
    (when fn-macro-restore-ht
      (maphash (lambda (k val)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val *hcomp-fake-value*) (fmakunbound! k))
            ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car val) 'macro) (setf (macro-function k) (cdr val)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (when (macro-function k) (fmakunbound! k))
              (setf (symbol-function k) (cdr val)))))
        fn-macro-restore-ht))
    (when const-restore-ht
      (maphash (lambda (k val)
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val *hcomp-fake-value*) (remprop k 'redundant-raw-lisp-discriminator)
              (makunbound k))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setf (symbol-value k) val))))
        const-restore-ht))
    nil))</pre>
  </div>

<div class="form-block function" id="def-missing-compiled-book" data-defines="MISSING-COMPILED-BOOK" data-references="INCOMPLETE,WARNING$,CAR,TILDE-@-BOOK-STACK-MSG,STACK-MSG,*LOAD-COMPILED-STACK*,RASSOC-EQ,T,EQ,OR,QUOTE,QUASIQUOTE,HARD,ER,NULL,COND,W,WRLD,SEE-DOC,LET,STATE,LOAD-COMPILED-FILE,REASON-MSG,FILE,CTX,DEFUN" data-used-by="INCLUDE-BOOK-RAW,LOAD-COMPILED-BOOK" data-part-name="MISSING-COMPILED-BOOK" data-part-args="STATE,LOAD-COMPILED-FILE,REASON-MSG,FILE,CTX" data-part-body="WARNING$,FILE,REASON-MSG,CAR,TILDE-@-BOOK-STACK-MSG,STACK-MSG,*LOAD-COMPILED-STACK*,RASSOC-EQ,T,EQ,OR,QUOTE,MISSING-COMPILED-BOOK,QUASIQUOTE,CTX,HARD,ER,LOAD-COMPILED-FILE,NULL,COND,STATE,W,WRLD,SEE-DOC,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MISSING-COMPILED-BOOK">missing-compiled-book</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a>
  (ctx file reason-msg load-compiled-file state)
  (let ((see-doc <span class="string">"  See :DOC include-book."</span>) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> load-compiled-file) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          ctx
          <span class="string">"Implementation error: the LOAD-COMPILED-FILE argument is ~x0 ~
                in call ~x1."</span>
          nil
          `(<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> ',CTX
            ',FILE
            ',REASON-MSG
            ',LOAD-COMPILED-FILE
            state)))
      ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
         (<a class="sym-link system" href="axioms.html#def-rassoc-eq" data-sym="RASSOC-EQ">rassoc-eq</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> *load-compiled-stack*)) (let ((stack-msg (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (tilde-@-book-stack-msg <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> *load-compiled-stack* ctx wrld))
               (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (tilde-@-book-stack-msg (car (<a class="sym-link system" href="axioms.html#def-rassoc-eq" data-sym="RASSOC-EQ">rassoc-eq</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> *load-compiled-stack*))
                   *load-compiled-stack*
                   ctx
                   wrld)))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (reason-msg (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                ctx
                <span class="string">"Unable to load compiled file~|  ~s0~|because ~
                         ~@1.~@2~@3"</span>
                file
                reason-msg
                see-doc
                stack-msg))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                ctx
                <span class="string">"Unable to complete load of compiled file for book~|~ ~
                         ~ ~s0,~|as already noted by a warning.~@1~@2"</span>
                file
                see-doc
                stack-msg)))))
      (reason-msg (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
          <span class="string">"Compiled file"</span>
          <span class="string">"Unable to load compiled file for book~|  ~s0~|because ~
                      ~@1.~@2~@3"</span>
          file
          reason-msg
          see-doc
          (tilde-@-book-stack-msg nil *load-compiled-stack* ctx wrld)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
          <span class="string">"Compiled file"</span>
          <span class="string">"Unable to complete load of compiled file for book~|  ~
                    ~s0,~|as already noted by a previous warning.~@1"</span>
          file
          (tilde-@-book-stack-msg nil *load-compiled-stack* ctx wrld)))))
  'incomplete)</pre>
  </div>

<div class="form-block macro" id="def-our-handler-bind" data-defines="OUR-HANDLER-BIND" data-references="HANDLER-BIND,QUASIQUOTE,FORMS,&REST,BINDINGS,DEFMACRO" data-used-by="LOAD-COMPILED-BOOK" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="OUR-HANDLER-BIND">our-handler-bind</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-our-handler-bind" data-sym="OUR-HANDLER-BIND" title="(defmacro our-handler-bind (bindings &amp;rest forms)
  `(handler-bind ,bindings
     ,@forms))">our-handler-bind</a>
  (bindings &amp;rest forms)
  `(handler-bind ,BINDINGS
    ,@FORMS))</pre>
  </div>

<div class="form-block function" id="def-load-compiled-book" data-defines="LOAD-COMPILED-BOOK" data-references="MEMBER-EQ,ASSERT$,HCOMP-TRANSFER-TO-HASH-TABLES,STRINGP,COMPLETE,TO-BE-COMPILED,VALUE,LOAD,WITH-RECKLESS-READTABLE,LOAD-COMPILED,FORMAT,VALUES,THROW,*HCOMP-MACRO-HT*,*HCOMP-CONST-HT*,*HCOMP-FN-HT*,SETQ,C,LAMBDA,FUNCTION,ERROR,OUR-HANDLER-BIND,MY-BOOK-ERROR,VAL,ER,MULTIPLE-VALUE-BIND,ACONS,WITH-CBD,RAW-INCLUDE-BOOK-DIR-ALIST,STATE-GLOBAL-LET*,CATCH,WARNING$,ACL2-OFILE,WHEN,INCOMPLETE,QUOTE,STATUS,NULL,TO-BE-COMPILED-P,*LOAD-COMPILED-STACK*,RASSOC-EQ,EFILE-DATE,LET,OR,FILE-WRITE-DATE$,QUASIQUOTE,MSG,CONVERT-BOOK-STRING-TO-CERT,IF,MISSING-COMPILED-BOOK,COND,FILE-IS-OLDER-STR,EFILE-EXISTS,EXPANSION-FILENAME,T,EQ,NOT,EFILE,>=,OFILE-P,OFILE-DATE,PROBE-FILE,OFILE-EXISTS,CONVERT-BOOK-STRING-TO-COMPILED,OFILE,FILE-WRITE-DATE,CFILE-DATE,OS-FILE,PATHNAME-UNIX-TO-OS,AND,CFILE,LET*,CERTIFICATE-FILE,ACL2-CFILE,MV-LET,ASSERT,STATE,CTX,LOAD-COMPILED-FILE,DIRECTORY-NAME,FULL-BOOK-NAME,FILE,DEFUN" data-used-by="INCLUDE-BOOK-RAW" data-part-name="LOAD-COMPILED-BOOK" data-part-args="STATE,CTX,LOAD-COMPILED-FILE,DIRECTORY-NAME,FULL-BOOK-NAME,FILE" data-part-body="LOAD-COMPILED-FILE,ASSERT" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LOAD-COMPILED-BOOK">load-compiled-book</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-load-compiled-book" data-sym="LOAD-COMPILED-BOOK" title="(defun load-compiled-book
       (file full-book-name directory-name load-compiled-file ctx state)
  (assert load-compiled-file)
  (mv-let (acl2-cfile state) (certificate-file file state)
          (let* ((cfile
...">load-compiled-book</a>
  (file full-book-name
    directory-name
    load-compiled-file
    ctx
    state)
  (assert load-compiled-file)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (acl2-cfile state)
    (certificate-file file state)
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cfile (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> acl2-cfile (pathname-unix-to-os acl2-cfile state))) (os-file (pathname-unix-to-os file state))
        (cfile-date (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cfile (file-write-date cfile)))
        (ofile (convert-book-string-to-compiled os-file state))
        (ofile-exists (probe-file ofile))
        (ofile-date (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ofile-exists (file-write-date ofile)))
        (ofile-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ofile-date cfile-date (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> ofile-date cfile-date)))
        (efile (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
            (expansion-filename os-file)))
        (efile-exists (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> efile (probe-file efile)))
        (file-is-older-str <span class="string">"the file-write-date of ~x0 is less than that of ~x1"</span>))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> cfile) (<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> ctx
            file
            (if (probe-file (convert-book-string-to-cert file <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
              <span class="string">"that book is not certified (but note that ~
                                   its .cert file exists and is not readable)"</span>
              <span class="string">"that book is not certified"</span>)
            load-compiled-file
            state))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ofile-exists) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> efile-exists)) (<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> ctx
            file
            <span class="string">"the compiled file does not exist"</span>
            load-compiled-file
            state))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> cfile-date) (<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> ctx
            file
            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"~x0 is ~x1 (which is odd since file ~x2 exists)"</span>
              `(<a class="sym-link system" href="axioms.html#def-file-write-date_24" data-sym="FILE-WRITE-DATE$">file-write-date$</a> ,ACL2-CFILE state)
              nil
              acl2-cfile)
            load-compiled-file
            state))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> ofile-p
             (let ((efile-date (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> efile-exists (file-write-date efile))))
               (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> efile-date (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> efile-date cfile-date))))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ofile-exists (<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> ctx
                file
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> file-is-older-str ofile cfile)
                load-compiled-file
                state))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> ctx
                file
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"the compiled file does not exist and ~@0"</span>
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> file-is-older-str (expansion-filename file) acl2-cfile))
                load-compiled-file
                state))))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ofile-p) (<a class="sym-link system" href="axioms.html#def-rassoc-eq" data-sym="RASSOC-EQ">rassoc-eq</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> *load-compiled-stack*)) (<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> ctx
            file
            (if ofile-exists
              <span class="string">"that compiled file does not exist"</span>
              <span class="string">"that compiled file is out-of-date"</span>)
            load-compiled-file
            state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((to-be-compiled-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ofile-p)
                 (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *load-compiled-stack*)
                 (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file <span class="keyword">:comp</span>))) (status 'incomplete))
            (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ofile-p) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> to-be-compiled-p))
              (let ((acl2-ofile (convert-book-string-to-compiled file state)))
                (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                  <span class="string">"Compiled file"</span>
                  <span class="string">"Loading expansion file ~x0 in place of compiled file ~
                        ~x1, because ~@2."</span>
                  (expansion-filename file)
                  acl2-ofile
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ofile-exists (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> file-is-older-str acl2-ofile acl2-cfile))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"the compiled file is missing"</span>))))))
            (catch '<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a>
              (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((raw-include-book-dir-alist nil))
                (with-cbd directory-name
                  (let ((*load-compiled-stack* (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> full-book-name
                         load-compiled-file
                         *load-compiled-stack*)))
                    (multiple-value-bind (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> val)
                      (catch 'my-book-error
                        (<a class="sym-link local-def" href="#def-our-handler-bind" data-sym="OUR-HANDLER-BIND" title="(defmacro our-handler-bind (bindings &amp;rest forms)
  `(handler-bind ,bindings
     ,@forms))">our-handler-bind</a> ((error (function (lambda (c)
                                 (setq *hcomp-fn-ht*
                                   nil
                                   *hcomp-const-ht*
                                   nil
                                   *hcomp-macro-ht*
                                   nil)
                                 (throw 'my-book-error (values <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (format nil <span class="string">"~a"</span> c)))))))
                          (values nil
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ofile-p (load-compiled ofile <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-with-reckless-readtable" data-sym="WITH-RECKLESS-READTABLE">with-reckless-readtable</a> (load efile)))))))
                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (setq status
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> (setq status val))
                            (to-be-compiled-p 'to-be-compiled)
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> 'complete)))))))))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((stringp status) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                  <span class="string">"Compiled file"</span>
                  <span class="string">"The following raw Lisp error occurred when loading ~
                      file~|~s0:~|~s1"</span>
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ofile-p ofile) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> efile))
                  status)
                (<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> ctx
                  file
                  (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"an error occurred in raw Lisp (see above)"</span>)
                  load-compiled-file
                  state))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-hcomp-transfer-to-hash-tables" data-sym="HCOMP-TRANSFER-TO-HASH-TABLES" title="(defun hcomp-transfer-to-hash-tables ()
  (dolist (pair *hcomp-fn-alist*)
    (let ((qualified (gethash (car pair) *hcomp-fn-ht*)))
      (cond
       ((and qualified (fboundp (car pair)))
...">hcomp-transfer-to-hash-tables</a>)
                (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> status '(to-be-compiled complete incomplete))
                  status)))))))))</pre>
  </div>

<div class="form-block function" id="def-include-book-raw" data-defines="INCLUDE-BOOK-RAW" data-references="COMPLETE,TO-BE-COMPILED,*HCOMP-CERT-FILENAME*,*HCOMP-CERT-OBJ*,*HCOMP-MACRO-HT*,*HCOMP-CONST-HT*,*HCOMP-FN-HT*,MAKE,SETF,LOAD-COMPILED-BOOK,*HCOMP-CTX*,*HCOMP-DIRECTORY-NAME*,*HCOMP-FULL-BOOK-NAME*,*HCOMP-FULL-BOOK-STRING*,*USER-STOBJ-ALIST*,WITH-HCOMP-BINDINGS,MISSING-COMPILED-BOOK,THROW,ERROR,INCOMPLETE,HCOMP-BOOK-HT-ENTRY,ACCESS,STATUS,GETHASH,ENTRY,WITH-RECKLESS-READTABLE,MSG,WARNING$,LFILE,EFILE-P,EFILE-DATE,EXPANSION-FILENAME,EFILE,REASON,LET,LOAD-COMPILED,<=,LOAD,ASSERT$,OFILE-DATE,FILE-WRITE-DATE,BOOK-DATE,OFILE-EXISTS,PROBE-FILE,OS-FILE-EXISTS,CONVERT-BOOK-STRING-TO-COMPILED,OFILE,PATHNAME-UNIX-TO-OS,OS-FILE,STATE-FREE-GLOBAL-LET*-SAFE,WITH-CBD-RAW,*HCOMP-BOOK-HT*,W,INCLUDE-BOOK-ALIST,GLOBAL-VAL,ASSOC-EQUAL,IGNORE,DECLARE,CONNECTED-BOOK-DIRECTORY,ADD-INCLUDE-BOOK-DIR!,ADD-INCLUDE-BOOK-DIR,INCLUDE-BOOK-DIR,PARSE-BOOK-NAME,MV,IGNORE-FAMILIAR-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,MV-LET,*LOAD-COMPILED-STACK*,AND,OR,T,EQ,COMPILER-ENABLED,F-GET-GLOBAL,NULL,COND,RAW-MODE-P,LET*,RETURN-FROM,*COMPILING-CERTIFIED-FILE*,INCLUDE-BOOK,QUOTE,HARD,ER,*LOAD-COMPILED-FILE-VALUES*,MEMBER-EQ,NOT,WHEN,STATE,CTX,DIR,LOAD-COMPILED-FILE,DIRECTORY-NAME,BOOK-NAME,BOOK-STRING,DEFUN" data-used-by="INCLUDE-BOOK-RAW-TOP,HCOMP-INIT" data-part-name="INCLUDE-BOOK-RAW" data-part-args="STATE,CTX,DIR,LOAD-COMPILED-FILE,DIRECTORY-NAME,BOOK-NAME,BOOK-STRING" data-part-body="INCLUDE-BOOK,QUOTE,CTX,HARD,ER,*LOAD-COMPILED-FILE-VALUES*,LOAD-COMPILED-FILE,MEMBER-EQ,NOT,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-RAW">include-book-raw</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-raw" data-sym="INCLUDE-BOOK-RAW" title="(defun include-book-raw
       (book-string book-name directory-name load-compiled-file dir ctx state)
  (when (not (member-eq load-compiled-file *load-compiled-file-values*))
    (er hard ctx
        &quot;The only legal values for the :LOAD-COMPILED-FILE keyword argument ~
...">include-book-raw</a>
  (book-string book-name
    directory-name
    load-compiled-file
    dir
    ctx
    state)
  (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> load-compiled-file <a class="sym-link system" href="axioms.html#def-_2Aload-compiled-file-values_2A" data-sym="*LOAD-COMPILED-FILE-VALUES*">*load-compiled-file-values*</a>))
    (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
      ctx
      <span class="string">"The only legal values for the :LOAD-COMPILED-FILE keyword argument ~
         of ~x0 are ~&amp;1.  The value ~x2 is thus illegal."</span>
      '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>
      <a class="sym-link system" href="axioms.html#def-_2Aload-compiled-file-values_2A" data-sym="*LOAD-COMPILED-FILE-VALUES*">*load-compiled-file-values*</a>
      load-compiled-file))
  (when *compiling-certified-file*
    (return-from <a class="sym-link local-def" href="#def-include-book-raw" data-sym="INCLUDE-BOOK-RAW" title="(defun include-book-raw
       (book-string book-name directory-name load-compiled-file dir ctx state)
  (when (not (member-eq load-compiled-file *load-compiled-file-values*))
    (er hard ctx
        &quot;The only legal values for the :LOAD-COMPILED-FILE keyword argument ~
...">include-book-raw</a> nil))
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> state)) (load-compiled-file (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled state)) nil)
          ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file <span class="keyword">:default</span>) <span class="keyword">:warn</span>)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> load-compiled-file (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> *load-compiled-stack* <span class="keyword">:warn</span>))))))
    (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> <a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a>) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> load-compiled-file))
      (return-from <a class="sym-link local-def" href="#def-include-book-raw" data-sym="INCLUDE-BOOK-RAW" title="(defun include-book-raw
       (book-string book-name directory-name load-compiled-file dir ctx state)
  (when (not (member-eq load-compiled-file *load-compiled-file-values*))
    (er hard ctx
        &quot;The only legal values for the :LOAD-COMPILED-FILE keyword argument ~
...">include-book-raw</a> nil))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (full-book-string full-book-name
        directory-name
        ignore-familiar-name)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (directory-name (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> book-string book-name directory-name nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (parse-book-name (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (dir (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (include-book-dir dir state)
                  (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                    ctx
                    <span class="string">"Unable to resolve the :DIR argument to ~
                                   include-book, ~x0, which should have been ~
                                   defined by ~v1 or by the ~
                                   project-dir-alist.  Perhaps the book ~x2 ~
                                   needs to be recertified, or perhaps the ~
                                   project-dir-alist needs to be set up to ~
                                   associate a directory with ~x0 and ~
                                   possibly other keywords (see :DOC ~
                                   project-dir-alist)."</span>
                    dir
                    '(<a class="sym-link system" href="axioms.html#def-add-include-book-dir" data-sym="ADD-INCLUDE-BOOK-DIR">add-include-book-dir</a> <a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a>)
                    book-string)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory state)))
            book-string
            <span class="string">".lisp"</span>
            ctx
            state)))
      (declare (ignore ignore-familiar-name))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> full-book-name
           (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'include-book-alist (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) nil)
        ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> *hcomp-book-ht*)) (with-cbd-raw state-free-global-let*-safe
            directory-name
            (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((os-file (pathname-unix-to-os full-book-string state)) (ofile (convert-book-string-to-compiled os-file state))
                (os-file-exists (probe-file os-file))
                (ofile-exists (probe-file ofile))
                (book-date (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> os-file-exists (file-write-date os-file)))
                (ofile-date (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ofile-exists (file-write-date ofile))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> os-file-exists) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                    ctx
                    <span class="string">"The file named ~x0 does not exist."</span>
                    full-book-string))
                ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> load-compiled-file) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> <a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> (load os-file)))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> book-date ofile-date (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> book-date ofile-date)) (load-compiled ofile <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((reason (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (ofile-exists <span class="string">"the compiled file is not at least as ~
                                         recent as the book"</span>)
                         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"the compiled file does not exist"</span>))))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> load-compiled-file <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                          ctx
                          <span class="string">"The compiled file for ~x0 was not loaded ~
                                 because ~@1."</span>
                          reason))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((efile (expansion-filename os-file)) (efile-date (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (probe-file efile) (file-write-date efile)))
                            (efile-p (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> book-date efile-date (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> book-date efile-date)))
                            (lfile (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (efile-p efile)
                                (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> os-file)
                                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                                    ctx
                                    <span class="string">"Implementation error: ~
                                                        We seem to have ~
                                                        called ~
                                                        include-book-raw on ~
                                                        book ~x0 with non-nil ~
                                                        load-compiled-file ~
                                                        argument under the ~
                                                        include-book-fn call ~
                                                        in certify-book-fn."</span>
                                    book-string)))))
                          (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
                            <span class="string">"Compiled file"</span>
                            <span class="string">"Attempting to load ~@0 instead of ~
                                           the corresponding compiled file, ~
                                           because ~@1."</span>
                            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (efile-p <span class="string">"expansion file ~x0"</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"source file ~x0"</span>))
                              lfile)
                            reason)
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (efile-p (<a class="sym-link system" href="axioms.html#def-with-reckless-readtable" data-sym="WITH-RECKLESS-READTABLE">with-reckless-readtable</a> (load efile)))
                            (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> (load os-file))))))))))))
        ((<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((entry (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> *hcomp-book-ht*
                (gethash full-book-name *hcomp-book-ht*))) (status (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> entry (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> hcomp-book-ht-entry entry <span class="keyword">:status</span>))))
           (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> status)
             ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status 'incomplete) *load-compiled-stack*) (error <span class="string">"Implementation error; see include-book-raw."</span>)
               (throw '<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a>
                 (<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> ctx
                   full-book-string
                   nil
                   load-compiled-file
                   state)))
             (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> status))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (with-hcomp-bindings (let ((status (let ((*user-stobj-alist* *user-stobj-alist*) (*hcomp-full-book-string* full-book-string)
                     (*hcomp-full-book-name* full-book-name)
                     (*hcomp-directory-name* directory-name)
                     (*hcomp-ctx* ctx))
                   (<a class="sym-link local-def" href="#def-load-compiled-book" data-sym="LOAD-COMPILED-BOOK" title="(defun load-compiled-book
       (file full-book-name directory-name load-compiled-file ctx state)
  (assert load-compiled-file)
  (mv-let (acl2-cfile state) (certificate-file file state)
          (let* ((cfile
...">load-compiled-book</a> full-book-string
                     full-book-name
                     directory-name
                     load-compiled-file
                     ctx
                     state))))
              (setf (gethash full-book-name *hcomp-book-ht*)
                (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> hcomp-book-ht-entry
                  <span class="keyword">:status</span> status
                  <span class="keyword">:fn-ht</span> *hcomp-fn-ht*
                  <span class="keyword">:const-ht</span> *hcomp-const-ht*
                  <span class="keyword">:macro-ht</span> *hcomp-macro-ht*
                  <span class="keyword">:cert-obj</span> *hcomp-cert-obj*
                  <span class="keyword">:cert-filename</span> *hcomp-cert-filename*))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> status '(to-be-compiled complete)) status)
                (status (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status 'incomplete)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (*load-compiled-stack* (throw '<a class="sym-link local-def" href="#def-missing-compiled-book" data-sym="MISSING-COMPILED-BOOK" title="(defun missing-compiled-book (ctx file reason-msg load-compiled-file state)
  (let ((see-doc &quot;  See :DOC include-book.&quot;) (wrld (w state)))
    (cond
     ((null load-compiled-file)
      (er hard ctx
...">missing-compiled-book</a> 'incomplete))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> 'incomplete))))))))))))</pre>
  </div>

<div class="form-block function" id="def-include-book-raw-top" data-defines="INCLUDE-BOOK-RAW-TOP" data-references="HCOMP-RESTORE-DEFS,LIST*,VALUE,INCLUDE-BOOK-RAW,PROGN,RAW-INCLUDE-BOOK-DIR-ALIST,W,INCLUDE-BOOK-DIR!-TABLE,TABLE-ALIST,RAW-INCLUDE-BOOK-DIR-P,NOT,ASSERT$,RAW-INCLUDE-BOOK-DIR!-ALIST,INCLUDE-BOOK,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*,UNWIND-PROTECT,ACL2-UNWIND-PROTECT,*SAVED-HCOMP-RESTORE-HTS*,SETQ,*HCOMP-CONST-RESTORE-HT*,EQ,MAKE-HASH-TABLE,*HCOMP-FN-MACRO-RESTORE-HT*,LET,MUFFLE-WARNING,QUOTE,INVOKE-RESTART,IGNORE,DECLARE,C,LAMBDA,WARNING,HANDLER-BIND,STATE,CTX,DIR,LOAD-COMPILED-FILE,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,DEFUN" data-part-name="INCLUDE-BOOK-RAW-TOP" data-part-args="STATE,CTX,DIR,LOAD-COMPILED-FILE,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING" data-part-body="HCOMP-RESTORE-DEFS,LIST*,VALUE,CTX,DIR,LOAD-COMPILED-FILE,DIRECTORY-NAME,FULL-BOOK-NAME,FULL-BOOK-STRING,INCLUDE-BOOK-RAW,PROGN,RAW-INCLUDE-BOOK-DIR-ALIST,W,INCLUDE-BOOK-DIR!-TABLE,TABLE-ALIST,STATE,RAW-INCLUDE-BOOK-DIR-P,NOT,ASSERT$,RAW-INCLUDE-BOOK-DIR!-ALIST,INCLUDE-BOOK,LD-SKIP-PROOFSP,STATE-GLOBAL-LET*,UNWIND-PROTECT,ACL2-UNWIND-PROTECT,*SAVED-HCOMP-RESTORE-HTS*,SETQ,*HCOMP-CONST-RESTORE-HT*,EQ,MAKE-HASH-TABLE,*HCOMP-FN-MACRO-RESTORE-HT*,LET,MUFFLE-WARNING,QUOTE,INVOKE-RESTART,IGNORE,DECLARE,C,LAMBDA,WARNING,HANDLER-BIND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INCLUDE-BOOK-RAW-TOP">include-book-raw-top</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-include-book-raw-top" data-sym="INCLUDE-BOOK-RAW-TOP" title="(defun include-book-raw-top
       (full-book-string full-book-name directory-name load-compiled-file dir
        ctx state)
  (handler-bind ((warning
                  (lambda (c)
...">include-book-raw-top</a>
  (full-book-string full-book-name
    directory-name
    load-compiled-file
    dir
    ctx
    state)
  (handler-bind ((warning (lambda (c)
         (declare (ignore c))
         (invoke-restart 'muffle-warning))))
    (let ((*hcomp-fn-macro-restore-ht* (make-hash-table <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>)) (*hcomp-const-restore-ht* (make-hash-table <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>)))
      (setq *saved-hcomp-restore-hts* nil)
      (<a class="sym-link system" href="axioms.html#def-acl2-unwind-protect" data-sym="ACL2-UNWIND-PROTECT">acl2-unwind-protect</a> <span class="string">"include-book-raw"</span>
        (unwind-protect (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (raw-include-book-dir!-alist (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-raw-include-book-dir-p" data-sym="RAW-INCLUDE-BOOK-DIR-P">raw-include-book-dir-p</a> state))
                  (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'include-book-dir!-table (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))))
              (raw-include-book-dir-alist nil))
            (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link local-def" href="#def-include-book-raw" data-sym="INCLUDE-BOOK-RAW" title="(defun include-book-raw
       (book-string book-name directory-name load-compiled-file dir ctx state)
  (when (not (member-eq load-compiled-file *load-compiled-file-values*))
    (er hard ctx
        &quot;The only legal values for the :LOAD-COMPILED-FILE keyword argument ~
...">include-book-raw</a> full-book-string
                full-book-name
                directory-name
                load-compiled-file
                dir
                ctx
                state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
          (setq *saved-hcomp-restore-hts*
            (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> *hcomp-fn-macro-restore-ht* *hcomp-const-restore-ht*)))
        (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link local-def" href="#def-hcomp-restore-defs" data-sym="HCOMP-RESTORE-DEFS" title="(defun hcomp-restore-defs ()
  (when (null *saved-hcomp-restore-hts*)
    (er hard &#39;hcomp-restore-defs
        &quot;Apparently an interrupt has occurred at exactly the right time to ~
         thwart ACL2&#39;s attempt to clean up by removing certain definitions in ~
...">hcomp-restore-defs</a>)
          (setq *saved-hcomp-restore-hts* nil)
          state)
        (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link local-def" href="#def-hcomp-restore-defs" data-sym="HCOMP-RESTORE-DEFS" title="(defun hcomp-restore-defs ()
  (when (null *saved-hcomp-restore-hts*)
    (er hard &#39;hcomp-restore-defs
        &quot;Apparently an interrupt has occurred at exactly the right time to ~
         thwart ACL2&#39;s attempt to clean up by removing certain definitions in ~
...">hcomp-restore-defs</a>)
          (setq *saved-hcomp-restore-hts* nil)
          state)))))</pre>
  </div>

<div class="form-block macro" id="def-hcomp-ht-from-type" data-defines="HCOMP-HT-FROM-TYPE" data-references="HARD,ER,OTHERWISE,*HCOMP-MACRO-HT*,DEFABBREV,*HCOMP-CONST-HT*,DEFPARAMETER,*HCOMP-FN-HT*,DEFUN,CASE,QUASIQUOTE,CTX,TYPE,DEFMACRO" data-used-by="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK,INSTALL-FOR-ADD-TRIP-HCOMP-BUILD" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-HT-FROM-TYPE">hcomp-ht-from-type</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-hcomp-ht-from-type" data-sym="HCOMP-HT-FROM-TYPE" title="(defmacro hcomp-ht-from-type (type ctx)
  `(case ,type
     (defun *hcomp-fn-ht*)
     (defparameter *hcomp-const-ht*)
     ((defmacro defabbrev) *hcomp-macro-ht*)
...">hcomp-ht-from-type</a>
  (type ctx)
  `(<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> ,TYPE
    (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> *hcomp-fn-ht*)
    (defparameter *hcomp-const-ht*)
    ((<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="basis-a.html#def-defabbrev" data-sym="DEFABBREV">defabbrev</a>) *hcomp-macro-ht*)
    (otherwise (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        ,CTX
        <span class="string">"Implementation error: Unknown case, ~x0."</span>
        ,TYPE))))</pre>
  </div>

<div class="form-block function" id="def-hcomp-build-p" data-defines="HCOMP-BUILD-P" data-references="T,ENCAPSULATE-PASS-1,CERTIFY-BOOK,QUOTE,EQ,COND,*HCOMP-STATUS*,S,LET,DEFUN" data-used-by="INSTALL-DEFS-FOR-ADD-TRIP,INSTALL-FOR-ADD-TRIP" data-part-name="HCOMP-BUILD-P" data-part-body="T,ENCAPSULATE-PASS-1,CERTIFY-BOOK,QUOTE,EQ,COND,*HCOMP-STATUS*,S,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-BUILD-P">hcomp-build-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a>
  nil
  (let ((s *hcomp-status*))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> s 'certify-book) 'certify-book)
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> s 'encapsulate-pass-1) 'encapsulate-pass-1)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-install-for-add-trip-hcomp-build" data-defines="INSTALL-FOR-ADD-TRIP-HCOMP-BUILD" data-references="IDFATHB-6,MACRO-FUNCTION,OTHERWISE,SYMBOL-VALUE,DEFPARAMETER,CASE,IDFATHB-5,T,IDFATHB-4,SYMBOL-FUNCTION,MAKE-RECLASSIFYING-VALUE,ASSERT$,RECLASSIFYING-VALUE-P,NOT,IDFATHB-3,SETF,LAST,CONSP,AND,*HCOMP-FAKE-VALUE*,EQ,COND,GETHASH,PRESENT-P,OLD,MULTIPLE-VALUE-BIND,ASSERT,IDFATHB-1,EVAL,WITH-DEBUG,WHEN,QUOTE,HCOMP-HT-FROM-TYPE,HT,CADR,NAME,CAR,TYPE,LET*,EVALP,RECLASSIFYINGP,DEF,DEFUN" data-used-by="INSTALL-DEFS-FOR-ADD-TRIP,INSTALL-FOR-ADD-TRIP" data-part-name="INSTALL-FOR-ADD-TRIP-HCOMP-BUILD" data-part-args="EVALP,RECLASSIFYINGP,DEF" data-part-body="IDFATHB-6,MACRO-FUNCTION,OTHERWISE,SYMBOL-VALUE,DEFPARAMETER,CASE,IDFATHB-5,T,IDFATHB-4,SYMBOL-FUNCTION,MAKE-RECLASSIFYING-VALUE,DEFUN,ASSERT$,RECLASSIFYING-VALUE-P,NOT,RECLASSIFYINGP,IDFATHB-3,SETF,LAST,CONSP,AND,*HCOMP-FAKE-VALUE*,EQ,COND,GETHASH,PRESENT-P,OLD,MULTIPLE-VALUE-BIND,ASSERT,IDFATHB-1,EVAL,WITH-DEBUG,EVALP,WHEN,INSTALL-FOR-ADD-TRIP-HCOMP-BUILD,QUOTE,HCOMP-HT-FROM-TYPE,HT,CADR,NAME,DEF,CAR,TYPE,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSTALL-FOR-ADD-TRIP-HCOMP-BUILD">install-for-add-trip-hcomp-build</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-install-for-add-trip-hcomp-build" data-sym="INSTALL-FOR-ADD-TRIP-HCOMP-BUILD" title="(defun install-for-add-trip-hcomp-build (def reclassifyingp evalp)
  (let* ((type (car def))
         (name (cadr def))
         (ht (hcomp-ht-from-type type &#39;install-for-add-trip-hcomp-build)))
    (when evalp
...">install-for-add-trip-hcomp-build</a>
  (def reclassifyingp evalp)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((type (car def)) (name (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def))
      (ht (<a class="sym-link local-def" href="#def-hcomp-ht-from-type" data-sym="HCOMP-HT-FROM-TYPE" title="(defmacro hcomp-ht-from-type (type ctx)
  `(case ,type
     (defun *hcomp-fn-ht*)
     (defparameter *hcomp-const-ht*)
     ((defmacro defabbrev) *hcomp-macro-ht*)
...">hcomp-ht-from-type</a> type '<a class="sym-link local-def" href="#def-install-for-add-trip-hcomp-build" data-sym="INSTALL-FOR-ADD-TRIP-HCOMP-BUILD" title="(defun install-for-add-trip-hcomp-build (def reclassifyingp evalp)
  (let* ((type (car def))
         (name (cadr def))
         (ht (hcomp-ht-from-type type &#39;install-for-add-trip-hcomp-build)))
    (when evalp
...">install-for-add-trip-hcomp-build</a>)))
    (when evalp
      (with-debug (eval def)
        <span class="string">"[~s] Eval def for ~s.~%"</span>
        'idfathb-1
        name))
    (assert ht)
    (multiple-value-bind (old present-p)
      (gethash name ht)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> old *hcomp-fake-value*))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> def)))
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> def))) 'quote)) (with-debug (setf (gethash name ht) *hcomp-fake-value*)
            <span class="string">"[~s] Set hash table to *hcomp-fake-value* for ~s.~%"</span>
            'idfathb-3
            name))
        (present-p (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> reclassifyingp (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-reclassifying-value-p" data-sym="RECLASSIFYING-VALUE-P" title="(defabbrev reclassifying-value-p (x)
           (and (consp x) (eq (car x) *hcomp-fake-value*)))">reclassifying-value-p</a> old))) (with-debug (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>)
                  (setf (gethash name ht)
                    (<a class="sym-link local-def" href="#def-make-reclassifying-value" data-sym="MAKE-RECLASSIFYING-VALUE" title="(defmacro make-reclassifying-value (x) `(cons *hcomp-fake-value* ,x))">make-reclassifying-value</a> (symbol-function name))))
                <span class="string">"[~s] Set hash table to reclassifying value for ~
                               ~s.~%"</span>
                'idfathb-4
                name))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (with-debug (setf (gethash name ht) *hcomp-fake-value*)
                <span class="string">"[~s] Set hash table to ~
                                          *hcomp-fake-value* for ~s.~%"</span>
                'idfathb-5
                name))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (with-debug (setf (gethash name ht)
              (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> type
                (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> (symbol-function name))
                (defparameter (symbol-value name))
                (otherwise (macro-function name))))
            <span class="string">"[~s] Set hash table for ~s.~%"</span>
            'idfathb-6
            name))))))</pre>
  </div>

<div class="form-block function" id="def-install-for-add-trip-include-book" data-defines="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK" data-references="IFATIB-7,IFATIB-6,MACRO-FUNCTION,DEFABBREV,OTHERWISE,IFATIB-5,SYMBOL-VALUE,DEFPARAMETER,FDEFUN-MODE,IFATIB-4,CASE,IFATIB-3,IFATIB-2,SYMBOL-FUNCTION,SETF,UNMAKE-RECLASSIFYING-VALUE,FIXED-VAL,RECLASSIFYING-VALUE-P,ASSERT$,IF,ASSERT,TO-COMPILE,COMPILED-FUNCTION-P,MEMBER-EQ,EXT-GEN-BARRIERS,GLOBAL-VAL,EXT-GENS,T,DEFMACRO,OR,NOT,*HCOMP-FAKE-VALUE*,EQ,COND,SETQ,GETHASH,PRESENT-P,VAL,MULTIPLE-VALUE-BIND,IFATIB-1,EVAL,WITH-DEBUG,AND,RETURN-FROM,NULL,WHEN,RETURN-VAL,QUOTE,HCOMP-HT-FROM-TYPE,HT,LET,WRLD,RECLASSIFYINGP,DEF,NAME0,NAME,TYPE,DEFUN" data-used-by="INSTALL-DEFS-FOR-ADD-TRIP,INSTALL-FOR-ADD-TRIP" data-part-name="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK" data-part-args="WRLD,RECLASSIFYINGP,DEF,NAME0,NAME,TYPE" data-part-body="IFATIB-7,IFATIB-6,MACRO-FUNCTION,DEFABBREV,OTHERWISE,IFATIB-5,SYMBOL-VALUE,DEFPARAMETER,FDEFUN-MODE,IFATIB-4,CASE,IFATIB-3,IFATIB-2,SYMBOL-FUNCTION,RECLASSIFYINGP,SETF,UNMAKE-RECLASSIFYING-VALUE,FIXED-VAL,RECLASSIFYING-VALUE-P,ASSERT$,IF,ASSERT,TO-COMPILE,COMPILED-FUNCTION-P,NAME0,MEMBER-EQ,EXT-GEN-BARRIERS,GLOBAL-VAL,EXT-GENS,T,WRLD,DEFMACRO,DEFUN,OR,NOT,*HCOMP-FAKE-VALUE*,EQ,COND,SETQ,GETHASH,PRESENT-P,VAL,MULTIPLE-VALUE-BIND,NAME,IFATIB-1,EVAL,WITH-DEBUG,DEF,AND,RETURN-FROM,NULL,WHEN,RETURN-VAL,INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK,QUOTE,TYPE,HCOMP-HT-FROM-TYPE,HT,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK">install-for-add-trip-include-book</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-install-for-add-trip-include-book" data-sym="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK" title="(defun install-for-add-trip-include-book
       (type name name0 def reclassifyingp wrld)
  (let ((ht (hcomp-ht-from-type type &#39;install-for-add-trip-include-book))
        (return-val nil))
    (when (null ht)
...">install-for-add-trip-include-book</a>
  (type name name0 def reclassifyingp wrld)
  (let ((ht (<a class="sym-link local-def" href="#def-hcomp-ht-from-type" data-sym="HCOMP-HT-FROM-TYPE" title="(defmacro hcomp-ht-from-type (type ctx)
  `(case ,type
     (defun *hcomp-fn-ht*)
     (defparameter *hcomp-const-ht*)
     ((defmacro defabbrev) *hcomp-macro-ht*)
...">hcomp-ht-from-type</a> type '<a class="sym-link local-def" href="#def-install-for-add-trip-include-book" data-sym="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK" title="(defun install-for-add-trip-include-book
       (type name name0 def reclassifyingp wrld)
  (let ((ht (hcomp-ht-from-type type &#39;install-for-add-trip-include-book))
        (return-val nil))
    (when (null ht)
...">install-for-add-trip-include-book</a>)) (return-val nil))
    (when (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ht)
      (return-from <a class="sym-link local-def" href="#def-install-for-add-trip-include-book" data-sym="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK" title="(defun install-for-add-trip-include-book
       (type name name0 def reclassifyingp wrld)
  (let ((ht (hcomp-ht-from-type type &#39;install-for-add-trip-include-book))
        (return-val nil))
    (when (null ht)
...">install-for-add-trip-include-book</a>
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> def
          (with-debug (eval def)
            <span class="string">"[~s] Eval def for ~s.~%"</span>
            'ifatib-1
            name))))
    (multiple-value-bind (val present-p)
      (gethash name ht)
      (when present-p
        (setq return-val
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val *hcomp-fake-value*) nil)
            ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type '<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a>) wrld))) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((ext-gens (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> wrld (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'ext-gens wrld))) ext-gen-barriers)
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ext-gens) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ext-gens (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> name0 ext-gens)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>) (compiled-function-p val)) 'to-compile)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (setq ext-gen-barriers
                       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ext-gens (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'ext-gen-barriers wrld)))
                     (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> name0 ext-gen-barriers)) (assert (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>))
                    (if (compiled-function-p val)
                      'to-compile
                      nil))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> return-val <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val *hcomp-fake-value*))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link local-def" href="#def-reclassifying-value-p" data-sym="RECLASSIFYING-VALUE-P" title="(defabbrev reclassifying-value-p (x)
           (and (consp x) (eq (car x) *hcomp-fake-value*)))">reclassifying-value-p</a> val) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> type '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>)
                  (let ((fixed-val (<a class="sym-link local-def" href="#def-unmake-reclassifying-value" data-sym="UNMAKE-RECLASSIFYING-VALUE" title="(defmacro unmake-reclassifying-value (x) `(cdr ,x))">unmake-reclassifying-value</a> val)))
                    (setf (gethash name ht) fixed-val)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (reclassifyingp (with-debug (setf (symbol-function name) fixed-val)
                          <span class="string">"[~s] Set (symbol-function ~s) with fixed-val.~%"</span>
                          'ifatib-2
                          name))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (def (with-debug (eval def)
                              <span class="string">"[~s] Eval def for ~s.~%"</span>
                              'ifatib-3
                              name))
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setq return-val nil))))))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> type
                  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> (with-debug (setf (symbol-function name) val)
                      <span class="string">"[~s] Set (symbol-function ~s), mode ~s.~%"</span>
                      'ifatib-4
                      name
                      (<a class="sym-link system" href="basis-b.html#def-fdefun-mode" data-sym="FDEFUN-MODE">fdefun-mode</a> name0 wrld)))
                  (defparameter (with-debug (setf (symbol-value name) val)
                      <span class="string">"[~s] Set (symbol-value ~s).~%"</span>
                      'ifatib-5
                      name))
                  (otherwise (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> type '(<a class="sym-link system" href="basis-a.html#def-defabbrev" data-sym="DEFABBREV">defabbrev</a> <a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a>))
                      (with-debug (setf (macro-function name) val)
                        <span class="string">"[~s] Set (macro-function ~s).~%"</span>
                        'ifatib-6
                        name))))
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (when def
            (with-debug (eval def)
              <span class="string">"[~s] Eval def for ~s.~%"</span>
              'ifatib-7
              def))))
      return-val)))</pre>
  </div>

<div class="form-block function" id="def-install-for-add-trip" data-defines="INSTALL-FOR-ADD-TRIP" data-references="IFAT-1,EVAL,WITH-DEBUG,T,INSTALL-FOR-ADD-TRIP-HCOMP-BUILD,HCOMP-BUILD-P,CADR,CAR,INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK,INCLUDE-BOOK,QUOTE,*HCOMP-STATUS*,EQ,COND,EVALP,RECLASSIFYINGP,DEF,DEFUN" data-used-by="HCOMP-BUILD-FROM-STATE-RAW" data-part-name="INSTALL-FOR-ADD-TRIP" data-part-args="EVALP,RECLASSIFYINGP,DEF" data-part-body="IFAT-1,EVAL,WITH-DEBUG,T,EVALP,INSTALL-FOR-ADD-TRIP-HCOMP-BUILD,HCOMP-BUILD-P,RECLASSIFYINGP,CADR,DEF,CAR,INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK,INCLUDE-BOOK,QUOTE,*HCOMP-STATUS*,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSTALL-FOR-ADD-TRIP">install-for-add-trip</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-install-for-add-trip" data-sym="INSTALL-FOR-ADD-TRIP" title="(defun install-for-add-trip (def reclassifyingp evalp)
  (cond
   ((eq *hcomp-status* &#39;include-book)
    (install-for-add-trip-include-book (car def) (cadr def) (cadr def) def
                                       reclassifyingp nil))
...">install-for-add-trip</a>
  (def reclassifyingp evalp)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> *hcomp-status* '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (<a class="sym-link local-def" href="#def-install-for-add-trip-include-book" data-sym="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK" title="(defun install-for-add-trip-include-book
       (type name name0 def reclassifyingp wrld)
  (let ((ht (hcomp-ht-from-type type &#39;install-for-add-trip-include-book))
        (return-val nil))
    (when (null ht)
...">install-for-add-trip-include-book</a> (car def)
        (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def)
        (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def)
        def
        reclassifyingp
        nil))
    ((<a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a>) (<a class="sym-link local-def" href="#def-install-for-add-trip-hcomp-build" data-sym="INSTALL-FOR-ADD-TRIP-HCOMP-BUILD" title="(defun install-for-add-trip-hcomp-build (def reclassifyingp evalp)
  (let* ((type (car def))
         (name (cadr def))
         (ht (hcomp-ht-from-type type &#39;install-for-add-trip-hcomp-build)))
    (when evalp
...">install-for-add-trip-hcomp-build</a> def reclassifyingp evalp))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (with-debug (eval def)
        <span class="string">"[~s] Eval def for ~s.~%"</span>
        'ifat-1
        (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def)))))</pre>
  </div>

<div class="form-block function" id="def-install-defs-for-add-trip" data-defines="INSTALL-DEFS-FOR-ADD-TRIP" data-references="IDFAT-9,INSTALL-FOR-ADD-TRIP-HCOMP-BUILD,IDFAT-8,IN,IDFAT-7,*HCOMP-FAKE-VALUE*,GETHASH,IDFAT-6,*HCOMP-FN-HT*,ASSERT,NESTED-ENCAPSULATE,IN-NESTED-ENCAPSULATEP,LOGIC,IN-LOCAL-FLG,F-GET-GLOBAL,*THE-LIVE-STATE*,STATE,ENCAPSULATE-PASS-1,SKIP-REASON,IDFAT-5,EVAL,IDFAT-4,QUASIQUOTE,TMP,OR,MAKE-DEFUN-DECLARE-FORM,CDDDR,CONS,*1*-DEF,SETF,CADR,T,DEFABBREV,DEFMACRO,MEMBER-EQ,NOT,INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK,SETQ,INCLUDE-BOOK,*HCOMP-STATUS*,FLG,GLOBAL-VAL,AND,=,EXT-GEN-BARRIERS,WITH,IDFAT-3,NOTINLINE-NAMEP,IDFAT-2,INLINE,INLINE-NAMEP,*DECLAIM-LIST*,DECLAIM,PUSH,WHEN,IDFAT-1,PROCLAIM,WITH-DEBUG,*1*-SYMBOL,NOTINLINE,LIST,FORM,LET,XARGS,DECLARE,EQUAL,COND,SYMBOL-NAME,SNAME,NAME,CDR,CADDR,IF,DEF0,ONEIFY-CLTL-CODE,QUOTE,EQ,ONEIFY-P,CAR,DEF,LET*,DO,ON,TAIL,FOR,LOOP,HCOMP-BUILD-P,&AUX,EVALP,DECLAIM-P,WRLD,RECLASSIFYING-P,DEFS,DEFUN" data-used-by="HCOMP-BUILD-FROM-STATE-RAW" data-part-name="INSTALL-DEFS-FOR-ADD-TRIP" data-part-args="HCOMP-BUILD-P,&AUX,EVALP,DECLAIM-P,WRLD,RECLASSIFYING-P,DEFS" data-part-body="IDFAT-3,NOTINLINE-NAMEP,IDFAT-2,INLINE,INLINE-NAMEP,*DECLAIM-LIST*,DECLAIM,PUSH,HCOMP-BUILD-P,WHEN,IDFAT-1,PROCLAIM,WITH-DEBUG,*1*-SYMBOL,NOTINLINE,LIST,FORM,LET,XARGS,DECLARE,EQUAL,COND,SYMBOL-NAME,SNAME,NAME,CDR,CADDR,IF,DEF0,ONEIFY-CLTL-CODE,QUOTE,EQ,ONEIFY-P,CAR,DEF,LET*,DO,DEFS,ON,TAIL,FOR,LOOP" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSTALL-DEFS-FOR-ADD-TRIP">install-defs-for-add-trip</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-install-defs-for-add-trip" data-sym="INSTALL-DEFS-FOR-ADD-TRIP" title="(defun install-defs-for-add-trip
       (defs reclassifying-p wrld declaim-p evalp
        &amp;aux (hcomp-build-p (hcomp-build-p)))
  (loop for tail on defs
        do (let* ((def (car tail))
...">install-defs-for-add-trip</a>
  (defs reclassifying-p
    wrld
    declaim-p
    evalp
    &amp;aux
    (<a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a> (<a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a>)))
  (loop for
    tail
    on
    defs
    do
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((def (car tail)) (oneify-p (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) '<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a>))
        (def0 (if oneify-p
            (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> def)
            (cdr def)))
        (name (car def0))
        (sname (symbol-name name)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> def0)
           '(declare (xargs <span class="keyword">:non-executable</span> <span class="keyword">:program</span>))) (let ((form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'notinline
                 (if oneify-p
                   (*1*-symbol name)
                   name))))
            (with-debug (proclaim form)
              <span class="string">"[~s] (proclaim ~s)~%"</span>
              'idfat-1
              form)
            (when <a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a>
              (push (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'declaim form) *declaim-list*))))
        (oneify-p nil)
        ((<a class="sym-link system" href="defuns.html#def-inline-namep" data-sym="INLINE-NAMEP">inline-namep</a> sname) (let ((form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'inline name)))
            (with-debug (proclaim form)
              <span class="string">"[~s] (proclaim ~s)~%"</span>
              'idfat-2
              form)
            (when <a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a>
              (push (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'declaim form) *declaim-list*))))
        ((<a class="sym-link system" href="defuns.html#def-notinline-namep" data-sym="NOTINLINE-NAMEP">notinline-namep</a> sname) (let ((form (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'notinline name)))
            (with-debug (proclaim form)
              <span class="string">"[~s] (proclaim ~s)~%"</span>
              'idfat-3
              form)
            (when <a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a>
              (push (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'declaim form) *declaim-list*)))))))
  (loop with
    ext-gen-barriers
    <a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a>
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> evalp (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'ext-gen-barriers wrld))
    for
    tail
    on
    defs
    do
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((def (car tail)) (oneify-p (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) '<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a>))
        (def0 (if oneify-p
            (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> def)
            (cdr def)))
        (name (car def0))
        (flg nil))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> *hcomp-status* '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
           (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (oneify-p (setq flg
                 (<a class="sym-link local-def" href="#def-install-for-add-trip-include-book" data-sym="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK" title="(defun install-for-add-trip-include-book
       (type name name0 def reclassifyingp wrld)
  (let ((ht (hcomp-ht-from-type type &#39;install-for-add-trip-include-book))
        (return-val nil))
    (when (null ht)
...">install-for-add-trip-include-book</a> '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>
                   (*1*-symbol name)
                   name
                   nil
                   reclassifying-p
                   wrld)))
             ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car def) '(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="basis-a.html#def-defabbrev" data-sym="DEFABBREV">defabbrev</a>)))
                (<a class="sym-link system" href="defuns.html#def-inline-namep" data-sym="INLINE-NAMEP">inline-namep</a> (symbol-name name))) nil)
             (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setq flg
                 (<a class="sym-link local-def" href="#def-install-for-add-trip-include-book" data-sym="INSTALL-FOR-ADD-TRIP-INCLUDE-BOOK" title="(defun install-for-add-trip-include-book
       (type name name0 def reclassifyingp wrld)
  (let ((ht (hcomp-ht-from-type type &#39;install-for-add-trip-include-book))
        (return-val nil))
    (when (null ht)
...">install-for-add-trip-include-book</a> (car def)
                   (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def)
                   (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def)
                   nil
                   reclassifying-p
                   wrld))))
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> flg <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (setf (car tail) nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let (form)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (oneify-p (let ((*1*-def (cons '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>
                       (<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def) def0 (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> def) wrld))))
                  (setf (car tail) *1*-def)))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> declaim-p
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car def) '(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link system" href="basis-a.html#def-defabbrev" data-sym="DEFABBREV">defabbrev</a>)))) (setq form (make-defun-declare-form (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def) def))))
            (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> form <a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a>) (push form *declaim-list*))
            (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ext-gen-barriers
                (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> oneify-p (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>))
                (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> name ext-gen-barriers))
              (let ((tmp `(notinline ,(IF ONEIFY-P
     (*1*-SYMBOL NAME)
     NAME))))
                (with-debug (proclaim tmp)
                  <span class="string">"[~s] (proclaim ~s)~%"</span>
                  'idfat-4
                  tmp)))
            (when form
              (with-debug (eval form) <span class="string">"[~s] (eval ~s)~%"</span> 'idfat-5 form))
            (let ((skip-reason (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a> 'encapsulate-pass-1)
                   (let ((state *the-live-state*))
                     (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-local-flg state)
                       (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> oneify-p (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def) <span class="keyword">:logic</span>)) '<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>)
                         ((<a class="sym-link system" href="history-management.html#def-in-nested-encapsulatep" data-sym="IN-NESTED-ENCAPSULATEP">in-nested-encapsulatep</a> state) 'nested-encapsulate)
                         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))))))
              (when skip-reason
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> skip-reason '<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>) (assert *hcomp-fn-ht*)
                    (with-debug (eval (car tail))
                      <span class="string">"[~s] Storing *hcomp-fake-value* for ~
                                        ~s.~%"</span>
                      'idfat-6
                      (*1*-symbol name))
                    (setf (gethash (*1*-symbol name) *hcomp-fn-ht*)
                      *hcomp-fake-value*))
                  (evalp (with-debug (eval (car tail))
                      <span class="string">"[~s] Eval def for ~s.~%"</span>
                      'idfat-7
                      (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (car tail)))))
                (setf (car tail) nil))))))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> *hcomp-status* '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>) (assert evalp)
      (loop for
        def
        in
        defs
        when
        def
        do
        (with-debug (eval def)
          <span class="string">"[~s] Eval def for ~s.~%"</span>
          'idfat-8
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def))))
    (<a class="sym-link local-def" href="#def-hcomp-build-p" data-sym="HCOMP-BUILD-P" title="(defun hcomp-build-p ()
  (let ((s *hcomp-status*))
    (cond ((eq s &#39;certify-book) &#39;certify-book)
          ((eq s &#39;encapsulate-pass-1) &#39;encapsulate-pass-1) (t nil))))">hcomp-build-p</a> (loop for
        def
        in
        defs
        when
        def
        do
        (<a class="sym-link local-def" href="#def-install-for-add-trip-hcomp-build" data-sym="INSTALL-FOR-ADD-TRIP-HCOMP-BUILD" title="(defun install-for-add-trip-hcomp-build (def reclassifyingp evalp)
  (let* ((type (car def))
         (name (cadr def))
         (ht (hcomp-ht-from-type type &#39;install-for-add-trip-hcomp-build)))
    (when evalp
...">install-for-add-trip-hcomp-build</a> def reclassifying-p evalp)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (assert evalp)
      (loop for
        def
        in
        defs
        do
        (with-debug (eval def)
          <span class="string">"[~s] Eval def for ~s.~%"</span>
          'idfat-9
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def))))))</pre>
  </div>

<div class="form-block function" id="def-ifat-defparameter" data-defines="IFAT-DEFPARAMETER" data-references="OUR-QUOTE-MACRO,DEFPARAMETER,QUASIQUOTE,QUOTE,CAR,EQ,CONSP,AND,IF,FORM,VAL,NAME,DEFUN" data-used-by="HCOMP-BUILD-FROM-STATE-RAW" data-part-name="IFAT-DEFPARAMETER" data-part-args="FORM,VAL,NAME" data-part-body="OUR-QUOTE-MACRO,DEFPARAMETER,QUASIQUOTE,QUOTE,CAR,EQ,FORM,CONSP,AND,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="IFAT-DEFPARAMETER">ifat-defparameter</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ifat-defparameter" data-sym="IFAT-DEFPARAMETER" title="(defun ifat-defparameter (name val form)
  (if (and (consp form) (eq (car form) &#39;quote))
      `(defparameter ,name &#39;,val)
      `(defparameter ,name (our-quote-macro ,val))))">ifat-defparameter</a>
  (name val form)
  (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp form) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) 'quote))
    `(defparameter ,NAME ',VAL)
    `(defparameter ,NAME (our-quote-macro ,VAL))))</pre>
  </div>

<div class="form-block function" id="def-hcomp-build-from-state-raw" data-defines="HCOMP-BUILD-FROM-STATE-RAW" data-references="VALUE,SET-ATTACHMENT-SYMBOL-FORM,*SPECIAL-CLTL-CMD-ATTACHMENT-MARK-NAME*,UNLESS,SYMBOLP,X,ATTACHMENT,CADDDR,IFAT-DEFPARAMETER,INSTALL-FOR-ADD-TRIP,DEFCONST,NREVERSE,REMOVE-STOBJ-INLINE-DECLARE,DEFABBREV,*STOBJ-INLINE-DECLARE*,MEMBER-EQUAL,DEFMACRO,PUSH,AX-DEFS,RAW-DEFS,NTH,NAME,DEFABSSTOBJ,RECLASSIFYING,NCONC,INSTALL-DEFS-FOR-ADD-TRIP,CDR,IF,ONEIFY-CLTL-CODE,LIST*,CONS,SETQ,OR,T,DEFSTOBJ,EQ,CONSP,AND,COND,CDDDR,DEF,NEW-*1*-DEFS,NEW-DEFS,CADR,DEFUN-MODE,CADDR,IGNOREP,DEFUNS,CAR,CASE,W,WRLD,LET*,CLTL-CMD,DOLIST,CERTIFY-BOOK,QUOTE,*HCOMP-STATUS*,LET,STATE,CLTL-CMDS,DEFUN" data-part-name="HCOMP-BUILD-FROM-STATE-RAW" data-part-args="STATE,CLTL-CMDS" data-part-body="SET-ATTACHMENT-SYMBOL-FORM,*SPECIAL-CLTL-CMD-ATTACHMENT-MARK-NAME*,UNLESS,SYMBOLP,X,ATTACHMENT,CADDDR,IFAT-DEFPARAMETER,INSTALL-FOR-ADD-TRIP,DEFCONST,NREVERSE,REMOVE-STOBJ-INLINE-DECLARE,DEFABBREV,*STOBJ-INLINE-DECLARE*,MEMBER-EQUAL,DEFMACRO,PUSH,AX-DEFS,RAW-DEFS,NTH,NAME,DEFABSSTOBJ,RECLASSIFYING,NCONC,INSTALL-DEFS-FOR-ADD-TRIP,CDR,IF,ONEIFY-CLTL-CODE,LIST*,DEFUN,CONS,SETQ,OR,T,DEFSTOBJ,EQ,CONSP,AND,COND,CDDDR,DEF,NEW-*1*-DEFS,NEW-DEFS,CADR,DEFUN-MODE,CADDR,IGNOREP,DEFUNS,CAR,CASE,STATE,W,WRLD,LET*,CLTL-CMDS,CLTL-CMD,DOLIST,CERTIFY-BOOK,QUOTE,*HCOMP-STATUS*,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-BUILD-FROM-STATE-RAW">hcomp-build-from-state-raw</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-build-from-state-raw" data-sym="HCOMP-BUILD-FROM-STATE-RAW" title="(defun hcomp-build-from-state-raw (cltl-cmds state)
  (let ((*hcomp-status* &#39;certify-book))
    (dolist (cltl-cmd cltl-cmds)
      (let* ((wrld (w state)))
        (case (car cltl-cmd)
...">hcomp-build-from-state-raw</a>
  (cltl-cmds state)
  (let ((*hcomp-status* 'certify-book))
    (dolist (cltl-cmd cltl-cmds)
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
        (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (car cltl-cmd)
          (<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a> (let ((ignorep (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> cltl-cmd)) (<a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))
                (new-defs nil)
                (new-*1*-defs nil))
              (dolist (def (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> cltl-cmd))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp ignorep) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ignorep) '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>)) nil)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> ignorep
                      (setq new-defs (cons (cons '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> def) new-defs)))
                    (setq new-*1*-defs
                      (cons (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a>
                          <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a>
                          def
                          (if (consp ignorep)
                            (cdr ignorep)
                            nil))
                        new-*1*-defs)))))
              (<a class="sym-link local-def" href="#def-install-defs-for-add-trip" data-sym="INSTALL-DEFS-FOR-ADD-TRIP" title="(defun install-defs-for-add-trip
       (defs reclassifying-p wrld declaim-p evalp
        &amp;aux (hcomp-build-p (hcomp-build-p)))
  (loop for tail on defs
        do (let* ((def (car tail))
...">install-defs-for-add-trip</a> (nconc new-defs new-*1*-defs)
                (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ignorep 'reclassifying)
                wrld
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                nil)))
          ((<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> defabsstobj) (let ((name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> cltl-cmd)) (raw-defs (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> cltl-cmd))
                (ax-defs (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">6</span> cltl-cmd))
                (new-defs nil))
              (dolist (def raw-defs)
                (push (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car cltl-cmd) 'defabsstobj) (cons '<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> def))
                    ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> <a class="sym-link system" href="axioms.html#def-_2Astobj-inline-declare_2A" data-sym="*STOBJ-INLINE-DECLARE*">*stobj-inline-declare*</a> def) (cons '<a class="sym-link system" href="basis-a.html#def-defabbrev" data-sym="DEFABBREV">defabbrev</a> (remove-stobj-inline-declare def)))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> def)))
                  new-defs))
              (dolist (def ax-defs)
                (push (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a> <span class="keyword">:logic</span> def name) new-defs))
              (setq new-defs (nreverse new-defs))
              (<a class="sym-link local-def" href="#def-install-defs-for-add-trip" data-sym="INSTALL-DEFS-FOR-ADD-TRIP" title="(defun install-defs-for-add-trip
       (defs reclassifying-p wrld declaim-p evalp
        &amp;aux (hcomp-build-p (hcomp-build-p)))
  (loop for tail on defs
        do (let* ((def (car tail))
...">install-defs-for-add-trip</a> new-defs nil wrld <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
          (<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> (<a class="sym-link local-def" href="#def-install-for-add-trip" data-sym="INSTALL-FOR-ADD-TRIP" title="(defun install-for-add-trip (def reclassifyingp evalp)
  (cond
   ((eq *hcomp-status* &#39;include-book)
    (install-for-add-trip-include-book (car def) (cadr def) (cadr def) def
                                       reclassifyingp nil))
...">install-for-add-trip</a> (<a class="sym-link local-def" href="#def-ifat-defparameter" data-sym="IFAT-DEFPARAMETER" title="(defun ifat-defparameter (name val form)
  (if (and (consp form) (eq (car form) &#39;quote))
      `(defparameter ,name &#39;,val)
      `(defparameter ,name (our-quote-macro ,val))))">ifat-defparameter</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd)
                (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> cltl-cmd)
                (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> cltl-cmd))
              nil
              nil))
          (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> (<a class="sym-link local-def" href="#def-install-for-add-trip" data-sym="INSTALL-FOR-ADD-TRIP" title="(defun install-for-add-trip (def reclassifyingp evalp)
  (cond
   ((eq *hcomp-status* &#39;include-book)
    (install-for-add-trip-include-book (car def) (cadr def) (cadr def) def
                                       reclassifyingp nil))
...">install-for-add-trip</a> cltl-cmd nil nil))
          (attachment (dolist (x (cdr cltl-cmd))
              (let ((name (if (symbolp x)
                     x
                     (car x))))
                (unless (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name *special-cltl-cmd-attachment-mark-name*)
                  (<a class="sym-link local-def" href="#def-install-for-add-trip" data-sym="INSTALL-FOR-ADD-TRIP" title="(defun install-for-add-trip (def reclassifyingp evalp)
  (cond
   ((eq *hcomp-status* &#39;include-book)
    (install-for-add-trip-include-book (car def) (cadr def) (cadr def) def
                                       reclassifyingp nil))
...">install-for-add-trip</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp x) (set-attachment-symbol-form x nil))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (set-attachment-symbol-form name (cdr x))))
                    nil
                    nil)))))))))
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))</pre>
  </div>

<div class="form-block macro" id="def-eq-symbol-function-possibly-unmemoized" data-defines="EQ-SYMBOL-FUNCTION-POSSIBLY-UNMEMOIZED" data-references="MEMOIZE-INFO-HT-ENTRY,ACCESS,*MEMOIZE-INFO-HT*,GETHASH,ENTRY,LET,SYMBOL-FUNCTION,EQ,OR,QUASIQUOTE,SYMBOLP,AND,ASSERT,SYM,FN,DEFMACRO" data-used-by="HCOMP-ALISTS-FROM-HTS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="EQ-SYMBOL-FUNCTION-POSSIBLY-UNMEMOIZED">eq-symbol-function-possibly-unmemoized</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-eq-symbol-function-possibly-unmemoized" data-sym="EQ-SYMBOL-FUNCTION-POSSIBLY-UNMEMOIZED" title="(defmacro eq-symbol-function-possibly-unmemoized (fn sym)
  (assert (and (symbolp fn) (symbolp sym)))
  `(or (eq ,fn (symbol-function ,sym))
       (let ((entry (gethash ,sym *memoize-info-ht*)))
         (and entry (eq ,fn (access memoize-info-ht-entry entry :old-fn))))))">eq-symbol-function-possibly-unmemoized</a>
  (fn sym)
  (assert (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp fn) (symbolp sym)))
  `(<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,FN (symbol-function ,SYM))
    (let ((entry (gethash ,SYM *memoize-info-ht*)))
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> entry
        (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,FN (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> memoize-info-ht-entry entry <span class="keyword">:old-fn</span>))))))</pre>
  </div>

<div class="form-block function" id="def-hcomp-alists-from-hts" data-defines="HCOMP-ALISTS-FROM-HTS" data-references="MV,*HCOMP-MACRO-HT*,MACRO-FUNCTION,*HCOMP-CONST-HT*,SYMBOL-VALUE,BOUNDP,*HCOMP-FN-HT*,T,SEMI,QUOTE,EQ-SYMBOL-FUNCTION-POSSIBLY-UNMEMOIZED,AND,UNMAKE-RECLASSIFYING-VALUE,FN,RECLASSIFYING-VALUE-P,FBOUNDP,NOT,*HCOMP-FAKE-VALUE*,EQ,COND,CONS,PUSH,VAL,K,LAMBDA,MAPHASH,MACRO-ALIST,CONST-ALIST,FN-ALIST,LET,DEFUN" data-part-name="HCOMP-ALISTS-FROM-HTS" data-part-body="MV,*HCOMP-MACRO-HT*,MACRO-FUNCTION,*HCOMP-CONST-HT*,SYMBOL-VALUE,BOUNDP,*HCOMP-FN-HT*,T,SEMI,QUOTE,EQ-SYMBOL-FUNCTION-POSSIBLY-UNMEMOIZED,AND,UNMAKE-RECLASSIFYING-VALUE,FN,RECLASSIFYING-VALUE-P,FBOUNDP,NOT,*HCOMP-FAKE-VALUE*,EQ,COND,CONS,PUSH,VAL,K,LAMBDA,MAPHASH,MACRO-ALIST,CONST-ALIST,FN-ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HCOMP-ALISTS-FROM-HTS">hcomp-alists-from-hts</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hcomp-alists-from-hts" data-sym="HCOMP-ALISTS-FROM-HTS" title="(defun hcomp-alists-from-hts ()
  (let ((fn-alist nil) (const-alist nil) (macro-alist nil))
    (maphash
     (lambda (k val)
       (push
...">hcomp-alists-from-hts</a>
  nil
  (let ((fn-alist nil) (const-alist nil) (macro-alist nil))
    (maphash (lambda (k val)
        (push (cons k
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val *hcomp-fake-value*) nil)
              ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (fboundp k)) nil)
              ((<a class="sym-link local-def" href="#def-reclassifying-value-p" data-sym="RECLASSIFYING-VALUE-P" title="(defabbrev reclassifying-value-p (x)
           (and (consp x) (eq (car x) *hcomp-fake-value*)))">reclassifying-value-p</a> val) (let ((fn (<a class="sym-link local-def" href="#def-unmake-reclassifying-value" data-sym="UNMAKE-RECLASSIFYING-VALUE" title="(defmacro unmake-reclassifying-value (x) `(cdr ,x))">unmake-reclassifying-value</a> val)))
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link local-def" href="#def-eq-symbol-function-possibly-unmemoized" data-sym="EQ-SYMBOL-FUNCTION-POSSIBLY-UNMEMOIZED" title="(defmacro eq-symbol-function-possibly-unmemoized (fn sym)
  (assert (and (symbolp fn) (symbolp sym)))
  `(or (eq ,fn (symbol-function ,sym))
       (let ((entry (gethash ,sym *memoize-info-ht*)))
         (and entry (eq ,fn (access memoize-info-ht-entry entry :old-fn))))))">eq-symbol-function-possibly-unmemoized</a> fn k) 'semi)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-eq-symbol-function-possibly-unmemoized" data-sym="EQ-SYMBOL-FUNCTION-POSSIBLY-UNMEMOIZED" title="(defmacro eq-symbol-function-possibly-unmemoized (fn sym)
  (assert (and (symbolp fn) (symbolp sym)))
  `(or (eq ,fn (symbol-function ,sym))
       (let ((entry (gethash ,sym *memoize-info-ht*)))
         (and entry (eq ,fn (access memoize-info-ht-entry entry :old-fn))))))">eq-symbol-function-possibly-unmemoized</a> val k))))
          fn-alist))
      *hcomp-fn-ht*)
    (maphash (lambda (k val)
        (push (cons k
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val *hcomp-fake-value*) nil)
              ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (boundp k)) nil)
              ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val (symbol-value k)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
          const-alist))
      *hcomp-const-ht*)
    (maphash (lambda (k val)
        (push (cons k
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val *hcomp-fake-value*) nil)
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val (macro-function k))) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
          macro-alist))
      *hcomp-macro-ht*)
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> fn-alist const-alist macro-alist)))</pre>
  </div>

<div class="form-block constant" id="def-_2Aboot-strap-pass-2-acl2-loop-only-fns_2A" data-defines="*BOOT-STRAP-PASS-2-ACL2-LOOP-ONLY-FNS*" data-references="APPLY$-LAMBDA,APPLY$-PRIM,QUOTE,DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*BOOT-STRAP-PASS-2-ACL2-LOOP-ONLY-FNS*">*boot-strap-pass-2-acl2-loop-only-fns*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aboot-strap-pass-2-acl2-loop-only-fns_2A" data-sym="*BOOT-STRAP-PASS-2-ACL2-LOOP-ONLY-FNS*" title="(defconst *boot-strap-pass-2-acl2-loop-only-fns* &#39;(apply$-prim apply$-lambda))">*boot-strap-pass-2-acl2-loop-only-fns*</a>
  '(apply$-prim apply$-lambda))</pre>
  </div>

<div class="form-block other" id="form-122" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *proclaim-dfs-ht* (make-hash-table <span class="keyword">:test</span> (function <a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>)))</pre>
  </div>

<div class="form-block function" id="def-proclaim-dfs" data-defines="PROCLAIM-DFS" data-references="REMHASH,PROCLAIM,*PROCLAIM-DFS-HT*,GETHASH,SETF,&OPTIONAL,VALUES,FUNCTION,FTYPE,QUASIQUOTE,DCL,OR,ASSERT,STOBJS-OUT,QUOTE,GETPROPC,STOBJS-IN,LET,T,*STOBJS-OUT-INVALID*,MEMBER-EQ,LISP-IMPLEMENTATION-VERSION,STRING>=,COND,*THE-LIVE-STATE*,W,WRLD,&AUX,FN,DEFUN" data-part-name="PROCLAIM-DFS" data-part-args="*THE-LIVE-STATE*,W,WRLD,&AUX,FN" data-part-body="REMHASH,PROCLAIM,*PROCLAIM-DFS-HT*,GETHASH,SETF,&OPTIONAL,VALUES,FUNCTION,FTYPE,QUASIQUOTE,DCL,OR,ASSERT,STOBJS-OUT,WRLD,QUOTE,GETPROPC,STOBJS-IN,LET,T,*STOBJS-OUT-INVALID*,FN,MEMBER-EQ,LISP-IMPLEMENTATION-VERSION,STRING>=,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROCLAIM-DFS">proclaim-dfs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-proclaim-dfs" data-sym="PROCLAIM-DFS" title="(defun proclaim-dfs (fn &amp;aux (wrld (w *the-live-state*)))
  (cond ((string&gt;= (lisp-implementation-version) &quot;2.5.6&quot;) nil)
        ((member-eq fn *stobjs-out-invalid*) nil)
        (t
         (let ((stobjs-in (getpropc fn &#39;stobjs-in nil wrld))
...">proclaim-dfs</a>
  (fn &amp;aux (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-string_3E_3D" data-sym="STRING&gt;=">string&gt;=</a> (lisp-implementation-version) <span class="string">"2.5.6"</span>) nil)
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn <a class="sym-link system" href="axioms.html#def-_2Astobjs-out-invalid_2A" data-sym="*STOBJS-OUT-INVALID*">*stobjs-out-invalid*</a>) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> nil wrld)) (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> '(nil) wrld)))
        (assert <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:df</span> <a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a>) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:df</span> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)) (let ((dcl `(ftype (function ,(NCONC
  (LOOP FOR X IN STOBJS-IN
        COLLECT (IF (EQ X :DF)
                    &#39;DOUBLE-FLOAT
                    T))
  &#39;(&amp;OPTIONAL))
                     (values ,@(LOOP FOR X IN STOBJS-OUT
        COLLECT (IF (EQ X :DF)
                    &#39;DOUBLE-FLOAT
                    T))
                       &amp;optional))
                   ,FN)))
              (setf (gethash fn *proclaim-dfs-ht*) dcl)
              (proclaim dcl)))
          ((gethash fn *proclaim-dfs-ht*) (remhash fn *proclaim-dfs-ht*))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))))</pre>
  </div>

<div class="form-block other" id="form-124" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output add-trip
  (world-name world-key trip status)
  (global-symbol (car trip))
  (*1*-symbol? (car trip))
  (without-interrupts (let ((alist (get (car trip) world-key)))
      (setf (get (car trip) world-key)
        (destructive-push-assoc (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip)
          (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)
          alist
          world-key))
      (setf (car status) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip))
      (setf (cdr status) alist)))
  (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> world-name 'current-acl2-world)
      (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'cltl-command)
      (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
      (consp (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)) (boot-strap-flg (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg *the-live-state*))
        (cltl-cmd (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
      (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (car cltl-cmd)
        (<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a> (let ((ignorep (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> cltl-cmd)) (<a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))
              (new-defs nil)
              (new-*1*-defs nil))
            (without-interrupts (dolist (def (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> cltl-cmd))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> boot-strap-flg
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'boot-strap-pass-2 wrld))) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (fboundp (car def))
                      (interface-er <span class="string">"~x0 is not fboundp!"</span> (car def)))
                    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car def)
                        `(<a class="sym-link system" href="axioms.html#def-mv-list" data-sym="MV-LIST">mv-list</a> <a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a>
                          <a class="sym-link system" href="basis-a.html#def-wormhole-eval" data-sym="WORMHOLE-EVAL">wormhole-eval</a>
                          ,@*DF-PRIMITIVES*
                          ,@*DEFUN-OVERRIDES*))
                      (setq new-*1*-defs
                        (cons (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a>
                            <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a>
                            def
                            (if (consp ignorep)
                              (cdr ignorep)
                              nil))
                          new-*1*-defs))))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> ignorep)
                     (equal <a class="sym-link system" href="axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>
                       (symbol-package-name (car def)))) (interface-er <span class="string">"It is illegal to redefine a function in ~
                                    the main Lisp package, such as ~x0!"</span>
                      (car def)))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp ignorep) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ignorep) '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>)) (maybe-push-undo-stack '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> (car def) ignorep))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> boot-strap-flg
                     (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car def) <a class="sym-link local-def" href="#def-_2Aboot-strap-pass-2-acl2-loop-only-fns_2A" data-sym="*BOOT-STRAP-PASS-2-ACL2-LOOP-ONLY-FNS*" title="(defconst *boot-strap-pass-2-acl2-loop-only-fns* &#39;(apply$-prim apply$-lambda))">*boot-strap-pass-2-acl2-loop-only-fns*</a>)
                       (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car def) *df-primitives*)
                       (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car def) *defun-overrides*))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (maybe-push-undo-stack '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> (car def) ignorep)
                    (unless ignorep
                      (<a class="sym-link local-def" href="#def-proclaim-dfs" data-sym="PROCLAIM-DFS" title="(defun proclaim-dfs (fn &amp;aux (wrld (w *the-live-state*)))
  (cond ((string&gt;= (lisp-implementation-version) &quot;2.5.6&quot;) nil)
        ((member-eq fn *stobjs-out-invalid*) nil)
        (t
         (let ((stobjs-in (getpropc fn &#39;stobjs-in nil wrld))
...">proclaim-dfs</a> (car def))
                      (setq new-defs (cons (cons '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> def) new-defs)))
                    (setq new-*1*-defs
                      (cons (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a>
                          <a class="sym-link system" href="basis-b.html#def-defun-mode" data-sym="DEFUN-MODE">defun-mode</a>
                          def
                          (if (consp ignorep)
                            (cdr ignorep)
                            nil))
                        new-*1*-defs)))))
              (setf (cdr status) 'maybe-push-undo-stack-completed))
            (setq new-defs (nconc new-defs new-*1*-defs))
            (<a class="sym-link local-def" href="#def-install-defs-for-add-trip" data-sym="INSTALL-DEFS-FOR-ADD-TRIP" title="(defun install-defs-for-add-trip
       (defs reclassifying-p wrld declaim-p evalp
        &amp;aux (hcomp-build-p (hcomp-build-p)))
  (loop for tail on defs
        do (let* ((def (car tail))
...">install-defs-for-add-trip</a> new-defs
              (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ignorep 'reclassifying)
              wrld
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> boot-strap-flg)
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled *the-live-state*) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
              ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> boot-strap-flg)) (dolist (def new-defs)
                  (when def
                    (let ((name (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def))
                           ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) '<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a>) (car (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> def)))
                           (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (error <span class="string">"Implementation error: ~
                                                    unexpected form in ~
                                                    add-trip, ~x0"</span>
                               def)))))
                      (eval `(compile ',NAME)))))))))
        ((<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> defabsstobj) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((absp (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car cltl-cmd) 'defabsstobj)) (name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> cltl-cmd))
              (the-live-name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> cltl-cmd))
              (init (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> cltl-cmd))
              (raw-defs (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> cltl-cmd))
              (discriminator (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> cltl-cmd))
              (ax-defs (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">6</span> cltl-cmd))
              (non-executable (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> defstobj-redundant-raw-lisp-discriminator-value
                  (cdr discriminator)
                  <span class="keyword">:non-executable</span>))
              (new-defs nil))
            (without-interrupts (maybe-push-undo-stack (car cltl-cmd) name)
              (maybe-push-undo-stack '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> '*user-stobj-alist*)
              (setf (cdr status) 'maybe-push-undo-stack-completed))
            (let ((var (st-lst name)))
              (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (boundp var) (eval `(defg ,VAR nil))))
            (setf (get the-live-name 'redundant-raw-lisp-discriminator)
              discriminator)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> name *user-stobj-alist*) (assert (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> name *non-executable-user-stobj-lst*)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (non-executable (setq *user-stobj-alist*
                      (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> name *user-stobj-alist*))
                    (push name *non-executable-user-stobj-lst*))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setq *user-stobj-alist*
                      (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> name (eval init) *user-stobj-alist*)))))
              (non-executable (pushnew name *non-executable-user-stobj-lst* <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (when (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> name *non-executable-user-stobj-lst*)
                  (setq *non-executable-user-stobj-lst*
                    (<a class="sym-link system" href="axioms.html#def-remove1" data-sym="REMOVE1">remove1</a> name *non-executable-user-stobj-lst*)))
                (push (cons name (eval init)) *user-stobj-alist*)))
            (dolist (def raw-defs)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> boot-strap-flg
                   (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'boot-strap-pass-2 wrld))) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (fboundp (car def))
                    (interface-er <span class="string">"~x0 is not fboundp!"</span> (car def))))
                ((equal <a class="sym-link system" href="axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>
                   (symbol-package-name (car def))) (interface-er <span class="string">"It is illegal to redefine a function in the main Lisp ~
                      package, such as ~x0!"</span>
                    (car def)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((def (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (absp (cons '<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> def))
                         ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> <a class="sym-link system" href="axioms.html#def-_2Astobj-inline-declare_2A" data-sym="*STOBJ-INLINE-DECLARE*">*stobj-inline-declare*</a> def) (cons '<a class="sym-link system" href="basis-a.html#def-defabbrev" data-sym="DEFABBREV">defabbrev</a> (remove-stobj-inline-declare def)))
                         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-proclaim-dfs" data-sym="PROCLAIM-DFS" title="(defun proclaim-dfs (fn &amp;aux (wrld (w *the-live-state*)))
  (cond ((string&gt;= (lisp-implementation-version) &quot;2.5.6&quot;) nil)
        ((member-eq fn *stobjs-out-invalid*) nil)
        (t
         (let ((stobjs-in (getpropc fn &#39;stobjs-in nil wrld))
...">proclaim-dfs</a> (car def)) (cons '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> def)))))
                    (setq new-defs (cons def new-defs))))))
            (dolist (def ax-defs)
              (setq new-defs
                (cons (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a> <span class="keyword">:logic</span> def name) new-defs)))
            (setq new-defs (nreverse new-defs))
            (<a class="sym-link local-def" href="#def-install-defs-for-add-trip" data-sym="INSTALL-DEFS-FOR-ADD-TRIP" title="(defun install-defs-for-add-trip
       (defs reclassifying-p wrld declaim-p evalp
        &amp;aux (hcomp-build-p (hcomp-build-p)))
  (loop for tail on defs
        do (let* ((def (car tail))
...">install-defs-for-add-trip</a> new-defs
              nil
              wrld
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> boot-strap-flg)
              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'compiler-enabled *the-live-state*) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                (<a class="sym-link system" href="axioms.html#def-default-compile-fns" data-sym="DEFAULT-COMPILE-FNS">default-compile-fns</a> wrld))
              (dolist (def new-defs)
                (when def
                  (let ((name (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>)
                            (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) '<a class="sym-link system" href="basis-a.html#def-defabbrev" data-sym="DEFABBREV">defabbrev</a>)
                            (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) '<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a>)) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> def))
                         ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car def) '<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a>) (car (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> def)))
                         (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (error <span class="string">"Implementation error: ~
                                              unexpected form in add-trip, ~x0"</span>
                             def)))))
                    (eval `(compile ',NAME))))))))
        (<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> (without-interrupts (maybe-push-undo-stack '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))
            (setf (cdr status) 'maybe-push-undo-stack-completed))
          (eval (cons '<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> (cdr cltl-cmd))))
        (<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (boot-strap-flg (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (boundp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))
                (interface-er <span class="string">"~x0 is not boundp!"</span> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd)))
              (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (get (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd) 'redundant-raw-lisp-discriminator)
                (setf (get (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd) 'redundant-raw-lisp-discriminator)
                  (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> cltl-cmd) (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> cltl-cmd)))))
            ((equal <a class="sym-link system" href="axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>
               (symbol-package-name (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))) (interface-er <span class="string">"It is illegal to redefine a defconst in the ~
                                main Lisp package, such as ~x0!"</span>
                (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (without-interrupts (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((name (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd)) (form (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> cltl-cmd))
                    (val (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> cltl-cmd)))
                  (maybe-push-undo-stack '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> name)
                  (setf (get name 'redundant-raw-lisp-discriminator)
                    (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> '<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> form val))
                  (<a class="sym-link local-def" href="#def-install-for-add-trip" data-sym="INSTALL-FOR-ADD-TRIP" title="(defun install-for-add-trip (def reclassifyingp evalp)
  (cond
   ((eq *hcomp-status* &#39;include-book)
    (install-for-add-trip-include-book (car def) (cadr def) (cadr def) def
                                       reclassifyingp nil))
...">install-for-add-trip</a> (<a class="sym-link local-def" href="#def-ifat-defparameter" data-sym="IFAT-DEFPARAMETER" title="(defun ifat-defparameter (name val form)
  (if (and (consp form) (eq (car form) &#39;quote))
      `(defparameter ,name &#39;,val)
      `(defparameter ,name (our-quote-macro ,val))))">ifat-defparameter</a> name val form)
                    nil
                    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                (setf (cdr status) 'maybe-push-undo-stack-completed)))))
        (<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> boot-strap-flg
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'boot-strap-pass-2 wrld))) (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (fboundp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))
                (interface-er <span class="string">"~x0 is not fboundp!"</span> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))))
            ((equal <a class="sym-link system" href="axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>
               (symbol-package-name (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))) (interface-er <span class="string">"It is illegal to redefine a macro in the ~
                                main Lisp package, such as ~x0!"</span>
                (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (without-interrupts (maybe-push-undo-stack '<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))
                (setf (cdr status) 'maybe-push-undo-stack-completed))
              (<a class="sym-link local-def" href="#def-install-for-add-trip" data-sym="INSTALL-FOR-ADD-TRIP" title="(defun install-for-add-trip (def reclassifyingp evalp)
  (cond
   ((eq *hcomp-status* &#39;include-book)
    (install-for-add-trip-include-book (car def) (cadr def) (cadr def) def
                                       reclassifyingp nil))
...">install-for-add-trip</a> cltl-cmd nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
        (attachment (dolist (x (cdr cltl-cmd))
            (let ((name (if (symbolp x)
                   x
                   (car x))))
              (without-interrupts (maybe-push-undo-stack 'attachment name)
                (setf (cdr status) 'maybe-push-undo-stack-completed))
              (unless (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name *special-cltl-cmd-attachment-mark-name*)
                (push name *defattach-fns*)
                (<a class="sym-link local-def" href="#def-install-for-add-trip" data-sym="INSTALL-FOR-ADD-TRIP" title="(defun install-for-add-trip (def reclassifyingp evalp)
  (cond
   ((eq *hcomp-status* &#39;include-book)
    (install-for-add-trip-include-book (car def) (cadr def) (cadr def) def
                                       reclassifyingp nil))
...">install-for-add-trip</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp x) (set-attachment-symbol-form x nil))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (set-attachment-symbol-form name (cdr x))))
                  nil
                  <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))
        (memoize (without-interrupts (maybe-push-undo-stack 'memoize (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))
            (setf (cdr status) 'maybe-push-undo-stack-completed))
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((tuple cltl-cmd) (cl-defun (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">4</span> tuple)))
            (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> cl-defun
              (with-overhead (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">13</span> tuple)
                (memoize-fn (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> tuple)
                  <span class="keyword">:condition</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> tuple)
                  <span class="keyword">:inline</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">3</span> tuple)
                  <span class="keyword">:cl-defun</span> cl-defun
                  <span class="keyword">:formals</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">5</span> tuple)
                  <span class="keyword">:stobjs-in</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">6</span> tuple)
                  <span class="keyword">:stobjs-out</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">7</span> tuple)
                  <span class="keyword">:commutative</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">9</span> tuple)
                  <span class="keyword">:forget</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">10</span> tuple)
                  <span class="keyword">:memo-table-init-size</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">11</span> tuple)
                  <span class="keyword">:aokp</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">12</span> tuple)
                  <span class="keyword">:invoke</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">14</span> tuple))))))
        (unmemoize (without-interrupts (maybe-push-undo-stack 'unmemoize (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))
            (unmemoize-fn (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> cltl-cmd))
            (setf (cdr status) 'maybe-push-undo-stack-completed))))))
  (let ((temp (get (car trip) *current-acl2-world-key*)) (plist (symbol-plist (car trip))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> temp (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car plist) *current-acl2-world-key*))) (setf (symbol-plist (car trip))
          (cons *current-acl2-world-key*
            (cons temp (remove-current-acl2-world-key plist))))))))</pre>
  </div>

<div class="form-block other" id="form-125" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output undo-trip
  (world-name world-key trip)
  (setf (get (car trip) world-key)
    (destructive-pop-assoc (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip)
      (get (car trip) world-key)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> world-name 'current-acl2-world)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'cltl-command)
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
       (consp (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))) (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (car (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
        (<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a> (dolist (tuple (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
            (maybe-pop-undo-stack (car tuple))))
        ((<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a> defabsstobj) (let ((name (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))))
            (maybe-pop-undo-stack name)
            (maybe-pop-undo-stack '*user-stobj-alist*)))
        (<a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a> nil)
        ((<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> memoize unmemoize) (maybe-pop-undo-stack (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))))
        (attachment (let ((lst (cdr (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))))
            (dolist (x lst)
              (let ((name (if (symbolp x)
                     x
                     (car x))))
                (maybe-pop-undo-stack name)))))
        (otherwise nil)))))</pre>
  </div>

<div class="form-block other" id="form-126" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *bad-wrld*)</pre>
  </div>

<div class="form-block function" id="def-check-acl2-world-invariant" data-defines="CHECK-ACL2-WORLD-INVARIANT" data-references="INTERFACE-ER,*BAD-WRLD*,SETQ,*THE-LIVE-STATE*,W,EQ,NOT,COND,OLD-WRLD,WRLD,DEFUN" data-part-name="CHECK-ACL2-WORLD-INVARIANT" data-part-args="OLD-WRLD,WRLD" data-part-body="INTERFACE-ER,WRLD,*BAD-WRLD*,SETQ,*THE-LIVE-STATE*,W,OLD-WRLD,EQ,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-ACL2-WORLD-INVARIANT">check-acl2-world-invariant</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-acl2-world-invariant" data-sym="CHECK-ACL2-WORLD-INVARIANT" title="(defun check-acl2-world-invariant (wrld old-wrld)
  (cond
   ((not (eq old-wrld (w *the-live-state*))) (setq *bad-wrld* wrld)
    (interface-er &quot;Extend-world1 or retract-world1 has been asked to install ~
           a world at a moment when the current global value of ~
...">check-acl2-world-invariant</a>
  (wrld old-wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> old-wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))) (setq *bad-wrld* wrld)
      (interface-er <span class="string">"Extend-world1 or retract-world1 has been asked to install ~
           a world at a moment when the current global value of ~
           &#39;current-acl2-world was not the installed world!  The ~
           world we were asked to install may be found in the variable ~
           *bad-wrld*."</span>))))</pre>
  </div>

<div class="form-block other" id="form-128" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defparameter *known-worlds* nil)</pre>
  </div>

<div class="form-block other" id="form-129" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *saved-user-stobj-alist* nil)</pre>
  </div>

<div class="form-block other" id="form-130" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *saved-non-executable-user-stobj-lst* nil)</pre>
  </div>

<div class="form-block function" id="def-update-wrld-structures" data-defines="UPDATE-WRLD-STRUCTURES" data-references="*DEFATTACH-FNS*,UPDATE-MEMO-ENTRIES-FOR-ATTACHMENTS,*NON-EXECUTABLE-USER-STOBJ-LST*,*SAVED-NON-EXECUTABLE-USER-STOBJ-LST*,SETQ,STRIP-CARS,RECOMPRESS-STOBJ-ACCESSOR-ARRAYS,*USER-STOBJ-ALIST*,*SAVED-USER-STOBJ-ALIST*,EQ,NOT,WHEN,GLOBAL-ARITHMETIC-ENABLED-STRUCTURE,QUOTE,RECOMPRESS-GLOBAL-ENABLED-STRUCTURE,INSTALL-GLOBAL-ENABLED-STRUCTURE,STATE,WRLD,DEFUN" data-part-name="UPDATE-WRLD-STRUCTURES" data-part-args="STATE,WRLD" data-part-body="STATE,WRLD,INSTALL-GLOBAL-ENABLED-STRUCTURE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UPDATE-WRLD-STRUCTURES">update-wrld-structures</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-update-wrld-structures" data-sym="UPDATE-WRLD-STRUCTURES" title="(defun update-wrld-structures (wrld state)
  (install-global-enabled-structure wrld state)
  (recompress-global-enabled-structure &#39;global-arithmetic-enabled-structure
                                       wrld)
  (when (not (eq *saved-user-stobj-alist* *user-stobj-alist*))
...">update-wrld-structures</a>
  (wrld state)
  (<a class="sym-link system" href="history-management.html#def-install-global-enabled-structure" data-sym="INSTALL-GLOBAL-ENABLED-STRUCTURE">install-global-enabled-structure</a> wrld state)
  (recompress-global-enabled-structure 'global-arithmetic-enabled-structure
    wrld)
  (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> *saved-user-stobj-alist* *user-stobj-alist*))
    (recompress-stobj-accessor-arrays (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> *user-stobj-alist*)
      wrld)
    (setq *saved-user-stobj-alist* *user-stobj-alist*))
  (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> *saved-non-executable-user-stobj-lst*
        *non-executable-user-stobj-lst*))
    (recompress-stobj-accessor-arrays *non-executable-user-stobj-lst*
      wrld)
    (setq *saved-non-executable-user-stobj-lst*
      *non-executable-user-stobj-lst*))
  (update-memo-entries-for-attachments *defattach-fns*
    wrld
    state)
  nil)</pre>
  </div>

<div class="form-block other" id="form-132" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output extend-world1
  (name wrld)
  (let ((status (cons nil nil)) (state *the-live-state*)
      (pair (get name 'acl2-world-pair))
      old-wrld
      world-key
      new-trips)
    (unwind-protect-disable-interrupts-during-cleanup (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pair) (setq pair
              (cons nil
                (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world)
                  *current-acl2-world-key*
                  (gensym))))
            (pushnew name *known-worlds*)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world) (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'current-acl2-world nil state)))
            (setf (get name 'acl2-world-pair) pair)))
        (setq old-wrld (car pair))
        (setq world-key (cdr pair))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world) (<a class="sym-link local-def" href="#def-check-acl2-world-invariant" data-sym="CHECK-ACL2-WORLD-INVARIANT" title="(defun check-acl2-world-invariant (wrld old-wrld)
  (cond
   ((not (eq old-wrld (w *the-live-state*))) (setq *bad-wrld* wrld)
    (interface-er &quot;Extend-world1 or retract-world1 has been asked to install ~
           a world at a moment when the current global value of ~
...">check-acl2-world-invariant</a> wrld old-wrld)))
        (do ((tl wrld (cdr tl)))
          ((equal tl old-wrld))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> tl) (setq *bad-wrld* wrld)
              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                'extend-world1
                <span class="string">"Extend-world1 was called upon to ``extend&#39;&#39; ~x0.  But the ~
                  world supplied to extend-world1, which is now the value of ~
                  the Lisp global *bad-wrld*, is not an extension of the ~
                  current ~x0.  The alist corresponding to the current ~x0 ~
                  may be obtained via ~x1.  No properties were modified -- ~
                  that is, the symbol-plists still reflect the ~
                  pre-extend-world1 ~x0.  You may report this problem to the ~
                  ACL2 implementors."</span>
                name
                `(car (get ',NAME 'acl2-world-pair))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (push (car tl) new-trips))))
        (with-more-warnings-suppressed (loop (when (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> new-trips) (return))
            (let ((trip (car new-trips)))
              (setf (cdr status) nil)
              (add-trip name world-key trip status)
              (setq new-trips (cdr new-trips))))
          (setf (car pair) wrld)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) wrld) (when (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world)
            (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'current-acl2-world wrld state)
            (<a class="sym-link local-def" href="#def-update-wrld-structures" data-sym="UPDATE-WRLD-STRUCTURES" title="(defun update-wrld-structures (wrld state)
  (install-global-enabled-structure wrld state)
  (recompress-global-enabled-structure &#39;global-arithmetic-enabled-structure
                                       wrld)
  (when (not (eq *saved-user-stobj-alist* *user-stobj-alist*))
...">update-wrld-structures</a> wrld state)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (when (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world)
            (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
              <span class="string">"~%~
                  ; *Note*: Interrupt or error detected while extending the~%~
                  ;         ACL2 logical world; now reverting the world with~%~
                  ;         interrupts disabled.  This should complete~%~
                  ;         quickly.~&amp;~%"</span>)
            (finish-output))
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((alist (cdr status)) (remaining (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> alist 'maybe-push-undo-stack-completed)
                  (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (consp new-trips) (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> new-trips)))
                  (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> new-trips)))
              (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> remaining wrld)))
            (when (consp alist)
              (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (consp new-trips)
                (destructive-pop-assoc (car status) alist)))
            (setf (car pair) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
            (when (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world)
              (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'current-acl2-world <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
              (<a class="sym-link local-def" href="#def-update-wrld-structures" data-sym="UPDATE-WRLD-STRUCTURES" title="(defun update-wrld-structures (wrld state)
  (install-global-enabled-structure wrld state)
  (recompress-global-enabled-structure &#39;global-arithmetic-enabled-structure
                                       wrld)
  (when (not (eq *saved-user-stobj-alist* *user-stobj-alist*))
...">update-wrld-structures</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
            (retract-world1 name old-wrld))))))
  wrld)</pre>
  </div>

<div class="form-block other" id="form-133" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output retract-world1
  (name wrld)
  (let ((state *the-live-state*) (pair (get name 'acl2-world-pair))
      (processed <span class="number">0</span>)
      old-wrld
      world-key)
    (unwind-protect-disable-interrupts-during-cleanup (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pair) (setq pair
              (cons nil
                (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world)
                  *current-acl2-world-key*
                  (gensym))))
            (pushnew name *known-worlds*)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world) (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'current-acl2-world nil state)))
            (setf (get name 'acl2-world-pair) pair)))
        (setq old-wrld (car pair))
        (setq world-key (cdr pair))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world) (<a class="sym-link local-def" href="#def-check-acl2-world-invariant" data-sym="CHECK-ACL2-WORLD-INVARIANT" title="(defun check-acl2-world-invariant (wrld old-wrld)
  (cond
   ((not (eq old-wrld (w *the-live-state*))) (setq *bad-wrld* wrld)
    (interface-er &quot;Extend-world1 or retract-world1 has been asked to install ~
           a world at a moment when the current global value of ~
...">check-acl2-world-invariant</a> wrld old-wrld)))
        (do ((tl old-wrld (cdr tl)))
          ((equal tl wrld))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> tl) (setq *bad-wrld* wrld)
              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                'retract-world1
                <span class="string">"Retract-world1 was called upon to ``retract&#39;&#39; ~x0.  But the ~
                  world supplied to retract-world1, which is now the value of ~
                  the Lisp global variable *bad-wrld*, is not a retraction of ~
                  the currently installed ~x0.  The alist corresponding to ~
                  the current ~x0 may be obtained via ~x1.  Unfortunately, ~
                  this problem was not discovered until all of the properties ~
                  in ~x0 were removed.~@2"</span>
                name
                `(car (get ',NAME 'acl2-world-pair))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world) <span class="string">"  Your session is not recoverable.  You may report ~
                         this issue to the ACL2 implementors, as a workaround ~
                         might be possible."</span>)
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (without-interrupts (undo-trip name world-key (car tl))
                (incf processed)))))
        (setf (car pair) wrld))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car pair) wrld) (when (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world)
            (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'current-acl2-world wrld state)
            (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-find-non-hidden-package-entry" data-sym="FIND-NON-HIDDEN-PACKAGE-ENTRY">find-non-hidden-package-entry</a> (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)
                  (<a class="sym-link system" href="axioms.html#def-known-package-alist" data-sym="KNOWN-PACKAGE-ALIST">known-package-alist</a> state)))
              (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> <span class="string">"ACL2"</span> state))
            (<a class="sym-link local-def" href="#def-update-wrld-structures" data-sym="UPDATE-WRLD-STRUCTURES" title="(defun update-wrld-structures (wrld state)
  (install-global-enabled-structure wrld state)
  (recompress-global-enabled-structure &#39;global-arithmetic-enabled-structure
                                       wrld)
  (when (not (eq *saved-user-stobj-alist* *user-stobj-alist*))
...">update-wrld-structures</a> wrld state)))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world)
           (boundp '*bad-wrld*)
           *bad-wrld*))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> processed old-wrld)))
            (setf (car pair) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
            (when (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> name 'current-acl2-world)
              (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'current-acl2-world <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
              (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                <span class="string">"~%~
                    ; *Note*: Interrupt or error detected while retracting~%~
                    ;         the ACL2 logical world; now extending the~%~
                    ;         world (~s triples) with interrupts disabled.~%~
                    ;         This may take awhile.~&amp;~%"</span>
                processed)
              (finish-output))
            (extend-world1 name old-wrld))))))
  wrld)</pre>
  </div>

<div class="form-block other" id="form-134" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output virginp
  (name new-type)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp name)
    (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> new-type
        '(function macro constrained-function <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (fboundp name)
          (macro-function name)
          (special-form-or-op-p name)))
      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> new-type '(const stobj stobj-live-var <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (boundp name))
      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block other" id="form-135" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output chk-virgin-msg2
  (name new-type wrld state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((virginp name new-type) nil)
    ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state) (setf (get name '*predefined*) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      nil)
    ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> name 'redefined nil wrld) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((reason (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp name)) <span class="string">"it is not a symbol"</span>)
             ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> new-type
                '(function macro constrained-function <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((special-form-or-op-p name) <span class="string">"it is a special form"</span>)
                 ((macro-function name) <span class="string">"it has a macro definition"</span>)
                 ((fboundp name) <span class="string">"it has a function definition"</span>)
                 (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"there is an inconsistency in the definition of ~
                            virginp and chk-virgin2"</span>)))
             ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> new-type '(const stobj stobj-live-var <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((boundp name) <span class="string">"it has a top level binding"</span>)
                 (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"there is an inconsistency in the definition of ~
                            virginp and chk-virgin2"</span>)))
             (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"there is an inconsistency in the definition of ~
                          virginp and chk-virgin2"</span>))) (suggestion (let ((str <span class="string">"  If earlier you accidentally made this ~
                            definition or assignment outside the ACL2 ~
                            loop, then you might consider exiting the ~
                            ACL2 loop and executing appropriate ~
                            Common Lisp to erase those mistakes.  ~
                            This is a potentially perilous act unless ~
                            you are sure these names were introduced ~
                            by you and are not involved in any ~
                            logical code. ~#3~[~/To erase a function ~
                            or macro definition use (fmakunbound! ~
                            &#39;~x0).  ~]~#4~[~/To erase a variable ~
                            setting use (makunbound &#39;~x0). ~]"</span>))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp name)) <span class="string">""</span>)
                ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> new-type
                   '(function macro constrained-function <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((special-form-or-op-p name) <span class="string">""</span>) (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> str)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> str)))))
        (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"It is illegal to define ~x0 because ~@1 in raw Common Lisp.~@2"</span>
          name
          reason
          suggestion
          (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> new-type
              '(function macro constrained-function <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
            <span class="number">1</span>
            <span class="number">0</span>)
          (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> new-type '(const stobj stobj-live-var <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
            <span class="number">1</span>
            <span class="number">0</span>))))))</pre>
  </div>

<div class="form-block other" id="form-136" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output chk-package-reincarnation-import-restrictions2
  (name proposed-imports)
  (let ((pkg (find-package name)) (temp (<a class="sym-link system" href="axioms.html#def-find-package-entry" data-sym="FIND-PACKAGE-ENTRY">find-package-entry</a> name *ever-known-package-alist*)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pkg (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (temp (check-proposed-imports name temp proposed-imports)
            nil)
          ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> name *defpkg-virgins*) nil)
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (interface-er <span class="string">"It is illegal to defpkg ~x0 because a package of that name already ~
          exists in this lisp."</span>
              name))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))</pre>
  </div>

<div class="form-block other" id="form-137" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output enter-boot-strap-mode
  (<a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a> operating-system)
  (acl2-unwind *ld-level* nil)
  (push nil *acl2-unwind-protect-stack*)
  (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'retraction nil *the-live-state*)
  (do-symbols (sym (find-package <span class="string">"ACL2_GLOBAL_ACL2"</span>))
    (makunbound sym))
  (do-symbols (sym (find-package (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
          *global-package-prefix*
          <a class="sym-link system" href="axioms.html#def-_2Amain-lisp-package-name_2A" data-sym="*MAIN-LISP-PACKAGE-NAME*">*main-lisp-package-name*</a>)))
    (makunbound sym))
  (do-symbols (sym (find-package <span class="string">"ACL2_GLOBAL_KEYWORD"</span>))
    (makunbound sym))
  (initialize-state-globals)
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'global-enabled-structure
    (initial-global-enabled-structure <span class="string">"ENABLED-ARRAY-"</span>)
    *the-live-state*)
  (f-put-ld-specials <a class="sym-link system" href="axioms.html#def-_2Ainitial-ld-special-bindings_2A" data-sym="*INITIAL-LD-SPECIAL-BINDINGS*">*initial-ld-special-bindings*</a>
    nil
    *the-live-state*)
  (let ((<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:system</span> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((dir (unix-full-pathname (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((symbolp <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>) (symbol-name <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>))
                      ((stringp <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>) <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                          '<a class="sym-link local-def" href="#def-initialize-acl2" data-sym="INITIALIZE-ACL2" title="(defun initialize-acl2
       (
        &amp;optional (pass-2-ld-skip-proofsp &#39;include-book)
        &amp;aux (acl2-pass-2-files *acl2-pass-2-files*) system-books-dir
        (*do-proclaims* nil))
...">initialize-acl2</a>
                          <span class="string">"Unable to complete initialization, ~
                                        because the supplied system books ~
                                        directory, ~x0, is not a string."</span>
                          <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>))))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> (bad-lisp-stringp dir)))
               (when <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>
                 (interface-er <span class="string">"The value of the system-books-dir argument of ~
                        ENTER-BOOT-STRAP-MODE, which is ~x0, is not a legal ~
                        ACL2 string.~%~@1"</span>
                   dir
                   <a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a>))
               (canonical-dirname! (maybe-add-separator dir)
                 'enter-boot-strap-mode
                 *the-live-state*)))
           (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
               (canonical-dirname! (our-pwd)
                 'enter-boot-strap-mode
                 *the-live-state*)
               <span class="string">"books/"</span>)))
         nil)))
    (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension
      (primordial-world operating-system <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>)
      *the-live-state*))
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'inhibit-output-lst
    '(proof-tree)
    *the-live-state*)
  (acl2-unwind *ld-level* nil))</pre>
  </div>

<div class="form-block other" id="form-138" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output move-current-acl2-world-key-to-front
  (wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> wrld) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (symbol-plist (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld)))
       *current-acl2-world-key*) (move-current-acl2-world-key-to-front (cdr wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((temp (get (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld) *current-acl2-world-key*)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (temp (setf (symbol-plist (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld))
              (cons *current-acl2-world-key*
                (cons temp
                  (remove-current-acl2-world-key (symbol-plist (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> wrld)))))))))
      (move-current-acl2-world-key-to-front (cdr wrld)))))</pre>
  </div>

<div class="form-block other" id="form-139" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (defun-overrides mfc-ts-fn
    (term mfc state forcep)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ans ttree)
      (mfc-ts-raw term mfc state forcep)
      (declare (ignore ttree))
      ans))
  (defun-overrides mfc-ts-ttree
    (term mfc state forcep)
    (mfc-ts-raw term mfc state forcep))
  (defun-overrides mfc-rw-fn
    (term obj equiv-info mfc state forcep)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ans ttree)
      (mfc-rw-raw term
        nil
        obj
        equiv-info
        mfc
        'mfc-rw
        state
        forcep)
      (declare (ignore ttree))
      ans))
  (defun-overrides mfc-rw-ttree
    (term obj equiv-info mfc state forcep)
    (mfc-rw-raw term
      nil
      obj
      equiv-info
      mfc
      'mfc-rw
      state
      forcep))
  (defun-overrides mfc-rw+-fn
    (term alist obj equiv-info mfc state forcep)
    (mfc-rw-raw term
      alist
      obj
      equiv-info
      mfc
      'mfc-rw+
      state
      forcep))
  (defun-overrides mfc-rw+-ttree
    (term alist obj equiv-info mfc state forcep)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ans ttree)
      (mfc-rw-raw term
        alist
        obj
        equiv-info
        mfc
        'mfc-rw+
        state
        forcep)
      (declare (ignore ttree))
      ans))
  (defun-overrides mfc-relieve-hyp-fn
    (hyp alist rune target bkptr mfc state forcep)
    (mfc-relieve-hyp-raw hyp
      alist
      rune
      target
      bkptr
      mfc
      state
      forcep))
  (defun-overrides mfc-relieve-hyp-ttree
    (hyp alist rune target bkptr mfc state forcep)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ans ttree)
      (mfc-relieve-hyp-raw hyp
        alist
        rune
        target
        bkptr
        mfc
        state
        forcep)
      (declare (ignore ttree))
      ans))
  (defun-overrides mfc-ap-fn
    (term mfc state forcep)
    (mfc-ap-raw term mfc state forcep)))</pre>
  </div>

<div class="form-block other" id="form-140" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output exit-boot-strap-mode
  nil
  (push nil *acl2-unwind-protect-stack*)
  (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension
    (end-prehistoric-world (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
    *the-live-state*)
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'boot-strap-flg nil *the-live-state*)
  (acl2-unwind *ld-level* nil)
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'inhibit-output-lst nil *the-live-state*)
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'slow-array-action <span class="keyword">:warning</span> *the-live-state*)
  (<a class="sym-link system" href="history-management.html#def-stop-proof-tree-fn" data-sym="STOP-PROOF-TREE-FN">stop-proof-tree-fn</a> *the-live-state*)
  (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> nil *the-live-state*)
  (move-current-acl2-world-key-to-front (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
  (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (initialize-never-memoize-ht)
    (acl2h-init-memoizations))
  (setq *hard-error-is-error* nil)
  nil)</pre>
  </div>

<div class="form-block other" id="form-141" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output ld-alist-raw
  (<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> <a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> <a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a>)
  `((<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> . ,STANDARD-OI) (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> . ,*STANDARD-CO*)
    (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> . ,*STANDARD-CO*)
    (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> . <span class="string">"ACL2"</span>)
    (<a class="sym-link system" href="defuns.html#def-useless-runes" data-sym="USELESS-RUNES">useless-runes</a>)
    (<a class="sym-link system" href="axioms.html#def-ld-skip-proofsp" data-sym="LD-SKIP-PROOFSP">ld-skip-proofsp</a> . ,LD-SKIP-PROOFSP)
    (<a class="sym-link system" href="basis-b.html#def-ld-redefinition-action" data-sym="LD-REDEFINITION-ACTION">ld-redefinition-action</a>)
    (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> . ,(IF LD-SKIP-PROOFSP
     NIL
     T))
    (<a class="sym-link system" href="basis-b.html#def-ld-missing-input-ok" data-sym="LD-MISSING-INPUT-OK">ld-missing-input-ok</a>)
    (<a class="sym-link system" href="basis-b.html#def-ld-always-skip-top-level-locals" data-sym="LD-ALWAYS-SKIP-TOP-LEVEL-LOCALS">ld-always-skip-top-level-locals</a>)
    (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-filter" data-sym="LD-PRE-EVAL-FILTER">ld-pre-eval-filter</a> . <span class="keyword">:all</span>)
    (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> . ,(IF LD-SKIP-PROOFSP
     NIL
     T))
    (<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> . <span class="keyword">:command-conventions</span>)
    (<a class="sym-link system" href="basis-a.html#def-ld-evisc-tuple" data-sym="LD-EVISC-TUPLE">ld-evisc-tuple</a> . ,(ABBREV-EVISC-TUPLE *THE-LIVE-STATE*))
    (<a class="sym-link system" href="basis-b.html#def-ld-error-triples" data-sym="LD-ERROR-TRIPLES">ld-error-triples</a> . <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> . ,LD-ERROR-ACTION)
    (<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> . <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> . <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    (ld-user-stobjs-modified-warning)))</pre>
  </div>

<div class="form-block function" id="def-enter-boot-strap-pass-2" data-defines="ENTER-BOOT-STRAP-PASS-2" data-references="LOGIC,LD-ALIST-RAW,LD-FN,MEMOIZE-INIT,*LD-LEVEL*,ACL2-UNWIND,*THE-LIVE-STATE*,W,T,BOOT-STRAP-PASS-2,GLOBAL-SET,EXTENSION,QUOTE,SET-W,*ACL2-UNWIND-PROTECT-STACK*,PUSH,DEFUN" data-used-by="INITIALIZE-ACL2" data-part-name="ENTER-BOOT-STRAP-PASS-2" data-part-body="*ACL2-UNWIND-PROTECT-STACK*,PUSH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ENTER-BOOT-STRAP-PASS-2">enter-boot-strap-pass-2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-enter-boot-strap-pass-2" data-sym="ENTER-BOOT-STRAP-PASS-2" title="(defun enter-boot-strap-pass-2 ()
  (push nil *acl2-unwind-protect-stack*)
  (set-w &#39;extension (global-set &#39;boot-strap-pass-2 t (w *the-live-state*))
         *the-live-state*)
  (acl2-unwind *ld-level* nil)
...">enter-boot-strap-pass-2</a>
  nil
  (push nil *acl2-unwind-protect-stack*)
  (<a class="sym-link system" href="history-management.html#def-set-w" data-sym="SET-W">set-w</a> 'extension
    (<a class="sym-link system" href="basis-b.html#def-global-set" data-sym="GLOBAL-SET">global-set</a> 'boot-strap-pass-2 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
    *the-live-state*)
  (acl2-unwind *ld-level* nil)
  (memoize-init)
  (ld-fn (ld-alist-raw '((<a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="keyword">:error</span>)
    *the-live-state*
    nil))</pre>
  </div>

<div class="form-block constant" id="def-_2Aacl2-pass-2-files_2A" data-defines="*ACL2-PASS-2-FILES*" data-references="QUOTE,DEFCONST" data-used-by="INITIALIZE-ACL2" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*ACL2-PASS-2-FILES*">*acl2-pass-2-files*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aacl2-pass-2-files_2A" data-sym="*ACL2-PASS-2-FILES*" title="(defconst *acl2-pass-2-files*
          &#39;(&quot;axioms&quot; &quot;memoize&quot; &quot;hons&quot; &quot;serialize&quot; &quot;boot-strap-pass-2-a&quot;
            &quot;float-a&quot; &quot;float-b&quot; &quot;apply-prim&quot; &quot;apply-constraints&quot; &quot;apply&quot;
            &quot;boot-strap-pass-2-b&quot;))">*acl2-pass-2-files*</a>
  '(<span class="string">"axioms"</span> <span class="string">"memoize"</span>
    <span class="string">"hons"</span>
    <span class="string">"serialize"</span>
    <span class="string">"boot-strap-pass-2-a"</span>
    <span class="string">"float-a"</span>
    <span class="string">"float-b"</span>
    <span class="string">"apply-prim"</span>
    <span class="string">"apply-constraints"</span>
    <span class="string">"apply"</span>
    <span class="string">"boot-strap-pass-2-b"</span>))</pre>
  </div>

<div class="form-block other" id="form-144" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(assert (<a class="sym-link system" href="axioms.html#def-subsetp-equal" data-sym="SUBSETP-EQUAL">subsetp-equal</a> <a class="sym-link local-def" href="#def-_2Aacl2-pass-2-files_2A" data-sym="*ACL2-PASS-2-FILES*" title="(defconst *acl2-pass-2-files*
          &#39;(&quot;axioms&quot; &quot;memoize&quot; &quot;hons&quot; &quot;serialize&quot; &quot;boot-strap-pass-2-a&quot;
            &quot;float-a&quot; &quot;float-b&quot; &quot;apply-prim&quot; &quot;apply-constraints&quot; &quot;apply&quot;
            &quot;boot-strap-pass-2-b&quot;))">*acl2-pass-2-files*</a> *acl2-files*))</pre>
  </div>

<div class="form-block function" id="def-our-update-ht" data-defines="OUR-UPDATE-HT" data-references="T,CDR,LIST*,CAR,EQ,CONSP,AND,COND,SETF,LIST,IF,GETHASH,OLD,LET,WHEN-PASS-2-P,HT,VAL,KEY,DEFUN" data-used-by="NOTE-FNS-IN-FORM" data-part-name="OUR-UPDATE-HT" data-part-args="WHEN-PASS-2-P,HT,VAL,KEY" data-part-body="T,CDR,LIST*,CAR,EQ,CONSP,AND,COND,SETF,LIST,WHEN-PASS-2-P,IF,VAL,HT,KEY,GETHASH,OLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OUR-UPDATE-HT">our-update-ht</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-our-update-ht" data-sym="OUR-UPDATE-HT" title="(defun our-update-ht (key val ht when-pass-2-p)
  (let ((old (gethash key ht))
        (val
         (if when-pass-2-p
             (list :when-pass-2-p val)
...">our-update-ht</a>
  (key val ht when-pass-2-p)
  (let ((old (gethash key ht)) (val (if when-pass-2-p
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:when-pass-2-p</span> val)
          val)))
    (setf (gethash key ht)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp old) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car old) <span class="keyword">:multiple</span>)) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car old) val (cdr old)))
        (old (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:multiple</span> val old))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> val)))))</pre>
  </div>

<div class="form-block function" id="def-note-fns-in-form" data-defines="NOTE-FNS-IN-FORM" data-references="SET-TABLE-GUARD-DOC,SET-TABLE-GUARD,SET-RAW-MODE,SET-IRRELEVANT-FORMALS-OK,SET-IGNORE-OK,SET-COMPILE-FNS,SET-BRR-DATA-ATTACHMENTS,MAKE-APPLY$-PRIM-BODY-FN-RAW,MAKE-EVENT,VERIFY-TERMINATION-BOOT-STRAP,VERIFY-GUARDS,VALUE,TABLE,SYSTEM-VERIFY-GUARDS,SYSTEM-EVENTS,SETQ,SET-WATERFALL-PARALLELISM,SET-TAU-AUTO-MODE,SET-INVISIBLE-FNS-TABLE,SET-GUARD-MSG,SET-DUPLICATE-KEYS-ACTION,RESET-FUTURE-PARALLELISM-VARIABLES,PUSH,PROGRAM,PPROGN,MEMOIZE,MAKE-WATERFALL-PRINTING-CONSTANTS,MAKE-WATERFALL-PARALLELISM-CONSTANTS,LOGIC,INITIALIZE-STATE-GLOBALS,IN-THEORY,IN-PACKAGE,F-PUT-GLOBAL,EVAL-WHEN,EVAL,ERROR,DEFVAR,DEFV,DEFUN-DF-*1*-FROM-FUNCTION-SIGS,DEFUN-DF-*1*-BINARY,DEFUN-DF-*1*-UNARY,DEFUN-*1*,DEFTYPE,DEFTHMD,DEFTHM,DEFTHEORY,DEFSTRUCT,DEFPKG,DEFPARAMETER,DEFLOCK,DEFLABEL,DEFINE-TRUSTED-CLAUSE-PROCESSOR,DEFINE-ATOMICALLY-MODIFIABLE-COUNTER,DEFINE-@PAR-MACROS,DEFG,DEFEQUIV,DEFCONSTANT,DEFCONST,DEFAXIOM,DEFATTACH,DEFWARRANT,DEFBADGE,DEF-BASIC-TYPE-SETS,DECLAIM,ASSERT,ADD-MACRO-FN,ADD-MACRO-ALIAS,ADD-CUSTOM-KEYWORD-HINT,COLLECT,DF-NON-CONSTRAINED-FUNCTIONS-EVENTS,EV,DF-NON-CONSTRAINED-FUNCTIONS-INTRO,*DF-FUNCTION-SIGS-EXEC*,STRIP-CARS,DF-CONSTRAINED-FUNCTIONS-INTRO,CADDR,STATE-GLOBAL-LET*,RECORD-CHANGER-FUNCTION-NAME,DEFREC,LOCAL,SKIP-PROOFS,CDDDR,PARTIAL-ENCAPSULATE,CDDR,WHEN,ENCAPSULATE,T,WHEN-PASS-2,DO,CDR,IN,X,FOR,LOOP,PROGN,MUTUAL-RECURSION@PAR,MUTUAL-RECURSION,NTH,DEFINE-PC-META-OR-MACRO-FN,QUOTE,EQ,IF,MAKE-OFFICIAL-PC-COMMAND,NAME,LET,DEFINE-PC-PRIMITIVE,DEFINE-PC-META,DEFINE-PC-MACRO,DEFINE-PC-HELP,DEFINE-PC-BIND*,DEFINE-PC-ATOMIC-MACRO,DEFUN-FOR-STATE-NAME,DEFUN-FOR-STATE,SAVE-DEF,CADR,OUR-UPDATE-HT,DEFUND-NOTINLINE,DEFUN-NOTINLINE,DEFUND-INLINE,DEFUN-INLINE,DEFDEPRECATE,DEFUN-SK,DEFUN-WITH-GUARD-CHECK,DEFUN-OVERRIDES,DEFMACRO-LAST,DEFUN@PAR,DEFABBREV,DEFMACRO-UNTOUCHABLE,DEFMACRO,DEFSTUB,DEFUN-DF-BINARY,DEFUN-DF-UNARY,DEFUN-ONE-OUTPUT,DEFUN-NX,DEFPROXY,DEFN,DEFUND,CAR,CASE,CONSP,AND,WHEN-PASS-2-P,HT,FORM,DEFUN" data-used-by="NOTE-FNS-IN-FILE" data-part-name="NOTE-FNS-IN-FORM" data-part-args="WHEN-PASS-2-P,HT,FORM" data-part-body="SET-TABLE-GUARD-DOC,SET-TABLE-GUARD,SET-RAW-MODE,SET-IRRELEVANT-FORMALS-OK,SET-IGNORE-OK,SET-COMPILE-FNS,SET-BRR-DATA-ATTACHMENTS,MAKE-APPLY$-PRIM-BODY-FN-RAW,MAKE-EVENT,VERIFY-TERMINATION-BOOT-STRAP,VERIFY-GUARDS,VALUE,TABLE,SYSTEM-VERIFY-GUARDS,SYSTEM-EVENTS,SETQ,SET-WATERFALL-PARALLELISM,SET-TAU-AUTO-MODE,SET-INVISIBLE-FNS-TABLE,SET-GUARD-MSG,SET-DUPLICATE-KEYS-ACTION,RESET-FUTURE-PARALLELISM-VARIABLES,PUSH,PROGRAM,PPROGN,MEMOIZE,MAKE-WATERFALL-PRINTING-CONSTANTS,MAKE-WATERFALL-PARALLELISM-CONSTANTS,LOGIC,INITIALIZE-STATE-GLOBALS,IN-THEORY,IN-PACKAGE,F-PUT-GLOBAL,EVAL-WHEN,EVAL,ERROR,DEFVAR,DEFV,DEFUN-DF-*1*-FROM-FUNCTION-SIGS,DEFUN-DF-*1*-BINARY,DEFUN-DF-*1*-UNARY,DEFUN-*1*,DEFTYPE,DEFTHMD,DEFTHM,DEFTHEORY,DEFSTRUCT,DEFPKG,DEFPARAMETER,DEFLOCK,DEFLABEL,DEFINE-TRUSTED-CLAUSE-PROCESSOR,DEFINE-ATOMICALLY-MODIFIABLE-COUNTER,DEFINE-@PAR-MACROS,DEFG,DEFEQUIV,DEFCONSTANT,DEFCONST,DEFAXIOM,DEFATTACH,DEFWARRANT,DEFBADGE,DEF-BASIC-TYPE-SETS,DECLAIM,ASSERT,ADD-MACRO-FN,ADD-MACRO-ALIAS,ADD-CUSTOM-KEYWORD-HINT,COLLECT,DF-NON-CONSTRAINED-FUNCTIONS-EVENTS,EV,DF-NON-CONSTRAINED-FUNCTIONS-INTRO,*DF-FUNCTION-SIGS-EXEC*,STRIP-CARS,DF-CONSTRAINED-FUNCTIONS-INTRO,CADDR,STATE-GLOBAL-LET*,RECORD-CHANGER-FUNCTION-NAME,DEFREC,LOCAL,SKIP-PROOFS,CDDDR,PARTIAL-ENCAPSULATE,CDDR,WHEN,ENCAPSULATE,T,WHEN-PASS-2,DO,CDR,IN,X,FOR,LOOP,PROGN,MUTUAL-RECURSION@PAR,MUTUAL-RECURSION,NTH,DEFINE-PC-META-OR-MACRO-FN,QUOTE,EQ,IF,MAKE-OFFICIAL-PC-COMMAND,NAME,LET,DEFINE-PC-PRIMITIVE,DEFINE-PC-META,DEFINE-PC-MACRO,DEFINE-PC-HELP,DEFINE-PC-BIND*,DEFINE-PC-ATOMIC-MACRO,DEFUN-FOR-STATE-NAME,DEFUN-FOR-STATE,NOTE-FNS-IN-FORM,SAVE-DEF,WHEN-PASS-2-P,HT,CADR,OUR-UPDATE-HT,DEFUND-NOTINLINE,DEFUN-NOTINLINE,DEFUND-INLINE,DEFUN-INLINE,DEFDEPRECATE,DEFUN-SK,DEFUN-WITH-GUARD-CHECK,DEFUN-OVERRIDES,DEFMACRO-LAST,DEFUN@PAR,DEFABBREV,DEFMACRO-UNTOUCHABLE,DEFMACRO,DEFSTUB,DEFUN-DF-BINARY,DEFUN-DF-UNARY,DEFUN-ONE-OUTPUT,DEFUN-NX,DEFPROXY,DEFN,DEFUND,DEFUN,CAR,CASE,FORM,CONSP,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NOTE-FNS-IN-FORM">note-fns-in-form</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-note-fns-in-form" data-sym="NOTE-FNS-IN-FORM" title="(defun note-fns-in-form (form ht when-pass-2-p)
  (and (consp form)
       (case (car form)
         ((defun defund defn defproxy defun-nx defun-one-output defun-df-unary
           defun-df-binary defstub defmacro defmacro-untouchable defabbrev
...">note-fns-in-form</a>
  (form ht when-pass-2-p)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp form)
    (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (car form)
      ((<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> defund
         defn
         <a class="sym-link system" href="basis-b.html#def-defproxy" data-sym="DEFPROXY">defproxy</a>
         <a class="sym-link system" href="axioms.html#def-defun-nx" data-sym="DEFUN-NX">defun-nx</a>
         defun-one-output
         defun-df-unary
         defun-df-binary
         <a class="sym-link system" href="basis-b.html#def-defstub" data-sym="DEFSTUB">defstub</a>
         <a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a>
         <a class="sym-link system" href="axioms.html#def-defmacro-untouchable" data-sym="DEFMACRO-UNTOUCHABLE">defmacro-untouchable</a>
         <a class="sym-link system" href="basis-a.html#def-defabbrev" data-sym="DEFABBREV">defabbrev</a>
         <a class="sym-link system" href="axioms.html#def-defun_40par" data-sym="DEFUN@PAR">defun@par</a>
         defmacro-last
         defun-overrides
         <a class="sym-link system" href="axioms.html#def-defun-with-guard-check" data-sym="DEFUN-WITH-GUARD-CHECK">defun-with-guard-check</a>
         defun-sk
         defdeprecate
         <a class="sym-link system" href="axioms.html#def-defun-inline" data-sym="DEFUN-INLINE">defun-inline</a>
         <a class="sym-link system" href="axioms.html#def-defund-inline" data-sym="DEFUND-INLINE">defund-inline</a>
         <a class="sym-link system" href="axioms.html#def-defun-notinline" data-sym="DEFUN-NOTINLINE">defun-notinline</a>
         <a class="sym-link system" href="axioms.html#def-defund-notinline" data-sym="DEFUND-NOTINLINE">defund-notinline</a>) (<a class="sym-link local-def" href="#def-our-update-ht" data-sym="OUR-UPDATE-HT" title="(defun our-update-ht (key val ht when-pass-2-p)
  (let ((old (gethash key ht))
        (val
         (if when-pass-2-p
             (list :when-pass-2-p val)
...">our-update-ht</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) form ht when-pass-2-p))
      (save-def (<a class="sym-link local-def" href="#def-note-fns-in-form" data-sym="NOTE-FNS-IN-FORM" title="(defun note-fns-in-form (form ht when-pass-2-p)
  (and (consp form)
       (case (car form)
         ((defun defund defn defproxy defun-nx defun-one-output defun-df-unary
           defun-df-binary defstub defmacro defmacro-untouchable defabbrev
...">note-fns-in-form</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) ht when-pass-2-p))
      (<a class="sym-link system" href="basis-b.html#def-defun-for-state" data-sym="DEFUN-FOR-STATE">defun-for-state</a> (<a class="sym-link local-def" href="#def-our-update-ht" data-sym="OUR-UPDATE-HT" title="(defun our-update-ht (key val ht when-pass-2-p)
  (let ((old (gethash key ht))
        (val
         (if when-pass-2-p
             (list :when-pass-2-p val)
...">our-update-ht</a> (<a class="sym-link system" href="basis-b.html#def-defun-for-state-name" data-sym="DEFUN-FOR-STATE-NAME">defun-for-state-name</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form))
          form
          ht
          when-pass-2-p))
      ((define-pc-atomic-macro define-pc-bind*
         define-pc-help
         define-pc-macro
         define-pc-meta
         define-pc-primitive) (let ((name (make-official-pc-command (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) 'define-pc-meta-or-macro-fn)
                 (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> form)
                 (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> form)))))
          (<a class="sym-link local-def" href="#def-our-update-ht" data-sym="OUR-UPDATE-HT" title="(defun our-update-ht (key val ht when-pass-2-p)
  (let ((old (gethash key ht))
        (val
         (if when-pass-2-p
             (list :when-pass-2-p val)
...">our-update-ht</a> name form ht when-pass-2-p)))
      ((<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> <a class="sym-link system" href="axioms.html#def-mutual-recursion_40par" data-sym="MUTUAL-RECURSION@PAR">mutual-recursion@par</a> <a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a>) (loop for
          x
          in
          (cdr form)
          do
          (<a class="sym-link local-def" href="#def-note-fns-in-form" data-sym="NOTE-FNS-IN-FORM" title="(defun note-fns-in-form (form ht when-pass-2-p)
  (and (consp form)
       (case (car form)
         ((defun defund defn defproxy defun-nx defun-one-output defun-df-unary
           defun-df-binary defstub defmacro defmacro-untouchable defabbrev
...">note-fns-in-form</a> x ht when-pass-2-p)))
      ((when-pass-2) (loop for
          x
          in
          (cdr form)
          do
          (<a class="sym-link local-def" href="#def-note-fns-in-form" data-sym="NOTE-FNS-IN-FORM" title="(defun note-fns-in-form (form ht when-pass-2-p)
  (and (consp form)
       (case (car form)
         ((defun defund defn defproxy defun-nx defun-one-output defun-df-unary
           defun-df-binary defstub defmacro defmacro-untouchable defabbrev
...">note-fns-in-form</a> x ht <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
      ((<a class="sym-link system" href="axioms.html#def-encapsulate" data-sym="ENCAPSULATE">encapsulate</a> when) (loop for
          x
          in
          (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> form)
          do
          (<a class="sym-link local-def" href="#def-note-fns-in-form" data-sym="NOTE-FNS-IN-FORM" title="(defun note-fns-in-form (form ht when-pass-2-p)
  (and (consp form)
       (case (car form)
         ((defun defund defn defproxy defun-nx defun-one-output defun-df-unary
           defun-df-binary defstub defmacro defmacro-untouchable defabbrev
...">note-fns-in-form</a> x ht when-pass-2-p)))
      (<a class="sym-link system" href="axioms.html#def-partial-encapsulate" data-sym="PARTIAL-ENCAPSULATE">partial-encapsulate</a> (loop for
          x
          in
          (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> form)
          do
          (<a class="sym-link local-def" href="#def-note-fns-in-form" data-sym="NOTE-FNS-IN-FORM" title="(defun note-fns-in-form (form ht when-pass-2-p)
  (and (consp form)
       (case (car form)
         ((defun defund defn defproxy defun-nx defun-one-output defun-df-unary
           defun-df-binary defstub defmacro defmacro-untouchable defabbrev
...">note-fns-in-form</a> x ht when-pass-2-p)))
      ((<a class="sym-link system" href="axioms.html#def-skip-proofs" data-sym="SKIP-PROOFS">skip-proofs</a> <a class="sym-link system" href="axioms.html#def-local" data-sym="LOCAL">local</a>) (<a class="sym-link local-def" href="#def-note-fns-in-form" data-sym="NOTE-FNS-IN-FORM" title="(defun note-fns-in-form (form ht when-pass-2-p)
  (and (consp form)
       (case (car form)
         ((defun defund defn defproxy defun-nx defun-one-output defun-df-unary
           defun-df-binary defstub defmacro defmacro-untouchable defabbrev
...">note-fns-in-form</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form) ht when-pass-2-p))
      (<a class="sym-link system" href="basis-a.html#def-defrec" data-sym="DEFREC">defrec</a> (<a class="sym-link local-def" href="#def-our-update-ht" data-sym="OUR-UPDATE-HT" title="(defun our-update-ht (key val ht when-pass-2-p)
  (let ((old (gethash key ht))
        (val
         (if when-pass-2-p
             (list :when-pass-2-p val)
...">our-update-ht</a> (<a class="sym-link system" href="basis-a.html#def-record-changer-function-name" data-sym="RECORD-CHANGER-FUNCTION-NAME">record-changer-function-name</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> form))
          form
          ht
          when-pass-2-p))
      (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> (<a class="sym-link local-def" href="#def-note-fns-in-form" data-sym="NOTE-FNS-IN-FORM" title="(defun note-fns-in-form (form ht when-pass-2-p)
  (and (consp form)
       (case (car form)
         ((defun defund defn defproxy defun-nx defun-one-output defun-df-unary
           defun-df-binary defstub defmacro defmacro-untouchable defabbrev
...">note-fns-in-form</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> form) ht when-pass-2-p))
      (df-constrained-functions-intro (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> *df-function-sigs-exec*))
      (df-non-constrained-functions-intro (loop for
          ev
          in
          (df-non-constrained-functions-events)
          when
          (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car ev) '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>)
          collect
          (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> ev)))
      ((<a class="sym-link system" href="axioms.html#def-add-custom-keyword-hint" data-sym="ADD-CUSTOM-KEYWORD-HINT">add-custom-keyword-hint</a> <a class="sym-link system" href="axioms.html#def-add-macro-alias" data-sym="ADD-MACRO-ALIAS">add-macro-alias</a>
         <a class="sym-link system" href="axioms.html#def-add-macro-fn" data-sym="ADD-MACRO-FN">add-macro-fn</a>
         assert
         declaim
         <a class="sym-link system" href="basis-b.html#def-def-basic-type-sets" data-sym="DEF-BASIC-TYPE-SETS">def-basic-type-sets</a>
         defbadge
         defwarrant
         <a class="sym-link system" href="axioms.html#def-defattach" data-sym="DEFATTACH">defattach</a>
         <a class="sym-link system" href="axioms.html#def-defaxiom" data-sym="DEFAXIOM">defaxiom</a>
         <a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a>
         defconstant
         <a class="sym-link system" href="defthm.html#def-defequiv" data-sym="DEFEQUIV">defequiv</a>
         defg
         <a class="sym-link system" href="axioms.html#def-define-_40par-macros" data-sym="DEFINE-@PAR-MACROS">define-@par-macros</a>
         define-atomically-modifiable-counter
         <a class="sym-link system" href="defthm.html#def-define-trusted-clause-processor" data-sym="DEFINE-TRUSTED-CLAUSE-PROCESSOR">define-trusted-clause-processor</a>
         <a class="sym-link system" href="axioms.html#def-deflabel" data-sym="DEFLABEL">deflabel</a>
         <a class="sym-link system" href="axioms.html#def-deflock" data-sym="DEFLOCK">deflock</a>
         defparameter
         <a class="sym-link system" href="axioms.html#def-defpkg" data-sym="DEFPKG">defpkg</a>
         defstruct
         <a class="sym-link system" href="axioms.html#def-deftheory" data-sym="DEFTHEORY">deftheory</a>
         <a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a>
         <a class="sym-link system" href="axioms.html#def-defthmd" data-sym="DEFTHMD">defthmd</a>
         deftype
         defun-*1*
         defun-df-*1*-unary
         defun-df-*1*-binary
         defun-df-*1*-from-function-sigs
         defv
         defvar
         error
         eval
         eval-when
         <a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a>
         <a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a>
         <a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a>
         initialize-state-globals
         let
         <a class="sym-link system" href="axioms.html#def-logic" data-sym="LOGIC">logic</a>
         make-waterfall-parallelism-constants
         make-waterfall-printing-constants
         memoize
         <a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a>
         <a class="sym-link system" href="axioms.html#def-program" data-sym="PROGRAM">program</a>
         push
         reset-future-parallelism-variables
         set-duplicate-keys-action
         set-guard-msg
         <a class="sym-link system" href="axioms.html#def-set-invisible-fns-table" data-sym="SET-INVISIBLE-FNS-TABLE">set-invisible-fns-table</a>
         <a class="sym-link system" href="axioms.html#def-set-tau-auto-mode" data-sym="SET-TAU-AUTO-MODE">set-tau-auto-mode</a>
         set-waterfall-parallelism
         setq
         system-events
         system-verify-guards
         <a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a>
         <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a>
         <a class="sym-link system" href="axioms.html#def-verify-guards" data-sym="VERIFY-GUARDS">verify-guards</a>
         <a class="sym-link system" href="axioms.html#def-verify-termination-boot-strap" data-sym="VERIFY-TERMINATION-BOOT-STRAP">verify-termination-boot-strap</a>
         <a class="sym-link system" href="axioms.html#def-make-event" data-sym="MAKE-EVENT">make-event</a>
         make-apply$-prim-body-fn-raw
         <a class="sym-link system" href="rewrite.html#def-set-brr-data-attachments" data-sym="SET-BRR-DATA-ATTACHMENTS">set-brr-data-attachments</a>
         <a class="sym-link system" href="axioms.html#def-set-compile-fns" data-sym="SET-COMPILE-FNS">set-compile-fns</a>
         <a class="sym-link system" href="axioms.html#def-set-ignore-ok" data-sym="SET-IGNORE-OK">set-ignore-ok</a>
         <a class="sym-link system" href="axioms.html#def-set-irrelevant-formals-ok" data-sym="SET-IRRELEVANT-FORMALS-OK">set-irrelevant-formals-ok</a>
         set-raw-mode
         <a class="sym-link system" href="axioms.html#def-set-table-guard" data-sym="SET-TABLE-GUARD">set-table-guard</a>
         set-table-guard-doc) nil)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (error <span class="string">"Unexpected type of form, ~s.  See note-fns-in-form."</span>
          (car form))))))</pre>
  </div>

<div class="form-block function" id="def-note-fns-in-file" data-defines="NOTE-FNS-IN-FILE" data-references="NOTE-FNS-IN-FORM,DO,READ,SETQ,EQ,NOT,WHILE,LOOP,X,CONS,AVRC,LET,STR,WITH-OPEN-FILE,HT,FILENAME,DEFUN" data-used-by="NOTE-FNS-IN-FILES" data-part-name="NOTE-FNS-IN-FILE" data-part-args="HT,FILENAME" data-part-body="HT,NOTE-FNS-IN-FORM,DO,READ,SETQ,EQ,NOT,WHILE,LOOP,X,CONS,AVRC,LET,FILENAME,STR,WITH-OPEN-FILE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NOTE-FNS-IN-FILE">note-fns-in-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-note-fns-in-file" data-sym="NOTE-FNS-IN-FILE" title="(defun note-fns-in-file (filename ht)
  (with-open-file (str filename :direction :input)
    (let ((avrc (cons nil nil)) x)
      (loop while (not (eq (setq x (read str nil avrc)) avrc))
            do (note-fns-in-form x ht nil)))))">note-fns-in-file</a>
  (filename ht)
  (with-open-file (str filename <span class="keyword">:direction</span> <span class="keyword">:input</span>)
    (let ((avrc (cons nil nil)) x)
      (loop while
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (setq x (read str nil avrc)) avrc))
        do
        (<a class="sym-link local-def" href="#def-note-fns-in-form" data-sym="NOTE-FNS-IN-FORM" title="(defun note-fns-in-form (form ht when-pass-2-p)
  (and (consp form)
       (case (car form)
         ((defun defund defn defproxy defun-nx defun-one-output defun-df-unary
           defun-df-binary defstub defmacro defmacro-untouchable defabbrev
...">note-fns-in-form</a> x ht nil)))))</pre>
  </div>

<div class="form-block function" id="def-note-fns-in-files" data-defines="NOTE-FNS-IN-FILES" data-references="NOTE-FNS-IN-FILE,DO,IN,FILENAME,FOR,LOOP,REMOVE,CONS,IF,*FEATURES*,LET,LOOP-ONLY-P,HT,FILENAMES,DEFUN" data-used-by="FNS-DIFFERENT-WRT-ACL2-LOOP-ONLY" data-part-name="NOTE-FNS-IN-FILES" data-part-args="LOOP-ONLY-P,HT,FILENAMES" data-part-body="HT,NOTE-FNS-IN-FILE,DO,FILENAMES,IN,FILENAME,FOR,LOOP,REMOVE,CONS,LOOP-ONLY-P,IF,*FEATURES*,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NOTE-FNS-IN-FILES">note-fns-in-files</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-note-fns-in-files" data-sym="NOTE-FNS-IN-FILES" title="(defun note-fns-in-files (filenames ht loop-only-p)
  (let ((*features*
         (if loop-only-p
             (cons :acl2-loop-only *features*)
             (remove :acl2-loop-only *features*))))
...">note-fns-in-files</a>
  (filenames ht loop-only-p)
  (let ((*features* (if loop-only-p
         (cons <span class="keyword">:acl2-loop-only</span> *features*)
         (<a class="sym-link system" href="axioms.html#def-remove" data-sym="REMOVE">remove</a> <span class="keyword">:acl2-loop-only</span> *features*))))
    (loop for
      filename
      in
      filenames
      do
      (<a class="sym-link local-def" href="#def-note-fns-in-file" data-sym="NOTE-FNS-IN-FILE" title="(defun note-fns-in-file (filename ht)
  (with-open-file (str filename :direction :input)
    (let ((avrc (cons nil nil)) x)
      (loop while (not (eq (setq x (read str nil avrc)) avrc))
            do (note-fns-in-form x ht nil)))))">note-fns-in-file</a> filename ht))))</pre>
  </div>

<div class="form-block function" id="def-raw-source-name-p" data-defines="RAW-SOURCE-NAME-P" data-references="-,SUBSEQ,EQUAL,<=,AND,LENGTH,LEN,LET,FILENAME-WITHOUT-EXTENSION,DEFUN" data-used-by="INITIALIZE-ACL2,FNS-DIFFERENT-WRT-ACL2-LOOP-ONLY" data-part-name="RAW-SOURCE-NAME-P" data-part-args="FILENAME-WITHOUT-EXTENSION" data-part-body="-,SUBSEQ,EQUAL,<=,AND,FILENAME-WITHOUT-EXTENSION,LENGTH,LEN,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RAW-SOURCE-NAME-P">raw-source-name-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-raw-source-name-p" data-sym="RAW-SOURCE-NAME-P" title="(defun raw-source-name-p (filename-without-extension)
  (let ((len (length filename-without-extension)))
    (and (&lt;= 4 len)
         (equal (subseq filename-without-extension (- len 4) len) &quot;-raw&quot;))))">raw-source-name-p</a>
  (filename-without-extension)
  (let ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> filename-without-extension)))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">4</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
      (equal (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> filename-without-extension (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> <span class="number">4</span>) <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
        <span class="string">"-raw"</span>))))</pre>
  </div>

<div class="form-block other" id="form-150" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *check-built-in-constants-debug* nil)</pre>
  </div>

<div class="form-block function" id="def-fns-different-wrt-acl2-loop-only" data-defines="FNS-DIFFERENT-WRT-ACL2-LOOP-ONLY" data-references="MV,C,*PRIMITIVE-FORMALS-AND-GUARDS*,ASSOC,SYMBOL-CLASS,MACRO-BODY,GETPROPC,PUSH,ALWAYS,FORM,COND,LIST,*CHECK-BUILT-IN-CONSTANTS-DEBUG*,EQUALP,OR,GETHASH,RAW-VAL,SYMBOLP,ASSERT,PROGN,LOGIC-VAL,KEY,LAMBDA,MAPHASH,T,NOTE-FNS-IN-FILES,*THE-LIVE-STATE*,W,WRLD,LOGIC-MODE-RESULT,PROGRAM-MODE-RESULT,MACRO-RESULT,WHEN-PASS-2-RESULT,HT-LOGIC,MAKE-HASH-TABLE,HT-RAW,RAW-FILENAMES,STRING,QUOTE,CONCATENATE,COLLECT,RAW-SOURCE-NAME-P,NOT,WHEN,IN,X,FOR,LOOP,LOGIC-FILENAMES,LET,CDR,ASSOC-EQ,CAR,EQ,IF,CONSP,AND,VAL,WHEN-PASS-2-P,FLET,ACL2-FILES,DEFUN" data-used-by="CHECK-BUILT-IN-CONSTANTS" data-part-name="FNS-DIFFERENT-WRT-ACL2-LOOP-ONLY" data-part-args="ACL2-FILES" data-part-body="MV,C,*PRIMITIVE-FORMALS-AND-GUARDS*,ASSOC,SYMBOL-CLASS,MACRO-BODY,GETPROPC,PUSH,ALWAYS,FORM,COND,LIST,*CHECK-BUILT-IN-CONSTANTS-DEBUG*,EQUALP,OR,GETHASH,RAW-VAL,SYMBOLP,ASSERT,PROGN,LOGIC-VAL,KEY,LAMBDA,MAPHASH,T,NOTE-FNS-IN-FILES,*THE-LIVE-STATE*,W,WRLD,LOGIC-MODE-RESULT,PROGRAM-MODE-RESULT,MACRO-RESULT,WHEN-PASS-2-RESULT,HT-LOGIC,MAKE-HASH-TABLE,HT-RAW,RAW-FILENAMES,STRING,QUOTE,CONCATENATE,COLLECT,RAW-SOURCE-NAME-P,NOT,WHEN,ACL2-FILES,IN,X,FOR,LOOP,LOGIC-FILENAMES,LET,CDR,ASSOC-EQ,CAR,EQ,IF,CONSP,AND,VAL,WHEN-PASS-2-P,FLET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FNS-DIFFERENT-WRT-ACL2-LOOP-ONLY">fns-different-wrt-acl2-loop-only</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fns-different-wrt-acl2-loop-only" data-sym="FNS-DIFFERENT-WRT-ACL2-LOOP-ONLY" title="(defun fns-different-wrt-acl2-loop-only (acl2-files)
  (flet ((when-pass-2-p (val)
           (and (consp val)
                (if (eq (car val) :multiple)
                    (assoc-eq :when-pass-2-p (cdr val))
...">fns-different-wrt-acl2-loop-only</a>
  (acl2-files)
  (flet ((when-pass-2-p (val)
       (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp val)
         (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car val) <span class="keyword">:multiple</span>)
           (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:when-pass-2-p</span> (cdr val))
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car val) <span class="keyword">:when-pass-2-p</span>)))))
    (let ((logic-filenames (loop for
           x
           in
           acl2-files
           when
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link local-def" href="#def-raw-source-name-p" data-sym="RAW-SOURCE-NAME-P" title="(defun raw-source-name-p (filename-without-extension)
  (let ((len (length filename-without-extension)))
    (and (&lt;= 4 len)
         (equal (subseq filename-without-extension (- len 4) len) &quot;-raw&quot;))))">raw-source-name-p</a> x))
           collect
           (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> x <span class="string">".lisp"</span>))) (raw-filenames (loop for
            x
            in
            acl2-files
            collect
            (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> x <span class="string">".lisp"</span>)))
        (ht-raw (make-hash-table <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>))
        (ht-logic (make-hash-table <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>))
        (when-pass-2-result nil)
        (macro-result nil)
        (program-mode-result nil)
        (logic-mode-result nil)
        (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)))
      (<a class="sym-link local-def" href="#def-note-fns-in-files" data-sym="NOTE-FNS-IN-FILES" title="(defun note-fns-in-files (filenames ht loop-only-p)
  (let ((*features*
         (if loop-only-p
             (cons :acl2-loop-only *features*)
             (remove :acl2-loop-only *features*))))
...">note-fns-in-files</a> raw-filenames ht-raw nil)
      (<a class="sym-link local-def" href="#def-note-fns-in-files" data-sym="NOTE-FNS-IN-FILES" title="(defun note-fns-in-files (filenames ht loop-only-p)
  (let ((*features*
         (if loop-only-p
             (cons :acl2-loop-only *features*)
             (remove :acl2-loop-only *features*))))
...">note-fns-in-files</a> logic-filenames ht-logic <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      (maphash (lambda (key logic-val)
          (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (assert (symbolp key))
            (let ((raw-val (gethash key ht-raw)))
              (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equalp logic-val raw-val)
                (let ((x (if *check-built-in-constants-debug*
                       (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> key <span class="keyword">:logic</span> logic-val <span class="keyword">:raw</span> raw-val)
                       key)) (when-pass-2-p (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (when-pass-2-p logic-val) (when-pass-2-p raw-val))))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> when-pass-2-p
                       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car logic-val) <span class="keyword">:when-pass-2-p</span>)
                           (consp raw-val)
                           (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car raw-val) <span class="keyword">:multiple</span>)
                             (loop for
                               form
                               in
                               (cdr raw-val)
                               always
                               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (car form)) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car form) <span class="keyword">:when-pass-2-p</span>))))
                             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car raw-val) <span class="keyword">:when-pass-2-p</span>)))))) (push x when-pass-2-result))
                    ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> key 'macro-body nil wrld) (push x macro-result))
                    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> key wrld) <span class="keyword">:program</span>) (push x program-mode-result))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (push x logic-mode-result))))))))
        ht-logic)
      (maphash (lambda (key raw-val)
          (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (assert (symbolp key))
            (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (gethash key ht-logic))
              (let ((x (if *check-built-in-constants-debug*
                     (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> key <span class="keyword">:raw</span> raw-val)
                     key)))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((when-pass-2-p raw-val) (push x when-pass-2-result))
                  ((<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> key <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-formals-and-guards_2A" data-sym="*PRIMITIVE-FORMALS-AND-GUARDS*">*primitive-formals-and-guards*</a> <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>))
                  ((<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> key 'macro-body nil wrld) (push x macro-result))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((c (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> key '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> nil wrld)))
                      (when c
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> c <span class="keyword">:program</span>)
                          (push x program-mode-result)
                          (push x logic-mode-result))))))))))
        ht-raw)
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> when-pass-2-result
        macro-result
        program-mode-result
        logic-mode-result))))</pre>
  </div>

<div class="form-block function" id="def-collect-monadic-booleans" data-defines="COLLECT-MONADIC-BOOLEANS" data-references="T,CDR,CONS,*TS-BOOLEAN*,IGNORE,DECLARE,V,QUOTE,FCONS-TERM*,TYPE-SET,TTREE,TS,MV-LET,TS=,CAR,ARITY,EQUAL,AND,ENDP,COND,WRLD,ENS,FNS,DEFUN" data-used-by="CHECK-BUILT-IN-CONSTANTS" data-part-name="COLLECT-MONADIC-BOOLEANS" data-part-args="WRLD,ENS,FNS" data-part-body="T,CDR,COLLECT-MONADIC-BOOLEANS,CONS,*TS-BOOLEAN*,IGNORE,DECLARE,ENS,V,QUOTE,FCONS-TERM*,TYPE-SET,TTREE,TS,MV-LET,TS=,WRLD,CAR,ARITY,EQUAL,AND,FNS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COLLECT-MONADIC-BOOLEANS">collect-monadic-booleans</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-collect-monadic-booleans" data-sym="COLLECT-MONADIC-BOOLEANS" title="(defun collect-monadic-booleans (fns ens wrld)
  (cond ((endp fns) nil)
        ((and (equal (arity (car fns) wrld) 1)
              (ts=
               (mv-let (ts ttree)
...">collect-monadic-booleans</a>
  (fns ens wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> fns) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> (car fns) wrld) <span class="number">1</span>)
       (<a class="sym-link system" href="basis-b.html#def-ts_3D" data-sym="TS=">ts=</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (ts ttree)
           (type-set (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> (car fns) '(v))
             nil
             nil
             nil
             ens
             wrld
             nil
             nil
             nil)
           (declare (ignore ttree))
           ts)
         *ts-boolean*)) (cons (car fns)
        (<a class="sym-link local-def" href="#def-collect-monadic-booleans" data-sym="COLLECT-MONADIC-BOOLEANS" title="(defun collect-monadic-booleans (fns ens wrld)
  (cond ((endp fns) nil)
        ((and (equal (arity (car fns) wrld) 1)
              (ts=
               (mv-let (ts ttree)
...">collect-monadic-booleans</a> (cdr fns) ens wrld)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-collect-monadic-booleans" data-sym="COLLECT-MONADIC-BOOLEANS" title="(defun collect-monadic-booleans (fns ens wrld)
  (cond ((endp fns) nil)
        ((and (equal (arity (car fns) wrld) 1)
              (ts=
               (mv-let (ts ttree)
...">collect-monadic-booleans</a> (cdr fns) ens wrld))))</pre>
  </div>

<div class="form-block function" id="def-check-invariant-risk" data-defines="CHECK-INVARIANT-RISK" data-references="ALWAYS,X,WRITE-USER-STOBJ-ALIST,CLOSE-OUTPUT-CHANNEL,CLOSE-INPUT-CHANNEL,GET-OUTPUT-STREAM-STRING$-FN,OPEN-OUTPUT-CHANNEL,OPEN-INPUT-CHANNEL,PUT-GLOBAL,MAKUNBOUND-GLOBAL,PRINT-OBJECT$-FN,WRITE-BYTE$,PRINC$,READ-OBJECT,READ-BYTE$,READ-CHAR$,EQUAL,CADDR,STATE,UNTOUCHABLE-FNS,GLOBAL-VAL,*SUPER-DEFUN-WART-TABLE*,TUPLE,ERROR,NULL,COLLECT,MEMBER-EQ,*BOOT-STRAP-INVARIANT-RISK-ALIST*,CAR,ASSOC-EQ,CDR,OR,NOT,INVARIANT-RISK,QUOTE,CADR,EQ,AND,WHEN,*THE-LIVE-STATE*,W,IN,TRIP,FOR,LOOP,REMOVE-DUPLICATES-EQ,BAD,LET,DEFUN" data-used-by="CHECK-BUILT-IN-CONSTANTS" data-part-name="CHECK-INVARIANT-RISK" data-part-body="ERROR,NULL,COLLECT,MEMBER-EQ,*BOOT-STRAP-INVARIANT-RISK-ALIST*,CAR,ASSOC-EQ,CDR,OR,NOT,INVARIANT-RISK,QUOTE,CADR,EQ,AND,WHEN,*THE-LIVE-STATE*,W,IN,TRIP,FOR,LOOP,REMOVE-DUPLICATES-EQ,BAD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-INVARIANT-RISK">check-invariant-risk</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-invariant-risk" data-sym="CHECK-INVARIANT-RISK" title="(defun check-invariant-risk ()
  (let ((bad
         (remove-duplicates-eq
          (loop for trip in (w *the-live-state*)
                when (and (eq (cadr trip) &#39;invariant-risk)
...">check-invariant-risk</a>
  nil
  (let ((bad (<a class="sym-link system" href="axioms.html#def-remove-duplicates-eq" data-sym="REMOVE-DUPLICATES-EQ">remove-duplicates-eq</a> (loop for
           trip
           in
           (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)
           when
           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'invariant-risk)
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car trip) <a class="sym-link system" href="defuns.html#def-_2Aboot-strap-invariant-risk-alist_2A" data-sym="*BOOT-STRAP-INVARIANT-RISK-ALIST*">*boot-strap-invariant-risk-alist*</a>))
                 (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car trip) 'nil))))
           collect
           (car trip)))))
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> bad)
      (error <span class="string">"Each function symbol in the following non-empty list ~%~
                has unexpected invariant-risk:~%~s.~%~
                You can eliminate this error by doing the following for ~%~
                each such symbol: either map it to nil in ~%~
                *BOOT-STRAP-INVARIANT-RISK-ALIST*, or else add it to the ~%~
                list of ``acceptable exceptions&#39;&#39; in the definition of ~%~
                check-invariant-risk."</span>
        bad)))
  (let ((bad (loop for
         tuple
         in
         <a class="sym-link system" href="defuns.html#def-_2Asuper-defun-wart-table_2A" data-sym="*SUPER-DEFUN-WART-TABLE*">*super-defun-wart-table*</a>
         when
         (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car tuple)
               (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'untouchable-fns (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))))
           (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'state (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> tuple))
           (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple)
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tuple) '(state)))
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car tuple)
               '(<a class="sym-link system" href="axioms.html#def-read-char_24" data-sym="READ-CHAR$">read-char$</a> <a class="sym-link system" href="axioms.html#def-read-byte_24" data-sym="READ-BYTE$">read-byte$</a>
                 <a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a>
                 <a class="sym-link system" href="axioms.html#def-princ_24" data-sym="PRINC$">princ$</a>
                 <a class="sym-link system" href="axioms.html#def-write-byte_24" data-sym="WRITE-BYTE$">write-byte$</a>
                 <a class="sym-link system" href="basis-a.html#def-print-object_24-fn" data-sym="PRINT-OBJECT$-FN">print-object$-fn</a>
                 <a class="sym-link system" href="axioms.html#def-makunbound-global" data-sym="MAKUNBOUND-GLOBAL">makunbound-global</a>
                 <a class="sym-link system" href="axioms.html#def-put-global" data-sym="PUT-GLOBAL">put-global</a>
                 <a class="sym-link system" href="axioms.html#def-open-input-channel" data-sym="OPEN-INPUT-CHANNEL">open-input-channel</a>
                 <a class="sym-link system" href="axioms.html#def-open-output-channel" data-sym="OPEN-OUTPUT-CHANNEL">open-output-channel</a>
                 <a class="sym-link system" href="axioms.html#def-get-output-stream-string_24-fn" data-sym="GET-OUTPUT-STREAM-STRING$-FN">get-output-stream-string$-fn</a>
                 <a class="sym-link system" href="axioms.html#def-close-input-channel" data-sym="CLOSE-INPUT-CHANNEL">close-input-channel</a>
                 <a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a>
                 write-user-stobj-alist))))
         collect
         (car tuple))))
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (loop for
        x
        in
        bad
        always
        (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> x <a class="sym-link system" href="defuns.html#def-_2Aboot-strap-invariant-risk-alist_2A" data-sym="*BOOT-STRAP-INVARIANT-RISK-ALIST*">*boot-strap-invariant-risk-alist*</a>)))
      (error <span class="string">"It is probably necessary to modify ~s to map each symbol in ~%~
                the following list to t:~%~s"</span>
        '<a class="sym-link system" href="defuns.html#def-_2Aboot-strap-invariant-risk-alist_2A" data-sym="*BOOT-STRAP-INVARIANT-RISK-ALIST*">*boot-strap-invariant-risk-alist*</a>
        (loop for
          x
          in
          bad
          when
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> x <a class="sym-link system" href="defuns.html#def-_2Aboot-strap-invariant-risk-alist_2A" data-sym="*BOOT-STRAP-INVARIANT-RISK-ALIST*">*boot-strap-invariant-risk-alist*</a>)))
          collect
          x)))))</pre>
  </div>

<div class="form-block function" id="def-computed-type-expr-to-type-spec-alist" data-defines="COMPUTED-TYPE-EXPR-TO-TYPE-SPEC-ALIST" data-references="W,RAT-HI,RAT-LO,NAT,INT-HI,INT-LO,QUOTE,*TYPE-SPEC-TEMPLATES*,PAIR-TYPE-EXPRESSIONS-WITH-TYPE-SPECS,STATE,DEFUN" data-used-by="CHECK-BUILT-IN-CONSTANTS" data-part-name="COMPUTED-TYPE-EXPR-TO-TYPE-SPEC-ALIST" data-part-args="STATE" data-part-body="STATE,W,RAT-HI,RAT-LO,NAT,INT-HI,INT-LO,QUOTE,*TYPE-SPEC-TEMPLATES*,PAIR-TYPE-EXPRESSIONS-WITH-TYPE-SPECS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPUTED-TYPE-EXPR-TO-TYPE-SPEC-ALIST">computed-type-expr-to-type-spec-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-computed-type-expr-to-type-spec-alist" data-sym="COMPUTED-TYPE-EXPR-TO-TYPE-SPEC-ALIST" title="(defun computed-type-expr-to-type-spec-alist (state)
  (pair-type-expressions-with-type-specs *type-spec-templates*
                                         &#39;((-3 . int-lo) (5 . int-hi) (2 . nat)
                                           (-1/7 . rat-lo) (1/11 . rat-hi))
                                         &#39;((&#39;-3 . int-lo) (&#39;5 . int-hi)
...">computed-type-expr-to-type-spec-alist</a>
  (state)
  (pair-type-expressions-with-type-specs *type-spec-templates*
    '((<span class="number">-3</span> . int-lo) (<span class="number">5</span> . int-hi)
      (<span class="number">2</span> . nat)
      (<span class="number">-1/7</span> . rat-lo)
      (<span class="number">1/11</span> . rat-hi))
    '(('<span class="number">-3</span> . int-lo) ('<span class="number">5</span> . int-hi)
      ('<span class="number">2</span> . nat)
      ('<span class="number">-1/7</span> . rat-lo)
      ('<span class="number">1/11</span> . rat-hi))
    nil
    (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))</pre>
  </div>

<div class="form-block function" id="def-state-global-let_2A-untouchable-alist" data-defines="STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST" data-references="CONS,COLLECT,*INITIAL-UNTOUCHABLE-FNS*,MEMBER-EQ,NOT,STOBJS-OUT,-STATE,SET-,LIST,PACKN,SETQ,STOBJS-IN,EQUAL,AND,OR,WHEN,SYMBOL<,FUNCTION,*INITIAL-UNTOUCHABLE-VARS*,COPY-LIST,SORT,IN,X,FOR,LOOP,STATE,QUOTE,N-S,*THE-LIVE-STATE*,W,WRLD,FN,LET,DEFUN" data-used-by="CHECK-BUILT-IN-CONSTANTS" data-part-name="STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST" data-part-body="CONS,COLLECT,*INITIAL-UNTOUCHABLE-FNS*,MEMBER-EQ,NOT,STOBJS-OUT,-STATE,SET-,LIST,PACKN,SETQ,STOBJS-IN,EQUAL,AND,OR,WHEN,SYMBOL<,FUNCTION,*INITIAL-UNTOUCHABLE-VARS*,COPY-LIST,SORT,IN,X,FOR,LOOP,STATE,QUOTE,N-S,*THE-LIVE-STATE*,W,WRLD,FN,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST">state-global-let*-untouchable-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-state-global-let_2A-untouchable-alist" data-sym="STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST" title="(defun state-global-let*-untouchable-alist ()
  (let (fn (wrld (w *the-live-state*)) (n-s &#39;(nil state)))
    (loop for x in (sort (copy-list *initial-untouchable-vars*) #&#39;symbol&lt;)
          when (or
                (and
...">state-global-let*-untouchable-alist</a>
  nil
  (let (fn (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)) (n-s '(nil state)))
    (loop for
      x
      in
      (sort (copy-list <a class="sym-link system" href="axioms.html#def-_2Ainitial-untouchable-vars_2A" data-sym="*INITIAL-UNTOUCHABLE-VARS*">*initial-untouchable-vars*</a>) (function <a class="sym-link system" href="axioms.html#def-symbol_3C" data-sym="SYMBOL&lt;">symbol&lt;</a>))
      when
      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (setq fn (<a class="sym-link system" href="basis-a.html#def-packn" data-sym="PACKN">packn</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'set- x '-state))) wrld)
            n-s)
          (equal (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> fn wrld) '(state))
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn <a class="sym-link system" href="axioms.html#def-_2Ainitial-untouchable-fns_2A" data-sym="*INITIAL-UNTOUCHABLE-FNS*">*initial-untouchable-fns*</a>)))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> (setq fn (<a class="sym-link system" href="basis-a.html#def-packn" data-sym="PACKN">packn</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'set- x))) wrld)
            n-s)
          (equal (<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> fn wrld) '(state))
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn <a class="sym-link system" href="axioms.html#def-_2Ainitial-untouchable-fns_2A" data-sym="*INITIAL-UNTOUCHABLE-FNS*">*initial-untouchable-fns*</a>))))
      collect
      (cons x fn))))</pre>
  </div>

<div class="form-block function" id="def-check-built-in-constants" data-defines="CHECK-BUILT-IN-CONSTANTS" data-references="*BLACKLISTED-APPLY$-FNS*,SYMBOL-VALUE,BAD,STOBJS-IN,ALL-NILS-OR-DFS,UNNORMALIZED-BODY,*INITIAL-UNTOUCHABLE-FNS*,*TTAG-FNS*,APPEND,FN,FNS,WRLD,LET*,EXIT-WITH-BUILD-ERROR,LISP-IMPLEMENTATION-VERSION,LISP-IMPLEMENTATION-TYPE,FORMAT,OR,*INITIAL-LOGIC-FNS-WITH-RAW-CODE*,BAD-LOGIC,*INITIAL-PROGRAM-FNS-WITH-RAW-CODE*,BAD-PROGRAM,*INITIAL-MACROS-WITH-RAW-CODE*,BAD-MACROS,SET-DIFFERENCE-EQ,CAR,MEMBER,TUPLE,*CHECK-BUILT-IN-CONSTANTS-DEBUG*,IF,Y,X,MY-DIFF,FLET,*ACL2-FILES*,FNS-DIFFERENT-WRT-ACL2-LOOP-ONLY,LOGIC-FOUND,PROGRAM-FOUND,MACROS-FOUND,WHEN-PASS-2-RESULT,MV-LET,BODY,CONS,COLLECT,MV-NTH,EQ,WHEN,*DEFINITION-MINIMAL-THEORY*,IN,F,FOR,LOOP,MERGE-SORT-LEXORDER,*BBODY-ALIST*,LIST,DEFCONST,QUASIQUOTE,*INITIAL-BUILT-IN-CLAUSES*,CHK-INITIAL-BUILT-IN-CLAUSES,GOOD-LST,COMPUTED-TYPE-EXPR-TO-TYPE-SPEC-ALIST,*TYPE-EXPR-TO-TYPE-SPEC-ALIST*,ENS,*PRIMITIVE-FORMALS-AND-GUARDS*,STRIP-CARS,COLLECT-MONADIC-BOOLEANS,*PRIMITIVE-MONADIC-BOOLEANS*,*MAX-TYPE-SET*,*MIN-TYPE-SET*,AND,STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST,*STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST*,BOOLEANP,*TAU-BOOLEANP-PAIR*,MINUSP,*TAU-MINUSP-PAIR*,POSP,*TAU-POSP-PAIR*,BITP,*TAU-BITP-PAIR*,NATP,*TAU-NATP-PAIR*,RATIONALP,*TAU-RATIONALP-PAIR*,INTEGERP,*TAU-INTEGERP-PAIR*,TAU-PAIR,ACL2-NUMBERP,GETPROPC,*TAU-ACL2-NUMBERP-PAIR*,*REWRITE-LAMBDA-MODEP-DEF-NUME*,REWRITE-LAMBDA-MODEP,*REWRITE-LAMBDA-MODEP-XNUME*,TAU-SYSTEM,*TAU-SYSTEM-XNUME*,IMMEDIATE-FORCE-MODEP,*IMMEDIATE-FORCE-MODEP-XNUME*,*FORCE-XNUME*,INTERFACE-ER,W,T,FORCE,QUOTE,FN-RUNE-NUME,*FORCE-XRUNE*,EQUAL,NOT,COND,STR,LET,CHECK-INVARIANT-RISK,*THE-LIVE-STATE*,STATE,&AUX,DEFUN" data-part-name="CHECK-BUILT-IN-CONSTANTS" data-part-args="*THE-LIVE-STATE*,STATE,&AUX" data-part-body="CHECK-INVARIANT-RISK" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-BUILT-IN-CONSTANTS">check-built-in-constants</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-built-in-constants" data-sym="CHECK-BUILT-IN-CONSTANTS" title="(defun check-built-in-constants (&amp;aux (state *the-live-state*))
  (check-invariant-risk)
  (let ((str
         &quot;The defconst of ~x0 is ~x1 but should be ~x2.  To fix ~
              the error, change the offending defconst to the value ~
...">check-built-in-constants</a>
  (&amp;aux (state *the-live-state*))
  (<a class="sym-link local-def" href="#def-check-invariant-risk" data-sym="CHECK-INVARIANT-RISK" title="(defun check-invariant-risk ()
  (let ((bad
         (remove-duplicates-eq
          (loop for trip in (w *the-live-state*)
                when (and (eq (cadr trip) &#39;invariant-risk)
...">check-invariant-risk</a>)
  (let ((str <span class="string">"The defconst of ~x0 is ~x1 but should be ~x2.  To fix ~
              the error, change the offending defconst to the value ~
              indicated and rebuild the system.  To understand why the code ~
              is written this way, see the comment in ~
              check-built-in-constants."</span>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal *force-xrune* (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (interface-er str
          '*force-xrune*
          *force-xrune*
          (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Aforce-xnume_2A" data-sym="*FORCE-XNUME*">*force-xnume*</a> (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Aforce-xnume_2A" data-sym="*FORCE-XNUME*">*force-xnume*</a>
          <a class="sym-link system" href="axioms.html#def-_2Aforce-xnume_2A" data-sym="*FORCE-XNUME*">*force-xnume*</a>
          (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-force" data-sym="FORCE">force</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Aimmediate-force-modep-xnume_2A" data-sym="*IMMEDIATE-FORCE-MODEP-XNUME*">*immediate-force-modep-xnume*</a>
           (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-immediate-force-modep" data-sym="IMMEDIATE-FORCE-MODEP">immediate-force-modep</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Aimmediate-force-modep-xnume_2A" data-sym="*IMMEDIATE-FORCE-MODEP-XNUME*">*immediate-force-modep-xnume*</a>
          <a class="sym-link system" href="axioms.html#def-_2Aimmediate-force-modep-xnume_2A" data-sym="*IMMEDIATE-FORCE-MODEP-XNUME*">*immediate-force-modep-xnume*</a>
          (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-immediate-force-modep" data-sym="IMMEDIATE-FORCE-MODEP">immediate-force-modep</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Atau-system-xnume_2A" data-sym="*TAU-SYSTEM-XNUME*">*tau-system-xnume*</a>
           (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-tau-system" data-sym="TAU-SYSTEM">tau-system</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Atau-system-xnume_2A" data-sym="*TAU-SYSTEM-XNUME*">*tau-system-xnume*</a>
          <a class="sym-link system" href="axioms.html#def-_2Atau-system-xnume_2A" data-sym="*TAU-SYSTEM-XNUME*">*tau-system-xnume*</a>
          (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-tau-system" data-sym="TAU-SYSTEM">tau-system</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Arewrite-lambda-modep-xnume_2A" data-sym="*REWRITE-LAMBDA-MODEP-XNUME*">*rewrite-lambda-modep-xnume*</a>
           (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-rewrite-lambda-modep" data-sym="REWRITE-LAMBDA-MODEP">rewrite-lambda-modep</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Arewrite-lambda-modep-xnume_2A" data-sym="*REWRITE-LAMBDA-MODEP-XNUME*">*rewrite-lambda-modep-xnume*</a>
          <a class="sym-link system" href="axioms.html#def-_2Arewrite-lambda-modep-xnume_2A" data-sym="*REWRITE-LAMBDA-MODEP-XNUME*">*rewrite-lambda-modep-xnume*</a>
          (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-rewrite-lambda-modep" data-sym="REWRITE-LAMBDA-MODEP">rewrite-lambda-modep</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Arewrite-lambda-modep-def-nume_2A" data-sym="*REWRITE-LAMBDA-MODEP-DEF-NUME*">*rewrite-lambda-modep-def-nume*</a>
           (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-rewrite-lambda-modep" data-sym="REWRITE-LAMBDA-MODEP">rewrite-lambda-modep</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Arewrite-lambda-modep-def-nume_2A" data-sym="*REWRITE-LAMBDA-MODEP-DEF-NUME*">*rewrite-lambda-modep-def-nume*</a>
          <a class="sym-link system" href="axioms.html#def-_2Arewrite-lambda-modep-def-nume_2A" data-sym="*REWRITE-LAMBDA-MODEP-DEF-NUME*">*rewrite-lambda-modep-def-nume*</a>
          (fn-rune-nume '<a class="sym-link system" href="axioms.html#def-rewrite-lambda-modep" data-sym="REWRITE-LAMBDA-MODEP">rewrite-lambda-modep</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Atau-acl2-numberp-pair_2A" data-sym="*TAU-ACL2-NUMBERP-PAIR*">*tau-acl2-numberp-pair*</a>
           (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'acl2-numberp 'tau-pair))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Atau-acl2-numberp-pair_2A" data-sym="*TAU-ACL2-NUMBERP-PAIR*">*tau-acl2-numberp-pair*</a>
          <a class="sym-link system" href="axioms.html#def-_2Atau-acl2-numberp-pair_2A" data-sym="*TAU-ACL2-NUMBERP-PAIR*">*tau-acl2-numberp-pair*</a>
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'acl2-numberp 'tau-pair))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Atau-integerp-pair_2A" data-sym="*TAU-INTEGERP-PAIR*">*tau-integerp-pair*</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'integerp 'tau-pair))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Atau-integerp-pair_2A" data-sym="*TAU-INTEGERP-PAIR*">*tau-integerp-pair*</a>
          <a class="sym-link system" href="axioms.html#def-_2Atau-integerp-pair_2A" data-sym="*TAU-INTEGERP-PAIR*">*tau-integerp-pair*</a>
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'integerp 'tau-pair))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Atau-rationalp-pair_2A" data-sym="*TAU-RATIONALP-PAIR*">*tau-rationalp-pair*</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'rationalp 'tau-pair))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Atau-rationalp-pair_2A" data-sym="*TAU-RATIONALP-PAIR*">*tau-rationalp-pair*</a>
          <a class="sym-link system" href="axioms.html#def-_2Atau-rationalp-pair_2A" data-sym="*TAU-RATIONALP-PAIR*">*tau-rationalp-pair*</a>
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'rationalp 'tau-pair))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Atau-natp-pair_2A" data-sym="*TAU-NATP-PAIR*">*tau-natp-pair*</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> '<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> 'tau-pair))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Atau-natp-pair_2A" data-sym="*TAU-NATP-PAIR*">*tau-natp-pair*</a>
          <a class="sym-link system" href="axioms.html#def-_2Atau-natp-pair_2A" data-sym="*TAU-NATP-PAIR*">*tau-natp-pair*</a>
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> '<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> 'tau-pair))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Atau-bitp-pair_2A" data-sym="*TAU-BITP-PAIR*">*tau-bitp-pair*</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> '<a class="sym-link system" href="axioms.html#def-bitp" data-sym="BITP">bitp</a> 'tau-pair))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Atau-bitp-pair_2A" data-sym="*TAU-BITP-PAIR*">*tau-bitp-pair*</a>
          <a class="sym-link system" href="axioms.html#def-_2Atau-bitp-pair_2A" data-sym="*TAU-BITP-PAIR*">*tau-bitp-pair*</a>
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> '<a class="sym-link system" href="axioms.html#def-bitp" data-sym="BITP">bitp</a> 'tau-pair))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Atau-posp-pair_2A" data-sym="*TAU-POSP-PAIR*">*tau-posp-pair*</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> '<a class="sym-link system" href="axioms.html#def-posp" data-sym="POSP">posp</a> 'tau-pair))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Atau-posp-pair_2A" data-sym="*TAU-POSP-PAIR*">*tau-posp-pair*</a>
          <a class="sym-link system" href="axioms.html#def-_2Atau-posp-pair_2A" data-sym="*TAU-POSP-PAIR*">*tau-posp-pair*</a>
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> '<a class="sym-link system" href="axioms.html#def-posp" data-sym="POSP">posp</a> 'tau-pair))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Atau-minusp-pair_2A" data-sym="*TAU-MINUSP-PAIR*">*tau-minusp-pair*</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'minusp 'tau-pair))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Atau-minusp-pair_2A" data-sym="*TAU-MINUSP-PAIR*">*tau-minusp-pair*</a>
          <a class="sym-link system" href="axioms.html#def-_2Atau-minusp-pair_2A" data-sym="*TAU-MINUSP-PAIR*">*tau-minusp-pair*</a>
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'minusp 'tau-pair))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Atau-booleanp-pair_2A" data-sym="*TAU-BOOLEANP-PAIR*">*tau-booleanp-pair*</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> '<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> 'tau-pair))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Atau-booleanp-pair_2A" data-sym="*TAU-BOOLEANP-PAIR*">*tau-booleanp-pair*</a>
          <a class="sym-link system" href="axioms.html#def-_2Atau-booleanp-pair_2A" data-sym="*TAU-BOOLEANP-PAIR*">*tau-booleanp-pair*</a>
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> '<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> 'tau-pair))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Astate-global-let_2A-untouchable-alist_2A" data-sym="*STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST*">*state-global-let*-untouchable-alist*</a>
           (<a class="sym-link local-def" href="#def-state-global-let_2A-untouchable-alist" data-sym="STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST" title="(defun state-global-let*-untouchable-alist ()
  (let (fn (wrld (w *the-live-state*)) (n-s &#39;(nil state)))
    (loop for x in (sort (copy-list *initial-untouchable-vars*) #&#39;symbol&lt;)
          when (or
                (and
...">state-global-let*-untouchable-alist</a>))) (interface-er str
          '<a class="sym-link system" href="axioms.html#def-_2Astate-global-let_2A-untouchable-alist_2A" data-sym="*STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST*">*state-global-let*-untouchable-alist*</a>
          <a class="sym-link system" href="axioms.html#def-_2Astate-global-let_2A-untouchable-alist_2A" data-sym="*STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST*">*state-global-let*-untouchable-alist*</a>
          (<a class="sym-link local-def" href="#def-state-global-let_2A-untouchable-alist" data-sym="STATE-GLOBAL-LET*-UNTOUCHABLE-ALIST" title="(defun state-global-let*-untouchable-alist ()
  (let (fn (wrld (w *the-live-state*)) (n-s &#39;(nil state)))
    (loop for x in (sort (copy-list *initial-untouchable-vars*) #&#39;symbol&lt;)
          when (or
                (and
...">state-global-let*-untouchable-alist</a>))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal *min-type-set* <span class="number">-16384</span>)
           (equal *max-type-set* <span class="number">16383</span>))) (interface-er <span class="string">"The minimal and maximal type-sets are incorrectly built into the ~
        definition of type-alist-entryp.  These type-sets get generated by ~
        the call of def-basic-type-sets in type-set-a.lisp are must be ~
        mentioned, as above, in axioms.lisp.  Evidently, a new type-set bit ~
        was added.  Update type-alist-entryp."</span>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-monadic-booleans_2A" data-sym="*PRIMITIVE-MONADIC-BOOLEANS*">*primitive-monadic-booleans*</a>
           (<a class="sym-link local-def" href="#def-collect-monadic-booleans" data-sym="COLLECT-MONADIC-BOOLEANS" title="(defun collect-monadic-booleans (fns ens wrld)
  (cond ((endp fns) nil)
        ((and (equal (arity (car fns) wrld) 1)
              (ts=
               (mv-let (ts ttree)
...">collect-monadic-booleans</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-formals-and-guards_2A" data-sym="*PRIMITIVE-FORMALS-AND-GUARDS*">*primitive-formals-and-guards*</a>)
             (ens state)
             (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))) (interface-er str
          '<a class="sym-link system" href="basis-b.html#def-_2Aprimitive-monadic-booleans_2A" data-sym="*PRIMITIVE-MONADIC-BOOLEANS*">*primitive-monadic-booleans*</a>
          <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-monadic-booleans_2A" data-sym="*PRIMITIVE-MONADIC-BOOLEANS*">*primitive-monadic-booleans*</a>
          (<a class="sym-link local-def" href="#def-collect-monadic-booleans" data-sym="COLLECT-MONADIC-BOOLEANS" title="(defun collect-monadic-booleans (fns ens wrld)
  (cond ((endp fns) nil)
        ((and (equal (arity (car fns) wrld) 1)
              (ts=
               (mv-let (ts ttree)
...">collect-monadic-booleans</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> <a class="sym-link system" href="basis-b.html#def-_2Aprimitive-formals-and-guards_2A" data-sym="*PRIMITIVE-FORMALS-AND-GUARDS*">*primitive-formals-and-guards*</a>)
            (ens state)
            (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal *type-expr-to-type-spec-alist*
           (<a class="sym-link local-def" href="#def-computed-type-expr-to-type-spec-alist" data-sym="COMPUTED-TYPE-EXPR-TO-TYPE-SPEC-ALIST" title="(defun computed-type-expr-to-type-spec-alist (state)
  (pair-type-expressions-with-type-specs *type-spec-templates*
                                         &#39;((-3 . int-lo) (5 . int-hi) (2 . nat)
                                           (-1/7 . rat-lo) (1/11 . rat-hi))
                                         &#39;((&#39;-3 . int-lo) (&#39;5 . int-hi)
...">computed-type-expr-to-type-spec-alist</a> state))) (interface-er str
          '*type-expr-to-type-spec-alist*
          *type-expr-to-type-spec-alist*
          (<a class="sym-link local-def" href="#def-computed-type-expr-to-type-spec-alist" data-sym="COMPUTED-TYPE-EXPR-TO-TYPE-SPEC-ALIST" title="(defun computed-type-expr-to-type-spec-alist (state)
  (pair-type-expressions-with-type-specs *type-spec-templates*
                                         &#39;((-3 . int-lo) (5 . int-hi) (2 . nat)
                                           (-1/7 . rat-lo) (1/11 . rat-hi))
                                         &#39;((&#39;-3 . int-lo) (&#39;5 . int-hi)
...">computed-type-expr-to-type-spec-alist</a> state))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> '<a class="sym-link system" href="axioms.html#def-booleanp" data-sym="BOOLEANP">booleanp</a> 'tau-pair)) (interface-er <span class="string">"Our code for tau-term assumes that BOOLEANP is a tau predicate.  But ~
        it has no tau-pair property!"</span>)))
    (let ((good-lst (<a class="sym-link system" href="defthm.html#def-chk-initial-built-in-clauses" data-sym="CHK-INITIAL-BUILT-IN-CLAUSES">chk-initial-built-in-clauses</a> *initial-built-in-clauses*
           (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
           nil
           nil)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (good-lst (interface-er <span class="string">"The defconst of *initial-built-in-clauses* is bad because at least ~
          one of the records supplies an :all-fnnames that is different from ~
          that computed by all-fnnames-subsumer.  The correct setting is ~
          shown below. To preserve the comments in the source file it might ~
          be best to compare -- with EQUAL -- the elements below with the ~
          corresponding elements in the current source file and just replace ~
          the ones that have changed.  Here is a correct setting in 1:1 ~
          correspondence with the current setting: ~X01."</span>
            `(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> *initial-built-in-clauses* (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> ,@GOOD-LST))
            nil))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal <a class="sym-link system" href="axioms.html#def-_2Abbody-alist_2A" data-sym="*BBODY-ALIST*">*bbody-alist*</a>
           (<a class="sym-link system" href="axioms.html#def-merge-sort-lexorder" data-sym="MERGE-SORT-LEXORDER">merge-sort-lexorder</a> (loop for
               f
               in
               <a class="sym-link system" href="axioms.html#def-_2Adefinition-minimal-theory_2A" data-sym="*DEFINITION-MINIMAL-THEORY*">*definition-minimal-theory*</a>
               when
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> f '<a class="sym-link system" href="axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a>))
               collect
               (cons f (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> f <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))))))) (interface-er <span class="string">"There is a discrepancy between the value of *bbody-alist* and ~
             its expected value.~%Actual value of ~
             *bbody-alist*:~%~X01~%Expected value of *bbody-alist*:~X21"</span>
          <a class="sym-link system" href="axioms.html#def-_2Abbody-alist_2A" data-sym="*BBODY-ALIST*">*bbody-alist*</a>
          nil
          (<a class="sym-link system" href="axioms.html#def-merge-sort-lexorder" data-sym="MERGE-SORT-LEXORDER">merge-sort-lexorder</a> (loop for
              f
              in
              <a class="sym-link system" href="axioms.html#def-_2Adefinition-minimal-theory_2A" data-sym="*DEFINITION-MINIMAL-THEORY*">*definition-minimal-theory*</a>
              when
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> f '<a class="sym-link system" href="axioms.html#def-mv-nth" data-sym="MV-NTH">mv-nth</a>))
              collect
              (cons f (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> f <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))))))))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (when-pass-2-result macros-found program-found logic-found)
      (<a class="sym-link local-def" href="#def-fns-different-wrt-acl2-loop-only" data-sym="FNS-DIFFERENT-WRT-ACL2-LOOP-ONLY" title="(defun fns-different-wrt-acl2-loop-only (acl2-files)
  (flet ((when-pass-2-p (val)
           (and (consp val)
                (if (eq (car val) :multiple)
                    (assoc-eq :when-pass-2-p (cdr val))
...">fns-different-wrt-acl2-loop-only</a> *acl2-files*)
      (flet ((my-diff (x y)
           (if *check-built-in-constants-debug*
             (loop for
               tuple
               in
               x
               when
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (car tuple) y <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>))
               collect
               tuple)
             (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> x y))))
        (let ((bad-macros (my-diff macros-found <a class="sym-link system" href="axioms.html#def-_2Ainitial-macros-with-raw-code_2A" data-sym="*INITIAL-MACROS-WITH-RAW-CODE*">*initial-macros-with-raw-code*</a>)) (bad-program (my-diff program-found <a class="sym-link system" href="axioms.html#def-_2Ainitial-program-fns-with-raw-code_2A" data-sym="*INITIAL-PROGRAM-FNS-WITH-RAW-CODE*">*initial-program-fns-with-raw-code*</a>))
            (bad-logic (my-diff logic-found <a class="sym-link system" href="axioms.html#def-_2Ainitial-logic-fns-with-raw-code_2A" data-sym="*INITIAL-LOGIC-FNS-WITH-RAW-CODE*">*initial-logic-fns-with-raw-code*</a>)))
          (when (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> when-pass-2-result bad-macros bad-program bad-logic)
            (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
              <span class="string">"~%ERROR: Failed check for coverage of functions with~%~
                    acl2-loop-only code differences!  Please send this~%~
                    error message to the ACL2 implementors. Problems are~%~
                    as shown below; use *check-built-in-constants-debug* = t~%~
                    for a verbose report.~%~
                    Note: (lisp-implementation-type) =~%~
                    ~6t~s~%~
                    Note: (lisp-implementation-version) =~%~
                    ~6t~s~%~%"</span>
              (lisp-implementation-type)
              (lisp-implementation-version))
            (when when-pass-2-result
              (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                <span class="string">"The following have #-acl2-loop-only code within ~
                       (when-pass-2 ...):~%~s~%~%"</span>
                when-pass-2-result))
            (when bad-macros
              (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                <span class="string">"The following macros differ in their #+acl2-loop-only~%~
                       and #-acl2-loop-only code:~%~s~%~
                       They probably should be added to ~s.~%~%"</span>
                bad-macros
                '<a class="sym-link system" href="axioms.html#def-_2Ainitial-macros-with-raw-code_2A" data-sym="*INITIAL-MACROS-WITH-RAW-CODE*">*initial-macros-with-raw-code*</a>))
            (when bad-program
              (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                <span class="string">"The following program-mode functions differ in their~%~
                       #+acl2-loop-only and #-acl2-loop-only code:~%~s~%~
                       They probably should be added to ~s.~%~%"</span>
                bad-program
                '<a class="sym-link system" href="axioms.html#def-_2Ainitial-program-fns-with-raw-code_2A" data-sym="*INITIAL-PROGRAM-FNS-WITH-RAW-CODE*">*initial-program-fns-with-raw-code*</a>))
            (when bad-logic
              (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                <span class="string">"The following logic-mode functions differ in their~%~
                       #+acl2-loop-only and #-acl2-loop-only code:~%~s~%~
                       They probably should be added to ~s.~%~%"</span>
                bad-logic
                '<a class="sym-link system" href="axioms.html#def-_2Ainitial-logic-fns-with-raw-code_2A" data-sym="*INITIAL-LOGIC-FNS-WITH-RAW-CODE*">*initial-logic-fns-with-raw-code*</a>))
            (exit-with-build-error <span class="string">"Check failed!"</span>)))))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (fns (loop for
            fn
            in
            (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> <a class="sym-link system" href="axioms.html#def-_2Attag-fns_2A" data-sym="*TTAG-FNS*">*ttag-fns*</a>) <a class="sym-link system" href="axioms.html#def-_2Ainitial-untouchable-fns_2A" data-sym="*INITIAL-UNTOUCHABLE-FNS*">*initial-untouchable-fns*</a>)
            when
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'unnormalized-body nil wrld)
              (<a class="sym-link system" href="axioms.html#def-all-nils-or-dfs" data-sym="ALL-NILS-OR-DFS">all-nils-or-dfs</a> (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> fn wrld)))
            collect
            fn))
        (bad (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> fns
            (symbol-value '*blacklisted-apply$-fns*))))
      (when bad
        (interface-er <span class="string">"The value of *blacklisted-apply$-fns* fails to include ~&amp;0.  This ~
          is an error because all defined functions from *ttag-fns* and ~
          *initial-untouchable-fns* with all-nils stobjs-in and stobjs-out ~
          must be in *blacklisted-apply$-fns*."</span>
          bad)))))</pre>
  </div>

<div class="form-block other" id="form-157" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output check-none-ideal
  (trips acc &amp;aux (state *the-live-state*))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> trips) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> acc) nil)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (exit-with-build-error <span class="string">"The following are :ideal mode functions that are not ~%~
               non-executable.  We rely in oneify-cltl-code on the absence ~%~
               of such functions in the boot-strap world (see the comment ~%~
               on check-none-ideal there); moreover, we want system ~%~
               functions to execute efficiently, which might not be the ~%~
               case for an :ideal mode function.  Functions in the ~%~
               following list should have their guards verified: ~s."</span>
            (<a class="sym-link system" href="axioms.html#def-remove-duplicates-eq" data-sym="REMOVE-DUPLICATES-EQ">remove-duplicates-eq</a> acc)))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((trip (car trips)) (fn (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'event-landmark)
              (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
              (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (access-event-tuple-type (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
                (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> (access-event-tuple-namex (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
                (<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a> (car (access-event-tuple-namex (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))))
                (otherwise nil)))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> fn
             (symbolp fn)
             (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> fn (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) <span class="keyword">:ideal</span>)
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'non-executablep) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))) (check-none-ideal (cdr trips) (cons fn acc)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (check-none-ideal (cdr trips) acc)))))))</pre>
  </div>

<div class="form-block function" id="def-check-state-globals-initialized" data-defines="CHECK-STATE-GLOBALS-INITIALIZED" data-references="EXIT-WITH-BUILD-ERROR,SYMBOL-VALUE,CONS,PUSH,EQ,QUOTE,*INITIAL-GLOBAL-TABLE*,ASSOC,NOT,SYMBOL-NAME,INTERN,ACL2-SYM,BOUNDP,WHEN,FIND-PACKAGE,SYM,DO-SYMBOLS,BAD,LET,DEFUN" data-part-name="CHECK-STATE-GLOBALS-INITIALIZED" data-part-body="EXIT-WITH-BUILD-ERROR,SYMBOL-VALUE,CONS,PUSH,EQ,QUOTE,*INITIAL-GLOBAL-TABLE*,ASSOC,NOT,SYMBOL-NAME,INTERN,ACL2-SYM,BOUNDP,WHEN,FIND-PACKAGE,SYM,DO-SYMBOLS,BAD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-STATE-GLOBALS-INITIALIZED">check-state-globals-initialized</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-state-globals-initialized" data-sym="CHECK-STATE-GLOBALS-INITIALIZED" title="(defun check-state-globals-initialized ()
  (let (bad)
    (do-symbols (sym (find-package &quot;ACL2_GLOBAL_ACL2&quot;))
      (when (boundp sym)
        (let ((acl2-sym (intern (symbol-name sym) &quot;ACL2&quot;)))
...">check-state-globals-initialized</a>
  nil
  (let (bad)
    (do-symbols (sym (find-package <span class="string">"ACL2_GLOBAL_ACL2"</span>))
      (when (boundp sym)
        (let ((acl2-sym (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> (symbol-name sym) <span class="string">"ACL2"</span>)))
          (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> acl2-sym <a class="sym-link system" href="axioms.html#def-_2Ainitial-global-table_2A" data-sym="*INITIAL-GLOBAL-TABLE*">*initial-global-table*</a> <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>))
            (push (cons acl2-sym (symbol-value sym)) bad)))))
    (when bad
      (exit-with-build-error <span class="string">"The following symbols, perhaps with the values shown, need to~%~
        be added to *initial-global-table*:~%~s~%"</span>
        bad))))</pre>
  </div>

<div class="form-block function" id="def-check-slashable" data-defines="CHECK-SLASHABLE" data-references="INTERN,READ-FROM-STRING,IGNORE-ERRORS,EQ,AND,STRING,LIST,COERCE,STR,*SLASHABLE-CHARS*,CODE-CHAR,MEMBER,IFF,TO,FROM,I,INTERFACE-ER,COLLECT,CHAR-CODE,*SLASHABLE-ARRAY*,SVREF,NOT,WHEN,QUOTE,IN,CHAR,FOR,LOOP,BAD,LET,DEFUN" data-part-name="CHECK-SLASHABLE" data-part-body="INTERFACE-ER,COLLECT,CHAR-CODE,*SLASHABLE-ARRAY*,SVREF,NOT,WHEN,QUOTE,IN,CHAR,FOR,LOOP,BAD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-SLASHABLE">check-slashable</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-slashable" data-sym="CHECK-SLASHABLE" title="(defun check-slashable ()
  (let ((bad
         (loop for char in &#39;(#\Newline #\Page #\  #\Tab #\&quot; #\# #\&#39; #\( #\) #\,
                             #\: #\; #\\ #\` #\a #\b #\c #\d #\e #\f #\g #\h
                             #\i #\j #\k #\l #\m #\n #\o #\p #\q #\r #\s #\t
...">check-slashable</a>
  nil
  (let ((bad (loop for
         <a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a>
         in
         '(#\
 #\
           #\ 
           #\	
           #\&quot;
           #\#
           #\&#39;
           #\(
           #\)
           #\,
           #\:
           #\;
           #\\
           #\`
           #\a
           #\b
           #\c
           #\d
           #\e
           #\f
           #\g
           #\h
           #\i
           #\j
           #\k
           #\l
           #\m
           #\n
           #\o
           #\p
           #\q
           #\r
           #\s
           #\t
           #\u
           #\v
           #\w
           #\x
           #\y
           #\z
           #\|)
         when
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (svref *slashable-array* (char-code <a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a>)))
         collect
         (char-code <a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a>))))
    (when bad
      (interface-er <span class="string">"The character code~#0~[~/s~] ~&amp;0 must be associated with T in ~
        *slashable-array*."</span>
        bad)))
  (let ((bad (loop for
         i
         from
         <span class="number">0</span>
         to
         <span class="number">255</span>
         when
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a> (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (code-char i) <a class="sym-link system" href="axioms.html#def-_2Aslashable-chars_2A" data-sym="*SLASHABLE-CHARS*">*slashable-chars*</a>)
             (svref *slashable-array* i)))
         collect
         i)))
    (when bad
      (interface-er <span class="string">"Each character code in the list ~x0 is marked as slashable in exactly ~
        one of *slashable-array* and *slashable-chars*; but those two ~
        structures are supposed to represent the same set of slashable ~
        characters."</span>
        bad)))
  (let ((bad (loop for
         i
         from
         <span class="number">0</span>
         to
         <span class="number">255</span>
         when
         (let ((str (coerce (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (code-char i)
                  #\A
                  #\B
                  (code-char i)
                  #\U
                  #\V
                  (code-char i))
                '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>)))
           (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (ignore-errors (read-from-string str))
                 (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> str <span class="string">"ACL2"</span>)))
             (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (svref *slashable-array* i))))
         collect
         i)))
    (when bad
      (interface-er <span class="string">"Each character code in the list ~x0 needs to be marked as slashable ~
        in both *slashable-array* and *slashable-chars*."</span>
        bad))))</pre>
  </div>

<div class="form-block function" id="def-check-some-builtins-for-executability" data-defines="CHECK-SOME-BUILTINS-FOR-EXECUTABILITY" data-references="INTERFACE-ER,NULL,OR,PUSH,NON-EXECUTABLEP,GETPROPC,VERIFY-TERMINATION-BOOT-STRAP,QUOTE,GET-EVENT,CAR,EQ,AND,WHEN,FIND-PACKAGE,FN,DO-SYMBOLS,ANS,*THE-LIVE-STATE*,W,WRLD,LET,DEFUN" data-part-name="CHECK-SOME-BUILTINS-FOR-EXECUTABILITY" data-part-body="INTERFACE-ER,NULL,OR,PUSH,NON-EXECUTABLEP,GETPROPC,VERIFY-TERMINATION-BOOT-STRAP,QUOTE,GET-EVENT,CAR,EQ,AND,WHEN,FIND-PACKAGE,FN,DO-SYMBOLS,ANS,*THE-LIVE-STATE*,W,WRLD,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-SOME-BUILTINS-FOR-EXECUTABILITY">check-some-builtins-for-executability</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-some-builtins-for-executability" data-sym="CHECK-SOME-BUILTINS-FOR-EXECUTABILITY" title="(defun check-some-builtins-for-executability ()
  (let ((wrld (w *the-live-state*)) ans)
    (do-symbols (fn (find-package &quot;ACL2&quot;))
      (when
          (and (eq (car (get-event fn wrld)) &#39;verify-termination-boot-strap)
...">check-some-builtins-for-executability</a>
  nil
  (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)) ans)
    (do-symbols (fn (find-package <span class="string">"ACL2"</span>))
      (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (get-event fn wrld))
            '<a class="sym-link system" href="axioms.html#def-verify-termination-boot-strap" data-sym="VERIFY-TERMINATION-BOOT-STRAP">verify-termination-boot-strap</a>)
          (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn 'non-executablep nil wrld))
        (push fn ans)))
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ans)
      (interface-er <span class="string">"The initial ACL2 world has the following non-empty list of ~
          functions for which get-defun-event will produce the wrong ~
          result:~%~x0.~%See ACL2 function check-executable-builtins for an ~
          explanation, or contact the ACL2 implementors."</span>
        ans))))</pre>
  </div>

<div class="form-block other" id="form-161" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output check-acl2-initialization
  nil
  (<a class="sym-link local-def" href="#def-check-built-in-constants" data-sym="CHECK-BUILT-IN-CONSTANTS" title="(defun check-built-in-constants (&amp;aux (state *the-live-state*))
  (check-invariant-risk)
  (let ((str
         &quot;The defconst of ~x0 is ~x1 but should be ~x2.  To fix ~
              the error, change the offending defconst to the value ~
...">check-built-in-constants</a>)
  (<a class="sym-link system" href="defuns.html#def-check-out-instantiablep" data-sym="CHECK-OUT-INSTANTIABLEP">check-out-instantiablep</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
  (check-none-ideal (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*) nil)
  (<a class="sym-link local-def" href="#def-check-state-globals-initialized" data-sym="CHECK-STATE-GLOBALS-INITIALIZED" title="(defun check-state-globals-initialized ()
  (let (bad)
    (do-symbols (sym (find-package &quot;ACL2_GLOBAL_ACL2&quot;))
      (when (boundp sym)
        (let ((acl2-sym (intern (symbol-name sym) &quot;ACL2&quot;)))
...">check-state-globals-initialized</a>)
  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="basis-b.html#def-plist-worldp-with-formals" data-sym="PLIST-WORLDP-WITH-FORMALS">plist-worldp-with-formals</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
    (exit-with-build-error <span class="string">"The initial ACL2 world does not satisfy plist-worldp-with-formals!"</span>))
  (<a class="sym-link local-def" href="#def-check-slashable" data-sym="CHECK-SLASHABLE" title="(defun check-slashable ()
  (let ((bad
         (loop for char in &#39;(#\Newline #\Page #\  #\Tab #\&quot; #\# #\&#39; #\( #\) #\,
                             #\: #\; #\\ #\` #\a #\b #\c #\d #\e #\f #\g #\h
                             #\i #\j #\k #\l #\m #\n #\o #\p #\q #\r #\s #\t
...">check-slashable</a>)
  (<a class="sym-link local-def" href="#def-check-some-builtins-for-executability" data-sym="CHECK-SOME-BUILTINS-FOR-EXECUTABILITY" title="(defun check-some-builtins-for-executability ()
  (let ((wrld (w *the-live-state*)) ans)
    (do-symbols (fn (find-package &quot;ACL2&quot;))
      (when
          (and (eq (car (get-event fn wrld)) &#39;verify-termination-boot-strap)
...">check-some-builtins-for-executability</a>)
  nil)</pre>
  </div>

<div class="form-block function" id="def-set-initial-cbd" data-defines="SET-INITIAL-CBD" data-references="SET-CBD-FN1,ERROR,GET-OS,T,ABSOLUTE-PATHNAME-STRING-P,STRING,QUOTE,CONCATENATE,LENGTH,1-,CHAR,EQL,EQUAL,NOT,STRINGP,AND,COND,OUR-PWD,*INITIAL-CBD*,SETQ,*THE-LIVE-STATE*,STATE,LET,DEFUN" data-used-by="LP,INITIALIZE-ACL2" data-part-name="SET-INITIAL-CBD" data-part-body="SET-CBD-FN1,ERROR,GET-OS,T,ABSOLUTE-PATHNAME-STRING-P,STRING,QUOTE,CONCATENATE,LENGTH,1-,CHAR,EQL,EQUAL,NOT,STRINGP,AND,COND,OUR-PWD,*INITIAL-CBD*,SETQ,*THE-LIVE-STATE*,STATE,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-INITIAL-CBD">set-initial-cbd</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-initial-cbd" data-sym="SET-INITIAL-CBD" title="(defun set-initial-cbd ()
  (let ((state *the-live-state*))
    (setq *initial-cbd* (our-pwd))
    (cond
     ((and (stringp *initial-cbd*) (not (equal *initial-cbd* &quot;&quot;))
...">set-initial-cbd</a>
  nil
  (let ((state *the-live-state*))
    (setq *initial-cbd* (our-pwd))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp *initial-cbd*)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal *initial-cbd* <span class="string">""</span>))
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> *initial-cbd* (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> *initial-cbd*))) #\/))) (setq *initial-cbd* (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> *initial-cbd* <span class="string">"/"</span>))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-absolute-pathname-string-p" data-sym="ABSOLUTE-PATHNAME-STRING-P">absolute-pathname-string-p</a> *initial-cbd* <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (get-os))) (error <span class="string">"Our guess for the initial setting of cbd, ~x0, which was ~%~
              generated by (our-pwd), is not a legal directory!  Before ~%~
              entering ACL2, please setq *initial-cbd* to a nonempty ~%~
              string that represents an absolute ACL2 (i.e., Unix-style) ~%~
              pathname.  Sorry for the inconvenience."</span>
          *initial-cbd*)))
    (set-cbd-fn1 *initial-cbd* state)))</pre>
  </div>

<div class="form-block function" id="def-initialize-acl2" data-defines="INITIALIZE-ACL2" data-references="SAVED-BUILD-DATE-STRING,EVAL,*SAVED-BUILD-DATE-LST*,FORMAT,STR,WITH-OPEN-FILE,DELETE-FILE,*ACL2-STATUS-FILE*,PROBE-FILE,CHECK-ACL2-INITIALIZATION,*INITIAL-LD-SPECIAL-BINDINGS*,F-PUT-LD-SPECIALS,INITIALIZE-PC-ACL2,EXIT-BOOT-STRAP-MODE,COMP-FN,LD,ENTER-BOOT-STRAP-PASS-2,PUSH,T,INTERFACE-ER,READ-FILE,ERP,ANS,RETURN-FROM,COND,IGNORE,DECLARE,EQ,IF,STRING,*LISP-EXTENSION*,LIST,APPEND,COERCE,FUNCTION,ASSOC,CDR,LD-ALIST-RAW,LD-FN,ST,VAL,ER,MV-LET,RAW-SOURCE-NAME-P,OR,*ACL2-FILES*,FL,DOLIST,GET-OS,ENTER-BOOT-STRAP-MODE,PASS-2-ALIST,*THE-LIVE-STATE*,STATE,CONS,*FEATURES*,LET*,*COPY-OF-COMMON-LISP-SYMBOLS-FROM-MAIN-LISP-PACKAGE*,MAKUNBOUND,SET-INITIAL-CBD,WITH-WARNINGS-SUPPRESSED,SETQ,EQUAL,NOT,AND,WHEN,GETENV$-RAW,DIR,LET,*DO-PROCLAIMS*,SYSTEM-BOOKS-DIR,*ACL2-PASS-2-FILES*,ACL2-PASS-2-FILES,&AUX,INCLUDE-BOOK,QUOTE,PASS-2-LD-SKIP-PROOFSP,&OPTIONAL,DEFUN" data-part-name="INITIALIZE-ACL2" data-part-args="*DO-PROCLAIMS*,SYSTEM-BOOKS-DIR,*ACL2-PASS-2-FILES*,ACL2-PASS-2-FILES,&AUX,INCLUDE-BOOK,QUOTE,PASS-2-LD-SKIP-PROOFSP,&OPTIONAL" data-part-body="SYSTEM-BOOKS-DIR,SETQ,EQUAL,NOT,AND,WHEN,GETENV$-RAW,DIR,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INITIALIZE-ACL2">initialize-acl2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-initialize-acl2" data-sym="INITIALIZE-ACL2" title="(defun initialize-acl2
       (
        &amp;optional (pass-2-ld-skip-proofsp &#39;include-book)
        &amp;aux (acl2-pass-2-files *acl2-pass-2-files*) system-books-dir
        (*do-proclaims* nil))
...">initialize-acl2</a>
  (&amp;optional (pass-2-ld-skip-proofsp '<a class="sym-link system" href="axioms.html#def-include-book" data-sym="INCLUDE-BOOK">include-book</a>)
    &amp;aux
    (acl2-pass-2-files <a class="sym-link local-def" href="#def-_2Aacl2-pass-2-files_2A" data-sym="*ACL2-PASS-2-FILES*" title="(defconst *acl2-pass-2-files*
          &#39;(&quot;axioms&quot; &quot;memoize&quot; &quot;hons&quot; &quot;serialize&quot; &quot;boot-strap-pass-2-a&quot;
            &quot;float-a&quot; &quot;float-b&quot; &quot;apply-prim&quot; &quot;apply-constraints&quot; &quot;apply&quot;
            &quot;boot-strap-pass-2-b&quot;))">*acl2-pass-2-files*</a>)
    <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>
    (*do-proclaims* nil))
  (let ((dir (getenv$-raw <span class="string">"ACL2_SYSTEM_BOOKS"</span>)))
    (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dir (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal dir <span class="string">""</span>)))
      (setq <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a> dir)))
  (with-warnings-suppressed (<a class="sym-link local-def" href="#def-set-initial-cbd" data-sym="SET-INITIAL-CBD" title="(defun set-initial-cbd ()
  (let ((state *the-live-state*))
    (setq *initial-cbd* (our-pwd))
    (cond
     ((and (stringp *initial-cbd*) (not (equal *initial-cbd* &quot;&quot;))
...">set-initial-cbd</a>)
    (makunbound '*copy-of-common-lisp-symbols-from-main-lisp-package*)
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((*features* (cons <span class="keyword">:acl2-loop-only</span> *features*)) (state *the-live-state*)
        pass-2-alist)
      (enter-boot-strap-mode <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a> (get-os))
      (dolist (fl *acl2-files*)
        (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal fl <span class="string">"boot-strap-pass-2-a"</span>)
              (equal fl <span class="string">"boot-strap-pass-2-b"</span>)
              (<a class="sym-link local-def" href="#def-raw-source-name-p" data-sym="RAW-SOURCE-NAME-P" title="(defun raw-source-name-p (filename-without-extension)
  (let ((len (length filename-without-extension)))
    (and (&lt;= 4 len)
         (equal (subseq filename-without-extension (- len 4) len) &quot;-raw&quot;))))">raw-source-name-p</a> fl)))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> val st)
            (ld-fn (ld-alist-raw (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> fl pass-2-alist <span class="keyword">:test</span> (function equal)))
                  (coerce (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (coerce fl '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)
                      (cons #\. (coerce *lisp-extension* '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)))
                    '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>))
                (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> pass-2-ld-skip-proofsp nil)
                  nil
                  '<a class="sym-link local-def" href="#def-initialize-acl2" data-sym="INITIALIZE-ACL2" title="(defun initialize-acl2
       (
        &amp;optional (pass-2-ld-skip-proofsp &#39;include-book)
        &amp;aux (acl2-pass-2-files *acl2-pass-2-files*) system-books-dir
        (*do-proclaims* nil))
...">initialize-acl2</a>)
                <span class="keyword">:error</span>)
              *the-live-state*
              nil)
            (declare (ignore val st))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> (return-from <a class="sym-link local-def" href="#def-initialize-acl2" data-sym="INITIALIZE-ACL2" title="(defun initialize-acl2
       (
        &amp;optional (pass-2-ld-skip-proofsp &#39;include-book)
        &amp;aux (acl2-pass-2-files *acl2-pass-2-files*) system-books-dir
        (*do-proclaims* nil))
...">initialize-acl2</a> nil))))))
      (setq pass-2-alist
        (let ((ans nil))
          (dolist (fl acl2-pass-2-files)
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
              (<a class="sym-link system" href="basis-b.html#def-read-file" data-sym="READ-FILE">read-file</a> (coerce (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (coerce fl '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)
                    (cons #\. (coerce *lisp-extension* '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)))
                  '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>)
                *the-live-state*)
              (declare (ignore state))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (interface-er <span class="string">"Unable to read file ~x0!"</span> fl))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (push (cons fl val) ans)))))
          ans))
      (<a class="sym-link local-def" href="#def-enter-boot-strap-pass-2" data-sym="ENTER-BOOT-STRAP-PASS-2" title="(defun enter-boot-strap-pass-2 ()
  (push nil *acl2-unwind-protect-stack*)
  (set-w &#39;extension (global-set &#39;boot-strap-pass-2 t (w *the-live-state*))
         *the-live-state*)
  (acl2-unwind *ld-level* nil)
...">enter-boot-strap-pass-2</a>)
      (dolist (fl acl2-pass-2-files)
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> val st)
          (ld-fn (ld-alist-raw (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc" data-sym="ASSOC">assoc</a> fl pass-2-alist <span class="keyword">:test</span> (function equal)))
                (interface-er <span class="string">"Did not find ~x0 in pass-2-alist."</span> fl))
              pass-2-ld-skip-proofsp
              <span class="keyword">:error</span>)
            state
            nil)
          (declare (ignore val st))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> (return-from <a class="sym-link local-def" href="#def-initialize-acl2" data-sym="INITIALIZE-ACL2" title="(defun initialize-acl2
       (
        &amp;optional (pass-2-ld-skip-proofsp &#39;include-book)
        &amp;aux (acl2-pass-2-files *acl2-pass-2-files*) system-books-dir
        (*do-proclaims* nil))
...">initialize-acl2</a> nil)))))
      (ld '((comp-fn <span class="keyword">:exec</span> nil <span class="string">"1"</span> state)))
      (exit-boot-strap-mode)
      (initialize-pc-acl2 *the-live-state*)
      (f-put-ld-specials <a class="sym-link system" href="axioms.html#def-_2Ainitial-ld-special-bindings_2A" data-sym="*INITIAL-LD-SPECIAL-BINDINGS*">*initial-ld-special-bindings*</a>
        nil
        *the-live-state*)
      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (check-acl2-initialization))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (probe-file *acl2-status-file*))
           (delete-file *acl2-status-file*)) (with-open-file (str *acl2-status-file* <span class="keyword">:direction</span> <span class="keyword">:output</span>)
            (format str <span class="string">"~s"</span> <span class="keyword">:initialized</span>))))
      (setq *saved-build-date-lst*
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (eval '(saved-build-date-string))))
      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block function" id="def-our-abort" data-defines="OUR-ABORT" data-references="LOCAL-TOP-LEVEL,THROW,OUR-IGNORE-ERRORS,INVOKE-RESTART,SETQ,GET-INPUT-STREAM-FROM-CHANNEL,CLEAR-INPUT,*STANDARD-OI*,STANDARD-OI,EQ,FORCE-OUTPUT,SET-DEBUGGER-ENABLE,TEMP-TOUCHABLE-FNS,W,SET-DEBUGGER-ENABLE-FN,UNTOUCHABLE-FN-P,*ACL2-ERROR-MSG*,FORMAT,TERPRI,*ACL2-TIME-LIMIT*,NOT,*ACL2-TIME-LIMIT-BOUNDP*,CONTINUE,FIND-RESTART,ABORT-SOFT,AND,WORMHOLE-NAME,IF,CONTINUE-P,CURRENT-PACKAGE,FIND-PACKAGE,*PACKAGE*,*DEBUGGER-HOOK*,LET,T,BOOT-STRAP-FLG,*LD-LEVEL*,EQL,DEBUGGER-ENABLEDP,OR,COND,PRINT-CALL-HISTORY,WHEN,PRINT-PROOF-TREE-FINISH,IGNORE,DECLARE,DEBUGGER-ENABLE,QUOTE,F-GET-GLOBAL,MEMBER-EQ,BTP,*THE-LIVE-STATE*,STATE,&AUX,Y,CONDITION,DEFUN" data-used-by="LP" data-part-name="OUR-ABORT" data-part-args="DEBUGGER-ENABLE,QUOTE,F-GET-GLOBAL,MEMBER-EQ,BTP,*THE-LIVE-STATE*,STATE,&AUX,Y,CONDITION" data-part-declare="Y,IGNORE,DECLARE" data-part-body="STATE,PRINT-PROOF-TREE-FINISH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OUR-ABORT">our-abort</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-our-abort" data-sym="OUR-ABORT" title="(defun our-abort
       (condition y
        &amp;aux (state *the-live-state*)
        (btp
         (member-eq (f-get-global &#39;debugger-enable *the-live-state*)
...">our-abort</a>
  (condition y
    &amp;aux
    (state *the-live-state*)
    (btp (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-debugger-enable" data-sym="DEBUGGER-ENABLE">debugger-enable</a> *the-live-state*)
        '(<span class="keyword">:bt</span> <span class="keyword">:break-bt</span> <span class="keyword">:bt-break</span>))))
  (declare (ignore y))
  (<a class="sym-link system" href="history-management.html#def-print-proof-tree-finish" data-sym="PRINT-PROOF-TREE-FINISH">print-proof-tree-finish</a> state)
  (when btp (<a class="sym-link system" href="axioms.html#def-print-call-history" data-sym="PRINT-CALL-HISTORY">print-call-history</a>))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-debugger-enabledp" data-sym="DEBUGGER-ENABLEDP">debugger-enabledp</a> state)
       (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> *ld-level* <span class="number">0</span>)
       (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state)) nil)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((*debugger-hook* nil) (*package* (find-package (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state)))
          (continue-p (if (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'wormhole-name state)
              nil
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'abort-soft state)
                (find-restart 'continue)
                *acl2-time-limit-boundp*
                (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> *acl2-time-limit* <span class="number">0</span>))))))
        (terpri <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"***********************************************"</span>)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (continue-p (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
              <span class="string">"~&amp;Note:  ~A~
                      ~&amp;  Will attempt to exit the proof in progress;~
                      ~&amp;  otherwise, the next interrupt will abort the proof.~
                      ~&amp;  For an immediate abort see :DOC abort-soft."</span>
              condition))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
              <span class="string">"~&amp;************ ABORTING from raw Lisp ***********"</span>)
            (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
              <span class="string">"~&amp;********** (see :DOC raw-lisp-error) **********"</span>)
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"~&amp;Error:  ~A"</span> condition)))))
        (when btp (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"~%NOTE: See above for backtrace.~%"</span>))
        (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
          <span class="string">"~&amp;***********************************************~&amp;"</span>)
        (when *acl2-error-msg* (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> *acl2-error-msg*))
        (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (untouchable-fn-p '<a class="sym-link system" href="axioms.html#def-set-debugger-enable-fn" data-sym="SET-DEBUGGER-ENABLE-FN">set-debugger-enable-fn</a>
              (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
              (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'temp-touchable-fns state)))
          (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            <span class="string">"~%To enable breaks into the debugger (also see :DOC ~
                      acl2-customization):~&amp;~s~&amp;"</span>
            '(<a class="sym-link system" href="axioms.html#def-set-debugger-enable" data-sym="SET-DEBUGGER-ENABLE">set-debugger-enable</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
        (force-output <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (when (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> state) <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>)
          (clear-input (get-input-stream-from-channel <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (continue-p (setq *acl2-time-limit* <span class="number">0</span>)
            (invoke-restart 'continue))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (our-ignore-errors (throw 'local-top-level
                (if (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'wormhole-name state)
                  <span class="keyword">:abort</span> <span class="keyword">:our-abort</span>)))))))))</pre>
  </div>

<div class="form-block function" id="def-initial-customization-filename" data-defines="INITIAL-CUSTOMIZATION-FILENAME" data-references="CFB2A,CFB2,W,OS,OUR-TRUENAME,PATHNAME-OS-TO-UNIX,CB2,OUR-USER-HOMEDIR-PATHNAME,HOME,PATHNAME-UNIX-TO-OS,CFB1A,STRING-APPEND,CFB1,OUR-MERGE-PATHNAMES,CB1,EXIT-LISP,T,FORMAT,*PRINT-CIRCLE*,LET,PROBE-FILE,EQ,COND,*THE-LIVE-STATE*,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,EXTEND-PATHNAME,NOT,AND,EQUAL,IF,CFB0,GETENV$-RAW,CFB00,LET*,DEFUN" data-used-by="LD-ACL2-CUSTOMIZATION" data-part-name="INITIAL-CUSTOMIZATION-FILENAME" data-part-body="CFB2A,CFB2,W,OS,OUR-TRUENAME,PATHNAME-OS-TO-UNIX,CB2,OUR-USER-HOMEDIR-PATHNAME,HOME,PATHNAME-UNIX-TO-OS,CFB1A,STRING-APPEND,CFB1,OUR-MERGE-PATHNAMES,CB1,EXIT-LISP,T,FORMAT,*PRINT-CIRCLE*,LET,PROBE-FILE,EQ,COND,*THE-LIVE-STATE*,CONNECTED-BOOK-DIRECTORY,QUOTE,F-GET-GLOBAL,EXTEND-PATHNAME,NOT,AND,EQUAL,IF,CFB0,GETENV$-RAW,CFB00,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INITIAL-CUSTOMIZATION-FILENAME">initial-customization-filename</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-initial-customization-filename" data-sym="INITIAL-CUSTOMIZATION-FILENAME" title="(defun initial-customization-filename ()
  (let* ((cfb00 (getenv$-raw &quot;ACL2_CUSTOMIZATION&quot;))
         (cfb0
          (if (equal cfb00 &quot;NONE&quot;)
              :none
...">initial-customization-filename</a>
  nil
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cfb00 (getenv$-raw <span class="string">"ACL2_CUSTOMIZATION"</span>)) (cfb0 (if (equal cfb00 <span class="string">"NONE"</span>)
          <span class="keyword">:none</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cfb00
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal cfb00 <span class="string">""</span>))
            (extend-pathname (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory *the-live-state*)
              cfb00
              *the-live-state*)))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> cfb0 <span class="keyword">:none</span>) <span class="keyword">:none</span>)
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cfb0 (probe-file cfb0)) cfb0)
      (cfb0 (let ((*print-circle* nil))
          (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            <span class="string">"~%ERROR: Environment variable ACL2_CUSTOMIZATION has value~%~
                 ~3T~a~%but file~%~3T~a~%does not appear to exist.~%~
                 Now quitting ACL2.  To fix this problem, you may wish~%~
                 to fix the value of that environment variable by setting it~%~
                 to a valid file name, by unsetting it, or by setting it to~%~
                 the empty string.~%~%"</span>
            cfb00
            cfb0))
        (exit-lisp <span class="number">1</span>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cb1 (<a class="sym-link system" href="basis-a.html#def-our-merge-pathnames" data-sym="OUR-MERGE-PATHNAMES">our-merge-pathnames</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'connected-book-directory *the-live-state*)
               <span class="string">"acl2-customization"</span>)) (cfb1 (<a class="sym-link system" href="axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> cb1 <span class="string">".lsp"</span>))
            (cfb1a (<a class="sym-link system" href="axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> cb1 <span class="string">".lisp"</span>)))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((probe-file (pathname-unix-to-os cfb1 *the-live-state*)) cfb1)
            ((probe-file (pathname-unix-to-os cfb1a *the-live-state*)) cfb1a)
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((home (our-user-homedir-pathname)) (cb2 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> home
                      (<a class="sym-link system" href="basis-a.html#def-our-merge-pathnames" data-sym="OUR-MERGE-PATHNAMES">our-merge-pathnames</a> (pathname-os-to-unix (our-truename home
                            <span class="string">"Note: Calling OUR-TRUENAME from ~
                                            INITIAL-CUSTOMIZATION-FILENAME"</span>)
                          (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
                          *the-live-state*)
                        <span class="string">"acl2-customization"</span>)))
                  (cfb2 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cb2 (<a class="sym-link system" href="axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> cb2 <span class="string">".lsp"</span>)))
                  (cfb2a (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cb2 (<a class="sym-link system" href="axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> cb2 <span class="string">".lisp"</span>))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (cb2 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((probe-file (pathname-unix-to-os cfb2 *the-live-state*)) cfb2)
                      ((probe-file (pathname-unix-to-os cfb2a *the-live-state*)) cfb2a)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))))))))))</pre>
  </div>

<div class="form-block other" id="form-166" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defconstant *our-standard-io*
  (make-two-way-stream *standard-input* *standard-output*))</pre>
  </div>

<div class="form-block function" id="def-ld-acl2-customization" data-defines="LD-ACL2-CUSTOMIZATION" data-references="VALUE,QUIT,FORMAT,LD-FN,CDR,CAR,SETQ,DO,LD-PROMPT,LD-POST-EVAL-PRINT,LD-PRE-EVAL-PRINT,LD-VERBOSE,IN,PAIR,FOR,LOOP,QUIET-ALIST,PRINT-CLAUSE-IDS,GAG-MODE,*VALID-OUTPUT-NAMES*,INHIBIT-OUTPUT-LST,STATE-FREE-GLOBAL-LET*,WITH-CBD-RAW,WITH-SUPPRESSION,VAL,ERP,MV-LET,*THE-LIVE-STATE*,F-GET-LD-SPECIALS,LD-ERROR-ACTION,STANDARD-OI,PUT-ASSOC-EQ,LD-ALIST,*STANDARD-CO*,CONS,LIST,FMS,WHEN,T,IF,STRING-EQUAL,EQUAL,NOT,AND,GETENV$-RAW,S,QUIETP,BOOT-STRAP-FLG,QUOTE,F-GET-GLOBAL,EQ,OR,COND,INITIAL-CUSTOMIZATION-FILENAME,CUSTOMIZATION-FULL-FILE-NAME,LET,STATE,DEFUN" data-used-by="LP" data-part-name="LD-ACL2-CUSTOMIZATION" data-part-args="STATE" data-part-body="VALUE,QUIT,FORMAT,LD-FN,CDR,CAR,SETQ,DO,LD-PROMPT,LD-POST-EVAL-PRINT,LD-PRE-EVAL-PRINT,LD-VERBOSE,IN,PAIR,FOR,LOOP,QUIET-ALIST,PRINT-CLAUSE-IDS,GAG-MODE,*VALID-OUTPUT-NAMES*,INHIBIT-OUTPUT-LST,STATE-FREE-GLOBAL-LET*,WITH-CBD-RAW,WITH-SUPPRESSION,VAL,ERP,MV-LET,*THE-LIVE-STATE*,F-GET-LD-SPECIALS,LD-ERROR-ACTION,STANDARD-OI,PUT-ASSOC-EQ,LD-ALIST,*STANDARD-CO*,CONS,LIST,FMS,WHEN,T,IF,STRING-EQUAL,EQUAL,NOT,AND,GETENV$-RAW,S,QUIETP,STATE,BOOT-STRAP-FLG,QUOTE,F-GET-GLOBAL,EQ,OR,COND,INITIAL-CUSTOMIZATION-FILENAME,CUSTOMIZATION-FULL-FILE-NAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LD-ACL2-CUSTOMIZATION">ld-acl2-customization</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ld-acl2-customization" data-sym="LD-ACL2-CUSTOMIZATION" title="(defun ld-acl2-customization (state)
  (let ((customization-full-file-name (initial-customization-filename)))
    (cond
     ((or (eq customization-full-file-name :none)
          (f-get-global &#39;boot-strap-flg state))
...">ld-acl2-customization</a>
  (state)
  (let ((customization-full-file-name (<a class="sym-link local-def" href="#def-initial-customization-filename" data-sym="INITIAL-CUSTOMIZATION-FILENAME" title="(defun initial-customization-filename ()
  (let* ((cfb00 (getenv$-raw &quot;ACL2_CUSTOMIZATION&quot;))
         (cfb0
          (if (equal cfb00 &quot;NONE&quot;)
              :none
...">initial-customization-filename</a>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> customization-full-file-name <span class="keyword">:none</span>)
         (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state)) nil)
      (customization-full-file-name (let ((quietp (let ((s (getenv$-raw <span class="string">"ACL2_CUSTOMIZATION_QUIET"</span>)))
               (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> s
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal s <span class="string">""</span>))
                 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> s <span class="string">"NIL"</span>))
                 (if (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> s <span class="string">"ALL"</span>)
                   <span class="keyword">:all</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))
          (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> quietp)
            (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Customizing with ~x0.~%"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 customization-full-file-name))
              <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
              state
              nil))
          (let ((ld-alist (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>
                 customization-full-file-name
                 (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a>
                   <span class="keyword">:error</span> (f-get-ld-specials *the-live-state*)))))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
              (with-suppression (with-cbd-raw state-free-global-let*
                  <span class="keyword">:same</span> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (quietp (state-free-global-let* ((inhibit-output-lst <a class="sym-link system" href="axioms.html#def-_2Avalid-output-names_2A" data-sym="*VALID-OUTPUT-NAMES*">*valid-output-names*</a>) (<a class="sym-link system" href="basis-a.html#def-gag-mode" data-sym="GAG-MODE">gag-mode</a> nil)
                          (print-clause-ids nil))
                        (let ((quiet-alist ld-alist))
                          (loop for
                            pair
                            in
                            '((<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a>) (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> . <span class="keyword">:never</span>)
                              (<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a>)
                              (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a>))
                            do
                            (setq quiet-alist
                              (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> (car pair) (cdr pair) quiet-alist)))
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> quietp <span class="keyword">:all</span>) (ld-fn quiet-alist *the-live-state* nil))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (state-free-global-let* ((<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> nil) (<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a> <span class="keyword">:never</span>)
                                  (<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> nil)
                                  (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> nil))
                                (ld-fn quiet-alist *the-live-state* nil)))))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (ld-fn ld-alist *the-live-state* nil)))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                    <span class="string">"**Error encountered during LD of ACL2 ~
                                  customization file,~%~s.~%Quitting....~%"</span>
                    customization-full-file-name)
                  (<a class="sym-link system" href="basis-a.html#def-quit" data-sym="QUIT">quit</a> <span class="number">1</span>))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))))))))))</pre>
  </div>

<div class="form-block function" id="def-project-dir-filename" data-defines="PROJECT-DIR-FILENAME" data-references="VALUE,SOFT,ER,*DIRECTORY-SEPARATOR*,LENGTH,1-,CHAR,EQL,NOT,EQUAL,OR,AND,COND,T,EXTEND-PATHNAME+,DIR,LET*,STATE,CTX,KEY,FILENAME-DIR,FILENAME,DIR0,DEFUN" data-used-by="PROJECT-DIR-ALIST-FROM-FILE-REC" data-part-name="PROJECT-DIR-FILENAME" data-part-args="STATE,CTX,KEY,FILENAME-DIR,FILENAME,DIR0" data-part-body="VALUE,KEY,CTX,SOFT,ER,FILENAME,*DIRECTORY-SEPARATOR*,LENGTH,1-,CHAR,EQL,NOT,EQUAL,OR,AND,COND,STATE,T,DIR0,FILENAME-DIR,EXTEND-PATHNAME+,DIR,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROJECT-DIR-FILENAME">project-dir-filename</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-project-dir-filename" data-sym="PROJECT-DIR-FILENAME" title="(defun project-dir-filename (dir0 filename filename-dir key ctx state)
  (let* ((dir (extend-pathname+ filename-dir dir0 t state)))
    (cond
     ((and dir
           (or (equal dir &quot;&quot;)
...">project-dir-filename</a>
  (dir0 filename filename-dir key ctx state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((dir (extend-pathname+ filename-dir dir0 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> dir
         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (equal dir <span class="string">""</span>)
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> dir (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> dir))) <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator_2A" data-sym="*DIRECTORY-SEPARATOR*">*directory-separator*</a>)))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (filename (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The project pathname ~x0, supplied in file ~x1 for the key ~
                  ~x2, represents a file but not a directory."</span>
              dir0
              filename
              key))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The pathname ~x0, supplied by environment variable ~
                  ACL2_SYSTEM_BOOKS, represents a file but not a directory."</span>
              dir0))))
      (dir (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> dir))
      (filename (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The project pathname ~x0, supplied in file ~x1 for the key ~
                ~x2, represents a directory that does not exist."</span>
          dir0
          filename
          key))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The pathname ~x0, supplied by environment variable ~
                ACL2_SYSTEM_BOOKS, represents a directory that does not exist."</span>
          dir0)))))</pre>
  </div>

<div class="form-block function" id="def-project-dir-alist-from-file-rec" data-defines="PROJECT-DIR-ALIST-FROM-FILE-REC" data-references="ACONS,CDDR,REST,PROJECT-DIR-FILENAME,DIR,ER-LET*,EQUAL,IF,DIR1,CADR,DIR0,CAR,KEY,LET*,T,VALUE,ENDP,COND,ODDS,STRING-LISTP,KEYWORD-VALUE-LISTP,AND,XARGS,DECLARE,STATE,CTX,FILENAME-DIR,FILENAME,LST,DEFUN" data-used-by="PROJECT-DIR-ALIST-FROM-FILE-0" data-part-name="PROJECT-DIR-ALIST-FROM-FILE-REC" data-part-args="STATE,CTX,FILENAME-DIR,FILENAME,LST" data-part-declare="ODDS,STRING-LISTP,LST,KEYWORD-VALUE-LISTP,AND,XARGS,DECLARE" data-part-body="ACONS,CDDR,PROJECT-DIR-ALIST-FROM-FILE-REC,REST,STATE,CTX,FILENAME-DIR,FILENAME,PROJECT-DIR-FILENAME,DIR,ER-LET*,EQUAL,IF,DIR1,CADR,DIR0,CAR,KEY,LET*,T,VALUE,LST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROJECT-DIR-ALIST-FROM-FILE-REC">project-dir-alist-from-file-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-project-dir-alist-from-file-rec" data-sym="PROJECT-DIR-ALIST-FROM-FILE-REC" title="(defun project-dir-alist-from-file-rec (lst filename filename-dir ctx state)
  (declare
   (xargs :guard (and (keyword-value-listp lst) (string-listp (odds lst)))))
  (cond ((endp lst) (value nil))
        (t
...">project-dir-alist-from-file-rec</a>
  (lst filename filename-dir ctx state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> lst) (<a class="sym-link system" href="axioms.html#def-string-listp" data-sym="STRING-LISTP">string-listp</a> (<a class="sym-link system" href="axioms.html#def-odds" data-sym="ODDS">odds</a> lst)))))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> lst) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((key (car lst)) (dir0 (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> lst))
          (dir1 (if (equal dir0 <span class="string">""</span>)
              <span class="string">"./"</span>
              dir0)))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((dir (<a class="sym-link local-def" href="#def-project-dir-filename" data-sym="PROJECT-DIR-FILENAME" title="(defun project-dir-filename (dir0 filename filename-dir key ctx state)
  (let* ((dir (extend-pathname+ filename-dir dir0 t state)))
    (cond
     ((and dir
           (or (equal dir &quot;&quot;)
...">project-dir-filename</a> dir1
               filename
               filename-dir
               key
               ctx
               state)) (<a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a> (<a class="sym-link local-def" href="#def-project-dir-alist-from-file-rec" data-sym="PROJECT-DIR-ALIST-FROM-FILE-REC" title="(defun project-dir-alist-from-file-rec (lst filename filename-dir ctx state)
  (declare
   (xargs :guard (and (keyword-value-listp lst) (string-listp (odds lst)))))
  (cond ((endp lst) (value nil))
        (t
...">project-dir-alist-from-file-rec</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> lst)
                filename
                filename-dir
                ctx
                state)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> (car lst) dir <a class="sym-link system" href="axioms.html#def-rest" data-sym="REST">rest</a>)))))))</pre>
  </div>

<div class="form-block function" id="def-project-dir-alist-from-file-0" data-defines="PROJECT-DIR-ALIST-FROM-FILE-0" data-references="DIRECTORY-OF-ABSOLUTE-PATHNAME,PROJECT-DIR-ALIST-FROM-FILE-REC,EQUAL,IF,NULL,CANONICAL-UNIX-PATHNAME,ABS,T,PROJECT-DIR-FILE-P,SOFT,ER,KEYWORD-VALUE-STRING-LISTP,NOT,COND,MSG,READ-FILE+,LST,ER-LET*,W,OS,PATHNAME-OS-TO-UNIX,FILENAME-U,LET,XARGS,DECLARE,STATE,CTX,FILENAME,DEFUN" data-used-by="PROJECT-DIR-ALIST-FROM-FILE" data-part-name="PROJECT-DIR-ALIST-FROM-FILE-0" data-part-args="STATE,CTX,FILENAME" data-part-declare="STATE,XARGS,DECLARE" data-part-body="DIRECTORY-OF-ABSOLUTE-PATHNAME,PROJECT-DIR-ALIST-FROM-FILE-REC,EQUAL,IF,NULL,CANONICAL-UNIX-PATHNAME,ABS,T,PROJECT-DIR-FILE-P,SOFT,ER,KEYWORD-VALUE-STRING-LISTP,NOT,COND,CTX,MSG,READ-FILE+,LST,ER-LET*,STATE,W,OS,FILENAME,PATHNAME-OS-TO-UNIX,FILENAME-U,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROJECT-DIR-ALIST-FROM-FILE-0">project-dir-alist-from-file-0</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-project-dir-alist-from-file-0" data-sym="PROJECT-DIR-ALIST-FROM-FILE-0" title="(defun project-dir-alist-from-file-0 (filename ctx state)
  (declare (xargs :stobjs state :mode :program))
  (let ((filename-u (pathname-os-to-unix filename (os (w state)) state)))
    (er-let*
     ((lst
...">project-dir-alist-from-file-0</a>
  (filename ctx state)
  (declare (xargs <span class="keyword">:stobjs</span> state <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (let ((filename-u (pathname-os-to-unix filename (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) state)))
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((lst (<a class="sym-link system" href="basis-b.html#def-read-file_2B" data-sym="READ-FILE+">read-file+</a> filename-u
           (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"Unable to open file ~x0 to read the ~
                                     project-dir-alist."</span>
             filename)
           ctx
           state)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (keyword-value-string-listp lst)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The value read for the project-dir-alist must be an ~
                  alternating list of keywords and strings, starting with a ~
                  keyword.  But the value read from file ~x0 is ~x1, which ~
                  does not have that property."</span>
            filename
            lst))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (project-dir-file-p filename-u state)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
            ctx
            <span class="string">"The value read for the project-dir-alist is, as expected, ~
                  an alternating list of keywords and strings, starting with ~
                  a keyword.  But each line must either be blank, be a ~
                  comment (i.e., its first non-whitespace character is `;&#39;), ~
                  or contain a keyword followed by a filename without `&quot;&#39; in ~
                  its name.  File ~x0 does not have that property."</span>
            filename))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((abs (canonical-unix-pathname filename-u nil state)))
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> abs) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                  ctx
                  <span class="string">"Surprising error: Unable to get the absolute pathname ~
                      for file ~x0~@1."</span>
                  filename-u
                  (if (equal filename filename-u)
                    <span class="string">""</span>
                    (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" (which was obtained from filename ~x0)"</span> filename))))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-project-dir-alist-from-file-rec" data-sym="PROJECT-DIR-ALIST-FROM-FILE-REC" title="(defun project-dir-alist-from-file-rec (lst filename filename-dir ctx state)
  (declare
   (xargs :guard (and (keyword-value-listp lst) (string-listp (odds lst)))))
  (cond ((endp lst) (value nil))
        (t
...">project-dir-alist-from-file-rec</a> lst
                  abs
                  (directory-of-absolute-pathname abs)
                  ctx
                  state)))))))))</pre>
  </div>

<div class="form-block function" id="def-project-dir-alist-from-file" data-defines="PROJECT-DIR-ALIST-FROM-FILE" data-references="T,RETURN,DO,WHEN,CDR,CDAR,RASSOC-EQUAL,THEREIS,ON,TAIL,FOR,LOOP,CAR,SOFT,ER,DUPLICATE-KEYSP-EQ,COND,PROJECT-DIR-ALIST-FROM-FILE-0,VAL,ER-LET*,VALUE,CONS,SET-INHIBIT-OUTPUT-LST,IF,ER-PROGN,ERROR,MEMBER-EQ,FLG,INHIBIT-OUTPUT-LST,QUOTE,F-GET-GLOBAL,OLD-INH,LET*,STATE,CTX,FILENAME,DEFUN" data-used-by="ESTABLISH-PROJECT-DIR-ALIST" data-part-name="PROJECT-DIR-ALIST-FROM-FILE" data-part-args="STATE,CTX,FILENAME" data-part-body="T,RETURN,DO,WHEN,CDR,CDAR,RASSOC-EQUAL,THEREIS,ON,TAIL,FOR,LOOP,CAR,SOFT,ER,DUPLICATE-KEYSP-EQ,COND,CTX,FILENAME,PROJECT-DIR-ALIST-FROM-FILE-0,VAL,ER-LET*,VALUE,CONS,SET-INHIBIT-OUTPUT-LST,IF,ER-PROGN,ERROR,MEMBER-EQ,FLG,STATE,INHIBIT-OUTPUT-LST,QUOTE,F-GET-GLOBAL,OLD-INH,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROJECT-DIR-ALIST-FROM-FILE">project-dir-alist-from-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-project-dir-alist-from-file" data-sym="PROJECT-DIR-ALIST-FROM-FILE" title="(defun project-dir-alist-from-file (filename ctx state)
  (let* ((old-inh (f-get-global &#39;inhibit-output-lst state))
         (flg (member-eq &#39;error old-inh)))
    (er-progn
     (if flg
...">project-dir-alist-from-file</a>
  (filename ctx state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((old-inh (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state)) (flg (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'error old-inh)))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if flg
        (<a class="sym-link system" href="basis-b.html#def-set-inhibit-output-lst" data-sym="SET-INHIBIT-OUTPUT-LST">set-inhibit-output-lst</a> (cons 'error old-inh))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((val (<a class="sym-link local-def" href="#def-project-dir-alist-from-file-0" data-sym="PROJECT-DIR-ALIST-FROM-FILE-0" title="(defun project-dir-alist-from-file-0 (filename ctx state)
  (declare (xargs :stobjs state :mode :program))
  (let ((filename-u (pathname-os-to-unix filename (os (w state)) state)))
    (er-let*
     ((lst
...">project-dir-alist-from-file-0</a> filename ctx state)))
        (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (if flg
            (<a class="sym-link system" href="basis-b.html#def-set-inhibit-output-lst" data-sym="SET-INHIBIT-OUTPUT-LST">set-inhibit-output-lst</a> old-inh)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((duplicate-keysp-eq val) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The keyword ~x0 occurs more than once in the ~
                        ACL2_PROJECTS file, ~x1."</span>
                (car (duplicate-keysp-eq val))
                filename))
            ((loop for
               tail
               on
               val
               thereis
               (<a class="sym-link system" href="axioms.html#def-rassoc-equal" data-sym="RASSOC-EQUAL">rassoc-equal</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> tail) (cdr tail))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The directory ~x0 is specified more than once in the ~
                        ACL2_PROJECTS file, ~x1."</span>
                (loop for
                  tail
                  on
                  val
                  when
                  (<a class="sym-link system" href="axioms.html#def-rassoc-equal" data-sym="RASSOC-EQUAL">rassoc-equal</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> tail) (cdr tail))
                  do
                  (return (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> tail)))
                filename))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val))))))))</pre>
  </div>

<div class="form-block function" id="def-replace-project-dir-alist" data-defines="REPLACE-PROJECT-DIR-ALIST" data-references="ERROR,FINALLY,T,RETURN,CDDR,PROGN,DO,CAR,WHEN,*THE-LIVE-STATE*,W,EVENT,LOOKUP-WORLD-INDEX,IN,TRIP,FOR,LOOP,SETF,*ACL2-PROPERTY-UNBOUND*,CADR,EQ,NOT,CDR,CONSP,AND,ASSERT,*CURRENT-ACL2-WORLD-KEY*,GET,GLOBAL-VALUE,QUOTE,ASSOC-EQ,DOUBLET,MERGE-SORT-LENGTH>=-CDR,SORTED-PROJECT-DIR-ALIST,LET,PROJECT-DIR-ALIST,DEFUN" data-used-by="ESTABLISH-PROJECT-DIR-ALIST" data-part-name="REPLACE-PROJECT-DIR-ALIST" data-part-args="PROJECT-DIR-ALIST" data-part-body="ERROR,FINALLY,T,RETURN,CDDR,PROGN,DO,CAR,WHEN,*THE-LIVE-STATE*,W,EVENT,LOOKUP-WORLD-INDEX,IN,TRIP,FOR,LOOP,SETF,*ACL2-PROPERTY-UNBOUND*,CADR,EQ,NOT,CDR,CONSP,AND,ASSERT,*CURRENT-ACL2-WORLD-KEY*,GET,GLOBAL-VALUE,QUOTE,ASSOC-EQ,DOUBLET,PROJECT-DIR-ALIST,MERGE-SORT-LENGTH>=-CDR,SORTED-PROJECT-DIR-ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REPLACE-PROJECT-DIR-ALIST">replace-project-dir-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-replace-project-dir-alist" data-sym="REPLACE-PROJECT-DIR-ALIST" title="(defun replace-project-dir-alist (project-dir-alist)
  (let ((sorted-project-dir-alist (merge-sort-length&gt;=-cdr project-dir-alist)))
    (let ((doublet
           (assoc-eq &#39;global-value
                     (get &#39;project-dir-alist *current-acl2-world-key*))))
...">replace-project-dir-alist</a>
  (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>)
  (let ((sorted-project-dir-alist (merge-sort-length&gt;=-cdr <a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>)))
    (let ((doublet (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> 'global-value
           (get '<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> *current-acl2-world-key*))))
      (assert (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp doublet)
          (consp (cdr doublet))
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> doublet) <a class="sym-link system" href="axioms.html#def-_2Aacl2-property-unbound_2A" data-sym="*ACL2-PROPERTY-UNBOUND*">*acl2-property-unbound*</a>))))
      (setf (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> doublet) sorted-project-dir-alist))
    (loop for
      trip
      in
      (lookup-world-index 'event <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
      when
      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) '<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a>)
        (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value))
      do
      (<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (setf (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip) sorted-project-dir-alist)
        (return <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      finally
      (error <span class="string">"Implementation error: Failure in ~
                          replace-project-dir-alist!"</span>))))</pre>
  </div>

<div class="form-block function" id="def-establish-project-dir-alist" data-defines="ESTABLISH-PROJECT-DIR-ALIST" data-references="EXIT,PROG2$,*STANDARD-CO*,FMS,PPROGN,ACONS,ADD-INCLUDE-BOOK-DIR!,ADD-INCLUDE-BOOK-DIR,CDDR,CADR,MV,FN,OLD,NEW,K,C2,C1,LET*,INCLUDE-BOOK-DIR!-TABLE,ACL2-DEFAULTS-TABLE,QUOTE,TABLE-ALIST,CONFLICTING-SYMBOL-ALISTS,WRLD,CAR,REMOVE-ASSOC-EQUAL,PAIR,LET,REMOVE-ASSOC-EQ,OR,RASSOC-EQUAL,MSG,SOFT,ER,DIR0,CDR,EQUAL,NOT,PUT-ASSOC-EQ,REPLACE-PROJECT-DIR-ALIST,WHEN,NULL,COND,PROJECT-DIR-ALIST,OLD-PROJECT-DIR-ALIST,ASSOC-EQ,NEW-SYS-PAIR,PROJECT-DIR-ALIST-FROM-FILE,IF,PROJ-ALIST,GETENV$,PROJ-FILE,T,W,OS,PATHNAME-OS-TO-UNIX,CBD,EXTEND-PATHNAME+,AND,VALUE,SYSTEM-BOOKS-DIR,ER-LET*,VAL,ERP,MV-LET,XARGS,DECLARE,STATE,CTX,SYSTEM-DIR0,DEFUN" data-used-by="LP" data-part-name="ESTABLISH-PROJECT-DIR-ALIST" data-part-args="STATE,CTX,SYSTEM-DIR0" data-part-declare="STATE,XARGS,DECLARE" data-part-body="EXIT,PROG2$,*STANDARD-CO*,FMS,PPROGN,ACONS,ADD-INCLUDE-BOOK-DIR!,ADD-INCLUDE-BOOK-DIR,CDDR,CADR,MV,FN,OLD,NEW,K,C2,C1,LET*,INCLUDE-BOOK-DIR!-TABLE,ACL2-DEFAULTS-TABLE,QUOTE,TABLE-ALIST,CONFLICTING-SYMBOL-ALISTS,WRLD,CAR,REMOVE-ASSOC-EQUAL,PAIR,LET,REMOVE-ASSOC-EQ,OR,RASSOC-EQUAL,MSG,SOFT,ER,DIR0,CDR,EQUAL,NOT,PUT-ASSOC-EQ,REPLACE-PROJECT-DIR-ALIST,WHEN,NULL,COND,PROJECT-DIR-ALIST,OLD-PROJECT-DIR-ALIST,ASSOC-EQ,NEW-SYS-PAIR,CTX,PROJECT-DIR-ALIST-FROM-FILE,IF,PROJ-ALIST,GETENV$,PROJ-FILE,T,W,OS,PATHNAME-OS-TO-UNIX,CBD,EXTEND-PATHNAME+,SYSTEM-DIR0,AND,VALUE,SYSTEM-BOOKS-DIR,ER-LET*,STATE,VAL,ERP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ESTABLISH-PROJECT-DIR-ALIST">establish-project-dir-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-establish-project-dir-alist" data-sym="ESTABLISH-PROJECT-DIR-ALIST" title="(defun establish-project-dir-alist (system-dir0 ctx state)
  (declare (xargs :stobjs state :mode :program))
  (mv-let (erp val state)
          (er-let*
           ((system-books-dir
...">establish-project-dir-alist</a>
  (system-dir0 ctx state)
  (declare (xargs <span class="keyword">:stobjs</span> state <span class="keyword">:mode</span> <span class="keyword">:program</span>))
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
    (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((<a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> system-dir0
             (extend-pathname+ (cbd)
               (pathname-os-to-unix system-dir0 (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) state)
               <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
               state)))) (proj-file (<a class="sym-link system" href="axioms.html#def-getenv_24" data-sym="GETENV$">getenv$</a> <span class="string">"ACL2_PROJECTS"</span> state))
        (proj-alist (if proj-file
            (<a class="sym-link local-def" href="#def-project-dir-alist-from-file" data-sym="PROJECT-DIR-ALIST-FROM-FILE" title="(defun project-dir-alist-from-file (filename ctx state)
  (let* ((old-inh (f-get-global &#39;inhibit-output-lst state))
         (flg (member-eq &#39;error old-inh)))
    (er-progn
     (if flg
...">project-dir-alist-from-file</a> proj-file ctx state)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
        (new-sys-pair (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:system</span> proj-alist)))
        (old-project-dir-alist (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="basis-a.html#def-project-dir-alist" data-sym="PROJECT-DIR-ALIST">project-dir-alist</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> proj-file) (when <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>
            (<a class="sym-link local-def" href="#def-replace-project-dir-alist" data-sym="REPLACE-PROJECT-DIR-ALIST" title="(defun replace-project-dir-alist (project-dir-alist)
  (let ((sorted-project-dir-alist (merge-sort-length&gt;=-cdr project-dir-alist)))
    (let ((doublet
           (assoc-eq &#39;global-value
                     (get &#39;project-dir-alist *current-acl2-world-key*))))
...">replace-project-dir-alist</a> (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:system</span> <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>
                old-project-dir-alist)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> new-sys-pair
           <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>
           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (cdr new-sys-pair) <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>))) (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((dir0 (<a class="sym-link system" href="axioms.html#def-getenv_24" data-sym="GETENV$">getenv$</a> <span class="string">"ACL2_SYSTEM_BOOKS"</span> state)))
            (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The project-dir-alist read from file ~x0 associates :SYSTEM ~
               with ~x1.  This conflicts with the value ~x2 associated with ~
               :SYSTEM~@3."</span>
              proj-file
              (cdr new-sys-pair)
              <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>
              (if dir0
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">" using environment variable ACL2_SYSTEM_BOOKS"</span>)
                (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">", which is the pathname of the books/ directory of your ~
                      ACL2 distribution"</span>)))))
        ((<a class="sym-link system" href="axioms.html#def-rassoc-equal" data-sym="RASSOC-EQUAL">rassoc-equal</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>
             (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:system</span> old-project-dir-alist)))
           (<a class="sym-link system" href="axioms.html#def-remove-assoc-eq" data-sym="REMOVE-ASSOC-EQ">remove-assoc-eq</a> <span class="keyword">:system</span> proj-alist)) (let ((pair (<a class="sym-link system" href="axioms.html#def-rassoc-equal" data-sym="RASSOC-EQUAL">rassoc-equal</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>
                   (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:system</span> old-project-dir-alist)))
                 (<a class="sym-link system" href="axioms.html#def-remove-assoc-equal" data-sym="REMOVE-ASSOC-EQUAL">remove-assoc-equal</a> <span class="keyword">:system</span> proj-alist))))
            (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              ctx
              <span class="string">"The project-dir-alist read from file ~x0 associates keyword ~
               ~x1 with ~x2, which is also the system books directory."</span>
              proj-file
              (car pair)
              (cdr pair))))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (let ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
             (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (conflicting-symbol-alists proj-alist
                 (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:include-book-dir-alist</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld))))
               (conflicting-symbol-alists proj-alist
                 (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'include-book-dir!-table wrld))))) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (c1 (conflicting-symbol-alists proj-alist
                  (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:include-book-dir-alist</span> (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'acl2-defaults-table wrld)))))
              (c2 (conflicting-symbol-alists proj-alist
                  (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'include-book-dir!-table wrld))))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (k new old fn)
              (if c1
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car c1) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> c1) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> c1) '<a class="sym-link system" href="axioms.html#def-add-include-book-dir" data-sym="ADD-INCLUDE-BOOK-DIR">add-include-book-dir</a>)
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car c2) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> c2) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> c2) '<a class="sym-link system" href="axioms.html#def-add-include-book-dir_21" data-sym="ADD-INCLUDE-BOOK-DIR!">add-include-book-dir!</a>))
              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The project-dir-alist read from file ~x0 assigns the value ~
                 ~x1 to the key ~x2.  But before the present ACL2 executable ~
                 was created with save-exec, that key was associated with a ~
                 different value by ~x3, namely, ~x4."</span>
                proj-file
                new
                k
                fn
                old))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-replace-project-dir-alist" data-sym="REPLACE-PROJECT-DIR-ALIST" title="(defun replace-project-dir-alist (project-dir-alist)
  (let ((sorted-project-dir-alist (merge-sort-length&gt;=-cdr project-dir-alist)))
    (let ((doublet
           (assoc-eq &#39;global-value
                     (get &#39;project-dir-alist *current-acl2-world-key*))))
...">replace-project-dir-alist</a> (if new-sys-pair
              proj-alist
              (<a class="sym-link system" href="axioms.html#def-acons" data-sym="ACONS">acons</a> <span class="keyword">:system</span> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> <a class="sym-link system" href="basis-a.html#def-system-books-dir" data-sym="SYSTEM-BOOKS-DIR">system-books-dir</a>
                  (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:system</span> old-project-dir-alist)))
                proj-alist)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"**ABORTING start of ACL2!**~|Address the error ~
                             noted above in order to run ACL2.~|See :DOC ~
                             project-dir-alist."</span>
            nil
            <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
            state
            nil)
          (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="basis-a.html#def-exit" data-sym="EXIT">exit</a> <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> val)))))</pre>
  </div>

<div class="form-block function" id="def-lp" data-defines="LP" data-references="EQ,REMOVE,VALUES,*STANDARD-CO*,APPEND,*LP-INIT-FORMS*,*STANDARD-OI*,LD-POST-EVAL-PRINT,LD-PROMPT,LD-VERBOSE,STATE-FREE-GLOBAL-LET*,VALUE,*RETURN-FROM-LP*,WITH-SUPPRESSION,LD-ERROR-ACTION,F-GET-LD-SPECIALS,LD-PRE-EVAL-PRINT,SET-CHECK-INVARIANT-RISK,STANDARD-OI,PUT-ASSOC-EQ,LD-FN,MEMBER-EQUAL,VAL2,VAL1,VAL,LD-ACL2-CUSTOMIZATION,SETUP-STANDARD-IO,MAKE,PC-INFO,SERIALIZE-CHARACTER-SYSTEM,SET-GAG-MODE-FN,ESTABLISH-PROJECT-DIR-ALIST,BOOK-HASH-ALISTP,SET-FAST-CERT,SAVE-EXPANSION-FILE,SYSTEM-DIR0,W,OS,PATHNAME-OS-TO-UNIX,USER-HOME-DIR,SUBSEQ,*DIRECTORY-SEPARATOR*,LENGTH,1-,CHAR,EQL,IF,OS-USER-HOME-DIR,OUR-TRUENAME,OS-USER-HOME-DIR0,OUR-USER-HOMEDIR-PATHNAME,OS-USER-HOME-DIR-PATH,OR,BOOK-HASH-ALISTP-ENV,STRING-EQUAL,X,FAST-CERT-STATUS,F-GET-GLOBAL,NULL,FAST-CERT-MODE-VAL,STRING-UPCASE,EQUAL,AND,GETENV$-RAW,S,SAVE-EXPANSION,LET*,DEFINE-OUR-SBCL-PUTENV,BREAK-ON-OVERFLOW-AND-NAN,OUR-ABORT,*DEBUGGER-HOOK*,IN-PACKAGE,QUASIQUOTE,EVAL,SET-INITIAL-CBD,PUSH-CURRENT-ACL2-WORLD,SAVED-OUTPUT-REVERSED,F-PUT-GLOBAL,*LP-EVER-ENTERED-P*,RETURN-FROM,STANDARD-CO,FMS,RAW-MODE-P,*LD-LEVEL*,>,COND,*FEATURES*,PUSHNEW,*OUR-STANDARD-IO*,*DEBUG-IO*,*THE-LIVE-STATE*,STATE,LET,UNWIND-PROTECT,WITH-MORE-WARNINGS-SUPPRESSED,DOUBLE-FLOAT,QUOTE,*READ-DEFAULT-FLOAT-FORMAT*,SETQ,T,ACL2-DEFAULT-RESTART,*ACL2-DEFAULT-RESTART-COMPLETE*,NOT,ERROR,WHEN,ARGS,&REST,DEFUN" data-part-name="LP" data-part-args="ARGS,&REST" data-part-body="ERROR,ARGS,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LP">lp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-lp" data-sym="LP" title="(defun lp (&amp;rest args)
  (when args (error &quot;LP takes no arguments.&quot;))
  (when (not *acl2-default-restart-complete*) (acl2-default-restart t))
  (setq *read-default-float-format* &#39;double-float)
  (with-more-warnings-suppressed
...">lp</a>
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (when <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (error <span class="string">"LP takes no arguments."</span>))
  (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> *acl2-default-restart-complete*)
    (acl2-default-restart <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (setq *read-default-float-format* 'double-float)
  (with-more-warnings-suppressed (unwind-protect (let ((state *the-live-state*) (*debug-io* *our-standard-io*))
        (pushnew <span class="keyword">:acl2-loop-only</span> *features*)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> *ld-level* <span class="number">0</span>) (when (<a class="sym-link system" href="axioms.html#def-raw-mode-p" data-sym="RAW-MODE-P">raw-mode-p</a> *the-live-state*)
              (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"You have attempted to enter the ACL2 read-eval-print loop ~
                   from within raw mode.  However, you appear already to be ~
                   in that loop.  If your intention is to leave raw mode, ~
                   then execute:  :set-raw-mode nil.~|"</span>
                nil
                (<a class="sym-link system" href="basis-a.html#def-standard-co" data-sym="STANDARD-CO">standard-co</a> *the-live-state*)
                *the-live-state*
                nil))
            (return-from <a class="sym-link local-def" href="#def-lp" data-sym="LP" title="(defun lp (&amp;rest args)
  (when args (error &quot;LP takes no arguments.&quot;))
  (when (not *acl2-default-restart-complete*) (acl2-default-restart t))
  (setq *read-default-float-format* &#39;double-float)
  (with-more-warnings-suppressed
...">lp</a> nil))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> *lp-ever-entered-p*) (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'saved-output-reversed nil state)
            (<a class="sym-link system" href="prove.html#def-push-current-acl2-world" data-sym="PUSH-CURRENT-ACL2-WORLD">push-current-acl2-world</a> 'saved-output-reversed
              *the-live-state*)
            (<a class="sym-link local-def" href="#def-set-initial-cbd" data-sym="SET-INITIAL-CBD" title="(defun set-initial-cbd ()
  (let ((state *the-live-state*))
    (setq *initial-cbd* (our-pwd))
    (cond
     ((and (stringp *initial-cbd*) (not (equal *initial-cbd* &quot;&quot;))
...">set-initial-cbd</a>)
            (eval `(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> ,*STARTUP-PACKAGE-NAME*))
            (setq *debugger-hook* '<a class="sym-link local-def" href="#def-our-abort" data-sym="OUR-ABORT" title="(defun our-abort
       (condition y
        &amp;aux (state *the-live-state*)
        (btp
         (member-eq (f-get-global &#39;debugger-enable *the-live-state*)
...">our-abort</a>)
            (break-on-overflow-and-nan)
            (define-our-sbcl-putenv)
            (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((save-expansion (let ((s (getenv$-raw <span class="string">"ACL2_SAVE_EXPANSION"</span>)))
                   (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> s
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal s <span class="string">""</span>))
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="axioms.html#def-string-upcase" data-sym="STRING-UPCASE">string-upcase</a> s) <span class="string">"NIL"</span>))))) (fast-cert-mode-val (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'fast-cert-status state))
                    (let ((x (getenv$-raw <span class="string">"ACL2_FAST_CERT"</span>)))
                      (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> x
                        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal x <span class="string">""</span>) nil)
                          ((<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> x <span class="string">"accept"</span>) <span class="keyword">:accept</span>)
                          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))))
                (book-hash-alistp-env (let ((s (getenv$-raw <span class="string">"ACL2_BOOK_HASH_ALISTP"</span>)))
                    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> s) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal (<a class="sym-link system" href="axioms.html#def-string-upcase" data-sym="STRING-UPCASE">string-upcase</a> s) <span class="string">"NIL"</span>)))))
                (os-user-home-dir-path (our-user-homedir-pathname))
                (os-user-home-dir0 (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> os-user-home-dir-path
                    (our-truename os-user-home-dir-path
                      <span class="string">"Note: Calling OUR-TRUENAME from ~
                                            LP."</span>)))
                (os-user-home-dir (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> os-user-home-dir0
                    (if (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> os-user-home-dir0 (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> os-user-home-dir0)))
                        <a class="sym-link system" href="axioms.html#def-_2Adirectory-separator_2A" data-sym="*DIRECTORY-SEPARATOR*">*directory-separator*</a>)
                      (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> os-user-home-dir0 <span class="number">0</span> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> os-user-home-dir0)))
                      os-user-home-dir0)))
                (user-home-dir (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> os-user-home-dir
                    (pathname-os-to-unix os-user-home-dir
                      (<a class="sym-link system" href="axioms.html#def-os" data-sym="OS">os</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*))
                      *the-live-state*)))
                (system-dir0 (getenv$-raw <span class="string">"ACL2_SYSTEM_BOOKS"</span>)))
              (when save-expansion
                (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'save-expansion-file <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> *the-live-state*))
              (when fast-cert-mode-val
                (<a class="sym-link system" href="history-management.html#def-set-fast-cert" data-sym="SET-FAST-CERT">set-fast-cert</a> fast-cert-mode-val state))
              (when book-hash-alistp-env
                (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'book-hash-alistp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> *the-live-state*))
              (when user-home-dir
                (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'user-home-dir user-home-dir *the-live-state*))
              (<a class="sym-link local-def" href="#def-establish-project-dir-alist" data-sym="ESTABLISH-PROJECT-DIR-ALIST" title="(defun establish-project-dir-alist (system-dir0 ctx state)
  (declare (xargs :stobjs state :mode :program))
  (mv-let (erp val state)
          (er-let*
           ((system-books-dir
...">establish-project-dir-alist</a> system-dir0
                '<a class="sym-link local-def" href="#def-lp" data-sym="LP" title="(defun lp (&amp;rest args)
  (when args (error &quot;LP takes no arguments.&quot;))
  (when (not *acl2-default-restart-complete*) (acl2-default-restart t))
  (setq *read-default-float-format* &#39;double-float)
  (with-more-warnings-suppressed
...">lp</a>
                *the-live-state*))
            (<a class="sym-link system" href="basis-b.html#def-set-gag-mode-fn" data-sym="SET-GAG-MODE-FN">set-gag-mode-fn</a> <span class="keyword">:goals</span> *the-live-state*)
            (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'serialize-character-system #\Z state)
            (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'pc-info
              (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> pc-info
                <span class="keyword">:print-macroexpansion-flg</span> nil
                <span class="keyword">:print-prompt-and-instr-flg</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                <span class="keyword">:prompt</span> <span class="string">"-&gt;: "</span>
                <span class="keyword">:prompt-depth-prefix</span> <span class="string">"#"</span>)
              state)
            (setup-standard-io)
            (<a class="sym-link local-def" href="#def-ld-acl2-customization" data-sym="LD-ACL2-CUSTOMIZATION" title="(defun ld-acl2-customization (state)
  (let ((customization-full-file-name (initial-customization-filename)))
    (cond
     ((or (eq customization-full-file-name :none)
          (f-get-global &#39;boot-strap-flg state))
...">ld-acl2-customization</a> state)
            (let ((val (getenv$-raw <span class="string">"ACL2_CHECK_INVARIANT_RISK"</span>)))
              (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> val (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (equal val <span class="string">""</span>)))
                (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((val1 (<a class="sym-link system" href="axioms.html#def-string-upcase" data-sym="STRING-UPCASE">string-upcase</a> val)) (val2 (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal val1 <span class="string">"NIL"</span>) nil)
                        ((equal val1 <span class="string">"T"</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                        ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> val1 '(<span class="string">":ERROR"</span> <span class="string">"ERROR"</span>)) <span class="keyword">:error</span>)
                        ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> val1 '(<span class="string">":WARNING"</span> <span class="string">"WARNING"</span>)) <span class="keyword">:warning</span>)
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (error <span class="string">"Error detected in ~
                                        initialize-state-globals:~%Illegal ~
                                        value, ~s, for environment variable ~
                                        ACL2_CHECK_INVARIANT_RISK.~%See :DOC ~
                                        invariant-risk."</span>
                            val1)))))
                  (ld-fn (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>
                      `((set-check-invariant-risk ,VAL2))
                      (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-ld-pre-eval-print" data-sym="LD-PRE-EVAL-PRINT">ld-pre-eval-print</a>
                        <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                        (f-get-ld-specials *the-live-state*)))
                    *the-live-state*
                    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
            (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-ld-error-action" data-sym="LD-ERROR-ACTION">ld-error-action</a> <span class="keyword">:continue</span> *the-live-state*)))
        (with-suppression (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> *return-from-lp* (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> *lp-ever-entered-p*)) (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>
                `(,*RETURN-FROM-LP* (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:q</span>))
                *the-live-state*)
              (setq *return-from-lp* nil)
              (setq *lp-ever-entered-p* <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              (state-free-global-let* ((<a class="sym-link system" href="basis-b.html#def-ld-verbose" data-sym="LD-VERBOSE">ld-verbose</a> nil) (<a class="sym-link system" href="basis-b.html#def-ld-prompt" data-sym="LD-PROMPT">ld-prompt</a> nil) (<a class="sym-link system" href="basis-b.html#def-ld-post-eval-print" data-sym="LD-POST-EVAL-PRINT">ld-post-eval-print</a> nil))
                (ld-fn (f-get-ld-specials *the-live-state*)
                  *the-live-state*
                  nil)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (setq *lp-ever-entered-p* <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a> *the-live-state*)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (*lp-init-forms* (let ((<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> *lp-init-forms* <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a>)))
                    (setq *lp-init-forms* nil)
                    (ld-fn (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> '<a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>
                        <a class="sym-link system" href="basis-b.html#def-standard-oi" data-sym="STANDARD-OI">standard-oi</a>
                        (f-get-ld-specials *the-live-state*))
                      *the-live-state*
                      nil)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (ld-fn (f-get-ld-specials *the-live-state*)
                    *the-live-state*
                    nil)))
              (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"Exiting the ACL2 read-eval-print loop.  To re-enter, ~
                         execute (LP)."</span>
                nil
                <a class="sym-link system" href="axioms.html#def-_2Astandard-co_2A" data-sym="*STANDARD-CO*">*standard-co*</a>
                *the-live-state*
                nil))))
        (values))
      (setq *features*
        (<a class="sym-link system" href="axioms.html#def-remove" data-sym="REMOVE">remove</a> <span class="keyword">:acl2-loop-only</span> *features* <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>)))))</pre>
  </div>

<div class="form-block function" id="def-lp_21" data-defines="LP!" data-references="ERROR,IGNORE,DECLARE,ARGS,&REST,DEFUN" data-part-name="LP!" data-part-args="ARGS,&REST" data-part-declare="ARGS,IGNORE,DECLARE" data-part-body="ERROR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="LP!">lp!</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-lp_21" data-sym="LP!" title="(defun lp! (&amp;rest args)
  (declare (ignore args))
  (error &quot;LP! is no longer supported or necessary.
Evaluate (LP) to enter the ACL2 read-eval-print loop
such that feature :acl2-loop-only is true.&quot;))">lp!</a>
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (declare (ignore <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
  (error <span class="string">"LP! is no longer supported or necessary.
Evaluate (LP) to enter the ACL2 read-eval-print loop
such that feature :acl2-loop-only is true."</span>))</pre>
  </div>

<div class="form-block function" id="def-acl2-compile-file" data-defines="ACL2-COMPILE-FILE" data-references="TERPRI,COMPILE-FILE,COND,*RECKLESS-ACL2-READTABLE*,*OPEN-OUTPUT-CHANNEL-KEY*,PROOFS-CO,GET,STREAM,*THE-LIVE-STATE*,PATHNAME-UNIX-TO-OS,CONVERT-BOOK-STRING-TO-COMPILED,OFILE,*ACL2-READTABLE*,*READTABLE*,T,*DEFEAT-SLOW-ALIST-ACTION*,LET,OS-EXPANSION-FILENAME,FULL-BOOK-STRING,DEFUN" data-used-by="COMPILE-FOR-INCLUDE-BOOK,COMPILE-CERTIFIED-FILE" data-part-name="ACL2-COMPILE-FILE" data-part-args="OS-EXPANSION-FILENAME,FULL-BOOK-STRING" data-part-body="TERPRI,OS-EXPANSION-FILENAME,COMPILE-FILE,COND,*RECKLESS-ACL2-READTABLE*,*OPEN-OUTPUT-CHANNEL-KEY*,PROOFS-CO,GET,STREAM,*THE-LIVE-STATE*,FULL-BOOK-STRING,PATHNAME-UNIX-TO-OS,CONVERT-BOOK-STRING-TO-COMPILED,OFILE,*ACL2-READTABLE*,*READTABLE*,T,*DEFEAT-SLOW-ALIST-ACTION*,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2-COMPILE-FILE">acl2-compile-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-acl2-compile-file" data-sym="ACL2-COMPILE-FILE" title="(defun acl2-compile-file (full-book-string os-expansion-filename)
  (let ((*defeat-slow-alist-action* t)
        (*readtable* *acl2-readtable*)
        (ofile
         (convert-book-string-to-compiled
...">acl2-compile-file</a>
  (full-book-string os-expansion-filename)
  (let ((*defeat-slow-alist-action* <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (*readtable* *acl2-readtable*)
      (ofile (convert-book-string-to-compiled (pathname-unix-to-os full-book-string *the-live-state*)
          *the-live-state*))
      (stream (get (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> *the-live-state*) *open-output-channel-key*)))
    (let ((*readtable* *reckless-acl2-readtable*))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (compile-file os-expansion-filename <span class="keyword">:output-file</span> ofile))))
    (terpri stream)
    (terpri stream)))</pre>
  </div>

<div class="form-block other" id="form-177" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output delete-auxiliary-book-files
  (full-book-string)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((file (pathname-unix-to-os full-book-string *the-live-state*)) (ofile (convert-book-string-to-compiled file *the-live-state*))
      (efile (expansion-filename file))
      (err-string <span class="string">"A file created for book ~x0, namely ~x1, exists and ~
                      cannot be deleted with Common Lisp&#39;s delete-file.  We ~
                      do not know for sure whether this file was produced by ~
                      ACL2 and we do not even know that it corresponds to the ~
                      book ~x0.  If ~x1 exists at the time of an ~
                      (include-book ~x0), it might be erroneously loaded, ~
                      possibly causing inconsistency."</span>))
    (when (probe-file ofile)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((delete-file ofile) nil)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            'delete-auxiliary-book-files
            err-string
            full-book-string
            ofile))))
    (when (probe-file efile)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((delete-file efile) nil)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            'delete-auxiliary-book-files
            err-string
            full-book-string
            efile))))))</pre>
  </div>

<div class="form-block function" id="def-delete-expansion-file" data-defines="DELETE-EXPANSION-FILE" data-references="PROOFS-CO,CONS,LIST,FMS!,EVENT,IO?,DELETE-FILE,STATE,FULL-BOOK-STRING,OS-EXPANSION-FILENAME,DEFUN" data-part-name="DELETE-EXPANSION-FILE" data-part-args="STATE,FULL-BOOK-STRING,OS-EXPANSION-FILENAME" data-part-body="OS-EXPANSION-FILENAME,DELETE-FILE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DELETE-EXPANSION-FILE">delete-expansion-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-delete-expansion-file" data-sym="DELETE-EXPANSION-FILE" title="(defun delete-expansion-file (os-expansion-filename full-book-string state)
  (delete-file os-expansion-filename)
  (io? event nil state (full-book-string)
       (fms! &quot;Note: Deleting expansion file for the book, ~s0.~|&quot;
             (list (cons #\0 full-book-string)) (proofs-co state) state nil)))">delete-expansion-file</a>
  (os-expansion-filename full-book-string state)
  (delete-file os-expansion-filename)
  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> event
    nil
    state
    (full-book-string)
    (<a class="sym-link system" href="basis-a.html#def-fms_21" data-sym="FMS!">fms!</a> <span class="string">"Note: Deleting expansion file for the book, ~s0.~|"</span>
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 full-book-string))
      (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
      state
      nil)))</pre>
  </div>

<div class="form-block function" id="def-compile-uncompiled-defuns" data-defines="COMPILE-UNCOMPILED-DEFUNS" data-references="VALUE,*COMPILED-FILE-EXTENSION*,STRING,CONCATENATE,IF,LOAD-COMPILED,DELETE-FILE,KEEP-TMP-FILES,COMPILE-FILE,OUR-TRUENAME,LISP-FILE,PUSH,FN,MISSING,CLOSE-OUTPUT-CHANNEL,NEWLINE,REDEFINED,*STOBJ-INLINE-DECLARE*,MEMBER-EQUAL,CDDDDR,CONS,LOGIC-FNS-WITH-RAW-CODE,PROGRAM-FNS-WITH-RAW-CODE,CDDDR,X,DEFSTOBJ,DEFUNS,COMPILE,OUR-IGNORE-ERRORS,COMPILED-FUNCTION-P!,SETF,MEMBER-EQ,OR,MEMOIZEDP-RAW,CADDDR,GETHASH,MEMOIZE,CADDR,CONSP,CLTL-COMMAND,RETURN,EXIT-BOOT-STRAP-MODE,CDDR,ACCESS-COMMAND-TUPLE-FORM,EQUAL,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,CAR,W,TRIP,DOLIST,CURRENT-PACKAGE,IN-PACKAGE,LIST,PRINT-OBJECT$,STR1,GET-OUTPUT-STREAM-FROM-CHANNEL,STR0,CHAN,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,FORMAT,FN-FILE,MAKE-HASH-TABLE,SEEN,*PRINT-CIRCLE*,WITH-PRINT-CONTROLS,SERIALIZE-CHARACTER-SYSTEM,SERIALIZE-CHARACTER,T,WRITES-OKP,PRINT-CIRCLE-FILES,F-GET-GLOBAL,PRINT-CIRCLE,STATE-GLOBAL-LET*,PATHNAME-UNIX-TO-OS,OS-FILE,LET,RETURN-FROM,WARNING$,NULL,COND,QUOTE,HARD,ER,EQ,SYMBOL-LISTP,NOT,AND,WHEN,*THE-LIVE-STATE*,STATE,&AUX,GCL-FLG,FNS,&OPTIONAL,FILE,DEFUN" data-used-by="COMPILE-UNCOMPILED-*1*-DEFUNS" data-part-name="COMPILE-UNCOMPILED-DEFUNS" data-part-args="*THE-LIVE-STATE*,STATE,&AUX,GCL-FLG,FNS,&OPTIONAL,FILE" data-part-body="COMPILE-UNCOMPILED-DEFUNS,QUOTE,HARD,ER,EQ,FNS,SYMBOL-LISTP,NOT,AND,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPILE-UNCOMPILED-DEFUNS">compile-uncompiled-defuns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-compile-uncompiled-defuns" data-sym="COMPILE-UNCOMPILED-DEFUNS" title="(defun compile-uncompiled-defuns
       (file &amp;optional (fns :some) gcl-flg &amp;aux (state *the-live-state*))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
    (er hard &#39;compile-uncompiled-defuns
        &quot;The argument to compile-uncompiled-defuns must be either a true list ~
...">compile-uncompiled-defuns</a>
  (file &amp;optional
    (fns <span class="keyword">:some</span>)
    gcl-flg
    &amp;aux
    (state *the-live-state*))
  (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> fns)) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>)))
    (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
      '<a class="sym-link local-def" href="#def-compile-uncompiled-defuns" data-sym="COMPILE-UNCOMPILED-DEFUNS" title="(defun compile-uncompiled-defuns
       (file &amp;optional (fns :some) gcl-flg &amp;aux (state *the-live-state*))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
    (er hard &#39;compile-uncompiled-defuns
        &quot;The argument to compile-uncompiled-defuns must be either a true list ~
...">compile-uncompiled-defuns</a>
      <span class="string">"The argument to compile-uncompiled-defuns must be either a true list ~
         of symbols or the keyword :some.  The argument ~x0 is thus illegal."</span>
      fns))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> fns) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> '<a class="sym-link local-def" href="#def-compile-uncompiled-defuns" data-sym="COMPILE-UNCOMPILED-DEFUNS" title="(defun compile-uncompiled-defuns
       (file &amp;optional (fns :some) gcl-flg &amp;aux (state *the-live-state*))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
    (er hard &#39;compile-uncompiled-defuns
        &quot;The argument to compile-uncompiled-defuns must be either a true list ~
...">compile-uncompiled-defuns</a>
        nil
        <span class="string">"No functions to compile."</span>)
      (return-from <a class="sym-link local-def" href="#def-compile-uncompiled-defuns" data-sym="COMPILE-UNCOMPILED-DEFUNS" title="(defun compile-uncompiled-defuns
       (file &amp;optional (fns :some) gcl-flg &amp;aux (state *the-live-state*))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
    (er hard &#39;compile-uncompiled-defuns
        &quot;The argument to compile-uncompiled-defuns must be either a true list ~
...">compile-uncompiled-defuns</a> file)))
  (let ((os-file (pathname-unix-to-os file state)))
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((print-circle (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-circle-files state)) (writes-okp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (serialize-character (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'serialize-character-system state)))
      (with-print-controls <span class="keyword">:defaults</span> ((*print-circle* (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-circle state)))
        (let ((seen (make-hash-table <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>)) (fns (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:uncompiled</span>) <span class="keyword">:some</span>)
                ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <span class="keyword">:all</span>)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> fns)))
            (fn-file (format nil <span class="string">"~a.lisp"</span> file)))
          (with-output-object-channel-sharing chan
            fn-file
            (let ((str0 (get-output-stream-from-channel chan)) (str1 <span class="string">"; (ACL2 Note) Attempting separate compilation ~a: ~s.~&amp;"</span>))
              (format str0
                <span class="string">"; This file is automatically generated, to be ~
                    compiled.~%; Feel free to delete it after compilation.~%"</span>)
              (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state))
                chan
                state)
              (dolist (trip (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>)
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'command-landmark)
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
                     (equal (access-command-tuple-form (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
                       '(exit-boot-strap-mode))) (return))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'cltl-command)
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
                     (consp (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> trip) 'memoize)
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (gethash (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> trip) seen))
                     (memoizedp-raw (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> trip))
                     (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> trip) fns))) (setf (gethash (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> trip) seen) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                    (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (compiled-function-p! (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> trip)))
                      (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> str1 <span class="string">"for memoized function"</span> (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> trip))
                      (our-ignore-errors (compile (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> trip)))))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'cltl-command)
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
                     (consp (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> trip) '<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a>)
                     (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
                         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))) '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>)))) (dolist (x (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (gethash (car x) seen))
                           (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x) fns))) (setf (gethash (car x) seen) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                          (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (compiled-function-p! (car x)))
                            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x)
                                   (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'program-fns-with-raw-code state))
                                 (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x)
                                   (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'logic-fns-with-raw-code state))) (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> str1 <span class="string">"due to raw code"</span> (car x))
                                (our-ignore-errors (compile (car x))))
                              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (cons '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> x) chan state))))))))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'cltl-command)
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
                     (consp (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
                     (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> trip) '<a class="sym-link system" href="axioms.html#def-defstobj" data-sym="DEFSTOBJ">defstobj</a>)) (dolist (x (car (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (gethash (car x) seen))
                           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> <a class="sym-link system" href="axioms.html#def-_2Astobj-inline-declare_2A" data-sym="*STOBJ-INLINE-DECLARE*">*stobj-inline-declare*</a> x))
                           (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>) (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x) fns))) (setf (gethash (car x) seen) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                          (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (compiled-function-p! (car x)))
                            (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (cons '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> x) chan state))))))
                  ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'redefined) (setf (gethash (car trip) seen) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
              (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> chan state)
              (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> chan state)))
          (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>))
            (let (missing)
              (dolist (fn fns)
                (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (gethash fn seen)) (push fn missing)))
              (when missing
                (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  <span class="string">"~%Warning:  The following functions have not been ~
                       compiled.~%  ~s~%Perhaps you have not defined them ~
                       inside the ACL2 command loop.~%"</span>
                  missing))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (gcl-flg (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                '<a class="sym-link local-def" href="#def-compile-uncompiled-defuns" data-sym="COMPILE-UNCOMPILED-DEFUNS" title="(defun compile-uncompiled-defuns
       (file &amp;optional (fns :some) gcl-flg &amp;aux (state *the-live-state*))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
    (er hard &#39;compile-uncompiled-defuns
        &quot;The argument to compile-uncompiled-defuns must be either a true list ~
...">compile-uncompiled-defuns</a>
                <span class="string">"The gcl-flg argument to compile-uncompiled-defuns is only ~
               legal when running under GCL."</span>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((lisp-file (our-truename (pathname-unix-to-os fn-file state)
                     <span class="string">"Note: Calling OUR-TRUENAME from ~
                                COMPILE-UNCOMPILED-DEFUNS."</span>)))
                (compile-file lisp-file)
                (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (keep-tmp-files state)) (delete-file lisp-file)))))
          (load-compiled os-file <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
          (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (keep-tmp-files state))
            (delete-file (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> os-file <span class="string">"."</span> *compiled-file-extension*))))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
    os-file))</pre>
  </div>

<div class="form-block function" id="def-compile-uncompiled-_2A1_2A-defuns" data-defines="COMPILE-UNCOMPILED-*1*-DEFUNS" data-references="VALUE,*COMPILED-FILE-EXTENSION*,STRING,CONCATENATE,LOAD-COMPILED,DELETE-FILE,KEEP-TMP-FILES,COMPILE-FILE,OUR-TRUENAME,LISP-FILE,MISSING,CLOSE-OUTPUT-CHANNEL,NEWLINE,NREVERSE,PROGN,REDEFINED,PUSH,STOBJ-FUNCTION,GETPROPC,ONEIFY-CLTL-CODE,CONS,*1*DEF,OR,COMPILED-FUNCTION-P!,IF,FBOUNDP,*1*-SYMBOL,*1*FN,WORMHOLE-EVAL,RETURN-LAST,MV-LIST,QUASIQUOTE,MEMBER-EQ,CDDDR,X,DEFUNS,CADDR,CONSP,CLTL-COMMAND,RETURN,EXIT-BOOT-STRAP-MODE,CDDR,ACCESS-COMMAND-TUPLE-FORM,EQUAL,GLOBAL-VALUE,CADR,COMMAND-LANDMARK,CAR,TRIP,CURRENT-PACKAGE,IN-PACKAGE,LIST,PRINT-OBJECT$,GET-OUTPUT-STREAM-FROM-CHANNEL,STR0,DEFS,CHAN,WITH-OUTPUT-OBJECT-CHANNEL-SHARING,BOOT-STRAP-FLG,NOT-BOOT-STRAP-P,FORMAT,FN-FILE,GETHASH,SETF,FN,DOLIST,MAKE-HASH-TABLE,TBL,SEEN,*PRINT-CIRCLE*,WITH-PRINT-CONTROLS,SERIALIZE-CHARACTER-SYSTEM,SERIALIZE-CHARACTER,T,WRITES-OKP,PRINT-CIRCLE-FILES,F-GET-GLOBAL,PRINT-CIRCLE,STATE-GLOBAL-LET*,PATHNAME-UNIX-TO-OS,OS-FILE,LET,RETURN-FROM,COMPILE-UNCOMPILED-DEFUNS,WARNING$,NULL,COND,QUOTE,HARD,ER,EQ,SYMBOL-LISTP,NOT,AND,WHEN,W,WRLD,*THE-LIVE-STATE*,STATE,&AUX,CHAN0,GCL-FLG,FNS,&OPTIONAL,FILE,DEFUN" data-part-name="COMPILE-UNCOMPILED-*1*-DEFUNS" data-part-args="W,WRLD,*THE-LIVE-STATE*,STATE,&AUX,CHAN0,GCL-FLG,FNS,&OPTIONAL,FILE" data-part-body="COMPILE-UNCOMPILED-*1*-DEFUNS,QUOTE,HARD,ER,EQ,FNS,SYMBOL-LISTP,NOT,AND,WHEN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPILE-UNCOMPILED-*1*-DEFUNS">compile-uncompiled-*1*-defuns</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-compile-uncompiled-_2A1_2A-defuns" data-sym="COMPILE-UNCOMPILED-*1*-DEFUNS" title="(defun compile-uncompiled-*1*-defuns
       (file
        &amp;optional (fns :some) gcl-flg chan0
        &amp;aux (state *the-live-state*) (wrld (w *the-live-state*)))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
...">compile-uncompiled-*1*-defuns</a>
  (file &amp;optional
    (fns <span class="keyword">:some</span>)
    gcl-flg
    chan0
    &amp;aux
    (state *the-live-state*)
    (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)))
  (when (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> fns)) (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>)))
    (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
      '<a class="sym-link local-def" href="#def-compile-uncompiled-_2A1_2A-defuns" data-sym="COMPILE-UNCOMPILED-*1*-DEFUNS" title="(defun compile-uncompiled-*1*-defuns
       (file
        &amp;optional (fns :some) gcl-flg chan0
        &amp;aux (state *the-live-state*) (wrld (w *the-live-state*)))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
...">compile-uncompiled-*1*-defuns</a>
      <span class="string">"The argument to compile-uncompiled-*1*-defuns must be either a true ~
         list of symbols or the keyword :some.  The argument ~x0 is thus ~
         illegal."</span>
      fns))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> fns) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> chan0)) (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> '<a class="sym-link local-def" href="#def-compile-uncompiled-defuns" data-sym="COMPILE-UNCOMPILED-DEFUNS" title="(defun compile-uncompiled-defuns
       (file &amp;optional (fns :some) gcl-flg &amp;aux (state *the-live-state*))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
    (er hard &#39;compile-uncompiled-defuns
        &quot;The argument to compile-uncompiled-defuns must be either a true list ~
...">compile-uncompiled-defuns</a>
        nil
        <span class="string">"No functions to compile."</span>)
      (return-from <a class="sym-link local-def" href="#def-compile-uncompiled-_2A1_2A-defuns" data-sym="COMPILE-UNCOMPILED-*1*-DEFUNS" title="(defun compile-uncompiled-*1*-defuns
       (file
        &amp;optional (fns :some) gcl-flg chan0
        &amp;aux (state *the-live-state*) (wrld (w *the-live-state*)))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
...">compile-uncompiled-*1*-defuns</a> file)))
  (let ((os-file (pathname-unix-to-os file state)))
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((print-circle (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-circle-files state)) (writes-okp <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (serialize-character (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'serialize-character-system state)))
      (with-print-controls <span class="keyword">:defaults</span> ((*print-circle* (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'print-circle state)))
        (let ((seen (let ((tbl (make-hash-table <span class="keyword">:test</span> '<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a>)))
               (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>))
                 (dolist (fn fns) (setf (gethash fn tbl) <span class="keyword">:init</span>)))
               tbl)) (fns (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:uncompiled</span>) <span class="keyword">:some</span>)
                ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <span class="keyword">:all</span>)
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> fns)))
            (fn-file (format nil <span class="string">"~a.lisp"</span> file))
            (not-boot-strap-p (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'boot-strap-flg state))))
          (with-output-object-channel-sharing chan
            fn-file
            (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> chan) (return-from <a class="sym-link local-def" href="#def-compile-uncompiled-_2A1_2A-defuns" data-sym="COMPILE-UNCOMPILED-*1*-DEFUNS" title="(defun compile-uncompiled-*1*-defuns
       (file
        &amp;optional (fns :some) gcl-flg chan0
        &amp;aux (state *the-live-state*) (wrld (w *the-live-state*)))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
...">compile-uncompiled-*1*-defuns</a>
                  (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                    '<a class="sym-link local-def" href="#def-compile-uncompiled-_2A1_2A-defuns" data-sym="COMPILE-UNCOMPILED-*1*-DEFUNS" title="(defun compile-uncompiled-*1*-defuns
       (file
        &amp;optional (fns :some) gcl-flg chan0
        &amp;aux (state *the-live-state*) (wrld (w *the-live-state*)))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
...">compile-uncompiled-*1*-defuns</a>
                    <span class="string">"Unable to open file ~x0 for object output."</span>
                    fn-file)))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((defs nil) (str0 (get-output-stream-from-channel chan)))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> chan0) (format str0
                        <span class="string">"; This file is automatically generated, to be ~
                             compiled.~%; Feel free to delete it after ~
                             compilation.~%"</span>)
                      (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> '<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state))
                        chan
                        state))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                  (dolist (trip wrld)
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>)
                         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'command-landmark)
                         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
                         (equal (access-command-tuple-form (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
                           '(exit-boot-strap-mode))) (return))
                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car trip) 'cltl-command)
                         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'global-value)
                         (consp (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
                         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> trip) '<a class="sym-link system" href="axioms.html#def-defuns" data-sym="DEFUNS">defuns</a>)) (dolist (x (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)))
                          (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car x)
                                `(<a class="sym-link system" href="axioms.html#def-mv-list" data-sym="MV-LIST">mv-list</a> <a class="sym-link system" href="axioms.html#def-return-last" data-sym="RETURN-LAST">return-last</a>
                                  <a class="sym-link system" href="basis-a.html#def-wormhole-eval" data-sym="WORMHOLE-EVAL">wormhole-eval</a>
                                  ,@*DF-PRIMITIVES*
                                  ,@*DEFUN-OVERRIDES*)))
                            (let ((*1*fn (*1*-symbol (car x))))
                              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (fboundp *1*fn)
                                   (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (gethash (car x) seen))
                                         (if not-boot-strap-p
                                           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (compiled-function-p! *1*fn))
                                           (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip)) <span class="keyword">:program</span>)))
                                         (setf (gethash (car x) seen) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
                                     ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (gethash (car x) seen) <span class="keyword">:init</span>) (setf (gethash (car x) seen) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                                       (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> chan0 (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (compiled-function-p! *1*fn)))))) (let ((*1*def (cons '<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a>
                                         (<a class="sym-link local-def" href="#def-oneify-cltl-code" data-sym="ONEIFY-CLTL-CODE" title="(defun oneify-cltl-code
       (defun-mode def stobj-flag wrld &amp;optional trace-rec-for-none)
  (let* ((stobjs-out-invalid (member-eq (car def) *stobjs-out-invalid*))
         (fn (car def))
         (stobjs-out (and (not stobjs-out-invalid) (stobjs-out fn wrld)))
...">oneify-cltl-code</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> trip))
                                           x
                                           (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (car x) 'stobj-function nil wrld)
                                           wrld))))
                                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (chan0 (push *1*def defs))
                                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> *1*def chan state))))))))))
                      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> trip) 'redefined) (setf (gethash (car trip) seen) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
                  (when chan0
                    (<a class="sym-link system" href="basis-a.html#def-print-object_24" data-sym="PRINT-OBJECT$">print-object$</a> (cons '<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> (nreverse defs)) chan state))
                  (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> chan state)
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (chan0 (return-from <a class="sym-link local-def" href="#def-compile-uncompiled-_2A1_2A-defuns" data-sym="COMPILE-UNCOMPILED-*1*-DEFUNS" title="(defun compile-uncompiled-*1*-defuns
       (file
        &amp;optional (fns :some) gcl-flg chan0
        &amp;aux (state *the-live-state*) (wrld (w *the-live-state*)))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
...">compile-uncompiled-*1*-defuns</a> os-file))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-close-output-channel" data-sym="CLOSE-OUTPUT-CHANNEL">close-output-channel</a> chan state))))))
            chan0)
          (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fns <span class="keyword">:some</span>))
            (let (missing)
              (dolist (fn fns)
                (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (gethash fn seen) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (push fn missing)))
              (when missing
                (format <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  <span class="string">"~%Warning:  The following executable-counterpart ~
                       functions have not been compiled.~%  ~s~%Perhaps you ~
                       have not defined them inside the ACL2 command loop.~%"</span>
                  missing))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (gcl-flg (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                '<a class="sym-link local-def" href="#def-compile-uncompiled-defuns" data-sym="COMPILE-UNCOMPILED-DEFUNS" title="(defun compile-uncompiled-defuns
       (file &amp;optional (fns :some) gcl-flg &amp;aux (state *the-live-state*))
  (when (and (not (symbol-listp fns)) (not (eq fns :some)))
    (er hard &#39;compile-uncompiled-defuns
        &quot;The argument to compile-uncompiled-defuns must be either a true list ~
...">compile-uncompiled-defuns</a>
                <span class="string">"The gcl-flg argument to compile-uncompiled-*1*-defuns is only ~
               legal when running under GCL."</span>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((lisp-file (our-truename (pathname-unix-to-os fn-file state)
                     <span class="string">"Note: Calling OUR-TRUENAME from ~
                                COMPILE-UNCOMPILED-*1*-DEFUNS."</span>)))
                (compile-file lisp-file)
                (when (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (keep-tmp-files state)) (delete-file lisp-file)))))
          (load-compiled os-file <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
          (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (keep-tmp-files state))
            (delete-file (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a> os-file <span class="string">"."</span> *compiled-file-extension*)))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
    os-file))</pre>
  </div>

<div class="form-block function" id="def-compile-certified-file" data-defines="COMPILE-CERTIFIED-FILE" data-references="ACL2-COMPILE-FILE,DELETE-FILE,PROBE-FILE,WHEN,CONVERT-BOOK-STRING-TO-COMPILED,OS-FULL-BOOK-STRING-COMPILED,PATHNAME-UNIX-TO-OS,OS-FULL-BOOK-STRING,LET*,STATE,FULL-BOOK-STRING,OS-EXPANSION-FILENAME,DEFUN" data-part-name="COMPILE-CERTIFIED-FILE" data-part-args="STATE,FULL-BOOK-STRING,OS-EXPANSION-FILENAME" data-part-body="OS-EXPANSION-FILENAME,ACL2-COMPILE-FILE,DELETE-FILE,PROBE-FILE,WHEN,CONVERT-BOOK-STRING-TO-COMPILED,OS-FULL-BOOK-STRING-COMPILED,STATE,FULL-BOOK-STRING,PATHNAME-UNIX-TO-OS,OS-FULL-BOOK-STRING,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPILE-CERTIFIED-FILE">compile-certified-file</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-compile-certified-file" data-sym="COMPILE-CERTIFIED-FILE" title="(defun compile-certified-file (os-expansion-filename full-book-string state)
  (let* ((os-full-book-string (pathname-unix-to-os full-book-string state))
         (os-full-book-string-compiled
          (convert-book-string-to-compiled os-full-book-string state)))
    (when (probe-file os-full-book-string-compiled)
...">compile-certified-file</a>
  (os-expansion-filename full-book-string state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((os-full-book-string (pathname-unix-to-os full-book-string state)) (os-full-book-string-compiled (convert-book-string-to-compiled os-full-book-string state)))
    (when (probe-file os-full-book-string-compiled)
      (delete-file os-full-book-string-compiled))
    (<a class="sym-link local-def" href="#def-acl2-compile-file" data-sym="ACL2-COMPILE-FILE" title="(defun acl2-compile-file (full-book-string os-expansion-filename)
  (let ((*defeat-slow-alist-action* t)
        (*readtable* *acl2-readtable*)
        (ofile
         (convert-book-string-to-compiled
...">acl2-compile-file</a> full-book-string os-expansion-filename)
    os-full-book-string-compiled))</pre>
  </div>

<div class="form-block function" id="def-compile-for-include-book" data-defines="COMPILE-FOR-INCLUDE-BOOK" data-references="ACL2-COMPILE-FILE,OBSERVATION,SOFT,ER,<=,TO-BE-COMPILED,REASON,PROBE-FILE,EFILE-WRITE-DATE,FILE-WRITE-DATE,CFILE-WRITE-DATE,CERTIFICATE-FILE,CFILE,MV-LET,COMPLETE,QUOTE,EQ,HCOMP-BOOK-HT-ENTRY,ACCESS,STATUS,GETHASH,*HCOMP-BOOK-HT*,AND,ENTRY,EXPANSION-FILENAME,PATHNAME-UNIX-TO-OS,EFILE,LET*,T,VALUE,WARNING$,PPROGN,NOT,COND,STATE,CTX,CERTIFIED-P,FULL-BOOK-NAME,FULL-BOOK-STRING,DEFUN" data-part-name="COMPILE-FOR-INCLUDE-BOOK" data-part-args="STATE,CTX,CERTIFIED-P,FULL-BOOK-NAME,FULL-BOOK-STRING" data-part-body="ACL2-COMPILE-FILE,OBSERVATION,SOFT,ER,<=,TO-BE-COMPILED,REASON,PROBE-FILE,EFILE-WRITE-DATE,FILE-WRITE-DATE,CFILE-WRITE-DATE,CERTIFICATE-FILE,CFILE,MV-LET,COMPLETE,QUOTE,EQ,HCOMP-BOOK-HT-ENTRY,ACCESS,STATUS,FULL-BOOK-NAME,GETHASH,*HCOMP-BOOK-HT*,AND,ENTRY,STATE,EXPANSION-FILENAME,PATHNAME-UNIX-TO-OS,EFILE,LET*,T,VALUE,FULL-BOOK-STRING,CTX,WARNING$,PPROGN,CERTIFIED-P,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="COMPILE-FOR-INCLUDE-BOOK">compile-for-include-book</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-compile-for-include-book" data-sym="COMPILE-FOR-INCLUDE-BOOK" title="(defun compile-for-include-book
       (full-book-string full-book-name certified-p ctx state)
  (cond
   ((not certified-p)
    (pprogn
...">compile-for-include-book</a>
  (full-book-string full-book-name certified-p ctx state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> certified-p) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-warning_24" data-sym="WARNING$">warning$</a> ctx
          <span class="string">"Compiled file"</span>
          <span class="string">"An include-book form for book ~x0 has specified option ~
                       :load-compiled-file :comp.  But this book is ~
                       uncertified, so compilation is being skipped."</span>
          full-book-string)
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((efile (pathname-unix-to-os (expansion-filename full-book-string)
             state)) (entry (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> *hcomp-book-ht*
              (gethash full-book-name *hcomp-book-ht*)))
          (status (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> entry (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> hcomp-book-ht-entry entry <span class="keyword">:status</span>))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status 'complete) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (cfile state)
              (certificate-file full-book-string state)
              (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((cfile (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cfile (pathname-unix-to-os cfile state))) (cfile-write-date (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cfile (file-write-date cfile)))
                  (efile-write-date (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (probe-file efile) (file-write-date efile)))
                  (reason (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (probe-file cfile)) <span class="string">"the certificate file does not exist"</span>)
                      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (probe-file efile)) <span class="string">"the expansion file does not exist"</span>)
                      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> status 'to-be-compiled)) <span class="string">"the expansion file or compiled file ~
                                     appears not to have been loaded to ~
                                     completion"</span>)
                      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> cfile-write-date
                         efile-write-date
                         (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> cfile-write-date efile-write-date)) nil)
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">"the write-date of the expansion file is ~
                                     not greater than the write date of the ~
                                     certificate file"</span>))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (reason (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                      ctx
                      <span class="string">"An include-book event with option ~
                                   :load-compiled-file :comp has failed for ~
                                   book~|~s0,~|because ~@1.  See :DOC ~
                                   include-book and see :DOC ~
                                   book-compiled-file."</span>
                      full-book-string
                      reason))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a> ctx
                      <span class="string">"Compiling file ~x0, as specified by ~
                                     include-book option :load-compiled-file ~
                                     :comp."</span>
                      full-book-string)
                    (<a class="sym-link local-def" href="#def-acl2-compile-file" data-sym="ACL2-COMPILE-FILE" title="(defun acl2-compile-file (full-book-string os-expansion-filename)
  (let ((*defeat-slow-alist-action* t)
        (*readtable* *acl2-readtable*)
        (ofile
         (convert-book-string-to-compiled
...">acl2-compile-file</a> full-book-string efile)
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil)))))))))))</pre>
  </div>

<div class="form-block other" id="form-183" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output enabled-structurep
  (x)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> x
    (((index-of-last-enabling . theory-array) (array-name . array-length)
       array-name-root . array-name-suffix) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp index-of-last-enabling)
        (symbolp array-name)
        (<a class="sym-link system" href="axioms.html#def-array1p" data-sym="ARRAY1P">array1p</a> array-name theory-array)
        (integerp array-length)
        (<a class="sym-link system" href="axioms.html#def-character-listp" data-sym="CHARACTER-LISTP">character-listp</a> array-name-root)
        (integerp array-name-suffix)))
    (&amp; nil)))</pre>
  </div>

<div class="form-block other" id="form-184" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output rcnstp
  (x)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> x
    (((current-enabled-structure) (&amp; &amp; . &amp;) (&amp; . &amp;) (&amp; . &amp;) . &amp;) (enabled-structurep current-enabled-structure))
    (&amp; nil)))</pre>
  </div>

<div class="form-block other" id="form-185" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defvar *trace-alist*
  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons 'state '|*the-live-state*|)))</pre>
  </div>

<div class="form-block other" id="form-186" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output assoc-eq-trace-alist
  (val alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (boundp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))
       (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val (symbol-value (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)))) (car alist))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (assoc-eq-trace-alist val (cdr alist)))))</pre>
  </div>

<div class="form-block other" id="form-187" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output stobj-print-symbol
  (x user-stobj-alist-tail &amp;optional rawp)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-live-stobjp" data-sym="LIVE-STOBJP">live-stobjp</a> x)
    (loop for
      pair
      in
      user-stobj-alist-tail
      when
      (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x (cdr pair))
      do
      (return (intern-in-package-of-symbol (<a class="sym-link system" href="basis-b.html#def-stobj-print-name" data-sym="STOBJ-PRINT-NAME">stobj-print-name</a> (car pair))
          (car pair)))
      finally
      (return (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> rawp)
          (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> <span class="string">"&lt;some-stobj&gt;"</span>
            (find-package-fast (<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> *the-live-state*))))))))</pre>
  </div>

<div class="form-block other" id="form-188" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output replace-live-stobjs-in-list
  (lst &amp;optional rawp)
  (loop for
    x
    in
    lst
    collect
    (if (live-state-p x)
      '|&lt;state&gt;|
      (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (stobj-print-symbol x *user-stobj-alist* rawp) x))))</pre>
  </div>

<div class="form-block function" id="def-trace-hide-world-and-state" data-defines="TRACE-HIDE-WORLD-AND-STATE" data-references="CONS,some-index,LIST*,GLOBAL-VALUE,COMMAND-INDEX,EVENT-INDEX,CONSP,some-enabled-structure,ENABLED-STRUCTUREP,some-rcnst,RCNSTP,current-acl2-world,QUOTE,*THE-LIVE-STATE*,W,EQ,ATOM,CDR,*TRACE-ALIST*,ASSOC-EQ-TRACE-ALIST,PAIR,STOBJ-PRINT-SYMBOL,ARRAYP,AND,OR,T,CAR,STOBJ-PRINT-NAME,INTERN-IN-PACKAGE-OF-SYMBOL,COND,*USER-STOBJ-ALIST*,RASSOC,STOBJ-PAIR,LET,IF,LET*,NO-STOBJ-HIDING,&OPTIONAL,L,DEFUN" data-part-name="TRACE-HIDE-WORLD-AND-STATE" data-part-args="NO-STOBJ-HIDING,&OPTIONAL,L" data-part-body="TRACE-HIDE-WORLD-AND-STATE,CONS,some-index,LIST*,GLOBAL-VALUE,COMMAND-INDEX,EVENT-INDEX,CONSP,some-enabled-structure,ENABLED-STRUCTUREP,some-rcnst,RCNSTP,current-acl2-world,QUOTE,*THE-LIVE-STATE*,W,EQ,ATOM,CDR,*TRACE-ALIST*,ASSOC-EQ-TRACE-ALIST,PAIR,STOBJ-PRINT-SYMBOL,ARRAYP,AND,OR,T,CAR,STOBJ-PRINT-NAME,INTERN-IN-PACKAGE-OF-SYMBOL,COND,*USER-STOBJ-ALIST*,RASSOC,STOBJ-PAIR,LET,NO-STOBJ-HIDING,IF,L,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRACE-HIDE-WORLD-AND-STATE">trace-hide-world-and-state</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-trace-hide-world-and-state" data-sym="TRACE-HIDE-WORLD-AND-STATE" title="(defun trace-hide-world-and-state (l &amp;optional no-stobj-hiding)
  (let* ((l
          (if no-stobj-hiding
              l
              (let ((stobj-pair (rassoc l *user-stobj-alist*)))
...">trace-hide-world-and-state</a>
  (l &amp;optional no-stobj-hiding)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((l (if no-stobj-hiding
         l
         (let ((stobj-pair (<a class="sym-link system" href="axioms.html#def-rassoc" data-sym="RASSOC">rassoc</a> l *user-stobj-alist*)))
           (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (stobj-pair (intern-in-package-of-symbol (<a class="sym-link system" href="basis-b.html#def-stobj-print-name" data-sym="STOBJ-PRINT-NAME">stobj-print-name</a> (car stobj-pair))
                 (car stobj-pair)))
             (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (arrayp l) (stobj-print-symbol l *user-stobj-alist*))
                 l)))))) (pair (assoc-eq-trace-alist l *trace-alist*)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pair (cdr pair))
      ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> l) l)
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> l (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)) '|current-acl2-world|)
      ((rcnstp l) '|some-rcnst|)
      ((enabled-structurep l) '|some-enabled-structure|)
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp l)
         (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car l) 'event-index) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car l) 'command-index))
         (consp (cdr l))
         (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car (cdr l)) 'global-value)) (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (car l) 'global-value '|some-index|))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link local-def" href="#def-trace-hide-world-and-state" data-sym="TRACE-HIDE-WORLD-AND-STATE" title="(defun trace-hide-world-and-state (l &amp;optional no-stobj-hiding)
  (let* ((l
          (if no-stobj-hiding
              l
              (let ((stobj-pair (rassoc l *user-stobj-alist*)))
...">trace-hide-world-and-state</a> (car l) no-stobj-hiding)
          (<a class="sym-link local-def" href="#def-trace-hide-world-and-state" data-sym="TRACE-HIDE-WORLD-AND-STATE" title="(defun trace-hide-world-and-state (l &amp;optional no-stobj-hiding)
  (let* ((l
          (if no-stobj-hiding
              l
              (let ((stobj-pair (rassoc l *user-stobj-alist*)))
...">trace-hide-world-and-state</a> (cdr l) no-stobj-hiding))))))</pre>
  </div>

<div class="form-block other" id="form-190" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defun-one-output get-stobjs-out-for-declare-form
  (fn)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> fn 'cons) '(nil))
    ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> fn <a class="sym-link system" href="axioms.html#def-_2Astobjs-out-invalid_2A" data-sym="*STOBJS-OUT-INVALID*">*stobjs-out-invalid*</a>) (interface-er <span class="string">"Implementation error in ~
                        get-stobjs-out-for-declare-form: Attempted to find ~
                        stobjs-out for ~x0."</span>
        fn))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> *the-live-state*)))
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
          (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> fn '<a class="sym-link system" href="basis-b.html#def-symbol-class" data-sym="SYMBOL-CLASS">symbol-class</a> nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>) '(nil)))))))</pre>
  </div>

<div class="form-block function" id="def-fix-trace-untrace" data-defines="FIX-TRACE-UNTRACE" data-references="CONS,T,CDR,CAAR,ASSOC-EQ,ENDP,COND,OLD-TRACE-SPECS,NEW-TRACE-SPECS,DEFUN" data-used-by="FIX-TRACE" data-part-name="FIX-TRACE-UNTRACE" data-part-args="OLD-TRACE-SPECS,NEW-TRACE-SPECS" data-part-body="CONS,T,CDR,FIX-TRACE-UNTRACE,OLD-TRACE-SPECS,CAAR,ASSOC-EQ,NEW-TRACE-SPECS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-TRACE-UNTRACE">fix-trace-untrace</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-trace-untrace" data-sym="FIX-TRACE-UNTRACE" title="(defun fix-trace-untrace (new-trace-specs old-trace-specs)
  (cond ((endp new-trace-specs) nil)
        ((assoc-eq (caar new-trace-specs) old-trace-specs)
         (fix-trace-untrace (cdr new-trace-specs) old-trace-specs))
        (t
...">fix-trace-untrace</a>
  (new-trace-specs old-trace-specs)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> new-trace-specs) nil)
    ((<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> new-trace-specs) old-trace-specs) (<a class="sym-link local-def" href="#def-fix-trace-untrace" data-sym="FIX-TRACE-UNTRACE" title="(defun fix-trace-untrace (new-trace-specs old-trace-specs)
  (cond ((endp new-trace-specs) nil)
        ((assoc-eq (caar new-trace-specs) old-trace-specs)
         (fix-trace-untrace (cdr new-trace-specs) old-trace-specs))
        (t
...">fix-trace-untrace</a> (cdr new-trace-specs) old-trace-specs))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> new-trace-specs)
        (<a class="sym-link local-def" href="#def-fix-trace-untrace" data-sym="FIX-TRACE-UNTRACE" title="(defun fix-trace-untrace (new-trace-specs old-trace-specs)
  (cond ((endp new-trace-specs) nil)
        ((assoc-eq (caar new-trace-specs) old-trace-specs)
         (fix-trace-untrace (cdr new-trace-specs) old-trace-specs))
        (t
...">fix-trace-untrace</a> (cdr new-trace-specs) old-trace-specs)))))</pre>
  </div>

<div class="form-block function" id="def-fix-trace" data-defines="FIX-TRACE" data-references="TRACE$,UNTRACE$,QUASIQUOTE,EVAL,WHEN,SET-DIFFERENCE-EQUAL,TO-RETRACE,FIX-TRACE-UNTRACE,TO-UNTRACE,*THE-LIVE-STATE*,TRACE-SPECS,QUOTE,F-GET-GLOBAL,NEW-TRACE-SPECS,LET*,OLD-TRACE-SPECS,DEFUN" data-part-name="FIX-TRACE" data-part-args="OLD-TRACE-SPECS" data-part-body="TRACE$,UNTRACE$,QUASIQUOTE,EVAL,WHEN,SET-DIFFERENCE-EQUAL,TO-RETRACE,OLD-TRACE-SPECS,FIX-TRACE-UNTRACE,TO-UNTRACE,*THE-LIVE-STATE*,TRACE-SPECS,QUOTE,F-GET-GLOBAL,NEW-TRACE-SPECS,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIX-TRACE">fix-trace</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fix-trace" data-sym="FIX-TRACE" title="(defun fix-trace (old-trace-specs)
  (let* ((new-trace-specs (f-get-global &#39;trace-specs *the-live-state*))
         (to-untrace (fix-trace-untrace new-trace-specs old-trace-specs))
         (to-retrace (set-difference-equal old-trace-specs new-trace-specs)))
    (when to-untrace (eval `(untrace$ ,@to-untrace)))">fix-trace</a>
  (old-trace-specs)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-trace-specs (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'trace-specs *the-live-state*)) (to-untrace (<a class="sym-link local-def" href="#def-fix-trace-untrace" data-sym="FIX-TRACE-UNTRACE" title="(defun fix-trace-untrace (new-trace-specs old-trace-specs)
  (cond ((endp new-trace-specs) nil)
        ((assoc-eq (caar new-trace-specs) old-trace-specs)
         (fix-trace-untrace (cdr new-trace-specs) old-trace-specs))
        (t
...">fix-trace-untrace</a> new-trace-specs old-trace-specs))
      (to-retrace (<a class="sym-link system" href="axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> old-trace-specs new-trace-specs)))
    (when to-untrace (eval `(untrace$ ,@TO-UNTRACE)))
    (when to-retrace (eval `(trace$ ,@TO-RETRACE)))))</pre>
  </div>

<div class="form-block function" id="def-mf-looking-at" data-defines="MF-LOOKING-AT" data-references="INCF,CHAR,EQL,NOT,OR,T,RETURN,>=,WHEN,LOOP,L2,LENGTH,L1,LET,DECLARE,LOCALLY,FIXNUM,ERROR,SIMPLE-BASE-STRING,QUOTE,TYPEP,UNLESS,START2,START1,&KEY,STR2,STR1,DEFUN" data-used-by="MEMINFO" data-part-name="MF-LOOKING-AT" data-part-args="START2,START1,&KEY,STR2,STR1" data-part-body="ERROR,SIMPLE-BASE-STRING,QUOTE,STR1,TYPEP,UNLESS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MF-LOOKING-AT">mf-looking-at</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-mf-looking-at" data-sym="MF-LOOKING-AT" title="(defun mf-looking-at (str1 str2 &amp;key (start1 0) (start2 0))
  (unless (typep str1 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str1))
  (unless (typep str2 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str2))
...">mf-looking-at</a>
  (str1 str2 &amp;key (start1 <span class="number">0</span>) (start2 <span class="number">0</span>))
  (unless (typep str1 'simple-base-string)
    (error <span class="string">"looking at:  ~a is not a string."</span> str1))
  (unless (typep str2 'simple-base-string)
    (error <span class="string">"looking at:  ~a is not a string."</span> str2))
  (unless (typep start1 'fixnum)
    (error <span class="string">"looking at:  ~a is not a fixnum."</span> start1))
  (unless (typep start2 'fixnum)
    (error <span class="string">"looking at:  ~a is not a fixnum."</span> start2))
  (locally (declare (simple-base-string str1 str2)
      (fixnum start1 start2))
    (let ((l1 (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> str1)) (l2 (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> str2)))
      (declare (fixnum l1 l2))
      (loop (when (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> start1 l1) (return <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (when (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> start2 l2)
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> str1 start1) (<a class="sym-link system" href="axioms.html#def-char" data-sym="CHAR">char</a> str2 start2))))
          (return nil))
        (incf start1)
        (incf start2)))))</pre>
  </div>

<div class="form-block function" id="def-our-uname" data-defines="OUR-UNAME" data-references="SUBSEQ,STRING-EQUAL,COND,LENGTH,<=,STRINGP,EQL,AND,SYSTEM-CALL+,VAL,EXIT-CODE,MULTIPLE-VALUE-BIND,DEFUN" data-used-by="MEMINFO" data-part-name="OUR-UNAME" data-part-body="SUBSEQ,STRING-EQUAL,COND,LENGTH,<=,STRINGP,EQL,AND,SYSTEM-CALL+,VAL,EXIT-CODE,MULTIPLE-VALUE-BIND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OUR-UNAME">our-uname</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-our-uname" data-sym="OUR-UNAME" title="(defun our-uname ()
  (multiple-value-bind (exit-code val)
      (system-call+ &quot;uname&quot; nil)
    (and (eql exit-code 0) (stringp val) (&lt;= 6 (length val))
         (cond ((string-equal (subseq val 0 6) &quot;Darwin&quot;) :darwin)
...">our-uname</a>
  nil
  (multiple-value-bind (exit-code val)
    (system-call+ <span class="string">"uname"</span> nil)
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> exit-code <span class="number">0</span>)
      (stringp val)
      (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">6</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> val))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> val <span class="number">0</span> <span class="number">6</span>) <span class="string">"Darwin"</span>) <span class="keyword">:darwin</span>)
        ((<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> val <span class="number">0</span> <span class="number">5</span>) <span class="string">"Linux"</span>) <span class="keyword">:linux</span>)
        ((<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> (<a class="sym-link system" href="axioms.html#def-subseq" data-sym="SUBSEQ">subseq</a> val <span class="number">0</span> <span class="number">7</span>) <span class="string">"FreeBSD"</span>) <span class="keyword">:freebsd</span>)))))</pre>
  </div>

<div class="form-block function" id="def-meminfo" data-defines="MEMINFO" data-references="T,/,MOD,EQUAL,INTEGERP,+,ANS,EQL,LIST,SYSTEM-CALL+,VAL,EXIT-CODE,MULTIPLE-VALUE-BIND,LEN,LET*,LENGTH,READ-FROM-STRING,VALUES,RETURN,MF-LOOKING-AT,WHEN,DO,READ-LINE,SETQ,WHILE,LOOP,LINE,STREAM,WITH-OPEN-FILE,PROBE-FILE,OUR-IGNORE-ERRORS,AND,LET,OUR-UNAME,CASE,OUR-WITH-STANDARD-IO-SYNTAX,STRINGP,NULL,OR,ASSERT,ARG,&OPTIONAL,DEFUN" data-part-name="MEMINFO" data-part-args="ARG,&OPTIONAL" data-part-body="STRINGP,ARG,NULL,OR,ASSERT" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MEMINFO">meminfo</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-meminfo" data-sym="MEMINFO" title="(defun meminfo (&amp;optional arg)
  (assert (or (null arg) (stringp arg)))
  (or
   (our-with-standard-io-syntax
    (case (our-uname)
...">meminfo</a>
  (&amp;optional arg)
  (assert (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> arg) (stringp arg)))
  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (our-with-standard-io-syntax (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link local-def" href="#def-our-uname" data-sym="OUR-UNAME" title="(defun our-uname ()
  (multiple-value-bind (exit-code val)
      (system-call+ &quot;uname&quot; nil)
    (and (eql exit-code 0) (stringp val) (&lt;= 6 (length val))
         (cond ((string-equal (subseq val 0 6) &quot;Darwin&quot;) :darwin)
...">our-uname</a>)
        (<span class="keyword">:linux</span> (let ((arg (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> arg <span class="string">"MemTotal:"</span>)))
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (our-ignore-errors (probe-file <span class="string">"/proc/meminfo"</span>))
              (with-open-file (stream <span class="string">"/proc/meminfo"</span>)
                (let (line)
                  (loop while
                    (setq line (read-line stream nil nil))
                    do
                    (when (<a class="sym-link local-def" href="#def-mf-looking-at" data-sym="MF-LOOKING-AT" title="(defun mf-looking-at (str1 str2 &amp;key (start1 0) (start2 0))
  (unless (typep str1 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str1))
  (unless (typep str2 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str2))
...">mf-looking-at</a> arg line)
                      (return (values (read-from-string line nil nil <span class="keyword">:start</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> arg)))))))))))
        (<span class="keyword">:darwin</span> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((arg (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> arg <span class="string">"hw.memsize"</span>)) (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> arg)))
            (multiple-value-bind (exit-code val)
              (system-call+ <span class="string">"sysctl"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> arg))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> exit-code <span class="number">0</span>)
                (<a class="sym-link local-def" href="#def-mf-looking-at" data-sym="MF-LOOKING-AT" title="(defun mf-looking-at (str1 str2 &amp;key (start1 0) (start2 0))
  (unless (typep str1 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str1))
  (unless (typep str2 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str2))
...">mf-looking-at</a> arg val)
                (<a class="sym-link local-def" href="#def-mf-looking-at" data-sym="MF-LOOKING-AT" title="(defun mf-looking-at (str1 str2 &amp;key (start1 0) (start2 0))
  (unless (typep str1 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str1))
  (unless (typep str2 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str2))
...">mf-looking-at</a> arg <span class="string">": "</span> <span class="keyword">:start1</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
                (let ((ans (read-from-string val nil nil <span class="keyword">:start</span> (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">2</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>))))
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp ans) (equal (mod ans <span class="number">1024</span>) <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-_2F" data-sym="/">/</a> ans <span class="number">1024</span>)))))))
        (<span class="keyword">:freebsd</span> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((arg (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> arg <span class="string">"hw.usermem"</span>)) (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> arg)))
            (multiple-value-bind (exit-code val)
              (system-call+ <span class="string">"sysctl"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> arg))
              (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> exit-code <span class="number">0</span>)
                (<a class="sym-link local-def" href="#def-mf-looking-at" data-sym="MF-LOOKING-AT" title="(defun mf-looking-at (str1 str2 &amp;key (start1 0) (start2 0))
  (unless (typep str1 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str1))
  (unless (typep str2 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str2))
...">mf-looking-at</a> arg val)
                (<a class="sym-link local-def" href="#def-mf-looking-at" data-sym="MF-LOOKING-AT" title="(defun mf-looking-at (str1 str2 &amp;key (start1 0) (start2 0))
  (unless (typep str1 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str1))
  (unless (typep str2 &#39;simple-base-string)
    (error &quot;looking at:  ~a is not a string.&quot; str2))
...">mf-looking-at</a> arg <span class="string">": "</span> <span class="keyword">:start1</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
                (let ((ans (read-from-string val nil nil <span class="keyword">:start</span> (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> <span class="number">2</span> <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>))))
                  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp ans) (equal (mod ans <span class="number">1024</span>) <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-_2F" data-sym="/">/</a> ans <span class="number">1024</span>)))))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))
    <span class="number">0</span>))</pre>
  </div>

<div class="form-block other" id="form-196" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defg *max-mem-usage* (expt <span class="number">2</span> <span class="number">32</span>))</pre>
  </div>

<div class="form-block other" id="form-197" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(defg *gc-min-threshold*
  (min (expt <span class="number">2</span> <span class="number">30</span>) most-positive-fixnum))</pre>
  </div>

<div class="form-block other" id="form-198" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(let ((physical-memory-cached-answer nil))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> physical-memory
    nil
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> physical-memory-cached-answer
      (setq physical-memory-cached-answer (<a class="sym-link local-def" href="#def-meminfo" data-sym="MEMINFO" title="(defun meminfo (&amp;optional arg)
  (assert (or (null arg) (stringp arg)))
  (or
   (our-with-standard-io-syntax
    (case (our-uname)
...">meminfo</a>)))))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>